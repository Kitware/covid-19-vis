!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(function(){try{return require("vtk.js")}catch(t){}}()):"function"==typeof define&&define.amd?define(["vtk.js"],e):"object"==typeof exports?exports.geo=e(function(){try{return require("vtk.js")}catch(t){}}()):t.geo=e(t["vtk.js"])}(self,(function(t){return function(){var e={3267:function(t){
/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */
t.exports=function(){"use strict";function t(){return t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},t.apply(this,arguments)}function e(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function n(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var r;r="function"!=typeof Object.assign?function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e}:Object.assign;var i,o=r,a=["","webkit","Moz","MS","ms","o"],s="undefined"==typeof document?{style:{}}:document.createElement("div"),u="function",l=Math.round,c=Math.abs,f=Date.now;function h(t,e){for(var n,r,i=e[0].toUpperCase()+e.slice(1),o=0;o<a.length;){if((r=(n=a[o])?n+i:e)in t)return r;o++}}i="undefined"==typeof window?{}:window;var d=h(s.style,"touchAction"),p=void 0!==d;function m(){if(!p)return!1;var t={},e=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){return t[n]=!e||i.CSS.supports("touch-action",n)})),t}var g="compute",y="auto",v="manipulation",x="none",_="pan-x",b="pan-y",w=m(),M=/mobile|tablet|ip(ad|hone|od)|android/i,A="ontouchstart"in i,T=void 0!==h(i,"PointerEvent"),E=A&&M.test(navigator.userAgent),C="touch",k="pen",S="mouse",P="kinect",O=25,R=1,L=2,I=4,D=8,N=1,F=2,z=4,B=8,j=16,V=F|z,q=B|j,G=V|q,U=["x","y"],H=["clientX","clientY"];function W(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(void 0!==t.length)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function X(t,e){return typeof t===u?t.apply(e&&e[0]||void 0,e):t}function K(t,e){return t.indexOf(e)>-1}function Q(t){if(K(t,x))return x;var e=K(t,_),n=K(t,b);return e&&n?x:e||n?e?_:b:K(t,v)?v:y}var Y=function(){function t(t,e){this.manager=t,this.set(e)}var e=t.prototype;return e.set=function(t){t===g&&(t=this.compute()),p&&this.manager.element.style&&w[t]&&(this.manager.element.style[d]=t),this.actions=t.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var t=[];return W(this.manager.recognizers,(function(e){X(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),Q(t.join(" "))},e.preventDefaults=function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var r=this.actions,i=K(r,x)&&!w[x],o=K(r,b)&&!w[b],a=K(r,_)&&!w[_];if(i){var s=1===t.pointers.length,u=t.distance<2,l=t.deltaTime<250;if(s&&u&&l)return}if(!a||!o)return i||o&&n&V||a&&n&q?this.preventSrc(e):void 0}},e.preventSrc=function(t){this.manager.session.prevented=!0,t.preventDefault()},t}();function $(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function Z(t){var e=t.length;if(1===e)return{x:l(t[0].clientX),y:l(t[0].clientY)};for(var n=0,r=0,i=0;i<e;)n+=t[i].clientX,r+=t[i].clientY,i++;return{x:l(n/e),y:l(r/e)}}function J(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:l(t.pointers[n].clientX),clientY:l(t.pointers[n].clientY)},n++;return{timeStamp:f(),pointers:e,center:Z(e),deltaX:t.deltaX,deltaY:t.deltaY}}function tt(t,e,n){n||(n=U);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return Math.sqrt(r*r+i*i)}function et(t,e,n){n||(n=U);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return 180*Math.atan2(i,r)/Math.PI}function nt(t,e){return t===e?N:c(t)>=c(e)?t<0?F:z:e<0?B:j}function rt(t,e){var n=e.center,r=t.offsetDelta||{},i=t.prevDelta||{},o=t.prevInput||{};e.eventType!==R&&o.eventType!==I||(i=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=i.x+(n.x-r.x),e.deltaY=i.y+(n.y-r.y)}function it(t,e,n){return{x:e/t||0,y:n/t||0}}function ot(t,e){return tt(e[0],e[1],H)/tt(t[0],t[1],H)}function at(t,e){return et(e[1],e[0],H)+et(t[1],t[0],H)}function st(t,e){var n,r,i,o,a=t.lastInterval||e,s=e.timeStamp-a.timeStamp;if(e.eventType!==D&&(s>O||void 0===a.velocity)){var u=e.deltaX-a.deltaX,l=e.deltaY-a.deltaY,f=it(s,u,l);r=f.x,i=f.y,n=c(f.x)>c(f.y)?f.x:f.y,o=nt(u,l),t.lastInterval=e}else n=a.velocity,r=a.velocityX,i=a.velocityY,o=a.direction;e.velocity=n,e.velocityX=r,e.velocityY=i,e.direction=o}function ut(t,e){var n=t.session,r=e.pointers,i=r.length;n.firstInput||(n.firstInput=J(e)),i>1&&!n.firstMultiple?n.firstMultiple=J(e):1===i&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,s=a?a.center:o.center,u=e.center=Z(r);e.timeStamp=f(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=et(s,u),e.distance=tt(s,u),rt(n,e),e.offsetDirection=nt(e.deltaX,e.deltaY);var l=it(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=l.x,e.overallVelocityY=l.y,e.overallVelocity=c(l.x)>c(l.y)?l.x:l.y,e.scale=a?ot(a.pointers,r):1,e.rotation=a?at(a.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,st(n,e);var h,d=t.element,p=e.srcEvent;$(h=p.composedPath?p.composedPath()[0]:p.path?p.path[0]:p.target,d)&&(d=h),e.target=d}function lt(t,e,n){var r=n.pointers.length,i=n.changedPointers.length,o=e&R&&r-i==0,a=e&(I|D)&&r-i==0;n.isFirst=!!o,n.isFinal=!!a,o&&(t.session={}),n.eventType=e,ut(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function ct(t){return t.trim().split(/\s+/g)}function ft(t,e,n){W(ct(e),(function(e){t.addEventListener(e,n,!1)}))}function ht(t,e,n){W(ct(e),(function(e){t.removeEventListener(e,n,!1)}))}function dt(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||window}var pt=function(){function t(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){X(t.options.enable,[t])&&n.handler(e)},this.init()}var e=t.prototype;return e.handler=function(){},e.init=function(){this.evEl&&ft(this.element,this.evEl,this.domHandler),this.evTarget&&ft(this.target,this.evTarget,this.domHandler),this.evWin&&ft(dt(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&ht(this.element,this.evEl,this.domHandler),this.evTarget&&ht(this.target,this.evTarget,this.domHandler),this.evWin&&ht(dt(this.element),this.evWin,this.domHandler)},t}();function mt(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var r=0;r<t.length;){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return-1}var gt={pointerdown:R,pointermove:L,pointerup:I,pointercancel:D,pointerout:D},yt={2:C,3:k,4:S,5:P},vt="pointerdown",xt="pointermove pointerup pointercancel";i.MSPointerEvent&&!i.PointerEvent&&(vt="MSPointerDown",xt="MSPointerMove MSPointerUp MSPointerCancel");var _t=function(t){function n(){var e,r=n.prototype;return r.evEl=vt,r.evWin=xt,(e=t.apply(this,arguments)||this).store=e.manager.session.pointerEvents=[],e}return e(n,t),n.prototype.handler=function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),i=gt[r],o=yt[t.pointerType]||t.pointerType,a=o===C,s=mt(e,t.pointerId,"pointerId");i&R&&(0===t.button||a)?s<0&&(e.push(t),s=e.length-1):i&(I|D)&&(n=!0),s<0||(e[s]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(s,1))},n}(pt);function bt(t){return Array.prototype.slice.call(t,0)}function wt(t,e,n){for(var r=[],i=[],o=0;o<t.length;){var a=e?t[o][e]:t[o];mt(i,a)<0&&r.push(t[o]),i[o]=a,o++}return n&&(r=e?r.sort((function(t,n){return t[e]>n[e]})):r.sort()),r}var Mt={touchstart:R,touchmove:L,touchend:I,touchcancel:D},At="touchstart touchmove touchend touchcancel",Tt=function(t){function n(){var e;return n.prototype.evTarget=At,(e=t.apply(this,arguments)||this).targetIds={},e}return e(n,t),n.prototype.handler=function(t){var e=Mt[t.type],n=Et.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:C,srcEvent:t})},n}(pt);function Et(t,e){var n,r,i=bt(t.touches),o=this.targetIds;if(e&(R|L)&&1===i.length)return o[i[0].identifier]=!0,[i,i];var a=bt(t.changedTouches),s=[],u=this.target;if(r=i.filter((function(t){return $(t.target,u)})),e===R)for(n=0;n<r.length;)o[r[n].identifier]=!0,n++;for(n=0;n<a.length;)o[a[n].identifier]&&s.push(a[n]),e&(I|D)&&delete o[a[n].identifier],n++;return s.length?[wt(r.concat(s),"identifier",!0),s]:void 0}var Ct={mousedown:R,mousemove:L,mouseup:I},kt="mousedown",St="mousemove mouseup",Pt=function(t){function n(){var e,r=n.prototype;return r.evEl=kt,r.evWin=St,(e=t.apply(this,arguments)||this).pressed=!1,e}return e(n,t),n.prototype.handler=function(t){var e=Ct[t.type];e&R&&0===t.button&&(this.pressed=!0),e&L&&1!==t.which&&(e=I),this.pressed&&(e&I&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:S,srcEvent:t}))},n}(pt),Ot=2500,Rt=25;function Lt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY},r=this.lastTouches;this.lastTouches.push(n),setTimeout((function(){var t=r.indexOf(n);t>-1&&r.splice(t,1)}),Ot)}}function It(t,e){t&R?(this.primaryTouch=e.changedPointers[0].identifier,Lt.call(this,e)):t&(I|D)&&Lt.call(this,e)}function Dt(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(e-i.x),a=Math.abs(n-i.y);if(o<=Rt&&a<=Rt)return!0}return!1}var Nt=function(){return function(t){function r(e,r){var i;return(i=t.call(this,e,r)||this).handler=function(t,e,r){var o=r.pointerType===C,a=r.pointerType===S;if(!(a&&r.sourceCapabilities&&r.sourceCapabilities.firesTouchEvents)){if(o)It.call(n(n(i)),e,r);else if(a&&Dt.call(n(n(i)),r))return;i.callback(t,e,r)}},i.touch=new Tt(i.manager,i.handler),i.mouse=new Pt(i.manager,i.handler),i.primaryTouch=null,i.lastTouches=[],i}return e(r,t),r.prototype.destroy=function(){this.touch.destroy(),this.mouse.destroy()},r}(pt)}();function Ft(t){var e=t.options.inputClass;return new(e||(T?_t:E?Tt:A?Nt:Pt))(t,lt)}function zt(t,e,n){return!!Array.isArray(t)&&(W(t,n[e],n),!0)}var Bt=1,jt=2,Vt=4,qt=8,Gt=qt,Ut=16,Ht=32,Wt=1;function Xt(){return Wt++}function Kt(t,e){var n=e.manager;return n?n.get(t):t}function Qt(t){return t&Ut?"cancel":t&qt?"end":t&Vt?"move":t&jt?"start":""}var Yt=function(){function e(e){void 0===e&&(e={}),this.options=t({enable:!0},e),this.id=Xt(),this.manager=null,this.state=Bt,this.simultaneous={},this.requireFail=[]}var n=e.prototype;return n.set=function(t){return o(this.options,t),this.manager&&this.manager.touchAction.update(),this},n.recognizeWith=function(t){if(zt(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Kt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},n.dropRecognizeWith=function(t){return zt(t,"dropRecognizeWith",this)||(t=Kt(t,this),delete this.simultaneous[t.id]),this},n.requireFailure=function(t){if(zt(t,"requireFailure",this))return this;var e=this.requireFail;return-1===mt(e,t=Kt(t,this))&&(e.push(t),t.requireFailure(this)),this},n.dropRequireFailure=function(t){if(zt(t,"dropRequireFailure",this))return this;t=Kt(t,this);var e=mt(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},n.hasRequireFailures=function(){return this.requireFail.length>0},n.canRecognizeWith=function(t){return!!this.simultaneous[t.id]},n.emit=function(t){var e=this,n=this.state;function r(n){e.manager.emit(n,t)}n<qt&&r(e.options.event+Qt(n)),r(e.options.event),t.additionalEvent&&r(t.additionalEvent),n>=qt&&r(e.options.event+Qt(n))},n.tryEmit=function(t){if(this.canEmit())return this.emit(t);this.state=Ht},n.canEmit=function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(Ht|Bt)))return!1;t++}return!0},n.recognize=function(t){var e=o({},t);if(!X(this.options.enable,[this,e]))return this.reset(),void(this.state=Ht);this.state&(Gt|Ut|Ht)&&(this.state=Bt),this.state=this.process(e),this.state&(jt|Vt|qt|Ut)&&this.tryEmit(e)},n.process=function(t){},n.getTouchAction=function(){},n.reset=function(){},e}(),$t=function(n){function r(e){var r;return void 0===e&&(e={}),(r=n.call(this,t({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},e))||this).pTime=!1,r.pCenter=!1,r._timer=null,r._input=null,r.count=0,r}e(r,n);var i=r.prototype;return i.getTouchAction=function(){return[v]},i.process=function(t){var e=this,n=this.options,r=t.pointers.length===n.pointers,i=t.distance<n.threshold,o=t.deltaTime<n.time;if(this.reset(),t.eventType&R&&0===this.count)return this.failTimeout();if(i&&o&&r){if(t.eventType!==I)return this.failTimeout();var a=!this.pTime||t.timeStamp-this.pTime<n.interval,s=!this.pCenter||tt(this.pCenter,t.center)<n.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,s&&a?this.count+=1:this.count=1,this._input=t,0==this.count%n.taps)return this.hasRequireFailures()?(this._timer=setTimeout((function(){e.state=Gt,e.tryEmit()}),n.interval),jt):Gt}return Ht},i.failTimeout=function(){var t=this;return this._timer=setTimeout((function(){t.state=Ht}),this.options.interval),Ht},i.reset=function(){clearTimeout(this._timer)},i.emit=function(){this.state===Gt&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},r}(Yt),Zt=function(n){function r(e){return void 0===e&&(e={}),n.call(this,t({pointers:1},e))||this}e(r,n);var i=r.prototype;return i.attrTest=function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},i.process=function(t){var e=this.state,n=t.eventType,r=e&(jt|Vt),i=this.attrTest(t);return r&&(n&D||!i)?e|Ut:r||i?n&I?e|qt:e&jt?e|Vt:jt:Ht},r}(Yt);function Jt(t){return t===j?"down":t===B?"up":t===F?"left":t===z?"right":""}var te=function(n){function r(e){var r;return void 0===e&&(e={}),(r=n.call(this,t({event:"pan",threshold:10,pointers:1,direction:G},e))||this).pX=null,r.pY=null,r}e(r,n);var i=r.prototype;return i.getTouchAction=function(){var t=this.options.direction,e=[];return t&V&&e.push(b),t&q&&e.push(_),e},i.directionTest=function(t){var e=this.options,n=!0,r=t.distance,i=t.direction,o=t.deltaX,a=t.deltaY;return i&e.direction||(e.direction&V?(i=0===o?N:o<0?F:z,n=o!==this.pX,r=Math.abs(t.deltaX)):(i=0===a?N:a<0?B:j,n=a!==this.pY,r=Math.abs(t.deltaY))),t.direction=i,n&&r>e.threshold&&i&e.direction},i.attrTest=function(t){return Zt.prototype.attrTest.call(this,t)&&(this.state&jt||!(this.state&jt)&&this.directionTest(t))},i.emit=function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Jt(t.direction);e&&(t.additionalEvent=this.options.event+e),n.prototype.emit.call(this,t)},r}(Zt),ee=function(n){function r(e){return void 0===e&&(e={}),n.call(this,t({event:"swipe",threshold:10,velocity:.3,direction:V|q,pointers:1},e))||this}e(r,n);var i=r.prototype;return i.getTouchAction=function(){return te.prototype.getTouchAction.call(this)},i.attrTest=function(t){var e,r=this.options.direction;return r&(V|q)?e=t.overallVelocity:r&V?e=t.overallVelocityX:r&q&&(e=t.overallVelocityY),n.prototype.attrTest.call(this,t)&&r&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers===this.options.pointers&&c(e)>this.options.velocity&&t.eventType&I},i.emit=function(t){var e=Jt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)},r}(Zt),ne=function(n){function r(e){return void 0===e&&(e={}),n.call(this,t({event:"pinch",threshold:0,pointers:2},e))||this}e(r,n);var i=r.prototype;return i.getTouchAction=function(){return[x]},i.attrTest=function(t){return n.prototype.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&jt)},i.emit=function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}n.prototype.emit.call(this,t)},r}(Zt),re=function(n){function r(e){return void 0===e&&(e={}),n.call(this,t({event:"rotate",threshold:0,pointers:2},e))||this}e(r,n);var i=r.prototype;return i.getTouchAction=function(){return[x]},i.attrTest=function(t){return n.prototype.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&jt)},r}(Zt),ie=function(n){function r(e){var r;return void 0===e&&(e={}),(r=n.call(this,t({event:"press",pointers:1,time:251,threshold:9},e))||this)._timer=null,r._input=null,r}e(r,n);var i=r.prototype;return i.getTouchAction=function(){return[y]},i.process=function(t){var e=this,n=this.options,r=t.pointers.length===n.pointers,i=t.distance<n.threshold,o=t.deltaTime>n.time;if(this._input=t,!i||!r||t.eventType&(I|D)&&!o)this.reset();else if(t.eventType&R)this.reset(),this._timer=setTimeout((function(){e.state=Gt,e.tryEmit()}),n.time);else if(t.eventType&I)return Gt;return Ht},i.reset=function(){clearTimeout(this._timer)},i.emit=function(t){this.state===Gt&&(t&&t.eventType&I?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=f(),this.manager.emit(this.options.event,this._input)))},r}(Yt),oe={domEvents:!1,touchAction:g,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},ae=[[re,{enable:!1}],[ne,{enable:!1},["rotate"]],[ee,{direction:V}],[te,{direction:V},["swipe"]],[$t],[$t,{event:"doubletap",taps:2},["tap"]],[ie]],se=1,ue=2;function le(t,e){var n,r=t.element;r.style&&(W(t.options.cssProps,(function(i,o){n=h(r.style,o),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""})),e||(t.oldCssProps={}))}function ce(t,e){var n=document.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}var fe=function(){function t(t,e){var n=this;this.options=o({},oe,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=Ft(this),this.touchAction=new Y(this,this.options.touchAction),le(this,!0),W(this.options.recognizers,(function(t){var e=n.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}var e=t.prototype;return e.set=function(t){return o(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},e.stop=function(t){this.session.stopped=t?ue:se},e.recognize=function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var r=this.recognizers,i=e.curRecognizer;(!i||i&&i.state&Gt)&&(e.curRecognizer=null,i=null);for(var o=0;o<r.length;)n=r[o],e.stopped===ue||i&&n!==i&&!n.canRecognizeWith(i)?n.reset():n.recognize(t),!i&&n.state&(jt|Vt|qt)&&(e.curRecognizer=n,i=n),o++}},e.get=function(t){if(t instanceof Yt)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event===t)return e[n];return null},e.add=function(t){if(zt(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},e.remove=function(t){if(zt(t,"remove",this))return this;var e=this.get(t);if(t){var n=this.recognizers,r=mt(n,e);-1!==r&&(n.splice(r,1),this.touchAction.update())}return this},e.on=function(t,e){if(void 0===t||void 0===e)return this;var n=this.handlers;return W(ct(t),(function(t){n[t]=n[t]||[],n[t].push(e)})),this},e.off=function(t,e){if(void 0===t)return this;var n=this.handlers;return W(ct(t),(function(t){e?n[t]&&n[t].splice(mt(n[t],e),1):delete n[t]})),this},e.emit=function(t,e){this.options.domEvents&&ce(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](e),r++}},e.destroy=function(){this.element&&le(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},t}(),he={touchstart:R,touchmove:L,touchend:I,touchcancel:D},de="touchstart",pe="touchstart touchmove touchend touchcancel",me=function(t){function n(){var e,r=n.prototype;return r.evTarget=de,r.evWin=pe,(e=t.apply(this,arguments)||this).started=!1,e}return e(n,t),n.prototype.handler=function(t){var e=he[t.type];if(e===R&&(this.started=!0),this.started){var n=ge.call(this,t,e);e&(I|D)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:C,srcEvent:t})}},n}(pt);function ge(t,e){var n=bt(t.touches),r=bt(t.changedTouches);return e&(I|D)&&(n=wt(n.concat(r),"identifier",!0)),[n,r]}function ye(t,e,n){var r="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",i=window.console&&(window.console.warn||window.console.log);return i&&i.call(window.console,r,n),t.apply(this,arguments)}}var ve=ye((function(t,e,n){for(var r=Object.keys(e),i=0;i<r.length;)(!n||n&&void 0===t[r[i]])&&(t[r[i]]=e[r[i]]),i++;return t}),"extend","Use `assign`."),xe=ye((function(t,e){return ve(t,e,!0)}),"merge","Use `assign`.");function _e(t,e,n){var r,i=e.prototype;(r=t.prototype=Object.create(i)).constructor=t,r._super=i,n&&o(r,n)}function be(t,e){return function(){return t.apply(e,arguments)}}return function(){var e=function(e,n){return void 0===n&&(n={}),new fe(e,t({recognizers:ae.concat()},n))};return e.VERSION="2.0.17-rc",e.DIRECTION_ALL=G,e.DIRECTION_DOWN=j,e.DIRECTION_LEFT=F,e.DIRECTION_RIGHT=z,e.DIRECTION_UP=B,e.DIRECTION_HORIZONTAL=V,e.DIRECTION_VERTICAL=q,e.DIRECTION_NONE=N,e.DIRECTION_DOWN=j,e.INPUT_START=R,e.INPUT_MOVE=L,e.INPUT_END=I,e.INPUT_CANCEL=D,e.STATE_POSSIBLE=Bt,e.STATE_BEGAN=jt,e.STATE_CHANGED=Vt,e.STATE_ENDED=qt,e.STATE_RECOGNIZED=Gt,e.STATE_CANCELLED=Ut,e.STATE_FAILED=Ht,e.Manager=fe,e.Input=pt,e.TouchAction=Y,e.TouchInput=Tt,e.MouseInput=Pt,e.PointerEventInput=_t,e.TouchMouseInput=Nt,e.SingleTouchInput=me,e.Recognizer=Yt,e.AttrRecognizer=Zt,e.Tap=$t,e.Pan=te,e.Swipe=ee,e.Pinch=ne,e.Rotate=re,e.Press=ie,e.on=ft,e.off=ht,e.each=W,e.merge=xe,e.extend=ve,e.bindFn=be,e.assign=o,e.inherit=_e,e.bindFn=be,e.prefixed=h,e.toArray=bt,e.inArray=mt,e.uniqueArray=wt,e.splitStr=ct,e.boolOrFn=X,e.hasParent=$,e.addEventListeners=ft,e.removeEventListeners=ht,e.defaults=o({},oe,{preset:ae}),e}()}()},8695:function(t){t.exports={momentum:"geo_action_momentum",pan:"geo_action_pan",rotate:"geo_action_rotate",select:"geo_action_select",unzoomselect:"geo_action_unzoomselect",zoom:"geo_action_zoom",zoomrotate:"geo_action_zoom_rotate",zoomselect:"geo_action_zoomselect",annotation_edit_handle:"geo_annotation_edit_handle",annotation_cursor:"geo_annotation_cursor"}},6978:function(t,e,n){var r=n(5616),i=n(6409),o=n(8695),a=n(5325),s=n(642),u=n(6546),l=0,c={create:"create",done:"done",highlight:"highlight",edit:"edit",cursor:"cursor"},f="annotationAction",h={fill:!0,fillColor:function(t){return t.selected?{r:0,g:1,b:1}:{r:.3,g:.3,b:.3}},fillOpacity:function(t){return t.selected?.5:.25},radius:function(t){return"edge"===t.type||"rotate"===t.type?8:10},scaled:!1,stroke:!0,strokeColor:{r:0,g:0,b:1},strokeOpacity:1,strokeWidth:function(t){return"edge"===t.type||"rotate"===t.type?2:3},rotateHandleOffset:24,rotateHandleRotation:-Math.PI/4,resizeHandleOffset:48,resizeHandleRotation:-Math.PI/4,handles:{vertex:!0,edge:!0,center:!0,rotate:!0,resize:!0}},d=function(t,e){"use strict";if(!(this instanceof d))return new d(t,e);var n=this,m=r.extend(!0,{},this.constructor.defaults,e||{}),g=m.annotationId;delete m.annotationId,void 0===g||m.layer&&m.layer.annotationById(g)?(l+=1,void 0!==g&&console.warn("Annotation id "+g+" is in use; using "+l+" instead."),g=l):g>l&&(l=g);var y=m.name||t.charAt(0).toUpperCase()+t.substr(1)+" "+g,v=m.label||null,x=m.description||void 0,_=t,b=m.layer,w=m.state||c.done;delete m.state,delete m.layer,delete m.name,delete m.label,delete m.description,m.constraint&&(s.isFunction(m.constraint)?this._selectionConstraint=m.constraint:this._selectionConstraint=p(m.constraint)),this._exit=function(){n.layer()&&n.layer().geoOff(i.mousemove,n._cursorHandleMousemove)},this.id=function(){return g},this.newId=function(){return g=l+=1,n},this.name=function(t){return void 0===t?y:(null!==t&&(""+t).trim()&&(t=(""+t).trim())!==y&&(y=t,n.modified()),n)},this.label=function(t,e){return void 0===t?null!==v||e?v:y:(t!==v&&(v=t,n.modified()),n)},this._labelPosition=function(){return s.centerFromPerimeter(n._coordinates())},this._rotateHandlePosition=function(t,e){var r,i,o,a=n.layer().map(),u=n._coordinates(),l=s.centerFromPerimeter(n._coordinates()),c=l?a.gcsToDisplay(l,null):void 0,f=0;if(l){for(t=t||0,e=e||0,u=u.outer?u.outer:u,r=0;r<u.length;r+=1)i=a.gcsToDisplay(u[r],null),f=Math.max(f,Math.pow(i.x-c.x,2)+Math.pow(i.y-c.y,2));return o=Math.sqrt(f)+t,i=a.displayToGcs({x:c.x+o*Math.cos(e),y:c.y-o*Math.sin(e)},null)}},this.labelRecord=function(){var t=n.options("showLabel");if(t){var e=n.state();if(!(!0===t&&e===c.create||!0!==t&&t.indexOf(e)<0)){var r=n.labelStyle(),i={text:n.label(),position:n._labelPosition()};if(i.position)return r&&(i.style=r),i}}},this.description=function(t){return void 0===t?x:(t!==x&&(x=t,n.modified()),n)},this.layer=function(t){return void 0===t?b:(b=t,n)},this._cursorHandleMousemove=function(t){n.layer()._handleMouseMoveModifiers(t);var e=n._cursorCenter,r=t.mapgcs.x-e.x,i=t.mapgcs.y-e.y;if(r||i){var o=n._coordinates(),a=n._coordinatesMapFunc(o,(function(t){return{x:t.x+r,y:t.y+i}}));return n._coordinates(a),n._cursorCenter=t.mapgcs,n.modified(),n.draw(),!0}return!1},this.state=function(t){if(void 0===t)return w;if(w!==t&&(w=t,n.layer()&&n.layer().geoTrigger(i.annotation.state,{annotation:n}),n.layer()&&n.layer().geoOff(i.mousemove,n._cursorHandleMousemove),w===c.cursor))n._cursorCenter=s.centerFromPerimeter(n._coordinates()),n.layer()&&n.layer().geoOn(i.mousemove,n._cursorHandleMousemove);return n},this.actions=function(t){switch(t||(t=n.state()),t){case c.edit:return[{action:o.annotation_edit_handle,name:"annotation edit",owner:f,input:"left"},{action:o.annotation_edit_handle,name:"annotation edit",owner:f,input:"pan"}];case c.cursor:return[{action:o.annotation_cursor,name:"annotation cursor",owner:f,input:"pan"},{action:o.annotation_cursor,name:"annotation cursor",owner:f,input:"left"}];default:return[]}},this.processAction=function(t){},this.processEditAction=function(t){if(t&&n._editHandle&&n._editHandle.handle)switch(n._editHandle.handle.type){case"vertex":return n._processEditActionVertex(t);case"edge":return n._processEditActionEdge(t);case"center":return n._processEditActionCenter(t);case"rotate":return n._processEditActionRotate(t);case"resize":return n._processEditActionResize(t)}},this._copyOfCoordinates=function(t){return(t=t||n._coordinates()).outer?{outer:t.outer.slice(),inner:(t.inner||[]).map((function(t){return t.slice()}))}:t.slice()},this.selectEditHandle=function(t,e){e&&n._editHandle&&n._editHandle.handle&&n._editHandle.handle.selected&&(n._editHandle.handle.selected=!1),t.selected=e;var r=(n._editHandle||{}).amountRotated||0;return n._editHandle={handle:t,startCoordinates:n._copyOfCoordinates(),center:s.centerFromPerimeter(n._coordinates()),rotatePosition:n._rotateHandlePosition(t.style.rotateHandleOffset,t.style.rotateHandleRotation+r),startAmountRotated:r,amountRotated:r,resizePosition:n._rotateHandlePosition(t.style.resizeHandleOffset,t.style.resizeHandleRotation)},n.layer()&&n.layer().geoTrigger(i.annotation.select_edit_handle,{annotation:n,handle:n._editHandle,enable:e}),n},this.options=function(t,e){if(void 0===t)return m;if("string"==typeof t&&void 0===e)return m[t];var o;if(void 0===e?(o=void 0!==t[n._coordinateOption],m=r.extend(!0,m,t),["style","createStyle","editStyle","editHandleStyle","labelStyle","highlightStyle","cursorStyle"].forEach((function(e){void 0!==t[e]&&r.extend(m[e],t[e])}))):(o=t===n._coordinateOption,m[t]=e),m.coordinates){var a=m.coordinates;delete m.coordinates,n._coordinates(a)}if(void 0!==m.name){var s=m.name;delete m.name,n.name(s)}if(void 0!==m.label){var u=m.label;delete m.label,n.label(u)}if(void 0!==m.description){var l=m.description;delete m.description,n.description(l)}return n.modified(),o&&n.layer()&&n.layer().geoTrigger(i.annotation.coordinates,{annotation:n}),n},this.style=function(t,e,i){return i=i||"style",void 0===t?m[i]:"string"==typeof t&&void 0===e?(m[i]||{})[t]:(void 0===m[i]&&(m[i]={}),void 0===e?m[i]=r.extend(!0,m[i],t):m[i][t]=e,n.modified(),n)},["createStyle","editStyle","editHandleStyle","labelStyle","highlightStyle","cursorStyle"].forEach((function(t){n[t]=function(e,r){return n.style(e,r,t)}})),this.styleForState=function(t){return(t=t||n.state())===c.edit||t===c.highlight?r.extend({},m.style,m[t+"Style"]):t===c.create?r.extend({},m.style,m.editStyle,m[t+"Style"]):t===c.cursor?r.extend({},m.style,m.editStyle,m.createStyle,m[t+"Style"]):m[t+"Style"]||m.style||{}},this.type=function(){return _},this.features=function(){return[]},this.mouseClick=function(t){},this.mouseClickEdit=function(t){},this.mouseMove=function(t){},this._coordinates=function(t){return[]},this._coordinateOption="vertices",this.coordinates=function(t){var e=n._coordinates()||[];if(e.length||e.outer&&e.outer.length||(e=[]),n.layer()){var r=n.layer().map();(t=null===t?r.gcs():void 0===t?r.ingcs():t)!==r.gcs()&&(e=n._convertCoordinates(r.gcs(),t,e))}return e},this.modified=function(){return n.layer()&&n.layer().modified(),n},this.draw=function(){return n.layer()&&(n.layer()._update(),n.layer().draw()),n},this._geojsonStyles=function(){return["closed","fill","fillColor","fillOpacity","lineCap","lineJoin","radius","stroke","strokeColor","strokeOffset","strokeOpacity","strokeWidth"]},this._geojsonCoordinates=function(t){return[]},this._geojsonGeometryType=function(){return""},this.geojson=function(t,e){var r,i,o,a=n._geojsonCoordinates(t),l=n._geojsonGeometryType(),c=n._geojsonStyles(),f=n.options("style")||{},h=n.labelStyle()||{};if(a&&a.length&&l){var d={type:"Feature",geometry:{type:l,coordinates:a},properties:{annotationType:_,name:n.name(),annotationId:n.id()}};for(v&&(d.properties.label=v),x&&(d.properties.description=x),!1===n.options("showLabel")&&(d.properties.showLabel=n.options("showLabel")),r=0;r<c.length;r+=1)if(i=c[r],void 0!==(o=s.ensureFunction(f[i])())){var p=((n.constructor.defaults||{}).style||{})[i];i.toLowerCase().match(/color$/)&&(o=s.convertColorToHex(o,"needed"),p=void 0!==p?s.convertColorToHex(p,"needed"):p),o!==p&&(d.properties[i]=o)}for(r=0;r<u.usedStyles.length;r+=1)i=u.usedStyles[r],void 0!==(o=s.ensureFunction(h[i])())&&(i.toLowerCase().match(/color$/)&&(o=s.convertColorToHex(o,"needed")),d.properties["label"+i.charAt(0).toUpperCase()+i.slice(1)]=o);if(e){var m=n.layer().map();t=null===t?m.gcs():void 0===t?m.ingcs():t,d.crs={type:"name",properties:{type:"proj4",name:t}}}return d}},this._addEditHandles=function(t,e,i,o){var a,u=r.extend({},h,n.editHandleStyle()),l=s.ensureFunction(u.handles)()||{},c=n._editHandle&&n._editHandle.handle&&n._editHandle.handle.selected?n._editHandle.handle:void 0;i=r.extend({},i),Object.keys(l).forEach((function(t){!1===l[t]&&(i[t]=!1)})),t[3]||(t[3]={point:[]}),a=t[3].point,(e.outer?[e.outer].concat(e.inner||[]):[e]).forEach((function(t,e){t.forEach((function(n,s){!1!==i.vertex&&a.push(r.extend({},n,{type:"vertex",index:s,vindex:e,style:u,editHandle:!0})),!1===i.edge||s===t.length-1||n.x===t[s+1].x&&n.y===t[s+1].y||a.push(r.extend({x:(n.x+t[s+1].x)/2,y:(n.y+t[s+1].y)/2},{type:"edge",index:s,vindex:e,style:u,editHandle:!0})),!1===i.edge||o||s!==t.length-1||n.x===t[0].x&&n.y===t[0].y||a.push(r.extend({x:(n.x+t[0].x)/2,y:(n.y+t[0].y)/2},{type:"edge",index:s,vindex:e,style:u,editHandle:!0}))}))})),!1!==i.center&&a.push(r.extend({},s.centerFromPerimeter(n._coordinates()),{type:"center",style:u,editHandle:!0})),!1!==i.rotate&&(a.push(r.extend(n._rotateHandlePosition(u.rotateHandleOffset,u.rotateHandleRotation+(c&&"rotate"===c.type?n._editHandle.amountRotated:0)),{type:"rotate",style:u,editHandle:!0})),!n._editHandle||c&&"rotate"===c.type||(n._editHandle.amountRotated=0)),!1!==i.resize&&a.push(r.extend(n._rotateHandlePosition(u.resizeHandleOffset,u.resizeHandleRotation),{type:"resize",style:u,editHandle:!0})),c&&a.forEach((function(t){t.type===c.type&&t.index===c.index&&t.vindex===c.vindex&&(t.selected=!0)}))},this._coordinatesMapFunc=function(t,e){return t.outer?{outer:t.outer.map(e),inner:(t.inner||[]).map((function(t){return t.map(e)}))}:t.map(e)},this._firstPointDifferent=function(t,e){return t=t.outer?t.outer:t,e=e.outer?e.outer:e,t[0].x!==e[0].x||t[0].y!==e[0].y},this._processEditActionCenter=function(t){var e=n._editHandle.startCoordinates,r=t.mouse.mapgcs.x-t.state.origin.mapgcs.x,i=t.mouse.mapgcs.y-t.state.origin.mapgcs.y,o=n._coordinates(),a=n._coordinatesMapFunc(e,(function(t){return{x:t.x+r,y:t.y+i}}));return!!n._firstPointDifferent(a,o)&&(n._coordinates(a),!0)},this._processEditActionRotate=function(t){var e=n._editHandle,r=e.startCoordinates,i=t.mouse.mapgcs.x-t.state.origin.mapgcs.x,o=t.mouse.mapgcs.y-t.state.origin.mapgcs.y,a=Math.atan2(e.rotatePosition.y-e.center.y,e.rotatePosition.x-e.center.x),s=Math.atan2(e.rotatePosition.y+o-e.center.y,e.rotatePosition.x+i-e.center.x)-a,u=n._coordinates(),l=n._coordinatesMapFunc(r,(function(t){var n=t.x-e.center.x,r=t.y-e.center.y;return{x:n*Math.cos(s)-r*Math.sin(s)+e.center.x,y:n*Math.sin(s)+r*Math.cos(s)+e.center.y}}));return!!n._firstPointDifferent(l,u)&&(n._coordinates(l),e.amountRotated=e.startAmountRotated+s,!0)},this._processEditActionResize=function(t){var e=n._editHandle,r=e.startCoordinates,i=t.mouse.mapgcs.x-t.state.origin.mapgcs.x,o=t.mouse.mapgcs.y-t.state.origin.mapgcs.y,a=n.layer().map(),s=a.gcsToDisplay(e.center,null),u=a.gcsToDisplay(e.resizePosition,null),l=a.gcsToDisplay({x:e.resizePosition.x+i,y:e.resizePosition.y+o},null),c=Math.pow(Math.pow(u.y-s.y,2)+Math.pow(u.x-s.x,2),.5)-e.handle.style.resizeHandleOffset,f=Math.pow(Math.pow(l.y-s.y,2)+Math.pow(l.x-s.x,2),.5)-e.handle.style.resizeHandleOffset,h=n._coordinates();if(f&&c){var d=f/c,p=n._coordinatesMapFunc(r,(function(t){return{x:(t.x-e.center.x)*d+e.center.x,y:(t.y-e.center.y)*d+e.center.y}}));if(n._firstPointDifferent(p,h))return n._coordinates(p),!0}return!1},this._processEditActionEdge=function(t){var e=n._editHandle,r=e.handle.index,i=e.handle.vindex,o=n._coordinates();o.outer?(i?o.inner[i-1]:o.outer).splice(r+1,0,{x:e.handle.x,y:e.handle.y}):o.splice(r+1,0,{x:e.handle.x,y:e.handle.y});return e.handle.type="vertex",e.handle.index+=1,e.startCoordinates=n._copyOfCoordinates(o),n.modified(),!0},this._processEditActionVertex=function(t,e){var r,o,a=n._editHandle,s=a.handle.index,u=a.handle.vindex,l=a.startCoordinates,c=n._coordinates(),f=c.outer?u?c.inner[u-1]:c.outer:c,h=f.length,d=f[s],p=t.mouse.mapgcs.x-t.state.origin.mapgcs.x,m=t.mouse.mapgcs.y-t.state.origin.mapgcs.y,g=n.layer(),y=g.options("adjacentPointProximity");return l.outer&&(l=u?l.inner[u-1]:l.outer),f[s]={x:l[s].x+p,y:l[s].y+m},g.displayDistance(f[s],null,l[s],null)<=y||(g.displayDistance(f[s],null,f[(s+1)%f.length],null)<=y?r=(s+1)%f.length:g.displayDistance(f[s],null,f[(s+f.length-1)%f.length],null)<=y&&(r=(s+f.length-1)%f.length)),o=0===r&&s===f.length-1||r===f.length-1&&0===s,!1===e&&o&&(r=void 0),void 0!==r&&f.length>(e||n.options("style").closed?3:2)&&(f[s]={x:f[r].x,y:f[r].y},t.event===i.actionup&&(e&&o&&(n.options("style").closed=!0),f.splice(s,1))),(f.length!==h||f[s].x!==d.x||f[s].y!==d.y)&&(n._coordinates(c),!0)},this._convertCoordinates=function(t,e,r){var i=!r;return r=(r=r||n._coordinates()).outer?{outer:a.transformCoordinates(t,e,r.outer),inner:(r.inner||[]).map((function(n){return a.transformCoordinates(t,e,n)}))}:a.transformCoordinates(t,e,r),i&&n._coordinates(r),r}};function p(t){var e=Array.isArray(t)?t:[t];return function(t,n,r,i,o,a){var s,u=t;if(r||(r=[{x:n.x,y:n.y},{x:t.x,y:n.y},{x:t.x,y:t.y},{x:n.x,y:t.y}]),i){var l,c,f=(a+1)%4,h=(a+2)%4,d=(a+3)%4,p=Math.pow(Math.pow(r[a].x-r[f].x,2)+Math.pow(r[a].y-r[f].y,2),.5),m=Math.pow(Math.pow(r[a].x-r[d].x,2)+Math.pow(r[a].y-r[d].y,2),.5),g=Math.abs(p*m);e.forEach((function(t){var e,n;if(t.width?(e=t.width,n=t.height):n=(e=Math.pow(g*t,.5))/t,e!==n&&!(a%2)){var r=[n,e];e=r[0],n=r[1]}var i=Math.pow(e-m,2)+Math.pow(n-p,2);(void 0===s||i<s)&&(s=i,l={w:e,h:n})}));var y=o[f],v={x:-l.w*Math.cos(y),y:-l.w*Math.sin(y)},x=o[a],_={x:-l.h*Math.cos(x),y:-l.h*Math.sin(x)};switch(i){case"vertex":r[a].x=r[h].x+v.x+_.x,r[a].y=r[h].y+v.y+_.y,r[f].x=r[h].x+v.x,r[f].y=r[h].y+v.y,r[d].x=r[h].x+_.x,r[d].y=r[h].y+_.y;break;case"edge":c={x:.5*(r[h].x+r[d].x),y:.5*(r[h].y+r[d].y)},r[h].x=c.x+_.x/2,r[h].y=c.y+_.y/2,r[a].x=c.x+v.x-_.x/2,r[a].y=c.y+v.y-_.y/2,r[f].x=c.x+v.x+_.x/2,r[f].y=c.y+v.y+_.y/2,r[d].x=c.x-_.x/2,r[d].y=c.y-_.y/2}}else{var b=Math.abs((t.x-n.x)*(t.y-n.y));e.forEach((function(e){var r,i;e.width?(r=e.width,i=e.height):i=(r=Math.pow(b*e,.5))/e;var o={x:n.x+Math.sign(t.x-n.x)*r,y:n.y+Math.sign(t.y-n.y)*i},a=Math.pow(o.x-t.x,2)+Math.pow(o.y-t.y,2);(void 0===s||a<s)&&(s=a,u=o)})),r[0].y=r[1].y=n.y,r[0].x=r[3].x=n.x,r[1].x=r[2].x=u.x,r[2].y=r[3].y=u.y}return{corners:r,origin:n,pos:u}}}d.defaults={showLabel:!0},t.exports={state:c,actionOwner:f,annotation:d,_editHandleFeatureLevel:3,defaultEditHandleStyle:h,constrainAspectRatio:p,annotationActionOwner:f,continuousVerticesActions:function(t,e,n,r,i){return n||(n=t.state()),n===c.create?[{action:o["annotation_"+r],name:r+" create",owner:f,input:"left"},{action:o["annotation_"+r],name:r+" create",owner:f,input:"pan"}]:e.apply(t,i)},continuousVerticesProcessAction:function(t,e,n){var r=t.layer();if(t.state()===c.create&&r&&e.state.action===o["annotation_"+n]){var a=r.options("continuousPointProximity"),s=r.options("continuousPointCollinearity"),u=r.options("continuousCloseProximity");if(a||0===a){var l=t.options("vertices"),f=!1;if(!l.length)return l.push(e.mouse.mapgcs),l.push(e.mouse.mapgcs),!0;var h=r.displayDistance(l[l.length-2],null,e.mouse.map,"display");if(h&&h>a){if(l.length>=(t._lastClickVertexCount||1)+3){var d=r.displayDistance(l[l.length-3],null,l[l.length-2],null),p=h,m=r.displayDistance(l[l.length-3],null,e.mouse.map,"display");if(d&&m)(m*m-d*d-p*p)/(2*d*p)>Math.cos(s)&&l.pop()}l[l.length-1]=e.mouse.mapgcs,l.push(e.mouse.mapgcs),f=!0}return(u||0===u)&&e.event===i.actionup&&(!0===u||r.displayDistance(l[0],null,e.mouse.map,"display")<=a)?l.length<3+("polygon"===n?1:0)?"remove":(l.pop(),t.state(c.done),"done"):f}}}}},9894:function(t,e,n){var r=n(5616),i=n(4626),o=n(1098).registerAnnotation,a=n(2225),s=n(3656),u=function(t,e){"use strict";if(!(this instanceof u))return new u(t,e);t=r.extend(!0,{},this.constructor.defaults,t,{constraint:1}),s.call(this,t,e||"circle")};i(u,s),u.defaults=r.extend({},s.defaults,{});var l={};l[a.capabilities.feature]=!0,o("circle",u,l),t.exports=u},3656:function(t,e,n){var r=n(5616),i=n(4626),o=n(1098).registerAnnotation,a=n(2225),s=n(6978).state,u=n(4019),l=function(t,e){"use strict";if(!(this instanceof l))return new l(t,e);t=r.extend(!0,{},this.constructor.defaults,t),u.call(this,t,e||"ellipse");var n=this;this.features=function(){var t,e=n.options(),i=n.state();if(t=[],e.corners&&e.corners.length>=4){var o=n.styleForState(i),u=Math.pow(Math.pow(e.corners[0].x-e.corners[1].x,2)+Math.pow(e.corners[0].y-e.corners[1].y,2),.5),l=Math.pow(Math.pow(e.corners[0].x-e.corners[3].x,2)+Math.pow(e.corners[0].y-e.corners[3].y,2),.5),c=Math.max(u,l)/2/n.layer().map().unitsPerPixel(0),f=u?l/u:1e20,h=-Math.atan2(e.corners[1].y-e.corners[0].y,e.corners[1].x-e.corners[0].x);t=[{marker:{x:(e.corners[0].x+e.corners[1].x+e.corners[2].x+e.corners[3].x)/4,y:(e.corners[0].y+e.corners[1].y+e.corners[2].y+e.corners[3].y)/4,style:r.extend({},o,{radius:c,symbolValue:f,rotation:h,strokeOffset:0,radiusIncludesStroke:!1,scaleWithZoom:a.scaleMode.fill,rotateWithMap:!0,strokeOpacity:!1===o.stroke?0:o.strokeOpacity,fillOpacity:!1===o.fill?0:o.fillOpacity})}}]}return i===s.edit&&n._addEditHandles(t,e.corners),t},this.toPolygonList=function(t){var e=n._coordinates();if(e.length<3)return[];var r=t&&t.tolerance||0;if(!r){var i=n.layer().map();r=t&&t.pixelTolerance?i.unitsPerPixel(i.zoom())*t.pixelTolerance:.1*i.unitsPerPixel(i.zoomRange().max)}for(var o=Math.pow(Math.pow(e[0].x-e[1].x,2)+Math.pow(e[0].y-e[1].y,2),.5),a=Math.pow(Math.pow(e[0].x-e[3].x,2)+Math.pow(e[0].y-e[3].y,2),.5),s=(e[0].x+e[2].x)/2,u=(e[0].y+e[2].y)/2,l=Math.max(o,a)/2,c=-Math.atan2(e[1].y-e[0].y,e[1].x-e[0].x),f=Math.max(12,Math.ceil(Math.PI/Math.acos((l-r)/(l+r)))),h=o/2*(1+(1-Math.cos(Math.PI/f))/2),d=a/2*(1+(1-Math.cos(Math.PI/f))/2),p=[],m=Math.cos(c),g=Math.sin(c),y=0;y<f;y+=1){var v=2*Math.PI*y/f,x=Math.cos(v),_=Math.sin(v),b=s+h*m*x-d*g*_,w=u+h*g*x+d*m*_;p.push([b,w])}return[[p]]}};i(l,u),l.defaults=r.extend({},u.defaults,{});var c={};c[a.capabilities.feature]=!0,o("ellipse",l,c),t.exports=l},4655:function(t,e,n){var r=n(6978);t.exports={state:r.state,actionOwner:r.actionOwner,annotation:r.annotation,_editHandleFeatureLevel:r._editHandleFeatureLevel,defaultEditHandleStyle:r.defaultEditHandleStyle,constrainAspectRatio:r.constrainAspectRatio,baseAnnotation:r,circleAnnotation:n(9894),ellipseAnnotation:n(3656),lineAnnotation:n(2612),pointAnnotation:n(400),polygonAnnotation:n(1920),rectangleAnnotation:n(4019),squareAnnotation:n(5229)}},2612:function(t,e,n){var r=n(5616),i=n(4626),o=n(1098).registerAnnotation,a=n(9281),s=n(6978).annotation,u=n(6978).state,l=n(6978).continuousVerticesActions,c=n(6978).continuousVerticesProcessAction,f=function(t){"use strict";if(!(this instanceof f))return new f(t);(t=r.extend(!0,{},this.constructor.defaults,{style:{line:function(t){return Array.apply(null,Array(e.options("vertices").length)).map((function(){return t}))},position:function(t,n){return e.options("vertices")[n]}},createStyle:{line:function(t){return Array.apply(null,Array(e.options("vertices").length)).map((function(){return t}))},position:function(t,n){return e.options("vertices")[n]}}},t)).vertices=t.vertices||t.coordinates||[],delete t.coordinates,s.call(this,"line",t);var e=this,n=this.actions,i=this.processEditAction;this.features=function(){var t,n=e.options(),r=e.state();if(r===u.create)t=[{line:{line:n.vertices,style:e.styleForState(r)}}];else t=[{line:{line:n.vertices,style:e.styleForState(r)}}],r===u.edit&&e._addEditHandles(t,n.vertices,void 0,!e.style("closed"));return t},this._coordinates=function(t){return t&&e.options("vertices",t),e.options("vertices")},this.mouseMove=function(t){if(e.state()===u.create){var n=e.options("vertices");return n.length?(n[n.length-1]=t.mapgcs,!0):void 0}},this.mouseClick=function(t){var n=e.layer();if(e.state()===u.create&&n){var r,i=!!t.buttonsDown.right;if(t.buttonsDown.left||t.buttonsDown.right){var o=e.options("vertices");if(!t.buttonsDown.right||o.length)return t.handled=!0,t.buttonsDown.left&&(o.length?o.length>=2&&n.displayDistance(o[o.length-2],null,t.map,"display")<=n.options("adjacentPointProximity")?(r=!0,e._lastClick&&t.time-e._lastClick<n.options("dblClickTime")&&(i=!0)):o.length>=2&&n.displayDistance(o[0],null,t.map,"display")<=n.options("finalPointProximity")?i="close":o[o.length-1]=t.mapgcs:o.push(t.mapgcs),i||r||o.push(t.mapgcs),e._lastClick=t.time,e._lastClickVertexCount=o.length),i?o.length<3?"remove":(o.pop(),e.options("style").closed="close"===i,e.state(u.done),"done"):!r}}},this.actions=function(t){return l(e,n,t,"line",arguments)},this.processAction=function(t){return c(e,t,"line")},this._geojsonCoordinates=function(t){var n=e.coordinates(t);if(n&&!(n.length<2)&&e.state()!==u.create){for(var r=[],i=0;i<n.length;i+=1)r.push([n[i].x,n[i].y]);return r}},this._geojsonGeometryType=function(){return"LineString"},this._geojsonStyles=function(){return["closed","lineCap","lineJoin","strokeColor","strokeOffset","strokeOpacity","strokeWidth"]},this.processEditAction=function(t){return"vertex"===e._editHandle.handle.type?e._processEditActionVertex(t,!0):i.apply(e,arguments)},this.mouseClickEdit=function(t){var n,r=e.layer(),i=e._editHandle;if(e.state()===u.edit&&r&&t.buttonsDown.left&&i&&i.handle.selected&&"edge"===i.handle.type&&e.options("style").closed&&(t.handled=!0,e._lastClick&&t.time-e._lastClick<r.options("dblClickTime")&&(n=!0),e._lastClick=t.time,n)){var o=i.handle.index,a=e._coordinates(),s=a.slice(o+1).concat(a.slice(0,o+1));return e._coordinates(s),e.options("style").closed=!1,i.handle.index=void 0,!0}}};i(f,s),f.defaults=r.extend({},s.defaults,{style:{strokeColor:{r:0,g:0,b:0},strokeOpacity:1,strokeWidth:3,closed:!1,lineCap:"butt",lineJoin:"miter"},highlightStyle:{strokeWidth:5},createStyle:{strokeColor:{r:0,g:0,b:1},strokeOpacity:1,strokeWidth:3,closed:!1,lineCap:"butt",lineJoin:"miter"}});var h={};h[a.capabilities.basic]=[u.create],o("line",f,h),t.exports=f},400:function(t,e,n){var r=n(5616),i=n(4626),o=n(642),a=n(1098).registerAnnotation,s=n(7541),u=n(6978).annotation,l=n(6978).state,c=function(t){"use strict";if(!(this instanceof c))return new c(t);(t=r.extend(!0,{},this.constructor.defaults,t)).position=t.position||(t.coordinates?t.coordinates[0]:void 0),delete t.coordinates,u.call(this,"point",t);var e=this;this.features=function(){var t,n,i,a=e.options(),s=e.state();if(s===l.create)t=[];else n=e.styleForState(s),(a.style.scaled||0===a.style.scaled)&&(!0===a.style.scaled&&(a.style.scaled=e.layer().map().zoom()),n=r.extend({},n,{radius:function(){var t=a.style.radius,n=e.layer().map().zoom();return o.isFunction(t)&&(t=t.apply(e,arguments)),t*=Math.pow(2,n-a.style.scaled),t}}),i=!0),t=[{point:{x:a.position.x,y:a.position.y,style:n,scaleOnZoom:i}}],s===l.edit&&e._addEditHandles(t,[a.position],{edge:!1,center:!1,resize:!1,rotate:!1});return t},this._coordinates=function(t){return t&&t.length>=1&&e.options("position",t[0]),e.state()===l.create?[]:[e.options("position")]},this._coordinateOption="position",this.mouseClick=function(t){if(e.state()===l.create&&t.buttonsDown.left)return t.handled=!0,e.options("position",t.mapgcs),e.state(l.done),"done"},this._geojsonStyles=function(){return["fill","fillColor","fillOpacity","radius","scaled","stroke","strokeColor","strokeOpacity","strokeWidth"]},this._geojsonCoordinates=function(t){var n=e.coordinates(t);if(n&&e.state()!==l.create&&!(n.length<1)&&void 0!==n[0])return[n[0].x,n[0].y]},this._geojsonGeometryType=function(){return"Point"}};i(c,u),c.defaults=r.extend({},u.defaults,{style:{fill:!0,fillColor:{r:0,g:1,b:0},fillOpacity:.25,radius:10,scaled:!1,stroke:!0,strokeColor:{r:0,g:0,b:0},strokeOpacity:1,strokeWidth:3},createStyle:{fillColor:{r:.3,g:.3,b:.3},fillOpacity:.25,strokeColor:{r:0,g:0,b:1}},highlightStyle:{fillColor:{r:0,g:1,b:1},fillOpacity:.5,strokeWidth:5}});var f={};f[s.capabilities.feature]=!0,a("point",c,f),t.exports=c},1920:function(t,e,n){var r=n(5616),i=n(4626),o=n(1098).registerAnnotation,a=n(9281),s=n(6645),u=n(642),l=n(6978).annotation,c=n(6978).state,f=n(6978).continuousVerticesActions,h=n(6978).continuousVerticesProcessAction,d=function(t){"use strict";if(!(this instanceof d))return new d(t);(t=r.extend(!0,{},this.constructor.defaults,{style:{polygon:function(t){return t.polygon}},createStyle:{line:function(t){var n=e._coordinates();return Array.apply(null,Array((n.outer||n).length)).map((function(){return t}))},position:function(t,n){return void 0!==t.x?t.x:e.options("vertices")[n]}},cursorStyle:{position:u.identityFunction}},t)).vertices=t.vertices||t.coordinates||[],delete t.coordinates,l.call(this,"polygon",t);var e=this,n=this.actions,i=this.state;this.features=function(){var t,n=e.options(),r=e.state(),i=e.styleForState(r);if(r===c.create)t=[],n.vertices&&(n.vertices.outer||n.vertices.length>=3)&&(t[1]={polygon:{polygon:n.vertices,style:i}}),n.vertices&&n.vertices.length>=2&&(t[2]={line:{line:n.vertices,style:i}});else t=[{polygon:{polygon:n.vertices,style:i}}],r===c.edit&&e._addEditHandles(t,n.vertices);return t},this.toPolygonList=function(t){var n=e._coordinates();if(n.outer){var r=[[n.outer.map((function(t){return[t.x,t.y]}))]];return(n.inner||[]).forEach((function(t){return r[0].push(t.map((function(t){return[t.x,t.y]})))})),r}return n.length<3||!n.map?[]:[[n.map((function(t){return[t.x,t.y]}))]]},this._coordinates=function(t){return t&&e.options("vertices",t),e.options("vertices")},this.mouseMove=function(t){if(e.state()===c.create){var n=e.options("vertices");return n.length?(n[n.length-1]=t.mapgcs,!0):void 0}},this.mouseClick=function(t){var n=e.layer();if(e.state()===c.create&&n){var r,i=!!t.buttonsDown.right;if(t.buttonsDown.left||t.buttonsDown.right){var o=e.options("vertices");if(!t.buttonsDown.right||o.length)return t.handled=!0,t.buttonsDown.left&&(o.length?o.length>=2&&n.displayDistance(o[o.length-2],null,t.map,"display")<=n.options("adjacentPointProximity")?(r=!0,e._lastClick&&t.time-e._lastClick<n.options("dblClickTime")&&(i=!0)):o.length>=2&&n.displayDistance(o[0],null,t.map,"display")<=n.options("finalPointProximity")?i=!0:o[o.length-1]=t.mapgcs:o.push(t.mapgcs),i||r||o.push(t.mapgcs),e._lastClick=t.time,e._lastClickVertexCount=o.length),i?o.length<4?"remove":(o.pop(),e.state(c.done),"done"):!r}}},this.actions=function(t){return f(e,n,t,"polygon",arguments)},this.state=function(t){var n=i();if(t&&t!==n&&(n===c.create||n===c.edit)&&t===c.done){for(var r=u.polyops.union(e.options("vertices"),[],{style:"object-listlist-outer-list"}),o=!0;r.length>1&&o;){o=!1;for(var a=0;!o&&a<r[0].outer.length;a+=1)for(var s=r[0].outer[a],l=1;!o&&l<r.length;l+=1)for(var f=0;!o&&f<r[l].outer.length;f+=1){var h=r[l].outer[f];s.x===h.x&&s.y===h.y&&(r[0].inner=r[0].inner.concat(r[l].inner),r[0].outer=r[0].outer.slice(0,a).concat(r[l].outer.slice(f)).concat(r[l].outer.slice(0,f)).concat(r[0].outer.slice(a)),r.splice(l,1),o=!0)}}1===r.length&&e.options("vertices",r[0].inner.length?r[0]:r[0].outer)}return i(t)},this.processAction=function(t){return h(e,t,"polygon")},this._geojsonCoordinates=function(t){var n=e.coordinates(t);if(!(!n||!n.outer&&n.length<3||e.state()===c.create)){var r=[];return n.outer?((r=[n.outer.map((function(t){return[t.x,t.y]}))])[0].push(r[0][0].slice()),(n.inner||[]).forEach((function(t){var e=t.map((function(t){return[t.x,t.y]}));e.push(e[0].slice()),r.push(e)}))):(r=[n.map((function(t){return[t.x,t.y]}))])[0].push(r[0][0].slice()),r}},this._geojsonGeometryType=function(){return"Polygon"},this._geojsonStyles=function(){return["fill","fillColor","fillOpacity","lineCap","lineJoin","stroke","strokeColor","strokeOffset","strokeOpacity","strokeWidth"]}};i(d,l),d.defaults=r.extend({},l.defaults,{style:{fill:!0,fillColor:{r:0,g:1,b:0},fillOpacity:.25,stroke:!0,strokeColor:{r:0,g:0,b:0},strokeOpacity:1,strokeWidth:3,uniformPolygon:!0},highlightStyle:{fillColor:{r:0,g:1,b:1},fillOpacity:.5,strokeWidth:5},createStyle:{closed:!1,fillColor:{r:.3,g:.3,b:.3},fillOpacity:.25,stroke:!1,strokeColor:{r:0,g:0,b:1}},cursorStyle:{closed:!0,fillColor:{r:.3,g:.3,b:.3},fillOpacity:.25,stroke:!0,strokeColor:{r:0,g:0,b:1}},allowBooleanOperations:!0});var p={};p[s.capabilities.feature]=!0,p[a.capabilities.basic]=[c.create],o("polygon",d,p),t.exports=d},4019:function(t,e,n){var r=n(5616),i=n(4626),o=n(6409),a=n(8695),s=n(1098).registerAnnotation,u=n(6645),l=n(6978).annotation,c=n(6978).state,f=n(6978).annotationActionOwner,h=function(t,e){"use strict";if(!(this instanceof h))return new h(t,e);(t=r.extend(!0,{},this.constructor.defaults,t)).corners=t.corners||t.coordinates||[],delete t.coordinates,l.call(this,e||"rectangle",t);var n=this,i=this.actions,s=this.processEditAction;this.actions=function(t){return t||(t=n.state()),t===c.create?[{action:a.annotation_rectangle,name:"rectangle create",owner:f,input:"left",selectionRectangle:!0,selectionConstraint:this._selectionConstraint}]:i.apply(n,arguments)},this.processAction=function(t){var e=n.layer();if(n.state()===c.create&&e&&t.event===o.actionselection&&t.state.action===a.annotation_rectangle){var r=e.map(),i=[r.displayToGcs({x:t.lowerLeft.x,y:t.lowerLeft.y},null),r.displayToGcs({x:t.lowerLeft.x,y:t.upperRight.y},null),r.displayToGcs({x:t.upperRight.x,y:t.upperRight.y},null),r.displayToGcs({x:t.upperRight.x,y:t.lowerLeft.y},null)];return this._selectionConstraint&&t.mouse&&t.state.origin&&this._selectionConstraint(t.mouse.mapgcs,t.state.origin.mapgcs,i),e.displayDistance(i[0],null,i[1],null)*e.displayDistance(i[0],null,i[3],null)<.01?"remove":(n.options("corners",i),n.state(c.done),"done")}},this.features=function(){var t,e=n.options(),r=n.state();return t=[],e.corners&&e.corners.length>=4&&(t=[{polygon:{polygon:e.corners,style:n.styleForState(r)}}]),r===c.edit&&n._addEditHandles(t,e.corners),t},this.toPolygonList=function(t){return n._coordinates().length<3?[]:[[n._coordinates().map((function(t){return[t.x,t.y]}))]]},this._coordinates=function(t){return t&&t.length>=4&&n.options("corners",t.slice(0,4)),n.options("corners")},this._coordinateOption="corners",this._geojsonCoordinates=function(t){var e=n.coordinates(t);if(e&&n.state()!==c.create&&!(e.length<4)){for(var r=[],i=0;i<4;i+=1)r.push([e[i].x,e[i].y]);return r.push([e[0].x,e[0].y]),[r]}},this._geojsonGeometryType=function(){return"Polygon"},this._geojsonStyles=function(){return["fill","fillColor","fillOpacity","lineCap","lineJoin","stroke","strokeColor","strokeOffset","strokeOpacity","strokeWidth"]},this._setCornersFromMouse=function(t,e){var i=n.layer().map(),o=i.gcsToDisplay({x:t[0].x,y:t[0].y},null),a=i.gcsToDisplay(e.mapgcs,null),s={x:a.x,y:o.y},u={x:o.x,y:a.y};t[2]=r.extend({},e.mapgcs),t[1]=i.displayToGcs(s,null),t[3]=i.displayToGcs(u,null),this._selectionConstraint&&this._selectionConstraint(e.mapgcs,t[0],t)},this.mouseMove=function(t){if(n.state()===c.create){var e=n.options("corners");return e.length?(n._setCornersFromMouse(e,t),!0):void 0}},this.mouseClick=function(t){var e=n.layer();if(n.state()===c.create&&e&&(t.buttonsDown.left||t.buttonsDown.right)){var i=n.options("corners");if(!t.buttonsDown.right||i.length)return t.handled=!0,i.length?(n._setCornersFromMouse(i,t),e.displayDistance(i[0],null,i[1],null)*e.displayDistance(i[0],null,i[3],null)<.01?"remove":(n.state(c.done),"done")):t.buttonsDown.left?(i.push(r.extend({},t.mapgcs)),i.push(r.extend({},t.mapgcs)),i.push(r.extend({},t.mapgcs)),i.push(r.extend({},t.mapgcs)),!0):void 0}},this.processEditAction=function(t){var e,r,i,o,a,u=n._editHandle.startCoordinates,l={x:t.mouse.mapgcs.x-t.state.origin.mapgcs.x,y:t.mouse.mapgcs.y-t.state.origin.mapgcs.y},c=n._editHandle.handle.type,f=n._editHandle.handle.index,h=[Math.atan2(u[1].y-u[0].y,u[1].x-u[0].x),Math.atan2(u[2].y-u[1].y,u[2].x-u[1].x),Math.atan2(u[3].y-u[2].y,u[3].x-u[2].x),Math.atan2(u[0].y-u[3].y,u[0].x-u[3].x)];switch(h[0]||h[1]||h[2]||h[3]||(h[1]=Math.PI/2,h[2]=Math.PI,h[3]=-Math.PI/2),h[0]||h[2]||(h[0]=h[1]-Math.PI/2,h[2]=h[1]+Math.PI/2),h[1]||h[3]||(h[1]=h[2]-Math.PI/2,h[3]=h[2]+Math.PI/2),c){case"vertex":return e=u.map((function(t){return{x:t.x,y:t.y}})),o=h[(f+1)%4],r={x:(l.x*Math.cos(o)+l.y*Math.sin(o))*Math.cos(o),y:(l.y*Math.sin(o)+l.x*Math.cos(o))*Math.sin(o)},a=h[f],i={x:(l.x*Math.cos(a)+l.y*Math.sin(a))*Math.cos(a),y:(l.y*Math.sin(a)+l.x*Math.cos(a))*Math.sin(a)},e[f].x+=l.x,e[f].y+=l.y,e[(f+1)%4].x+=r.x,e[(f+1)%4].y+=r.y,e[(f+3)%4].x+=i.x,e[(f+3)%4].y+=i.y,this._selectionConstraint&&(e=this._selectionConstraint(t.mouse.mapgcs,t.state.origin.mapgcs,e,"vertex",h,f).corners),n.options("corners",e),!0;case"edge":return e=u.map((function(t){return{x:t.x,y:t.y}})),o=h[(f+1)%4],l={x:(l.x*Math.cos(o)+l.y*Math.sin(o))*Math.cos(o),y:(l.y*Math.sin(o)+l.x*Math.cos(o))*Math.sin(o)},e[f].x+=l.x,e[f].y+=l.y,e[(f+1)%4].x+=l.x,e[(f+1)%4].y+=l.y,this._selectionConstraint&&(e=this._selectionConstraint(t.mouse.mapgcs,t.state.origin.mapgcs,e,"edge",h,f).corners),n.options("corners",e),!0}return s.apply(n,arguments)}};i(h,l),h.defaults=r.extend({},l.defaults,{style:{fill:!0,fillColor:{r:0,g:1,b:0},fillOpacity:.25,polygon:function(t){return t.polygon},stroke:!0,strokeColor:{r:0,g:0,b:0},strokeOpacity:1,strokeWidth:3,uniformPolygon:!0},highlightStyle:{fillColor:{r:0,g:1,b:1},fillOpacity:.5,strokeWidth:5},createStyle:{fillColor:{r:.3,g:.3,b:.3},fillOpacity:.25,strokeColor:{r:0,g:0,b:1}},allowBooleanOperations:!0});var d={};d[u.capabilities.feature]=!0,s("rectangle",h,d),t.exports=h},5229:function(t,e,n){var r=n(5616),i=n(4626),o=n(1098).registerAnnotation,a=n(6645),s=n(4019),u=function(t,e){"use strict";if(!(this instanceof u))return new u(t,e);t=r.extend(!0,{},this.constructor.defaults,t,{constraint:1}),s.call(this,t,e||"square")};i(u,s),u.defaults=r.extend({},s.defaults,{});var l={};l[a.capabilities.feature]=!0,o("square",u,l),t.exports=u},2075:function(t,e,n){function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var o=n(4626),a=n(6498),s=n(4655),u=n(6409),l=n(1098),c=n(5325),f=n(5616),h=n(7549),d=n(6546),p=function(t){"use strict";if(!(this instanceof p))return new p(t);a.call(this,t);var e,i,o,m,g=n(7908),y=n(77),v=n(642),x=this,_=this._init,b=this._exit,w=this.draw,M=this._update,A=y(),T=null,E=[],C=[],k={closed:{dataType:"boolean",keys:["closed","close"]},fill:{dataType:"boolean",keys:["fill"]},fillColor:{dataType:"color",keys:["fillColor","fill-color","marker-color","fill"]},fillOpacity:{dataType:"opacity",keys:["fillOpacity","fill-opacity"]},lineCap:{dataType:"text",keys:["lineCap","line-cap"]},lineJoin:{dataType:"text",keys:["lineJoin","line-join"]},radius:{dataType:"positive",keys:["radius"]},scaled:{dataType:"booleanOrNumber",keys:["scaled"]},stroke:{dataType:"boolean",keys:["stroke"]},strokeColor:{dataType:"color",keys:["strokeColor","stroke-color","stroke"]},strokeOffset:{dataType:"number",keys:["strokeOffset","stroke-offset"]},strokeOpacity:{dataType:"opacity",keys:["strokeOpacity","stroke-opacity"]},strokeWidth:{dataType:"positive",keys:["strokeWidth","stroke-width"]}},S={offset:"coordinate2",rotateWithMap:"boolean",rotation:"angle",scaleWithMap:"boolean",scale:"booleanOrNumber",shadowBlur:"numberOrBlank",shadowOffset:"coordinate2",strokeWidth:"numberOrBlank",visible:"boolean"};return d.usedStyles.forEach((function(t){k[t]={option:"labelStyle",dataType:S[t]||"text",keys:[t,"label"+t.charAt(0).toUpperCase()+t.slice(1),t.replace(/([A-Z])/g,"-$1").toLowerCase(),"label-"+t.replace(/([A-Z])/g,"-$1").toLowerCase()]}})),e=f.extend(!0,{},{dblClickTime:300,adjacentPointProximity:5,continuousPointProximity:5,continuousPointCollinearity:1*Math.PI/180,continuousCloseProximity:10,finalPointProximity:10,showLabels:!0,clickToEdit:!1},t),this._processAction=function(t){var e;if(t.state&&t.state.actionRecord&&t.state.actionRecord.owner===s.actionOwner&&x.currentAnnotation)switch(x.mode()){case x.modes.edit:e=x.currentAnnotation.processEditAction(t),x.currentAnnotation&&x.currentAnnotation._editHandle&&x.currentAnnotation._editHandle.handle&&(x.geoTrigger(u.annotation.edit_action,{annotation:x.currentAnnotation,handle:x.currentAnnotation._editHandle?x.currentAnnotation._editHandle.handle:void 0,action:t.event}),t.event===u.actionup&&x._selectEditHandle({data:x.currentAnnotation._editHandle.handle},x.currentAnnotation._editHandle.handle.selected));break;case x.modes.cursor:x.currentAnnotation._cursorHandleMousemove(t.mouse),e=x.currentAnnotation.processAction(t),x.geoTrigger(u.annotation.cursor_action,{annotation:x.currentAnnotation,operation:x.currentBooleanOperation(),evt:t});break;default:e=x.currentAnnotation.processAction(t)}x._updateFromEvent(e)},this.currentBooleanOperation=function(){var t;return x._currentBooleanClass&&(t=x._currentBooleanClass.split("-")[1]),t},this._handleBooleanOperation=function(){var t=x.currentBooleanOperation();if(t&&x.currentAnnotation&&x.currentAnnotation.toPolygonList){var e=x.currentAnnotation;if(x.removeAnnotation(x.currentAnnotation,!1),x.annotations().length||"difference"!==t&&"intersect"!==t){var n={annotation:e,operation:t};x.geoTrigger(u.annotation.boolean,n),!1!==n.cancel&&v.polyops[t](x,e.toPolygonList(),{correspond:{},keepAnnotations:"exact",style:x})}}},this._updateFromEvent=function(t){switch(t){case"remove":x.removeAnnotation(x.currentAnnotation,!1),x.mode(null);break;case"done":x._handleBooleanOperation(),x.mode(null)}t&&(x.modified(),x.draw())},this._handleMouseMoveModifiers=function(t){if(x.mode()!==x.modes.edit&&x.currentAnnotation.options("allowBooleanOperations")&&(x.currentAnnotation._coordinates().length<2||x.mode()===x.modes.cursor)&&t.modifiers){var e=(t.modifiers.shift?"s":"")+(t.modifiers.ctrl?"c":"")+(t.modifiers.meta||t.modifiers.alt?"a":"");if(x._currentBooleanClass===x._booleanClasses[e])return;x._currentBooleanClass=x._booleanClasses[e];var n=x.map().node();Object.values(x._booleanClasses).forEach((function(t){n.toggleClass(t,x._booleanClasses[e]===t)}))}},this._handleMouseMove=function(t){x.mode()&&x.currentAnnotation&&(x._handleMouseMoveModifiers(t),x.currentAnnotation.mouseMove(t)&&(x.modified(),x.draw()))},this._selectEditHandle=function(t,e){if(t.data&&t.data.editHandle){if(f.each(C[s._editHandleFeatureLevel],(function(t,e){e.feature.modified()})),x.currentAnnotation.selectEditHandle(t.data,e),x.draw(),x.map().node().toggleClass("annotation-input",!!e),x.map().interactor().removeAction(void 0,void 0,s.actionOwner),e){var n=x.currentAnnotation.actions(s.state.edit);f.each(n,(function(t,e){x.map().interactor().addAction(e)}))}return x}},this._handleMouseOn=function(t){t.data&&t.data.annotation&&(x.mode()===x.modes.edit&&x.currentAnnotation?x._selectEditHandle(t,!0):x.mode()||x.currentAnnotation||!x.options("clickToEdit")||(t.data.annotation.state(s.state.highlight),x.modified(),x.draw()))},this._handleMouseOff=function(t){t.data&&t.data.annotation&&(x.mode()===x.modes.edit&&t.data.editHandle&&t.data.selected?x._selectEditHandle(t,!1):t.data.annotation.state()===s.state.highlight&&(t.data.annotation.state(s.state.done),x.modified(),x.draw()))},this._handleMouseClick=function(t){var e,n=!1;if(x.mode()===x.modes.edit){if(x.map().interactor().hasAction(void 0,void 0,s.actionOwner))return e=x.currentAnnotation.mouseClickEdit(t),void x._updateFromEvent(e);x.mode(null),x.draw(),f.each(C,(function(t,e){f.each(e,(function(t,e){e.feature._clearSelectedFeatures()}))})),n=!0}else if(x.mode()&&x.currentAnnotation)x._handleMouseMoveModifiers(t),e=x.currentAnnotation.mouseClick(t),x._updateFromEvent(e),n=!x.mode(),x.mode()===x.modes.cursor&&x.geoTrigger(u.annotation.cursor_click,{annotation:x.currentAnnotation,operation:x.currentBooleanOperation(),evt:t});else if(!x.mode()&&!x.currentAnnotation&&x.options("clickToEdit")){var r=x.annotations().filter((function(t){return t.state()===s.state.highlight}));if(1!==r.length)return;x.mode(x.modes.edit,r[0]),x.draw(),n=!0}n&&x.map().interactor().retriggerMouseMove()},this.options=function(t,n){return void 0===t?e:"string"==typeof t&&void 0===n?e[t]:(void 0===n?e=f.extend(!0,e,t):e[t]=n,x.modified(),x)},this.displayDistance=function(t,e,n,r){var i=x.map();return"display"!==e&&(e=null===e?i.gcs():void 0===e?i.ingcs():e,t=i.gcsToDisplay(t,e)),"display"!==r&&(r=null===r?i.gcs():void 0===r?i.ingcs():r,n=i.gcsToDisplay(n,r)),Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))},this.addAnnotation=function(t,e,n){if(f.inArray(t,E)<0){for(;x.annotationById(t.id());)t.newId();x.geoTrigger(u.annotation.add_before,{annotation:t}),E.push(t),t.layer(x);var r=x.map();(e=null===e?r.gcs():void 0===e?r.ingcs():e)!==r.gcs()&&t._convertCoordinates(e,r.gcs()),!1!==n&&(x.modified(),x.draw()),x.geoTrigger(u.annotation.add,{annotation:t})}return x},this.removeAnnotation=function(t,e){var n=f.inArray(t,E);return n>=0&&(t===x.currentAnnotation&&(x.currentAnnotation=null),t._exit(),E.splice(n,1),!1!==e&&(x.modified(),x.draw()),x.geoTrigger(u.annotation.remove,{annotation:t})),n>=0},this.removeAllAnnotations=function(t,e){for(var n,r=0,i=0;i<E.length;)n=E[i],t&&n.state()===s.state.create?i+=1:(x.removeAnnotation(n,!1),r+=1);return r&&!1!==e&&(x.modified(),x.draw()),r},this.annotations=function(){return E.slice()},this.annotationById=function(t){null!=t&&(t=+t);var e=E.filter((function(e){return e.id()===t}));if(e.length)return e[0]},this.modes={edit:"edit",cursor:"cursor"},this._booleanClasses={s:"annotation-union",sc:"annotation-intersect",c:"annotation-difference",sa:"annotation-xor"},this.mode=function(t,e,n){if(void 0===t)return T;if(t!==T||(t===x.modes.edit||t===x.modes.cursor)&&e!==x.editAnnotation||t!==x.modes.edit&&t!==x.modes.cursor&&t&&!x.currentAnnotation){var r,i,o=x.map().node(),a=T;if(T=t,o.toggleClass("annotation-input",!(!T||T===x.modes.edit||T===x.modes.cursor)),T&&T!==x.modes.edit||(Object.values(x._booleanClasses).forEach((function(t){return o.toggleClass(t,!1)})),x._currentBooleanClass=void 0),m||(m=h(o[0])),T?m.bind("esc",(function(){x.mode(null)})):m.unbind("esc"),x.currentAnnotation){switch(x.currentAnnotation.state()){case s.state.create:x.removeAnnotation(x.currentAnnotation);break;case s.state.edit:x.currentAnnotation.state(s.state.done),x.modified(),x.draw();break;case s.state.cursor:x.currentAnnotation.state(s.state.done),x.modified(),x.draw(),x.map().node().toggleClass("annotation-cursor",!1)}x.currentAnnotation=null}T===x.modes.edit?(x.currentAnnotation=e,x.currentAnnotation.state(s.state.edit),x.modified()):T===x.modes.cursor?(x.currentAnnotation=e,x.currentAnnotation.state(s.state.cursor),x.modified(),x.map().node().toggleClass("annotation-cursor",!0),i=x.currentAnnotation.actions(s.state.cursor)):l.registries.annotations[T]&&(r=l.registries.annotations[T].func),x.map().interactor().removeAction(void 0,void 0,s.actionOwner),r&&(n=f.extend({},n||{},{state:s.state.create,layer:x}),x.currentAnnotation=r(n),x.addAnnotation(x.currentAnnotation,null),i=x.currentAnnotation.actions(s.state.create)),i&&f.each(i,(function(t,e){x.map().interactor().addAction(e)})),x.geoTrigger(u.annotation.mode,{mode:T,oldMode:a}),a!==x.modes.edit&&a!==x.modes.cursor||x.modified()}return x},this.geojson=function(t,e,r,i){if(void 0!==t){var o=l.createFileReader("geojsonReader",{layer:x,lineStyle:n(2612).defaults.style,pointStyle:n(400).defaults.style,polygonStyle:n(1920).defaults.style});if(!o.canRead(t))return;return!0===e&&x.removeAllAnnotations(!0,!1),"update"===e&&f.each(x.annotations(),(function(t,e){e.options("updated",!1)})),o.read(t,(function(t){f.each(t.slice(),(function(t,e){x._geojsonFeatureToAnnotation(e,r),x.deleteFeature(e)}))})),"update"===e&&f.each(x.annotations(),(function(t,e){!1===e.options("updated")&&e.state()===s.state.done&&x.removeAnnotation(e,!1)})),x.modified(),x.draw(),E.length}t=null;var a=[];return f.each(E,(function(t,e){var n=e.geojson(r,i);n&&a.push(n)})),a.length&&(t={type:"FeatureCollection",features:a}),t},this._geojsonFeatureToAnnotation=function(t,e){var n=t.data(),r=l.listAnnotations(),i=x.map();e=null===e?i.gcs():void 0===e?i.ingcs():e,f.each(n,(function(n,o){var a,h,d,p,m=(o.properties||{}).annotationType||t.featureType,g=f.extend({},o.properties||{});if(!(f.inArray(m,r)<0)){switch(g.style=g.style||{},g.labelStyle=g.labelStyle||{},delete g.annotationType,t.featureType){case"line":if(!(a=t.line()(o,n))||a.length<2)return;a=a.slice();break;case"polygon":if(!(a=t.polygon()(o,n))||!a.outer||a.outer.length<3)return;if((a={outer:a.outer.slice(),inner:(a.inner||[]).map((function(t){return t.slice()}))}).outer[a.outer.length-1][0]===a.outer[0][0]&&a.outer[a.outer.length-1][1]===a.outer[0][1]&&(a.outer.splice(a.outer.length-1,1),a.outer.length<3))return;a.inner.forEach((function(t){t.length>3&&t[t.length-1][0]===t[0][0]&&t[t.length-1][1]===t[0][1]&&t.splice(t.length-1,1)})),a.inner&&a.inner.length||(a=a.outer);break;case"marker":a=o.geometry.coordinates[0].slice(0,4);break;case"point":a=[t.position()(o,n)]}h=o.crs&&"name"===o.crs.type&&o.crs.properties&&"proj4"===o.crs.properties.type&&o.crs.properties.name?o.crs.properties.name:e,[a.outer||a].concat(a.inner||[]).forEach((function(t){for(d=0;d<t.length;d+=1)t[d]=v.normalizeCoordinates(t[d]);if(h!==i.gcs()){var e=c.transformCoordinates(h,i.gcs(),t);for(d=0;d<t.length;d+=1)t[d]=e[d]}})),g.coordinates=a,f.each(k,(function(e,r){var i;f.each(r.keys,(function(t,e){void 0===i&&(i=x.validateAttribute(g[e],r.dataType))})),void 0===i&&(i=x.validateAttribute(t.style.get(e)(o,n),r.dataType)),void 0!==i&&(g[r.option||"style"][e]=i)})),f.each(k,(function(t,e){f.each(e.keys,(function(t,e){delete g[e]}))})),void 0!==g.annotationId&&(p=x.annotationById(g.annotationId))&&delete g.annotationId,p&&p.type()===m&&p.state()===s.state.done&&!1===p.options("updated")?(delete g.state,delete g.layer,g.updated=!0,p.options(g),x.geoTrigger(u.annotation.update,{annotation:p})):(g.state=s.state.done,g.layer=x,g.updated="new",x.addAnnotation(l.createAnnotation(m,g),null))}}))},this.validateAttribute=function(t,e){var n;if(null!=t){switch(e){case"angle":if(""===t)break;if(!(n=/^\s*([-.0-9eE]+)\s*(deg|rad|grad|turn)?\s*$/.exec((""+t).toLowerCase()))||!isFinite(n[1]))return;var r="grad"===n[2]?Math.PI/200:"deg"===n[2]?Math.PI/180:"turn"===n[2]?2*Math.PI:1;t=+n[1]*r;break;case"boolean":t=!!t&&["false","no","off"].indexOf((""+t).toLowerCase())<0;break;case"booleanOrNumber":if(!t&&0!==t&&""!==t||["true","false","off","on","no","yes"].indexOf((""+t).toLowerCase())>=0)t=!!t&&["false","no","off"].indexOf((""+t).toLowerCase())<0;else{if(!v.isNonNullFinite(t))return;t=+t}break;case"coordinate2":if(""===t)break;if(t&&v.isNonNullFinite(t.x)&&v.isNonNullFinite(t.y)){t.x=+t.x,t.y=+t.y;break}try{t=JSON.parse(t)}catch(t){}if(t&&v.isNonNullFinite(t.x)&&v.isNonNullFinite(t.y)){t.x=+t.x,t.y=+t.y;break}if(Array.isArray(t)&&v.isNonNullFinite(t[0])&&v.isNonNullFinite(t[1])){t={x:+t[0],y:+t[1]};break}if(!(n=/^\s*([-.0-9eE]+)(?:\s+|\s*,)\s*([-.0-9eE]+)\s*$/.exec(""+t))||!isFinite(n[1])||!isFinite(n[2]))return;t={x:+n[1],y:+n[2]};break;case"color":if(void 0===(t=v.convertColor(t))||void 0===t.r)return;break;case"number":if(!v.isNonNullFinite(t))return;t=+t;break;case"numberOrBlank":if(""===t)break;if(!v.isNonNullFinite(t))return;t=+t;break;case"opacity":if(""===t)return;if(t=+t,isNaN(t)||t<0||t>1)return;break;case"positive":if(t=+t,!isFinite(t)||t<=0)return;break;case"text":t=""+t}return t}},this._update=function(){if(x.timestamp()>A.timestamp()){var t=x.options("showLabels")?[]:null,e=x.options("clickToEdit")||x.mode()===x.modes.edit;f.each(C,(function(t,e){f.each(e,(function(t,e){e.data=[],delete e.feature.scaleOnZoom}))})),f.each(E,(function(n,r){var i=r.features();if(t){var o=r.labelRecord();o&&t.push(o)}f.each(i,(function(t,n){void 0===C[t]&&(C[t]={}),f.each(n,(function(n,i){if(C[t][n])(o=C[t][n].feature).selectionAPI()!==!!e&&(o.selectionAPI(e),e?(o.geoOn(u.feature.mouseon,x._handleMouseOn),o.geoOn(u.feature.mouseoff,x._handleMouseOff)):(o.geoOff(u.feature.mouseon,x._handleMouseOn),o.geoOff(u.feature.mouseoff,x._handleMouseOff)));else{var o=x.createFeature(n,{gcs:x.map().gcs(),selectionAPI:e});if(!o){var a="error_feature_"+n;return void(x[a]||(console.warn("Cannot create a "+n+" feature for annotations."),x[a]=!0))}e&&(o.geoOn(u.feature.mouseon,x._handleMouseOn),o.geoOn(u.feature.mouseoff,x._handleMouseOff));var s={};f.each(["closed","fill","fillColor","fillOpacity","line","lineCap","lineJoin","polygon","position","radius","radiusIncludesStroke","rotateWithMap","rotation","scaleWithZoom","stroke","strokeColor","strokeOffset","strokeOpacity","strokeWidth","symbolValue","uniformPolygon"],(function(t,e){var n;void 0!==o.style()[e]&&(n=o.style.get(e)),s[e]=function(t,r,i,o){var a=t&&t.style?t.style:t&&t[2]&&t[2].style?t[2].style:i.style,s=a?a[e]:t;return v.isFunction(s)&&(s=s(t,r,i,o)),void 0===s&&n&&(s=n(t,r,i,o)),s}})),o.style(s),C[t][n]={feature:o,style:s,data:[]}}var l=i.data||i;Array.isArray(l)||(l=[l]),l.forEach((function(e){e.annotation=r,C[t][n].data.push(e),i.scaleOnZoom&&(C[t][n].feature.scaleOnZoom=!0)}))}))}))})),f.each(C,(function(t,e){f.each(e,(function(t,e){e.feature.data(e.data)}))})),x._updateLabels(t),A.modified()}return M.call(x,arguments),x},this._updateLabels=function(t){if(!t||!t.length)return x._removeLabelFeature(),x;if(!i){if(!(l.registries.features[x.rendererName()]||{}).text){var e=l.rendererForFeatures(["text"]);o=l.createLayer("feature",x.map(),{renderer:e}),x.addChild(o),o._update(),x.geoTrigger(u.layerAdd,{target:x,layer:o})}var n={};d.usedStyles.forEach((function(t){n[t]=function(e,n){return e.style&&void 0!==e.style[t]?e.style[t]:(x.options("defaultLabelStyle")||{})[t]}})),i=(o||x).createFeature("text",{style:n,gcs:x.map().gcs(),position:function(t){return t.position}})}return i.data(t),x},this._handleZoom=function(){var t,e=x.features();for(t=0;t<e.length;t+=1)e[t].scaleOnZoom&&e[t].modified()},this._removeLabelFeature=function(){return o&&(o._exit(),x.removeChild(o),x.geoTrigger(u.layerRemove,{target:x,layer:o}),o=i=null),i&&(x.removeFeature(i),i=null),x},this.draw=function(){return x._update(),w.call(x),x},this.toPolygonList=function(t){var e=[],n=[];return(t=t||{}).annotationIndices||(t.annotationIndices={}),t.annotationIndices[x.id()]=n,E.forEach((function(r,i){r.toPolygonList&&(r.toPolygonList(t).forEach((function(t){return e.push(t)})),n.push(i))})),e},this.fromPolygonList=function(t,e){if(!t||!t.length)return x;var n,i,o,a=e.keepAnnotations,s={},u={},c=(e.annotationIndices||{})[x.id()];c&&e.correspond&&e.correspond.poly1&&c.length===e.correspond.poly1.length&&(n=e.correspond.poly1,i=e.correspond.exact1,o=x.annotations()),"all"!==a&&"none"!==a&&o&&o.forEach((function(t,e){c.indexOf(e)<0&&(s[t.id()]=!0)}));var f=[];t.forEach((function(t,e){var l={vertices:1===(t=t.map((function(t){return t.map((function(t){return{x:t[0],y:t[1]}}))}))).length?t[0]:{outer:t[0],inner:t.slice(1)}};if(n)for(var h,d=function(){if(n[p]&&n[p].indexOf(e)>=0){var t=o[c[p]];return"all"!==a&&"none"!==a&&i&&i[p]&&i[p].indexOf(e)>=0?(s[t.id()]=!0,{v:void 0}):("all"!==a&&void 0===u[t.id()]&&(l.annotationId=t.id(),u[t.id()]=!0),["name","description","label"].forEach((function(e){t[e](void 0,!0)&&(l[e]=t[e](void 0,!0))})),Object.entries(t.options()).forEach((function(t){var e=r(t,2),n=e[0],i=e[1];(["showLabel","style"].indexOf(n)>=0||n.endsWith("Style"))&&(l[n]=i)})),0)}},p=0;p<n.length&&0!==(h=d());p+=1)if(h)return h.v;f.push(l)}));var h=!1;return"all"!==a&&o&&o.filter((function(t){return void 0===s[t.id()]})).forEach((function(t){x.removeAnnotation(t,!1),h=!0})),f.forEach((function(t){x.addAnnotation(l.createAnnotation("polygon",t),x.map().gcs(),!1),h=!0})),h&&(x.modified(),x.draw()),x},this._init=function(){return _.call(x),x.map().interactor()||x.map().interactor(g({actions:[]})),x.geoOn(u.actionselection,x._processAction),x.geoOn(u.actionmove,x._processAction),x.geoOn(u.actionup,x._processAction),x.geoOn(u.mouseclick,x._handleMouseClick),x.geoOn(u.mousemove,x._handleMouseMove),x.geoOn(u.zoom,x._handleZoom),x},this._exit=function(){return m&&m.reset(),x._removeLabelFeature(),b.call(x),E=[],C=[],x},x};o(p,a),l.registerLayer("annotation",p),t.exports=p},3578:function(t,e,n){var r=n(4626),i=n(1338),o=n(642),a=n(3638),s=n(1982),u=n(3503),l=n(4663),c=function(t){if(!(this instanceof c))return new c(t);var e=n(6409);return t=t||{},i.call(this,t),this._view=o.mat4AsArray(),this._proj=o.mat4AsArray(),this._projection=null,this._transform=o.mat4AsArray(),this._inverse=o.mat4AsArray(),this._bounds=null,this._display=null,this._world=null,this._viewport={width:1,height:1},this._createProj=function(){var t="perspective"===this._projection?u.frustum:u.ortho,e=this._clipbounds[this._projection];t(this._proj,e.left,e.right,e.bottom,e.top,e.near,e.far)},this._update=function(){this._bounds=null,this._display=null,this._world=null,this._transform=u.multiply(o.mat4AsArray(),this._proj,this._view),u.invert(this._inverse,this._transform),this.geoTrigger(e.camera.view,{camera:this})},Object.defineProperty(this,"view",{get:function(){return this._view},set:function(t){u.copy(this._view,t),this._update()},configurable:!0}),Object.defineProperty(this,"bounds",{get:function(){return null===this._bounds&&(this._bounds=this._getBounds()),this._bounds},set:function(t){this._setBounds(t),this._update()}}),Object.defineProperty(this,"clipbounds",{get:function(){return this._clipbounds[this._projection]},set:function(t){var e=this._clipbounds[this._projection];if((t={left:void 0===t.left?e.left:t.left,right:void 0===t.right?e.right:t.right,top:void 0===t.top?e.top:t.top,bottom:void 0===t.bottom?e.bottom:t.bottom,near:void 0===t.near?e.near:t.near,far:void 0===t.far?e.far:t.far}).left===t.right)throw new Error("Left and right values must be different");if(t.top===t.bottom)throw new Error("Top and bottom values must be different");if(t.near===t.far)throw new Error("Near and far values must be different");this._clipbounds[this._projection]=t,this._createProj(),this._update()}}),Object.defineProperty(this,"display",{get:function(){if(null===this._display){var t=this._clipbounds[this._projection],e=o.mat4AsArray();u.translate(e,e,[this.viewport.width/2,this.viewport.height/2,0]),u.scale(e,e,[this.viewport.width/(t.right-t.left),this.viewport.height/(t.bottom-t.top),1]),u.translate(e,e,[-(t.left+t.right)/2,-(t.top+t.bottom)/2,0]),u.multiply(e,e,this._transform),this._display=e}return this._display}}),Object.defineProperty(this,"world",{get:function(){return null===this._world&&(this._world=u.invert(o.mat4AsArray(),this.display)),this._world}}),Object.defineProperty(this,"projection",{get:function(){return this._projection},set:function(t){if(!this.constructor.projection[t])throw new Error("Unsupported projection type: "+t);t!==this._projection&&(this._projection=t,this._createProj(),this._update(),this.geoTrigger(e.camera.projection,{camera:this,projection:t}))}}),Object.defineProperty(this,"projectionMatrix",{get:function(){return this._proj}}),Object.defineProperty(this,"transform",{get:function(){return this._transform}}),Object.defineProperty(this,"inverse",{get:function(){return this._inverse}}),Object.defineProperty(this,"viewport",{get:function(){return{width:this._viewport.width,height:this._viewport.height,left:this._viewport.left,top:this._viewport.top}},set:function(t){if(!(t.width>0&&t.height>0))throw new Error("Invalid viewport dimensions");t.width===this._viewport.width&&t.height===this._viewport.height||(this._viewport.width&&this._viewport.height&&(this._scale([this._viewport.width/t.width,this._viewport.height/t.height,1]),this._translate([(t.width-this._viewport.width)/2,(t.height-this._viewport.height)/2,0])),this._viewport={width:t.width,height:t.height,left:t.left,top:t.top},this._update(),this.geoTrigger(e.camera.viewport,{camera:this,viewport:this.viewport}))}}),this._resetView=function(){return u.identity(this._view),this},this._translate=function(t){return u.translate(this._view,this._view,t),this},this._scale=function(t){return u.scale(this._view,this._view,t),this},this._worldToClip4=function(t){return l.transformMat4(t,t,this._transform)},this._clipToWorld4=function(t){return l.transformMat4(t,t,this._inverse)},this.applyProjection=function(t){var e;return"perspective"===this._projection?(e=1/(t[3]||1),t[0]=e*t[0],t[1]=e*t[1],t[2]=e*t[2],t[3]=e):t[3]=1,t},this.unapplyProjection=function(t){var e;return"perspective"===this._projection?(e=t[3]||1,t[0]=e*t[0],t[1]=e*t[1],t[2]=e*t[2],t[3]=e):t[3]=1,t},this.worldToDisplay4=function(t){return t=[t[0],t[1],t[2]||0,t[3]||1],(t=l.transformMat4(t,t,this.display))[3]&&1!==t[3]&&(t=[t[0]/t[3],t[1]/t[3],t[2]/t[3],1]),t},this.displayToWorld4=function(t){return t=[t[0],t[1],t[2]||0,t[3]||1],(t=l.transformMat4(t,t,this.world))[3]&&1!==t[3]&&(t=[t[0]/t[3],t[1]/t[3],t[2]/t[3],1]),t},this.worldToDisplay=function(t){var e=this._clipbounds[this._projection];return{x:(t=this.worldToDisplay4([t.x,t.y,-e.near]))[0],y:t[1]}},this.displayToWorld=function(t){return{x:(t=this.displayToWorld4([t.x,t.y,-1]))[0],y:t[1]}},this._getBounds=function(){var t,e,n,r,i={};return t=this.displayToWorld({x:0,y:0}),e=this.displayToWorld({x:this._viewport.width,y:0}),n=this.displayToWorld({x:0,y:this._viewport.height}),r=this.displayToWorld({x:this._viewport.width,y:this._viewport.height}),i.left=Math.min(t.x,e.x,n.x,r.x),i.bottom=Math.min(t.y,e.y,n.y,r.y),i.right=Math.max(t.x,e.x,n.x,r.x),i.top=Math.max(t.y,e.y,n.y,r.y),i},this._setBounds=function(t){var e={width:t.right-t.left,height:t.top-t.bottom},n={x:(t.left+t.right)/2,y:(t.bottom+t.top)/2};return this._viewFromCenterSizeRotation(n,e,0),this},this._viewFromCenterSizeRotation=function(t,e,n){var r,i,a,s=o.vec3AsArray(),u=o.vec3AsArray();return this._resetView(),(i=Math.abs(e.width))/(a=Math.abs(e.height))>=(r=this._viewport.width/this._viewport.height)?(a=i/r,u[0]=2/i,u[1]=2/a):(i=a*r,u[0]=2/i,u[1]=2/a),u[2]=1,this._scale(u),n&&this._rotate(n),s[0]=-t.x,s[1]=-t.y,s[2]=0,this._translate(s),this},this.viewFromCenterSizeRotation=function(t,e,n){return this._viewFromCenterSizeRotation(t,e,n),this._update(),this},this.pan=function(t){if(t.x||t.y||t.z)return this._translate([t.x,t.y,t.z||0]),this._update(),this},this.zoom=function(t){if(1!==t)return u.scale(this._view,this._view,[t,t,t]),this._update(),this},this._rotate=function(t,e,n){if(t){n=n||[0,0,-1],e?void 0!==e.x&&(e=[e.x||0,e.y||0,e.z||0]):e=[0,0,0];var r=[-e[0],-e[1],-e[2]];return u.translate(this._view,this._view,e),u.rotate(this._view,this._view,t,n),u.translate(this._view,this._view,r),this}},this.css=function(t){var e;switch((t||"").toLowerCase()){case"display":case"":e=this.display;break;case"world":e=this.world;break;default:throw new Error("Unknown transform "+t)}return c.css(e)},this.ppMatrix=function(t,e){var n=t;function r(t){var r=n[t],i=r.toExponential(e);return r>=0&&(i=" "+i),i}return e=e||2,[[r(0),r(4),r(8),r(12)].join(" "),[r(1),r(5),r(9),r(13)].join(" "),[r(2),r(6),r(10),r(14)].join(" "),[r(3),r(7),r(11),r(15)].join(" ")].join("\n")},this.toString=function(){return this.ppMatrix(this._transform)},this.debug=function(){return["bounds",JSON.stringify(this.bounds),"view:",this.ppMatrix(this._view),"projection:",this.ppMatrix(this._proj),"transform:",this.ppMatrix(this._transform)].join("\n")},this.valueOf=function(){return this._transform},this._clipbounds=this.constructor.clipbounds,this._resetView(),this.projection=t.projection||"parallel",t.viewport&&(this.viewport=t.viewport),this._update(),this};c.projection={perspective:!0,parallel:!0},c.clipbounds={perspective:{left:-1,right:1,top:1,bottom:-1,far:2e3,near:.01},parallel:{left:-1,right:1,top:1,bottom:-1,far:-1,near:1}},c.css=function(t){return"matrix3d("+t.map((function(t){return(t=(+t).toPrecision(15)).indexOf("e")>=0?t=(+t).toString():t.indexOf(".")>=0&&(t=t.replace(/(\.|)0+$/,"")),t})).join(",")+")"},c.vec3=s,c.mat3=a,c.vec4=l,c.mat4=u,r(c,i),t.exports=c},1103:function(t,e,n){var r,i=n(4626),o=n(1098).registerRenderer,a=n(2274),s=function(t){"use strict";var e=n(5616);if(!(this instanceof s))return new s(t);t=t||{},a.call(this,t);var r=this,i=!0,o=this._init,u=this._exit;return this.clearCanvas=function(t){i=t},this.api=function(){return s.apiname},this._init=function(){if(r.initialized())return r;o.call(r);var n=t.canvas||e(document.createElement("canvas"));r.context2d=n[0].getContext("2d"),n.addClass("canvas-canvas"),e(r.layer().node().get(0)).append(n),r.canvas(n);var i=r.layer().map().size();return r._resize(0,0,i.width,i.height),r},this._resize=function(t,e,n,i){var o=r.canvas();return parseInt(o.attr("width"),10)===n&&parseInt(o.attr("height"),10)===i||(r._setWidthHeight(n,i),o.attr("width",n),o.attr("height",i),r._render()),r},this._render=function(){return r.layer().map().scheduleAnimationFrame(r._renderFrame),r},this._renderFrame=function(){var t,e=r.layer(),n=e.map(),o=n.size(),a=e.features?e.features():[];for(t=0;t<a.length;t+=1)if(a[t]._delayRender())return void r._render();for(i&&(r.context2d.setTransform(1,0,0,1,0,0),r.context2d.clearRect(0,0,o.width,o.height)),t=0;t<a.length;t+=1)a[t].visible()&&a[t]._renderOnCanvas(r.context2d,n)},this._exit=function(){r.canvas().remove(),u()},this};s.apiname="canvas",i(s,a),o("canvas",s),s.supported=function(){if(void 0===r){var t;try{t=document.createElement("canvas"),r=!(!t.getContext||!t.getContext("2d"))}catch(t){r=!1}t=void 0}return r},s.fallback=function(){return null},t.exports=s},9142:function(t,e,n){var r=n(4626),i=n(1098).registerFeature,o=n(9163),a=n(77),s=n(642),u=function(t){"use strict";if(!(this instanceof u))return new u(t);o.call(this,t),n(5895).call(this);var e,r,i,l,c,f,h=n(6409),d=this,p=this._init,m=this._update,g=a();return this._computeGradient=function(){var t,e,n,r,i;if(i=d.style("color"),!d._grad||d._gradColors!==i){for(e in r=(n=(t=document.createElement("canvas")).getContext("2d")).createLinearGradient(0,0,0,256),t.width=1,t.height=256,i)r.addColorStop(e,s.convertColorToRGBA(i[e]));n.fillStyle=r,n.fillRect(0,0,1,256),d._grad=n.getImageData(0,0,1,256).data,d._gradColors=i}return d},this._createCircle=function(){var t,e,n,r,i,o,a;if(n=d.style("radius"),i=d.style("blurRadius"),o=d.style("gaussian"),a=d.style("scaleWithZoom")){var s=this.layer().map().zoom();n*=a=Math.pow(2,s),i*=a}if(!d._circle||d._circle.gaussian!==o||d._circle.radius!==n||d._circle.blurRadius!==i){if(e=(t=d._circle=document.createElement("canvas")).getContext("2d"),r=i+n,t.width=t.height=2*r,o){var u=e.createRadialGradient(r,r,0,r,r,r);u.addColorStop(0,"rgba(255,255,255,1)"),u.addColorStop(.1,"rgba(255,255,255,0.946)"),u.addColorStop(.2,"rgba(255,255,255,0.801)"),u.addColorStop(.3,"rgba(255,255,255,0.607)"),u.addColorStop(.4,"rgba(255,255,255,0.411)"),u.addColorStop(.5,"rgba(255,255,255,0.249)"),u.addColorStop(.6,"rgba(255,255,255,0.135)"),u.addColorStop(.7,"rgba(255,255,255,0.066)"),u.addColorStop(.8,"rgba(255,255,255,0.029)"),u.addColorStop(.9,"rgba(255,255,255,0.011)"),u.addColorStop(1,"rgba(255,255,255,0)"),e.fillStyle=u,e.fillRect(0,0,2*r,2*r)}else e.shadowOffsetX=e.shadowOffsetY=2*r,e.shadowBlur=i,e.shadowColor="black",e.beginPath(),e.arc(-r,-r,n,0,2*Math.PI,!0),e.closePath(),e.fill();t.radius=n,t.blurRadius=i,t.gaussian=o,d._circle=t}return d},this._colorize=function(t,n){var o,a,s,u=new Uint32Array(n.buffer),l=t.length;for(e&&e.length===l||(e=new ArrayBuffer(l),r=new Uint8ClampedArray(e),i=new Uint32Array(e)),o=3,s=0;o<l;o+=4,s+=1)(a=t[o])&&(i[s]=u[a]);t.set(r)},this._renderPoints=function(t,e,n,r){var i,o,a,s=d.gcsPosition(),u=d.intensity(),l=d.minIntensity(),c=d.maxIntensity()-l||1;for(i=n.length-1;i>=0;i-=1)o=e.worldToDisplay(s[i]),(a=(u(n[i],i)-l)/c)<=0||(t.globalAlpha=a<.01?.01:a>1?1:a,t.drawImage(d._circle,o.x-r,o.y-r))},this._renderBinnedData=function(t,e,n,r,i){var o,a,s,u,l,c,f,h,p=d.gcsPosition(),m=d.intensity(),g=d.minIntensity(),y=d.maxIntensity()-g||1,v=e.size(),x=[],_=Math.ceil(r/i),b=Math.ceil(v.width/i)+2*_+2,w=Math.ceil(v.height/i)+2*_+2,M=n.length;for(o=0;o<M;o+=1)a=e.worldToDisplay(p[o]),isNaN(a.x)||isNaN(a.y)||(void 0===f&&(f=(a.x%i+i)%i,h=(a.y%i+i)%i),(u=Math.floor((a.x-f)/i)+_+1)<0||u>=b||(l=Math.floor((a.y-h)/i)+_+1)<0||l>=w||(s=(m(n[o],o)-g)/y)<=0||(s>1&&(s=1),x[l]=x[l]||[],u*=4,(c=x[l])[u]?(c[u]+=s,c[u+1]+=(1-c[u+1])*s,c[u+2]+=a.x*s,c[u+3]+=a.y*s):(c[u]=c[u+1]=s,c[u+2]=a.x*s,c[u+3]=a.y*s)));for(l=x.length-1;l>=0;l-=1)if(c=x[l])for(u=c.length-4;u>=0;u-=4)c[u]&&(s=c[u+1],t.globalAlpha=s<.01?.01:s>1?1:s,t.drawImage(d._circle,c[u+2]/c[u]-r,c[u+3]/c[u]-r))},this._renderOnCanvas=function(t,e){if(g.timestamp()<d.buildTime().timestamp()){var n,r,i=Date.now(),o=d.data()||[],a=d.style("radius")+d.style("blurRadius"),s=d.binned(),u=d.layer(),h=e.size();if(d.style("scaleWithZoom")&&(a*=Math.pow(2,e.zoom())),!0===s||"auto"===s)if(s=Math.max(Math.floor(a/8),Math.max(1.5,Math.min(3,a/2.5))),"auto"===d.binned())Math.ceil((h.width+2*a)/s)*Math.ceil((h.height+2*a)/s)>=o.length&&(s=0);(s<1||isNaN(s))&&(s=!1),d._binned=s,t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,h.width,h.height),c="",a>.5&&a<8192&&(e.scheduleAnimationFrame(d._setTransform,!1),u.canvas().css({transform:""}),d._createCircle(),d._computeGradient(),s?d._renderBinnedData(t,e,o,a,s):d._renderPoints(t,e,o,a),n=u.canvas()[0],r=t.getImageData(0,0,n.width,n.height),d._colorize(r.data,d._grad),t.putImageData(r,0,0)),l={zoom:e.zoom(),gcsOrigin:e.displayToGcs({x:0,y:0},null),rotation:e.rotation(),lastScale:void 0,lastOrigin:{x:0,y:0},lastRotation:void 0},g.modified(),u.renderer().clearCanvas(!1),f=Date.now()-i}return d},this._init=function(){return p.call(d,t),d.geoOn(h.pan,d._animatePan),d},this._update=function(){return m.call(d),(d.buildTime().timestamp()<=d.dataTime().timestamp()||d.updateTime().timestamp()<d.timestamp())&&d._build(),d.updateTime().modified(),d},this._setTransform=function(){d.layer()&&d.layer().canvas()&&d.layer().canvas()[0]&&(d.layer().canvas()[0].style.transform=c)},this._animatePan=function(){if(l){var t=d.layer().map(),e=t.zoom(),n=Math.pow(2,e-l.zoom),r=t.gcsToDisplay(l.gcsOrigin,null),i=t.rotation();if(l.lastScale!==n||l.lastOrigin.x!==r.x||l.lastOrigin.y!==r.y||l.lastRotation!==i){var o=" translate("+r.x+"px,"+r.y+"px) scale("+n+") rotate("+180*(i-l.rotation)/Math.PI+"deg)";if(t.scheduleAnimationFrame(d._setTransform),c=o,l.lastScale=n,l.lastOrigin.x=r.x,l.lastOrigin.y=r.y,l.lastRotation=i,l.timeout&&(window.clearTimeout(l.timeout),l.timeout=void 0),1!==parseFloat(n.toFixed(4))||0!==parseFloat((i-l.rotation).toFixed(4))||0!==parseFloat(r.x.toFixed(1))||0!==parseFloat(r.y.toFixed(1))){var a=d.updateDelay();a=a<0&&f?f-Math.floor(1e3/60*a):f?2*f:100,l.timeout=window.setTimeout((function(){l.timeout=void 0,d.buildTime().modified(),d.layer().draw()}),d.updateDelay())}}}},d._init(t),this};r(u,o),i("canvas","heatmap",u),t.exports=u},8074:function(t,e,n){t.exports={canvasRenderer:n(1103),heatmapFeature:n(9142),isolineFeature:n(1195),lineFeature:n(2954),pixelmapFeature:n(5398),quadFeature:n(5578),textFeature:n(2213),tileLayer:n(511),trackFeature:n(1795)}},1195:function(t,e,n){var r=n(4626),i=n(1098).registerFeature,o=n(2586),a=function(t){"use strict";return this instanceof a?(t=t||{},o.call(this,t),n(5895).call(this),this._init(t),this):new a(t)};r(a,o),i("canvas","isoline",a),t.exports=a},2954:function(t,e,n){var r=n(4626),i=n(1098).registerFeature,o=n(9281),a=function(t){"use strict";if(!(this instanceof a))return new a(t);var e=n(5895);t=t||{},o.call(this,t),e.call(this);var r=this;return this._renderOnCanvas=function(t,e){var n,i,o,a,s,u=r.data(),l=r.position(),c=r.line(),f=r.style.get("strokeWidth"),h=r.style.get("strokeColor"),d=r.style.get("strokeOpacity"),p=r.style.get("lineCap"),m=r.style.get("lineJoin"),g=r.style.get("miterLimit")(u),y=r.style.get("closed"),v={},x={};u.forEach((function(e,u){if(!((i=c(e,u)).length<2)){for(x.closed=y(e,u),x.width=f(i[0],0,e,u),x.color=h(i[0],0,e,u),x.opacity=d(i[0],0,e,u),x.linecap=p(i[0],0,e,u),x.linejoin=m(i[0],0,e,u),x.strokeStyle="rgba("+255*x.color.g+", "+255*x.color.g+", "+255*x.color.b+", "+(void 0!==x.opacity?x.opacity:1)+")",v.strokeStyle===x.strokeStyle&&v.width===x.width&&v.linecap===x.linecap&&v.linejoin===x.linejoin&&v.miterlimit===x.miterlimit||(void 0!==v.strokeStyle&&t.stroke(),t.beginPath(),t.strokeStyle=x.strokeStyle,t.lineWidth=x.width,t.lineCap=x.linecap,t.lineJoin=x.linejoin,t.miterLimit=g),s=0;s<i.length;s+=1)o=r.featureGcsToDisplay(l(i[s],s,e,u)),s?t.lineTo(o.x,o.y):(a=o,t.moveTo(o.x,o.y));x.closed&&t.lineTo(a.x,a.y),n=v,v=x,x=n}})),void 0!==v.strokeStyle&&t.stroke()},this._init(t),this};r(a,o);var s={};s[o.capabilities.basic]=!0,s[o.capabilities.multicolor]=!1,i("canvas","line",a,s),t.exports=a},5895:function(t,e,n){var r=function(t){"use strict";if(!(this instanceof n(1338)))return new r(t);var e=this,i=this.draw,o={};return this._renderOnCanvas=function(){},this._delayRender=function(){return!1},this._canvasProperty=function(t,n,r){return t&&n?(o[n]!==r&&(o[n]=r,t[n]=r),e):(o={},e)},this.draw=function(){return e.ready&&(e._update(),e.renderer()._render(),i()),e},this};t.exports=r},5398:function(t,e,n){var r=n(4626),i=n(1098).registerFeature,o=n(7761),a=n(6409),s=n(642),u=function(t){"use strict";if(!(this instanceof u))return new u(t);o.call(this,t),n(5895).call(this);var e,r=this._exit,i=this;return this.pointSearch=function(t,n){if(e&&i.m_info){var r=e.pointSearch(t,n);if(1===r.index.length&&r.extra&&r.extra[r.index[0]].basis){var o,a,s,u=r.extra[r.index[0]].basis;if(o=Math.floor(u.x*i.m_info.width),a=Math.floor(u.y*i.m_info.height),o>=0&&o<i.m_info.width&&a>=0&&a<i.m_info.height)return r={index:[s=i.m_info.indices[a*i.m_info.width+o]],found:[i.data()[s]]}}}return{index:[],found:[]}},this._preparePixelmap=function(){var t,e,n;if(s.isReadyImage(i.m_srcImage)){for(i.m_info={width:i.m_srcImage.naturalWidth,height:i.m_srcImage.naturalHeight,canvas:document.createElement("canvas")},i.m_info.canvas.width=i.m_info.width,i.m_info.canvas.height=i.m_info.height,i.m_info.context=i.m_info.canvas.getContext("2d"),i.m_info.context.drawImage(i.m_srcImage,0,0),i.m_info.imageData=i.m_info.context.getImageData(0,0,i.m_info.canvas.width,i.m_info.canvas.height),n=i.m_info.imageData.data,i.m_info.indices=new Array(n.length/4),i.m_info.area=n.length/4,i.m_info.mappedColors={},t=0;t<n.length;t+=4)e=n[t]+(n[t+1]<<8)+(n[t+2]<<16),i.m_info.indices[t/4]=e,i.m_info.mappedColors[e]||(i.m_info.mappedColors[e]={first:t/4}),i.m_info.mappedColors[e].last=t/4;return i.m_info}},this._computePixelmap=function(){var t,n,r,o,s,u,l,c,f,h,d=i.data()||[],p=i.style.get("color"),m=-1;if(!i.m_info){if(i.indexModified(void 0,"clear"),!i._preparePixelmap())return;h=!0}for(n in i.indexModified(void 0,"clear"),l=i.m_info.mappedColors,c=i.m_info.area,l)l.hasOwnProperty(n)&&(o=[255*((o=p(d[n],+n)||{}).r||0),255*(o.g||0),255*(o.b||0),void 0===o.a?255:255*o.a],l[n].update=!l[n].color||l[n].color[0]!==o[0]||l[n].color[1]!==o[1]||l[n].color[2]!==o[2]||l[n].color[3]!==o[3],l[n].update&&(l[n].color=o,c=Math.min(l[n].first,c),m=Math.max(l[n].last,m)));if(!(c>=m)){for(s=i.m_info.imageData.data,u=i.m_info.indices,t=c;t<=m;t+=1)(n=u[t])!==r&&(r=n,o=l[n].color,f=l[n].update),f&&(s[4*t]=o[0],s[4*t+1]=o[1],s[4*t+2]=o[2],s[4*t+3]=o[3]);i.m_info.context.putImageData(i.m_info.imageData,0,0,0,Math.floor(c/i.m_info.width),i.m_info.width,Math.ceil((m+1)/i.m_info.width)),e||(e=i.layer().createFeature("quad",{selectionAPI:!1,gcs:i.gcs(),visible:i.visible(void 0,!0)}),i.dependentFeatures([e]),e.style({image:i.m_info.canvas,position:i.style.get("position")}).data([{}]).draw()),h&&i.geoTrigger(a.pixelmap.prepared,{pixelmap:i})}},this._exit=function(){return e&&i.layer()&&(i.layer().deleteFeature(e),e=null,i.dependentFeatures([])),r(),i},this._init(t),this};r(u,o),i("canvas","pixelmap",u),t.exports=u},5578:function(t,e,n){var r=n(4626),i=n(1098).registerFeature,o=n(3842),a=n(642),s=function(t){"use strict";if(!(this instanceof s))return new s(t);o.call(this,t),n(5895).call(this);var e,r=n(5616),i=this,u=this._exit,l=this._init,c=this._update;return this._build=function(){i.position()&&((e=i._generateQuads()).imgQuads&&e.imgQuads.sort((function(t,e){return t.pos[2]-e.pos[2]})),i.buildTime().modified())},this._checkQuadUpdate=function(t,e){i.layer().map().scheduleAnimationFrame(i._checkIfChanged)},this._checkIfChanged=function(){if(e&&e.vidQuads&&e.vidQuads.length){var t=!1,n=!1;r.each(e.vidQuads,(function(e,r){r.video&&void 0!==r.video.HAVE_CURRENT_DATA&&(!r.video.seeking&&r.video.readyState>=r.video.HAVE_CURRENT_DATA&&(t=!0),r.video.paused&&!r.video.seeking||(n=!0))})),t&&i.renderer()&&i.renderer()._render(),n&&i.layer().map().scheduleAnimationFrame(i._checkIfChanged)}},this._renderColorQuads=function(t,n){if(e.clrQuads&&e.clrQuads.length){var i=t.globalAlpha,o=i;r.each(e.clrQuads,(function(e,r){var i=n.gcsToDisplay({x:r.pos[0],y:r.pos[1]},null),s=n.gcsToDisplay({x:r.pos[3],y:r.pos[4]},null),u=n.gcsToDisplay({x:r.pos[6],y:r.pos[7]},null),l=n.gcsToDisplay({x:r.pos[9],y:r.pos[10]},null);r.opacity!==o&&(o=r.opacity,t.globalAlpha=o),t.fillStyle=a.convertColorToHex(r.color,!0),t.beginPath(),t.moveTo(i.x,i.y),t.lineTo(s.x,s.y),t.lineTo(l.x,l.y),t.lineTo(u.x,u.y),t.closePath(),t.fill()})),o!==i&&(t.globalAlpha=i)}},this._renderImageAndVideoQuads=function(t,n){if(e.imgQuads&&e.imgQuads.length||e.vidQuads&&e.vidQuads.length){var o=t.globalAlpha,s=o,u=i.nearestPixel();if(void 0!==u){if(!0!==u&&a.isNonNullFinite(u))u=i.layer().map().zoom()>=u;t.imageSmoothingEnabled=!u}r.each([e.imgQuads,e.vidQuads],(function(e,i){i&&r.each(i,(function(e,r){var i,o,a;if(r.image)o=(i=r.image).width,a=i.height;else if(r.video&&(o=(i=r.video).videoWidth,a=i.videoHeight,i.seeking))return;if(i&&o&&a&&!(r.opacity<=0)){var u=n.gcsToDisplay({x:r.pos[0],y:r.pos[1]},null),l=n.gcsToDisplay({x:r.pos[6],y:r.pos[7]},null),c=n.gcsToDisplay({x:r.pos[9],y:r.pos[10]},null),f=Math.min(o,r.crop&&r.crop.x||o),h=Math.min(a,r.crop&&r.crop.y||a);if(t.setTransform((c.x-l.x)/f,(c.y-l.y)/f,(u.x-l.x)/h,(u.y-l.y)/h,l.x,l.y),r.opacity!==s&&(s=r.opacity,t.globalAlpha=s),r.crop){var d=Math.max(0,r.crop.left||0),p=Math.max(0,r.crop.top||0),m=Math.min(o,r.crop.right||o),g=Math.min(a,r.crop.bottom||a);o&&a&&f>0&&h>0&&m>d&&g>p&&t.drawImage(i,d,p,m-d,g-p,0,0,f,h)}else t.drawImage(i,0,0)}}))})),s!==o&&(t.globalAlpha=o),t.setTransform(1,0,0,1,0,0),t.imageSmoothingEnabled=!0}},this._delayRender=function(){var t=!1;return e&&e.vidQuads&&e.vidQuads.length&&r.each(e.vidQuads,(function(e,n){n.video&&void 0!==n.video.HAVE_CURRENT_DATA&&(t|=n.video.seeking&&n.delayRenderWhenSeeking)})),t},this._renderOnCanvas=function(t,n){e&&(i._renderImageAndVideoQuads(t,n),i._renderColorQuads(t,n))},this._update=function(){c.call(i),(i.buildTime().timestamp()<=i.dataTime().timestamp()||i.updateTime().timestamp()<i.timestamp())&&i._build(),i.updateTime().modified(),i.layer().map().scheduleAnimationFrame(i._checkIfChanged)},this._init=function(){l.call(i,t)},this._exit=function(){u.call(i)},i._init(t),this};r(s,o);var u={};u[o.capabilities.color]=!0,u[o.capabilities.image]=!0,u[o.capabilities.imageCrop]=!0,u[o.capabilities.imageFixedScale]=!0,u[o.capabilities.imageFull]=!1,u[o.capabilities.canvas]=!0,u[o.capabilities.video]=!0,i("canvas","quad",s,u),t.exports=s},2213:function(t,e,n){var r=n(4626),i=n(1098).registerFeature,o=n(6546),a=n(642),s=n(3638),u=n(1982),l=function(t){"use strict";if(!(this instanceof l))return new l(t);var e=n(5895);t=t||{},o.call(this,t),e.call(this);var r=this,i="bold 16px sans-serif",c=new RegExp('^\\s*(?=(?:(?:[-a-z0-9]+\\s+){0,3}(italic|oblique))?)(?=(?:(?:[-a-z0-9]+\\s+){0,3}(small-caps))?)(?=(?:(?:[-a-z0-9]+\\s+){0,3}(bold(?:er)?|lighter|[1-9]00))?)(?=(?:(?:[-a-z0-9]+\\s+){0,3}((?:ultra-|extra-|semi-)?(?:condensed|expanded)))?)(?:(?:normal|\\1|\\2|\\3|\\4)\\s+){0,4}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))(?:/(normal|[.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])))?\\s+([-,\\"\\sa-z]+?)\\s*$',"i");return this.getFontFromStyles=function(t,e,n){var o=r.style.get("font")(e,n)||i;if(t){var a=c.exec(o);null===a&&(a=c.exec(i)),a[1]=r.style.get("fontStyle")(e,n)||a[1],a[2]=r.style.get("fontVariant")(e,n)||a[2],a[3]=r.style.get("fontWeight")(e,n)||a[3],a[4]=r.style.get("fontStretch")(e,n)||a[4],a[5]=r.style.get("fontSize")(e,n)||a[5]||"16px",a[6]=r.style.get("lineHeight")(e,n)||a[6],a[7]=r.style.get("fontFamily")(e,n)||a[7]||"sans-serif",o=(o=(a[1]||"")+" "+(a[2]||"")+" "+(a[3]||"")+" "+(a[4]||"")+" "+(a[5]||"")+(a[6]?"/"+a[6]:"")+" "+a[7]).trim().replace(/\s\s+/g," ")}return o},this._renderOnCanvas=function(t,e){var n,i,o,l,c,f,h,d,p,m,g,y,v,x,_=r.data(),b=r.style.get("position"),w=r.style.get("renderThreshold")(_),M=r.style.get("text"),A=e.rotation(),T=e.zoom(),E=e.size(),C=a.mat3AsArray();n=["fontStyle","fontVariant","fontWeight","fontStretch","fontSize","lineHeight","fontFamily"].some((function(t){return null!==r.style(t)&&void 0!==r.style(t)})),r._canvasProperty(),o=r.featureGcsToDisplay(_.map(b)),_.forEach((function(e,_){l=o[_],w>0&&(l.x<-w||l.x>E.width+w||l.y<-w||l.y>E.height+w)||((c=r.style.get("visible")(e,_))||void 0===c)&&(f=a.convertColorAndOpacity(r.style.get("color")(e,_),r.style.get("textOpacity")(e,_)),d=a.convertColorAndOpacity(r.style.get("textStrokeColor")(e,_),r.style.get("textOpacity")(e,_),{r:0,g:0,b:0,a:0}),0===f.a&&0===d.a||(r._canvasProperty(t,"fillStyle",a.convertColorToRGBA(f)),null!=(i=M(e,_))&&""!==i&&(r._canvasProperty(t,"font",r.getFontFromStyles(n,e,_)),r._canvasProperty(t,"textAlign",r.style.get("textAlign")(e,_)||"center"),r._canvasProperty(t,"textBaseline",r.style.get("textBaseline")(e,_)||"middle"),m=r.style.get("rotation")(e,_)||0,g=r.style.get("rotateWithMap")(e,_)&&A,y=r.style.get("textScaled")(e,_),y=a.isNonNullFinite(y)?Math.pow(2,T-y):null,v=r.style.get("offset")(e,_),x=a.mat3AsArray(),(m||g||y&&1!==y||v&&(v.x||v.y))&&(s.translate(x,x,[l.x,l.y]),g&&A&&s.rotate(x,x,A),s.translate(x,x,[v&&v.x?+v.x:0,v&&v.y?+v.y:0]),m&&s.rotate(x,x,m),y&&1!==y&&s.scale(x,x,[y,y]),s.translate(x,x,[-l.x,-l.y])),C[0]===x[0]&&C[1]===x[1]&&C[3]===x[3]&&C[4]===x[4]&&C[6]===x[6]&&C[7]===x[7]||(t.setTransform(x[0],x[1],x[3],x[4],x[6],x[7]),s.copy(C,x)),(f=a.convertColorAndOpacity(r.style.get("shadowColor")(e,_),void 0,{r:0,g:0,b:0,a:0})).a&&(v=r.style.get("shadowOffset")(e,_),h=r.style.get("shadowBlur")(e,_)),f.a&&(v&&(v.x||v.y)||h)?(r._canvasProperty(t,"shadowColor",a.convertColorToRGBA(f)),v&&(m||g)&&r.style.get("shadowRotate")(e,_)&&(x=[+v.x,+v.y,0],u.rotateZ(x,x,[0,0,0],m+(g?A:0)),v={x:x[0],y:x[1]}),r._canvasProperty(t,"shadowOffsetX",v&&v.x?+v.x:0),r._canvasProperty(t,"shadowOffsetY",v&&v.y?+v.y:0),r._canvasProperty(t,"shadowBlur",h||0)):r._canvasProperty(t,"shadowColor","rgba(0,0,0,0)"),d.a&&(p=r.style.get("textStrokeWidth")(e,_),isFinite(p)&&p>0&&(r._canvasProperty(t,"strokeStyle",a.convertColorToRGBA(d)),r._canvasProperty(t,"lineWidth",p),t.strokeText(i,l.x,l.y),r._canvasProperty(t,"shadowColor","rgba(0,0,0,0)"))),t.fillText(i,l.x,l.y))))})),r._canvasProperty(t,"globalAlpha",1),t.setTransform(1,0,0,1,0,0)},this};r(l,o);i("canvas","text",l,{}),t.exports=l},511:function(t,e,n){var r=function(){"use strict";var t,e=this,n=this._init,r=this._exit,i=this._update,o=0,a=[];this._drawTile=function(n){if(t){var r=e._tileBounds(n),i=n.index.level||0,s=e._tileOffset(i),u=e.tileCropFromBounds(n),l={};u&&(l.crop=u),l.ul=e.fromLocal(e.fromLevel({x:r.left-s.x,y:r.top-s.y},i),0),l.ll=e.fromLocal(e.fromLevel({x:r.left-s.x,y:r.bottom-s.y},i),0),l.ur=e.fromLocal(e.fromLevel({x:r.right-s.x,y:r.top-s.y},i),0),l.lr=e.fromLocal(e.fromLevel({x:r.right-s.x,y:r.bottom-s.y},i),0),l.ul.z=l.ll.z=l.ur.z=l.lr.z=i,o+=1,l.id=o,n.quadId=l.id,l.image=n.image,a.push(l),t.data(a),t._update(),e.draw()}},this._remove=function(n){if(void 0!==n.quadId&&t){for(var r=0;r<a.length;r+=1)if(a[r].id===n.quadId){a.splice(r,1);break}t.data(a),t._update(),e.draw()}},this._update=function(n){return i.call(e,n),t&&t.nearestPixel&&t.nearestPixel(e.nearestPixel()),e._addBaseQuadToTiles(t,a),e},this._exit=function(){e.deleteFeature(t),t=null,a=[],r.apply(e,arguments)},this._init=function(){n.apply(e,arguments),(t=e.createFeature("quad",{previewColor:e._options.previewColor,previewImage:e._options.previewImage})).geoTrigger=void 0,t.gcs(e._options.gcs||e.map().gcs()),t.data(a),t._update()},this._getSubLayer=function(){},this._updateSubLayers=void 0};(0,n(1098).registerLayerAdjustment)("canvas","tile",r),t.exports=r},1795:function(t,e,n){var r=n(4626),i=n(1098).registerFeature,o=n(338),a=function(t){"use strict";return this instanceof a?(t=t||{},o.call(this,t),n(5895).call(this),this._init(t),this):new a(t)};r(a,o),i("canvas","track",a),t.exports=a},3561:function(t,e,n){var r=n(4626),i=n(1275),o=function(t){"use strict";if(!(this instanceof o))return new o(t);t=t||{},i.call(this,t);var e=n(5616),r=n(642).ensureFunction;delete t.layer,delete t.renderer;var a=n(2493).d3,s=this,u=this._init,l=e.extend({},{colorRange:[{r:.07514311,g:.468049805,b:1},{r:.468487184,g:.588057293,b:1},{r:.656658579,g:.707001303,b:1},{r:.821573924,g:.837809045,b:1},{r:.943467973,g:.943498599,b:.943398095},{r:1,g:.788626485,b:.750707739},{r:1,g:.6289553,b:.568237474},{r:1,g:.472800903,b:.404551679},{r:.916482116,g:.236630659,b:.209939162}],scale:a.scaleQuantize(),geoId:function(t){return t.properties.GEO_ID},scalarId:function(t){return t.id},scalarValue:function(t){return t.value}},t);return this.featureType="choropleth",this.scalar=function(t,e){var n,r;return void 0===t?s.choropleth.get("scalar")()||[]:(n=s.choropleth.get("scalarId"),r=s.choropleth.get("scalarValue"),l.scalar=t,l.scalarAggregator=e||a.mean,l.scalar._dictionary=t.reduce((function(t,e){var i,o;return i=n(e),o=r(e),t[i]=t[i]?t[i].push(o):[o],t}),{}),s.dataTime().modified(),s)},this.choropleth=function(t,n){var r;return void 0===t?l:"string"==typeof t&&void 0===n?l[t]:(void 0===n?(r=e.extend({},l,t),l=r):l[t]=n,s.modified(),s)},this.choropleth.get=function(t){var e,n={};if(void 0===t){for(e in l)l.hasOwnProperty(e)&&(n[e]=s.choropleth.get(e));return n}return r(l[t])},this._featureToPolygons=function(t,e){var n=s.layer().createFeature("polygon",{});return"Polygon"===t.geometry.type?n.data([{type:"Polygon",coordinates:t.geometry.coordinates}]):"MultiPolygon"===t.geometry.type&&n.data(t.geometry.coordinates.map((function(t){return{type:"Polygon",coordinates:t}}))),n.polygon((function(t){return{outer:t.coordinates[0],inner:t.coordinates[1]}})).position((function(t){return{x:t[0],y:t[1]}})).style({fillColor:e}),n},this._generateScale=function(t){var e=a.extent(s.scalar(),t||void 0);return s.choropleth().scale.domain(e).range(s.choropleth().colorRange),s},this.createChoropleth=function(){var t=s.choropleth,e=s.data(),n=s.scalar(),r=t.get("scalarValue"),i=t.get("geoId");return s._generateScale(r),e.map((function(e){var r=i(e),o=n._dictionary[r],a=t().scalarAggregator(o),u=s.choropleth().scale(a);return s._featureToPolygons(e,u)}))},this._init=function(t){return u.call(s,t),l&&s.dataTime().modified(),s},this._init(t),this};r(o,i),t.exports=o},6761:function(t,e,n){var r=n(4626),i=n(6124),o=function(t){"use strict";if(!(this instanceof o))return new o(t);var e=n(5616),r=n(642),a=n(5905);t=t||{},i.call(this,t);var s=this,u=this._init;return this._createContours=function(){return a.createColoredMesh(s,!1)},this.contour=s.mesh,this._init=function(t){u.call(s,t);var n=e.extend({},{opacity:1,value:function(t,e){return r.isNonNullFinite(t)?t:s.position()(t,e).z},position:function(t){return t||{x:0,y:0}},origin:function(t){return t.length>=3?[t[0],t[1],0]:[0,0,0]}},void 0===t.style?{}:t.style);s.style(n),s.contour(e.extend({},{minColor:"black",minOpacity:0,maxColor:"black",maxOpacity:0,colorRange:[{r:.07514311,g:.468049805,b:1},{r:.468487184,g:.588057293,b:1},{r:.656658579,g:.707001303,b:1},{r:.821573924,g:.837809045,b:1},{r:.943467973,g:.943498599,b:.943398095},{r:1,g:.788626485,b:.750707739},{r:1,g:.6289553,b:.568237474},{r:1,g:.472800903,b:.404551679},{r:.916482116,g:.236630659,b:.209939162}]},t.mesh||{},t.contour||{})),(t.mesh||t.contour)&&s.dataTime().modified()},this._init(t),this};r(o,i),t.exports=o},9726:function(t,e,n){var r=n(4626),i=n(2274),o=n(1098).registerRenderer,a=function(t){"use strict";if(!(this instanceof a))return new a(t);i.call(this,t),t=t||{};var e=this;return this.api=function(){return"dom"},this._init=function(t){var n=e.layer().node();return!e.canvas()&&n&&n.length&&e.canvas(n[0]),e},this._init(t),this};r(a,i),o("dom",a),t.exports=a},6409:function(t){var e={layerAdd:"geo_layerAdd",layerRemove:"geo_layerRemove",layerMove:"geo_layerMove",zoom:"geo_zoom",rotate:"geo_rotate",pan:"geo_pan",resize:"geo_resize",draw:"geo_draw",drawEnd:"geo_drawEnd",unhidden:"geo_unhidden",hidden:"geo_hidden",mousemove:"geo_mousemove",mouseclick:"geo_mouseclick",mouseup:"geo_mouseup",mousedown:"geo_mousedown",brush:"geo_brush",brushend:"geo_brushend",brushstart:"geo_brushstart",select:"geo_select",zoomselect:"geo_zoomselect",unzoomselect:"geo_unzoomselect",actiondown:"geo_actiondown",actionmove:"geo_actionmove",actionup:"geo_actionup",actionselection:"geo_actionselection",actionwheel:"geo_actionwheel",keyaction:"geo_keyaction",transitionstart:"geo_transitionstart",transitionend:"geo_transitionend",transitioncancel:"geo_transitioncancel",parallelprojection:"geo_parallelprojection",feature:{mousemove:"geo_feature_mousemove",mouseover:"geo_feature_mouseover",mouseover_order:"geo_feature_mouseover_order",mouseout:"geo_feature_mouseout",mouseon:"geo_feature_mouseon",mouseoff:"geo_feature_mouseoff",mouseclick:"geo_feature_mouseclick",mouseclick_order:"geo_feature_mouseclick_order",mousedown:"geo_feature_mousedown",mouseup:"geo_feature_mouseup",brushend:"geo_feature_brushend",brush:"geo_feature_brush"},pixelmap:{prepared:"geo_pixelmap_prepared"},screenshot:{ready:"geo_screenshot_ready"},camera:{}};e.camera.view="geo_camera_view",e.camera.projection="geo_camera_projection",e.camera.viewport="geo_camera_viewport",e.annotation={},e.annotation.add="geo_annotation_add",e.annotation.add_before="geo_annotation_add_before",e.annotation.update="geo_annotation_update",e.annotation.coordinates="geo_annotation_coordinates",e.annotation.select_edit_handle="geo_annotation_select_edit_handle",e.annotation.edit_action="geo_annotation_edit_action",e.annotation.remove="geo_annotation_remove",e.annotation.state="geo_annotation_state",e.annotation.mode="geo_annotation_mode",e.annotation.boolean="geo_annotation_boolean",e.annotation.cursor_click="geo_annotation_cursor_click",e.annotation.cursor_action="geo_annotation_cursor_action",t.exports=e},1275:function(t,e,n){function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}var i=n(5616),o=n(4626),a=n(5402),s=n(77),u=n(5325),l=n(6409),c=function(t){"use strict";if(!(this instanceof c))return new c(t);a.call(this);var e=n(642);t=t||{};var r,o=this,f=this._exit,h=this.geoOn,d=this.geoOff,p=void 0===t.selectionAPI?"auto":t.selectionAPI,m={},g=void 0===t.layer?null:t.layer,y=t.gcs,v=void 0===t.visible||t.visible,x=void 0===t.bin?null:t.bin,_=void 0===t.renderer||g&&t.renderer===g.renderer()?null:t.renderer,b=s(),w=s(),M=s(),A=[],T=[];return this._subfeatureStyles={},Object.defineProperty(this,"ready",{get:function(){return r}}),this._bindMouseHandlers=function(){o.selectionAPI()&&(o._unbindMouseHandlers(),o.geoOn(l.mousemove,o._handleMousemove),o.geoOn(l.mousedown,o._handleMousedown),o.geoOn(l.mouseup,o._handleMouseup),o.geoOn(l.mouseclick,o._handleMouseclick),o.geoOn(l.brushend,o._handleBrushend),o.geoOn(l.brush,o._handleBrush))},this._unbindMouseHandlers=function(){o.geoOff(l.mousemove,o._handleMousemove),o.geoOff(l.mousedown,o._handleMousedown),o.geoOff(l.mouseup,o._handleMouseup),o.geoOff(l.mouseclick,o._handleMouseclick),o.geoOff(l.brushend,o._handleBrushend),o.geoOff(l.brush,o._handleBrush)},this.pointSearch=function(t,e){return{index:[],found:[]}},this.boxSearch=function(t,e,n,r){return o.polygonSearch([t,{x:t.x,y:e.y},e,{x:e.x,y:t.y}],n,r)},this.polygonSearch=function(t,e,n){return{index:[],found:[]}},this._handleMousedown=function(t){this._handleMousemove(t,l.feature.mousedown)},this._handleMouseup=function(t){this._handleMousemove(t,l.feature.mouseup)},this._handleMousemove=function(t,e){var n,r=t&&t.mouse?t.mouse:o.layer().map().interactor().mouse(),i=o.data(),a=o.pointSearch(r.geo),s=[],u=[],f=-1,h=-1;(T.length||a.index.length)&&(n=a.extra||{},a.index.length>1&&o.geoTrigger(l.feature.mouseover_order,{feature:o,mouse:r,previous:T,over:a,sourceEvent:t}),c.eventID+=1,e?a.index.forEach((function(s,u){o.geoTrigger(e,{data:i[s],index:s,extra:n[s],mouse:r,eventID:c.eventID,top:u===a.length-1,sourceEvent:t},!0)})):(T.length&&(f=T[T.length-1]),s=a.index.filter((function(t){return T.indexOf(t)<0})),u=T.filter((function(t){return a.index.indexOf(t)<0})),s.forEach((function(e,a){o.geoTrigger(l.feature.mouseover,{data:i[e],index:e,extra:n[e],mouse:r,eventID:c.eventID,top:a===s.length-1,sourceEvent:t},!0)})),c.eventID+=1,u.forEach((function(e,n){o.geoTrigger(l.feature.mouseout,{data:i[e],index:e,mouse:r,eventID:c.eventID,top:n===u.length-1,sourceEvent:t},!0)})),c.eventID+=1,a.index.forEach((function(e,s){o.geoTrigger(l.feature.mousemove,{data:i[e],index:e,extra:n[e],mouse:r,eventID:c.eventID,top:s===a.index.length-1,sourceEvent:t},!0)})),(T=a.index).length&&(h=T[T.length-1]),f!==h&&(-1!==f&&o.geoTrigger(l.feature.mouseoff,{data:i[f],index:f,mouse:r,sourceEvent:t},!0),-1!==h&&o.geoTrigger(l.feature.mouseon,{data:i[h],index:h,extra:n[h],mouse:r,sourceEvent:t},!0))))},this._clearSelectedFeatures=function(){return T=[],o},this._handleMouseclick=function(t){var e=o.layer().map().interactor().mouse(),n=o.data(),r=o.pointSearch(e.geo),i=r.extra||{};r.index.length>1&&o.geoTrigger(l.feature.mouseclick_order,{feature:o,mouse:e,over:r,sourceEvent:t}),e.buttonsDown=t.buttonsDown,c.eventID+=1,r.index.forEach((function(a,s){o.geoTrigger(l.feature.mouseclick,{data:n[a],index:a,extra:i[a],mouse:e,eventID:c.eventID,top:s===r.index.length-1,sourceEvent:t},!0)}))},this._handleBrush=function(t){var e=[t.gcs.lowerLeft,t.gcs.lowerRight,t.gcs.upperRight,t.gcs.upperLeft];if(o.layer()){var n=o.layer().map();e=u.transformCoordinates(n.gcs(),n.ingcs(),e)}var r=o.polygonSearch(e);c.eventID+=1,r.index.forEach((function(e,n){o.geoTrigger(l.feature.brush,{data:r.found[n],index:e,mouse:t.mouse,brush:t,eventID:c.eventID,top:n===r.index.length-1},!0)}))},this._handleBrushend=function(t){var e=[t.gcs.lowerLeft,t.gcs.lowerRight,t.gcs.upperRight,t.gcs.upperLeft];if(o.layer()){var n=o.layer().map();e=u.transformCoordinates(n.gcs(),n.ingcs(),e)}var r=o.polygonSearch(e);c.eventID+=1,r.index.forEach((function(e,n){o.geoTrigger(l.feature.brushend,{data:r.found[n],index:e,mouse:t.mouse,brush:t,eventID:c.eventID,top:n===r.index.length-1},!0)}))},this.style=function(t,e){return void 0===t?m:"string"==typeof t&&void 0===e?m[t]:void 0===e?(m=i.extend({},m,t),o.modified(),o):(m[t]=e,o.modified(),o)},this.style.get=function(t){var n;if(void 0===t){var r,i={};for(r in m)m.hasOwnProperty(r)&&(i[r]=o.style.get(r));return i}return n=t.toLowerCase().match(/color$/)?e.isFunction(m[t])?function(){return e.convertColor(m[t].apply(o,arguments))}:e.ensureFunction(e.convertColor(m[t])):e.ensureFunction(m[t]),n},this.updateStyleFromArray=function(t,e,n){if("string"!=typeof t)i.each(t,(function(t,e){o.updateStyleFromArray(t,e)}));else{var r;if(t.toLowerCase().match(/color$/)&&(r={r:0,g:0,b:0}),!Array.isArray(e))return o;o._subfeatureStyles[t]?e.length&&Array.isArray(e[0])?o.style(t,(function(t,n,i,o){var a=(e[o]||[])[n];return void 0!==a?a:r})):o.style(t,(function(t,n,i,o){var a=e[o];return void 0!==a?a:r})):o.style(t,(function(t,n){var i=e[n];return void 0!==i?i:r}))}return n&&o.visible()&&o.draw(),o},this.layer=function(){return g},this.renderer=function(){return _||g&&g.renderer()},this.gcs=function(t){return void 0===t?null==y&&g?g.map().ingcs():y:(y=t,o.modified(),o)},this.featureGcsToDisplay=function(t){var e=g.map();return t=e.gcsToWorld(t,o.gcs()),t=e.worldToDisplay(t),o.renderer().baseToLocal&&(t=o.renderer().baseToLocal(t)),t},this.visible=function(t,e){if(void 0===t)return!(!e&&g&&g.visible&&!g.visible())&&v;if(v!==t||e){v=t,o.modified(),g&&g.visible&&!g.visible()&&(t=!1),t?o._bindMouseHandlers():o._unbindMouseHandlers();for(var n=0;n<A.length;n+=1)A[n].visible(v,e)}return o},this.dependentFeatures=function(t){return void 0===t?A.slice():(A=t.slice(),o)},this.bin=function(t,n){if(void 0===t){if(null===x&&!n){var r=o.parent(),i=r?r.children().indexOf(o):-1;return i>=0?i:0}return x}return x=e.isNonNullFinite(t)?parseInt(t,10):null,o.modified(),o},this.dataTime=function(t){return void 0===t?b:(b=t,o.modified(),o)},this.buildTime=function(t){return void 0===t?w:(w=t,o.modified(),o)},this.updateTime=function(t){return void 0===t?M:(M=t,o.modified(),o)},this.data=function(t){return void 0===t?o.style("data")||[]:(o.style("data",t),o.dataTime().modified(),o.modified(),o)},this.selectionAPI=function(t,e){return void 0===t?!(!e&&g&&g.selectionAPI&&!g.selectionAPI())&&(e||"auto"!==p?p:!!o.geoIsOn(Object.values(l.feature))):("auto"!==t&&(t=!!t),(t!==p||e)&&(p=t,o._unbindMouseHandlers(),o._bindMouseHandlers()),o)},this.mouseOverOrderHighestIndex=function(t){t.over.index.sort();var e=t.feature.data();t.over.index.forEach((function(n,r){t.over.found[r]=e[n]}))},this._init=function(t){if(!g)throw new Error("Feature requires a valid layer");m=i.extend({},{opacity:1},void 0===t.style?{}:t.style),o._bindMouseHandlers(),r=!0},this._build=function(){},this._update=function(){},this.geoOn=function(t,e){var n="auto"===o.selectionAPI(void 0,!0),r=n&&o.selectionAPI(),i=h.apply(o,arguments);return n&&!r&&o.selectionAPI()&&o._bindMouseHandlers(),i},this.geoOff=function(t,e){var n="auto"===o.selectionAPI(void 0,!0),r=n&&o.selectionAPI(),i=d.apply(o,arguments);return n&&r&&!o.selectionAPI()&&o._unbindMouseHandlers(),i},this._exit=function(){o._unbindMouseHandlers(),T=[],m={},f(),r=!1},this._init(t),this};c.eventID=0,c.create=function(t,e){"use strict";if(!(t instanceof n(5156)))return console.warn("Invalid layer"),null;if("object"!==r(e))return console.warn("Invalid spec"),null;var i=e.type,o=t.createFeature(i,e);return o?(e.data=e.data||[],o.style(e)):(console.warn('Could not create feature type "'+i+'"'),null)},o(c,a),t.exports=c},6498:function(t,e,n){var r=n(4626),i=n(5156),o=n(6409),a=n(1098),s=function(t){"use strict";if(!(this instanceof s))return new s(t);i.call(this,t);var e=this,n=[],r=this._init,u=this._exit,l=this._update,c=this.visible,f=this.selectionAPI,h=this.draw;return this.createFeature=function(t,n){var r=a.createFeature(t,e,e.renderer(),n);return r?e.addFeature(r):console.warn("Layer renderer ("+e.rendererName()+') does not support feature type "'+t+'"'),r},this.addFeature=function(t){return e.removeFeature(t),e.addChild(t),n.push(t),e.dataTime().modified(),e.modified(),e},this.removeFeature=function(t){var r;return(r=n.indexOf(t))>=0&&(n.splice(r,1),e.removeChild(t),e.dataTime().modified(),e.modified()),e},this.deleteFeature=function(t){return t&&(n.indexOf(t)>=0&&t._exit(),e.removeFeature(t)),e},this.features=function(t){if(void 0===t)return n.slice();var r,i=n.slice();for(r=0;r<i.length;r+=1)t.indexOf(i[r])<0&&n.indexOf(i[r])>=0&&e.deleteFeature(i[r]);for(r=0;r<t.length;r+=1)e.addFeature(t[r]);return e},this.gcsFeatures=function(t){var n,r;return void 0===t?(this.features().forEach((function(t){void 0===n?n=t.gcs():t.gcs()!==n&&(r=!0)})),r?void 0:n):(e.features().forEach((function(e){e.gcs()!==t&&e.gcs(t)})),e)},this._init=function(){return e.initialized()||(r.call(e,!0),e.geoOn(o.resize,(function(t){e.renderer()?(e.renderer()._resize(t.x,t.y,t.width,t.height),e._update({event:t}),e.renderer()._render()):e._update({event:t})})),e.geoOn(o.pan,(function(t){e._update({event:t}),e.renderer()&&e.renderer()._render()})),e.geoOn(o.rotate,(function(t){e._update({event:t}),e.renderer()&&e.renderer()._render()})),e.geoOn(o.zoom,(function(t){e._update({event:t}),e.renderer()&&e.renderer()._render()}))),e},this._update=function(t){var r;if(!n.length)return e;if(l.call(e,t),e.dataTime().timestamp()>e.updateTime().timestamp())for(r=0;r<n.length;r+=1)n[r].renderer(e.renderer());for(r=0;r<n.length;r+=1)n[r]._update();return e.updateTime().modified(),e},this._exit=function(){e.clear(),u()},this.draw=function(){return e.visible()&&(h(),e.renderer()&&e.renderer()._render()),e},this.visible=function(t){if(void 0===t)return c();if(e.visible()!==t){c(t);var r,i=n.slice();for(r=0;r<i.length;r+=1)i[r].visible(i[r].visible(void 0,!0),!0);t&&e.draw()}return e},this.selectionAPI=function(t){if(void 0===t)return f();if(e.selectionAPI()!==t){f(t);var r,i=n.slice();for(r=0;r<i.length;r+=1)i[r].selectionAPI(i[r].selectionAPI(void 0,!0),!0)}return e},this.clear=function(){for(;n.length;)e.deleteFeature(n[0]);return e},e};r(s,i),a.registerLayer("feature",s),t.exports=s},5938:function(t,e,n){var r=n(5616),i=function(t){if(!(this instanceof i))return new i(t);t=t||{},this._size=t.size||6,this._initialSize=t.initialSize||0,this._track=t.track||600,this._initialTrack=this._track,this._needed=t.needed||null,this._batch=!1;var e=this,n=1;return Object.defineProperty(this,"size",{get:function(){return e._size},set:function(t){e._size=t,e._initialSize>1&&t<e._initialSize&&(e._initialSize=t),e.next_item()}}),Object.defineProperty(this,"initialSize",{get:function(){return e._initialSize},set:function(t){e._initialSize=t,e.next_item()}}),Object.defineProperty(this,"track",{get:function(){return e._track},set:function(t){e._track=t}}),Object.defineProperty(this,"initialTrack",{get:function(){return e._initialTrack},set:function(t){e._initialTrack=t}}),Object.defineProperty(this,"length",{get:function(){return e._queue.length}}),Object.defineProperty(this,"processing",{get:function(){return e._processing}}),this.clear=function(){return e._queue=[],e._processing=0,e},this.add=function(t,n,i){if(t.__fetchQueue){var o=r.inArray(t,e._queue);if(o>=0)return e._addToQueue(t,i,o),t}var a=r.Deferred(),s=r.Deferred();return a.done((function(){r.when(n.call(t)).always(s.resolve)})).fail(s.resolve),t.__fetchQueue=a,e._addToQueue(t,i),r.when(a,s).always((function(){e._processing>0&&(e._processing-=1),e._initialSize=0,e.next_item()})).promise(t),e.next_item(),t},this._addToQueue=function(t,n,r){var i=n?e._queue.length-1:0;if(t.__fetchQueue._batch=e._batch,!n&&e._batch)for(i=0;i<e._queue.length-(void 0===r?0:1)&&e._queue[i].__fetchQueue._batch===e._batch;i+=1);if(void 0===r)n?e._queue.push(t):i?e._queue.splice(i,0,t):e._queue.unshift(t);else if(r!==i){for(var o=r<i?1:-1,a=r;a!==i;a+=o)e._queue[a]=e._queue[a+o];e._queue[i]=t}},this.get=function(t){return r.inArray(t,e._queue)},this.remove=function(t){var n=r.inArray(t,e._queue);return n>=0&&(e._queue.splice(n,1),!0)},this.batch=function(t){return void 0===t?e._batch:(t?(e._batch=n,n+=1):e._batch=!1,e)},this.next_item=function(){if(!e._innextitem){if(e._innextitem=!0,e._queue.length>e._track&&e._needed)for(var t=e._queue.length-1;t>=0;t-=1)if(!e._needed(e._queue[t])){var n=e._queue.splice(t,1)[0];e._processing+=1,n.__fetchQueue.reject(),delete n.__fetchQueue}for(;e._processing<(e._initialSize||e._size)&&e._queue.length;){var r=e._queue.shift();if(r.__fetchQueue)e._processing+=1,!e._needed||e._needed(r)?r.__fetchQueue.resolve():r.__fetchQueue.reject(),delete r.__fetchQueue}e._innextitem=!1}},this.clear(),this};t.exports=i},3084:function(t,e,n){var r=n(4626),i=n(6498),o=n(1338),a=function(t){"use strict";if(!(this instanceof a))return new a(t);if(o.call(this),!((t=t||{}).layer instanceof i))throw new Error("fileReader must be given a feature layer");var e=t.layer;return this.layer=function(){return e},this.canRead=function(t){return!1},this.read=function(t,e,n){var r=new Promise((function(t,n){throw e&&e(!1),new Error("The default file reader always fails")}));return this.addPromise(r),r},this._getString=function(t,e,n){var r=function(t,e){var n=new FileReader;return e&&(n.onprogress=e),n.onloadend=function(){t(n.error||n.result)},n}(e,n);r.readAsText(t)},this};r(a,o),t.exports=a},5173:function(t,e,n){function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function a(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==r(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s=n(4626),u=n(1098).registerFileReader,l=n(3084),c=function(t){"use strict";if(!(this instanceof c))return new c(t);var e=n(5616),r=n(642).convertColor,i=n(2225),s=n(5325),u=this,f=o(o({},t),{},{pointStyle:o({fill:!0,fillColor:"#ff7800",fillOpacity:.8,stroke:!0,strokeColor:"#000",strokeWidth:1,strokeOpacity:1,radius:8},t.pointStyle),lineStyle:o({strokeColor:"#ff7800",strokeWidth:4,strokeOpacity:.5,strokeOffset:0,lineCap:"butt",lineJoin:"miter",uniformLine:!0,closed:!1},t.lineStyle),polygonStyle:o({fill:!0,fillColor:"#b0de5c",fillOpacity:.8,stroke:!0,strokeColor:"#999999",strokeWidth:2,strokeOpacity:1,uniformPolygon:!0},t.polygonStyle)});l.call(this,f),this.canRead=function(t){if(t instanceof File||t instanceof Blob)return!!("application/json"===t.type||t.name&&t.name.match(/\.json$/));if("string"==typeof t){try{JSON.parse(t)}catch(t){return!1}return!0}try{if(Array.isArray(u._featureArray(t)))return!0}catch(t){}return!1},this._readObject=function(t,n,r){var i;function o(t){try{i=JSON.parse(t),n(i)}catch(r){i||e.ajax({type:"GET",url:t,dataType:"text"}).done((function(t){try{i=JSON.parse(t),n(i)}catch(t){i||n(!1)}})).fail((function(){n(!1)}))}}t instanceof File||t instanceof Blob?u._getString(t,o,r):"string"==typeof t?o(t):n(t)},this._featureArray=function(t){var e,n=[];switch(t.type){case"FeatureCollection":e=t.features;break;case"Feature":e=[t];break;case"GeometryCollection":e=t.geometries.map((function(t){return{type:"Feature",geometry:t,properties:{}}}));break;case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":e=[{type:"Feature",geometry:t,properties:{}}];break;default:throw new Error("Invalid json type")}return e.forEach((function(t){Array.prototype.push.apply(n,u._feature(t))})),n=n.filter((function(t){return t.geometry&&t.geometry.coordinates&&t.geometry.coordinates.length}))},this._feature=function(t){if("Feature"!==t.type)throw new Error("Invalid feature object");switch(t.geometry.type){case"Point":case"LineString":case"Polygon":return[t];case"MultiPoint":case"MultiLineString":case"MultiPolygon":return t.geometry.coordinates.map((function(e){return{type:"Feature",geometry:{type:t.geometry.type.replace("Multi",""),coordinates:e},properties:t.properties}}));default:throw new Error("Invalid geometry type")}},this._position=function(t){return{x:t[0],y:t[1],z:t[2]||0}},this._style=function(t,e){var n=t.toLowerCase().match(/color$/);return n&&(e=r(e)),function(i,o,a,s){var u;return void 0!==(u=void 0!==a&&a.properties?a.properties:i.properties)&&u.hasOwnProperty(t)?n?r(u[t]):u[t]:e}},this.read=function(t,e,n){var r=new Promise((function(r,l){function c(t){return"Polygon"===t.geometry.type&&1===t.geometry.coordinates.length&&5===t.geometry.coordinates[0].length&&("ellipse"===(t.properties||{}).annotationType||"circle"===(t.properties||{}).annotationType)}u._readObject(t,(function(t){if(!1===t)return e&&e(t),void l(new Error("Failed to parse GeoJSON"));var n,h,d=[];try{n=u._featureArray(t)}catch(t){return void l(t)}var p=n.filter((function(t){return"Point"===t.geometry.type}));p.length&&(h=u.layer().createFeature("point"))&&(h.data(p).position((function(t){return u._position(t.geometry.coordinates)})).style([{}].concat(Object.keys(f.pointStyle)).reduce((function(t,e){return o(a({},e,p.some((function(t){return t.properties&&void 0!==t.properties[e]}))?u._style(e,f.pointStyle[e]):f.pointStyle[e]),t)}))),d.push(h));var m=n.filter((function(t){return"LineString"===t.geometry.type}));m.length&&(h=u.layer().createFeature("line"))&&(h.data(m).line((function(t){return t.geometry.coordinates})).position(u._position).style([{}].concat(Object.keys(f.lineStyle)).reduce((function(t,e){return o(a({},e,m.some((function(t){return t.properties&&void 0!==t.properties[e]}))?u._style(e,f.lineStyle[e]):f.lineStyle[e]),t)}))),d.push(h));var g=n.filter((function(t){return"Polygon"===t.geometry.type&&!c(t)}));g.length&&(h=u.layer().createFeature("polygon"))&&(h.data(g).polygon((function(t,e){return{outer:t.geometry.coordinates[0],inner:t.geometry.coordinates.slice(1)}})).position(u._position).style([{}].concat(Object.keys(f.polygonStyle)).reduce((function(t,e){return o(a({},e,g.some((function(t){return t.properties&&void 0!==t.properties[e]}))?u._style(e,f.polygonStyle[e]):f.polygonStyle[e]),t)}))),d.push(h));var y=n.filter(c);y.length&&(h=u.layer().createFeature("marker"))&&(y.forEach((function(t){var e=u.layer().map(),n=s.transformCoordinates(e.ingcs(),e.gcs(),t.geometry.coordinates[0]),r=Math.pow(Math.pow(n[0][0]-n[1][0],2)+Math.pow(n[0][1]-n[1][1],2),.5),i=Math.pow(Math.pow(n[0][0]-n[3][0],2)+Math.pow(n[0][1]-n[3][1],2),.5),o=Math.max(r,i)/2/e.unitsPerPixel(0),a=r?i/r:1e20,l=-Math.atan2(n[1][1]-n[0][1],n[1][0]-n[0][0]),c=s.transformCoordinates(e.gcs(),e.ingcs(),{x:(n[0][0]+n[1][0]+n[2][0]+n[3][0])/4,y:(n[0][1]+n[1][1]+n[2][1]+n[3][1])/4});t._props={pos:c,radius:o,aspect:a,rotation:l}})),h.data(y).position((function(t){return t._props.pos})).style([{}].concat(Object.keys(f.polygonStyle)).reduce((function(t,e){return o(a(a(a(a(a(a(a(a({},e,y.some((function(t){return t.properties&&void 0!==t.properties[e]}))?u._style(e,f.polygonStyle[e]):f.polygonStyle[e]),"radius",(function(t){return t._props.radius})),"radiusIncludesStroke",!1),"symbolValue",(function(t){return t._props.aspect})),"rotation",(function(t){return t._props.rotation})),"strokeOffset",0),"rotateWithMap",!0),"scaleWithZoom",i.scaleMode.fill),t)}))),d.push(h)),e&&e(d),r(d)}),n)}));return u.addPromise(r),r}};s(c,l),u("geojsonReader",c),u("jsonReader",c),t.exports=c},3187:function(t,e,n){var r=n(4626),i=n(1275),o=function(t){"use strict";if(!(this instanceof o))return new o(t);t=t||{},i.call(this,t);var e=n(5616),r=n(642),a=n(1098),s=this,u=this.draw,l=this.style,c=null,f=null,h=function(t){return t.children},d=[],p=this._init,m=this._exit;return this.featureType="graph",this._init=function(t){p.call(s,t);var n=e.extend(!0,{},{nodes:{radius:5,fill:!0,fillColor:{r:1,g:0,b:0},strokeColor:{r:0,g:0,b:0}},links:{strokeColor:{r:0,g:0,b:0}},linkType:"path"},void 0===t.style?{}:t.style);return s.style(n),s.nodes(r.identityFunction),s},this._build=function(){s.children().forEach((function(t){t._build()}))},this._update=function(){s.children().forEach((function(t){t._update()}))},this._exit=function(){return s.data([]),d.forEach((function(t){t._exit(),s.removeChild(t)})),d=[],f._exit(),s.removeChild(f),m(),s},this.style=function(t,e){var n=l.call(s,t,e);return n!==s?n:(f.style(t.nodes),d.forEach((function(e){e.style(t.links)})),s)},this.style.get=l.get,this.links=function(t){return void 0===t?h:(h=r.ensureFunction(t),s)},this.nodes=function(t){return void 0===t?c:(c=t,s.modified(),s)},this.nodeFeature=function(){return f},this.linkFeatures=function(){return d},this.draw=function(){var t,e=s.layer(),n=s.data(),r=0;return t=s.style(),f.data(n),f.style(t.nodes),n.forEach((function(n){(n.children||[]).forEach((function(i){var o;r+=1,d.length<r&&(o=a.createFeature(t.linkType,e,e.renderer()).style(t.links),s.addChild(o),d.push(o)),d[r-1].data([n,i])}))})),d.splice(r,d.length-r).forEach((function(t){t._exit(),s.removeChild(t)})),u(),s},f=a.createFeature("point",this.layer(),this.layer().renderer()),s.addChild(f),t.nodes&&this.nodes(t.nodes),this._init(t),this};r(o,i),t.exports=o},2499:function(t,e,n){var r=n(4626),i=n(6124),o=function(t){"use strict";if(!(this instanceof o))return new o(t);var e=n(5616),r=n(642),a=n(5905);t=t||{},i.call(this,t);var s=this,u=this._init;return this._createGrids=function(){return a.createColoredMesh(s,!0)},this.grid=s.mesh,this._init=function(t){u.call(s,t);var n=e.extend({},{opacity:1,value:function(t,e){return r.isNonNullFinite(t)?t:s.position()(t,e).z},position:function(t){return t||{x:0,y:0}},origin:function(t){return t.length>=3?[t[0],t[1],0]:[0,0,0]}},void 0===t.style?{}:t.style);s.style(n),s.grid(e.extend({},{minColor:"black",minOpacity:0,maxColor:"black",maxOpacity:0,colorRange:[{r:.07514311,g:.468049805,b:1},{r:.468487184,g:.588057293,b:1},{r:.656658579,g:.707001303,b:1},{r:.821573924,g:.837809045,b:1},{r:.943467973,g:.943498599,b:.943398095},{r:1,g:.788626485,b:.750707739},{r:1,g:.6289553,b:.568237474},{r:1,g:.472800903,b:.404551679},{r:.916482116,g:.236630659,b:.209939162}]},t.mesh||{},t.grid||{})),(t.mesh||t.grid)&&s.dataTime().modified()},this._init(t),this};r(o,i),t.exports=o},9163:function(t,e,n){var r=n(5616),i=n(4626),o=n(1275),a=n(5325),s=n(642),u=function(t){"use strict";if(!(this instanceof u))return new u(t);t=t||{},o.call(this,t);var e,n,i,l,c,f,h,d=this,p=this._init;return this.featureType="heatmap",e=t.position||s.identityFunction,n=t.intensity||function(t){return 1},i=void 0!==t.maxIntensity?t.maxIntensity:null,l=void 0!==t.minIntensity?t.minIntensity:null,f=void 0!==t.binned?t.binned:"auto",c=t.updateDelay||0===t.updateDelay?parseInt(t.updateDelay,10):-1,this.maxIntensity=function(t){return void 0===t?i:(i=t,d.dataTime().modified(),d.modified(),d)},this.minIntensity=function(t){return void 0===t?l:(l=t,d.dataTime().modified(),d.modified(),d)},this.updateDelay=function(t){return void 0===t?c:(c=parseInt(t,10),d)},this.binned=function(t){return void 0===t?f:("true"===t?t=!0:("false"===t||"auto"!==t&&!0!==t&&!1!==t&&((t=parseInt(t,10))<=0||isNaN(t)))&&(t=!1),f=t,d.dataTime().modified(),d.modified(),d)},this.position=function(t){return void 0===t?e:(e=t,d.dataTime().modified(),d.modified(),d)},this.gcsPosition=function(){return d._update(),h},this.intensity=function(t){return void 0===t?n:(n=t,d.dataTime().modified(),d.modified(),d)},this._init=function(t){p.call(d,t);var n=r.extend({},{radius:10,blurRadius:10,gaussian:!0,color:{0:{r:0,g:0,b:0,a:0},.25:{r:0,g:0,b:1,a:.5},.5:{r:0,g:1,b:1,a:.6},.75:{r:1,g:1,b:0,a:.7},1:{r:1,g:0,b:0,a:.8}},scaleWithZoom:!1},void 0===t.style?{}:t.style);d.style(n),e&&d.dataTime().modified()},this._build=function(){var t=d.data(),e=null,n=[],r=null==i,o=null==l;return t.forEach((function(t,a){n.push(d.position()(t,a)),(r||o)&&(e=d.intensity()(t,a),null==i&&(i=e),null==l&&(l=e),r&&e>i&&(i=e),o&&e<l&&(l=e))})),o&&r&&l===i&&(l-=1),h=a.transformCoordinates(d.gcs(),d.layer().map().gcs(),n),d.buildTime().modified(),d},this._init(t),this};i(u,o),t.exports=u},4912:function(t,e,n){var r=n(4626),i=n(5289),o=function(t){if(!(this instanceof o))return new o(t);var e=n(5616);return t.size=t.size||{x:256,y:256},this._image=null,this._cors=t.crossDomain||null===t.crossDomain?t.crossDomain:"anonymous",i.call(this,t),Object.defineProperty(this,"image",{get:function(){return this._image}}),this.fetch=function(){var t;return this._image||(this._image=new Image(this.right-this.left,this.bottom-this.top),this._cors&&this._url.indexOf(":")>=0&&this._url.indexOf("/")===this._url.indexOf(":")+1&&(this._image.crossOrigin=this._cors),t=e.Deferred(),this._image.onload=t.resolve,this._image.onerror=t.reject,this._image.src=this._url,t.done(function(){this._fetched=!0}.bind(this)).promise(this)),this},this.fadeIn=function(t){var n=this.fetch(),r=e.Deferred();return e(this._image).css("display","none"),n.done(function(){e(this._image).fadeIn(t,(function(){r.resolve()}))}.bind(this)),r.promise(this)},this};r(o,i),t.exports=o},2257:function(t,e,n){
/**
 * GeoJS
 * @copyright 2013-2022, Kitware, Inc.
 * @license Apache-2.0
 * @namespace geo
 */
/*
 * Bundled with the following libraries:
 *
 * Proj4js
 * @copyright 2014, Mike Adair, Richard Greenwood, Didier Richard, Stephen Irons, Olivier Terral and Calvin Metcalf
 * @license MIT
 *
 * gl-matrix
 * @copyright 2015, Brandon Jones, Colin MacKenzie IV
 * @license MIT
 *
 * JQuery
 * @copyright jQuery Foundation and other contributors
 * @license MIT
 *
 * earcut
 * @copyright 2016, Mapbox
 * @license ISC
 *
 * kdbush
 * @copyright 2017, Vladimir Agafonkin
 * @license ISC
 */
var r=n(5616),i=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi;r.htmlPrefilter=function(t){return t.replace(i,"<$1></$2>")},n(7605),t.exports=r.extend({annotationLayer:n(2075),camera:n(3578),choroplethFeature:n(3561),contourFeature:n(6761),domRenderer:n(9726),event:n(6409),feature:n(1275),featureLayer:n(6498),fetchQueue:n(5938),fileReader:n(3084),geo_action:n(8695),graphFeature:n(3187),heatmapFeature:n(9163),imageTile:n(4912),isolineFeature:n(2586),geojsonReader:n(5173),gridFeature:n(2499),layer:n(5156),lineFeature:n(9281),map:n(6211),mapInteractor:n(7908),markerFeature:n(2225),meshFeature:n(6124),object:n(1338),osmLayer:n(4880),pathFeature:n(2266),pointFeature:n(7541),polygonFeature:n(6645),quadFeature:n(3842),pixelmapFeature:n(7761),pixelmapLayer:n(534),renderer:n(2274),sceneObject:n(5402),textFeature:n(6546),tile:n(5289),tileCache:n(9123),tileLayer:n(9264),timestamp:n(77),trackFeature:n(338),transform:n(5325),typedef:n(3170),vectorFeature:n(6858),inherit:n(4626),version:n(4081),sha:n(9079),annotation:n(4655),util:n(642),jQuery:r,canvas:n(8074),svg:n(6488),vtkjs:n(394),webgl:n(8635),gui:n(4812),vgl:n(1611)},n(1098)),window&&!window.$&&(window.$=r),window&&!window.jQuery&&(window.jQuery=r),window&&!window.geojsMap&&(window.geojsMap=function(){var t=r(".geojs-map").map((function(t,e){return r(e).data("data-geojs-map")}));return 0===t.length?void 0:1===t.length?t[0]:t})},4626:function(t){t.exports=function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},2586:function(t,e,n){var r=n(4626),i=n(6124),o=n(1098),a=n(642),s={17:[{l0:1,h0:2,l1:0,h1:2}],18:[{l0:0,h0:1,l1:2,h1:1}],20:[{l0:2,h0:0,l1:1,h1:0}],22:[{l0:2,h0:0,l1:2,h1:1}],21:[{l0:1,h0:2,l1:1,h1:0}],19:[{l0:0,h0:1,l1:0,h1:2}],1:[{l0:2,h0:3,l1:1,h1:3}],2:[{l0:0,h0:2,l1:3,h1:2}],4:[{l0:3,h0:1,l1:0,h1:1}],8:[{l0:1,h0:0,l1:2,h1:0}],14:[{l0:3,h0:1,l1:3,h1:2}],13:[{l0:2,h0:3,l1:2,h1:0}],11:[{l0:1,h0:0,l1:1,h1:3}],7:[{l0:0,h0:2,l1:0,h1:1}],3:[{l0:0,h0:2,l1:1,h1:3}],10:[{l0:1,h0:0,l1:3,h1:2}],12:[{l0:3,h0:1,l1:2,h1:0}],5:[{l0:2,h0:3,l1:0,h1:1}],6:[{l0:0,h0:2,l1:0,h1:1},{l0:3,h0:1,l1:3,h1:2}],9:[{l0:1,h0:0,l1:1,h1:3},{l0:2,h0:3,l1:2,h1:0}]},u=function(t){"use strict";if(!(this instanceof u))return new u(t);var e=n(5616),r=n(5325),l=n(6409),c=n(6546);t=t||{},i.call(this,t);var f,h,d,p,m,g=this,y=this.draw,v=this._exit,x=this._init,_=this.modified,b=this._update;return this.featureType="isoline",this.contour=g.mesh,this.isoline=g.mesh,this._createIsolines=function(){var t,e=g.style.get("value"),n=void 0!==g.style("used")?g.style.get("used"):function(t,n){return a.isNonNullFinite(e(t,n))},r=!1,i=[],o=g._createMesh({used:n,value:e});return(t=g._getValueList(o)).length?(t.forEach((function(t){var e=g._isolinesForValue(o,t);e.length&&(i=i.concat(e),r=r||!!t.label)})),{lines:i,mesh:o,values:t,hasLabels:r}):{}},this._getValueList=function(t){var e,n,r,i,o,s,u,l=g.isoline,c=l.get("values")(t),f=l.get("spacing")(t),h=l.get("count")(t),d=l.get("autofit")(t),p=l.get("levels")(t);if(!t.numVertices||!t.numElements)return[];if(e=a.getMinMaxValues(t.value,l.get("min")(t),l.get("max")(t),!0),t.minValue=e.min,t.maxValue=e.max,(n=t.maxValue-t.minValue)<=0)return[];if(Array.isArray(c))c=(c=c.map((function(t,e){return{value:void 0!==t.value?t.value:t,position:e,level:t.level}}))).filter((function(e){return e.value>=t.minValue&&e.value<=t.maxValue}));else if(f||d)for(f||(r=n/(2*h/3),o=Math.floor(Math.log10(r)),s=Math.max(0,-o),f=(r=(r/=i=Math.pow(10,o))>=5?5:r>=2?2:1)*i),c=[],u=Math.ceil(t.minValue/f);u<=Math.floor(t.maxValue/f);u+=1)c.push({value:u*f,position:u,fixedDigits:s});else for(c=Array(h),u=0;u<h;u+=1)c[u]={value:t.minValue+n*(u+1)/(h+1),position:u+1};return p.length&&c.forEach((function(t,e){if(void 0===t.level){t.level=0;for(var n=0,r=p[0];n<p.length&&!(t.position%r);r*=p[n+=1])t.level=n+1}if(l.get("label")(t,t.position)){var i=l.get("labelText")(t,t.position);void 0===i&&(i=void 0!==t.fixedDigits?""+parseFloat(t.value.toFixed(t.fixedDigits)):""+t.value),i&&(t.label=i)}})),c},this._addSegment=function(t,e,n){var r,i,o,a,s,u,l=[e,n],c=t.length;for(t.push(l),i=0;i<2;i+=1){for(r=c-1;r>=0;r-=1){if(a=(o=t[r])[0],s=o[o.length-1],n[0]===a[0]&&n[1]===a[1])u=l.concat(o.slice(1));else{if(e[0]!==s[0]||e[1]!==s[1])continue;u=o.concat(l.slice(1))}t.splice(c,1),t[r]=l=u,c=r,e=l[0],n=l[l.length-1];break}if(r<0)break}return t},this._chainVertex=function(t,e,n){var r=n[0],i=n[1],o=3*r,a=3*i,s=(e.value-t.value[r])/(t.value[i]-t.value[r]),u=1-s;return{x:t.pos[o]*u+t.pos[a]*s,y:t.pos[o+1]*u+t.pos[a+1]*s,z:t.pos[o+2]*u+t.pos[a+2]*s}},this._isolinesForValue=function(t,e){var n,r,i,o,a=e.value,u=Array(t.value.length),l=[];for(n=u.length-1;n>=0;n-=1)u[n]=t.value[n]<=a?0:1;var c=t.verticesPerElement,f="square"===t.shape,h=t.elements,d=h.length;for(r=0;r<d;r+=c){if(f){if(0===(i=8*u[h[r]]+4*u[h[r+1]]+2*u[h[r+2]]+u[h[r+3]])||15===i)continue}else if(16===(i=16+4*u[h[r]]+2*u[h[r+1]]+u[h[r+2]])||23===i)continue;s[i].forEach((function(t){l=g._addSegment(l,[h[r+t.l0],h[r+t.h0]],[h[r+t.l1],h[r+t.h1]])}))}return o=l.map((function(n){var r=[];return n.forEach((function(n){var i=g._chainVertex(t,e,n);r.length&&i.x===r[r.length-1].x&&i.y===r[r.length-1].y||r.push(i)})),r.closed=r[0].x===r[r.length-1].x&&r[0].y===r[r.length-1].y,r.value=e.value,r.level=e.level,r.position=e.position,r.label=e.label,r})).filter((function(t){return t.length>1})),o},this.modified=function(){var t=_();return d&&d.modified(),m&&m.modified(),t},this.labelPositions=function(){if(g.dataTime().timestamp()>=g.buildTime().timestamp()&&g._build(),h=null,!m)return g;if(!(f&&f.hasLabels&&f.lines&&f.lines.length))return m.data([]),g;var t=g.isoline,e=t.get("labelSpacing"),n=t.get("labelOffset"),i=t.get("labelViewport")(f.mesh),o=g.gcs(),s=g.layer().map(),u=s.gcs(),l=s.rotation(),c=s.size(),d=[],p=0;return f.lines.forEach((function(t,f){if(t.label){var h,m,g,y,v,x,_,b,w,M,A,T=e(t.value,t.value.position),E=n(t.value,t.value.position)||0,C=s.gcsToDisplay(t,o),k=0;if(!(T<=0||isNaN(T))&&(p=Math.max(T,p),E=E+.5-Math.floor(E+.5),h=C.map((function(e,n){if(!t.closed&&n+1===C.length)return 0;var r=Math.sqrt(a.distance2dSquared(e,C[n+1<C.length?n+1:0]));return k+=r,r})),m=Math.floor(k/T)))for(A=r.transformCoordinates(o,u,t),y=(g=k/m)*E,v=0,x=0;x<C.length;x+=1){for(;v+h[x]>=y;)_=x+1===C.length?0:x+1,w=1-(b=(y-v)/h[x]),y+=g,i>0&&((M={x:C[x].x*w+C[_].x*b,y:C[x].y*w+C[_].y*b}).x<-i||M.x>c.width+i||M.y<-i||M.y>c.height+i)||d.push({x:A[x].x*w+A[_].x*b,y:A[x].y*w+A[_].y*b,z:A[x].z*w+A[_].z*b,line:t,rotation:Math.atan2(C[x].y-C[_].y,C[x].x-C[_].x)-l});v+=h[x]}}})),m.gcs(u),m.data(d),m.style("renderThreshold",2*p),h={zoom:s.zoom(),center:s.center(),rotation:l,size:c,labelViewport:i,maxSpacing:p,labelAutoUpdate:t.get("labelAutoUpdate")(f.mesh)},g},this.lastLabelPositions=function(){return e.extend({},h)},this._updateLabelPositions=function(){var t=h;if(!t||!t.labelAutoUpdate)return g;var e=g.layer().map(),n=e.zoom(),r=e.size(),i=!!(Math.abs(n-t.zoom)>=2);if(!i&&t.labelViewport>0){var o=Math.sqrt(a.distance2dSquared(e.gcsToDisplay(e.center()),e.gcsToDisplay(t.center)))*Math.pow(2,t.zoom-n),s=t.labelViewport/2-2*t.maxSpacing-Math.max(r.width-t.size.width,r.height-t.size.height,0);i=i||o>=s}return i&&g.labelPositions().draw(),g},this._build=function(){if((f=g._createIsolines())&&f.lines&&f.lines.length){d||(d=g.layer().createFeature("line",{selectionAPI:!1,gcs:g.gcs(),visible:g.visible(void 0,!0),style:{closed:function(t){return t.closed}}}),g.dependentFeatures([d]));var t=g.style();if(d.data(f.lines).style({antialiasing:t.antialiasing,lineCap:t.lineCap,lineJoin:t.lineJoin,miterLimit:t.miterLimit,strokeWidth:t.strokeWidth,strokeStyle:t.strokeStyle,strokeColor:t.strokeColor,strokeOffset:t.strokeOffset,strokeOpacity:t.strokeOpacity}),f.hasLabels){if(!m){if(!(o.registries.features[g.layer().rendererName()]||{}).text){var e=o.rendererForFeatures(["text"]);p=o.createLayer("feature",g.layer().map(),{renderer:e}),g.layer().addChild(p),g.layer().node().append(p.node())}m=(p||g.layer()).createFeature("text",{selectionAPI:!1,gcs:g.gcs(),visible:g.visible(void 0,!0),style:{text:function(t){return t.line.label}}}).geoOn(l.pan,g._updateLabelPositions)}c.usedStyles.forEach((function(e){"visible"!==e&&m.style(e,t[e])})),g.dependentFeatures([d,m])}}else d&&d.data([]);return g.buildTime().modified(),g.labelPositions(),g},this._update=function(){return b.call(g),(g.dataTime().timestamp()>=g.buildTime().timestamp()||g.updateTime().timestamp()<=g.timestamp())&&g._build(),g.updateTime().modified(),g},this.draw=function(){var t=y();return d&&d.draw(),m&&m.draw(),t},this._exit=function(){m&&((p||g.layer())&&(p||g.layer()).deleteFeature(m),p&&g.layer()&&g.layer().removeChild(p)),d&&g.layer()&&g.layer().deleteFeature(d),m=null,p=null,d=null,g.dependentFeatures([]),v()},this._init=function(t){t=t||{},x.call(g,t);var n=e.extend({},{opacity:1,value:function(t,e){return g.position()(t,e).z},rotateWithMap:!0,rotation:u.rotationFunction(),strokeWidth:function(t,e,n,r){return n.level+.5},strokeColor:{r:0,g:0,b:0},textStrokeColor:{r:1,g:1,b:1,a:.75},textStrokeWidth:2,fontSize:"12px"},void 0===t.style?{}:t.style);g.style(n),g.isoline(e.extend({},{count:15,autofit:!0,levels:[5,5],label:function(t){return t.level>=1},labelSpacing:200,labelViewport:1e4,labelAutoUpdate:!0},t.mesh||{},t.contour||{},t.isoline||{})),(t.mesh||t.contour||t.isoline)&&g.dataTime().modified()},this};u.rotationFunction=function(t,e){var n={higher:function(t){return t.rotation},lower:function(t){return t.rotation+Math.PI},map:function(t){var e=t.rotation,n=a.wrapAngle(e,!0);return(n>Math.PI/2||n<-Math.PI/2)&&(e+=Math.PI),e},screen:function(t){var n=t.rotation,r=a.wrapAngle(n+e.rotation(),!0);return(r>Math.PI/2||r<-Math.PI/2)&&(n+=Math.PI),n}};return n[t]||n.higher},r(u,i),t.exports=u},5156:function(t,e,n){var r=n(4626),i=n(5402),o=n(1275),a=n(1098).checkRenderer,s=n(1098).rendererForFeatures,u=n(1098).rendererForAnnotations,l=function(t){"use strict";if(!(this instanceof l))return new l(t);t=t||{},i.call(this,t);var e,r=n(5616),o=n(77),c=n(2274),f=n(1098).createRenderer,h=n(1098).adjustLayerForRenderer,d=n(6409),p=this,m=this._exit,g=void 0===t.id?l.newLayerId():t.id,y=void 0===t.name?"":t.name,v=void 0===t.map?null:t.map,x=null,_=void 0===t.canvas?null:t.canvas,b=t.renderer instanceof c?t.renderer:null,w=!1,M=void 0!==t.renderer?t.renderer instanceof c?t.renderer.api():t.renderer:t.annotations?u(t.annotations):s(t.features),A=void 0===t.autoshareRenderer||t.autoshareRenderer,T=o(),E=o(),C=void 0===t.sticky||t.sticky,k=void 0===t.active||t.active,S=void 0===t.opacity?1:t.opacity,P=t.attribution||null,O=void 0===t.visible||t.visible,R=void 0===t.selectionAPI||t.selectionAPI;if(M=a(M),!v)throw new Error("Layers must be initialized on a map.");function L(){return(p.parent()||p.map()).children().filter((function(t){return t instanceof l}))}if(this.rendererName=function(){return M},this.autoshareRenderer=function(){return A},this.zIndex=function(t,n){return void 0===t?e:(n||L().reverse().forEach((function(e){e!==p&&e.zIndex()===t&&e.zIndex(t+1)})),t!==e&&(e=t,x.css("z-index",e),p.geoTrigger(d.layerMove,{layer:p})),p)},this.moveUp=function(t){var e,n,r,i,o=null;for(void 0===t&&(t=1),i=1,t<0&&(i=-1,t=-t),e=L().sort((function(t,e){return i*(t.zIndex()-e.zIndex())})),n=0;n<e.length;n+=1)if(null===o)e[n]===p&&(o=n);else{if(!(n-o<=t))break;r=p.zIndex(),p.zIndex(e[n].zIndex(),!0),e[n].zIndex(r,!0)}return p},this.moveDown=function(t){return void 0===t&&(t=1),p.moveUp(-t)},this.moveToTop=function(){return p.moveUp(L().length-1)},this.moveToBottom=function(){return p.moveDown(L().length-1)},this.sticky=function(){return C},this.active=function(t){return void 0===t?k:(k!==t&&(k=t,x.toggleClass("active",k)),p)},this.node=function(){return x},this.id=function(t){return void 0===t?g:(g=null===t?l.newLayerId():t,p.modified(),p)},this.name=function(t){return void 0===t?y:(y=t,x.attr("id",y),p.modified(),p)},this.map=function(){return v},this.renderer=function(){return b},this._renderer=function(t){return void 0===t?b:(b=t,p)},this.canvas=function(){return _},this._canvas=function(t){return void 0===t?_:(_=t,p)},this.dataTime=function(){return T},this.updateTime=function(){return E},this.initialized=function(t){return void 0!==t?(w=t,p):w},this.toLocal=function(t){return t},this.fromLocal=function(t){return t},this.attribution=function(t){return void 0!==t?(P=t,p.map().updateAttribution(),p):P},this.visible=function(t){return void 0===t?O:(O!==t&&(O=t,x.toggleClass("hidden",!O),p.modified()),p)},this.selectionAPI=function(t){return void 0===t?R:(R!==t&&(R=t),p)},this._init=function(e){if(w)return p;v.node().append(x);var n=r.extend({},t);return delete n.map,b?p._canvas(b.canvas()):null===M?(p._renderer(null),p._canvas(x)):_?p._renderer(f(M,p,_,n)):(p._renderer(f(M,p,void 0,n)),p._canvas(b.canvas())),x.toggleClass("active",p.active()),w=!0,e||(p.geoOn(d.resize,(function(t){p._update({event:t})})),p.geoOn(d.pan,(function(t){p._update({event:t})})),p.geoOn(d.rotate,(function(t){p._update({event:t})})),p.geoOn(d.zoom,(function(t){p._update({event:t})}))),p},this._exit=function(){p.geoOff(),b&&b._exit(),x.off(),x.remove(),t={},p._canvas(null),p._renderer(null),m()},this._update=function(t){return p},this.width=function(){return p.map().size().width},this.height=function(){return p.map().size().height},this.opacity=function(t){return void 0!==t?(S=t,x.css("opacity",S),p):S},(x=r(document.createElement("div"))).addClass("geojs-layer"),x.attr("renderer",M),y&&x.attr("id",y),p.opacity(S),p.visible(O),void 0===t.zIndex){var I=-1;L().forEach((function(t){void 0!==t.zIndex()&&(I=Math.max(I,t.zIndex()))})),t.zIndex=I+1}return p.zIndex(t.zIndex),h("all",p),p};l.newLayerId=function(){"use strict";var t=1;return function(){var e=t;return t+=1,e}}(),l.create=function(t,e){"use strict";if((e=e||{}).type=e.type||"feature",e.renderer=void 0===e.renderer?"webgl":e.renderer,e.renderer=a(e.renderer),!e.renderer)return console.warn("Invalid renderer"),null;var n=t.createLayer(e.type,e);return n?(e.features&&e.features.forEach((function(t){t.data=t.data||e.data,t.feature=o.create(n,t)})),n):(console.warn("Unable to create a layer"),null)},r(l,i),t.exports=l},9281:function(t,e,n){var r=n(4626),i=n(1275),o=n(77),a=n(5325),s=n(642),u=function(t){"use strict";if(!(this instanceof u))return new u(t);var e=n(5616);t=t||{},i.call(this,t);var r,l=this,c=this._init,f=o();return this.featureType="line",this._subfeatureStyles={lineCap:!0,lineJoin:!0,strokeColor:!0,strokeOffset:!0,strokeOpacity:!0,strokeWidth:!0},this.line=function(t){return void 0===t?l.style("line"):(l.style("line",t),l.dataTime().modified(),l.modified(),l)},this.position=function(t){return void 0===t?l.style("position"):(l.style("position",t),l.dataTime().modified(),l.modified(),l)},this._updatePointSearchInfo=function(){if(f.timestamp()>=l.dataTime().timestamp()&&f.timestamp()>=l.timestamp())return r;f.modified(),r=[];for(var t=l.data(),e=l.line(),n=l.style.get("strokeWidth"),i=s.isFunction(l.style("strokeWidth"))?void 0:n(),o=l.position(),u=l.style.get("closed"),c=s.isFunction(l.style("closed"))?void 0:u(),h=l.style.get("uniformLine"),d=s.isFunction(l.style("uniformLine"))?void 0:h(),p=l.gcs(),m=l.layer().map().gcs(),g=a.onlyInvertedY(p,m),y=0;y<t.length;y+=1){for(var v=t[y],x=void 0===c?u(v,y):c,_=void 0,b=void 0,w=void 0,M=void 0,A=void 0,T=void 0,E=void 0,C=void 0,k=[],S=void 0===d?h(v,y):d,P=e(v,y),O=0;O<P.length;O+=1){var R=P[O],L=o(R,O,v,y);g?L={x:L.x,y:-L.y}:p!==m&&(L=a.transformCoordinates(p,m,L)),void 0===T&&(T={x:L.x,y:L.y}),void 0===E&&(E={x:L.x,y:L.y}),L.x<T.x&&(T.x=L.x),L.x>E.x&&(E.x=L.x),L.y<T.y&&(T.y=L.y),L.y>E.y&&(E.y=L.y),S&&O||(C=void 0===i?n(R,O,v,y):i);var I=Math.ceil(C/2)+2;(void 0===E.r||I>E.r)&&(E.r=I);var D=I*I;_&&k.push({u:L,v:_,r:w>I?w:I,r2:M>D?M:D,i:O,j:b}),_=L,b=O,w=I,M=D,!A&&x&&(A={p:L,r:I,r2:D,i:O})}x&&A&&(_.x!==A.p.x||_.y!==A.p.y)&&k.push({u:_,v:A.p,r:w>A.r?w:A.r,r2:M>A.r2?M:A.r2,i:b,j:A.i}),k.min=T,k.max=E,r.push(k)}return r},this.pointSearch=function(t,e){var n=l.data(),i=[],o=[],u={};if(!n||!n.length||!l.layer())return{found:o,index:i,extra:u};l._updatePointSearchInfo();var c=l.layer().map();e=null===e?c.gcs():void 0===e?c.ingcs():e;var f,h,d,p,m=c.unitsPerPixel(c.zoom()),g=m*m,y=a.transformCoordinates(e,c.gcs(),t),v=l.style.get("strokeWidth"),x=l.style.get("strokeOpacity"),_=l.line();for(h=0;h<r.length;h+=1)for(p=r[h],f=null,d=0;d<p.length;d+=1)if(s.distance2dToLineSquared(y,p[d].u,p[d].v)<=p[d].r2*g&&(f||(f=_(n[h],h)),(x(f[p[d].i],p[d].i,n[h],h)>0||x(f[p[d].j],p[d].j,n[h],h)>0)&&(v(f[p[d].i],p[d].i,n[h],h)>0||v(f[p[d].j],p[d].j,n[h],h)>0))){o.push(n[h]),i.push(h),u[h]=d;break}return{found:o,index:i,extra:u}},this.polygonSearch=function(t,e,n){var i,o,u=l.data(),c=[],f=[],h={},d=l.layer().map(),p=l.style.get("strokeWidth"),m=l.style.get("strokeOpacity"),g=l.line();if(n=null===n?d.gcs():void 0===n?d.ingcs():n,t.outer||(t={outer:t,inner:[]}),!u||!u.length||t.outer.length<3)return{found:f,index:c,extra:h};(e=e||{}).partial=e.partial||!1,(t={outer:a.transformCoordinates(n,d.gcs(),t.outer),inner:(t.inner||[]).map((function(t){return a.transformCoordinates(n,d.gcs(),t)}))}).outer.forEach((function(t){i||(i={x:t.x,y:t.y},o={x:t.x,y:t.y}),t.x<i.x&&(i.x=t.x),t.x>o.x&&(o.x=t.x),t.y<i.y&&(i.y=t.y),t.y>o.y&&(o.y=t.y)})),l._updatePointSearchInfo();var y,v,x,_,b,w,M=d.unitsPerPixel(d.zoom());for(y=0;y<r.length;y+=1)if(!(!(x=r[y]).max||x.max.x<i.x-x.max.r*M||x.min.x>o.x+x.max.r*M||x.max.y<i.y-x.max.r*M||x.min.y>o.y+x.max.r*M)){var A=void 0,T=void 0,E=void 0;for(v=0;v<x.length;v+=1)if(_=x[v].u,b=x[v].v,w=x[v].r,!(_.x<i.x-w*M&&b.x<i.x-w*M||_.x>o.x+w*M&&b.x>o.x+w*M||_.y<i.y-w*M&&b.y<i.y-w*M||_.y>o.y+w*M&&b.y>o.y+w*M||(E||(E=g(u[y],y)),m(E[x[v].i],x[v].i,u[y],y)<=0&&m(E[x[v].j],x[v].j,u[y],y)<=0||p(E[x[v].i],x[v].i,u[y],y)<=0&&p(E[x[v].j],x[v].j,u[y],y)<=0))){var C=s.distanceToPolygon2d(_,t),k=s.distanceToPolygon2d(b,t);if(C>-w*M&&C<w*M||k>-w*M&&k<w&M||C*k<0){T=!0;break}if(s.crossedLineSegmentPolygon2d(_,b,t)){T=!0;break}for(var S=w*w*M*M,P=0;P<t.outer.length&&!T;P+=1)T=s.distance2dToLineSquared(t.outer[P],_,b)<S;for(var O=0;O<t.inner.length&&!T;O+=1)for(var R=0;R<t.inner[O].length&&!T;R+=1)T=s.distance2dToLineSquared(t.inner[O][R],_,b)<S;if(T)break;C>0&&(A=!0)}(!e.partial&&A&&!T||e.partial&&(A||T))&&(c.push(y),f.push(u[y]),h[y]={partial:T,segment:v<r[y].length?v:0})}return{found:f,index:c,extra:h}},this.rdpSimplifyData=function(t,e,n,r){t=t||l.data(),n=n||l.style.get("position"),r=r||l.style.get("line");var i=l.layer().map(),o=i.gcs(),u=l.gcs(),c=l.style.get("closed");return void 0===e&&(e=.5*i.unitsPerPixel(i.zoom())),t=t.map((function(t,i){var l=r(t,i),f=a.transformCoordinates(u,o,l.map((function(e,r){return n(e,r,t,i)}))),h=s.rdpLineSimplify(f,e,c(t,i),[]);for(var d in(h.length<2||2===h.length&&s.distance2dSquared(h[0],h[1])<e*e)&&(h=[]),h=a.transformCoordinates(o,u,h),t)!t.hasOwnProperty(d)||Array.isArray(t)&&d>=0&&d<t.length||(h[d]=t[d]);return h})),l.style("position",s.identityFunction),l.style("line",s.identityFunction),l.data(t),l},this._init=function(t){t=t||{},c.call(l,t);var n=e.extend({},{strokeWidth:1,strokeColor:{r:1,g:.8431372549,b:0},strokeStyle:"solid",strokeOpacity:1,antialiasing:2,closed:!1,line:s.identityFunction,position:function(t){return Array.isArray(t)?{x:t[0],y:t[1],z:t[2]||0}:t},origin:function(t){return t.length>=3?t.slice(0,3):[0,0,0]}},void 0===t.style?{}:t.style);return void 0!==t.line&&(n.line=t.line),void 0!==t.position&&(n.position=t.position),l.style(n),l.dataTime().modified(),l},this._init(t),this};u.create=function(t,e){"use strict";return(e=e||{}).type="line",i.create(t,e)},u.capabilities={feature:"line",basic:"line.basic",multicolor:"line.multicolor"},r(u,i),t.exports=u},6211:function(t,e,n){var r=n(5616),i=n(4626),o=n(5402),a=function(t){"use strict";if(!(this instanceof a))return new a(t);if(void 0===(t=t||{}).node||null===t.node)return console.warn("map creation requires a node"),this;o.call(this,t);var e,i,s,u,l,c=n(3578),f=n(5325),h=n(642),d=n(1098),p=n(6409),m=n(7908),g=n(4231),y=this,v=this._exit,x=r(t.node),_=t.width||x.width()||512,b=t.height||x.height()||512,w=void 0===t.gcs?"EPSG:3857":t.gcs,M=void 0===t.ingcs?"EPSG:4326":t.ingcs,A={x:0,y:0},T=void 0===t.zoom?4:t.zoom,E=t.rotation?t.rotation:0,C=null,k=null,S={min:0,max:16,origMin:0},P=null,O=null,R=!!t.discreteZoom,L="function"==typeof t.allowRotation?t.allowRotation:void 0===t.allowRotation||!!t.allowRotation,I=t.maxBounds||{},D=t.camera||c(),N=t.animationQueue||[],F=void 0===t.autoResize||t.autoResize,z=t.autoshareRenderer,B=((I.left||0)+(I.right||0))/2,j=((I.bottom||0)+(I.top||0))/2;function V(){var t;void 0!==document.hidden?t="hidden":void 0!==document.msHidden?t="msHidden":void 0!==document.webkitHidden&&(t="webkitHidden"),y.geoTrigger(document[t]?p.hidden:p.unhidden)}function q(t){var e;void 0!==document.hidden?e="visibilitychange":void 0!==document.msHidden?e="msvisibilitychange":void 0!==document.webkitHidden&&(e="webkitvisibilitychange"),document.removeEventListener(e,V),!1!==t&&document.addEventListener(e,V)}function G(t,e){var n=t.zIndex(),r=e.zIndex();if(n!==r)return n-r;var i=t.node()[0],o=e.node()[0],a=i&&i.parentNode,s=o&&o.parentNode;if(a&&s&&a===s){var u=Array.from(a.children),l=u.indexOf(i),c=u.indexOf(o);if(l>=0&&c>=0)return l-c}return a?-1:s?1:0}function U(t,e,n,r,i){t.globalAlpha=e,i&&(t.globalCompositeOperation=i);var o=n.css("transform");o&&"matrix("===o.substr(0,7)?t.setTransform.apply(t,o.substr(7,o.length-8).split(",").map(parseFloat)):t.setTransform(1,0,0,1,0,0),t.drawImage(r,0,0),t.globalCompositeOperation="source-over"}function H(){for(var t=N.splice(0,N.length),e=1;e<t.length;e+=1)try{t[e].apply(y,arguments)}catch(t){console.error(t)}}function W(t,e,n){var r=e.width/2,i=e.height/2,o=Math.sin(n),a=Math.cos(n),s={},u={},l={},c={};return s.x=t.x+-r*a- -i*o,s.y=t.y+-r*o+-i*a,u.x=t.x+r*a- -i*o,u.y=t.y+r*o+-i*a,l.x=t.x+-r*a-i*o,l.y=t.y+-r*o+i*a,c.x=t.x+r*a-i*o,c.y=t.y+r*o+i*a,{left:Math.min(s.x,u.x,l.x,c.x),right:Math.max(s.x,u.x,l.x,c.x),bottom:Math.min(s.y,u.y,l.y,c.y),top:Math.max(s.y,u.y,l.y,c.y)}}function X(t,n){void 0===n&&(n=E),t=function(t,e){return e&&(t=W({x:(t.left+t.right)/2,y:(t.top+t.bottom)/2},{width:Math.abs(t.left-t.right),height:Math.abs(t.top-t.bottom)},e)),t}(t,n);var r=function(t){var e,n,r=t.right-t.left,i=t.top-t.bottom,o=Math.abs(r/i),a=_/b;return o>a?(e=1,n=o/a):(n=1,e=a/o),{x:e,y:n}}(t);return r.y>r.x?-Math.log2(Math.abs(t.right-t.left)*r.x/(_*e)):-Math.log2(Math.abs(t.top-t.bottom)*r.y/(b*e))}function K(){S.min=u?Math.max(S.origMin,X(I)):S.origMin}function Q(t,e,n){if(!L)return 0;if(e||"function"!=typeof L||(t=L(t)),!n){var r=2*Math.PI;t=t%r+(t>=0?0:r),Math.min(Math.abs(t),Math.abs(t-r))<1e-5&&(t=0)}return t}function Y(t,e,n,o){if(!i&&!s)return t;var a,u,l=I;if(e){l=r.extend({},I);var c,f,h=Math.abs(t.right-t.left),d=Math.abs(t.top-t.bottom),p=Math.abs(Math.sin(e)),m=Math.abs(Math.cos(e));if(t.width&&t.height)c=t.width,f=t.height;else if(Math.abs(p-m)<5e-4)if(_&&b){var g=Math.abs(_/b),y=Math.pow(1+Math.pow(g,2),.5);f=(c=Math.max(h,d)/y)*g}else c=h*m,f=d*p;else c=(m*h-p*d)/(m*m-p*p),f=(m*d-p*h)/(m*m-p*p);var v=h-Math.max(m*c,p*f),x=d-Math.max(m*f,p*c);l.left-=v,l.right+=v,l.top+=x,l.bottom-=x}return o&&(l={left:l.left-(t.right-t.left)/2,right:l.right+(t.right-t.left)/2,top:l.top-(t.bottom-t.top)/2,bottom:l.bottom+(t.bottom-t.top)/2}),i&&(t.right-t.left>l.right-l.left?a=l.left-(t.right-t.left-(l.right-l.left))/2-t.left:t.left<l.left?a=l.left-t.left:t.right>l.right&&(a=l.right-t.right),a&&(!n||n.x*a>0)&&(n&&Math.abs(a)>Math.abs(n.x*n.unit)&&(a=Math.abs(n.x*n.unit)*a/Math.abs(a)),t={left:t.left+=a,right:t.right+=a,top:t.top,bottom:t.bottom})),s&&(t.top-t.bottom>l.top-l.bottom?u=l.bottom-(t.top-t.bottom-(l.top-l.bottom))/2-t.bottom:t.top>l.top?u=l.top-t.top:t.bottom<l.bottom&&(u=l.bottom-t.bottom),u&&(!n||-n.y*u>0)&&(n&&Math.abs(u)>Math.abs(n.y*n.unit)&&(u=Math.abs(n.y*n.unit)*u/Math.abs(u)),t={top:t.top+=u,bottom:t.bottom+=u,left:t.left,right:t.right})),t}function $(t,e){if(D.rotation=e||0,t.width&&t.height&&e){var n=(t.left+t.right)/2,r=(t.top+t.bottom)/2;D.viewFromCenterSizeRotation({x:n,y:r},t,e)}else D.bounds=t;A={x:(D.bounds.left+D.bounds.right)/2,y:(D.bounds.top+D.bounds.bottom)/2}}function Z(){y.size({width:x.width(),height:x.height()})}return I.left=f.transformCoordinates(I.gcs||M,w,{x:void 0!==I.left?I.left:-180,y:j}).x,I.right=f.transformCoordinates(I.gcs||M,w,{x:void 0!==I.right?I.right:180,y:j}).x,I.top=void 0!==I.top?f.transformCoordinates(I.gcs||M,w,{x:B,y:I.top}).y:I.right,I.bottom=void 0!==I.bottom?f.transformCoordinates(I.gcs||M,w,{x:B,y:I.bottom}).y:I.left,e=t.unitsPerPixel||(I.right-I.left)/256,D.viewport={width:_,height:b,left:x.offset().left,top:x.offset().top},t.center=h.normalizeCoordinates(t.center),i=void 0!==t.clampBoundsX&&t.clampBoundsX,s=void 0===t.clampBoundsY||t.clampBoundsY,u=void 0===t.clampZoom||t.clampZoom,this.unitsPerPixel=function(t,n){return t=t||0,n?(e=Math.pow(2,t)*n,y.draw(),y):Math.pow(2,-t)*e},this.animationQueue=function(t){if(void 0===t)return N;if(t!==N){if(N.length){t.length&&t[0]!==N[0]&&window.cancelAnimationFrame(N[0]);for(var e=t.length?1:0;e<N.length;e+=1)t.push(N[e])}N=t}return y},this.autoResize=function(t){return void 0===t?F:(t!==F&&(r(window).off("resize",Z),(F=t)&&r(window).on("resize",Z)),y)},this.clampBoundsX=function(t){return void 0===t?i:(t!==i&&(i=!!t,y.pan({x:0,y:0})),y)},this.clampBoundsY=function(t){return void 0===t?s:(t!==s&&(s=!!t,y.pan({x:0,y:0})),y)},this.clampZoom=function(t){return void 0===t?u:(t!==u&&(u=!!t,K(),y.zoom(T)),y)},this.allowRotation=function(t){return void 0===t?L:("function"!=typeof t&&(t=!!t),t!==L&&(L=t,y.rotation(E)),y)},this.origin=function(){return r.extend({},l)},this.camera=function(){return D},this.gcs=function(t){if(void 0===t)return w;if(t!==w){var e=y.center(void 0,void 0);w=t,K();var n=y._fix_zoom(T);n!==T&&y.zoom(n),y.center(e,void 0)}return y},this.ingcs=function(t){return void 0===t?M:(M=t,y)},this.node=function(){return x},this.zoom=function(t,e,n,r){if(void 0===t)return T;var i,o,a=e&&(e.mapgcs||e.geo)&&e.map;if(a&&(r=!0),(t=y._fix_zoom(t,n))===T)return y;if(T=t,o=y.boundsFromZoomAndCenter(t,A,E,null,n,r),y.modified(),$(o,E),i={zoomLevel:T,screenPosition:e?e.map:void 0},y.geoTrigger(p.zoom,i),a){var s=y.gcsToDisplay(e.mapgcs||e.geo,e.mapgcs?null:void 0);y.pan({x:e.map.x-s.x,y:e.map.y-s.y},n,!0)}else y.pan({x:0,y:0},n,r);return y},this.pan=function(t,e,n){var r={screenDelta:t};if(t.x||t.y){var i=y.unitsPerPixel(T),o=Math.sin(E),a=Math.cos(E);D.pan({x:(t.x*a- -t.y*o)*i,y:(t.x*o+-t.y*a)*i})}var s=D.bounds;if((s=Y(s,E,"limited"===n?{x:t.x,y:t.y,unit:i}:void 0,!0===n))!==D.bounds){var u=y.gcsToDisplay({x:D.bounds.left,y:D.bounds.top},null);$(s=y.boundsFromZoomAndCenter(T,{x:(s.left+s.right)/2,y:(s.top+s.bottom)/2},E,null,e,!0),E);var l=y.gcsToDisplay({x:D.bounds.left,y:D.bounds.top},null);r.screenDelta.x+=l.x-u.x,r.screenDelta.y+=l.y-u.y}return A=D.displayToWorld({x:_/2,y:b/2}),y.geoTrigger(p.pan,r),y.modified(),y},this.rotation=function(t,e,n){if(void 0===t)return E;var r=e&&e.geo&&e.map;if((t=Q(t,n))===E)return y;E=t;var i=y.boundsFromZoomAndCenter(T,A,E,null,n,!0);y.modified(),$(i,E);var o={rotation:E,screenPosition:e?e.map:void 0};if(y.geoTrigger(p.rotate,o),r){var a=y.gcsToDisplay(e.geo);y.pan({x:e.map.x-a.x,y:e.map.y-a.y},void 0,!0)}else y.pan({x:0,y:0},void 0,!0);return K(),y.zoom(T,void 0,n),y},this.center=function(t,e,n,i){var o;return void 0===t?o=r.extend({},y.worldToGcs(A,e)):(o=y.gcsToWorld(t,e),$(y.boundsFromZoomAndCenter(T,o,E,null,n,i),E),y.modified(),y.geoTrigger(p.pan,{screenDelta:{x:0,y:0}}),y)},this.createLayer=function(t,e){e=e||{},void 0!==y.autoshareRenderer()&&(e=Object.assign({autoshareRenderer:y.autoshareRenderer()},e));var n=d.createLayer(t,y,e);return n&&(y.addChild(n),y.children().forEach((function(t){t instanceof g&&t.moveToTop()})),n._update(),y.modified(),y.geoTrigger(p.layerAdd,{target:y,layer:n})),n},this.deleteLayer=function(t){return null!=t&&(t._exit(),y.removeChild(t),y.modified(),y.geoTrigger(p.layerRemove,{target:y,layer:t})),t},this.size=function(t){if(void 0===t)return{width:_,height:b};var e=y.center();_=t.width||_,b=t.height||b,K();var n=y._fix_zoom(T);return n!==T&&y.zoom(n),y.camera().viewport={width:_,height:b,left:x.offset().left,top:x.offset().top},y.center(e),y.geoTrigger(p.resize,{target:y,width:_,height:b}),y.modified(),y},this.rotatedSize=function(){if(!this.rotation())return{width:_,height:b};var t=W({x:0,y:0},{width:_,height:b},y.rotation());return{width:Math.abs(t.right-t.left),height:Math.abs(t.top-t.bottom)}},this.gcsToWorld=function(t,e){return Array.isArray(t)?t.map((function(t){return y.gcsToWorld(t,e)})):((e=null===e?w:void 0===e?M:e)!==w&&(t=f.transformCoordinates(e,w,t)),l.x||l.y||l.z?t=f.affineForward({origin:l},[t])[0]:"z"in t||(t={x:t.x,y:t.y,z:0}),t)},this.worldToGcs=function(t,e){return Array.isArray(t)?t.map((function(t){return y.worldToGcs(t,e)})):(l.x||l.y||l.z?t=f.affineInverse({origin:l},[t])[0]:"z"in t||(t={x:t.x,y:t.y,z:0}),(e=null===e?w:void 0===e?M:e)!==w&&(t=f.transformCoordinates(w,e,t)),t)},this.gcsToDisplay=function(t,e){return t=y.gcsToWorld(t,e),y.worldToDisplay(t)},this.worldToDisplay=function(t){return Array.isArray(t)?t.map((function(t){return D.worldToDisplay(t)})):D.worldToDisplay(t)},this.displayToGcs=function(t,e){return t=y.displayToWorld(t),y.worldToGcs(t,e)},this.displayToWorld=function(t){return Array.isArray(t)?t.map((function(t){return D.displayToWorld(t)})):D.displayToWorld(t)},this.draw=function(){var t,e=y.children();for(y.geoTrigger(p.draw,{target:y}),y._update(),t=0;t<e.length;t+=1)e[t].draw();return y.geoTrigger(p.drawEnd,{target:y}),y},this.fileReader=function(t,e){return void 0===t?C:("string"==typeof t?((e=e||{}).layer||(e.layer=y.createLayer("feature",r.extend({},e))),e.renderer=e.layer.renderer().api(),C=d.createFileReader(t,e)):C=t,y)},this._init=function(t){if(null==x)throw new Error("Map require DIV node");return x.data("data-geojs-map")&&r.isFunction(x.data("data-geojs-map").exit)&&x.data("data-geojs-map").exit(),x.addClass("geojs-map"),x.data("data-geojs-map",y),q(),y},this._update=function(t){var e,n=y.children();for(e=0;e<n.length;e+=1)n[e]._update(t);return y},this.exit=function(){q(!1);var t,e=y.children();for(t=e.length-1;t>=0;t-=1)e[t]._exit(),y.removeChild(e[t]);y.interactor()&&(y.interactor().destroy(),y.interactor(null)),N=[],y.node().data("data-geojs-map",null),y.node().off(".geo"),y.node().empty(),r(window).off("resize",Z),v()},this.interactor=function(t){return void 0===t?k:(k&&k!==t&&k.destroy(),(k=t)&&(x.attr("tabindex")||x.attr("tabindex",0),k.map(y)),y)},this.zoomRange=function(t,e){return void 0===t?r.extend({},S):(void 0!==t.max&&(S.max=t.max),void 0!==t.min&&(S.min=S.origMin=t.min),K(),e||y.zoom(T),y)},this.transition=function(t,e,n){if(void 0===t)return P;if(P){var i=r.extend(!0,{},P.end);return i.center&&w!==M&&(i.center=f.transformCoordinates(w,M,i.center)),O=r.extend({},i||{},O||{},t),y}var o=y.unitsPerPixel(0);function a(t){return Math.pow(2,-(t+1))*o*b}var s={center:void 0,zoom:y.zoom(),rotation:y.rotation(),duration:1e3,ease:function(t){return t},interp:function(t,e){return function(n){var i=[];return r.each(t,(function(r){i.push(function(t,e,n){return t+(e-t)*n}(t[r],e[r],n))})),i}},done:null,zCoord:!0};function u(e){var n=P.done,r=O;if(!0===P.cancel)return y.geoTrigger(p.transitioncancel,t),n&&n({cancel:!0,source:P.cancelSource,transition:P}),P=null,void(O&&(r=O,O=null,y.transition(r,void 0,e)));if(P.start.time||(P.start.time=e,P.end.time=e+t.duration),P.time=e-P.start.time,e>=P.end.time||r){if(!r){if(P.end.center){var i=T!==y._fix_zoom(P.end.zoom)||!1===t.endClamp;y.center(P.end.center,null,i,i)}y.zoom(P.end.zoom,P.zoomOrigin,!1===t.endClamp,!1===t.endClamp),y.rotation(Q(P.end.rotation))}return y.geoTrigger(p.transitionend,t),n&&n({next:!!r}),P=null,void(O&&(r=O,O=null,y.transition(r,void 0,e)))}var a=P.ease((e-P.start.time)/t.duration),s=P.interp(a);P.zCoord&&(s[2]=function(t){return-Math.log2(t/o/b)-1}(s[2])),y._fix_zoom(s[2],!0)===T?y.center({x:s[0],y:s[1]},null,!0,!0):(A=y.gcsToWorld({x:s[0],y:s[1]},null),y.zoom(s[2],P.zoomOrigin,!0,!0)),y.rotation(s[3],void 0,!0),y.scheduleAnimationFrame(u)}return t.center&&(e=null===e?w:void 0===e?M:e,(t=r.extend(!0,{},t)).center=h.normalizeCoordinates(t.center),e!==w&&(t.center=f.transformCoordinates(e,w,t.center))),t=r.extend(!0,{},s,t),(P={start:{center:y.center(void 0,null),zoom:y.zoom(),rotation:y.rotation()},end:{center:t.center,zoom:y._fix_zoom(t.zoom),rotation:Q(t.rotation,void 0,!0)},ease:t.ease,zCoord:t.zCoord,done:t.done,duration:t.duration,zoomOrigin:t.zoomOrigin,endClamp:t.endClamp}).interp=t.interp([P.start.center.x,P.start.center.y,t.zCoord?a(P.start.zoom):P.start.zoom,P.start.rotation],[P.end.center?P.end.center.x:P.start.center.x,P.end.center?P.end.center.y:P.start.center.y,t.zCoord?a(P.end.zoom):P.end.zoom,P.end.rotation]),y.geoTrigger(p.transitionstart,t),p.cancelNavigation?(P=null,y.geoTrigger(p.transitionend,t),y):(p.cancelAnimation?(t.duration=0,u(0)):n?u(n):y.scheduleAnimationFrame(u),y)},this.transitionCancel=function(t){return!(!P||!0===P.cancel&&!O)&&(P.cancel=!0,P.cancelSource=t||P.cancelSource||"",O=null,!0)},this.bounds=function(t,e){var n;if(e=null===e?w:void 0===e?M:e,void 0!==t){if(e!==w){var r=f.transformCoordinates(e,w,[{x:t.left,y:t.top},{x:t.right,y:t.bottom}]);t={left:r[0].x,top:r[0].y,right:r[1].x,bottom:r[1].y}}t=Y(t,E),n=y.zoomAndCenterFromBounds(t,E,null),y.zoom(n.zoom),y.center(n.center,null)}return y.boundsFromZoomAndCenter(T,A,E,e,!0)},this.maxBounds=function(t,e){if(e=null===e?w:void 0===e?M:e,void 0===t)return{left:f.transformCoordinates(w,e,{x:I.left,y:0}).x,right:f.transformCoordinates(w,e,{x:I.right,y:0}).x,bottom:f.transformCoordinates(w,e,{x:0,y:I.bottom}).y,top:f.transformCoordinates(w,e,{x:0,y:I.top}).y};var n=((t.left||0)+(t.right||0))/2,r=((t.bottom||0)+(t.top||0))/2;return void 0!==t.left&&(I.left=f.transformCoordinates(e,w,{x:t.left,y:r}).x),void 0!==t.right&&(I.right=f.transformCoordinates(e,w,{x:t.right,y:r}).x),void 0!==t.bottom&&(I.bottom=f.transformCoordinates(e,w,{x:n,y:t.bottom}).y),void 0!==t.top&&(I.top=f.transformCoordinates(e,w,{x:n,y:t.top}).y),K(),y.zoom(T),y.pan({x:0,y:0}),y},this.zoomAndCenterFromBounds=function(t,e,n){var r,i;if((n=null===n?w:void 0===n?M:n)!==w){var o=f.transformCoordinates(n,w,[{x:t.left,y:t.top},{x:t.right,y:t.bottom}]);t={left:o[0].x,top:o[0].y,right:o[1].x,bottom:o[1].y}}if(t.left>=t.right||t.bottom>=t.top)throw new Error("Invalid bounds provided");return i=y._fix_zoom(X(t,e)),r={x:((t=Y(t,e)).left+t.right)/2-l.x,y:(t.top+t.bottom)/2-l.y},n!==w&&(r=f.transformCoordinates(w,n,r)),{zoom:i,center:r}},this.boundsFromZoomAndCenter=function(t,e,n,r,i,o){var a,s,u,c,h,d;if(r=null===r?w:void 0===r?M:r,t=y._fix_zoom(t,i),d=y.unitsPerPixel(t),e=y.gcsToWorld(e,null),u=(a=_*d)/2,c=(s=b*d)/2,n?(e.x+=l.x,e.y+=l.y,(h=W(e,{width:a,height:s},n)).width=a,h.height=s,h=Y(h,n,void 0,o)):h=Y(h={left:e.x-u+l.x,right:e.x+u+l.x,bottom:e.y-c+l.y,top:e.y+c+l.y},0,void 0,o),r!==w){var p=f.transformCoordinates(w,r,[[h.left,h.top],[h.right,h.bottom]]);h={left:p[0][0],top:p[0][1],right:p[1][0],bottom:p[1][1]}}return h.width=a,h.height=s,h},this.discreteZoom=function(t){return void 0===t?R:(R!==(t=!!t)&&((R=t)&&y.zoom(Math.round(y.zoom())),y.interactor()&&y.interactor().options({discreteZoom:R})),y)},this.layers=this.children,this.sortedLayers=function(){return y.children().sort(G)},this.listSceneObjects=function(t){var e=[];return(t=t||y.sortedLayers()).forEach((function(t){if(e.indexOf(t)<0&&(e.push(t),t.children)){var n=t.children();n.length&&(e=e.concat(y.listSceneObjects(n)))}})),e},this.updateAttribution=function(){y.node().find(".geo-attribution").remove();var t=r("<div/>").addClass("geo-attribution").on("mousedown",(function(t){t.stopPropagation()}));return y.children().forEach((function(e){var n=e.attribution();n&&r("<span/>").addClass("geo-attribution-layer").html(n).appendTo(t)})),r("span",t).length&&t.appendTo(y.node()),y},this.screenshot=function(t,e,n,i){var o;if(!t||Array.isArray(t)||t.renderer||(e=e||t.type,n=n||t.encoderOptions,i=i||t,t=t.layers),(i=i||{}).wait){var a=r.extend({},i,{wait:!1});o=r.Deferred();var s=function(){window.requestAnimationFrame((function(){o.resolve()}))};return"idle"===i.wait?y.onIdle(s):s(),o.then((function(){return y.screenshot(t,e,n,a)}))}o=r.when(),t?Array.isArray(t)||(t=[t]):(t=y.layers(),null!==i.attribution&&void 0!==i.attribution||(i.attribution=!0)),t=(t=t.filter((function(t){return y.layers().indexOf(t)>=0&&t.opacity()>0&&(!t.visible||t.visible())}))).sort(G);var u=document.createElement("canvas");u.width=_,u.height=b;var l=u.getContext("2d");if(!1!==i.background&&null!==i.background){var c=i.background;void 0===i.background&&(l.fillStyle="white",l.fillRect(0,0,u.width,u.height),y.node().parents().get().reverse().forEach((function(t){(c=window.getComputedStyle(t).backgroundColor)&&"transparent"!==c&&(l.fillStyle=c,l.fillRect(0,0,u.width,u.height))})),c=window.getComputedStyle(y.node()[0]).backgroundColor),c&&"transparent"!==c&&(l.fillStyle=c,l.fillRect(0,0,u.width,u.height))}return t.forEach((function(t){var e=t.opacity();t.node().children("canvas").each((function(){var n=r(this);o=o.then((function(){t.renderer()&&"webgl"===t.renderer().api()&&t.renderer()._renderFrame(),U(l,e,n,n[0],t.node().css("mix-blend-mode"))}))})),!t.node().children().not("canvas").length&&t.node().children().length||t.renderer()&&"webgl"===t.renderer().api()||(o=o.then((function(){return h.htmlToImage(t.node(),1).done((function(e){U(l,1,r([]),e,t.node().css("mix-blend-mode"))}))})))})),i.attribution&&y.node().find(".geo-attribution").each((function(){var t=r(this);o=o.then((function(){return h.htmlToImage(t,1).done((function(t){U(l,1,r([]),t)}))}))})),i.html&&r(i.html).each((function(){var t=r(this);o=o.then((function(){return h.htmlToImage(t,1).done((function(e){U(l,1,r([]),e,t.css("mix-blend-mode"))}))}))})),o=o.then((function(){var t=u;if("canvas"!==e)try{u=u.toDataURL(e,n)}catch(t){console.warn("Failed to convert screenshot to output",t);var i=r.Deferred();return i.reject(),i}return y.geoTrigger(p.screenshot.ready,{canvas:t,screenshot:u}),u}))},this.scheduleAnimationFrame=function(t,e){N.length||N.push(window.requestAnimationFrame(H));var n=N.indexOf(t,1);if(n>=0){if(!e)return;if(N.splice(n,1),"remove"===e)return}return N.push(t),N[0]},this._fix_zoom=function(t,e){return t=Math.round(1e6*t)/1e6,t=Math.max(Math.min(S.max,t),S.min),R&&!e&&(t=Math.round(t))<S.min&&(t=Math.ceil(S.min)),t},this.autoshareRenderer=function(t){return void 0===t?z:(z=null===t?void 0:t,y)},this._version=n(4081),this._geo=n(2257),this._init(t),this.node().on("dragover.geo",(function(t){var e=t.originalEvent;y.fileReader()&&(e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy")})).on("drop.geo",(function(t){var e,n,r=t.originalEvent,i=y.fileReader();function o(){y.draw()}if(i)for(r.stopPropagation(),r.preventDefault(),e=0;e<r.dataTransfer.files.length;e+=1)n=r.dataTransfer.files[e],i.canRead(n)&&i.read(n,o)})),l={x:0,y:0},this.zoomRange(t,!0),T=this._fix_zoom(T),E=Q(E),this.center(r.extend({},t.center||A),void 0),null!==t.interactor&&this.interactor(t.interactor||m({discreteZoom:R})),F&&r(window).on("resize",Z),y.geoOn([p.layerAdd,p.layerRemove],y.updateAttribution),this};a.create=function(t){"use strict";var e=a(t),r=n(5156);return e&&e.zoom?(t.data=t.data||[],t.layers=t.layers||[],t.layers.forEach((function(n){n.data=n.data||t.data,n.layer=r.create(e,n)})),e):(console.warn("Could not create map."),null)},i(a,o),t.exports=a},7908:function(t,e,n){var r=n(4626),i=n(1338),o=n(642),a=n(7549),s=function(t){"use strict";if(!(this instanceof s))return new s(t);i.call(this);var e,r,u,l,c,f,h,d,p,m,g=n(5616),y=n(6409),v=n(8695),x=n(642).throttle,_=n(642).debounce,b=n(642).actionMatch,w=n(3842),M=this,A=0,T=null,E=!1,C=!1,k=function(){};function S(t){var e=t.x,n=t.y;return Math.sqrt(e*e+n*n)}function P(){f={boundDocumentHandlers:f.boundDocumentHandlers}}function O(t,n){n=n<=0?30:n;var r=function(){var t,n,r,i;if(!e.spring.enabled)return{x:0,y:0};var o=M.map().maxBounds(void 0,null),a=M.map().gcsToDisplay({x:o.left,y:o.top},null),s=M.map().gcsToDisplay({x:o.right,y:o.bottom},null),u=e.spring.springConstant,l=M.map().node().width(),c=M.map().node().height();return t=u*Math.max(0,a.x),n=u*Math.max(0,l-s.x),r=u*Math.max(0,a.y)/2,i=u*Math.max(0,c-s.y)/2,{x:t-n,y:r-i}}(),i=S(t),o=t.x/i,a=t.y/i;return i*=Math.exp(-e.momentum.drag*n),S(r)*n+i<e.momentum.minSpeed?null:(i>0?(o*=i,a*=i):(o=0,a=0),{x:o-r.x*n,y:a-r.y*n})}return e=g.extend(!0,{},{throttle:30,discreteZoom:!1,actions:[{action:v.pan,input:"left",modifiers:{shift:!1,ctrl:!1},owner:"geo.mapInteractor",name:"button pan"},{action:v.zoom,input:"right",modifiers:{shift:!1,ctrl:!1},owner:"geo.mapInteractor",name:"button zoom"},{action:v.zoom,input:"wheel",modifiers:{shift:!1,ctrl:!1},owner:"geo.mapInteractor",name:"wheel zoom"},{action:v.rotate,input:"left",modifiers:{shift:!1,ctrl:!0},owner:"geo.mapInteractor",name:"button rotate"},{action:v.rotate,input:"wheel",modifiers:{shift:!1,ctrl:!0},owner:"geo.mapInteractor",name:"wheel rotate"},{action:v.select,input:"left",modifiers:{shift:!0,ctrl:!0},selectionRectangle:y.select,owner:"geo.mapInteractor",name:"drag select"},{action:v.zoomselect,input:"left",modifiers:{shift:!0,ctrl:!1},selectionRectangle:y.zoomselect,owner:"geo.mapInteractor",name:"drag zoom"},{action:v.unzoomselect,input:"right",modifiers:{shift:!0,ctrl:!1},selectionRectangle:y.unzoomselect,owner:"geo.mapInteractor",name:"drag unzoom"},{action:v.pan,input:"pan",owner:"geo.mapInteractor",name:"touch pan"},{action:v.zoomrotate,input:"rotate",owner:"geo.mapInteractor",name:"touch zoom and rotate"},{action:v.pan,input:"middle",modifiers:{shift:!1,ctrl:!1},owner:"geo.mapInteractor",name:"button pan"}],click:{enabled:!0,buttons:{left:!0,right:!0,middle:!0},duration:0,cancelOnMove:!0},keyboard:{actions:{"zoom.in":["plus","shift+plus","shift+ctrl+plus","=","shift+=","shift+ctrl+="],"zoom.out":["-","shift+-","shift+ctrl+-","_","shift+_","shift+ctrl+_"],"zoom.0":["1"],"zoom.3":["2"],"zoom.6":["3"],"zoom.9":["4"],"zoom.12":["5"],"zoom.15":["6"],"zoom.18":["7"],"pan.left":["left","shift+left","shift+ctrl+left"],"pan.right":["right","shift+right","shift+ctrl+right"],"pan.up":["up","shift+up","shift+ctrl+up"],"pan.down":["down","shift+down","shift+ctrl+down"],"rotate.ccw":["<","shift+<","shift+ctrl+<",".","shift+.","shift+ctrl+."],"rotate.cw":[">","shift+>","shift+ctrl+>",",","shift+,","shift+ctrl+,"],"rotate.0":["0"]},meta:{0:{shift:!1,ctrl:!1},1:{shift:!0,ctrl:!0},2:{shift:!0,ctrl:!1}},metakeyMouseEvents:["shift","ctrl","shift+ctrl","shift+alt","shift+meta"],focusHighlight:!0},alwaysTouch:!1,wheelScaleX:1,wheelScaleY:1,zoomScale:1,rotateWheelScale:6*Math.PI/180,zoomrotateMinimumRotation:5*Math.PI/180,zoomrotateReverseRotation:4*Math.PI/180,zoomrotateMinimumZoom:.05,zoomrotateMinimumPan:5,touchPanDelay:50,momentum:{enabled:!0,maxSpeed:2.5,minSpeed:.01,stopTime:250,drag:.01,actions:[v.pan,v.zoom]},spring:{enabled:!1,springConstant:5e-5},zoomAnimation:{enabled:!0,duration:500,ease:function(t){return(2-t)*t}}},t||{}),t&&t.actions&&(e.actions=g.extend(!0,[],t.actions)),t&&t.momentum&&t.momentum.actions&&(e.momentum.actions=g.extend(!0,[],t.momentum.actions)),t&&t.keyboard&&void 0!==t.keyboard.actions&&(e.keyboard.actions=g.extend(!0,{},t.keyboard.actions)),r={page:{x:0,y:0},map:{x:0,y:0},geo:{x:0,y:0},mapgcs:{x:0,y:0},buttons:{left:!1,right:!1,middle:!1},modifiers:{alt:!1,ctrl:!1,shift:!1,meta:!1},time:new Date,deltaTime:1,velocity:{x:0,y:0}},f={},h={},this._handleKeys=function(t,n,r){r&&!0===r.simulated&&(n=r);var i,o,a=e.keyboard.meta||{0:{}},s=M.map(),u=s.size(),l=t,c="",f={};for(i in a)a.hasOwnProperty(i)&&(void 0!==a[i].shift&&n.shiftKey!==!!a[i].shift||void 0!==a[i].ctrl&&n.ctrlKey!==!!a[i].ctrl||void 0!==a[i].alt&&n.altKey!==!!a[i].alt||void 0!==a[i].meta&&n.metaKey!==!!a[i].meta||(o=i));if(void 0!==o){switch(n.stopPropagation(),n.preventDefault(),t.indexOf(".")>=0&&(l=t.substr(0,t.indexOf(".")),c=t.substr(t.indexOf(".")+1)),l){case"zoom":switch(c){case"in":f.zoomDelta=[.05,.25,1][o];break;case"out":f.zoomDelta=-[.05,.25,1][o];break;default:isNaN(parseFloat(c))||(f.zoom=parseFloat(c))}break;case"pan":switch(c){case"down":f.panY=-Math.max(1,[0,.05,.5][o]*u.height);break;case"left":f.panX=Math.max(1,[0,.05,.5][o]*u.width);break;case"right":f.panX=-Math.max(1,[0,.05,.5][o]*u.width);break;case"up":f.panY=Math.max(1,[0,.05,.5][o]*u.height)}break;case"rotate":switch(c){case"ccw":f.rotationDelta=[1,5,90][o]*Math.PI/180;break;case"cw":f.rotationDelta=-[1,5,90][o]*Math.PI/180;break;default:isNaN(parseFloat(c))||(f.rotation=parseFloat(c))}}s.geoTrigger(y.keyaction,{move:f,action:t,factor:o,event:n}),f.cancel||(void 0!==f.zoom?s.zoom(f.zoom):f.zoomDelta&&s.zoom(s.zoom()+f.zoomDelta),void 0!==f.rotation?s.rotation(f.rotation):f.rotationDelta&&s.rotation(s.rotation()+f.rotationDelta),(f.panX||f.panY)&&s.pan({x:f.panX||0,y:f.panY||0}))}},this.hasTouchSupport=function(){return"ontouchstart"in window||window.TouchEvent||window.DocumentTouch&&document instanceof window.DocumentTouch||(navigator.msMaxTouchPoints||navigator.maxTouchPoints)>1},this._handleTouch=function(t){var n=!1;if("mouse"===t.pointerType&&c.touchSupport&&(n=!0),"hammer.input"===t.type){if("pan"!==c.lastEventType||1===t.pointers.length)return;n=!0,c.lastEventType=null}var r=/^(.*)(start|end|move|tap)$/.exec(t.type);if(r&&3===r.length||(n=!0),n)f.boundDocumentHandlers&&c.lastEvent&&M._handleMouseUpDocument(c.lastEvent);else{t.which=r[1];var i=(new Date).valueOf();"pan"===t.which&&"pan"!==c.lastEventType&&i-c.lastTime<e.touchPanDelay||(c.lastTime=i,c.lastEventType=t.which,c.lastEvent=t,void 0===t.pageX&&void 0!==t.center&&void 0!==t.center.x&&(t.pageX=t.center.x,t.pageY=t.center.y),"start"===r[2]&&(M._handleMouseDown(t),M._setClickMaybe(!1),f.boundDocumentHandlers&&g(document).on("mousemove.geojs",M._handleMouseUpDocument)),"start"!==r[2]&&"move"!==r[2]||(f.boundDocumentHandlers?M._handleMouseMoveDocument(t):M._handleMouseMove(t)),"end"!==r[2]&&"cancel"!==r[2]||(f.boundDocumentHandlers?M._handleMouseUpDocument(t):M._handleMouseUp(t),c.lastEvent=null),"tap"!==r[2]||f.boundDocumentHandlers||(t.which=1,c.lastEventType=null,M._handleMouseDown(t),M._handleMouseUp(t),c.lastEventType=r[2]))}},this._repeatMouseMoveEvent=function(t){if(r&&r.modifiers){var e=r.modifiers.alt,n=r.modifiers.ctrl,i=r.modifiers.meta,o=r.modifiers.shift;M._getMouseModifiers(t),r.modifiers.alt===e&&r.modifiers.ctrl===n&&r.modifiers.meta===i&&r.modifiers.shift===o||(f.boundDocumentHandlers?M.map().geoTrigger(y.actionmove,{state:M.state(),mouse:M.mouse(),event:t}):M.map().geoTrigger(y.mousemove,M.mouse()))}},this.retriggerMouseMove=function(){M.map().geoTrigger(y.mousemove,M.mouse())},this._connectEvents=function(){if(!e.map)return M;M._disconnectEvents(),d=g(e.map.node()),M._handleMouseWheel=function(){var t={};function n(n){var r,i;E||(t!==h&&(h=t={kind:"wheel",scroll:{x:0,y:0}}),n.preventDefault(),n.deltaFactor=1,1===n.originalEvent.deltaMode?n.deltaFactor=40:2===n.originalEvent.deltaMode&&(n.deltaFactor=g(window).height()),r=n.originalEvent.deltaX||0,i=n.originalEvent.deltaY||0,r=r*e.wheelScaleX*n.deltaFactor/120,i=i*e.wheelScaleY*n.deltaFactor/120,t.scroll.x+=r,t.scroll.y+=i)}function i(n){var i,o;if(t===h){if(M._getMousePosition(n),M._getMouseButton(n),M._getMouseModifiers(n),o=(b({wheel:!0},r.modifiers,e.actions)||{}).action){var a=M.map().transitionCancel("wheel."+o);switch((a|=M.cancel(v.momentum,!0))&&(r.geo=M.map().displayToGcs(r.map),r.mapgcs=M.map().displayToGcs(r.map,null)),o){case v.pan:M.map().pan({x:h.scroll.x,y:h.scroll.y},void 0,"limited");break;case v.zoom:i=-h.scroll.y,k(i,r);break;case v.rotate:M.map().rotation(M.map().rotation()+h.scroll.y*e.rotateWheelScale,r)}M.map().geoTrigger(y.actionwheel,{state:M.state(),mouse:M.mouse(),eventData:n})}h={}}}return e.throttle>0?x(e.throttle,!1,i,n):function(t){n(t),i(t)}}(),k=function(){var t,n,r,i=0,o=400;function a(o,a){var s,u=M.map();t=g.extend(!0,{},a),i+=o,void 0===r&&(n=r=u.zoom()),r+=o,u&&Math.abs(i)>=1&&e.discreteZoom&&!e.zoomAnimation.enabled&&(s=Math.round(i+u.zoom()),i=i+u.zoom()-s,u.zoom(s,t))}function s(){var o,a=M.map();a&&(e.zoomAnimation.enabled?(o=r,e.discreteZoom&&(o=Math.round(o))===n&&r!==n&&(o=n+(r>n?1:-1)),(o=Math.round(1e6*a._fix_zoom(o))/1e6)!==a.zoom()?(a.transitionCancel("debounced_zoom."+v.zoom),a.transition({zoom:o,zoomOrigin:t,duration:e.zoomAnimation.duration,ease:e.zoomAnimation.ease,done:function(t){t=t||{};var n=new RegExp("\\."+v.zoom+"$");t.next||t.cancel&&!((""+t.source).search(n)<0)||(r=void 0),e.discreteZoom&&t.cancel&&t.transition&&t.transition.end&&(""+t.source).search(n)<0&&a.zoom(t.transition.end.zoom,t.transition.end.zoomOrigin)}})):r=void 0):(o=i+a.zoom(),e.discreteZoom&&(o=Math.round(o)),a.zoom(o,t))),i=0}!0!==e.discreteZoom&&e.discreteZoom>0&&(o=e.discreteZoom);return(!0===e.discreteZoom||e.discreteZoom>0)&&!e.zoomAnimation.enabled?_(o,!1,s,a):function(t,e){(t||void 0!==r)&&(a(t,e),s())}}(),o.adjustActions(e.actions);var t={};if(["right","pan","rotate"].forEach((function(n){t[n]=e.actions.some((function(t){return t.input[n]}))})),d.on("wheel.geojs",M._handleMouseWheel),d.on("mousemove.geojs",M._handleMouseMove),d.on("mousedown.geojs",M._handleMouseDown),d.on("mouseup.geojs",M._handleMouseUp),d.on("dragstart",(function(){return!1})),t.right&&d.on("contextmenu.geojs",(function(){return!1})),e.keyboard&&e.keyboard.actions){u=a(d[0]);var i=[];for(var s in e.keyboard.actions)e.keyboard.actions.hasOwnProperty(s)&&(u.bind(e.keyboard.actions[s],function(t){return function(e,n){M._handleKeys(t,e,n)}}(s)),i=i.concat(e.keyboard.actions[s]));e.keyboard.metakeyMouseEvents&&e.keyboard.metakeyMouseEvents.forEach((function(t){u.bind(t,M._repeatMouseMoveEvent,"keydown"),u.bind(t,M._repeatMouseMoveEvent,"keyup"),i.push(t)})),l=i}if(d.toggleClass("highlight-focus",!!(l&&l.length&&e.keyboard.focusHighlight)),(M.hasTouchSupport()||e.alwaysTouch)&&(t.pan||t.rotate)){var f;try{(f=n(3267))&&f.Manager||(f=void 0)}catch(t){}if(void 0!==f){var p=[],m=["hammer.input"];t.rotate&&(p.push([f.Rotate,{enable:!0}]),m=m.concat(["rotatestart","rotateend","rotatemove"])),t.pan&&(p.push([f.Pan,{direction:f.DIRECTION_ALL}]),m=m.concat(["panstart","panend","panmove"])),p.push([f.Tap,{event:"doubletap",taps:2}]),p.push([f.Tap,{event:"singletap"},void 0,["doubletap"]]),m=m.concat(["singletap"]);var w={recognizers:p,preventDefault:!0};(c={manager:new f.Manager(d[0],w),touchSupport:M.hasTouchSupport(),lastTime:0}).manager.get("doubletap").recognizeWith("singletap"),m.forEach((function(t){c.manager.on(t,M._handleTouch)}))}}return M},this._disconnectEvents=function(){return l&&(u&&u.unbind(l),l=null,u=null),c&&(c.manager.destroy(),c=null),d&&(d.off(".geojs"),d=null),M._handleMouseWheel=function(){},k=function(){},M},this.map=function(t){return void 0!==t?(e.map=t,M._connectEvents(),M):e.map},this.options=function(t){return void 0===t?g.extend({},e):(g.extend(e,t),M._connectEvents(),M)},this._getMousePosition=function(t){if(void 0!==t.pageX&&void 0!==t.pageY){var e,n,i=d.offset();e=(n=(new Date).valueOf())-r.time,r.time=n,r.deltaTime=e,r.velocity={x:(t.pageX-r.page.x)/e,y:(t.pageY-r.page.y)/e},r.page={x:t.pageX,y:t.pageY},r.map={x:t.pageX-i.left,y:t.pageY-i.top};try{r.geo=M.map().displayToGcs(r.map),r.mapgcs=M.map().displayToGcs(r.map,null)}catch(t){r.geo=r.mapgcs=null}}},this._getMouseButton=function(t){if(void 0!==t.buttons||void 0!==t.which){for(var e in r.buttons)r.buttons.hasOwnProperty(e)&&(r.buttons[e]=!1);if(void 0!==t.buttons)r.buttons.left=!!(1&t.buttons),r.buttons.right=!!(2&t.buttons),r.buttons.middle=!!(4&t.buttons);else if("mouseup"!==t.type)switch(t.which){case 1:r.buttons.left=!0;break;case 2:r.buttons.middle=!0;break;case 3:r.buttons.right=!0}!t.which||t.which>=1&&t.which<=3||(r.buttons[t.which]=!0)}},this._getMouseModifiers=function(t){r.modifiers.alt=t.altKey,r.modifiers.ctrl=t.ctrlKey,r.modifiers.meta=t.metaKey,r.modifiers.shift=t.shiftKey},this._getSelection=function(){var t=f.origin,e=M.mouse(),n=M.map(),r={},i={},a=e.map;if(f.actionRecord&&o.isFunction(f.actionRecord.selectionConstraint)){var s=f.actionRecord.selectionConstraint(e.mapgcs,t.mapgcs);a=s?n.gcsToDisplay(s.pos,null):a}else if(e.modifiers.shift){var u=Math.pow(Math.abs((a.x-t.map.x)*(a.y-t.map.y)),.5);a={x:t.map.x+Math.sign(a.x-t.map.x)*u,y:t.map.y+Math.sign(a.y-t.map.y)*u}}return r.upperLeft={x:Math.min(t.map.x,a.x),y:Math.min(t.map.y,a.y)},r.lowerRight={x:Math.max(t.map.x,a.x),y:Math.max(t.map.y,a.y)},r.upperRight={x:r.lowerRight.x,y:r.upperLeft.y},r.lowerLeft={x:r.upperLeft.x,y:r.lowerRight.y},i.upperLeft=n.displayToGcs(r.upperLeft,null),i.lowerRight=n.displayToGcs(r.lowerRight,null),i.upperRight=n.displayToGcs(r.upperRight,null),i.lowerLeft=n.displayToGcs(r.lowerLeft,null),p.data([{ul:i.upperLeft,ur:i.upperRight,ll:i.lowerLeft,lr:i.lowerRight}]),p.draw(),{display:r,gcs:i,mouse:e,origin:g.extend({},f.origin)}},this.cancel=function(t,e){var n;return(n=t?f.action===t:!!f.action)&&(e||(h={}),P()),n},this._setClickMaybe=function(t){C=t,m&&(window.clearTimeout(m),m=null)},this._handleMouseDown=function(t){var n,i;if(!(E||c&&"tap"===c.lastEventType&&(new Date).valueOf()-c.lastTime<1e3)){M._getMousePosition(t),M._getMouseButton(t),M._getMouseModifiers(t),M.map().geoTrigger(y.mousedown,M.mouse()),!e.click.enabled||r.buttons.left&&!e.click.buttons.left||r.buttons.right&&!e.click.buttons.right||r.buttons.middle&&!e.click.buttons.middle||(M._setClickMaybe({x:r.page.x,y:r.page.y,buttons:g.extend({},r.buttons)}),e.click.duration>0&&(m=window.setTimeout((function(){C=!1,m=null}),e.click.duration))),n=((i=b(r.buttons,r.modifiers,e.actions))||{}).action;var o=M.map();o.transitionCancel("_handleMouseDown"+(n?"."+n:"")),M.cancel(v.momentum),r.velocity={x:0,y:0},n&&(h={kind:"move"},A+=1,f={action:n,actionRecord:i,origin:g.extend(!0,{},r),initialZoom:o.zoom(),initialRotation:o.rotation(),initialEventRotation:t.rotation,stateId:A,delta:{x:0,y:0}},i.selectionRectangle&&(T&&(T.clear(),o.deleteLayer(T),T=null),T=o.createLayer("feature",{features:[w.capabilities.color],autoshareRenderer:!1}),(p=T.createFeature("quad",{gcs:o.gcs()})).style({opacity:.25,color:{r:.3,g:.3,b:.3}}),o.geoTrigger(y.brushstart,M._getSelection())),o.geoTrigger(y.actiondown,{state:M.state(),mouse:M.mouse(),event:t}),e.throttle>0?g(document).on("mousemove.geojs",x(e.throttle,M._handleMouseMoveDocument)):g(document).on("mousemove.geojs",M._handleMouseMoveDocument),g(document).on("mouseup.geojs",M._handleMouseUpDocument),f.boundDocumentHandlers=!0)}},this._handleMouseMove=function(t){E||f.boundDocumentHandlers||(e.click.cancelOnMove&&C&&M._setClickMaybe(!1),M._getMousePosition(t),M._getMouseButton(t),M._getMouseModifiers(t),C||M.map().geoTrigger(y.mousemove,M.mouse()))},this._handleZoomrotate=function(t){var n=Math.log2(t.scale);if(!f.zoomrotateAllowZoom&&n&&Math.abs(n)>=Math.log2(1+e.zoomrotateMinimumZoom)&&(e.zoomrotateMinimumZoom&&(f.initialZoom-=n),f.zoomrotateAllowZoom=!0),f.zoomrotateAllowZoom&&n){var r=f.initialZoom+n;M.map().zoom(r,f.origin)}var i=(t.rotation-f.initialEventRotation)*Math.PI/180;if(!f.zoomrotateAllowRotation&&i&&Math.abs(i)>=e.zoomrotateMinimumRotation&&(e.zoomrotateMinimumRotation&&(f.initialEventRotation=t.rotation,i=0),f.zoomrotateAllowRotation=!0),f.zoomrotateAllowRotation){var a=f.initialRotation+i;(i=o.wrapAngle(a-M.map().rotation()))&&(i*(f.lastRotationDelta||0)>=0||Math.abs(i)>=e.zoomrotateReverseRotation)&&(M.map().rotation(a,f.origin),f.lastRotationDelta=i)}var s=f.origin.page;if(f.initialEventGeo){var u=d.offset();(s=M.map().gcsToDisplay(f.initialEventGeo)).x+=u.left,s.y+=u.top}var l=t.pageX-s.x,c=t.pageY-s.y,h=l*l+c*c;!f.zoomrotateAllowPan&&h&&h>=e.zoomrotateMinimumPan*e.zoomrotateMinimumPan&&(e.zoomrotateMinimumPan?(l=c=0,f.initialEventGeo=M.mouse().geo):f.initialEventGeo=f.origin.geo,f.zoomrotateAllowPan=!0),f.zoomrotateAllowPan&&(l||c)&&M.map().pan({x:l,y:c})},this._handleMouseMoveDocument=function(t){var n,i,o;if(M.map()&&!E&&"move"===h.kind){if(M._getMousePosition(t),M._getMouseButton(t),M._getMouseModifiers(t),e.click.cancelOnMove)if(void 0===C.x||void 0===C.y)M._setClickMaybe(!1);else if(!0!==e.click.cancelOnMove||r.page.x===C.x&&r.page.y===C.y){Math.sqrt(Math.pow(r.page.x-C.x,2)+Math.pow(r.page.y-C.y,2))>=e.click.cancelOnMove&&M._setClickMaybe(!1)}else M._setClickMaybe(!1);if(!C)if(f.action){if(n=r.map.x-f.origin.map.x-f.delta.x,i=r.map.y-f.origin.map.y-f.delta.y,f.delta.x+=n,f.delta.y+=i,f.action===v.pan)M.map().pan({x:n,y:i},void 0,"limited");else if(f.action===v.zoom)k(-i*e.zoomScale/120,f);else if(f.action===v.rotate){var a,s;void 0===f.origin.rotation&&(a=f.origin.map.x-M.map().size().width/2,s=f.origin.map.y-M.map().size().height/2,f.origin.rotation=M.map().rotation()-Math.atan2(s,a)),a=r.map.x-M.map().size().width/2,s=r.map.y-M.map().size().height/2,M.map().rotation(f.origin.rotation+Math.atan2(s,a))}else f.action===v.zoomrotate?M._handleZoomrotate(t):f.actionRecord.selectionRectangle&&(o=M._getSelection(),M.map().geoTrigger(y.brush,o));M.map().geoTrigger(y.actionmove,{state:M.state(),mouse:M.mouse(),event:t}),t.preventDefault()}else console.log("WARNING: Invalid state in mapInteractor.")}},this._zoomFromSelection=function(t,e,n){if((t===v.zoomselect||t===v.unzoomselect)&&e.x!==n.x&&e.y!==n.y){var r,i,o=M.map(),a=o.size(),s={x:Math.abs((n.x-e.x)/a.width),y:Math.abs((n.y-e.y)/a.height)};if(t===v.zoomselect?(i=o.displayToGcs({x:(e.x+n.x)/2,y:(e.y+n.y)/2},null),r=o.zoom()-Math.log2(Math.max(s.x,s.y))):(r=o.zoom()+Math.log2(Math.max(s.x,s.y)),i=o.center(void 0,null)),o.discreteZoom()&&(r=Math.floor(r)),o.zoom(r),t===v.zoomselect)o.center(i,null);else{var u=o.gcsToDisplay(i,null);o.pan({x:(e.x+n.x)/2-u.x,y:(e.y+n.y)/2-u.y})}}},this._handleMouseUpDocument=function(t){var n,i;if(!E&&(h={},M._setClickMaybe(!1),M._getMouseButton(t),M._getMouseModifiers(t),g(document).off(".geojs"),f.boundDocumentHandlers=!1,r.buttons.right&&t.preventDefault(),f.actionRecord&&f.actionRecord.selectionRectangle&&(M._getMousePosition(t),n=M._getSelection(),T.clear(),M.map().deleteLayer(T),T=null,p=null,M.map().geoTrigger(y.brushend,n),!0!==f.actionRecord.selectionRectangle&&M.map().geoTrigger(f.actionRecord.selectionRectangle,n),M._zoomFromSelection(f.action,n.display.lowerLeft,n.display.upperRight),M.map().geoTrigger(y.actionselection,{state:M.state(),mouse:M.mouse(),event:t,lowerLeft:n.display.lowerLeft,upperRight:n.display.upperRight})),M.map().geoTrigger(y.actionup,{state:M.state(),mouse:M.mouse(),event:t}),i=f.action,P(),e.momentum.enabled&&g.inArray(i,e.momentum.actions)>=0)){var o=(new Date).valueOf(),a=o-r.time+r.deltaTime;o-r.time<e.momentum.stopTime?(r.velocity.x*=r.deltaTime/a,r.velocity.y*=r.deltaTime/a,r.deltaTime=a):r.velocity.x=r.velocity.y=0,M.springBack(!0,i)}},this._handleMouseUp=function(t){if(!E){M._getMouseButton(t),C&&M._handleMouseClick(t);var e=M.mouse();e.buttonsDown=C.buttons,M.map().geoTrigger(y.mouseup,e)}},this._handleMouseClick=function(t){f.actionRecord&&f.actionRecord.selectionRectangle&&(T.clear(),M.map().deleteLayer(T),T=null,p=null,f.action=f.actionRecord=null),M._getMouseButton(t),M._getMouseModifiers(t),M.cancel(v.pan),g(document).off(".geojs"),f.boundDocumentHandlers=!1;var e=M.mouse();e.buttonsDown=C.buttons,e.evt=t,M._setClickMaybe(!1),M.map().geoTrigger(y.mouseclick,e)},this._handleMouseWheel=function(){},this.springBack=function(t,n){f.action!==v.momentum&&(t||(r.velocity={x:0,y:0}),f.origAction=n,f.action=v.momentum,f.origin=M.mouse(),f.momentum=M.mouse(),f.start=new Date,f.handler=function(){var t,n,r,i;if(f.action===v.momentum&&M.map()&&!M.map().transition())if(i=Math.min(f.momentum.deltaTime,30),r=f.start.valueOf(),f.start=new Date,t=O(f.momentum.velocity,f.start-r)){if((n=S(t))>e.momentum.maxSpeed&&(n=e.momentum.maxSpeed/n,t.x=t.x*n,t.y=t.y*n),isFinite(t.x)&&isFinite(t.y)||(t.x=0,t.y=0),f.momentum.velocity.x=t.x,f.momentum.velocity.y=t.y,f.origAction===v.zoom){var o=f.momentum.velocity.y*i;k(-o*e.zoomScale/120,f)}else M.map().pan({x:f.momentum.velocity.x*i,y:f.momentum.velocity.y*i},void 0,"limited");f.handler&&M.map().scheduleAnimationFrame(f.handler)}else P()},f.handler&&M.map().scheduleAnimationFrame(f.handler))},this.destroy=function(){M._disconnectEvents(),M.map()&&g(M.map().node()).removeClass("highlight-focus"),M.map(null)},this.mouse=function(){return g.extend(!0,{},r)},this.keyboard=function(t){return void 0===t?g.extend(!0,{},e.keyboard||{}):M.options({keyboard:t})},this.state=function(){return g.extend(!0,{},f)},this.pause=function(t){return void 0===t?E:(E=!!t,M)},this.addAction=function(t,n){t&&t.action&&t.input&&(o.addAction(e.actions,t,n),e.map&&e.actions.some((function(t){return t.input.right}))&&(d.off("contextmenu.geojs"),d.on("contextmenu.geojs",(function(){return!1}))))},this.hasAction=function(t,n,r){return o.hasAction(e.actions,t,n,r)},this.removeAction=function(t,n,r){var i=o.removeAction(e.actions,t,n,r);return e.map&&!e.actions.some((function(t){return t.input.right}))&&d.off("contextmenu.geojs"),i},this.simulateEvent=function(t,e){var n,r,i,o,a;if(!M.map())return M;if("keyboard"===t&&u){var s={shiftKey:e.shift||e.shiftKey||!1,ctrlKey:e.ctrl||e.ctrlKey||!1,altKey:e.alt||e.altKey||!1,metaKey:e.meta||e.metaKey||!1,toString:function(){return e.keys},stopPropagation:function(){},preventDefault:function(){},simulated:!0};u.trigger(s,e.event)}else r=e.page||{},e.map&&(i=d.offset(),r.x=e.map.x+i.left,r.y=e.map.y+i.top),"left"===e.button?(o=1,a=1):"right"===e.button?(o=3,a=2):"middle"===e.button&&(o=2,a=4),e.modifiers=e.modifiers||[],e.wheelDelta=e.wheelDelta||{},n=g.Event(t,{pageX:r.x,pageY:r.y,which:o,buttons:a,altKey:e.modifiers.indexOf("alt")>=0,ctrlKey:e.modifiers.indexOf("ctrl")>=0,metaKey:e.modifiers.indexOf("meta")>=0,shiftKey:e.modifiers.indexOf("shift")>=0,center:e.center,rotation:e.touch?e.rotation||0:e.rotation,scale:e.touch?e.scale||1:e.scale,pointers:e.pointers,pointerType:e.pointerType,originalEvent:{deltaX:e.wheelDelta.x,deltaY:e.wheelDelta.y,deltaMode:e.wheelMode,preventDefault:function(){},stopPropagation:function(){},stopImmediatePropagation:function(){}}}),e.touch&&c?M._handleTouch(n):d.trigger(n),t.indexOf(".geojs")>=0&&g(document).trigger(n)},this._connectEvents(),this};r(s,i),t.exports=s},2225:function(t,e,n){function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||i(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){if(t){if("string"==typeof t)return o(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var a=n(4626),s=n(1275),u=n(7541),l=function(t){"use strict";if(!(this instanceof l))return new l(t);t=t||{},u.call(this,t);var e=n(5616),o=n(77),a=n(642),s=n(4279);s=s.__esModule?s.default:s;var c=this,f=this._init,h=null,d=o(),p=0,m=0,g=0;return this.featureType="marker",this._updateRangeTree=function(){if(!(d.timestamp()>=c.dataTime().timestamp()&&d.timestamp()>=c.timestamp())){var t,e,n=c.style.get("radius"),o=c.style.get("strokeWidth"),a=c.style.get("radiusIncludesStroke"),u=c.style.get("strokeOffset"),f=c.style.get("scaleWithZoom");e=c.position(),p=0,m=0,g=0,t=c.data().map((function(t,r){var i=e(t,r),s=f(t,r),c=n(t,r),h=o(t,r),d=Math.sign(u(t,r)),y=a(t,r),v=(y=void 0===y||y)?c+h*(d+1)/2:c+h,x=y?c+h*(d-1)/2:c;switch(s=l.scaleMode[s]||(s>=1&&s<=3?s:0)){case l.scaleMode.stroke:x>p&&(p=x),h>g&&(g=h);break;case l.scaleMode.fill:case l.scaleMode.all:v>m&&(m=v);break;default:v>p&&(p=v)}return[i.x,i.y]})),h=new s(t.length);var y,v=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=i(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}(t);try{for(v.s();!(y=v.n()).done;){var x=r(y.value,2),_=x[0],b=x[1];h.add(_,b)}}catch(t){v.e(t)}finally{v.f()}h.finish(),d.modified()}},this._approximateMaxRadius=function(t){c._updateRangeTree();var e=Math.pow(2,t);return Math.max(p+g*e,m*e)},this.pointSearch=function(t,e){var n,r,i,o,a=[],s=[],u=[],f=c.gcs(),d=c.style.get("radius"),p=c.style.get("strokeWidth"),m=c.style.get("radiusIncludesStroke"),g=c.style.get("strokeOffset"),y=c.style.get("scaleWithZoom");if(!(i=c.data())||!i.length)return{found:[],index:[]};c._updateRangeTree();var v=c.layer().map();e=null===e?v.gcs():void 0===e?v.ingcs():e;var x=v.gcsToDisplay(t,e),_=v.zoom(),b=Math.pow(2,_),w=this._approximateMaxRadius(_);return o=[v.displayToGcs({x:x.x-w,y:x.y-w},f),v.displayToGcs({x:x.x+w,y:x.y-w},f),v.displayToGcs({x:x.x-w,y:x.y+w},f),v.displayToGcs({x:x.x+w,y:x.y+w},f)],n={x:Math.min(o[0].x,o[1].x,o[2].x,o[3].x),y:Math.min(o[0].y,o[1].y,o[2].y,o[3].y)},r={x:Math.max(o[0].x,o[1].x,o[2].x,o[3].x),y:Math.max(o[0].y,o[1].y,o[2].y,o[3].y)},(a=h.range(n.x,n.y,r.x,r.y)).sort((function(t,e){return t-e})),a.forEach((function(t){var e=i[t],n=d(i[t],t),r=y(i[t],t),o=g(i[t],t),a=r?p(i[t],t):0,h=m(e,t),_=(h=void 0===h||h)?n+a*(o-1)/2:n;n=_+a;var w,M,A,T=c.position()(e,t);switch(r=l.scaleMode[r]||(r>=1&&r<=3?r:0)){case l.scaleMode.fill:n=_*b+a;break;case l.scaleMode.stroke:n=_+a*b;break;case l.scaleMode.all:n*=b}n&&(A=n*n,(w=(T=v.gcsToDisplay(T,f)).x-x.x)*w+(M=T.y-x.y)*M<=A&&(s.push(e),u.push(t)))})),{found:s,index:u}},this.polygonSearch=function(t,e,n){var r,i,o,s,u=c.gcs(),f=[],d=[],p={},m=c.layer().map(),g=c.data(),y=c.style.get("radius"),v=c.style.get("strokeWidth"),x=c.style.get("radiusIncludesStroke"),_=c.style.get("strokeOffset"),b=c.style.get("scaleWithZoom"),w=m.zoom(),M=Math.pow(2,w),A=this._approximateMaxRadius(w);return n=null===n?m.gcs():void 0===n?m.ingcs():n,t.outer||(t={outer:t,inner:[]}),t.outer.length<3||!g||!g.length?{found:[],index:[],extra:{}}:((e=e||{}).partial=e.partial||!1,(t={outer:m.gcsToDisplay(t.outer,n),inner:(t.inner||[]).map((function(t){return m.gcsToDisplay(t,n)}))}).outer.forEach((function(t){i||(i={x:t.x,y:t.y},o={x:t.x,y:t.y}),t.x<i.x&&(i.x=t.x),t.x>o.x&&(o.x=t.x),t.y<i.y&&(i.y=t.y),t.y>o.y&&(o.y=t.y)})),c._updateRangeTree(),s=[m.displayToGcs({x:i.x-A,y:i.y-A},u),m.displayToGcs({x:o.x+A,y:i.y-A},u),m.displayToGcs({x:o.x+A,y:o.y+A},u),m.displayToGcs({x:i.x-A,y:o.y+A},u)],i={x:Math.min(s[0].x,s[1].x,s[2].x,s[3].x),y:Math.min(s[0].y,s[1].y,s[2].y,s[3].y)},o={x:Math.max(s[0].x,s[1].x,s[2].x,s[3].x),y:Math.max(s[0].y,s[1].y,s[2].y,s[3].y)},(r=h.range(i.x,i.y,o.x,o.y)).sort((function(t,e){return t-e})),r.forEach((function(n){var r=g[n],i=c.position()(r,n),o=y(g[n],n),s=b(g[n],n),h=_(g[n],n),w=s?v(g[n],n):0,A=x(r,n),T=(A=void 0===A||A)?o+w*(h-1)/2:o;switch(o=T+w,s=l.scaleMode[s]||(s>=1&&s<=3?s:0)){case l.scaleMode.fill:o=T*M+w;break;case l.scaleMode.stroke:o=T+w*M;break;case l.scaleMode.all:o*=M}if(o){i=m.gcsToDisplay(i,u);var E=a.distanceToPolygon2d(i,t);(E>=o||E>=0&&"center"===e.partial||E>=-o&&e.partial&&"center"!==e.partial)&&(f.push(r),d.push(n),p[n]={partial:E<o,distance:E})}})),{found:f,index:d,extra:p})},this._init=function(t){return t=e.extend(!0,{},{style:e.extend({},{radius:6.25,radiusIncludesStroke:!0,strokeColor:{r:.851,g:.604,b:0},strokeOffset:-1,strokeOpacity:1,strokeWidth:1.25,fillColor:{r:1,g:.839,b:.439},fillOpacity:.8,symbol:0,symbolValue:0,rotation:0,scaleWithZoom:l.scaleMode.none,rotateWithMap:!1},t&&void 0===t.style?{}:t.style)},t),f.call(c,t),c},c};l.create=function(t,e){"use strict";return(e=e||{}).type="marker",s.create(t,e)},l.capabilities={feature:"marker"},l.primitiveShapes=u.primitiveShapes,l.symbols={circle:0,ellipse:0,flowerBase:1,flowerMax:16,triangle:16,diamond:17,starBase:17,starMax:16,square:32,rectangle:32,crossBase:33,crossMax:16,oval:48,jackBase:49,jackMax:16,drop:64,dropBase:65,dropMax:16,arrow:80,arrowBase:81,arrowMax:16,length:96},["flower","star","cross","jack","drop","arrow"].forEach((function(t){for(var e=2;e<=l.symbols[t+"Max"];e+=1)l.symbols[t+e]=l.symbols[t+"Base"]-2+e})),l.scaleMode={none:0,fill:1,stroke:2,all:3},a(l,u),t.exports=l},6124:function(t,e,n){var r=n(4626),i=n(1275),o=function(t){"use strict";if(!(this instanceof o))return new o(t);var e=n(5616),r=n(642);t=t||{},i.call(this,t);var a=this,s=this._init,u={};return this.featureType="mesh",this.mesh=function(t,n){if(void 0===t)return u;if("string"==typeof t&&void 0===n)return u[t];if(void 0===n){var r=e.extend({},{gridWidth:function(){return t.gridHeight?Math.floor(a.data().length/t.gridHeight):Math.floor(Math.sqrt(a.data().length))},gridHeight:function(){return t.gridWidth?Math.floor(a.data().length/t.gridWidth):Math.floor(Math.sqrt(a.data().length))}},u,t);u=r}else u[t]=n;return a.modified(),a},this.mesh.get=function(t){if(void 0===t){var e,n={};for(e in u)u.hasOwnProperty(e)&&(n[e]=a.mesh.get(e));return n}return r.ensureFunction(u[t])},this.position=function(t){return void 0===t?a.style("position"):(a.style("position",t),a.dataTime().modified(),a.modified(),a)},this._createMesh=function(t,e){t=t||{},e=e||{};var n,r,i,o,s,u,l,c,f,h,d,p,m,g,y,v,x=a.data(),_=a.position(),b=a.mesh.get("elements")(x),w=a.mesh.get("elementPacking")(x),M=a.mesh.get("gridWidth")(x),A=a.mesh.get("gridHeight")(x),T=a.mesh.get("wrapLongitude")(x),E=a.mesh.get("x0")(x),C=a.mesh.get("y0")(x),k=a.mesh.get("dx")(x),S=a.mesh.get("dy")(x),P=M,O={shape:"square",elements:[],elementIndex:[]};if(b){var R=b.length&&Array.isArray(b[0]);if("square"===w||"triangle"!==w&&(!R&&!(b.length%4)&&b.length%3||R&&4===b[0].length))if(O.shape="square",R)for(n=0;n<b.length;n+=1)O.elements.push(b[n][0]),O.elements.push(b[n][1]),O.elements.push(b[n][3]),O.elements.push(b[n][2]),O.elements.push(b[n][3]),O.elements.push(b[n][1]),O.elementIndex.push(n),O.elementIndex.push(n);else for(n=i=0;n<b.length-3;n+=4,i+=1)O.elements.push(b[n]),O.elements.push(b[n+1]),O.elements.push(b[n+3]),O.elements.push(b[n+2]),O.elements.push(b[n+3]),O.elements.push(b[n+1]),O.elementIndex.push(i),O.elementIndex.push(i);else if(O.shape="triangle",R)for(n=0;n<b.length;n+=1)O.elements.push(b[n][0]),O.elements.push(b[n][1]),O.elements.push(b[n][2]),O.elementIndex.push(n);else for(O.elements=b.slice(0,b.length-b.length%3),n=i=0;n<b.length-2;n+=3,i+=1)O.elementIndex.push(i);u=x.length,c=!0}else{if(Object.keys(t).length?M*A>x.length&&(A=Math.floor(x.length/M)):Object.keys(e).length&&(M-1)*(A-1)>x.length&&(A=Math.floor(x.length/(M-1))+1),T=!(void 0!==T&&!T),!(c=null==E||null==C||!k||!S)&&T&&(E<-180||E>180||E+k*(M-1)<-180||E+k*(M-1)>180)&&k>-180&&k<180&&k*(M-1)<360.0001){for(p=[],m=[],n=0;n<M;n+=1){for(y=E+n*k;y<-180;)y+=360;for(;y>180;)y-=360;n&&Math.abs(y-p[p.length-1])>180&&(y>p[p.length-1]?(p.push(y-360),p.push(p[p.length-2]+360),m.push(n),m.push(n+1)):(p.push(y+360),p.push(p[p.length-2]-360),m.push(n),m.push(n+1)),g=n),p.push(y),m.push(n)}if(M+=2,Math.abs(Math.abs(P*k)-360)<.01){for(M+=1,y=E+P*k;y<-180;)y+=360;for(;y>180;)y-=360;p.push(y),m.push(0)}}if(u=M*A,void 0!==g)for(O.index=new Array(u),n=0;n<u;n+=1)v=n-(i=Math.floor(n/M))*M,(v+=v>g?-2:0)>=P&&(v-=P),v+=i*P,O.index[n]=v;for(i=s=0;i<A-1;i+=1,s+=1)for(n=0;n<M-1;n+=1,s+=1)n!==g&&(O.elements.push(s),O.elements.push(s+1),O.elements.push(s+M),O.elements.push(s+M+1),O.elements.push(s+M),O.elements.push(s+1),O.elementIndex.push(i*(M-1)+(m?m[n]:n)),O.elementIndex.push(i*(M-1)+(m?m[n]:n)))}O.verticesPerElement="triangle"===O.shape?3:6;var L=O.verticesPerElement;if(e.used){var I=new Array(O.elementIndex[O.elementIndex.length-1]+1);for(n=0;n<I.length;n+=1)I[n]=e.used(x[n],n);for(n=0;n<O.elementIndex.length&&I[O.elementIndex[n]];n+=1);if(n<O.elementIndex.length){for(i=n;n<O.elementIndex.length;n+=1)if(I[O.elementIndex[n]]){for(O.elementIndex[i]=O.elementIndex[n],o=0;o<3;o+=1)O.elements[3*i+o]=O.elements[3*n+o];i+=1}O.elements.splice(3*i),O.elementIndex.splice(i)}}if(t.used){for(n=0;n<u&&(s=O.index?O.index[n]:n,t.used(x[s],s));n+=1);if(n!==u){l=n;var D=new Array(u);for(i=0;i<l;i+=1)D[i]=i;if(D[l]=-1,!O.index)for(O.index=new Array(x.length),i=0;i<x.length;i+=1)O.index[i]=i;for(n=l+1;n<u;n+=1)s=O.index[n],t.used(x[s],s)?(D[n]=l,O.index[l]=O.index[n],l+=1):D[n]=-1;for(O.index.splice(l),n=o=0;n<O.elements.length;n+=L){for(i=0;i<L&&!(D[O.elements[n+i]]<0);i+=1)O.elements[o+i]=D[O.elements[n+i]];i===L&&(O.elementIndex[Math.floor(o/3)]=O.elementIndex[Math.floor(n/3)],6===L&&(O.elementIndex[Math.floor(o/3)+1]=O.elementIndex[Math.floor(n/3)+1]),o+=L)}O.elements.splice(o),O.elementIndex.splice(Math.floor(o/3)),u=l}}if(e.used&&void 0===g){var N=new Array(u),F=O.index;for(O.index=[],n=0;n<O.elements.length;n+=1)void 0===N[o=O.elements[n]]&&(N[o]=O.index.length,O.index.push(F?F[o]:o)),O.elements[n]=N[o];u=O.index.length}for(h in O.pos=new Array(3*u),t)"used"!==h&&t.hasOwnProperty(h)&&(O[h]=new Array(u));for(n=r=0;n<u;n+=1,r+=3)for(h in f=x[s=O.index?O.index[n]:n],c?(d=_(f,s),O.pos[r]=d.x,O.pos[r+1]=d.y,O.pos[r+2]=d.z||0):(O.pos[r]=void 0===g?E+k*(s%M):p[n%M],O.pos[r+1]=C+S*Math.floor(s/M),O.pos[r+2]=0,d={x:O.pos[r],y:O.pos[r+1],z:O.pos[r+2]}),t)"used"!==h&&t.hasOwnProperty(h)&&(O[h][n]=t[h](f,s,d));for(h in e)if("used"!==h&&e.hasOwnProperty(h)){var z=e[h];for(O[h]=new Array(O.elementIndex.length),n=0;n<O.elementIndex.length;n+=1)f=x[s=O.elementIndex[n]],O[h][n]=z(f,s)}return O.numVertices=u,O.numElements=O.elements.length/O.verticesPerElement,O},this._init=function(t){s.call(a,t),t=t||{};var n=e.extend({},{position:function(t){return Array.isArray(t)?{x:t[0],y:t[1],z:t[2]||0}:t}},t.style||{});a.mesh(t.mesh||{}),a.style(n)},this};r(o,i),t.exports=o},1338:function(t,e,n){var r=n(4626),i=n(77),o=0,a=function(){"use strict";if(!(this instanceof a))return new a;var t=n(642),e=this,r=++o,s={},u=[],l=0;return this.onIdle=function(t){return l?u.push(t):t(),e},Object.defineProperty(this,"idle",{get:function(){return!l},configurable:!0}),Object.defineProperty(this,"_promises",{get:function(){return l},configurable:!0}),this.addPromise=function(t){function n(){t._geojsTracked&&t._geojsTracked[r]&&(l-=1,delete t._geojsTracked[r]),l||u.splice(0,u.length).forEach((function(t){t()}))}return t._geojsTracked||(t._geojsTracked={}),t._geojsTracked[r]||(t._geojsTracked[r]=!0,l+=1),t.always?t.always(n):t.then(n,n),e},this.removePromise=function(t){return t._geojsTracked&&t._geojsTracked[r]&&(l-=1,delete t._geojsTracked[r],l||u.splice(0,u.length).forEach((function(t){t()}))),e},this.geoOn=function(n,r){return Array.isArray(n)?(n.forEach((function(t){e.geoOn(t,r)})),e):t.isFunction(r)?(s.hasOwnProperty(n)||(s[n]=[]),s[n].push(r),e):(console.warn("Handler for "+n+" is not a function",r,e),e)},this.geoOnce=function(t,n){var r=function(i){e.geoOff(t,r),n.call(e,i)};return e.geoOn(t,r),r},this.geoIsOn=function(t,n){return Array.isArray(t)?t.some((function(t){return e.geoIsOn(t,n)})):(s[t]||[]).some((function(t){return t===n||void 0===n}))},this.geoTrigger=function(t,n){return Array.isArray(t)?(t.forEach((function(t){e.geoTrigger(t,n)})),e):((n=n||{}).event=t,s.hasOwnProperty(t)&&s[t].forEach((function(r){try{r.call(e,n)}catch(e){console.warn("Event handler for "+t+" threw an error",e)}})),e)},this.geoOff=function(t,n){if(void 0===t&&(s={},u=[],l=0,r=++o),Array.isArray(t))return t.forEach((function(t){e.geoOff(t,n)})),e;if(n){if(Array.isArray(n))return n.forEach((function(n){e.geoOff(t,n)})),e}else s[t]=[];return s.hasOwnProperty(t)&&(s[t]=s[t].filter((function(t){return t!==n}))),e},this._eventHandlers=function(){return s},this._exit=function(){e.geoOff()},i.call(this),this.modified(),this};r(a,i),t.exports=a},4880:function(t,e,n){var r=n(5616),i=n(4626),o=n(9264),a=n(1098),s=n(3842),u=function(t){var e=n(4912);if(!(this instanceof u))return new u(t);void 0!==(t=t||{}).mapOpacity&&void 0===t.opacity&&((t=r.extend({},t)).opacity=t.mapOpacity),t=r.extend(!0,{},this.constructor.defaults,u.tileSources[this.constructor.defaults.source]||{},u.tileSources[t.source]||{},{name:""},t),o.call(this,t);var i=this;this.mapOpacity=this.opacity,this._getTile=function(t,n){var r=n||t;return e({index:t,size:{x:i._options.tileWidth,y:i._options.tileHeight},queue:i._queue,overlap:i._options.tileOverlap,scale:i._options.tileScale,url:i._options.url.call(i,r.x,r.y,r.level||0,i._options.subdomains),crossDomain:i._options.crossDomain})},this.source=function(t){if(void 0!==t)return u.tileSources[t]&&(i.url(u.tileSources[t].url),i.subdomains(u.tileSources[t].subdomains||"abc"),i.attribution(u.tileSources[t].attribution||""),i._options.maxLevel=u.tileSources[t].maxLevel||18,i._options.minLevel=u.tileSources[t].minLevel||0),i;for(var e in u.tileSources)if(u.tileSources[e].url===i.url())return e}};u.defaults=r.extend({},o.defaults,{tileOffset:function(t){var e=256*Math.pow(2,t-1);return{x:e,y:e}},url:"",source:"osm"});var l='Map tiles by <a href="http://stamen.com">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://www.openstreetmap.org/copyright">ODbL</a>.',c='<a href="https://carto.com"> Carto</a> Contributors <a href="https://www.openstreetmap.org/"> OpenStreetMap</a>';u.tileSources={"dark-matter-with-labels":{url:" https://{s}.basemaps.cartocdn.com/rastertiles/dark_all/{z}/{x}/{y}.png",attribution:c,name:"Carto Dark Matter With Labels",minLevel:0,maxLevel:18},"dark-matter-without-labels":{url:"https://{s}.basemaps.cartocdn.com/rastertiles/dark_nolabels/{z}/{x}/{y}.png",attribution:c,name:"Carto Dark Matter Without Labels",minLevel:0,maxLevel:18},"nationalmap-relief":{url:"https://basemap.nationalmap.gov/arcgis/rest/services/USGSShadedReliefOnly/MapServer/tile/{z}/{y}/{x}",attribution:'Tile data from <a href="https://basemap.nationalmap.gov/">USGS</a>',name:"National Map Shaded Relief",minLevel:0,maxLevel:16},"nationalmap-satellite":{url:"https://basemap.nationalmap.gov/arcgis/rest/services/USGSImageryOnly/MapServer/tile/{z}/{y}/{x}",attribution:'Tile data from <a href="https://basemap.nationalmap.gov/">USGS</a>',name:"National Map Satellite",minLevel:0,maxLevel:16},"nationalmap-satellite-topo":{url:"https://basemap.nationalmap.gov/arcgis/rest/services/USGSImageryTopo/MapServer/tile/{z}/{y}/{x}",attribution:'Tile data from <a href="https://basemap.nationalmap.gov/">USGS</a>',name:"National Map Satellite and Topo",minLevel:0,maxLevel:16},"nationalmap-topo":{url:"https://basemap.nationalmap.gov/arcgis/rest/services/USGSTopo/MapServer/tile/{z}/{y}/{x}",attribution:'Tile data from <a href="https://basemap.nationalmap.gov/">USGS</a>',name:"National Map Topo",minLevel:0,maxLevel:16},osm:{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'Tile data &copy; <a href="https://osm.org/copyright">OpenStreetMap</a> contributors',name:"OpenStreetMap",subdomains:"abc",minLevel:0,maxLevel:19},"positron-with-labels":{url:"https://{s}.basemaps.cartocdn.com/rastertiles/light_all/{z}/{x}/{y}.png",attribution:c,name:"Carto Positron With Labels",minLevel:0,maxLevel:18},"positron-without-labels":{url:"https://{s}.basemaps.cartocdn.com/rastertiles/light_nolabels/{z}/{x}/{y}.png",attribution:c,name:"Carto Positron Without Labels",minLevel:0,maxLevel:18},"stamen-terrain":{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png",attribution:l,name:"Stamen Terrain",subdomains:"abcd",minLevel:0,maxLevel:14},"stamen-terrain-background":{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/terrain-background/{z}/{x}/{y}.png",attribution:l,name:"Stamen Terrain Background",subdomains:"abcd",minLevel:0,maxLevel:14},"stamen-toner":{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}.png",attribution:l,name:"Stamen Toner",subdomains:"abcd",minLevel:0,maxLevel:20},"stamen-toner-lite":{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}.png",attribution:l,name:"Stamen Toner Lite",subdomains:"abcd",minLevel:0,maxLevel:20},"voyager-with-labels":{url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager_labels_under/{z}/{x}/{y}.png",attribution:c,name:"Carto Voyager With Labels",minLevel:0,maxLevel:18},"voyager-without-labels":{url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager_nolabels/{z}/{x}/{y}.png",attribution:c,name:"Carto Voyager Without Labels",minLevel:0,maxLevel:18}},i(u,o),a.registerLayer("osm",u,[s.capabilities.image]),t.exports=u},2266:function(t,e,n){var r=n(5616),i=n(4626),o=n(1275),a=function(t){"use strict";if(!(this instanceof a))return new a(t);t=t||{},o.call(this,t);var e=this,n=this._init;return this.featureType="path",this.position=function(t){return void 0===t?e.style("position"):(t!==e.style("position")&&(e.style("position",t),e.dataTime().modified(),e.modified()),e)},this._init=function(t){n.call(e,t);var i=r.extend({},{strokeWidth:1,strokeColor:{r:1,g:1,b:1},position:function(t){return Array.isArray(t)?{x:t[0],y:t[1],z:t[2]||0}:t}},void 0===t.style?{}:t.style);return void 0!==t.position&&(i.position=t.position),e.style(i),i.position&&e.position(i.position),e.dataTime().modified(),e},this._init(t),this};i(a,o),t.exports=a},7761:function(t,e,n){var r=n(5616),i=n(4626),o=n(1275),a=n(642),s=function(t){"use strict";if(!(this instanceof s))return new s(t);t=t||{},o.call(this,t);var e,n=this,i=this._update,u=this._init;return this.featureType="pixelmap",this.position=function(t){return void 0===t?n.style("position"):(t!==n.style("position")&&(n.style("position",t),n.dataTime().modified(),n.modified()),n)},this.url=function(t){return void 0===t?n.style("url"):(t!==n.style("url")&&(n.m_srcImage=n.m_info=void 0,n.style("url",t),n.dataTime().modified(),n.modified()),n)},this.color=function(t){return void 0===t?n.style("color"):(t!==n.style("color")&&(n.style("color",t),n.dataTime().modified(),n.modified()),n)},this.indexModified=function(t,r){if(void 0===t){var i=e;return"clear"===r&&(e=void 0),i}return n.modified(),void 0===e&&(e=[t,t]),t<e[0]&&(e[0]=t),(r||t)>e[1]&&(e[1]=r||t),n},this._update=function(){return i.call(n),(n.buildTime().timestamp()<=n.dataTime().timestamp()||n.updateTime().timestamp()<n.timestamp())&&n._build(),n.updateTime().modified(),n},this.maxIndex=function(){if(n.m_info){if(void 0===n.m_info.maxIndex)for(var t in n.m_info.maxIndex=0,n.m_info.mappedColors)n.m_info.mappedColors.hasOwnProperty(t)&&(n.m_info.maxIndex=Math.max(n.m_info.maxIndex,t));return n.m_info.maxIndex}},this._computePixelmap=function(){},this._build=function(){if(n.m_srcImage)n.m_info&&n._computePixelmap();else{var t=n.style.get("url")();if(a.isReadyImage(t))n.m_srcImage=t,n._computePixelmap();else if(t){var e,i,o=r.Deferred();t instanceof Image?(n.m_srcImage=t,e=t.onload,i=t.onerror):(n.m_srcImage=new Image,t.indexOf(":")>=0&&t.indexOf("/")===t.indexOf(":")+1&&(n.m_srcImage.crossOrigin=n.style.get("crossDomain")()||"anonymous")),n.m_srcImage.onload=function(){e&&e.apply(n,arguments),n.style.get("url")()===t&&(n.m_info=void 0,n._computePixelmap()),o.resolve()},n.m_srcImage.onerror=function(){i&&i.apply(n,arguments),o.reject()},o.promise(n),n.layer().addPromise(n),t instanceof Image||(n.m_srcImage.src=t)}}return n.buildTime().modified(),n},this._init=function(t){t=t||{},u.call(n,t);var e=r.extend({},{color:function(t,e){return{r:(255&e)/255,g:(e>>8&255)/255,b:(e>>16&255)/255,a:1}},position:a.identityFunction},void 0===t.style?{}:t.style);return void 0!==t.position&&(e.position=t.position),void 0!==t.url&&(e.url=t.url),void 0!==t.color&&(e.color=t.color),n.style(e),n.dataTime().modified(),t.quadFeature&&(n.m_srcImage=!0,n._computePixelmap()),n},this};s.create=function(t,e){"use strict";return(e=e||{}).type="pixelmap",o.create(t,e)},s.capabilities={feature:"pixelmap",lookup:"pixelmap.lookup"},i(s,o),t.exports=s},534:function(t,e,n){var r=n(5616),i=n(4626),o=n(9264),a=n(1098),s=n(3842),u=n(7761),l=function(t){var e,i=n(4912);if(!(this instanceof l))return new l(t);(t=t||{}).data&&(e=t.data,delete t.data),t=r.extend(!0,{},this.constructor.defaults,t),o.call(this,t);var a,s=this._init,u=this;return this._getTile=function(t,e){var n=e||t;return i({index:t,size:{x:u._options.tileWidth,y:u._options.tileHeight},queue:u._queue,overlap:u._options.tileOverlap,scale:u._options.tileScale,url:u._options.url.call(u,n.x,n.y,n.level||0,u._options.subdomains),crossDomain:u._options.crossDomain})},this._init=function(){s.apply(u,arguments),u.nearestPixel(!0,!0);var n={quadFeature:u.features()[0]};t.style&&(n.style=t.style),t.color&&(n.color=t.color),a=u.createFeature("pixelmap",n),e&&a.data(e),u.style=a.style,u.data=a.data,u.indexModified=a.indexModified;var r=u.dataTime().modified;return u.dataTime().modified=function(){return a.dataTime().modified(),r()},["modified","geoOn","geoOff","geoOnce"].forEach((function(t){var e=u[t];u[t]=function(){return Array.isArray(arguments[0])||a[t].apply(this,arguments),e.apply(this,arguments)}})),u},u};l.defaults=r.extend({},o.defaults,{features:[s.capabilities.image,u.capabilities.lookup],tileOffset:function(t){var e=256*Math.pow(2,t-1);return{x:e,y:e}},url:""}),i(l,o),a.registerLayer("pixelmap",l,[s.capabilities.image]),t.exports=l},7541:function(t,e,n){function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||i(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){if(t){if("string"==typeof t)return o(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var a=n(4626),s=n(1275),u=function(t){"use strict";if(!(this instanceof u))return new u(t);t=t||{},s.call(this,t);var e=n(5616),o=n(77),a=n(5966),l=n(6409),c=n(642),f=n(4279);f=f.__esModule?f.default:f;var h=this,d=this._init,p=null,m=o(),g=this.data,y=0,v=t.clustering,x=null,_=[],b=null,w=!1;return this.featureType="point",this.clustering=function(t){return void 0===t?v:(v&&!t?(x=null,v=!1,g(_)):t&&v!==t&&(v=t,h._clusterData()),h)},this._clusterData=function(){if(v){var t=!0===v?{radius:10}:v,n=h.position(),r=h.layer().map(),i=r.gcsToDisplay(r.center(void 0,null),null),o=r.displayToGcs(i,h.gcs()),s=r.displayToGcs({x:i.x+t.radius,y:i.y},h.gcs()),u=Math.pow(Math.pow(s.y-o.y,2)+Math.pow(s.x-o.x,2),.5),l=r.zoom(),f=u*Math.pow(2,l);t=e.extend({},t,{radius:f}),x=new a(t),_.forEach((function(t,e){var r=c.normalizeCoordinates(n(t,e));r.index=e,x.addPoint(r)})),b=null,h._handleZoom(r.zoom())}},this._handleZoom=function(t){var e=Math.floor(t);if(v&&e!==b){b=e;var n=x.points(e).map((function(t){return _[t.index]}));x.clusters(e).forEach((function(t){t.__cluster=!0,t.__data=[],t.obj.each((function(e){t.__data.push(_[e.index])})),n.push(t)})),w=!0,h.data(n)}},this.position=function(t){if(void 0===t)return h.style("position");var e=c.isFunction(t);return h.style("position",(function(n,r){return null!=n&&n.__cluster?n:e?t(n,r):t})),h.dataTime().modified(),h.modified(),h},this._updateRangeTree=function(){if(!(m.timestamp()>=h.dataTime().timestamp()&&m.timestamp()>=h.timestamp())){var t,e,n=h.style.get("radius"),o=h.style.get("stroke"),a=h.style.get("strokeWidth");e=h.position(),y=0,t=h.data().map((function(t,r){var i=e(t,r);return y=Math.max(y,n(t,r)+(o(t,r)?a(t,r):0)),[i.x,i.y]})),p=new f(t.length);var s,u=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=i(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}(t);try{for(u.s();!(s=u.n()).done;){var l=r(s.value,2),c=l[0],d=l[1];p.add(c,d)}}catch(t){u.e(t)}finally{u.f()}p.finish(),m.modified()}},this.pointSearch=function(t,e){var n,r,i,o,a,s,u=[],l=[],c=[],f=h.gcs(),d=h.style.get("fill"),m=h.style.get("stroke"),g=h.style.get("strokeWidth"),v=h.style.get("radius");return(i=h.data())&&i.length?(h._updateRangeTree(),o=h.layer().map(),a=o.gcsToDisplay(t,e),s=[o.displayToGcs({x:a.x-y,y:a.y-y},f),o.displayToGcs({x:a.x+y,y:a.y-y},f),o.displayToGcs({x:a.x-y,y:a.y+y},f),o.displayToGcs({x:a.x+y,y:a.y+y},f)],n={x:Math.min(s[0].x,s[1].x,s[2].x,s[3].x),y:Math.min(s[0].y,s[1].y,s[2].y,s[3].y)},r={x:Math.max(s[0].x,s[1].x,s[2].x,s[3].x),y:Math.max(s[0].y,s[1].y,s[2].y,s[3].y)},(u=p.range(n.x,n.y,r.x,r.y)).sort((function(t,e){return t-e})),u.forEach((function(t){var e=i[t],n=m(i[t],t);if(n||d(i[t],t)){var r,s,u,p,y=h.position()(e,t);u=v(i[t],t),(u+=n?g(i[t],t):0)&&(p=u*u,(r=(y=o.gcsToDisplay(y,f)).x-a.x)*r+(s=y.y-a.y)*s<=p&&(l.push(e),c.push(t)))}})),{found:l,index:c}):{found:[],index:[]}},this.polygonSearch=function(t,e,n){var r,i,o,a,s=h.gcs(),u=[],l=[],f={},d=h.layer().map(),m=h.data(),g=h.style.get("fill"),v=h.style.get("stroke"),x=h.style.get("strokeWidth"),_=h.style.get("radius");return t.outer||(t={outer:t,inner:[]}),t.outer.length<3||!m||!m.length?{found:[],index:[],extra:{}}:((e=e||{}).partial=e.partial||!1,(t={outer:d.gcsToDisplay(t.outer,n),inner:(t.inner||[]).map((function(t){return d.gcsToDisplay(t,n)}))}).outer.forEach((function(t){i||(i={x:t.x,y:t.y},o={x:t.x,y:t.y}),t.x<i.x&&(i.x=t.x),t.x>o.x&&(o.x=t.x),t.y<i.y&&(i.y=t.y),t.y>o.y&&(o.y=t.y)})),h._updateRangeTree(),a=[d.displayToGcs({x:i.x-y,y:i.y-y},s),d.displayToGcs({x:o.x+y,y:i.y-y},s),d.displayToGcs({x:o.x+y,y:o.y+y},s),d.displayToGcs({x:i.x-y,y:o.y+y},s)],i={x:Math.min(a[0].x,a[1].x,a[2].x,a[3].x),y:Math.min(a[0].y,a[1].y,a[2].y,a[3].y)},o={x:Math.max(a[0].x,a[1].x,a[2].x,a[3].x),y:Math.max(a[0].y,a[1].y,a[2].y,a[3].y)},(r=p.range(i.x,i.y,o.x,o.y)).sort((function(t,e){return t-e})),r.forEach((function(n){var r=m[n],i=v(m[n],n);if(i||g(m[n],n)){var o=h.position()(r,n),a=_(m[n],n);if(a+=i?x(m[n],n):0){o=d.gcsToDisplay(o,s);var p=c.distanceToPolygon2d(o,t);(p>=a||p>=0&&"center"===e.partial||p>=-a&&e.partial&&"center"!==e.partial)&&(u.push(r),l.push(n),f[n]={partial:p<a,distance:p})}}})),{found:u,index:l,extra:f})},this.data=function(t){return void 0===t?g():(w||(_=t),v&&!w?h._clusterData():g(t),w=!1,h)},this._init=function(t){t=t||{},d.call(h,t);var n=e.extend(!0,{},{radius:5,stroke:!0,strokeColor:{r:.851,g:.604,b:0},strokeWidth:1.25,strokeOpacity:1,fillColor:{r:1,g:.839,b:.439},fill:!0,fillOpacity:.8,position:function(t){return Array.isArray(t)?{x:t[0],y:t[1],z:t[2]||0}:t},origin:function(t){return t.length>=3?t.slice(0,3):[0,0,0]}},void 0===t.style?{}:t.style);return void 0!==t.position&&(n.position=t.position),h.style(n),n.position&&h.position(n.position),h.dataTime().modified(),h.geoOn(l.zoom,(function(t){h._handleZoom(t.zoomLevel)})),h},h};u.create=function(t,e){"use strict";return(e=e||{}).type="point",s.create(t,e)},u.capabilities={feature:"point",stroke:"point.stroke"},u.primitiveShapes={auto:"auto",sprite:"sprite",triangle:"triangle",square:"square"},a(u,s),t.exports=u},6645:function(t,e,n){var r=n(5616),i=n(4626),o=n(1275),a=n(5325),s=function(t){"use strict";if(!(this instanceof s))return new s(t);t=t||{},o.call(this,t);var e,i=n(642),u=this,l=this._init,c=this._exit,f=this.data,h=this.draw,d=this.modified,p=this.style,m=[];function g(t,e,n){var r=u.gcs(),i=u.layer().map().gcs();return t=t||u.data(),e=e||u.style.get("position"),n=n||u.style.get("polygon"),t.map((function(t,o){var s=n(t,o);if(s){var l,c,f,h,d,p,m,g,y,v;for(h=s.outer||(Array.isArray(s)?s:[]),l=new Array(h.length),d=0;d<h.length;d+=1)l[d]=e.call(u,h[d],d,t,o),p=l[d].x,m=l[d].y,d?(p<f.min.x&&(f.min.x=p),m<f.min.y&&(f.min.y=m),p>f.max.x&&(f.max.x=p),m>f.max.y&&(f.max.y=m)):f={min:{x:p,y:m},max:{x:p,y:m}};for(c=(s.inner||[]).map((function(n){h=n||[];var r=new Array(h.length);for(d=0;d<h.length;d+=1)r[d]=e.call(u,h[d],d,t,o);return r})),g=a.transformCoordinates(r,i,l),y=c.map((function(t){return a.transformCoordinates(r,i,t)})),d=0;d<g.length;d+=1)p=g[d].x,m=g[d].y,d?(p<v.min.x&&(v.min.x=p),m<v.min.y&&(v.min.y=m),p>v.max.x&&(v.max.x=p),m>v.max.y&&(v.max.y=m)):v={min:{x:p,y:m},max:{x:p,y:m}};return{outer:l,inner:c,range:f,mapouter:g,mapinner:y,maprange:v}}}))}function y(t){return i.isFunction(t)?function(e){return t(e[0],e[1],e[2],e[3])}:t}return this.featureType="polygon",this._subfeatureStyles={fillColor:!0,fillOpacity:!0,lineCap:!0,lineJoin:!0,strokeColor:!0,strokeOffset:!0,strokeOpacity:!0,strokeWidth:!0},this.data=function(t){var e=f(t);return void 0!==t&&(m=g(),u._checkForStroke()),e},this.polygonCoordinates=function(){return m},this.polygon=function(t){return void 0===t?u.style("polygon"):(u.style("polygon",t),u.dataTime().modified(),u.modified(),m=g(),u)},this.position=function(t){return void 0===t?u.style("position"):(u.style("position",t),u.dataTime().modified(),u.modified(),m=g(),u)},this.pointSearch=function(t,n){var r=[],o=[],s={},l=u.data(),c=u.layer().map();n=null===n?c.gcs():void 0===n?c.ingcs():n;var f=a.transformCoordinates(n,c.gcs(),t);(m.forEach((function(t,e){i.pointInPolygon(f,t.mapouter,t.mapinner,t.maprange)&&(o.push(e),s[e]=!0,r.push(l[e]))})),e)&&e.pointSearch(t).found.forEach((function(t){t.length&&4===t[0].length&&!s[t[0][3]]&&(o.push(t[0][3]),s[t[0][3]]=!0,r.push(l[t[0][3]]))}));return{index:o,found:r}},this.polygonSearch=function(t,n,r){var o,s,l=u.data(),c=[],f=[],h={},d=t,p={},g=u.layer().map();if(r=null===r?g.gcs():void 0===r?g.ingcs():r,t.outer||(t={outer:t,inner:[]}),!l||!l.length||t.outer.length<3)return{found:f,index:c,extra:h};if((n=n||{}).partial=n.partial||!1,(t={outer:a.transformCoordinates(r,g.gcs(),t.outer),inner:(t.inner||[]).map((function(t){return a.transformCoordinates(r,g.gcs(),t)}))}).outer.forEach((function(t){o||(o={x:t.x,y:t.y},s={x:t.x,y:t.y}),t.x<o.x&&(o.x=t.x),t.x>s.x&&(s.x=t.x),t.y<o.y&&(o.y=t.y),t.y>s.y&&(s.y=t.y)})),m.forEach((function(e,r){if(!(!e.mapouter.length||e.maprange&&(e.maprange.max.x<o.x||e.maprange.min.x>s.x||e.maprange.max.y<o.y||e.maprange.min.y>s.y))){for(var a,u,d=-1;d<e.mapinner.length&&!u;d+=1)for(var m=d<0?e.mapouter:e.mapinner[d],g=0,y=m.length,v=y-1;g<y;v=g,g+=1){var x=i.distanceToPolygon2d(m[g],t);if(x*i.distanceToPolygon2d(m[v],t)<0){u=!0;break}if(i.crossedLineSegmentPolygon2d(m[g],m[v],t)){u=!0;break}x>0&&(a=!0)}a||u||!i.pointInPolygon(t.outer[0],e.mapouter,e.mapinner,e.maprange)||(u=!0),(!n.partial&&a&&!u||n.partial&&(a||u))&&(c.push(r),f.push(l[r]),h[r]={partial:u},p[r]=!0)}})),e){var y=e.polygonSearch(d,n);y.found.forEach((function(t,e){t.length&&4===t[0].length&&(p[t[0][3]]||(c.push(t[0][3]),p[t[0][3]]=!0,f.push(l[t[0][3]]),h[y.index[e]]={partial:!1}),y.extra[y.index[e]].partial&&(h[t[0][3]].partial=!0))}))}return{found:f,index:c,extra:h}},this.style=function(t,e){var n=p.apply(u,arguments);return void 0===t||"string"==typeof t&&void 0===e||u._checkForStroke(),n},this.style.get=p.get,this._getLoopData=function(t,e,n){var r,i=[];for(r=0;r<n.length;r+=1)i.push([n[r],r,t,e]);return i},this._checkForStroke=function(){if(!1!==p("stroke")){if(u.layer()){e||(e=u.layer().createFeature("line",{selectionAPI:!1,gcs:u.gcs(),visible:u.visible(void 0,!0)}),u.dependentFeatures([e]));var t,n=u.style();if(i.isFunction(n.stroke)||!n.stroke){var r=u.style.get("stroke"),o=u.style.get("strokeOpacity");t=function(t){return r(t[2],t[3])?o(t[0],t[1],t[2],t[3]):0}}else t=y(n.strokeOpacity);e.style({antialiasing:y(n.antialiasing),closed:!0,lineCap:y(n.lineCap),lineJoin:y(n.lineJoin),miterLimit:y(n.miterLimit),strokeWidth:y(n.strokeWidth),strokeStyle:y(n.strokeStyle),strokeColor:y(n.strokeColor),strokeOffset:y(n.strokeOffset),strokeOpacity:t,uniformLine:y(n.uniformPolygon)});var a=u.data(),s=u.style("position");if(a!==e._lastData||s!==e._lastPosVal){var l,c,f,h=[],d=u.style.get("position"),m=u.style.get("polygon");for(l=0;l<a.length;l+=1)(c=m(a[l],l))&&(f=c.outer||(Array.isArray(c)?c:[])).length>=2&&(h.push(u._getLoopData(a[l],l,f)),c.inner&&c.inner.forEach((function(t){t.length>=2&&h.push(u._getLoopData(a[l],l,t))})));e.position((function(t,e,n,r){return d(t[0],t[1],t[2],t[3])})),e.data(h),e._lastData=a,e._lastPosVal=s}}}else e&&u.layer()&&(u.layer().deleteFeature(e),e=null,u.dependentFeatures([]))},this.draw=function(){var t=h();return e&&e.draw(),t},this.modified=function(){var t=d();return e&&e.modified(),t},this.rdpSimplifyData=function(t,e,n,r,o){var s=u.layer().map(),l=s.gcs(),c=u.gcs(),f=g(t,n,r);return void 0===e&&(e=.5*s.unitsPerPixel(s.zoom())),f=f.map((function(t){return{outer:a.transformCoordinates(c,l,t.outer),inner:t.inner.map((function(t){return a.transformCoordinates(c,l,t)}))}})),t=t.map((function(t,n){var r=f[n],o={};for(var s in t)!t.hasOwnProperty(s)||Array.isArray(t)&&s>=0&&s<t.length||(o[s]=t[s]);if(r&&r.outer.length>=3)if(o.inner=r.inner.filter((function(t){return t.length>=3})),o.outer=i.rdpLineSimplify(r.outer,e,!0,o.inner),o.outer.length>=3){var u=o.inner.slice();o.inner.map((function(t,n){u[n]=o.outer;var r=i.rdpLineSimplify(t,e,!0,u);return u[n]=r,r})).filter((function(t){return t.length>=3})),o.outer=a.transformCoordinates(l,c,o.outer),o.inner=o.inner.map((function(t){return a.transformCoordinates(l,c,t)}))}else o.outer=o.inner=[];else o.outer=[];return o})),o?t:(u.style("position",i.identityFunction),u.style("polygon",i.identityFunction),u.data(t),u)},this.mouseOverOrderClosestBorder=function(t){var e=t.feature.data(),n=t.feature.layer().map(),r=a.transformCoordinates(n.ingcs(),t.feature.gcs(),t.mouse.geo),o=t.feature.polygonCoordinates(),s={};t.over.index.forEach((function(t,e){var n,a=o[t];a.outer.forEach((function(t,e){var o=a.outer[(e+1)%a.outer.length],s=i.distance2dToLineSquared(r,t,o);(void 0===n||s<n)&&(n=s)})),a.inner.forEach((function(t){t.forEach((function(e,o){var a=t[(o+1)%t.length],s=i.distance2dToLineSquared(r,e,a);(void 0===n||s<n)&&(n=s)}))})),s[t]=n})),t.over.index.sort((function(t,e){return s[t]-s[e]})).reverse(),t.over.index.forEach((function(n,r){t.over.found[r]=e[n]}))},this.toPolygonList=function(t){var e=u.style.get("polygon"),n=u.style.get("position");return u.data().map((function(t,r){var i=e(t,r),o=i.outer||(Array.isArray(i)?i:[]);if(o.length<3)return[];var a=[o.map((function(e,i){var o=n(e,i,t,r);return[o.x,o.y]}))];return i.inner&&i.inner.forEach((function(e){a.push(e.map((function(e,i){var o=n(e,i,t,r);return[o.x,o.y]})))})),a}))},this.fromPolygonList=function(t,e){return u.style({position:function(t){return{x:t[0],y:t[1]}},polygon:function(t){return{outer:t[0],inner:t.slice(1)}}}),u.data(t),u},this._exit=function(){e&&u.layer()&&(u.layer().deleteFeature(e),e=null,u.dependentFeatures([])),c()},this._init=function(t){t=t||{},l.call(u,t);var e=r.extend({},{fill:!0,fillColor:{r:0,g:.5,b:.5},fillOpacity:1,stroke:!1,strokeWidth:1,strokeStyle:"solid",strokeColor:{r:0,g:1,b:1},strokeOpacity:1,polygon:i.identityFunction,position:function(t){return Array.isArray(t)?{x:t[0],y:t[1],z:t[2]||0}:t},origin:function(t){for(var e=0;e<t.length;e+=1)if(t[e].vertices.length>=3)return t[e].vertices.slice(0,3);return[0,0,0]}},void 0===t.style?{}:t.style);void 0!==t.polygon&&(e.polygon=t.polygon),void 0!==t.position&&(e.position=t.position),u.style(e),u._checkForStroke()},this};s.create=function(t,e){"use strict";return(e=e||{}).type="polygon",o.create(t,e)},s.capabilities={feature:"polygon"},i(s,o),t.exports=s},3842:function(t,e,n){var r=n(5616),i=n(4626),o=n(1275),a=function(t){"use strict";var e=n(5325),i=n(642);if(!(this instanceof a))return new a(t);t=t||{},o.call(this,t);var s,u,l=this,c=this._init,f=t.nearestPixel,h=0,d=[],p=[];return this.featureType="quad",this._objectListStart=function(t){r.each(t,(function(t,e){e.used=!1}))},this._objectListGet=function(t,e){for(var n=0;n<t.length;n+=1)if(t[n].entry===e)return t[n].used=!0,t[n].value},this._objectListAdd=function(t,e,n){t.push({entry:e,value:n,used:!0})},this._objectListEnd=function(t){for(var e=t.length-1;e>=0;e-=1)t[e].used||t.splice(e,1)},this.pointSearch=function(t,n){var o,a,s=[],c=[],f={},h=[{},{},{},{}],d=[{},{},{},{}],p=[0,1,2,0],m=[1,2,3,1],g=l.data(),y=l.layer().map();return n=null===n?y.gcs():void 0===n?y.ingcs():n,t=e.transformCoordinates(n,y.gcs(),t),u||l._generateQuads(),r.each([u.clrQuads,u.imgQuads,u.vidQuads],(function(e,n){n.forEach((function(e,n){for(o=0;o<p.length;o+=1)h[o].x=e.pos[3*p[o]],h[o].y=e.pos[3*p[o]+1],h[o].z=e.pos[3*p[o]+2],d[o].x=e.pos[3*m[o]],d[o].y=e.pos[3*m[o]+1],d[o].z=e.pos[3*m[o]+2];(i.pointInPolygon(t,h)||i.pointInPolygon(t,d))&&(c.push(e.idx),s.push(g[e.idx]),!(a=i.pointToTriangleBasis2d(t,h[0],h[1],h[2]))||a.x+a.y>1?(a=i.pointToTriangleBasis2d(t,d[2],d[1],d[0]))&&(a.x=1-a.x):a.y=1-a.y,a&&(f[e.idx]={basis:a,_quad:e}))}))})),{index:c,found:s,extra:f}},this.position=function(t){return void 0===t?l.style("position"):(l.style("position",i.ensureFunction(t)),l.dataTime().modified(),l.modified(),l)},this._positionToQuad=function(t,n,i,o){var a=t.call(l,i,o);if(a.ll&&a.ur||a.ul&&a.lr){var s=l.gcs(),u=l.layer().map().gcs(),c={};return r.each(["ll","lr","ul","ur"],(function(t,r){void 0!==a[r]&&(c[r]={},void 0===a[r].x?c[r]=[a[r][0],a[r][1],a[r][2]]:c[r]=[a[r].x,a[r].y,a[r].z],void 0===c[r][2]&&(c[r][2]=n.call(l,i,o)),s!==u&&!1!==s&&(c[r]=e.transformCoordinates(s,u,c[r])))})),c.ll=c.ll||[c.ul[0],c.lr[1],(c.ul[2]+c.lr[2])/2],c.lr=c.lr||[c.ur[0],c.ll[1],(c.ur[2]+c.ll[2])/2],c.ur=c.ur||[c.lr[0],c.ul[1],(c.lr[2]+c.ul[2])/2],c.ul=c.ul||[c.ll[0],c.ur[1],(c.ll[2]+c.ur[2])/2],c}},this._checkQuadUpdate=function(t,e){},this._generateQuads=function(){var t,e,n=l.position(),o=l.style.get("image"),a=l.style.get("video"),c=l.style.get("delayRenderWhenSeeking"),f=l.style.get("color"),m=l.style.get("depth"),g=l.style.get("opacity"),y=l.style.get("drawOnAsyncResourceLoaded"),v=l.style.get("previewColor"),x=l.style.get("previewImage"),_=l.data(),b=[],w=[],M=[],A=[0,0,0];return l._objectListStart(d),l._objectListStart(p),r.each(_,(function(u,_){if(_._cachedQuad)return e=_._cachedQuad.diag2,(void 0===t||_._cachedQuad.diag2&&_._cachedQuad.diag2<t)&&(A=_._cachedQuad.ll,t=_._cachedQuad.diag2),_._cachedQuad.clrquad&&b.push(_._cachedQuad.clrquad),_._cachedQuad.imgquad&&(_._cachedQuad.imageEntry&&l._objectListGet(d,_._cachedQuad.imageEntry),w.push(_._cachedQuad.imgquad)),void(_._cachedQuad.vidquad&&(_._cachedQuad.videoEntry&&l._objectListGet(p,_._cachedQuad.videoEntry),M.push(_._cachedQuad.vidquad)));var T,E,C,k,S,P,O,R,L,I,D,N,F={};if(O=l._positionToQuad(n,m,_,u),I=g.call(l,_,u),void 0!==O&&I&&!(I<0)){if(e=Math.pow(O.ll[0]-O.ur[0],2)+Math.pow(O.ll[1]-O.ur[1],2)+Math.pow(O.ll[2]-O.ur[0],2)+Math.pow(O.lr[0]-O.ur[0],2)+Math.pow(O.lr[1]-O.ur[1],2)+Math.pow(O.lr[2]-O.ur[0],2),F.diag2=e,F.ll=O.ll,(void 0===t||e&&e<t)&&(A=O.ll,t=e),O=[O.ll[0],O.ll[1],O.ll[2],O.lr[0],O.lr[1],O.lr[2],O.ul[0],O.ul[1],O.ul[2],O.ur[0],O.ur[1],O.ur[2]],T={idx:u,pos:O,opacity:I,zOffset:_.zOffset},_.reference&&(T.reference=_.reference),_.crop&&(T.crop=_.crop),L=(R=o.call(l,_,u))?null:a.call(l,_,u),R){if(F.imageEntry=R,void 0===(E=l._objectListGet(d,R))&&(R instanceof Image||R instanceof HTMLCanvasElement?E=R:(E=new Image).src=R,l._objectListAdd(d,R,E)),i.isReadyImage(E)||E instanceof HTMLCanvasElement)T.image=E;else if(D=void 0,(N=x.call(l,_,u))&&i.isReadyImage(N)?T.image=N:(D=v.call(l,_,u),T.color=i.convertColor(D),T.color&&void 0!==T.color.r&&void 0!==T.color.g&&void 0!==T.color.b?(b.push(T),F.clrquad=T):D=void 0),y.call(l,_,u))P=i.isReadyImage(E,!0)?null:r.Deferred(),k=E.onload,E.onload=function(){if(void 0!==D&&(r.inArray(T,b)>=0&&b.splice(r.inArray(T,b),1),delete F.clrquad),T.image=E,l.dataTime().modified(),l.modified(),l._update(),l.layer().draw(),P&&P.resolve(),k)return k.apply(l,arguments)},S=E.onerror,E.onerror=function(){if(P&&P.reject(),S)return S.apply(l,arguments)},P&&l.layer().addPromise(P.promise());else if(void 0===D&&!T.image)return;w.push(T),F.imgquad=T}else if(L){if(F.videoEntry=L,void 0===(C=l._objectListGet(p,L))&&(L instanceof HTMLVideoElement?C=L:(C=document.createElement("video")).src=L,l._objectListAdd(p,L,C),r(C).off(".geojsvideo").on("seeking.geojsvideo canplay.geojsvideo pause.geojsvideo playing.geojsvideo",(function(t){l._checkQuadUpdate(T,t)}))),T.delayRenderWhenSeeking=c.call(l,_,u),void 0===T.delayRenderWhenSeeking&&(T.delayRenderWhenSeeking=!0),i.isReadyVideo(C))T.video=C;else if(D=v.call(l,_,u),T.color=i.convertColor(D),T.color&&void 0!==T.color.r&&void 0!==T.color.g&&void 0!==T.color.b?(b.push(T),F.clrquad=T):D=void 0,y.call(l,_,u))P=i.isReadyVideo(C,!0)?null:r.Deferred(),k=C.onloadeddata,C.onloadeddata=function(){if(void 0!==D&&(r.inArray(T,b)>=0&&b.splice(r.inArray(T,b),1),delete F.clrquad),T.video=C,l.dataTime().modified(),l.modified(),l._update(),l.layer().draw(),P&&P.resolve(),k)return k.apply(l,arguments)},S=C.onerror,C.onerror=function(){if(P&&P.reject(),S)return S.apply(l,arguments)},P&&l.layer().addPromise(P.promise());else if(void 0===D&&!T.video)return;M.push(T),F.vidquad=T}else{if(T.color=i.convertColor(f.call(l,_,u)),!T.color||void 0===T.color.r||void 0===T.color.g||void 0===T.color.b)return;b.push(T),F.clrquad=T}F.clrquad&&(h+=1,F.clrquad.quadId=h),F.imgquad&&(h+=1,F.imgquad.quadId=h),F.vidquad&&(h+=1,F.vidquad.quadId=h),!1!==s&&(_._cachedQuad=F)}})),l._objectListEnd(d),l._objectListEnd(p),u={clrQuads:b,imgQuads:w,vidQuads:M,origin:new Float32Array(A)}},this.cacheUpdate=function(t){return null==t?r.each(l.data(),(function(t,e){e._cachedQuad&&delete e._cachedQuad})):(isFinite(t)&&(t=l.data()[t]),t._cachedQuad&&delete t._cachedQuad),l.modified(),l},this.video=function(t){var e,n;return isFinite(t)&&(t=l.data()[t]),t._cachedQuad?e=(t._cachedQuad.vidquad||{}).video:(u||l._generateQuads(),(n=l.data().indexOf(t))>=0&&(e=l._objectListGet(p,l.style.get("video")(t,n)))),e instanceof HTMLVideoElement?e:null},this.nearestPixel=function(t){return void 0===t?f:(f=t,l.modified(),l)},this._init=function(t){t=t||{},c.call(l,t),s=!1!==t.cacheQuads;var e=r.extend({},{color:{r:1,g:1,b:1},opacity:1,depth:0,drawOnAsyncResourceLoaded:!0,previewColor:null,previewImage:null,image:function(t){return t.image},video:function(t){return t.video},position:i.identityFunction},void 0===t.style?{}:t.style);void 0!==t.position&&(e.position=i.ensureFunction(t.position)),l.style(e),l.dataTime().modified()},l};a.create=function(t,e){"use strict";return(e=e||{}).type="quad",o.create(t,e)},a.capabilities={color:"quad.color",image:"quad.image",imageCrop:"quad.imageCrop",imageFixedScale:"quad.imageFixedScale",imageFull:"quad.imageFull",canvas:"quad.canvas",video:"quad.video"},i(a,o),t.exports=a},1098:function(t,e,n){var r=n(5616),i=n(8695),o={dom:{}},a={},s={},u={},l={},c={},f={},h={},d={},p={registerFileReader:function(t,e){f[t]=e},createFileReader:function(t,e){return f.hasOwnProperty(t)?f[t](e):null},registerRenderer:function(t,e){u[t]=e},createRenderer:function(t,e,n,r){if(u.hasOwnProperty(t)){var i=u[t]({layer:e,canvas:n,options:r});return i._init(),i}return null},checkRenderer:function(t,e){if(null===t)return t;if(u.hasOwnProperty(t)){var n=u[t];if(!n.supported||n.supported())return n.apiname||t;if(!n.fallback||e)return!1;var r=p.checkRenderer(n.fallback(),!0);return!1!==r&&console.warn(t+" renderer is unavailable, using "+r+" renderer instead"),r}return!1},rendererForFeatures:function(t){var e,n,r,i,o,a,s=["webgl","canvas","svg","vtkjs",null];for(n=0;n<s.length;n+=1)if(e=s[n],!1!==p.checkRenderer(e,!0)){if(!t)return e;if(l[e]){for(a=!0,i=0;i<t.length;i+=1){if(o=null,(r=t[i]).indexOf(".")>=0&&(o=r,r=r.substr(0,r.indexOf("."))),void 0===l[e][r]){a=!1;break}if(o&&c[e][r]&&!c[e][r][o]){a=!1;break}}if(a)return e}}return console.warn('There is no renderer available for the feature list "'+(t||[]).join(", ")+'".'),!1},registerFeature:function(t,e,n,r){t in l||(l[t]={},c[t]={});var i=l[t][e];return i&&console.warn("The "+t+"."+e+" feature is already registered"),l[t][e]=n,c[t][e]=r,i},createFeature:function(t,e,n,i){var o=n.api(),a={layer:e,renderer:n};if(o in l&&t in l[o]){void 0!==i&&r.extend(!0,a,i);var s=l[o][t](a);return void 0===e.gcs&&(e.gcs=function(){return e.map().gcs()}),s}return null},registerLayerAdjustment:function(t,e,n){t in h||(h[t]={});var r=h[t][e];return r&&console.warn("The "+t+"."+e+" layer adjustment is already registered"),h[t][e]=n,r},adjustLayerForRenderer:function(t,e){var n=e.rendererName();n&&h&&h[n]&&h[n][t]&&h[n][t].apply(e)},registerLayer:function(t,e,n){a[t]=e,s[t]=n},createLayer:function(t,e,n){var i={map:e},o=null;if(t in a){if(n.renderer||n.features||!s||(i.features=s[t]),void 0!==n){var u=n.data;delete n.data,r.extend(!0,i,n),u&&(i.data=u)}return(o=a[t](i)).layerName=t,o._init(),o}return null},registerWidget:function(t,e,n){t in o||(o[t]={});var r=o[t][e];return r&&console.warn("The "+t+"."+e+" widget is already registered"),o[t][e]=n,r},createWidget:function(t,e,n){var i={layer:e};if(t in o.dom)return void 0!==n&&r.extend(!0,i,n),o.dom[t](i);throw new Error("Cannot create unknown widget "+t)},registerAnnotation:function(t,e,n){var r=d[t];return r&&console.warn("The "+t+" annotation is already registered"),d[t]={func:e,features:n||{}},i["annotation_"+t]="geo_annotation_"+t,r},createAnnotation:function(t,e){if(d[t])return d[t].func(e);console.warn("The "+t+" annotation is not registered")},listAnnotations:function(){return Object.keys(d)},featuresForAnnotations:function(t){var e=[];return(Array.isArray(t)?t:Object.keys(t)).forEach((function(n){d[n]&&Object.keys(d[n].features).forEach((function(i){Array.isArray(t)||!0===t[n]||!Array.isArray(d[n].features[i])?e.push(i):t[n].forEach((function(t){r.inArray(t,d[n].features[i])>=0&&e.push(i)}))}))})),e},rendererForAnnotations:function(t){return p.rendererForFeatures(p.featuresForAnnotations(t))}};p.registries={annotations:d,features:l,featureCapabilities:c,fileReaders:f,layers:a,renderers:u,widgets:o},t.exports=p},2274:function(t,e,n){var r=n(4626),i=n(1338),o=function(t){"use strict";if(!(this instanceof o))return new o(t);i.call(this);var e=this,n=0,r=0,a=void 0===(t=t||{}).layer?null:t.layer,s=void 0===t.canvas?null:t.canvas,u=!1;return this.layer=function(){return a},this.canvas=function(t){return void 0===t?s:(s=t,e.modified(),e)},this.map=function(){return a?a.map():null},this.initialized=function(t){return void 0===t?u:(u=t,e)},this.api=function(){throw new Error("Should be implemented by derived classes")},this.width=function(){return n},this.height=function(){return r},this._setWidthHeight=function(t,i){return n=t,r=i,e},this._init=function(){return e},this._resize=function(t,n,r,i){return e._setWidthHeight(r,i),e},this._render=function(){return e},this};r(o,i),t.exports=o},5402:function(t,e,n){var r=n(4626),i=n(1338),o=function(t){"use strict";if(!(this instanceof o))return new o;i.call(this,t);var e=this,n=null,r=[],a=this._exit,s=this.geoTrigger,u=this.addPromise,l=this.removePromise;return this.addPromise=function(t){return n&&n.addPromise(t),u(t),e},this.removePromise=function(t){return n&&n.removePromise(t),l(t),e},this.parent=function(t){return void 0===t?n:(n=t,e)},this.addChild=function(t){return Array.isArray(t)?(t.forEach(e.addChild),e):(t.parent(e),r.push(t),e)},this.removeChild=function(t){return Array.isArray(t)?(t.forEach(e.removeChild),e):(r=r.filter((function(e){return e!==t})),e)},this.children=function(){return r.slice()},this.draw=function(t){return e.children().forEach((function(e){e.draw(t)})),e},this.geoTrigger=function(t,i,o){var a;return a=(i=i||{}).geo||{},i.geo=a,a.stopPropagation?e:!o&&n&&a._triggeredBy!==n?(a._triggeredBy=e,n.geoTrigger(t,i),e):(s.call(e,t,i),a.stopPropagation||r.forEach((function(n){n.geoTrigger&&(a._triggeredBy=e,n.geoTrigger(t,i))})),e)},this._exit=function(){r=[],n=null,a()},this};r(o,i),t.exports=o},9079:function(t){t.exports="0bc9829fde2b4ecbbfe2bcc33542fc83c537899b"},3832:function(t,e,n){var r=n(4626),i=n(1098).registerFeature,o=n(3187),a=function(t){"use strict";var e=this;return this instanceof a?(o.call(this,t),this.select=function(){var t=e.renderer(),n={},r=e.nodeFeature(),i=e.linkFeatures();return n.nodes=t.select(r._svgid()),n.links=i.map((function(e){return t.select(e._svgid())})),n},this):new a(t)};r(a,o),i("svg","graph",a),t.exports=a},6488:function(t,e,n){n(6409).svg={rescale:n(4765)},t.exports={graphFeature:n(3832),lineFeature:n(9456),object:n(5005),pathFeature:n(9927),pointFeature:n(2602),quadFeature:n(4087),renderer:n(2493),tileLayer:n(4061),trackFeature:n(2037),uniqueID:n(7376),vectorFeature:n(5747)}},9456:function(t,e,n){var r=n(4626),i=n(1098).registerFeature,o=n(9281),a=function(t){"use strict";if(!(this instanceof a))return new a(t);var e=n(2493).d3,r=n(5005),i=n(77),s=n(642);t=t||{},o.call(this,t),r.call(this);var u=this,l=this._init,c=i(),f=0,h=this._update;return this._init=function(t){return l.call(u,t),u},this._build=function(){var t,n,r=u.data()||[],i=u.style(),o=u.renderer(),a=u.position();for(h.call(u),i.fill=function(){return!1},r.forEach((function(n,r){var l,c,f=u.line()(n,r),h={};function d(t){return s.isFunction(t)?function(){return t(f[0],0,n,r)}:t}for(c in i)i.hasOwnProperty(c)&&(h[c]=d(i[c]));t=e.line().x((function(t){return u.featureGcsToDisplay(t).x})).y((function(t){return u.featureGcsToDisplay(t).y})).curve(u.style.get("closed")(n,r)&&f.length>2?e.curveLinearClosed:e.curveLinear),l={data:[f.map((function(t,e){return a(t,e,n,r)}))],append:"path",attributes:{d:t},id:u._svgid()+r,classes:["svgLineFeature","svgSubLine-"+r],visible:u.visible,style:h},o._drawFeatures(l)})),n=r.length;n<f;n+=1)o._removeFeature(u._svgid()+n);return f=r.length,c.modified(),u.updateTime().modified(),u},this._update=function(){return h.call(u),u.timestamp()>=c.timestamp()&&u._build(),u},this._init(t),this};r(a,o);var s={};s[o.capabilities.basic]=!0,s[o.capabilities.multicolor]=!1,i("svg","line",a,s),t.exports=a},5005:function(t,e,n){var r=function(t){"use strict";var e=n(1338),i=n(7376);if(!(this instanceof e))return new r(t);var o="svg-"+i(),a=this._exit,s=this,u=this.draw;return this._svgid=function(){return o},this.select=function(){return s.renderer().select(s._svgid())},this.draw=function(){return s.ready&&(s._update(),u()),s},this._exit=function(){s.renderer()._removeFeature(s._svgid()),a()},this};t.exports=r},9927:function(t,e,n){var r=n(4626),i=n(1098).registerFeature,o=n(2266),a=function(t){"use strict";if(!(this instanceof a))return new a(t);var e=n(5616),r=n(5005),i=n(77);t=t||{},o.call(this,t),r.call(this);var s=this,u=i(),l=this._update,c={style:{}};return this._build=function(){var t,n,r=s.data()||[],i=s.style.get(),o=s.style.get("position");return l.call(s),n=function(t){return"M"+t.source.x+","+t.source.y+"C"+t.source.x+","+(t.source.y+t.target.y)/2+" "+t.target.x+","+(t.source.y+t.target.y)/2+" "+t.target.x+","+t.target.y},t=[],r.forEach((function(e,n){var i,a;n<r.length-1&&(i=o(e,n),a=o(r[n+1],n+1),t.push({source:s.featureGcsToDisplay(i),target:s.featureGcsToDisplay(a)}))})),c.data=t,c.attributes={d:n},c.id=s._svgid(),c.append="path",c.classes=["svgPathFeature"],c.style=e.extend({fill:function(){return!1},fillColor:{r:0,g:0,b:0}},i),c.visible=s.visible,s.renderer()._drawFeatures(c),u.modified(),s.updateTime().modified(),s},this._update=function(){return l.call(s),s.dataTime().timestamp()>=u.timestamp()&&s._build(),s},this._init(t),this};r(a,o),i("svg","path",a),t.exports=a},2602:function(t,e,n){var r=n(4626),i=n(1098).registerFeature,o=n(7541),a=function(t){"use strict";if(!(this instanceof a))return new a(t);var e=n(5005),r=n(77);t=t||{},o.call(this,t),e.call(this);var i=this,s=this._init,u=this._update,l=r(),c={};return this._init=function(t){return s.call(i,t),i},this._build=function(){var t=i.data(),e=i.style.get(),n=i.renderer(),r=i.position();return u.call(i),t||(t=[]),c.id=i._svgid(),c.data=t,c.append="circle",c.attributes={r:n._convertScale(e.radius),cx:function(t){return i.featureGcsToDisplay(r(t)).x},cy:function(t){return i.featureGcsToDisplay(r(t)).y}},c.style=e,c.classes=["svgPointFeature"],c.visible=i.visible,i.renderer()._drawFeatures(c),l.modified(),i.updateTime().modified(),i},this._update=function(){return u.call(i),i.timestamp()>=l.timestamp()&&i._build(),i},this._init(t),this};r(a,o);var s={};s[o.capabilities.stroke]=!0,i("svg","point",a,s),t.exports=a},4087:function(t,e,n){var r=n(4626),i=n(1098).registerFeature,o=n(3842),a=function(t){"use strict";if(!(this instanceof a))return new a(t);var e=n(5616),r=n(2493).d3,i=n(5005);o.call(this,t),i.call(this);var s,u=this,l=this._exit,c=this._init,f=this._update;return this._build=function(){if(this.position()){var t=u.renderer(),n=t.layer().map();s=u._generateQuads();var i=[];e.each(s.clrQuads,(function(t,e){i.push({type:"clr",quad:e,zIndex:e.pos[2]})})),e.each(s.imgQuads,(function(t,e){e.image&&i.push({type:"img",quad:e,zIndex:e.pos[2]})}));var o={id:u._svgid(),data:i,dataIndex:function(t){return t.quad.quadId},append:function(t){var e=this.namespaceURI,n="clr"===t.type?"polygon":"image";return e?document.createElementNS(e,n):document.createElement(n)},attributes:{fill:function(t){if("clr"===t.type)return r.rgb(255*t.quad.color.r,255*t.quad.color.g,255*t.quad.color.b);1!==t.quad.opacity&&r.select(this).style("opacity",t.quad.opacity)},height:function(t){return"clr"===t.type?void 0:1},points:function(e){if("clr"===e.type&&!e.points){var r,i=[];for(r=0;r<e.quad.pos.length;r+=3){var o={x:e.quad.pos[r],y:e.quad.pos[r+1],z:e.quad.pos[r+2]};o=n.gcsToDisplay(o,null),o=t.baseToLocal(o),i.push(o.x+","+o.y)}e.points=i[0]+" "+i[1]+" "+i[3]+" "+i[2]}return"clr"===e.type?e.points:void 0},preserveAspectRatio:function(t){return"clr"===t.type?void 0:"none"},reference:function(t){return t.quad.reference},stroke:!1,transform:function(e){if("img"===e.type&&e.quad.image&&!e.svgTransform){var r,i,o,a,s=[],u=-1,l=e.quad.image.width,c=e.quad.image.height;for(o=0;o<e.quad.pos.length;o+=3){var f={x:e.quad.pos[o],y:e.quad.pos[o+1],z:e.quad.pos[o+2]};f=n.gcsToDisplay(f,null),f=t.baseToLocal(f),s.push(f)}for(o=0;o<4;o+=1)(r=Math.abs(s[(o+1)%4].x*(s[(o+2)%4].y-s[(o+3)%4].y)+s[(o+2)%4].x*(s[(o+3)%4].y-s[(o+1)%4].y)+s[(o+3)%4].x*(s[(o+1)%4].y-s[(o+2)%4].y))/2)>u&&(u=r,i=o);e.svgTransform=[3===i||2===i?s[1].x-s[0].x:s[3].x-s[2].x,3===i||2===i?s[1].y-s[0].y:s[3].y-s[2].y,0===i||2===i?s[1].x-s[3].x:s[0].x-s[2].x,0===i||2===i?s[1].y-s[3].y:s[0].y-s[2].y,2===i?s[3].x+s[0].x-s[1].x:s[2].x,2===i?s[3].y+s[0].y-s[1].y:s[2].y],Math.abs(e.svgTransform[1]/l)<1e-6&&Math.abs(e.svgTransform[2]/c)<1e-6&&(a=e.svgTransform[0]/l,e.svgTransform[4]=Math.round(e.svgTransform[4]/a)*a,a=e.svgTransform[3]/c,e.svgTransform[5]=Math.round(e.svgTransform[5]/a)*a)}return"img"===e.type&&e.quad.image?"matrix("+e.svgTransform.join(" ")+")":void 0},width:function(t){return"clr"===t.type?void 0:1},x:function(t){return"clr"===t.type?void 0:0},"xlink:href":function(t){return"clr"!==t.type&&t.quad.image?t.quad.image.src:void 0},y:function(t){return"clr"===t.type?void 0:0}},style:{fillOpacity:function(t){return"clr"===t.type?t.quad.opacity:void 0}},onlyRenderNew:!this.style("previewColor")&&!this.style("previewImage"),sortByZ:!0,visible:u.visible,classes:["svgQuadFeature"]};t._drawFeatures(o),u.buildTime().modified()}},this._update=function(){return f.call(u),(u.buildTime().timestamp()<=u.dataTime().timestamp()||u.buildTime().timestamp()<u.timestamp())&&u._build(),u},this._init=function(){c.call(u,t)},this._exit=function(){l.call(u)},u._init(t),this};r(a,o);var s={};s[o.capabilities.color]=!0,s[o.capabilities.image]=!0,s[o.capabilities.imageCrop]=!1,s[o.capabilities.imageFixedScale]=!1,s[o.capabilities.imageFull]=!1,s[o.capabilities.canvas]=!1,s[o.capabilities.video]=!1,i("svg","quad",a,s),t.exports=a},4765:function(t){t.exports="geo_svg_rescale"},2493:function(t,e,n){var r=n(4626),i=n(1098).registerRenderer,o=n(2274),a=function(t){"use strict";var e=a.d3,r=n(5005),i=n(642),s=n(6409),u=n(4765);if(!(this instanceof a))return new a(t);o.call(this,t);var l=this._exit;r.call(this,t),t=t||{};var c=this,f=null,h={},d=null,p=null,m=1,g={dx:0,dy:0,rx:0,ry:0,rotation:0},y={},v={},x=null,_=null;function b(t){return t?x.select(".group-"+t):x.select(".group-"+c._svgid())}function w(){var t=c.layer().map(),e=t.size().width,n=t.size().height;if(!e||!n)throw new Error("Map layer has size 0");c._setWidthHeight(e,n),p=Math.pow(e*e+n*n,.5),d={upperLeft:t.displayToGcs({x:0,y:0},null),lowerRight:t.displayToGcs({x:e,y:n},null),center:t.displayToGcs({x:e/2,y:n/2},null)}}return this._convertColor=function(t,n){return t=i.ensureFunction(t),n=n||function(){return!0},function(){var r="none";return n.apply(c,arguments)&&(r=t.apply(c,arguments)).hasOwnProperty("r")&&r.hasOwnProperty("g")&&r.hasOwnProperty("b")&&(r=e.rgb(255*r.r,255*r.g,255*r.b)),r}},this._convertScale=function(t){return t=i.ensureFunction(t),function(){return t.apply(c,arguments)/m}},this._setTransform=function(){if(d||w(),f){var t,e,n,r,i,o,a=c.layer().map(),s=a.gcsToDisplay(d.upperLeft,null),u=a.gcsToDisplay(d.lowerRight,null),l=a.gcsToDisplay(d.center,null),h=b();n=Math.sqrt(Math.pow(u.y-s.y,2)+Math.pow(u.x-s.x,2))/p,r=a.rotation(),i=-c.width()/2,o=-c.height()/2,t=n*i+l.x,e=n*o+l.y,r||(t=Math.round(t),e=Math.round(e));var y="matrix("+[n,0,0,n,t,e].join()+")";r&&(y+=" rotate("+[180*r/Math.PI,-i,-o].join()+")"),h.attr("transform",y),m=n,g.dx=t,g.dy=e,g.rx=i,g.ry=o,g.rotation=r}},this.baseToLocal=function(t){if(t={x:(t.x-g.dx)/m,y:(t.y-g.dy)/m},g.rotation){var e=Math.sin(-g.rotation),n=Math.cos(-g.rotation),r=t.x+g.rx,i=t.y+g.ry;t={x:r*n-i*e-g.rx,y:r*e+i*n-g.ry}}return t},this.localToBase=function(t){if(g.rotation){var e=Math.sin(g.rotation),n=Math.cos(g.rotation),r=t.x+g.rx,i=t.y+g.ry;t={x:r*n-i*e-g.rx,y:r*e+i*n-g.ry}}return t={x:t.x*m+g.dx,y:t.y*m+g.dy}},this._init=function(t){if(!c.canvas()){var n;t.widget=t.widget||!1,(x="d3Parent"in t?e.select(t.d3Parent).append("svg"):e.select(c.layer().node().get(0)).append("svg")).attr("display","block");var r=(_=x.append("defs")).append("filter").attr("id","geo-highlight").attr("x","-100%").attr("y","-100%").attr("width","300%").attr("height","300%");r.append("feMorphology").attr("operator","dilate").attr("radius",2).attr("in","SourceAlpha").attr("result","dilateOut"),r.append("feGaussianBlur").attr("stdDeviation",5).attr("in","dilateOut").attr("result","blurOut"),r.append("feColorMatrix").attr("type","matrix").attr("values","-1 0 0 0 1  0 -1 0 0 1  0 0 -1 0 1  0 0 0 1 0").attr("in","blurOut").attr("result","invertOut"),r.append("feBlend").attr("in","SourceGraphic").attr("in2","invertOut").attr("mode","normal"),t.widget||(n=t.canvas||x.append("g")),(r=_.append("filter").attr("id","geo-blur").attr("x","-100%").attr("y","-100%").attr("width","300%").attr("height","300%")).append("feGaussianBlur").attr("stdDeviation",20).attr("in","SourceGraphic"),f=c.layer().sticky(),x.attr("class",c._svgid()),x.attr("width",c.layer().node().width()),x.attr("height",c.layer().node().height()),t.widget?c.canvas(x):(n.attr("class","group-"+c._svgid()),c.canvas(n))}return c._setTransform(),c},this.api=function(){return a.apiname},this.scaleFactor=function(){return m},this._resize=function(t,e,n,r){return d||w(),x.attr("width",n),x.attr("height",r),c._setTransform(),c._setWidthHeight(n,r),c.layer().geoTrigger(u,{scale:m},!0),c},this._exit=function(){h={},c.canvas().remove(),x.remove(),x=void 0,_.remove(),_=void 0,y={},v={},l()},this._definitions=function(){return _},this._drawFeatures=function(t){return h[t.id]={data:t.data,index:t.dataIndex,style:t.style,visible:t.visible,attributes:t.attributes,classes:t.classes,append:t.append,onlyRenderNew:t.onlyRenderNew,sortByZ:t.sortByZ,parentId:t.parentId},c.__render(t.id,t.parentId)},this.__render=function(t,e){var n;if(void 0===t){for(n in h)h.hasOwnProperty(n)&&c.__render(n);return c}return e?c._renderFeature(t,e):(y[t]=!0,c.layer().map().scheduleAnimationFrame(c._renderFrame)),c},this._renderFrame=function(){var t;for(t in v)c.select(t).remove(),_.selectAll("."+t).remove();v={};var e=y;for(t in y={},e)e.hasOwnProperty(t)&&c._renderFeature(t)},this._renderFeature=function(t,e){if(!h[t])return c;var n,r,i=h[t].data,o=h[t].index,a=h[t].style,s=h[t].visible,u=h[t].attributes,l=h[t].classes,f=h[t].append,d=c.select(t,e).data(i,o);return n=d.enter().append(f),d.exit().remove(),function(t,e){var n;for(n in e)e.hasOwnProperty(n)&&t.attr(n,e[n])}(r=n,u),r.attr("class",l.concat([t]).join(" ")),function(t,e){var n,r,i;function o(){return e.fill.apply(c,arguments)?null:"none"}function a(){return e.stroke.apply(c,arguments)?null:"none"}for(n in e)e.hasOwnProperty(n)&&(i=null,r=null,"strokeColor"===n?(r="stroke",i=c._convertColor(e[n],e.stroke)):"stroke"===n&&e[n]&&!e.hasOwnProperty("strokeColor")?(r="stroke",i=a):"strokeWidth"===n?(r="stroke-width",i=c._convertScale(e[n])):"strokeOpacity"===n?(r="stroke-opacity",i=e[n]):"fillColor"===n?(r="fill",i=c._convertColor(e[n],e.fill)):"fill"!==n||e.hasOwnProperty("fillColor")?"fillOpacity"===n?(r="fill-opacity",i=e[n]):"lineCap"===n?(r="stroke-linecap",i=e[n]):"lineJoin"===n?(r="stroke-linejoin",i=e[n]):"miterLimit"===n&&(r="stroke-miterlimit",i=e[n]):(r="fill",i=o),r&&t.style(r,i))}(r,a),s&&r.style("visibility",s()?"visible":"hidden"),n.size()&&h[t].sortByZ&&d.sort((function(t,e){return(t.zIndex||0)-(e.zIndex||0)})),c},this.select=function(t,e){return b(e).selectAll("."+t)},this._removeFeature=function(t){return v[t]=!0,c.layer().map().scheduleAnimationFrame(c._renderFrame),delete h[t],y[t]&&delete y[t],c},this.draw=function(){},this.layer().geoOn(s.pan,c._setTransform),this.layer().geoOn(s.rotate,c._setTransform),this.layer().geoOn(s.zoom,(function(){c._setTransform(),c.__render(),c.layer().geoTrigger(u,{scale:m},!0)})),this.layer().geoOn(s.resize,(function(t){c._resize(t.x,t.y,t.width,t.height)})),this._init(t),this};a.apiname="svg",r(a,o),i("svg",a),i("d3",a),a.supported=function(){delete a.d3;try{a.d3=n(5127),a.d3&&a.d3.rgb||(a.d3=void 0)}catch(t){}return void 0!==a.d3},a.fallback=function(){return null},a.supported(),t.exports=a},4061:function(t,e,n){var r=function(){"use strict";var t,e=this,n=this._init,r=this._exit,i=this._update,o=0,a=[];this._drawTile=function(n){if(t){var r=e._tileBounds(n),i=n.index.level||0,s=e._tileOffset(i),u={};u.ul=e.fromLocal(e.fromLevel({x:r.left-s.x,y:r.top-s.y},i),0),u.ll=e.fromLocal(e.fromLevel({x:r.left-s.x,y:r.bottom-s.y},i),0),u.ur=e.fromLocal(e.fromLevel({x:r.right-s.x,y:r.top-s.y},i),0),u.lr=e.fromLocal(e.fromLevel({x:r.right-s.x,y:r.bottom-s.y},i),0),u.ul.z=u.ll.z=u.ur.z=u.lr.z=i,o+=1,u.id=o,n.quadId=u.id,u.image=n.image,u.reference=n.toString(),a.push(u),t.data(a),t._update(),e.draw()}},this._remove=function(n){if(void 0!==n.quadId&&t){for(var r=0;r<a.length;r+=1)if(a[r].id===n.quadId){a.splice(r,1);break}t.data(a),t._update(),e.draw()}},this._update=function(n){return i.call(e,n),e._addBaseQuadToTiles(t,a),e},this._exit=function(){e.deleteFeature(t),t=null,a=[],r.apply(e,arguments)},this._init=function(){n.apply(e,arguments),(t=e.createFeature("quad",{previewColor:e._options.previewColor,previewImage:e._options.previewImage})).geoTrigger=void 0,t.gcs(e._options.gcs||e.map().gcs()),t.data(a),t._update()},this._getSubLayer=function(){},this._updateSubLayers=void 0};(0,n(1098).registerLayerAdjustment)("svg","tile",r),t.exports=r},2037:function(t,e,n){var r=n(4626),i=n(1098).registerFeature,o=n(338),a=function(t){"use strict";return this instanceof a?(t=t||{},o.call(this,t),n(5005).call(this),this._init(t),this):new a(t)};r(a,o),i("svg","track",a),t.exports=a},7376:function(t){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";t.exports=function(){var t,n=[];for(n.length=8,t=0;t<8;t+=1)n[t]=e.charAt(Math.floor(61*Math.random()));return n.join("")}},5747:function(t,e,n){var r=n(4626),i=n(1098).registerFeature,o=n(6858),a={arrow:{attrs:{class:"geo-vector-arrow geo-vector-marker",viewBox:"0 0 10 10",refX:1,refY:5,markerHeight:5,markerWidth:5,orient:"auto"},path:"M 0 0 L 10 5 L 0 10 z"},point:{attrs:{class:"geo-vector-point geo-vector-marker",viewBox:"0 0 12 12",refX:6,refY:6,markerHeight:8,markerWidth:8,orient:"auto"},path:"M 6 3 A 3 3 0 1 1 5.99999 3 Z"},bar:{attrs:{class:"geo-vector-bar geo-vector-marker",viewBox:"0 0 10 10",refX:0,refY:5,markerHeight:6,markerWidth:6,orient:"auto"},path:"M 0 0 L 2 0 L 2 10 L 0 10 z"},wedge:{attrs:{class:"geo-vector-wedge geo-vector-marker",viewBox:"0 0 10 10",refX:10,refY:5,markerHeight:5,markerWidth:5,orient:"auto"},path:"M 0 0 L 1 0 L 10 5 L 1 10 L 0 10 L 9 5 L 0 0"}},s=function(t){"use strict";if(!(this instanceof s))return new s(t);var e=n(5005),r=n(77),i=n(2493).d3;t=t||{},o.call(this,t),e.call(this);var u=this,l=this._exit,c=this._update,f=r(),h={};function d(t,e,n){return u._svgid()+"_marker_"+e+"_"+n}function p(t,e,n,r,o){var s=u.renderer()._definitions().selectAll("g.marker-group#"+u._svgid()).data(t.length?[1]:[]);s.enter().append("g").attr("id",u._svgid).attr("class","marker-group"),s.exit().remove();var l=t.reduce((function(t,e,n){var i=a[o(e,n)],s=a[r(e,n)];return i&&t.push({data:e,dataIndex:n,head:!0}),s&&t.push({data:e,dataIndex:n,head:!1}),t}),[]),c=(s=u.renderer()._definitions().selectAll("g.marker-group#"+u._svgid())).selectAll("marker.geo-vector-marker").data(l),f=u.renderer();c.enter().append("marker").each((function(t){var e=i.select(this),n=t.head?a[o(t.data,t.dataIndex)]:a[r(t.data,t.dataIndex)];Object.keys(n.attrs).forEach((function(t){e.attr(t,n.attrs[t])}))})).attr("id",(function(t){return d(t.data,t.dataIndex,t.head?"head":"tail")})).style("stroke",(function(t){return f._convertColor(e)(t.data,t.dataIndex)})).style("fill",(function(t){return f._convertColor(e)(t.data,t.dataIndex)})).style("opacity",(function(t){return n(t.data,t.dataIndex)})).append("path").attr("d",(function(t){return t.head?a[o(t.data,t.dataIndex)].path:a[r(t.data,t.dataIndex)].path})),c.exit().remove()}return this._build=function(){var t,e=u.data(),n=u.style.get(),r=u.renderer(),i=u.origin(),o=u.delta(),a=u.style("scale"),s=0;function l(){return a/r.scaleFactor()}return c.call(u),e||(e=[]),t=e.map((function(t,e){var n=u.featureGcsToDisplay(i(t,e)),r=o(t,e);return s=Math.max(s,r.x*r.x+r.y*r.y),{x1:n.x,y1:n.y,dx:r.x,dy:-r.y}})),s=Math.sqrt(s),a||(a=75/(s||1)),h.id=u._svgid(),h.data=e,h.append="line",h.attributes={x1:function(e,n){return t[n].x1},y1:function(e,n){return t[n].y1},x2:function(e,n){return t[n].x1+l()*t[n].dx},y2:function(e,n){return t[n].y1+l()*t[n].dy},"marker-start":function(t,e){return"url(#"+d(0,e,"tail")+")"},"marker-end":function(t,e){return"url(#"+d(0,e,"head")+")"}},h.style={stroke:function(){return!0},strokeColor:n.strokeColor,strokeWidth:n.strokeWidth,strokeOpacity:n.strokeOpacity,originStyle:n.originStyle,endStyle:n.endStyle},h.classes=["svgVectorFeature"],h.visible=u.visible,p(e,n.strokeColor,n.strokeOpacity,n.originStyle,n.endStyle),u.renderer()._drawFeatures(h),f.modified(),u.updateTime().modified(),u},this._update=function(){return c.call(u),u.timestamp()>=f.timestamp()?u._build():p(h.data,h.style.strokeColor,h.style.strokeOpacity,h.style.originStyle,h.style.endStyle),u},this._exit=function(){l.call(u),h={},p([],null,null,null,null)},this._init(t),this};s.markerConfigs=a,r(s,o),i("svg","vector",s),t.exports=s},6546:function(t,e,n){var r=n(4626),i=n(1275),o=function(t){"use strict";if(!(this instanceof o))return new o(t);t=t||{},i.call(this,t);var e=n(5616),r=this,a=this._init;return this.featureType="text",this.position=function(t){return void 0===t?r.style("position"):(t!==r.style("position")&&(r.style("position",t),r.dataTime().modified(),r.modified()),r)},this.text=function(t){return void 0===t?r.style("text"):(t!==r.style("text")&&(r.style("text",t),r.dataTime().modified(),r.modified()),r)},this._init=function(t){t=t||{},a.call(r,t);var n=e.extend({},{font:"bold 16px sans-serif",textAlign:"center",textBaseline:"middle",color:{r:0,g:0,b:0},rotation:0,rotateWithMap:!1,textScaled:!1,position:function(t){return Array.isArray(t)?{x:t[0],y:t[1],z:t[2]||0}:t},text:function(t){return t.text}},void 0===t.style?{}:t.style);void 0!==t.position&&(n.position=t.position),void 0!==t.text&&(n.text=t.text),r.style(n),n.position&&r.position(n.position),n.text&&r.text(n.text),r.dataTime().modified()},this._init(t),r};o.usedStyles=["visible","font","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","lineHeight","fontFamily","textAlign","textBaseline","color","textOpacity","rotation","rotateWithMap","textScaled","offset","shadowColor","shadowOffset","shadowBlur","shadowRotate","textStrokeColor","textStrokeWidth"],o.create=function(t,e){"use strict";return(e=e||{}).type="text",i.create(t,e)},o.capabilities={feature:"text"},r(o,i),t.exports=o},5289:function(t,e,n){var r=n(5616),i=function(t){if(!(this instanceof i))return new i(t);this._index=t.index,this._size=t.size,this._overlap=t.overlap||{x:0,y:0},this._wrap=t.wrap||{x:1,y:1},this._url=t.url,this._fetched=!1,this._queue=t.queue||null,Object.defineProperty(this,"index",{get:function(){return this._index}}),Object.defineProperty(this,"size",{get:function(){return this._size}}),Object.defineProperty(this,"overlap",{get:function(){return this._overlap}}),this.fetch=function(){return this._fetched||r.get(this._url).done(function(){this._fetched=!0}.bind(this)).promise(this),this},this.fetched=function(){return this._fetched},this.then=function(t,e){return this.fetched()||!this._queue||!this._queue.add||this.state&&"pending"!==this.state()?this.fetch():this._queue.add(this,this.fetch),this.done&&this.fail?this.done(t).fail(e):this.then(t,e),this},this.catch=function(t){return this.then(void 0,t),this},this.toString=function(){return[this._index.level||0,this._index.y,this._index.x,this._index.reference||0].join("_")},this.bounds=function(t,e){var n,r,i,o;return r=(n=this.size.x*(this.index.x-t.x)-this.overlap.x-e.x)+this.size.x+2*this.overlap.x,i=(o=this.size.y*(this.index.y-t.y)-this.overlap.y-e.y)+this.size.y+2*this.overlap.y,this.overlap.x&&this.index.x===t.x&&(n+=this.overlap.x),this.overlap.y&&this.index.y===t.y&&(o+=this.overlap.y),{left:n,right:r,bottom:i,top:o}},Object.defineProperty(this,"bottom",{get:function(){return this.size.y*(this.index.y+1)+this.overlap.y}}),Object.defineProperty(this,"top",{get:function(){return this.size.y*this.index.y-(this.index.y?this.overlap.y:0)}}),Object.defineProperty(this,"left",{get:function(){return this.size.x*this.index.x-(this.index.x?this.overlap.x:0)}}),Object.defineProperty(this,"right",{get:function(){return this.size.x*(this.index.x+1)+this.overlap.x}}),this.fadeIn=function(t){return r.noop(t),this}};t.exports=i},9123:function(t){var e=function(t){return this instanceof e?(t=t||{},this._size=t.size||64,Object.defineProperty(this,"size",{get:function(){return this._size},set:function(t){for(;this._atime.length>t;)this.remove(this._atime[this._atime.length-1]);this._size=t}}),Object.defineProperty(this,"length",{get:function(){return this._atime.length}}),this._access=function(t){return this._atime.indexOf(t)},this.remove=function(t){var e="string"==typeof t?t:t.toString();return e in this._cache&&(this._atime.splice(this._access(e),1),delete this._cache[e],!0)},this.clear=function(){return this._cache={},this._atime=[],this},this.get=function(t,e){return(t="string"==typeof t?t:t.toString())in this._cache?(e||(this._atime.splice(this._access(t),1),this._atime.unshift(t)),this._cache[t]):null},this.add=function(t,e,n){this.remove(t);var r=t.toString();this._cache[r]=t,this._atime.unshift(r),n||this.purge(e)},this.purge=function(t){for(var e;this._atime.length>this.size;){e=this._atime.pop();var n=this._cache[e];t&&t(n),delete this._cache[e]}},this.clear(),this):new e(t)};t.exports=e},9264:function(t,e,n){var r=n(4626),i=n(6498);function o(t,e){return(t%e+e)%e}function a(t){var e,n=/\$?\{(s|S|[sS]:[^{}]+|[^-{}]-[^-{}]|([^,{}]+,)+[^,{}]+)\}/,r=t.replace(new RegExp(n,"g"),"{s}").replace(/\$?\{[xX]\}/g,"{x}").replace(/\$?\{[yY]\}/g,"{y}").replace(/\$?\{[zZ]\}/g,"{z}"),i=t.match(n);if(i)if(i[2])e=i[1].split(",");else if(":"===i[1][1])e=i[1].substr(2).split("");else if("-"===i[1][1]){e=[];for(var a=i[1].charCodeAt(0),s=i[1].charCodeAt(2),u=Math.min(a,s);u<=Math.max(a,s);u+=1)e.push(String.fromCharCode(u))}return function(t,n,i,a){return r.replace(/\{s\}/g,function(t,e,n,r){return r[o(t+e+n,r.length)]}(t,n,i,e||a)).replace(/\{x\}/g,t).replace(/\{y\}/g,n).replace(/\{z\}/g,i)}}var s=function(t){"use strict";if(!(this instanceof s))return new s(t);i.call(this,t);var e=n(5616),r=n(6409),u=n(5325),l=n(9123),c=n(5938),f=n(1098).adjustLayerForRenderer,h=n(5289);if((t=e.extend(!0,{},this.constructor.defaults,t||{})).cacheSize||(t.cacheSize=t.keepLower?600:200),"string"===e.type(t.subdomains)&&(t.subdomains=t.subdomains.split("")),t.baseUrl){var d=t.baseUrl;d&&"/"!==d.charAt(d.length-1)&&(d+="/"),t.url=d+"{z}/{x}/{y}."+(t.imageFormat||"png")}t.originalUrl=t.url,"string"===e.type(t.url)&&(t.url=a(t.url));var p,m,g,y=this._init,v=this._exit,x=this.visible,_=t.queueSize||6,b=t.initialQueueSize||0,w=[],M={},A=[],T=t.nearestPixel,E=this;this._options=e.extend(!0,{},t),this.attribution(t.attribution),this._activeTiles={},this._tileTree={},this._cache=l({size:t.cacheSize}),this._queue=t.queue||c({size:_,initialSize:b,track:t.cacheSize,needed:function(t){return this._tileLayers&&this._tileLayers.length?this._tileLayers.some((function(e){return t===e.cache.get(t.toString(),!0)})):t===E.cache.get(t.toString(),!0)}}),this._queue._tileLayers=this._queue._tileLayers||[],this._queue._tileLayers.push(E),this._queue.initialTrack&&this._queue.track&&(this._queue.track=this._queue.initialTrack*this._queue._tileLayers.length);var C={};return Object.defineProperty(this,"options",{get:function(){return e.extend({},E._options)}}),Object.defineProperty(this,"cache",{get:function(){return E._cache}}),Object.defineProperty(this,"activeTiles",{get:function(){return e.extend({},E._activeTiles)}}),Object.defineProperty(this,"queue",{get:function(){return E._queue},set:function(t){E._queue!==t&&(this._queue&&this._queue._tileLayers&&this._queue._tileLayers.indexOf(E)>=0&&(this._queue._tileLayers.splice(this._queue._tileLayers.indexOf(E),1),this._queue.initialTrack&&this._queue.track&&this._queue._tileLayers.length&&(this._queue.track=this._queue.initialTrack*this._queue._tileLayers.length)),E._queue=t,E._queue._tileLayers=E._queue._tileLayers||[],E._queue._tileLayers.push(E),E._queue.initialTrack&&E._queue.track&&(E._queue.track=E._queue.initialTrack*E._queue._tileLayers.length))}}),Object.defineProperty(this,"queueSize",{get:function(){return _},set:function(t){_=t,E._queue.size=t}}),Object.defineProperty(this,"initialQueueSize",{get:function(){return b},set:function(t){b=t||0,E._queue.initialSize=t||_}}),Object.defineProperty(this,"reference",{get:function(){return E.id()+"_"+(p||0)},set:function(t){p=t},configurable:!0}),this.tilesAtZoom=function(t){if(E._options.tilesAtZoom)return E._options.tilesAtZoom.call(E,t);var e=Math.pow(2,t);return{x:e,y:e}},this.tilesMaxBounds=function(t){return E._options.tilesMaxBounds?E._options.tilesMaxBounds.call(E,t):null},this.tileCropFromBounds=function(t){if(E._options.tilesMaxBounds){var e=t.index.level,n=E._tileBounds(t);return void 0===A[e]&&(A[e]=E.tilesMaxBounds(e)||null),A[e]&&(n.right>A[e].x||n.bottom>A[e].y)?{x:Math.max(0,Math.min(A[e].x,n.right)-n.left),y:Math.max(0,Math.min(A[e].y,n.bottom)-n.top)}:void 0}},this.isValid=function(t){return E._options.minLevel<=t.level&&t.level<=E._options.maxLevel&&(!!(E._options.wrapX||0<=t.x&&t.x<=E.tilesAtZoom(t.level).x-1)&&!!(E._options.wrapY||0<=t.y&&t.y<=E.tilesAtZoom(t.level).y-1))},this._origin=function(t){var e,n=E.toLevel(E.toLocal(E.map().origin()),t),r=E._options;return{index:e={x:Math.floor(n.x/r.tileWidth),y:Math.floor(n.y/r.tileHeight)},offset:{x:n.x-r.tileWidth*e.x,y:n.y-r.tileHeight*e.y}}},this._tileBounds=function(t){var e=E._origin(t.index.level);return t.bounds(e.index,e.offset)},this.tileAtPoint=function(t,e){var n=E._origin(e),r=E.map();t=E.displayToLevel(r.gcsToDisplay(t,null),e),isNaN(t.x)&&(t.x=0),isNaN(t.y)&&(t.y=0);var i=E._tileOffset(e);return i&&(t.x+=i.x,t.y+=i.y),{x:Math.floor(n.index.x+(n.offset.x+t.x)/E._options.tileWidth),y:Math.floor(n.index.y+(n.offset.y+t.y)/E._options.tileHeight)}},this.gcsTileBounds=function(t,e){var n=t.index?t:h({index:t,size:{x:E._options.tileWidth,y:E._options.tileHeight},url:""}),r=E._tileOffset(n.index.level),i=n.bounds({x:0,y:0},r),o=E.map(),a=o.unitsPerPixel(n.index.level),s=[{x:i.left*a,y:E._topDown()*i.top*a},{x:i.right*a,y:E._topDown()*i.bottom*a}];return(e=null===e?o.gcs():void 0===e?o.ingcs():e)!==o.gcs()&&(s=u.transformCoordinates(o.gcs(),e,s)),{left:s[0].x,top:s[0].y,right:s[1].x,bottom:s[1].y}},this._getTile=function(t,e){var n=e||t;return h({index:t,size:{x:E._options.tileWidth,y:E._options.tileHeight},queue:E._queue,url:E._options.url.call(E,n.x,n.y,n.level||0,E._options.subdomains)})},this._getTileCached=function(t,e,n){var r=E.cache.get(E._tileHash(t));return null===r&&(r=E._getTile(t,e),E.cache.add(r,E.remove,n)),r},this._tileHash=function(t){return[t.level||0,t.y,t.x,t.reference||0].join("_")},this._getTileRange=function(t,e){var n=[E.tileAtPoint({x:e.left,y:e.top},t),E.tileAtPoint({x:e.right,y:e.top},t),E.tileAtPoint({x:e.left,y:e.bottom},t),E.tileAtPoint({x:e.right,y:e.bottom},t)];return{start:{x:Math.min(n[0].x,n[1].x,n[2].x,n[3].x),y:Math.min(n[0].y,n[1].y,n[2].y,n[3].y)},end:{x:Math.max(n[0].x,n[1].x,n[2].x,n[3].x),y:Math.max(n[0].y,n[1].y,n[2].y,n[3].y)}}},this._getTiles=function(t,n,r,i){var a,s,u,l,c,f,h,d,p,m,g,y=[],v=!1,x=E._options.keepLower?E._options.minLevel:Math.min(Math.max(t,E._options.minLevel),E._options.maxLevel);for(t<x&&(t=x),g=x;g<=t&&(c=(h=E._getTileRange(g,n)).start,f=h.end,l=E.tilesAtZoom(g),E._options.wrapX||(c.x=Math.min(Math.max(c.x,0),l.x-1),f.x=Math.min(Math.max(f.x,0),l.x-1),g===x&&E._options.keepLower&&(c.x=0,f.x=l.x-1)),E._options.wrapY||(c.y=Math.min(Math.max(c.y,0),l.y-1),f.y=Math.min(Math.max(f.y,0),l.y-1),g===x&&E._options.keepLower&&(c.y=0,f.y=l.y-1)),!(E._options.gcs&&E._options.gcs!==E.map().gcs()&&g!==x&&(f.x+1-c.x)*(f.y+1-c.y)>E.map().size().width*E.map().size().height/E._options.tileWidth/E._options.tileHeight*16));g+=1)for(a=c.x;a<=f.x;a+=1)for(s=c.y;s<=f.y;s+=1)u={level:g,x:a,y:s,reference:E.reference},d={level:g,x:a,y:s,reference:E.reference},E._options.wrapX&&(d.x=o(d.x,l.x)),E._options.wrapY&&(d.y=o(d.y,l.y)),E.isValid(d)&&(i&&y.length<w.length&&(m=w[y.length],v=v||u.level!==m.level||u.x!==m.x||u.y!==m.y),y.push({index:u,source:d}));if(i){if(!v&&y.length===w.length)return;w.splice(0,w.length),e.each(y,(function(t,e){w.push(e.index)}))}if(r){p={x:(c.x+f.x)/2,y:(c.y+f.y)/2,level:t,bottomLevel:t};for(var _=Math.max(f.x-c.x,f.y-c.y)+1;_>=1;_/=2)p.bottomLevel-=1;y.sort(E._loadMetric(p)),E._queue&&E._queue.batch(!0)}for(E.cache.size<y.length&&(console.log("Increasing cache size to "+y.length),E.cache.size=y.length),a=0;a<y.length;a+=1)y[a]=E._getTileCached(y[a].index,y[a].source,!0);return E.cache.purge(E.remove),y},this.gcs=function(t){if(void 0===t)return E._options.gcs||E.map().gcs();var e=E.gcs();return null===t?delete E._options.gcs:E._options.gcs=t,E.gcs()!==e&&(E.clear(),E.gcsFeatures(E.gcs()),E.modified(),E._update()),E},this.prefetch=function(t,n){var r;return r=E._getTiles(t,n,!0),e.when.apply(e,r.map((function(t){return t.fetch()})))},this._loadMetric=function(t){return function(e,n){var r,i,o,a,s;return e=e.index||e,n=n.index||n,e.level!==n.level?t.bottomLevel&&e.level>=t.bottomLevel!=n.level>=t.bottomLevel?e.level>=t.bottomLevel?-1:1:e.level-n.level:(s=Math.pow(2,e.level-t.level),o=(t.x+.5)*s-.5,a=(t.y+.5)*s-.5,(r=e.x-o)*r+(i=e.y-a)*i-((r=n.x-o)*r+(i=n.y-a)*i))}},this.fromLevel=function(t,e){var n=Math.pow(2,-e);return{x:t.x*n,y:t.y*n}},this.toLevel=function(t,e){var n=Math.pow(2,e);return{x:t.x*n,y:t.y*n}},this.drawTile=function(t){var e=t.toString();E._activeTiles.hasOwnProperty(e)?E._moveToTop(t):E._drawTile(t),E._activeTiles[e]=t},this._drawTile=function(t){if(null!==E.renderer())throw new Error("This draw method is not valid on renderer managed layers.");var n,r=t.index.level,i=e(E._getSubLayer(r)),o=E._tileBounds(t),a=E._options.animationDuration,s=e('<div class="geo-tile-container"/>').attr("tile-reference",t.toString());s.append(t.image),s.css({left:o.left-parseInt(i.attr("offsetx")||0,10)+"px",top:o.top-parseInt(i.attr("offsety")||0,10)+"px"}),(n=E.tileCropFromBounds(t))&&s.addClass("crop").css({width:n.x+"px",height:n.y+"px"}),a>0&&t.fadeIn(a),i.append(s),t.catch((function(){console.warn("Could not load tile at "+t.toString()),E._remove(t)}))},this.remove=function(t){var e=t.toString(),n=E._activeTiles[e];return n instanceof h&&E._remove(n),delete E._activeTiles[e],n},this._remove=function(t){t.image&&(t.image.parentElement?e(t.image.parentElement).remove():console.log("No parent element to remove "+t.toString(),t),e(t.image).remove())},this._moveToTop=function(t){e.noop(t)},this._getViewBounds=function(){var t=E.map(),e=t.zoom(),n=E._options.tileRounding(e),r=Math.pow(2,e-n),i=t.size(),o=E.displayToLevel({x:0,y:0}),a=E.displayToLevel({x:i.width,y:0}),s=E.displayToLevel({x:0,y:i.height}),u=E.displayToLevel({x:i.width,y:i.height});return{level:n,scale:r,left:Math.min(o.x,a.x,s.x,u.x),right:Math.max(o.x,a.x,s.x,u.x),top:Math.min(o.y,a.y,s.y,u.y),bottom:Math.max(o.y,a.y,s.y,u.y)}},this._purge=function(t,e,n){var r,i;if(E._updating)return E;for(i in n||(n=E._getViewBounds()),E._activeTiles)r=E._activeTiles[i],E._canPurge(r,n,t,e)&&E.remove(r);return E},this.clear=function(){var t,e=[];for(t in E._activeTiles)e.push(E.remove(t));return E._tileTree={},w=[],e},this.reset=function(){return E.clear(),E._cache.clear(),E._queue.initialSize=b,E},this.toLocal=function(t,e){var n=E.map(),r=n.unitsPerPixel(void 0===e?n.zoom():e);return{x:t.x/r,y:E._topDown()*t.y/r}},this.fromLocal=function(t,e){var n=E.map(),r=n.unitsPerPixel(void 0===e?n.zoom():e);return{x:t.x*r,y:E._topDown()*t.y*r}},this._topDown=function(){return E._options.topDown?1:-1},this._getSubLayer=function(t){if(E.canvas()){var n=E.canvas().find("div[data-tile-layer="+t.toFixed()+"]").get(0);return n||(n=e('<div class=geo-tile-layer data-tile-layer="'+t.toFixed()+'"/>').get(0),E.canvas().append(n)),n}},this._updateSubLayers=function(t,n){var r=E.canvas(),i=parseInt(r.attr("lastlevel"),10),o=parseInt(r.attr("lastoffsetx")||0,10),a=parseInt(r.attr("lastoffsety")||0,10);if(i===t&&Math.abs(o-n.left)<65536&&Math.abs(a-n.top)<65536)return{x:o,y:a};var s=E.map(),u=E._tileOffset(t),l=parseInt((n.left+n.right-s.size().width)/2+u.x,10),c=parseInt((n.top+n.bottom-s.size().height)/2+u.y,10);return r.find(".geo-tile-layer").each((function(n,r){var i=e(r),o=parseInt(i.data("tileLayer"),10);i.css("transform","scale("+Math.pow(2,t-o)+")");var a=parseInt(l/Math.pow(2,t-o),10),s=parseInt(c/Math.pow(2,t-o),10),u=a-parseInt(i.attr("offsetx")||0,10),f=s-parseInt(i.attr("offsety")||0,10);i.attr({offsetx:a,offsety:s}),i.find(".geo-tile-container").each((function(t,n){e(n).css({left:parseInt(e(n).css("left"),10)-u+"px",top:parseInt(e(n).css("top"),10)-f+"px"})}))})),r.attr({lastoffsetx:l,lastoffsety:c,lastlevel:t}),{x:l,y:c}},this._update=function(t){if(t&&t.event&&(t.event.event===r.zoom||t.event.event===r.rotate))return E;if(!E.visible())return E;var n,i=E.map(),o=i.bounds(void 0,null),a=i.zoom(),s=E._options.tileRounding(a);if(E._updateSubLayers){var u=E._getViewBounds(),l=E._updateSubLayers(s,u)||{x:0,y:0},c=E._tileOffset(s);if(null===E.renderer()){var f=Math.pow(2,a-s),h=i.rotation(),d=-c.x+-(u.left+u.right)/2+l.x,p=-c.y+-(u.bottom+u.top)/2+l.y,g=d+i.size().width/2,y=p+i.size().height/2;E.canvas().css({"transform-origin":-d+"px "+-p+"px"});var v="translate("+g+"px,"+y+"px)scale("+f+")";h&&(v+="rotate("+180*h/Math.PI+"deg)"),E.canvas().css("transform",v)}E.canvas().attr({scale:Math.pow(2,a-s),dx:-c.x+-(u.left+u.right)/2,dy:-c.y+-(u.bottom+u.top)/2,offsetx:l.x,offsety:l.y,rotation:i.rotation()})}if(void 0===(n=E._getTiles(s,o,!0,!0)))return E;if(E._tileTree={},n.forEach((function(t){if(t.fetched())delete M[t.toString()],E.drawTile(t),E._setTileTree(t);else{if(t._queued)(E._queue?E._queue.get(t):-1)>=0&&E._queue.add(t);else t.then((function(){if(!m&&t===E.cache.get(t.toString())){var e=i.zoom(),n=E._options.tileRounding(e),r=E._getViewBounds();E._canPurge(t,r,n)?E.remove(t):(E.drawTile(t),E._setTileTree(t))}})),t._queued=!0;E.addPromise(t),M[t.toString()]=t}})),e.when.apply(e,n).done((function(){var t=E.map().zoom(),e=E._options.tileRounding(t);E._purge(e,!0)})),"all"!==E._options.idleAfter)for(var x in M){var _=M[x];n.indexOf(_)<0&&(E.removePromise(_),delete M[x])}return E},this._setTileTree=function(t){if(!E._options.keepLower){var e=t.index;E._tileTree[e.level]=E._tileTree[e.level]||{},E._tileTree[e.level][e.x]=E._tileTree[e.level][e.x]||{},E._tileTree[e.level][e.x][e.y]=t}},this._getTileTree=function(t){return((E._tileTree[t.level]||{})[t.x]||{})[t.y]||null},this._isCovered=function(t){var e=t.index.level,n=t.index.x,r=t.index.y,i=[];return(i=E._getTileTree({level:e-1,x:Math.floor(n/2),y:Math.floor(r/2)}))?[i]:(i=[E._getTileTree({level:e+1,x:2*n,y:2*r}),E._getTileTree({level:e+1,x:2*n+1,y:2*r}),E._getTileTree({level:e+1,x:2*n,y:2*r+1}),E._getTileTree({level:e+1,x:2*n+1,y:2*r+1})]).every((function(t){return null!==t}))?i:null},this._outOfBounds=function(t,e){var n=E._tileOffset(t.index.level),r=1;return t.index.level!==e.level&&(r=Math.pow(2,(e.level||0)-(t.index.level||0))),(t.bottom-n.y)*r<e.top||(t.left-n.x)*r>e.right||(t.top-n.y)*r>e.bottom||(t.right-n.x)*r<e.left},this._canPurge=function(t,e,n,r){if(E._options.keepLower){if((n=n||0)<t.index.level&&t.index.level!==E._options.minLevel)return!0;if(t.index.level===E._options.minLevel&&!E._options.wrapX&&!E._options.wrapY)return!1}else if((r||E._isCovered(t))&&n!==t.index.level&&(n>=E._options.minLevel||t.index.level!==E._options.minLevel)&&(n<E._options.maxLevel||t.index.level!==E._options.maxLevel))return!0;return!!e&&E._outOfBounds(t,e)},this.displayToLevel=function(t,e){var n,r=E.map(),i=r.zoom(),o=E._options.tileRounding(i),a=r.unitsPerPixel(void 0===e?o:e);if(void 0===t){var s=r.size();t={x:s.width/2,y:s.height/2}}try{n=r.displayToGcs(t,E._options.gcs||null)}catch(t){n={x:0,y:0}}return{x:n.x/a,y:E._topDown()*n.y/a}},this.url=function(t){return void 0===t?E._options.originalUrl:(t===E._options.originalUrl||(E._options.originalUrl=t,"string"===e.type(t)&&(t=a(t)),E._options.url=t,E.reset(),E.map().draw()),E)},this.subdomains=function(t){return void 0===t?E._options.subdomains:(t&&("string"===e.type(t)&&(t=t.indexOf(",")>=0?t.split(","):t.split("")),E._options.subdomains=t,E.reset(),E.map().draw()),E)},this._tileOffset=function(t){return void 0===C[t]&&(C[t]=E._options.tileOffset(t)),C[t]},this.visible=function(t){return void 0===t?x():(E.visible()!==t&&(x(t),t&&E._update()),E)},this.nearestPixel=function(t,e){return void 0===t?T:(T!==t&&(T=t,e||(E.modified(),E._update())),E)},Object.defineProperty(this,"baseQuad",{get:function(){return E._options.baseQuad},set:function(t){E._options.baseQuad=t,E._update()}}),this._addBaseQuadToTiles=function(t,e){t&&(this.baseQuad!==g&&(g&&e.splice(0,1),(g=this.baseQuad)&&(e.splice(0,0,this.baseQuad),t.cacheUpdate(0)),t.data(e)),t._update())},this._init=function(){var t;if(y.apply(E,arguments),null===E.renderer())for(t=0;t<=E._options.maxLevel;t+=1)E._getSubLayer(t);return E},this._exit=function(){return E.reset(),v.apply(E,arguments),m=!0,this._queue&&this._queue._tileLayers&&this._queue._tileLayers.indexOf(E)>=0&&(this._queue._tileLayers.splice(this._queue._tileLayers.indexOf(E),1),this._queue.initialTrack&&this._queue.track&&this._queue._tileLayers.length&&(this._queue.track=this._queue.initialTrack*this._queue._tileLayers.length)),E},f("tile",this),this};s.defaults={minLevel:0,maxLevel:18,tileOverlap:{x:0,y:0},tileWidth:256,tileHeight:256,wrapX:!0,wrapY:!1,url:null,subdomains:"abc",tileOffset:function(t){return{x:0,y:0}},tilesMaxBounds:null,topDown:!1,keepLower:!0,idleAfter:"view",tileRounding:Math.round,attribution:"",animationDuration:0},r(s,i),t.exports=s},77:function(t){var e=0,n=function(){"use strict";if(!(this instanceof n))return new n;var t=this,r=0;return this.modified=function(){return r=e+=1,t},this.timestamp=function(){return r},this.getMTime=this.timestamp,this};t.exports=n},338:function(t,e,n){var r=n(4626),i=n(1275),o=n(1098),a=n(642),s=function(t){"use strict";if(!(this instanceof s))return new s(t);var e=n(5616),r=n(5325);t=t||{},i.call(this,t);var u,l,c,f,h,d=this,p={},m={startTime:void 0!==t.startTime?t.startTime:null,endTime:void 0!==t.endTime?t.endTime:null,duration:void 0!==t.duration?t.duration:null,start:0,end:0},g=this.draw,y=this._exit,v=this._init,x=this.modified,_=this.style,b=this._update;return this.featureType="track",this._linePosition=function(t){return function(e,n,r,i){var o=m.timeFunc(e,n,r,i);return"past"===t&&o>=m.start||"current"===t&&o<m.start?m.startPosition[i]:"current"===t&&o>m.end||"future"===t&&o<m.end?m.endPosition[i]:m.positionFunc(e,n,r,i)}},this._headPosition=function(t,e){return m.endPosition[e]},this._headText=function(t,e){return m.text[e]},this._updateTimeRange=function(){null!==m.endTime||null===m.endTime&&(null===m.startTime||null==m.duration)?(m.end=null!==m.endTime?m.endTime:m.timeExtents.end,null!==m.startTime&&(null===m.endTime||m.startTime<=m.endTime)?m.start=m.startTime:null!==m.duration?m.start=m.end-m.duration:m.start=m.timeExtents.start):(m.start=m.startTime,m.end=m.start+m.duration)},this.calculateTimePosition=function(t,e,n){d.dataTime().timestamp()>=d.buildTime().timestamp()&&d._build(),e=null===e?d.layer().map().gcs():void 0===e?d.gcs():e;var i=r({source:d.gcs(),target:e}),o=d.data(),a=[],s=o.map((function(e,n){var r=m.trackFunc(e,n);if(a.push(r),!r.length)return{x:0,y:0,z:0,posidx:-1};var i,o,s,u,l=0,c=r.length-1;if(1===r.length)return{posidx:l,angidx0:l,angidx1:l};if((i=m.timeFunc(r[l],l,e,n))>=t)return{posidx:l,angidx0:l,angidx1:l+1};if((o=m.timeFunc(r[c],c,e,n))<=t)return{posidx:c,angidx0:c-1,angidx1:c};for(;c-l>1;){if(s=Math.floor((c+l)/2),(u=m.timeFunc(r[s],s,e,n))===t)return{posidx:s,angidx0:s-1,angidx1:s+1};u<t?(i=u,l=s):(o=u,c=s)}var f=(t-i)/(o-i);return{posidx0:l,posidx1:c,factor0:1-f,factor1:f,angidx0:l,angidx1:c}}));return s.forEach((function(t,e){var r,o,s;t.posidx<0||(void 0===t.posidx1?r=m.positionFunc(a[e][t.posidx],t.posidx,a[e],e):(o=i.forward(m.positionFunc(a[e][t.posidx0],t.posidx0,a[e],e),!0),s=i.forward(m.positionFunc(a[e][t.posidx1],t.posidx1,a[e],e),!0),r=i.inverse({x:o.x*t.factor0+s.x*t.factor1,y:o.y*t.factor0+s.y*t.factor1,z:(o.z||0)*t.factor0+(s.z||0)*t.factor1},!0)),t.x=r.x,t.y=r.y,t.z=r.z||0,n&&(void 0===t.posidx1&&(o=i.forward(t.angidx0===t.posidx?r:m.positionFunc(a[e][t.angidx0],t.angidx0,a[e],e),!0),s=i.forward(t.angidx1===t.posidx?r:m.positionFunc(a[e][t.angidx1],t.angidx1,a[e],e),!0)),t.angle=Math.atan2(s.y-o.y,s.x-o.x)))})),s},this._build=function(){d.buildTime().modified(),u||(u={past:d.layer().createFeature("line"),future:d.layer().createFeature("line"),current:d.layer().createFeature("line")},d.dependentFeatures([u.past,u.current,u.future]));var t=d.data();m.data=t,m.timeFunc=d.style.get("time"),m.positionFunc=d.style.get("position"),m.trackFunc=d.style.get("track"),m.textFunc=d.style.get("text"),["past","current","future"].forEach((function(e){u[e].style(d.style()).style(d[e+"Style"]()).line(d.style("track")).gcs(d.gcs()).data(t).position(d._linePosition(e))}));var e,n,r={};if(t.forEach((function(t,e){var n,i=m.trackFunc(t,e);i.length&&(n=m.timeFunc(i[0],0,t,e),(void 0===r.start||n<r.start)&&(r.start=n),i.length>1&&(n=m.timeFunc(i[i.length-1],i.length-1,t,e)),(void 0===r.end||n>r.end)&&(r.end=n))})),m.timeExtents=r,d._updateTimeRange(),m.startPosition=d.calculateTimePosition(m.start,null),m.endPosition=d.calculateTimePosition(m.end,null,!0),m.text=t.map((function(t,r){var i=m.textFunc(t,r);return e|=null==i,null==i||""===i?"":(n=!0,m.startPosition[r].posidx<0&&(i=""),i)})),e&&!c){if(!(o.registries.features[d.layer().rendererName()]||{}).marker){var i=o.rendererForFeatures(["marker"]);l=o.createLayer("feature",d.layer().map(),{renderer:i}),d.layer().addChild(l),d.layer().node().append(l.node())}c=(l||d.layer()).createFeature("marker");var a=d.dependentFeatures();a.push(c),d.dependentFeatures(a)}if(n&&!h){if(!(o.registries.features[d.layer().rendererName()]||{}).text){var s=o.rendererForFeatures(["text"]);f=o.createLayer("feature",d.layer().map(),{renderer:s}),d.layer().addChild(f),d.layer().node().append(f.node())}h=(f||d.layer()).createFeature("text");var p=d.dependentFeatures();p.push(h),d.dependentFeatures(p)}if(c){c.headData=m.endPosition,c.style(d.markerStyle()).gcs(d.gcs()).data(t).position(d._headPosition);var g=c.style.get("radius");c.style("radius",(function(t,e){return m.text[e]||m.startPosition[e].posidx<0?0:g(t,e)}))}return h&&(h.headData=m.endPosition,h.style(d.textStyle()).gcs(d.gcs()).data(t).text(d._headText).position(d._headPosition)),d},this._updateTimeAndPosition=function(){u&&(d._updateTimeRange(),m.startPosition=d.calculateTimePosition(m.start,null),m.endPosition=d.calculateTimePosition(m.end,null,!0),u.past.modified(),u.current.modified(),u.future.modified(),c&&c.modified(),h&&h.modified(),d.updateTime().modified(),d.modified())},this._update=function(){return b.call(d),(d.dataTime().timestamp()>=d.buildTime().timestamp()||d.updateTime().timestamp()<=d.timestamp())&&d._build(),d.updateTime().modified(),d},this.draw=function(){var t=g();return u&&(u.past.draw(),u.current.draw(),u.future.draw()),c&&c.draw(),h&&h.draw(),t},this.modified=function(){var t=x();return u&&(u.past.modified(),u.current.modified(),u.future.modified()),c&&c.modified(),h&&h.modified(),t},this.style=function(t,n,r){return"style"===(r=r||"style")?_(t,n):void 0===t?p[r]:"string"==typeof t&&void 0===n?(p[r]||{})[t]:(void 0===p[r]&&(p[r]={}),void 0===n?p[r]=e.extend(!0,p[r],t):p[r][t]=n,d.modified(),d)},this.style.get=_.get,["markerStyle","textStyle","pastStyle","currentStyle","futureStyle"].forEach((function(t){d[t]=function(e,n){return d.style(e,n,t)}})),this.track=function(t){return void 0===t?d.style("track"):(d.style("track",t),d.dataTime().modified(),d.modified(),d)},this.position=function(t){return void 0===t?d.style("position"):(d.style("position",t),d.dataTime().modified(),d.modified(),d)},this.time=function(t){return void 0===t?d.style("time"):(d.style("time",t),d.dataTime().modified(),d.modified(),d)},this.timeRange=function(t){if(void 0===t)return{startTime:m.startTime,endTime:m.endTime,duration:m.duration,start:m.start,end:m.end,minimum:(m.timeExtents||{}).start,maximum:(m.timeExtents||{}).end};var e=!1;return void 0!==t.startTime&&t.startTime!==m.startTime&&(m.startTime=null===t.startTime?t.startTime:+t.startTime,e=!0),void 0!==t.endTime&&t.endTime!==m.endTime&&(m.endTime=null===t.endTime?t.endTime:+t.endTime,e=!0),void 0!==t.duration&&t.duration!==m.duration&&(m.duration=null===t.duration?t.duration:+t.duration,e=!0),e&&d._updateTimeAndPosition(),d},this.startTime=function(t){return void 0===t?m.startTime:(t!==m.startTime&&(m.startTime=null===t?t:+t,d._updateTimeAndPosition()),d)},this.endTime=function(t){return void 0===t?m.endTime:(t!==m.endTime&&(m.endTime=null===t?t:+t,d._updateTimeAndPosition()),d)},this.duration=function(t){return void 0===t?m.duration:(t!==m.duration&&(m.duration=null===t?t:+t,d._updateTimeAndPosition()),d)},this._mergeSearchResults=function(t,e){return t.extra=t.extra||{},e.forEach((function(e){return e.value.index.forEach((function(n,r){t.index.indexOf(n)<0&&(t.index.push(n),t.found.push(e.value.found[r]),t.where=t.where||{},e.value.extra&&e.value.extra[n]&&(t.extra[n]=e.value.extra[n]),a.isObject(t.extra[n])||(t.extra[n]={value:t.extra[n]}),t.extra[n].where=e.key)}))})),t},this.pointSearch=function(t){var e=u.current.pointSearch(t),n=u.past.pointSearch(t),r=u.future.pointSearch(t),i=c?c.pointSearch(t):{index:[]};return this._mergeSearchResults(e,[{key:"marker",value:i},{key:"past",value:n},{key:"future",value:r}])},this.polygonSearch=function(t,e){var n=u.current.polygonSearch(t,e),r=u.past.polygonSearch(t,e),i=u.future.polygonSearch(t,e),o=c?c.polygonSearch(t,e):{index:[]};return this._mergeSearchResults(n,[{key:"marker",value:o},{key:"past",value:r},{key:"future",value:i}])},this._exit=function(){u&&d.layer()&&(d.layer().deleteFeature(u.past),d.layer().deleteFeature(u.current),d.layer().deleteFeature(u.future)),u=null,(l||d.layer())&&c&&(l||d.layer()).deleteFeature(c),l&&d.layer()&&d.layer().removeChild(l),l=null,(f||d.layer())&&h&&(f||d.layer()).deleteFeature(h),f&&d.layer()&&d.layer().removeChild(f),f=null,d.dependentFeatures([]),y()},this._init=function(t){t=t||{},v.call(d,t);var n=e.extend(!0,{},{track:a.identityFunction,position:a.identityFunction,time:function(t,e){return void 0!==t.t?t.t:e},uniformLine:"drop",closed:!1},void 0===t.style?{}:t.style),r=e.extend(!0,{},{rotateWithMap:!0,rotation:function(t,e){return-m.endPosition[e].angle||0}},void 0===t.markerStyle?{}:t.markerStyle),i=e.extend(!0,{},{rotateWithMap:!0,rotation:function(t,e){return void 0!==m.endPosition[e].angle?-m.endPosition[e].angle+Math.PI/2:0}},void 0===t.textStyle?{}:t.textStyle),o=e.extend(!0,{},{strokeOpacity:.25},void 0===t.pastStyle?{}:t.pastStyle),s=e.extend(!0,{},{},void 0===t.currentStyle?{}:t.currentStyle),u=e.extend(!0,{},{strokeOpacity:.25},void 0===t.futureStyle?{}:t.futureStyle);["track","position","time"].forEach((function(e){void 0!==t[e]&&(n[e]=t[e])})),d.style(n),d.markerStyle(r),d.textStyle(i),d.pastStyle(o),d.currentStyle(s),d.futureStyle(u)},this};r(s,i),t.exports=s},5325:function(t,e,n){var r=n(1960),i=n(1982),o=n(3503),a=n(642);r=r.__esModule?r.default:r;var s=n(9689);s.keys().forEach((function(t){r.Proj.projections.add(s(t))}));var u={},l=/^(.* |)\+axis=e(n|s)u(| .*)$/,c=/(^|\s)\+(s[1-3][1-3]|[xyz]off)=\S/,f=function(t){"use strict";if(!(this instanceof f))return(t=t||{}).source in u||(Object.keys(u).length>=10&&(u={}),u[t.source]={}),t.target in u[t.source]||(Object.keys(u[t.source]).length>=10&&(u[t.source]={}),u[t.source][t.target]=new f(t)),u[t.source][t.target];var e,n,s,l,h,d,p,m=this,g={s11:0,s12:4,s13:8,xoff:12,s21:1,s22:5,s23:9,yoff:13,s31:2,s32:6,s33:10,zoff:14};function y(t){if(!c.exec(t))return{proj:t};var e,n,r=a.mat4AsArray(),i=[];return t.split(/(\s+)/).forEach((function(t){var e=/^\+(s[1-3][1-3]|[xyz]off)=(.*)$/.exec(t);e?r[g[e[1]]]=parseFloat(e[2]):i.push(t)})),n={proj:i.join(" "),orig:t},(e=o.invert(a.mat4AsArray(),r))?(n.matrix=r,n.inverse=e):console.warn("Affine transform is not invertable and will not be used: "+t),n}function v(){var t=y(m.source()),n=y(m.target()),i=t.proj,o=n.proj;l=t.matrix,h=t.inverse,d=n.matrix,p=n.inverse,e=new r(i,o)}this.source=function(t){return void 0===t?n||"EPSG:4326":(n=t,v(),m)},this.target=function(t){return void 0===t?s||"EPSG:3857":(s=t,v(),m)},this._forward=function(t){if(l){var n=i.transformMat4(a.vec3AsArray(),[t.x,t.y,t.z||0],h);t={x:n[0],y:n[1],z:n[2]}}var r=e.forward(t,!0);if(r.z=t.z||0,d){var o=i.transformMat4(a.vec3AsArray(),[r.x,r.y,r.z],d);r={x:o[0],y:o[1],z:o[2]}}return r},this._inverse=function(t){if(d){var n=i.transformMat4(a.vec3AsArray(),[t.x,t.y,t.z||0],p);t={x:n[0],y:n[1],z:n[2]}}var r=e.inverse(t,!0);if(r.z=t.z||0,l){var o=i.transformMat4(a.vec3AsArray(),[r.x,r.y,r.z],l);r={x:o[0],y:o[1],z:o[2]}}return r},this.forward=function(t){return Array.isArray(t)?t.map(m._forward):m._forward(t)},this.inverse=function(t){return Array.isArray(t)?t.map(m._inverse):m._inverse(t)},t=t||{};try{this.source(t.source)}catch(e){console.error("Can't use transform source: "+t.source),this.source("EPSG:4326")}try{this.target(t.target)}catch(e){console.error("Can't use transform target: "+t.target),this.target("EPSG:3857")}return this};f.defs=r.defs,f.lookup=function(t){var e,i,o=n(5616),a=o.Deferred();return r.defs.hasOwnProperty(t)?a.resolve(r.defs[t]):2!==(i=t.split(":")).length||"EPSG"!==i[0].toUpperCase()?a.reject("Invalid projection code").promise():(e=i[1],o.ajax({url:"https://epsg.io/?q="+e+"&format=json"}).done((function(e){var n=(e.results||[])[0];return n&&n.proj4?(r.defs(t,n.proj4),o.when(r.defs[t])):a.reject(e).promise()})))},f.transformCoordinates=function(t,e,n,r){"use strict";if(t===e||Array.isArray(n)&&!n.length)return n;if(Array.isArray(n)&&n.length>=3&&3===r&&!a.isObject(n[0])&&!c.test(t)&&!c.test(e))return f.transformCoordinatesFlatArray3(t,e,n);if(Array.isArray(n)&&n.length&&a.isObject(n[0])&&"x"in n[0]&&"y"in n[0]){var i=t.match(l),o=e.match(l);if(i&&o&&i[1]===o[1]&&i[3]===o[3])return"z"in n[0]?n.map((function(t){return{x:+t.x,y:-t.y,z:+t.z||0}})):n.map((function(t){return{x:+t.x,y:-t.y}}))}var s,u=f({source:t,target:e});return a.isObject(n)&&"x"in n&&"y"in n?(s=u.forward({x:+n.x,y:+n.y,z:+n.z||0},!0),"z"in n?s:{x:s.x,y:s.y}):Array.isArray(n)&&1===n.length&&a.isObject(n[0])&&"x"in n[0]&&"y"in n[0]?(s=u.forward({x:+n[0].x,y:+n[0].y,z:+n[0].z||0},!0),"z"in n[0]?[s]:[{x:s.x,y:s.y}]):f.transformCoordinatesArray(u,n,r)},f.transformCoordinatesArray=function(t,e,n){var r,i,o,s,u,l,c,f,h,d={};function p(){if(Array.isArray(e[0]))if(2===e[0].length)s=function(t){return+e[t][0]},u=function(t){return+e[t][1]},c=function(t,e,n){f[t]=[e,n]};else{if(3!==e[0].length)throw new Error("Invalid coordinates. Requires two or three components per array");s=function(t){return+e[t][0]},u=function(t){return+e[t][1]},l=function(t){return+e[t][2]},c=function(t,e,n,r){f[t]=[e,n,r]}}else if(2===e.length)o=2,s=function(t){return+e[t*o]},u=function(t){return+e[t*o+1]},c=function(t,e,n){f[t]=e,f[t+1]=n};else if(3===e.length)o=3,s=function(t){return+e[t*o]},u=function(t){return+e[t*o+1]},l=function(t){return+e[t*o+2]},c=function(t,e,n,r){f[t]=e,f[t+1]=n,f[t+2]=r};else{if(!n)throw new Error("Invalid coordinates");if(2!==n&&3!==n)throw new Error("Number of components should be two or three");o=n,s=function(t){return+e[t]},u=function(t){return+e[t+1]},2===n?c=function(t,e,n){f[t]=e,f[t+1]=n}:(l=function(t){return+e[t+2]},c=function(t,e,n,r){f[t]=e,f[t+1]=n,f[t+2]=r})}}if(l=function(){return 0},!Array.isArray(e))throw new Error("Coordinates are not valid");if((f=[]).length=e.length,i=e.length,!e.length)return f;for(Array.isArray(e[0])||a.isObject(e[0])?(o=1,Array.isArray(e[0])?p():a.isObject(e[0])&&function(){if(!(e[0]&&"x"in e[0]&&"y"in e[0]))throw new Error("Invalid coordinates");s=function(t){return+e[t].x},u=function(t){return+e[t].y},"z"in e[0]?(l=function(t){return+e[t].z},c=function(t,e,n,i){f[r]={x:e,y:n,z:i}}):c=function(t,e,n){f[t]={x:e,y:n}}}()):p(),r=0;r<i;r+=o)d.x=s(r),d.y=u(r),d.z=l(r),h=t.forward(d,!0),c(r,h.x,h.y,h.z);return f},f.transformCoordinatesFlatArray3=function(t,e,n){"use strict";var i,o=t.match(l),a=e.match(l);if(o&&a&&o[1]===a[1]&&o[3]===a[3]){for(i=n.length-3+1;i>=0;i-=3)n[i]*=-1;return n}var s,u=r.Proj(t),c=r.Proj(e),f={},h=new r(u,c);for(i=n.length-3;i>=0;i-=3)f.x=+n[i],f.y=+n[i+1],f.z=+(n[i+2]||0),s=h.forward(f,!0),n[i]=s.x,n[i+1]=s.y,n[i+2]=void 0===s.z?f.z:s.z;return n},f.affineForward=function(t,e){"use strict";var n,r=t.origin,i=t.scale||{x:1,y:1,z:1};for(n=0;n<e.length;n+=1)e[n].x=(e[n].x-r.x)*i.x,e[n].y=(e[n].y-r.y)*i.y,e[n].z=((e[n].z||0)-(r.z||0))*i.z;return e},f.affineInverse=function(t,e){"use strict";var n,r=t.origin,i=t.scale||{x:1,y:1,z:1};for(n=0;n<e.length;n+=1)e[n].x=e[n].x/i.x+r.x,e[n].y=e[n].y/i.y+r.y,e[n].z=(e[n].z||0)/i.z+(r.z||0);return e},f.sphericalDistance=function(t,e,n,i,o){if(i=i||"EPSG:4326",o=o||r.WGS84,(n=n||i)!==i){var a=f.transformCoordinates(n,i,[t,e]);t=a[0],e=a[1]}var s=t.y*Math.PI/180,u=e.y*Math.PI/180,l=(e.x-t.x)*Math.PI/180,c=Math.sin(s),h=Math.cos(s),d=Math.sin(u),p=Math.cos(u),m=Math.atan2(Math.pow(Math.pow(p*Math.sin(l),2)+Math.pow(h*d-c*p*Math.cos(l),2),.5),c*d+h*p*Math.cos(l));return o.a*m},f.vincentyDistance=function(t,e,n,i,o,a){if(i=i||"EPSG:4326",o=o||r.WGS84,a=a||100,(n=n||i)!==i){var s=f.transformCoordinates(n,i,[t,e]);t=s[0],e=s[1]}var u,l,c,h,d,p,m,g,y,v,x=o.a,_=o.b||o.a*(1-(o.f||1/o.rf)),b=o.f||(o.rf?1/o.rf:1-_/x),w=t.y*Math.PI/180,M=e.y*Math.PI/180,A=((e.x-t.x)%360+360)%360*Math.PI/180,T=Math.atan((1-b)*Math.tan(w)),E=Math.atan((1-b)*Math.tan(M)),C=Math.sin(T),k=Math.cos(T),S=Math.sin(E),P=Math.cos(E),O=A,R=A+2*Math.PI;if(w===M&&!A)return{distance:0,alpha1:0,alpha2:0};for(v=a;v>0&&Math.abs(O-R)>1e-12;v-=1)u=Math.pow(Math.pow(P*Math.sin(O),2)+Math.pow(k*S-C*P*Math.cos(O),2),.5),l=C*S+k*P*Math.cos(O),c=Math.atan2(u,l),h=k*P*Math.sin(O)/u,R=O,O=A+(1-(m=b/16*(d=1-Math.pow(h,2))*(4+b*(4-3*d))))*b*h*(c+m*u*((p=l-(d?2*C*S/d:0))+m*l*(2*Math.pow(p,2)-1)));return v?{distance:_*(1+(g=d*(x*x-_*_)/(_*_))/16384*(4096+g*(g*(320-175*g)-768)))*(c-(y=g/1024*(256+g*(g*(74-47*g)-128)))*u*(p+y/4*(l*(2*Math.pow(p,2)-1)-y/6*p*(4*u*u-3)*(4*Math.pow(p,2)-3)))),alpha1:Math.atan2(P*Math.sin(O),k*S-C*P*Math.cos(O)),alpha2:Math.atan2(k*Math.sin(O),-C*P+k*S*Math.cos(O))}:void 0},f.onlyInvertedY=function(t,e){var n=t.match(l),r=e.match(l);return n&&r&&n[1]===r[1]&&n[3]===r[3]},f.proj4=r,t.exports=f},3170:function(t){t.exports={}},5734:function(t,e,n){var r=n(2493).d3,i=n(8524),o=n(4626),a=n(1098).registerWidget,s=n(642),u=n(7376);n(1159);var l=function(t){"use strict";if(!(this instanceof l))return new l(t);i.call(this,t);var e=this,n=[],o=t.width||300,a=t.ticks||6,f=this._init;return this._init=function(){f();var n=e.canvas();r.select(n).attr("class","color-legend-container"),e.popup=r.select(n).append("div").attr("class","color-legend-popup"),t.categories&&e.categories(t.categories)},this._draw=function(){if(r.select(e.canvas()).selectAll("div.geojs-color-legends").remove(),n.length){r.select(e.canvas()).style("display","block");var t=r.select(e.canvas()).append("div").attr("class","geojs-color-legends"),i=o;n.forEach((function(n,r){var o=t.append("div").attr("class","geojs-color-legend");o.append("div").attr("class","geojs-title").text(n.name);var a=o.append("svg").attr("class","svg").attr("width",i).attr("height","40px").attr("viewBox","-20 0 "+i+" 40");"discrete"===n.type?e._drawDiscrete(a,i-40,n):"continuous"===n.type&&e._drawContinous(a,i-40,n)}))}else r.select(e.canvas()).style("display","none")},this.categories=function(t){return void 0===t?n:(n=e._prepareCategories(t),e._draw(),e)},this.addCategories=function(t){return n=n.concat(e._prepareCategories(t)),e._draw(),e},this.removeCategories=function(t){return n=n.filter((function(e){return-1===t.indexOf(e)})),e._draw(),e},this._prepareCategories=function(t){return t.forEach((function(t){t.color=t.colors.map((function(t){return s.convertColorToHex(t,!0)}))})),t},this._drawDiscrete=function(t,n,i){function o(t){var e=Math.ceil(t.domain().length/a),n=t.domain().filter((function(t,n){return n%e==0}));return r.axisBottom(t).tickFormat(r.format(".2s")).tickValues(n)}if(-1===["linear","log","sqrt","pow","quantile","ordinal"].indexOf(i.scale))throw new Error("unsupported scale");var u,l,f,h,d,p,m;if("ordinal"===i.scale){f=r.scaleOrdinal().domain(i.domain).range(i.colors),e._renderDiscreteColors(t,i.domain,f,n,(function(t){return t})),h=r.scaleBand().domain(i.domain).rangeRound([0,n]);var g=Math.ceil(i.domain.length/a),y=i.domain.filter((function(t,e){return e%g==0}));d=r.axisBottom(h).tickValues(y)}else if("quantile"===i.scale){u=[0,i.colors.length],p=s.range(0,i.colors.length-1),l=r.scaleQuantile().domain(i.domain).range(p),f=r.scaleQuantize().domain(u).range(i.colors),e._renderDiscreteColors(t,p,f,n,(function(t){return l.invertExtent(t).join(" - ")}));var v=[l.invertExtent(0)[0]];v=v.concat(p.map((function(t){return l.invertExtent(t)[1]}))),d=o(h=r.scalePoint().domain(v).range([0,n]))}else if(-1!==["linear","log","sqrt","pow"].indexOf(i.scale)){u=[0,i.colors.length],l=r["scale"+i.scale.charAt(0).toUpperCase()+i.scale.slice(1)]().domain(i.domain).range(u).nice(),f=r.scaleQuantize().domain(u).range(i.colors),p=s.range(0,i.colors.length-1);var x=Math.max.apply(null,i.domain.map((function(t){return c(t)})));e._renderDiscreteColors(t,p,f,n,(function(t){return e._popupFormatter(l.invert(t),x)+" - "+e._popupFormatter(l.invert(t+1),x)})),(m=p.slice()).push(i.colors.length),d=o(h=r.scalePoint().domain(m.map((function(t){return l.invert(t)}))).range([0,n]))}i.endAxisLabelOnly&&d.tickValues([h.domain()[0],h.domain()[h.domain().length-1]]),e._renderAxis(t,d)},this._renderDiscreteColors=function(t,n,r,i,o){t.selectAll("rect").data(n).enter().append("rect").attr("width",i/n.length).attr("height","20px").attr("fill",(function(t){return r(t)})).attr("transform",(function(t,e){return"translate("+e*i/n.length+" ,0)"})).on("mousemove",(function(t,n){e._showPopup(t,o(n))})).on("mouseout",e._hidePopup)},this._drawContinous=function(t,n,i){var o,s,l;if(-1===["linear","log","sqrt","pow"].indexOf(i.scale))throw new Error("unsupported scale");var f=[0];for(l=1;l<i.domain.length-1;l++)f.push(n/(i.domain.length-1)*l);f.push(n),o=r["scale"+i.scale.charAt(0).toUpperCase()+i.scale.slice(1)]().domain(i.domain).range(f).nice(),"log"===i.scale&&i.base&&o.base(i.base),"pow"===i.scale&&i.exponent&&o.exponent(i.exponent);var h=u(),d=Math.max.apply(null,i.domain.map((function(t){return c(t)}))),p=t.append("defs").append("linearGradient").attr("id","gradient"+h);for(p.append("stop").attr("offset","0%").attr("stop-color",i.colors[0]),l=1;l<i.colors.length-1;l++)p.append("stop").attr("offset",(100/(i.colors.length-1)*l).toFixed(6)+"%").attr("stop-color",i.colors[l]);p.append("stop").attr("offset","100%").attr("stop-color",i.colors[i.colors.length-1]),t.append("rect").attr("fill","url(#gradient"+h+")").attr("width",n).attr("height","20px").on("mousemove",(function(t){var n=o.invert(r.pointer(t)[0]),i=e._popupFormatter(n,d);e._showPopup(t,i)})).on("mouseout",e._hidePopup),s=r.axisBottom(o).ticks(a,".2s"),i.endAxisLabelOnly&&s.tickValues([i.domain[0],i.domain[i.domain.length-1]]),e._renderAxis(t,s)},this._renderAxis=function(t,e){t.append("g").attr("class","axis x").attr("transform","translate(0, 20)").call(e)},this._popupFormatter=function(t,e){return t=parseFloat(t.toFixed(8)),e=Math.min(e,c(t)),e=Math.min(e,Math.max(3,7-Math.trunc(t).toString().length)),r.format("."+e+"f")(t)},this._showPopup=function(t,n){var i=r.pointer(t,e.canvas());e.popup.text(n);var o=e.canvas().clientWidth,a=e.popup.node().clientWidth;e.popup.style("left",i[0]-(i[0]+a-o>-10?a:0)+"px").style("top",i[1]-22+"px").transition().duration(200).style("opacity",1)},this._hidePopup=function(){e.popup.transition().duration(200).style("opacity",0)},this};function c(t){if(!isFinite(t))return 0;for(var e=1,n=0;Math.round(t*e)/e!==t;){if(!isFinite(t*e))return 0;e*=10,n++}return n}o(l,i),a("dom","colorLegend",l),t.exports=l},8524:function(t,e,n){var r=n(8738),i=n(4626),o=n(1098).registerWidget,a=function(t){"use strict";if(!(this instanceof a))return new a(t);r.call(this,t);var e=this;return this._init=function(){return t.hasOwnProperty("parent")&&t.parent.addChild(e),e._createCanvas(),e._appendCanvasToParent(),e.canvas().addEventListener("mousedown",(function(t){t.stopPropagation()})),e.reposition(),e},this._createCanvas=function(){e.canvas(document.createElement(t.el||"div"))},this};i(a,r),o("dom","dom",a),t.exports=a},4812:function(t,e,n){t.exports={colorLegendWidget:n(5734),domWidget:n(8524),legendWidget:n(9443),scaleWidget:n(2894),sliderWidget:n(3019),svgWidget:n(7854),uiLayer:n(4231),widget:n(8738)}},9443:function(t,e,n){var r=n(7854),i=n(4626),o=n(1098).registerWidget,a=function(t){"use strict";if(!(this instanceof a))return new a(t);r.call(this,t);var e=n(2493).d3,i=n(6409),o=this,s=[],u=null,l=null,c=null;this.categories=function(t){return void 0===t?s.slice():(s=t.slice().map((function(t){return"line"===t.type&&(t.style.fill=!1,t.style.stroke=!0),t})),o.draw(),o)},this.size=function(){var t,n=1,r=e.select(o.canvas()).append("text").style("opacity",1e-6);return s.forEach((function(t){r.text(t.name),n=Math.max(n,r.node().getBBox().width)})),r.remove(),t=20*(s.length+1),{width:n+50,height:t}},this.draw=function(){function t(t){t.style("fill",(function(t){return t.style.fill||void 0===t.style.fill?t.style.fillColor:"none"})).style("fill-opacity",(function(t){return void 0===t.style.fillOpacity?1:t.style.fillOpacity})).style("stroke",(function(t){return t.style.stroke||void 0===t.style.stroke?t.style.strokeColor:"none"})).style("stroke-opacity",(function(t){return void 0===t.style.strokeOpacity?1:t.style.strokeOpacity})).style("stroke-width",(function(t){return void 0===t.style.strokeWidth?1.5:t.style.strokeWidth}))}o._init(),c.attr("height",o.size().height+24).style("display",null);var e=o._scale(),n=l.selectAll("g.geo-label").data(s,(function(t){return t.name})).enter().append("g").attr("class","geo-label").attr("transform",(function(t,n){return"translate(0,"+e.y(n)+")"}));return t(n.filter((function(t){return"point"!==t.type&&"line"!==t.type})).append("rect").attr("x",0).attr("y",-6).attr("rx",5).attr("ry",5).attr("width",40).attr("height",12)),t(n.filter((function(t){return"point"===t.type})).append("circle").attr("cx",20).attr("cy",0).attr("r",6)),t(n.filter((function(t){return"line"===t.type})).append("line").attr("x1",0).attr("y1",0).attr("x2",40).attr("y2",0)),n.append("text").attr("x","50px").attr("y",0).attr("dy","0.3em").text((function(t){return t.name})),o.reposition(),o},this._scale=function(){return{x:e.scaleLinear().domain([0,1]).range([0,o.size().width]),y:e.scaleLinear().domain([0,s.length-1]).range([6,o.size().height-6])}},this._init=function(){u||(o._createCanvas(),o._appendCanvasToParent());var t=o.size().width+24+4,n=o.size().height+24+4;u&&u.remove(),e.select(o.canvas()).attr("width",t).attr("height",n),u=e.select(o.canvas()).append("g"),l=u.append("g").attr("transform","translate("+[14,14]+")"),(c=l.append("rect").attr("x",-12).attr("y",-12).attr("width",t-4).attr("height",n-4).attr("rx",3).attr("ry",3)).style("stroke","black").style("stroke-width","1.5px").style("fill","white").style("fill-opacity",.75).style("display","none"),l.on("mousedown",(function(t){t.stopPropagation()})),l.on("mouseover",(function(){c.transition().duration(250).style("fill-opacity",1)})),l.on("mouseout",(function(){c.transition().duration(250).style("fill-opacity",.75)})),o.reposition()},this.geoOn(i.resize,(function(){o.draw()}))};i(a,r),o("dom","legend",a),t.exports=a},2894:function(t,e,n){var r=n(5616),i=n(4626),o=n(7854),a=n(1098).registerWidget;n(615);var s=function(t){"use strict";if(!(this instanceof s))return new s(t);o.call(this,t);var e=n(6409),i=n(5325),a=n(642),u=n(2493).d3,l=this,c=this._exit,f=r.extend({},{scale:1,maxWidth:200,maxHeight:"left"===t.orientation||"right"===t.orientation?200:20,orientation:"bottom",strokeWidth:2,tickLength:10,units:"si",distance:function(t,e,n){return"+proj=longlat +axis=enu"===n?Math.sqrt(a.distance2dSquared(t,e)):i.sphericalDistance(t,e,n)}},t);this._init=function(){return l._createCanvas(),l._appendCanvasToParent(),l.reposition(),u.select(l.canvas()).attr("width",f.maxWidth).attr("height",f.maxHeight),l.geoOn(e.pan,l._update),l._render(),l},this._exit=function(){l.geoOff(e.pan,l._update),c()},this._vertical=function(){return"left"===f.orientation||"right"===f.orientation},this._scaleValue=function(t,e,n){var r,i,o,a=[{multiple:1,digits:1},{multiple:1.5,digits:2},{multiple:2,digits:1},{multiple:3,digits:1},{multiple:5,digits:1},{multiple:8,digits:1}],u=(n=s.unitsTable[n]||n||s.unitsTable[f.units]||f.units)[0];return n.forEach((function(e){t>=e.scale*(e.minimum||1)&&(u=e)})),i=Math.floor(Math.log(t/u.scale)/Math.log(u.basis||10)),(a=u.multiples||a).forEach((function(e){var n=u.scale*e.multiple*Math.pow(10,i);n<=t&&(r=e,o=n)})),{html:(r.multiple*Math.pow(10,i)).toFixed(Math.max(0,-i+r.digits-1))+" "+u.unit,value:o,pixels:o/t*e,power:i,multiple:r,unitRecord:u,originalValue:t,originalPixels:e}},this._render=function(){var t,e,n,i,o,a,s=u.select(l.canvas()),c=l.layer().map(),h=f.maxWidth,d=f.maxHeight,p=f.strokeWidth,m=.5*p,g=f.tickLength,y=l._vertical();if(t=(y?f.maxHeight:f.maxWidth)-p,n={x:(e={x:(e=r(s.node()).offset()).left+("left"===f.orientation?h-m:m),y:e.top+("top"===f.orientation?d-m:m)}).x+(y?0:t),y:e.y+(y?t:0)},(i=f.distance(c.displayToGcs(e,null),c.displayToGcs(n,null),c.gcs())*f.scale)<=0||!isFinite(i))console.warn("The distance calculated for the scale is invalid: "+i);else{switch(o=l._scaleValue(i,t),y?d=o.pixels+p:h=o.pixels+p,s.attr("width",h).attr("height",d),s.select("polyline").empty()&&s.append("polyline").classed("geojs-scale-widget-bar",!0).attr("fill","none").attr("stroke-width",p),s.select("text").empty()&&s.append("text").classed("geojs-scale-widget-text",!0),f.orientation){case"bottom":a=[[m,g],[m,m],[h-m,m],[h-m,g]],s.select("text").attr("x",h/2).attr("y",2*p).attr("text-anchor","middle").attr("dominant-baseline","hanging");break;case"top":a=[[m,d-g],[m,d-m],[h-m,d-m],[h-m,d-g]],s.select("text").attr("x",h/2).attr("y",d-2*p).attr("text-anchor","middle").attr("dominant-baseline","alphabetic");break;case"left":a=[[h-g,m],[h-m,m],[h-m,d-m],[h-g,d-m]],s.select("text").attr("x",h-2*p).attr("y",d/2).attr("text-anchor","end").attr("dominant-baseline","middle");break;case"right":a=[[g,m],[m,m],[m,d-m],[g,d-m]],s.select("text").attr("x",2*p).attr("y",d/2).attr("text-anchor","start").attr("dominant-baseline","middle")}s.select("polyline").attr("points",a.map((function(t){return t.join(",")})).join(" ")),s.select("text").html(o.html)}},this._update=function(){l._render()},this.options=function(t,e){if(void 0===t){var n=r.extend({},f);return n.position=l.position(void 0,!0),n}return"string"==typeof t&&void 0===e?"position"===t?l.position(void 0,!0):f[t]:(void 0===e?f=r.extend(!0,f,t):f[t]=e,(t.position||"position"===t)&&l.position(t.position||e),l._render(),l)}};i(s,o),s.unitsTable={si:[{unit:"nm",scale:1e-9},{unit:"m",scale:1e-6},{unit:"mm",scale:.001},{unit:"m",scale:1},{unit:"km",scale:1e3}],miles:[{unit:"in",scale:.0254},{unit:"in",scale:.0254,basis:12,multiples:[{multiple:1,digits:1},{multiple:1.5,digits:2},{multiple:2,digits:1},{multiple:3,digits:1},{multiple:6,digits:1},{multiple:9,digits:1}]},{unit:"ft",scale:.3048},{unit:"mi",scale:1609.344}],decmiles:[{unit:"mi",scale:1609.344}]},s.areaUnitsTable={si:[{unit:"nm",scale:1e-18},{unit:"m",scale:1e-12},{unit:"mm",scale:1e-6},{unit:"m",scale:1},{unit:"km",scale:1e6}],hectares:[{unit:"ha",scale:1e4}],decmiles:[{unit:"mi",scale:2589988.110336}],miles:[{unit:"in",scale:64516e-8},{unit:"ft",scale:.09290304},{unit:"mi",scale:2589988.110336}],acres:[{unit:"pl",scale:25.29285264},{unit:"rd",scale:1011.7141056},{unit:"ac",scale:4046.8564224}]},s.formatUnit=function(t,e,n,r){if(null!=t){if(!Array.isArray(e)){if(!(n=n||s.unitsTable)||!n[e||"si"])return;e=n[e||"si"]}var i;for(i=0;i<e.length-1&&!(t<e[i+1].scale);i+=1);if(t/=(e=e[i]).scale,!((r=Math.max(0,-Math.ceil(Math.log10(t))+(void 0===r||r<0?3:r)))>10)){var o=t.toFixed(r);if(r){for(;"0"===o.substr(o.length-1);)o=o.substr(0,o.length-1);"."===o.substr(o.length-1)&&(o=o.substr(0,o.length-1))}return o+" "+e.unit}}},a("dom","scale",s),t.exports=s},3019:function(t,e,n){var r=n(7854),i=n(4626),o=n(1098).registerWidget,a=function(t){"use strict";if(!(this instanceof a))return new a(t);r.call(this,t);var e,i,o,s,u,l,c,f=n(2493).d3,h=n(6409),d=this,p=this._exit,m=t.width||20,g=t.height||160,y=t.width?.5*t.width:10;function v(t,e,n,r,i){var o=e.append("g"),a=i/1024;return o.append("g").append("g").attr("transform","translate("+n+","+r+") scale("+a+") translate(-512,-512)").append("path").attr("d",t).attr("class","geo-glyphicon"),o}c={white:"#f4f4f4",black:"#505050"},this.size=function(){return{width:m,height:g}},this._init=function(){d._createCanvas(),d._appendCanvasToParent(),d.reposition();var t=f.select(d.canvas()),n=d.layer().map();function r(e,r){var o=i.invert(f.pointer(event,t.node())[1]),a=n.zoomRange();o=(1-o)*(a.max-a.min)+a.min,r?n.transition({zoom:o,ease:f.easeCubicInOut,duration:500,done:d._update()}):(n.zoom(o),d._update()),e.stopPropagation()}function a(){f.select(this).attr("filter",null),l.selectAll("circle,rect,path").transition().duration(100).style("fill",(function(t){return c[t.fill]||null})).style("stroke",(function(t){return c[t.stroke]||null}))}return t.attr("width",m).attr("height",g),e=f.scaleLinear().domain([-4,4]).range([0,m]),i=f.scaleLinear().domain([0,1]).range([1.5*m,g-1.5*m]),t=t.append("g").classed("geo-ui-slider",!0),l=t,(o=t.append("g")).append("circle").datum({fill:"white",stroke:null}).classed("geo-zoom-in",!0).attr("cx",e(0)).attr("cy",i(0)-m+2).attr("r",(m-2)/2).style("cursor","pointer").on("click",(function(){var t=n.zoom();n.transition({zoom:t+1,ease:f.easeCubicInOut,duration:500})})).on("mousedown",(function(t){t.stopPropagation()})),v("M512 81.92c-237.568 0-430.080 192.614-430.080 430.080 0 237.568 192.563 430.080 430.080 430.080s430.080-192.563 430.080-430.080c0-237.517-192.563-430.080-430.080-430.080zM564.326 564.326v206.182h-104.653v-206.182h-206.234v-104.653h206.182v-206.234h104.704v206.182h206.182v104.704h-206.182z",o,e(0),i(0)-m+2,m+4).style("cursor","pointer").style("pointer-events","none").select("path").datum({fill:"black",stroke:null}),(s=t.append("g")).append("circle").datum({fill:"white",stroke:null}).classed("geo-zoom-out",!0).attr("cx",e(0)).attr("cy",i(1)+m-2).attr("r",(m-2)/2).style("cursor","pointer").on("click",(function(){var t=n.zoom();n.transition({zoom:t-1,ease:f.easeCubicInOut,duration:500})})).on("mousedown",(function(t){t.stopPropagation()})),v("M512 81.92c-237.568 0-430.080 192.614-430.080 430.080 0 237.568 192.563 430.080 430.080 430.080s430.080-192.563 430.080-430.080c0-237.517-192.563-430.080-430.080-430.080zM770.56 459.674v104.704h-517.12v-104.704h517.12z",s,e(0),i(1)+m-2,m+4).style("cursor","pointer").style("pointer-events","none").select("path").datum({fill:"black",stroke:null}),t.append("rect").datum({fill:"white",stroke:"black"}).classed("geo-zoom-track",!0).attr("x",e(0)-m/6).attr("y",i(0)).attr("rx",m/10).attr("ry",m/10).attr("width",m/3).attr("height",g-3*m).style("cursor","pointer").on("click",(function(t){r(t,!0)})),u=t.append("rect").datum({fill:"black",stroke:null}).classed("geo-zoom-nub",!0).attr("x",e(-4)).attr("y",i(.5)-y/2).attr("rx",3).attr("ry",3).attr("width",m).attr("height",y).style("cursor","pointer").on("mousedown",(function(t){f.select(document).on("mousemove.geo.slider",(function(){r(t)})),f.select(document).on("mouseup.geo.slider",(function(){r(t),f.select(document).on(".geo.slider",null)})),t.stopPropagation()})),l.selectAll("*").on("mouseover",(function(){f.select(this).attr("filter","url(#geo-highlight)"),l.selectAll("rect,path,circle").transition().duration(100).style("fill",(function(t){return t.fill||null})).style("stroke",(function(t){return t.stroke||null}))})).on("mouseout",a),d.geoOn(h.zoom,d._update),a(),d._update(),d},this._exit=function(){d.geoOff(h.zoom,d._update),l.remove(),p()},this._update=function(t){var e=d.layer().map(),n=e.zoomRange(),r=e.zoom(),o=f.scaleLinear();r=(t=t||{}).value||r,o.domain([n.min,n.max]).range([1,0]).clamp(!0),u.attr("y",i(o(r))-y/2)}};i(a,r),o("dom","slider",a),t.exports=a},7854:function(t,e,n){var r=n(8738),i=n(4626),o=n(1098).registerWidget,a=function(t){"use strict";if(!(this instanceof a))return new a(t);r.call(this,t);var e=n(2493),i=this,o=this._exit,s=null;return this._init=function(){var e;return t.hasOwnProperty("parent")&&(t.parent.addChild(i),e=t.parent.canvas()),i._createCanvas(e),i.canvas().addEventListener("mousedown",(function(t){t.stopPropagation()})),i.reposition(),i},this._exit=function(){s&&s._exit(),o()},this._createCanvas=function(t){var n={layer:i.layer(),widget:!0};t&&(n.d3Parent=t),(s=e(n))._resize=function(){},i.canvas(s.canvas().node())},this};i(a,r),o("dom","svg",a),t.exports=a},4231:function(t,e,n){var r=n(4626),i=n(1098).registerLayer,o=n(5156),a=function(t){"use strict";var e=n(1098).createWidget;if(t.renderer="dom",t.sticky=!1,!(this instanceof a))return new a(t);o.call(this,t);var r=this,i=this._exit;this.createWidget=function(t,n){var i=e(t,r,n);return n&&"parent"in n||r.addChild(i),i._init(n),r.modified(),i},this.deleteWidget=function(t){return t._exit(),r.removeChild(t),r.modified(),r},this._exit=function(){r.children().forEach((function(t){r.deleteWidget(t)})),i()}};r(a,o),i("ui",a),t.exports=a},8738:function(t,e,n){var r=n(4626),i=n(5402),o=n(5616),a=function(t){"use strict";if(!(this instanceof a))return new a(t);t=t||{},i.call(this,t);var e=n(6409),r=this,s=this._exit,u=t.layer,l=null,c=void 0===t.position?{left:0,top:0}:t.position;if(!(void 0===t.parent||t.parent instanceof a))throw new Error("Parent must be of type geo.gui.widget");t.parent&&r.parent(t.parent),this._init=function(){return r.modified(),r},this._exit=function(){if(r.children().forEach((function(t){r.removeChild(t),t._exit()})),r.layer().geoOff(e.pan,r.repositionEvent),r.parentCanvas().removeChild&&r.canvas())try{r.parentCanvas().removeChild(r.canvas())}catch(t){}s()},this.layer=function(){return u||r.parent()&&r.parent().layer()},this._createCanvas=function(){throw new Error("Must be defined in derived classes")},this.canvas=function(t){return void 0===t?l:(l=t,r)},this._appendCanvasToParent=function(){r.parentCanvas().appendChild(r.canvas())},this.parentCanvas=function(){return r.parent()?r.parent().canvas():r.layer().canvas()},this.position=function(t,n){if(void 0!==t){r.layer().geoOff(e.pan,r.repositionEvent);var i={};for(var a in c)c.hasOwnProperty(a)&&(i[a]=null);return(c=t).hasOwnProperty("x")&&c.hasOwnProperty("y")&&r.layer().geoOn(e.pan,r.repositionEvent),r.reposition(o.extend(i,r.position())),r}if(c.hasOwnProperty("x")&&c.hasOwnProperty("y")&&!n){var s=r.layer().map().gcsToDisplay(c);return{left:s.x,top:s.y,right:null,bottom:null}}return c},this.reposition=function(t){if(t=t||r.position(),r.canvas()&&r.canvas().style)for(var e in r.canvas().style.position="absolute",t)t.hasOwnProperty(e)&&(/^\s*(-|\+)?(\d+(\.\d*)?|\d*\.\d+)([eE](-|\+)?\d+)?\s*$/.test(t[e])?r.canvas().style[e]=parseFloat(parseFloat(t[e]).toFixed(3))+"px":r.canvas().style[e]=t[e]);return r},this.repositionEvent=function(){return r.reposition()},this.isInViewport=function(){var t=r.position(),e=r.layer();return t.left>=0&&t.top>=0&&t.left<=e.width()&&t.top<=e.height()},c.hasOwnProperty("x")&&c.hasOwnProperty("y")&&this.layer().geoOn(e.pan,r.repositionEvent)};r(a,i),t.exports=a},5966:function(t,e,n){var r=n(5616);function i(t,e,n){this._group=t,this._zoom=e,this._points=[],this._clusters=[],this._count=0,this._parent=null,this._coord=null;var r=this;(n||[]).forEach((function(t){r._add(t)}))}function o(t){var e,o,a=n(7235);for(this._opts=r.extend({maxZoom:18,radius:5},t),this._clusters={},this._points={},e=this._opts.maxZoom;e>=0;e-=1)o=this._opts.radius*Math.pow(2,-e),this._clusters[e]=new a(o),this._points[e]=new a(o);this._topClusterLevel=new i(this,-1)}i.prototype._add=function(t){var e=1;t instanceof i?(this._clusters.push(t),e=t._count):this._points.push(t),t._parent=this,this._increment(e)},i.prototype._increment=function(t){this._coord=null,this._count+=t,this._parent&&this._parent._increment(t)},i.prototype.count=function(){return this._count},i.prototype.each=function(t){var e;for(e=0;e<this._points.length;e+=1)t.call(this,this._points[e],this._zoom);for(e=0;e<this._clusters.length;e+=1)this._clusters[e].each.call(this._clusters[e],t)},i.prototype.coords=function(){var t,e={x:0,y:0};if(this._coord)return this._coord;for(t=0;t<this._points.length;t+=1)e.x+=this._points[t].x,e.y+=this._points[t].y;for(t=0;t<this._clusters.length;t+=1)e.x+=this._clusters[t].coords().x*this._clusters[t].count(),e.y+=this._clusters[t].coords().y*this._clusters[t].count();return{x:e.x/this.count(),y:e.y/this.count()}},o.prototype.addPoint=function(t){var e,n,o,a,s,u;for(e=this._opts.maxZoom;e>=0;e-=1){if(n=this._clusters[e].getNearObject(t))return void n._add(t);if(n=this._points[e].getNearObject(t)){if(o=n._parent)for(u=o._points.length-1;u>=0;u-=1)if(o._points[u]===n){o._points.splice(u,1),o._increment(-1);break}for(o||r.noop(),a=new i(this,e,[n,t]),this._clusters[e].addObject(a,a.coords()),s=a,u=e-1;u>o._zoom;u-=1)s=new i(this,u,[s]),this._clusters[u].addObject(s,s.coords());for(o._add(s),u=e;u>=0&&this._points[u].removeObject(n,n);u-=1);return}this._points[e].addObject(t,t)}this._topClusterLevel._add(t)},o.prototype.points=function(t){return t=Math.min(Math.max(Math.floor(t),0),this._opts.maxZoom-1),this._points[Math.floor(t)].contents()},o.prototype.clusters=function(t){return t=Math.min(Math.max(Math.floor(t),0),this._opts.maxZoom-1),this._clusters[Math.floor(t)].contents()},t.exports=o},5637:function(t,e,n){var r=n(1949),i=n(7715);i=i.__esModule?i.default:i;var o={maxCount:1e3,count:0,memo:{}};function a(t,e){return o.count+=1,o.count>=o.maxCount&&(o.memo={},o.count=0),o.memo[t]=e,e}var s={convertColor:function(t){if(null==t||void 0!==t.r&&void 0!==t.g&&void 0!==t.b)return t;if(void 0!==o.memo[t])return o.memo[t];var e,n=t;if("string"==typeof t){var r=t.toLowerCase();if(i.hasOwnProperty(r))t={r:i[r][0]/255,g:i[r][1]/255,b:i[r][2]/255};else if("#"===t.charAt(0))4===t.length||5===t.length?(5===t.length&&(e=parseInt(t.slice(4),16)/15),t=4352*(3840&(t=parseInt(t.slice(1,4),16)))+272*(240&t)+17*(15&t)):7!==t.length&&9!==t.length||(9===t.length&&(e=parseInt(t.slice(7),16)/255),t=parseInt(t.slice(1,7),16));else if("transparent"===r)e=t=0;else if(r.indexOf("(")>=0)for(var u=0;u<s.cssColorConversions.length;u+=1){var l=s.cssColorConversions[u].regex.exec(r);if(l)return a(n,t=s.cssColorConversions[u].process(r,l))}}return isFinite(t)&&(t={r:((16711680&t)>>16)/255,g:((65280&t)>>8)/255,b:(255&t)/255}),void 0!==e&&t&&void 0!==t.r&&(t.a=e),a(n,t)},convertColorAndOpacity:function(t,e,n){return(t=s.convertColor(t))&&void 0!==t.r&&void 0!==t.g&&void 0!==t.b||(t=s.convertColor(n||{r:0,g:0,b:0})),t&&void 0!==t.r&&void 0!==t.g&&void 0!==t.b||(t={r:0,g:0,b:0}),t={r:isFinite(t.r)&&t.r>=0?t.r<=1?+t.r:1:0,g:isFinite(t.g)&&t.g>=0?t.g<=1?+t.g:1:0,b:isFinite(t.b)&&t.b>=0?t.b<=1?+t.b:1:0,a:r.isNonNullFinite(t.a)&&t.a>=0&&t.a<1?+t.a:1},r.isNonNullFinite(e)&&e<1&&(t.a=e<=0?0:t.a*e),t},convertColorToHex:function(t,e){var n,r=s.convertColor(t);return n=r.r||r.g||r.b?"#"+((1<<24)+(Math.round(255*r.r)<<16)+(Math.round(255*r.g)<<8)+Math.round(255*r.b)).toString(16).slice(1):"#000000",void 0!==r.a&&e&&(r.a<1||"needed"!==e)&&(n+=(256+Math.round(255*r.a)).toString(16).slice(1)),n},convertColorToRGBA:function(t){var e=s.convertColor(t);return e||(e={r:0,g:0,b:0}),(!r.isNonNullFinite(e.a)||e.a>1)&&(e.a=1),"rgba("+Math.round(255*e.r)+", "+Math.round(255*e.g)+", "+Math.round(255*e.b)+", "+ +(+e.a).toFixed(5)+")"},cssAngleUnitsBase:{deg:360,grad:400,rad:2*Math.PI,turn:1},cssNumberRegex:"[+-]?(?:\\d+\\.?\\d*|\\.\\d+)(?:[eE][+-]?\\d+)?"};s.cssColorConversions=[{name:"rgb",regex:new RegExp("^\\s*rgba?\\(\\s*("+s.cssNumberRegex+")\\s*(%?)\\s*,?\\s*("+s.cssNumberRegex+")\\s*(%?)\\s*,?\\s*("+s.cssNumberRegex+")\\s*(%?)\\s*([/,]?\\s*("+s.cssNumberRegex+")\\s*(%?)\\s*)?\\)\\s*$"),process:function(t,e){return t={r:Math.min(1,Math.max(0,+e[1]/(e[2]?100:255))),g:Math.min(1,Math.max(0,+e[3]/(e[4]?100:255))),b:Math.min(1,Math.max(0,+e[5]/(e[6]?100:255)))},e[7]&&(t.a=Math.min(1,Math.max(0,+e[8]/(e[9]?100:1)))),t}},{name:"hsl",regex:new RegExp("^\\s*hsla?\\(\\s*("+s.cssNumberRegex+")\\s*(deg|grad|rad|turn)?\\s*,?\\s*("+s.cssNumberRegex+")\\s*%\\s*,?\\s*("+s.cssNumberRegex+")\\s*%\\s*([/,]?\\s*("+s.cssNumberRegex+")\\s*(%?)\\s*)?\\)\\s*$"),process:function(t,e){var n=function(t,e,n){return 6*(n-=Math.floor(n))<1?t+(e-t)*n*6:6*n<3?e:6*n<4?t+(e-t)*(2/3-n)*6:t},r=+e[1]/(s.cssAngleUnitsBase[e[2]]||360),i=Math.min(1,Math.max(0,+e[3]/100)),o=Math.min(1,Math.max(0,+e[4]/100)),a=o<=.5?o*(i+1):o+i-o*i,u=2*o-a;return t={r:n(u,a,r+1/3),g:n(u,a,r),b:n(u,a,r-1/3)},e[5]&&(t.a=Math.min(1,Math.max(0,+e[6]/(e[7]?100:1)))),t}}],t.exports=s},1949:function(t,e,n){function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}var i=n(5616),o=n(1960);o=o.__esModule?o.default:o;var a,s,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",l='<svg xmlns="http://www.w3.org/2000/svg"><foreignObject width="100%" height="100%"></foreignObject></svg>',c={},f=200,h=15;function d(){var t;for(t=0;t<arguments.length;t+=1)if(isFinite(arguments[t]))return arguments[t]}var p={pointInPolygon:function(t,e,n,r){return e.outer&&(n=e.inner,e=e.outer),!(e.length<3)&&(!(r&&r.min&&r.max&&(t.x<r.min.x||t.y<r.min.y||t.x>r.max.x||t.y>r.max.y))&&p.distanceToPolygon2d(t,n?{outer:e,inner:n}:e,!0)>0)},pointToTriangleBasis2d:function(t,e,n,r){var i=n.x-e.x,o=r.x-e.x,a=n.y-e.y,s=r.y-e.y,u=t.x-e.x,l=t.y-e.y,c=i*s-o*a;if(c)return{x:(u*s-l*o)/c,y:(u*-a+l*i)/c}},isReadyImage:function(t,e){return!!(t instanceof Image&&t.complete&&t.src&&(t.naturalWidth&&t.naturalHeight||e))},isReadyVideo:function(t,e){return!!(t instanceof HTMLVideoElement&&t.src&&void 0!==t.HAVE_CURRENT_DATA&&(t.videoWidth&&t.videoHeight&&t.readyState>=t.HAVE_CURRENT_DATA||e&&t.error))},isFunction:function(t){return"function"==typeof t},ensureFunction:function(t){return p.isFunction(t)?t:function(){return t}},isNonNullFinite:function(t){return isFinite(t)&&null!==t&&!1!==t&&""!==t},randomString:function(t){var e,n,r;for(t=t||8,e="",n=0;n<t;n+=1)r=Math.floor(62*Math.random()),e+=u.substring(r,r+1);return e},normalizeCoordinates:function(t){return t=t||{},Array.isArray(t)?{x:t[0],y:t[1],z:t[2]||0}:{x:d(t.x,t.longitude,t.lng,t.lon,0),y:d(t.y,t.latitude,t.lat,0),z:d(t.z,t.elevation,t.elev,t.height,0)}},range:function(t,e,n){n=n||1;for(var r=[],i=t;i<=e;i+=n)r.push(i);return r},compareArrays:function(t,e){return t.length===e.length&&t.every((function(t,n){return t===e[n]}))},vec3AsArray:function(){return[0,0,0]},mat3AsArray:function(){return[1,0,0,0,1,0,0,0,1]},mat4AsArray:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},getGeomBuffer:function(t,e,n,r,i){r=void 0===r?.2:r,i=void 0===i?.1:i;var o=t.sourceByName(e),a=o.data(),s=Math.floor((r+1)*n);if((a=o.data())instanceof Float32Array&&(a.length===n||a.length>=n&&a.length<=s))return a;var u=n;return a instanceof Float32Array&&a.length&&n&&i>0&&(u=Math.floor((i+1)*n)),a=new Float32Array(u),o.setData(a),a},adjustActions:function(t){var e,n;for(n=0;n<t.length;n+=1){if(e=t[n],"string"===i.type(e.input)){var r={};r[e.input]=!0,e.input=r}if(e.modifiers||(e.modifiers={}),"string"===i.type(e.modifiers)){var o={};o[e.modifiers]=!0,e.modifiers=o}}},addAction:function(t,e,n){n?t.push(e):t.unshift(e),p.adjustActions(t)},hasAction:function(t,e,n,r){e&&e.action&&(n=e.name,r=e.owner,e=e.action);for(var i=0;i<t.length;i+=1)if(!(e&&t[i].action!==e||n&&t[i].name!==n||r&&t[i].owner!==r))return t[i];return null},removeAction:function(t,e,n,r){var o,a=0;do{(o=p.hasAction(t,e,n,r))&&(t.splice(i.inArray(o,t),1),a+=1)}while(o);return a},actionMatch:function(t,e,n){var r;if(n.some((function(n){for(var i in n.input)if(n.input.hasOwnProperty(i)&&(!1===n.input[i]&&t[i]||n.input[i]&&!t[i]))return!1;for(var o in n.modifiers)if(n.modifiers.hasOwnProperty(o)&&(!1===n.modifiers[o]&&e[o]||n.modifiers[o]&&!e[o]))return!1;return r=n,!0})))return r},pixelCoordinateParams:function(t,e,n,r,o){var a,s,u;t&&(a=(t=i(t)).innerWidth(),s=t.innerHeight()),o=o||n,u=(r=r||e)!==e||o!==n;var l=Math.min(0,Math.floor(Math.log(Math.min((a||r)/r,(s||o)/o))/Math.log(2))),c=Math.ceil(Math.log(Math.max(e/r,n/o))/Math.log(2));return{map:{node:t,ingcs:"+proj=longlat +axis=esu",gcs:"+proj=longlat +axis=enu",maxBounds:{left:0,top:0,right:e,bottom:n},unitsPerPixel:Math.pow(2,c),center:{x:e/2,y:n/2},min:l,max:c,zoom:l,clampBoundsX:!0,clampBoundsY:!0,clampZoom:!0},layer:{maxLevel:c,wrapX:!1,wrapY:!1,tileOffset:function(){return{x:0,y:0}},attribution:"",tileWidth:r,tileHeight:o,tileRounding:Math.ceil,tilesAtZoom:u?function(t){var i=Math.pow(2,c-t);return{x:Math.ceil(e/r/i),y:Math.ceil(n/o/i)}}:void 0,tilesMaxBounds:u?function(t){var r=Math.pow(2,c-t);return{x:Math.floor(e/r),y:Math.floor(n/r)}}:void 0}}},centerFromPerimeter:function(t){var e,n,r,i,o,a;if(t&&t.outer&&(t=t.outer),t&&t.length){if(1===t.length)return{x:t[0].x,y:t[0].y};for(e={x:0,y:0},o=0,n=t[t.length-1],a=0;a<t.length;a+=1)r=n,n=t[a],i=Math.sqrt(Math.pow(r.x-n.x,2)+Math.pow(r.y-n.y,2)),e.x+=(n.x+r.x)*i,e.y+=(n.y+r.y)*i,o+=2*i;return e.x/=o,e.y/=o,o?e:{x:n.x,y:n.y}}},distance2dSquared:function(t,e){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r},distance2dToLineSquared:function(t,e,n){var r=n.x-e.x,i=n.y-e.y,o=r*r+i*i,a=0;return o&&(a=((t.x-e.x)*r+(t.y-e.y)*i)/o,a=Math.max(0,Math.min(1,a))),p.distance2dSquared(t,{x:e.x+a*r,y:e.y+a*i})},distanceToPolygon2d:function(t,e,n){for(var r,i,o=e.outer||e,a=!1,s=0,u=o.length,l=u-1;s<u;l=s,s+=1){var c=o[s],f=o[l];c.y>t.y!=f.y>t.y&&t.x<(f.x-c.x)*(t.y-c.y)/(f.y-c.y)+c.x&&(a=!a),i=n?1:p.distance2dToLineSquared(t,c,f),(void 0===r||i<r)&&(r=i)}return e.inner&&e.inner.forEach((function(e){var i=p.distanceToPolygon2d(t,e,n);i*i<r&&(r=i*i),i>0&&(a=!a)})),(a?1:-1)*Math.sqrt(r)},triangleTwiceSignedArea2d:function(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)},crossedLineSegmentPolygon2d:function(t,e,n){var r,i,o=n.outer||n,a=o.length;for(r=0,i=a-1;r<a;i=r,r+=1)if(p.crossedLineSegments2d(t,e,o[r],o[i]))return!0;if(n.inner)for(r=0;r<n.inner.length;r+=1)if(p.crossedLineSegmentPolygon2d(t,e,n.inner[r]))return!0;return!1},crossedLineSegments2d:function(t,e,n,r){return!(t.x>n.x&&t.x>r.x&&e.x>n.x&&e.x>r.x||t.x<n.x&&t.x<r.x&&e.x<n.x&&e.x<r.x||t.y>n.y&&t.y>r.y&&e.y>n.y&&e.y>r.y||t.y<n.y&&t.y<r.y&&e.y<n.y&&e.y<r.y)&&(!(t.x===n.x&&t.y===n.y||t.x===r.x&&t.y===r.y||e.x===n.x&&e.y===n.y||e.x===r.x&&e.y===r.y)&&!(p.triangleTwiceSignedArea2d(t,e,n)*p.triangleTwiceSignedArea2d(t,e,r)>0||p.triangleTwiceSignedArea2d(n,r,t)*p.triangleTwiceSignedArea2d(n,r,e)>0))},segmentCrossesLineList2d:function(t,e,n){return n.some((function(n){return n.some((function(r,i){return!!i&&p.crossedLineSegments2d(t,e,n[i-1],r)}))}))},rdpLineSimplify:function(t,e,n,r){if(t.length<=2||e<0)return t;var i,o,a,s=-1,u=e*e;if(n){for(i=1;i<t.length;i+=1)(o=p.distance2dSquared(t[0],t[i]))>s&&(s=o,a=i);return 4*s<=u?t.slice(a,a+1):(t=t.slice(a).concat(t.slice(0,a+1)),(t=p.rdpLineSimplify(t,e,!1,r)).splice(t.length-1),t)}for(i=1;i<t.length-1;i+=1)(o=p.distance2dToLineSquared(t[i],t[0],t[t.length-1]))>s&&(s=o,a=i);if(s<=u&&(!r||!p.segmentCrossesLineList2d(t[0],t[t.length-1],r)))return[t[0],t[t.length-1]];var l=t.slice(0,a+1),c=t.slice(a),f=p.rdpLineSimplify(l,e,!1,r?r.concat([c]):null),h=p.rdpLineSimplify(c,e,!1,r?r.concat([l]):null);return f.slice(0,f.length-1).concat(h)},getMinMaxValues:function(t,e,n,r){if(t.length&&(r||!i.isNumeric(e)||!i.isNumeric(n))){var o,a,s=t[0],u=t[0];for(a=t.length-1;a>0;a-=1)(o=t[a])<s&&(s=o),o>u&&(u=o);(!i.isNumeric(e)||r&&s>e)&&(e=s),(!i.isNumeric(n)||r&&u<n)&&(n=u)}return{min:e,max:n}},wrapAngle:function(t){return(t%=2*Math.PI)<-Math.PI?t+=2*Math.PI:t>=Math.PI&&(t-=2*Math.PI),t},escapeUnicodeHTML:function(t){return t.replace(/[^- 0-9A-Za-z~`!@#$%^&*()_+={}|[\]\\:";'<>?,./]/g,(function(e,n){var r=e.charCodeAt(0);if(r<127)return e;if(r>=55296&&r<=57344){if(r<56320||n)return"";var i=t.charCodeAt(n-1);if(i<55296||i>=56320)return"";r=1024*(i-55296)+(r-56320)}return"&#"+r.toString(10)+";"}))},dereferenceElements:function(t){var e=[];return i("img,image",t).each((function(){var t=i(this),n=t.is("image")?"href":"src";if(t.attr(n)){var r=new Image;("http"===t.attr(n).substr(0,4)||t[0].crossOrigin)&&(r.crossOrigin=t[0].crossOrigin||"anonymous");var o=i.Deferred();r.onload=function(){var e=document.createElement("canvas");e.width=r.naturalWidth,e.height=r.naturalHeight,e.getContext("2d").drawImage(r,0,0),t.attr(n,e.toDataURL("image/png")),"data:image"!==t.attr(n).substr(0,10)&&t.remove(),o.resolve()},r.onerror=function(){t.remove(),o.resolve()},r.src=t.attr(n),e.push(o)}})),e},dereferenceCssUrlsRegex:/url\(["']?(http[^)"']+|[^:)"']+)["']?\)/g,dereferenceCssUrls:function(t,e,n,r,o){var a=[],s=[];if(t=(t=t.replace(/\/\*[^\0]*?\*\//g,"")).replace(/\r/g,"\n").replace(/\s+\n/g,"\n").replace(/\n\s+/g,"\n").replace(/\n\n+/g,"\n"),o){var u=/(^[^?#]*)\/[^?#/]*([?#]|$)/g.exec(o);o=u&&u[1]?u[1]+"/":null}t.replace(p.dereferenceCssUrlsRegex,(function(t,e){var n=a.length,r=i.Deferred(),u=new XMLHttpRequest;return a.push(r),s.push(""),/^[^/:][^:]*(\/|$)/g.exec(e)&&o&&(e=o+e),u.open("GET",e,!0),u.responseType="arraybuffer",u.onload=function(){if(200===this.status){var t,e=new Uint8Array(this.response),i=new Array(e.length);for(t=0;t<e.length;t+=1)i[t]=String.fromCharCode(e[t]);i=i.join(""),s[n]="url(data:"+u.getResponseHeader("content-type")+";base64,"+btoa(i)+")"}r.resolve()},u.onerror=r.resolve,u.send(),t})),i.when.apply(i,a).then((function(){var i=0;t=t.replace(p.dereferenceCssUrlsRegex,(function(t,e){return s[(i+=1)-1]})),void 0===r?e.text(t):e.style[r]=t,n.resolve()}))},htmlToImageSupported:function(){if(void 0===s){var t=i.Deferred(),e=i(l);e.attr({width:"10px",height:"10px","text-rendering":"optimizeLegibility"}),i("foreignObject",e).append("<div/>");var n=new Image;return n.onload=n.onerror=function(){var e=document.createElement("canvas");e.width=10,e.height=10,e.getContext("2d").drawImage(n,0,0);try{e.toDataURL(),s=!0}catch(t){console.warn("This browser does not support converting HTML to an image via SVG foreignObject.  Some functionality will be limited.",t),s=!1}t.resolve(s)},n.src="data:image/svg+xml;base64,"+btoa(p.escapeUnicodeHTML((new XMLSerializer).serializeToString(e[0]))),t}return s},htmlToImage:function(t,e){var n,r=i.Deferred(),o=[p.htmlToImageSupported()],a=i(t);for(t=i(t).clone();e&&e>0;)(a=a.parent()).is("div")&&((n=i("<div>").attr({class:a.attr("class"),id:a.attr("id")}).css({width:"100%",height:"100%",background:"none",margin:0})).append(t),t=n),e-=1;i("canvas",t).remove(),i("*",t).addBack().each((function(){for(var t=this.style,e=0;e<t.length;e+=1){var n=this.style[e];if(this.style[n].match(p.dereferenceCssUrlsRegex)){var r=i.Deferred();p.dereferenceCssUrls(this.style[n],this,r,n),o.push(r)}}})),(n=i('<div xmlns="http://www.w3.org/1999/xhtml">')).css({width:a.width()+"px",height:a.height()+"px"}),n.append(i("<head>"));var s=i("<body>");return n.append(s),s.css({width:a.width()+"px",height:a.height()+"px",background:"none",margin:0}),s.append(t),o=o.concat(p.dereferenceElements(t)),i('style,link[rel="stylesheet"]').each((function(){var t=i('<style type="text/css">'),e=i.Deferred();if(i(this).is("style")){var r=i(this).text();p.dereferenceCssUrls(r,t,e)}else{var a=i(this).attr("href");i.get(a).done((function(n){p.dereferenceCssUrls(n,t,e,void 0,a)})).fail((function(n,r,i){console.warn("Failed to dereference "+a,r,i),t.remove(),e.resolve()}))}o.push(e),i("head",n).append(t)})),i.when.apply(i,o).then((function(){var t=i(l);t.attr({width:a.width()+"px",height:a.height()+"px","text-rendering":"optimizeLegibility"}),i("foreignObject",t).append(n);var e=new Image;p.htmlToImageSupported()?(e.onload=function(){r.resolve(e)},e.onerror=function(){console.warn("Failed to render html to image"),r.reject()},e.src="data:image/svg+xml;base64,"+btoa(p.escapeUnicodeHTML((new XMLSerializer).serializeToString(t[0])))):r.resolve(e)})),r},timeReport:function(t){return i.each(c,(function(t,e){e.count?(e.stddev=Math.sqrt(Math.abs((e.sum2-e.sum*e.sum/e.count)/e.count)),e.average=e.sum/e.count):(e.stddev=0,e.average=0)})),t?c[t]:c},timeFunctionStart:function(t,e){c[t]&&!e||(c[t]={count:0,sum:0,sum2:0,max:0,recent:[]}),c[t].start=window.performance.now()},timeFunctionStop:function(t){if(c[t]&&c[t].start){var e=window.performance.now()-c[t].start;c[t].start=null,c[t].sum+=e,c[t].sum2+=e*e,c[t].count+=1,c[t].max=Math.max(c[t].max,e),c[t].recent.push(e),c[t].recent.length>f&&c[t].recent.splice(0,c[t].recent.length-f)}},timeRequestAnimationFrame:function(t,e,n,r){c.requestAnimationFrame&&!e||(c.requestAnimationFrame={count:0,sum:0,sum2:0,max:0,above_threshold:0,recent:[],recentsub:[]}),n&&(h=n),r&&(f=r),t&&a?(window.requestAnimationFrame=a,a=null):t||a||(a=window.requestAnimationFrame,window.requestAnimationFrame=function(t){return a.call(window,(function(e){var n,r=c.requestAnimationFrame;r.timestamp!==e&&(r.nowDelta=window.performance.now()-e,Math.abs(r.nowDelta)<1e3&&(r.nowDelta=0),r.timestamp=e,r.subcalls=r.subcalls||0,r.start={sum:r.sum,sum2:r.sum2,count:r.count,max:r.max,above_threshold:r.above_threshold},r.recent.push([0]),r.recentsub.push([]),r.recent.length>f&&(r.recent.splice(0,r.recent.length-f),r.recentsub.splice(0,r.recentsub.length-f))),r.subcalls+=1,t.apply(this,arguments);var i=window.performance.now()-e;i-=r.nowDelta,r.sum=r.start.sum+i,r.sum2=r.start.sum2+i*i,r.count=r.start.count+1,r.max=Math.max(r.max,i),r.above_threshold=r.start.above_threshold+(i>=h?1:0),r.recent[r.recent.length-1]=i,(n=r.recentsub[r.recent.length-1]).push({total_duration:i,duration:i-(n.length?n[n.length-1].total_duration:0),callback:t.name||t})}))})},isObject:function(t){var e=r(t);return null!=t&&("object"===e||"function"===e)},identityFunction:function(t){return t},radiusEarth:o.WGS84.a};t.exports=p},7235:function(t,e,n){var r=n(5616),i={};i.Util={stamp:function(t){return t._leaflet_id=t._leaflet_id||++i.Util.lastId,t._leaflet_id},lastId:0};var o=function(t){this._cellSize=t,this._sqCellSize=t*t,this._grid={},this._objectPoint={}};o.prototype={addObject:function(t,e){var n=this._getCoord(e.x),r=this._getCoord(e.y),o=this._grid,a=o[r]=o[r]||{},s=a[n]=a[n]||[],u=i.Util.stamp(t);e.obj=t,this._objectPoint[u]=e,s.push(t)},updateObject:function(t,e){this.removeObject(t),this.addObject(t,e)},removeObject:function(t,e){var n,r,o=this._getCoord(e.x),a=this._getCoord(e.y),s=this._grid,u=s[a]=s[a]||{},l=u[o]=u[o]||[];for(delete this._objectPoint[i.Util.stamp(t)],n=0,r=l.length;n<r;n++)if(l[n]===t)return l.splice(n,1),1===r&&delete u[o],!0},eachObject:function(t,e){var n,r,i,o,a,s,u=this._grid;for(n in u)for(r in a=u[n])for(i=0,o=(s=a[r]).length;i<o;i++)t.call(e,s[i])&&(i--,o--)},getNearObject:function(t){var e,n,r,o,a,s,u,l,c=this._getCoord(t.x),f=this._getCoord(t.y),h=this._objectPoint,d=this._sqCellSize,p=null;for(e=f-1;e<=f+1;e++)if(o=this._grid[e])for(n=c-1;n<=c+1;n++)if(a=o[n])for(r=0,s=a.length;r<s;r++)u=a[r],(l=this._sqDist(h[i.Util.stamp(u)],t))<d&&(d=l,p=u);return p},contents:function(){return r.map(this._objectPoint,(function(t){return t}))},_getCoord:function(t){return Math.floor(t/this._cellSize)},_sqDist:function(t,e){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r}},t.exports=o},642:function(t,e,n){t.exports=Object.assign(n(1949),n(5637),n(208),n(269),{DistanceGrid:n(7235),ClusterGroup:n(5966),mesh:n(5905),polyops:n(5647)})},5905:function(t,e,n){t.exports={createColoredMesh:function(t,e){var r,i,o,a,s,u=n(5616),l=n(642),c=t.mesh,f=t.style.get("value"),h={used:void 0!==t.style("used")?t.style.get("used"):function(t,e){return l.isNonNullFinite(f(t,e))},opacity:t.style.get("opacity"),value:f},d=t._createMesh(e?{}:h,e?h:{});if(d.elementValues=!!e,!d.numVertices||!d.numElements)return d;var p=c.get("stepped")(d),m=c.get("opacityRange")(d),g=c.get("rangeValues")(d);if(d.stepped=!(void 0!==p&&!p),d.colorMap=[],d.minColor=u.extend({a:c.get("minOpacity")(d)||0},l.convertColor(c.get("minColor")(d))),d.maxColor=u.extend({a:c.get("maxOpacity")(d)||0},l.convertColor(c.get("maxColor")(d))),c.get("colorRange")(d).forEach((function(t,e){d.colorMap.push(u.extend({a:m&&void 0!==m[e]?m[e]:1},l.convertColor(t)))})),r=l.getMinMaxValues(d.value,c.get("min")(d),c.get("max")(d)),d.minValue=r.min,d.maxValue=r.max,g&&d.colorMap&&(g.length===d.colorMap.length+1||!p&&g.length===d.colorMap.length)||(g=null),g)for(s=1;s<g.length;s+=1)if(g[s-1]>g[s]){g=null;break}for(g&&(d.minValue=g[0],d.maxValue=g[g.length-1]),(o=d.maxValue-d.minValue)||(d.colorMap=d.colorMap.slice(0,1),o=1,g=null),d.rangeValues=g,d.factor=(d.colorMap.length-(p?0:1))/o,a=0;a<d.value.length;a+=1)if(i=d.value[a],g&&i>=d.minValue&&i<=d.maxValue){for(s=1;s<g.length;s+=1)if(i<=g[s]){d.value[a]=s-1+(i-g[s-1])/(g[s]-g[s-1]);break}}else d.value[a]=(i-d.minValue)*d.factor;return d}}},269:function(t,e,n){var r,i,o=n(5616),a=n(7945);t.exports={},t.exports.mockWebglRenderer=function(t){"use strict";var e=n(1611);if(void 0===t&&(t=!0),e._mocked)throw new Error("webgl renderer already mocked");var s={},u=function(t){s[t]=(s[t]||0)+1},l=function(t){return function(){u(t)}},c=0,f=function(t){return function(){return u(t),c+=1}},h={activeTexture:l("activeTexture"),attachShader:l("attachShader"),bindAttribLocation:l("bindAttribLocation"),bindBuffer:l("bindBuffer"),bindFramebuffer:l("bindFramebuffer"),bindTexture:l("bindTexture"),blendFuncSeparate:l("blendFuncSeparate"),bufferData:l("bufferData"),bufferSubData:l("bufferSubData"),checkFramebufferStatus:function(t){if(u("checkFramebufferStatus"),t===e.GL.FRAMEBUFFER)return e.GL.FRAMEBUFFER_COMPLETE},clear:l("clear"),clearColor:l("clearColor"),clearDepth:l("clearDepth"),compileShader:l("compileShader"),createBuffer:f("createBuffer"),createFramebuffer:l("createFramebuffer"),createProgram:f("createProgram"),createShader:f("createShader"),createTexture:f("createTexture"),deleteBuffer:l("deleteBuffer"),deleteProgram:l("deleteProgram"),deleteShader:l("deleteShader"),deleteTexture:l("deleteTexture"),detachShader:l("detachShader"),depthFunc:l("depthFunc"),disable:l("disable"),disableVertexAttribArray:l("disableVertexAttribArray"),drawArrays:l("drawArrays"),enable:l("enable"),enableVertexAttribArray:l("enableVertexAttribArray"),finish:l("finish"),getError:l("getError"),getExtension:f("getExtension"),getParameter:function(t){switch(u("getParameter"),t){case e.GL.ALIASED_POINT_SIZE_RANGE:return[1,64];case e.GL.DEPTH_BITS:return 16;case e.GL.MAX_TEXTURE_SIZE:return 4096}},getProgramParameter:function(t,n){if(u("getProgramParameter"),n===e.GL.LINK_STATUS)return!0},getShaderInfoLog:function(){return u("getShaderInfoLog"),"log"},getShaderParameter:function(t,n){if(u("getShaderParameter"),n===e.GL.COMPILE_STATUS)return!0},getSupportedExtensions:function(){return u("getSupportedExtensions"),[]},getUniformLocation:f("getUniformLocation"),isEnabled:function(t){if(u("isEnabled"),t===e.GL.BLEND)return!0},linkProgram:l("linkProgram"),pixelStorei:l("pixelStorei"),shaderSource:l("shaderSource"),texImage2D:l("texImage2D"),texParameteri:l("texParameteri"),uniform1iv:l("uniform1iv"),uniform1fv:l("uniform1fv"),uniform2fv:l("uniform2fv"),uniform3fv:l("uniform3fv"),uniform4fv:l("uniform4fv"),uniformMatrix3fv:l("uniformMatrix3fv"),uniformMatrix4fv:l("uniformMatrix4fv"),useProgram:l("useProgram"),vertexAttribPointer:l("vertexAttribPointer"),vertexAttrib3fv:l("vertexAttrib3fv"),viewport:l("viewport")};r=e.renderWindow;var d=function(){e.renderWindow=r;var t,n=new e.renderWindow;return e.renderWindow=d,n._setup=function(){var r,i=n.renderers(),a=n.windowSize(),s=n.windowPosition();for(t=o.extend({},e.GL,h),r=0;r<i.length;r+=1)(i[r].width()>a[0]||0===i[r].width()||i[r].height()>a[1]||0===i[r].height())&&i[r].resize(s[0],s[1],a[0],a[1]);return!0},n.context=function(){return t},n};e.renderWindow=d,i=a.supported,a.supported=function(){return!!t},a._maxTextureSize=4096,a._maxPointSize=64,e._mocked=!0,e.mockCounts=function(){return s}},t.exports.restoreWebglRenderer=function(){var t=n(1611);t._mocked&&(t.renderWindow=r,a.supported=i,delete t._mocked,delete t.mockCounts)}},5647:function(t,e,n){function r(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var o=n(6820),a=n(6211),s=n(1949),u={"+":"union","|":"union",add:"union","-":"difference",sub:"difference",subtract:"difference",minus:"difference","*":"intersect","&":"intersect",mul:"intersect",multiply:"intersect",x:"xor","^":"xor"};function l(t,e,n){for(t="select"+t.charAt(0).toUpperCase()+t.slice(1),o.epsilon(e);n.length>1;){for(var r=[],i=Math.ceil(n.length/2),a=0;a<i;a+=1){var s=n[a];if(a+i<n.length){var u=n[a+i];try{s=o.combine(s,u)}catch(t){s=o.segments(o.polygon(s)),u=o.segments(o.polygon(u));for(var l=20;l>=6;l-=1){o.epsilon(Math.pow(.1,l));try{s=o.combine(s,u);break}catch(t){}}o.epsilon(e)}s.combined?(s.combined=s.combined.filter((function(t){return Math.abs(t.start[0]-t.end[0])>e||Math.abs(t.start[1]-t.end[1])>e})),s=o[t](s)):console.warn("Failed in polygon functions."),s.segments=s.segments.filter((function(t){return Math.abs(t.start[0]-t.end[0])>e||Math.abs(t.start[1]-t.end[1])>e}))}r.push(s)}n=r}return n}function c(t,e,n){if(e=e||{},t.toPolygonList){if(e.style=t,!(t=t.toPolygonList(n)).length)return e.min=e.max=[0,0],e.epsilon=1e-10,t}else{if(e.style="",t.outer?(e.style="-outer",t=[[t.outer].concat(r(t.inner||[]))]):t.length&&t[0].outer&&(e.style="-outer-list",t=t.map((function(t){return[t.outer].concat(r(t.inner||[]))}))),!t.length)return e.style="flat-listlist"+e.style,e.min=e.max=[0,0],e.epsilon=1e-10,t;void 0!==t[0].x?(e.style="object",t=[[t.map((function(t){return[t.x,t.y]}))]]):void 0!==t[0][0].x?(e.style="object-list"+e.style,t=[t.map((function(t){return t.map((function(t){return[t.x,t.y]}))}))]):void 0===t[0][0][0]?(e.style="flat",t=[[t]]):void 0!==t[0][0][0].x?(e.style="object-listlist"+e.style,t=t.map((function(t){return t.map((function(t){return t.map((function(t){return[t.x,t.y]}))}))}))):void 0===t[0][0][0][0]?(e.style="flat-list",t=[t]):e.style="flat-listlist"+e.style}return e.min=[t[0][0][0][0],t[0][0][0][1]],e.max=[t[0][0][0][0],t[0][0][0][1]],t.forEach((function(t){return t.forEach((function(t){return t.forEach((function(t){t[0]<e.min[0]&&(e.min[0]=t[0]),t[0]>e.max[0]&&(e.max[0]=t[0]),t[1]<e.min[1]&&(e.min[1]=t[1]),t[1]>e.max[1]&&(e.max[1]=t[1])}))}))})),e.epsilon=1e-10*Math.max(Math.max(e.max[0],e.max[1]),Math.max(Math.abs(e.min[0]),Math.abs(e.min[1]))),t}function f(t,e,n){return e.style.fromPolygonList?e.style.fromPolygonList(t,n):(e.style.includes("object")&&(t=t.map((function(t){return t.map((function(t){return t.map((function(t){return{x:t[0],y:t[1]}}))}))}))),e.style.includes("outer")&&(t=[t.map((function(t){return{outer:t[0],inner:t.slice(1)}}))]),e.style.endsWith("listlist")||(t=e.style.endsWith("list")?t[0]:t[0][0]),t)}function h(t,e,r,i){var h=n(5325);t=u[t]||t,e.poly1&&(e=(i=e).poly1,r=i.poly2);var d=(i=i||{}).ingcs||(i.map?i.map.ingcs():e.gcs?e.gcs():e.layer&&e.layer().gcs?e.layer().gcs():e.layer?e.layer().map().ingcs():e.map instanceof a?e.map().ingcs():void 0),p=i.ingcs||(i.map?i.map.ingcs():r.gcs?r.gcs():r.layer&&r.layer().gcs?r.layer().gcs():r.layer?r.layer().map().ingcs():r.map instanceof a?r.map().ingcs():d),m=i.gcs||(i.map?i.map.gcs():e.layer?e.layer().map().gcs():e.map instanceof a?e.map().gcs():void 0),g={},y={};e=c(e,g,i),r=c(r,y,i),g.epsilon=i.epsilon1||g.epsilon,y.epsilon=i.epsilon2||g.epsilon,d&&m&&d!==m&&(e=e.map((function(t){return t.map((function(t){return h.transformCoordinates(d,m,t)}))}))),p&&m&&p!==m&&(r=r.map((function(t){return t.map((function(t){return h.transformCoordinates(p,m,t)}))})));var v=e.map((function(t){return o.segments({regions:t})})),x=r.map((function(t){return o.segments({regions:t})}));v=l(i.innerOperation||"union",g.epsilon,v),x=l(i.innerOperation||"union",y.epsilon,x);var _=v;v[0]&&x[0]?(v[0].inverted=!1,x[0].inverted=!1,_=l(t,Math.max(g.epsilon,y.epsilon),[v[0],x[0]])):x[0]&&(_=x);var b,w,M=function(t){var e=[],n=[],r=[],i=[];t.forEach((function(t){return o.polygon(t).regions.forEach((function(t){var e=t.map((function(t){return{x:t[0],y:t[1]}}));e.length<3||(i.push([]),n.forEach((function(t,r){s.pointInPolygon(e[0],t)?i[n.length].push(r):s.pointInPolygon(t[0],e)&&i[r].push(n.length)})),r.push(t),n.push(e))}))}));for(var a=Array(r.length),u=0;u<r.length;){for(var l=0;l<r.length;l+=1)void 0!==a[l]||i[l].length||(a[l]=e.length,e.push([r[l].reverse()]),u+=1);for(var c=0;c<r.length;c+=1)void 0===a[c]&&1===i[c].length&&void 0!==a[i[c][0]]&&(e[a[i[c][0]]].push(r[c]),a[c]=a[i[c][0]],u+=1);for(var f=0;f<r.length;f+=1)i[f]=i[f].filter((function(t){return void 0===a[t]}))}return e.length?e:[[]]}(_);return i.correspond&&function(t,e,n,r){var i={},o=[];n.forEach((function(t,e){return t.forEach((function(t){return t.forEach((function(t){var n="_"+t[0]+"_"+t[1];i[n]?-1===i[n].indexOf(e)&&i[n].push(e):i[n]=[e],o.length<=e&&o.push(0),o[e]+=1}))}))})),["poly1","poly2"].forEach((function(a){var s="poly1"===a?t:e,u="poly1"===a?"exact1":"exact2";r[a]=Array(s.length),r[u]=Array(s.length),s.forEach((function(t,e){var s={},l=0;t.forEach((function(t){return t.forEach((function(t){var e="_"+t[0]+"_"+t[1];i[e]?i[e].forEach((function(t){s[t]=(s[t]||0)+1})):l+=1}))})),Object.keys(s).forEach((function(i){s[i]!==o[+i]||l||t.length!==n[+i].length||(r[u][e]||(r[u][e]=[]),r[u][e].push(+i)),s[i]>=2&&(r[a][e]||(r[a][e]=[]),r[a][e].push(+i))}))}))}))}(e,r,M,i.correspond),d&&m&&d!==m&&(M=M.map((function(t){return t.map((function(t){return h.transformCoordinates(m,d,t)}))}))),f(M,{style:i.style||(b=M,w=g.style,w.fromPolygonList?w:b.length>1?w.includes("outer")?w+(w.endsWith("list")?"":"-list"):w.endsWith("listlist")?w:w+(w.endsWith("list")?"list":"-listlist"):1===b.length&&b[0].length>1?w.includes("outer")||w.endsWith("list")?w:w+"-list":w)},i)}function d(t){return function(e,n,r){return h(t,e,n,r)}}t.exports={union:d("union"),intersect:d("intersect"),difference:d("difference"),xor:d("xor"),toPolygonList:c,fromPolygonList:f}},208:function(t){var e=function(t,e,n,r,i){var o,a=0;return"boolean"!=typeof e&&(i=r,r=n,n=e,e=void 0),"function"!=typeof r&&(i=r,r=function(){}),function(){var s=this,u=+new Date-a,l=arguments;function c(){a=+new Date,n.apply(s,l)}r.apply(s,l),i&&!o&&c(),o&&clearTimeout(o),void 0===i&&u>t?c():!0!==e&&(o=setTimeout(i?function(){o=void 0}:c,void 0===i?t-u:t))}};t.exports={throttle:e,debounce:function(t,n,r,i){return"boolean"!=typeof n&&(i=r,r=n,n=!1),e(t,!1,r,i=i||function(){},!!n)}}},6858:function(t,e,n){var r=n(4626),i=n(1275),o=n(642),a=function(t){"use strict";if(!(this instanceof a))return new a(t);var e=n(5616);t=t||{},i.call(this,t);var r=this,s=this._init;this.featureType="vector",this.origin=function(t){return void 0===t?r.style("origin"):(r.style("origin",t),r.dataTime().modified(),r)},this.delta=function(t){return void 0===t?r.style("delta"):(r.style("delta",t),r.dataTime().modified(),r)},this._init=function(t){s.call(r,t);var n=e.extend({},{strokeColor:"black",strokeWidth:2,strokeOpacity:1,originStyle:"none",endStyle:"arrow",origin:{x:0,y:0,z:0},delta:o.identityFunction,scale:null},void 0===t.style?{}:t.style);return void 0!==t.origin&&(n.origin=t.origin),r.style(n),r.dataTime().modified(),r}};r(a,i),t.exports=a},4081:function(t){t.exports="0.0.0-semantically-released"},6552:function(t,e,n){n(698).GL={ACTIVE_ATTRIBUTES:35721,ACTIVE_TEXTURE:34016,ACTIVE_UNIFORMS:35718,ALIASED_LINE_WIDTH_RANGE:33902,ALIASED_POINT_SIZE_RANGE:33901,ALPHA:6406,ALPHA_BITS:3413,ALWAYS:519,ARRAY_BUFFER:34962,ARRAY_BUFFER_BINDING:34964,ATTACHED_SHADERS:35717,BACK:1029,BLEND:3042,BLEND_COLOR:32773,BLEND_DST_ALPHA:32970,BLEND_DST_RGB:32968,BLEND_EQUATION:32777,BLEND_EQUATION_ALPHA:34877,BLEND_EQUATION_RGB:32777,BLEND_SRC_ALPHA:32971,BLEND_SRC_RGB:32969,BLUE_BITS:3412,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,BROWSER_DEFAULT_WEBGL:37444,BUFFER_SIZE:34660,BUFFER_USAGE:34661,BYTE:5120,CCW:2305,CLAMP_TO_EDGE:33071,COLOR_ATTACHMENT0:36064,COLOR_BUFFER_BIT:16384,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,COMPILE_STATUS:35713,COMPRESSED_TEXTURE_FORMATS:34467,CONSTANT_ALPHA:32771,CONSTANT_COLOR:32769,CONTEXT_LOST_WEBGL:37442,CULL_FACE:2884,CULL_FACE_MODE:2885,CURRENT_PROGRAM:35725,CURRENT_VERTEX_ATTRIB:34342,CW:2304,DECR:7683,DECR_WRAP:34056,DELETE_STATUS:35712,DEPTH_ATTACHMENT:36096,DEPTH_BITS:3414,DEPTH_BUFFER_BIT:256,DEPTH_CLEAR_VALUE:2931,DEPTH_COMPONENT:6402,DEPTH_COMPONENT16:33189,DEPTH_FUNC:2932,DEPTH_RANGE:2928,DEPTH_STENCIL:34041,DEPTH_STENCIL_ATTACHMENT:33306,DEPTH_TEST:2929,DEPTH_WRITEMASK:2930,DITHER:3024,DONT_CARE:4352,DST_ALPHA:772,DST_COLOR:774,DYNAMIC_DRAW:35048,ELEMENT_ARRAY_BUFFER:34963,ELEMENT_ARRAY_BUFFER_BINDING:34965,EQUAL:514,FASTEST:4353,FLOAT:5126,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,FRAGMENT_SHADER:35632,FRAMEBUFFER:36160,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_BINDING:36006,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_UNSUPPORTED:36061,FRONT:1028,FRONT_AND_BACK:1032,FRONT_FACE:2886,FUNC_ADD:32774,FUNC_REVERSE_SUBTRACT:32779,FUNC_SUBTRACT:32778,GENERATE_MIPMAP_HINT:33170,GEQUAL:518,GREATER:516,GREEN_BITS:3411,HIGH_FLOAT:36338,HIGH_INT:36341,INCR:7682,INCR_WRAP:34055,INT:5124,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,INVALID_ENUM:1280,INVALID_FRAMEBUFFER_OPERATION:1286,INVALID_OPERATION:1282,INVALID_VALUE:1281,INVERT:5386,KEEP:7680,LEQUAL:515,LESS:513,LINEAR:9729,LINEAR_MIPMAP_LINEAR:9987,LINEAR_MIPMAP_NEAREST:9985,LINES:1,LINE_LOOP:2,LINE_STRIP:3,LINE_WIDTH:2849,LINK_STATUS:35714,LOW_FLOAT:36336,LOW_INT:36339,LUMINANCE:6409,LUMINANCE_ALPHA:6410,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_CUBE_MAP_TEXTURE_SIZE:34076,MAX_FRAGMENT_UNIFORM_VECTORS:36349,MAX_RENDERBUFFER_SIZE:34024,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_TEXTURE_SIZE:3379,MAX_VARYING_VECTORS:36348,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VIEWPORT_DIMS:3386,MEDIUM_FLOAT:36337,MEDIUM_INT:36340,MIRRORED_REPEAT:33648,NEAREST:9728,NEAREST_MIPMAP_LINEAR:9986,NEAREST_MIPMAP_NEAREST:9984,NEVER:512,NICEST:4354,NONE:0,NOTEQUAL:517,NO_ERROR:0,ONE:1,ONE_MINUS_CONSTANT_ALPHA:32772,ONE_MINUS_CONSTANT_COLOR:32770,ONE_MINUS_DST_ALPHA:773,ONE_MINUS_DST_COLOR:775,ONE_MINUS_SRC_ALPHA:771,ONE_MINUS_SRC_COLOR:769,OUT_OF_MEMORY:1285,PACK_ALIGNMENT:3333,POINTS:0,POLYGON_OFFSET_FACTOR:32824,POLYGON_OFFSET_FILL:32823,POLYGON_OFFSET_UNITS:10752,RED_BITS:3410,RENDERBUFFER:36161,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_BINDING:36007,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_STENCIL_SIZE:36181,RENDERBUFFER_WIDTH:36162,RENDERER:7937,REPEAT:10497,REPLACE:7681,RGB:6407,RGB565:36194,RGB5_A1:32855,RGBA:6408,RGBA4:32854,SAMPLER_2D:35678,SAMPLER_CUBE:35680,SAMPLES:32937,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_BUFFERS:32936,SAMPLE_COVERAGE:32928,SAMPLE_COVERAGE_INVERT:32939,SAMPLE_COVERAGE_VALUE:32938,SCISSOR_BOX:3088,SCISSOR_TEST:3089,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,SHORT:5122,SRC_ALPHA:770,SRC_ALPHA_SATURATE:776,SRC_COLOR:768,STATIC_DRAW:35044,STENCIL_ATTACHMENT:36128,STENCIL_BACK_FAIL:34817,STENCIL_BACK_FUNC:34816,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,STENCIL_BITS:3415,STENCIL_BUFFER_BIT:1024,STENCIL_CLEAR_VALUE:2961,STENCIL_FAIL:2964,STENCIL_FUNC:2962,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_TEST:2960,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STREAM_DRAW:35040,SUBPIXEL_BITS:3408,TEXTURE:5890,TEXTURE0:33984,TEXTURE1:33985,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE2:33986,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE3:33987,TEXTURE30:34014,TEXTURE31:34015,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE_2D:3553,TEXTURE_BINDING_2D:32873,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP:34067,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TRIANGLES:4,TRIANGLE_FAN:6,TRIANGLE_STRIP:5,UNPACK_ALIGNMENT:3317,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,UNSIGNED_BYTE:5121,UNSIGNED_INT:5125,UNSIGNED_SHORT:5123,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,VALIDATE_STATUS:35715,VENDOR:7936,VERSION:7938,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_SHADER:35633,VIEWPORT:2978,ZERO:0}},10:function(t,e,n){var r=n(698),i=n(4626),o=n(1982),a=n(3503);r.actor=function(){"use strict";if(!(this instanceof r.actor))return new r.actor;r.node.call(this);var t=this,e=a.create(),n=r.boundingObject.ReferenceFrame.Relative,i=null;return this.matrix=function(){return e},this.referenceFrame=function(){return n},this.mapper=function(){return i},this.setMapper=function(e){e!==i&&(i=e,t.boundsModified())},this.computeBounds=function(){if(null!=i){var n,r,a,s,u=t.computeBoundsTimestamp();(t.boundsDirtyTimestamp().getMTime()>u.getMTime()||i.boundsDirtyTimestamp().getMTime()>u.getMTime())&&(i.computeBounds(),r=[(n=i.bounds())[0],n[2],n[4]],a=[n[1],n[3],n[5]],o.transformMat4(r,r,e),o.transformMat4(a,a,e),s=[r[0]>a[0]?a[0]:r[0],r[0]>a[0]?r[0]:a[0],r[1]>a[1]?a[1]:r[1],r[1]>a[1]?r[1]:a[1],r[2]>a[2]?a[2]:r[2],r[2]>a[2]?r[2]:a[2]],t.setBounds(s[0],s[1],s[2],s[3],s[4],s[5]),u.modified())}else t.resetBounds()},t},i(r.actor,r.node)},8576:function(t,e,n){var r=n(698),i=n(4626);r.blendFunction=function(t,e){"use strict";if(!(this instanceof r.blendFunction))return new r.blendFunction(t,e);var n=t,i=e;return this.apply=function(t){t.m_context.blendFuncSeparate(n,i,r.GL.ONE,r.GL.ONE_MINUS_SRC_ALPHA)},this},r.blend=function(){"use strict";if(!(this instanceof r.blend))return new r.blend;r.materialAttribute.call(this,r.materialAttributeType.Blend);var t=!1,e=r.blendFunction(r.GL.SRC_ALPHA,r.GL.ONE_MINUS_SRC_ALPHA);return this.bind=function(n){return t=n.m_context.isEnabled(r.GL.BLEND),this.enabled()?(n.m_context.enable(r.GL.BLEND),e.apply(n)):n.m_context.disable(r.GL.BLEND),!0},this.undoBind=function(e){return t?e.m_context.enable(r.GL.BLEND):e.m_context.disable(r.GL.BLEND),!0},this},i(r.blend,r.materialAttribute)},3556:function(t,e,n){var r=n(698),i=n(4626),o=n(77);r.boundingObject=function(){"use strict";if(!(this instanceof r.boundingObject))return new r.boundingObject;r.object.call(this);var t=[0,0,0,0,0,0],e=o(),n=o();return e.modified(),n.modified(),this.bounds=function(){return t},this.hasValidBounds=function(t){return t[0]!==Number.MAX_VALUE&&t[1]!==-Number.MAX_VALUE&&t[2]!==Number.MAX_VALUE&&t[3]!==-Number.MAX_VALUE&&t[4]!==Number.MAX_VALUE&&t[5]!==-Number.MAX_VALUE},this.setBounds=function(n,r,i,o,a,s){if(this.hasValidBounds([n,r,i,o,a,s]))return t[0]=n,t[1]=r,t[2]=i,t[3]=o,t[4]=a,t[5]=s,this.modified(),e.modified(),!0},this.resetBounds=function(){t[0]=Number.MAX_VALUE,t[1]=-Number.MAX_VALUE,t[2]=Number.MAX_VALUE,t[3]=-Number.MAX_VALUE,t[4]=Number.MAX_VALUE,t[5]=-Number.MAX_VALUE,this.modified()},this.computeBounds=function(){},this.computeBoundsTimestamp=function(){return e},this.boundsDirtyTimestamp=function(){return n},this.resetBounds(),this},r.boundingObject.ReferenceFrame={Relative:0,Absolute:1},i(r.boundingObject,r.object)},4580:function(t,e,n){var r=n(698),i=n(4626),o=n(77),a=n(1982),s=n(4663),u=n(3503);r.camera=function(t){"use strict";if(!(this instanceof r.camera))return new r.camera(t);r.groupNode.call(this),t=t||{};var e=30*Math.PI/180,n=s.fromValues(0,0,1,1),i=s.fromValues(0,0,0,1),l=s.fromValues(0,1,0,0),c=1,f=s.fromValues(0,0,-1,0),h=u.create(),d=u.create(),p=o(),m=o(),g=-1,y=1,v=1,x=-1,_={zoom:1,tilesize:256},b=!1,w=[0,0,0,0],M=r.GL.COLOR_BUFFER_BIT|r.GL.DEPTH_BUFFER_BIT;return void 0!==t.parallelProjection&&(b=!!t.parallelProjection),this.setViewAspect=function(t){c=t,this.modified()},this.parallelExtents=function(){return _},this.setParallelExtents=function(t){var e,n,r=["width","height","zoom","tilesize"],i=!1;for(e=0;e<r.length;e+=1)void 0!==t[n=r[e]]&&t[n]!==_[n]&&(_[n]=t[n],i=!0);if(i&&_.width&&_.height&&void 0!==_.zoom&&_.tilesize){var o=this.unitsPerPixel(_.zoom,_.tilesize);y=o*_.width/2,g=-y,v=o*_.height/2,x=-v,this.modified()}},this.unitsPerPixel=function(t,e){return e=e||256,360*Math.pow(2,-t)/e},this.viewMatrix=function(){return this.computeViewMatrix()},this.setViewMatrix=function(t,e){e?h=t.slice():u.copy(h,t),p.modified()},this.projectionMatrix=function(){return this.computeProjectionMatrix()},this.setProjectionMatrix=function(t){u.copy(d,t),m.modified()},this.clearMask=function(){return M},this.clearColor=function(){return w},this.clearDepth=function(){return 1},this.computeDirectionOfProjection=function(){a.subtract(f,i,n),a.normalize(f,f),this.modified()},this.computeViewMatrix=function(){return p.getMTime()<this.getMTime()&&(u.lookAt(h,n,i,l),p.modified()),h},this.computeProjectionMatrix=function(){return m.getMTime()<this.getMTime()&&(b?u.ortho(d,g,y,x,v,.01,1e4):u.perspective(d,e,c,.01,1e4),m.modified()),d},this.computeDirectionOfProjection(),this},i(r.camera,r.groupNode)},7695:function(t,e,n){var r=n(698);r.data=function(){"use strict";if(!(this instanceof r.data))return new r.data;this.type=function(){}},r.data.raster=0,r.data.point=1,r.data.lineString=2,r.data.polygon=3,r.data.geometry=10},4831:function(t,e,n){var r=n(698);r.event={},r.event.keyPress="vgl.event.keyPress",r.event.mousePress="vgl.event.mousePress",r.event.mouseRelease="vgl.event.mouseRelease",r.event.contextMenu="vgl.event.contextMenu",r.event.configure="vgl.event.configure",r.event.enable="vgl.event.enable",r.event.mouseWheel="vgl.event.mouseWheel",r.event.keyRelease="vgl.event.keyRelease",r.event.middleButtonPress="vgl.event.middleButtonPress",r.event.startInteraction="vgl.event.startInteraction",r.event.enter="vgl.event.enter",r.event.rightButtonPress="vgl.event.rightButtonPress",r.event.middleButtonRelease="vgl.event.middleButtonRelease",r.event.char="vgl.event.char",r.event.disable="vgl.event.disable",r.event.endInteraction="vgl.event.endInteraction",r.event.mouseMove="vgl.event.mouseMove",r.event.mouseOut="vgl.event.mouseOut",r.event.expose="vgl.event.expose",r.event.timer="vgl.event.timer",r.event.leftButtonPress="vgl.event.leftButtonPress",r.event.leave="vgl.event.leave",r.event.rightButtonRelease="vgl.event.rightButtonRelease",r.event.leftButtonRelease="vgl.event.leftButtonRelease",r.event.click="vgl.event.click",r.event.dblClick="vgl.event.dblClick"},7327:function(t,e,n){var r=n(698),i=n(4626),o=n(77);r.primitive=function(){"use strict";if(!(this instanceof r.primitive))return new r.primitive;var t=0,e=0,n=null;return this.indices=function(){return n},this.numberOfIndices=function(){return n.length},this.primitiveType=function(){return t},this.setPrimitiveType=function(e){t=e},this.indicesValueType=function(){return e},this.setIndicesValueType=function(t){e=t},this.setIndices=function(t){n=new Uint16Array(t)},this},r.triangles=function(){"use strict";return this instanceof r.triangles?(r.primitive.call(this),this.setPrimitiveType(r.GL.TRIANGLES),this.setIndicesValueType(r.GL.UNSIGNED_SHORT),this):new r.triangles},i(r.triangles,r.primitive),r.points=function(){"use strict";return this instanceof r.points?(r.primitive.call(this),this.setPrimitiveType(r.GL.POINTS),this.setIndicesValueType(r.GL.UNSIGNED_SHORT),this):new r.points},i(r.points,r.primitive),r.sourceData=function(t){"use strict";if(!(this instanceof r.sourceData))return new r.sourceData(t);var e={},n=[],i=(t=t||{}).name||"Source "+(new Date).toISOString(),o=function(){this.m_numberOfComponents=0,this.m_dataType=0,this.m_dataTypeSize=0,this.m_normalized=!1,this.m_stride=0,this.m_offset=0};return this.data=function(){return n},this.getData=function(){return this.data()},this.dataToFloat32Array=function(){return n instanceof Float32Array||(n=new Float32Array(n)),n},this.setData=function(t){t instanceof Array||t instanceof Float32Array?n=t instanceof Float32Array?t:t.slice(0):console.log("[error] Requires array")},this.addAttribute=function(t,n,r,i,a,s,u){if(!e.hasOwnProperty(t)){var l=new o;l.m_dataType=n,l.m_dataTypeSize=r,l.m_offset=i,l.m_stride=a,l.m_numberOfComponents=s,l.m_normalized=u,e[t]=l}},this.hasKey=function(t){return e.hasOwnProperty(t)},this.keys=function(){return Object.keys(e)},this.attributeNumberOfComponents=function(t){return e.hasOwnProperty(t)?e[t].m_numberOfComponents:0},this.normalized=function(t){return!!e.hasOwnProperty(t)&&e[t].m_normalized},this.attributeDataType=function(t){if(e.hasOwnProperty(t))return e[t].m_dataType},this.attributeOffset=function(t){return e.hasOwnProperty(t)?e[t].m_offset:0},this.attributeStride=function(t){return e.hasOwnProperty(t)?e[t].m_stride:0},this.pushBack=function(t){},this.insert=function(t){var e;if(!n.length&&t.length&&t instanceof Float32Array)n=t;else if(n.slice||!n.length&&t.slice||(n=Array.prototype.slice.call(n)),t.length)if(!n.length&&t.slice)n=t.slice(0);else for(e=0;e<t.length;e+=1)n[n.length]=t[e];else n[n.length]=t},this.name=function(){return i},this},r.sourceDataAnyfv=function(t,e,n){"use strict";return this instanceof r.sourceDataAnyfv?(r.sourceData.call(this,n),this.addAttribute(e,r.GL.FLOAT,4,0,4*t,t,!1),this.pushBack=function(t){this.insert(t)},this):new r.sourceDataAnyfv(t,e,n)},i(r.sourceDataAnyfv,r.sourceData),r.sourceDataP3fv=function(t){"use strict";return this instanceof r.sourceDataP3fv?(r.sourceData.call(this,t),this.addAttribute(r.vertexAttributeKeys.Position,r.GL.FLOAT,4,0,12,3,!1),this.pushBack=function(t){this.insert(t)},this):new r.sourceDataP3fv(t)},i(r.sourceDataP3fv,r.sourceData),r.sourceDataT2fv=function(t){"use strict";return this instanceof r.sourceDataT2fv?(r.sourceData.call(this,t),this.addAttribute(r.vertexAttributeKeys.TextureCoordinate,r.GL.FLOAT,4,0,8,2,!1),this.pushBack=function(t){this.insert(t)},this):new r.sourceDataT2fv(t)},i(r.sourceDataT2fv,r.sourceData),r.geometryData=function(){"use strict";if(!(this instanceof r.geometryData))return new r.geometryData;r.data.call(this);var t=[],e=[],n=[0,0,0,0,0,0],i=o(),a=o();return this.type=function(){return r.data.geometry},this.name=function(){return""},this.addSource=function(t){return-1===e.indexOf(t)&&(e.push(t),t.hasKey(r.vertexAttributeKeys.Position)&&a.modified(),!0)},this.source=function(t){return t<e.length?e[t]:0},this.sourceByName=function(t){for(var n=0;n<e.length;n+=1)if(e[n].name()===t)return e[n];return 0},this.numberOfSources=function(){return e.length},this.sourceData=function(t){var n;for(n=0;n<e.length;n+=1)if(e[n].hasKey(t))return e[n];return null},this.addPrimitive=function(e){return t.push(e),!0},this.primitive=function(e){return e<t.length?t[e]:null},this.numberOfPrimitives=function(){return t.length},this.bounds=function(){return a.getMTime()>i.getMTime()&&this.computeBounds(),n},this.boundsDirty=function(t){return t&&a.modified(),a.getMTime()>i.getMTime()},this.setBounds=function(t,e,r,o,a,s){return n[0]=t,n[1]=e,n[2]=r,n[3]=o,n[4]=a,n[5]=s,i.modified(),!0},this},i(r.geometryData,r.data)},29:function(t,e,n){var r=n(698),i=n(4626);r.graphicsObject=function(t){"use strict";if(!(this instanceof r.graphicsObject))return new r.graphicsObject;r.object.call(this);return this._setup=function(t){return!1},this._cleanup=function(t){return!1},this},i(r.graphicsObject,r.object)},7616:function(t,e,n){var r=n(698),i=n(4626);r.groupNode=function(){"use strict";if(!(this instanceof r.groupNode))return new r.groupNode;r.node.call(this);var t=[];return this.addChild=function(e){return e instanceof r.node&&(-1===t.indexOf(e)&&(e.setParent(this),t.push(e),this.boundsDirtyTimestamp().modified(),!0))},this.removeChild=function(e){if(e.parent()===this){var n=t.indexOf(e);if(n>=0)return t.splice(n,1),e.setParent(null),this.boundsDirtyTimestamp().modified(),!0}},this.removeChildren=function(){for(;t.length;)this.removeChild(t[0]);this.modified()},this.children=function(){return t},this.hasChild=function(e){var n=0,r=!1;for(n=0;n<t.length;n+=1)if(t[n]===e){r=!0;break}return r},this},i(r.groupNode,r.node)},1611:function(t,e,n){t.exports=n(698),n(6552),n(9156),n(3556),n(9838),n(4831),n(29),n(4970),n(1232),n(2971),n(10),n(7616),n(4580),n(8576),n(7695),n(7327),n(5763),n(5796),n(5794),n(796),n(8888),n(3471),n(4933),n(7205)},9838:function(t,e,n){var r=n(698),i=n(4626),o=n(77);r.mapper=function(t){"use strict";if(!(this instanceof r.mapper))return new r.mapper(t);r.boundingObject.call(this);var e=[0,1,1],n=null,i=[],a={},s=void 0!==(t=t||{}).dynamicDraw&&t.dynamicDraw,u=o(),l=null,c=this;function f(t){a={},i=[]}function h(t){c.deleteVertexBufferObjects(t),f(),function(t){if(n){t&&(l=t.m_context);var e,o,c,f,h,d,p,m=n.numberOfSources(),g=null;for(e=0;e<m;e+=1){for(g=l.createBuffer(),l.bindBuffer(r.GL.ARRAY_BUFFER,g),(p=n.source(e).data())instanceof Float32Array||(p=new Float32Array(p)),l.bufferData(r.GL.ARRAY_BUFFER,p,s?r.GL.DYNAMIC_DRAW:r.GL.STATIC_DRAW),f=n.source(e).keys(),h=[],o=0;o<f.length;o+=1)h.push(f[o]);a[e]=h,i[e]=g}for(d=n.numberOfPrimitives(),c=0;c<d;c+=1)g=l.createBuffer(),l.bindBuffer(r.GL.ARRAY_BUFFER,g),l.bufferData(r.GL.ARRAY_BUFFER,n.primitive(c).indices(),r.GL.STATIC_DRAW),i[e]=g,e+=1;u.modified()}}(t)}return this.deleteVertexBufferObjects=function(t){var e,n=l;if(t&&(n=t.m_context),n)for(e=0;e<i.length;e+=1)n.deleteBuffer(i[e])},this._cleanup=function(t){c.deleteVertexBufferObjects(t),f(t),c.modified()},this.computeBounds=function(){if(null!=n){var t=this.computeBoundsTimestamp(),e=null;this.boundsDirtyTimestamp().getMTime()>t.getMTime()&&(e=n.bounds(),this.setBounds(e[0],e[1],e[2],e[3],e[4],e[5]),t.modified())}else this.resetBounds()},this.color=function(){return e},this.geometryData=function(){return n},this.setGeometryData=function(t){n!==t&&(n=t,this.modified(),this.boundsDirtyTimestamp().modified())},this.updateSourceBuffer=function(t,e,o){if(o&&(l=o.m_context),!l)return!1;for(var a=-1,s=0;s<n.numberOfSources();s+=1)if(n.source(s).name()===t){a=s;break}return!(a<0||a>=i.length)&&(e||(e=n.source(s).dataToFloat32Array()),l.bindBuffer(r.GL.ARRAY_BUFFER,i[a]),e instanceof Float32Array?l.bufferSubData(r.GL.ARRAY_BUFFER,0,e):l.bufferSubData(r.GL.ARRAY_BUFFER,0,new Float32Array(e)),!0)},this.getSourceBuffer=function(t){var e=n.sourceByName(t);return e?e.dataToFloat32Array():new Float32Array},this.render=function(t,e){(this.getMTime()>u.getMTime()||t.m_contextChanged)&&h(t),(l=t.m_context).vertexAttrib3fv(r.vertexAttributeKeys.Color,this.color());var o,s,c=0,f=0,d=null;for(o in a)if(a.hasOwnProperty(o)){for(l.bindBuffer(r.GL.ARRAY_BUFFER,i[c]),f=0;f<a[o].length;f+=1)t.m_material.bindVertexData(t,a[o][f]);c+=1}for(s=n.numberOfPrimitives(),f=0;f<s;f+=1,c+=1)if((d=n.primitive(f)).numberOfIndices()){switch(l.bindBuffer(r.GL.ARRAY_BUFFER,i[c]),d.primitiveType()){case r.GL.POINTS:l.drawArrays(r.GL.POINTS,0,d.numberOfIndices());break;case r.GL.LINES:l.drawArrays(r.GL.LINES,0,d.numberOfIndices());break;case r.GL.LINE_STRIP:l.drawArrays(r.GL.LINE_STRIP,0,d.numberOfIndices());break;case r.GL.TRIANGLES:l.drawArrays(r.GL.TRIANGLES,0,d.numberOfIndices());break;case r.GL.TRIANGLE_STRIP:l.drawArrays(r.GL.TRIANGLE_STRIP,0,d.numberOfIndices())}l.bindBuffer(r.GL.ARRAY_BUFFER,null)}e||this.undoBindVertexData(t)},this.undoBindVertexData=function(t){var e,n;for(e in a)if(a.hasOwnProperty(e))for(n=0;n<a[e].length;n+=1)t.m_material.undoBindVertexData(t,a[e][n])},this},i(r.mapper,r.boundingObject)},4970:function(t,e,n){var r=n(698),i=n(4626);r.material=function(){"use strict";if(!(this instanceof r.material))return new r.material;r.graphicsObject.call(this);var t=this,e=new r.shaderProgram,n=100,i={},o={};return this.binNumber=function(){return n},this.setBinNumber=function(e){n=e,t.modified()},this.exists=function(t){return t.type()===r.materialAttributeType.Texture?i.hasOwnProperty(t.textureUnit()):o.hasOwnProperty(t.type())},this.addAttribute=function(n){return!t.exists(n)&&(n.type()===r.materialAttributeType.Texture?(i[n.textureUnit()]=n,t.modified(),!0):(n.type()===r.materialAttributeType.ShaderProgram&&(e=n),o[n.type()]=n,t.modified(),!0))},this.shaderProgram=function(){return e},this._cleanup=function(n){for(var r in o)o.hasOwnProperty(r)&&o[r]._cleanup(n);for(r in i)i.hasOwnProperty(r)&&i[r]._cleanup(n);e._cleanup(n),t.modified()},this.bind=function(t){var n=null;for(n in e.bind(t),o)o.hasOwnProperty(n)&&o[n]!==e&&o[n].bind(t);for(n in i)i.hasOwnProperty(n)&&i[n].bind(t)},this.undoBind=function(t){var e=null;for(e in o)o.hasOwnProperty(e)&&o[e].undoBind(t);for(e in i)i.hasOwnProperty(e)&&i[e].undoBind(t)},this.bindVertexData=function(t,e){var n=null;for(n in o)o.hasOwnProperty(n)&&o[n].bindVertexData(t,e)},this.undoBindVertexData=function(t,e){var n=null;for(n in o)o.hasOwnProperty(n)&&o[n].undoBindVertexData(t,e)},t},r.material.RenderBin={Base:0,Default:100,Opaque:100,Transparent:1e3,Overlay:1e4},i(r.material,r.graphicsObject)},1232:function(t,e,n){var r=n(698),i=n(4626);r.materialAttributeType={Undefined:0,ShaderProgram:1,Texture:2,Blend:3,Depth:4},r.materialAttribute=function(t){"use strict";if(!(this instanceof r.materialAttribute))return new r.materialAttribute(t);r.graphicsObject.call(this);var e=t;return this.type=function(){return e},this.enabled=function(){return true},this.bindVertexData=function(t,e){return!1},this.undoBindVertexData=function(t,e){return!1},this},i(r.materialAttribute,r.graphicsObject)},2971:function(t,e,n){var r=n(698),i=n(4626);r.node=function(){"use strict";if(!(this instanceof r.node))return new r.node;r.boundingObject.call(this);var t=null,e=null,n=!0;return this.material=function(){return e},this.setMaterial=function(t){return t!==e&&(e=t,this.modified(),!0)},this.visible=function(){return n},this.setVisible=function(t){return t!==n&&(n=t,this.modified(),!0)},this.parent=function(){return t},this.setParent=function(e){return e!==t&&(null!==t&&t.removeChild(this),t=e,this.modified(),!0)},this.boundsModified=function(){this.boundsDirtyTimestamp().modified(),null!==t&&t.boundsModified()},this},i(r.node,r.boundingObject)},9156:function(t,e,n){var r=n(698),i=n(77);r.object=function(){"use strict";if(!(this instanceof r.object))return new r.object;var t=i();return t.modified(),this.modified=function(){t.modified()},this.getMTime=function(){return t.getMTime()},this}},5763:function(t,e,n){var r=n(698),i=n(4626);r.renderWindow=function(t){"use strict";if(!(this instanceof r.renderWindow))return new r.renderWindow(t);r.graphicsObject.call(this);var e=this,n=0,i=0,o=400,a=400,s=t,u=null,l=[],c=null;return this.windowSize=function(){return[o,a]},this.windowPosition=function(){return[n,i]},this.renderers=function(){return l},this.activeRenderer=function(){return u},this.addRenderer=function(t){return!1===e.hasRenderer(t)&&(l.push(t),t.setRenderWindow(e),null===u&&(u=t),0!==t.layer()&&t.camera().setClearMask(r.GL.DepthBufferBit),e.modified(),!0)},this.hasRenderer=function(t){var e;for(e=0;e<l.length;e+=1)if(t===l[e])return!0;return!1},this.positionAndResize=function(t,r,s,u){var c;for(n=t,i=r,o=s,a=u,c=0;c<l.length;c+=1)l[c].positionAndResize(n,i,o,a);e.modified()},this._setup=function(t){c=null;try{var e;for(c=s.getContext("webgl")||s.getContext("experimental-webgl"),e=0;e<l.length;e+=1)(l[e].width()>o||0===l[e].width()||l[e].height()>a||0===l[e].height())&&l[e].resize(n,i,o,a);return!0}catch(t){}return c||console("[ERROR] Unable to initialize WebGL. Your browser may not support it."),!1},this.context=function(){return c},this._cleanup=function(t){var n;for(n=0;n<l.length;n+=1)l[n]._cleanup(t);r.clearCachedShaders(t?t.m_context:null),e.modified()},this.render=function(){var t;for(l.sort((function(t,e){return t.layer()-e.layer()})),t=0;t<l.length;t+=1)l[t].render()},e},i(r.renderWindow,r.graphicsObject)},5796:function(t,e,n){var r=n(698),i=n(4626),o=n(3503);r.renderState=function(){"use strict";this.m_context=null,this.m_modelViewMatrix=o.create(),this.m_normalMatrix=o.create(),this.m_projectionMatrix=null,this.m_material=null,this.m_mapper=null},r.renderer=function(t){"use strict";if(!(this instanceof r.renderer))return new r.renderer(t);r.graphicsObject.call(this),t=t||{};var e=this;return e.m_renderWindow=null,e.m_contextChanged=!1,e.m_sceneRoot=new r.groupNode,e.m_camera=new r.camera(t),e.m_nearClippingPlaneTolerance=null,e.m_x=0,e.m_y=0,e.m_width=0,e.m_height=0,e.m_resizable=!0,e.m_resetScene=!0,e.m_layer=0,e.m_renderPasses=null,e.m_resetClippingRange=!0,e.m_depthBits=null,e.m_camera.addChild(e.m_sceneRoot),this.width=function(){return e.m_width},this.height=function(){return e.m_height},this.layer=function(){return e.m_layer},this.setLayer=function(t){e.m_layer=t,e.modified()},this.renderWindow=function(){return e.m_renderWindow},this.setRenderWindow=function(t){e.m_renderWindow!==t&&(e.m_renderWindow&&e.m_renderWindow.removeRenderer(this),e.m_renderWindow=t,e.m_contextChanged=!0,e.modified())},this.camera=function(){return e.m_camera},this.render=function(){var t,n,i,a=null,s=[],u=o.create(),l=null;if((n=new r.renderState).m_renderer=e,n.m_context=e.renderWindow().context(),e.m_depthBits&&!e.m_contextChanged||(e.m_depthBits=n.m_context.getParameter(r.GL.DEPTH_BITS)),n.m_contextChanged=e.m_contextChanged,e.m_renderPasses)for(t=0;t<e.m_renderPasses.length;t+=1){if(e.m_renderPasses[t].render(n))return console.log("returning"),void e.m_renderPasses[t].remove(n);e.m_renderPasses[t].remove(n)}for(n.m_context.enable(r.GL.DEPTH_TEST),n.m_context.depthFunc(r.GL.LEQUAL),e.m_camera.clearMask()&r.GL.COLOR_BUFFER_BIT&&(l=e.m_camera.clearColor(),n.m_context.clearColor(l[0],l[1],l[2],l[3])),e.m_camera.clearMask()&r.GL.DEPTH_BUFFER_BIT&&n.m_context.clearDepth(e.m_camera.clearDepth()),n.m_context.clear(e.m_camera.clearMask()),n.m_context.viewport(e.m_x,e.m_y,e.m_width,e.m_height),(i=e.m_sceneRoot.children()).length>0&&e.m_resetScene&&(e.m_resetScene=!1),t=0;t<i.length;t+=1)(a=i[t]).computeBounds(),a.visible()&&a.material().binNumber()>=0&&s.push([a.material().binNumber(),a]);for(s.sort((function(t,e){return t[0]-e[0]})),t=0;t<s.length;t+=1){if((a=s[t][1]).referenceFrame()===r.boundingObject.ReferenceFrame.Relative){var c=e.m_camera.viewMatrix();c instanceof Array&&(n.m_modelViewMatrix=new Array(16)),o.multiply(n.m_modelViewMatrix,c,a.matrix()),n.m_projectionMatrix=e.m_camera.projectionMatrix(),n.m_modelViewAlignment=e.m_camera.viewAlignment()}else n.m_modelViewMatrix=a.matrix(),n.m_modelViewAlignment=null,n.m_projectionMatrix=o.create(),o.ortho(n.m_projectionMatrix,0,e.m_width,0,e.m_height,-1,1);o.invert(u,n.m_modelViewMatrix),o.transpose(n.m_normalMatrix,u),n.m_material=a.material(),n.m_mapper=a.mapper(),n.m_material.bind(n),n.m_mapper.render(n),n.m_material.undoBind(n)}n.m_context.finish(),e.m_contextChanged=!1,e.m_lastRenderState=n},this.resize=function(t,n){t&&n&&e.positionAndResize(e.m_x,e.m_y,t,n)},this.positionAndResize=function(t,n,r,i){var o;if(t<0||n<0||r<=0||i<=0)console.log("[error] Invalid position and resize values",t,n,r,i);else if(e.m_resizable&&(e.m_width=r,e.m_height=i,e.m_camera.setViewAspect(r/i),e.m_camera.setParallelExtents({width:r,height:i}),e.modified()),e.m_renderPasses)for(o=0;o<e.m_renderPasses.length;o+=1)e.m_renderPasses[o].resize(r,i),e.m_renderPasses[o].renderer().positionAndResize(t,n,r,i)},this.addActor=function(t){return t instanceof r.actor&&(e.m_sceneRoot.addChild(t),e.modified(),!0)},this.hasActor=function(t){return e.m_sceneRoot.hasChild(t)},this.removeActor=function(t){return-1!==e.m_sceneRoot.children().indexOf(t)&&(e.m_lastRenderState&&(t.mapper()&&t.mapper()._cleanup(e.m_lastRenderState),t.material()&&t.material()._cleanup(e.m_lastRenderState)),t.modified(),e.m_sceneRoot.removeChild(t),e.modified(),!0)},this.setResetScene=function(t){e.m_resetScene!==t&&(e.m_resetScene=t,e.modified())},this._cleanup=function(t){for(var n=e.m_sceneRoot.children(),r=0;r<n.length;r+=1){var i=n[r];i.material()._cleanup(t),i.mapper()._cleanup(t)}e.m_sceneRoot.removeChildren(),e.modified()},e},i(r.renderer,r.graphicsObject)},5794:function(t,e,n){var r=n(698),i=n(4626),o=n(77);r.shader=function(t){"use strict";if(!(this instanceof r.shader))return new r.shader(t);r.object.call(this);var e=[],n=t,i="";this._getContextEntry=function(t){var n,r,i=t.m_context;for(n=0;n<e.length;n+=1)if(e[n].context===i)return e[n];return r={context:i,compileTimestamp:o()},e.push(r),r},this.removeContext=function(t){var n,r=t.m_context;for(n=0;n<e.length;n+=1)if(e[n].context===r)return void e.splice(n,1)},this.shaderHandle=function(t){return this._getContextEntry(t).shaderHandle},this.setShaderSource=function(t){i=t,this.modified()},this.compile=function(t){var e=this._getContextEntry(t);return this.getMTime()<e.compileTimestamp.getMTime()?e.shaderHandle:(t.m_context.deleteShader(e.shaderHandle),e.shaderHandle=t.m_context.createShader(n),t.m_context.shaderSource(e.shaderHandle,i),t.m_context.compileShader(e.shaderHandle),t.m_context.getShaderParameter(e.shaderHandle,r.GL.COMPILE_STATUS)?(e.compileTimestamp.modified(),e.shaderHandle):(console.log("[ERROR] An error occurred compiling the shaders: "+t.m_context.getShaderInfoLog(e.shaderHandle)),console.log(i),t.m_context.deleteShader(e.shaderHandle),null))},this.attachShader=function(t,e){t.m_context.attachShader(e,this.shaderHandle(t))}},i(r.shader,r.object),function(){"use strict";var t=[];r.getCachedShader=function(e,n,i){for(var o=0;o<t.length;o+=1)if(t[o].type===e&&t[o].context===n&&t[o].source===i)return o&&t.splice(0,0,t.splice(o,1)[0]),t[0].shader;var a=new r.shader(e);return a.setShaderSource(i),t.unshift({type:e,context:n,source:i,shader:a}),t.length>=10&&t.splice(10,t.length-10),a},r.clearCachedShaders=function(e){for(var n=t.length-1;n>=0;n-=1)null!=e&&t[n].context!==e||t.splice(n,1)}}()},796:function(t,e,n){var r=n(698),i=n(4626),o=n(77);r.shaderProgram=function(){"use strict";if(!(this instanceof r.shaderProgram))return new r.shaderProgram;r.materialAttribute.call(this,r.materialAttributeType.ShaderProgram);var t=this,e=0,n=o(),i=o(),a=[],s=[],u={},l={},c={};return this.queryUniformLocation=function(t,n){return t.m_context.getUniformLocation(e,n)},this.queryAttributeLocation=function(t,n){return t.m_context.getAttribLocation(e,n)},this.addShader=function(e){if(a.indexOf(e)>-1)return!1;var n;for(n=a.length-2;n>=0;n-=1)a[n].shaderType()===e.shaderType()&&a.splice(n,1);return a.push(e),t.modified(),!0},this.addUniform=function(e){return!(s.indexOf(e)>-1)&&(s.push(e),t.modified(),!0)},this.addVertexAttribute=function(e,n){u[n]=e,t.modified()},this.uniformLocation=function(t){return l[t]},this.attributeLocation=function(t){return c[t]},this.uniform=function(t){var e;for(e=0;e<s.length;e+=1)if(s[e].name()===t)return s[e];return null},this.updateUniforms=function(t){var e;for(e=0;e<s.length;e+=1)s[e].callGL(t,l[s[e].name()])},this.link=function(t){return t.m_context.linkProgram(e),!!t.m_context.getProgramParameter(e,r.GL.LINK_STATUS)||(console.log("[ERROR] Unable to initialize the shader program."),!1)},this.use=function(t){t.m_context.useProgram(e)},this._setup=function(t){0===e&&(e=t.m_context.createProgram())},this._cleanup=function(e){t.deleteVertexAndFragment(e),t.deleteProgram(e),t.modified()},this.deleteProgram=function(t){e&&t.m_context.deleteProgram(e),e=0},this.deleteVertexAndFragment=function(t){var n;for(n=0;n<a.length;n+=1)a[n].shaderHandle(t)&&t.m_context.detachShader(e,a[n].shaderHandle(t)),t.m_context.deleteShader(a[n].shaderHandle(t)),a[n].removeContext(t)},this.compileAndLink=function(r){var i;if(!(n.getMTime()>=this.getMTime())){for(t._setup(r),i=0;i<a.length;i+=1)a[i].compile(r),a[i].attachShader(r,e);t.bindAttributes(r),t.link(r)||(console.log("[ERROR] Failed to link Program"),t._cleanup(r)),n.modified()}},this.bind=function(e){var n=0;for(i.getMTime()<t.getMTime()?(t.compileAndLink(e),t.use(e),t.bindUniforms(e),i.modified()):t.use(e),n=0;n<s.length;n+=1)s[n].update(e,t);t.updateUniforms(e)},this.undoBind=function(t){t.m_context.useProgram(null)},this.bindVertexData=function(t,e){u.hasOwnProperty(e)&&u[e].bindVertexData(t,e)},this.undoBindVertexData=function(t,e){u.hasOwnProperty(e)&&u[e].undoBindVertexData(t,e)},this.bindUniforms=function(t){var e;for(e=0;e<s.length;e+=1)l[s[e].name()]=this.queryUniformLocation(t,s[e].name())},this.bindAttributes=function(t){var n,r;for(n in u)u.hasOwnProperty(n)&&(r=u[n].name(),t.m_context.bindAttribLocation(e,n,r),c[r]=n)},t},i(r.shaderProgram,r.materialAttribute)},8888:function(t,e,n){var r=n(698),i=n(4626),o=n(77);r.texture=function(){"use strict";if(!(this instanceof r.texture))return new r.texture;r.materialAttribute.call(this,r.materialAttributeType.Texture),this.m_width=0,this.m_height=0,this.m_depth=0,this.m_textureHandle=null,this.m_textureUnit=0,this.m_pixelFormat=r.GL.RGBA,this.m_pixelDataType=r.GL.UNSIGNED_BYTE,this.m_internalFormat=r.GL.RGBA,this.m_nearestPixel=!1,this.m_image=null;var t=o(),e=this;function n(t){if(!(e.m_textureUnit>=0&&e.m_textureUnit<32))throw"[error] Texture unit "+e.m_textureUnit+" is not supported";t.m_context.activeTexture(r.GL.TEXTURE0+e.m_textureUnit)}return this.setup=function(e){n(e),e.m_context.deleteTexture(this.m_textureHandle),this.m_textureHandle=e.m_context.createTexture(),e.m_context.bindTexture(r.GL.TEXTURE_2D,this.m_textureHandle),e.m_context.texParameteri(r.GL.TEXTURE_2D,r.GL.TEXTURE_MIN_FILTER,this.m_nearestPixel?r.GL.NEAREST:r.GL.LINEAR),e.m_context.texParameteri(r.GL.TEXTURE_2D,r.GL.TEXTURE_MAG_FILTER,this.m_nearestPixel?r.GL.NEAREST:r.GL.LINEAR),e.m_context.texParameteri(r.GL.TEXTURE_2D,r.GL.TEXTURE_WRAP_S,r.GL.CLAMP_TO_EDGE),e.m_context.texParameteri(r.GL.TEXTURE_2D,r.GL.TEXTURE_WRAP_T,r.GL.CLAMP_TO_EDGE),null!==this.m_image?(e.m_context.pixelStorei(r.GL.UNPACK_ALIGNMENT,1),e.m_context.pixelStorei(r.GL.UNPACK_FLIP_Y_WEBGL,!0),this.updateDimensions(),this.computeInternalFormatUsingImage(),e.m_context.texImage2D(r.GL.TEXTURE_2D,0,this.m_internalFormat,this.m_pixelFormat,this.m_pixelDataType,this.m_image)):e.m_context.texImage2D(r.GL.TEXTURE_2D,0,this.m_internalFormat,this.m_width,this.m_height,0,this.m_pixelFormat,this.m_pixelDataType,null),e.m_context.bindTexture(r.GL.TEXTURE_2D,null),t.modified()},this.bind=function(e){this.getMTime()>t.getMTime()&&this.setup(e),n(e),e.m_context.bindTexture(r.GL.TEXTURE_2D,this.m_textureHandle)},this.undoBind=function(t){t.m_context.bindTexture(r.GL.TEXTURE_2D,null)},this.image=function(){return this.m_image},this.setImage=function(t){return null!==t&&(this.m_image=t,this.updateDimensions(),this.modified(),!0)},this.nearestPixel=function(){return this.m_nearestPixel},this.setNearestPixel=function(t){return(t=!!t)!==this.m_nearestPixel&&(this.m_nearestPixel=t,this.modified(),!0)},this.textureUnit=function(){return this.m_textureUnit},this.setTextureUnit=function(t){return this.m_textureUnit!==t&&(this.m_textureUnit=t,this.modified(),!0)},this.computeInternalFormatUsingImage=function(){this.m_internalFormat=r.GL.RGBA,this.m_pixelFormat=r.GL.RGBA,this.m_pixelDataType=r.GL.UNSIGNED_BYTE},this.updateDimensions=function(){null!==this.m_image&&(this.m_width=this.m_image.width,this.m_height=this.m_image.height,this.m_depth=0)},this.textureHandle=function(){return this.m_textureHandle},this},i(r.texture,r.materialAttribute),r.lookupTable=function(){"use strict";if(!(this instanceof r.lookupTable))return new r.lookupTable;r.texture.call(this);var t=o();return this.m_colorTable=[.07514311,.468049805,1,1,.247872569,.498782363,1,1,.339526309,.528909511,1,1,.409505078,.558608486,1,1,.468487184,.588057293,1,1,.520796675,.617435078,1,1,.568724526,.646924167,1,1,.613686735,.676713218,1,1,.656658579,.707001303,1,1,.698372844,.738002964,1,1,.739424025,.769954435,1,1,.780330104,.803121429,1,1,.821573924,.837809045,1,1,.863634967,.874374691,1,1,.907017747,.913245283,1,1,.936129275,.938743558,.983038586,1,.943467973,.943498599,.943398095,1,.990146732,.928791426,.917447482,1,1,.88332677,.861943246,1,1,.833985467,.803839606,1,1,.788626485,.750707739,1,1,.746206642,.701389973,1,1,.70590052,.654994046,1,1,.667019783,.610806959,1,1,.6289553,.568237474,1,1,.591130233,.526775617,1,1,.552955184,.485962266,1,1,.513776083,.445364274,1,1,.472800903,.404551679,1,1,.428977855,.363073592,1,1,.380759558,.320428137,1,.961891484,.313155629,.265499262,1,.916482116,.236630659,.209939162,1].map((function(t){return 255*t})),this.setup=function(e){0===this.textureUnit()?e.m_context.activeTexture(r.GL.TEXTURE0):1===this.textureUnit()&&e.m_context.activeTexture(r.GL.TEXTURE1),e.m_context.deleteTexture(this.m_textureHandle),this.m_textureHandle=e.m_context.createTexture(),e.m_context.bindTexture(r.GL.TEXTURE_2D,this.m_textureHandle),e.m_context.texParameteri(r.GL.TEXTURE_2D,r.GL.TEXTURE_MIN_FILTER,r.GL.LINEAR),e.m_context.texParameteri(r.GL.TEXTURE_2D,r.GL.TEXTURE_MAG_FILTER,r.GL.LINEAR),e.m_context.texParameteri(r.GL.TEXTURE_2D,r.GL.TEXTURE_WRAP_S,r.GL.CLAMP_TO_EDGE),e.m_context.texParameteri(r.GL.TEXTURE_2D,r.GL.TEXTURE_WRAP_T,r.GL.CLAMP_TO_EDGE),e.m_context.pixelStorei(r.GL.UNPACK_ALIGNMENT,1),this.m_width=this.m_colorTable.length/4,this.m_height=1,this.m_depth=0,e.m_context.texImage2D(r.GL.TEXTURE_2D,0,r.GL.RGBA,this.m_width,this.m_height,this.m_depth,r.GL.RGBA,r.GL.UNSIGNED_BYTE,new Uint8Array(this.m_colorTable)),e.m_context.bindTexture(r.GL.TEXTURE_2D,null),t.modified()},this.colorTable=function(){return this.m_colorTable},this.setColorTable=function(t){return this.m_colorTable!==t&&(this.m_colorTable=t,this.modified(),!0)},this},i(r.lookupTable,r.texture)},3471:function(t,e,n){var r=n(698),i=n(4626),o=n(3503);r.uniform=function(t,e){"use strict";if(!(this instanceof r.uniform))return new r.uniform(t,e);this.getTypeNumberOfComponents=function(t){switch(t){case r.GL.FLOAT:case r.GL.INT:case r.GL.BOOL:return 1;case r.GL.FLOAT_VEC2:case r.GL.INT_VEC2:case r.GL.BOOL_VEC2:return 2;case r.GL.FLOAT_VEC3:case r.GL.INT_VEC3:case r.GL.BOOL_VEC3:return 3;case r.GL.FLOAT_VEC4:case r.GL.INT_VEC4:case r.GL.BOOL_VEC4:return 4;case r.GL.FLOAT_MAT3:return 9;case r.GL.FLOAT_MAT4:return 16;default:return 0}};var n=t,i=e,o=new Array(this.getTypeNumberOfComponents(n)).fill(0);return this.name=function(){return i},this.set=function(t){var e=0,n=o.length;if(1!==n)for(e=0;e<n;e+=1)o[e]=t[e];else o[0]=t},this.callGL=function(t,e){switch(n){case r.GL.BOOL:case r.GL.INT:t.m_context.uniform1iv(e,o);break;case r.GL.FLOAT:t.m_context.uniform1fv(e,o);break;case r.GL.BOOL_VEC2:case r.GL.INT_VEC2:t.m_context.uniform2iv(e,o);break;case r.GL.FLOAT_VEC2:t.m_context.uniform2fv(e,o);break;case r.GL.BOOL_VEC3:case r.GL.INT_VEC3:t.m_context.uniform3iv(e,o);break;case r.GL.FLOAT_VEC3:t.m_context.uniform3fv(e,o);break;case r.GL.BOOL_VEC4:case r.GL.INT_VEC4:t.m_context.uniform4iv(e,o);break;case r.GL.FLOAT_VEC4:t.m_context.uniform4fv(e,o);break;case r.GL.FLOAT_MAT3:t.m_context.uniformMatrix3fv(e,r.GL.FALSE,o);break;case r.GL.FLOAT_MAT4:t.m_context.uniformMatrix4fv(e,r.GL.FALSE,o)}},this.update=function(t,e){},this},r.modelViewOriginUniform=function(t,e){"use strict";if(!(this instanceof r.modelViewOriginUniform))return new r.modelViewOriginUniform(t,e);t||(t="modelViewMatrix");var n=[(e=e||[0,0,0])[0],e[1],e[2]||0];return r.uniform.call(this,r.GL.FLOAT_MAT4,t),this.set(o.create()),this.setOrigin=function(t){n=[(t=t||[0,0,0])[0],t[1],t[2]||0]},this.update=function(t,e){var r=t.m_modelViewMatrix;if(t.m_modelViewAlignment){var i=t.m_modelViewAlignment;(r=r.slice?r.slice():Array.prototype.slice.call(r))[12]=Math.round(r[12]/i.roundx)*i.roundx+i.dx,r[13]=Math.round(r[13]/i.roundy)*i.roundy+i.dy}r=o.translate(o.create(),r,n),this.set(r)},this},i(r.modelViewOriginUniform,r.uniform),r.projectionUniform=function(t){"use strict";return this instanceof r.projectionUniform?(t||(t="projectionMatrix"),r.uniform.call(this,r.GL.FLOAT_MAT4,t),this.set(o.create()),this.update=function(t,e){this.set(t.m_projectionMatrix)},this):new r.projectionUniform(t)},i(r.projectionUniform,r.uniform),r.floatUniform=function(t,e){"use strict";if(!(this instanceof r.floatUniform))return new r.floatUniform(t,e);t||(t="floatUniform"),e=void 0===e?1:e,r.uniform.call(this,r.GL.FLOAT,t),this.set(e)},i(r.floatUniform,r.uniform)},4933:function(t,e,n){var r=n(698);r.vertexAttributeKeys={Position:0,Normal:1,TextureCoordinate:2,Color:3,Scalar:4,CountAttributeIndex:5},r.vertexAttributeKeysIndexed={Zero:0,One:1,Two:2,Three:3,Four:4,Five:5,Six:6,Seven:7,Eight:8,Nine:9},r.vertexAttribute=function(t){"use strict";if(!(this instanceof r.vertexAttribute))return new r.vertexAttribute(t);var e=t;this.name=function(){return e},this.bindVertexData=function(t,n){var r=t.m_mapper.geometryData().sourceData(n),i=t.m_material.shaderProgram();t.m_context.vertexAttribPointer(i.attributeLocation(e),r.attributeNumberOfComponents(n),r.attributeDataType(n),r.normalized(n),r.attributeStride(n),r.attributeOffset(n)),t.m_context.enableVertexAttribArray(i.attributeLocation(e))},this.undoBindVertexData=function(t,n){var r=t.m_material.shaderProgram();t.m_context.disableVertexAttribArray(r.attributeLocation(e))}}},698:function(t){t.exports={}},7205:function(t,e,n){var r=n(5616),i=n(698),o=n(4626);i.viewer=function(t,e){"use strict";if(!(this instanceof i.viewer))return new i.viewer(t,e);i.object.call(this);var n=t,o=i.renderer(e),a=i.renderWindow(n);return this.canvas=function(){return n},this.renderWindow=function(){return a},this.init=function(){null!==a?a._setup():console.log("[ERROR] No render window attached")},this.exit=function(t){null!==a?a._cleanup(t):console.log("[ERROR] No render window attached")},this.render=function(){a.render()},this.bindEventHandlers=function(){r(n).on("mousedown",this.handleMouseDown),r(n).on("mouseup",this.handleMouseUp),r(n).on("mousemove",this.handleMouseMove),r(n).on("mousewheel",this.handleMouseWheel),r(n).on("contextmenu",this.handleContextMenu)},this.unbindEventHandlers=function(){r(n).off("mousedown",this.handleMouseDown),r(n).off("mouseup",this.handleMouseUp),r(n).off("mousemove",this.handleMouseMove),r(n).off("mousewheel",this.handleMouseWheel),r(n).off("contextmenu",this.handleContextMenu)},this._init=function(){this.bindEventHandlers(),a.addRenderer(o)},this._init(),this},o(i.viewer,i.object)},394:function(t,e,n){t.exports={pointFeature:n(5380),vtkjsRenderer:n(9897)}},7015:function(t,e,n){var r=function(t){"use strict";if(!(this instanceof n(1338)))return new r(t);var e=this,i=this.draw;return this.draw=function(){return e.ready&&(e._update(),e.renderer()._render(),i()),e},this};t.exports=r},5380:function(t,e,n){var r=n(4626),i=n(1098).registerFeature,o=n(7541),a=function(t){"use strict";if(!(this instanceof a))return new a(t);t=t||{},o.call(this,t);var e=n(5325),r=n(7015),i=n(9897).vtkjs,s=i.Rendering.Core.vtkActor,u=i.Common.Core.vtkDataArray,l=i.Rendering.Core.vtkGlyph3DMapper,c=i.Rendering.Core.vtkMapper,f=i.Common.DataModel.vtkPointSet,h=i.Filters.Sources.vtkSphereSource;r.call(this);var d,p,m,g,y,v=this,x=this._init,_=this._exit,b=this._update;return this._createPipeline=function(){p=f.newInstance(),(m=h.newInstance()).setThetaResolution(30),m.setPhiResolution(30);var t=l.newInstance({orient:!1,colorByArrayName:"color",scalarMode:c.ScalarMode.USE_POINT_FIELD_DATA,colorMode:c.ColorMode.DIRECT_SCALARS,scaling:!0,scaleArray:"diam",scaleMode:l.ScaleModes.SCALE_BY_MAGNITUDE});t.setInputData(p,0),t.setInputConnection(m.getOutputPort(),1),(d=s.newInstance()).setMapper(t),d.getProperty().setAmbient(1),v.renderer().contextRenderer().addActor(d)},this._init=function(){x.call(v,t),v.renderer().contextRenderer().setLayer(0),v._createPipeline()},this._build=function(){var t,n,r,i,o,a,s=v.data().length,l=new Array(3*s),c=v.data(),f=v.position(),h=v.style.get("radius"),d=v.style.get("fill"),m=v.style.get("fillColor"),x=v.style.get("fillOpacity"),_=v.layer().map().unitsPerPixel(v.layer().map().zoom());for(y&&y.length===s||(y=new Float32Array(s)),g&&g.length===4*s||(g=new Uint8Array(4*s)),t=n=r=0;t<s;t+=1,n+=3,r+=4)i=f(c[t],t),l[n]=i.x,l[n+1]=i.y,l[n+2]=i.z||0,a=a||l[n+2],y[t]=h(c[t],t)*_*2,o=m(c[t],t),g[r]=255*o.r,g[r+1]=255*o.g,g[r+2]=255*o.b,g[r+3]=d(c[t],t)?255*x(c[t],t):0;if(l=e.transformCoordinates(v.gcs(),v.layer().map().gcs(),l,3),!a&&v.gcs()!==v.layer().map().gcs())for(t=n=0;t<s;t+=1,n+=3)l[n+2]=0;p.getPoints().setData(l,3),p.getPointData().addArray(u.newInstance({name:"color",values:g,numberOfComponents:4})),p.getPointData().addArray(u.newInstance({name:"diam",values:y})),v.buildTime().modified()},this._update=function(){if(b.call(v),v.dataTime().getMTime()>=v.buildTime().getMTime()||v.updateTime().getMTime()<v.getMTime())v._build();else{var t=v.data(),e=v.style.get("radius"),n=v.layer().map().unitsPerPixel(v.layer().map().zoom()),r=p.getPointData().getArray("diam"),i=r.getData().map((function(r,i){return e(t[i],i)*n*2}));r.setData(i),p.modified()}v.updateTime().modified()},this._exit=function(){v.renderer().contextRenderer().removeActor(d),_()},v._init(),this};r(a,o);var s={};s[o.capabilities.stroke]=!1,i("vtkjs","point",a,s),t.exports=a},9897:function(t,e,n){var r=n(4626),i=n(1098).registerRenderer,o=n(2274),a=function(t){"use strict";if(!(this instanceof a))return new a(t);t=t||{},o.call(this,t);var e=n(3503),r=n(6409),i=a.vtkjs.Rendering.Misc.vtkGenericRenderWindow,s=this,u=this._init,l=i.newInstance({background:[0,0,0,0]});l.setContainer(s.layer().node().get(0)),l.getInteractor().unbindEvents(),l.resize();var c=l.getRenderer(),f=l.getRenderWindow();return this.contextRenderer=function(){return c},this.api=function(){return a.apiname},this._init=function(){if(s.initialized())return s;u.call(s);var t=s.layer().map(),e=t.size();return s._resize(0,0,e.width,e.height),t.camera().clipbounds={near:-t.unitsPerPixel(),far:t.unitsPerPixel()},s},this._resize=function(t,e,n,r){return s._setWidthHeight(n,r),l.resize(),s._render(),s},this._render=function(){return s.layer().map().scheduleAnimationFrame(s._renderFrame,!0),s},this._renderFrame=function(){var t,e=s.layer().features();for(t=0;t<e.length;t+=1)e[t].visible()&&e[t]._update();s._updateRendererCamera(),f.render()},this._exit=function(){},this._updateRendererCamera=function(){var t=s.layer().map().camera(),n=t.view,r=t.projectionMatrix,i=e.create();e.copy(i,n);var o=e.create();e.copy(o,r),s.contextRenderer().getActiveCamera().setViewMatrix(i),s.contextRenderer().getActiveCamera().setProjectionMatrix(o)},s.layer().geoOn(r.pan,(function(t){s._render()})),s.layer().geoOn(r.parallelprojection,(function(t){})),this};a.apiname="vtkjs",r(a,o),i("vtkjs",a),a.supported=function(){delete a.vtkjs;try{a.vtkjs=n(4436)}catch(t){}return a.vtkjs&&a.vtkjs.Rendering||!window.vtk||!window.vtk.Rendering||(a.vtkjs=window.vtk),a.vtkjs&&a.vtkjs.Rendering||(a.vtkjs=void 0),void 0!==a.vtkjs},a.fallback=function(){return null},a.supported(),t.exports=a},3559:function(t,e,n){var r=n(4626),i=n(1098).registerFeature,o=n(3561),a=function(t){"use strict";if(!(this instanceof a))return new a(t);t=t||{},o.call(this,t);var e=this,n=null,r=this._exit,i=this.draw,s=this._update;return this.draw=function(){if(e._update(),n)for(var t=0;t<n.length;t+=1)n[t].draw();return i(),e},this._build=function(){return e.buildTime().modified(),n=e.createChoropleth()},this._update=function(){s.call(e),(e.dataTime().timestamp()>=e.buildTime().timestamp()||e.updateTime().timestamp()<=e.timestamp())&&(e._wipePolygons(),e._build()),e.updateTime().modified()},this._wipePolygons=function(){n&&n.map((function(t){return t._exit()})),n=null},this._exit=function(){e._wipePolygons(),r()},this._init(t),this};r(a,o),i("webgl","choropleth",a),t.exports=a},6791:function(t,e,n){var r=n(4626),i=n(1098).registerFeature,o=n(6761),a=function(t){"use strict";if(!(this instanceof a))return new a(t);t=t||{},o.call(this,t),n(2778).call(this,t);var e=this;return this._build=function(){e.actors()[0]&&e.renderer().contextRenderer().removeActor(e.actors()[0]),e.createGLMeshColored(e._createContours()),e.renderer().contextRenderer().addActor(e.actors()[0]),e.buildTime().modified()},this._init(t),this};r(a,o),i("webgl","contour",a),t.exports=a},8257:function(t,e,n){var r=n(4626),i=n(1098).registerFeature,o=n(2499),a=function(t){"use strict";if(!(this instanceof a))return new a(t);t=t||{},o.call(this,t),n(2778).call(this,t);var e=this;return this._build=function(){e.actors()[0]&&e.renderer().contextRenderer().removeActor(e.actors()[0]),e.createGLMeshColored(e._createGrids()),e.renderer().contextRenderer().addActor(e.actors()[0]),e.buildTime().modified()},this._init(t),this};r(a,o),i("webgl","grid",a),t.exports=a},8635:function(t,e,n){t.exports={choroplethFeature:n(3559),contourFeature:n(6791),gridFeature:n(8257),isolineFeature:n(960),layer:n(6982),lineFeature:n(5795),lookupTable2D:n(411),markerFeature:n(3403),meshColored:n(2778),pixelmapFeature:n(7759),pointFeature:n(5407),polygonFeature:n(8511),quadFeature:n(9304),tileLayer:n(1474),trackFeature:n(536),webglRenderer:n(7945)}},960:function(t,e,n){var r=n(4626),i=n(1098).registerFeature,o=n(2586),a=function(t){"use strict";return this instanceof a?(t=t||{},o.call(this,t),n(4084).call(this),this._init(t),this):new a(t)};r(a,o),i("webgl","isoline",a),t.exports=a},6982:function(t,e,n){var r=function(){"use strict";var t=n(1098).createRenderer,e=n(6409),r=n(7945),i=n(9264),o=this,a=this._init,s=this.opacity,u=this.visible,l=this.zIndex;this.opacity=function(t){var e=s.apply(o,arguments);return void 0!==t&&o.initialized()&&o.map()._updateAutoshareRenderers(),e},this.visible=function(t){if(void 0===t)return u();var e=u(),n=u.apply(o,arguments);return e!==t&&o.initialized()&&(o.map().scheduleAnimationFrame(o._update,!0),o.renderer()._render()),n},this.zIndex=function(t,e){var n=l.apply(o,arguments);return void 0!==t&&o.initialized()&&(o.map().scheduleAnimationFrame(o._update,!0),o.renderer()._render(),o.map()._updateAutoshareRenderers()),n},this.switchRenderer=function(t,e){if(t instanceof r&&t!==o.renderer()){var n=o.renderer(),i=[],a=[];o.map().listSceneObjects([o]).forEach((function(t){t._cleanup&&(t._cleanup(),t._update&&a.push(t)),t.actors&&(i=i.concat(t.actors()))})),i.forEach((function(e){n.contextRenderer().removeActor(e),t.contextRenderer().addActor(e)})),o._renderer(t),o._canvas(t.canvas()),e&&(i.length||a.length)&&(n._render(),a.forEach((function(t){t._update()})),t._render())}return o},this._init=function(){var n=o.map();return n._updateAutoshareRenderers||(n._updateAutoshareRenderers=function(){var e,o,a,s=n.sortedLayers(),u=[];s.forEach((function(n){var s=n.autoshareRenderer(),l=n instanceof i;s&&n.renderer()&&n.renderer().api()===r.apiname?!e||n.opacity()!==o||"more"!==s&&(n.opacity()>0&&n.opacity()<1||l&&!a)?(n.node()[0].contains(n.renderer().canvas()[0])||(n.switchRenderer(t(r.apiname,n),!1),u.push(n.renderer())),e=n.renderer(),o=n.opacity(),a=l):(n.renderer()!==e&&(u.push(n.renderer()),n.switchRenderer(e,!1),u.push(n.renderer())),a&=l):e=null})),s.forEach((function(t){u.indexOf(t.renderer())>=0&&t._update&&t._update()})),s.forEach((function(t){u.indexOf(t.renderer())>=0&&(t.renderer()._renderFrame(),u=u.filter((function(e){return e!==t.renderer()})))})),u.forEach((function(t){t._exit()}))},n.geoOn(e.layerAdd,(function(){return n._updateAutoshareRenderers()})),n.geoOn(e.layerRemove,(function(){return n._updateAutoshareRenderers()}))),a.apply(o,arguments)}};(0,n(1098).registerLayerAdjustment)("webgl","all",r),t.exports=r},5795:function(t,e,n){var r=n(4626),i=n(1098).registerFeature,o=n(9281),a=0,s=1,u=3,l={butt:0,square:1,round:2},c={passthrough:3,miter:4,bevel:5,round:6,"miter-clip":7},f={normal:0,debug:1},h=function(t){"use strict";if(!(this instanceof h))return new h(t);t=t||{},o.call(this,t);var e=n(1611),r=n(5325),i=n(642),d=n(4084),p=n(5685),m=n(1388),g=n(9336);d.call(this);var y,v,x,_,b,w,M,A,T,E,C,k=this,S=this._exit,P=void 0!==t.dynamicDraw&&t.dynamicDraw,O=this._init,R=this._update;return this.featureVertices=function(){return[[0,"corner",-1,a],[0,"near",1,s],[1,"far",-1,u],[1,"corner",1,a],[1,"near",-1,s],[0,"far",1,u]]},this.verticesPerFeature=function(){return k.featureVertices().length},this._init=function(t){var n,r=e.shaderProgram(),i=((n=new e.shader(e.GL.VERTEX_SHADER)).setShaderSource(g),n),o=function(t){var n=new e.shader(e.GL.FRAGMENT_SHADER);return n.setShaderSource(t?m:p),n}(void 0!==((t||{}).style||{}).debug),a=e.vertexAttribute("pos"),s=e.vertexAttribute("prev"),u=e.vertexAttribute("next"),l=e.vertexAttribute("far"),c=e.vertexAttribute("flags"),f=e.vertexAttribute("strokeWidth"),h=e.vertexAttribute("strokeColor"),d=e.vertexAttribute("strokeOpacity"),T=new e.projectionUniform("projectionMatrix"),E=e.geometryData(),S=e.sourceDataP3fv({name:"pos"}),R=e.sourceDataAnyfv(3,e.vertexAttributeKeysIndexed.Four,{name:"prev"}),L=e.sourceDataAnyfv(3,e.vertexAttributeKeysIndexed.Five,{name:"next"}),I=e.sourceDataAnyfv(3,e.vertexAttributeKeysIndexed.Six,{name:"far"}),D=e.sourceDataAnyfv(1,e.vertexAttributeKeysIndexed.Seven,{name:"flags"}),N=e.sourceDataAnyfv(1,e.vertexAttributeKeysIndexed.One,{name:"strokeWidth"}),F=e.sourceDataAnyfv(3,e.vertexAttributeKeysIndexed.Two,{name:"strokeColor"}),z=e.sourceDataAnyfv(1,e.vertexAttributeKeysIndexed.Three,{name:"strokeOpacity"}),B=e.triangles();return C=new e.modelViewOriginUniform("modelViewMatrix"),_=new e.floatUniform("pixelWidth",1/k.renderer().width()),b=new e.floatUniform("aspect",k.renderer().width()/k.renderer().height()),w=new e.floatUniform("miterLimit",10),M=new e.floatUniform("antialiasing",0),A=new e.floatUniform("fixedFlags",0),O.call(k,t),x=e.material(),v=e.mapper({dynamicDraw:P}),r.addVertexAttribute(a,e.vertexAttributeKeys.Position),r.addVertexAttribute(f,e.vertexAttributeKeysIndexed.One),r.addVertexAttribute(h,e.vertexAttributeKeysIndexed.Two),r.addVertexAttribute(d,e.vertexAttributeKeysIndexed.Three),r.addVertexAttribute(s,e.vertexAttributeKeysIndexed.Four),r.addVertexAttribute(u,e.vertexAttributeKeysIndexed.Five),r.addVertexAttribute(l,e.vertexAttributeKeysIndexed.Six),r.addVertexAttribute(c,e.vertexAttributeKeysIndexed.Seven),r.addUniform(C),r.addUniform(T),r.addUniform(_),r.addUniform(b),r.addUniform(w),r.addUniform(M),r.addUniform(A),r.addShader(o),r.addShader(i),x.addAttribute(r),x.addAttribute(e.blend()),(y=e.actor()).setMaterial(x),y.setMapper(v),E.addSource(S),E.addSource(R),E.addSource(L),E.addSource(I),E.addSource(N),E.addSource(F),E.addSource(z),E.addSource(D),B.setIndices(new Uint16Array(1)),E.addPrimitive(B),E.computeBounds=function(){E.setBounds(0,0,0,0,0,0)},v.setGeometryData(E),k},this.actors=function(){return y?[y]:[]},this._build=function(){return function(t){var e,n,o,a,s,u,h,d,p,m,g,y,x,_,b,S,P,O,R,L,I,D,N,F,z,B,j,V,q,G,U,H,W,X,K,Q,Y,$,Z,J,tt=k.data(),et=0,nt=[{strokeOffset:0,posStrokeOffset:0,negStrokeOffset:0},{strokeOffset:0,posStrokeOffset:0,negStrokeOffset:0}],rt=nt[1],it=k.gcs(),ot=k.layer().map().gcs(),at=k.line(),st=k.style.get("strokeWidth"),ut=k.style.get("strokeColor"),lt=k.style.get("strokeOpacity"),ct=k.style.get("lineCap"),ft=k.style.get("lineJoin"),ht=k.style.get("strokeOffset"),dt=k.style.get("miterLimit")(tt),pt=k.style.get("antialiasing")(tt)||0,mt=k.style.get("uniformLine"),gt=k.featureVertices(),yt=gt.length,vt=f[k.style.get("debug")(tt)?"debug":"normal"]||0,xt=v.geometryData(),_t=k.style.get("closed"),bt=!0;if(Z=i.isFunction(k.style("closed"))?void 0:_t()||!1,L=i.isFunction(k.style("lineCap"))?void 0:l[ct()||"butt"],I=i.isFunction(k.style("lineJoin"))?void 0:c[ft()||"miter"],O=i.isFunction(k.style("strokeColor"))?void 0:ut(),D=i.isFunction(k.style("strokeOffset"))?void 0:ht()||0,R=i.isFunction(k.style("strokeOpacity"))?void 0:lt(),P=i.isFunction(k.style("strokeWidth"))?void 0:st(),N=i.isFunction(k.style("uniformLine"))?void 0:mt(),void 0!==dt&&w.set(Math.max(1,Math.min(100,dt))),A.set(vt),M.set(pt),t)et=T.numSegments,J=T.closed,m=T.lineItemList,p=et*yt,bt=L!==T.lineCapVal||void 0===L||I!==T.lineJoinVal||void 0===I||D!==T.strokeOffsetVal||void 0===D;else{var wt=[],Mt=k.position();for(Mt=Mt===i.identityFunction?null:Mt,m=new Array(tt.length),J=new Array(tt.length),n=0;n<tt.length;n+=1)if(g=at(e=tt[n],n),m[n]=g,!(g.length<2)){for(et+=g.length-1,o=0;o<g.length;o+=1)x=Mt?Mt(g[o],o,e,n):g[o],wt.push(x.x),wt.push(x.y),wt.push(x.z||0),o||(b=x);g.length>2&&(void 0===Z?_t(e,n):Z)?x.x!==b.x||x.y!==b.y||x.z!==b.z?(et+=1,J[n]=2):J[n]=1:J[n]=0}if(wt=r.transformCoordinates(it,ot,wt,3),(E=new Float32Array(k.style.get("origin")(wt)))[0]||E[1]||E[2])for(n=0;n<wt.length;n+=3)wt[n]-=E[0],wt[n+1]-=E[1],wt[n+2]-=E[2];C.setOrigin(E),p=et*yt,q=i.getGeomBuffer(xt,"pos",3*p),G=i.getGeomBuffer(xt,"prev",3*p),U=i.getGeomBuffer(xt,"next",3*p),H=i.getGeomBuffer(xt,"far",3*p),xt.primitive(0).numberOfIndices()!==p&&(xt.primitive(0).numberOfIndices=function(){return p}),T={numSegments:et,closed:J,lineItemList:m,lineCapVal:L,lineJoinVal:I,strokeOffsetVal:D}}for(W=i.getGeomBuffer(xt,"flags",p),X=i.getGeomBuffer(xt,"strokeWidth",p),K=i.getGeomBuffer(xt,"strokeColor",3*p),Q=i.getGeomBuffer(xt,"strokeOpacity",p),n=_=Y=$=0;n<tt.length;n+=1)if(!((g=m[n]).length<2)){F=void 0===N?mt(g,n):N,e=tt[n],Z=J[n],S=_,d=g.length+(2===Z?1:0);var At=0;for(o=0;o<d;o+=1,_+=3)if(h=o,o===g.length&&(h=0,_-=3),y=g[h],o&&(rt=nt[0],nt[0]=nt[1],nt[1]=rt),t||(rt.pos=o===h?_:S,rt.prev=h?_-3:Z?S+3*(g.length-3+Z):_,rt.next=o+1<g.length?_+3:Z?o!==h?S+3:S+6-3*Z:_),F&&o>0?1===o&&(rt.strokeWidth=nt[0].strokeWidth,rt.strokeColor=nt[0].strokeColor,rt.strokeOpacity=nt[0].strokeOpacity):(rt.strokeWidth=void 0===P?st(y,h,e,n):P,rt.strokeColor=void 0===O?ut(y,h,e,n):O,rt.strokeOpacity=void 0===R?lt(y,h,e,n):R),bt&&(0!==D&&(F&&o>0?1===o&&(rt.strokeOffset=nt[0].strokeOffset):rt.strokeOffset=(void 0===D?ht(y,h,e,n):D)||0,rt.strokeOffset?(rt.posStrokeOffset=2047&Math.round(2048+1023*Math.min(1,Math.max(-1,rt.strokeOffset))),rt.negStrokeOffset=2047&Math.round(2048-1023*Math.min(1,Math.max(-1,rt.strokeOffset)))):rt.posStrokeOffset=rt.negStrokeOffset=0),Z||o&&o!==g.length-1?rt.flags=void 0===I?c[ft(y,h,e,n)]||c.miter:I:rt.flags=void 0===L?l[ct(y,h,e,n)]||l.butt:L),o){if("drop"===F&&o>1&&wt[nt[0].pos]===wt[nt[1].pos]&&wt[nt[0].pos+1]===wt[nt[1].pos+1]){At+=1;continue}for(a=0;a<yt;a+=1,Y+=1,$+=3)"drop"===F&&nt[0].strokeOpacity<=0&&nt[1].strokeOpacity<=0?Q[Y]=-1:(s=nt[z=gt[a][0]],u=nt[1-z],t||(q[$]=wt[s.pos],q[$+1]=wt[s.pos+1],q[$+2]=0,B=z?"next":"prev",j=z?"prev":"next",G[$]=wt[s[B]],G[$+1]=wt[s[B]+1],G[$+2]=0,U[$]=wt[s[j]],U[$+1]=wt[s[j]+1],U[$+2]=0,H[$]=wt[u[j]],H[$+1]=wt[u[j]+1],H[$+2]=0),bt&&(V=z?"posStrokeOffset":"negStrokeOffset",W[Y]=gt[a][3]+4*s.flags+32*u.flags+256*s[V]),X[Y]=s.strokeWidth,K[$]=s.strokeColor.r,K[$+1]=s.strokeColor.g,K[$+2]=s.strokeColor.b,s.strokeOpacity<=0&&u.strokeOpacity<=0||s.strokeWidth<=0&&u.strokeWidth<=0?Q[Y]=-1:Q[Y]=s.strokeOpacity)}if(At)for(a=0;a<At*yt;a+=1,Y+=1,$+=3)Q[Y]=-1}t?(bt&&v.updateSourceBuffer("flags"),v.updateSourceBuffer("strokeWidth"),v.updateSourceBuffer("strokeOpacity"),v.updateSourceBuffer("strokeColor")):(v.modified(),xt.boundsDirty(!0),v.boundsDirtyTimestamp().modified())}(!!(k.dataTime().timestamp()<k.buildTime().timestamp()&&T)),k.renderer().contextRenderer().hasActor(y)||k.renderer().contextRenderer().addActor(y),k.buildTime().modified(),k},this._update=function(){return R.call(k),(k.dataTime().timestamp()>=k.buildTime().timestamp()||k.updateTime().timestamp()<=k.timestamp())&&k._build(),_.set(1/k.renderer().width()),b.set(k.renderer().width()/k.renderer().height()),y.setVisible(k.visible()),y.material().setBinNumber(k.bin()),k.updateTime().modified(),k},this._exit=function(){k.renderer().contextRenderer().removeActor(y),y=null,S()},this._init(t),this};r(h,o);var d={};d[o.capabilities.basic]=!0,d[o.capabilities.multicolor]=!0,i("webgl","line",h,d),t.exports=h},411:function(t,e,n){var r=n(4626),i=n(77),o=n(1611);var a=function(t){"use strict";if(!(this instanceof a))return new a(t);t=t||{},o.texture.call(this);var e,n=i(),r=t.maxWidth||4096,s=new Uint8Array([0,0,0,0]),u=this;return this.setup=function(t){!function(t,e){if(!(e>=0&&e<=31))throw Error("[error] Texture unit "+e+" is not supported");t.m_context.activeTexture(o.GL.TEXTURE0+e)}(t,u.textureUnit()),t.m_context.deleteTexture(u.m_textureHandle),u.m_textureHandle=t.m_context.createTexture(),t.m_context.bindTexture(o.GL.TEXTURE_2D,u.m_textureHandle),t.m_context.texParameteri(o.GL.TEXTURE_2D,o.GL.TEXTURE_MIN_FILTER,o.GL.NEAREST),t.m_context.texParameteri(o.GL.TEXTURE_2D,o.GL.TEXTURE_MAG_FILTER,o.GL.NEAREST),t.m_context.texParameteri(o.GL.TEXTURE_2D,o.GL.TEXTURE_WRAP_S,o.GL.CLAMP_TO_EDGE),t.m_context.texParameteri(o.GL.TEXTURE_2D,o.GL.TEXTURE_WRAP_T,o.GL.CLAMP_TO_EDGE),t.m_context.pixelStorei(o.GL.UNPACK_ALIGNMENT,1),t.m_context.pixelStorei(o.GL.UNPACK_FLIP_Y_WEBGL,!0),t.m_context.texImage2D(o.GL.TEXTURE_2D,0,o.GL.RGBA,u.width,u.height,0,o.GL.RGBA,o.GL.UNSIGNED_BYTE,s),t.m_context.bindTexture(o.GL.TEXTURE_2D,null),n.modified()},this.colorTable=function(t){return void 0===t?e:(e=t,t.length<4&&(t=[0,0,0,0]),u.width=Math.min(r,t.length/4),u.height=Math.ceil(t.length/4/r),t instanceof Uint8Array&&t.length===u.width*u.height*4?s=t:(t.length<u.width*u.height*4&&(t=t.concat(new Array(u.width*u.height*4-t.length).fill(0))),s=new Uint8Array(t)),u.modified(),u)},this.maxWidth=function(){return r},this.colorTable(t.colorTable||[]),this};r(a,o.texture),t.exports=a},3403:function(t,e,n){var r=n(5616),i=n(4626),o=n(1098).registerFeature,a=n(2225),s=n(7945),u=function(t){"use strict";if(!(this instanceof u))return new u(t);t=t||{},a.call(this,t);var e=n(1611),i=n(5325),o=n(642),l=n(4084),c=n(2709),f=n(6409),h=n(9923),d=n(3724),p=n(1202),m=n(7665);l.call(this);var g,y,v=this,x=this._exit,_=null,b=null,w={},M=this._init,A=this._update,T=this.updateStyleFromArray;function E(t){var e,n,r,u,l,c,f,h,d,p,m,x,w,M=v.data().length,A=v._pointPolygon(0,0,1,1),T=new Array(3*M),C={},k={},S={},P={},O={radius:1,fillColor:3,fillOpacity:1,strokeColor:3,strokeOpacity:1,strokeOffset:0,strokeWidth:1,symbol:1,symbolValue:1,rotation:1,scaleWithZoom:0,rotateWithMap:0,radiusIncludesStroke:0},R=v.verticesPerFeature(),L=v.data(),I=b.geometryData();for(var D in l=v.position(),O)S[D]=v.style.get(D),o.isFunction(v.style(D))||(P[D]=S[D]()),O[D]&&(C[D]=o.getGeomBuffer(I,D,R*M*O[D]));if(!t){for(e=x=0;e<M;e+=1,x+=3)u=l(L[e],e),T[x]=u.x,T[x+1]=u.y,T[x+2]=0;if(T=i.transformCoordinates(v.gcs(),v.layer().map().gcs(),T,3),(y=new Float32Array(v.style.get("origin")(T)))[0]||y[1]||y[2])for(e=x=0;e<M;e+=1,x+=3)T[x]-=y[0],T[x+1]-=y[1],T[x+2]-=y[2];g.setOrigin(y),r=o.getGeomBuffer(I,"pos",R*M*3),v._primitiveShape!==a.primitiveShapes.sprite&&(f=o.getGeomBuffer(I,"unit",R*M*2)),(c=I.primitive(0).indices())instanceof Uint16Array&&c.length===R*M||(c=new Uint16Array(R*M),I.primitive(0).setIndices(c))}for(e=d=p=m=x=0;e<M;e+=1,x+=3){if(h=L[e],!t&&v._primitiveShape!==a.primitiveShapes.sprite)for(n=0;n<A.length;n+=1,m+=1)f[m]=A[n];for(var N in O)k[N]=void 0===P[N]?S[N](h,e):P[N];for(k.scaleWithZoom=a.scaleMode[k.scaleWithZoom]||(k.scaleWithZoom>=1&&k.scaleWithZoom<=3?k.scaleWithZoom:0),k.symbolComputed=k.scaleWithZoom+(k.rotateWithMap?4:0)+16*(Math.sign(void 0!==k.radiusIncludesStroke&&k.radiusIncludesStroke?k.strokeOffset:1)+1)+64*k.symbol,k.symbolValue&&k.symbol>=a.symbols.arrow&&k.symbol<a.symbols.arrow+a.symbols.arrowMax&&(k.symbolValue=(w=k.symbolValue).length?((void 0===w[0]?0:Math.floor(250*Math.abs(w[0]))+1)+252*(void 0===w[1]?0:Math.floor(250*Math.abs(w[1]))+1)+252*(void 0===w[2]?0:Math.floor(250*Math.abs(w[2]))+1)*252)*(w[3]?-1:1):void 0===w?0:Math.floor(250*Math.abs(w))+1),n=0;n<R;n+=1,d+=1,p+=3)t||(r[p]=T[x],r[p+1]=T[x+1],r[p+2]=T[x+2]),C.radius[d]=k.radius,C.fillColor[p]=k.fillColor.r,C.fillColor[p+1]=k.fillColor.g,C.fillColor[p+2]=k.fillColor.b,C.fillOpacity[d]=k.fillOpacity,C.strokeColor[p]=k.strokeColor.r,C.strokeColor[p+1]=k.strokeColor.g,C.strokeColor[p+2]=k.strokeColor.b,C.strokeOpacity[d]=k.strokeOpacity,C.strokeWidth[d]=k.strokeWidth,C.symbol[d]=k.symbolComputed,C.symbolValue[d]=k.symbolValue,C.rotation[d]=k.rotation}if(v._primitiveShapeAuto){var F=v._approximateMaxRadius(v.renderer().map().zoom());if(v._primitiveShape===a.primitiveShapes.sprite&&F>s._maxPointSize||v._primitiveShape!==a.primitiveShapes.sprite&&F<=s._maxPointSize)return v._primitiveShape=F>s._maxPointSize?a.primitiveShapes.triangle:a.primitiveShapes.sprite,v.renderer().contextRenderer().removeActor(_),_=null,v._init(!0),void E()}t?Object.keys(C).forEach((function(t){return b.updateSourceBuffer(t)})):(I.boundsDirty(!0),b.modified(),b.boundsDirtyTimestamp().modified())}return c(v,t),this.actors=function(){return _?[_]:[]},this.updateStyleFromArray=function(t,e,n){var i,o,a={fillColor:3,fillOpacity:1,radius:1,strokeColor:3,strokeOpacity:1,strokeWidth:1,symbolComputed:1,symbolValueComputed:1};if("string"==typeof t){var s={};s[t]=e,t=s}return r.each(t,(function(t,e){var n,r,s,u,l,c,f,h,d,p;if(v.visible()&&_&&a[t]&&!i&&!v.clustering())if(d=a[t],u=v.data().length,p="symbolComputed"===t?"symbol":"symbolValueComputed"===t?"symbolValue":t,s=(r=_.mapper()).getSourceBuffer(p),n=v.verticesPerFeature(),s&&u&&u*n*d===s.length){switch(a[t]){case 1:for(c=0,h=0;c<u;c+=1)for(l=e[c],f=0;f<n;f+=1,h+=1)s[h]=l;break;case 3:for(c=0,h=0;c<u;c+=1)for(l=e[c],f=0;f<n;f+=1,h+=3)s[h]=l.r,s[h+1]=l.g,s[h+2]=l.b}r.updateSourceBuffer(p),o=!0}else i=!0;else i=!0;if(t===p){var m=v.modified;i||(v.modified=function(){}),T(t,e,!1),v.modified=m}})),n&&(v.visible()&&i?v.draw():o&&v.renderer()._render()),v},this._handleZoom=function(t){v._primitiveShapeAuto&&v._primitiveShape===a.primitiveShapes.sprite&&v._approximateMaxRadius(t)>s._maxPointSize&&(v._primitiveShape=a.primitiveShapes.triangle,v.renderer().contextRenderer().removeActor(v.actors()[0]),v._init(!0),v.dataTime().modified(),v.draw())},this._init=function(n){var r,i,o=e.shaderProgram(),s=((i=new e.shader(e.GL.VERTEX_SHADER)).setShaderSource(v._primitiveShape===a.primitiveShapes.sprite?m:p),i),u=function(){var t=new e.shader(e.GL.FRAGMENT_SHADER);return t.setShaderSource(v._primitiveShape===a.primitiveShapes.sprite?d:h),t}(),l=e.material(),c=e.blend(),x=e.geometryData(),A=e.sourceDataP3fv({name:"pos"}),T={radius:1,fillColor:3,fillOpacity:1,strokeColor:3,strokeOpacity:1,strokeWidth:1,symbol:1,symbolValue:1,rotation:1},E={pixelWidth:e.GL.FLOAT,aspect:e.GL.FLOAT,zoom:e.GL.FLOAT,rotationUniform:e.GL.FLOAT},C=new e.projectionUniform("projectionMatrix");g=new e.modelViewOriginUniform("modelViewMatrix",y),v._primitiveShape===a.primitiveShapes.sprite?r=new e.points:(r=new e.triangles,T.unit=2),r.setIndices(new Uint16Array),n||M.call(v,t),b=e.mapper(),o.addVertexAttribute(e.vertexAttribute("pos"),e.vertexAttributeKeys.Position),x.addSource(A),Object.keys(T).forEach((function(t,n){o.addVertexAttribute(e.vertexAttribute(t),n+1),x.addSource(e.sourceDataAnyfv(T[t],n+1,{name:t}))})),w={},Object.keys(E).forEach((function(t){w[t]=new e.uniform(E[t],t),o.addUniform(w[t])})),o.addUniform(g),o.addUniform(C),o.addShader(u),o.addShader(s),l.addAttribute(o),l.addAttribute(c),(_=e.actor()).setMaterial(l),_.setMapper(b),x.addPrimitive(r),x.computeBounds=function(){x.setBounds(0,0,0,0,0,0)},b.setGeometryData(x),n||v.geoOn(f.zoom,(function(t){v._handleZoom(t.zoomLevel)}))},this._build=function(){return E(v.dataTime().timestamp()<v.buildTime().timestamp()),v.renderer().contextRenderer().hasActor(_)||v.renderer().contextRenderer().addActor(_),v.buildTime().modified(),v},this._update=function(){return A.call(v),(v.dataTime().timestamp()>=v.buildTime().timestamp()||v.updateTime().timestamp()<v.timestamp())&&v._build(),w.pixelWidth.set(2/v.renderer().width()),w.aspect.set(v.renderer().width()/v.renderer().height()),w.zoom.set(v.renderer().map().zoom()),w.rotationUniform.set(v.renderer().map().rotation()),_.setVisible(v.visible()),_.material().setBinNumber(v.bin()),v.updateTime().modified(),v},this._exit=function(){v.renderer().contextRenderer().removeActor(_),_=null,w={},x()},v._init(),this};i(u,a);o("webgl","marker",u,{}),t.exports=u},2778:function(t,e,n){t.exports=function(t){"use strict";t=t||{};var e=n(1611),r=n(5325),i=n(642),o=n(428),a=n(4993);n(4084).call(this);var s,u,l=this,c=this._exit,f=null,h=null,d=null,p=null,m=null,g=null,y=null,v=null,x=void 0!==t.dynamicDraw&&t.dynamicDraw,_=this._init,b=this._update;function w(){var t=new e.shader(e.GL.VERTEX_SHADER);return t.setShaderSource(a),t}function M(){var t=new e.shader(e.GL.FRAGMENT_SHADER);return t.setShaderSource(o),t}return this.createGLMeshColored=function(t){var e,n,o,a,c,f,d,x,_,b=t.elements.length,w=[],M=h.geometryData();for(m.set([t.minColor.r,t.minColor.g,t.minColor.b,t.minColor.a]),g.set([t.maxColor.r,t.maxColor.g,t.maxColor.b,t.maxColor.a]),y.set(t.colorMap.length),v.set(t.stepped),e=-1;e<t.colorMap.length+1;e+=1)o=Math.max(0,Math.min(t.colorMap.length-1,e)),w.push(255*t.colorMap[o].r),w.push(255*t.colorMap[o].g),w.push(255*t.colorMap[o].b),w.push(255*t.colorMap[o].a);if(p.setColorTable(w),t.pos=r.transformCoordinates(l.gcs(),l.layer().map().gcs(),t.pos,3),(s=new Float32Array(l.style.get("origin")(t.pos)))[0]||s[1]||s[2])for(e=0;e<t.pos.length;e+=3)t.pos[e]-=s[0],t.pos[e+1]-=s[1],t.pos[e+2]-=s[2];for(u.setOrigin(s),f=i.getGeomBuffer(M,"pos",3*b),d=i.getGeomBuffer(M,"opacity",b),x=i.getGeomBuffer(M,"value",b),e=n=0;e<b;e+=1,n+=3)a=3*(o=t.elements[e]),f[n]=t.pos[a],f[n+1]=t.pos[a+1],f[n+2]=t.pos[a+2],c=t.elementValues?Math.floor(e/3):o,d[e]=t.opacity[c],x[e]=t.value[c];(_=M.primitive(0).indices())instanceof Uint16Array&&_.length===b||(_=new Uint16Array(b),M.primitive(0).setIndices(_)),M.boundsDirty(!0),h.modified(),h.boundsDirtyTimestamp().modified()},this._init=function(t){var n=e.blend(),r=e.shaderProgram(),i=e.material(),o=e.lookupTable(),a=e.geometryData(),s=new e.projectionUniform("projectionMatrix"),c=new e.uniform(e.GL.INT,"sampler2d"),b=w(),A=M(),T=e.vertexAttribute("pos"),E=e.vertexAttribute("value"),C=e.vertexAttribute("opacity"),k=e.sourceDataP3fv({name:"pos"}),S=e.sourceDataAnyfv(1,e.vertexAttributeKeysIndexed.One,{name:"value"}),P=e.sourceDataAnyfv(1,e.vertexAttributeKeysIndexed.Two,{name:"opacity"}),O=new e.triangles;u=new e.modelViewOriginUniform("modelViewMatrix"),_.call(l,t),h=e.mapper({dynamicDraw:x}),r.addVertexAttribute(T,e.vertexAttributeKeys.Position),r.addVertexAttribute(E,e.vertexAttributeKeysIndexed.One),r.addVertexAttribute(C,e.vertexAttributeKeysIndexed.Two),r.addUniform(u),r.addUniform(s),m=new e.uniform(e.GL.FLOAT_VEC4,"minColor"),r.addUniform(m),g=new e.uniform(e.GL.FLOAT_VEC4,"maxColor"),r.addUniform(g),y=new e.uniform(e.GL.FLOAT,"steps"),r.addUniform(y),v=new e.uniform(e.GL.BOOL,"stepped"),r.addUniform(v),r.addShader(A),r.addShader(b),r.addUniform(c),o.setTextureUnit(7),c.set(7),(d=i).addAttribute(r),d.addAttribute(n),p=o,d.addAttribute(p),(f=e.actor()).setMaterial(d),f.setMapper(h),a.addSource(k),a.addSource(S),a.addSource(P),a.addPrimitive(O),a.computeBounds=function(){a.setBounds(0,0,0,0,0,0)},h.setGeometryData(a)},this.actors=function(){return f?[f]:[]},this._update=function(){b.call(l),(l.dataTime().timestamp()>=l.buildTime().timestamp()||l.updateTime().timestamp()<=l.timestamp())&&l._build(),f.setVisible(l.visible()),f.material().setBinNumber(l.bin()),l.updateTime().modified()},this._exit=function(){l.renderer().contextRenderer().removeActor(f),c()},this}},4084:function(t,e,n){var r=function(t){"use strict";if(!(this instanceof n(1338)))return new r(t);var e=this,i=this.draw;if(this.draw=function(){return e.ready&&(e._update({mayDelay:!0}),e.renderer()._render(),i()),e},this.bin){var o=this.bin;this.bin=function(t,n){if(void 0===t&&!n&&null===o(void 0,!0)){var r=e.layer&&e.layer(),i=r&&r.map&&r.map(),a=(i&&i.listSceneObjects()||[]).indexOf(e);if(a>=0)return a}return o.apply(e,arguments)}}return this};t.exports=r},7759:function(t,e,n){var r=n(4626),i=n(1098).registerFeature,o=n(7761),a=n(411),s=n(642),u=function(t){"use strict";if(!(this instanceof u))return new u(t);o.call(this,t),n(4084).call(this);var e,r,i,l=n(1611),c=n(3925),f=this._exit,h=this;return this.pointSearch=function(t,n){if(e&&h.m_info)for(var r=e.pointSearch(t,n),i=r.index.length-1;i>=0;i-=1)if(r.extra[r.index[i]]._quad&&r.extra[r.index[i]]._quad.image){var o=r.extra[r.index[i]]._quad.image,a=r.extra[r.index[i]].basis,s=Math.floor(a.x*o.width),u=Math.floor(a.y*o.height),l=document.createElement("canvas");l.width=l.height=1;var c=l.getContext("2d");c.drawImage(o,s,u,1,1,0,0,1,1);var f=c.getImageData(0,0,1,1).data,d=f[0]+256*f[1]+256*f[2]*256;return r={index:[d],found:[h.data()[d]]}}return{index:[],found:[]}},this._computePixelmap=function(){var t=h.data()||[],n=h.style.get("color"),o=h.indexModified(void 0,"clear"),u=h.dataTime().timestamp()>=h.buildTime().timestamp()||void 0===o;i||((i=a()).setTextureUnit(1),u=!0);var f,d=Math.max(1,t.length),p=i.maxWidth();d>p&&d%p&&(d+=p-d%p),u||(u=(f=i.colorTable()).length!==4*d,o[0]=Math.max(0,o[0]),o[1]=Math.min(t.length,o[1]+1)),u&&(f=new Uint8Array(4*d),o=[0,t.length]);for(var m=o[0];m<o[1];m+=1){var g=t[m],y=s.convertColor(n.call(h,g,m));f[4*m]=255*y.r,f[4*m+1]=255*y.g,f[4*m+2]=255*y.b,f[4*m+3]=void 0===y.a?255:255*y.a}h.m_info={colors:f};var v=i.colorTable();if(v&&v.length===f.length){for(var x=4*o[0];x<4*o[1]&&f[x]===v[x];x+=1);if(x===4*o[1])return}i.colorTable(f),e||(e=h.layer().createFeature("quad",{selectionAPI:!1,gcs:h.gcs(),visible:h.visible(void 0,!0),nearestPixel:!0}),r=!1),r||(h.dependentFeatures([e]),e.setShader("image_fragment",c),e._hookBuild=function(t){var e=new l.uniform(l.GL.INT,"lutSampler");e.set(i.textureUnit()),t.addUniform(e);var n=new l.uniform(l.GL.INT,"lutWidth");n.set(i.width),t.addUniform(n);var r=new l.uniform(l.GL.INT,"lutHeight");r.set(i.height),t.addUniform(r)},e._hookRenderImageQuads=function(t,e){i.bind(t,e)},!1===r&&e.style({image:h.m_srcImage,position:h.style.get("position")}).data([{}]).draw(),r=!0)},this._exit=function(){return e&&h.layer()&&(h.layer().deleteFeature(e),e=null,h.dependentFeatures([])),f(),h},t.quadFeature&&(e=t.quadFeature).nearestPixel&&e.nearestPixel(!0),this._init(t),this};r(u,o);var l={};l[o.capabilities.lookup]=!0,i("webgl","pixelmap",u,l),t.exports=u},5407:function(t,e,n){var r=n(5616),i=n(4626),o=n(1098).registerFeature,a=n(7541),s=n(7945),u=function(t){"use strict";if(!(this instanceof u))return new u(t);t=t||{},a.call(this,t);var e=n(1611),i=n(5325),o=n(642),l=n(4084),c=n(2709),f=n(4317),h=n(2682),d=n(8208),p=n(6979);l.call(this);var m,g,y=this,v=this._exit,x=null,_=null,b=null,w=null,M=void 0!==t.dynamicDraw&&t.dynamicDraw,A=this._init,T=this._update,E=this.updateStyleFromArray;function C(t){var e,n,r,u,l,c,f,h,d,p,v,b,w,M,A,T,E,k,S,P,O,R,L,I,D,N,F,z,B,j,V,q,G,U,H,W,X=y.data().length,K=y._pointPolygon(0,0,1,1),Q=new Array(3*X),Y=y.verticesPerFeature(),$=y.data(),Z=0,J=_.geometryData();if(l=y.position(),p=y.style.get("radius"),w=y.style.get("stroke"),T=y.style.get("strokeWidth"),S=y.style.get("strokeOpacity"),R=y.style.get("strokeColor"),D=y.style.get("fill"),z=y.style.get("fillOpacity"),V=y.style.get("fillColor"),!t){for(e=W=0;e<X;e+=1,W+=3)u=l($[e],e),Q[W]=u.x,Q[W+1]=u.y,Q[W+2]=0;if(Q=i.transformCoordinates(y.gcs(),y.layer().map().gcs(),Q,3),(g=new Float32Array(y.style.get("origin")(Q)))[0]||g[1]||g[2])for(e=W=0;e<X;e+=1,W+=3)Q[W]-=g[0],Q[W+1]-=g[1],Q[W+2]-=g[2];m.setOrigin(g),r=o.getGeomBuffer(J,"pos",Y*X*3),c=o.getGeomBuffer(J,"unit",Y*X*2),(f=J.primitive(0).indices())instanceof Uint16Array&&f.length===Y*X||(f=new Uint16Array(Y*X),J.primitive(0).setIndices(f))}for(h=o.getGeomBuffer(J,"radius",Y*X),v=o.getGeomBuffer(J,"stroke",Y*X),M=o.getGeomBuffer(J,"strokeWidth",Y*X),E=o.getGeomBuffer(J,"strokeOpacity",Y*X),P=o.getGeomBuffer(J,"strokeColor",Y*X*3),L=o.getGeomBuffer(J,"fill",Y*X),N=o.getGeomBuffer(J,"fillOpacity",Y*X),B=o.getGeomBuffer(J,"fillColor",Y*X*3),e=G=U=H=W=0;e<X;e+=1,W+=3){if(q=$[e],!t&&y._primitiveShape!==a.primitiveShapes.sprite)for(n=0;n<K.length;n+=1,H+=1)c[H]=K[n];for(d=p(q,e),b=w(q,e)?1:0,A=T(q,e),k=S(q,e),O=R(q,e),I=D(q,e)?1:0,F=z(q,e),j=V(q,e),y._primitiveShapeAuto&&(I&&F||b&&k)&&d+(b&&k?A:0)>Z&&(Z=d+(b&&k?A:0)),n=0;n<Y;n+=1,G+=1,U+=3)t||(r[U]=Q[W],r[U+1]=Q[W+1],r[U+2]=Q[W+2]),h[G]=d,v[G]=b,M[G]=A,E[G]=k,P[U]=O.r,P[U+1]=O.g,P[U+2]=O.b,L[G]=I,N[G]=F,B[U]=j.r,B[U+1]=j.g,B[U+2]=j.b}if(y._primitiveShapeAuto&&(y._primitiveShape===a.primitiveShapes.sprite&&Z>s._maxPointSize||y._primitiveShape!==a.primitiveShapes.sprite&&Z<=s._maxPointSize))return y._primitiveShape=Z>s._maxPointSize?a.primitiveShapes.triangle:a.primitiveShapes.sprite,y.renderer().contextRenderer().removeActor(x),x=null,y._init(!0),void C();t?(_.updateSourceBuffer("radius"),_.updateSourceBuffer("stroke"),_.updateSourceBuffer("strokeWidth"),_.updateSourceBuffer("strokeColor"),_.updateSourceBuffer("strokeOpacity"),_.updateSourceBuffer("fill"),_.updateSourceBuffer("fillColor"),_.updateSourceBuffer("fillOpacity")):(J.boundsDirty(!0),_.modified(),_.boundsDirtyTimestamp().modified())}return c(y,t),this.actors=function(){return x?[x]:[]},this.updateStyleFromArray=function(t,e,n){var i,o,a={fill:"bool",fillColor:3,fillOpacity:1,radius:1,stroke:"bool",strokeColor:3,strokeOpacity:1,strokeWidth:1};if("string"==typeof t){var s={};s[t]=e,t=s}return r.each(t,(function(t,e){var n,r,s,u,l,c,f,h,d;if(y.visible()&&x&&a[t]&&!i&&!y.clustering())if(d="bool"===a[t]?1:a[t],u=y.data().length,s=(r=x.mapper()).getSourceBuffer(t),n=y.verticesPerFeature(),s&&u&&u*n*d===s.length){switch(a[t]){case 1:for(c=0,h=0;c<u;c+=1)for(l=e[c],f=0;f<n;f+=1,h+=1)s[h]=l;break;case 3:for(c=0,h=0;c<u;c+=1)for(l=e[c],f=0;f<n;f+=1,h+=3)s[h]=l.r,s[h+1]=l.g,s[h+2]=l.b;break;case"bool":for(c=0,h=0;c<u;c+=1)for(l=e[c]?1:0,f=0;f<n;f+=1,h+=1)s[h]=l}r.updateSourceBuffer(t),o=!0}else i=!0;else i=!0;var p=y.modified;i||(y.modified=function(){}),E(t,e,!1),y.modified=p})),n&&(y.visible()&&i?y.draw():o&&y.renderer()._render()),y},this._init=function(n){var r,i,o=e.shaderProgram(),s=((i=new e.shader(e.GL.VERTEX_SHADER)).setShaderSource(y._primitiveShape===a.primitiveShapes.sprite?p:d),i),u=function(){var t=new e.shader(e.GL.FRAGMENT_SHADER);return t.setShaderSource(y._primitiveShape===a.primitiveShapes.sprite?h:f),t}(),l=e.vertexAttribute("pos"),c=e.vertexAttribute("unit"),v=e.vertexAttribute("radius"),T=e.vertexAttribute("strokeWidth"),E=e.vertexAttribute("fillColor"),C=e.vertexAttribute("fill"),k=e.vertexAttribute("strokeColor"),S=e.vertexAttribute("stroke"),P=e.vertexAttribute("fillOpacity"),O=e.vertexAttribute("strokeOpacity"),R=new e.projectionUniform("projectionMatrix"),L=e.material(),I=e.blend(),D=e.geometryData(),N=e.sourceDataP3fv({name:"pos"}),F=e.sourceDataAnyfv(2,e.vertexAttributeKeysIndexed.One,{name:"unit"}),z=e.sourceDataAnyfv(1,e.vertexAttributeKeysIndexed.Two,{name:"radius"}),B=e.sourceDataAnyfv(1,e.vertexAttributeKeysIndexed.Three,{name:"strokeWidth"}),j=e.sourceDataAnyfv(3,e.vertexAttributeKeysIndexed.Four,{name:"fillColor"}),V=e.sourceDataAnyfv(1,e.vertexAttributeKeysIndexed.Five,{name:"fill"}),q=e.sourceDataAnyfv(3,e.vertexAttributeKeysIndexed.Six,{name:"strokeColor"}),G=e.sourceDataAnyfv(1,e.vertexAttributeKeysIndexed.Seven,{name:"stroke"}),U=e.sourceDataAnyfv(1,e.vertexAttributeKeysIndexed.Eight,{name:"fillOpacity"}),H=e.sourceDataAnyfv(1,e.vertexAttributeKeysIndexed.Nine,{name:"strokeOpacity"});m=new e.modelViewOriginUniform("modelViewMatrix",g),(r=y._primitiveShape===a.primitiveShapes.sprite?new e.points:new e.triangles).setIndices(new Uint16Array),b=new e.floatUniform("pixelWidth",2/y.renderer().width()),w=new e.floatUniform("aspect",y.renderer().width()/y.renderer().height()),n||A.call(y,t),_=e.mapper({dynamicDraw:M}),o.addVertexAttribute(l,e.vertexAttributeKeys.Position),y._primitiveShape!==a.primitiveShapes.sprite&&o.addVertexAttribute(c,e.vertexAttributeKeysIndexed.One),o.addVertexAttribute(v,e.vertexAttributeKeysIndexed.Two),o.addVertexAttribute(T,e.vertexAttributeKeysIndexed.Three),o.addVertexAttribute(E,e.vertexAttributeKeysIndexed.Four),o.addVertexAttribute(C,e.vertexAttributeKeysIndexed.Five),o.addVertexAttribute(k,e.vertexAttributeKeysIndexed.Six),o.addVertexAttribute(S,e.vertexAttributeKeysIndexed.Seven),o.addVertexAttribute(P,e.vertexAttributeKeysIndexed.Eight),o.addVertexAttribute(O,e.vertexAttributeKeysIndexed.Nine),o.addUniform(b),o.addUniform(w),o.addUniform(m),o.addUniform(R),o.addShader(u),o.addShader(s),L.addAttribute(o),L.addAttribute(I),(x=e.actor()).setMaterial(L),x.setMapper(_),D.addSource(N),D.addSource(F),D.addSource(z),D.addSource(B),D.addSource(j),D.addSource(V),D.addSource(q),D.addSource(G),D.addSource(U),D.addSource(H),D.addPrimitive(r),D.computeBounds=function(){D.setBounds(0,0,0,0,0,0)},_.setGeometryData(D)},this._build=function(){return C(y.dataTime().timestamp()<y.buildTime().timestamp()),y.renderer().contextRenderer().hasActor(x)||y.renderer().contextRenderer().addActor(x),y.buildTime().modified(),y},this._update=function(){return T.call(y),(y.dataTime().timestamp()>=y.buildTime().timestamp()||y.updateTime().timestamp()<y.timestamp())&&y._build(),b.set(2/y.renderer().width()),w.set(y.renderer().width()/y.renderer().height()),x.setVisible(y.visible()),x.material().setBinNumber(y.bin()),y.updateTime().modified(),y},this._exit=function(){y.renderer().contextRenderer().removeActor(x),x=null,v()},y._init(),this};i(u,a);var l={};l[a.capabilities.stroke]=!0,o("webgl","point",u,l),t.exports=u},2709:function(t,e,n){var r=n(7541);t.exports=function(t,e){e=e||{},t._primitiveShapeAuto=!0,t._primitiveShape=r.primitiveShapes.auto,void 0!==r.primitiveShapes[e.primitiveShape]&&(t._primitiveShape=e.primitiveShape),t._primitiveShapeAuto=t._primitiveShape===r.primitiveShapes.auto,t._primitiveShapeAuto&&(t._primitiveShape=r.primitiveShapes.sprite,t._primitiveShapeAuto=!0),t._pointPolygon=function(e,n,i,o){var a;switch(t._primitiveShape){case r.primitiveShapes.triangle:a=[e,n-2*o,e-i*Math.sqrt(3),n+o,e+i*Math.sqrt(3),n+o];break;case r.primitiveShapes.square:a=[e-i,n+o,e-i,n-o,e+i,n+o,e-i,n-o,e+i,n-o,e+i,n+o];break;default:a=[e,n]}return a},t.verticesPerFeature=function(){return t._pointPolygon(0,0,1,1).length/2},t.primitiveShape=function(e,n){if(void 0===e)return n||!t._primitiveShapeAuto?t._primitiveShape:r.primitiveShapes.auto;if(void 0!==r.primitiveShapes[e]){var i=!1;e===r.primitiveShapes.auto?(i=!t._primitiveShapeAuto,t._primitiveShapeAuto=!0):(i=t._primitiveShapeAuto||t._primitiveShape!==e,t._primitiveShapeAuto=!1,t._primitiveShape=e),i&&(t.renderer().contextRenderer().removeActor(t.actors()[0]),t._init(!0),t.dataTime().modified())}return t}}},8511:function(t,e,n){var r=n(4626),i=n(1098).registerFeature,o=n(6645),a=function(t){"use strict";if(!(this instanceof a))return new a(t);t=t||{},o.call(this,t);var e=n(1611),r=n(2087);r=r.__esModule?r.default:r;var i=n(5325),s=n(642),u=n(4084),l=n(4547),c=n(9506);u.call(this);var f,h,d,p,m,g=this,y=this._exit,v=e.actor(),x=e.mapper(),_=e.material(),b=this._init,w=this._update;function M(){var t=new e.shader(e.GL.VERTEX_SHADER);return t.setShaderSource(c),t}function A(){var t=new e.shader(e.GL.FRAGMENT_SHADER);return t.setShaderSource(l),t}return this._init=function(t){var n=e.shaderProgram(),r=e.vertexAttribute("pos"),i=e.vertexAttribute("fillColor"),o=e.vertexAttribute("fillOpacity"),a=new e.projectionUniform("projectionMatrix"),s=M(),u=A(),l=e.blend(),c=e.geometryData(),f=e.sourceDataP3fv({name:"pos"}),h=e.sourceDataAnyfv(3,e.vertexAttributeKeysIndexed.Two,{name:"fillColor"}),p=e.sourceDataAnyfv(1,e.vertexAttributeKeysIndexed.Three,{name:"fillOpacity"}),m=e.triangles();d=new e.modelViewOriginUniform("modelViewMatrix"),n.addVertexAttribute(r,e.vertexAttributeKeys.Position),n.addVertexAttribute(i,e.vertexAttributeKeysIndexed.Two),n.addVertexAttribute(o,e.vertexAttributeKeysIndexed.Three),n.addUniform(d),n.addUniform(a),n.addShader(u),n.addShader(s),_.addAttribute(n),_.addAttribute(l),v.setMaterial(_),v.setMapper(x),c.addSource(f),c.addSource(h),c.addSource(p),c.addPrimitive(m),c.computeBounds=function(){c.setBounds(0,0,0,0,0,0)},x.setGeometryData(c),b.call(g,t)},this.actors=function(){return[v]},this._build=function(){!function(t){var e,n,o,a,u,l,c,p,m,y,v,_,b,w,M,A,T,E,C,k,S,P,O,R,L,I,D,N,F,z=[],B=g.gcs(),j=g.layer().map().gcs(),V=0,q=x.geometryData();for(u=g.style.get("fillColor"),l=s.isFunction(g.style("fillColor"))?void 0:u(),p=g.style.get("fillOpacity"),m=s.isFunction(g.style("fillOpacity"))?void 0:p(),y=g.style.get("fill"),v=s.isFunction(g.style("fill"))?void 0:y(),_=g.style.get("uniformPolygon"),b=s.isFunction(g.style("uniformPolygon"))?void 0:_(),t?(z=f.items,V=f.numPts):(n=(n=g.style.get("position"))===s.identityFunction?null:n,o=(o=g.style.get("polygon"))===s.identityFunction?null:o,g.data().forEach((function(t,e){var a,s,u,l;if((a=o?o(t,e):t)&&!((s=a.outer||(Array.isArray(a)?a:[])).length<3)){for(u=new Array(3*s.length),P=k=0;P<s.length;P+=1,k+=3)l=n?n(s[P],P,t,e):s[P],u[k]=l.x,u[k+1]=l.y,u[k+2]=0;u={vertices:u,dimensions:3,holes:[]},F=s,a.inner&&a.inner.forEach((function(r){if(!(r.length<3))for(F=F.concat(r),u.holes.push(k/3),P=0;P<r.length;P+=1,k+=3)l=n?n(r[P],P,t,e):r[P],u.vertices[k]=l.x,u.vertices[k+1]=l.y,u.vertices[k+2]=0})),u.vertices=i.transformCoordinates(B,j,u.vertices,u.dimensions),(I={triangles:r(u.vertices,u.holes,u.dimensions),vertices:u.vertices,original:F,item:t,itemIndex:e}).triangles.length&&(z.push(I),V+=I.triangles.length)}})),e=s.getGeomBuffer(q,"pos",3*V),(M=q.primitive(0).indices())instanceof Uint16Array&&M.length===V||(M=new Uint16Array(V),q.primitive(0).setIndices(M)),f={items:z,numPts:V},h=new Float32Array(g.style.get("origin")(z)),d.setOrigin(h)),a=s.getGeomBuffer(q,"fillColor",3*V),c=s.getGeomBuffer(q,"fillOpacity",V),C=k=0,A=l,E=v,R=0;R<z.length;R+=1)if(L=z[R].triangles.length,S=z[R].vertices,D=z[R].item,N=z[R].itemIndex,F=z[R].original,T=m,(w=void 0===b?_(D,N):b)&&(void 0===l&&(A=u(S[0],0,D,N)),void 0===m&&(T=p(S[0],0,D,N))),void 0===v&&(E=y(D,N)),E||(T=0),w&&t&&z[R].uniform&&z[R].color&&A.r===z[R].color.r&&A.g===z[R].color.g&&A.b===z[R].color.b&&T===z[R].opacity)C+=L,k+=3*L;else{for(P=0;P<L;P+=1,C+=1,k+=3)t&&w?(a[k]=A.r,a[k+1]=A.g,a[k+2]=A.b,c[C]=T):(O=3*z[R].triangles[P],t||(e[k]=S[O]-h[0],e[k+1]=S[O+1]-h[1],e[k+2]=S[O+2]-h[2],M[C]=P),w||void 0!==l||(A=u(F[O],O,D,N)),a[k]=A.r,a[k+1]=A.g,a[k+2]=A.b,!w&&E&&void 0===m&&(T=p(F[O],O,D,N)),c[C]=T);(w||z[R].uniform)&&(z[R].uniform=w,z[R].color=A,z[R].opacity=T)}t?(x.updateSourceBuffer("fillOpacity"),x.updateSourceBuffer("fillColor")):(x.modified(),q.boundsDirty(!0),x.boundsDirtyTimestamp().modified())}(!!(g.dataTime().timestamp()<g.buildTime().timestamp()&&f)),g.renderer().contextRenderer().hasActor(v)||(g.renderer().contextRenderer().addActor(v),p=!0),g.buildTime().modified()},this._update=function(t){g.ready&&(t&&t.mayDelay&&p?m=g.layer().map().scheduleAnimationFrame(g._update):(m&&(g.layer().map().scheduleAnimationFrame(g._update,"remove"),m=null),w.call(g),(g.dataTime().timestamp()>=g.buildTime().timestamp()||g.updateTime().timestamp()<=g.timestamp())&&g._build(),v.setVisible(g.visible()),v.material().setBinNumber(g.bin()),g.updateTime().modified()))},this._exit=function(){m&&g.layer()&&(g.layer().map().scheduleAnimationFrame(g._update,"remove"),m=null),g.renderer().contextRenderer().removeActor(v),y()},this._init(t),this};r(a,o),i("webgl","polygon",a),t.exports=a},9304:function(t,e,n){var r=n(4626),i=n(1098).registerFeature,o=n(3842),a=n(77),s=n(642),u=16777216,l=function(t){"use strict";if(!(this instanceof l))return new l(t);o.call(this,t);var e=n(5616),r=n(1611),i=n(4084),c=n(8711),f=n(6238),h=n(8961),d=n(3260);i.call(this);var p,m,g,y,v,x,_,b=this,w=this._exit,M=this._update,A={},T=a(),E=a();function C(t){var e=new r.mapper({dynamicDraw:!0});return e.s_modified=e.modified,e.g_timestamp=a(),e.timestamp=e.g_timestamp.timestamp,e.modified=function(){return e.s_modified(),e.g_timestamp.modified(),e},e.s_render=e.render,e.render=t,e}return this.actors=function(){var t=[];return m&&t.push(m),g&&t.push(g),t},this._build=function(){var t,e,n,i,o,a,s,u,l;b.position()&&((_=b._generateQuads()).imgQuads.length&&!m&&(b.visible(!1),t=C(b._renderImageQuads),(m=new r.actor).setMapper(t),e=new r.material,(n=new r.shaderProgram).addVertexAttribute(new r.vertexAttribute("vertexPosition"),r.vertexAttributeKeys.Position),n.addVertexAttribute(new r.vertexAttribute("textureCoord"),r.vertexAttributeKeys.TextureCoordinate),p=new r.modelViewOriginUniform("modelViewMatrix",_.origin),n.addUniform(p),n.addUniform(new r.projectionUniform("projectionMatrix")),n.addUniform(new r.floatUniform("opacity",1)),n.addUniform(new r.floatUniform("zOffset",0)),(l=new r.uniform(r.GL.INT,"sampler2d")).set(0),n.addUniform(l),u=b.renderer()._glContext(),(o=new r.uniform(u.FLOAT_VEC2,"crop")).set([1,1]),n.addUniform(o),(a=new r.uniform(u.FLOAT_VEC4,"cropsource")).set([0,0,0,0]),n.addUniform(a),n.addShader(r.getCachedShader(u.VERTEX_SHADER,u,f)),n.addShader(r.getCachedShader(u.FRAGMENT_SHADER,u,c)),b._hookBuild&&b._hookBuild(n),e.addAttribute(n),e.addAttribute(new r.blend),s=new r.geometryData,y=void 0,(i=new r.sourceDataT2fv).pushBack([0,0,1,0,0,1,1,1]),s.addSource(i),t.setGeometryData(s),m.setMaterial(e),b.renderer().contextRenderer().addActor(m),b.visible(!0)),_.clrQuads.length&&!g&&(b.visible(!1),t=C(b._renderColorQuads),(g=new r.actor).setMapper(t),e=new r.material,(n=new r.shaderProgram).addVertexAttribute(new r.vertexAttribute("vertexPosition"),r.vertexAttributeKeys.Position),x=new r.modelViewOriginUniform("modelViewMatrix",_.origin),n.addUniform(x),n.addUniform(new r.projectionUniform("projectionMatrix")),n.addUniform(new r.floatUniform("opacity",1)),n.addUniform(new r.floatUniform("zOffset",0)),u=b.renderer()._glContext(),n.addUniform(new r.uniform(u.FLOAT_VEC3,"vertexColor")),n.addShader(r.getCachedShader(u.VERTEX_SHADER,u,d)),n.addShader(r.getCachedShader(u.FRAGMENT_SHADER,u,h)),e.addAttribute(n),e.addAttribute(new r.blend),s=new r.geometryData,v=void 0,t.setGeometryData(s),g.setMaterial(e),b.renderer().contextRenderer().addActor(g),b.visible(!0)),p&&p.setOrigin(_.origin),x&&x.setOrigin(_.origin),b._updateTextures(),b.buildTime().modified())},this._updateTextures=function(){var t;e.each(_.imgQuads,(function(e,n){if(n.image)if(n.image._texture)n.texture=n.image._texture;else{(t=new r.texture).setImage(n.image);var i=b.nearestPixel();if(void 0!==i)if(!0!==i&&s.isNonNullFinite(i))i=b.layer().map().zoom()>=i;i&&t.setNearestPixel(!0),n.texture=n.image._texture=t}}))},this._renderColorQuads=function(t){if(_.clrQuads.length){var n=this;(n.timestamp()>E.timestamp()||b.dataTime().timestamp()>E.timestamp()||t.m_contextChanged||!v||12*_.clrQuads.length>v.length)&&function(t){var n=t.m_context,r=!1;_.clrQuads.length&&((!v||v.length<12*_.clrQuads.length||!A.clrQuadsPosition)&&(A.clrQuadsPosition&&n.deleteBuffer(A.clrQuadsPosition),A.clrQuadsPosition=n.createBuffer(),v=new Float32Array(12*Math.max(128,2*_.clrQuads.length)),r=!0),e.each(_.clrQuads,(function(t,e){for(var n=0;n<12;n+=1)v[12*t+n]=e.pos[n]-_.origin[n%3]})),n.bindBuffer(n.ARRAY_BUFFER,A.clrQuadsPosition),r?n.bufferData(n.ARRAY_BUFFER,v,n.DYNAMIC_DRAW):n.bufferSubData(n.ARRAY_BUFFER,0,v)),E.modified()}(t),n.s_render(t,!0);var i,o,a,s=t.m_context;s.bindBuffer(s.ARRAY_BUFFER,A.clrQuadsPosition),e.each(_.clrQuads,(function(e,n){n.opacity!==i&&(i=n.opacity,s.uniform1fv(t.m_material.shaderProgram().uniformLocation("opacity"),new Float32Array([i]))),(n.zOffset||0)!==o&&(o=n.zOffset||0,s.uniform1fv(t.m_material.shaderProgram().uniformLocation("zOffset"),new Float32Array([o]))),a&&a.r===n.color.r&&a.g===n.color.g&&a.b===n.color.b||(a=n.color,s.uniform3fv(t.m_material.shaderProgram().uniformLocation("vertexColor"),new Float32Array([a.r,a.g,a.b]))),s.bindBuffer(s.ARRAY_BUFFER,A.clrQuadsPosition),s.vertexAttribPointer(r.vertexAttributeKeys.Position,3,s.FLOAT,!1,12,12*e*4),s.enableVertexAttribArray(r.vertexAttributeKeys.Position),s.drawArrays(s.TRIANGLE_STRIP,0,4)})),s.bindBuffer(s.ARRAY_BUFFER,null),n.undoBindVertexData(t)}},this._renderImageQuads=function(t){if(_.imgQuads.length){var n=this;(n.timestamp()>T.timestamp()||b.dataTime().timestamp()>T.timestamp()||t.m_contextChanged||!y||12*_.imgQuads.length>y.length)&&function(t){var n=t.m_context,r=!1;_.imgQuads.length&&((!y||y.length<12*_.imgQuads.length||!A.imgQuadsPosition)&&(A.imgQuadsPosition&&n.deleteBuffer(A.imgQuadsPosition),A.imgQuadsPosition=n.createBuffer(),y=new Float32Array(12*Math.max(128,2*_.imgQuads.length)),r=!0),e.each(_.imgQuads,(function(t,e){for(var n=0;n<12;n+=1)y[12*t+n]=e.pos[n]-_.origin[n%3]})),n.bindBuffer(n.ARRAY_BUFFER,A.imgQuadsPosition),r?n.bufferData(n.ARRAY_BUFFER,y,n.DYNAMIC_DRAW):n.bufferSubData(n.ARRAY_BUFFER,0,y)),T.modified()}(t),n.s_render(t,!0);var i,o,a,l,c,f,h,d,p=t.m_context,m={x:1,y:1},g={x0:0,y0:0,x1:1,y1:1},v=b.nearestPixel();if(void 0!==v){if(!0!==v&&s.isNonNullFinite(v)){var x=b.layer().map().zoom();v=x>=v}_.imgQuads.forEach((function(e){if(e.image&&e.texture&&e.texture.nearestPixel()!==v&&e.texture.textureHandle()){t.m_context.bindTexture(r.GL.TEXTURE_2D,e.texture.textureHandle()),t.m_context.texParameteri(r.GL.TEXTURE_2D,r.GL.TEXTURE_MIN_FILTER,v?r.GL.NEAREST:r.GL.LINEAR),t.m_context.texParameteri(r.GL.TEXTURE_2D,r.GL.TEXTURE_MAG_FILTER,v?r.GL.NEAREST:r.GL.LINEAR),t.m_context.bindTexture(r.GL.TEXTURE_2D,null);var n=e.texture.modified;e.texture.modified=function(){},e.texture.setNearestPixel(v),e.texture.modified=n}}))}b._hookRenderImageQuads&&b._hookRenderImageQuads(t,_.imgQuads),p.bindBuffer(p.ARRAY_BUFFER,A.imgQuadsPosition),e.each(_.imgQuads,(function(e,n){n.image&&(n.texture.bind(t),n.image.width*n.image.height>u&&(u=n.image.width*n.image.height,p.getError()===p.OUT_OF_MEMORY&&console.log("Insufficient GPU memory for texture")),n.opacity!==i&&(i=n.opacity,p.uniform1fv(t.m_material.shaderProgram().uniformLocation("opacity"),new Float32Array([i]))),(n.zOffset||0)!==o&&(o=n.zOffset||0,p.uniform1fv(t.m_material.shaderProgram().uniformLocation("zOffset"),new Float32Array([o]))),a=n.crop||{x:1,y:1},m&&a.x===m.x&&a.y===m.y||(m=a,p.uniform2fv(t.m_material.shaderProgram().uniformLocation("crop"),new Float32Array([void 0===m.x?1:m.x,void 0===m.y?1:m.y]))),c=n.image.width,f=n.image.height,l=n.crop||{left:0,top:0,right:c,bottom:f},g&&l.left===g.left&&l.top===g.top&&l.right===g.right&&l.bottom===g.bottom&&h===c&&d===f||(g=l,h=c,d=f,p.uniform4fv(t.m_material.shaderProgram().uniformLocation("cropsource"),new Float32Array([g.left/c,g.top/f,g.right/c,g.bottom/f]))),p.bindBuffer(p.ARRAY_BUFFER,A.imgQuadsPosition),p.vertexAttribPointer(r.vertexAttributeKeys.Position,3,p.FLOAT,!1,12,12*e*4),p.enableVertexAttribArray(r.vertexAttributeKeys.Position),p.drawArrays(p.TRIANGLE_STRIP,0,4),n.texture.undoBind(t))})),p.bindBuffer(p.ARRAY_BUFFER,null),n.undoBindVertexData(t)}},this._update=function(){M.call(b),(b.buildTime().timestamp()<=b.dataTime().timestamp()||b.updateTime().timestamp()<b.timestamp())&&b._build(),g&&(g.setVisible(b.visible()),g.material().setBinNumber(b.bin())),m&&(m.setVisible(b.visible()),m.material().setBinNumber(b.bin())),b.updateTime().modified()},this._cleanup=function(){m&&(b.renderer().contextRenderer().removeActor(m),m=null),g&&(b.renderer().contextRenderer().removeActor(g),g=null),y=void 0,v=void 0,Object.keys(A).forEach((function(t){delete A[t]})),_&&_.imgQuads&&(_.imgQuads.forEach((function(t){t.texture&&(delete t.texture,delete t.image._texture)})),b._updateTextures()),b.modified()},this.setShader=function(t,e){switch(t){case"image_vertex":f=e;break;case"image_fragment":c=e;break;case"color_vertex":d=e;break;case"color_fragment":h=e;break;default:return}return b},this._exit=function(){b._cleanup(),w.call(b)},b._init(t),this};r(l,o);var c={};c[o.capabilities.color]=!0,c[o.capabilities.image]=!0,c[o.capabilities.imageCrop]=!0,c[o.capabilities.imageFixedScale]=!1,c[o.capabilities.imageFull]=!0,c[o.capabilities.canvas]=!1,c[o.capabilities.video]=!1,i("webgl","quad",l,c),t.exports=l},1474:function(t,e,n){var r=n(1098).registerLayerAdjustment,i=n(9264),o=function(){"use strict";var t,e=n(6409),r=this,o=this._init,a=this._exit,s=this._update,u=this.visible,l=this.zIndex,c=0,f=[];this._drawTile=function(e){if(t){var n,o,a=r._tileBounds(e),s=e.index.level||0,u=r._tileOffset(s),l=r.tileCropFromBounds(e),h={},d=r.renderer().contextRenderer().m_depthBits;l&&(h.crop={x:l.x/r._options.tileWidth,y:l.y/r._options.tileHeight}),h.ul=r.fromLocal(r.fromLevel({x:a.left-u.x,y:a.top-u.y},s),0),h.ll=r.fromLocal(r.fromLevel({x:a.left-u.x,y:a.bottom-u.y},s),0),h.ur=r.fromLocal(r.fromLevel({x:a.right-u.x,y:a.top-u.y},s),0),h.lr=r.fromLocal(r.fromLevel({x:a.right-u.x,y:a.bottom-u.y},s),0),h.ul.z=h.ll.z=h.ur.z=h.lr.z=0,n=r._options.keepLower?r._options.maxLevel-s+1:1,(o=(o=r.map().listSceneObjects().filter((function(t){return t instanceof i}))).slice(o.indexOf(r)+1)).forEach((function(t){n+=t._options.keepLower?t._options.maxLevel-t._options.minLevel+1:1})),h.zOffset=n*Math.pow(2,-d)*i._zOffsetMultiple,c+=1,h.id=c,e.quadId=h.id,h.image=e.image,f.push(h),t.data(f),t._update(),r.draw()}},this._remove=function(e){if(void 0!==e.quadId&&t){for(var n=0;n<f.length;n+=1)if(f[n].id===e.quadId){f.splice(n,1);break}t.data(f),t._update(),r.draw()}},this.visible=function(e){return void 0===e?u():(r.visible()!==e&&(u(e),t&&t.visible(t.visible(void 0,!0),!0)),r)},this.zIndex=function(t,e){return void 0!==t&&r._clearQuads(),l.apply(r,arguments)},this._clearQuads=function(n){(!n||n.layer&&n.layer instanceof i&&n.layer.autoshareRenderer()&&(n.event!==e.layerAdd&&n.event!==e.layerRemove||!r.map().layers().every((function(t){return t===n.layer||n.layer.zIndex()>t.zIndex()}))))&&(r.clear(),t&&t.modified(),n&&r.draw())},this._update=function(e){return s.call(r,e),t&&t.nearestPixel&&t.nearestPixel(r.nearestPixel()),r._addBaseQuadToTiles(t,f),r},this._cleanup=function(){var t;if(r.cache&&r.cache._cache){for(var e in r.cache._cache)(t=r.cache._cache[e])._image&&t._image._texture&&delete t._image._texture;r.cache.clear()}r.clear()},this._exit=function(){var n=r.map();n.geoOff(e.layerAdd,r._clearQuads),n.geoOff(e.layerRemove,r._clearQuads),r._cleanup(),r.deleteFeature(t),t=null,f=[],a.apply(r,arguments)},this._init=function(){o.apply(r,arguments),(t=r.createFeature("quad",{previewColor:r._options.previewColor,previewImage:r._options.previewImage})).geoTrigger=void 0,t.gcs(r._options.gcs||r.map().gcs()),t.data(f),t._update();var n=r.map();n.geoOn(e.layerAdd,r._clearQuads),n.geoOn(e.layerRemove,r._clearQuads),r.geoOn(e.unhidden,(function(){r.map().scheduleAnimationFrame((function(){r._clearQuads(),r.map().draw()}))}))},this._getSubLayer=function(){},this._updateSubLayers=void 0};i._zOffsetMultiple=2,r("webgl","tile",o),t.exports=o},536:function(t,e,n){var r=n(4626),i=n(1098).registerFeature,o=n(338),a=function(t){"use strict";return this instanceof a?(t=t||{},o.call(this,t),n(4084).call(this),this._init(t),this):new a(t)};r(a,o),i("webgl","track",a),t.exports=a},7945:function(t,e,n){var r,i=n(4626),o=n(1098).registerRenderer,a=n(2274),s=function(t){"use strict";if(!(this instanceof s))return new s(t);t=t||{},a.call(this,t);var e,r=n(5616),i=n(1611),o=n(3503),u=n(642),l=n(6409),c=this,f=null,h=null,d=!1,p=this._init,m=this._exit;return this.contextRenderer=function(){return f},this.api=function(){return s.apiname},this._init=function(){if(c.initialized())return c;p.call(c);var e=t.canvas||r(document.createElement("canvas"));if(e.addClass("webgl-canvas"),r(c.layer().node().get(0)).append(e),window.overrideContextAttributes){var n=e.get(0),o=n.getContext;n.getContext=function(t,e){if(e=e||{},window.overrideContextAttributes)for(var r in window.overrideContextAttributes)window.overrideContextAttributes.hasOwnProperty(r)&&(e[r]=window.overrideContextAttributes[r]);return o.call(n,t,e)}}(h=i.viewer(e.get(0),t.options)).init(),(f=h.renderWindow().activeRenderer()).setResetScene(!1),e.get(0).addEventListener("webglcontextlost",(function(t){return t.preventDefault()}),!1),e.get(0).addEventListener("webglcontextrestored",(function(){return h.renderWindow()._init()}),!1),h.renderWindow().renderers().length>0&&f.setLayer(h.renderWindow().renderers().length),c.canvas(e);var a=c.layer().map().size();return c._resize(0,0,a.width,a.height),c},this._resize=function(t,e,n,r){var i=h.renderWindow();return t===i.windowPosition[0]&&e===i.windowPosition[1]&&n===c.width()&&r===c.height()||(c._setWidthHeight(n,r),c.canvas().attr("width",n),c.canvas().attr("height",r),i.positionAndResize(t,e,n,r),d=!0,c._render()),c},this._render=function(){return c.layer().map().scheduleAnimationFrame(c._renderFrame,!0),c},this._renderFrame=function(){h&&(d&&(d=!1,c._updateRendererCamera()),h.render())},this._glContext=function(){return h&&h.renderWindow()?h.renderWindow().context():i.GL},this._exit=function(){if(c.layer().map().scheduleAnimationFrame(c._renderFrame,"remove"),c.canvas().remove(),h){var t=new i.renderState;t.m_renderer=h,t.m_context=c._glContext(),h.exit(t);var e=c._glContext();e!==i.GL&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").loseContext&&e.getExtension("WEBGL_lose_context").loseContext()}i.clearCachedShaders(i.GL),h=null,m()},this._updateRendererCamera=function(){var t=h.renderWindow(),n=c.layer().map(),r=n.camera(),i=n.rotation()||0,a=r.view,s=r.projectionMatrix;if(s[15])s=o.copy(u.mat4AsArray(),s),s=o.scale(s,s,[1,1,-.5]),s=o.translate(s,s,[0,0,r.clipbounds.far]);else{var l=r.clipbounds.near,f=r.clipbounds.far;s=o.copy(u.mat4AsArray(),s),s=o.scale(s,s,[1/l,1/l,-1/f])}var d=Math.PI/2,p=i%d,m=Math.min(Math.abs(p),Math.abs(p-d))<1e-5;t.renderers().forEach((function(t){var i=t.camera();if(!u.compareArrays(a,i.viewMatrix())||!u.compareArrays(s,i.projectionMatrix())||e!==n.zoom()){e=n.zoom(),i.setViewMatrix(a,!0),i.setProjectionMatrix(s);var o=r.viewport;s[1]||s[2]||s[3]||s[4]||s[6]||s[7]||s[8]||s[9]||s[11]||1!==s[15]||!m||o.left&&o.left%1||o.top&&o.top%1||parseFloat(e.toFixed(6))!==parseFloat(e.toFixed(0))?i.viewAlignment=function(){return null}:i.viewAlignment=function(){var t={roundx:2/o.width,roundy:2/o.height};return t.dx=o.width%2?.5*t.roundx:0,t.dy=o.height%2?.5*t.roundy:0,t}}}))},c.layer().geoOn(l.pan,(function(t){d=!0})),c.layer().geoOn(l.parallelprojection,(function(t){var e=c.contextRenderer(),n=c.layer();if(t.geo&&t.geo._triggeredBy!==n){if(!e||!e.camera())return void console.log("Parallel projection event triggered on unconnected VGL renderer.");e.camera().setEnableParallelProjection(t.parallelProjection),d=!0}})),this};s.apiname="webgl",i(s,a),o("webgl",s),o("vgl",s),s.supported=function(){if(void 0===r){var t,e;try{(e=(t=document.createElement("canvas")).getContext("webgl")||t.getContext("experimental-webgl")).getSupportedExtensions().indexOf("WEBGL_debug_renderer_info")>=0&&(s._unmaskedRenderer=e.getParameter(e.getExtension("WEBGL_debug_renderer_info").UNMASKED_RENDERER_WEBGL)),s._maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),s._maxPointSize=e.getParameter(e.ALIASED_POINT_SIZE_RANGE)[1],r=!0}catch(t){console.warn("No webGL support"),r=!1}t=void 0,e=void 0}return r},s.fallback=function(){return null},t.exports=s},632:function(t,e,n){"use strict";var r=n(4942),i=n.n(r),o=n(278),a=n.n(o),s=n(3021),u=n.n(s),l=new URL(n(3158),n.b),c=new URL(n(5245),n.b),f=new URL(n(8546),n.b),h=new URL(n(9803),n.b),d=a()(i()),p=u()(l),m=u()(c),g=u()(f),y=u()(h);d.push([t.id,'.geojs-map{position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;overflow:hidden}.geojs-map .geo-attribution{position:absolute;right:0;bottom:0;padding-right:5px;cursor:auto;font:11px/1.5 "Helvetica Neue",Arial,Helvetica,sans-serif;z-index:1001;background:rgba(255,255,255,0.7);clear:both;display:block;pointer-events:auto}.geojs-map .geo-attribution .geo-attribution-layer{padding-left:5px}.geojs-map .canvas-canvas{display:block;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;-ms-transform-origin:0 0;transform-origin:0 0}.geojs-map .webgl-canvas{display:block}.geojs-map .geojs-layer{position:absolute;width:100%;height:100%;left:0;top:0;pointer-events:none}.geojs-map .geojs-layer.active:not(.hidden) > *{pointer-events:auto}.geojs-map .geojs-layer.hidden{display:none}.geojs-map .geojs-layer.hidden[renderer="webgl"]{display:inherit}.geojs-map .geo-tile-layer{-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;-ms-transform-origin:0 0;transform-origin:0 0;line-height:0;font-size:0}.geojs-map.annotation-input{cursor:crosshair}.geojs-map.annotation-input.annotation-intersect{cursor:url('+p+") 12 12,crosshair}.geojs-map.annotation-input.annotation-difference{cursor:url("+m+") 12 12,crosshair}.geojs-map.annotation-input.annotation-union{cursor:url("+g+") 12 12,crosshair}.geojs-map.annotation-input.annotation-xor{cursor:url("+y+") 12 12,crosshair}.geojs-map.annotation-cursor{cursor:crosshair}.geojs-map.annotation-cursor.annotation-intersect{cursor:url("+p+") 12 12,crosshair}.geojs-map.annotation-cursor.annotation-difference{cursor:url("+m+") 12 12,crosshair}.geojs-map.annotation-cursor.annotation-union{cursor:url("+g+") 12 12,crosshair}.geojs-map.annotation-cursor.annotation-xor{cursor:url("+y+') 12 12,crosshair}.geojs-map.highlight-focus:after{content:"";display:block;position:absolute;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;left:0;top:0;right:0;bottom:0;border:3px solid Highlight;opacity:1;-ms-filter:none;filter:none;-webkit-transition:opacity 0s;-moz-transition:opacity 0s;-o-transition:opacity 0s;-ms-transition:opacity 0s;transition:opacity 0s;visibility:hidden}.geojs-map.highlight-focus:focus:after{visibility:visible;-webkit-transition:opacity 2.5s ease-in;-moz-transition:opacity 2.5s ease-in;-o-transition:opacity 2.5s ease-in;-ms-transition:opacity 2.5s ease-in;transition:opacity 2.5s ease-in;opacity:0;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";filter:alpha(opacity=0)}.geo-tile-container{position:absolute}.geo-tile-container.crop{overflow:hidden}',"",{version:3,sources:["webpack://./main.styl","webpack://./../node_modules/nib/lib/nib/vendor.styl","webpack://./../node_modules/nib/lib/nib/overflow.styl","webpack://./../node_modules/nib/lib/nib/flex.styl","webpack://./../node_modules/nib/lib/nib/border.styl"],names:[],mappings:"AAEA,WACE,iBAAS,CCwCO,wBAAG,CAAH,qBAAG,CAAH,oBAAG,CARN,gBAAG,CChBd,eAAU,CFZZ,4BACE,iBAAS,CACT,OAAM,CACN,QAAO,CACP,iBAAc,CC4ed,WAAO,CD1eP,yDAA8B,CAC9B,YAAQ,CC6dR,gCAAW,CD3dX,UAAM,CGMN,aAAS,CHJT,mBAAe,CAEf,mDACE,gBAAa,CAEjB,0BGDE,aAAS,CFqBK,4BAAG,CAAH,yBAAG,CAAH,uBAAG,CAAH,wBAAG,CARN,oBAAG,CDThB,yBGJE,aAAS,CHOX,wBACE,iBAAS,CACT,UAAM,CACN,WAAO,CACP,MAAK,CACL,KAAI,CACJ,mBAAe,CAEb,gDACE,mBAAe,CACnB,+BGjBA,YAAS,CHmBT,iDGnBA,eAAS,CHsBX,2BCDgB,4BAAG,CAAH,yBAAG,CAAH,uBAAG,CAAH,wBAAG,CARN,oBAAG,CDWd,aAAY,CACZ,WAAU,CAEZ,4BCscE,gBAAO,CDpcP,iDCocA,8DAAO,CDlcP,kDCkcA,8DAAO,CDhcP,6CCgcA,8DAAO,CD9bP,2CC8bA,8DAAO,CD3bT,6BC2bE,gBAAO,CDzbP,kDCybA,8DAAO,CDvbP,mDCubA,8DAAO,CDrbP,8CCqbA,8DAAO,CDnbP,4CCmbA,8DAAO,CD/aP,iCACE,UAAQ,CGnDV,aAAS,CHqDP,iBAAS,CChCG,6BAAG,CAAH,0BAAG,CARN,qBAAG,CD0CZ,MAAK,CACL,KAAI,CACJ,OAAM,CACN,QAAO,CIvET,0BAAQ,CH4PV,SAAS,CAQH,eAAY,CACZ,WAAQ,CArOE,6BAAG,CAAH,0BAAG,CAAH,wBAAG,CAAH,yBAAG,CARN,qBAAG,CDqDZ,iBAAW,CACb,uCACE,kBAAW,CC/CC,uCAAG,CAAH,oCAAG,CAAH,kCAAG,CAAH,mCAAG,CARN,+BAAG,CAoOhB,SAAS,CAWH,+DAAyE,CACzE,uBAAiC,CDrLzC,oBACE,iBAAS,CACT,yBE3EE,eAAU",sourcesContent:['@import \'~nib/index.styl\'\n\n.geojs-map\n  position relative\n  user-select none\n  overflow hidden\n\n  .geo-attribution\n    position absolute\n    right 0\n    bottom 0\n    padding-right 5px\n    cursor auto\n    font 11px/1.5 "Helvetica Neue", Arial, Helvetica, sans-serif\n    z-index 1001\n    background rgba(255,255,255,0.7)\n    clear both\n    display block\n    pointer-events auto\n\n    .geo-attribution-layer\n      padding-left 5px\n\n  .canvas-canvas\n    display block\n    transform-origin 0px 0px\n  .webgl-canvas\n    display block\n\n  .geojs-layer\n    position absolute\n    width 100%\n    height 100%\n    left 0\n    top 0\n    pointer-events none\n    &.active:not(.hidden)\n      > *\n        pointer-events auto\n    &.hidden\n      display none\n    &.hidden[renderer="webgl"]\n      display inherit\n\n  .geo-tile-layer\n    transform-origin 0px 0px\n    line-height 0\n    font-size 0\n\n  &.annotation-input\n    cursor crosshair\n    &.annotation-intersect\n      cursor embedurl("./css/cursor-crosshair-intersect.svg") 12 12,crosshair\n    &.annotation-difference\n      cursor embedurl("./css/cursor-crosshair-difference.svg") 12 12,crosshair\n    &.annotation-union\n      cursor embedurl("./css/cursor-crosshair-union.svg") 12 12,crosshair\n    &.annotation-xor\n      cursor embedurl("./css/cursor-crosshair-xor.svg") 12 12,crosshair\n\n  &.annotation-cursor\n    cursor crosshair\n    &.annotation-intersect\n      cursor embedurl("./css/cursor-crosshair-intersect.svg") 12 12,crosshair\n    &.annotation-difference\n      cursor embedurl("./css/cursor-crosshair-difference.svg") 12 12,crosshair\n    &.annotation-union\n      cursor embedurl("./css/cursor-crosshair-union.svg") 12 12,crosshair\n    &.annotation-xor\n      cursor embedurl("./css/cursor-crosshair-xor.svg") 12 12,crosshair\n\n  &.highlight-focus\n    &:after\n      content ""\n      display block\n      position absolute\n      box-sizing border-box\n      left 0px\n      top 0px\n      right 0px\n      bottom 0px\n      // Highlight is technically a css2 color.  We may need to specify it\n      // explicitly.  #3B66A6 seems close\n      border 3px solid Highlight\n      opacity 1\n      transition opacity 0s\n      visibility hidden\n    &:focus:after\n      visibility visible\n      transition opacity 2.5s ease-in\n      opacity 0\n\n.geo-tile-container\n  position absolute\n  &.crop\n    overflow hidden\n',"use('../nodes/vendor-helpers.js')\n@import 'config'\n\n/*\n * Alias \"nowrap\" as \"no-wrap\".\n */\n\nno-wrap = unquote('nowrap')\n\n/*\n * Helper to find out if a given value is a width\n */\n\nis-width(val)\n  if auto == val\n    return true\n  else if val && 'unit' == type(val)\n    // Stylus does not short circuit so we need to perform this as a distinct\n    // operation to prevent errors\n    return '' != unit(val)\n  return false\n\n/*\n * Vendor support for the given prop / arguments, optionally specifying the\n * only prefixes to utilize, or those which should be ignored.\n */\n\nvendor(prop, args, only = null, ignore = null, vendor-property = true)\n  need_normalize = !vendor-property or prop in ('transition' 'transition-property' 'border-image' 'border-image-slice')\n  for prefix in vendor-prefixes\n    unless (only and !(prefix in only)) or (ignore and prefix in ignore)\n      if official == prefix\n        if need_normalize\n          {prop}: normalize(prop,('%s' % args))\n        else\n          {prop}: args\n      else\n        newprop = prop\n        newprop = '-' + prefix + '-' + prop if vendor-property\n\n        if need_normalize\n          {newprop}: normalize(prop,('%s' % args),prefix)\n        else\n          {newprop}: args\n/*\n * Vendorize the given value.\n */\n\nvendor-value(arg, only = null, ignore = null)\n  prop = current-property[0]\n  for prefix in vendor-prefixes\n    unless (only and !(prefix in only)) or (ignore and prefix in ignore) or official == prefix\n      add-property(prop, '-%s-%s' % (prefix arg))\n  arg\n\n/*\n * Vendor \"box-shadow\" support.\n */\n\nbox-shadow()\n  vendor('box-shadow', arguments, only: webkit official)\n\n/*\n * Vendor \"user-select\" support.\n */\n\nuser-select()\n  vendor('user-select', arguments, only: webkit moz ms official)\n\n/*\n * Vendor \"column-count\" support.\n */\n\ncolumn-count()\n  vendor('column-count', arguments, only: webkit moz official)\n\n/*\n * Vendor \"column-gap\" support.\n */\n\ncolumn-gap()\n  vendor('column-gap', arguments, only: webkit moz official)\n\n/*\n * Vendor \"column-rule\" support.\n */\n\ncolumn-rule()\n  vendor('column-rule', arguments, only: webkit moz official)\n\n/*\n * Vendor \"column-rule-color\" support.\n */\n\ncolumn-rule-color()\n  vendor('column-rule-color', arguments, only: webkit moz official)\n\n/*\n * Vendor \"column-rule-width\" support.\n */\n\ncolumn-rule-width()\n  vendor('column-rule-width', arguments, only: webkit moz official)\n\n/*\n * Vendor \"column-rule-style\" support.\n */\n\ncolumn-rule-style()\n  vendor('column-rule-style', arguments, only: webkit moz official)\n\n/*\n * Vendor \"column-width\" support.\n */\n\ncolumn-width()\n  vendor('column-width', arguments, only: webkit moz official)\n\n/*\n * Vendor \"column-span\" support.\n */\n\ncolumn-span()\n  vendor('column-span', arguments, only: webkit official)\n\n/*\n * Vendor \"column-fill\" support.\n */\n\ncolumn-fill()\n  vendor('column-fill', arguments, only: moz official)\n\n/*\n * Legacy syntax support for background-clip and background-origin\n */\n\nlegacy-bg-values(property, args)\n  legacy_args = ()\n  importance = unquote('')\n  for subargs in args\n    for arg in subargs\n      if arg in (border-box padding-box content-box)\n        arg = unquote('border')  if arg == border-box\n        arg = unquote('padding') if arg == padding-box\n        arg = unquote('content') if arg == content-box\n      if arg != '!important'\n        push(legacy_args,arg)\n      else\n        importance = !important\n  vendor(property, unquote(join(', ',legacy_args)) importance, only: moz webkit)\n\n/*\n * Vendor \"background-clip\" support.\n */\n\nbackground-clip()\n  if arguments[0] == text\n    vendor('background-clip', arguments, only: webkit)\n  else\n    legacy-bg-values('background-clip', arguments)\n    background-clip: arguments\n\n/*\n * Vendor \"background-origin\" support.\n */\n\nbackground-origin()\n  legacy-bg-values('background-origin', arguments)\n  background-origin: arguments\n\n/*\n * Vendor \"transform\" support.\n */\n\ntransform()\n  vendor('transform', arguments)\n\n/*\n * Vendor \"transform-origin\" support.\n */\ntransform-origin()\n    vendor('transform-origin', arguments)\n\n/*\n * Vendor \"transform-style\" support.\n */\n\ntransform-style()\n  vendor('transform-style', arguments)\n\n/*\n * Vendor \"border-image\" support.\n */\n\nborder-image()\n  vendor('border-image', arguments, only: webkit moz o official)\n\n/*\n * Vendor \"transition\" support.\n */\n\ntransition()\n  vendor('transition', arguments)\n\n/*\n * Vendor \"transition-property\" support.\n */\n\ntransition-property()\n  vendor('transition-property', arguments)\n\n/*\n * Vendor \"transition-duration\" support.\n */\n\ntransition-duration()\n  vendor('transition-duration', arguments)\n\n/*\n * Vendor \"transition-timing-function\" support.\n */\n\ntransition-timing-function()\n  vendor('transition-timing-function', arguments)\n\n/*\n * Vendor \"transition-delay\" support.\n */\n\ntransition-delay()\n  vendor('transition-delay', arguments)\n\n/*\n * Vendor \"backface-visibility\" support.\n */\n\nbackface-visibility()\n  vendor('backface-visibility', arguments, only: webkit moz ms official)\n\n/*\n * Vendor \"perspective\" support.\n */\n\nperspective()\n  if mixin\n    vendor('perspective', arguments, only: webkit moz ms official)\n  else\n    'perspective(%s)' % arguments\n\n/*\n * Vendor \"perspective-origin\" support.\n */\n\nperspective-origin()\n  vendor('perspective-origin', arguments, only: webkit moz ms official)\n\n/*\n * Opacity with conditional IE support.\n */\n\nopacity(n, args...)\n  opacity: n args\n  if support-for-ie\n    if n == inherit or n == initial\n      -ms-filter: n args\n      filter: n args\n    else\n      val = round(n * 100)\n      if val == 100\n        -ms-filter: none args\n        filter: none args\n      else\n        -ms-filter: '\"progid:DXImageTransform.Microsoft.Alpha(Opacity=%s)\"' % val args\n        filter: 'alpha(opacity=%s)' % val args\n\n/*\n * Vendor \"text-size-adjust\"\n */\n\ntext-size-adjust()\n  vendor('text-size-adjust', arguments)\n\n/*\n * Alias the \"white-space\" property.\n */\n\nwhitespace()\n  white-space: arguments\n\n/*\n * Vendor \"box-sizing\" support.\n */\n\nbox-sizing()\n  vendor('box-sizing', arguments, only: webkit moz official)\n\n/*\n * Vendor \"box-orient\" support.\n */\n\nbox-orient()\n  vendor('box-orient', arguments, only: webkit moz official)\n\n/*\n * Vendor \"box-flex-group\" support.\n */\n\nbox-flex-group()\n  vendor('box-flex-group', arguments, only: webkit moz official)\n\n/*\n * Vendor \"box-ordinal-group\" support.\n */\n\nbox-ordinal-group()\n  vendor('box-ordinal-group', arguments, only: webkit moz ms official)\n\n\n/*\n * Vendor \"box-align\" support.\n */\n\nbox-align()\n  vendor('box-align', arguments, only: webkit moz ms official)\n\n/*\n * Vendor \"box-pack\" support.\n */\n\nbox-pack()\n  vendor('box-pack', arguments, only: webkit moz ms official)\n\n/*\n * Vendor \"box-direction\" support.\n */\n\nbox-direction()\n  vendor('box-direction', arguments, only: webkit moz ms official)\n\n/*\n * Vendor \"animation\" support.\n */\n\nanimation()\n  vendor('animation', arguments)\n\n\n/*\n * Vendor \"animation-name\" support.\n */\n\nanimation-name()\n  vendor('animation-name', arguments)\n\n/*\n * Vendor \"animation-duration\" support.\n */\n\nanimation-duration()\n  vendor('animation-duration', arguments)\n\n/*\n * Vendor \"animation-delay\" support.\n */\n\nanimation-delay()\n  vendor('animation-delay', arguments)\n\n/*\n * Vendor \"animation-direction\" support.\n */\n\nanimation-direction()\n  vendor('animation-direction', arguments)\n\n/*\n * Vendor \"animation-iteration-count\" support.\n */\n\nanimation-iteration-count()\n  vendor('animation-iteration-count', arguments)\n\n/*\n * Vendor \"animation-timing-function\" support.\n */\n\nanimation-timing-function()\n  vendor('animation-timing-function', arguments)\n\n/*\n * Vendor \"animation-play-state\" support.\n */\n\nanimation-play-state()\n  vendor('animation-play-state', arguments)\n\n/*\n * Vendor \"animation-fill-mode\" support.\n */\n\nanimation-fill-mode()\n  vendor('animation-fill-mode', arguments)\n\n/*\n * Vendor \"hyphens\" support.\n */\n\nhyphens()\n  vendor('hyphens', arguments, only: webkit moz ms official)\n\n/*\n * Vendor \"appearance\" support.\n */\n\nappearance()\n  vendor('appearance', arguments, only: webkit moz official)\n\n/*\n * Vendor \"tab-size\" support.\n */\n\ntab-size()\n  vendor('tab-size', arguments, only: moz o official)\n\n/*\n * Vendor \"overflow-scrolling\" support.\n */\n\noverflow-scrolling()\n  vendor('overflow-scrolling', arguments, only: webkit official)\n\n/*\n * Vendor \"text-overflow\" support, , -o- for opera 9.* - 10.*\n */\n\ntext-overflow()\n  vendor('text-overflow', arguments, only: official o)\n\n/*\n * Vendor \"text-size-adjust\" support.\n */\ntext-size-adjust()\n  vendor('text-size-adjust', arguments, only: official webkit ms)\n\n/*\n * Vendor \"font-smoothing\" support, webkit only.\n */\nfont-smoothing()\n  vendor('font-smoothing', arguments, only: webkit)\n\n\n/**\n * Vendor input-placeholder/placeholder support.\n *\n * Examples:\n *    // Default syntax\n *    body\n *      placeholder(color #333, font-weight normal)\n *\n *    // The comma is important\n *    .placeholder-red\n *      placeholder(color red,)\n *\n *    // We can pass a function\n *    green-placeholder()\n *      color green\n *    .placeholder-green\n *      placeholder(green-placeholder)\n *\n *    // We can pass a hash\n *    textarea\n *      placeholder((font-style italic) (font-weight bold) (padding '4px 10px'))\n */\nplaceholder()\n  for v in ':-webkit-input' '-moz' ':-moz' '-ms-input'\n    &:{v}-placeholder\n      for pair in arguments\n        if typeof(pair) == 'function'\n          pair()\n        else if pair is not null && pair[0] is not null\n          {pair[0]}: type(pair[1]) == 'string' ? s(pair[1]) : pair[1]\ninput-placeholder = placeholder\n\n/*\n * Vendor background support (gradients).\n */\n\nbackground()\n  if match('-gradient\\(', ''+arguments)\n    vendor('background', arguments, vendor-property: false)\n  else\n    background arguments\n\nbackground-image()\n  if match('-gradient\\(', ''+arguments)\n    vendor('background-image', arguments, vendor-property: false)\n  else\n    background-image arguments\n\ncursor()\n  if match('-gradient\\(', ''+arguments)\n    vendor('cursor', arguments, vendor-property: false)\n  else\n    cursor arguments\n\nlist-style()\n  if match('-gradient\\(', ''+arguments)\n    vendor('list-style', arguments, vendor-property: false)\n  else\n    list-style arguments\n\nlist-style-image()\n  if match('-gradient\\(', ''+arguments)\n    vendor('list-style-image', arguments, vendor-property: false)\n  else\n    list-style-image arguments\n","/*\n * Overflow utility. Maps to regular overflow, and adds an ellipsis value.\n *\n * Synopsis:\n *\n *   overflow: <type>\n *\n * Examples:\n *\n *     overflow: auto\n *     overflow: hidden\n *     overflow: ellipsis\n *\n */\n\noverflow()\n  if arguments[0] == ellipsis\n    ellipsis()\n  else\n    overflow: arguments\n","/*\n * Vendor \"display: flex\" support with fallback to obsolete versions.\n */\n\nflex-version ?= box flex\n\n//\n// 1. Display values\n//    - http://www.w3.org/TR/css3-flexbox/#flex-containers\n//\ndisplay(type, args...)\n  if flex == type || inline-flex == type\n    if box in flex-version\n      if flex == type\n        display: -ms-flexbox args\n        display: vendor-value(box args, only: moz webkit)\n      else\n        display: -ms-inline-flexbox args\n        display: vendor-value(inline-box args, only: moz webkit)\n    if flex in flex-version\n      display: vendor-value(arguments, only: webkit official) // overwrites old webkit\n  else\n    display: arguments\n\n/*\n * New syntax for browsers like Google Chrome.\n * Plus a translation to the old syntax, if possible.\n */\n\n\n//\n// 5. Ordering and Orientation\n//    - http://www.w3.org/TR/css3-flexbox/#ordering-and-orientation\n//\n-flex-obsolete-direction(direction)\n  if box in flex-version\n    if row-reverse == direction || column-reverse == direction\n      vendor('box-direction', reverse, ignore: ms official)\n\n    if row == direction || row-reverse == direction\n      vendor('box-orient', horizontal, ignore: ms official)\n    else if column == direction || column-reverse == direction\n      vendor('box-orient', vertical, ignore: ms official)\n\n-flex-obsolete-wrap(value)\n  if box in flex-version\n    // WARN: wrap-reverse does not have a box equivalent. This will render in different manners\n    //    on box vs. flex values.\n    if 'wrap' == value || wrap-reverse == value\n      vendor('box-lines', multiple, ignore: ms official)\n    else if nowrap == value\n      vendor('box-lines', single, ignore: ms official)\n\nflex-direction(direction)\n  // obsolete\n  -flex-obsolete-direction(direction)\n\n  // new\n  if flex in flex-version\n    vendor('flex-direction', arguments, only: webkit ms official)\n\nflex-wrap(value)\n  // obsolete\n  -flex-obsolete-wrap(value)\n\n  if flex in flex-version\n    vendor('flex-wrap', arguments, only: webkit ms official)\n\nflex-flow()\n  // obsolete\n  -flex-obsolete-direction(arguments[0])\n  -flex-obsolete-direction(arguments[1])\n  -flex-obsolete-wrap(arguments[0])\n  -flex-obsolete-wrap(arguments[1])\n\n  // new\n  if flex in flex-version\n    vendor('flex-flow', arguments, only: webkit ms official)\n\n\norder()\n  // obsolete\n  if box in flex-version\n    vendor('box-ordinal-group', arguments, ignore: ms official)\n\n  // new\n  if flex in flex-version\n    vendor('flex-order', arguments, only: ms)\n    vendor('order', arguments, only: webkit official)\n\n\n//\n// 7. Flexibility\n//    - http://www.w3.org/TR/css3-flexbox/#flexibility\n//\nflex-grow(growth)\n  // obsolete\n  if box in flex-version\n    vendor('box-flex', growth)\n\n  // new\n  if flex in flex-version\n    vendor('flex-grow', arguments, only: webkit official)\n\nflex-basis()\n  if flex in flex-version\n    vendor('flex-basis', arguments, only: webkit official)\n\nflex-shrink()\n  if flex in flex-version\n    vendor('flex-shrink', arguments, only: webkit official)\n\nflex(growth)\n\n  // obsolete\n  if box in flex-version\n    shrink = 1\n\n    if none == growth || initial == growth\n      // Well known values\n      shrink = 0 if none == growth\n      growth = 0\n    else if is-width(growth) == true\n      // Basis is defined as the first parameter\n      growth = arguments[1] || 0\n      shrink = arguments[2] if 3 <= length(arguments)\n    else if arguments[1] && is-width(arguments[1]) == false\n      // Growth is first and shrink is second\n      shrink = arguments[1]\n\n    // Since we can't make the distinction between growing and shrinking in the box model, take\n    // the one that provides the most flexibility.\n    vendor('box-flex', max(growth, shrink), ignore: ms)\n\n  // new\n  if flex in flex-version\n    vendor('flex', arguments, only: webkit ms official)\n\n\n// converts the justification alignment\n-convert-justify(align)\n  if flex-start == align\n    return start\n  else if flex-end == align\n    return end\n  else if space-around == align\n    return distribute\n  else if space-between == align\n    return justify\n  else\n    return align\n\n//\n// 8. Alignment\n//    - http://www.w3.org/TR/css3-flexbox/#alignment\n//\njustify-content(align)\n  // obsolete\n  if box in flex-version\n    vendor('box-pack', -convert-justify(align), ignore: ms official)\n\n  // new\n  if flex in flex-version\n    vendor('flex-pack', -convert-justify(align), only: ms)\n    vendor('justify-content', align, only: webkit official)\n\nalign-content(align)\n  // WARN: Obsolete spec does not allow for adjustment here\n  if flex in flex-version\n    vendor('flex-line-pack', -convert-justify(align), only: ms)\n    vendor('align-content', align, only: webkit official)\n\n// converts alignment from 'flex' to normal value\n-convert-alignment(align)\n  if flex-start == align\n    return start\n  else if flex-end == align\n    return end\n  else\n    return align\n\nalign-items(align)\n  // obsolete\n  if box in flex-version\n    vendor('box-align', -convert-alignment(align), ignore: ms official)\n\n  // new\n  if flex in flex-version\n    vendor('flex-align', -convert-alignment(align), only: ms)\n    vendor('align-items', arguments, only: webkit official)\n\nalign-self(align)\n  // WARN: Obsolete spec does not allow for overriding alignment on individual items.\n  if flex in flex-version\n    vendor('align-self', align, only: webkit official)\n    vendor('flex-item-align', -convert-alignment(align), only: ms)\n","/*\n * border: <color>\n * border: ...\n */\n\nborder(color, args...)\n  if color is a 'color'\n    border: 1px solid color args\n  else\n    border: arguments\n"],sourceRoot:""}]),e.A=d},7046:function(t,e,n){"use strict";var r=n(4942),i=n.n(r),o=n(278),a=n.n(o)()(i());a.push([t.id,".color-legend-container{display:none;padding:10px;border:1.5px solid #000;border-radius:3px;transition:250ms background linear;background-color:rgba(255,255,255,0.75)}.color-legend-container:hover{background-color:#fff}.color-legend-container .geojs-color-legends .geojs-color-legend{margin-bottom:10px}.color-legend-container .geojs-color-legends .geojs-color-legend .geojs-title{text-align:center}.color-legend-container .geojs-color-legends .geojs-color-legend svg.svg{display:block}.color-legend-container .geojs-color-legends .geojs-color-legend svg.svg .axis.x path.domain,.color-legend-container .geojs-color-legends .geojs-color-legend svg.svg .axis.x line{fill:none;stroke:#000;stroke-width:.7}.color-legend-container .geojs-color-legends .geojs-color-legend svg.svg .axis.x text{font-size:12px}.color-legend-container .color-legend-popup{position:absolute;background:#fff;height:22px;font-size:14px;border:solid 1px #000;padding:0 5px;pointer-events:none;white-space:nowrap;z-index:100000;opacity:0}","",{version:3,sources:["webpack://./ui/colorLegendWidget.styl"],names:[],mappings:"AAAA,wBACE,YAAQ,CACR,YAAQ,CACR,uBAAO,CACP,iBAAc,CACd,kCAAW,CACX,uCAAiB,CAEjB,8BACE,qBAAiB,CAIjB,iEACE,kBAAc,CAEd,8EACE,iBAAW,CAEb,yEACE,aAAQ,CAGN,mLACE,SAAK,CACL,WAAO,CACP,eAAa,CACf,sFACE,cAAU,CAEpB,4CACE,iBAAS,CACT,eAAW,CACX,WAAO,CACP,cAAU,CACV,qBAAO,CACP,aAAQ,CACR,mBAAe,CACf,kBAAY,CACZ,cAAQ,CACR,SAAQ",sourcesContent:[".color-legend-container\n  display none\n  padding 10px\n  border 1.5px solid black\n  border-radius 3px\n  transition 250ms background linear\n  background-color rgba(255, 255, 255, 0.75)\n\n  &:hover\n    background-color rgba(255, 255, 255, 1)\n\n  .geojs-color-legends\n\n    .geojs-color-legend\n      margin-bottom 10px\n\n      .geojs-title\n        text-align center\n\n      svg.svg\n        display block\n\n        .axis.x\n          path.domain, line\n            fill none\n            stroke black\n            stroke-width 0.7\n          text\n            font-size 12px\n\n  .color-legend-popup\n    position absolute\n    background white\n    height 22px\n    font-size 14px\n    border solid 1px black\n    padding 0 5px\n    pointer-events none\n    white-space nowrap\n    z-index 100000\n    opacity 0\n"],sourceRoot:""}]),e.A=a},5290:function(t,e,n){"use strict";var r=n(4942),i=n.n(r),o=n(278),a=n.n(o)()(i());a.push([t.id,".geojs-scale-widget-bar{stroke:#000}.geojs-scale-widget-text{font-weight:bold;font-size:16px;font-family:serif}","",{version:3,sources:["webpack://./ui/scaleWidget.styl"],names:[],mappings:"AAAA,wBACE,WAAO,CACT,yBACE,gBAAY,CACZ,cAAU,CACV,iBAAY",sourcesContent:[".geojs-scale-widget-bar\n  stroke black\n.geojs-scale-widget-text\n  font-weight bold\n  font-size 16px\n  font-family serif\n"],sourceRoot:""}]),e.A=a},278:function(t){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,i,o){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(r)for(var s=0;s<this.length;s++){var u=this[s][0];null!=u&&(a[u]=!0)}for(var l=0;l<t.length;l++){var c=[].concat(t[l]);r&&a[c[0]]||(void 0!==o&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=o),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),i&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=i):c[4]="".concat(i)),e.push(c))}},e}},3021:function(t){"use strict";t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},4942:function(t){"use strict";t.exports=function(t){var e=t[1],n=t[3];if(!n)return e;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),o="/*# ".concat(i," */");return[e].concat([o]).join("\n")}return[e].join("\n")}},3369:function(t){t.exports=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8];return t[0]=a*c-s*l,t[1]=i*l-r*c,t[2]=r*s-i*a,t[3]=s*u-o*c,t[4]=n*c-i*u,t[5]=i*o-n*s,t[6]=o*l-a*u,t[7]=r*u-n*l,t[8]=n*a-r*o,t}},5723:function(t){t.exports=function(t){var e=new Float32Array(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}},817:function(t){t.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}},6396:function(t){t.exports=function(){var t=new Float32Array(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}},9133:function(t){t.exports=function(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],l=t[8];return e*(l*o-a*u)+n*(a*s-l*i)+r*(u*i-o*s)}},7053:function(t){t.exports=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]+t[3]*t[3]+t[4]*t[4]+t[5]*t[5]+t[6]*t[6]+t[7]*t[7]+t[8]*t[8])}},7068:function(t){t.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}},5018:function(t){t.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}},3955:function(t){t.exports=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,l=n*a,c=r*a,f=r*s,h=i*a,d=i*s,p=i*u,m=o*a,g=o*s,y=o*u;return t[0]=1-f-p,t[3]=c-y,t[6]=h+g,t[1]=c+y,t[4]=1-l-p,t[7]=d-m,t[2]=h-g,t[5]=d+m,t[8]=1-l-f,t}},6658:function(t){t.exports=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}},3638:function(t,e,n){t.exports={adjoint:n(3369),clone:n(5723),copy:n(817),create:n(6396),determinant:n(9133),frob:n(7053),fromMat2:n(7068),fromMat4:n(5018),fromQuat:n(3955),identity:n(6658),invert:n(6028),multiply:n(4980),normalFromMat4:n(8093),rotate:n(8163),scale:n(2311),str:n(6321),translate:n(5068),transpose:n(6333)}},6028:function(t){t.exports=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],f=c*a-s*l,h=-c*o+s*u,d=l*o-a*u,p=n*f+r*h+i*d;return p?(p=1/p,t[0]=f*p,t[1]=(-c*r+i*l)*p,t[2]=(s*r-i*a)*p,t[3]=h*p,t[4]=(c*n-i*u)*p,t[5]=(-s*n+i*o)*p,t[6]=d*p,t[7]=(-l*n+r*u)*p,t[8]=(a*n-r*o)*p,t):null}},4980:function(t){t.exports=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],h=n[0],d=n[1],p=n[2],m=n[3],g=n[4],y=n[5],v=n[6],x=n[7],_=n[8];return t[0]=h*r+d*a+p*l,t[1]=h*i+d*s+p*c,t[2]=h*o+d*u+p*f,t[3]=m*r+g*a+y*l,t[4]=m*i+g*s+y*c,t[5]=m*o+g*u+y*f,t[6]=v*r+x*a+_*l,t[7]=v*i+x*s+_*c,t[8]=v*o+x*u+_*f,t}},8093:function(t){t.exports=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],f=e[9],h=e[10],d=e[11],p=e[12],m=e[13],g=e[14],y=e[15],v=n*s-r*a,x=n*u-i*a,_=n*l-o*a,b=r*u-i*s,w=r*l-o*s,M=i*l-o*u,A=c*m-f*p,T=c*g-h*p,E=c*y-d*p,C=f*g-h*m,k=f*y-d*m,S=h*y-d*g,P=v*S-x*k+_*C+b*E-w*T+M*A;return P?(P=1/P,t[0]=(s*S-u*k+l*C)*P,t[1]=(u*E-a*S-l*T)*P,t[2]=(a*k-s*E+l*A)*P,t[3]=(i*k-r*S-o*C)*P,t[4]=(n*S-i*E+o*T)*P,t[5]=(r*E-n*k-o*A)*P,t[6]=(m*M-g*w+y*b)*P,t[7]=(g*_-p*M-y*x)*P,t[8]=(p*w-m*_+y*v)*P,t):null}},8163:function(t){t.exports=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],h=Math.sin(n),d=Math.cos(n);return t[0]=d*r+h*a,t[1]=d*i+h*s,t[2]=d*o+h*u,t[3]=d*a-h*r,t[4]=d*s-h*i,t[5]=d*u-h*o,t[6]=l,t[7]=c,t[8]=f,t}},2311:function(t){t.exports=function(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}},6321:function(t){t.exports=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}},5068:function(t){t.exports=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],h=n[0],d=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=h*r+d*a+l,t[7]=h*i+d*s+c,t[8]=h*o+d*u+f,t}},6333:function(t){t.exports=function(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}},5200:function(t){t.exports=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],f=e[9],h=e[10],d=e[11],p=e[12],m=e[13],g=e[14],y=e[15];return t[0]=s*(h*y-d*g)-f*(u*y-l*g)+m*(u*d-l*h),t[1]=-(r*(h*y-d*g)-f*(i*y-o*g)+m*(i*d-o*h)),t[2]=r*(u*y-l*g)-s*(i*y-o*g)+m*(i*l-o*u),t[3]=-(r*(u*d-l*h)-s*(i*d-o*h)+f*(i*l-o*u)),t[4]=-(a*(h*y-d*g)-c*(u*y-l*g)+p*(u*d-l*h)),t[5]=n*(h*y-d*g)-c*(i*y-o*g)+p*(i*d-o*h),t[6]=-(n*(u*y-l*g)-a*(i*y-o*g)+p*(i*l-o*u)),t[7]=n*(u*d-l*h)-a*(i*d-o*h)+c*(i*l-o*u),t[8]=a*(f*y-d*m)-c*(s*y-l*m)+p*(s*d-l*f),t[9]=-(n*(f*y-d*m)-c*(r*y-o*m)+p*(r*d-o*f)),t[10]=n*(s*y-l*m)-a*(r*y-o*m)+p*(r*l-o*s),t[11]=-(n*(s*d-l*f)-a*(r*d-o*f)+c*(r*l-o*s)),t[12]=-(a*(f*g-h*m)-c*(s*g-u*m)+p*(s*h-u*f)),t[13]=n*(f*g-h*m)-c*(r*g-i*m)+p*(r*h-i*f),t[14]=-(n*(s*g-u*m)-a*(r*g-i*m)+p*(r*u-i*s)),t[15]=n*(s*h-u*f)-a*(r*h-i*f)+c*(r*u-i*s),t}},1130:function(t){t.exports=function(t){var e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},74:function(t){t.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},3783:function(t){t.exports=function(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},8844:function(t){t.exports=function(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],l=t[8],c=t[9],f=t[10],h=t[11],d=t[12],p=t[13],m=t[14],g=t[15];return(e*a-n*o)*(f*g-h*m)-(e*s-r*o)*(c*g-h*p)+(e*u-i*o)*(c*m-f*p)+(n*s-r*a)*(l*g-h*d)-(n*u-i*a)*(l*m-f*d)+(r*u-i*s)*(l*p-c*d)}},5936:function(t){t.exports=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,l=n*a,c=r*a,f=r*s,h=i*a,d=i*s,p=i*u,m=o*a,g=o*s,y=o*u;return t[0]=1-f-p,t[1]=c+y,t[2]=h-g,t[3]=0,t[4]=c-y,t[5]=1-l-p,t[6]=d+m,t[7]=0,t[8]=h+g,t[9]=d-m,t[10]=1-l-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},5405:function(t){t.exports=function(t,e,n){var r,i,o,a=n[0],s=n[1],u=n[2],l=Math.sqrt(a*a+s*s+u*u);if(Math.abs(l)<1e-6)return null;return a*=l=1/l,s*=l,u*=l,r=Math.sin(e),i=Math.cos(e),o=1-i,t[0]=a*a*o+i,t[1]=s*a*o+u*r,t[2]=u*a*o-s*r,t[3]=0,t[4]=a*s*o-u*r,t[5]=s*s*o+i,t[6]=u*s*o+a*r,t[7]=0,t[8]=a*u*o+s*r,t[9]=s*u*o-a*r,t[10]=u*u*o+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},3310:function(t){t.exports=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=r+r,u=i+i,l=o+o,c=r*s,f=r*u,h=r*l,d=i*u,p=i*l,m=o*l,g=a*s,y=a*u,v=a*l;return t[0]=1-(d+m),t[1]=f+v,t[2]=h-y,t[3]=0,t[4]=f-v,t[5]=1-(c+m),t[6]=p+g,t[7]=0,t[8]=h+y,t[9]=p-g,t[10]=1-(c+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}},1826:function(t){t.exports=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},4692:function(t){t.exports=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}},1349:function(t){t.exports=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},8034:function(t){t.exports=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},1655:function(t){t.exports=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},3277:function(t){t.exports=function(t,e,n,r,i,o,a){var s=1/(n-e),u=1/(i-r),l=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*u,t[10]=(a+o)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*l,t[15]=0,t}},257:function(t){t.exports=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},3503:function(t,e,n){t.exports={create:n(3783),clone:n(1130),copy:n(74),identity:n(257),transpose:n(2664),invert:n(6583),adjoint:n(5200),determinant:n(8844),multiply:n(9899),translate:n(573),scale:n(177),rotate:n(648),rotateX:n(5618),rotateY:n(5345),rotateZ:n(5208),fromRotation:n(5405),fromRotationTranslation:n(3310),fromScaling:n(1826),fromTranslation:n(4692),fromXRotation:n(1349),fromYRotation:n(8034),fromZRotation:n(1655),fromQuat:n(5936),frustum:n(3277),perspective:n(2649),perspectiveFromFieldOfView:n(7733),ortho:n(2337),lookAt:n(8541),str:n(6600)}},6583:function(t){t.exports=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],f=e[9],h=e[10],d=e[11],p=e[12],m=e[13],g=e[14],y=e[15],v=n*s-r*a,x=n*u-i*a,_=n*l-o*a,b=r*u-i*s,w=r*l-o*s,M=i*l-o*u,A=c*m-f*p,T=c*g-h*p,E=c*y-d*p,C=f*g-h*m,k=f*y-d*m,S=h*y-d*g,P=v*S-x*k+_*C+b*E-w*T+M*A;if(!P)return null;return P=1/P,t[0]=(s*S-u*k+l*C)*P,t[1]=(i*k-r*S-o*C)*P,t[2]=(m*M-g*w+y*b)*P,t[3]=(h*w-f*M-d*b)*P,t[4]=(u*E-a*S-l*T)*P,t[5]=(n*S-i*E+o*T)*P,t[6]=(g*_-p*M-y*x)*P,t[7]=(c*M-h*_+d*x)*P,t[8]=(a*k-s*E+l*A)*P,t[9]=(r*E-n*k-o*A)*P,t[10]=(p*w-m*_+y*v)*P,t[11]=(f*_-c*w-d*v)*P,t[12]=(s*T-a*C-u*A)*P,t[13]=(n*C-r*T+i*A)*P,t[14]=(m*x-p*b-g*v)*P,t[15]=(c*b-f*x+h*v)*P,t}},8541:function(t,e,n){var r=n(257);t.exports=function(t,e,n,i){var o,a,s,u,l,c,f,h,d,p,m=e[0],g=e[1],y=e[2],v=i[0],x=i[1],_=i[2],b=n[0],w=n[1],M=n[2];if(Math.abs(m-b)<1e-6&&Math.abs(g-w)<1e-6&&Math.abs(y-M)<1e-6)return r(t);f=m-b,h=g-w,d=y-M,p=1/Math.sqrt(f*f+h*h+d*d),o=x*(d*=p)-_*(h*=p),a=_*(f*=p)-v*d,s=v*h-x*f,(p=Math.sqrt(o*o+a*a+s*s))?(o*=p=1/p,a*=p,s*=p):(o=0,a=0,s=0);u=h*s-d*a,l=d*o-f*s,c=f*a-h*o,(p=Math.sqrt(u*u+l*l+c*c))?(u*=p=1/p,l*=p,c*=p):(u=0,l=0,c=0);return t[0]=o,t[1]=u,t[2]=f,t[3]=0,t[4]=a,t[5]=l,t[6]=h,t[7]=0,t[8]=s,t[9]=c,t[10]=d,t[11]=0,t[12]=-(o*m+a*g+s*y),t[13]=-(u*m+l*g+c*y),t[14]=-(f*m+h*g+d*y),t[15]=1,t}},9899:function(t){t.exports=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],h=e[9],d=e[10],p=e[11],m=e[12],g=e[13],y=e[14],v=e[15],x=n[0],_=n[1],b=n[2],w=n[3];return t[0]=x*r+_*s+b*f+w*m,t[1]=x*i+_*u+b*h+w*g,t[2]=x*o+_*l+b*d+w*y,t[3]=x*a+_*c+b*p+w*v,x=n[4],_=n[5],b=n[6],w=n[7],t[4]=x*r+_*s+b*f+w*m,t[5]=x*i+_*u+b*h+w*g,t[6]=x*o+_*l+b*d+w*y,t[7]=x*a+_*c+b*p+w*v,x=n[8],_=n[9],b=n[10],w=n[11],t[8]=x*r+_*s+b*f+w*m,t[9]=x*i+_*u+b*h+w*g,t[10]=x*o+_*l+b*d+w*y,t[11]=x*a+_*c+b*p+w*v,x=n[12],_=n[13],b=n[14],w=n[15],t[12]=x*r+_*s+b*f+w*m,t[13]=x*i+_*u+b*h+w*g,t[14]=x*o+_*l+b*d+w*y,t[15]=x*a+_*c+b*p+w*v,t}},2337:function(t){t.exports=function(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),l=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(a+o)*l,t[15]=1,t}},2649:function(t){t.exports=function(t,e,n,r,i){var o=1/Math.tan(e/2),a=1/(r-i);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+r)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*r*a,t[15]=0,t}},7733:function(t){t.exports=function(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(a+s),l=2/(i+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-(a-s)*u*.5,t[9]=(i-o)*l*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}},648:function(t){t.exports=function(t,e,n,r){var i,o,a,s,u,l,c,f,h,d,p,m,g,y,v,x,_,b,w,M,A,T,E,C,k=r[0],S=r[1],P=r[2],O=Math.sqrt(k*k+S*S+P*P);if(Math.abs(O)<1e-6)return null;k*=O=1/O,S*=O,P*=O,i=Math.sin(n),o=Math.cos(n),a=1-o,s=e[0],u=e[1],l=e[2],c=e[3],f=e[4],h=e[5],d=e[6],p=e[7],m=e[8],g=e[9],y=e[10],v=e[11],x=k*k*a+o,_=S*k*a+P*i,b=P*k*a-S*i,w=k*S*a-P*i,M=S*S*a+o,A=P*S*a+k*i,T=k*P*a+S*i,E=S*P*a-k*i,C=P*P*a+o,t[0]=s*x+f*_+m*b,t[1]=u*x+h*_+g*b,t[2]=l*x+d*_+y*b,t[3]=c*x+p*_+v*b,t[4]=s*w+f*M+m*A,t[5]=u*w+h*M+g*A,t[6]=l*w+d*M+y*A,t[7]=c*w+p*M+v*A,t[8]=s*T+f*E+m*C,t[9]=u*T+h*E+g*C,t[10]=l*T+d*E+y*C,t[11]=c*T+p*E+v*C,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t}},5618:function(t){t.exports=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],l=e[8],c=e[9],f=e[10],h=e[11];e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[4]=o*i+l*r,t[5]=a*i+c*r,t[6]=s*i+f*r,t[7]=u*i+h*r,t[8]=l*i-o*r,t[9]=c*i-a*r,t[10]=f*i-s*r,t[11]=h*i-u*r,t}},5345:function(t){t.exports=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],l=e[8],c=e[9],f=e[10],h=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=o*i-l*r,t[1]=a*i-c*r,t[2]=s*i-f*r,t[3]=u*i-h*r,t[8]=o*r+l*i,t[9]=a*r+c*i,t[10]=s*r+f*i,t[11]=u*r+h*i,t}},5208:function(t){t.exports=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],l=e[4],c=e[5],f=e[6],h=e[7];e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=o*i+l*r,t[1]=a*i+c*r,t[2]=s*i+f*r,t[3]=u*i+h*r,t[4]=l*i-o*r,t[5]=c*i-a*r,t[6]=f*i-s*r,t[7]=h*i-u*r,t}},177:function(t){t.exports=function(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},6600:function(t){t.exports=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}},573:function(t){t.exports=function(t,e,n){var r,i,o,a,s,u,l,c,f,h,d,p,m=n[0],g=n[1],y=n[2];e===t?(t[12]=e[0]*m+e[4]*g+e[8]*y+e[12],t[13]=e[1]*m+e[5]*g+e[9]*y+e[13],t[14]=e[2]*m+e[6]*g+e[10]*y+e[14],t[15]=e[3]*m+e[7]*g+e[11]*y+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],h=e[9],d=e[10],p=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=l,t[7]=c,t[8]=f,t[9]=h,t[10]=d,t[11]=p,t[12]=r*m+s*g+f*y+e[12],t[13]=i*m+u*g+h*y+e[13],t[14]=o*m+l*g+d*y+e[14],t[15]=a*m+c*g+p*y+e[15]);return t}},2664:function(t){t.exports=function(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}},3197:function(t){t.exports=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}},577:function(t,e,n){t.exports=function(t,e){var n=r(t[0],t[1],t[2]),a=r(e[0],e[1],e[2]);i(n,n),i(a,a);var s=o(n,a);return s>1?0:Math.acos(s)};var r=n(9666),i=n(1205),o=n(6517)},9913:function(t){t.exports=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}},7091:function(t){t.exports=function(t){var e=new Float32Array(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}},3497:function(t){t.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}},1220:function(t){t.exports=function(){var t=new Float32Array(3);return t[0]=0,t[1]=0,t[2]=0,t}},6902:function(t){t.exports=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2];return t[0]=i*u-o*s,t[1]=o*a-r*u,t[2]=r*s-i*a,t}},5140:function(t,e,n){t.exports=n(5055)},5055:function(t){t.exports=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(n*n+r*r+i*i)}},6669:function(t,e,n){t.exports=n(9737)},9737:function(t){t.exports=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}},6517:function(t){t.exports=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}},6532:function(t){t.exports=1e-6},1077:function(t,e,n){t.exports=function(t,e){var n=t[0],i=t[1],o=t[2],a=e[0],s=e[1],u=e[2];return Math.abs(n-a)<=r*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-s)<=r*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(o-u)<=r*Math.max(1,Math.abs(o),Math.abs(u))};var r=n(6532)},5696:function(t){t.exports=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}},4280:function(t){t.exports=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}},9436:function(t,e,n){t.exports=function(t,e,n,i,o,a){var s,u;e||(e=3);n||(n=0);u=i?Math.min(i*e+n,t.length):t.length;for(s=n;s<u;s+=e)r[0]=t[s],r[1]=t[s+1],r[2]=t[s+2],o(r,r,a),t[s]=r[0],t[s+1]=r[1],t[s+2]=r[2];return t};var r=n(1220)()},9666:function(t){t.exports=function(t,e,n){var r=new Float32Array(3);return r[0]=t,r[1]=e,r[2]=n,r}},1982:function(t,e,n){t.exports={EPSILON:n(6532),create:n(1220),clone:n(7091),angle:n(577),fromValues:n(9666),copy:n(3497),set:n(3926),equals:n(1077),exactEquals:n(5696),add:n(3197),subtract:n(1040),sub:n(8560),multiply:n(8044),mul:n(8516),divide:n(9737),div:n(6669),min:n(4370),max:n(7484),floor:n(4280),ceil:n(9913),round:n(4622),scale:n(9404),scaleAndAdd:n(8544),distance:n(5055),dist:n(5140),squaredDistance:n(2340),sqrDist:n(3108),length:n(9852),len:n(4001),squaredLength:n(2775),sqrLen:n(9249),negate:n(2926),inverse:n(3346),normalize:n(1205),dot:n(6517),cross:n(6902),lerp:n(1817),random:n(9463),transformMat4:n(9564),transformMat3:n(553),transformQuat:n(4997),rotateX:n(6899),rotateY:n(8028),rotateZ:n(5493),forEach:n(9436)}},3346:function(t){t.exports=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}},4001:function(t,e,n){t.exports=n(9852)},9852:function(t){t.exports=function(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}},1817:function(t){t.exports=function(t,e,n,r){var i=e[0],o=e[1],a=e[2];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t}},7484:function(t){t.exports=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}},4370:function(t){t.exports=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}},8516:function(t,e,n){t.exports=n(8044)},8044:function(t){t.exports=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}},2926:function(t){t.exports=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}},1205:function(t){t.exports=function(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o);return t}},9463:function(t){t.exports=function(t,e){e=e||1;var n=2*Math.random()*Math.PI,r=2*Math.random()-1,i=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*i,t[1]=Math.sin(n)*i,t[2]=r*e,t}},6899:function(t){t.exports=function(t,e,n,r){var i=n[1],o=n[2],a=e[1]-i,s=e[2]-o,u=Math.sin(r),l=Math.cos(r);return t[0]=e[0],t[1]=i+a*l-s*u,t[2]=o+a*u+s*l,t}},8028:function(t){t.exports=function(t,e,n,r){var i=n[0],o=n[2],a=e[0]-i,s=e[2]-o,u=Math.sin(r),l=Math.cos(r);return t[0]=i+s*u+a*l,t[1]=e[1],t[2]=o+s*l-a*u,t}},5493:function(t){t.exports=function(t,e,n,r){var i=n[0],o=n[1],a=e[0]-i,s=e[1]-o,u=Math.sin(r),l=Math.cos(r);return t[0]=i+a*l-s*u,t[1]=o+a*u+s*l,t[2]=e[2],t}},4622:function(t){t.exports=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}},9404:function(t){t.exports=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}},8544:function(t){t.exports=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}},3926:function(t){t.exports=function(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}},3108:function(t,e,n){t.exports=n(2340)},9249:function(t,e,n){t.exports=n(2775)},2340:function(t){t.exports=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}},2775:function(t){t.exports=function(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}},8560:function(t,e,n){t.exports=n(1040)},1040:function(t){t.exports=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}},553:function(t){t.exports=function(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t}},9564:function(t){t.exports=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t}},4997:function(t){t.exports=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2],l=n[3],c=l*r+s*o-u*i,f=l*i+u*r-a*o,h=l*o+a*i-s*r,d=-a*r-s*i-u*o;return t[0]=c*l+d*-a+f*-u-h*-s,t[1]=f*l+d*-s+h*-a-c*-u,t[2]=h*l+d*-u+c*-s-f*-a,t}},2108:function(t){t.exports=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}},7682:function(t){t.exports=function(t){var e=new Float32Array(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}},9298:function(t){t.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}},3071:function(t){t.exports=function(){var t=new Float32Array(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}},5476:function(t){t.exports=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(n*n+r*r+i*i+o*o)}},1350:function(t){t.exports=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}},216:function(t){t.exports=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}},8741:function(t){t.exports=function(t,e,n,r){var i=new Float32Array(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}},4663:function(t,e,n){t.exports={create:n(3071),clone:n(7682),fromValues:n(8741),copy:n(9298),set:n(6675),add:n(2108),subtract:n(6919),multiply:n(9363),divide:n(1350),min:n(9271),max:n(2045),scale:n(7705),scaleAndAdd:n(2869),distance:n(5476),squaredDistance:n(6733),length:n(7159),squaredLength:n(2678),negate:n(6977),inverse:n(3095),normalize:n(8308),dot:n(216),lerp:n(2710),random:n(9960),transformMat4:n(8773),transformQuat:n(2508)}},3095:function(t){t.exports=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}},7159:function(t){t.exports=function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.sqrt(e*e+n*n+r*r+i*i)}},2710:function(t){t.exports=function(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t[3]=s+r*(n[3]-s),t}},2045:function(t){t.exports=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t}},9271:function(t){t.exports=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t}},9363:function(t){t.exports=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}},6977:function(t){t.exports=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}},8308:function(t){t.exports=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o;a>0&&(a=1/Math.sqrt(a),t[0]=n*a,t[1]=r*a,t[2]=i*a,t[3]=o*a);return t}},9960:function(t,e,n){var r=n(8308),i=n(7705);t.exports=function(t,e){return e=e||1,t[0]=Math.random(),t[1]=Math.random(),t[2]=Math.random(),t[3]=Math.random(),r(t,t),i(t,t,e),t}},7705:function(t){t.exports=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}},2869:function(t){t.exports=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}},6675:function(t){t.exports=function(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}},6733:function(t){t.exports=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return n*n+r*r+i*i+o*o}},2678:function(t){t.exports=function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}},6919:function(t){t.exports=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}},8773:function(t){t.exports=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}},2508:function(t){t.exports=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2],l=n[3],c=l*r+s*o-u*i,f=l*i+u*r-a*o,h=l*o+a*i-s*r,d=-a*r-s*i-u*o;return t[0]=c*l+d*-a+f*-u-h*-s,t[1]=f*l+d*-s+h*-a-c*-u,t[2]=h*l+d*-u+c*-s-f*-a,t[3]=e[3],t}},5616:function(t,e){var n;
/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */!function(e,n){"use strict";"object"==typeof t.exports?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:this,(function(r,i){"use strict";var o=[],a=Object.getPrototypeOf,s=o.slice,u=o.flat?function(t){return o.flat.call(t)}:function(t){return o.concat.apply([],t)},l=o.push,c=o.indexOf,f={},h=f.toString,d=f.hasOwnProperty,p=d.toString,m=p.call(Object),g={},y=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item},v=function(t){return null!=t&&t===t.window},x=r.document,_={type:!0,src:!0,nonce:!0,noModule:!0};function b(t,e,n){var r,i,o=(n=n||x).createElement("script");if(o.text=t,e)for(r in _)(i=e[r]||e.getAttribute&&e.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?f[h.call(t)]||"object":typeof t}var M="3.7.1",A=/HTML$/i,T=function(t,e){return new T.fn.init(t,e)};function E(t){var e=!!t&&"length"in t&&t.length,n=w(t);return!y(t)&&!v(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}function C(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}T.fn=T.prototype={jquery:M,constructor:T,length:0,toArray:function(){return s.call(this)},get:function(t){return null==t?s.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=T.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return T.each(this,t)},map:function(t){return this.pushStack(T.map(this,(function(e,n){return t.call(e,n,e)})))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(T.grep(this,(function(t,e){return(e+1)%2})))},odd:function(){return this.pushStack(T.grep(this,(function(t,e){return e%2})))},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:o.sort,splice:o.splice},T.extend=T.fn.extend=function(){var t,e,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||y(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(t=arguments[s]))for(e in t)r=t[e],"__proto__"!==e&&a!==r&&(l&&r&&(T.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[e],o=i&&!Array.isArray(n)?[]:i||T.isPlainObject(n)?n:{},i=!1,a[e]=T.extend(l,o,r)):void 0!==r&&(a[e]=r));return a},T.extend({expando:"jQuery"+(M+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==h.call(t))&&(!(e=a(t))||"function"==typeof(n=d.call(e,"constructor")&&e.constructor)&&p.call(n)===m)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,n){b(t,{nonce:e&&e.nonce},n)},each:function(t,e){var n,r=0;if(E(t))for(n=t.length;r<n&&!1!==e.call(t[r],r,t[r]);r++);else for(r in t)if(!1===e.call(t[r],r,t[r]))break;return t},text:function(t){var e,n="",r=0,i=t.nodeType;if(!i)for(;e=t[r++];)n+=T.text(e);return 1===i||11===i?t.textContent:9===i?t.documentElement.textContent:3===i||4===i?t.nodeValue:n},makeArray:function(t,e){var n=e||[];return null!=t&&(E(Object(t))?T.merge(n,"string"==typeof t?[t]:t):l.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:c.call(e,t,n)},isXMLDoc:function(t){var e=t&&t.namespaceURI,n=t&&(t.ownerDocument||t).documentElement;return!A.test(e||n&&n.nodeName||"HTML")},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;r<n;r++)t[i++]=e[r];return t.length=i,t},grep:function(t,e,n){for(var r=[],i=0,o=t.length,a=!n;i<o;i++)!e(t[i],i)!==a&&r.push(t[i]);return r},map:function(t,e,n){var r,i,o=0,a=[];if(E(t))for(r=t.length;o<r;o++)null!=(i=e(t[o],o,n))&&a.push(i);else for(o in t)null!=(i=e(t[o],o,n))&&a.push(i);return u(a)},guid:1,support:g}),"function"==typeof Symbol&&(T.fn[Symbol.iterator]=o[Symbol.iterator]),T.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){f["[object "+e+"]"]=e.toLowerCase()}));var k=o.pop,S=o.sort,P=o.splice,O="[\\x20\\t\\r\\n\\f]",R=new RegExp("^"+O+"+|((?:^|[^\\\\])(?:\\\\.)*)"+O+"+$","g");T.contains=function(t,e){var n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(t.contains?t.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))};var L=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function I(t,e){return e?"\0"===t?"":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t}T.escapeSelector=function(t){return(t+"").replace(L,I)};var D=x,N=l;!function(){var t,e,n,i,a,u,l,f,h,p,m=N,y=T.expando,v=0,x=0,_=tt(),b=tt(),w=tt(),M=tt(),A=function(t,e){return t===e&&(a=!0),0},E="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="(?:\\\\[\\da-fA-F]{1,6}"+O+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",I="\\["+O+"*("+L+")(?:"+O+"*([*^$|!~]?=)"+O+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+L+"))|)"+O+"*\\]",F=":("+L+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+I+")*)|.*)\\)|)",z=new RegExp(O+"+","g"),B=new RegExp("^"+O+"*,"+O+"*"),j=new RegExp("^"+O+"*([>+~]|"+O+")"+O+"*"),V=new RegExp(O+"|>"),q=new RegExp(F),G=new RegExp("^"+L+"$"),U={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L+"|[*])"),ATTR:new RegExp("^"+I),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+O+"*(even|odd|(([+-]|)(\\d*)n|)"+O+"*(?:([+-]|)"+O+"*(\\d+)|))"+O+"*\\)|)","i"),bool:new RegExp("^(?:"+E+")$","i"),needsContext:new RegExp("^"+O+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+O+"*((?:-\\d)?\\d*)"+O+"*\\)|)(?=[^-]|$)","i")},H=/^(?:input|select|textarea|button)$/i,W=/^h\d$/i,X=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,K=/[+~]/,Q=new RegExp("\\\\[\\da-fA-F]{1,6}"+O+"?|\\\\([^\\r\\n\\f])","g"),Y=function(t,e){var n="0x"+t.slice(1)-65536;return e||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},$=function(){ut()},Z=ht((function(t){return!0===t.disabled&&C(t,"fieldset")}),{dir:"parentNode",next:"legend"});try{m.apply(o=s.call(D.childNodes),D.childNodes),o[D.childNodes.length].nodeType}catch(t){m={apply:function(t,e){N.apply(t,s.call(e))},call:function(t){N.apply(t,s.call(arguments,1))}}}function J(t,e,n,r){var i,o,a,s,l,c,d,p=e&&e.ownerDocument,v=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==v&&9!==v&&11!==v)return n;if(!r&&(ut(e),e=e||u,f)){if(11!==v&&(l=X.exec(t)))if(i=l[1]){if(9===v){if(!(a=e.getElementById(i)))return n;if(a.id===i)return m.call(n,a),n}else if(p&&(a=p.getElementById(i))&&J.contains(e,a)&&a.id===i)return m.call(n,a),n}else{if(l[2])return m.apply(n,e.getElementsByTagName(t)),n;if((i=l[3])&&e.getElementsByClassName)return m.apply(n,e.getElementsByClassName(i)),n}if(!(M[t+" "]||h&&h.test(t))){if(d=t,p=e,1===v&&(V.test(t)||j.test(t))){for((p=K.test(t)&&st(e.parentNode)||e)==e&&g.scope||((s=e.getAttribute("id"))?s=T.escapeSelector(s):e.setAttribute("id",s=y)),o=(c=ct(t)).length;o--;)c[o]=(s?"#"+s:":scope")+" "+ft(c[o]);d=c.join(",")}try{return m.apply(n,p.querySelectorAll(d)),n}catch(e){M(t,!0)}finally{s===y&&e.removeAttribute("id")}}}return vt(t.replace(R,"$1"),e,n,r)}function tt(){var t=[];return function n(r,i){return t.push(r+" ")>e.cacheLength&&delete n[t.shift()],n[r+" "]=i}}function et(t){return t[y]=!0,t}function nt(t){var e=u.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function rt(t){return function(e){return C(e,"input")&&e.type===t}}function it(t){return function(e){return(C(e,"input")||C(e,"button"))&&e.type===t}}function ot(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&Z(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function at(t){return et((function(e){return e=+e,et((function(n,r){for(var i,o=t([],n.length,e),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))}))}))}function st(t){return t&&void 0!==t.getElementsByTagName&&t}function ut(t){var n,r=t?t.ownerDocument||t:D;return r!=u&&9===r.nodeType&&r.documentElement?(l=(u=r).documentElement,f=!T.isXMLDoc(u),p=l.matches||l.webkitMatchesSelector||l.msMatchesSelector,l.msMatchesSelector&&D!=u&&(n=u.defaultView)&&n.top!==n&&n.addEventListener("unload",$),g.getById=nt((function(t){return l.appendChild(t).id=T.expando,!u.getElementsByName||!u.getElementsByName(T.expando).length})),g.disconnectedMatch=nt((function(t){return p.call(t,"*")})),g.scope=nt((function(){return u.querySelectorAll(":scope")})),g.cssHas=nt((function(){try{return u.querySelector(":has(*,:jqfake)"),!1}catch(t){return!0}})),g.getById?(e.filter.ID=function(t){var e=t.replace(Q,Y);return function(t){return t.getAttribute("id")===e}},e.find.ID=function(t,e){if(void 0!==e.getElementById&&f){var n=e.getElementById(t);return n?[n]:[]}}):(e.filter.ID=function(t){var e=t.replace(Q,Y);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},e.find.ID=function(t,e){if(void 0!==e.getElementById&&f){var n,r,i,o=e.getElementById(t);if(o){if((n=o.getAttributeNode("id"))&&n.value===t)return[o];for(i=e.getElementsByName(t),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===t)return[o]}return[]}}),e.find.TAG=function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):e.querySelectorAll(t)},e.find.CLASS=function(t,e){if(void 0!==e.getElementsByClassName&&f)return e.getElementsByClassName(t)},h=[],nt((function(t){var e;l.appendChild(t).innerHTML="<a id='"+y+"' href='' disabled='disabled'></a><select id='"+y+"-\r\\' disabled='disabled'><option selected=''></option></select>",t.querySelectorAll("[selected]").length||h.push("\\["+O+"*(?:value|"+E+")"),t.querySelectorAll("[id~="+y+"-]").length||h.push("~="),t.querySelectorAll("a#"+y+"+*").length||h.push(".#.+[+~]"),t.querySelectorAll(":checked").length||h.push(":checked"),(e=u.createElement("input")).setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),l.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&h.push(":enabled",":disabled"),(e=u.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||h.push("\\["+O+"*name"+O+"*="+O+"*(?:''|\"\")")})),g.cssHas||h.push(":has"),h=h.length&&new RegExp(h.join("|")),A=function(t,e){if(t===e)return a=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!g.sortDetached&&e.compareDocumentPosition(t)===n?t===u||t.ownerDocument==D&&J.contains(D,t)?-1:e===u||e.ownerDocument==D&&J.contains(D,e)?1:i?c.call(i,t)-c.call(i,e):0:4&n?-1:1)},u):u}for(t in J.matches=function(t,e){return J(t,null,null,e)},J.matchesSelector=function(t,e){if(ut(t),f&&!M[e+" "]&&(!h||!h.test(e)))try{var n=p.call(t,e);if(n||g.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){M(e,!0)}return J(e,u,null,[t]).length>0},J.contains=function(t,e){return(t.ownerDocument||t)!=u&&ut(t),T.contains(t,e)},J.attr=function(t,n){(t.ownerDocument||t)!=u&&ut(t);var r=e.attrHandle[n.toLowerCase()],i=r&&d.call(e.attrHandle,n.toLowerCase())?r(t,n,!f):void 0;return void 0!==i?i:t.getAttribute(n)},J.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},T.uniqueSort=function(t){var e,n=[],r=0,o=0;if(a=!g.sortStable,i=!g.sortStable&&s.call(t,0),S.call(t,A),a){for(;e=t[o++];)e===t[o]&&(r=n.push(o));for(;r--;)P.call(t,n[r],1)}return i=null,t},T.fn.uniqueSort=function(){return this.pushStack(T.uniqueSort(s.apply(this)))},e=T.expr={cacheLength:50,createPseudo:et,match:U,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(Q,Y),t[3]=(t[3]||t[4]||t[5]||"").replace(Q,Y),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||J.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&J.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return U.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&q.test(n)&&(e=ct(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(Q,Y).toLowerCase();return"*"===t?function(){return!0}:function(t){return C(t,e)}},CLASS:function(t){var e=_[t+" "];return e||(e=new RegExp("(^|"+O+")"+t+"("+O+"|$)"))&&_(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,n){return function(r){var i=J.attr(r,t);return null==i?"!="===e:!e||(i+="","="===e?i===n:"!="===e?i!==n:"^="===e?n&&0===i.indexOf(n):"*="===e?n&&i.indexOf(n)>-1:"$="===e?n&&i.slice(-n.length)===n:"~="===e?(" "+i.replace(z," ")+" ").indexOf(n)>-1:"|="===e&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,r,i){var o="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===r&&0===i?function(t){return!!t.parentNode}:function(e,n,u){var l,c,f,h,d,p=o!==a?"nextSibling":"previousSibling",m=e.parentNode,g=s&&e.nodeName.toLowerCase(),x=!u&&!s,_=!1;if(m){if(o){for(;p;){for(f=e;f=f[p];)if(s?C(f,g):1===f.nodeType)return!1;d=p="only"===t&&!d&&"nextSibling"}return!0}if(d=[a?m.firstChild:m.lastChild],a&&x){for(_=(h=(l=(c=m[y]||(m[y]={}))[t]||[])[0]===v&&l[1])&&l[2],f=h&&m.childNodes[h];f=++h&&f&&f[p]||(_=h=0)||d.pop();)if(1===f.nodeType&&++_&&f===e){c[t]=[v,h,_];break}}else if(x&&(_=h=(l=(c=e[y]||(e[y]={}))[t]||[])[0]===v&&l[1]),!1===_)for(;(f=++h&&f&&f[p]||(_=h=0)||d.pop())&&(!(s?C(f,g):1===f.nodeType)||!++_||(x&&((c=f[y]||(f[y]={}))[t]=[v,_]),f!==e)););return(_-=i)===r||_%r==0&&_/r>=0}}},PSEUDO:function(t,n){var r,i=e.pseudos[t]||e.setFilters[t.toLowerCase()]||J.error("unsupported pseudo: "+t);return i[y]?i(n):i.length>1?(r=[t,t,"",n],e.setFilters.hasOwnProperty(t.toLowerCase())?et((function(t,e){for(var r,o=i(t,n),a=o.length;a--;)t[r=c.call(t,o[a])]=!(e[r]=o[a])})):function(t){return i(t,0,r)}):i}},pseudos:{not:et((function(t){var e=[],n=[],r=yt(t.replace(R,"$1"));return r[y]?et((function(t,e,n,i){for(var o,a=r(t,null,i,[]),s=t.length;s--;)(o=a[s])&&(t[s]=!(e[s]=o))})):function(t,i,o){return e[0]=t,r(e,null,o,n),e[0]=null,!n.pop()}})),has:et((function(t){return function(e){return J(t,e).length>0}})),contains:et((function(t){return t=t.replace(Q,Y),function(e){return(e.textContent||T.text(e)).indexOf(t)>-1}})),lang:et((function(t){return G.test(t||"")||J.error("unsupported lang: "+t),t=t.replace(Q,Y).toLowerCase(),function(e){var n;do{if(n=f?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(t){var e=r.location&&r.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===l},focus:function(t){return t===function(){try{return u.activeElement}catch(t){}}()&&u.hasFocus()&&!!(t.type||t.href||~t.tabIndex)},enabled:ot(!1),disabled:ot(!0),checked:function(t){return C(t,"input")&&!!t.checked||C(t,"option")&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!e.pseudos.empty(t)},header:function(t){return W.test(t.nodeName)},input:function(t){return H.test(t.nodeName)},button:function(t){return C(t,"input")&&"button"===t.type||C(t,"button")},text:function(t){var e;return C(t,"input")&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:at((function(){return[0]})),last:at((function(t,e){return[e-1]})),eq:at((function(t,e,n){return[n<0?n+e:n]})),even:at((function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t})),odd:at((function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t})),lt:at((function(t,e,n){var r;for(r=n<0?n+e:n>e?e:n;--r>=0;)t.push(r);return t})),gt:at((function(t,e,n){for(var r=n<0?n+e:n;++r<e;)t.push(r);return t}))}},e.pseudos.nth=e.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})e.pseudos[t]=rt(t);for(t in{submit:!0,reset:!0})e.pseudos[t]=it(t);function lt(){}function ct(t,n){var r,i,o,a,s,u,l,c=b[t+" "];if(c)return n?0:c.slice(0);for(s=t,u=[],l=e.preFilter;s;){for(a in r&&!(i=B.exec(s))||(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),r=!1,(i=j.exec(s))&&(r=i.shift(),o.push({value:r,type:i[0].replace(R," ")}),s=s.slice(r.length)),e.filter)!(i=U[a].exec(s))||l[a]&&!(i=l[a](i))||(r=i.shift(),o.push({value:r,type:a,matches:i}),s=s.slice(r.length));if(!r)break}return n?s.length:s?J.error(t):b(t,u).slice(0)}function ft(t){for(var e=0,n=t.length,r="";e<n;e++)r+=t[e].value;return r}function ht(t,e,n){var r=e.dir,i=e.next,o=i||r,a=n&&"parentNode"===o,s=x++;return e.first?function(e,n,i){for(;e=e[r];)if(1===e.nodeType||a)return t(e,n,i);return!1}:function(e,n,u){var l,c,f=[v,s];if(u){for(;e=e[r];)if((1===e.nodeType||a)&&t(e,n,u))return!0}else for(;e=e[r];)if(1===e.nodeType||a)if(c=e[y]||(e[y]={}),i&&C(e,i))e=e[r]||e;else{if((l=c[o])&&l[0]===v&&l[1]===s)return f[2]=l[2];if(c[o]=f,f[2]=t(e,n,u))return!0}return!1}}function dt(t){return t.length>1?function(e,n,r){for(var i=t.length;i--;)if(!t[i](e,n,r))return!1;return!0}:t[0]}function pt(t,e,n,r,i){for(var o,a=[],s=0,u=t.length,l=null!=e;s<u;s++)(o=t[s])&&(n&&!n(o,r,i)||(a.push(o),l&&e.push(s)));return a}function mt(t,e,n,r,i,o){return r&&!r[y]&&(r=mt(r)),i&&!i[y]&&(i=mt(i,o)),et((function(o,a,s,u){var l,f,h,d,p=[],g=[],y=a.length,v=o||function(t,e,n){for(var r=0,i=e.length;r<i;r++)J(t,e[r],n);return n}(e||"*",s.nodeType?[s]:s,[]),x=!t||!o&&e?v:pt(v,p,t,s,u);if(n?n(x,d=i||(o?t:y||r)?[]:a,s,u):d=x,r)for(l=pt(d,g),r(l,[],s,u),f=l.length;f--;)(h=l[f])&&(d[g[f]]=!(x[g[f]]=h));if(o){if(i||t){if(i){for(l=[],f=d.length;f--;)(h=d[f])&&l.push(x[f]=h);i(null,d=[],l,u)}for(f=d.length;f--;)(h=d[f])&&(l=i?c.call(o,h):p[f])>-1&&(o[l]=!(a[l]=h))}}else d=pt(d===a?d.splice(y,d.length):d),i?i(null,a,d,u):m.apply(a,d)}))}function gt(t){for(var r,i,o,a=t.length,s=e.relative[t[0].type],u=s||e.relative[" "],l=s?1:0,f=ht((function(t){return t===r}),u,!0),h=ht((function(t){return c.call(r,t)>-1}),u,!0),d=[function(t,e,i){var o=!s&&(i||e!=n)||((r=e).nodeType?f(t,e,i):h(t,e,i));return r=null,o}];l<a;l++)if(i=e.relative[t[l].type])d=[ht(dt(d),i)];else{if((i=e.filter[t[l].type].apply(null,t[l].matches))[y]){for(o=++l;o<a&&!e.relative[t[o].type];o++);return mt(l>1&&dt(d),l>1&&ft(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(R,"$1"),i,l<o&&gt(t.slice(l,o)),o<a&&gt(t=t.slice(o)),o<a&&ft(t))}d.push(i)}return dt(d)}function yt(t,r){var i,o=[],a=[],s=w[t+" "];if(!s){for(r||(r=ct(t)),i=r.length;i--;)(s=gt(r[i]))[y]?o.push(s):a.push(s);s=w(t,function(t,r){var i=r.length>0,o=t.length>0,a=function(a,s,l,c,h){var d,p,g,y=0,x="0",_=a&&[],b=[],w=n,M=a||o&&e.find.TAG("*",h),A=v+=null==w?1:Math.random()||.1,E=M.length;for(h&&(n=s==u||s||h);x!==E&&null!=(d=M[x]);x++){if(o&&d){for(p=0,s||d.ownerDocument==u||(ut(d),l=!f);g=t[p++];)if(g(d,s||u,l)){m.call(c,d);break}h&&(v=A)}i&&((d=!g&&d)&&y--,a&&_.push(d))}if(y+=x,i&&x!==y){for(p=0;g=r[p++];)g(_,b,s,l);if(a){if(y>0)for(;x--;)_[x]||b[x]||(b[x]=k.call(c));b=pt(b)}m.apply(c,b),h&&!a&&b.length>0&&y+r.length>1&&T.uniqueSort(c)}return h&&(v=A,n=w),_};return i?et(a):a}(a,o)),s.selector=t}return s}function vt(t,n,r,i){var o,a,s,u,l,c="function"==typeof t&&t,h=!i&&ct(t=c.selector||t);if(r=r||[],1===h.length){if((a=h[0]=h[0].slice(0)).length>2&&"ID"===(s=a[0]).type&&9===n.nodeType&&f&&e.relative[a[1].type]){if(!(n=(e.find.ID(s.matches[0].replace(Q,Y),n)||[])[0]))return r;c&&(n=n.parentNode),t=t.slice(a.shift().value.length)}for(o=U.needsContext.test(t)?0:a.length;o--&&(s=a[o],!e.relative[u=s.type]);)if((l=e.find[u])&&(i=l(s.matches[0].replace(Q,Y),K.test(a[0].type)&&st(n.parentNode)||n))){if(a.splice(o,1),!(t=i.length&&ft(a)))return m.apply(r,i),r;break}}return(c||yt(t,h))(i,n,!f,r,!n||K.test(t)&&st(n.parentNode)||n),r}lt.prototype=e.filters=e.pseudos,e.setFilters=new lt,g.sortStable=y.split("").sort(A).join("")===y,ut(),g.sortDetached=nt((function(t){return 1&t.compareDocumentPosition(u.createElement("fieldset"))})),T.find=J,T.expr[":"]=T.expr.pseudos,T.unique=T.uniqueSort,J.compile=yt,J.select=vt,J.setDocument=ut,J.tokenize=ct,J.escape=T.escapeSelector,J.getText=T.text,J.isXML=T.isXMLDoc,J.selectors=T.expr,J.support=T.support,J.uniqueSort=T.uniqueSort}();var F=function(t,e,n){for(var r=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&T(t).is(n))break;r.push(t)}return r},z=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},B=T.expr.match.needsContext,j=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function V(t,e,n){return y(e)?T.grep(t,(function(t,r){return!!e.call(t,r,t)!==n})):e.nodeType?T.grep(t,(function(t){return t===e!==n})):"string"!=typeof e?T.grep(t,(function(t){return c.call(e,t)>-1!==n})):T.filter(e,t,n)}T.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?T.find.matchesSelector(r,t)?[r]:[]:T.find.matches(t,T.grep(e,(function(t){return 1===t.nodeType})))},T.fn.extend({find:function(t){var e,n,r=this.length,i=this;if("string"!=typeof t)return this.pushStack(T(t).filter((function(){for(e=0;e<r;e++)if(T.contains(i[e],this))return!0})));for(n=this.pushStack([]),e=0;e<r;e++)T.find(t,i[e],n);return r>1?T.uniqueSort(n):n},filter:function(t){return this.pushStack(V(this,t||[],!1))},not:function(t){return this.pushStack(V(this,t||[],!0))},is:function(t){return!!V(this,"string"==typeof t&&B.test(t)?T(t):t||[],!1).length}});var q,G=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(T.fn.init=function(t,e,n){var r,i;if(!t)return this;if(n=n||q,"string"==typeof t){if(!(r="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:G.exec(t))||!r[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(r[1]){if(e=e instanceof T?e[0]:e,T.merge(this,T.parseHTML(r[1],e&&e.nodeType?e.ownerDocument||e:x,!0)),j.test(r[1])&&T.isPlainObject(e))for(r in e)y(this[r])?this[r](e[r]):this.attr(r,e[r]);return this}return(i=x.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):y(t)?void 0!==n.ready?n.ready(t):t(T):T.makeArray(t,this)}).prototype=T.fn,q=T(x);var U=/^(?:parents|prev(?:Until|All))/,H={children:!0,contents:!0,next:!0,prev:!0};function W(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}T.fn.extend({has:function(t){var e=T(t,this),n=e.length;return this.filter((function(){for(var t=0;t<n;t++)if(T.contains(this,e[t]))return!0}))},closest:function(t,e){var n,r=0,i=this.length,o=[],a="string"!=typeof t&&T(t);if(!B.test(t))for(;r<i;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&T.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?T.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?c.call(T(t),this[0]):c.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(T.uniqueSort(T.merge(this.get(),T(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),T.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return F(t,"parentNode")},parentsUntil:function(t,e,n){return F(t,"parentNode",n)},next:function(t){return W(t,"nextSibling")},prev:function(t){return W(t,"previousSibling")},nextAll:function(t){return F(t,"nextSibling")},prevAll:function(t){return F(t,"previousSibling")},nextUntil:function(t,e,n){return F(t,"nextSibling",n)},prevUntil:function(t,e,n){return F(t,"previousSibling",n)},siblings:function(t){return z((t.parentNode||{}).firstChild,t)},children:function(t){return z(t.firstChild)},contents:function(t){return null!=t.contentDocument&&a(t.contentDocument)?t.contentDocument:(C(t,"template")&&(t=t.content||t),T.merge([],t.childNodes))}},(function(t,e){T.fn[t]=function(n,r){var i=T.map(this,e,n);return"Until"!==t.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=T.filter(r,i)),this.length>1&&(H[t]||T.uniqueSort(i),U.test(t)&&i.reverse()),this.pushStack(i)}}));var X=/[^\x20\t\r\n\f]+/g;function K(t){return t}function Q(t){throw t}function Y(t,e,n,r){var i;try{t&&y(i=t.promise)?i.call(t).done(e).fail(n):t&&y(i=t.then)?i.call(t,e,n):e.apply(void 0,[t].slice(r))}catch(t){n.apply(void 0,[t])}}T.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return T.each(t.match(X)||[],(function(t,n){e[n]=!0})),e}(t):T.extend({},t);var e,n,r,i,o=[],a=[],s=-1,u=function(){for(i=i||t.once,r=e=!0;a.length;s=-1)for(n=a.shift();++s<o.length;)!1===o[s].apply(n[0],n[1])&&t.stopOnFalse&&(s=o.length,n=!1);t.memory||(n=!1),e=!1,i&&(o=n?[]:"")},l={add:function(){return o&&(n&&!e&&(s=o.length-1,a.push(n)),function e(n){T.each(n,(function(n,r){y(r)?t.unique&&l.has(r)||o.push(r):r&&r.length&&"string"!==w(r)&&e(r)}))}(arguments),n&&!e&&u()),this},remove:function(){return T.each(arguments,(function(t,e){for(var n;(n=T.inArray(e,o,n))>-1;)o.splice(n,1),n<=s&&s--})),this},has:function(t){return t?T.inArray(t,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=a=[],n||e||(o=n=""),this},locked:function(){return!!i},fireWith:function(t,n){return i||(n=[t,(n=n||[]).slice?n.slice():n],a.push(n),e||u()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!r}};return l},T.extend({Deferred:function(t){var e=[["notify","progress",T.Callbacks("memory"),T.Callbacks("memory"),2],["resolve","done",T.Callbacks("once memory"),T.Callbacks("once memory"),0,"resolved"],["reject","fail",T.Callbacks("once memory"),T.Callbacks("once memory"),1,"rejected"]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},catch:function(t){return i.then(null,t)},pipe:function(){var t=arguments;return T.Deferred((function(n){T.each(e,(function(e,r){var i=y(t[r[4]])&&t[r[4]];o[r[1]]((function(){var t=i&&i.apply(this,arguments);t&&y(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,i?[t]:arguments)}))})),t=null})).promise()},then:function(t,n,i){var o=0;function a(t,e,n,i){return function(){var s=this,u=arguments,l=function(){var r,l;if(!(t<o)){if((r=n.apply(s,u))===e.promise())throw new TypeError("Thenable self-resolution");l=r&&("object"==typeof r||"function"==typeof r)&&r.then,y(l)?i?l.call(r,a(o,e,K,i),a(o,e,Q,i)):(o++,l.call(r,a(o,e,K,i),a(o,e,Q,i),a(o,e,K,e.notifyWith))):(n!==K&&(s=void 0,u=[r]),(i||e.resolveWith)(s,u))}},c=i?l:function(){try{l()}catch(r){T.Deferred.exceptionHook&&T.Deferred.exceptionHook(r,c.error),t+1>=o&&(n!==Q&&(s=void 0,u=[r]),e.rejectWith(s,u))}};t?c():(T.Deferred.getErrorHook?c.error=T.Deferred.getErrorHook():T.Deferred.getStackHook&&(c.error=T.Deferred.getStackHook()),r.setTimeout(c))}}return T.Deferred((function(r){e[0][3].add(a(0,r,y(i)?i:K,r.notifyWith)),e[1][3].add(a(0,r,y(t)?t:K)),e[2][3].add(a(0,r,y(n)?n:Q))})).promise()},promise:function(t){return null!=t?T.extend(t,i):i}},o={};return T.each(e,(function(t,r){var a=r[2],s=r[5];i[r[1]]=a.add,s&&a.add((function(){n=s}),e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),a.add(r[3].fire),o[r[0]]=function(){return o[r[0]+"With"](this===o?void 0:this,arguments),this},o[r[0]+"With"]=a.fireWith})),i.promise(o),t&&t.call(o,o),o},when:function(t){var e=arguments.length,n=e,r=Array(n),i=s.call(arguments),o=T.Deferred(),a=function(t){return function(n){r[t]=this,i[t]=arguments.length>1?s.call(arguments):n,--e||o.resolveWith(r,i)}};if(e<=1&&(Y(t,o.done(a(n)).resolve,o.reject,!e),"pending"===o.state()||y(i[n]&&i[n].then)))return o.then();for(;n--;)Y(i[n],a(n),o.reject);return o.promise()}});var $=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;T.Deferred.exceptionHook=function(t,e){r.console&&r.console.warn&&t&&$.test(t.name)&&r.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},T.readyException=function(t){r.setTimeout((function(){throw t}))};var Z=T.Deferred();function J(){x.removeEventListener("DOMContentLoaded",J),r.removeEventListener("load",J),T.ready()}T.fn.ready=function(t){return Z.then(t).catch((function(t){T.readyException(t)})),this},T.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--T.readyWait:T.isReady)||(T.isReady=!0,!0!==t&&--T.readyWait>0||Z.resolveWith(x,[T]))}}),T.ready.then=Z.then,"complete"===x.readyState||"loading"!==x.readyState&&!x.documentElement.doScroll?r.setTimeout(T.ready):(x.addEventListener("DOMContentLoaded",J),r.addEventListener("load",J));var tt=function(t,e,n,r,i,o,a){var s=0,u=t.length,l=null==n;if("object"===w(n))for(s in i=!0,n)tt(t,e,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,y(r)||(a=!0),l&&(a?(e.call(t,r),e=null):(l=e,e=function(t,e,n){return l.call(T(t),n)})),e))for(;s<u;s++)e(t[s],n,a?r:r.call(t[s],s,e(t[s],n)));return i?t:l?e.call(t):u?e(t[0],n):o},et=/^-ms-/,nt=/-([a-z])/g;function rt(t,e){return e.toUpperCase()}function it(t){return t.replace(et,"ms-").replace(nt,rt)}var ot=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function at(){this.expando=T.expando+at.uid++}at.uid=1,at.prototype={cache:function(t){var e=t[this.expando];return e||(e={},ot(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var r,i=this.cache(t);if("string"==typeof e)i[it(e)]=n;else for(r in e)i[it(r)]=e[r];return i},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][it(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,r=t[this.expando];if(void 0!==r){if(void 0!==e){n=(e=Array.isArray(e)?e.map(it):(e=it(e))in r?[e]:e.match(X)||[]).length;for(;n--;)delete r[e[n]]}(void 0===e||T.isEmptyObject(r))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!T.isEmptyObject(e)}};var st=new at,ut=new at,lt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ct=/[A-Z]/g;function ft(t,e,n){var r;if(void 0===n&&1===t.nodeType)if(r="data-"+e.replace(ct,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(r))){try{n=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:lt.test(t)?JSON.parse(t):t)}(n)}catch(t){}ut.set(t,e,n)}else n=void 0;return n}T.extend({hasData:function(t){return ut.hasData(t)||st.hasData(t)},data:function(t,e,n){return ut.access(t,e,n)},removeData:function(t,e){ut.remove(t,e)},_data:function(t,e,n){return st.access(t,e,n)},_removeData:function(t,e){st.remove(t,e)}}),T.fn.extend({data:function(t,e){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(i=ut.get(o),1===o.nodeType&&!st.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=it(r.slice(5)),ft(o,r,i[r]));st.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof t?this.each((function(){ut.set(this,t)})):tt(this,(function(e){var n;if(o&&void 0===e)return void 0!==(n=ut.get(o,t))||void 0!==(n=ft(o,t))?n:void 0;this.each((function(){ut.set(this,t,e)}))}),null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){ut.remove(this,t)}))}}),T.extend({queue:function(t,e,n){var r;if(t)return e=(e||"fx")+"queue",r=st.get(t,e),n&&(!r||Array.isArray(n)?r=st.access(t,e,T.makeArray(n)):r.push(n)),r||[]},dequeue:function(t,e){e=e||"fx";var n=T.queue(t,e),r=n.length,i=n.shift(),o=T._queueHooks(t,e);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,(function(){T.dequeue(t,e)}),o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return st.get(t,n)||st.access(t,n,{empty:T.Callbacks("once memory").add((function(){st.remove(t,[e+"queue",n])}))})}}),T.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?T.queue(this[0],t):void 0===e?this:this.each((function(){var n=T.queue(this,t,e);T._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&T.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){T.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,r=1,i=T.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(n=st.get(o[a],t+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(e)}});var ht=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,dt=new RegExp("^(?:([+-])=|)("+ht+")([a-z%]*)$","i"),pt=["Top","Right","Bottom","Left"],mt=x.documentElement,gt=function(t){return T.contains(t.ownerDocument,t)},yt={composed:!0};mt.getRootNode&&(gt=function(t){return T.contains(t.ownerDocument,t)||t.getRootNode(yt)===t.ownerDocument});var vt=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&gt(t)&&"none"===T.css(t,"display")};function xt(t,e,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return T.css(t,e,"")},u=s(),l=n&&n[3]||(T.cssNumber[e]?"":"px"),c=t.nodeType&&(T.cssNumber[e]||"px"!==l&&+u)&&dt.exec(T.css(t,e));if(c&&c[3]!==l){for(u/=2,l=l||c[3],c=+u||1;a--;)T.style(t,e,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,T.style(t,e,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var _t={};function bt(t){var e,n=t.ownerDocument,r=t.nodeName,i=_t[r];return i||(e=n.body.appendChild(n.createElement(r)),i=T.css(e,"display"),e.parentNode.removeChild(e),"none"===i&&(i="block"),_t[r]=i,i)}function wt(t,e){for(var n,r,i=[],o=0,a=t.length;o<a;o++)(r=t[o]).style&&(n=r.style.display,e?("none"===n&&(i[o]=st.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&vt(r)&&(i[o]=bt(r))):"none"!==n&&(i[o]="none",st.set(r,"display",n)));for(o=0;o<a;o++)null!=i[o]&&(t[o].style.display=i[o]);return t}T.fn.extend({show:function(){return wt(this,!0)},hide:function(){return wt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){vt(this)?T(this).show():T(this).hide()}))}});var Mt,At,Tt=/^(?:checkbox|radio)$/i,Et=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ct=/^$|^module$|\/(?:java|ecma)script/i;Mt=x.createDocumentFragment().appendChild(x.createElement("div")),(At=x.createElement("input")).setAttribute("type","radio"),At.setAttribute("checked","checked"),At.setAttribute("name","t"),Mt.appendChild(At),g.checkClone=Mt.cloneNode(!0).cloneNode(!0).lastChild.checked,Mt.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!Mt.cloneNode(!0).lastChild.defaultValue,Mt.innerHTML="<option></option>",g.option=!!Mt.lastChild;var kt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function St(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&C(t,e)?T.merge([t],n):n}function Pt(t,e){for(var n=0,r=t.length;n<r;n++)st.set(t[n],"globalEval",!e||st.get(e[n],"globalEval"))}kt.tbody=kt.tfoot=kt.colgroup=kt.caption=kt.thead,kt.th=kt.td,g.option||(kt.optgroup=kt.option=[1,"<select multiple='multiple'>","</select>"]);var Ot=/<|&#?\w+;/;function Rt(t,e,n,r,i){for(var o,a,s,u,l,c,f=e.createDocumentFragment(),h=[],d=0,p=t.length;d<p;d++)if((o=t[d])||0===o)if("object"===w(o))T.merge(h,o.nodeType?[o]:o);else if(Ot.test(o)){for(a=a||f.appendChild(e.createElement("div")),s=(Et.exec(o)||["",""])[1].toLowerCase(),u=kt[s]||kt._default,a.innerHTML=u[1]+T.htmlPrefilter(o)+u[2],c=u[0];c--;)a=a.lastChild;T.merge(h,a.childNodes),(a=f.firstChild).textContent=""}else h.push(e.createTextNode(o));for(f.textContent="",d=0;o=h[d++];)if(r&&T.inArray(o,r)>-1)i&&i.push(o);else if(l=gt(o),a=St(f.appendChild(o),"script"),l&&Pt(a),n)for(c=0;o=a[c++];)Ct.test(o.type||"")&&n.push(o);return f}var Lt=/^([^.]*)(?:\.(.+)|)/;function It(){return!0}function Dt(){return!1}function Nt(t,e,n,r,i,o){var a,s;if("object"==typeof e){for(s in"string"!=typeof n&&(r=r||n,n=void 0),e)Nt(t,s,n,r,e[s],o);return t}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Dt;else if(!i)return t;return 1===o&&(a=i,i=function(t){return T().off(t),a.apply(this,arguments)},i.guid=a.guid||(a.guid=T.guid++)),t.each((function(){T.event.add(this,e,i,r,n)}))}function Ft(t,e,n){n?(st.set(t,e,!1),T.event.add(t,e,{namespace:!1,handler:function(t){var n,r=st.get(this,e);if(1&t.isTrigger&&this[e]){if(r)(T.event.special[e]||{}).delegateType&&t.stopPropagation();else if(r=s.call(arguments),st.set(this,e,r),this[e](),n=st.get(this,e),st.set(this,e,!1),r!==n)return t.stopImmediatePropagation(),t.preventDefault(),n}else r&&(st.set(this,e,T.event.trigger(r[0],r.slice(1),this)),t.stopPropagation(),t.isImmediatePropagationStopped=It)}})):void 0===st.get(t,e)&&T.event.add(t,e,It)}T.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,h,d,p,m,g=st.get(t);if(ot(t))for(n.handler&&(n=(o=n).handler,i=o.selector),i&&T.find.matchesSelector(mt,i),n.guid||(n.guid=T.guid++),(u=g.events)||(u=g.events=Object.create(null)),(a=g.handle)||(a=g.handle=function(e){return void 0!==T&&T.event.triggered!==e.type?T.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(X)||[""]).length;l--;)d=m=(s=Lt.exec(e[l])||[])[1],p=(s[2]||"").split(".").sort(),d&&(f=T.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=T.event.special[d]||{},c=T.extend({type:d,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&T.expr.match.needsContext.test(i),namespace:p.join(".")},o),(h=u[d])||((h=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,p,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?h.splice(h.delegateCount++,0,c):h.push(c),T.event.global[d]=!0)},remove:function(t,e,n,r,i){var o,a,s,u,l,c,f,h,d,p,m,g=st.hasData(t)&&st.get(t);if(g&&(u=g.events)){for(l=(e=(e||"").match(X)||[""]).length;l--;)if(d=m=(s=Lt.exec(e[l])||[])[1],p=(s[2]||"").split(".").sort(),d){for(f=T.event.special[d]||{},h=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=h.length;o--;)c=h[o],!i&&m!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(h.splice(o,1),c.selector&&h.delegateCount--,f.remove&&f.remove.call(t,c));a&&!h.length&&(f.teardown&&!1!==f.teardown.call(t,p,g.handle)||T.removeEvent(t,d,g.handle),delete u[d])}else for(d in u)T.event.remove(t,d+e[l],n,r,!0);T.isEmptyObject(u)&&st.remove(t,"handle events")}},dispatch:function(t){var e,n,r,i,o,a,s=new Array(arguments.length),u=T.event.fix(t),l=(st.get(this,"events")||Object.create(null))[u.type]||[],c=T.event.special[u.type]||{};for(s[0]=u,e=1;e<arguments.length;e++)s[e]=arguments[e];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){for(a=T.event.handlers.call(this,u,l),e=0;(i=a[e++])&&!u.isPropagationStopped();)for(u.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!u.isImmediatePropagationStopped();)u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((T.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(t,e){var n,r,i,o,a,s=[],u=e.delegateCount,l=t.target;if(u&&l.nodeType&&!("click"===t.type&&t.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==t.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=e[n]).selector+" "]&&(a[i]=r.needsContext?T(i,this).index(l)>-1:T.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<e.length&&s.push({elem:l,handlers:e.slice(u)}),s},addProp:function(t,e){Object.defineProperty(T.Event.prototype,t,{enumerable:!0,configurable:!0,get:y(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[T.expando]?t:new T.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return Tt.test(e.type)&&e.click&&C(e,"input")&&Ft(e,"click",!0),!1},trigger:function(t){var e=this||t;return Tt.test(e.type)&&e.click&&C(e,"input")&&Ft(e,"click"),!0},_default:function(t){var e=t.target;return Tt.test(e.type)&&e.click&&C(e,"input")&&st.get(e,"click")||C(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},T.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},T.Event=function(t,e){if(!(this instanceof T.Event))return new T.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?It:Dt,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&T.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[T.expando]=!0},T.Event.prototype={constructor:T.Event,isDefaultPrevented:Dt,isPropagationStopped:Dt,isImmediatePropagationStopped:Dt,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=It,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=It,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=It,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},T.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},T.event.addProp),T.each({focus:"focusin",blur:"focusout"},(function(t,e){function n(t){if(x.documentMode){var n=st.get(this,"handle"),r=T.event.fix(t);r.type="focusin"===t.type?"focus":"blur",r.isSimulated=!0,n(t),r.target===r.currentTarget&&n(r)}else T.event.simulate(e,t.target,T.event.fix(t))}T.event.special[t]={setup:function(){var r;if(Ft(this,t,!0),!x.documentMode)return!1;(r=st.get(this,e))||this.addEventListener(e,n),st.set(this,e,(r||0)+1)},trigger:function(){return Ft(this,t),!0},teardown:function(){var t;if(!x.documentMode)return!1;(t=st.get(this,e)-1)?st.set(this,e,t):(this.removeEventListener(e,n),st.remove(this,e))},_default:function(e){return st.get(e.target,t)},delegateType:e},T.event.special[e]={setup:function(){var r=this.ownerDocument||this.document||this,i=x.documentMode?this:r,o=st.get(i,e);o||(x.documentMode?this.addEventListener(e,n):r.addEventListener(t,n,!0)),st.set(i,e,(o||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,i=x.documentMode?this:r,o=st.get(i,e)-1;o?st.set(i,e,o):(x.documentMode?this.removeEventListener(e,n):r.removeEventListener(t,n,!0),st.remove(i,e))}}})),T.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){T.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=t.relatedTarget,i=t.handleObj;return r&&(r===this||T.contains(this,r))||(t.type=i.origType,n=i.handler.apply(this,arguments),t.type=e),n}}})),T.fn.extend({on:function(t,e,n,r){return Nt(this,t,e,n,r)},one:function(t,e,n,r){return Nt(this,t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,T(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=Dt),this.each((function(){T.event.remove(this,t,n,e)}))}});var zt=/<script|<style|<link/i,Bt=/checked\s*(?:[^=]|=\s*.checked.)/i,jt=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Vt(t,e){return C(t,"table")&&C(11!==e.nodeType?e:e.firstChild,"tr")&&T(t).children("tbody")[0]||t}function qt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Gt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Ut(t,e){var n,r,i,o,a,s;if(1===e.nodeType){if(st.hasData(t)&&(s=st.get(t).events))for(i in st.remove(e,"handle events"),s)for(n=0,r=s[i].length;n<r;n++)T.event.add(e,i,s[i][n]);ut.hasData(t)&&(o=ut.access(t),a=T.extend({},o),ut.set(e,a))}}function Ht(t,e){var n=e.nodeName.toLowerCase();"input"===n&&Tt.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function Wt(t,e,n,r){e=u(e);var i,o,a,s,l,c,f=0,h=t.length,d=h-1,p=e[0],m=y(p);if(m||h>1&&"string"==typeof p&&!g.checkClone&&Bt.test(p))return t.each((function(i){var o=t.eq(i);m&&(e[0]=p.call(this,i,o.html())),Wt(o,e,n,r)}));if(h&&(o=(i=Rt(e,t[0].ownerDocument,!1,t,r)).firstChild,1===i.childNodes.length&&(i=o),o||r)){for(s=(a=T.map(St(i,"script"),qt)).length;f<h;f++)l=i,f!==d&&(l=T.clone(l,!0,!0),s&&T.merge(a,St(l,"script"))),n.call(t[f],l,f);if(s)for(c=a[a.length-1].ownerDocument,T.map(a,Gt),f=0;f<s;f++)l=a[f],Ct.test(l.type||"")&&!st.access(l,"globalEval")&&T.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?T._evalUrl&&!l.noModule&&T._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},c):b(l.textContent.replace(jt,""),l,c))}return t}function Xt(t,e,n){for(var r,i=e?T.filter(e,t):t,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||T.cleanData(St(r)),r.parentNode&&(n&&gt(r)&&Pt(St(r,"script")),r.parentNode.removeChild(r));return t}T.extend({htmlPrefilter:function(t){return t},clone:function(t,e,n){var r,i,o,a,s=t.cloneNode(!0),u=gt(t);if(!(g.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||T.isXMLDoc(t)))for(a=St(s),r=0,i=(o=St(t)).length;r<i;r++)Ht(o[r],a[r]);if(e)if(n)for(o=o||St(t),a=a||St(s),r=0,i=o.length;r<i;r++)Ut(o[r],a[r]);else Ut(t,s);return(a=St(s,"script")).length>0&&Pt(a,!u&&St(t,"script")),s},cleanData:function(t){for(var e,n,r,i=T.event.special,o=0;void 0!==(n=t[o]);o++)if(ot(n)){if(e=n[st.expando]){if(e.events)for(r in e.events)i[r]?T.event.remove(n,r):T.removeEvent(n,r,e.handle);n[st.expando]=void 0}n[ut.expando]&&(n[ut.expando]=void 0)}}}),T.fn.extend({detach:function(t){return Xt(this,t,!0)},remove:function(t){return Xt(this,t)},text:function(t){return tt(this,(function(t){return void 0===t?T.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return Wt(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Vt(this,t).appendChild(t)}))},prepend:function(){return Wt(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Vt(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return Wt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return Wt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(T.cleanData(St(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return T.clone(this,t,e)}))},html:function(t){return tt(this,(function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!zt.test(t)&&!kt[(Et.exec(t)||["",""])[1].toLowerCase()]){t=T.htmlPrefilter(t);try{for(;n<r;n++)1===(e=this[n]||{}).nodeType&&(T.cleanData(St(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return Wt(this,arguments,(function(e){var n=this.parentNode;T.inArray(this,t)<0&&(T.cleanData(St(this)),n&&n.replaceChild(e,this))}),t)}}),T.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){T.fn[t]=function(t){for(var n,r=[],i=T(t),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),T(i[a])[e](n),l.apply(r,n.get());return this.pushStack(r)}}));var Kt=new RegExp("^("+ht+")(?!px)[a-z%]+$","i"),Qt=/^--/,Yt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=r),e.getComputedStyle(t)},$t=function(t,e,n){var r,i,o={};for(i in e)o[i]=t.style[i],t.style[i]=e[i];for(i in r=n.call(t),e)t.style[i]=o[i];return r},Zt=new RegExp(pt.join("|"),"i");function Jt(t,e,n){var r,i,o,a,s=Qt.test(e),u=t.style;return(n=n||Yt(t))&&(a=n.getPropertyValue(e)||n[e],s&&a&&(a=a.replace(R,"$1")||void 0),""!==a||gt(t)||(a=T.style(t,e)),!g.pixelBoxStyles()&&Kt.test(a)&&Zt.test(e)&&(r=u.width,i=u.minWidth,o=u.maxWidth,u.minWidth=u.maxWidth=u.width=a,a=n.width,u.width=r,u.minWidth=i,u.maxWidth=o)),void 0!==a?a+"":a}function te(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(c){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",mt.appendChild(l).appendChild(c);var t=r.getComputedStyle(c);n="1%"!==t.top,u=12===e(t.marginLeft),c.style.right="60%",a=36===e(t.right),i=36===e(t.width),c.style.position="absolute",o=12===e(c.offsetWidth/3),mt.removeChild(l),c=null}}function e(t){return Math.round(parseFloat(t))}var n,i,o,a,s,u,l=x.createElement("div"),c=x.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===c.style.backgroundClip,T.extend(g,{boxSizingReliable:function(){return t(),i},pixelBoxStyles:function(){return t(),a},pixelPosition:function(){return t(),n},reliableMarginLeft:function(){return t(),u},scrollboxSize:function(){return t(),o},reliableTrDimensions:function(){var t,e,n,i;return null==s&&(t=x.createElement("table"),e=x.createElement("tr"),n=x.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",e.style.cssText="box-sizing:content-box;border:1px solid",e.style.height="1px",n.style.height="9px",n.style.display="block",mt.appendChild(t).appendChild(e).appendChild(n),i=r.getComputedStyle(e),s=parseInt(i.height,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10)===e.offsetHeight,mt.removeChild(t)),s}}))}();var ee=["Webkit","Moz","ms"],ne=x.createElement("div").style,re={};function ie(t){var e=T.cssProps[t]||re[t];return e||(t in ne?t:re[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=ee.length;n--;)if((t=ee[n]+e)in ne)return t}(t)||t)}var oe=/^(none|table(?!-c[ea]).+)/,ae={position:"absolute",visibility:"hidden",display:"block"},se={letterSpacing:"0",fontWeight:"400"};function ue(t,e,n){var r=dt.exec(e);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):e}function le(t,e,n,r,i,o){var a="width"===e?1:0,s=0,u=0,l=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(l+=T.css(t,n+pt[a],!0,i)),r?("content"===n&&(u-=T.css(t,"padding"+pt[a],!0,i)),"margin"!==n&&(u-=T.css(t,"border"+pt[a]+"Width",!0,i))):(u+=T.css(t,"padding"+pt[a],!0,i),"padding"!==n?u+=T.css(t,"border"+pt[a]+"Width",!0,i):s+=T.css(t,"border"+pt[a]+"Width",!0,i));return!r&&o>=0&&(u+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-u-s-.5))||0),u+l}function ce(t,e,n){var r=Yt(t),i=(!g.boxSizingReliable()||n)&&"border-box"===T.css(t,"boxSizing",!1,r),o=i,a=Jt(t,e,r),s="offset"+e[0].toUpperCase()+e.slice(1);if(Kt.test(a)){if(!n)return a;a="auto"}return(!g.boxSizingReliable()&&i||!g.reliableTrDimensions()&&C(t,"tr")||"auto"===a||!parseFloat(a)&&"inline"===T.css(t,"display",!1,r))&&t.getClientRects().length&&(i="border-box"===T.css(t,"boxSizing",!1,r),(o=s in t)&&(a=t[s])),(a=parseFloat(a)||0)+le(t,e,n||(i?"border":"content"),o,r,a)+"px"}function fe(t,e,n,r,i){return new fe.prototype.init(t,e,n,r,i)}T.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Jt(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,a,s=it(e),u=Qt.test(e),l=t.style;if(u||(e=ie(s)),a=T.cssHooks[e]||T.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(t,!1,r))?i:l[e];"string"===(o=typeof n)&&(i=dt.exec(n))&&i[1]&&(n=xt(t,e,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(T.cssNumber[s]?"":"px")),g.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,r))||(u?l.setProperty(e,n):l[e]=n))}},css:function(t,e,n,r){var i,o,a,s=it(e);return Qt.test(e)||(e=ie(s)),(a=T.cssHooks[e]||T.cssHooks[s])&&"get"in a&&(i=a.get(t,!0,n)),void 0===i&&(i=Jt(t,e,r)),"normal"===i&&e in se&&(i=se[e]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),T.each(["height","width"],(function(t,e){T.cssHooks[e]={get:function(t,n,r){if(n)return!oe.test(T.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?ce(t,e,r):$t(t,ae,(function(){return ce(t,e,r)}))},set:function(t,n,r){var i,o=Yt(t),a=!g.scrollboxSize()&&"absolute"===o.position,s=(a||r)&&"border-box"===T.css(t,"boxSizing",!1,o),u=r?le(t,e,r,s,o):0;return s&&a&&(u-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(o[e])-le(t,e,"border",!1,o)-.5)),u&&(i=dt.exec(n))&&"px"!==(i[3]||"px")&&(t.style[e]=n,n=T.css(t,e)),ue(0,n,u)}}})),T.cssHooks.marginLeft=te(g.reliableMarginLeft,(function(t,e){if(e)return(parseFloat(Jt(t,"marginLeft"))||t.getBoundingClientRect().left-$t(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),T.each({margin:"",padding:"",border:"Width"},(function(t,e){T.cssHooks[t+e]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[t+pt[r]+e]=o[r]||o[r-2]||o[0];return i}},"margin"!==t&&(T.cssHooks[t+e].set=ue)})),T.fn.extend({css:function(t,e){return tt(this,(function(t,e,n){var r,i,o={},a=0;if(Array.isArray(e)){for(r=Yt(t),i=e.length;a<i;a++)o[e[a]]=T.css(t,e[a],!1,r);return o}return void 0!==n?T.style(t,e,n):T.css(t,e)}),t,e,arguments.length>1)}}),T.Tween=fe,fe.prototype={constructor:fe,init:function(t,e,n,r,i,o){this.elem=t,this.prop=n,this.easing=i||T.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=o||(T.cssNumber[n]?"":"px")},cur:function(){var t=fe.propHooks[this.prop];return t&&t.get?t.get(this):fe.propHooks._default.get(this)},run:function(t){var e,n=fe.propHooks[this.prop];return this.options.duration?this.pos=e=T.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):fe.propHooks._default.set(this),this}},fe.prototype.init.prototype=fe.prototype,fe.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=T.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){T.fx.step[t.prop]?T.fx.step[t.prop](t):1!==t.elem.nodeType||!T.cssHooks[t.prop]&&null==t.elem.style[ie(t.prop)]?t.elem[t.prop]=t.now:T.style(t.elem,t.prop,t.now+t.unit)}}},fe.propHooks.scrollTop=fe.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},T.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},T.fx=fe.prototype.init,T.fx.step={};var he,de,pe=/^(?:toggle|show|hide)$/,me=/queueHooks$/;function ge(){de&&(!1===x.hidden&&r.requestAnimationFrame?r.requestAnimationFrame(ge):r.setTimeout(ge,T.fx.interval),T.fx.tick())}function ye(){return r.setTimeout((function(){he=void 0})),he=Date.now()}function ve(t,e){var n,r=0,i={height:t};for(e=e?1:0;r<4;r+=2-e)i["margin"+(n=pt[r])]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function xe(t,e,n){for(var r,i=(_e.tweeners[e]||[]).concat(_e.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,e,t))return r}function _e(t,e,n){var r,i,o=0,a=_e.prefilters.length,s=T.Deferred().always((function(){delete u.elem})),u=function(){if(i)return!1;for(var e=he||ye(),n=Math.max(0,l.startTime+l.duration-e),r=1-(n/l.duration||0),o=0,a=l.tweens.length;o<a;o++)l.tweens[o].run(r);return s.notifyWith(t,[l,r,n]),r<1&&a?n:(a||s.notifyWith(t,[l,1,0]),s.resolveWith(t,[l]),!1)},l=s.promise({elem:t,props:T.extend({},e),opts:T.extend(!0,{specialEasing:{},easing:T.easing._default},n),originalProperties:e,originalOptions:n,startTime:he||ye(),duration:n.duration,tweens:[],createTween:function(e,n){var r=T.Tween(t,l.opts,e,n,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(r),r},stop:function(e){var n=0,r=e?l.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)l.tweens[n].run(1);return e?(s.notifyWith(t,[l,1,0]),s.resolveWith(t,[l,e])):s.rejectWith(t,[l,e]),this}}),c=l.props;for(!function(t,e){var n,r,i,o,a;for(n in t)if(i=e[r=it(n)],o=t[n],Array.isArray(o)&&(i=o[1],o=t[n]=o[0]),n!==r&&(t[r]=o,delete t[n]),(a=T.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete t[r],o)n in t||(t[n]=o[n],e[n]=i);else e[r]=i}(c,l.opts.specialEasing);o<a;o++)if(r=_e.prefilters[o].call(l,t,c,l.opts))return y(r.stop)&&(T._queueHooks(l.elem,l.opts.queue).stop=r.stop.bind(r)),r;return T.map(c,xe,l),y(l.opts.start)&&l.opts.start.call(t,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),T.fx.timer(T.extend(u,{elem:t,anim:l,queue:l.opts.queue})),l}T.Animation=T.extend(_e,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return xt(n.elem,t,dt.exec(e),n),n}]},tweener:function(t,e){y(t)?(e=t,t=["*"]):t=t.match(X);for(var n,r=0,i=t.length;r<i;r++)n=t[r],_e.tweeners[n]=_e.tweeners[n]||[],_e.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var r,i,o,a,s,u,l,c,f="width"in e||"height"in e,h=this,d={},p=t.style,m=t.nodeType&&vt(t),g=st.get(t,"fxshow");for(r in n.queue||(null==(a=T._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,h.always((function(){h.always((function(){a.unqueued--,T.queue(t,"fx").length||a.empty.fire()}))}))),e)if(i=e[r],pe.test(i)){if(delete e[r],o=o||"toggle"===i,i===(m?"hide":"show")){if("show"!==i||!g||void 0===g[r])continue;m=!0}d[r]=g&&g[r]||T.style(t,r)}if((u=!T.isEmptyObject(e))||!T.isEmptyObject(d))for(r in f&&1===t.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(l=g&&g.display)&&(l=st.get(t,"display")),"none"===(c=T.css(t,"display"))&&(l?c=l:(wt([t],!0),l=t.style.display||l,c=T.css(t,"display"),wt([t]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===T.css(t,"float")&&(u||(h.done((function(){p.display=l})),null==l&&(c=p.display,l="none"===c?"":c)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",h.always((function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}))),u=!1,d)u||(g?"hidden"in g&&(m=g.hidden):g=st.access(t,"fxshow",{display:l}),o&&(g.hidden=!m),m&&wt([t],!0),h.done((function(){for(r in m||wt([t]),st.remove(t,"fxshow"),d)T.style(t,r,d[r])}))),u=xe(m?g[r]:0,r,h),r in g||(g[r]=u.start,m&&(u.end=u.start,u.start=0))}],prefilter:function(t,e){e?_e.prefilters.unshift(t):_e.prefilters.push(t)}}),T.speed=function(t,e,n){var r=t&&"object"==typeof t?T.extend({},t):{complete:n||!n&&e||y(t)&&t,duration:t,easing:n&&e||e&&!y(e)&&e};return T.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in T.fx.speeds?r.duration=T.fx.speeds[r.duration]:r.duration=T.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){y(r.old)&&r.old.call(this),r.queue&&T.dequeue(this,r.queue)},r},T.fn.extend({fadeTo:function(t,e,n,r){return this.filter(vt).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(t,e,n,r){var i=T.isEmptyObject(t),o=T.speed(e,n,r),a=function(){var e=_e(this,T.extend({},t),o);(i||st.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(t,e,n){var r=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each((function(){var e=!0,i=null!=t&&t+"queueHooks",o=T.timers,a=st.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&me.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=t&&o[i].queue!==t||(o[i].anim.stop(n),e=!1,o.splice(i,1));!e&&n||T.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,n=st.get(this),r=n[t+"queue"],i=n[t+"queueHooks"],o=T.timers,a=r?r.length:0;for(n.finish=!0,T.queue(this,t,[]),i&&i.stop&&i.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<a;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete n.finish}))}}),T.each(["toggle","show","hide"],(function(t,e){var n=T.fn[e];T.fn[e]=function(t,r,i){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(ve(e,!0),t,r,i)}})),T.each({slideDown:ve("show"),slideUp:ve("hide"),slideToggle:ve("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){T.fn[t]=function(t,n,r){return this.animate(e,t,n,r)}})),T.timers=[],T.fx.tick=function(){var t,e=0,n=T.timers;for(he=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||T.fx.stop(),he=void 0},T.fx.timer=function(t){T.timers.push(t),T.fx.start()},T.fx.interval=13,T.fx.start=function(){de||(de=!0,ge())},T.fx.stop=function(){de=null},T.fx.speeds={slow:600,fast:200,_default:400},T.fn.delay=function(t,e){return t=T.fx&&T.fx.speeds[t]||t,e=e||"fx",this.queue(e,(function(e,n){var i=r.setTimeout(e,t);n.stop=function(){r.clearTimeout(i)}}))},function(){var t=x.createElement("input"),e=x.createElement("select").appendChild(x.createElement("option"));t.type="checkbox",g.checkOn=""!==t.value,g.optSelected=e.selected,(t=x.createElement("input")).value="t",t.type="radio",g.radioValue="t"===t.value}();var be,we=T.expr.attrHandle;T.fn.extend({attr:function(t,e){return tt(this,T.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each((function(){T.removeAttr(this,t)}))}}),T.extend({attr:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?T.prop(t,e,n):(1===o&&T.isXMLDoc(t)||(i=T.attrHooks[e.toLowerCase()]||(T.expr.match.bool.test(e)?be:void 0)),void 0!==n?null===n?void T.removeAttr(t,e):i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:(t.setAttribute(e,n+""),n):i&&"get"in i&&null!==(r=i.get(t,e))?r:null==(r=T.find.attr(t,e))?void 0:r)},attrHooks:{type:{set:function(t,e){if(!g.radioValue&&"radio"===e&&C(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,r=0,i=e&&e.match(X);if(i&&1===t.nodeType)for(;n=i[r++];)t.removeAttribute(n)}}),be={set:function(t,e,n){return!1===e?T.removeAttr(t,n):t.setAttribute(n,n),n}},T.each(T.expr.match.bool.source.match(/\w+/g),(function(t,e){var n=we[e]||T.find.attr;we[e]=function(t,e,r){var i,o,a=e.toLowerCase();return r||(o=we[a],we[a]=i,i=null!=n(t,e,r)?a:null,we[a]=o),i}}));var Me=/^(?:input|select|textarea|button)$/i,Ae=/^(?:a|area)$/i;function Te(t){return(t.match(X)||[]).join(" ")}function Ee(t){return t.getAttribute&&t.getAttribute("class")||""}function Ce(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(X)||[]}T.fn.extend({prop:function(t,e){return tt(this,T.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each((function(){delete this[T.propFix[t]||t]}))}}),T.extend({prop:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&T.isXMLDoc(t)||(e=T.propFix[e]||e,i=T.propHooks[e]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:t[e]=n:i&&"get"in i&&null!==(r=i.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){var e=T.find.attr(t,"tabindex");return e?parseInt(e,10):Me.test(t.nodeName)||Ae.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(T.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),T.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){T.propFix[this.toLowerCase()]=this})),T.fn.extend({addClass:function(t){var e,n,r,i,o,a;return y(t)?this.each((function(e){T(this).addClass(t.call(this,e,Ee(this)))})):(e=Ce(t)).length?this.each((function(){if(r=Ee(this),n=1===this.nodeType&&" "+Te(r)+" "){for(o=0;o<e.length;o++)i=e[o],n.indexOf(" "+i+" ")<0&&(n+=i+" ");a=Te(n),r!==a&&this.setAttribute("class",a)}})):this},removeClass:function(t){var e,n,r,i,o,a;return y(t)?this.each((function(e){T(this).removeClass(t.call(this,e,Ee(this)))})):arguments.length?(e=Ce(t)).length?this.each((function(){if(r=Ee(this),n=1===this.nodeType&&" "+Te(r)+" "){for(o=0;o<e.length;o++)for(i=e[o];n.indexOf(" "+i+" ")>-1;)n=n.replace(" "+i+" "," ");a=Te(n),r!==a&&this.setAttribute("class",a)}})):this:this.attr("class","")},toggleClass:function(t,e){var n,r,i,o,a=typeof t,s="string"===a||Array.isArray(t);return y(t)?this.each((function(n){T(this).toggleClass(t.call(this,n,Ee(this),e),e)})):"boolean"==typeof e&&s?e?this.addClass(t):this.removeClass(t):(n=Ce(t),this.each((function(){if(s)for(o=T(this),i=0;i<n.length;i++)r=n[i],o.hasClass(r)?o.removeClass(r):o.addClass(r);else void 0!==t&&"boolean"!==a||((r=Ee(this))&&st.set(this,"__className__",r),this.setAttribute&&this.setAttribute("class",r||!1===t?"":st.get(this,"__className__")||""))})))},hasClass:function(t){var e,n,r=0;for(e=" "+t+" ";n=this[r++];)if(1===n.nodeType&&(" "+Te(Ee(n))+" ").indexOf(e)>-1)return!0;return!1}});var ke=/\r/g;T.fn.extend({val:function(t){var e,n,r,i=this[0];return arguments.length?(r=y(t),this.each((function(n){var i;1===this.nodeType&&(null==(i=r?t.call(this,n,T(this).val()):t)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=T.map(i,(function(t){return null==t?"":t+""}))),(e=T.valHooks[this.type]||T.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,i,"value")||(this.value=i))}))):i?(e=T.valHooks[i.type]||T.valHooks[i.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(ke,""):null==n?"":n:void 0}}),T.extend({valHooks:{option:{get:function(t){var e=T.find.attr(t,"value");return null!=e?e:Te(T.text(t))}},select:{get:function(t){var e,n,r,i=t.options,o=t.selectedIndex,a="select-one"===t.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!C(n.parentNode,"optgroup"))){if(e=T(n).val(),a)return e;s.push(e)}return s},set:function(t,e){for(var n,r,i=t.options,o=T.makeArray(e),a=i.length;a--;)((r=i[a]).selected=T.inArray(T.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),T.each(["radio","checkbox"],(function(){T.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=T.inArray(T(t).val(),e)>-1}},g.checkOn||(T.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}));var Se=r.location,Pe={guid:Date.now()},Oe=/\?/;T.parseXML=function(t){var e,n;if(!t||"string"!=typeof t)return null;try{e=(new r.DOMParser).parseFromString(t,"text/xml")}catch(t){}return n=e&&e.getElementsByTagName("parsererror")[0],e&&!n||T.error("Invalid XML: "+(n?T.map(n.childNodes,(function(t){return t.textContent})).join("\n"):t)),e};var Re=/^(?:focusinfocus|focusoutblur)$/,Le=function(t){t.stopPropagation()};T.extend(T.event,{trigger:function(t,e,n,i){var o,a,s,u,l,c,f,h,p=[n||x],m=d.call(t,"type")?t.type:t,g=d.call(t,"namespace")?t.namespace.split("."):[];if(a=h=s=n=n||x,3!==n.nodeType&&8!==n.nodeType&&!Re.test(m+T.event.triggered)&&(m.indexOf(".")>-1&&(g=m.split("."),m=g.shift(),g.sort()),l=m.indexOf(":")<0&&"on"+m,(t=t[T.expando]?t:new T.Event(m,"object"==typeof t&&t)).isTrigger=i?2:3,t.namespace=g.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:T.makeArray(e,[t]),f=T.event.special[m]||{},i||!f.trigger||!1!==f.trigger.apply(n,e))){if(!i&&!f.noBubble&&!v(n)){for(u=f.delegateType||m,Re.test(u+m)||(a=a.parentNode);a;a=a.parentNode)p.push(a),s=a;s===(n.ownerDocument||x)&&p.push(s.defaultView||s.parentWindow||r)}for(o=0;(a=p[o++])&&!t.isPropagationStopped();)h=a,t.type=o>1?u:f.bindType||m,(c=(st.get(a,"events")||Object.create(null))[t.type]&&st.get(a,"handle"))&&c.apply(a,e),(c=l&&a[l])&&c.apply&&ot(a)&&(t.result=c.apply(a,e),!1===t.result&&t.preventDefault());return t.type=m,i||t.isDefaultPrevented()||f._default&&!1!==f._default.apply(p.pop(),e)||!ot(n)||l&&y(n[m])&&!v(n)&&((s=n[l])&&(n[l]=null),T.event.triggered=m,t.isPropagationStopped()&&h.addEventListener(m,Le),n[m](),t.isPropagationStopped()&&h.removeEventListener(m,Le),T.event.triggered=void 0,s&&(n[l]=s)),t.result}},simulate:function(t,e,n){var r=T.extend(new T.Event,n,{type:t,isSimulated:!0});T.event.trigger(r,null,e)}}),T.fn.extend({trigger:function(t,e){return this.each((function(){T.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var n=this[0];if(n)return T.event.trigger(t,e,n,!0)}});var Ie=/\[\]$/,De=/\r?\n/g,Ne=/^(?:submit|button|image|reset|file)$/i,Fe=/^(?:input|select|textarea|keygen)/i;function ze(t,e,n,r){var i;if(Array.isArray(e))T.each(e,(function(e,i){n||Ie.test(t)?r(t,i):ze(t+"["+("object"==typeof i&&null!=i?e:"")+"]",i,n,r)}));else if(n||"object"!==w(e))r(t,e);else for(i in e)ze(t+"["+i+"]",e[i],n,r)}T.param=function(t,e){var n,r=[],i=function(t,e){var n=y(e)?e():e;r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!T.isPlainObject(t))T.each(t,(function(){i(this.name,this.value)}));else for(n in t)ze(n,t[n],e,i);return r.join("&")},T.fn.extend({serialize:function(){return T.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=T.prop(this,"elements");return t?T.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!T(this).is(":disabled")&&Fe.test(this.nodeName)&&!Ne.test(t)&&(this.checked||!Tt.test(t))})).map((function(t,e){var n=T(this).val();return null==n?null:Array.isArray(n)?T.map(n,(function(t){return{name:e.name,value:t.replace(De,"\r\n")}})):{name:e.name,value:n.replace(De,"\r\n")}})).get()}});var Be=/%20/g,je=/#.*$/,Ve=/([?&])_=[^&]*/,qe=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ge=/^(?:GET|HEAD)$/,Ue=/^\/\//,He={},We={},Xe="*/".concat("*"),Ke=x.createElement("a");function Qe(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var r,i=0,o=e.toLowerCase().match(X)||[];if(y(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}function Ye(t,e,n,r){var i={},o=t===We;function a(s){var u;return i[s]=!0,T.each(t[s]||[],(function(t,s){var l=s(e,n,r);return"string"!=typeof l||o||i[l]?o?!(u=l):void 0:(e.dataTypes.unshift(l),a(l),!1)})),u}return a(e.dataTypes[0])||!i["*"]&&a("*")}function $e(t,e){var n,r,i=T.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((i[n]?t:r||(r={}))[n]=e[n]);return r&&T.extend(!0,t,r),t}Ke.href=Se.href,T.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Se.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Se.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Xe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":T.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?$e($e(t,T.ajaxSettings),e):$e(T.ajaxSettings,t)},ajaxPrefilter:Qe(He),ajaxTransport:Qe(We),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,i,o,a,s,u,l,c,f,h,d=T.ajaxSetup({},e),p=d.context||d,m=d.context&&(p.nodeType||p.jquery)?T(p):T.event,g=T.Deferred(),y=T.Callbacks("once memory"),v=d.statusCode||{},_={},b={},w="canceled",M={readyState:0,getResponseHeader:function(t){var e;if(l){if(!a)for(a={};e=qe.exec(o);)a[e[1].toLowerCase()+" "]=(a[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=a[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return l?o:null},setRequestHeader:function(t,e){return null==l&&(t=b[t.toLowerCase()]=b[t.toLowerCase()]||t,_[t]=e),this},overrideMimeType:function(t){return null==l&&(d.mimeType=t),this},statusCode:function(t){var e;if(t)if(l)M.always(t[M.status]);else for(e in t)v[e]=[v[e],t[e]];return this},abort:function(t){var e=t||w;return n&&n.abort(e),A(0,e),this}};if(g.promise(M),d.url=((t||d.url||Se.href)+"").replace(Ue,Se.protocol+"//"),d.type=e.method||e.type||d.method||d.type,d.dataTypes=(d.dataType||"*").toLowerCase().match(X)||[""],null==d.crossDomain){u=x.createElement("a");try{u.href=d.url,u.href=u.href,d.crossDomain=Ke.protocol+"//"+Ke.host!=u.protocol+"//"+u.host}catch(t){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!=typeof d.data&&(d.data=T.param(d.data,d.traditional)),Ye(He,d,e,M),l)return M;for(f in(c=T.event&&d.global)&&0==T.active++&&T.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Ge.test(d.type),i=d.url.replace(je,""),d.hasContent?d.data&&d.processData&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&(d.data=d.data.replace(Be,"+")):(h=d.url.slice(i.length),d.data&&(d.processData||"string"==typeof d.data)&&(i+=(Oe.test(i)?"&":"?")+d.data,delete d.data),!1===d.cache&&(i=i.replace(Ve,"$1"),h=(Oe.test(i)?"&":"?")+"_="+Pe.guid+++h),d.url=i+h),d.ifModified&&(T.lastModified[i]&&M.setRequestHeader("If-Modified-Since",T.lastModified[i]),T.etag[i]&&M.setRequestHeader("If-None-Match",T.etag[i])),(d.data&&d.hasContent&&!1!==d.contentType||e.contentType)&&M.setRequestHeader("Content-Type",d.contentType),M.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Xe+"; q=0.01":""):d.accepts["*"]),d.headers)M.setRequestHeader(f,d.headers[f]);if(d.beforeSend&&(!1===d.beforeSend.call(p,M,d)||l))return M.abort();if(w="abort",y.add(d.complete),M.done(d.success),M.fail(d.error),n=Ye(We,d,e,M)){if(M.readyState=1,c&&m.trigger("ajaxSend",[M,d]),l)return M;d.async&&d.timeout>0&&(s=r.setTimeout((function(){M.abort("timeout")}),d.timeout));try{l=!1,n.send(_,A)}catch(t){if(l)throw t;A(-1,t)}}else A(-1,"No Transport");function A(t,e,a,u){var f,h,x,_,b,w=e;l||(l=!0,s&&r.clearTimeout(s),n=void 0,o=u||"",M.readyState=t>0?4:0,f=t>=200&&t<300||304===t,a&&(_=function(t,e,n){for(var r,i,o,a,s=t.contents,u=t.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||t.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(d,M,a)),!f&&T.inArray("script",d.dataTypes)>-1&&T.inArray("json",d.dataTypes)<0&&(d.converters["text script"]=function(){}),_=function(t,e,n,r){var i,o,a,s,u,l={},c=t.dataTypes.slice();if(c[1])for(a in t.converters)l[a.toLowerCase()]=t.converters[a];for(o=c.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!u&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&t.throws)e=a(e);else try{e=a(e)}catch(t){return{state:"parsererror",error:a?t:"No conversion from "+u+" to "+o}}}return{state:"success",data:e}}(d,_,M,f),f?(d.ifModified&&((b=M.getResponseHeader("Last-Modified"))&&(T.lastModified[i]=b),(b=M.getResponseHeader("etag"))&&(T.etag[i]=b)),204===t||"HEAD"===d.type?w="nocontent":304===t?w="notmodified":(w=_.state,h=_.data,f=!(x=_.error))):(x=w,!t&&w||(w="error",t<0&&(t=0))),M.status=t,M.statusText=(e||w)+"",f?g.resolveWith(p,[h,w,M]):g.rejectWith(p,[M,w,x]),M.statusCode(v),v=void 0,c&&m.trigger(f?"ajaxSuccess":"ajaxError",[M,d,f?h:x]),y.fireWith(p,[M,w]),c&&(m.trigger("ajaxComplete",[M,d]),--T.active||T.event.trigger("ajaxStop")))}return M},getJSON:function(t,e,n){return T.get(t,e,n,"json")},getScript:function(t,e){return T.get(t,void 0,e,"script")}}),T.each(["get","post"],(function(t,e){T[e]=function(t,n,r,i){return y(n)&&(i=i||r,r=n,n=void 0),T.ajax(T.extend({url:t,type:e,dataType:i,data:n,success:r},T.isPlainObject(t)&&t))}})),T.ajaxPrefilter((function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")})),T._evalUrl=function(t,e,n){return T.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){T.globalEval(t,e,n)}})},T.fn.extend({wrapAll:function(t){var e;return this[0]&&(y(t)&&(t=t.call(this[0])),e=T(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(t){return y(t)?this.each((function(e){T(this).wrapInner(t.call(this,e))})):this.each((function(){var e=T(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)}))},wrap:function(t){var e=y(t);return this.each((function(n){T(this).wrapAll(e?t.call(this,n):t)}))},unwrap:function(t){return this.parent(t).not("body").each((function(){T(this).replaceWith(this.childNodes)})),this}}),T.expr.pseudos.hidden=function(t){return!T.expr.pseudos.visible(t)},T.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},T.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch(t){}};var Ze={0:200,1223:204},Je=T.ajaxSettings.xhr();g.cors=!!Je&&"withCredentials"in Je,g.ajax=Je=!!Je,T.ajaxTransport((function(t){var e,n;if(g.cors||Je&&!t.crossDomain)return{send:function(i,o){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];for(a in t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)s.setRequestHeader(a,i[a]);e=function(t){return function(){e&&(e=n=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===t?s.abort():"error"===t?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Ze[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=e(),n=s.onerror=s.ontimeout=e("error"),void 0!==s.onabort?s.onabort=n:s.onreadystatechange=function(){4===s.readyState&&r.setTimeout((function(){e&&n()}))},e=e("abort");try{s.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}})),T.ajaxPrefilter((function(t){t.crossDomain&&(t.contents.script=!1)})),T.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return T.globalEval(t),t}}}),T.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),T.ajaxTransport("script",(function(t){var e,n;if(t.crossDomain||t.scriptAttrs)return{send:function(r,i){e=T("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&i("error"===t.type?404:200,t.type)}),x.head.appendChild(e[0])},abort:function(){n&&n()}}}));var tn,en=[],nn=/(=)\?(?=&|$)|\?\?/;T.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=en.pop()||T.expando+"_"+Pe.guid++;return this[t]=!0,t}}),T.ajaxPrefilter("json jsonp",(function(t,e,n){var i,o,a,s=!1!==t.jsonp&&(nn.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&nn.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=y(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(nn,"$1"+i):!1!==t.jsonp&&(t.url+=(Oe.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||T.error(i+" was not called"),a[0]},t.dataTypes[0]="json",o=r[i],r[i]=function(){a=arguments},n.always((function(){void 0===o?T(r).removeProp(i):r[i]=o,t[i]&&(t.jsonpCallback=e.jsonpCallback,en.push(i)),a&&y(o)&&o(a[0]),a=o=void 0})),"script"})),g.createHTMLDocument=((tn=x.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===tn.childNodes.length),T.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(g.createHTMLDocument?((r=(e=x.implementation.createHTMLDocument("")).createElement("base")).href=x.location.href,e.head.appendChild(r)):e=x),o=!n&&[],(i=j.exec(t))?[e.createElement(i[1])]:(i=Rt([t],e,o),o&&o.length&&T(o).remove(),T.merge([],i.childNodes)));var r,i,o},T.fn.load=function(t,e,n){var r,i,o,a=this,s=t.indexOf(" ");return s>-1&&(r=Te(t.slice(s)),t=t.slice(0,s)),y(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),a.length>0&&T.ajax({url:t,type:i||"GET",dataType:"html",data:e}).done((function(t){o=arguments,a.html(r?T("<div>").append(T.parseHTML(t)).find(r):t)})).always(n&&function(t,e){a.each((function(){n.apply(this,o||[t.responseText,e,t])}))}),this},T.expr.pseudos.animated=function(t){return T.grep(T.timers,(function(e){return t===e.elem})).length},T.offset={setOffset:function(t,e,n){var r,i,o,a,s,u,l=T.css(t,"position"),c=T(t),f={};"static"===l&&(t.style.position="relative"),s=c.offset(),o=T.css(t,"top"),u=T.css(t,"left"),("absolute"===l||"fixed"===l)&&(o+u).indexOf("auto")>-1?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),y(e)&&(e=e.call(t,n,T.extend({},s))),null!=e.top&&(f.top=e.top-s.top+a),null!=e.left&&(f.left=e.left-s.left+i),"using"in e?e.using.call(t,f):c.css(f)}},T.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){T.offset.setOffset(this,t,e)}));var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,r=this[0],i={top:0,left:0};if("fixed"===T.css(r,"position"))e=r.getBoundingClientRect();else{for(e=this.offset(),n=r.ownerDocument,t=r.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===T.css(t,"position");)t=t.parentNode;t&&t!==r&&1===t.nodeType&&((i=T(t).offset()).top+=T.css(t,"borderTopWidth",!0),i.left+=T.css(t,"borderLeftWidth",!0))}return{top:e.top-i.top-T.css(r,"marginTop",!0),left:e.left-i.left-T.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===T.css(t,"position");)t=t.offsetParent;return t||mt}))}}),T.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var n="pageYOffset"===e;T.fn[t]=function(r){return tt(this,(function(t,r,i){var o;if(v(t)?o=t:9===t.nodeType&&(o=t.defaultView),void 0===i)return o?o[e]:t[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):t[r]=i}),t,r,arguments.length)}})),T.each(["top","left"],(function(t,e){T.cssHooks[e]=te(g.pixelPosition,(function(t,n){if(n)return n=Jt(t,e),Kt.test(n)?T(t).position()[e]+"px":n}))})),T.each({Height:"height",Width:"width"},(function(t,e){T.each({padding:"inner"+t,content:e,"":"outer"+t},(function(n,r){T.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===o?"margin":"border");return tt(this,(function(e,n,i){var o;return v(e)?0===r.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===i?T.css(e,n,s):T.style(e,n,i,s)}),e,a?i:void 0,a)}}))})),T.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){T.fn[e]=function(t){return this.on(e,t)}})),T.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},hover:function(t,e){return this.on("mouseenter",t).on("mouseleave",e||t)}}),T.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,e){T.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}));var rn=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;T.proxy=function(t,e){var n,r,i;if("string"==typeof e&&(n=t[e],e=t,t=n),y(t))return r=s.call(arguments,2),i=function(){return t.apply(e||this,r.concat(s.call(arguments)))},i.guid=t.guid=t.guid||T.guid++,i},T.holdReady=function(t){t?T.readyWait++:T.ready(!0)},T.isArray=Array.isArray,T.parseJSON=JSON.parse,T.nodeName=C,T.isFunction=y,T.isWindow=v,T.camelCase=it,T.type=w,T.now=Date.now,T.isNumeric=function(t){var e=T.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},T.trim=function(t){return null==t?"":(t+"").replace(rn,"$1")},void 0===(n=function(){return T}.apply(e,[]))||(t.exports=n);var on=r.jQuery,an=r.$;return T.noConflict=function(t){return r.$===T&&(r.$=an),t&&r.jQuery===T&&(r.jQuery=on),T},void 0===i&&(r.jQuery=r.$=T),T}))},7549:function(t,e,n){var r;!function(i,o){if(i){for(var a,s={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},u={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},l={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},c={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},f=1;f<20;++f)s[111+f]="f"+f;for(f=0;f<=9;++f)s[f+96]=f.toString();v.prototype.bind=function(t,e,n){var r=this;return t=t instanceof Array?t:[t],r._bindMultiple.call(r,t,e,n),r},v.prototype.unbind=function(t,e){return this.bind.call(this,t,(function(){}),e)},v.prototype.trigger=function(t,e){var n=this;return n._directMap[t+":"+e]&&n._directMap[t+":"+e]({},t),n},v.prototype.reset=function(){var t=this;return t._callbacks={},t._directMap={},t},v.prototype.stopCallback=function(t,e){if((" "+e.className+" ").indexOf(" mousetrap ")>-1)return!1;if(y(e,this.target))return!1;if("composedPath"in t&&"function"==typeof t.composedPath){var n=t.composedPath()[0];n!==t.target&&(e=n)}return"INPUT"==e.tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName||e.isContentEditable},v.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},v.addKeycodes=function(t){for(var e in t)t.hasOwnProperty(e)&&(s[e]=t[e]);a=null},v.init=function(){var t=v(o);for(var e in t)"_"!==e.charAt(0)&&(v[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e))},v.init(),i.Mousetrap=v,t.exports&&(t.exports=v),void 0===(r=function(){return v}.call(e,n,e,t))||(t.exports=r)}function h(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)}function d(t){if("keypress"==t.type){var e=String.fromCharCode(t.which);return t.shiftKey||(e=e.toLowerCase()),e}return s[t.which]?s[t.which]:u[t.which]?u[t.which]:String.fromCharCode(t.which).toLowerCase()}function p(t){return"shift"==t||"ctrl"==t||"alt"==t||"meta"==t}function m(t,e,n){return n||(n=function(){if(!a)for(var t in a={},s)t>95&&t<112||s.hasOwnProperty(t)&&(a[s[t]]=t);return a}()[t]?"keydown":"keypress"),"keypress"==n&&e.length&&(n="keydown"),n}function g(t,e){var n,r,i,o=[];for(n=function(t){return"+"===t?["+"]:(t=t.replace(/\+{2}/g,"+plus")).split("+")}(t),i=0;i<n.length;++i)r=n[i],c[r]&&(r=c[r]),e&&"keypress"!=e&&l[r]&&(r=l[r],o.push("shift")),p(r)&&o.push(r);return{key:r,modifiers:o,action:e=m(r,o,e)}}function y(t,e){return null!==t&&t!==o&&(t===e||y(t.parentNode,e))}function v(t){var e=this;if(t=t||o,!(e instanceof v))return new v(t);e.target=t,e._callbacks={},e._directMap={};var n,r={},i=!1,a=!1,s=!1;function u(t){t=t||{};var e,n=!1;for(e in r)t[e]?n=!0:r[e]=0;n||(s=!1)}function l(t,n,i,o,a,s){var u,l,c,f,h=[],d=i.type;if(!e._callbacks[t])return[];for("keyup"==d&&p(t)&&(n=[t]),u=0;u<e._callbacks[t].length;++u)if(l=e._callbacks[t][u],(o||!l.seq||r[l.seq]==l.level)&&d==l.action&&("keypress"==d&&!i.metaKey&&!i.ctrlKey||(c=n,f=l.modifiers,c.sort().join(",")===f.sort().join(",")))){var m=!o&&l.combo==a,g=o&&l.seq==o&&l.level==s;(m||g)&&e._callbacks[t].splice(u,1),h.push(l)}return h}function c(t,n,r,i){e.stopCallback(n,n.target||n.srcElement,r,i)||!1===t(n,r)&&(function(t){t.preventDefault?t.preventDefault():t.returnValue=!1}(n),function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}(n))}function f(t){"number"!=typeof t.which&&(t.which=t.keyCode);var n=d(t);n&&("keyup"!=t.type||i!==n?e.handleKey(n,function(t){var e=[];return t.shiftKey&&e.push("shift"),t.altKey&&e.push("alt"),t.ctrlKey&&e.push("ctrl"),t.metaKey&&e.push("meta"),e}(t),t):i=!1)}function m(t,e,o,a){function l(e){return function(){s=e,++r[t],clearTimeout(n),n=setTimeout(u,1e3)}}function f(e){c(o,e,t),"keyup"!==a&&(i=d(e)),setTimeout(u,10)}r[t]=0;for(var h=0;h<e.length;++h){var p=h+1===e.length?f:l(a||g(e[h+1]).action);y(e[h],p,a,t,h)}}function y(t,n,r,i,o){e._directMap[t+":"+r]=n;var a,s=(t=t.replace(/\s+/g," ")).split(" ");s.length>1?m(t,s,n,r):(a=g(t,r),e._callbacks[a.key]=e._callbacks[a.key]||[],l(a.key,a.modifiers,{type:a.action},i,t,o),e._callbacks[a.key][i?"unshift":"push"]({callback:n,modifiers:a.modifiers,action:a.action,seq:i,level:o,combo:t}))}e._handleKey=function(t,e,n){var r,i=l(t,e,n),o={},f=0,h=!1;for(r=0;r<i.length;++r)i[r].seq&&(f=Math.max(f,i[r].level));for(r=0;r<i.length;++r)if(i[r].seq){if(i[r].level!=f)continue;h=!0,o[i[r].seq]=1,c(i[r].callback,n,i[r].combo,i[r].seq)}else h||c(i[r].callback,n,i[r].combo);var d="keypress"==n.type&&a;n.type!=s||p(t)||d||u(o),a=h&&"keydown"==n.type},e._bindMultiple=function(t,e,n){for(var r=0;r<t.length;++r)y(t[r],e,n)},h(t,"keypress",f),h(t,"keydown",f),h(t,"keyup",f)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)},6820:function(t,e,n){
/*
 * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc
 * @license MIT
 * @preserve Project Home: https://github.com/voidqk/polybooljs
 */
var r,i=n(671),o=n(1526),a=n(3074),s=n(8534),u=n(8927),l=n(9779),c=!1,f=o();function h(t,e,n){var i=r.segments(t),o=r.segments(e),a=n(r.combine(i,o));return r.polygon(a)}r={buildLog:function(t){return!0===t?c=i():!1===t&&(c=!1),!1!==c&&c.list},epsilon:function(t){return f.epsilon(t)},segments:function(t){var e=a(!0,f,c);return t.regions.forEach(e.addRegion),{segments:e.calculate(t.inverted),inverted:t.inverted}},combine:function(t,e){return{combined:a(!1,f,c).calculate(t.segments,t.inverted,e.segments,e.inverted),inverted1:t.inverted,inverted2:e.inverted}},selectUnion:function(t){return{segments:u.union(t.combined,c),inverted:t.inverted1||t.inverted2}},selectIntersect:function(t){return{segments:u.intersect(t.combined,c),inverted:t.inverted1&&t.inverted2}},selectDifference:function(t){return{segments:u.difference(t.combined,c),inverted:t.inverted1&&!t.inverted2}},selectDifferenceRev:function(t){return{segments:u.differenceRev(t.combined,c),inverted:!t.inverted1&&t.inverted2}},selectXor:function(t){return{segments:u.xor(t.combined,c),inverted:t.inverted1!==t.inverted2}},polygon:function(t){return{regions:s(t.segments,f,c),inverted:t.inverted}},polygonFromGeoJSON:function(t){return l.toPolygon(r,t)},polygonToGeoJSON:function(t){return l.fromPolygon(r,f,t)},union:function(t,e){return h(t,e,r.selectUnion)},intersect:function(t,e){return h(t,e,r.selectIntersect)},difference:function(t,e){return h(t,e,r.selectDifference)},differenceRev:function(t,e){return h(t,e,r.selectDifferenceRev)},xor:function(t,e){return h(t,e,r.selectXor)}},"object"==typeof window&&(window.PolyBool=r),t.exports=r},671:function(t){t.exports=function(){var t,e=0,n=!1;function r(e,n){return t.list.push({type:e,data:n?JSON.parse(JSON.stringify(n)):void 0}),t}return t={list:[],segmentId:function(){return e++},checkIntersection:function(t,e){return r("check",{seg1:t,seg2:e})},segmentChop:function(t,e){return r("div_seg",{seg:t,pt:e}),r("chop",{seg:t,pt:e})},statusRemove:function(t){return r("pop_seg",{seg:t})},segmentUpdate:function(t){return r("seg_update",{seg:t})},segmentNew:function(t,e){return r("new_seg",{seg:t,primary:e})},segmentRemove:function(t){return r("rem_seg",{seg:t})},tempStatus:function(t,e,n){return r("temp_status",{seg:t,above:e,below:n})},rewind:function(t){return r("rewind",{seg:t})},status:function(t,e,n){return r("status",{seg:t,above:e,below:n})},vert:function(e){return e===n?t:(n=e,r("vert",{x:e}))},log:function(t){return"string"!=typeof t&&(t=JSON.stringify(t,!1,"  ")),r("log",{txt:t})},reset:function(){return r("reset")},selected:function(t){return r("selected",{segs:t})},chainStart:function(t){return r("chain_start",{seg:t})},chainRemoveHead:function(t,e){return r("chain_rem_head",{index:t,pt:e})},chainRemoveTail:function(t,e){return r("chain_rem_tail",{index:t,pt:e})},chainNew:function(t,e){return r("chain_new",{pt1:t,pt2:e})},chainMatch:function(t){return r("chain_match",{index:t})},chainClose:function(t){return r("chain_close",{index:t})},chainAddHead:function(t,e){return r("chain_add_head",{index:t,pt:e})},chainAddTail:function(t,e){return r("chain_add_tail",{index:t,pt:e})},chainConnect:function(t,e){return r("chain_con",{index1:t,index2:e})},chainReverse:function(t){return r("chain_rev",{index:t})},chainJoin:function(t,e){return r("chain_join",{index1:t,index2:e})},done:function(){return r("done")}}}},1526:function(t){t.exports=function(t){"number"!=typeof t&&(t=1e-10);var e={epsilon:function(e){return"number"==typeof e&&(t=e),t},pointAboveOrOnLine:function(e,n,r){var i=n[0],o=n[1],a=r[0],s=r[1],u=e[0],l=e[1],c=a-i,f=s-o,h=Math.sqrt(c*c+f*f);return c*(l-o)-f*(u-i)>=-t*h},pointBetween:function(t,n,r){if(e.pointsSame(t,n)||e.pointsSame(t,r))return!1;var i=t[1]-n[1],o=r[0]-n[0],a=t[0]-n[0],s=r[1]-n[1],u=a*o+i*s;return!(u<0)&&u<=o*o+s*s},pointsSameX:function(e,n){return Math.abs(e[0]-n[0])<t},pointsSameY:function(e,n){return Math.abs(e[1]-n[1])<t},pointsSame:function(t,n){return e.pointsSameX(t,n)&&e.pointsSameY(t,n)},pointsCompare:function(t,n){return e.pointsSameX(t,n)?e.pointsSameY(t,n)?0:t[1]<n[1]?-1:1:t[0]<n[0]?-1:1},pointsCollinear:function(e,n,r){var i=e[0]-n[0],o=e[1]-n[1],a=n[0]-r[0],s=n[1]-r[1],u=Math.sqrt(i*i+o*o),l=Math.sqrt(a*a+s*s);return Math.abs(i*s-a*o)<=t*(u+l)},linesIntersect:function(n,r,i,o){var a=r[0]-n[0],s=r[1]-n[1],u=o[0]-i[0],l=o[1]-i[1],c=a*l-s*u,f=Math.sqrt(a*a+s*s),h=Math.sqrt(u*u+l*l);if(Math.abs(c)<=t*(f+h))return!1;var d=n[0]-i[0],p=n[1]-i[1],m=(u*p-l*d)/c,g=(a*p-s*d)/c,y=[n[0]+m*a,n[1]+m*s],v={alongA:0,alongB:0,pt:y};return e.pointsSame(y,n)?v.alongA=-1:e.pointsSame(y,r)?v.alongA=1:m<0?v.alongA=-2:m>1&&(v.alongA=2),e.pointsSame(y,i)?v.alongB=-1:e.pointsSame(y,o)?v.alongB=1:g<0?v.alongB=-2:g>1&&(v.alongB=2),v},pointInsideRegion:function(e,n){for(var r=e[0],i=e[1],o=n[n.length-1][0],a=n[n.length-1][1],s=!1,u=0;u<n.length;u++){var l=n[u][0],c=n[u][1];c-i>t!=a-i>t&&(o-l)*(i-c)/(a-c)+l-r>t&&(s=!s),o=l,a=c}return s}};return e}},9779:function(t){var e={toPolygon:function(t,e){function n(e){if(e.length<=0)return t.segments({inverted:!1,regions:[]});function n(e){var n=e.slice(0,e.length-1);return t.segments({inverted:!1,regions:[n]})}for(var r=n(e[0]),i=1;i<e.length;i++)r=t.selectDifference(t.combine(r,n(e[i])));return r}if("Polygon"===e.type)return t.polygon(n(e.coordinates));if("MultiPolygon"===e.type){for(var r=t.segments({inverted:!1,regions:[]}),i=0;i<e.coordinates.length;i++)r=t.selectUnion(t.combine(r,n(e.coordinates[i])));return t.polygon(r)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(t,e,n){function r(t,n){return e.pointInsideRegion([.5*(t[0][0]+t[1][0]),.5*(t[0][1]+t[1][1])],n)}function i(t){return{region:t,children:[]}}n=t.polygon(t.segments(n));var o=i(null);function a(t,e){for(var n=0;n<t.children.length;n++){if(r(e,(s=t.children[n]).region))return void a(s,e)}var o=i(e);for(n=0;n<t.children.length;n++){var s;r((s=t.children[n]).region,e)&&(o.children.push(s),t.children.splice(n,1),n--)}t.children.push(o)}for(var s=0;s<n.regions.length;s++){var u=n.regions[s];u.length<3||a(o,u)}function l(t,e){for(var n=0,r=t[t.length-1][0],i=t[t.length-1][1],o=[],a=0;a<t.length;a++){var s=t[a][0],u=t[a][1];o.push([s,u]),n+=u*r-s*i,r=s,i=u}return n<0!==e&&o.reverse(),o.push([o[0][0],o[0][1]]),o}var c=[];function f(t){var e=[l(t.region,!1)];c.push(e);for(var n=0;n<t.children.length;n++)e.push(h(t.children[n]))}function h(t){for(var e=0;e<t.children.length;e++)f(t.children[e]);return l(t.region,!0)}for(s=0;s<o.children.length;s++)f(o.children[s]);return c.length<=0?{type:"Polygon",coordinates:[]}:1==c.length?{type:"Polygon",coordinates:c[0]}:{type:"MultiPolygon",coordinates:c}}};t.exports=e},3074:function(t,e,n){var r=n(4092);t.exports=function(t,e,n){function i(t,e,r){return{id:n?n.segmentId():-1,start:t,end:e,myFill:{above:r.myFill.above,below:r.myFill.below},otherFill:null}}var o=r.create();function a(t,n){o.insertBefore(t,(function(r){return function(t,n,r,i,o,a){var s=e.pointsCompare(n,o);return 0!==s?s:e.pointsSame(r,a)?0:t!==i?t?1:-1:e.pointAboveOrOnLine(r,i?o:a,i?a:o)?1:-1}(t.isStart,t.pt,n,r.isStart,r.pt,r.other.pt)<0}))}function s(t,e){var n=function(t,e){var n=r.node({isStart:!0,pt:t.start,seg:t,primary:e,other:null,status:null});return a(n,t.end),n}(t,e);return function(t,e,n){var i=r.node({isStart:!1,pt:e.end,seg:e,primary:n,other:t,status:null});t.other=i,a(i,t.pt)}(n,t,e),n}function u(t,e){var r=i(e,t.seg.end,t.seg);return function(t,e){n&&n.segmentChop(t.seg,e),t.other.remove(),t.seg.end=e,t.other.pt=e,a(t.other,t.pt)}(t,e),s(r,t.primary)}function l(i,a){var s=r.create();function l(t){return s.findTransition((function(n){var r,i,o,a,s,u;return(r=t,i=n.ev,o=r.seg.start,a=r.seg.end,s=i.seg.start,u=i.seg.end,e.pointsCollinear(o,s,u)?e.pointsCollinear(a,s,u)||e.pointAboveOrOnLine(a,s,u)?1:-1:e.pointAboveOrOnLine(o,s,u)?1:-1)>0}))}function c(t,r){var i=t.seg,o=r.seg,a=i.start,s=i.end,l=o.start,c=o.end;n&&n.checkIntersection(i,o);var f=e.linesIntersect(a,s,l,c);if(!1===f){if(!e.pointsCollinear(a,s,l))return!1;if(e.pointsSame(a,c)||e.pointsSame(s,l))return!1;var h=e.pointsSame(a,l),d=e.pointsSame(s,c);if(h&&d)return r;var p=!h&&e.pointBetween(a,l,c),m=!d&&e.pointBetween(s,l,c);if(h)return m?u(r,s):u(t,c),r;p&&(d||(m?u(r,s):u(t,c)),u(r,a))}else 0===f.alongA&&(-1===f.alongB?u(t,l):0===f.alongB?u(t,f.pt):1===f.alongB&&u(t,c)),0===f.alongB&&(-1===f.alongA?u(r,a):0===f.alongA?u(r,f.pt):1===f.alongA&&u(r,s));return!1}for(var f=[];!o.isEmpty();){var h=o.getHead();if(n&&n.vert(h.pt[0]),h.isStart){n&&n.segmentNew(h.seg,h.primary);var d=l(h),p=d.before?d.before.ev:null,m=d.after?d.after.ev:null;function g(){if(p){var t=c(h,p);if(t)return t}return!!m&&c(h,m)}n&&n.tempStatus(h.seg,!!p&&p.seg,!!m&&m.seg);var y,v=g();if(v){var x;if(t)(x=null===h.seg.myFill.below||h.seg.myFill.above!==h.seg.myFill.below)&&(v.seg.myFill.above=!v.seg.myFill.above);else v.seg.otherFill=h.seg.myFill;n&&n.segmentUpdate(v.seg),h.other.remove(),h.remove()}if(o.getHead()!==h){n&&n.rewind(h.seg);continue}if(t)x=null===h.seg.myFill.below||h.seg.myFill.above!==h.seg.myFill.below,h.seg.myFill.below=m?m.seg.myFill.above:i,h.seg.myFill.above=x?!h.seg.myFill.below:h.seg.myFill.below;else if(null===h.seg.otherFill)y=m?h.primary===m.primary?m.seg.otherFill.above:m.seg.myFill.above:h.primary?a:i,h.seg.otherFill={above:y,below:y};n&&n.status(h.seg,!!p&&p.seg,!!m&&m.seg),h.other.status=d.insert(r.node({ev:h}))}else{var _=h.status;if(null===_)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(s.exists(_.prev)&&s.exists(_.next)&&c(_.prev.ev,_.next.ev),n&&n.statusRemove(_.ev.seg),_.remove(),!h.primary){var b=h.seg.myFill;h.seg.myFill=h.seg.otherFill,h.seg.otherFill=b}f.push(h.seg)}o.getHead().remove()}return n&&n.done(),f}return t?{addRegion:function(t){for(var r,i,o,a=t[t.length-1],u=0;u<t.length;u++){r=a,a=t[u];var l=e.pointsCompare(r,a);0!==l&&s((i=l<0?r:a,o=l<0?a:r,{id:n?n.segmentId():-1,start:i,end:o,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(t){return l(t,!1)}}:{calculate:function(t,e,n,r){return t.forEach((function(t){s(i(t.start,t.end,t),!0)})),n.forEach((function(t){s(i(t.start,t.end,t),!1)})),l(e,r)}}}},4092:function(t){t.exports={create:function(){var t={root:{root:!0,next:null},exists:function(e){return null!==e&&e!==t.root},isEmpty:function(){return null===t.root.next},getHead:function(){return t.root.next},insertBefore:function(e,n){for(var r=t.root,i=t.root.next;null!==i;){if(n(i))return e.prev=i.prev,e.next=i,i.prev.next=e,void(i.prev=e);r=i,i=i.next}r.next=e,e.prev=r,e.next=null},findTransition:function(e){for(var n=t.root,r=t.root.next;null!==r&&!e(r);)n=r,r=r.next;return{before:n===t.root?null:n,after:r,insert:function(t){return t.prev=n,t.next=r,n.next=t,null!==r&&(r.prev=t),t}}}};return t},node:function(t){return t.prev=null,t.next=null,t.remove=function(){t.prev.next=t.next,t.next&&(t.next.prev=t.prev),t.prev=null,t.next=null},t}}},8534:function(t){t.exports=function(t,e,n){var r=[],i=[];return t.forEach((function(t){var o=t.start,a=t.end;if(e.pointsSame(o,a))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{n&&n.chainStart(t);for(var s={index:0,matches_head:!1,matches_pt1:!1},u={index:0,matches_head:!1,matches_pt1:!1},l=s,c=0;c<r.length;c++){var f=(g=r[c])[0],h=(g[1],g[g.length-1]);g[g.length-2];if(e.pointsSame(f,o)){if(A(c,!0,!0))break}else if(e.pointsSame(f,a)){if(A(c,!0,!1))break}else if(e.pointsSame(h,o)){if(A(c,!1,!0))break}else if(e.pointsSame(h,a)&&A(c,!1,!1))break}if(l===s)return r.push([o,a]),void(n&&n.chainNew(o,a));if(l===u){n&&n.chainMatch(s.index);var d=s.index,p=s.matches_pt1?a:o,m=s.matches_head,g=r[d],y=m?g[0]:g[g.length-1],v=m?g[1]:g[g.length-2],x=m?g[g.length-1]:g[0],_=m?g[g.length-2]:g[1];return e.pointsCollinear(v,y,p)&&(m?(n&&n.chainRemoveHead(s.index,p),g.shift()):(n&&n.chainRemoveTail(s.index,p),g.pop()),y=v),e.pointsSame(x,p)?(r.splice(d,1),e.pointsCollinear(_,x,y)&&(m?(n&&n.chainRemoveTail(s.index,y),g.pop()):(n&&n.chainRemoveHead(s.index,y),g.shift())),n&&n.chainClose(s.index),void i.push(g)):void(m?(n&&n.chainAddHead(s.index,p),g.unshift(p)):(n&&n.chainAddTail(s.index,p),g.push(p)))}var b=s.index,w=u.index;n&&n.chainConnect(b,w);var M=r[b].length<r[w].length;s.matches_head?u.matches_head?M?(T(b),E(b,w)):(T(w),E(w,b)):E(w,b):u.matches_head?E(b,w):M?(T(b),E(w,b)):(T(w),E(b,w))}function A(t,e,n){return l.index=t,l.matches_head=e,l.matches_pt1=n,l===s?(l=u,!1):(l=null,!0)}function T(t){n&&n.chainReverse(t),r[t].reverse()}function E(t,i){var o=r[t],a=r[i],s=o[o.length-1],u=o[o.length-2],l=a[0],c=a[1];e.pointsCollinear(u,s,l)&&(n&&n.chainRemoveTail(t,s),o.pop(),s=u),e.pointsCollinear(s,l,c)&&(n&&n.chainRemoveHead(i,l),a.shift()),n&&n.chainJoin(t,i),r[t]=o.concat(a),r.splice(i,1)}})),i}},8927:function(t){function e(t,e,n){var r=[];return t.forEach((function(t){var i=(t.myFill.above?8:0)+(t.myFill.below?4:0)+(t.otherFill&&t.otherFill.above?2:0)+(t.otherFill&&t.otherFill.below?1:0);0!==e[i]&&r.push({id:n?n.segmentId():-1,start:t.start,end:t.end,myFill:{above:1===e[i],below:2===e[i]},otherFill:null})})),n&&n.selected(r),r}var n={union:function(t,n){return e(t,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],n)},intersect:function(t,n){return e(t,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],n)},difference:function(t,n){return e(t,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],n)},differenceRev:function(t,n){return e(t,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],n)},xor:function(t,n){return e(t,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],n)}};t.exports=n},5473:function(t,e,n){"use strict";n.d(e,{A:function(){return o}});var r=n(2556),i=n(4205);function o(t){return Math.abs(t)<r.sK?t:t-(0,i.A)(t)*Math.PI}},737:function(t,e,n){"use strict";n.d(e,{A:function(){return o}});var r=n(2556),i=n(4205);function o(t){return Math.abs(t)<=r.DF?t:t-(0,i.A)(t)*r.JM}},8609:function(t,e,n){"use strict";function r(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}n.d(e,{A:function(){return r}})},4885:function(t,e,n){"use strict";function r(t){var e=Math.exp(t);return e=(e+1/e)/2}n.d(e,{A:function(){return r}})},8193:function(t,e,n){"use strict";function r(t){return 1-.25*t*(1+t/16*(3+1.25*t))}n.d(e,{A:function(){return r}})},9686:function(t,e,n){"use strict";function r(t){return.375*t*(1+.25*t*(1+.46875*t))}n.d(e,{A:function(){return r}})},7711:function(t,e,n){"use strict";function r(t){return.05859375*t*t*(1+.75*t)}n.d(e,{A:function(){return r}})},2060:function(t,e,n){"use strict";function r(t){return t*t*t*(35/3072)}n.d(e,{A:function(){return r}})},7973:function(t,e,n){"use strict";function r(t,e,n){var r=e*n;return t/Math.sqrt(1-r*r)}n.d(e,{A:function(){return r}})},1708:function(t,e,n){"use strict";function r(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),r=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(r,2))}n.d(e,{A:function(){return r}})},6592:function(t,e,n){"use strict";function r(t,e,n,r,i){var o,a;o=t/e;for(var s=0;s<15;s++)if(o+=a=(t-(e*o-n*Math.sin(2*o)+r*Math.sin(4*o)-i*Math.sin(6*o)))/(e-2*n*Math.cos(2*o)+4*r*Math.cos(4*o)-6*i*Math.cos(6*o)),Math.abs(a)<=1e-10)return o;return NaN}n.d(e,{A:function(){return r}})},4037:function(t,e,n){"use strict";function r(t,e,n,r,i){return t*i-e*Math.sin(2*i)+n*Math.sin(4*i)-r*Math.sin(6*i)}n.d(e,{A:function(){return r}})},444:function(t,e,n){"use strict";function r(t,e,n){var r=t*e;return n/Math.sqrt(1-r*r)}n.d(e,{A:function(){return r}})},1793:function(t,e,n){"use strict";n.d(e,{A:function(){return i}});var r=n(2556);function i(t,e){for(var n,i,o=.5*t,a=r.sK-2*Math.atan(e),s=0;s<=15;s++)if(n=t*Math.sin(a),a+=i=r.sK-2*Math.atan(e*Math.pow((1-n)/(1+n),o))-a,Math.abs(i)<=1e-10)return a;return-9999}},6366:function(t,e,n){"use strict";n.d(e,{A:function(){return m}});var r=1,i=.25,o=.046875,a=.01953125,s=.01068115234375,u=.75,l=.46875,c=.013020833333333334,f=.007120768229166667,h=.3645833333333333,d=.005696614583333333,p=.3076171875;function m(t){var e=[];e[0]=r-t*(i+t*(o+t*(a+t*s))),e[1]=t*(u-t*(o+t*(a+t*s)));var n=t*t;return e[2]=n*(l-t*(c+t*f)),n*=t,e[3]=n*(h-t*d),e[4]=n*t*p,e}},3220:function(t,e,n){"use strict";n.d(e,{A:function(){return a}});var r=n(2092),i=n(2556),o=20;function a(t,e,n){for(var a=1/(1-e),s=t,u=o;u;--u){var l=Math.sin(s),c=1-e*l*l;if(s-=c=((0,r.A)(s,l,Math.cos(s),n)-t)*(c*Math.sqrt(c))*a,Math.abs(c)<i.H0)return s}return s}},2092:function(t,e,n){"use strict";function r(t,e,n,r){return n*=e,e*=e,r[0]*t-n*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))}n.d(e,{A:function(){return r}})},7200:function(t,e,n){"use strict";function r(t,e){var n;return t>1e-7?(1-t*t)*(e/(1-(n=t*e)*n)-.5/t*Math.log((1-n)/(1+n))):2*e}n.d(e,{A:function(){return r}})},4205:function(t,e,n){"use strict";function r(t){return t<0?-1:1}n.d(e,{A:function(){return r}})},3882:function(t,e,n){"use strict";function r(t){var e=Math.exp(t);return e=(e-1/e)/2}n.d(e,{A:function(){return r}})},9967:function(t,e,n){"use strict";n.d(e,{A:function(){return i}});var r=n(2556);function i(t,e,n){var i=t*n,o=.5*t;return i=Math.pow((1-i)/(1+i),o),Math.tan(.5*(r.sK-e))/i}},2556:function(t,e,n){"use strict";n.d(e,{A1:function(){return s},DF:function(){return b},G9:function(){return o},H0:function(){return g},JM:function(){return _},Q1:function(){return p},Vj:function(){return x},Y$:function(){return i},_3:function(){return f},a8:function(){return r},bA:function(){return d},bv:function(){return u},dX:function(){return v},ej:function(){return m},gS:function(){return c},sK:function(){return h},xK:function(){return a},zp:function(){return l},zq:function(){return y}});var r=1,i=2,o=3,a=4,s=5,u=6378137,l=6356752.314,c=.0066943799901413165,f=484813681109536e-20,h=Math.PI/2,d=.16666666666666666,p=.04722222222222222,m=.022156084656084655,g=1e-10,y=.017453292519943295,v=57.29577951308232,x=Math.PI/4,_=2*Math.PI,b=3.14159265359},9160:function(t,e,n){"use strict";n.d(e,{Fs:function(){return u},OI:function(){return i},Rw:function(){return a},jX:function(){return o},mj:function(){return s}});var r=n(2556);function i(t,e){return t.datum_type===e.datum_type&&(!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(t.datum_type===r.a8?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type!==r.Y$||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]))}function o(t,e,n){var i,o,a,s,u=t.x,l=t.y,c=t.z?t.z:0;if(l<-r.sK&&l>-1.001*r.sK)l=-r.sK;else if(l>r.sK&&l<1.001*r.sK)l=r.sK;else{if(l<-r.sK)return{x:-1/0,y:-1/0,z:t.z};if(l>r.sK)return{x:1/0,y:1/0,z:t.z}}return u>Math.PI&&(u-=2*Math.PI),o=Math.sin(l),s=Math.cos(l),a=o*o,{x:((i=n/Math.sqrt(1-e*a))+c)*s*Math.cos(u),y:(i+c)*s*Math.sin(u),z:(i*(1-e)+c)*o}}function a(t,e,n,i){var o,a,s,u,l,c,f,h,d,p,m,g,y,v,x,_=1e-12,b=t.x,w=t.y,M=t.z?t.z:0;if(o=Math.sqrt(b*b+w*w),a=Math.sqrt(b*b+w*w+M*M),o/n<_){if(v=0,a/n<_)return r.sK,x=-i,{x:t.x,y:t.y,z:t.z}}else v=Math.atan2(w,b);s=M/a,h=(u=o/a)*(1-e)*(l=1/Math.sqrt(1-e*(2-e)*u*u)),d=s*l,y=0;do{y++,c=e*(f=n/Math.sqrt(1-e*d*d))/(f+(x=o*h+M*d-f*(1-e*d*d))),g=(m=s*(l=1/Math.sqrt(1-c*(2-c)*u*u)))*h-(p=u*(1-c)*l)*d,h=p,d=m}while(g*g>1e-24&&y<30);return{x:v,y:Math.atan(m/Math.abs(p)),z:x}}function s(t,e,n){if(e===r.a8)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(e===r.Y$){var i=n[0],o=n[1],a=n[2],s=n[3],u=n[4],l=n[5],c=n[6];return{x:c*(t.x-l*t.y+u*t.z)+i,y:c*(l*t.x+t.y-s*t.z)+o,z:c*(-u*t.x+s*t.y+t.z)+a}}}function u(t,e,n){if(e===r.a8)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(e===r.Y$){var i=n[0],o=n[1],a=n[2],s=n[3],u=n[4],l=n[5],c=n[6],f=(t.x-i)/c,h=(t.y-o)/c,d=(t.z-a)/c;return{x:f+l*h-u*d,y:-l*f+h+s*d,z:u*f-s*h+d}}}},1960:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return re}});var r=n(2556),i={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},o={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},a=/[\s_\-\/\(\)]/g;function s(t,e){if(t[e])return t[e];for(var n,r=Object.keys(t),i=e.toLowerCase().replace(a,""),o=-1;++o<r.length;)if((n=r[o]).toLowerCase().replace(a,"")===i)return t[n]}function u(t){var e,n,a,u={},l=t.split("+").map((function(t){return t.trim()})).filter((function(t){return t})).reduce((function(t,e){var n=e.split("=");return n.push(!0),t[n[0].toLowerCase()]=n[1],t}),{}),c={proj:"projName",datum:"datumCode",rf:function(t){u.rf=parseFloat(t)},lat_0:function(t){u.lat0=t*r.zq},lat_1:function(t){u.lat1=t*r.zq},lat_2:function(t){u.lat2=t*r.zq},lat_ts:function(t){u.lat_ts=t*r.zq},lon_0:function(t){u.long0=t*r.zq},lon_1:function(t){u.long1=t*r.zq},lon_2:function(t){u.long2=t*r.zq},alpha:function(t){u.alpha=parseFloat(t)*r.zq},gamma:function(t){u.rectified_grid_angle=parseFloat(t)},lonc:function(t){u.longc=t*r.zq},x_0:function(t){u.x0=parseFloat(t)},y_0:function(t){u.y0=parseFloat(t)},k_0:function(t){u.k0=parseFloat(t)},k:function(t){u.k0=parseFloat(t)},a:function(t){u.a=parseFloat(t)},b:function(t){u.b=parseFloat(t)},r:function(t){u.a=u.b=parseFloat(t)},r_a:function(){u.R_A=!0},zone:function(t){u.zone=parseInt(t,10)},south:function(){u.utmSouth=!0},towgs84:function(t){u.datum_params=t.split(",").map((function(t){return parseFloat(t)}))},to_meter:function(t){u.to_meter=parseFloat(t)},units:function(t){u.units=t;var e=s(o,t);e&&(u.to_meter=e.to_meter)},from_greenwich:function(t){u.from_greenwich=t*r.zq},pm:function(t){var e=s(i,t);u.from_greenwich=(e||parseFloat(t))*r.zq},nadgrids:function(t){"@null"===t?u.datumCode="none":u.nadgrids=t},axis:function(t){var e="ewnsud";3===t.length&&-1!==e.indexOf(t.substr(0,1))&&-1!==e.indexOf(t.substr(1,1))&&-1!==e.indexOf(t.substr(2,1))&&(u.axis=t)},approx:function(){u.approx=!0}};for(e in l)n=l[e],e in c?"function"==typeof(a=c[e])?a(n):u[a]=n:u[e]=n;return"string"==typeof u.datumCode&&"WGS84"!==u.datumCode&&(u.datumCode=u.datumCode.toLowerCase()),u}var l=function(t){var e=new g(t);return e.output()},c=1,f=/\s/,h=/[A-Za-z]/,d=/[A-Za-z84_]/,p=/[,\]]/,m=/[\d\.E\-\+]/;function g(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=c}function y(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var r=e?{}:t,i=n.reduce((function(t,e){return v(e,t),t}),r);e&&(t[e]=i)}function v(t,e){if(Array.isArray(t)){var n=t.shift();if("PARAMETER"===n&&(n=t.shift()),1===t.length)return Array.isArray(t[0])?(e[n]={},void v(t[0],e[n])):void(e[n]=t[0]);if(t.length)if("TOWGS84"!==n){if("AXIS"===n)return n in e||(e[n]=[]),void e[n].push(t);var r;switch(Array.isArray(n)||(e[n]={}),n){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[n]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&v(t[2],e[n]));case"SPHEROID":case"ELLIPSOID":return e[n]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&v(t[3],e[n]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void y(e,n,t);default:for(r=-1;++r<t.length;)if(!Array.isArray(t[r]))return v(t,e[n]);return y(e,n,t)}}else e[n]=t;else e[n]=!0}else e[t]=!0}g.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;f.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case c:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},g.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(p.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},g.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=c)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=c,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},g.prototype.number=function(t){if(!m.test(t)){if(p.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},g.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},g.prototype.keyword=function(t){if(d.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=c)}if(!p.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},g.prototype.neutral=function(t){if(h.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(m.test(t))return this.word=t,void(this.state=3);if(!p.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},g.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function x(t){return.017453292519943295*t}function _(t){var e=l(t),n=e.shift(),r=e.shift();e.unshift(["name",r]),e.unshift(["type",n]);var i={};return v(e,i),function(t){if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",n=0,r=t.AXIS.length;n<r;++n){var i=[t.AXIS[n][0].toLowerCase(),t.AXIS[n][1].toLowerCase()];-1!==i[0].indexOf("north")||("y"===i[0]||"lat"===i[0])&&"north"===i[1]?e+="n":-1!==i[0].indexOf("south")||("y"===i[0]||"lat"===i[0])&&"south"===i[1]?e+="s":-1!==i[0].indexOf("east")||("x"===i[0]||"lon"===i[0])&&"east"===i[1]?e+="e":-1===i[0].indexOf("west")&&("x"!==i[0]&&"lon"!==i[0]||"west"!==i[1])||(e+="w")}2===e.length&&(e+="u"),3===e.length&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var o=t.GEOGCS;function a(e){return e*(t.to_meter||1)}"GEOGCS"===t.type&&(o=t),o&&(o.DATUM?t.datumCode=o.DATUM.name.toLowerCase():t.datumCode=o.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"!==t.datumCode&&"world_geodetic_system_1984"!==t.datumCode||("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),o.DATUM&&o.DATUM.SPHEROID&&(t.ellps=o.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=o.DATUM.SPHEROID.a,t.rf=parseFloat(o.DATUM.SPHEROID.rf,10)),o.DATUM&&o.DATUM.TOWGS84&&(t.datum_params=o.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",x],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",x],["x0","false_easting",a],["y0","false_northing",a],["long0","central_meridian",x],["lat0","latitude_of_origin",x],["lat0","standard_parallel_1",x],["lat1","standard_parallel_1",x],["lat2","standard_parallel_2",x],["azimuth","Azimuth"],["alpha","azimuth",x],["srsCode","name"]].forEach((function(e){return n=t,i=(r=e)[0],o=r[1],void(!(i in n)&&o in n&&(n[i]=n[o],3===r.length&&(n[i]=r[2](n[i]))));var n,r,i,o})),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName?!t.lat_ts&&t.lat0&&"Polar_Stereographic"===t.projName&&(t.lat_ts=t.lat0,t.lat0=x(t.lat0>0?90:-90)):(t.lat0=x(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(i),i}function b(t){var e=this;if(2===arguments.length){var n=arguments[1];"string"==typeof n?"+"===n.charAt(0)?b[t]=u(arguments[1]):b[t]=_(arguments[1]):b[t]=n}else if(1===arguments.length){if(Array.isArray(t))return t.map((function(t){Array.isArray(t)?b.apply(e,t):b(t)}));if("string"==typeof t){if(t in b)return b[t]}else"EPSG"in t?b["EPSG:"+t.EPSG]=t:"ESRI"in t?b["ESRI:"+t.ESRI]=t:"IAU2000"in t?b["IAU2000:"+t.IAU2000]=t:console.log(t);return}}!function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(b);var w=b;var M=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];var A=["3857","900913","3785","102113"];var T=function(t){if(!function(t){return"string"==typeof t}(t))return t;if(function(t){return t in w}(t))return w[t];if(function(t){return M.some((function(e){return t.indexOf(e)>-1}))}(t)){var e=_(t);if(function(t){var e=s(t,"authority");if(e){var n=s(e,"epsg");return n&&A.indexOf(n)>-1}}(e))return w["EPSG:3857"];var n=function(t){var e=s(t,"extension");if(e)return s(e,"proj4")}(e);return n?u(n):e}return function(t){return"+"===t[0]}(t)?u(t):void 0};function E(t,e){var n,r;if(t=t||{},!e)return t;for(r in e)void 0!==(n=e[r])&&(t[r]=n);return t}var C=n(2286),k=n(2848),S=[C.default,k.default],P={},O=[];function R(t,e){var n=O.length;return t.names?(O[n]=t,t.names.forEach((function(t){P[t.toLowerCase()]=n})),this):(console.log(e),!0)}var L={start:function(){S.forEach(R)},add:R,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==P[e]&&O[P[e]]?O[P[e]]:void 0}},I={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:6378249.2,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},D=I.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};I.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var N={};N.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},N.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},N.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},N.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},N.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},N.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},N.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},N.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},N.militargeographische_institut={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},N.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},N.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},N.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},N.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},N.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},N.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},N.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},N.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},N.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};var F=function(t,e,n,i,o,a,s){var u={};return u.datum_type=void 0===t||"none"===t?r.A1:r.xK,e&&(u.datum_params=e.map(parseFloat),0===u.datum_params[0]&&0===u.datum_params[1]&&0===u.datum_params[2]||(u.datum_type=r.a8),u.datum_params.length>3&&(0===u.datum_params[3]&&0===u.datum_params[4]&&0===u.datum_params[5]&&0===u.datum_params[6]||(u.datum_type=r.Y$,u.datum_params[3]*=r._3,u.datum_params[4]*=r._3,u.datum_params[5]*=r._3,u.datum_params[6]=u.datum_params[6]/1e6+1))),s&&(u.datum_type=r.G9,u.grids=s),u.a=n,u.b=i,u.es=o,u.ep2=a,u},z={};function B(t){if(0===t.length)return null;var e="@"===t[0];return e&&(t=t.slice(1)),"null"===t?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:z[t]||null,isNull:!1}}function j(t){return t/3600*Math.PI/180}function V(t,e,n){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,n)))}function q(t){return t.map((function(t){return[j(t.longitudeShift),j(t.latitudeShift)]}))}function G(t,e,n){return{name:V(t,e+8,e+16).trim(),parent:V(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,n),upperLatitude:t.getFloat64(e+88,n),lowerLongitude:t.getFloat64(e+104,n),upperLongitude:t.getFloat64(e+120,n),latitudeInterval:t.getFloat64(e+136,n),longitudeInterval:t.getFloat64(e+152,n),gridNodeCount:t.getInt32(e+168,n)}}function U(t,e,n,r){for(var i=e+176,o=[],a=0;a<n.gridNodeCount;a++){var s={latitudeShift:t.getFloat32(i+16*a,r),longitudeShift:t.getFloat32(i+16*a+4,r),latitudeAccuracy:t.getFloat32(i+16*a+8,r),longitudeAccuracy:t.getFloat32(i+16*a+12,r)};o.push(s)}return o}function H(t,e){if(!(this instanceof H))return new H(t);e=e||function(t){if(t)throw t};var n=T(t);if("object"==typeof n){var i=H.projections.get(n.projName);if(i){if(n.datumCode&&"none"!==n.datumCode){var o=s(N,n.datumCode);o&&(n.datum_params=n.datum_params||(o.towgs84?o.towgs84.split(","):null),n.ellps=o.ellipse,n.datumName=o.datumName?o.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84",n.lat1=n.lat1||n.lat0;var a,u,l,c,f,h,d,p=function(t,e,n,i,o){if(!t){var a=s(I,i);a||(a=D),t=a.a,e=a.b,n=a.rf}return n&&!e&&(e=(1-1/n)*t),(0===n||Math.abs(t-e)<r.H0)&&(o=!0,e=t),{a:t,b:e,rf:n,sphere:o}}(n.a,n.b,n.rf,n.ellps,n.sphere),m=(a=p.a,u=p.b,p.rf,l=n.R_A,h=((c=a*a)-(f=u*u))/c,d=0,l?(c=(a*=1-h*(r.bA+h*(r.Q1+h*r.ej)))*a,h=0):d=Math.sqrt(h),{es:h,e:d,ep2:(c-f)/f}),g=function(t){return void 0===t?null:t.split(",").map(B)}(n.nadgrids),y=n.datum||F(n.datumCode,n.datum_params,p.a,p.b,m.es,m.ep2,g);E(this,n),E(this,i),this.a=p.a,this.b=p.b,this.rf=p.rf,this.sphere=p.sphere,this.es=m.es,this.e=m.e,this.ep2=m.ep2,this.datum=y,this.init(),e(null,this)}else e("Could not get projection name from: "+t)}else e("Could not parse to valid json: "+t)}H.projections=L,H.projections.start();var W=H,X=n(9160),K=n(737);function Q(t){return t===r.a8||t===r.Y$}function Y(t,e,n){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;var i={x:-n.x,y:n.y},o={x:Number.NaN,y:Number.NaN},a=[];t:for(var s=0;s<t.grids.length;s++){var u=t.grids[s];if(a.push(u.name),u.isNull){o=i;break}if(u.mandatory,null!==u.grid)for(var l=u.grid.subgrids,c=0,f=l.length;c<f;c++){var h=l[c],d=(Math.abs(h.del[1])+Math.abs(h.del[0]))/1e4,p=h.ll[0]-d,m=h.ll[1]-d,g=h.ll[0]+(h.lim[0]-1)*h.del[0]+d,y=h.ll[1]+(h.lim[1]-1)*h.del[1]+d;if(!(m>i.y||p>i.x||y<i.y||g<i.x)&&(o=$(i,e,h),!isNaN(o.x)))break t}else if(u.mandatory)return console.log("Unable to find mandatory grid '"+u.name+"'"),-1}return isNaN(o.x)?(console.log("Failed to find a grid shift table for location '"+-i.x*r.dX+" "+i.y*r.dX+" tried: '"+a+"'"),-1):(n.x=-o.x,n.y=o.y,0)}function $(t,e,n){var r={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return r;var i={x:t.x,y:t.y};i.x-=n.ll[0],i.y-=n.ll[1],i.x=(0,K.A)(i.x-Math.PI)+Math.PI;var o=Z(i,n);if(e){if(isNaN(o.x))return r;o.x=i.x-o.x,o.y=i.y-o.y;var a,s,u=9;do{if(s=Z(o,n),isNaN(s.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}a={x:i.x-(s.x+o.x),y:i.y-(s.y+o.y)},o.x+=a.x,o.y+=a.y}while(u--&&Math.abs(a.x)>1e-12&&Math.abs(a.y)>1e-12);if(u<0)return console.log("Inverse grid shift iterator failed to converge."),r;r.x=(0,K.A)(o.x+n.ll[0]),r.y=o.y+n.ll[1]}else isNaN(o.x)||(r.x=t.x+o.x,r.y=t.y+o.y);return r}function Z(t,e){var n,r={x:t.x/e.del[0],y:t.y/e.del[1]},i=Math.floor(r.x),o=Math.floor(r.y),a=r.x-1*i,s=r.y-1*o,u={x:Number.NaN,y:Number.NaN};if(i<0||i>=e.lim[0])return u;if(o<0||o>=e.lim[1])return u;n=o*e.lim[0]+i;var l=e.cvs[n][0],c=e.cvs[n][1];n++;var f=e.cvs[n][0],h=e.cvs[n][1];n+=e.lim[0];var d=e.cvs[n][0],p=e.cvs[n][1];n--;var m=e.cvs[n][0],g=e.cvs[n][1],y=a*s,v=a*(1-s),x=(1-a)*(1-s),_=(1-a)*s;return u.x=x*l+v*f+_*m+y*d,u.y=x*c+v*h+_*g+y*p,u}function J(t,e,n){var r,i,o,a=n.x,s=n.y,u=n.z||0,l={};for(o=0;o<3;o++)if(!e||2!==o||void 0!==n.z)switch(0===o?(r=a,i=-1!=="ew".indexOf(t.axis[o])?"x":"y"):1===o?(r=s,i=-1!=="ns".indexOf(t.axis[o])?"y":"x"):(r=u,i="z"),t.axis[o]){case"e":case"n":l[i]=r;break;case"w":case"s":l[i]=-r;break;case"u":void 0!==n[i]&&(l.z=r);break;case"d":void 0!==n[i]&&(l.z=-r);break;default:return null}return l}function tt(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function et(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function nt(t,e,n,i){var o,a=void 0!==(n=Array.isArray(n)?tt(n):{x:n.x,y:n.y,z:n.z,m:n.m}).z;if(function(t){et(t.x),et(t.y)}(n),t.datum&&e.datum&&function(t,e){return(t.datum.datum_type===r.a8||t.datum.datum_type===r.Y$||t.datum.datum_type===r.G9)&&"WGS84"!==e.datumCode||(e.datum.datum_type===r.a8||e.datum.datum_type===r.Y$||e.datum.datum_type===r.G9)&&"WGS84"!==t.datumCode}(t,e)&&(n=nt(t,o=new W("WGS84"),n,i),t=o),i&&"enu"!==t.axis&&(n=J(t,!1,n)),"longlat"===t.projName)n={x:n.x*r.zq,y:n.y*r.zq,z:n.z||0};else if(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter,z:n.z||0}),!(n=t.inverse(n)))return;if(t.from_greenwich&&(n.x+=t.from_greenwich),n=function(t,e,n){if((0,X.OI)(t,e))return n;if(t.datum_type===r.A1||e.datum_type===r.A1)return n;var i=t.a,o=t.es;if(t.datum_type===r.G9){if(0!==Y(t,!1,n))return;i=r.bv,o=r.gS}var a=e.a,s=e.b,u=e.es;if(e.datum_type===r.G9&&(a=r.bv,s=r.zp,u=r.gS),o===u&&i===a&&!Q(t.datum_type)&&!Q(e.datum_type))return n;if(n=(0,X.jX)(n,o,i),Q(t.datum_type)&&(n=(0,X.mj)(n,t.datum_type,t.datum_params)),Q(e.datum_type)&&(n=(0,X.Fs)(n,e.datum_type,e.datum_params)),n=(0,X.Rw)(n,u,a,s),e.datum_type===r.G9&&0!==Y(e,!0,n))return;return n}(t.datum,e.datum,n),n)return e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y,z:n.z||0}),"longlat"===e.projName?n={x:n.x*r.dX,y:n.y*r.dX,z:n.z||0}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter,z:n.z||0})),i&&"enu"!==e.axis?J(e,!0,n):(n&&!a&&delete n.z,n)}var rt=W("WGS84");function it(t,e,n,r){var i,o,a;return Array.isArray(n)?(i=nt(t,e,n,r)||{x:NaN,y:NaN},n.length>2?void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name?"number"==typeof i.z?[i.x,i.y,i.z].concat(n.slice(3)):[i.x,i.y,n[2]].concat(n.slice(3)):[i.x,i.y].concat(n.slice(2)):[i.x,i.y]):(o=nt(t,e,n,r),2===(a=Object.keys(n)).length||a.forEach((function(r){if(void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name){if("x"===r||"y"===r||"z"===r)return}else if("x"===r||"y"===r)return;o[r]=n[r]})),o)}function ot(t){return t instanceof W?t:t.oProj?t.oProj:W(t)}var at=function(t,e,n){t=ot(t);var r,i=!1;return void 0===e?(e=t,t=rt,i=!0):(void 0!==e.x||Array.isArray(e))&&(n=e,e=t,t=rt,i=!0),e=ot(e),n?it(t,e,n):(r={forward:function(n,r){return it(t,e,n,r)},inverse:function(n,r){return it(e,t,n,r)}},i&&(r.oProj=e),r)},st="AJSAJS",ut="AFAFAF",lt=65,ct=73,ft=79,ht=86,dt=90,pt={forward:mt,inverse:function(t){var e=xt(wt(t.toUpperCase()));if(e.lat&&e.lon)return[e.lon,e.lat,e.lon,e.lat];return[e.left,e.bottom,e.right,e.top]},toPoint:gt};function mt(t,e){return e=e||5,function(t,e){var n="00000"+t.easting,r="00000"+t.northing;return t.zoneNumber+t.zoneLetter+(d=t.easting,p=t.northing,m=t.zoneNumber,g=bt(m),y=Math.floor(d/1e5),v=Math.floor(p/1e5)%20,i=y,o=v,a=g,s=a-1,u=st.charCodeAt(s),l=ut.charCodeAt(s),c=u+i-1,f=l+o,h=!1,c>dt&&(c=c-dt+lt-1,h=!0),(c===ct||u<ct&&c>ct||(c>ct||u<ct)&&h)&&c++,(c===ft||u<ft&&c>ft||(c>ft||u<ft)&&h)&&++c===ct&&c++,c>dt&&(c=c-dt+lt-1),f>ht?(f=f-ht+lt-1,h=!0):h=!1,(f===ct||l<ct&&f>ct||(f>ct||l<ct)&&h)&&f++,(f===ft||l<ft&&f>ft||(f>ft||l<ft)&&h)&&++f===ct&&f++,f>ht&&(f=f-ht+lt-1),String.fromCharCode(c)+String.fromCharCode(f))+n.substr(n.length-5,e)+r.substr(r.length-5,e);var i,o,a,s,u,l,c,f,h;var d,p,m,g,y,v}(function(t){var e,n,r,i,o,a,s,u,l=t.lat,c=t.lon,f=6378137,h=.00669438,d=.9996,p=yt(l),m=yt(c);u=Math.floor((c+180)/6)+1,180===c&&(u=60);l>=56&&l<64&&c>=3&&c<12&&(u=32);l>=72&&l<84&&(c>=0&&c<9?u=31:c>=9&&c<21?u=33:c>=21&&c<33?u=35:c>=33&&c<42&&(u=37));s=yt(6*(u-1)-180+3),e=h/(1-h),n=f/Math.sqrt(1-h*Math.sin(p)*Math.sin(p)),r=Math.tan(p)*Math.tan(p),i=e*Math.cos(p)*Math.cos(p),o=Math.cos(p)*(m-s),a=f*((1-h/4-3*h*h/64-5*h*h*h/256)*p-(3*h/8+3*h*h/32+45*h*h*h/1024)*Math.sin(2*p)+(15*h*h/256+45*h*h*h/1024)*Math.sin(4*p)-35*h*h*h/3072*Math.sin(6*p));var g=d*n*(o+(1-r+i)*o*o*o/6+(5-18*r+r*r+72*i-58*e)*o*o*o*o*o/120)+5e5,y=d*(a+n*Math.tan(p)*(o*o/2+(5-r+9*i+4*i*i)*o*o*o*o/24+(61-58*r+r*r+600*i-330*e)*o*o*o*o*o*o/720));l<0&&(y+=1e7);return{northing:Math.round(y),easting:Math.round(g),zoneNumber:u,zoneLetter:_t(l)}}({lat:t[1],lon:t[0]}),e)}function gt(t){var e=xt(wt(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function yt(t){return t*(Math.PI/180)}function vt(t){return t/Math.PI*180}function xt(t){var e=t.northing,n=t.easting,r=t.zoneLetter,i=t.zoneNumber;if(i<0||i>60)return null;var o,a,s,u,l,c,f,h,d,p=.9996,m=6378137,g=.00669438,y=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),v=n-5e5,x=e;r<"N"&&(x-=1e7),f=6*(i-1)-180+3,o=.006739496752268451,d=(h=x/p/6367449.145945056)+(3*y/2-27*y*y*y/32)*Math.sin(2*h)+(21*y*y/16-55*y*y*y*y/32)*Math.sin(4*h)+151*y*y*y/96*Math.sin(6*h),a=m/Math.sqrt(1-g*Math.sin(d)*Math.sin(d)),s=Math.tan(d)*Math.tan(d),u=o*Math.cos(d)*Math.cos(d),l=.99330562*m/Math.pow(1-g*Math.sin(d)*Math.sin(d),1.5),c=v/(a*p);var _=d-a*Math.tan(d)/l*(c*c/2-(5+3*s+10*u-4*u*u-9*o)*c*c*c*c/24+(61+90*s+298*u+45*s*s-1.6983531815716497-3*u*u)*c*c*c*c*c*c/720);_=vt(_);var b,w=(c-(1+2*s+u)*c*c*c/6+(5-2*u+28*s-3*u*u+8*o+24*s*s)*c*c*c*c*c/120)/Math.cos(d);if(w=f+vt(w),t.accuracy){var M=xt({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});b={top:M.lat,right:M.lon,bottom:_,left:w}}else b={lat:_,lon:w};return b}function _t(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function bt(t){var e=t%6;return 0===e&&(e=6),e}function wt(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,n=t.length,r=null,i="",o=0;!/[A-Z]/.test(e=t.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+t;i+=e,o++}var a=parseInt(i,10);if(0===o||o+3>n)throw"MGRSPoint bad conversion from: "+t;var s=t.charAt(o++);if(s<="A"||"B"===s||"Y"===s||s>="Z"||"I"===s||"O"===s)throw"MGRSPoint zone letter "+s+" not handled: "+t;r=t.substring(o,o+=2);for(var u=bt(a),l=function(t,e){var n=st.charCodeAt(e-1),r=1e5,i=!1;for(;n!==t.charCodeAt(0);){if(++n===ct&&n++,n===ft&&n++,n>dt){if(i)throw"Bad character: "+t;n=lt,i=!0}r+=1e5}return r}(r.charAt(0),u),c=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;var n=ut.charCodeAt(e-1),r=0,i=!1;for(;n!==t.charCodeAt(0);){if(++n===ct&&n++,n===ft&&n++,n>ht){if(i)throw"Bad character: "+t;n=lt,i=!0}r+=1e5}return r}(r.charAt(1),u);c<Mt(s);)c+=2e6;var f=n-o;if(f%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var h,d,p,m=f/2,g=0,y=0;return m>0&&(h=1e5/Math.pow(10,m),d=t.substring(o,o+m),g=parseFloat(d)*h,p=t.substring(o+m),y=parseFloat(p)*h),{easting:g+l,northing:y+c,zoneLetter:s,zoneNumber:a,accuracy:h}}function Mt(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function At(t,e,n){if(!(this instanceof At))return new At(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var r=t.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}At.fromMGRS=function(t){return new At(gt(t))},At.prototype.toMGRS=function(t){return mt([this.x,this.y],t)};var Tt=At,Et=n(5602),Ct=n(994),kt=n(6748),St=n(865),Pt=n(688),Ot=n(988),Rt=n(7475),Lt=n(9269),It=n(6507),Dt=n(529),Nt=n(7406),Ft=n(5458),zt=n(9462),Bt=n(4101),jt=n(4256),Vt=n(2169),qt=n(6407),Gt=n(5157),Ut=n(9006),Ht=n(5967),Wt=n(7968),Xt=n(3211),Kt=n(8980),Qt=n(8181),Yt=n(5722),$t=n(1295),Zt=n(4876),Jt=n(7127),te=n(469),ee=n(7129),ne=n(5789);at.defaultDatum="WGS84",at.Proj=W,at.WGS84=new at.Proj("WGS84"),at.Point=Tt,at.toPoint=tt,at.defs=w,at.nadgrid=function(t,e){var n=new DataView(e),r=function(t){var e=t.getInt32(8,!1);if(11===e)return!1;e=t.getInt32(8,!0),11!==e&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian");return!0}(n),i=function(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:V(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}(n,r),o=function(t,e,n){for(var r=176,i=[],o=0;o<e.nSubgrids;o++){var a=G(t,r,n),s=U(t,r,a,n),u=Math.round(1+(a.upperLongitude-a.lowerLongitude)/a.longitudeInterval),l=Math.round(1+(a.upperLatitude-a.lowerLatitude)/a.latitudeInterval);i.push({ll:[j(a.lowerLongitude),j(a.lowerLatitude)],del:[j(a.longitudeInterval),j(a.latitudeInterval)],lim:[u,l],count:a.gridNodeCount,cvs:q(s)}),r+=176+16*a.gridNodeCount}return i}(n,i,r),a={header:i,subgrids:o};return z[t]=a,a},at.transform=nt,at.mgrs=pt,at.version="__VERSION__",function(t){t.Proj.projections.add(Et.default),t.Proj.projections.add(Ct.default),t.Proj.projections.add(kt.default),t.Proj.projections.add(St.default),t.Proj.projections.add(Pt.default),t.Proj.projections.add(Ot.default),t.Proj.projections.add(Rt.default),t.Proj.projections.add(Lt.default),t.Proj.projections.add(It.default),t.Proj.projections.add(Dt.default),t.Proj.projections.add(Nt.default),t.Proj.projections.add(Ft.default),t.Proj.projections.add(zt.default),t.Proj.projections.add(Bt.default),t.Proj.projections.add(jt.default),t.Proj.projections.add(Vt.default),t.Proj.projections.add(qt.default),t.Proj.projections.add(Gt.default),t.Proj.projections.add(Ut.default),t.Proj.projections.add(Ht.default),t.Proj.projections.add(Wt.default),t.Proj.projections.add(Xt.default),t.Proj.projections.add(Kt.default),t.Proj.projections.add(Qt.default),t.Proj.projections.add(Yt.default),t.Proj.projections.add($t.default),t.Proj.projections.add(Zt.default),t.Proj.projections.add(Jt.default),t.Proj.projections.add(te.default),t.Proj.projections.add(ee.default),t.Proj.projections.add(ne.default)}(at);var re=at},5458:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return l},init:function(){return u},inverse:function(){return c},names:function(){return h},phi1z:function(){return f}});var r=n(444),i=n(7200),o=n(737),a=n(8609),s=n(2556);function u(){Math.abs(this.lat1+this.lat2)<s.H0||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=(0,r.A)(this.e3,this.sin_po,this.cos_po),this.qs1=(0,i.A)(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=(0,r.A)(this.e3,this.sin_po,this.cos_po),this.qs2=(0,i.A)(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=(0,i.A)(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>s.H0?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function l(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var r=(0,i.A)(this.e3,this.sin_phi),a=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,s=this.ns0*(0,o.A)(e-this.long0),u=a*Math.sin(s)+this.x0,l=this.rh-a*Math.cos(s)+this.y0;return t.x=u,t.y=l,t}function c(t){var e,n,r,i,a,s;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),r=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),r=-1),i=0,0!==e&&(i=Math.atan2(r*t.x,r*t.y)),r=e*this.ns0/this.a,this.sphere?s=Math.asin((this.c-r*r)/(2*this.ns0)):(n=(this.c-r*r)/this.ns0,s=this.phi1z(this.e3,n)),a=(0,o.A)(i/this.ns0+this.long0),t.x=a,t.y=s,t}function f(t,e){var n,r,i,o,u=(0,a.A)(.5*e);if(t<s.H0)return u;for(var l=t*t,c=1;c<=25;c++)if(u+=o=.5*(i=1-(r=t*(n=Math.sin(u)))*r)*i/Math.cos(u)*(e/(1-l)-n/i+.5/t*Math.log((1-r)/(1+r))),Math.abs(o)<=1e-7)return u;return null}var h=["Albers_Conic_Equal_Area","Albers","aea"];e.default={init:u,forward:l,inverse:c,names:h,phi1z:f}},8980:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return p},init:function(){return d},inverse:function(){return m},names:function(){return g}});var r=n(737),i=n(2556),o=n(4037),a=n(8193),s=n(9686),u=n(7711),l=n(2060),c=n(7973),f=n(8609),h=n(6592);function d(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function p(t){var e,n,f,h,d,p,m,g,y,v,x,_,b,w,M,A,T,E,C,k,S,P,O=t.x,R=t.y,L=Math.sin(t.y),I=Math.cos(t.y),D=(0,r.A)(O-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=i.H0?(t.x=this.x0+this.a*(i.sK-R)*Math.sin(D),t.y=this.y0-this.a*(i.sK-R)*Math.cos(D),t):Math.abs(this.sin_p12+1)<=i.H0?(t.x=this.x0+this.a*(i.sK+R)*Math.sin(D),t.y=this.y0+this.a*(i.sK+R)*Math.cos(D),t):(E=this.sin_p12*L+this.cos_p12*I*Math.cos(D),T=(A=Math.acos(E))?A/Math.sin(A):1,t.x=this.x0+this.a*T*I*Math.sin(D),t.y=this.y0+this.a*T*(this.cos_p12*L-this.sin_p12*I*Math.cos(D)),t):(e=(0,a.A)(this.es),n=(0,s.A)(this.es),f=(0,u.A)(this.es),h=(0,l.A)(this.es),Math.abs(this.sin_p12-1)<=i.H0?(d=this.a*(0,o.A)(e,n,f,h,i.sK),p=this.a*(0,o.A)(e,n,f,h,R),t.x=this.x0+(d-p)*Math.sin(D),t.y=this.y0-(d-p)*Math.cos(D),t):Math.abs(this.sin_p12+1)<=i.H0?(d=this.a*(0,o.A)(e,n,f,h,i.sK),p=this.a*(0,o.A)(e,n,f,h,R),t.x=this.x0+(d+p)*Math.sin(D),t.y=this.y0+(d+p)*Math.cos(D),t):(m=L/I,g=(0,c.A)(this.a,this.e,this.sin_p12),y=(0,c.A)(this.a,this.e,L),v=Math.atan((1-this.es)*m+this.es*g*this.sin_p12/(y*I)),C=0===(x=Math.atan2(Math.sin(D),this.cos_p12*Math.tan(v)-this.sin_p12*Math.cos(D)))?Math.asin(this.cos_p12*Math.sin(v)-this.sin_p12*Math.cos(v)):Math.abs(Math.abs(x)-Math.PI)<=i.H0?-Math.asin(this.cos_p12*Math.sin(v)-this.sin_p12*Math.cos(v)):Math.asin(Math.sin(D)*Math.cos(v)/Math.sin(x)),_=this.e*this.sin_p12/Math.sqrt(1-this.es),A=g*C*(1-(k=C*C)*(M=(b=this.e*this.cos_p12*Math.cos(x)/Math.sqrt(1-this.es))*b)*(1-M)/6+(S=k*C)/8*(w=_*b)*(1-2*M)+(P=S*C)/120*(M*(4-7*M)-3*_*_*(1-7*M))-P*C/48*w),t.x=this.x0+A*Math.sin(x),t.y=this.y0+A*Math.cos(x),t))}function m(t){var e,n,d,p,m,g,y,v,x,_,b,w,M,A,T,E,C,k,S,P,O,R,L,I;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*i.sK*this.a)return;return n=e/this.a,d=Math.sin(n),p=Math.cos(n),m=this.long0,Math.abs(e)<=i.H0?g=this.lat0:(g=(0,f.A)(p*this.sin_p12+t.y*d*this.cos_p12/e),y=Math.abs(this.lat0)-i.sK,m=Math.abs(y)<=i.H0?this.lat0>=0?(0,r.A)(this.long0+Math.atan2(t.x,-t.y)):(0,r.A)(this.long0-Math.atan2(-t.x,t.y)):(0,r.A)(this.long0+Math.atan2(t.x*d,e*this.cos_p12*p-t.y*this.sin_p12*d))),t.x=m,t.y=g,t}return v=(0,a.A)(this.es),x=(0,s.A)(this.es),_=(0,u.A)(this.es),b=(0,l.A)(this.es),Math.abs(this.sin_p12-1)<=i.H0?(M=(w=this.a*(0,o.A)(v,x,_,b,i.sK))-(e=Math.sqrt(t.x*t.x+t.y*t.y)),g=(0,h.A)(M/this.a,v,x,_,b),m=(0,r.A)(this.long0+Math.atan2(t.x,-1*t.y)),t.x=m,t.y=g,t):Math.abs(this.sin_p12+1)<=i.H0?(w=this.a*(0,o.A)(v,x,_,b,i.sK),M=(e=Math.sqrt(t.x*t.x+t.y*t.y))-w,g=(0,h.A)(M/this.a,v,x,_,b),m=(0,r.A)(this.long0+Math.atan2(t.x,t.y)),t.x=m,t.y=g,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),E=Math.atan2(t.x,t.y),A=(0,c.A)(this.a,this.e,this.sin_p12),C=Math.cos(E),S=-(k=this.e*this.cos_p12*C)*k/(1-this.es),P=3*this.es*(1-S)*this.sin_p12*this.cos_p12*C/(1-this.es),L=1-S*(R=(O=e/A)-S*(1+S)*Math.pow(O,3)/6-P*(1+3*S)*Math.pow(O,4)/24)*R/2-O*R*R*R/6,T=Math.asin(this.sin_p12*Math.cos(R)+this.cos_p12*Math.sin(R)*C),m=(0,r.A)(this.long0+Math.asin(Math.sin(E)*Math.sin(R)/Math.cos(T))),I=Math.sin(T),g=Math.atan2((I-this.es*L*this.sin_p12)*Math.tan(T),I*(1-this.es)),t.x=m,t.y=g,t)}var g=["Azimuthal_Equidistant","aeqd"];e.default={init:d,forward:p,inverse:m,names:g}},5789:function(t,e,n){"use strict";n.r(e),n.d(e,{init:function(){return f},names:function(){return g}});var r=n(5473),i=n(737),o=n(1708),a=n(6366),s=n(3220),u=n(2092),l=n(2556),c=1e-10;function f(){var t;if(this.phi1=this.lat1,Math.abs(this.phi1)<c)throw new Error;this.es?(this.en=(0,a.A)(this.es),this.m1=(0,u.A)(this.phi1,this.am1=Math.sin(this.phi1),t=Math.cos(this.phi1),this.en),this.am1=t/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=d,this.forward=h):(Math.abs(this.phi1)+c>=l.sK?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=m,this.forward=p)}function h(t){var e,n,r,o=(0,i.A)(t.x-(this.long0||0)),a=t.y;return e=this.am1+this.m1-(0,u.A)(a,n=Math.sin(a),r=Math.cos(a),this.en),n=r*o/(e*Math.sqrt(1-this.es*n*n)),t.x=e*Math.sin(n),t.y=this.am1-e*Math.cos(n),t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function d(t){var e,n,a,u;if(t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a,n=(0,o.A)(t.x,t.y=this.am1-t.y),u=(0,s.A)(this.am1+this.m1-n,this.es,this.en),(e=Math.abs(u))<l.sK)e=Math.sin(u),a=n*Math.atan2(t.x,t.y)*Math.sqrt(1-this.es*e*e)/Math.cos(u);else{if(!(Math.abs(e-l.sK)<=c))throw new Error;a=0}return t.x=(0,i.A)(a+(this.long0||0)),t.y=(0,r.A)(u),t}function p(t){var e,n,r=(0,i.A)(t.x-(this.long0||0)),o=t.y;return n=this.cphi1+this.phi1-o,Math.abs(n)>c?(t.x=n*Math.sin(e=r*Math.cos(o)/n),t.y=this.cphi1-n*Math.cos(e)):t.x=t.y=0,t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function m(t){var e,n;t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var a=(0,o.A)(t.x,t.y=this.cphi1-t.y);if(n=this.cphi1+this.phi1-a,Math.abs(n)>l.sK)throw new Error;return e=Math.abs(Math.abs(n)-l.sK)<=c?0:a*Math.atan2(t.x,t.y)/Math.cos(n),t.x=(0,i.A)(e+(this.long0||0)),t.y=(0,r.A)(n),t}var g=["bonne","Bonne (Werner lat_1=90)"];e.default={init:f,names:g}},529:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return p},init:function(){return d},inverse:function(){return m},names:function(){return g}});var r=n(4037),i=n(8193),o=n(9686),a=n(7711),s=n(2060),u=n(7973),l=n(737),c=n(5473),f=n(6592),h=n(2556);function d(){this.sphere||(this.e0=(0,i.A)(this.es),this.e1=(0,o.A)(this.es),this.e2=(0,a.A)(this.es),this.e3=(0,s.A)(this.es),this.ml0=this.a*(0,r.A)(this.e0,this.e1,this.e2,this.e3,this.lat0))}function p(t){var e,n,i=t.x,o=t.y;if(i=(0,l.A)(i-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(o)*Math.sin(i)),n=this.a*(Math.atan2(Math.tan(o),Math.cos(i))-this.lat0);else{var a=Math.sin(o),s=Math.cos(o),c=(0,u.A)(this.a,this.e,a),f=Math.tan(o)*Math.tan(o),h=i*Math.cos(o),d=h*h,p=this.es*s*s/(1-this.es);e=c*h*(1-d*f*(1/6-(8-f+8*p)*d/120)),n=this.a*(0,r.A)(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+c*a/s*d*(.5+(5-f+6*p)*d/24)}return t.x=e+this.x0,t.y=n+this.y0,t}function m(t){t.x-=this.x0,t.y-=this.y0;var e,n,r=t.x/this.a,i=t.y/this.a;if(this.sphere){var o=i+this.lat0;e=Math.asin(Math.sin(o)*Math.cos(r)),n=Math.atan2(Math.tan(r),Math.cos(o))}else{var a=this.ml0/this.a+i,s=(0,f.A)(a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(s)-h.sK)<=h.H0)return t.x=this.long0,t.y=h.sK,i<0&&(t.y*=-1),t;var d=(0,u.A)(this.a,this.e,Math.sin(s)),p=d*d*d/this.a/this.a*(1-this.es),m=Math.pow(Math.tan(s),2),g=r*this.a/d,y=g*g;e=s-d*Math.tan(s)/p*g*g*(.5-(1+3*m)*g*g/24),n=g*(1-y*(m/3+(1+3*m)*m*y/15))/Math.cos(s)}return t.x=(0,l.A)(n+this.long0),t.y=(0,c.A)(e),t}var g=["Cassini","Cassini_Soldner","cass"];e.default={init:d,forward:p,inverse:m,names:g}},4101:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return f},forward:function(){return u},init:function(){return s},inverse:function(){return l},names:function(){return c}});var r=n(737),i=n(7200),o=n(444),a=n(2556);function s(){this.sphere||(this.k0=(0,o.A)(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function u(t){var e,n,o=t.x,a=t.y,s=(0,r.A)(o-this.long0);if(this.sphere)e=this.x0+this.a*s*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(a)/Math.cos(this.lat_ts);else{var u=(0,i.A)(this.e,Math.sin(a));e=this.x0+this.a*this.k0*s,n=this.y0+this.a*u*.5/this.k0}return t.x=e,t.y=n,t}function l(t){var e,n;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=(0,r.A)(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=function(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*a.sK:a.sK;for(var r,i,o,s,u=Math.asin(.5*e),l=0;l<30;l++)if(i=Math.sin(u),o=Math.cos(u),s=t*i,u+=r=Math.pow(1-s*s,2)/(2*o)*(e/(1-t*t)-i/(1-s*s)+.5/t*Math.log((1-s)/(1+s))),Math.abs(r)<=1e-10)return u;return NaN}(this.e,2*t.y*this.k0/this.a),e=(0,r.A)(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=n,t}var c=["cea"],f={init:s,forward:u,inverse:l,names:c}},4256:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return a},init:function(){return o},inverse:function(){return s},names:function(){return u}});var r=n(737),i=n(5473);function o(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function a(t){var e=t.x,n=t.y,o=(0,r.A)(e-this.long0),a=(0,i.A)(n-this.lat0);return t.x=this.x0+this.a*o*this.rc,t.y=this.y0+this.a*a,t}function s(t){var e=t.x,n=t.y;return t.x=(0,r.A)(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=(0,i.A)(this.lat0+(n-this.y0)/this.a),t}var u=["Equirectangular","Equidistant_Cylindrical","eqc"];e.default={init:o,forward:a,inverse:s,names:u}},7968:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return p},init:function(){return d},inverse:function(){return m},names:function(){return g}});var r=n(8193),i=n(9686),o=n(7711),a=n(2060),s=n(444),u=n(4037),l=n(737),c=n(5473),f=n(6592),h=n(2556);function d(){Math.abs(this.lat1+this.lat2)<h.H0||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=(0,r.A)(this.es),this.e1=(0,i.A)(this.es),this.e2=(0,o.A)(this.es),this.e3=(0,a.A)(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=(0,s.A)(this.e,this.sinphi,this.cosphi),this.ml1=(0,u.A)(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<h.H0?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=(0,s.A)(this.e,this.sinphi,this.cosphi),this.ml2=(0,u.A)(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=(0,u.A)(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function p(t){var e,n=t.x,r=t.y;if(this.sphere)e=this.a*(this.g-r);else{var i=(0,u.A)(this.e0,this.e1,this.e2,this.e3,r);e=this.a*(this.g-i)}var o=this.ns*(0,l.A)(n-this.long0),a=this.x0+e*Math.sin(o),s=this.y0+this.rh-e*Math.cos(o);return t.x=a,t.y=s,t}function m(t){var e,n,r,i;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var o=0;if(0!==n&&(o=Math.atan2(e*t.x,e*t.y)),this.sphere)return i=(0,l.A)(this.long0+o/this.ns),r=(0,c.A)(this.g-n/this.a),t.x=i,t.y=r,t;var a=this.g-n/this.a;return r=(0,f.A)(a,this.e0,this.e1,this.e2,this.e3),i=(0,l.A)(this.long0+o/this.ns),t.x=i,t.y=r,t}var g=["Equidistant_Conic","eqdc"];e.default={init:d,forward:p,inverse:m,names:g}},7129:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return c},init:function(){return l},inverse:function(){return f},names:function(){return h}});var r=n(737),i=1.340264,o=-.081106,a=893e-6,s=.003796,u=Math.sqrt(3)/2;function l(){this.es=0,this.long0=void 0!==this.long0?this.long0:0}function c(t){var e=(0,r.A)(t.x-this.long0),n=t.y,l=Math.asin(u*Math.sin(n)),c=l*l,f=c*c*c;return t.x=e*Math.cos(l)/(u*(i+3*o*c+f*(7*a+9*s*c))),t.y=l*(i+o*c+f*(a+s*c)),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function f(t){t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a;var e,n,l,c,f=t.y;for(c=0;c<12&&(f-=l=(f*(i+o*(e=f*f)+(n=e*e*e)*(a+s*e))-t.y)/(i+3*o*e+n*(7*a+9*s*e)),!(Math.abs(l)<1e-9));++c);return n=(e=f*f)*e*e,t.x=u*t.x*(i+3*o*e+n*(7*a+9*s*e))/Math.cos(f),t.y=Math.asin(Math.sin(f)/u),t.x=(0,r.A)(t.x+this.long0),t}var h=["eqearth","Equal Earth","Equal_Earth"];e.default={init:l,forward:c,inverse:f,names:h}},3667:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return o},init:function(){return i},inverse:function(){return a},names:function(){return s}});var r=n(737);function i(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0}function o(t){var e=t.x,n=t.y,i=(0,r.A)(e-this.long0),o=this.x0+this.a*i*Math.cos(this.lat0),a=this.y0+this.a*n;return this.t1=o,this.t2=Math.cos(this.lat0),t.x=o,t.y=a,t}function a(t){t.x-=this.x0,t.y-=this.y0;var e=t.y/this.a,n=(0,r.A)(this.long0+t.x/(this.a*Math.cos(this.lat0)));t.x=n,t.y=e}var s=["equi"];e.default={init:i,forward:o,inverse:a,names:s}},994:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return m},forward:function(){return h},init:function(){return f},inverse:function(){return d},names:function(){return p}});var r=n(5602),i=n(3882),o=n(1708);function a(t){var e=Math.abs(t);return e=function(t){var e=1+t,n=e-1;return 0===n?t:t*Math.log(e)/n}(e*(1+e/((0,o.A)(1,e)+1))),t<0?-e:e}function s(t,e){for(var n,r=2*Math.cos(2*e),i=t.length-1,o=t[i],a=0;--i>=0;)n=r*o-a+t[i],a=o,o=n;return e+n*Math.sin(2*e)}var u=n(4885);function l(t,e,n){for(var r,o,a=Math.sin(e),s=Math.cos(e),l=(0,i.A)(n),c=(0,u.A)(n),f=2*s*c,h=-2*a*l,d=t.length-1,p=t[d],m=0,g=0,y=0;--d>=0;)r=g,o=m,p=f*(g=p)-r-h*(m=y)+t[d],y=h*g-o+f*m;return[(f=a*c)*p-(h=s*l)*y,f*y+h*p]}var c=n(737);function f(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(r.default.init.apply(this),this.forward=r.default.forward,this.inverse=r.default.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),n*=e,this.cgb[1]=n*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n*=e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),n*=e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(e*(-24832/14175)-2.4)),n*=e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n*=e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),n*=e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n*=e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n*=e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n*=e,this.utg[5]=n*(-20648693/638668800),this.gtu[5]=.6650675310896665*n;var i=s(this.cbg,this.lat0);this.Zb=-this.Qn*(i+function(t,e){for(var n,r=2*Math.cos(e),i=t.length-1,o=t[i],a=0;--i>=0;)n=r*o-a+t[i],a=o,o=n;return Math.sin(e)*n}(this.gtu,2*i))}function h(t){var e=(0,c.A)(t.x-this.long0),n=t.y;n=s(this.cbg,n);var r=Math.sin(n),i=Math.cos(n),u=Math.sin(e),f=Math.cos(e);n=Math.atan2(r,f*i),e=Math.atan2(u*i,(0,o.A)(r,i*f)),e=a(Math.tan(e));var h,d,p=l(this.gtu,2*n,2*e);return n+=p[0],e+=p[1],Math.abs(e)<=2.623395162778?(h=this.a*(this.Qn*e)+this.x0,d=this.a*(this.Qn*n+this.Zb)+this.y0):(h=1/0,d=1/0),t.x=h,t.y=d,t}function d(t){var e,n,r=(t.x-this.x0)*(1/this.a),a=(t.y-this.y0)*(1/this.a);if(a=(a-this.Zb)/this.Qn,r/=this.Qn,Math.abs(r)<=2.623395162778){var u=l(this.utg,2*a,2*r);a+=u[0],r+=u[1],r=Math.atan((0,i.A)(r));var f=Math.sin(a),h=Math.cos(a),d=Math.sin(r),p=Math.cos(r);a=Math.atan2(f*p,(0,o.A)(d,p*h)),r=Math.atan2(d,p*h),e=(0,c.A)(r+this.long0),n=s(this.cgb,a)}else e=1/0,n=1/0;return t.x=e,t.y=n,t}var p=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"],m={init:f,forward:h,inverse:d,names:p}},3246:function(t,e,n){"use strict";function r(t,e){return Math.pow((1-t)/(1+t),e)}n.r(e),n.d(e,{default:function(){return c},forward:function(){return s},init:function(){return a},inverse:function(){return u},names:function(){return l}});var i=n(2556),o=20;function a(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+i.Vj)/(Math.pow(Math.tan(.5*this.lat0+i.Vj),this.C)*r(this.e*t,this.ratexp))}function s(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+i.Vj),this.C)*r(this.e*Math.sin(n),this.ratexp))-i.sK,t.x=this.C*e,t}function u(t){for(var e=t.x/this.C,n=t.y,a=Math.pow(Math.tan(.5*n+i.Vj)/this.K,1/this.C),s=o;s>0&&(n=2*Math.atan(a*r(this.e*Math.sin(t.y),-.5*this.e))-i.sK,!(Math.abs(n-t.y)<1e-14));--s)t.y=n;return s?(t.x=e,t.y=n,t):null}var l=["gauss"],c={init:a,forward:s,inverse:u,names:l}},4876:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return o},init:function(){return i},inverse:function(){return a},names:function(){return s}});var r=n(9160);function i(){this.name="geocent"}function o(t){return(0,r.jX)(t,this.es,this.a)}function a(t){return(0,r.Rw)(t,this.es,this.a,this.b)}var s=["Geocentric","geocentric","geocent","Geocent"];e.default={init:i,forward:o,inverse:a,names:s}},469:function(t,e,n){"use strict";n.r(e),n.d(e,{init:function(){return i},names:function(){return o}});var r=n(1708);function i(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}var o=["Geostationary Satellite View","Geostationary_Satellite","geos"];e.default={init:i,forward:function(t){var e,n,i,o,a=t.x,s=t.y;if(a-=this.long0,"ellipse"===this.shape){s=Math.atan(this.radius_p2*Math.tan(s));var u=this.radius_p/(0,r.A)(this.radius_p*Math.cos(s),Math.sin(s));if(n=u*Math.cos(a)*Math.cos(s),i=u*Math.sin(a)*Math.cos(s),o=u*Math.sin(s),(this.radius_g-n)*n-i*i-o*o*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;e=this.radius_g-n,this.flip_axis?(t.x=this.radius_g_1*Math.atan(i/(0,r.A)(o,e)),t.y=this.radius_g_1*Math.atan(o/e)):(t.x=this.radius_g_1*Math.atan(i/e),t.y=this.radius_g_1*Math.atan(o/(0,r.A)(i,e)))}else"sphere"===this.shape&&(e=Math.cos(s),n=Math.cos(a)*e,i=Math.sin(a)*e,o=Math.sin(s),e=this.radius_g-n,this.flip_axis?(t.x=this.radius_g_1*Math.atan(i/(0,r.A)(o,e)),t.y=this.radius_g_1*Math.atan(o/e)):(t.x=this.radius_g_1*Math.atan(i/e),t.y=this.radius_g_1*Math.atan(o/(0,r.A)(i,e))));return t.x=t.x*this.a,t.y=t.y*this.a,t},inverse:function(t){var e,n,i,o,a=-1,s=0,u=0;if(t.x=t.x/this.a,t.y=t.y/this.a,"ellipse"===this.shape){this.flip_axis?(u=Math.tan(t.y/this.radius_g_1),s=Math.tan(t.x/this.radius_g_1)*(0,r.A)(1,u)):(s=Math.tan(t.x/this.radius_g_1),u=Math.tan(t.y/this.radius_g_1)*(0,r.A)(1,s));var l=u/this.radius_p;if(e=s*s+l*l+a*a,(i=(n=2*this.radius_g*a)*n-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;o=(-n-Math.sqrt(i))/(2*e),a=this.radius_g+o*a,s*=o,u*=o,t.x=Math.atan2(s,a),t.y=Math.atan(u*Math.cos(t.x)/a),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if("sphere"===this.shape){if(this.flip_axis?(u=Math.tan(t.y/this.radius_g_1),s=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+u*u)):(s=Math.tan(t.x/this.radius_g_1),u=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+s*s)),e=s*s+u*u+a*a,(i=(n=2*this.radius_g*a)*n-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;o=(-n-Math.sqrt(i))/(2*e),a=this.radius_g+o*a,s*=o,u*=o,t.x=Math.atan2(s,a),t.y=Math.atan(u*Math.cos(t.x)/a)}return t.x=t.x+this.long0,t},names:o}},9462:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return s},init:function(){return a},inverse:function(){return u},names:function(){return l}});var r=n(737),i=n(8609),o=n(2556);function a(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function s(t){var e,n,i,a,s,u,l,c=t.x,f=t.y;return i=(0,r.A)(c-this.long0),e=Math.sin(f),n=Math.cos(f),a=Math.cos(i),(s=this.sin_p14*e+this.cos_p14*n*a)>0||Math.abs(s)<=o.H0?(u=this.x0+1*this.a*n*Math.sin(i)/s,l=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*a)/s):(u=this.x0+this.infinity_dist*n*Math.sin(i),l=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*a)),t.x=u,t.y=l,t}function u(t){var e,n,o,a,s,u;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(a=Math.atan2(e,this.rc),n=Math.sin(a),o=Math.cos(a),u=(0,i.A)(o*this.sin_p14+t.y*n*this.cos_p14/e),s=Math.atan2(t.x*n,e*this.cos_p14*o-t.y*this.sin_p14*n),s=(0,r.A)(this.long0+s)):(u=this.phic0,s=0),t.x=s,t.y=u,t}var l=["gnom"];e.default={init:a,forward:s,inverse:u,names:l}},7041:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return h},forward:function(){return l},init:function(){return u},inverse:function(){return c},names:function(){return f}});var r=n(2556);function i(t,e,n){if(Math.abs(e)>r.sK)return Number.NaN;if(e===r.sK)return Number.POSITIVE_INFINITY;if(e===-1*r.sK)return Number.NEGATIVE_INFINITY;var i=t*n;return Math.log(Math.tan((r.sK+e)/2))+t*Math.log((1-i)/(1+i))/2}var o=n(3882),a=n(4885);function s(t,e){return 2*Math.atan(t*Math.exp(e))-r.sK}function u(){var t=this.b/this.a;this.e=Math.sqrt(1-t*t),this.lc=this.long0,this.rs=Math.sqrt(1+this.e*this.e*Math.pow(Math.cos(this.lat0),4)/(1-this.e*this.e));var e=Math.sin(this.lat0),n=Math.asin(e/this.rs),r=Math.sin(n);this.cp=i(0,n,r)-this.rs*i(this.e,this.lat0,e),this.n2=this.k0*this.a*Math.sqrt(1-this.e*this.e)/(1-this.e*this.e*e*e),this.xs=this.x0,this.ys=this.y0-this.n2*n,this.title||(this.title="Gauss Schreiber transverse mercator")}function l(t){var e=t.x,n=t.y,r=this.rs*(e-this.lc),s=this.cp+this.rs*i(this.e,n,Math.sin(n)),u=Math.asin(Math.sin(r)/(0,a.A)(s)),l=i(0,u,Math.sin(u));return t.x=this.xs+this.n2*l,t.y=this.ys+this.n2*Math.atan((0,o.A)(s)/Math.cos(r)),t}function c(t){var e=t.x,n=t.y,r=Math.atan((0,o.A)((e-this.xs)/this.n2)/Math.cos((n-this.ys)/this.n2)),u=Math.asin(Math.sin((n-this.ys)/this.n2)/(0,a.A)((e-this.xs)/this.n2)),l=i(0,u,Math.sin(u));return t.x=this.lc+r/this.rs,t.y=function(t,e){var n=s(1,e),r=0,i=0;do{r=n,i=t*Math.sin(r),n=s(Math.exp(t*Math.log((1+i)/(1-i))/2),e)}while(Math.abs(n-r)>1e-12);return n}(this.e,(l-this.cp)/this.rs),t}var f=["gstmerg","gstmerc"],h={init:u,forward:l,inverse:c,names:f}},6507:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return o},init:function(){return i},inverse:function(){return a},names:function(){return s}});var r=n(737);function i(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function o(t){var e,n,i,o,a,s,u,l=t.x,c=t.y,f=(0,r.A)(l-this.long0);return e=Math.pow((1+this.e*Math.sin(c))/(1-this.e*Math.sin(c)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(c/2+this.s45),this.alfa)/e)-this.s45),i=-f*this.alfa,o=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(i)),a=Math.asin(Math.cos(n)*Math.sin(i)/Math.cos(o)),s=this.n*a,u=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(o/2+this.s45),this.n),t.y=u*Math.cos(s)/1,t.x=u*Math.sin(s)/1,this.czech||(t.y*=-1,t.x*=-1),t}function a(t){var e,n,r,i,o,a,s,u=t.x;t.x=t.y,t.y=u,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),i=Math.atan2(t.y,t.x)/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),n=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(e)),t.x=this.long0-n/this.alfa,a=e,s=0;var l=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-t.y)<1e-10&&(s=1),a=t.y,l+=1}while(0===s&&l<15);return l>=15?null:t}var s=["Krovak","krovak"];e.default={init:i,forward:o,inverse:a,names:s}},7406:function(t,e,n){"use strict";n.r(e),n.d(e,{EQUIT:function(){return u},N_POLE:function(){return s},OBLIQ:function(){return l},S_POLE:function(){return a},forward:function(){return f},init:function(){return c},inverse:function(){return h},names:function(){return x}});var r=n(2556),i=n(7200),o=n(737),a=1,s=2,u=3,l=4;function c(){var t,e=Math.abs(this.lat0);if(Math.abs(e-r.sK)<r.H0?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<r.H0?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=(0,i.A)(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var e,n=[];return n[0]=t*d,e=t*t,n[0]+=e*p,n[1]=e*g,e*=t,n[0]+=e*m,n[1]+=e*y,n[2]=e*v,n}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=(0,i.A)(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function f(t){var e,n,a,s,u,l,c,f,h,d,p=t.x,m=t.y;if(p=(0,o.A)(p-this.long0),this.sphere){if(u=Math.sin(m),d=Math.cos(m),a=Math.cos(p),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((n=this.mode===this.EQUIT?1+d*a:1+this.sinph0*u+this.cosph0*d*a)<=r.H0)return null;e=(n=Math.sqrt(2/n))*d*Math.sin(p),n*=this.mode===this.EQUIT?u:this.cosph0*u-this.sinph0*d*a}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(a=-a),Math.abs(m+this.lat0)<r.H0)return null;n=r.Vj-.5*m,e=(n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)))*Math.sin(p),n*=a}}else{switch(c=0,f=0,h=0,a=Math.cos(p),s=Math.sin(p),u=Math.sin(m),l=(0,i.A)(this.e,u),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(c=l/this.qp,f=Math.sqrt(1-c*c)),this.mode){case this.OBLIQ:h=1+this.sinb1*c+this.cosb1*f*a;break;case this.EQUIT:h=1+f*a;break;case this.N_POLE:h=r.sK+m,l=this.qp-l;break;case this.S_POLE:h=m-r.sK,l=this.qp+l}if(Math.abs(h)<r.H0)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:h=Math.sqrt(2/h),n=this.mode===this.OBLIQ?this.ymf*h*(this.cosb1*c-this.sinb1*f*a):(h=Math.sqrt(2/(1+f*a)))*c*this.ymf,e=this.xmf*h*f*s;break;case this.N_POLE:case this.S_POLE:l>=0?(e=(h=Math.sqrt(l))*s,n=a*(this.mode===this.S_POLE?h:-h)):e=n=0}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t}function h(t){t.x-=this.x0,t.y-=this.y0;var e,n,i,a,s,u,l,c,f,h,d=t.x/this.a,p=t.y/this.a;if(this.sphere){var m,g=0,y=0;if((n=.5*(m=Math.sqrt(d*d+p*p)))>1)return null;switch(n=2*Math.asin(n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(y=Math.sin(n),g=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(m)<=r.H0?0:Math.asin(p*y/m),d*=y,p=g*m;break;case this.OBLIQ:n=Math.abs(m)<=r.H0?this.lat0:Math.asin(g*this.sinph0+p*y*this.cosph0/m),d*=y*this.cosph0,p=(g-Math.sin(n)*this.sinph0)*m;break;case this.N_POLE:p=-p,n=r.sK-n;break;case this.S_POLE:n-=r.sK}e=0!==p||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(d,p):0}else{if(l=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(d/=this.dd,p*=this.dd,(u=Math.sqrt(d*d+p*p))<r.H0)return t.x=this.long0,t.y=this.lat0,t;a=2*Math.asin(.5*u/this.rq),i=Math.cos(a),d*=a=Math.sin(a),this.mode===this.OBLIQ?(l=i*this.sinb1+p*a*this.cosb1/u,s=this.qp*l,p=u*this.cosb1*i-p*this.sinb1*a):(l=p*a/u,s=this.qp*l,p=u*i)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(p=-p),!(s=d*d+p*p))return t.x=this.long0,t.y=this.lat0,t;l=1-s/this.qp,this.mode===this.S_POLE&&(l=-l)}e=Math.atan2(d,p),c=Math.asin(l),f=this.apa,h=c+c,n=c+f[0]*Math.sin(h)+f[1]*Math.sin(h+h)+f[2]*Math.sin(h+h+h)}return t.x=(0,o.A)(this.long0+e),t.y=n,t}var d=.3333333333333333,p=.17222222222222222,m=.10257936507936508,g=.06388888888888888,y=.0664021164021164,v=.016415012942191543;var x=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];e.default={init:c,forward:f,inverse:h,names:x,S_POLE:a,N_POLE:s,EQUIT:u,OBLIQ:l}},9269:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return c},init:function(){return l},inverse:function(){return f},names:function(){return h}});var r=n(444),i=n(9967),o=n(4205),a=n(737),s=n(1793),u=n(2556);function l(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<u.H0)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),o=(0,r.A)(this.e,e,n),a=(0,i.A)(this.e,this.lat1,e),s=Math.sin(this.lat2),l=Math.cos(this.lat2),c=(0,r.A)(this.e,s,l),f=(0,i.A)(this.e,this.lat2,s),h=(0,i.A)(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>u.H0?this.ns=Math.log(o/c)/Math.log(a/f):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=o/(this.ns*Math.pow(a,this.ns)),this.rh=this.a*this.f0*Math.pow(h,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function c(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=u.H0&&(n=(0,o.A)(n)*(u.sK-2*u.H0));var r,s,l=Math.abs(Math.abs(n)-u.sK);if(l>u.H0)r=(0,i.A)(this.e,n,Math.sin(n)),s=this.a*this.f0*Math.pow(r,this.ns);else{if((l=n*this.ns)<=0)return null;s=0}var c=this.ns*(0,a.A)(e-this.long0);return t.x=this.k0*(s*Math.sin(c))+this.x0,t.y=this.k0*(this.rh-s*Math.cos(c))+this.y0,t}function f(t){var e,n,r,i,o,l=(t.x-this.x0)/this.k0,c=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(l*l+c*c),n=1):(e=-Math.sqrt(l*l+c*c),n=-1);var f=0;if(0!==e&&(f=Math.atan2(n*l,n*c)),0!==e||this.ns>0){if(n=1/this.ns,r=Math.pow(e/(this.a*this.f0),n),-9999===(i=(0,s.A)(this.e,r)))return null}else i=-u.sK;return o=(0,a.A)(f/this.ns+this.long0),t.x=o,t.y=i,t}var h=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];e.default={init:l,forward:c,inverse:f,names:h}},2848:function(t,e,n){"use strict";function r(){}function i(t){return t}n.r(e),n.d(e,{forward:function(){return i},init:function(){return r},inverse:function(){return i},names:function(){return o}});var o=["longlat","identity"];e.default={init:r,forward:i,inverse:i,names:o}},2286:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return l},init:function(){return u},inverse:function(){return c},names:function(){return f}});var r=n(444),i=n(737),o=n(9967),a=n(1793),s=n(2556);function u(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=(0,r.A)(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function l(t){var e,n,r=t.x,a=t.y;if(a*s.dX>90&&a*s.dX<-90&&r*s.dX>180&&r*s.dX<-180)return null;if(Math.abs(Math.abs(a)-s.sK)<=s.H0)return null;if(this.sphere)e=this.x0+this.a*this.k0*(0,i.A)(r-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(s.Vj+.5*a));else{var u=Math.sin(a),l=(0,o.A)(this.e,a,u);e=this.x0+this.a*this.k0*(0,i.A)(r-this.long0),n=this.y0-this.a*this.k0*Math.log(l)}return t.x=e,t.y=n,t}function c(t){var e,n,r=t.x-this.x0,o=t.y-this.y0;if(this.sphere)n=s.sK-2*Math.atan(Math.exp(-o/(this.a*this.k0)));else{var u=Math.exp(-o/(this.a*this.k0));if(-9999===(n=(0,a.A)(this.e,u)))return null}return e=(0,i.A)(this.long0+r/(this.a*this.k0)),t.x=e,t.y=n,t}var f=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];e.default={init:u,forward:l,inverse:c,names:f}},5157:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return o},init:function(){return i},inverse:function(){return a},names:function(){return s}});var r=n(737);function i(){}function o(t){var e=t.x,n=t.y,i=(0,r.A)(e-this.long0),o=this.x0+this.a*i,a=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=o,t.y=a,t}function a(t){t.x-=this.x0,t.y-=this.y0;var e=(0,r.A)(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t}var s=["Miller_Cylindrical","mill"];e.default={init:i,forward:o,inverse:a,names:s}},5967:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return a},init:function(){return o},inverse:function(){return s},names:function(){return u}});var r=n(737),i=n(2556);function o(){}function a(t){for(var e=t.x,n=t.y,o=(0,r.A)(e-this.long0),a=n,s=Math.PI*Math.sin(n);;){var u=-(a+Math.sin(a)-s)/(1+Math.cos(a));if(a+=u,Math.abs(u)<i.H0)break}a/=2,Math.PI/2-Math.abs(n)<i.H0&&(o=0);var l=.900316316158*this.a*o*Math.cos(a)+this.x0,c=1.4142135623731*this.a*Math.sin(a)+this.y0;return t.x=l,t.y=c,t}function s(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var i=(0,r.A)(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));i<-Math.PI&&(i=-Math.PI),i>Math.PI&&(i=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var o=Math.asin(n);return t.x=i,t.y=o,t}var u=["Mollweide","moll"];e.default={init:o,forward:a,inverse:s,names:u}},6407:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return a},init:function(){return o},inverse:function(){return s},iterations:function(){return i},names:function(){return u}});var r=n(2556),i=1;function o(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function a(t){var e,n=t.x,i=t.y-this.lat0,o=n-this.long0,a=i/r._3*1e-5,s=o,u=1,l=0;for(e=1;e<=10;e++)u*=a,l+=this.A[e]*u;var c,f=l,h=s,d=1,p=0,m=0,g=0;for(e=1;e<=6;e++)c=p*f+d*h,d=d*f-p*h,p=c,m=m+this.B_re[e]*d-this.B_im[e]*p,g=g+this.B_im[e]*d+this.B_re[e]*p;return t.x=g*this.a+this.x0,t.y=m*this.a+this.y0,t}function s(t){var e,n,i=t.x,o=t.y,a=i-this.x0,s=(o-this.y0)/this.a,u=a/this.a,l=1,c=0,f=0,h=0;for(e=1;e<=6;e++)n=c*s+l*u,l=l*s-c*u,c=n,f=f+this.C_re[e]*l-this.C_im[e]*c,h=h+this.C_im[e]*l+this.C_re[e]*c;for(var d=0;d<this.iterations;d++){var p,m=f,g=h,y=s,v=u;for(e=2;e<=6;e++)p=g*f+m*h,m=m*f-g*h,g=p,y+=(e-1)*(this.B_re[e]*m-this.B_im[e]*g),v+=(e-1)*(this.B_im[e]*m+this.B_re[e]*g);m=1,g=0;var x=this.B_re[1],_=this.B_im[1];for(e=2;e<=6;e++)p=g*f+m*h,m=m*f-g*h,g=p,x+=e*(this.B_re[e]*m-this.B_im[e]*g),_+=e*(this.B_im[e]*m+this.B_re[e]*g);var b=x*x+_*_;f=(y*x+v*_)/b,h=(v*x-y*_)/b}var w=f,M=h,A=1,T=0;for(e=1;e<=9;e++)A*=w,T+=this.D[e]*A;var E=this.lat0+T*r._3*1e5,C=this.long0+M;return t.x=C,t.y=E,t}var u=["New_Zealand_Map_Grid","nzmg"];e.default={init:o,forward:a,inverse:s,names:u}},7475:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return l},init:function(){return u},inverse:function(){return c},names:function(){return f}});var r=n(9967),i=n(737),o=n(1793),a=n(2556),s=1e-7;function u(){var t,e,n,o,u,l,c,f,h,d,p,m,g,y=0,v=0,x=0,_=0,b=0,w=0,M=0;this.no_off=(g="object"==typeof(m=this).PROJECTION?Object.keys(m.PROJECTION)[0]:m.PROJECTION,"no_uoff"in m||"no_off"in m||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(g)),this.no_rot="no_rot"in this;var A=!1;"alpha"in this&&(A=!0);var T=!1;if("rectified_grid_angle"in this&&(T=!0),A&&(M=this.alpha),T&&(y=this.rectified_grid_angle*a.zq),A||T)v=this.longc;else if(x=this.long1,b=this.lat1,_=this.long2,w=this.lat2,Math.abs(b-w)<=s||(t=Math.abs(b))<=s||Math.abs(t-a.sK)<=s||Math.abs(Math.abs(this.lat0)-a.sK)<=s||Math.abs(Math.abs(w)-a.sK)<=s)throw new Error;var E=1-this.es;e=Math.sqrt(E),Math.abs(this.lat0)>a.H0?(f=Math.sin(this.lat0),n=Math.cos(this.lat0),t=1-this.es*f*f,this.B=n*n,this.B=Math.sqrt(1+this.es*this.B*this.B/E),this.A=this.B*this.k0*e/t,(u=(o=this.B*e/(n*Math.sqrt(t)))*o-1)<=0?u=0:(u=Math.sqrt(u),this.lat0<0&&(u=-u)),this.E=u+=o,this.E*=Math.pow((0,r.A)(this.e,this.lat0,f),this.B)):(this.B=1/e,this.A=this.k0,this.E=o=u=1),A||T?(A?(p=Math.asin(Math.sin(M)/o),T||(y=M)):(p=y,M=Math.asin(o*Math.sin(p))),this.lam0=v-Math.asin(.5*(u-1/u)*Math.tan(p))/this.B):(l=Math.pow((0,r.A)(this.e,b,Math.sin(b)),this.B),c=Math.pow((0,r.A)(this.e,w,Math.sin(w)),this.B),u=this.E/l,h=(c-l)/(c+l),d=((d=this.E*this.E)-c*l)/(d+c*l),(t=x-_)<-Math.pi?_-=a.JM:t>Math.pi&&(_+=a.JM),this.lam0=(0,i.A)(.5*(x+_)-Math.atan(d*Math.tan(.5*this.B*(x-_))/h)/this.B),p=Math.atan(2*Math.sin(this.B*(0,i.A)(x-this.lam0))/(u-1/u)),y=M=Math.asin(o*Math.sin(p))),this.singam=Math.sin(p),this.cosgam=Math.cos(p),this.sinrot=Math.sin(y),this.cosrot=Math.cos(y),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A,this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(o*o-1)/Math.cos(M))),this.lat0<0&&(this.u_0=-this.u_0)),u=.5*p,this.v_pole_n=this.ArB*Math.log(Math.tan(a.Vj-u)),this.v_pole_s=this.ArB*Math.log(Math.tan(a.Vj+u))}function l(t){var e,n,i,o,u,l,c,f,h={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-a.sK)>a.H0){if(e=.5*((u=this.E/Math.pow((0,r.A)(this.e,t.y,Math.sin(t.y)),this.B))-(l=1/u)),n=.5*(u+l),o=Math.sin(this.B*t.x),i=(e*this.singam-o*this.cosgam)/n,Math.abs(Math.abs(i)-1)<a.H0)throw new Error;f=.5*this.ArB*Math.log((1-i)/(1+i)),l=Math.cos(this.B*t.x),c=Math.abs(l)<s?this.A*t.x:this.ArB*Math.atan2(e*this.cosgam+o*this.singam,l)}else f=t.y>0?this.v_pole_n:this.v_pole_s,c=this.ArB*t.y;return this.no_rot?(h.x=c,h.y=f):(c-=this.u_0,h.x=f*this.cosrot+c*this.sinrot,h.y=c*this.cosrot-f*this.sinrot),h.x=this.a*h.x+this.x0,h.y=this.a*h.y+this.y0,h}function c(t){var e,n,r,i,s,u,l,c={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(n=t.y,e=t.x):(n=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),i=.5*((r=Math.exp(-this.BrA*n))-1/r),s=.5*(r+1/r),l=((u=Math.sin(this.BrA*e))*this.cosgam+i*this.singam)/s,Math.abs(Math.abs(l)-1)<a.H0)c.x=0,c.y=l<0?-a.sK:a.sK;else{if(c.y=this.E/Math.sqrt((1+l)/(1-l)),c.y=(0,o.A)(this.e,Math.pow(c.y,1/this.B)),c.y===1/0)throw new Error;c.x=-this.rB*Math.atan2(i*this.cosgam-u*this.singam,Math.cos(this.BrA*e))}return c.x+=this.lam0,c}var f=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];e.default={init:u,forward:l,inverse:c,names:f}},8181:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return s},init:function(){return a},inverse:function(){return u},names:function(){return l}});var r=n(737),i=n(8609),o=n(2556);function a(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function s(t){var e,n,i,a,s,u,l,c=t.x,f=t.y;return i=(0,r.A)(c-this.long0),e=Math.sin(f),n=Math.cos(f),a=Math.cos(i),((s=this.sin_p14*e+this.cos_p14*n*a)>0||Math.abs(s)<=o.H0)&&(u=1*this.a*n*Math.sin(i),l=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*a)),t.x=u,t.y=l,t}function u(t){var e,n,a,s,u,l,c;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),n=(0,i.A)(e/this.a),a=Math.sin(n),s=Math.cos(n),l=this.long0,Math.abs(e)<=o.H0?(c=this.lat0,t.x=l,t.y=c,t):(c=(0,i.A)(s*this.sin_p14+t.y*a*this.cos_p14/e),u=Math.abs(this.lat0)-o.sK,Math.abs(u)<=o.H0?(l=this.lat0>=0?(0,r.A)(this.long0+Math.atan2(t.x,-t.y)):(0,r.A)(this.long0-Math.atan2(-t.x,t.y)),t.x=l,t.y=c,t):(l=(0,r.A)(this.long0+Math.atan2(t.x*a,e*this.cos_p14*s-t.y*this.sin_p14*a)),t.x=l,t.y=c,t))}var l=["ortho"];e.default={init:a,forward:s,inverse:u,names:l}},2169:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return p},init:function(){return d},inverse:function(){return m},names:function(){return g}});var r=n(8193),i=n(9686),o=n(7711),a=n(2060),s=n(737),u=n(5473),l=n(4037),c=n(2556),f=n(7973),h=20;function d(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=(0,r.A)(this.es),this.e1=(0,i.A)(this.es),this.e2=(0,o.A)(this.es),this.e3=(0,a.A)(this.es),this.ml0=this.a*(0,l.A)(this.e0,this.e1,this.e2,this.e3,this.lat0)}function p(t){var e,n,r,i=t.x,o=t.y,a=(0,s.A)(i-this.long0);if(r=a*Math.sin(o),this.sphere)Math.abs(o)<=c.H0?(e=this.a*a,n=-1*this.a*this.lat0):(e=this.a*Math.sin(r)/Math.tan(o),n=this.a*((0,u.A)(o-this.lat0)+(1-Math.cos(r))/Math.tan(o)));else if(Math.abs(o)<=c.H0)e=this.a*a,n=-1*this.ml0;else{var h=(0,f.A)(this.a,this.e,Math.sin(o))/Math.tan(o);e=h*Math.sin(r),n=this.a*(0,l.A)(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+h*(1-Math.cos(r))}return t.x=e+this.x0,t.y=n+this.y0,t}function m(t){var e,n,r,i,o,a,u,f,d;if(r=t.x-this.x0,i=t.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=c.H0)e=(0,s.A)(r/this.a+this.long0),n=0;else{var p;for(a=this.lat0+i/this.a,u=r*r/this.a/this.a+a*a,f=a,o=h;o;--o)if(f+=d=-1*(a*(f*(p=Math.tan(f))+1)-f-.5*(f*f+u)*p)/((f-a)/p-1),Math.abs(d)<=c.H0){n=f;break}e=(0,s.A)(this.long0+Math.asin(r*Math.tan(f)/this.a)/Math.sin(n))}else if(Math.abs(i+this.ml0)<=c.H0)n=0,e=(0,s.A)(this.long0+r/this.a);else{var m,g,y,v,x;for(a=(this.ml0+i)/this.a,u=r*r/this.a/this.a+a*a,f=a,o=h;o;--o)if(x=this.e*Math.sin(f),m=Math.sqrt(1-x*x)*Math.tan(f),g=this.a*(0,l.A)(this.e0,this.e1,this.e2,this.e3,f),y=this.e0-2*this.e1*Math.cos(2*f)+4*this.e2*Math.cos(4*f)-6*this.e3*Math.cos(6*f),f-=d=(a*(m*(v=g/this.a)+1)-v-.5*m*(v*v+u))/(this.es*Math.sin(2*f)*(v*v+u-2*a*v)/(4*m)+(a-v)*(m*y-2/Math.sin(2*f))-y),Math.abs(d)<=c.H0){n=f;break}m=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=(0,s.A)(this.long0+Math.asin(r*m/this.a)/Math.sin(n))}return t.x=e,t.y=n,t}var g=["Polyconic","poly"];e.default={init:d,forward:p,inverse:m,names:g}},5722:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return s},init:function(){return a},inverse:function(){return u},names:function(){return f}});var r=n(2556),i={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},o={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function a(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=r.sK-r.Vj/2?this.face=i.TOP:this.lat0<=-(r.sK-r.Vj/2)?this.face=i.BOTTOM:Math.abs(this.long0)<=r.Vj?this.face=i.FRONT:Math.abs(this.long0)<=r.sK+r.Vj?this.face=this.long0>0?i.RIGHT:i.LEFT:this.face=i.BACK,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function s(t){var e,n,a,s,u,f,h={x:0,y:0},d={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,n=t.x,this.face===i.TOP)s=r.sK-e,n>=r.Vj&&n<=r.sK+r.Vj?(d.value=o.AREA_0,a=n-r.sK):n>r.sK+r.Vj||n<=-(r.sK+r.Vj)?(d.value=o.AREA_1,a=n>0?n-r.DF:n+r.DF):n>-(r.sK+r.Vj)&&n<=-r.Vj?(d.value=o.AREA_2,a=n+r.sK):(d.value=o.AREA_3,a=n);else if(this.face===i.BOTTOM)s=r.sK+e,n>=r.Vj&&n<=r.sK+r.Vj?(d.value=o.AREA_0,a=-n+r.sK):n<r.Vj&&n>=-r.Vj?(d.value=o.AREA_1,a=-n):n<-r.Vj&&n>=-(r.sK+r.Vj)?(d.value=o.AREA_2,a=-n-r.sK):(d.value=o.AREA_3,a=n>0?-n+r.DF:-n-r.DF);else{var p,m,g,y,v,x;this.face===i.RIGHT?n=c(n,+r.sK):this.face===i.BACK?n=c(n,+r.DF):this.face===i.LEFT&&(n=c(n,-r.sK)),y=Math.sin(e),v=Math.cos(e),x=Math.sin(n),p=v*Math.cos(n),m=v*x,g=y,this.face===i.FRONT?a=l(s=Math.acos(p),g,m,d):this.face===i.RIGHT?a=l(s=Math.acos(m),g,-p,d):this.face===i.BACK?a=l(s=Math.acos(-p),g,-m,d):this.face===i.LEFT?a=l(s=Math.acos(-m),g,p,d):(s=a=0,d.value=o.AREA_0)}return f=Math.atan(12/r.DF*(a+Math.acos(Math.sin(a)*Math.cos(r.Vj))-r.sK)),u=Math.sqrt((1-Math.cos(s))/(Math.cos(f)*Math.cos(f))/(1-Math.cos(Math.atan(1/Math.cos(a))))),d.value===o.AREA_1?f+=r.sK:d.value===o.AREA_2?f+=r.DF:d.value===o.AREA_3&&(f+=1.5*r.DF),h.x=u*Math.cos(f),h.y=u*Math.sin(f),h.x=h.x*this.a+this.x0,h.y=h.y*this.a+this.y0,t.x=h.x,t.y=h.y,t}function u(t){var e,n,a,s,u,l,f,h,d,p,m,g,y={lam:0,phi:0},v={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,n=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?v.value=o.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(v.value=o.AREA_1,e-=r.sK):t.x<0&&-t.x>=Math.abs(t.y)?(v.value=o.AREA_2,e=e<0?e+r.DF:e-r.DF):(v.value=o.AREA_3,e+=r.sK),d=r.DF/12*Math.tan(e),u=Math.sin(d)/(Math.cos(d)-1/Math.sqrt(2)),l=Math.atan(u),(f=1-(a=Math.cos(e))*a*(s=Math.tan(n))*s*(1-Math.cos(Math.atan(1/Math.cos(l)))))<-1?f=-1:f>1&&(f=1),this.face===i.TOP)h=Math.acos(f),y.phi=r.sK-h,v.value===o.AREA_0?y.lam=l+r.sK:v.value===o.AREA_1?y.lam=l<0?l+r.DF:l-r.DF:v.value===o.AREA_2?y.lam=l-r.sK:y.lam=l;else if(this.face===i.BOTTOM)h=Math.acos(f),y.phi=h-r.sK,v.value===o.AREA_0?y.lam=-l+r.sK:v.value===o.AREA_1?y.lam=-l:v.value===o.AREA_2?y.lam=-l-r.sK:y.lam=l<0?-l-r.DF:-l+r.DF;else{var x,_,b;d=(x=f)*x,_=(d+=(b=d>=1?0:Math.sqrt(1-d)*Math.sin(l))*b)>=1?0:Math.sqrt(1-d),v.value===o.AREA_1?(d=_,_=-b,b=d):v.value===o.AREA_2?(_=-_,b=-b):v.value===o.AREA_3&&(d=_,_=b,b=-d),this.face===i.RIGHT?(d=x,x=-_,_=d):this.face===i.BACK?(x=-x,_=-_):this.face===i.LEFT&&(d=x,x=_,_=-d),y.phi=Math.acos(-b)-r.sK,y.lam=Math.atan2(_,x),this.face===i.RIGHT?y.lam=c(y.lam,-r.sK):this.face===i.BACK?y.lam=c(y.lam,-r.DF):this.face===i.LEFT&&(y.lam=c(y.lam,+r.sK))}0!==this.es&&(p=y.phi<0?1:0,m=Math.tan(y.phi),g=this.b/Math.sqrt(m*m+this.one_minus_f_squared),y.phi=Math.atan(Math.sqrt(this.a*this.a-g*g)/(this.one_minus_f*g)),p&&(y.phi=-y.phi));return y.lam+=this.long0,t.x=y.lam,t.y=y.phi,t}function l(t,e,n,i){var a;return t<r.H0?(i.value=o.AREA_0,a=0):(a=Math.atan2(e,n),Math.abs(a)<=r.Vj?i.value=o.AREA_0:a>r.Vj&&a<=r.sK+r.Vj?(i.value=o.AREA_1,a-=r.sK):a>r.sK+r.Vj||a<=-(r.sK+r.Vj)?(i.value=o.AREA_2,a=a>=0?a-r.DF:a+r.DF):(i.value=o.AREA_3,a+=r.sK)),a}function c(t,e){var n=t+e;return n<-r.DF?n+=r.JM:n>+r.DF&&(n-=r.JM),n}var f=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];e.default={init:a,forward:s,inverse:u,names:f}},1295:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return m},init:function(){return p},inverse:function(){return g},names:function(){return y}});var r=n(2556),i=n(737),o=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],a=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],s=.8487,u=1.3523,l=r.dX/5,c=1/l,f=18,h=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},d=function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])};function p(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function m(t){var e=(0,i.A)(t.x-this.long0),n=Math.abs(t.y),d=Math.floor(n*l);d<0?d=0:d>=f&&(d=f-1),n=r.dX*(n-c*d);var p={x:h(o[d],n)*e,y:h(a[d],n)};return t.y<0&&(p.y=-p.y),p.x=p.x*this.a*s+this.x0,p.y=p.y*this.a*u+this.y0,p}function g(t){var e={x:(t.x-this.x0)/(this.a*s),y:Math.abs(t.y-this.y0)/(this.a*u)};if(e.y>=1)e.x/=o[f][0],e.y=t.y<0?-r.sK:r.sK;else{var n=Math.floor(e.y*f);for(n<0?n=0:n>=f&&(n=f-1);;)if(a[n][0]>e.y)--n;else{if(!(a[n+1][0]<=e.y))break;++n}var l=a[n],c=5*(e.y-l[0])/(a[n+1][0]-l[0]);c=function(t,e,n,r){for(var i=e;r;--r){var o=t(i);if(i-=o,Math.abs(o)<n)break}return i}((function(t){return(h(l,t)-e.y)/d(l,t)}),c,r.H0,100),e.x/=h(o[n],c),e.y=(5*n+c)*r.zq,t.y<0&&(e.y=-e.y)}return e.x=(0,i.A)(e.x+this.long0),e}var y=["Robinson","robin"];e.default={init:p,forward:m,inverse:g,names:y}},9006:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return h},init:function(){return f},inverse:function(){return d},names:function(){return p}});var r=n(737),i=n(5473),o=n(6366),a=n(2092),s=n(3220),u=n(2556),l=n(8609),c=20;function f(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=(0,o.A)(this.es)}function h(t){var e,n,i=t.x,o=t.y;if(i=(0,r.A)(i-this.long0),this.sphere){if(this.m)for(var s=this.n*Math.sin(o),l=c;l;--l){var f=(this.m*o+Math.sin(o)-s)/(this.m+Math.cos(o));if(o-=f,Math.abs(f)<u.H0)break}else o=1!==this.n?Math.asin(this.n*Math.sin(o)):o;e=this.a*this.C_x*i*(this.m+Math.cos(o)),n=this.a*this.C_y*o}else{var h=Math.sin(o),d=Math.cos(o);n=this.a*(0,a.A)(o,h,d,this.en),e=this.a*i*d/Math.sqrt(1-this.es*h*h)}return t.x=e,t.y=n,t}function d(t){var e,n,o,a;return t.x-=this.x0,o=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,o/=this.C_x*(this.m+Math.cos(e)),this.m?e=(0,l.A)((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=(0,l.A)(Math.sin(e)/this.n)),o=(0,r.A)(o+this.long0),e=(0,i.A)(e)):(e=(0,s.A)(t.y/this.a,this.es,this.en),(a=Math.abs(e))<u.sK?(a=Math.sin(e),n=this.long0+t.x*Math.sqrt(1-this.es*a*a)/(this.a*Math.cos(e)),o=(0,r.A)(n)):a-u.H0<u.sK&&(o=this.long0)),t.x=o,t.y=e,t}var p=["Sinusoidal","sinu"];e.default={init:f,forward:h,inverse:d,names:p}},988:function(t,e,n){"use strict";function r(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,r=1/this.rf,i=2*r-Math.pow(r,2),o=this.e=Math.sqrt(i);this.R=this.k0*n*Math.sqrt(1-i)/(1-i*Math.pow(e,2)),this.alpha=Math.sqrt(1+i/(1-i)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),s=Math.log(Math.tan(Math.PI/4+t/2)),u=Math.log((1+o*e)/(1-o*e));this.K=a-this.alpha*s+this.alpha*o/2*u}function i(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),r=-this.alpha*(e+n)+this.K,i=2*(Math.atan(Math.exp(r))-Math.PI/4),o=this.alpha*(t.x-this.lambda0),a=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(o))),s=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(o));return t.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,t.x=this.R*a+this.x0,t}function o(t){for(var e=t.x-this.x0,n=t.y-this.y0,r=e/this.R,i=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(r)),a=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(i))),s=this.lambda0+a/this.alpha,u=0,l=o,c=-1e3,f=0;Math.abs(l-c)>1e-7;){if(++f>20)return;u=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(l))/2)),c=l,l=2*Math.atan(Math.exp(u))-Math.PI/2}return t.x=s,t.y=l,t}n.r(e),n.d(e,{forward:function(){return i},init:function(){return r},inverse:function(){return o},names:function(){return a}});var a=["somerc"];e.default={init:r,forward:i,inverse:o,names:a}},688:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return f},init:function(){return c},inverse:function(){return h},names:function(){return d},ssfn_:function(){return l}});var r=n(2556),i=n(4205),o=n(444),a=n(9967),s=n(1793),u=n(737);function l(t,e,n){return e*=n,Math.tan(.5*(r.sK+t))*Math.pow((1-e)/(1+e),.5*n)}function c(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=r.H0&&(this.k0=.5*(1+(0,i.A)(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=r.H0&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=r.H0&&Math.abs(Math.cos(this.lat_ts))>r.H0&&(this.k0=.5*this.cons*(0,o.A)(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/(0,a.A)(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=(0,o.A)(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-r.sK,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function f(t){var e,n,i,o,s,l,c=t.x,f=t.y,h=Math.sin(f),d=Math.cos(f),p=(0,u.A)(c-this.long0);return Math.abs(Math.abs(c-this.long0)-Math.PI)<=r.H0&&Math.abs(f+this.lat0)<=r.H0?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*h+this.coslat0*d*Math.cos(p)),t.x=this.a*e*d*Math.sin(p)+this.x0,t.y=this.a*e*(this.coslat0*h-this.sinlat0*d*Math.cos(p))+this.y0,t):(n=2*Math.atan(this.ssfn_(f,h,this.e))-r.sK,o=Math.cos(n),i=Math.sin(n),Math.abs(this.coslat0)<=r.H0?(s=(0,a.A)(this.e,f*this.con,this.con*h),l=2*this.a*this.k0*s/this.cons,t.x=this.x0+l*Math.sin(c-this.long0),t.y=this.y0-this.con*l*Math.cos(c-this.long0),t):(Math.abs(this.sinlat0)<r.H0?(e=2*this.a*this.k0/(1+o*Math.cos(p)),t.y=e*i):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*i+this.cosX0*o*Math.cos(p))),t.y=e*(this.cosX0*i-this.sinX0*o*Math.cos(p))+this.y0),t.x=e*o*Math.sin(p)+this.x0,t))}function h(t){var e,n,i,o,a;t.x-=this.x0,t.y-=this.y0;var l=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var c=2*Math.atan(l/(2*this.a*this.k0));return e=this.long0,n=this.lat0,l<=r.H0?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(c)*this.sinlat0+t.y*Math.sin(c)*this.coslat0/l),e=Math.abs(this.coslat0)<r.H0?this.lat0>0?(0,u.A)(this.long0+Math.atan2(t.x,-1*t.y)):(0,u.A)(this.long0+Math.atan2(t.x,t.y)):(0,u.A)(this.long0+Math.atan2(t.x*Math.sin(c),l*this.coslat0*Math.cos(c)-t.y*this.sinlat0*Math.sin(c))),t.x=e,t.y=n,t)}if(Math.abs(this.coslat0)<=r.H0){if(l<=r.H0)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,i=l*this.cons/(2*this.a*this.k0),n=this.con*(0,s.A)(this.e,i),e=this.con*(0,u.A)(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else o=2*Math.atan(l*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,l<=r.H0?a=this.X0:(a=Math.asin(Math.cos(o)*this.sinX0+t.y*Math.sin(o)*this.cosX0/l),e=(0,u.A)(this.long0+Math.atan2(t.x*Math.sin(o),l*this.cosX0*Math.cos(o)-t.y*this.sinX0*Math.sin(o)))),n=-1*(0,s.A)(this.e,Math.tan(.5*(r.sK+a)));return t.x=e,t.y=n,t}var d=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];e.default={init:c,forward:f,inverse:h,names:d,ssfn_:l}},865:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return s},init:function(){return a},inverse:function(){return u},names:function(){return l}});var r=n(3246),i=n(737),o=n(1708);function a(){r.default.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function s(t){var e,n,o,a;return t.x=(0,i.A)(t.x-this.long0),r.default.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),o=Math.cos(t.x),a=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*o),t.x=a*n*Math.sin(t.x),t.y=a*(this.cosc0*e-this.sinc0*n*o),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function u(t){var e,n,a,s,u;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,u=(0,o.A)(t.x,t.y)){var l=2*Math.atan2(u,this.R2);e=Math.sin(l),n=Math.cos(l),s=Math.asin(n*this.sinc0+t.y*e*this.cosc0/u),a=Math.atan2(t.x*e,u*this.cosc0*n-t.y*this.sinc0*e)}else s=this.phic0,a=0;return t.x=a,t.y=s,r.default.inverse.apply(this,[t]),t.x=(0,i.A)(t.x+this.long0),t}var l=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];e.default={init:a,forward:s,inverse:u,names:l}},5602:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return c},init:function(){return l},inverse:function(){return f},names:function(){return h}});var r=n(6366),i=n(2092),o=n(3220),a=n(737),s=n(2556),u=n(4205);function l(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=(0,r.A)(this.es),this.ml0=(0,i.A)(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function c(t){var e,n,r,o=t.x,u=t.y,l=(0,a.A)(o-this.long0),c=Math.sin(u),f=Math.cos(u);if(this.es){var h=f*l,d=Math.pow(h,2),p=this.ep2*Math.pow(f,2),m=Math.pow(p,2),g=Math.abs(f)>s.H0?Math.tan(u):0,y=Math.pow(g,2),v=Math.pow(y,2);e=1-this.es*Math.pow(c,2),h/=Math.sqrt(e);var x=(0,i.A)(u,c,f,this.en);n=this.a*(this.k0*h*(1+d/6*(1-y+p+d/20*(5-18*y+v+14*p-58*y*p+d/42*(61+179*v-v*y-479*y)))))+this.x0,r=this.a*(this.k0*(x-this.ml0+c*l*h/2*(1+d/12*(5-y+9*p+4*m+d/30*(61+v-58*y+270*p-330*y*p+d/56*(1385+543*v-v*y-3111*y))))))+this.y0}else{var _=f*Math.sin(l);if(Math.abs(Math.abs(_)-1)<s.H0)return 93;if(n=.5*this.a*this.k0*Math.log((1+_)/(1-_))+this.x0,r=f*Math.cos(l)/Math.sqrt(1-Math.pow(_,2)),(_=Math.abs(r))>=1){if(_-1>s.H0)return 93;r=0}else r=Math.acos(r);u<0&&(r=-r),r=this.a*this.k0*(r-this.lat0)+this.y0}return t.x=n,t.y=r,t}function f(t){var e,n,r,i,l=(t.x-this.x0)*(1/this.a),c=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+c/this.k0,n=(0,o.A)(e,this.es,this.en),Math.abs(n)<s.sK){var f=Math.sin(n),h=Math.cos(n),d=Math.abs(h)>s.H0?Math.tan(n):0,p=this.ep2*Math.pow(h,2),m=Math.pow(p,2),g=Math.pow(d,2),y=Math.pow(g,2);e=1-this.es*Math.pow(f,2);var v=l*Math.sqrt(e)/this.k0,x=Math.pow(v,2);r=n-(e*=d)*x/(1-this.es)*.5*(1-x/12*(5+3*g-9*p*g+p-4*m-x/30*(61+90*g-252*p*g+45*y+46*p-x/56*(1385+3633*g+4095*y+1574*y*g)))),i=(0,a.A)(this.long0+v*(1-x/6*(1+2*g+p-x/20*(5+28*g+24*y+8*p*g+6*p-x/42*(61+662*g+1320*y+720*y*g))))/h)}else r=s.sK*(0,u.A)(c),i=0;else{var _=Math.exp(l/this.k0),b=.5*(_-1/_),w=this.lat0+c/this.k0,M=Math.cos(w);e=Math.sqrt((1-Math.pow(M,2))/(1+Math.pow(b,2))),r=Math.asin(e),c<0&&(r=-r),i=0===b&&0===M?0:(0,a.A)(Math.atan2(b,M)+this.long0)}return t.x=i,t.y=r,t}var h=["Fast_Transverse_Mercator","Fast Transverse Mercator"];e.default={init:l,forward:c,inverse:f,names:h}},7127:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return u},init:function(){return s},inverse:function(){return l},names:function(){return c}});var r=n(2556),i=n(1708),o={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},a={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function s(){if(Object.keys(a).forEach(function(t){if(void 0===this[t])this[t]=a[t].def;else{if(a[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);a[t].num&&(this[t]=parseFloat(this[t]))}a[t].degrees&&(this[t]=this[t]*r.zq)}.bind(this)),Math.abs(Math.abs(this.lat0)-r.sK)<r.H0?this.mode=this.lat0<0?o.S_POLE:o.N_POLE:Math.abs(this.lat0)<r.H0?this.mode=o.EQUIT:(this.mode=o.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)}function u(t){t.x-=this.long0;var e,n,r,i,a=Math.sin(t.y),s=Math.cos(t.y),u=Math.cos(t.x);switch(this.mode){case o.OBLIQ:n=this.sinph0*a+this.cosph0*s*u;break;case o.EQUIT:n=s*u;break;case o.S_POLE:n=-a;break;case o.N_POLE:n=a}switch(e=(n=this.pn1/(this.p-n))*s*Math.sin(t.x),this.mode){case o.OBLIQ:n*=this.cosph0*a-this.sinph0*s*u;break;case o.EQUIT:n*=a;break;case o.N_POLE:n*=-s*u;break;case o.S_POLE:n*=s*u}return i=1/((r=n*this.cg+e*this.sg)*this.sw*this.h1+this.cw),e=(e*this.cg-n*this.sg)*this.cw*i,n=r*i,t.x=e*this.a,t.y=n*this.a,t}function l(t){t.x/=this.a,t.y/=this.a;var e,n,a,s={x:t.x,y:t.y};a=1/(this.pn1-t.y*this.sw),e=this.pn1*t.x*a,n=this.pn1*t.y*this.cw*a,t.x=e*this.cg+n*this.sg,t.y=n*this.cg-e*this.sg;var u=(0,i.A)(t.x,t.y);if(Math.abs(u)<r.H0)s.x=0,s.y=t.y;else{var l,c;switch(c=1-u*u*this.pfact,c=(this.p-Math.sqrt(c))/(this.pn1/u+u/this.pn1),l=Math.sqrt(1-c*c),this.mode){case o.OBLIQ:s.y=Math.asin(l*this.sinph0+t.y*c*this.cosph0/u),t.y=(l-this.sinph0*Math.sin(s.y))*u,t.x*=c*this.cosph0;break;case o.EQUIT:s.y=Math.asin(t.y*c/u),t.y=l*u,t.x*=c;break;case o.N_POLE:s.y=Math.asin(l),t.y=-t.y;break;case o.S_POLE:s.y=-Math.asin(l)}s.x=Math.atan2(t.x,t.y)}return t.x=s.x+this.long0,t.y=s.y,t}var c=["Tilted_Perspective","tpers"];e.default={init:s,forward:u,inverse:l,names:c}},6748:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return l},dependsOn:function(){return a},init:function(){return s},names:function(){return u}});var r=n(737);var i=n(994),o=n(2556),a="etmerc";function s(){var t=function(t,e){if(void 0===t){if((t=Math.floor(30*((0,r.A)(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*o.zq,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,i.default.init.apply(this),this.forward=i.default.forward,this.inverse=i.default.inverse}var u=["Universal Transverse Mercator System","utm"],l={init:s,names:u,dependsOn:a}},3211:function(t,e,n){"use strict";n.r(e),n.d(e,{forward:function(){return s},init:function(){return a},inverse:function(){return u},names:function(){return l}});var r=n(737),i=n(2556),o=n(8609);function a(){this.R=this.a}function s(t){var e,n,a=t.x,s=t.y,u=(0,r.A)(a-this.long0);Math.abs(s)<=i.H0&&(e=this.x0+this.R*u,n=this.y0);var l=(0,o.A)(2*Math.abs(s/Math.PI));(Math.abs(u)<=i.H0||Math.abs(Math.abs(s)-i.sK)<=i.H0)&&(e=this.x0,n=s>=0?this.y0+Math.PI*this.R*Math.tan(.5*l):this.y0+Math.PI*this.R*-Math.tan(.5*l));var c=.5*Math.abs(Math.PI/u-u/Math.PI),f=c*c,h=Math.sin(l),d=Math.cos(l),p=d/(h+d-1),m=p*p,g=p*(2/h-1),y=g*g,v=Math.PI*this.R*(c*(p-y)+Math.sqrt(f*(p-y)*(p-y)-(y+f)*(m-y)))/(y+f);u<0&&(v=-v),e=this.x0+v;var x=f+p;return v=Math.PI*this.R*(g*x-c*Math.sqrt((y+f)*(f+1)-x*x))/(y+f),n=s>=0?this.y0+v:this.y0-v,t.x=e,t.y=n,t}function u(t){var e,n,o,a,s,u,l,c,f,h,d,p;return t.x-=this.x0,t.y-=this.y0,d=Math.PI*this.R,s=(o=t.x/d)*o+(a=t.y/d)*a,d=3*(a*a/(c=-2*(u=-Math.abs(a)*(1+s))+1+2*a*a+s*s)+(2*(l=u-2*a*a+o*o)*l*l/c/c/c-9*u*l/c/c)/27)/(f=(u-l*l/3/c)/c)/(h=2*Math.sqrt(-f/3)),Math.abs(d)>1&&(d=d>=0?1:-1),p=Math.acos(d)/3,n=t.y>=0?(-h*Math.cos(p+Math.PI/3)-l/3/c)*Math.PI:-(-h*Math.cos(p+Math.PI/3)-l/3/c)*Math.PI,e=Math.abs(o)<i.H0?this.long0:(0,r.A)(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(o*o-a*a)+s*s))/2/o),t.x=e,t.y=n,t}var l=["Van_der_Grinten_I","VanDerGrinten","vandg"];e.default={init:a,forward:s,inverse:u,names:l}},9689:function(t,e,n){var r={"./aea.js":5458,"./aeqd.js":8980,"./bonne.js":5789,"./cass.js":529,"./cea.js":4101,"./eqc.js":4256,"./eqdc.js":7968,"./eqearth.js":7129,"./equi.js":3667,"./etmerc.js":994,"./gauss.js":3246,"./geocent.js":4876,"./geos.js":469,"./gnom.js":9462,"./gstmerc.js":7041,"./krovak.js":6507,"./laea.js":7406,"./lcc.js":9269,"./longlat.js":2848,"./merc.js":2286,"./mill.js":5157,"./moll.js":5967,"./nzmg.js":6407,"./omerc.js":7475,"./ortho.js":8181,"./poly.js":2169,"./qsc.js":5722,"./robin.js":1295,"./sinu.js":9006,"./somerc.js":988,"./stere.js":688,"./sterea.js":865,"./tmerc.js":5602,"./tpers.js":7127,"./utm.js":6748,"./vandg.js":3211};function i(t){var e=o(t);return n(e)}function o(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}i.keys=function(){return Object.keys(r)},i.resolve=o,t.exports=i,i.id=9689},5685:function(t){t.exports="/* lineFeature fragment shader */\n\n#ifdef GL_ES\n  #ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n  #else\n    precision mediump float;\n  #endif\n#endif\nvarying vec4 strokeColorVar;\nvarying vec4 subpos;\nvarying vec4 info;\nvarying vec4 angles;\nuniform float antialiasing;\nuniform float miterLimit;\nuniform float fixedFlags;\n\nvoid main () {\n  vec4 color = strokeColorVar;\n  float opacity = 1.0;\n  int nearMode = int(floor(info.x + 0.5));\n  int farMode = int(floor(info.y + 0.5));\n  float cosABC = angles.x;\n  float sinABC = angles.y;\n  float cosBCD = angles.z;\n  float sinBCD = angles.w;\n  // never render on the opposite side of a miter.  This uses a bit of\n  // slop, via pow(smoothstep()) instead of step(), since there are\n  // precision issues in this calculation.  This doesn't wholly solve\n  // the precision issue; sometimes pixels are missed or double\n  // rendered along the inside seam of a miter.\n  if (nearMode >= 4) {\n    float dist = cosABC * subpos.x - sinABC * subpos.y;\n    opacity = min(opacity, pow(smoothstep(-0.02, 0.02, dist), 0.5));\n    if (opacity == 0.0) {\n      discard;\n    }\n  }\n  if (farMode >= 4) {\n    float dist = cosBCD * subpos.z - sinBCD * subpos.y;\n    opacity = min(opacity, pow(smoothstep(-0.02, 0.02, dist), 0.5));\n    if (opacity == 0.0) {\n      discard;\n    }\n  }\n  // butt or square cap\n  if ((nearMode == 0 || nearMode == 1) && subpos.x < antialiasing) {\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.x + subpos.w * float(nearMode)));\n  }\n  if ((farMode == 0 || farMode == 1) && subpos.z < antialiasing) {\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.z + subpos.w * float(farMode)));\n  }\n  // round cap\n  if (nearMode == 2 && subpos.x <= 0.0) {\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.w - sqrt(pow(subpos.x, 2.0) + pow(subpos.y - info.z * subpos.w, 2.0))));\n  }\n  if (farMode == 2 && subpos.z <= 0.0) {\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.w - sqrt(pow(subpos.z, 2.0) + pow(subpos.y - info.z * subpos.w, 2.0))));\n  }\n  // bevel and clip joins\n  if ((nearMode == 5 || nearMode == 7) && subpos.x < antialiasing) {\n    float dist = (sinABC * subpos.x + cosABC * subpos.y) * sign(sinABC);\n    float w = subpos.w * (1.0 - info.z * sign(sinABC));\n    float maxDist;\n    if (nearMode == 5)  maxDist = cosABC * w;\n    else                maxDist = miterLimit * w;\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, maxDist + dist));\n  }\n  if ((farMode == 5 || farMode == 7) && subpos.z < antialiasing) {\n    float dist = (sinBCD * subpos.z + cosBCD * subpos.y) * sign(sinBCD);\n    float w = subpos.w * (1.0 - info.z * sign(sinBCD));\n    float maxDist;\n    if (farMode == 5)  maxDist = cosBCD * w;\n    else               maxDist = miterLimit * w;\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, maxDist + dist));\n  }\n  // round join\n  if (nearMode == 6 && subpos.x <= 0.0) {\n    float w = subpos.w * (1.0 - info.z * sign(sinABC));\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, w - sqrt(pow(subpos.x, 2.0) + pow(subpos.y, 2.0))));\n  }\n  if (farMode == 6 && subpos.z <= 0.0) {\n    float w = subpos.w * (1.0 - info.z * sign(sinBCD));\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, w - sqrt(pow(subpos.z, 2.0) + pow(subpos.y, 2.0))));\n  }\n  // antialias along main edges\n  if (antialiasing > 0.0) {\n    if (subpos.y > subpos.w * (1.0 + info.z) - antialiasing) {\n      opacity = min(opacity, smoothstep(antialiasing, -antialiasing, subpos.y - subpos.w * (1.0 + info.z)));\n    }\n    if (subpos.y < subpos.w * (-1.0 + info.z) + antialiasing) {\n      opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.y - subpos.w * (-1.0 + info.z)));\n    }\n  }\n  if (opacity == 0.0) {\n    discard;\n  }\n  color.a *= opacity;\n  gl_FragColor = color;\n}\n"},9336:function(t){t.exports="/* lineFeature vertex shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nattribute vec3 pos;\nattribute vec3 prev;\nattribute vec3 next;\nattribute vec3 far;\nattribute float flags;\n\nattribute vec3 strokeColor;\nattribute float strokeOpacity;\nattribute float strokeWidth;\n\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float pixelWidth;\nuniform float aspect;\nuniform float miterLimit;\nuniform float antialiasing;\n\nvarying vec4 strokeColorVar;\nvarying vec4 subpos;  /* px, py, length - px, width */\nvarying vec4 info;  /* near mode, far mode, offset */\nvarying vec4 angles; /* near angle cos, sin, far angle cos, sin */\n\nconst float PI = 3.14159265358979323846264;\n\nvec4 viewCoord(vec3 c) {\n  vec4 result = projectionMatrix * modelViewMatrix * vec4(c.xyz, 1.0);\n  if (result.w != 0.0)  result = result / result.w;\n  return result;\n}\n\nfloat atan2(float y, float x) {\n  if (x > 0.0)  return atan(y / x);\n  if (x < 0.0 && y >= 0.0)  return atan(y / x) + PI;\n  if (x < 0.0)  return atan(y / x) - PI;\n  return sign(y) * 0.5 * PI;\n}\n\nvoid main(void)\n{\n  /* If any vertex has been deliberately set to a negative opacity,\n   * skip doing computations on it. */\n  if (strokeOpacity < 0.0) {\n    gl_Position = vec4(2.0, 2.0, 0.0, 1.0);\n    return;\n  }\n  /* convert coordinates.  We have four values, since we need to\n   * calculate the angles between the lines formed by prev-pos and\n   * pos-next, and between pos-next and next-far, plus know the angle\n   *   (prev)---(pos)---(next)---(far) => A---B---C---D */\n  vec4 A = viewCoord(prev);\n  vec4 B = viewCoord(pos);\n  vec4 C = viewCoord(next);\n  vec4 D = viewCoord(far);\n  // calculate line segment vector and angle\n  vec2 deltaCB = C.xy - B.xy;\n  if (deltaCB == vec2(0.0, 0.0)) {\n    gl_Position = vec4(2.0, 2.0, 0.0, 1.0);\n    return;\n  }\n  float angleCB = atan2(deltaCB.y, deltaCB.x * aspect);\n  // values we need to pass along\n  strokeColorVar = vec4(strokeColor, strokeOpacity);\n  // extract values from our flags field\n  int vertex = int(mod(flags, 4.0));\n  int nearMode = int(mod(floor(flags / 4.0), 8.0));\n  int farMode = int(mod(floor(flags / 32.0), 8.0));\n  // we use 11 bits of the flags for the offset, where -1023 to 1023\n  // maps to -1 to 1.  The 11 bits are a signed value, so simply\n  // selecting the bits will result in an unsigned values that may be\n  // greater than 1, in which case we have to subtract appropriately.\n  float offset = mod(floor(flags / 256.0), 2048.0) / 1023.0;\n  if (offset > 1.0)  offset -= 2048.0 / 1023.0;\n  // by default, offset by the width and don't extend lines.  Later,\n  // calculate line extensions based on end cap and end join modes\n  float yOffset = strokeWidth + antialiasing;\n  if (vertex == 0 || vertex == 2)  yOffset *= -1.0;\n  yOffset += strokeWidth * offset;\n  float xOffset = 0.0;\n  // end caps\n  if (nearMode == 0) {\n    xOffset = antialiasing;\n  } else if (nearMode == 1 || nearMode == 2) {\n    xOffset = strokeWidth + antialiasing;\n  }\n\n  // If joining lines, calculate the angles in screen space formed by\n  // the near end (A-B-C) and far end (B-C-D), and determine how much\n  // space is needed for the particular join.\n  //   This could be changed: if the lines are not a uniform width and\n  // offset, then the functional join angle is not simply half the\n  // angle between the two lines, but rather half the angle of the\n  // inside edge of the the two lines.\n  float cosABC = 1.0, sinABC = 0.0, cosBCD = 1.0, sinBCD = 0.0;  // of half angles\n  // handle near end\n  if (nearMode >= 4) {\n    float angleBA = atan2(B.y - A.y, (B.x - A.x) * aspect);\n    if (A.xy == B.xy)  angleBA = angleCB;\n    float angleABC = angleCB - angleBA;\n    // ensure angle is in the range [-PI, PI], then take the half angle\n    angleABC = (mod(angleABC + 3.0 * PI, 2.0 * PI) - PI) / 2.0;\n    cosABC = cos(angleABC);  sinABC = sin(angleABC);\n    // if this angle is close to flat, pass-through the join\n    if (nearMode >= 4 && cosABC > 0.999999) {\n      nearMode = 3;\n    }\n    // miter, miter-clip\n    if (nearMode == 4 || nearMode == 7) {\n      if (cosABC < 0.000001 || 1.0 / cosABC > miterLimit) {\n        if (nearMode == 4) {\n          nearMode = 5;\n        } else {\n          xOffset = miterLimit * strokeWidth * (1.0 - offset * sign(sinABC)) + antialiasing;\n        }\n      } else {\n        // we add an extra 1.0 to the xOffset to make sure that fragment\n        // shader is doing the clipping\n        xOffset = abs(sinABC / cosABC) * strokeWidth * (1.0 - offset * sign(sinABC)) + antialiasing + 1.0;\n        nearMode = 4;\n      }\n    }\n    // bevel or round join\n    if (nearMode == 5 || nearMode == 6) {\n      xOffset = strokeWidth * (1.0 - offset * sign(sinABC)) + antialiasing;\n    }\n  }\n\n  // handle far end\n  if (farMode >= 4) {\n    float angleDC = atan2(D.y - C.y, (D.x - C.x) * aspect);\n    if (D.xy == C.xy)  angleDC = angleCB;\n    float angleBCD = angleDC - angleCB;\n    // ensure angle is in the range [-PI, PI], then take the half angle\n    angleBCD = (mod(angleBCD + 3.0 * PI, 2.0 * PI) - PI) / 2.0;\n    cosBCD = cos(angleBCD);  sinBCD = sin(angleBCD);\n    // if this angle is close to flat, pass-through the join\n    if (farMode >= 4 && cosBCD > 0.999999) {\n      farMode = 3;\n    }\n    // miter, miter-clip\n    if (farMode == 4 || farMode == 7) {\n      if (cosBCD < 0.000001 || 1.0 / cosBCD > miterLimit) {\n        if (farMode == 4)  farMode = 5;\n      } else {\n        farMode = 4;\n      }\n    }\n  }\n\n  // compute the location of a vertex to include everything that might\n  // need to be rendered\n  xOffset *= -1.0;\n  gl_Position = vec4(\n    B.x + (xOffset * cos(angleCB) - yOffset * sin(angleCB)) * pixelWidth,\n    B.y + (xOffset * sin(angleCB) + yOffset * cos(angleCB)) * pixelWidth * aspect,\n    B.z, 1.0);\n  // store other values needed to determine which pixels to plot.\n  float lineLength = length(vec2(deltaCB.x, deltaCB.y / aspect)) / pixelWidth;\n\n  if (vertex == 0 || vertex == 1) {\n    subpos = vec4(xOffset, yOffset, lineLength - xOffset, strokeWidth);\n    info = vec4(float(nearMode), float(farMode), offset, 0.0);\n    angles = vec4(cosABC, sinABC, cosBCD, sinBCD);\n  } else {\n    subpos = vec4(lineLength - xOffset, -yOffset, xOffset, strokeWidth);\n    info = vec4(float(farMode), float(nearMode), -offset, 0.0);\n    angles = vec4(cosBCD, -sinBCD, cosABC, -sinABC);\n  }\n}\n"},1388:function(t){t.exports="/* lineFeature debug fragment shader */\n\n#ifdef GL_ES\n  #ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n  #else\n    precision mediump float;\n  #endif\n#endif\nvarying vec4 strokeColorVar;\nvarying vec4 subpos;\nvarying vec4 info;\nvarying vec4 angles;\nuniform float antialiasing;\nuniform float miterLimit;\nuniform float fixedFlags;\n\nvoid main () {\n  vec4 color = strokeColorVar;\n  bool debug = bool(mod(fixedFlags, 2.0));\n  float opacity = 1.0;\n  int nearMode = int(floor(info.x + 0.5));\n  int farMode = int(floor(info.y + 0.5));\n  float cosABC = angles.x;\n  float sinABC = angles.y;\n  float cosBCD = angles.z;\n  float sinBCD = angles.w;\n  // never render on the opposite side of a miter.  This uses a bit of\n  // slop, via pow(smoothstep()) instead of step(), since there are\n  // precision issues in this calculation.  This doesn't wholly solve\n  // the precision issue; sometimes pixels are missed or double\n  // rendered along the inside seam of a miter.\n  if (nearMode >= 4) {\n    float dist = cosABC * subpos.x - sinABC * subpos.y;\n    opacity = min(opacity, pow(smoothstep(-0.02, 0.02, dist), 0.5));\n    if (opacity == 0.0) {\n      if (debug) {\n        color.r = 255.0 / 255.0;\n        gl_FragColor = color;\n        return;\n      }\n      discard;\n    }\n  }\n  if (farMode >= 4) {\n    float dist = cosBCD * subpos.z - sinBCD * subpos.y;\n    opacity = min(opacity, pow(smoothstep(-0.02, 0.02, dist), 0.5));\n    if (opacity == 0.0) {\n      if (debug) {\n        color.r = 254.0 / 255.0;\n        gl_FragColor = color;\n        return;\n      }\n      discard;\n    }\n  }\n  // butt or square cap\n  if ((nearMode == 0 || nearMode == 1) && subpos.x < antialiasing) {\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.x + subpos.w * float(nearMode)));\n  }\n  if ((farMode == 0 || farMode == 1) && subpos.z < antialiasing) {\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.z + subpos.w * float(farMode)));\n  }\n  // round cap\n  if (nearMode == 2 && subpos.x <= 0.0) {\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.w - sqrt(pow(subpos.x, 2.0) + pow(subpos.y - info.z * subpos.w, 2.0))));\n  }\n  if (farMode == 2 && subpos.z <= 0.0) {\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.w - sqrt(pow(subpos.z, 2.0) + pow(subpos.y - info.z * subpos.w, 2.0))));\n  }\n  // bevel and clip joins\n  if ((nearMode == 5 || nearMode == 7) && subpos.x < antialiasing) {\n    float dist = (sinABC * subpos.x + cosABC * subpos.y) * sign(sinABC);\n    float w = subpos.w * (1.0 - info.z * sign(sinABC));\n    float maxDist;\n    if (nearMode == 5)  maxDist = cosABC * w;\n    else                maxDist = miterLimit * w;\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, maxDist + dist));\n  }\n  if ((farMode == 5 || farMode == 7) && subpos.z < antialiasing) {\n    float dist = (sinBCD * subpos.z + cosBCD * subpos.y) * sign(sinBCD);\n    float w = subpos.w * (1.0 - info.z * sign(sinBCD));\n    float maxDist;\n    if (farMode == 5)  maxDist = cosBCD * w;\n    else               maxDist = miterLimit * w;\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, maxDist + dist));\n  }\n  // round join\n  if (nearMode == 6 && subpos.x <= 0.0) {\n    float w = subpos.w * (1.0 - info.z * sign(sinABC));\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, w - sqrt(pow(subpos.x, 2.0) + pow(subpos.y, 2.0))));\n  }\n  if (farMode == 6 && subpos.z <= 0.0) {\n    float w = subpos.w * (1.0 - info.z * sign(sinBCD));\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, w - sqrt(pow(subpos.z, 2.0) + pow(subpos.y, 2.0))));\n  }\n  // antialias along main edges\n  if (antialiasing > 0.0) {\n    if (subpos.y > subpos.w * (1.0 + info.z) - antialiasing) {\n      opacity = min(opacity, smoothstep(antialiasing, -antialiasing, subpos.y - subpos.w * (1.0 + info.z)));\n    }\n    if (subpos.y < subpos.w * (-1.0 + info.z) + antialiasing) {\n      opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.y - subpos.w * (-1.0 + info.z)));\n    }\n  }\n  if (opacity == 0.0) {\n    if (debug) {\n      color.r = 253.0 / 255.0;\n      gl_FragColor = color;\n      return;\n    }\n    discard;\n  }\n  color.a *= opacity;\n  gl_FragColor = color;\n}\n"},9923:function(t){t.exports="/* markerFeature square/triangle fragment shader */\n\n/* markerFeature common fragment shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nvarying float radiusVar;\nvarying vec4 fillColorVar;\nvarying vec4 strokeColorVar;\nvarying float strokeWidthVar;\nvarying float symbolVar;  /* contains some bit fields */\nvarying float symbolValueVar;\nvarying float rotationVar;\n// the square/triangle shader defines unitVar\nconst int symbolEllipse = 0;\nconst int symbolFlowerBase = 1;\nconst int symbolFlowerMax = 16;\nconst int symbolTriangle = 16;\nconst int symbolStarBase = 17;\nconst int symbolStarMax = 16;\nconst int symbolRectangle = 32;\nconst int symbolCrossBase = 33;\nconst int symbolCrossMax = 16;\nconst int symbolOval = 48;\nconst int symbolJackBase = 49;\nconst int symbolJackMax = 16;\nconst int symbolDrop = 64;\nconst int symbolDropBase = 65;\nconst int symbolDropMax = 16;\nconst int symbolArrow = 80;\nconst int symbolArrowBase = 81;\nconst int symbolArrowMax = 16;\n// Distance to antialias in pixels\nconst float antialiasDist = 1.5;\n\n/* Compute the distance from a point to an arrow defined by the radiusVar and a\n * packed value containing\n *   headWidth: ratio to radius (0, 1]\n *   headLength: ratio to diameter (0, 1]\n *   stemWidth: ratio to headWidth [0, 1]\n *   sweep: boolean\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float packed: the packed value.\n * Exit:  float dist: the distance to the drop in pixels.  Negative is inside.\n */\nfloat distanceToArrow(vec2 pos, float value) {\n  bool sweep = value < 0.0;\n  value = abs(value);\n  float pack0 = (mod(value, 252.0) - 1.0) / 250.0;\n  value = floor(value / 252.0);\n  float pack1 = (mod(value, 252.0) - 1.0) / 250.0;\n  value = floor(value / 252.0);\n  float pack2 = (mod(value, 252.0) - 1.0) / 250.0;\n\n  float headWidth = (pack0 > 0.0 ? pack0 : 2.0 / 3.0);\n  float headEnd = 1.0 - 2.0 * (pack1 > 0.0 ? pack1 : 1.0 / 2.0);\n  float stemWidth = headWidth * (pack2 >= 0.0 ? pack2 : 1.0 / 3.0);\n  if (length(vec2(headWidth, headEnd)) > 1.0) {\n    vec2 scaledHead = normalize(vec2(headWidth, headEnd));\n    headWidth = scaledHead.x;\n    headEnd = scaledHead.y;\n  }\n  float stemEnd = -cos(asin(stemWidth));\n\n  headWidth *= radiusVar;\n  headEnd *= radiusVar;\n  stemWidth *= radiusVar;\n  stemEnd *= radiusVar;\n  pos.y = abs(pos.y);\n  float stemDist = pos.y - stemWidth;\n  float stemEndDist = stemEnd - pos.x;\n  float B = (radiusVar - headEnd) / headWidth;\n  float headDist = (pos.x + B * pos.y - radiusVar) / sqrt(1.0 + B * B);\n  float headEndDist;\n  if (sweep) {\n    B = (radiusVar - headEnd) / 3.0 / headWidth;\n    headEndDist = -(pos.x + B * pos.y - (radiusVar + headEnd * 2.0) / 3.0) / sqrt(1.0 + B * B);\n  } else {\n    headEndDist = headEnd - pos.x;\n  }\n  headEndDist = min(headEndDist, stemDist);\n  return max(max(headDist, headEndDist), stemEndDist);\n}\n\n/* Compute the distance from a point to a drop defined by the radiusVar (the\n * semimajor axis) and ratio (between the minor and major radii).\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the drop in pixels.  Negative is inside.\n */\nfloat distanceToDrop(vec2 pos, float ratio) {\n  ratio = abs(ratio);\n  if (ratio == 0.0 || ratio >= 1.0) {\n    ratio = 1.0;\n  }\n  float r = radiusVar * ratio;\n  float cx = radiusVar - r;\n  float rad = distance(pos.xy, vec2(cx, 0.0)) - r;\n  if (ratio < 0.5) {\n    float x = radiusVar - r - r * r / cx;\n    float y = sqrt(r * r - (cx - x) * (cx - x));\n    float Bt = (cx - x) / y;\n    if ((pos.x + Bt * abs(pos.y) - cx) / sqrt(1.0 + Bt * Bt) < 0.0) {\n      float B = -x / y;\n      return -(pos.x + B * abs(pos.y)) / sqrt(1.0 + B * B);\n    }\n  }\n  return rad;\n}\n\n/* Compute the distance from a point to the ellipse defined by the radiusVar\n * (the semimajor axis) and ratio (between the minor and major axes).\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the ellipse in pixels.  Negative is\n *   inside.\n */\nfloat distanceToEllipse(vec2 pos, float ratio) {\n  // a and b are the semi-major and semi-minor axes\n  // ratio is the between the minor and major axes.  If > 1, swap these and\n  // rotate 90 degrees.\n  if (ratio == 0.0) {\n    ratio = 1.0;\n  }\n  float a = radiusVar, b = abs(radiusVar * ratio);\n  if (b > a) {\n    pos = vec2(pos.y, -pos.x);\n    b = abs(radiusVar / ratio);\n  }\n  float a2 = a * a, b2 = b * b;\n  // compute the distance to the ellipse.  See this discussion:\n  // https://stackoverflow.com/questions/22959698\n  float f = sqrt(a2 - b2),\n        // this value will be positive if outside and negative if inside.  If\n        // we used it directly, the stroke would be too thick along the long\n        // edges of the ellipse\n        d = (distance(pos, vec2(f, 0.0)) + distance(pos, vec2(-f, 0.0))) * 0.5 - a;\n  // if we are outside of the ellipse, accuracy is not important, so return\n  // early.\n  if (d >= 0.0) {\n    return d;\n  }\n  // work in one quadrant\n  pos = abs(pos);\n  // t (the angle from center) could start as `atan(pos.y, pos.x)`, but this\n  // results in a slower solution near narrow ends\n  float t = 0.7;\n  float cost = cos(t), sint = sin(t), x = a * cost, y = b * sint;\n  vec2 lastxy;\n  for (int iter = 0; iter < 10; iter += 1) {\n    lastxy = vec2(x, y);\n    float ex = (a2 - b2) * pow(cost, 3.0) / a,\n          ey = (b2 - a2) * pow(sint, 3.0) / b;\n    vec2 r = vec2(x - ex, y - ey),\n         q = vec2(pos.x - ex, pos.y - ey);\n    float lenr = length(r);\n    t += lenr * asin((r.x * q.y - r.y * q.x) / lenr / length(q)) / sqrt(a2 + b2 - x * x - y * y);\n    t = clamp(t, 0.0, acos(0.0));\n    cost = cos(t);\n    sint = sin(t);\n    x = a * cost;\n    y = b * sint;\n    if (distance(lastxy, vec2(x, y)) < 0.05) {\n      break;\n    }\n  }\n  return sign(d) * distance(pos, vec2(x, y));\n}\n\n/* Compute the distance from a point to an isosceles triangle.\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: length of the base compared to the other sides.\n * Exit:  float dist: the distance to the rectangle in pixels.  Negative is\n *   inside.\n */\nfloat distanceToIsoscelesTriangle(vec2 pos, float ratio) {\n  ratio = clamp(abs(ratio), 0.0, 2.0);\n  if (ratio == 0.0 || ratio == 2.0) {\n    ratio = 1.0;\n  }\n  float s1, s2, x0, x1, y1;\n  if (ratio < sqrt(2.0)) {\n    s1 = radiusVar * sqrt(4.0 - ratio * ratio); // length of equal sides\n    s2 = s1 * ratio;\n    y1 = s2 / 2.0;\n    x0 = radiusVar;\n    x1 = x0 - sqrt(s1 * s1 - y1 * y1);\n  } else {\n    s2 = radiusVar * 2.0;\n    s1 = s2 / ratio;\n    y1 = s2 / 2.0;\n    x0 = sqrt(s1 * s1 - y1 * y1);\n    x1 = 0.0;\n  }\n  float B = (x0 - x1) / y1;\n  return max(x1 - pos.x, (pos.x + B * abs(pos.y) - x0) / sqrt(1.0 + B * B));\n}\n\n/* Compute the distance from a point to an oval defined by the radiusVar (the\n * semimajor axis) and ratio (between the minor and major axes).  Here an oval\n * is defined as two semicircles connected by straight line segments.\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the oval in pixels.  Negative is inside.\n */\nfloat distanceToOval(vec2 pos, float ratio) {\n  ratio = abs(ratio);\n  if (ratio == 0.0 || ratio >= 1.0) {\n    ratio = 1.0;\n  }\n  float minor = radiusVar * ratio;\n  float center = radiusVar - minor;\n  pos = abs(pos);\n  if (pos.x <= center) {\n    return pos.y - minor;\n  }\n  return distance(pos, vec2(center, 0.0)) - minor;\n}\n\n/* Compute the distance from a point to a rectangle defined by the radiusVar\n * (the semidiagonal) and ratio (between the minor and major axes).\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the rectangle in pixels.  Negative is\n *   inside.\n */\nfloat distanceToRectangle(vec2 pos, float ratio) {\n  ratio = abs(ratio);\n  if (ratio == 0.0) {\n    ratio = 1.0;\n  }\n  vec2 wh = normalize(vec2(1.0, abs(ratio))) * radiusVar;\n  vec2 dist = abs(pos) - wh;\n  return max(dist.x, dist.y);\n}\n\n/* Based on a repetition value, return a position for rotational symmetry.\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        int repetitions: number of repetitions on the cross.\n * Exit:  float dist: a point in the primary position.\n */\nvec2 rotationalSymmetry(vec2 pos, int repetitions) {\n  float pi = acos(-1.0);\n  float limit = pi / float(repetitions);\n  float ang = atan(pos.y, pos.x);\n  ang = mod(ang + pi * 2.0, limit * 2.0);\n  if (ang > limit) {\n    ang -= limit * 2.0;\n  }\n  return vec2(cos(ang), sin(ang)) * length(pos);\n}\n\nvoid markerFeatureFragment(vec2 pos) {\n  // rad is a value in pixels from the edge of the symbol where negative is\n  // inside the shape\n  float rad = length(pos.xy) - radiusVar;\n  // never allow points outside of the main radius\n  if (rad > 0.0) {\n    discard;\n    return;\n  }\n  // apply clockwise rotation\n  if (rotationVar != 0.0) {\n    float cosr = cos(rotationVar), sinr = sin(rotationVar);\n    pos = vec2(pos.x * cosr + pos.y * sinr, -pos.x * sinr + pos.y * cosr);\n  }\n\n  int symbol = int(floor(symbolVar / 64.0));\n  bool isimage = bool(mod(floor(symbolVar / 8.0), 2.0));\n  vec4 fillColor, strokeColor;\n  float endStep;\n\n  float ratio = symbolValueVar;\n  // When ratio is 0, it usually gets changed to 1; some shapes could have\n  // better defaults\n  /* Symbol shapes */\n  if (symbol == symbolTriangle) {\n    rad = distanceToIsoscelesTriangle(pos, ratio);\n  } else if (symbol == symbolRectangle) {\n    rad = distanceToRectangle(pos, ratio);\n  } else if (symbol == symbolOval) {\n    rad = distanceToOval(pos, ratio);\n  } else if (symbol == symbolDrop) {\n    rad = distanceToDrop(pos, ratio);\n  } else if (symbol == symbolArrow) {\n    rad = distanceToArrow(pos, ratio);\n  } else if (symbol >= symbolCrossBase && symbol <= symbolCrossBase + symbolCrossMax - 2) {\n    rad = distanceToRectangle(rotationalSymmetry(pos, symbol - symbolCrossBase + 2), ratio);\n  } else if (symbol >= symbolFlowerBase && symbol <= symbolFlowerBase + symbolFlowerMax - 2) {\n    rad = distanceToEllipse(rotationalSymmetry(pos, symbol - symbolFlowerBase + 2), ratio);\n  } else if (symbol >= symbolStarBase && symbol <= symbolStarBase + symbolStarMax - 2) {\n    rad = distanceToIsoscelesTriangle(rotationalSymmetry(pos, symbol - symbolStarBase + 2), ratio);\n  } else if (symbol >= symbolJackBase && symbol <= symbolJackBase + symbolJackMax - 2) {\n    rad = distanceToOval(rotationalSymmetry(pos, symbol - symbolJackBase + 2), ratio);\n  } else if (symbol >= symbolDropBase && symbol <= symbolDropBase + symbolDropMax - 2) {\n    rad = distanceToDrop(rotationalSymmetry(pos, symbol - symbolDropBase + 2), ratio);\n  } else if (symbol >= symbolArrowBase && symbol <= symbolArrowBase + symbolArrowMax - 2) {\n    rad = distanceToArrow(rotationalSymmetry(pos, symbol - symbolArrowBase + 2), ratio);\n  } else { // default - circle or ellipse; a value of 0 or 1 is a circle\n    if (ratio != 0.0 && ratio != 1.0) {\n      rad = distanceToEllipse(pos, ratio);\n    }\n  }\n\n  if (rad >= 0.0) {\n    discard;\n    return;\n  }\n  // If there is no stroke, the fill region should transition to nothing\n  if (strokeColorVar.a == 0.0 || strokeWidthVar <= 0.0) {\n    strokeColor = vec4(fillColorVar.rgb, 0.0);\n    endStep = 0.0;\n  } else {\n    strokeColor = strokeColorVar;\n    endStep = -strokeWidthVar;\n  }\n  // Likewise, if there is no fill, the stroke should transition to nothing\n  if (fillColorVar.a == 0.0) {\n    fillColor = vec4(strokeColorVar.rgb, 0.0);\n  } else {\n    fillColor = fillColorVar;\n  }\n  if (rad <= endStep) {\n    float step = smoothstep(endStep - antialiasDist, endStep, rad);\n    vec4 color = mix(fillColor, strokeColor, step);\n    float step2 = smoothstep(-antialiasDist, 0.0, rad);\n    gl_FragColor = mix(color, vec4(color.rgb, 0.0), step2);\n  } else {\n    float step = smoothstep(-antialiasDist, 0.0, rad);\n    gl_FragColor = mix(strokeColor, vec4(strokeColor.rgb, 0.0), step);\n  }\n}\n\n\nvarying vec2 unitVar;  // distinct for square/triangle\n\nvoid main() {\n  if (fillColorVar.a == 0.0 && strokeColorVar.a == 0.0)\n    discard;\n  markerFeatureFragment(unitVar);\n}\n"},1202:function(t){t.exports="/* markerFeature square/triangle vertex shader */\n\n/* markerFeature common vertex shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nattribute vec3 pos;\nattribute float radius;\nattribute vec3 fillColor;\nattribute float fillOpacity;\nattribute vec3 strokeColor;\nattribute float strokeOpacity;\nattribute float strokeWidth;\nattribute float symbol;  /* contains some bit fields */\nattribute float symbolValue;\nattribute float rotation;\nuniform float zoom;\nuniform float rotationUniform;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\n// non-sprite has other definitions.\nvarying float radiusVar;\nvarying vec4 fillColorVar;\nvarying vec4 strokeColorVar;\nvarying float strokeWidthVar;\nvarying float symbolVar;  /* contains some bit fields */\nvarying float symbolValueVar;\nvarying float rotationVar;\n\nfloat markerFeaturePrep(void)\n{\n  // No stroke or fill implies nothing to draw\n  if (radius <= 0.0 || (strokeOpacity <= 0.0 && fillOpacity <= 0.0)) {\n    gl_Position = vec4(2.0, 2.0, 0.0, 1.0);\n    return 0.0;\n  }\n  radiusVar = radius;\n  strokeWidthVar = strokeWidth;\n  int scaleMode = int(mod(symbol, 4.0));\n  float strokeOffset = mod(floor(symbol / 16.0), 4.0) - 1.0;\n  radiusVar += (strokeOffset + 1.0) / 2.0 * strokeWidthVar;\n  if (scaleMode == 1) { // fill\n    radiusVar = (radiusVar - strokeWidthVar) * exp2(zoom) + strokeWidthVar;\n  } else if (scaleMode == 2) { // stroke\n    radiusVar += strokeWidthVar * (exp2(zoom) - 1.0);\n    strokeWidthVar *= exp2(zoom);\n  } else if (scaleMode == 3) { // all\n    radiusVar *= exp2(zoom);\n    strokeWidthVar *= exp2(zoom);\n  }\n  fillColorVar = vec4(fillColor, fillOpacity);\n  strokeColorVar = vec4(strokeColor, strokeOpacity);\n  symbolVar = symbol;\n  symbolValueVar = symbolValue;\n  rotationVar = rotation;\n  if (bool(mod(floor(symbolVar / 4.0), 2.0))) {\n    rotationVar += rotationUniform;\n  }\n  return radiusVar;\n}\n\n\nuniform float pixelWidth; // for non-sprite\nuniform float aspect; // for non-sprite\nattribute vec2 unit; // for non-sprite\nvarying vec2 unitVar; // for non-sprite\n\nvoid main(void)\n{\n  radiusVar = markerFeaturePrep();\n  if (radiusVar == 0.0) {\n    return;\n  }\n  // for non-sprite\n  unitVar = unit * radiusVar;\n  unitVar.y *= -1.0;\n  vec4 p = (projectionMatrix * modelViewMatrix * vec4(pos, 1.0)).xyzw;\n  if (p.w != 0.0) {\n    p = p / p.w;\n  }\n  p += radiusVar * vec4(unit.x * pixelWidth, unit.y * pixelWidth * aspect, 0.0, 1.0);\n  gl_Position = vec4(p.xyz, 1.0);\n}\n"},3724:function(t){t.exports="/* markerFeature sprite fragment shader */\n\n/* markerFeature common fragment shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nvarying float radiusVar;\nvarying vec4 fillColorVar;\nvarying vec4 strokeColorVar;\nvarying float strokeWidthVar;\nvarying float symbolVar;  /* contains some bit fields */\nvarying float symbolValueVar;\nvarying float rotationVar;\n// the square/triangle shader defines unitVar\nconst int symbolEllipse = 0;\nconst int symbolFlowerBase = 1;\nconst int symbolFlowerMax = 16;\nconst int symbolTriangle = 16;\nconst int symbolStarBase = 17;\nconst int symbolStarMax = 16;\nconst int symbolRectangle = 32;\nconst int symbolCrossBase = 33;\nconst int symbolCrossMax = 16;\nconst int symbolOval = 48;\nconst int symbolJackBase = 49;\nconst int symbolJackMax = 16;\nconst int symbolDrop = 64;\nconst int symbolDropBase = 65;\nconst int symbolDropMax = 16;\nconst int symbolArrow = 80;\nconst int symbolArrowBase = 81;\nconst int symbolArrowMax = 16;\n// Distance to antialias in pixels\nconst float antialiasDist = 1.5;\n\n/* Compute the distance from a point to an arrow defined by the radiusVar and a\n * packed value containing\n *   headWidth: ratio to radius (0, 1]\n *   headLength: ratio to diameter (0, 1]\n *   stemWidth: ratio to headWidth [0, 1]\n *   sweep: boolean\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float packed: the packed value.\n * Exit:  float dist: the distance to the drop in pixels.  Negative is inside.\n */\nfloat distanceToArrow(vec2 pos, float value) {\n  bool sweep = value < 0.0;\n  value = abs(value);\n  float pack0 = (mod(value, 252.0) - 1.0) / 250.0;\n  value = floor(value / 252.0);\n  float pack1 = (mod(value, 252.0) - 1.0) / 250.0;\n  value = floor(value / 252.0);\n  float pack2 = (mod(value, 252.0) - 1.0) / 250.0;\n\n  float headWidth = (pack0 > 0.0 ? pack0 : 2.0 / 3.0);\n  float headEnd = 1.0 - 2.0 * (pack1 > 0.0 ? pack1 : 1.0 / 2.0);\n  float stemWidth = headWidth * (pack2 >= 0.0 ? pack2 : 1.0 / 3.0);\n  if (length(vec2(headWidth, headEnd)) > 1.0) {\n    vec2 scaledHead = normalize(vec2(headWidth, headEnd));\n    headWidth = scaledHead.x;\n    headEnd = scaledHead.y;\n  }\n  float stemEnd = -cos(asin(stemWidth));\n\n  headWidth *= radiusVar;\n  headEnd *= radiusVar;\n  stemWidth *= radiusVar;\n  stemEnd *= radiusVar;\n  pos.y = abs(pos.y);\n  float stemDist = pos.y - stemWidth;\n  float stemEndDist = stemEnd - pos.x;\n  float B = (radiusVar - headEnd) / headWidth;\n  float headDist = (pos.x + B * pos.y - radiusVar) / sqrt(1.0 + B * B);\n  float headEndDist;\n  if (sweep) {\n    B = (radiusVar - headEnd) / 3.0 / headWidth;\n    headEndDist = -(pos.x + B * pos.y - (radiusVar + headEnd * 2.0) / 3.0) / sqrt(1.0 + B * B);\n  } else {\n    headEndDist = headEnd - pos.x;\n  }\n  headEndDist = min(headEndDist, stemDist);\n  return max(max(headDist, headEndDist), stemEndDist);\n}\n\n/* Compute the distance from a point to a drop defined by the radiusVar (the\n * semimajor axis) and ratio (between the minor and major radii).\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the drop in pixels.  Negative is inside.\n */\nfloat distanceToDrop(vec2 pos, float ratio) {\n  ratio = abs(ratio);\n  if (ratio == 0.0 || ratio >= 1.0) {\n    ratio = 1.0;\n  }\n  float r = radiusVar * ratio;\n  float cx = radiusVar - r;\n  float rad = distance(pos.xy, vec2(cx, 0.0)) - r;\n  if (ratio < 0.5) {\n    float x = radiusVar - r - r * r / cx;\n    float y = sqrt(r * r - (cx - x) * (cx - x));\n    float Bt = (cx - x) / y;\n    if ((pos.x + Bt * abs(pos.y) - cx) / sqrt(1.0 + Bt * Bt) < 0.0) {\n      float B = -x / y;\n      return -(pos.x + B * abs(pos.y)) / sqrt(1.0 + B * B);\n    }\n  }\n  return rad;\n}\n\n/* Compute the distance from a point to the ellipse defined by the radiusVar\n * (the semimajor axis) and ratio (between the minor and major axes).\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the ellipse in pixels.  Negative is\n *   inside.\n */\nfloat distanceToEllipse(vec2 pos, float ratio) {\n  // a and b are the semi-major and semi-minor axes\n  // ratio is the between the minor and major axes.  If > 1, swap these and\n  // rotate 90 degrees.\n  if (ratio == 0.0) {\n    ratio = 1.0;\n  }\n  float a = radiusVar, b = abs(radiusVar * ratio);\n  if (b > a) {\n    pos = vec2(pos.y, -pos.x);\n    b = abs(radiusVar / ratio);\n  }\n  float a2 = a * a, b2 = b * b;\n  // compute the distance to the ellipse.  See this discussion:\n  // https://stackoverflow.com/questions/22959698\n  float f = sqrt(a2 - b2),\n        // this value will be positive if outside and negative if inside.  If\n        // we used it directly, the stroke would be too thick along the long\n        // edges of the ellipse\n        d = (distance(pos, vec2(f, 0.0)) + distance(pos, vec2(-f, 0.0))) * 0.5 - a;\n  // if we are outside of the ellipse, accuracy is not important, so return\n  // early.\n  if (d >= 0.0) {\n    return d;\n  }\n  // work in one quadrant\n  pos = abs(pos);\n  // t (the angle from center) could start as `atan(pos.y, pos.x)`, but this\n  // results in a slower solution near narrow ends\n  float t = 0.7;\n  float cost = cos(t), sint = sin(t), x = a * cost, y = b * sint;\n  vec2 lastxy;\n  for (int iter = 0; iter < 10; iter += 1) {\n    lastxy = vec2(x, y);\n    float ex = (a2 - b2) * pow(cost, 3.0) / a,\n          ey = (b2 - a2) * pow(sint, 3.0) / b;\n    vec2 r = vec2(x - ex, y - ey),\n         q = vec2(pos.x - ex, pos.y - ey);\n    float lenr = length(r);\n    t += lenr * asin((r.x * q.y - r.y * q.x) / lenr / length(q)) / sqrt(a2 + b2 - x * x - y * y);\n    t = clamp(t, 0.0, acos(0.0));\n    cost = cos(t);\n    sint = sin(t);\n    x = a * cost;\n    y = b * sint;\n    if (distance(lastxy, vec2(x, y)) < 0.05) {\n      break;\n    }\n  }\n  return sign(d) * distance(pos, vec2(x, y));\n}\n\n/* Compute the distance from a point to an isosceles triangle.\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: length of the base compared to the other sides.\n * Exit:  float dist: the distance to the rectangle in pixels.  Negative is\n *   inside.\n */\nfloat distanceToIsoscelesTriangle(vec2 pos, float ratio) {\n  ratio = clamp(abs(ratio), 0.0, 2.0);\n  if (ratio == 0.0 || ratio == 2.0) {\n    ratio = 1.0;\n  }\n  float s1, s2, x0, x1, y1;\n  if (ratio < sqrt(2.0)) {\n    s1 = radiusVar * sqrt(4.0 - ratio * ratio); // length of equal sides\n    s2 = s1 * ratio;\n    y1 = s2 / 2.0;\n    x0 = radiusVar;\n    x1 = x0 - sqrt(s1 * s1 - y1 * y1);\n  } else {\n    s2 = radiusVar * 2.0;\n    s1 = s2 / ratio;\n    y1 = s2 / 2.0;\n    x0 = sqrt(s1 * s1 - y1 * y1);\n    x1 = 0.0;\n  }\n  float B = (x0 - x1) / y1;\n  return max(x1 - pos.x, (pos.x + B * abs(pos.y) - x0) / sqrt(1.0 + B * B));\n}\n\n/* Compute the distance from a point to an oval defined by the radiusVar (the\n * semimajor axis) and ratio (between the minor and major axes).  Here an oval\n * is defined as two semicircles connected by straight line segments.\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the oval in pixels.  Negative is inside.\n */\nfloat distanceToOval(vec2 pos, float ratio) {\n  ratio = abs(ratio);\n  if (ratio == 0.0 || ratio >= 1.0) {\n    ratio = 1.0;\n  }\n  float minor = radiusVar * ratio;\n  float center = radiusVar - minor;\n  pos = abs(pos);\n  if (pos.x <= center) {\n    return pos.y - minor;\n  }\n  return distance(pos, vec2(center, 0.0)) - minor;\n}\n\n/* Compute the distance from a point to a rectangle defined by the radiusVar\n * (the semidiagonal) and ratio (between the minor and major axes).\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the rectangle in pixels.  Negative is\n *   inside.\n */\nfloat distanceToRectangle(vec2 pos, float ratio) {\n  ratio = abs(ratio);\n  if (ratio == 0.0) {\n    ratio = 1.0;\n  }\n  vec2 wh = normalize(vec2(1.0, abs(ratio))) * radiusVar;\n  vec2 dist = abs(pos) - wh;\n  return max(dist.x, dist.y);\n}\n\n/* Based on a repetition value, return a position for rotational symmetry.\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        int repetitions: number of repetitions on the cross.\n * Exit:  float dist: a point in the primary position.\n */\nvec2 rotationalSymmetry(vec2 pos, int repetitions) {\n  float pi = acos(-1.0);\n  float limit = pi / float(repetitions);\n  float ang = atan(pos.y, pos.x);\n  ang = mod(ang + pi * 2.0, limit * 2.0);\n  if (ang > limit) {\n    ang -= limit * 2.0;\n  }\n  return vec2(cos(ang), sin(ang)) * length(pos);\n}\n\nvoid markerFeatureFragment(vec2 pos) {\n  // rad is a value in pixels from the edge of the symbol where negative is\n  // inside the shape\n  float rad = length(pos.xy) - radiusVar;\n  // never allow points outside of the main radius\n  if (rad > 0.0) {\n    discard;\n    return;\n  }\n  // apply clockwise rotation\n  if (rotationVar != 0.0) {\n    float cosr = cos(rotationVar), sinr = sin(rotationVar);\n    pos = vec2(pos.x * cosr + pos.y * sinr, -pos.x * sinr + pos.y * cosr);\n  }\n\n  int symbol = int(floor(symbolVar / 64.0));\n  bool isimage = bool(mod(floor(symbolVar / 8.0), 2.0));\n  vec4 fillColor, strokeColor;\n  float endStep;\n\n  float ratio = symbolValueVar;\n  // When ratio is 0, it usually gets changed to 1; some shapes could have\n  // better defaults\n  /* Symbol shapes */\n  if (symbol == symbolTriangle) {\n    rad = distanceToIsoscelesTriangle(pos, ratio);\n  } else if (symbol == symbolRectangle) {\n    rad = distanceToRectangle(pos, ratio);\n  } else if (symbol == symbolOval) {\n    rad = distanceToOval(pos, ratio);\n  } else if (symbol == symbolDrop) {\n    rad = distanceToDrop(pos, ratio);\n  } else if (symbol == symbolArrow) {\n    rad = distanceToArrow(pos, ratio);\n  } else if (symbol >= symbolCrossBase && symbol <= symbolCrossBase + symbolCrossMax - 2) {\n    rad = distanceToRectangle(rotationalSymmetry(pos, symbol - symbolCrossBase + 2), ratio);\n  } else if (symbol >= symbolFlowerBase && symbol <= symbolFlowerBase + symbolFlowerMax - 2) {\n    rad = distanceToEllipse(rotationalSymmetry(pos, symbol - symbolFlowerBase + 2), ratio);\n  } else if (symbol >= symbolStarBase && symbol <= symbolStarBase + symbolStarMax - 2) {\n    rad = distanceToIsoscelesTriangle(rotationalSymmetry(pos, symbol - symbolStarBase + 2), ratio);\n  } else if (symbol >= symbolJackBase && symbol <= symbolJackBase + symbolJackMax - 2) {\n    rad = distanceToOval(rotationalSymmetry(pos, symbol - symbolJackBase + 2), ratio);\n  } else if (symbol >= symbolDropBase && symbol <= symbolDropBase + symbolDropMax - 2) {\n    rad = distanceToDrop(rotationalSymmetry(pos, symbol - symbolDropBase + 2), ratio);\n  } else if (symbol >= symbolArrowBase && symbol <= symbolArrowBase + symbolArrowMax - 2) {\n    rad = distanceToArrow(rotationalSymmetry(pos, symbol - symbolArrowBase + 2), ratio);\n  } else { // default - circle or ellipse; a value of 0 or 1 is a circle\n    if (ratio != 0.0 && ratio != 1.0) {\n      rad = distanceToEllipse(pos, ratio);\n    }\n  }\n\n  if (rad >= 0.0) {\n    discard;\n    return;\n  }\n  // If there is no stroke, the fill region should transition to nothing\n  if (strokeColorVar.a == 0.0 || strokeWidthVar <= 0.0) {\n    strokeColor = vec4(fillColorVar.rgb, 0.0);\n    endStep = 0.0;\n  } else {\n    strokeColor = strokeColorVar;\n    endStep = -strokeWidthVar;\n  }\n  // Likewise, if there is no fill, the stroke should transition to nothing\n  if (fillColorVar.a == 0.0) {\n    fillColor = vec4(strokeColorVar.rgb, 0.0);\n  } else {\n    fillColor = fillColorVar;\n  }\n  if (rad <= endStep) {\n    float step = smoothstep(endStep - antialiasDist, endStep, rad);\n    vec4 color = mix(fillColor, strokeColor, step);\n    float step2 = smoothstep(-antialiasDist, 0.0, rad);\n    gl_FragColor = mix(color, vec4(color.rgb, 0.0), step2);\n  } else {\n    float step = smoothstep(-antialiasDist, 0.0, rad);\n    gl_FragColor = mix(strokeColor, vec4(strokeColor.rgb, 0.0), step);\n  }\n}\n\n\n// the square/triangle shader defines unitVar\n\nvoid main(void) {\n  // No stroke or fill implies nothing to draw\n  if (fillColorVar.a == 0.0 && strokeColorVar.a == 0.0)\n    discard;\n  // for sprites, convert the position to [-radius,radius],[-radius,radius]\n  vec2 pos = (gl_PointCoord.xy - 0.5) * 2.0 * radiusVar;\n  markerFeatureFragment(pos);\n}\n"},7665:function(t){t.exports="/* markerFeature sprite vertex shader */\n\n/* markerFeature common vertex shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nattribute vec3 pos;\nattribute float radius;\nattribute vec3 fillColor;\nattribute float fillOpacity;\nattribute vec3 strokeColor;\nattribute float strokeOpacity;\nattribute float strokeWidth;\nattribute float symbol;  /* contains some bit fields */\nattribute float symbolValue;\nattribute float rotation;\nuniform float zoom;\nuniform float rotationUniform;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\n// non-sprite has other definitions.\nvarying float radiusVar;\nvarying vec4 fillColorVar;\nvarying vec4 strokeColorVar;\nvarying float strokeWidthVar;\nvarying float symbolVar;  /* contains some bit fields */\nvarying float symbolValueVar;\nvarying float rotationVar;\n\nfloat markerFeaturePrep(void)\n{\n  // No stroke or fill implies nothing to draw\n  if (radius <= 0.0 || (strokeOpacity <= 0.0 && fillOpacity <= 0.0)) {\n    gl_Position = vec4(2.0, 2.0, 0.0, 1.0);\n    return 0.0;\n  }\n  radiusVar = radius;\n  strokeWidthVar = strokeWidth;\n  int scaleMode = int(mod(symbol, 4.0));\n  float strokeOffset = mod(floor(symbol / 16.0), 4.0) - 1.0;\n  radiusVar += (strokeOffset + 1.0) / 2.0 * strokeWidthVar;\n  if (scaleMode == 1) { // fill\n    radiusVar = (radiusVar - strokeWidthVar) * exp2(zoom) + strokeWidthVar;\n  } else if (scaleMode == 2) { // stroke\n    radiusVar += strokeWidthVar * (exp2(zoom) - 1.0);\n    strokeWidthVar *= exp2(zoom);\n  } else if (scaleMode == 3) { // all\n    radiusVar *= exp2(zoom);\n    strokeWidthVar *= exp2(zoom);\n  }\n  fillColorVar = vec4(fillColor, fillOpacity);\n  strokeColorVar = vec4(strokeColor, strokeOpacity);\n  symbolVar = symbol;\n  symbolValueVar = symbolValue;\n  rotationVar = rotation;\n  if (bool(mod(floor(symbolVar / 4.0), 2.0))) {\n    rotationVar += rotationUniform;\n  }\n  return radiusVar;\n}\n\n\nvoid main(void)\n{\n  radiusVar = markerFeaturePrep();\n  if (radiusVar == 0.0) {\n    return;\n  }\n  // for sprite\n  gl_Position = (projectionMatrix * modelViewMatrix * vec4(pos, 1.0)).xyzw;\n  gl_PointSize = 2.0 * radiusVar;\n}\n"},428:function(t){t.exports="/* contourFeature fragment shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nuniform vec4 minColor;\nuniform vec4 maxColor;\nuniform float steps;\nuniform bool stepped;\nuniform sampler2D sampler2d;\nvarying float valueVar;\nvarying float opacityVar;\n\nvoid main () {\n  vec4 clr;\n  if (valueVar < 0.0) {\n    clr = minColor;\n  } else if (valueVar > steps) {\n    clr = maxColor;\n  } else {\n    float step;\n    if (stepped) {\n      step = floor(valueVar) + 0.5;\n      if (step > steps) {\n        step = steps - 0.5;\n      }\n    } else {\n      step = valueVar + 0.5;\n    }\n    // our texture is padded on either end by a repeated value to ensure\n    // we interpolate smoothly at the ends.\n    clr = texture2D(sampler2d, vec2((step + 1.0) / (steps + 2.0), 0.0));\n  }\n  gl_FragColor = vec4(clr.rgb, clr.a * opacityVar);\n}\n"},4993:function(t){t.exports="/* contourFeature vertex shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nattribute vec3 pos;\nattribute float value;\nattribute float opacity;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nvarying float valueVar;\nvarying float opacityVar;\n\nvoid main(void)\n{\n  /* Don't use z values */\n  vec4 scrPos = projectionMatrix * modelViewMatrix * vec4(pos.xy, 0, 1);\n  if (scrPos.w != 0.0) {\n    scrPos = scrPos / scrPos.w;\n  }\n  valueVar = value;\n  opacityVar = opacity;\n  gl_Position = scrPos;\n}\n"},3925:function(t){t.exports="/* pixelmapFeature fragment shader */\n\nvarying highp vec2 iTextureCoord;\nuniform sampler2D sampler2d;\nuniform sampler2D lutSampler;\nuniform int lutWidth;\nuniform int lutHeight;\nuniform mediump float opacity;\nuniform highp vec2 crop;\n\nvoid main(void) {\n  if ((crop.s < 1.0 && iTextureCoord.s > crop.s) || (crop.t < 1.0 && 1.0 - iTextureCoord.t > crop.t)) {\n    discard;\n  }\n  // to add anti-aliasing, we would need to know the current pixel size\n  // (probably computed in the vertex shader) and then sample the base image at\n  // multiple points, then average the output color.\n  highp vec4 lutValue = texture2D(sampler2d, iTextureCoord);\n  highp vec2 lutCoord;\n  lutCoord.s = (\n    mod(\n      // add 0.5 to handle float imprecision\n      floor(lutValue.r * 255.0 + 0.5) +\n      floor(lutValue.g * 255.0 + 0.5) * 256.0,\n      float(lutWidth)\n    // center in pixel\n    ) + 0.5) / float(lutWidth);\n  // Our image is top-down, so invert the coordinate\n  lutCoord.t = 1.0 - (\n    floor(\n      (\n        // add 0.5 to handle float imprecision\n        floor(lutValue.r * 255.0 + 0.5) +\n        floor(lutValue.g * 255.0 + 0.5) * 256.0 +\n        floor(lutValue.b * 255.0 + 0.5) * 256.0 * 256.0\n        // We may want an option to use the alpha channel to allow more indices\n      ) / float(lutWidth)\n    // center in pixel\n    ) + 0.5) / float(lutHeight);\n  if (lutCoord.t < 0.0) {\n    discard;\n  }\n  mediump vec4 color = texture2D(lutSampler, lutCoord);\n\n  color.a *= opacity;\n  gl_FragColor = color;\n}\n"},4317:function(t){t.exports="/* pointFeature square/triangle fragment shader */\n\n/* pointFeature common fragment shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nvarying vec4 fillColorVar;\nvarying vec4 strokeColorVar;\nvarying float radiusVar;\nvarying float strokeWidthVar;\n\nvoid pointFeatureFragment(float rad) {\n  vec4 strokeColor, fillColor;\n  float endStep;\n  // No stroke or fill implies nothing to draw\n  if (rad > 1.0)\n    discard;\n  // If there is no stroke, the fill region should transition to nothing\n  if (strokeColorVar.a == 0.0) {\n    strokeColor = vec4(fillColorVar.rgb, 0.0);\n    endStep = 1.0;\n  } else {\n    strokeColor = strokeColorVar;\n    endStep = radiusVar / (radiusVar + strokeWidthVar);\n  }\n  // Likewise, if there is no fill, the stroke should transition to nothing\n  if (fillColorVar.a == 0.0)\n    fillColor = vec4(strokeColor.rgb, 0.0);\n  else\n    fillColor = fillColorVar;\n  // Distance to antialias over.  First number is in pixels\n  float antialiasDist = 1.5 / (radiusVar + strokeWidthVar);\n  if (rad < endStep) {\n    float step = smoothstep(max(0.0, endStep - antialiasDist), endStep, rad);\n    vec4 color = mix(fillColor, strokeColor, step);\n    float step2 = smoothstep(max(0.0, 1.0 - antialiasDist), 1.0, rad);\n    gl_FragColor = mix(color, vec4(color.rgb, 0.0), step2);\n  } else {\n    float step = smoothstep(max(0.0, 1.0 - antialiasDist), 1.0, rad);\n    gl_FragColor = mix(strokeColor, vec4(strokeColor.rgb, 0.0), step);\n  }\n}\n\n\nvarying vec3 unitVar;  // distinct for square/triangle\n\nvoid main () {\n  if (fillColorVar.a == 0.0 && strokeColorVar.a == 0.0)\n    discard;\n  float rad = length(unitVar.xy); // distinct for square/triangle\n  pointFeatureFragment(rad);\n}\n"},8208:function(t){t.exports="/* pointFeature square/triangle vertex shader */\n\n/* pointFeature common vertex shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nattribute vec3 pos;\nattribute float radius;\nattribute vec3 fillColor;\nattribute vec3 strokeColor;\nattribute float fillOpacity;\nattribute float strokeWidth;\nattribute float strokeOpacity;\nattribute float fill;\nattribute float stroke;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nvarying vec4 fillColorVar;\nvarying vec4 strokeColorVar;\nvarying float radiusVar;\nvarying float strokeWidthVar;\n\nfloat pointFeaturePrep() {\n  strokeWidthVar = strokeWidth;\n  fillColorVar = vec4(fillColor, fillOpacity);\n  strokeColorVar = vec4(strokeColor, strokeOpacity);\n  // No stroke or fill implies nothing to draw\n  if (stroke < 1.0 || strokeWidth <= 0.0 || strokeOpacity <= 0.0) {\n    strokeColorVar.a = 0.0;\n    strokeWidthVar = 0.0;\n  }\n  if (fill < 1.0 || radius <= 0.0 || fillOpacity <= 0.0)\n    fillColorVar.a = 0.0;\n  /* If the point has no visible pixels, skip doing computations on it. */\n  if (fillColorVar.a == 0.0 && strokeColorVar.a == 0.0) {\n    gl_Position = vec4(2, 2, 0, 1);\n    return 0.0;\n  }\n  return radius;\n}\n\n\nuniform float pixelWidth; // for non-sprite\nuniform float aspect; // for non-sprite\nattribute vec2 unit; // for non-sprite\nvarying vec3 unitVar; // for non-sprite\n\nvoid main(void)\n{\n  radiusVar = pointFeaturePrep();\n  if (radiusVar == 0.0) {\n    return;\n  }\n  // for non-sprite\n  unitVar = vec3(unit, 1.0);\n  vec4 p = (projectionMatrix * modelViewMatrix * vec4(pos, 1.0)).xyzw;\n  if (p.w != 0.0) {\n    p = p / p.w;\n  }\n  p += (radius + strokeWidthVar) *\n       vec4(unit.x * pixelWidth, unit.y * pixelWidth * aspect, 0.0, 1.0);\n  gl_Position = vec4(p.xyz, 1.0);\n}\n"},2682:function(t){t.exports="/* pointFeature sprite fragment shader */\n\n/* pointFeature common fragment shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nvarying vec4 fillColorVar;\nvarying vec4 strokeColorVar;\nvarying float radiusVar;\nvarying float strokeWidthVar;\n\nvoid pointFeatureFragment(float rad) {\n  vec4 strokeColor, fillColor;\n  float endStep;\n  // No stroke or fill implies nothing to draw\n  if (rad > 1.0)\n    discard;\n  // If there is no stroke, the fill region should transition to nothing\n  if (strokeColorVar.a == 0.0) {\n    strokeColor = vec4(fillColorVar.rgb, 0.0);\n    endStep = 1.0;\n  } else {\n    strokeColor = strokeColorVar;\n    endStep = radiusVar / (radiusVar + strokeWidthVar);\n  }\n  // Likewise, if there is no fill, the stroke should transition to nothing\n  if (fillColorVar.a == 0.0)\n    fillColor = vec4(strokeColor.rgb, 0.0);\n  else\n    fillColor = fillColorVar;\n  // Distance to antialias over.  First number is in pixels\n  float antialiasDist = 1.5 / (radiusVar + strokeWidthVar);\n  if (rad < endStep) {\n    float step = smoothstep(max(0.0, endStep - antialiasDist), endStep, rad);\n    vec4 color = mix(fillColor, strokeColor, step);\n    float step2 = smoothstep(max(0.0, 1.0 - antialiasDist), 1.0, rad);\n    gl_FragColor = mix(color, vec4(color.rgb, 0.0), step2);\n  } else {\n    float step = smoothstep(max(0.0, 1.0 - antialiasDist), 1.0, rad);\n    gl_FragColor = mix(strokeColor, vec4(strokeColor.rgb, 0.0), step);\n  }\n}\n\n\n// the square/triangle shader defines unitVar\n\nvoid main () {\n  // No stroke or fill implies nothing to draw\n  if (fillColorVar.a == 0.0 && strokeColorVar.a == 0.0)\n    discard;\n  float rad = 2.0 * length(gl_PointCoord - vec2(0.5));  // distinct for sprite\n  pointFeatureFragment(rad);\n}\n"},6979:function(t){t.exports="/* pointFeature sprite vertex shader */\n\n/* pointFeature common vertex shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nattribute vec3 pos;\nattribute float radius;\nattribute vec3 fillColor;\nattribute vec3 strokeColor;\nattribute float fillOpacity;\nattribute float strokeWidth;\nattribute float strokeOpacity;\nattribute float fill;\nattribute float stroke;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nvarying vec4 fillColorVar;\nvarying vec4 strokeColorVar;\nvarying float radiusVar;\nvarying float strokeWidthVar;\n\nfloat pointFeaturePrep() {\n  strokeWidthVar = strokeWidth;\n  fillColorVar = vec4(fillColor, fillOpacity);\n  strokeColorVar = vec4(strokeColor, strokeOpacity);\n  // No stroke or fill implies nothing to draw\n  if (stroke < 1.0 || strokeWidth <= 0.0 || strokeOpacity <= 0.0) {\n    strokeColorVar.a = 0.0;\n    strokeWidthVar = 0.0;\n  }\n  if (fill < 1.0 || radius <= 0.0 || fillOpacity <= 0.0)\n    fillColorVar.a = 0.0;\n  /* If the point has no visible pixels, skip doing computations on it. */\n  if (fillColorVar.a == 0.0 && strokeColorVar.a == 0.0) {\n    gl_Position = vec4(2, 2, 0, 1);\n    return 0.0;\n  }\n  return radius;\n}\n\n\nvoid main(void)\n{\n  radiusVar = pointFeaturePrep();\n  if (radiusVar == 0.0) {\n    return;\n  }\n  // for sprite\n  gl_Position = (projectionMatrix * modelViewMatrix * vec4(pos, 1.0)).xyzw;\n  gl_PointSize = 2.0 * (radius + strokeWidthVar);\n}\n"},4547:function(t){t.exports="/* polygonFeature fragment shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nvarying vec4 fillColorVar;\n\nvoid main () {\n  gl_FragColor = fillColorVar;\n}\n"},9506:function(t){t.exports="/* polygonFeature vertex shader */\n\nattribute vec3 pos;\nattribute vec3 fillColor;\nattribute float fillOpacity;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nvarying vec4 fillColorVar;\n\nvoid main(void)\n{\n  vec4 clipPos = projectionMatrix * modelViewMatrix * vec4(pos.xyz, 1.0);\n  if (clipPos.w != 0.0) {\n    clipPos = clipPos/clipPos.w;\n  }\n  fillColorVar = vec4(fillColor, fillOpacity);\n  gl_Position = clipPos;\n}\n"},8961:function(t){t.exports="/* quadFeature Color fragment shader */\n\nvarying mediump vec3 iVertexColor;\nuniform mediump float opacity;\n\nvoid main(void) {\n  gl_FragColor = vec4(iVertexColor, opacity);\n}\n"},3260:function(t){t.exports="/* quadFeature Color vertex shader */\n\nattribute vec3 vertexPosition;\nuniform float zOffset;\nuniform vec3 vertexColor;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nvarying mediump vec3 iVertexColor;\n\nvoid main(void) {\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(vertexPosition, 1.0);\n  gl_Position.z += zOffset;\n  iVertexColor = vertexColor;\n}\n"},8711:function(t){t.exports="/* quadFeature Image fragment shader */\n\nvarying highp vec2 iTextureCoord;\nuniform sampler2D sampler2d;\nuniform mediump float opacity;\nuniform highp vec2 crop;\n\nvoid main(void) {\n  mediump vec4 color = texture2D(sampler2d, iTextureCoord);\n  if ((crop.s < 1.0 && iTextureCoord.s > crop.s) || (crop.t < 1.0 && 1.0 - iTextureCoord.t > crop.t)) {\n    discard;\n  }\n  color.w *= opacity;\n  gl_FragColor = color;\n}\n"},6238:function(t){t.exports="/* quadFeature Image vertex shader */\n\nattribute vec3 vertexPosition;\nattribute vec2 textureCoord;\nuniform float zOffset;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nvarying highp vec2 iTextureCoord;\nuniform highp vec4 cropsource;\n\nvoid main(void) {\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(vertexPosition, 1.0);\n  gl_Position.z += zOffset;\n  if (cropsource.p > cropsource.s && cropsource.q > cropsource.t && (cropsource.p < 1.0 || cropsource.s > 0.0 || cropsource.q < 1.0 || cropsource.t > 0.0)) {\n    iTextureCoord.s = textureCoord.s * (cropsource.p - cropsource.s) + cropsource.s;\n    iTextureCoord.t = textureCoord.t * (cropsource.q - cropsource.t) + cropsource.t;\n  } else {\n    iTextureCoord = textureCoord;\n  }\n}\n"},7605:function(t,e,n){"use strict";n.r(e);var r=n(5292),i=n.n(r),o=n(9893),a=n.n(o),s=n(9383),u=n.n(s),l=n(6884),c=n.n(l),f=n(9088),h=n.n(f),d=n(7997),p=n.n(d),m=n(632),g={};g.styleTagTransform=p(),g.setAttributes=c(),g.insert=u().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=h();i()(m.A,g);e.default=m.A&&m.A.locals?m.A.locals:void 0},1159:function(t,e,n){"use strict";n.r(e);var r=n(5292),i=n.n(r),o=n(9893),a=n.n(o),s=n(9383),u=n.n(s),l=n(6884),c=n.n(l),f=n(9088),h=n.n(f),d=n(7997),p=n.n(d),m=n(7046),g={};g.styleTagTransform=p(),g.setAttributes=c(),g.insert=u().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=h();i()(m.A,g);e.default=m.A&&m.A.locals?m.A.locals:void 0},615:function(t,e,n){"use strict";n.r(e);var r=n(5292),i=n.n(r),o=n(9893),a=n.n(o),s=n(9383),u=n.n(s),l=n(6884),c=n.n(l),f=n(9088),h=n.n(f),d=n(7997),p=n.n(d),m=n(5290),g={};g.styleTagTransform=p(),g.setAttributes=c(),g.insert=u().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=h();i()(m.A,g);e.default=m.A&&m.A.locals?m.A.locals:void 0},5292:function(t){"use strict";var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var o={},a=[],s=0;s<t.length;s++){var u=t[s],l=r.base?u[0]+r.base:u[0],c=o[l]||0,f="".concat(l," ").concat(c);o[l]=c+1;var h=n(f),d={css:u[1],media:u[2],sourceMap:u[3],supports:u[4],layer:u[5]};if(-1!==h)e[h].references++,e[h].updater(d);else{var p=i(d,r);r.byIndex=s,e.splice(s,0,{identifier:f,updater:p,references:1})}a.push(f)}return a}function i(t,e){var n=e.domAPI(e);n.update(t);return function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,i){var o=r(t=t||[],i=i||{});return function(t){t=t||[];for(var a=0;a<o.length;a++){var s=n(o[a]);e[s].references--}for(var u=r(t,i),l=0;l<o.length;l++){var c=n(o[l]);0===e[c].references&&(e[c].updater(),e.splice(c,1))}o=u}}},9383:function(t){"use strict";var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},9088:function(t){"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},6884:function(t,e,n){"use strict";t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},9893:function(t){"use strict";t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},7997:function(t){"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},5245:function(t){"use strict";t.exports="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIj4KPHBhdGggZD0iTTAsMTFsMTEsMGwwLC0xMWwyLDBsMCwxMWwxMSwwbDAsMmwtMTEsMGwwLDExbC0yLDBsMCwtMTFsLTExLDB6IiBmaWxsPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIwIi8+CjxwYXRoIGQ9Ik0yNCwyN2w4LDBsMCwybC04LDB6IiBmaWxsPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIwIi8+Cjwvc3ZnPgo="},8546:function(t){"use strict";t.exports="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIj4KPHBhdGggZD0iTTAsMTFsMTEsMGwwLC0xMWwyLDBsMCwxMWwxMSwwbDAsMmwtMTEsMGwwLDExbC0yLDBsMCwtMTFsLTExLDB6IiBmaWxsPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIwIi8+CjxwYXRoIGQ9Ik0yNCwyN2wzLDBsMCwtM2wyLDBsMCwzbDMsMGwwLDJsLTMsMGwwLDNsLTIsMGwwLC0zbC0zLDB6IiBmaWxsPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIwIi8+Cjwvc3ZnPgo="},3158:function(t){"use strict";t.exports="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIj4KPHBhdGggZD0iTTAsMTFsMTEsMGwwLC0xMWwyLDBsMCwxMWwxMSwwbDAsMmwtMTEsMGwwLDExbC0yLDBsMCwtMTFsLTExLDB6IiBmaWxsPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIwIi8+CjxwYXRoIGQ9Ik0yNCwzMmwwLC00YTQsNCwwLDAsMSw4LDBsMCw0bC0yLDBsMCwtNGEyLDIsMCwwLDAsLTQsMGwwLDR6IiBmaWxsPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIwIi8+Cjwvc3ZnPgo="},9803:function(t){"use strict";t.exports="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIj4KPHBhdGggZD0iTTAsMTFsMTEsMGwwLC0xMWwyLDBsMCwxMWwxMSwwbDAsMmwtMTEsMGwwLDExbC0yLDBsMCwtMTFsLTExLDB6IiBmaWxsPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIwIi8+CjxwYXRoIGQ9Ik0zMiwzMC41OWwtMS40MSwxLjQxbC0yLjEyLC0yLjEybC0yLjEyLDIuMTJsLTEuNDEsLTEuNDFsMi4xMiwtMi4xMmwtMi4xMiwtMi4xMmwxLjQxLC0xLjQxbDIuMTIsMi4xMmwyLjEyLC0yLjEybDEuNDEsMS40MWwtMi4xMiwyLjEyeiIgZmlsbD0iYmxhY2siIHN0cm9rZS13aWR0aD0iMCIvPgo8L3N2Zz4K"},4436:function(e){"use strict";if(void 0===t){var n=new Error("Cannot find module 'vtk.js'");throw n.code="MODULE_NOT_FOUND",n}e.exports=t},4279:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,s(r.key),r)}}function s(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==r(e)?e:e+""}n.r(e),n.d(e,{default:function(){return l}});var u=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],l=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Float64Array,i=arguments.length>3?arguments[3]:void 0;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),isNaN(e)||e<0)throw new Error("Unpexpected numItems value: ".concat(e,"."));this.numItems=+e,this.nodeSize=Math.min(Math.max(+n,2),65535),this.ArrayType=r,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;var o=u.indexOf(this.ArrayType),a=2*e*this.ArrayType.BYTES_PER_ELEMENT,s=e*this.IndexArrayType.BYTES_PER_ELEMENT,l=(8-s%8)%8;if(o<0)throw new Error("Unexpected typed array class: ".concat(r,"."));i&&i instanceof ArrayBuffer?(this.data=i,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+s+l,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+a+s+l),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+s+l,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+o]),new Uint16Array(this.data,2,1)[0]=n,new Uint32Array(this.data,4,1)[0]=e)}return e=t,r=[{key:"from",value:function(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");var n=i(new Uint8Array(e,0,2),2),r=n[0],o=n[1];if(219!==r)throw new Error("Data does not appear to be in a KDBush format.");var a=o>>4;if(1!==a)throw new Error("Got v".concat(a," data when expected v").concat(1,"."));var s=u[15&o];if(!s)throw new Error("Unrecognized array type.");var l=i(new Uint16Array(e,2,1),1)[0];return new t(i(new Uint32Array(e,4,1),1)[0],l,s,e)}}],(n=[{key:"add",value:function(t,e){var n=this._pos>>1;return this.ids[n]=n,this.coords[this._pos++]=t,this.coords[this._pos++]=e,n}},{key:"finish",value:function(){var t=this._pos>>1;if(t!==this.numItems)throw new Error("Added ".concat(t," items when expected ").concat(this.numItems,"."));return c(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}},{key:"range",value:function(t,e,n,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var i=this.ids,o=this.coords,a=this.nodeSize,s=[0,i.length-1,0],u=[];s.length;){var l=s.pop()||0,c=s.pop()||0,f=s.pop()||0;if(c-f<=a)for(var h=f;h<=c;h++){var d=o[2*h],p=o[2*h+1];d>=t&&d<=n&&p>=e&&p<=r&&u.push(i[h])}else{var m=f+c>>1,g=o[2*m],y=o[2*m+1];g>=t&&g<=n&&y>=e&&y<=r&&u.push(i[m]),(0===l?t<=g:e<=y)&&(s.push(f),s.push(m-1),s.push(1-l)),(0===l?n>=g:r>=y)&&(s.push(m+1),s.push(c),s.push(1-l))}}return u}},{key:"within",value:function(t,e,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var r=this.ids,i=this.coords,o=this.nodeSize,a=[0,r.length-1,0],s=[],u=n*n;a.length;){var l=a.pop()||0,c=a.pop()||0,f=a.pop()||0;if(c-f<=o)for(var h=f;h<=c;h++)p(i[2*h],i[2*h+1],t,e)<=u&&s.push(r[h]);else{var d=f+c>>1,m=i[2*d],g=i[2*d+1];p(m,g,t,e)<=u&&s.push(r[d]),(0===l?t-n<=m:e-n<=g)&&(a.push(f),a.push(d-1),a.push(1-l)),(0===l?t+n>=m:e+n>=g)&&(a.push(d+1),a.push(c),a.push(1-l))}}return s}}])&&a(e.prototype,n),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,r}();function c(t,e,n,r,i,o){if(!(i-r<=n)){var a=r+i>>1;f(t,e,a,r,i,o),c(t,e,n,r,a-1,1-o),c(t,e,n,a+1,i,1-o)}}function f(t,e,n,r,i,o){for(;i>r;){if(i-r>600){var a=i-r+1,s=n-r+1,u=Math.log(a),l=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*l*(a-l)/a)*(s-a/2<0?-1:1);f(t,e,n,Math.max(r,Math.floor(n-s*l/a+c)),Math.min(i,Math.floor(n+(a-s)*l/a+c)),o)}var d=e[2*n+o],p=r,m=i;for(h(t,e,r,n),e[2*i+o]>d&&h(t,e,r,i);p<m;){for(h(t,e,p,m),p++,m--;e[2*p+o]<d;)p++;for(;e[2*m+o]>d;)m--}e[2*r+o]===d?h(t,e,r,m):h(t,e,++m,i),m<=n&&(r=m+1),n<=m&&(i=m-1)}}function h(t,e,n,r){d(t,n,r),d(e,2*n,2*r),d(e,2*n+1,2*r+1)}function d(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function p(t,e,n,r){var i=t-n,o=e-r;return i*i+o*o}},7715:function(t,e,n){"use strict";n.r(e),e.default={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},5127:function(t,e,n){"use strict";function r(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function i(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function o(t){let e,n,o;function s(t,r,i=0,o=t.length){if(i<o){if(0!==e(r,r))return o;do{const e=i+o>>>1;n(t[e],r)<0?i=e+1:o=e}while(i<o)}return i}return 2!==t.length?(e=r,n=(e,n)=>r(t(e),n),o=(e,n)=>t(e)-n):(e=t===r||t===i?t:a,n=t,o=t),{left:s,center:function(t,e,n=0,r=t.length){const i=s(t,e,n,r-1);return i>n&&o(t[i-1],e)>-o(t[i],e)?i-1:i},right:function(t,r,i=0,o=t.length){if(i<o){if(0!==e(r,r))return o;do{const e=i+o>>>1;n(t[e],r)<=0?i=e+1:o=e}while(i<o)}return i}}}function a(){return 0}function s(t){return null===t?NaN:+t}n.r(e),n.d(e,{Adder:function(){return S},Delaunay:function(){return Xs},FormatSpecifier:function(){return hc},InternMap:function(){return R},InternSet:function(){return L},Node:function(){return Fm},Path:function(){return la},Voronoi:function(){return Vs},ZoomTransform:function(){return XT},active:function(){return po},arc:function(){return OM},area:function(){return BM},areaRadial:function(){return KM},ascending:function(){return r},autoType:function(){return Cu},axisBottom:function(){return xe},axisLeft:function(){return _e},axisRight:function(){return ve},axisTop:function(){return ye},bin:function(){return dt},bisect:function(){return h},bisectCenter:function(){return f},bisectLeft:function(){return c},bisectRight:function(){return l},bisector:function(){return o},blob:function(){return gl},blur:function(){return d},blur2:function(){return p},blurImage:function(){return m},brush:function(){return Go},brushSelection:function(){return jo},brushX:function(){return Vo},brushY:function(){return qo},buffer:function(){return vl},chord:function(){return ta},chordDirected:function(){return na},chordTranspose:function(){return ea},cluster:function(){return Pm},color:function(){return hr},contourDensity:function(){return vs},contours:function(){return cs},count:function(){return _},create:function(){return oM},creator:function(){return Cn},cross:function(){return A},csv:function(){return Ml},csvFormat:function(){return pu},csvFormatBody:function(){return mu},csvFormatRow:function(){return yu},csvFormatRows:function(){return gu},csvFormatValue:function(){return vu},csvParse:function(){return hu},csvParseRows:function(){return du},cubehelix:function(){return ts},cumsum:function(){return T},curveBasis:function(){return zA},curveBasisClosed:function(){return jA},curveBasisOpen:function(){return qA},curveBumpX:function(){return ZM},curveBumpY:function(){return JM},curveBundle:function(){return UA},curveCardinal:function(){return XA},curveCardinalClosed:function(){return QA},curveCardinalOpen:function(){return $A},curveCatmullRom:function(){return tT},curveCatmullRomClosed:function(){return nT},curveCatmullRomOpen:function(){return iT},curveLinear:function(){return DM},curveLinearClosed:function(){return aT},curveMonotoneX:function(){return pT},curveMonotoneY:function(){return mT},curveNatural:function(){return vT},curveStep:function(){return _T},curveStepAfter:function(){return wT},curveStepBefore:function(){return bT},descending:function(){return i},deviation:function(){return C},difference:function(){return $t},disjoint:function(){return Zt},dispatch:function(){return Ee},drag:function(){return tu},dragDisable:function(){return Wn},dragEnable:function(){return Xn},dsv:function(){return wl},dsvFormat:function(){return cu},easeBack:function(){return cl},easeBackIn:function(){return ul},easeBackInOut:function(){return cl},easeBackOut:function(){return ll},easeBounce:function(){return ol},easeBounceIn:function(){return il},easeBounceInOut:function(){return al},easeBounceOut:function(){return ol},easeCircle:function(){return Xu},easeCircleIn:function(){return Hu},easeCircleInOut:function(){return Xu},easeCircleOut:function(){return Wu},easeCubic:function(){return lo},easeCubicIn:function(){return so},easeCubicInOut:function(){return lo},easeCubicOut:function(){return uo},easeElastic:function(){return dl},easeElasticIn:function(){return hl},easeElasticInOut:function(){return pl},easeElasticOut:function(){return dl},easeExp:function(){return Uu},easeExpIn:function(){return qu},easeExpInOut:function(){return Uu},easeExpOut:function(){return Gu},easeLinear:function(){return Su},easePoly:function(){return Du},easePolyIn:function(){return Lu},easePolyInOut:function(){return Du},easePolyOut:function(){return Iu},easeQuad:function(){return Ru},easeQuadIn:function(){return Pu},easeQuadInOut:function(){return Ru},easeQuadOut:function(){return Ou},easeSin:function(){return ju},easeSinIn:function(){return zu},easeSinInOut:function(){return ju},easeSinOut:function(){return Bu},every:function(){return Ht},extent:function(){return k},fcumsum:function(){return O},filter:function(){return Xt},flatGroup:function(){return q},flatRollup:function(){return G},forceCenter:function(){return Rl},forceCollide:function(){return Hl},forceLink:function(){return Kl},forceManyBody:function(){return rc},forceRadial:function(){return ic},forceSimulation:function(){return nc},forceX:function(){return oc},forceY:function(){return ac},format:function(){return yc},formatDefaultLocale:function(){return wc},formatLocale:function(){return bc},formatPrefix:function(){return vc},formatSpecifier:function(){return fc},fsum:function(){return P},geoAlbers:function(){return Hp},geoAlbersUsa:function(){return Wp},geoArea:function(){return Cf},geoAzimuthalEqualArea:function(){return Yp},geoAzimuthalEqualAreaRaw:function(){return Qp},geoAzimuthalEquidistant:function(){return Zp},geoAzimuthalEquidistantRaw:function(){return $p},geoBounds:function(){return uh},geoCentroid:function(){return _h},geoCircle:function(){return Oh},geoClipAntimeridian:function(){return qh},geoClipCircle:function(){return Gh},geoClipExtent:function(){return $h},geoClipRectangle:function(){return Yh},geoConicConformal:function(){return im},geoConicConformalRaw:function(){return rm},geoConicEqualArea:function(){return Up},geoConicEqualAreaRaw:function(){return Gp},geoConicEquidistant:function(){return um},geoConicEquidistantRaw:function(){return sm},geoContains:function(){return pd},geoDistance:function(){return od},geoEqualEarth:function(){return mm},geoEqualEarthRaw:function(){return pm},geoEquirectangular:function(){return am},geoEquirectangularRaw:function(){return om},geoGnomonic:function(){return ym},geoGnomonicRaw:function(){return gm},geoGraticule:function(){return yd},geoGraticule10:function(){return vd},geoIdentity:function(){return vm},geoInterpolate:function(){return xd},geoLength:function(){return nd},geoMercator:function(){return tm},geoMercatorRaw:function(){return Jp},geoNaturalEarth1:function(){return _m},geoNaturalEarth1Raw:function(){return xm},geoOrthographic:function(){return wm},geoOrthographicRaw:function(){return bm},geoPath:function(){return Ep},geoProjection:function(){return jp},geoProjectionMutator:function(){return Vp},geoRotation:function(){return kh},geoStereographic:function(){return Am},geoStereographicRaw:function(){return Mm},geoStream:function(){return nf},geoTransform:function(){return Cp},geoTransverseMercator:function(){return Em},geoTransverseMercatorRaw:function(){return Tm},gray:function(){return Ia},greatest:function(){return _t},greatestIndex:function(){return Ft},group:function(){return B},groupSort:function(){return tt},groups:function(){return j},hcl:function(){return Ga},hierarchy:function(){return Rm},histogram:function(){return dt},hsl:function(){return Tr},html:function(){return Pl},image:function(){return Tl},index:function(){return W},indexes:function(){return X},interpolate:function(){return Zr},interpolateArray:function(){return Ur},interpolateBasis:function(){return Or},interpolateBasisClosed:function(){return Rr},interpolateBlues:function(){return Rw},interpolateBrBG:function(){return Ub},interpolateBuGn:function(){return uw},interpolateBuPu:function(){return cw},interpolateCividis:function(){return Gw},interpolateCool:function(){return Ww},interpolateCubehelix:function(){return $g},interpolateCubehelixDefault:function(){return Uw},interpolateCubehelixLong:function(){return Zg},interpolateDate:function(){return Wr},interpolateDiscrete:function(){return zg},interpolateGnBu:function(){return hw},interpolateGreens:function(){return Iw},interpolateGreys:function(){return Nw},interpolateHcl:function(){return Kg},interpolateHclLong:function(){return Qg},interpolateHsl:function(){return Ug},interpolateHslLong:function(){return Hg},interpolateHue:function(){return Bg},interpolateInferno:function(){return rM},interpolateLab:function(){return Wg},interpolateMagma:function(){return nM},interpolateNumber:function(){return Xr},interpolateNumberArray:function(){return qr},interpolateObject:function(){return Kr},interpolateOrRd:function(){return pw},interpolateOranges:function(){return qw},interpolatePRGn:function(){return Wb},interpolatePiYG:function(){return Kb},interpolatePlasma:function(){return iM},interpolatePuBu:function(){return vw},interpolatePuBuGn:function(){return gw},interpolatePuOr:function(){return Yb},interpolatePuRd:function(){return _w},interpolatePurples:function(){return zw},interpolateRainbow:function(){return Kw},interpolateRdBu:function(){return Zb},interpolateRdGy:function(){return tw},interpolateRdPu:function(){return ww},interpolateRdYlBu:function(){return nw},interpolateRdYlGn:function(){return iw},interpolateReds:function(){return jw},interpolateRgb:function(){return zr},interpolateRgbBasis:function(){return jr},interpolateRgbBasisClosed:function(){return Vr},interpolateRound:function(){return jg},interpolateSinebow:function(){return Zw},interpolateSpectral:function(){return aw},interpolateString:function(){return $r},interpolateTransformCss:function(){return Ni},interpolateTransformSvg:function(){return Fi},interpolateTurbo:function(){return Jw},interpolateViridis:function(){return eM},interpolateWarm:function(){return Hw},interpolateYlGn:function(){return Ew},interpolateYlGnBu:function(){return Aw},interpolateYlOrBr:function(){return kw},interpolateYlOrRd:function(){return Pw},interpolateZoom:function(){return qg},interrupt:function(){return Pi},intersection:function(){return Jt},interval:function(){return UT},isoFormat:function(){return VT},isoParse:function(){return GT},json:function(){return Cl},lab:function(){return Da},lch:function(){return qa},least:function(){return Dt},leastIndex:function(){return Nt},line:function(){return zM},lineRadial:function(){return XM},link:function(){return rA},linkHorizontal:function(){return iA},linkRadial:function(){return aA},linkVertical:function(){return oA},local:function(){return sM},map:function(){return Kt},matcher:function(){return Re},max:function(){return pt},maxIndex:function(){return mt},mean:function(){return Et},median:function(){return Ct},medianIndex:function(){return kt},merge:function(){return St},min:function(){return gt},minIndex:function(){return yt},mode:function(){return Pt},namespace:function(){return Xe},namespaces:function(){return We},nice:function(){return ft},now:function(){return fi},pack:function(){return ug},packEnclose:function(){return Wm},packSiblings:function(){return ag},pairs:function(){return Ot},partition:function(){return pg},path:function(){return ca},pathRound:function(){return fa},permute:function(){return Y},pie:function(){return qM},piecewise:function(){return Jg},pointRadial:function(){return QM},pointer:function(){return ti},pointers:function(){return lM},polygonArea:function(){return ey},polygonCentroid:function(){return ny},polygonContains:function(){return sy},polygonHull:function(){return ay},polygonLength:function(){return uy},precisionFixed:function(){return Mc},precisionPrefix:function(){return Ac},precisionRound:function(){return Tc},quadtree:function(){return Fl},quantile:function(){return bt},quantileIndex:function(){return Mt},quantileSorted:function(){return wt},quantize:function(){return ty},quickselect:function(){return vt},radialArea:function(){return KM},radialLine:function(){return XM},randomBates:function(){return my},randomBernoulli:function(){return vy},randomBeta:function(){return by},randomBinomial:function(){return wy},randomCauchy:function(){return Ay},randomExponential:function(){return gy},randomGamma:function(){return _y},randomGeometric:function(){return xy},randomInt:function(){return fy},randomIrwinHall:function(){return py},randomLcg:function(){return Py},randomLogNormal:function(){return dy},randomLogistic:function(){return Ty},randomNormal:function(){return hy},randomPareto:function(){return yy},randomPoisson:function(){return Ey},randomUniform:function(){return cy},randomWeibull:function(){return My},range:function(){return Lt},rank:function(){return It},reduce:function(){return Qt},reverse:function(){return Yt},rgb:function(){return gr},ribbon:function(){return wa},ribbonArrow:function(){return Ma},rollup:function(){return U},rollups:function(){return H},scaleBand:function(){return Dy},scaleDiverging:function(){return Tb},scaleDivergingLog:function(){return Eb},scaleDivergingPow:function(){return kb},scaleDivergingSqrt:function(){return Sb},scaleDivergingSymlog:function(){return Cb},scaleIdentity:function(){return Yy},scaleImplicit:function(){return Ly},scaleLinear:function(){return Qy},scaleLog:function(){return ov},scaleOrdinal:function(){return Iy},scalePoint:function(){return Fy},scalePow:function(){return pv},scaleQuantile:function(){return vv},scaleQuantize:function(){return xv},scaleRadial:function(){return yv},scaleSequential:function(){return vb},scaleSequentialLog:function(){return xb},scaleSequentialPow:function(){return bb},scaleSequentialQuantile:function(){return Mb},scaleSequentialSqrt:function(){return wb},scaleSequentialSymlog:function(){return _b},scaleSqrt:function(){return mv},scaleSymlog:function(){return lv},scaleThreshold:function(){return _v},scaleTime:function(){return pb},scaleUtc:function(){return mb},scan:function(){return zt},schemeAccent:function(){return Rb},schemeBlues:function(){return Ow},schemeBrBG:function(){return Gb},schemeBuGn:function(){return sw},schemeBuPu:function(){return lw},schemeCategory10:function(){return Ob},schemeDark2:function(){return Lb},schemeGnBu:function(){return fw},schemeGreens:function(){return Lw},schemeGreys:function(){return Dw},schemeObservable10:function(){return Ib},schemeOrRd:function(){return dw},schemeOranges:function(){return Vw},schemePRGn:function(){return Hb},schemePaired:function(){return Db},schemePastel1:function(){return Nb},schemePastel2:function(){return Fb},schemePiYG:function(){return Xb},schemePuBu:function(){return yw},schemePuBuGn:function(){return mw},schemePuOr:function(){return Qb},schemePuRd:function(){return xw},schemePurples:function(){return Fw},schemeRdBu:function(){return $b},schemeRdGy:function(){return Jb},schemeRdPu:function(){return bw},schemeRdYlBu:function(){return ew},schemeRdYlGn:function(){return rw},schemeReds:function(){return Bw},schemeSet1:function(){return zb},schemeSet2:function(){return Bb},schemeSet3:function(){return jb},schemeSpectral:function(){return ow},schemeTableau10:function(){return Vb},schemeYlGn:function(){return Tw},schemeYlGnBu:function(){return Mw},schemeYlOrBr:function(){return Cw},schemeYlOrRd:function(){return Sw},select:function(){return Vn},selectAll:function(){return cM},selection:function(){return jn},selector:function(){return ke},selectorAll:function(){return Oe},shuffle:function(){return Bt},shuffler:function(){return jt},some:function(){return Wt},sort:function(){return $},stack:function(){return CT},stackOffsetDiverging:function(){return ST},stackOffsetExpand:function(){return kT},stackOffsetNone:function(){return MT},stackOffsetSilhouette:function(){return PT},stackOffsetWiggle:function(){return OT},stackOrderAppearance:function(){return RT},stackOrderAscending:function(){return IT},stackOrderDescending:function(){return NT},stackOrderInsideOut:function(){return FT},stackOrderNone:function(){return AT},stackOrderReverse:function(){return zT},stratify:function(){return _g},style:function(){return on},subset:function(){return re},sum:function(){return Vt},superset:function(){return ee},svg:function(){return Ol},symbol:function(){return IA},symbolAsterisk:function(){return uA},symbolCircle:function(){return lA},symbolCross:function(){return cA},symbolDiamond:function(){return dA},symbolDiamond2:function(){return pA},symbolPlus:function(){return mA},symbolSquare:function(){return gA},symbolSquare2:function(){return yA},symbolStar:function(){return bA},symbolTimes:function(){return OA},symbolTriangle:function(){return MA},symbolTriangle2:function(){return TA},symbolWye:function(){return PA},symbolX:function(){return OA},symbols:function(){return RA},symbolsFill:function(){return RA},symbolsStroke:function(){return LA},text:function(){return _l},thresholdFreedmanDiaconis:function(){return At},thresholdScott:function(){return Tt},thresholdSturges:function(){return ht},tickFormat:function(){return Xy},tickIncrement:function(){return lt},tickStep:function(){return ct},ticks:function(){return ut},timeDay:function(){return Gv},timeDays:function(){return Uv},timeFormat:function(){return Gx},timeFormatDefaultLocale:function(){return cb},timeFormatLocale:function(){return Vx},timeFriday:function(){return ex},timeFridays:function(){return ux},timeHour:function(){return Bv},timeHours:function(){return jv},timeInterval:function(){return Pv},timeMillisecond:function(){return Ov},timeMilliseconds:function(){return Rv},timeMinute:function(){return Dv},timeMinutes:function(){return Nv},timeMonday:function(){return $v},timeMondays:function(){return ix},timeMonth:function(){return Tx},timeMonths:function(){return Ex},timeParse:function(){return Ux},timeSaturday:function(){return nx},timeSaturdays:function(){return lx},timeSecond:function(){return Lv},timeSeconds:function(){return Iv},timeSunday:function(){return Yv},timeSundays:function(){return rx},timeThursday:function(){return tx},timeThursdays:function(){return sx},timeTickInterval:function(){return Fx},timeTicks:function(){return Nx},timeTuesday:function(){return Zv},timeTuesdays:function(){return ox},timeWednesday:function(){return Jv},timeWednesdays:function(){return ax},timeWeek:function(){return Yv},timeWeeks:function(){return rx},timeYear:function(){return Sx},timeYears:function(){return Px},timeout:function(){return xi},timer:function(){return pi},timerFlush:function(){return mi},transition:function(){return io},transpose:function(){return qt},tree:function(){return Sg},treemap:function(){return Ig},treemapBinary:function(){return Dg},treemapDice:function(){return dg},treemapResquarify:function(){return Fg},treemapSlice:function(){return Pg},treemapSliceDice:function(){return Ng},treemapSquarify:function(){return Lg},tsv:function(){return Al},tsvFormat:function(){return wu},tsvFormatBody:function(){return Mu},tsvFormatRow:function(){return Tu},tsvFormatRows:function(){return Au},tsvFormatValue:function(){return Eu},tsvParse:function(){return _u},tsvParseRows:function(){return bu},union:function(){return ie},unixDay:function(){return Xv},unixDays:function(){return Kv},utcDay:function(){return Hv},utcDays:function(){return Wv},utcFormat:function(){return Hx},utcFriday:function(){return gx},utcFridays:function(){return Mx},utcHour:function(){return Vv},utcHours:function(){return qv},utcMillisecond:function(){return Ov},utcMilliseconds:function(){return Rv},utcMinute:function(){return Fv},utcMinutes:function(){return zv},utcMonday:function(){return hx},utcMondays:function(){return xx},utcMonth:function(){return Cx},utcMonths:function(){return kx},utcParse:function(){return Wx},utcSaturday:function(){return yx},utcSaturdays:function(){return Ax},utcSecond:function(){return Lv},utcSeconds:function(){return Iv},utcSunday:function(){return fx},utcSundays:function(){return vx},utcThursday:function(){return mx},utcThursdays:function(){return wx},utcTickInterval:function(){return Dx},utcTicks:function(){return Ix},utcTuesday:function(){return dx},utcTuesdays:function(){return _x},utcWednesday:function(){return px},utcWednesdays:function(){return bx},utcWeek:function(){return fx},utcWeeks:function(){return vx},utcYear:function(){return Ox},utcYears:function(){return Rx},variance:function(){return E},window:function(){return tn},xml:function(){return Sl},zip:function(){return Ut},zoom:function(){return iE},zoomIdentity:function(){return KT},zoomTransform:function(){return QT}});const u=o(r),l=u.right,c=u.left,f=o(s).center;var h=l;function d(t,e){if(!((e=+e)>=0))throw new RangeError("invalid r");let n=t.length;if(!((n=Math.floor(n))>=0))throw new RangeError("invalid length");if(!n||!e)return t;const r=x(e),i=t.slice();return r(t,i,0,n,1),r(i,t,0,n,1),r(t,i,0,n,1),t}const p=g(x),m=g((function(t){const e=x(t);return(t,n,r,i,o)=>{e(t,n,(r<<=2)+0,(i<<=2)+0,o<<=2),e(t,n,r+1,i+1,o),e(t,n,r+2,i+2,o),e(t,n,r+3,i+3,o)}}));function g(t){return function(e,n,r=n){if(!((n=+n)>=0))throw new RangeError("invalid rx");if(!((r=+r)>=0))throw new RangeError("invalid ry");let{data:i,width:o,height:a}=e;if(!((o=Math.floor(o))>=0))throw new RangeError("invalid width");if(!((a=Math.floor(void 0!==a?a:i.length/o))>=0))throw new RangeError("invalid height");if(!o||!a||!n&&!r)return e;const s=n&&t(n),u=r&&t(r),l=i.slice();return s&&u?(y(s,l,i,o,a),y(s,i,l,o,a),y(s,l,i,o,a),v(u,i,l,o,a),v(u,l,i,o,a),v(u,i,l,o,a)):s?(y(s,i,l,o,a),y(s,l,i,o,a),y(s,i,l,o,a)):u&&(v(u,i,l,o,a),v(u,l,i,o,a),v(u,i,l,o,a)),e}}function y(t,e,n,r,i){for(let o=0,a=r*i;o<a;)t(e,n,o,o+=r,1)}function v(t,e,n,r,i){for(let o=0,a=r*i;o<r;++o)t(e,n,o,o+a,r)}function x(t){const e=Math.floor(t);if(e===t)return function(t){const e=2*t+1;return(n,r,i,o,a)=>{if(!((o-=a)>=i))return;let s=t*r[i];const u=a*t;for(let t=i,e=i+u;t<e;t+=a)s+=r[Math.min(o,t)];for(let t=i,l=o;t<=l;t+=a)s+=r[Math.min(o,t+u)],n[t]=s/e,s-=r[Math.max(i,t-u)]}}(t);const n=t-e,r=2*t+1;return(t,i,o,a,s)=>{if(!((a-=s)>=o))return;let u=e*i[o];const l=s*e,c=l+s;for(let t=o,e=o+l;t<e;t+=s)u+=i[Math.min(a,t)];for(let e=o,f=a;e<=f;e+=s)u+=i[Math.min(a,e+l)],t[e]=(u+n*(i[Math.max(o,e-c)]+i[Math.min(a,e+c)]))/r,u-=i[Math.max(o,e-l)]}}function _(t,e){let n=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&++n;else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(i=+i)>=i&&++n}return n}function b(t){return 0|t.length}function w(t){return!(t>0)}function M(t){return"object"!=typeof t||"length"in t?t:Array.from(t)}function A(...t){const e="function"==typeof t[t.length-1]&&function(t){return e=>t(...e)}(t.pop()),n=(t=t.map(M)).map(b),r=t.length-1,i=new Array(r+1).fill(0),o=[];if(r<0||n.some(w))return o;for(;;){o.push(i.map(((e,n)=>t[n][e])));let a=r;for(;++i[a]===n[a];){if(0===a)return e?o.map(e):o;i[a--]=0}}}function T(t,e){var n=0,r=0;return Float64Array.from(t,void 0===e?t=>n+=+t||0:i=>n+=+e(i,r++,t)||0)}function E(t,e){let n,r=0,i=0,o=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(n=e-i,i+=n/++r,o+=n*(e-i));else{let a=-1;for(let s of t)null!=(s=e(s,++a,t))&&(s=+s)>=s&&(n=s-i,i+=n/++r,o+=n*(s-i))}if(r>1)return o/(r-1)}function C(t,e){const n=E(t,e);return n?Math.sqrt(n):n}function k(t,e){let n,r;if(void 0===e)for(const e of t)null!=e&&(void 0===n?e>=e&&(n=r=e):(n>e&&(n=e),r<e&&(r=e)));else{let i=-1;for(let o of t)null!=(o=e(o,++i,t))&&(void 0===n?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}class S{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let n=0;for(let r=0;r<this._n&&r<32;r++){const i=e[r],o=t+i,a=Math.abs(t)<Math.abs(i)?t-(o-i):i-(o-t);a&&(e[n++]=a),t=o}return e[n]=t,this._n=n+1,this}valueOf(){const t=this._partials;let e,n,r,i=this._n,o=0;if(i>0){for(o=t[--i];i>0&&(e=o,n=t[--i],o=e+n,r=n-(o-e),!r););i>0&&(r<0&&t[i-1]<0||r>0&&t[i-1]>0)&&(n=2*r,e=o+n,n==e-o&&(o=e))}return o}}function P(t,e){const n=new S;if(void 0===e)for(let e of t)(e=+e)&&n.add(e);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&n.add(i)}return+n}function O(t,e){const n=new S;let r=-1;return Float64Array.from(t,void 0===e?t=>n.add(+t||0):i=>n.add(+e(i,++r,t)||0))}class R extends Map{constructor(t,e=F){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[e,n]of t)this.set(e,n)}get(t){return super.get(I(this,t))}has(t){return super.has(I(this,t))}set(t,e){return super.set(D(this,t),e)}delete(t){return super.delete(N(this,t))}}class L extends Set{constructor(t,e=F){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const e of t)this.add(e)}has(t){return super.has(I(this,t))}add(t){return super.add(D(this,t))}delete(t){return super.delete(N(this,t))}}function I({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function D({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function N({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function F(t){return null!==t&&"object"==typeof t?t.valueOf():t}function z(t){return t}function B(t,...e){return Q(t,z,z,e)}function j(t,...e){return Q(t,Array.from,z,e)}function V(t,e){for(let n=1,r=e.length;n<r;++n)t=t.flatMap((t=>t.pop().map((([e,n])=>[...t,e,n]))));return t}function q(t,...e){return V(j(t,...e),e)}function G(t,e,...n){return V(H(t,e,...n),n)}function U(t,e,...n){return Q(t,z,e,n)}function H(t,e,...n){return Q(t,Array.from,e,n)}function W(t,...e){return Q(t,z,K,e)}function X(t,...e){return Q(t,Array.from,K,e)}function K(t){if(1!==t.length)throw new Error("duplicate key");return t[0]}function Q(t,e,n,r){return function t(i,o){if(o>=r.length)return n(i);const a=new R,s=r[o++];let u=-1;for(const t of i){const e=s(t,++u,i),n=a.get(e);n?n.push(t):a.set(e,[t])}for(const[e,n]of a)a.set(e,t(n,o));return e(a)}(t,0)}function Y(t,e){return Array.from(e,(e=>t[e]))}function $(t,...e){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");t=Array.from(t);let[n]=e;if(n&&2!==n.length||e.length>1){const r=Uint32Array.from(t,((t,e)=>e));return e.length>1?(e=e.map((e=>t.map(e))),r.sort(((t,n)=>{for(const r of e){const e=J(r[t],r[n]);if(e)return e}}))):(n=t.map(n),r.sort(((t,e)=>J(n[t],n[e])))),Y(t,r)}return t.sort(Z(n))}function Z(t=r){if(t===r)return J;if("function"!=typeof t)throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||0===r?r:(0===t(n,n))-(0===t(e,e))}}function J(t,e){return(null==t||!(t>=t))-(null==e||!(e>=e))||(t<e?-1:t>e?1:0)}function tt(t,e,n){return(2!==e.length?$(U(t,e,n),(([t,e],[n,i])=>r(e,i)||r(t,n))):$(B(t,n),(([t,n],[i,o])=>e(n,o)||r(t,i)))).map((([t])=>t))}var et=Array.prototype,nt=et.slice;et.map;function rt(t){return()=>t}const it=Math.sqrt(50),ot=Math.sqrt(10),at=Math.sqrt(2);function st(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=it?10:o>=ot?5:o>=at?2:1;let s,u,l;return i<0?(l=Math.pow(10,-i)/a,s=Math.round(t*l),u=Math.round(e*l),s/l<t&&++s,u/l>e&&--u,l=-l):(l=Math.pow(10,i)*a,s=Math.round(t/l),u=Math.round(e/l),s*l<t&&++s,u*l>e&&--u),u<s&&.5<=n&&n<2?st(t,e,2*n):[s,u,l]}function ut(t,e,n){if(!((n=+n)>0))return[];if((t=+t)===(e=+e))return[t];const r=e<t,[i,o,a]=r?st(e,t,n):st(t,e,n);if(!(o>=i))return[];const s=o-i+1,u=new Array(s);if(r)if(a<0)for(let t=0;t<s;++t)u[t]=(o-t)/-a;else for(let t=0;t<s;++t)u[t]=(o-t)*a;else if(a<0)for(let t=0;t<s;++t)u[t]=(i+t)/-a;else for(let t=0;t<s;++t)u[t]=(i+t)*a;return u}function lt(t,e,n){return st(t=+t,e=+e,n=+n)[2]}function ct(t,e,n){n=+n;const r=(e=+e)<(t=+t),i=r?lt(e,t,n):lt(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function ft(t,e,n){let r;for(;;){const i=lt(t,e,n);if(i===r||0===i||!isFinite(i))return[t,e];i>0?(t=Math.floor(t/i)*i,e=Math.ceil(e/i)*i):i<0&&(t=Math.ceil(t*i)/i,e=Math.floor(e*i)/i),r=i}}function ht(t){return Math.max(1,Math.ceil(Math.log(_(t))/Math.LN2)+1)}function dt(){var t=z,e=k,n=ht;function r(r){Array.isArray(r)||(r=Array.from(r));var i,o,a,s=r.length,u=new Array(s);for(i=0;i<s;++i)u[i]=t(r[i],i,r);var l=e(u),c=l[0],f=l[1],d=n(u,c,f);if(!Array.isArray(d)){const t=f,n=+d;if(e===k&&([c,f]=ft(c,f,n)),(d=ut(c,f,n))[0]<=c&&(a=lt(c,f,n)),d[d.length-1]>=f)if(t>=f&&e===k){const t=lt(c,f,n);isFinite(t)&&(t>0?f=(Math.floor(f/t)+1)*t:t<0&&(f=(Math.ceil(f*-t)+1)/-t))}else d.pop()}for(var p=d.length,m=0,g=p;d[m]<=c;)++m;for(;d[g-1]>f;)--g;(m||g<p)&&(d=d.slice(m,g),p=g-m);var y,v=new Array(p+1);for(i=0;i<=p;++i)(y=v[i]=[]).x0=i>0?d[i-1]:c,y.x1=i<p?d[i]:f;if(isFinite(a)){if(a>0)for(i=0;i<s;++i)null!=(o=u[i])&&c<=o&&o<=f&&v[Math.min(p,Math.floor((o-c)/a))].push(r[i]);else if(a<0)for(i=0;i<s;++i)if(null!=(o=u[i])&&c<=o&&o<=f){const t=Math.floor((c-o)*a);v[Math.min(p,t+(d[t]<=o))].push(r[i])}}else for(i=0;i<s;++i)null!=(o=u[i])&&c<=o&&o<=f&&v[h(d,o,0,p)].push(r[i]);return v}return r.value=function(e){return arguments.length?(t="function"==typeof e?e:rt(e),r):t},r.domain=function(t){return arguments.length?(e="function"==typeof t?t:rt([t[0],t[1]]),r):e},r.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:rt(Array.isArray(t)?nt.call(t):t),r):n},r}function pt(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function mt(t,e){let n,r=-1,i=-1;if(void 0===e)for(const e of t)++i,null!=e&&(n<e||void 0===n&&e>=e)&&(n=e,r=i);else for(let o of t)null!=(o=e(o,++i,t))&&(n<o||void 0===n&&o>=o)&&(n=o,r=i);return r}function gt(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n>e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function yt(t,e){let n,r=-1,i=-1;if(void 0===e)for(const e of t)++i,null!=e&&(n>e||void 0===n&&e>=e)&&(n=e,r=i);else for(let o of t)null!=(o=e(o,++i,t))&&(n>o||void 0===n&&o>=o)&&(n=o,r=i);return r}function vt(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=void 0===i?J:Z(i);r>n;){if(r-n>600){const o=r-n+1,a=e-n+1,s=Math.log(o),u=.5*Math.exp(2*s/3),l=.5*Math.sqrt(s*u*(o-u)/o)*(a-o/2<0?-1:1);vt(t,e,Math.max(n,Math.floor(e-a*u/o+l)),Math.min(r,Math.floor(e+(o-a)*u/o+l)),i)}const o=t[e];let a=n,s=r;for(xt(t,n,e),i(t[r],o)>0&&xt(t,n,r);a<s;){for(xt(t,a,s),++a,--s;i(t[a],o)<0;)++a;for(;i(t[s],o)>0;)--s}0===i(t[n],o)?xt(t,n,s):(++s,xt(t,s,r)),s<=e&&(n=s+1),e<=s&&(r=s-1)}return t}function xt(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function _t(t,e=r){let n,i=!1;if(1===e.length){let o;for(const a of t){const t=e(a);(i?r(t,o)>0:0===r(t,t))&&(n=a,o=t,i=!0)}}else for(const r of t)(i?e(r,n)>0:0===e(r,r))&&(n=r,i=!0);return n}function bt(t,e,n){if(t=Float64Array.from(function*(t,e){if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(yield e);else{let n=-1;for(let r of t)null!=(r=e(r,++n,t))&&(r=+r)>=r&&(yield r)}}(t,n)),(r=t.length)&&!isNaN(e=+e)){if(e<=0||r<2)return gt(t);if(e>=1)return pt(t);var r,i=(r-1)*e,o=Math.floor(i),a=pt(vt(t,o).subarray(0,o+1));return a+(gt(t.subarray(o+1))-a)*(i-o)}}function wt(t,e,n=s){if((r=t.length)&&!isNaN(e=+e)){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t);return a+(+n(t[o+1],o+1,t)-a)*(i-o)}}function Mt(t,e,n=s){if(!isNaN(e=+e)){if(r=Float64Array.from(t,((e,r)=>s(n(t[r],r,t)))),e<=0)return yt(r);if(e>=1)return mt(r);var r,i=Uint32Array.from(t,((t,e)=>e)),o=r.length-1,a=Math.floor(o*e);return vt(i,a,0,o,((t,e)=>J(r[t],r[e]))),(a=_t(i.subarray(0,a+1),(t=>r[t])))>=0?a:-1}}function At(t,e,n){const r=_(t),i=bt(t,.75)-bt(t,.25);return r&&i?Math.ceil((n-e)/(2*i*Math.pow(r,-1/3))):1}function Tt(t,e,n){const r=_(t),i=C(t);return r&&i?Math.ceil((n-e)*Math.cbrt(r)/(3.49*i)):1}function Et(t,e){let n=0,r=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(++n,r+=e);else{let i=-1;for(let o of t)null!=(o=e(o,++i,t))&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function Ct(t,e){return bt(t,.5,e)}function kt(t,e){return Mt(t,.5,e)}function St(t){return Array.from(function*(t){for(const e of t)yield*e}(t))}function Pt(t,e){const n=new R;if(void 0===e)for(let e of t)null!=e&&e>=e&&n.set(e,(n.get(e)||0)+1);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&i>=i&&n.set(i,(n.get(i)||0)+1)}let r,i=0;for(const[t,e]of n)e>i&&(i=e,r=t);return r}function Ot(t,e=Rt){const n=[];let r,i=!1;for(const o of t)i&&n.push(e(r,o)),r=o,i=!0;return n}function Rt(t,e){return[t,e]}function Lt(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o}function It(t,e=r){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");let n=Array.from(t);const i=new Float64Array(n.length);2!==e.length&&(n=n.map(e),e=r);const o=(t,r)=>e(n[t],n[r]);let a,s;return(t=Uint32Array.from(n,((t,e)=>e))).sort(e===r?(t,e)=>J(n[t],n[e]):Z(o)),t.forEach(((t,e)=>{const n=o(t,void 0===a?t:a);n>=0?((void 0===a||n>0)&&(a=t,s=e),i[t]=s):i[t]=NaN})),i}function Dt(t,e=r){let n,i=!1;if(1===e.length){let o;for(const a of t){const t=e(a);(i?r(t,o)<0:0===r(t,t))&&(n=a,o=t,i=!0)}}else for(const r of t)(i?e(r,n)<0:0===e(r,r))&&(n=r,i=!0);return n}function Nt(t,e=r){if(1===e.length)return yt(t,e);let n,i=-1,o=-1;for(const r of t)++o,(i<0?0===e(r,r):e(r,n)<0)&&(n=r,i=o);return i}function Ft(t,e=r){if(1===e.length)return mt(t,e);let n,i=-1,o=-1;for(const r of t)++o,(i<0?0===e(r,r):e(r,n)>0)&&(n=r,i=o);return i}function zt(t,e){const n=Nt(t,e);return n<0?void 0:n}var Bt=jt(Math.random);function jt(t){return function(e,n=0,r=e.length){let i=r-(n=+n);for(;i;){const r=t()*i--|0,o=e[i+n];e[i+n]=e[r+n],e[r+n]=o}return e}}function Vt(t,e){let n=0;if(void 0===e)for(let e of t)(e=+e)&&(n+=e);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function qt(t){if(!(i=t.length))return[];for(var e=-1,n=gt(t,Gt),r=new Array(n);++e<n;)for(var i,o=-1,a=r[e]=new Array(i);++o<i;)a[o]=t[o][e];return r}function Gt(t){return t.length}function Ut(){return qt(arguments)}function Ht(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");let n=-1;for(const r of t)if(!e(r,++n,t))return!1;return!0}function Wt(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");let n=-1;for(const r of t)if(e(r,++n,t))return!0;return!1}function Xt(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");const n=[];let r=-1;for(const i of t)e(i,++r,t)&&n.push(i);return n}function Kt(t,e){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");if("function"!=typeof e)throw new TypeError("mapper is not a function");return Array.from(t,((n,r)=>e(n,r,t)))}function Qt(t,e,n){if("function"!=typeof e)throw new TypeError("reducer is not a function");const r=t[Symbol.iterator]();let i,o,a=-1;if(arguments.length<3){if(({done:i,value:n}=r.next()),i)return;++a}for(;({done:i,value:o}=r.next()),!i;)n=e(n,o,++a,t);return n}function Yt(t){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");return Array.from(t).reverse()}function $t(t,...e){t=new L(t);for(const n of e)for(const e of n)t.delete(e);return t}function Zt(t,e){const n=e[Symbol.iterator](),r=new L;for(const e of t){if(r.has(e))return!1;let t,i;for(;({value:t,done:i}=n.next())&&!i;){if(Object.is(e,t))return!1;r.add(t)}}return!0}function Jt(t,...e){t=new L(t),e=e.map(te);t:for(const n of t)for(const r of e)if(!r.has(n)){t.delete(n);continue t}return t}function te(t){return t instanceof L?t:new L(t)}function ee(t,e){const n=t[Symbol.iterator](),r=new Set;for(const t of e){const e=ne(t);if(r.has(e))continue;let i,o;for(;({value:i,done:o}=n.next());){if(o)return!1;const t=ne(i);if(r.add(t),Object.is(e,t))break}}return!0}function ne(t){return null!==t&&"object"==typeof t?t.valueOf():t}function re(t,e){return ee(e,t)}function ie(...t){const e=new L;for(const n of t)for(const t of n)e.add(t);return e}function oe(t){return t}var ae=1,se=2,ue=3,le=4,ce=1e-6;function fe(t){return"translate("+t+",0)"}function he(t){return"translate(0,"+t+")"}function de(t){return e=>+t(e)}function pe(t,e){return e=Math.max(0,t.bandwidth()-2*e)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function me(){return!this.__axis}function ge(t,e){var n=[],r=null,i=null,o=6,a=6,s=3,u="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,l=t===ae||t===le?-1:1,c=t===le||t===se?"x":"y",f=t===ae||t===ue?fe:he;function h(h){var d=null==r?e.ticks?e.ticks.apply(e,n):e.domain():r,p=null==i?e.tickFormat?e.tickFormat.apply(e,n):oe:i,m=Math.max(o,0)+s,g=e.range(),y=+g[0]+u,v=+g[g.length-1]+u,x=(e.bandwidth?pe:de)(e.copy(),u),_=h.selection?h.selection():h,b=_.selectAll(".domain").data([null]),w=_.selectAll(".tick").data(d,e).order(),M=w.exit(),A=w.enter().append("g").attr("class","tick"),T=w.select("line"),E=w.select("text");b=b.merge(b.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),w=w.merge(A),T=T.merge(A.append("line").attr("stroke","currentColor").attr(c+"2",l*o)),E=E.merge(A.append("text").attr("fill","currentColor").attr(c,l*m).attr("dy",t===ae?"0em":t===ue?"0.71em":"0.32em")),h!==_&&(b=b.transition(h),w=w.transition(h),T=T.transition(h),E=E.transition(h),M=M.transition(h).attr("opacity",ce).attr("transform",(function(t){return isFinite(t=x(t))?f(t+u):this.getAttribute("transform")})),A.attr("opacity",ce).attr("transform",(function(t){var e=this.parentNode.__axis;return f((e&&isFinite(e=e(t))?e:x(t))+u)}))),M.remove(),b.attr("d",t===le||t===se?a?"M"+l*a+","+y+"H"+u+"V"+v+"H"+l*a:"M"+u+","+y+"V"+v:a?"M"+y+","+l*a+"V"+u+"H"+v+"V"+l*a:"M"+y+","+u+"H"+v),w.attr("opacity",1).attr("transform",(function(t){return f(x(t)+u)})),T.attr(c+"2",l*o),E.attr(c,l*m).text(p),_.filter(me).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===se?"start":t===le?"end":"middle"),_.each((function(){this.__axis=x}))}return h.scale=function(t){return arguments.length?(e=t,h):e},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(t){return arguments.length?(n=null==t?[]:Array.from(t),h):n.slice()},h.tickValues=function(t){return arguments.length?(r=null==t?null:Array.from(t),h):r&&r.slice()},h.tickFormat=function(t){return arguments.length?(i=t,h):i},h.tickSize=function(t){return arguments.length?(o=a=+t,h):o},h.tickSizeInner=function(t){return arguments.length?(o=+t,h):o},h.tickSizeOuter=function(t){return arguments.length?(a=+t,h):a},h.tickPadding=function(t){return arguments.length?(s=+t,h):s},h.offset=function(t){return arguments.length?(u=+t,h):u},h}function ye(t){return ge(ae,t)}function ve(t){return ge(se,t)}function xe(t){return ge(ue,t)}function _e(t){return ge(le,t)}var be={value:()=>{}};function we(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new Me(r)}function Me(t){this._=t}function Ae(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function Te(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=be,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}Me.prototype=we.prototype={constructor:Me,on:function(t,e){var n,r,i=this._,o=(r=i,(t+"").trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))),a=-1,s=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<s;)if(n=(t=o[a]).type)i[n]=Te(i[n],t.name,e);else if(null==e)for(n in i)i[n]=Te(i[n],t.name,null);return this}for(;++a<s;)if((n=(t=o[a]).type)&&(n=Ae(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Me(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var Ee=we;function Ce(){}function ke(t){return null==t?Ce:function(){return this.querySelector(t)}}function Se(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function Pe(){return[]}function Oe(t){return null==t?Pe:function(){return this.querySelectorAll(t)}}function Re(t){return function(){return this.matches(t)}}function Le(t){return function(e){return e.matches(t)}}var Ie=Array.prototype.find;function De(){return this.firstElementChild}var Ne=Array.prototype.filter;function Fe(){return Array.from(this.children)}function ze(t){return new Array(t.length)}function Be(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function je(t,e,n,r,i,o){for(var a,s=0,u=e.length,l=o.length;s<l;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new Be(t,o[s]);for(;s<u;++s)(a=e[s])&&(i[s]=a)}function Ve(t,e,n,r,i,o,a){var s,u,l,c=new Map,f=e.length,h=o.length,d=new Array(f);for(s=0;s<f;++s)(u=e[s])&&(d[s]=l=a.call(u,u.__data__,s,e)+"",c.has(l)?i[s]=u:c.set(l,u));for(s=0;s<h;++s)l=a.call(t,o[s],s,o)+"",(u=c.get(l))?(r[s]=u,u.__data__=o[s],c.delete(l)):n[s]=new Be(t,o[s]);for(s=0;s<f;++s)(u=e[s])&&c.get(d[s])===u&&(i[s]=u)}function qe(t){return t.__data__}function Ge(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function Ue(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}Be.prototype={constructor:Be,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var He="http://www.w3.org/1999/xhtml",We={svg:"http://www.w3.org/2000/svg",xhtml:He,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Xe(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),We.hasOwnProperty(e)?{space:We[e],local:t}:t}function Ke(t){return function(){this.removeAttribute(t)}}function Qe(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ye(t,e){return function(){this.setAttribute(t,e)}}function $e(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Ze(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function Je(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function tn(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function en(t){return function(){this.style.removeProperty(t)}}function nn(t,e,n){return function(){this.style.setProperty(t,e,n)}}function rn(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function on(t,e){return t.style.getPropertyValue(e)||tn(t).getComputedStyle(t,null).getPropertyValue(e)}function an(t){return function(){delete this[t]}}function sn(t,e){return function(){this[t]=e}}function un(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function ln(t){return t.trim().split(/^|\s+/)}function cn(t){return t.classList||new fn(t)}function fn(t){this._node=t,this._names=ln(t.getAttribute("class")||"")}function hn(t,e){for(var n=cn(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function dn(t,e){for(var n=cn(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function pn(t){return function(){hn(this,t)}}function mn(t){return function(){dn(this,t)}}function gn(t,e){return function(){(e.apply(this,arguments)?hn:dn)(this,t)}}function yn(){this.textContent=""}function vn(t){return function(){this.textContent=t}}function xn(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function _n(){this.innerHTML=""}function bn(t){return function(){this.innerHTML=t}}function wn(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Mn(){this.nextSibling&&this.parentNode.appendChild(this)}function An(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Tn(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===He&&e.documentElement.namespaceURI===He?e.createElement(t):e.createElementNS(n,t)}}function En(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Cn(t){var e=Xe(t);return(e.local?En:Tn)(e)}function kn(){return null}function Sn(){var t=this.parentNode;t&&t.removeChild(this)}function Pn(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function On(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Rn(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?e.length=i:delete this.__on}}}function Ln(t,e,n){return function(){var r,i=this.__on,o=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(i)for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=e);this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function In(t,e,n){var r=tn(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Dn(t,e){return function(){return In(this,t,e)}}function Nn(t,e){return function(){return In(this,t,e.apply(this,arguments))}}fn.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Fn=[null];function zn(t,e){this._groups=t,this._parents=e}function Bn(){return new zn([[document.documentElement]],Fn)}zn.prototype=Bn.prototype={constructor:zn,select:function(t){"function"!=typeof t&&(t=ke(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=e[i],u=s.length,l=r[i]=new Array(u),c=0;c<u;++c)(o=s[c])&&(a=t.call(o,o.__data__,c,s))&&("__data__"in o&&(a.__data__=o.__data__),l[c]=a);return new zn(r,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){return Se(t.apply(this,arguments))}}(t):Oe(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,s=e[o],u=s.length,l=0;l<u;++l)(a=s[l])&&(r.push(t.call(a,a.__data__,l,s)),i.push(a));return new zn(r,i)},selectChild:function(t){return this.select(null==t?De:function(t){return function(){return Ie.call(this.children,t)}}("function"==typeof t?t:Le(t)))},selectChildren:function(t){return this.selectAll(null==t?Fe:function(t){return function(){return Ne.call(this.children,t)}}("function"==typeof t?t:Le(t)))},filter:function(t){"function"!=typeof t&&(t=Re(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,u=r[i]=[],l=0;l<s;++l)(o=a[l])&&t.call(o,o.__data__,l,a)&&u.push(o);return new zn(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,qe);var n=e?Ve:je,r=this._parents,i=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var o=i.length,a=new Array(o),s=new Array(o),u=new Array(o),l=0;l<o;++l){var c=r[l],f=i[l],h=f.length,d=Ge(t.call(c,c&&c.__data__,l,r)),p=d.length,m=s[l]=new Array(p),g=a[l]=new Array(p);n(c,f,m,g,u[l]=new Array(h),d,e);for(var y,v,x=0,_=0;x<p;++x)if(y=m[x]){for(x>=_&&(_=x+1);!(v=g[_])&&++_<p;);y._next=v||null}}return(a=new zn(a,r))._enter=s,a._exit=u,a},enter:function(){return new zn(this._enter||this._groups.map(ze),this._parents)},exit:function(){return new zn(this._exit||this._groups.map(ze),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,o=this.exit();return"function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=e&&(i=e(i))&&(i=i.selection()),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),u=0;u<a;++u)for(var l,c=n[u],f=r[u],h=c.length,d=s[u]=new Array(h),p=0;p<h;++p)(l=c[p]||f[p])&&(d[p]=l);for(;u<i;++u)s[u]=n[u];return new zn(s,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=Ue);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],u=s.length,l=i[o]=new Array(u),c=0;c<u;++c)(a=s[c])&&(l[c]=a);l.sort(e)}return new zn(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,s=o.length;a<s;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,e){var n=Xe(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?Qe:Ke:"function"==typeof e?n.local?Je:Ze:n.local?$e:Ye)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?en:"function"==typeof e?rn:nn)(t,e,null==n?"":n)):on(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?an:"function"==typeof e?un:sn)(t,e)):this.node()[t]},classed:function(t,e){var n=ln(t+"");if(arguments.length<2){for(var r=cn(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?gn:e?pn:mn)(n,e))},text:function(t){return arguments.length?this.each(null==t?yn:("function"==typeof t?xn:vn)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?_n:("function"==typeof t?wn:bn)(t)):this.node().innerHTML},raise:function(){return this.each(Mn)},lower:function(){return this.each(An)},append:function(t){var e="function"==typeof t?t:Cn(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:Cn(t),r=null==e?kn:"function"==typeof e?e:ke(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(Sn)},clone:function(t){return this.select(t?On:Pn)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}(t+""),a=o.length;if(!(arguments.length<2)){for(s=e?Ln:Rn,r=0;r<a;++r)this.each(s(o[r],e,n));return this}var s=this.node().__on;if(s)for(var u,l=0,c=s.length;l<c;++l)for(r=0,u=s[l];r<a;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(t,e){return this.each(("function"==typeof e?Nn:Dn)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,i=t[e],o=0,a=i.length;o<a;++o)(r=i[o])&&(yield r)}};var jn=Bn;function Vn(t){return"string"==typeof t?new zn([[document.querySelector(t)]],[document.documentElement]):new zn([[t]],Fn)}const qn={passive:!1},Gn={capture:!0,passive:!1};function Un(t){t.stopImmediatePropagation()}function Hn(t){t.preventDefault(),t.stopImmediatePropagation()}function Wn(t){var e=t.document.documentElement,n=Vn(t).on("dragstart.drag",Hn,Gn);"onselectstart"in e?n.on("selectstart.drag",Hn,Gn):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Xn(t,e){var n=t.document.documentElement,r=Vn(t).on("dragstart.drag",null);e&&(r.on("click.drag",Hn,Gn),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Kn(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Qn(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Yn(){}var $n=.7,Zn=1/$n,Jn="\\s*([+-]?\\d+)\\s*",tr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",er="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",nr=/^#([0-9a-f]{3,8})$/,rr=new RegExp(`^rgb\\(${Jn},${Jn},${Jn}\\)$`),ir=new RegExp(`^rgb\\(${er},${er},${er}\\)$`),or=new RegExp(`^rgba\\(${Jn},${Jn},${Jn},${tr}\\)$`),ar=new RegExp(`^rgba\\(${er},${er},${er},${tr}\\)$`),sr=new RegExp(`^hsl\\(${tr},${er},${er}\\)$`),ur=new RegExp(`^hsla\\(${tr},${er},${er},${tr}\\)$`),lr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function cr(){return this.rgb().formatHex()}function fr(){return this.rgb().formatRgb()}function hr(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=nr.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?dr(e):3===n?new yr(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?pr(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?pr(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=rr.exec(t))?new yr(e[1],e[2],e[3],1):(e=ir.exec(t))?new yr(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=or.exec(t))?pr(e[1],e[2],e[3],e[4]):(e=ar.exec(t))?pr(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=sr.exec(t))?Mr(e[1],e[2]/100,e[3]/100,1):(e=ur.exec(t))?Mr(e[1],e[2]/100,e[3]/100,e[4]):lr.hasOwnProperty(t)?dr(lr[t]):"transparent"===t?new yr(NaN,NaN,NaN,0):null}function dr(t){return new yr(t>>16&255,t>>8&255,255&t,1)}function pr(t,e,n,r){return r<=0&&(t=e=n=NaN),new yr(t,e,n,r)}function mr(t){return t instanceof Yn||(t=hr(t)),t?new yr((t=t.rgb()).r,t.g,t.b,t.opacity):new yr}function gr(t,e,n,r){return 1===arguments.length?mr(t):new yr(t,e,n,null==r?1:r)}function yr(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function vr(){return`#${wr(this.r)}${wr(this.g)}${wr(this.b)}`}function xr(){const t=_r(this.opacity);return`${1===t?"rgb(":"rgba("}${br(this.r)}, ${br(this.g)}, ${br(this.b)}${1===t?")":`, ${t})`}`}function _r(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function br(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function wr(t){return((t=br(t))<16?"0":"")+t.toString(16)}function Mr(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Er(t,e,n,r)}function Ar(t){if(t instanceof Er)return new Er(t.h,t.s,t.l,t.opacity);if(t instanceof Yn||(t=hr(t)),!t)return new Er;if(t instanceof Er)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new Er(a,s,u,t.opacity)}function Tr(t,e,n,r){return 1===arguments.length?Ar(t):new Er(t,e,n,null==r?1:r)}function Er(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Cr(t){return(t=(t||0)%360)<0?t+360:t}function kr(t){return Math.max(0,Math.min(1,t||0))}function Sr(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function Pr(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}function Or(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,s=r<e-1?t[r+2]:2*o-i;return Pr((n-r/e)*e,a,i,o,s)}}function Rr(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],a=t[(r+1)%e],s=t[(r+2)%e];return Pr((n-r/e)*e,i,o,a,s)}}Kn(Yn,hr,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:cr,formatHex:cr,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Ar(this).formatHsl()},formatRgb:fr,toString:fr}),Kn(yr,gr,Qn(Yn,{brighter(t){return t=null==t?Zn:Math.pow(Zn,t),new yr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?$n:Math.pow($n,t),new yr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new yr(br(this.r),br(this.g),br(this.b),_r(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:vr,formatHex:vr,formatHex8:function(){return`#${wr(this.r)}${wr(this.g)}${wr(this.b)}${wr(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:xr,toString:xr})),Kn(Er,Tr,Qn(Yn,{brighter(t){return t=null==t?Zn:Math.pow(Zn,t),new Er(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?$n:Math.pow($n,t),new Er(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new yr(Sr(t>=240?t-240:t+120,i,r),Sr(t,i,r),Sr(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Er(Cr(this.h),kr(this.s),kr(this.l),_r(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=_r(this.opacity);return`${1===t?"hsl(":"hsla("}${Cr(this.h)}, ${100*kr(this.s)}%, ${100*kr(this.l)}%${1===t?")":`, ${t})`}`}}));var Lr=t=>()=>t;function Ir(t,e){return function(n){return t+n*e}}function Dr(t,e){var n=e-t;return n?Ir(t,n>180||n<-180?n-360*Math.round(n/360):n):Lr(isNaN(t)?e:t)}function Nr(t){return 1==(t=+t)?Fr:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):Lr(isNaN(e)?n:e)}}function Fr(t,e){var n=e-t;return n?Ir(t,n):Lr(isNaN(t)?e:t)}var zr=function t(e){var n=Nr(e);function r(t,e){var r=n((t=gr(t)).r,(e=gr(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=Fr(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function Br(t){return function(e){var n,r,i=e.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=gr(e[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=t(o),a=t(a),s=t(s),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=s(t),r+""}}}var jr=Br(Or),Vr=Br(Rr);function qr(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}}function Gr(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ur(t,e){return(Gr(e)?qr:Hr)(t,e)}function Hr(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=Zr(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}function Wr(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Xr(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Kr(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=Zr(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}var Qr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Yr=new RegExp(Qr.source,"g");function $r(t,e){var n,r,i,o=Qr.lastIndex=Yr.lastIndex=0,a=-1,s=[],u=[];for(t+="",e+="";(n=Qr.exec(t))&&(r=Yr.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:Xr(n,r)})),o=Yr.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})}function Zr(t,e){var n,r=typeof e;return null==e||"boolean"===r?Lr(e):("number"===r?Xr:"string"===r?(n=hr(e))?(e=n,zr):$r:e instanceof hr?zr:e instanceof Date?Wr:Gr(e)?qr:Array.isArray(e)?Hr:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Kr:Xr)(t,e)}function Jr(t){let e;for(;e=t.sourceEvent;)t=e;return t}function ti(t,e){if(t=Jr(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}var ei,ni,ri=0,ii=0,oi=0,ai=0,si=0,ui=0,li="object"==typeof performance&&performance.now?performance:Date,ci="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function fi(){return si||(ci(hi),si=li.now()+ui)}function hi(){si=0}function di(){this._call=this._time=this._next=null}function pi(t,e,n){var r=new di;return r.restart(t,e,n),r}function mi(){fi(),++ri;for(var t,e=ei;e;)(t=si-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ri}function gi(){si=(ai=li.now())+ui,ri=ii=0;try{mi()}finally{ri=0,function(){var t,e,n=ei,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:ei=e);ni=t,vi(r)}(),si=0}}function yi(){var t=li.now(),e=t-ai;e>1e3&&(ui-=e,ai=t)}function vi(t){ri||(ii&&(ii=clearTimeout(ii)),t-si>24?(t<1/0&&(ii=setTimeout(gi,t-li.now()-ui)),oi&&(oi=clearInterval(oi))):(oi||(ai=li.now(),oi=setInterval(yi,1e3)),ri=1,ci(gi)))}function xi(t,e,n){var r=new di;return e=null==e?0:+e,r.restart((n=>{r.stop(),t(n+e)}),e,n),r}di.prototype=pi.prototype={constructor:di,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?fi():+n)+(null==e?0:+e),this._next||ni===this||(ni?ni._next=this:ei=this,ni=this),this._call=t,this._time=n,vi()},stop:function(){this._call&&(this._call=null,this._time=1/0,vi())}};var _i=Ee("start","end","cancel","interrupt"),bi=[],wi=1,Mi=2,Ai=5,Ti=6;function Ei(t,e,n,r,i,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function o(t){n.state=wi,n.timer.restart(a,n.delay,n.time),n.delay<=t&&a(t-n.delay)}function a(o){var l,c,f,h;if(n.state!==wi)return u();for(l in i)if((h=i[l]).name===n.name){if(3===h.state)return xi(a);4===h.state?(h.state=Ti,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete i[l]):+l<e&&(h.state=Ti,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete i[l])}if(xi((function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(o))})),n.state=Mi,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Mi){for(n.state=3,r=new Array(f=n.tween.length),l=0,c=-1;l<f;++l)(h=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(r[++c]=h);r.length=c+1}}function s(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(u),n.state=Ai,1),o=-1,a=r.length;++o<a;)r[o].call(t,i);n.state===Ai&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){for(var r in n.state=Ti,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=pi(o,0,n.time)}(t,n,{name:e,index:r,group:i,on:_i,tween:bi,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function Ci(t,e){var n=Si(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function ki(t,e){var n=Si(t,e);if(n.state>3)throw new Error("too late; already running");return n}function Si(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Pi(t,e){var n,r,i,o=t.__transition,a=!0;if(o){for(i in e=null==e?null:e+"",o)(n=o[i]).name===e?(r=n.state>Mi&&n.state<Ai,n.state=Ti,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete t.__transition}}var Oi,Ri=180/Math.PI,Li={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ii(t,e,n,r,i,o){var a,s,u;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),t*r<e*n&&(t=-t,e=-e,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*Ri,skewX:Math.atan(u)*Ri,scaleX:a,scaleY:s}}function Di(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var s=[],u=[];return o=t(o),a=t(a),function(t,r,i,o,a,s){if(t!==i||r!==o){var u=a.push("translate(",null,e,null,n);s.push({i:u-4,x:Xr(t,i)},{i:u-2,x:Xr(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,u),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Xr(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(o.rotate,a.rotate,s,u),function(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Xr(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(o.skewX,a.skewX,s,u),function(t,e,n,r,o,a){if(t!==n||e!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:Xr(t,n)},{i:s-2,x:Xr(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,u),o=a=null,function(t){for(var e,n=-1,r=u.length;++n<r;)s[(e=u[n]).i]=e.x(t);return s.join("")}}}var Ni=Di((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Li:Ii(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),Fi=Di((function(t){return null==t?Li:(Oi||(Oi=document.createElementNS("http://www.w3.org/2000/svg","g")),Oi.setAttribute("transform",t),(t=Oi.transform.baseVal.consolidate())?Ii((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Li)}),", ",")",")");function zi(t,e){var n,r;return function(){var i=ki(this,t),o=i.tween;if(o!==n)for(var a=0,s=(r=n=o).length;a<s;++a)if(r[a].name===e){(r=r.slice()).splice(a,1);break}i.tween=r}}function Bi(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=ki(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:e,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===e){i[u]=s;break}u===l&&i.push(s)}o.tween=i}}function ji(t,e,n){var r=t._id;return t.each((function(){var t=ki(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return Si(t,r).value[e]}}function Vi(t,e){var n;return("number"==typeof e?Xr:e instanceof hr?zr:(n=hr(e))?(e=n,zr):$r)(t,e)}function qi(t){return function(){this.removeAttribute(t)}}function Gi(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ui(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttribute(t);return a===o?null:a===r?i:i=e(r=a,n)}}function Hi(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r?i:i=e(r=a,n)}}function Wi(t,e,n){var r,i,o;return function(){var a,s,u=n(this);if(null!=u)return(a=this.getAttribute(t))===(s=u+"")?null:a===r&&s===i?o:(i=s,o=e(r=a,u));this.removeAttribute(t)}}function Xi(t,e,n){var r,i,o;return function(){var a,s,u=n(this);if(null!=u)return(a=this.getAttributeNS(t.space,t.local))===(s=u+"")?null:a===r&&s===i?o:(i=s,o=e(r=a,u));this.removeAttributeNS(t.space,t.local)}}function Ki(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}(t,i)),n}return i._value=e,i}function Qi(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}(t,i)),n}return i._value=e,i}function Yi(t,e){return function(){Ci(this,t).delay=+e.apply(this,arguments)}}function $i(t,e){return e=+e,function(){Ci(this,t).delay=e}}function Zi(t,e){return function(){ki(this,t).duration=+e.apply(this,arguments)}}function Ji(t,e){return e=+e,function(){ki(this,t).duration=e}}var to=jn.prototype.constructor;function eo(t){return function(){this.style.removeProperty(t)}}var no=0;function ro(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function io(t){return jn().transition(t)}function oo(){return++no}var ao=jn.prototype;function so(t){return t*t*t}function uo(t){return--t*t*t+1}function lo(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}ro.prototype=io.prototype={constructor:ro,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=ke(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,u,l=r[a],c=l.length,f=o[a]=new Array(c),h=0;h<c;++h)(s=l[h])&&(u=t.call(s,s.__data__,h,l))&&("__data__"in s&&(u.__data__=s.__data__),f[h]=u,Ei(f[h],e,n,h,f,Si(s,n)));return new ro(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Oe(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var u,l=r[s],c=l.length,f=0;f<c;++f)if(u=l[f]){for(var h,d=t.call(u,u.__data__,f,l),p=Si(u,n),m=0,g=d.length;m<g;++m)(h=d[m])&&Ei(h,e,n,m,d,p);o.push(d),a.push(u)}return new ro(o,a,e,n)},selectChild:ao.selectChild,selectChildren:ao.selectChildren,filter:function(t){"function"!=typeof t&&(t=Re(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,u=r[i]=[],l=0;l<s;++l)(o=a[l])&&t.call(o,o.__data__,l,a)&&u.push(o);return new ro(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,l=e[s],c=n[s],f=l.length,h=a[s]=new Array(f),d=0;d<f;++d)(u=l[d]||c[d])&&(h[d]=u);for(;s<r;++s)a[s]=e[s];return new ro(a,this._parents,this._name,this._id)},selection:function(){return new to(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=oo(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,l=0;l<u;++l)if(a=s[l]){var c=Si(a,e);Ei(a,t,n,l,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new ro(r,this._parents,t,n)},call:ao.call,nodes:ao.nodes,node:ao.node,size:ao.size,empty:ao.empty,each:ao.each,on:function(t,e){var n=this._id;return arguments.length<2?Si(this.node(),n).on.on(t):this.each(function(t,e,n){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?Ci:ki;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(e,n),a.on=i}}(n,t,e))},attr:function(t,e){var n=Xe(t),r="transform"===n?Fi:Vi;return this.attrTween(t,"function"==typeof e?(n.local?Xi:Wi)(n,r,ji(this,"attr."+t,e)):null==e?(n.local?Gi:qi)(n):(n.local?Hi:Ui)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=Xe(t);return this.tween(n,(r.local?Ki:Qi)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?Ni:Vi;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var o=on(this,t),a=(this.style.removeProperty(t),on(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}(t,r)).on("end.style."+t,eo(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,i,o;return function(){var a=on(this,t),s=n(this),u=s+"";return null==s&&(this.style.removeProperty(t),u=s=on(this,t)),a===u?null:a===r&&u===i?o:(i=u,o=e(r=a,s))}}(t,r,ji(this,"style."+t,e))).each(function(t,e){var n,r,i,o,a="style."+e,s="end."+a;return function(){var u=ki(this,t),l=u.on,c=null==u.value[a]?o||(o=eo(e)):void 0;l===n&&i===c||(r=(n=l).copy()).on(s,i=c),u.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,o=n+"";return function(){var a=on(this,t);return a===o?null:a===r?i:i=e(r=a,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,function(t,e,n){var r,i;function o(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&function(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}(t,o,n)),r}return o._value=e,o}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(ji(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&function(t){return function(e){this.textContent=t.call(this,e)}}(r)),e}return r._value=t,r}(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=Si(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?zi:Bi)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Yi:$i)(e,t)):Si(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Zi:Ji)(e,t)):Si(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){ki(this,t).ease=e}}(e,t)):Si(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;ki(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(o,a){var s={value:a},u={value:function(){0==--i&&o()}};n.each((function(){var n=ki(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(s),e._.interrupt.push(s),e._.end.push(u)),n.on=e})),0===i&&o()}))},[Symbol.iterator]:ao[Symbol.iterator]};var co={time:null,delay:0,duration:250,ease:lo};function fo(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}jn.prototype.interrupt=function(t){return this.each((function(){Pi(this,t)}))},jn.prototype.transition=function(t){var e,n;t instanceof ro?(e=t._id,t=t._name):(e=oo(),(n=co).time=fi(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,l=0;l<u;++l)(a=s[l])&&Ei(a,t,e,l,s,n||fo(a,e));return new ro(r,this._parents,t,e)};var ho=[null];function po(t,e){var n,r,i=t.__transition;if(i)for(r in e=null==e?null:e+"",i)if((n=i[r]).state>wi&&n.name===e)return new ro([[t]],ho,e,+r);return null}var mo=t=>()=>t;function go(t,{sourceEvent:e,target:n,selection:r,mode:i,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function yo(t){t.preventDefault(),t.stopImmediatePropagation()}var vo={name:"drag"},xo={name:"space"},_o={name:"handle"},bo={name:"center"};const{abs:wo,max:Mo,min:Ao}=Math;function To(t){return[+t[0],+t[1]]}function Eo(t){return[To(t[0]),To(t[1])]}var Co={name:"x",handles:["w","e"].map(Do),input:function(t,e){return null==t?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},ko={name:"y",handles:["n","s"].map(Do),input:function(t,e){return null==t?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},So={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Do),input:function(t){return null==t?null:Eo(t)},output:function(t){return t}},Po={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Oo={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Ro={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Lo={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Io={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Do(t){return{type:t}}function No(t){return!t.ctrlKey&&!t.button}function Fo(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function zo(){return navigator.maxTouchPoints||"ontouchstart"in this}function Bo(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function jo(t){var e=t.__brush;return e?e.dim.output(e.selection):null}function Vo(){return Uo(Co)}function qo(){return Uo(ko)}function Go(){return Uo(So)}function Uo(t){var e,n=Fo,r=No,i=zo,o=!0,a=Ee("start","brush","end"),s=6;function u(e){var n=e.property("__brush",m).selectAll(".overlay").data([Do("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Po.overlay).merge(n).each((function(){var t=Bo(this).extent;Vn(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])})),e.selectAll(".selection").data([Do("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Po.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=e.selectAll(".handle").data(t.handles,(function(t){return t.type}));r.exit().remove(),r.enter().append("rect").attr("class",(function(t){return"handle handle--"+t.type})).attr("cursor",(function(t){return Po[t.type]})),e.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",h).filter(i).on("touchstart.brush",h).on("touchmove.brush",d).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function l(){var t=Vn(this),e=Bo(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",(function(t){return"e"===t.type[t.type.length-1]?e[1][0]-s/2:e[0][0]-s/2})).attr("y",(function(t){return"s"===t.type[0]?e[1][1]-s/2:e[0][1]-s/2})).attr("width",(function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+s:s})).attr("height",(function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+s:s}))):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(t,e,n){var r=t.__brush.emitter;return!r||n&&r.clean?new f(t,e,n):r}function f(t,e,n){this.that=t,this.args=e,this.state=t.__brush,this.active=0,this.clean=n}function h(n){if((!e||n.touches)&&r.apply(this,arguments)){var i,a,s,u,f,h,d,p,m,g,y,v=this,x=n.target.__data__.type,_="selection"===(o&&n.metaKey?x="overlay":x)?vo:o&&n.altKey?bo:_o,b=t===ko?null:Lo[x],w=t===Co?null:Io[x],M=Bo(v),A=M.extent,T=M.selection,E=A[0][0],C=A[0][1],k=A[1][0],S=A[1][1],P=0,O=0,R=b&&w&&o&&n.shiftKey,L=Array.from(n.touches||[n],(t=>{const e=t.identifier;return(t=ti(t,v)).point0=t.slice(),t.identifier=e,t}));Pi(v);var I=c(v,arguments,!0).beforestart();if("overlay"===x){T&&(m=!0);const e=[L[0],L[1]||L[0]];M.selection=T=[[i=t===ko?E:Ao(e[0][0],e[1][0]),s=t===Co?C:Ao(e[0][1],e[1][1])],[f=t===ko?k:Mo(e[0][0],e[1][0]),d=t===Co?S:Mo(e[0][1],e[1][1])]],L.length>1&&B(n)}else i=T[0][0],s=T[0][1],f=T[1][0],d=T[1][1];a=i,u=s,h=f,p=d;var D=Vn(v).attr("pointer-events","none"),N=D.selectAll(".overlay").attr("cursor",Po[x]);if(n.touches)I.moved=z,I.ended=j;else{var F=Vn(n.view).on("mousemove.brush",z,!0).on("mouseup.brush",j,!0);o&&F.on("keydown.brush",(function(t){switch(t.keyCode){case 16:R=b&&w;break;case 18:_===_o&&(b&&(f=h-P*b,i=a+P*b),w&&(d=p-O*w,s=u+O*w),_=bo,B(t));break;case 32:_!==_o&&_!==bo||(b<0?f=h-P:b>0&&(i=a-P),w<0?d=p-O:w>0&&(s=u-O),_=xo,N.attr("cursor",Po.selection),B(t));break;default:return}yo(t)}),!0).on("keyup.brush",(function(t){switch(t.keyCode){case 16:R&&(g=y=R=!1,B(t));break;case 18:_===bo&&(b<0?f=h:b>0&&(i=a),w<0?d=p:w>0&&(s=u),_=_o,B(t));break;case 32:_===xo&&(t.altKey?(b&&(f=h-P*b,i=a+P*b),w&&(d=p-O*w,s=u+O*w),_=bo):(b<0?f=h:b>0&&(i=a),w<0?d=p:w>0&&(s=u),_=_o),N.attr("cursor",Po[x]),B(t));break;default:return}yo(t)}),!0),Wn(n.view)}l.call(v),I.start(n,_.name)}function z(t){for(const e of t.changedTouches||[t])for(const t of L)t.identifier===e.identifier&&(t.cur=ti(e,v));if(R&&!g&&!y&&1===L.length){const t=L[0];wo(t.cur[0]-t[0])>wo(t.cur[1]-t[1])?y=!0:g=!0}for(const t of L)t.cur&&(t[0]=t.cur[0],t[1]=t.cur[1]);m=!0,yo(t),B(t)}function B(t){const e=L[0],n=e.point0;var r;switch(P=e[0]-n[0],O=e[1]-n[1],_){case xo:case vo:b&&(P=Mo(E-i,Ao(k-f,P)),a=i+P,h=f+P),w&&(O=Mo(C-s,Ao(S-d,O)),u=s+O,p=d+O);break;case _o:L[1]?(b&&(a=Mo(E,Ao(k,L[0][0])),h=Mo(E,Ao(k,L[1][0])),b=1),w&&(u=Mo(C,Ao(S,L[0][1])),p=Mo(C,Ao(S,L[1][1])),w=1)):(b<0?(P=Mo(E-i,Ao(k-i,P)),a=i+P,h=f):b>0&&(P=Mo(E-f,Ao(k-f,P)),a=i,h=f+P),w<0?(O=Mo(C-s,Ao(S-s,O)),u=s+O,p=d):w>0&&(O=Mo(C-d,Ao(S-d,O)),u=s,p=d+O));break;case bo:b&&(a=Mo(E,Ao(k,i-P*b)),h=Mo(E,Ao(k,f+P*b))),w&&(u=Mo(C,Ao(S,s-O*w)),p=Mo(C,Ao(S,d+O*w)))}h<a&&(b*=-1,r=i,i=f,f=r,r=a,a=h,h=r,x in Oo&&N.attr("cursor",Po[x=Oo[x]])),p<u&&(w*=-1,r=s,s=d,d=r,r=u,u=p,p=r,x in Ro&&N.attr("cursor",Po[x=Ro[x]])),M.selection&&(T=M.selection),g&&(a=T[0][0],h=T[1][0]),y&&(u=T[0][1],p=T[1][1]),T[0][0]===a&&T[0][1]===u&&T[1][0]===h&&T[1][1]===p||(M.selection=[[a,u],[h,p]],l.call(v),I.brush(t,_.name))}function j(t){if(function(t){t.stopImmediatePropagation()}(t),t.touches){if(t.touches.length)return;e&&clearTimeout(e),e=setTimeout((function(){e=null}),500)}else Xn(t.view,m),F.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);D.attr("pointer-events","all"),N.attr("cursor",Po.overlay),M.selection&&(T=M.selection),function(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}(T)&&(M.selection=null,l.call(v)),I.end(t,_.name)}}function d(t){c(this,arguments).moved(t)}function p(t){c(this,arguments).ended(t)}function m(){var e=this.__brush||{selection:null};return e.extent=Eo(n.apply(this,arguments)),e.dim=t,e}return u.move=function(e,n,r){e.tween?e.on("start.brush",(function(t){c(this,arguments).beforestart().start(t)})).on("interrupt.brush end.brush",(function(t){c(this,arguments).end(t)})).tween("brush",(function(){var e=this,r=e.__brush,i=c(e,arguments),o=r.selection,a=t.input("function"==typeof n?n.apply(this,arguments):n,r.extent),s=Zr(o,a);function u(t){r.selection=1===t&&null===a?null:s(t),l.call(e),i.brush()}return null!==o&&null!==a?u:u(1)})):e.each((function(){var e=this,i=arguments,o=e.__brush,a=t.input("function"==typeof n?n.apply(e,i):n,o.extent),s=c(e,i).beforestart();Pi(e),o.selection=null===a?null:a,l.call(e),s.start(r).brush(r).end(r)}))},u.clear=function(t,e){u.move(t,null,e)},f.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(t,e){return this.starting?(this.starting=!1,this.emit("start",t,e)):this.emit("brush",t),this},brush:function(t,e){return this.emit("brush",t,e),this},end:function(t,e){return 0==--this.active&&(delete this.state.emitter,this.emit("end",t,e)),this},emit:function(e,n,r){var i=Vn(this.that).datum();a.call(e,this.that,new go(e,{sourceEvent:n,target:u,selection:t.output(this.state.selection),mode:r,dispatch:a}),i)}},u.extent=function(t){return arguments.length?(n="function"==typeof t?t:mo(Eo(t)),u):n},u.filter=function(t){return arguments.length?(r="function"==typeof t?t:mo(!!t),u):r},u.touchable=function(t){return arguments.length?(i="function"==typeof t?t:mo(!!t),u):i},u.handleSize=function(t){return arguments.length?(s=+t,u):s},u.keyModifiers=function(t){return arguments.length?(o=!!t,u):o},u.on=function(){var t=a.on.apply(a,arguments);return t===a?u:t},u}var Ho=Math.abs,Wo=Math.cos,Xo=Math.sin,Ko=Math.PI,Qo=Ko/2,Yo=2*Ko,$o=Math.max,Zo=1e-12;function Jo(t,e){return Array.from({length:e-t},((e,n)=>t+n))}function ta(){return ra(!1,!1)}function ea(){return ra(!1,!0)}function na(){return ra(!0,!1)}function ra(t,e){var n=0,r=null,i=null,o=null;function a(a){var s,u=a.length,l=new Array(u),c=Jo(0,u),f=new Array(u*u),h=new Array(u),d=0;a=Float64Array.from({length:u*u},e?(t,e)=>a[e%u][e/u|0]:(t,e)=>a[e/u|0][e%u]);for(let e=0;e<u;++e){let n=0;for(let r=0;r<u;++r)n+=a[e*u+r]+t*a[r*u+e];d+=l[e]=n}s=(d=$o(0,Yo-n*u)/d)?n:Yo/u;{let e=0;r&&c.sort(((t,e)=>r(l[t],l[e])));for(const n of c){const r=e;if(t){const t=Jo(1+~u,u).filter((t=>t<0?a[~t*u+n]:a[n*u+t]));i&&t.sort(((t,e)=>i(t<0?-a[~t*u+n]:a[n*u+t],e<0?-a[~e*u+n]:a[n*u+e])));for(const r of t)if(r<0){(f[~r*u+n]||(f[~r*u+n]={source:null,target:null})).target={index:n,startAngle:e,endAngle:e+=a[~r*u+n]*d,value:a[~r*u+n]}}else{(f[n*u+r]||(f[n*u+r]={source:null,target:null})).source={index:n,startAngle:e,endAngle:e+=a[n*u+r]*d,value:a[n*u+r]}}h[n]={index:n,startAngle:r,endAngle:e,value:l[n]}}else{const t=Jo(0,u).filter((t=>a[n*u+t]||a[t*u+n]));i&&t.sort(((t,e)=>i(a[n*u+t],a[n*u+e])));for(const r of t){let t;if(n<r?(t=f[n*u+r]||(f[n*u+r]={source:null,target:null}),t.source={index:n,startAngle:e,endAngle:e+=a[n*u+r]*d,value:a[n*u+r]}):(t=f[r*u+n]||(f[r*u+n]={source:null,target:null}),t.target={index:n,startAngle:e,endAngle:e+=a[n*u+r]*d,value:a[n*u+r]},n===r&&(t.source=t.target)),t.source&&t.target&&t.source.value<t.target.value){const e=t.source;t.source=t.target,t.target=e}}h[n]={index:n,startAngle:r,endAngle:e,value:l[n]}}e+=s}}return(f=Object.values(f)).groups=h,o?f.sort(o):f}return a.padAngle=function(t){return arguments.length?(n=$o(0,t),a):n},a.sortGroups=function(t){return arguments.length?(r=t,a):r},a.sortSubgroups=function(t){return arguments.length?(i=t,a):i},a.sortChords=function(t){return arguments.length?(null==t?o=null:(e=t,o=function(t,n){return e(t.source.value+t.target.value,n.source.value+n.target.value)})._=t,a):o&&o._;var e},a}const ia=Math.PI,oa=2*ia,aa=1e-6,sa=oa-aa;function ua(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}class la{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?ua:function(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return ua;const n=10**e;return function(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=Math.round(arguments[e]*n)/n+t[e]}}(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,n,r){this._append`Q${+t},${+e},${this._x1=+n},${this._y1=+r}`}bezierCurveTo(t,e,n,r,i,o){this._append`C${+t},${+e},${+n},${+r},${this._x1=+i},${this._y1=+o}`}arcTo(t,e,n,r,i){if(t=+t,e=+e,n=+n,r=+r,(i=+i)<0)throw new Error(`negative radius: ${i}`);let o=this._x1,a=this._y1,s=n-t,u=r-e,l=o-t,c=a-e,f=l*l+c*c;if(null===this._x1)this._append`M${this._x1=t},${this._y1=e}`;else if(f>aa)if(Math.abs(c*s-u*l)>aa&&i){let h=n-o,d=r-a,p=s*s+u*u,m=h*h+d*d,g=Math.sqrt(p),y=Math.sqrt(f),v=i*Math.tan((ia-Math.acos((p+f-m)/(2*g*y)))/2),x=v/y,_=v/g;Math.abs(x-1)>aa&&this._append`L${t+x*l},${e+x*c}`,this._append`A${i},${i},0,0,${+(c*h>l*d)},${this._x1=t+_*s},${this._y1=e+_*u}`}else this._append`L${this._x1=t},${this._y1=e}`;else;}arc(t,e,n,r,i,o){if(t=+t,e=+e,o=!!o,(n=+n)<0)throw new Error(`negative radius: ${n}`);let a=n*Math.cos(r),s=n*Math.sin(r),u=t+a,l=e+s,c=1^o,f=o?r-i:i-r;null===this._x1?this._append`M${u},${l}`:(Math.abs(this._x1-u)>aa||Math.abs(this._y1-l)>aa)&&this._append`L${u},${l}`,n&&(f<0&&(f=f%oa+oa),f>sa?this._append`A${n},${n},0,1,${c},${t-a},${e-s}A${n},${n},0,1,${c},${this._x1=u},${this._y1=l}`:f>aa&&this._append`A${n},${n},0,${+(f>=ia)},${c},${this._x1=t+n*Math.cos(i)},${this._y1=e+n*Math.sin(i)}`)}rect(t,e,n,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${n=+n}v${+r}h${-n}Z`}toString(){return this._}}function ca(){return new la}function fa(t=3){return new la(+t)}ca.prototype=la.prototype;var ha=Array.prototype.slice;function da(t){return function(){return t}}function pa(t){return t.source}function ma(t){return t.target}function ga(t){return t.radius}function ya(t){return t.startAngle}function va(t){return t.endAngle}function xa(){return 0}function _a(){return 10}function ba(t){var e=pa,n=ma,r=ga,i=ga,o=ya,a=va,s=xa,u=null;function l(){var l,c=e.apply(this,arguments),f=n.apply(this,arguments),h=s.apply(this,arguments)/2,d=ha.call(arguments),p=+r.apply(this,(d[0]=c,d)),m=o.apply(this,d)-Qo,g=a.apply(this,d)-Qo,y=+i.apply(this,(d[0]=f,d)),v=o.apply(this,d)-Qo,x=a.apply(this,d)-Qo;if(u||(u=l=ca()),h>Zo&&(Ho(g-m)>2*h+Zo?g>m?(m+=h,g-=h):(m-=h,g+=h):m=g=(m+g)/2,Ho(x-v)>2*h+Zo?x>v?(v+=h,x-=h):(v-=h,x+=h):v=x=(v+x)/2),u.moveTo(p*Wo(m),p*Xo(m)),u.arc(0,0,p,m,g),m!==v||g!==x)if(t){var _=y-+t.apply(this,arguments),b=(v+x)/2;u.quadraticCurveTo(0,0,_*Wo(v),_*Xo(v)),u.lineTo(y*Wo(b),y*Xo(b)),u.lineTo(_*Wo(x),_*Xo(x))}else u.quadraticCurveTo(0,0,y*Wo(v),y*Xo(v)),u.arc(0,0,y,v,x);if(u.quadraticCurveTo(0,0,p*Wo(m),p*Xo(m)),u.closePath(),l)return u=null,l+""||null}return t&&(l.headRadius=function(e){return arguments.length?(t="function"==typeof e?e:da(+e),l):t}),l.radius=function(t){return arguments.length?(r=i="function"==typeof t?t:da(+t),l):r},l.sourceRadius=function(t){return arguments.length?(r="function"==typeof t?t:da(+t),l):r},l.targetRadius=function(t){return arguments.length?(i="function"==typeof t?t:da(+t),l):i},l.startAngle=function(t){return arguments.length?(o="function"==typeof t?t:da(+t),l):o},l.endAngle=function(t){return arguments.length?(a="function"==typeof t?t:da(+t),l):a},l.padAngle=function(t){return arguments.length?(s="function"==typeof t?t:da(+t),l):s},l.source=function(t){return arguments.length?(e=t,l):e},l.target=function(t){return arguments.length?(n=t,l):n},l.context=function(t){return arguments.length?(u=null==t?null:t,l):u},l}function wa(){return ba()}function Ma(){return ba(_a)}const Aa=Math.PI/180,Ta=180/Math.PI,Ea=.96422,Ca=1,ka=.82521,Sa=4/29,Pa=6/29,Oa=3*Pa*Pa,Ra=Pa*Pa*Pa;function La(t){if(t instanceof Na)return new Na(t.l,t.a,t.b,t.opacity);if(t instanceof Ua)return Ha(t);t instanceof yr||(t=mr(t));var e,n,r=ja(t.r),i=ja(t.g),o=ja(t.b),a=Fa((.2225045*r+.7168786*i+.0606169*o)/Ca);return r===i&&i===o?e=n=a:(e=Fa((.4360747*r+.3850649*i+.1430804*o)/Ea),n=Fa((.0139322*r+.0971045*i+.7141733*o)/ka)),new Na(116*a-16,500*(e-a),200*(a-n),t.opacity)}function Ia(t,e){return new Na(t,0,0,null==e?1:e)}function Da(t,e,n,r){return 1===arguments.length?La(t):new Na(t,e,n,null==r?1:r)}function Na(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function Fa(t){return t>Ra?Math.pow(t,1/3):t/Oa+Sa}function za(t){return t>Pa?t*t*t:Oa*(t-Sa)}function Ba(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function ja(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Va(t){if(t instanceof Ua)return new Ua(t.h,t.c,t.l,t.opacity);if(t instanceof Na||(t=La(t)),0===t.a&&0===t.b)return new Ua(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*Ta;return new Ua(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function qa(t,e,n,r){return 1===arguments.length?Va(t):new Ua(n,e,t,null==r?1:r)}function Ga(t,e,n,r){return 1===arguments.length?Va(t):new Ua(t,e,n,null==r?1:r)}function Ua(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function Ha(t){if(isNaN(t.h))return new Na(t.l,0,0,t.opacity);var e=t.h*Aa;return new Na(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}Kn(Na,Da,Qn(Yn,{brighter(t){return new Na(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker(t){return new Na(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new yr(Ba(3.1338561*(e=Ea*za(e))-1.6168667*(t=Ca*za(t))-.4906146*(n=ka*za(n))),Ba(-.9787684*e+1.9161415*t+.033454*n),Ba(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),Kn(Ua,Ga,Qn(Yn,{brighter(t){return new Ua(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker(t){return new Ua(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb(){return Ha(this).rgb()}}));var Wa=-.14861,Xa=1.78277,Ka=-.29227,Qa=-.90649,Ya=1.97294,$a=Ya*Qa,Za=Ya*Xa,Ja=Xa*Ka-Qa*Wa;function ts(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof es)return new es(t.h,t.s,t.l,t.opacity);t instanceof yr||(t=mr(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(Ja*r+$a*e-Za*n)/(Ja+$a-Za),o=r-i,a=(Ya*(n-i)-Ka*o)/Qa,s=Math.sqrt(a*a+o*o)/(Ya*i*(1-i)),u=s?Math.atan2(a,o)*Ta-120:NaN;return new es(u<0?u+360:u,s,i,t.opacity)}(t):new es(t,e,n,null==r?1:r)}function es(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Kn(es,ts,Qn(Yn,{brighter(t){return t=null==t?Zn:Math.pow(Zn,t),new es(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?$n:Math.pow($n,t),new es(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*Aa,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new yr(255*(e+n*(Wa*r+Xa*i)),255*(e+n*(Ka*r+Qa*i)),255*(e+n*(Ya*r)),this.opacity)}}));var ns=Array.prototype.slice;function rs(t,e){return t-e}var is=t=>()=>t;function os(t,e){for(var n,r=-1,i=e.length;++r<i;)if(n=as(t,e[r]))return n;return 0}function as(t,e){for(var n=e[0],r=e[1],i=-1,o=0,a=t.length,s=a-1;o<a;s=o++){var u=t[o],l=u[0],c=u[1],f=t[s],h=f[0],d=f[1];if(ss(u,f,e))return 0;c>r!=d>r&&n<(h-l)*(r-c)/(d-c)+l&&(i=-i)}return i}function ss(t,e,n){var r,i,o,a;return function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])==(n[0]-t[0])*(e[1]-t[1])}(t,e,n)&&(i=t[r=+(t[0]===e[0])],o=n[r],a=e[r],i<=o&&o<=a||a<=o&&o<=i)}function us(){}var ls=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function cs(){var t=1,e=1,n=ht,r=s;function i(t){var e=n(t);if(Array.isArray(e))e=e.slice().sort(rs);else{const n=k(t,fs);for(e=ut(...ft(n[0],n[1],e),e);e[e.length-1]>=n[1];)e.pop();for(;e[1]<n[0];)e.shift()}return e.map((e=>o(t,e)))}function o(n,i){const o=null==i?NaN:+i;if(isNaN(o))throw new Error(`invalid value: ${i}`);var s=[],u=[];return function(n,r,i){var o,s,u,l,c,f,h=new Array,d=new Array;o=s=-1,l=hs(n[0],r),ls[l<<1].forEach(p);for(;++o<t-1;)u=l,l=hs(n[o+1],r),ls[u|l<<1].forEach(p);ls[l|0].forEach(p);for(;++s<e-1;){for(o=-1,l=hs(n[s*t+t],r),c=hs(n[s*t],r),ls[l<<1|c<<2].forEach(p);++o<t-1;)u=l,l=hs(n[s*t+t+o+1],r),f=c,c=hs(n[s*t+o+1],r),ls[u|l<<1|c<<2|f<<3].forEach(p);ls[l|c<<3].forEach(p)}o=-1,c=n[s*t]>=r,ls[c<<2].forEach(p);for(;++o<t-1;)f=c,c=hs(n[s*t+o+1],r),ls[c<<2|f<<3].forEach(p);function p(t){var e,n,r=[t[0][0]+o,t[0][1]+s],u=[t[1][0]+o,t[1][1]+s],l=a(r),c=a(u);(e=d[l])?(n=h[c])?(delete d[e.end],delete h[n.start],e===n?(e.ring.push(u),i(e.ring)):h[e.start]=d[n.end]={start:e.start,end:n.end,ring:e.ring.concat(n.ring)}):(delete d[e.end],e.ring.push(u),d[e.end=c]=e):(e=h[c])?(n=d[l])?(delete h[e.start],delete d[n.end],e===n?(e.ring.push(u),i(e.ring)):h[n.start]=d[e.end]={start:n.start,end:e.end,ring:n.ring.concat(e.ring)}):(delete h[e.start],e.ring.unshift(r),h[e.start=l]=e):h[l]=d[c]={start:l,end:c,ring:[r,u]}}ls[c<<3].forEach(p)}(n,o,(function(t){r(t,n,o),function(t){for(var e=0,n=t.length,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return r}(t)>0?s.push([t]):u.push(t)})),u.forEach((function(t){for(var e,n=0,r=s.length;n<r;++n)if(-1!==os((e=s[n])[0],t))return void e.push(t)})),{type:"MultiPolygon",value:i,coordinates:s}}function a(e){return 2*e[0]+e[1]*(t+1)*4}function s(n,r,i){n.forEach((function(n){var o=n[0],a=n[1],s=0|o,u=0|a,l=ds(r[u*t+s]);o>0&&o<t&&s===o&&(n[0]=ps(o,ds(r[u*t+s-1]),l,i)),a>0&&a<e&&u===a&&(n[1]=ps(a,ds(r[(u-1)*t+s]),l,i))}))}return i.contour=o,i.size=function(n){if(!arguments.length)return[t,e];var r=Math.floor(n[0]),o=Math.floor(n[1]);if(!(r>=0&&o>=0))throw new Error("invalid size");return t=r,e=o,i},i.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?is(ns.call(t)):is(t),i):n},i.smooth=function(t){return arguments.length?(r=t?s:us,i):r===s},i}function fs(t){return isFinite(t)?t:NaN}function hs(t,e){return null!=t&&+t>=e}function ds(t){return null==t||isNaN(t=+t)?-1/0:t}function ps(t,e,n,r){const i=r-e,o=n-e,a=isFinite(i)||isFinite(o)?i/o:Math.sign(i)/Math.sign(o);return isNaN(a)?t:t+a-.5}function ms(t){return t[0]}function gs(t){return t[1]}function ys(){return 1}function vs(){var t=ms,e=gs,n=ys,r=960,i=500,o=20,a=2,s=3*o,u=r+2*s>>a,l=i+2*s>>a,c=is(20);function f(r){var i=new Float32Array(u*l),c=Math.pow(2,-a),f=-1;for(const o of r){var h=(t(o,++f,r)+s)*c,d=(e(o,f,r)+s)*c,m=+n(o,f,r);if(m&&h>=0&&h<u&&d>=0&&d<l){var g=Math.floor(h),y=Math.floor(d),v=h-g-.5,x=d-y-.5;i[g+y*u]+=(1-v)*(1-x)*m,i[g+1+y*u]+=v*(1-x)*m,i[g+1+(y+1)*u]+=v*x*m,i[g+(y+1)*u]+=(1-v)*x*m}}return p({data:i,width:u,height:l},o*c),i}function h(t){var e=f(t),n=c(e),r=Math.pow(2,2*a);return Array.isArray(n)||(n=ut(Number.MIN_VALUE,pt(e)/r,n)),cs().size([u,l]).thresholds(n.map((t=>t*r)))(e).map(((t,e)=>(t.value=+n[e],d(t))))}function d(t){return t.coordinates.forEach(m),t}function m(t){t.forEach(g)}function g(t){t.forEach(y)}function y(t){t[0]=t[0]*Math.pow(2,a)-s,t[1]=t[1]*Math.pow(2,a)-s}function v(){return u=r+2*(s=3*o)>>a,l=i+2*s>>a,h}return h.contours=function(t){var e=f(t),n=cs().size([u,l]),r=Math.pow(2,2*a),i=t=>{t=+t;var i=d(n.contour(e,t*r));return i.value=t,i};return Object.defineProperty(i,"max",{get:()=>pt(e)/r}),i},h.x=function(e){return arguments.length?(t="function"==typeof e?e:is(+e),h):t},h.y=function(t){return arguments.length?(e="function"==typeof t?t:is(+t),h):e},h.weight=function(t){return arguments.length?(n="function"==typeof t?t:is(+t),h):n},h.size=function(t){if(!arguments.length)return[r,i];var e=+t[0],n=+t[1];if(!(e>=0&&n>=0))throw new Error("invalid size");return r=e,i=n,v()},h.cellSize=function(t){if(!arguments.length)return 1<<a;if(!((t=+t)>=1))throw new Error("invalid cell size");return a=Math.floor(Math.log(t)/Math.LN2),v()},h.thresholds=function(t){return arguments.length?(c="function"==typeof t?t:Array.isArray(t)?is(ns.call(t)):is(t),h):c},h.bandwidth=function(t){if(!arguments.length)return Math.sqrt(o*(o+1));if(!((t=+t)>=0))throw new Error("invalid bandwidth");return o=(Math.sqrt(4*t*t+1)-1)/2,v()},h}const xs=134217729;function _s(t,e,n,r,i){let o,a,s,u,l=e[0],c=r[0],f=0,h=0;c>l==c>-l?(o=l,l=e[++f]):(o=c,c=r[++h]);let d=0;if(f<t&&h<n)for(c>l==c>-l?(a=l+o,s=o-(a-l),l=e[++f]):(a=c+o,s=o-(a-c),c=r[++h]),o=a,0!==s&&(i[d++]=s);f<t&&h<n;)c>l==c>-l?(a=o+l,u=a-o,s=o-(a-u)+(l-u),l=e[++f]):(a=o+c,u=a-o,s=o-(a-u)+(c-u),c=r[++h]),o=a,0!==s&&(i[d++]=s);for(;f<t;)a=o+l,u=a-o,s=o-(a-u)+(l-u),l=e[++f],o=a,0!==s&&(i[d++]=s);for(;h<n;)a=o+c,u=a-o,s=o-(a-u)+(c-u),c=r[++h],o=a,0!==s&&(i[d++]=s);return 0===o&&0!==d||(i[d++]=o),d}function bs(t){return new Float64Array(t)}const ws=bs(4),Ms=bs(8),As=bs(12),Ts=bs(16),Es=bs(4);function Cs(t,e,n,r,i,o){const a=(e-o)*(n-i),s=(t-i)*(r-o),u=a-s,l=Math.abs(a+s);return Math.abs(u)>=33306690738754716e-32*l?u:-function(t,e,n,r,i,o,a){let s,u,l,c,f,h,d,p,m,g,y,v,x,_,b,w,M,A;const T=t-i,E=n-i,C=e-o,k=r-o;_=T*k,h=xs*T,d=h-(h-T),p=T-d,h=xs*k,m=h-(h-k),g=k-m,b=p*g-(_-d*m-p*m-d*g),w=C*E,h=xs*C,d=h-(h-C),p=C-d,h=xs*E,m=h-(h-E),g=E-m,M=p*g-(w-d*m-p*m-d*g),y=b-M,f=b-y,ws[0]=b-(y+f)+(f-M),v=_+y,f=v-_,x=_-(v-f)+(y-f),y=x-w,f=x-y,ws[1]=x-(y+f)+(f-w),A=v+y,f=A-v,ws[2]=v-(A-f)+(y-f),ws[3]=A;let S=function(t,e){let n=e[0];for(let r=1;r<t;r++)n+=e[r];return n}(4,ws),P=22204460492503146e-32*a;if(S>=P||-S>=P)return S;if(f=t-T,s=t-(T+f)+(f-i),f=n-E,l=n-(E+f)+(f-i),f=e-C,u=e-(C+f)+(f-o),f=r-k,c=r-(k+f)+(f-o),0===s&&0===u&&0===l&&0===c)return S;if(P=11093356479670487e-47*a+33306690738754706e-32*Math.abs(S),S+=T*c+k*s-(C*l+E*u),S>=P||-S>=P)return S;_=s*k,h=xs*s,d=h-(h-s),p=s-d,h=xs*k,m=h-(h-k),g=k-m,b=p*g-(_-d*m-p*m-d*g),w=u*E,h=xs*u,d=h-(h-u),p=u-d,h=xs*E,m=h-(h-E),g=E-m,M=p*g-(w-d*m-p*m-d*g),y=b-M,f=b-y,Es[0]=b-(y+f)+(f-M),v=_+y,f=v-_,x=_-(v-f)+(y-f),y=x-w,f=x-y,Es[1]=x-(y+f)+(f-w),A=v+y,f=A-v,Es[2]=v-(A-f)+(y-f),Es[3]=A;const O=_s(4,ws,4,Es,Ms);_=T*c,h=xs*T,d=h-(h-T),p=T-d,h=xs*c,m=h-(h-c),g=c-m,b=p*g-(_-d*m-p*m-d*g),w=C*l,h=xs*C,d=h-(h-C),p=C-d,h=xs*l,m=h-(h-l),g=l-m,M=p*g-(w-d*m-p*m-d*g),y=b-M,f=b-y,Es[0]=b-(y+f)+(f-M),v=_+y,f=v-_,x=_-(v-f)+(y-f),y=x-w,f=x-y,Es[1]=x-(y+f)+(f-w),A=v+y,f=A-v,Es[2]=v-(A-f)+(y-f),Es[3]=A;const R=_s(O,Ms,4,Es,As);_=s*c,h=xs*s,d=h-(h-s),p=s-d,h=xs*c,m=h-(h-c),g=c-m,b=p*g-(_-d*m-p*m-d*g),w=u*l,h=xs*u,d=h-(h-u),p=u-d,h=xs*l,m=h-(h-l),g=l-m,M=p*g-(w-d*m-p*m-d*g),y=b-M,f=b-y,Es[0]=b-(y+f)+(f-M),v=_+y,f=v-_,x=_-(v-f)+(y-f),y=x-w,f=x-y,Es[1]=x-(y+f)+(f-w),A=v+y,f=A-v,Es[2]=v-(A-f)+(y-f),Es[3]=A;const L=_s(R,As,4,Es,Ts);return Ts[L-1]}(t,e,n,r,i,o,l)}bs(4),bs(4),bs(4),bs(4),bs(4),bs(4),bs(4),bs(4),bs(4),bs(8),bs(8),bs(8),bs(4),bs(8),bs(8),bs(8),bs(12);bs(192),bs(192);bs(4),bs(4),bs(4),bs(4),bs(4),bs(4),bs(4),bs(4),bs(8),bs(8),bs(8),bs(8),bs(8),bs(8),bs(8),bs(8),bs(8),bs(4),bs(4),bs(4),bs(8),bs(16),bs(16),bs(16),bs(32),bs(32),bs(48),bs(64);bs(1152),bs(1152);bs(4),bs(4),bs(4),bs(4),bs(4),bs(4),bs(4),bs(4),bs(4),bs(4),bs(24),bs(24),bs(24),bs(24),bs(24),bs(24),bs(24),bs(24),bs(24),bs(24),bs(1152),bs(1152),bs(1152),bs(1152),bs(1152),bs(2304),bs(2304),bs(3456),bs(5760),bs(8),bs(8),bs(8),bs(16),bs(24),bs(48),bs(48),bs(96),bs(192),bs(384),bs(384),bs(384),bs(768);bs(96),bs(96),bs(96),bs(1152);const ks=Math.pow(2,-52),Ss=new Uint32Array(512);class Ps{static from(t,e=Ns,n=Fs){const r=t.length,i=new Float64Array(2*r);for(let o=0;o<r;o++){const r=t[o];i[2*o]=e(r),i[2*o+1]=n(r)}return new Ps(i)}constructor(t){const e=t.length>>1;if(e>0&&"number"!=typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;const n=Math.max(2*e-5,0);this._triangles=new Uint32Array(3*n),this._halfedges=new Int32Array(3*n),this._hashSize=Math.ceil(Math.sqrt(e)),this._hullPrev=new Uint32Array(e),this._hullNext=new Uint32Array(e),this._hullTri=new Uint32Array(e),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(e),this._dists=new Float64Array(e),this.update()}update(){const{coords:t,_hullPrev:e,_hullNext:n,_hullTri:r,_hullHash:i}=this,o=t.length>>1;let a=1/0,s=1/0,u=-1/0,l=-1/0;for(let e=0;e<o;e++){const n=t[2*e],r=t[2*e+1];n<a&&(a=n),r<s&&(s=r),n>u&&(u=n),r>l&&(l=r),this._ids[e]=e}const c=(a+u)/2,f=(s+l)/2;let h,d,p;for(let e=0,n=1/0;e<o;e++){const r=Os(c,f,t[2*e],t[2*e+1]);r<n&&(h=e,n=r)}const m=t[2*h],g=t[2*h+1];for(let e=0,n=1/0;e<o;e++){if(e===h)continue;const r=Os(m,g,t[2*e],t[2*e+1]);r<n&&r>0&&(d=e,n=r)}let y=t[2*d],v=t[2*d+1],x=1/0;for(let e=0;e<o;e++){if(e===h||e===d)continue;const n=Ls(m,g,y,v,t[2*e],t[2*e+1]);n<x&&(p=e,x=n)}let _=t[2*p],b=t[2*p+1];if(x===1/0){for(let e=0;e<o;e++)this._dists[e]=t[2*e]-t[0]||t[2*e+1]-t[1];Is(this._ids,this._dists,0,o-1);const e=new Uint32Array(o);let n=0;for(let t=0,r=-1/0;t<o;t++){const i=this._ids[t],o=this._dists[i];o>r&&(e[n++]=i,r=o)}return this.hull=e.subarray(0,n),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(Cs(m,g,y,v,_,b)<0){const t=d,e=y,n=v;d=p,y=_,v=b,p=t,_=e,b=n}const w=function(t,e,n,r,i,o){const a=n-t,s=r-e,u=i-t,l=o-e,c=a*a+s*s,f=u*u+l*l,h=.5/(a*l-s*u),d=t+(l*c-s*f)*h,p=e+(a*f-u*c)*h;return{x:d,y:p}}(m,g,y,v,_,b);this._cx=w.x,this._cy=w.y;for(let e=0;e<o;e++)this._dists[e]=Os(t[2*e],t[2*e+1],w.x,w.y);Is(this._ids,this._dists,0,o-1),this._hullStart=h;let M=3;n[h]=e[p]=d,n[d]=e[h]=p,n[p]=e[d]=h,r[h]=0,r[d]=1,r[p]=2,i.fill(-1),i[this._hashKey(m,g)]=h,i[this._hashKey(y,v)]=d,i[this._hashKey(_,b)]=p,this.trianglesLen=0,this._addTriangle(h,d,p,-1,-1,-1);for(let o,a,s=0;s<this._ids.length;s++){const u=this._ids[s],l=t[2*u],c=t[2*u+1];if(s>0&&Math.abs(l-o)<=ks&&Math.abs(c-a)<=ks)continue;if(o=l,a=c,u===h||u===d||u===p)continue;let f=0;for(let t=0,e=this._hashKey(l,c);t<this._hashSize&&(f=i[(e+t)%this._hashSize],-1===f||f===n[f]);t++);f=e[f];let m,g=f;for(;m=n[g],Cs(l,c,t[2*g],t[2*g+1],t[2*m],t[2*m+1])>=0;)if(g=m,g===f){g=-1;break}if(-1===g)continue;let y=this._addTriangle(g,u,n[g],-1,-1,r[g]);r[u]=this._legalize(y+2),r[g]=y,M++;let v=n[g];for(;m=n[v],Cs(l,c,t[2*v],t[2*v+1],t[2*m],t[2*m+1])<0;)y=this._addTriangle(v,u,m,r[u],-1,r[v]),r[u]=this._legalize(y+2),n[v]=v,M--,v=m;if(g===f)for(;m=e[g],Cs(l,c,t[2*m],t[2*m+1],t[2*g],t[2*g+1])<0;)y=this._addTriangle(m,u,g,-1,r[g],r[m]),this._legalize(y+2),r[m]=y,n[g]=g,M--,g=m;this._hullStart=e[u]=g,n[g]=e[v]=u,n[u]=v,i[this._hashKey(l,c)]=u,i[this._hashKey(t[2*g],t[2*g+1])]=g}this.hull=new Uint32Array(M);for(let t=0,e=this._hullStart;t<M;t++)this.hull[t]=e,e=n[e];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,e){return Math.floor(function(t,e){const n=t/(Math.abs(t)+Math.abs(e));return(e>0?3-n:1+n)/4}(t-this._cx,e-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:e,_halfedges:n,coords:r}=this;let i=0,o=0;for(;;){const a=n[t],s=t-t%3;if(o=s+(t+2)%3,-1===a){if(0===i)break;t=Ss[--i];continue}const u=a-a%3,l=s+(t+1)%3,c=u+(a+2)%3,f=e[o],h=e[t],d=e[l],p=e[c];if(Rs(r[2*f],r[2*f+1],r[2*h],r[2*h+1],r[2*d],r[2*d+1],r[2*p],r[2*p+1])){e[t]=p,e[a]=f;const r=n[c];if(-1===r){let e=this._hullStart;do{if(this._hullTri[e]===c){this._hullTri[e]=t;break}e=this._hullPrev[e]}while(e!==this._hullStart)}this._link(t,r),this._link(a,n[o]),this._link(o,c);const s=u+(a+1)%3;i<Ss.length&&(Ss[i++]=s)}else{if(0===i)break;t=Ss[--i]}}return o}_link(t,e){this._halfedges[t]=e,-1!==e&&(this._halfedges[e]=t)}_addTriangle(t,e,n,r,i,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=e,this._triangles[a+2]=n,this._link(a,r),this._link(a+1,i),this._link(a+2,o),this.trianglesLen+=3,a}}function Os(t,e,n,r){const i=t-n,o=e-r;return i*i+o*o}function Rs(t,e,n,r,i,o,a,s){const u=t-a,l=e-s,c=n-a,f=r-s,h=i-a,d=o-s,p=c*c+f*f,m=h*h+d*d;return u*(f*m-p*d)-l*(c*m-p*h)+(u*u+l*l)*(c*d-f*h)<0}function Ls(t,e,n,r,i,o){const a=n-t,s=r-e,u=i-t,l=o-e,c=a*a+s*s,f=u*u+l*l,h=.5/(a*l-s*u),d=(l*c-s*f)*h,p=(a*f-u*c)*h;return d*d+p*p}function Is(t,e,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const r=t[i],o=e[r];let a=i-1;for(;a>=n&&e[t[a]]>o;)t[a+1]=t[a--];t[a+1]=r}else{let i=n+1,o=r;Ds(t,n+r>>1,i),e[t[n]]>e[t[r]]&&Ds(t,n,r),e[t[i]]>e[t[r]]&&Ds(t,i,r),e[t[n]]>e[t[i]]&&Ds(t,n,i);const a=t[i],s=e[a];for(;;){do{i++}while(e[t[i]]<s);do{o--}while(e[t[o]]>s);if(o<i)break;Ds(t,i,o)}t[n+1]=t[o],t[o]=a,r-i+1>=o-n?(Is(t,e,i,r),Is(t,e,n,o-1)):(Is(t,e,n,o-1),Is(t,e,i,r))}}function Ds(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Ns(t){return t[0]}function Fs(t){return t[1]}const zs=1e-6;class Bs{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,e){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,e){this._+=`L${this._x1=+t},${this._y1=+e}`}arc(t,e,n){const r=(t=+t)+(n=+n),i=e=+e;if(n<0)throw new Error("negative radius");null===this._x1?this._+=`M${r},${i}`:(Math.abs(this._x1-r)>zs||Math.abs(this._y1-i)>zs)&&(this._+="L"+r+","+i),n&&(this._+=`A${n},${n},0,1,1,${t-n},${e}A${n},${n},0,1,1,${this._x1=r},${this._y1=i}`)}rect(t,e,n,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${+n}v${+r}h${-n}Z`}value(){return this._||null}}class js{constructor(){this._=[]}moveTo(t,e){this._.push([t,e])}closePath(){this._.push(this._[0].slice())}lineTo(t,e){this._.push([t,e])}value(){return this._.length?this._:null}}class Vs{constructor(t,[e,n,r,i]=[0,0,960,500]){if(!((r=+r)>=(e=+e)&&(i=+i)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(2*t.points.length),this.vectors=new Float64Array(2*t.points.length),this.xmax=r,this.xmin=e,this.ymax=i,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:e,triangles:n},vectors:r}=this;let i,o;const a=this.circumcenters=this._circumcenters.subarray(0,n.length/3*2);for(let r,s,u=0,l=0,c=n.length;u<c;u+=3,l+=2){const c=2*n[u],f=2*n[u+1],h=2*n[u+2],d=t[c],p=t[c+1],m=t[f],g=t[f+1],y=t[h],v=t[h+1],x=m-d,_=g-p,b=y-d,w=v-p,M=2*(x*w-_*b);if(Math.abs(M)<1e-9){if(void 0===i){i=o=0;for(const n of e)i+=t[2*n],o+=t[2*n+1];i/=e.length,o/=e.length}const n=1e9*Math.sign((i-d)*w-(o-p)*b);r=(d+y)/2-n*w,s=(p+v)/2+n*b}else{const t=1/M,e=x*x+_*_,n=b*b+w*w;r=d+(w*e-_*n)*t,s=p+(x*n-b*e)*t}a[l]=r,a[l+1]=s}let s,u,l,c=e[e.length-1],f=4*c,h=t[2*c],d=t[2*c+1];r.fill(0);for(let n=0;n<e.length;++n)c=e[n],s=f,u=h,l=d,f=4*c,h=t[2*c],d=t[2*c+1],r[s+2]=r[f]=l-d,r[s+3]=r[f+1]=h-u}render(t){const e=null==t?t=new Bs:void 0,{delaunay:{halfedges:n,inedges:r,hull:i},circumcenters:o,vectors:a}=this;if(i.length<=1)return null;for(let e=0,r=n.length;e<r;++e){const r=n[e];if(r<e)continue;const i=2*Math.floor(e/3),a=2*Math.floor(r/3),s=o[i],u=o[i+1],l=o[a],c=o[a+1];this._renderSegment(s,u,l,c,t)}let s,u=i[i.length-1];for(let e=0;e<i.length;++e){s=u,u=i[e];const n=2*Math.floor(r[u]/3),l=o[n],c=o[n+1],f=4*s,h=this._project(l,c,a[f+2],a[f+3]);h&&this._renderSegment(l,c,h[0],h[1],t)}return e&&e.value()}renderBounds(t){const e=null==t?t=new Bs:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),e&&e.value()}renderCell(t,e){const n=null==e?e=new Bs:void 0,r=this._clip(t);if(null===r||!r.length)return;e.moveTo(r[0],r[1]);let i=r.length;for(;r[0]===r[i-2]&&r[1]===r[i-1]&&i>1;)i-=2;for(let t=2;t<i;t+=2)r[t]===r[t-2]&&r[t+1]===r[t-1]||e.lineTo(r[t],r[t+1]);return e.closePath(),n&&n.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let e=0,n=t.length/2;e<n;++e){const t=this.cellPolygon(e);t&&(t.index=e,yield t)}}cellPolygon(t){const e=new js;return this.renderCell(t,e),e.value()}_renderSegment(t,e,n,r,i){let o;const a=this._regioncode(t,e),s=this._regioncode(n,r);0===a&&0===s?(i.moveTo(t,e),i.lineTo(n,r)):(o=this._clipSegment(t,e,n,r,a,s))&&(i.moveTo(o[0],o[1]),i.lineTo(o[2],o[3]))}contains(t,e,n){return(e=+e)==e&&(n=+n)==n&&this.delaunay._step(t,e,n)===t}*neighbors(t){const e=this._clip(t);if(e)for(const n of this.delaunay.neighbors(t)){const t=this._clip(n);if(t)t:for(let r=0,i=e.length;r<i;r+=2)for(let o=0,a=t.length;o<a;o+=2)if(e[r]===t[o]&&e[r+1]===t[o+1]&&e[(r+2)%i]===t[(o+a-2)%a]&&e[(r+3)%i]===t[(o+a-1)%a]){yield n;break t}}}_cell(t){const{circumcenters:e,delaunay:{inedges:n,halfedges:r,triangles:i}}=this,o=n[t];if(-1===o)return null;const a=[];let s=o;do{const n=Math.floor(s/3);if(a.push(e[2*n],e[2*n+1]),s=s%3==2?s-2:s+1,i[s]!==t)break;s=r[s]}while(s!==o&&-1!==s);return a}_clip(t){if(0===t&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const e=this._cell(t);if(null===e)return null;const{vectors:n}=this,r=4*t;return this._simplify(n[r]||n[r+1]?this._clipInfinite(t,e,n[r],n[r+1],n[r+2],n[r+3]):this._clipFinite(t,e))}_clipFinite(t,e){const n=e.length;let r,i,o,a,s=null,u=e[n-2],l=e[n-1],c=this._regioncode(u,l),f=0;for(let h=0;h<n;h+=2)if(r=u,i=l,u=e[h],l=e[h+1],o=c,c=this._regioncode(u,l),0===o&&0===c)a=f,f=0,s?s.push(u,l):s=[u,l];else{let e,n,h,d,p;if(0===o){if(null===(e=this._clipSegment(r,i,u,l,o,c)))continue;[n,h,d,p]=e}else{if(null===(e=this._clipSegment(u,l,r,i,c,o)))continue;[d,p,n,h]=e,a=f,f=this._edgecode(n,h),a&&f&&this._edge(t,a,f,s,s.length),s?s.push(n,h):s=[n,h]}a=f,f=this._edgecode(d,p),a&&f&&this._edge(t,a,f,s,s.length),s?s.push(d,p):s=[d,p]}if(s)a=f,f=this._edgecode(s[0],s[1]),a&&f&&this._edge(t,a,f,s,s.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return s}_clipSegment(t,e,n,r,i,o){const a=i<o;for(a&&([t,e,n,r,i,o]=[n,r,t,e,o,i]);;){if(0===i&&0===o)return a?[n,r,t,e]:[t,e,n,r];if(i&o)return null;let s,u,l=i||o;8&l?(s=t+(n-t)*(this.ymax-e)/(r-e),u=this.ymax):4&l?(s=t+(n-t)*(this.ymin-e)/(r-e),u=this.ymin):2&l?(u=e+(r-e)*(this.xmax-t)/(n-t),s=this.xmax):(u=e+(r-e)*(this.xmin-t)/(n-t),s=this.xmin),i?(t=s,e=u,i=this._regioncode(t,e)):(n=s,r=u,o=this._regioncode(n,r))}}_clipInfinite(t,e,n,r,i,o){let a,s=Array.from(e);if((a=this._project(s[0],s[1],n,r))&&s.unshift(a[0],a[1]),(a=this._project(s[s.length-2],s[s.length-1],i,o))&&s.push(a[0],a[1]),s=this._clipFinite(t,s))for(let e,n=0,r=s.length,i=this._edgecode(s[r-2],s[r-1]);n<r;n+=2)e=i,i=this._edgecode(s[n],s[n+1]),e&&i&&(n=this._edge(t,e,i,s,n),r=s.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(s=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return s}_edge(t,e,n,r,i){for(;e!==n;){let n,o;switch(e){case 5:e=4;continue;case 4:e=6,n=this.xmax,o=this.ymin;break;case 6:e=2;continue;case 2:e=10,n=this.xmax,o=this.ymax;break;case 10:e=8;continue;case 8:e=9,n=this.xmin,o=this.ymax;break;case 9:e=1;continue;case 1:e=5,n=this.xmin,o=this.ymin}r[i]===n&&r[i+1]===o||!this.contains(t,n,o)||(r.splice(i,0,n,o),i+=2)}return i}_project(t,e,n,r){let i,o,a,s=1/0;if(r<0){if(e<=this.ymin)return null;(i=(this.ymin-e)/r)<s&&(a=this.ymin,o=t+(s=i)*n)}else if(r>0){if(e>=this.ymax)return null;(i=(this.ymax-e)/r)<s&&(a=this.ymax,o=t+(s=i)*n)}if(n>0){if(t>=this.xmax)return null;(i=(this.xmax-t)/n)<s&&(o=this.xmax,a=e+(s=i)*r)}else if(n<0){if(t<=this.xmin)return null;(i=(this.xmin-t)/n)<s&&(o=this.xmin,a=e+(s=i)*r)}return[o,a]}_edgecode(t,e){return(t===this.xmin?1:t===this.xmax?2:0)|(e===this.ymin?4:e===this.ymax?8:0)}_regioncode(t,e){return(t<this.xmin?1:t>this.xmax?2:0)|(e<this.ymin?4:e>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let e=0;e<t.length;e+=2){const n=(e+2)%t.length,r=(e+4)%t.length;(t[e]===t[n]&&t[n]===t[r]||t[e+1]===t[n+1]&&t[n+1]===t[r+1])&&(t.splice(n,2),e-=2)}t.length||(t=null)}return t}}const qs=2*Math.PI,Gs=Math.pow;function Us(t){return t[0]}function Hs(t){return t[1]}function Ws(t,e,n){return[t+Math.sin(t+e)*n,e+Math.cos(t-e)*n]}class Xs{static from(t,e=Us,n=Hs,r){return new Xs("length"in t?function(t,e,n,r){const i=t.length,o=new Float64Array(2*i);for(let a=0;a<i;++a){const i=t[a];o[2*a]=e.call(r,i,a,t),o[2*a+1]=n.call(r,i,a,t)}return o}(t,e,n,r):Float64Array.from(function*(t,e,n,r){let i=0;for(const o of t)yield e.call(r,o,i,t),yield n.call(r,o,i,t),++i}(t,e,n,r)))}constructor(t){this._delaunator=new Ps(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,e=this.points;if(t.hull&&t.hull.length>2&&function(t){const{triangles:e,coords:n}=t;for(let t=0;t<e.length;t+=3){const r=2*e[t],i=2*e[t+1],o=2*e[t+2];if((n[o]-n[r])*(n[i+1]-n[r+1])-(n[i]-n[r])*(n[o+1]-n[r+1])>1e-10)return!1}return!0}(t)){this.collinear=Int32Array.from({length:e.length/2},((t,e)=>e)).sort(((t,n)=>e[2*t]-e[2*n]||e[2*t+1]-e[2*n+1]));const t=this.collinear[0],n=this.collinear[this.collinear.length-1],r=[e[2*t],e[2*t+1],e[2*n],e[2*n+1]],i=1e-8*Math.hypot(r[3]-r[1],r[2]-r[0]);for(let t=0,n=e.length/2;t<n;++t){const n=Ws(e[2*t],e[2*t+1],i);e[2*t]=n[0],e[2*t+1]=n[1]}this._delaunator=new Ps(e)}else delete this.collinear;const n=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,i=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let t=0,e=n.length;t<e;++t){const e=i[t%3==2?t-2:t+1];-1!==n[t]&&-1!==o[e]||(o[e]=t)}for(let t=0,e=r.length;t<e;++t)a[r[t]]=t;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],o[r[0]]=1,2===r.length&&(o[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(t){return new Vs(this,t)}*neighbors(t){const{inedges:e,hull:n,_hullIndex:r,halfedges:i,triangles:o,collinear:a}=this;if(a){const e=a.indexOf(t);return e>0&&(yield a[e-1]),void(e<a.length-1&&(yield a[e+1]))}const s=e[t];if(-1===s)return;let u=s,l=-1;do{if(yield l=o[u],u=u%3==2?u-2:u+1,o[u]!==t)return;if(u=i[u],-1===u){const e=n[(r[t]+1)%n.length];return void(e!==l&&(yield e))}}while(u!==s)}find(t,e,n=0){if((t=+t)!=t||(e=+e)!=e)return-1;const r=n;let i;for(;(i=this._step(n,t,e))>=0&&i!==n&&i!==r;)n=i;return i}_step(t,e,n){const{inedges:r,hull:i,_hullIndex:o,halfedges:a,triangles:s,points:u}=this;if(-1===r[t]||!u.length)return(t+1)%(u.length>>1);let l=t,c=Gs(e-u[2*t],2)+Gs(n-u[2*t+1],2);const f=r[t];let h=f;do{let r=s[h];const f=Gs(e-u[2*r],2)+Gs(n-u[2*r+1],2);if(f<c&&(c=f,l=r),h=h%3==2?h-2:h+1,s[h]!==t)break;if(h=a[h],-1===h){if(h=i[(o[t]+1)%i.length],h!==r&&Gs(e-u[2*h],2)+Gs(n-u[2*h+1],2)<c)return h;break}}while(h!==f);return l}render(t){const e=null==t?t=new Bs:void 0,{points:n,halfedges:r,triangles:i}=this;for(let e=0,o=r.length;e<o;++e){const o=r[e];if(o<e)continue;const a=2*i[e],s=2*i[o];t.moveTo(n[a],n[a+1]),t.lineTo(n[s],n[s+1])}return this.renderHull(t),e&&e.value()}renderPoints(t,e){void 0!==e||t&&"function"==typeof t.moveTo||(e=t,t=null),e=null==e?2:+e;const n=null==t?t=new Bs:void 0,{points:r}=this;for(let n=0,i=r.length;n<i;n+=2){const i=r[n],o=r[n+1];t.moveTo(i+e,o),t.arc(i,o,e,0,qs)}return n&&n.value()}renderHull(t){const e=null==t?t=new Bs:void 0,{hull:n,points:r}=this,i=2*n[0],o=n.length;t.moveTo(r[i],r[i+1]);for(let e=1;e<o;++e){const i=2*n[e];t.lineTo(r[i],r[i+1])}return t.closePath(),e&&e.value()}hullPolygon(){const t=new js;return this.renderHull(t),t.value()}renderTriangle(t,e){const n=null==e?e=new Bs:void 0,{points:r,triangles:i}=this,o=2*i[t*=3],a=2*i[t+1],s=2*i[t+2];return e.moveTo(r[o],r[o+1]),e.lineTo(r[a],r[a+1]),e.lineTo(r[s],r[s+1]),e.closePath(),n&&n.value()}*trianglePolygons(){const{triangles:t}=this;for(let e=0,n=t.length/3;e<n;++e)yield this.trianglePolygon(e)}trianglePolygon(t){const e=new js;return this.renderTriangle(t,e),e.value()}}var Ks=t=>()=>t;function Qs(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:o,x:a,y:s,dx:u,dy:l,dispatch:c}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:c}})}function Ys(t){return!t.ctrlKey&&!t.button}function $s(){return this.parentNode}function Zs(t,e){return null==e?{x:t.x,y:t.y}:e}function Js(){return navigator.maxTouchPoints||"ontouchstart"in this}function tu(){var t,e,n,r,i=Ys,o=$s,a=Zs,s=Js,u={},l=Ee("start","drag","end"),c=0,f=0;function h(t){t.on("mousedown.drag",d).filter(s).on("touchstart.drag",g).on("touchmove.drag",y,qn).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(a,s){if(!r&&i.call(this,a,s)){var u=x(this,o.call(this,a,s),a,s,"mouse");u&&(Vn(a.view).on("mousemove.drag",p,Gn).on("mouseup.drag",m,Gn),Wn(a.view),Un(a),n=!1,t=a.clientX,e=a.clientY,u("start",a))}}function p(r){if(Hn(r),!n){var i=r.clientX-t,o=r.clientY-e;n=i*i+o*o>f}u.mouse("drag",r)}function m(t){Vn(t.view).on("mousemove.drag mouseup.drag",null),Xn(t.view,n),Hn(t),u.mouse("end",t)}function g(t,e){if(i.call(this,t,e)){var n,r,a=t.changedTouches,s=o.call(this,t,e),u=a.length;for(n=0;n<u;++n)(r=x(this,s,t,e,a[n].identifier,a[n]))&&(Un(t),r("start",t,a[n]))}}function y(t){var e,n,r=t.changedTouches,i=r.length;for(e=0;e<i;++e)(n=u[r[e].identifier])&&(Hn(t),n("drag",t,r[e]))}function v(t){var e,n,i=t.changedTouches,o=i.length;for(r&&clearTimeout(r),r=setTimeout((function(){r=null}),500),e=0;e<o;++e)(n=u[i[e].identifier])&&(Un(t),n("end",t,i[e]))}function x(t,e,n,r,i,o){var s,f,d,p=l.copy(),m=ti(o||n,e);if(null!=(d=a.call(t,new Qs("beforestart",{sourceEvent:n,target:h,identifier:i,active:c,x:m[0],y:m[1],dx:0,dy:0,dispatch:p}),r)))return s=d.x-m[0]||0,f=d.y-m[1]||0,function n(o,a,l){var g,y=m;switch(o){case"start":u[i]=n,g=c++;break;case"end":delete u[i],--c;case"drag":m=ti(l||a,e),g=c}p.call(o,t,new Qs(o,{sourceEvent:a,subject:d,target:h,identifier:i,active:g,x:m[0]+s,y:m[1]+f,dx:m[0]-y[0],dy:m[1]-y[1],dispatch:p}),r)}}return h.filter=function(t){return arguments.length?(i="function"==typeof t?t:Ks(!!t),h):i},h.container=function(t){return arguments.length?(o="function"==typeof t?t:Ks(t),h):o},h.subject=function(t){return arguments.length?(a="function"==typeof t?t:Ks(t),h):a},h.touchable=function(t){return arguments.length?(s="function"==typeof t?t:Ks(!!t),h):s},h.on=function(){var t=l.on.apply(l,arguments);return t===l?h:t},h.clickDistance=function(t){return arguments.length?(f=(t=+t)*t,h):Math.sqrt(f)},h}Qs.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var eu={},nu={},ru=34,iu=10,ou=13;function au(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'})).join(",")+"}")}function su(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var r in t)r in e||n.push(e[r]=r)})),n}function uu(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function lu(t){var e,n=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),o=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((e=t.getUTCFullYear())<0?"-"+uu(-e,6):e>9999?"+"+uu(e,6):uu(e,4))+"-"+uu(t.getUTCMonth()+1,2)+"-"+uu(t.getUTCDate(),2)+(o?"T"+uu(n,2)+":"+uu(r,2)+":"+uu(i,2)+"."+uu(o,3)+"Z":i?"T"+uu(n,2)+":"+uu(r,2)+":"+uu(i,2)+"Z":r||n?"T"+uu(n,2)+":"+uu(r,2)+"Z":"")}function cu(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function r(t,e){var r,i=[],o=t.length,a=0,s=0,u=o<=0,l=!1;function c(){if(u)return nu;if(l)return l=!1,eu;var e,r,i=a;if(t.charCodeAt(i)===ru){for(;a++<o&&t.charCodeAt(a)!==ru||t.charCodeAt(++a)===ru;);return(e=a)>=o?u=!0:(r=t.charCodeAt(a++))===iu?l=!0:r===ou&&(l=!0,t.charCodeAt(a)===iu&&++a),t.slice(i+1,e-1).replace(/""/g,'"')}for(;a<o;){if((r=t.charCodeAt(e=a++))===iu)l=!0;else if(r===ou)l=!0,t.charCodeAt(a)===iu&&++a;else if(r!==n)continue;return t.slice(i,e)}return u=!0,t.slice(i,o)}for(t.charCodeAt(o-1)===iu&&--o,t.charCodeAt(o-1)===ou&&--o;(r=c())!==nu;){for(var f=[];r!==eu&&r!==nu;)f.push(r),r=c();e&&null==(f=e(f,s++))||i.push(f)}return i}function i(e,n){return e.map((function(e){return n.map((function(t){return a(e[t])})).join(t)}))}function o(e){return e.map(a).join(t)}function a(t){return null==t?"":t instanceof Date?lu(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,i,o=r(t,(function(t,r){if(n)return n(t,r-1);i=t,n=e?function(t,e){var n=au(t);return function(r,i){return e(n(r),i,t)}}(t,e):au(t)}));return o.columns=i||[],o},parseRows:r,format:function(e,n){return null==n&&(n=su(e)),[n.map(a).join(t)].concat(i(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=su(t)),i(t,e).join("\n")},formatRows:function(t){return t.map(o).join("\n")},formatRow:o,formatValue:a}}var fu=cu(","),hu=fu.parse,du=fu.parseRows,pu=fu.format,mu=fu.formatBody,gu=fu.formatRows,yu=fu.formatRow,vu=fu.formatValue,xu=cu("\t"),_u=xu.parse,bu=xu.parseRows,wu=xu.format,Mu=xu.formatBody,Au=xu.formatRows,Tu=xu.formatRow,Eu=xu.formatValue;function Cu(t){for(var e in t){var n,r,i=t[e].trim();if(i)if("true"===i)i=!0;else if("false"===i)i=!1;else if("NaN"===i)i=NaN;else if(isNaN(n=+i)){if(!(r=i.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;ku&&r[4]&&!r[7]&&(i=i.replace(/-/g,"/").replace(/T/," ")),i=new Date(i)}else i=n;else i=null;t[e]=i}return t}const ku=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours(),Su=t=>+t;function Pu(t){return t*t}function Ou(t){return t*(2-t)}function Ru(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}var Lu=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),Iu=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),Du=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),Nu=Math.PI,Fu=Nu/2;function zu(t){return 1==+t?1:1-Math.cos(t*Fu)}function Bu(t){return Math.sin(t*Fu)}function ju(t){return(1-Math.cos(Nu*t))/2}function Vu(t){return 1.0009775171065494*(Math.pow(2,-10*t)-.0009765625)}function qu(t){return Vu(1-+t)}function Gu(t){return 1-Vu(t)}function Uu(t){return((t*=2)<=1?Vu(1-t):2-Vu(t-1))/2}function Hu(t){return 1-Math.sqrt(1-t*t)}function Wu(t){return Math.sqrt(1- --t*t)}function Xu(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var Ku=4/11,Qu=6/11,Yu=8/11,$u=3/4,Zu=9/11,Ju=10/11,tl=15/16,el=21/22,nl=63/64,rl=1/Ku/Ku;function il(t){return 1-ol(1-t)}function ol(t){return(t=+t)<Ku?rl*t*t:t<Yu?rl*(t-=Qu)*t+$u:t<Ju?rl*(t-=Zu)*t+tl:rl*(t-=el)*t+nl}function al(t){return((t*=2)<=1?1-ol(1-t):ol(t-1)+1)/2}var sl=1.70158,ul=function t(e){function n(t){return(t=+t)*t*(e*(t-1)+t)}return e=+e,n.overshoot=t,n}(sl),ll=function t(e){function n(t){return--t*t*((t+1)*e+t)+1}return e=+e,n.overshoot=t,n}(sl),cl=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(sl),fl=2*Math.PI,hl=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=fl);function i(t){return e*Vu(- --t)*Math.sin((r-t)/n)}return i.amplitude=function(e){return t(e,n*fl)},i.period=function(n){return t(e,n)},i}(1,.3),dl=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=fl);function i(t){return 1-e*Vu(t=+t)*Math.sin((t+r)/n)}return i.amplitude=function(e){return t(e,n*fl)},i.period=function(n){return t(e,n)},i}(1,.3),pl=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=fl);function i(t){return((t=2*t-1)<0?e*Vu(-t)*Math.sin((r-t)/n):2-e*Vu(t)*Math.sin((r+t)/n))/2}return i.amplitude=function(e){return t(e,n*fl)},i.period=function(n){return t(e,n)},i}(1,.3);function ml(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}function gl(t,e){return fetch(t,e).then(ml)}function yl(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}function vl(t,e){return fetch(t,e).then(yl)}function xl(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function _l(t,e){return fetch(t,e).then(xl)}function bl(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=void 0),_l(e,n).then((function(e){return t(e,r)}))}}function wl(t,e,n,r){3===arguments.length&&"function"==typeof n&&(r=n,n=void 0);var i=cu(t);return _l(e,n).then((function(t){return i.parse(t,r)}))}var Ml=bl(hu),Al=bl(_u);function Tl(t,e){return new Promise((function(n,r){var i=new Image;for(var o in e)i[o]=e[o];i.onerror=r,i.onload=function(){n(i)},i.src=t}))}function El(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(204!==t.status&&205!==t.status)return t.json()}function Cl(t,e){return fetch(t,e).then(El)}function kl(t){return(e,n)=>_l(e,n).then((e=>(new DOMParser).parseFromString(e,t)))}var Sl=kl("application/xml"),Pl=kl("text/html"),Ol=kl("image/svg+xml");function Rl(t,e){var n,r=1;function i(){var i,o,a=n.length,s=0,u=0;for(i=0;i<a;++i)s+=(o=n[i]).x,u+=o.y;for(s=(s/a-t)*r,u=(u/a-e)*r,i=0;i<a;++i)(o=n[i]).x-=s,o.y-=u}return null==t&&(t=0),null==e&&(e=0),i.initialize=function(t){n=t},i.x=function(e){return arguments.length?(t=+e,i):t},i.y=function(t){return arguments.length?(e=+t,i):e},i.strength=function(t){return arguments.length?(r=+t,i):r},i}function Ll(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o,a,s,u,l,c,f,h,d=t._root,p={data:r},m=t._x0,g=t._y0,y=t._x1,v=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((l=e>=(o=(m+y)/2))?m=o:y=o,(c=n>=(a=(g+v)/2))?g=a:v=a,i=d,!(d=d[f=c<<1|l]))return i[f]=p,t;if(s=+t._x.call(null,d.data),u=+t._y.call(null,d.data),e===s&&n===u)return p.next=d,i?i[f]=p:t._root=p,t;do{i=i?i[f]=new Array(4):t._root=new Array(4),(l=e>=(o=(m+y)/2))?m=o:y=o,(c=n>=(a=(g+v)/2))?g=a:v=a}while((f=c<<1|l)==(h=(u>=a)<<1|s>=o));return i[h]=d,i[f]=p,t}function Il(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function Dl(t){return t[0]}function Nl(t){return t[1]}function Fl(t,e,n){var r=new zl(null==e?Dl:e,null==n?Nl:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function zl(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function Bl(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var jl=Fl.prototype=zl.prototype;function Vl(t){return function(){return t}}function ql(t){return 1e-6*(t()-.5)}function Gl(t){return t.x+t.vx}function Ul(t){return t.y+t.vy}function Hl(t){var e,n,r,i=1,o=1;function a(){for(var t,a,u,l,c,f,h,d=e.length,p=0;p<o;++p)for(a=Fl(e,Gl,Ul).visitAfter(s),t=0;t<d;++t)u=e[t],f=n[u.index],h=f*f,l=u.x+u.vx,c=u.y+u.vy,a.visit(m);function m(t,e,n,o,a){var s=t.data,d=t.r,p=f+d;if(!s)return e>l+p||o<l-p||n>c+p||a<c-p;if(s.index>u.index){var m=l-s.x-s.vx,g=c-s.y-s.vy,y=m*m+g*g;y<p*p&&(0===m&&(y+=(m=ql(r))*m),0===g&&(y+=(g=ql(r))*g),y=(p-(y=Math.sqrt(y)))/y*i,u.vx+=(m*=y)*(p=(d*=d)/(h+d)),u.vy+=(g*=y)*p,s.vx-=m*(p=1-p),s.vy-=g*p)}}}function s(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function u(){if(e){var r,i,o=e.length;for(n=new Array(o),r=0;r<o;++r)i=e[r],n[i.index]=+t(i,r,e)}}return"function"!=typeof t&&(t=Vl(null==t?1:+t)),a.initialize=function(t,n){e=t,r=n,u()},a.iterations=function(t){return arguments.length?(o=+t,a):o},a.strength=function(t){return arguments.length?(i=+t,a):i},a.radius=function(e){return arguments.length?(t="function"==typeof e?e:Vl(+e),u(),a):t},a}function Wl(t){return t.index}function Xl(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function Kl(t){var e,n,r,i,o,a,s=Wl,u=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},l=Vl(30),c=1;function f(r){for(var i=0,s=t.length;i<c;++i)for(var u,l,f,h,d,p,m,g=0;g<s;++g)l=(u=t[g]).source,h=(f=u.target).x+f.vx-l.x-l.vx||ql(a),d=f.y+f.vy-l.y-l.vy||ql(a),h*=p=((p=Math.sqrt(h*h+d*d))-n[g])/p*r*e[g],d*=p,f.vx-=h*(m=o[g]),f.vy-=d*m,l.vx+=h*(m=1-m),l.vy+=d*m}function h(){if(r){var a,u,l=r.length,c=t.length,f=new Map(r.map(((t,e)=>[s(t,e,r),t])));for(a=0,i=new Array(l);a<c;++a)(u=t[a]).index=a,"object"!=typeof u.source&&(u.source=Xl(f,u.source)),"object"!=typeof u.target&&(u.target=Xl(f,u.target)),i[u.source.index]=(i[u.source.index]||0)+1,i[u.target.index]=(i[u.target.index]||0)+1;for(a=0,o=new Array(c);a<c;++a)u=t[a],o[a]=i[u.source.index]/(i[u.source.index]+i[u.target.index]);e=new Array(c),d(),n=new Array(c),p()}}function d(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+u(t[n],n,t)}function p(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+l(t[e],e,t)}return null==t&&(t=[]),f.initialize=function(t,e){r=t,a=e,h()},f.links=function(e){return arguments.length?(t=e,h(),f):t},f.id=function(t){return arguments.length?(s=t,f):s},f.iterations=function(t){return arguments.length?(c=+t,f):c},f.strength=function(t){return arguments.length?(u="function"==typeof t?t:Vl(+t),d(),f):u},f.distance=function(t){return arguments.length?(l="function"==typeof t?t:Vl(+t),p(),f):l},f}jl.copy=function(){var t,e,n=new zl(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=Bl(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=Bl(e));return n},jl.add=function(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return Ll(this.cover(e,n),e,n,t)},jl.addAll=function(t){var e,n,r,i,o=t.length,a=new Array(o),s=new Array(o),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(a[n]=r,s[n]=i,r<u&&(u=r),r>c&&(c=r),i<l&&(l=i),i>f&&(f=i));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<o;++n)Ll(this,a[n],s[n],t[n]);return this},jl.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{for(var a,s,u=i-n||1,l=this._root;n>t||t>=i||r>e||e>=o;)switch(s=(e<r)<<1|t<n,(a=new Array(4))[s]=l,l=a,u*=2,s){case 0:i=n+u,o=r+u;break;case 1:n=i-u,o=r+u;break;case 2:i=n+u,r=o-u;break;case 3:n=i-u,r=o-u}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},jl.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},jl.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},jl.find=function(t,e,n){var r,i,o,a,s,u,l,c=this._x0,f=this._y0,h=this._x1,d=this._y1,p=[],m=this._root;for(m&&p.push(new Il(m,c,f,h,d)),null==n?n=1/0:(c=t-n,f=e-n,h=t+n,d=e+n,n*=n);u=p.pop();)if(!(!(m=u.node)||(i=u.x0)>h||(o=u.y0)>d||(a=u.x1)<c||(s=u.y1)<f))if(m.length){var g=(i+a)/2,y=(o+s)/2;p.push(new Il(m[3],g,y,a,s),new Il(m[2],i,y,g,s),new Il(m[1],g,o,a,y),new Il(m[0],i,o,g,y)),(l=(e>=y)<<1|t>=g)&&(u=p[p.length-1],p[p.length-1]=p[p.length-1-l],p[p.length-1-l]=u)}else{var v=t-+this._x.call(null,m.data),x=e-+this._y.call(null,m.data),_=v*v+x*x;if(_<n){var b=Math.sqrt(n=_);c=t-b,f=e-b,h=t+b,d=e+b,r=m.data}}return r},jl.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,r,i,o,a,s,u,l,c,f,h,d=this._root,p=this._x0,m=this._y0,g=this._x1,y=this._y1;if(!d)return this;if(d.length)for(;;){if((l=o>=(s=(p+g)/2))?p=s:g=s,(c=a>=(u=(m+y)/2))?m=u:y=u,e=d,!(d=d[f=c<<1|l]))return this;if(!d.length)break;(e[f+1&3]||e[f+2&3]||e[f+3&3])&&(n=e,h=f)}for(;d.data!==t;)if(r=d,!(d=d.next))return this;return(i=d.next)&&delete d.next,r?(i?r.next=i:delete r.next,this):e?(i?e[f]=i:delete e[f],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[h]=d:this._root=d),this):(this._root=i,this)},jl.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},jl.root=function(){return this._root},jl.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},jl.visit=function(t){var e,n,r,i,o,a,s=[],u=this._root;for(u&&s.push(new Il(u,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(u=e.node,r=e.x0,i=e.y0,o=e.x1,a=e.y1)&&u.length){var l=(r+o)/2,c=(i+a)/2;(n=u[3])&&s.push(new Il(n,l,c,o,a)),(n=u[2])&&s.push(new Il(n,r,c,l,a)),(n=u[1])&&s.push(new Il(n,l,i,o,c)),(n=u[0])&&s.push(new Il(n,r,i,l,c))}return this},jl.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new Il(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var o,a=e.x0,s=e.y0,u=e.x1,l=e.y1,c=(a+u)/2,f=(s+l)/2;(o=i[0])&&n.push(new Il(o,a,s,c,f)),(o=i[1])&&n.push(new Il(o,c,s,u,f)),(o=i[2])&&n.push(new Il(o,a,f,c,l)),(o=i[3])&&n.push(new Il(o,c,f,u,l))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},jl.x=function(t){return arguments.length?(this._x=t,this):this._x},jl.y=function(t){return arguments.length?(this._y=t,this):this._y};const Ql=1664525,Yl=1013904223,$l=4294967296;function Zl(t){return t.x}function Jl(t){return t.y}var tc=10,ec=Math.PI*(3-Math.sqrt(5));function nc(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,u=pi(f),l=Ee("tick","end"),c=function(){let t=1;return()=>(t=(Ql*t+Yl)%$l)/$l}();function f(){h(),l.call("tick",e),n<r&&(u.stop(),l.call("end",e))}function h(r){var u,l,c=t.length;void 0===r&&(r=1);for(var f=0;f<r;++f)for(n+=(o-n)*i,s.forEach((function(t){t(n)})),u=0;u<c;++u)null==(l=t[u]).fx?l.x+=l.vx*=a:(l.x=l.fx,l.vx=0),null==l.fy?l.y+=l.vy*=a:(l.y=l.fy,l.vy=0);return e}function d(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var i=tc*Math.sqrt(.5+n),o=n*ec;e.x=i*Math.cos(o),e.y=i*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function p(e){return e.initialize&&e.initialize(t,c),e}return null==t&&(t=[]),d(),e={tick:h,restart:function(){return u.restart(f),e},stop:function(){return u.stop(),e},nodes:function(n){return arguments.length?(t=n,d(),s.forEach(p),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(o=+t,e):o},velocityDecay:function(t){return arguments.length?(a=1-t,e):1-a},randomSource:function(t){return arguments.length?(c=t,s.forEach(p),e):c},force:function(t,n){return arguments.length>1?(null==n?s.delete(t):s.set(t,p(n)),e):s.get(t)},find:function(e,n,r){var i,o,a,s,u,l=0,c=t.length;for(null==r?r=1/0:r*=r,l=0;l<c;++l)(a=(i=e-(s=t[l]).x)*i+(o=n-s.y)*o)<r&&(u=s,r=a);return u},on:function(t,n){return arguments.length>1?(l.on(t,n),e):l.on(t)}}}function rc(){var t,e,n,r,i,o=Vl(-30),a=1,s=1/0,u=.81;function l(n){var i,o=t.length,a=Fl(t,Zl,Jl).visitAfter(f);for(r=n,i=0;i<o;++i)e=t[i],a.visit(h)}function c(){if(t){var e,n,r=t.length;for(i=new Array(r),e=0;e<r;++e)n=t[e],i[n.index]=+o(n,e,t)}}function f(t){var e,n,r,o,a,s=0,u=0;if(t.length){for(r=o=a=0;a<4;++a)(e=t[a])&&(n=Math.abs(e.value))&&(s+=e.value,u+=n,r+=n*e.x,o+=n*e.y);t.x=r/u,t.y=o/u}else{(e=t).x=e.data.x,e.y=e.data.y;do{s+=i[e.data.index]}while(e=e.next)}t.value=s}function h(t,o,l,c){if(!t.value)return!0;var f=t.x-e.x,h=t.y-e.y,d=c-o,p=f*f+h*h;if(d*d/u<p)return p<s&&(0===f&&(p+=(f=ql(n))*f),0===h&&(p+=(h=ql(n))*h),p<a&&(p=Math.sqrt(a*p)),e.vx+=f*t.value*r/p,e.vy+=h*t.value*r/p),!0;if(!(t.length||p>=s)){(t.data!==e||t.next)&&(0===f&&(p+=(f=ql(n))*f),0===h&&(p+=(h=ql(n))*h),p<a&&(p=Math.sqrt(a*p)));do{t.data!==e&&(d=i[t.data.index]*r/p,e.vx+=f*d,e.vy+=h*d)}while(t=t.next)}}return l.initialize=function(e,r){t=e,n=r,c()},l.strength=function(t){return arguments.length?(o="function"==typeof t?t:Vl(+t),c(),l):o},l.distanceMin=function(t){return arguments.length?(a=t*t,l):Math.sqrt(a)},l.distanceMax=function(t){return arguments.length?(s=t*t,l):Math.sqrt(s)},l.theta=function(t){return arguments.length?(u=t*t,l):Math.sqrt(u)},l}function ic(t,e,n){var r,i,o,a=Vl(.1);function s(t){for(var a=0,s=r.length;a<s;++a){var u=r[a],l=u.x-e||1e-6,c=u.y-n||1e-6,f=Math.sqrt(l*l+c*c),h=(o[a]-f)*i[a]*t/f;u.vx+=l*h,u.vy+=c*h}}function u(){if(r){var e,n=r.length;for(i=new Array(n),o=new Array(n),e=0;e<n;++e)o[e]=+t(r[e],e,r),i[e]=isNaN(o[e])?0:+a(r[e],e,r)}}return"function"!=typeof t&&(t=Vl(+t)),null==e&&(e=0),null==n&&(n=0),s.initialize=function(t){r=t,u()},s.strength=function(t){return arguments.length?(a="function"==typeof t?t:Vl(+t),u(),s):a},s.radius=function(e){return arguments.length?(t="function"==typeof e?e:Vl(+e),u(),s):t},s.x=function(t){return arguments.length?(e=+t,s):e},s.y=function(t){return arguments.length?(n=+t,s):n},s}function oc(t){var e,n,r,i=Vl(.1);function o(t){for(var i,o=0,a=e.length;o<a;++o)(i=e[o]).vx+=(r[o]-i.x)*n[o]*t}function a(){if(e){var o,a=e.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!=typeof t&&(t=Vl(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:Vl(+t),a(),o):i},o.x=function(e){return arguments.length?(t="function"==typeof e?e:Vl(+e),a(),o):t},o}function ac(t){var e,n,r,i=Vl(.1);function o(t){for(var i,o=0,a=e.length;o<a;++o)(i=e[o]).vy+=(r[o]-i.y)*n[o]*t}function a(){if(e){var o,a=e.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!=typeof t&&(t=Vl(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:Vl(+t),a(),o):i},o.y=function(e){return arguments.length?(t="function"==typeof e?e:Vl(+e),a(),o):t},o}function sc(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function uc(t){return(t=sc(Math.abs(t)))?t[1]:NaN}var lc,cc=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function fc(t){if(!(e=cc.exec(t)))throw new Error("invalid format: "+t);var e;return new hc({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function hc(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function dc(t,e){var n=sc(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}fc.prototype=hc.prototype,hc.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var pc={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>dc(100*t,e),r:dc,s:function(t,e){var n=sc(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(lc=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+sc(t,Math.max(0,e+o-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function mc(t){return t}var gc,yc,vc,xc=Array.prototype.map,_c=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function bc(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?mc:(e=xc.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,o=[],a=0,s=e[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(t.substring(i-=s,i+s)),!((u+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?mc:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(xc.call(t.numerals,String)),u=void 0===t.percent?"%":t.percent+"",l=void 0===t.minus?"":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function f(t){var e=(t=fc(t)).fill,n=t.align,f=t.sign,h=t.symbol,d=t.zero,p=t.width,m=t.comma,g=t.precision,y=t.trim,v=t.type;"n"===v?(m=!0,v="g"):pc[v]||(void 0===g&&(g=12),y=!0,v="g"),(d||"0"===e&&"="===n)&&(d=!0,e="0",n="=");var x="$"===h?i:"#"===h&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",_="$"===h?o:/[%p]/.test(v)?u:"",b=pc[v],w=/[defgprs%]/.test(v);function M(t){var i,o,u,h=x,M=_;if("c"===v)M=b(t)+M,t="";else{var A=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:b(Math.abs(t),g),y&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),A&&0==+t&&"+"!==f&&(A=!1),h=(A?"("===f?f:l:"-"===f||"("===f?"":f)+h,M=("s"===v?_c[8+lc/3]:"")+M+(A&&"("===f?")":""),w)for(i=-1,o=t.length;++i<o;)if(48>(u=t.charCodeAt(i))||u>57){M=(46===u?a+t.slice(i+1):t.slice(i))+M,t=t.slice(0,i);break}}m&&!d&&(t=r(t,1/0));var T=h.length+t.length+M.length,E=T<p?new Array(p-T+1).join(e):"";switch(m&&d&&(t=r(E+t,E.length?p-M.length:1/0),E=""),n){case"<":t=h+t+M+E;break;case"=":t=h+E+t+M;break;case"^":t=E.slice(0,T=E.length>>1)+h+t+M+E.slice(T);break;default:t=E+h+t+M}return s(t)}return g=void 0===g?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),M.toString=function(){return t+""},M}return{format:f,formatPrefix:function(t,e){var n=f(((t=fc(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(uc(e)/3))),i=Math.pow(10,-r),o=_c[8+r/3];return function(t){return n(i*t)+o}}}}function wc(t){return gc=bc(t),yc=gc.format,vc=gc.formatPrefix,gc}function Mc(t){return Math.max(0,-uc(Math.abs(t)))}function Ac(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(uc(e)/3)))-uc(Math.abs(t)))}function Tc(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,uc(e)-uc(t))+1}wc({thousands:",",grouping:[3],currency:["$",""]});var Ec=1e-6,Cc=1e-12,kc=Math.PI,Sc=kc/2,Pc=kc/4,Oc=2*kc,Rc=180/kc,Lc=kc/180,Ic=Math.abs,Dc=Math.atan,Nc=Math.atan2,Fc=Math.cos,zc=Math.ceil,Bc=Math.exp,jc=(Math.floor,Math.hypot),Vc=Math.log,qc=Math.pow,Gc=Math.sin,Uc=Math.sign||function(t){return t>0?1:t<0?-1:0},Hc=Math.sqrt,Wc=Math.tan;function Xc(t){return t>1?0:t<-1?kc:Math.acos(t)}function Kc(t){return t>1?Sc:t<-1?-Sc:Math.asin(t)}function Qc(t){return(t=Gc(t/2))*t}function Yc(){}function $c(t,e){t&&Jc.hasOwnProperty(t.type)&&Jc[t.type](t,e)}var Zc={Feature:function(t,e){$c(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)$c(n[r].geometry,e)}},Jc={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){tf(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)tf(n[r],e,0)},Polygon:function(t,e){ef(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)ef(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)$c(n[r],e)}};function tf(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function ef(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)tf(t[n],e,1);e.polygonEnd()}function nf(t,e){t&&Zc.hasOwnProperty(t.type)?Zc[t.type](t,e):$c(t,e)}var rf,of,af,sf,uf,lf,cf,ff,hf,df,pf,mf,gf,yf,vf,xf,_f=new S,bf=new S,wf={point:Yc,lineStart:Yc,lineEnd:Yc,polygonStart:function(){_f=new S,wf.lineStart=Mf,wf.lineEnd=Af},polygonEnd:function(){var t=+_f;bf.add(t<0?Oc+t:t),this.lineStart=this.lineEnd=this.point=Yc},sphere:function(){bf.add(Oc)}};function Mf(){wf.point=Tf}function Af(){Ef(rf,of)}function Tf(t,e){wf.point=Ef,rf=t,of=e,af=t*=Lc,sf=Fc(e=(e*=Lc)/2+Pc),uf=Gc(e)}function Ef(t,e){var n=(t*=Lc)-af,r=n>=0?1:-1,i=r*n,o=Fc(e=(e*=Lc)/2+Pc),a=Gc(e),s=uf*a,u=sf*o+s*Fc(i),l=s*r*Gc(i);_f.add(Nc(l,u)),af=t,sf=o,uf=a}function Cf(t){return bf=new S,nf(t,wf),2*bf}function kf(t){return[Nc(t[1],t[0]),Kc(t[2])]}function Sf(t){var e=t[0],n=t[1],r=Fc(n);return[r*Fc(e),r*Gc(e),Gc(n)]}function Pf(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Of(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Rf(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Lf(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function If(t){var e=Hc(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var Df,Nf,Ff,zf,Bf,jf,Vf,qf,Gf,Uf,Hf,Wf,Xf,Kf,Qf,Yf,$f={point:Zf,lineStart:th,lineEnd:eh,polygonStart:function(){$f.point=nh,$f.lineStart=rh,$f.lineEnd=ih,yf=new S,wf.polygonStart()},polygonEnd:function(){wf.polygonEnd(),$f.point=Zf,$f.lineStart=th,$f.lineEnd=eh,_f<0?(lf=-(ff=180),cf=-(hf=90)):yf>Ec?hf=90:yf<-Ec&&(cf=-90),xf[0]=lf,xf[1]=ff},sphere:function(){lf=-(ff=180),cf=-(hf=90)}};function Zf(t,e){vf.push(xf=[lf=t,ff=t]),e<cf&&(cf=e),e>hf&&(hf=e)}function Jf(t,e){var n=Sf([t*Lc,e*Lc]);if(gf){var r=Of(gf,n),i=Of([r[1],-r[0],0],r);If(i),i=kf(i);var o,a=t-df,s=a>0?1:-1,u=i[0]*Rc*s,l=Ic(a)>180;l^(s*df<u&&u<s*t)?(o=i[1]*Rc)>hf&&(hf=o):l^(s*df<(u=(u+360)%360-180)&&u<s*t)?(o=-i[1]*Rc)<cf&&(cf=o):(e<cf&&(cf=e),e>hf&&(hf=e)),l?t<df?oh(lf,t)>oh(lf,ff)&&(ff=t):oh(t,ff)>oh(lf,ff)&&(lf=t):ff>=lf?(t<lf&&(lf=t),t>ff&&(ff=t)):t>df?oh(lf,t)>oh(lf,ff)&&(ff=t):oh(t,ff)>oh(lf,ff)&&(lf=t)}else vf.push(xf=[lf=t,ff=t]);e<cf&&(cf=e),e>hf&&(hf=e),gf=n,df=t}function th(){$f.point=Jf}function eh(){xf[0]=lf,xf[1]=ff,$f.point=Zf,gf=null}function nh(t,e){if(gf){var n=t-df;yf.add(Ic(n)>180?n+(n>0?360:-360):n)}else pf=t,mf=e;wf.point(t,e),Jf(t,e)}function rh(){wf.lineStart()}function ih(){nh(pf,mf),wf.lineEnd(),Ic(yf)>Ec&&(lf=-(ff=180)),xf[0]=lf,xf[1]=ff,gf=null}function oh(t,e){return(e-=t)<0?e+360:e}function ah(t,e){return t[0]-e[0]}function sh(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function uh(t){var e,n,r,i,o,a,s;if(hf=ff=-(lf=cf=1/0),vf=[],nf(t,$f),n=vf.length){for(vf.sort(ah),e=1,o=[r=vf[0]];e<n;++e)sh(r,(i=vf[e])[0])||sh(r,i[1])?(oh(r[0],i[1])>oh(r[0],r[1])&&(r[1]=i[1]),oh(i[0],r[1])>oh(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,e=0,r=o[n=o.length-1];e<=n;r=i,++e)i=o[e],(s=oh(r[1],i[0]))>a&&(a=s,lf=i[0],ff=r[1])}return vf=xf=null,lf===1/0||cf===1/0?[[NaN,NaN],[NaN,NaN]]:[[lf,cf],[ff,hf]]}var lh={sphere:Yc,point:ch,lineStart:hh,lineEnd:mh,polygonStart:function(){lh.lineStart=gh,lh.lineEnd=yh},polygonEnd:function(){lh.lineStart=hh,lh.lineEnd=mh}};function ch(t,e){t*=Lc;var n=Fc(e*=Lc);fh(n*Fc(t),n*Gc(t),Gc(e))}function fh(t,e,n){++Df,Ff+=(t-Ff)/Df,zf+=(e-zf)/Df,Bf+=(n-Bf)/Df}function hh(){lh.point=dh}function dh(t,e){t*=Lc;var n=Fc(e*=Lc);Kf=n*Fc(t),Qf=n*Gc(t),Yf=Gc(e),lh.point=ph,fh(Kf,Qf,Yf)}function ph(t,e){t*=Lc;var n=Fc(e*=Lc),r=n*Fc(t),i=n*Gc(t),o=Gc(e),a=Nc(Hc((a=Qf*o-Yf*i)*a+(a=Yf*r-Kf*o)*a+(a=Kf*i-Qf*r)*a),Kf*r+Qf*i+Yf*o);Nf+=a,jf+=a*(Kf+(Kf=r)),Vf+=a*(Qf+(Qf=i)),qf+=a*(Yf+(Yf=o)),fh(Kf,Qf,Yf)}function mh(){lh.point=ch}function gh(){lh.point=vh}function yh(){xh(Wf,Xf),lh.point=ch}function vh(t,e){Wf=t,Xf=e,t*=Lc,e*=Lc,lh.point=xh;var n=Fc(e);Kf=n*Fc(t),Qf=n*Gc(t),Yf=Gc(e),fh(Kf,Qf,Yf)}function xh(t,e){t*=Lc;var n=Fc(e*=Lc),r=n*Fc(t),i=n*Gc(t),o=Gc(e),a=Qf*o-Yf*i,s=Yf*r-Kf*o,u=Kf*i-Qf*r,l=jc(a,s,u),c=Kc(l),f=l&&-c/l;Gf.add(f*a),Uf.add(f*s),Hf.add(f*u),Nf+=c,jf+=c*(Kf+(Kf=r)),Vf+=c*(Qf+(Qf=i)),qf+=c*(Yf+(Yf=o)),fh(Kf,Qf,Yf)}function _h(t){Df=Nf=Ff=zf=Bf=jf=Vf=qf=0,Gf=new S,Uf=new S,Hf=new S,nf(t,lh);var e=+Gf,n=+Uf,r=+Hf,i=jc(e,n,r);return i<Cc&&(e=jf,n=Vf,r=qf,Nf<Ec&&(e=Ff,n=zf,r=Bf),(i=jc(e,n,r))<Cc)?[NaN,NaN]:[Nc(n,e)*Rc,Kc(r/i)*Rc]}function bh(t){return function(){return t}}function wh(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function Mh(t,e){return Ic(t)>kc&&(t-=Math.round(t/Oc)*Oc),[t,e]}function Ah(t,e,n){return(t%=Oc)?e||n?wh(Eh(t),Ch(e,n)):Eh(t):e||n?Ch(e,n):Mh}function Th(t){return function(e,n){return Ic(e+=t)>kc&&(e-=Math.round(e/Oc)*Oc),[e,n]}}function Eh(t){var e=Th(t);return e.invert=Th(-t),e}function Ch(t,e){var n=Fc(t),r=Gc(t),i=Fc(e),o=Gc(e);function a(t,e){var a=Fc(e),s=Fc(t)*a,u=Gc(t)*a,l=Gc(e),c=l*n+s*r;return[Nc(u*i-c*o,s*n-l*r),Kc(c*i+u*o)]}return a.invert=function(t,e){var a=Fc(e),s=Fc(t)*a,u=Gc(t)*a,l=Gc(e),c=l*i-u*o;return[Nc(u*i+l*o,s*n+c*r),Kc(c*n-s*r)]},a}function kh(t){function e(e){return(e=t(e[0]*Lc,e[1]*Lc))[0]*=Rc,e[1]*=Rc,e}return t=Ah(t[0]*Lc,t[1]*Lc,t.length>2?t[2]*Lc:0),e.invert=function(e){return(e=t.invert(e[0]*Lc,e[1]*Lc))[0]*=Rc,e[1]*=Rc,e},e}function Sh(t,e,n,r,i,o){if(n){var a=Fc(e),s=Gc(e),u=r*n;null==i?(i=e+r*Oc,o=e-u/2):(i=Ph(a,i),o=Ph(a,o),(r>0?i<o:i>o)&&(i+=r*Oc));for(var l,c=i;r>0?c>o:c<o;c-=u)l=kf([a,-s*Fc(c),-s*Gc(c)]),t.point(l[0],l[1])}}function Ph(t,e){(e=Sf(e))[0]-=t,If(e);var n=Xc(-e[1]);return((-e[2]<0?-n:n)+Oc-Ec)%Oc}function Oh(){var t,e,n=bh([0,0]),r=bh(90),i=bh(2),o={point:function(n,r){t.push(n=e(n,r)),n[0]*=Rc,n[1]*=Rc}};function a(){var a=n.apply(this,arguments),s=r.apply(this,arguments)*Lc,u=i.apply(this,arguments)*Lc;return t=[],e=Ah(-a[0]*Lc,-a[1]*Lc,0).invert,Sh(o,s,u,1),a={type:"Polygon",coordinates:[t]},t=e=null,a}return a.center=function(t){return arguments.length?(n="function"==typeof t?t:bh([+t[0],+t[1]]),a):n},a.radius=function(t){return arguments.length?(r="function"==typeof t?t:bh(+t),a):r},a.precision=function(t){return arguments.length?(i="function"==typeof t?t:bh(+t),a):i},a}function Rh(){var t,e=[];return{point:function(e,n,r){t.push([e,n,r])},lineStart:function(){e.push(t=[])},lineEnd:Yc,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Lh(t,e){return Ic(t[0]-e[0])<Ec&&Ic(t[1]-e[1])<Ec}function Ih(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Dh(t,e,n,r,i){var o,a,s=[],u=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(Lh(r,a)){if(!r[2]&&!a[2]){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);return void i.lineEnd()}a[0]+=2*Ec}s.push(n=new Ih(r,t,null,!0)),u.push(n.o=new Ih(r,null,n,!1)),s.push(n=new Ih(a,t,null,!1)),u.push(n.o=new Ih(a,null,n,!0))}})),s.length){for(u.sort(e),Nh(s),Nh(u),o=0,a=u.length;o<a;++o)u[o].e=n=!n;for(var l,c,f=s[0];;){for(var h=f,d=!0;h.v;)if((h=h.n)===f)return;l=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(o=0,a=l.length;o<a;++o)i.point((c=l[o])[0],c[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d)for(l=h.p.z,o=l.length-1;o>=0;--o)i.point((c=l[o])[0],c[1]);else r(h.x,h.p.x,-1,i);h=h.p}l=(h=h.o).z,d=!d}while(!h.v);i.lineEnd()}}}function Nh(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function Fh(t){return Ic(t[0])<=kc?t[0]:Uc(t[0])*((Ic(t[0])+kc)%Oc-kc)}function zh(t,e){var n=Fh(e),r=e[1],i=Gc(r),o=[Gc(n),-Fc(n),0],a=0,s=0,u=new S;1===i?r=Sc+Ec:-1===i&&(r=-Sc-Ec);for(var l=0,c=t.length;l<c;++l)if(h=(f=t[l]).length)for(var f,h,d=f[h-1],p=Fh(d),m=d[1]/2+Pc,g=Gc(m),y=Fc(m),v=0;v<h;++v,p=_,g=w,y=M,d=x){var x=f[v],_=Fh(x),b=x[1]/2+Pc,w=Gc(b),M=Fc(b),A=_-p,T=A>=0?1:-1,E=T*A,C=E>kc,k=g*w;if(u.add(Nc(k*T*Gc(E),y*M+k*Fc(E))),a+=C?A+T*Oc:A,C^p>=n^_>=n){var P=Of(Sf(d),Sf(x));If(P);var O=Of(o,P);If(O);var R=(C^A>=0?-1:1)*Kc(O[2]);(r>R||r===R&&(P[0]||P[1]))&&(s+=C^A>=0?1:-1)}}return(a<-Ec||a<Ec&&u<-Cc)^1&s}function Bh(t,e,n,r){return function(i){var o,a,s,u=e(i),l=Rh(),c=e(l),f=!1,h={point:d,lineStart:m,lineEnd:g,polygonStart:function(){h.point=y,h.lineStart=v,h.lineEnd=x,a=[],o=[]},polygonEnd:function(){h.point=d,h.lineStart=m,h.lineEnd=g,a=St(a);var t=zh(o,r);a.length?(f||(i.polygonStart(),f=!0),Dh(a,Vh,t,n,i)):t&&(f||(i.polygonStart(),f=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),f&&(i.polygonEnd(),f=!1),a=o=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(e,n){t(e,n)&&i.point(e,n)}function p(t,e){u.point(t,e)}function m(){h.point=p,u.lineStart()}function g(){h.point=d,u.lineEnd()}function y(t,e){s.push([t,e]),c.point(t,e)}function v(){c.lineStart(),s=[]}function x(){y(s[0][0],s[0][1]),c.lineEnd();var t,e,n,r,u=c.clean(),h=l.result(),d=h.length;if(s.pop(),o.push(s),s=null,d)if(1&u){if((e=(n=h[0]).length-1)>0){for(f||(i.polygonStart(),f=!0),i.lineStart(),t=0;t<e;++t)i.point((r=n[t])[0],r[1]);i.lineEnd()}}else d>1&&2&u&&h.push(h.pop().concat(h.shift())),a.push(h.filter(jh))}return h}}function jh(t){return t.length>1}function Vh(t,e){return((t=t.x)[0]<0?t[1]-Sc-Ec:Sc-t[1])-((e=e.x)[0]<0?e[1]-Sc-Ec:Sc-e[1])}Mh.invert=Mh;var qh=Bh((function(){return!0}),(function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?kc:-kc,u=Ic(o-n);Ic(u-kc)<Ec?(t.point(n,r=(r+a)/2>0?Sc:-Sc),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&u>=kc&&(Ic(n-i)<Ec&&(n-=i*Ec),Ic(o-s)<Ec&&(o-=s*Ec),r=function(t,e,n,r){var i,o,a=Gc(t-n);return Ic(a)>Ec?Dc((Gc(e)*(o=Fc(r))*Gc(n)-Gc(r)*(i=Fc(e))*Gc(t))/(i*o*a)):(e+r)/2}(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var i;if(null==t)i=n*Sc,r.point(-kc,i),r.point(0,i),r.point(kc,i),r.point(kc,0),r.point(kc,-i),r.point(0,-i),r.point(-kc,-i),r.point(-kc,0),r.point(-kc,i);else if(Ic(t[0]-e[0])>Ec){var o=t[0]<e[0]?kc:-kc;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}),[-kc,-Sc]);function Gh(t){var e=Fc(t),n=2*Lc,r=e>0,i=Ic(e)>Ec;function o(t,n){return Fc(t)*Fc(n)>e}function a(t,n,r){var i=[1,0,0],o=Of(Sf(t),Sf(n)),a=Pf(o,o),s=o[0],u=a-s*s;if(!u)return!r&&t;var l=e*a/u,c=-e*s/u,f=Of(i,o),h=Lf(i,l);Rf(h,Lf(o,c));var d=f,p=Pf(h,d),m=Pf(d,d),g=p*p-m*(Pf(h,h)-1);if(!(g<0)){var y=Hc(g),v=Lf(d,(-p-y)/m);if(Rf(v,h),v=kf(v),!r)return v;var x,_=t[0],b=n[0],w=t[1],M=n[1];b<_&&(x=_,_=b,b=x);var A=b-_,T=Ic(A-kc)<Ec;if(!T&&M<w&&(x=w,w=M,M=x),T||A<Ec?T?w+M>0^v[1]<(Ic(v[0]-_)<Ec?w:M):w<=v[1]&&v[1]<=M:A>kc^(_<=v[0]&&v[0]<=b)){var E=Lf(d,(-p+y)/m);return Rf(E,h),[v,kf(E)]}}}function s(e,n){var i=r?t:kc-t,o=0;return e<-i?o|=1:e>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return Bh(o,(function(t){var e,n,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(f,h){var d,p=[f,h],m=o(f,h),g=r?m?0:s(f,h):m?s(f+(f<0?kc:-kc),h):0;if(!e&&(l=u=m)&&t.lineStart(),m!==u&&(!(d=a(e,p))||Lh(e,d)||Lh(p,d))&&(p[2]=1),m!==u)c=0,m?(t.lineStart(),d=a(p,e),t.point(d[0],d[1])):(d=a(e,p),t.point(d[0],d[1],2),t.lineEnd()),e=d;else if(i&&e&&r^m){var y;g&n||!(y=a(p,e,!0))||(c=0,r?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1],3)))}!m||e&&Lh(e,p)||t.point(p[0],p[1]),e=p,u=m,n=g},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return c|(l&&u)<<1}}}),(function(e,r,i,o){Sh(o,t,n,i,e,r)}),r?[0,-t]:[-kc,t-kc])}var Uh,Hh,Wh,Xh,Kh=1e9,Qh=-Kh;function Yh(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,s,l){var c=0,f=0;if(null==i||(c=a(i,s))!==(f=a(o,s))||u(i,o)<0^s>0)do{l.point(0===c||3===c?t:n,c>1?r:e)}while((c=(c+s+4)%4)!==f);else l.point(o[0],o[1])}function a(r,i){return Ic(r[0]-t)<Ec?i>0?0:3:Ic(r[0]-n)<Ec?i>0?2:1:Ic(r[1]-e)<Ec?i>0?1:0:i>0?3:2}function s(t,e){return u(t.x,e.x)}function u(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){var u,l,c,f,h,d,p,m,g,y,v,x=a,_=Rh(),b={point:w,lineStart:function(){b.point=M,l&&l.push(c=[]);y=!0,g=!1,p=m=NaN},lineEnd:function(){u&&(M(f,h),d&&g&&_.rejoin(),u.push(_.result()));b.point=w,g&&x.lineEnd()},polygonStart:function(){x=_,u=[],l=[],v=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=l.length;n<i;++n)for(var o,a,s=l[n],u=1,c=s.length,f=s[0],h=f[0],d=f[1];u<c;++u)o=h,a=d,h=(f=s[u])[0],d=f[1],a<=r?d>r&&(h-o)*(r-a)>(d-a)*(t-o)&&++e:d<=r&&(h-o)*(r-a)<(d-a)*(t-o)&&--e;return e}(),n=v&&e,i=(u=St(u)).length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&Dh(u,s,e,o,a),a.polygonEnd());x=a,u=l=c=null}};function w(t,e){i(t,e)&&x.point(t,e)}function M(o,a){var s=i(o,a);if(l&&c.push([o,a]),y)f=o,h=a,d=s,y=!1,s&&(x.lineStart(),x.point(o,a));else if(s&&g)x.point(o,a);else{var u=[p=Math.max(Qh,Math.min(Kh,p)),m=Math.max(Qh,Math.min(Kh,m))],_=[o=Math.max(Qh,Math.min(Kh,o)),a=Math.max(Qh,Math.min(Kh,a))];!function(t,e,n,r,i,o){var a,s=t[0],u=t[1],l=0,c=1,f=e[0]-s,h=e[1]-u;if(a=n-s,f||!(a>0)){if(a/=f,f<0){if(a<l)return;a<c&&(c=a)}else if(f>0){if(a>c)return;a>l&&(l=a)}if(a=i-s,f||!(a<0)){if(a/=f,f<0){if(a>c)return;a>l&&(l=a)}else if(f>0){if(a<l)return;a<c&&(c=a)}if(a=r-u,h||!(a>0)){if(a/=h,h<0){if(a<l)return;a<c&&(c=a)}else if(h>0){if(a>c)return;a>l&&(l=a)}if(a=o-u,h||!(a<0)){if(a/=h,h<0){if(a>c)return;a>l&&(l=a)}else if(h>0){if(a<l)return;a<c&&(c=a)}return l>0&&(t[0]=s+l*f,t[1]=u+l*h),c<1&&(e[0]=s+c*f,e[1]=u+c*h),!0}}}}}(u,_,t,e,n,r)?s&&(x.lineStart(),x.point(o,a),v=!1):(g||(x.lineStart(),x.point(u[0],u[1])),x.point(_[0],_[1]),s||x.lineEnd(),v=!1)}p=o,m=a,g=s}return b}}function $h(){var t,e,n,r=0,i=0,o=960,a=500;return n={stream:function(n){return t&&e===n?t:t=Yh(r,i,o,a)(e=n)},extent:function(s){return arguments.length?(r=+s[0][0],i=+s[0][1],o=+s[1][0],a=+s[1][1],t=e=null,n):[[r,i],[o,a]]}}}var Zh={sphere:Yc,point:Yc,lineStart:function(){Zh.point=td,Zh.lineEnd=Jh},lineEnd:Yc,polygonStart:Yc,polygonEnd:Yc};function Jh(){Zh.point=Zh.lineEnd=Yc}function td(t,e){Hh=t*=Lc,Wh=Gc(e*=Lc),Xh=Fc(e),Zh.point=ed}function ed(t,e){t*=Lc;var n=Gc(e*=Lc),r=Fc(e),i=Ic(t-Hh),o=Fc(i),a=r*Gc(i),s=Xh*n-Wh*r*o,u=Wh*n+Xh*r*o;Uh.add(Nc(Hc(a*a+s*s),u)),Hh=t,Wh=n,Xh=r}function nd(t){return Uh=new S,nf(t,Zh),+Uh}var rd=[null,null],id={type:"LineString",coordinates:rd};function od(t,e){return rd[0]=t,rd[1]=e,nd(id)}var ad={Feature:function(t,e){return ud(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)if(ud(n[r].geometry,e))return!0;return!1}},sd={Sphere:function(){return!0},Point:function(t,e){return ld(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(ld(n[r],e))return!0;return!1},LineString:function(t,e){return cd(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(cd(n[r],e))return!0;return!1},Polygon:function(t,e){return fd(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(fd(n[r],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)if(ud(n[r],e))return!0;return!1}};function ud(t,e){return!(!t||!sd.hasOwnProperty(t.type))&&sd[t.type](t,e)}function ld(t,e){return 0===od(t,e)}function cd(t,e){for(var n,r,i,o=0,a=t.length;o<a;o++){if(0===(r=od(t[o],e)))return!0;if(o>0&&(i=od(t[o],t[o-1]))>0&&n<=i&&r<=i&&(n+r-i)*(1-Math.pow((n-r)/i,2))<Cc*i)return!0;n=r}return!1}function fd(t,e){return!!zh(t.map(hd),dd(e))}function hd(t){return(t=t.map(dd)).pop(),t}function dd(t){return[t[0]*Lc,t[1]*Lc]}function pd(t,e){return(t&&ad.hasOwnProperty(t.type)?ad[t.type]:ud)(t,e)}function md(t,e,n){var r=Lt(t,e-Ec,n).concat(e);return function(t){return r.map((function(e){return[t,e]}))}}function gd(t,e,n){var r=Lt(t,e-Ec,n).concat(e);return function(t){return r.map((function(e){return[e,t]}))}}function yd(){var t,e,n,r,i,o,a,s,u,l,c,f,h=10,d=h,p=90,m=360,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return Lt(zc(r/p)*p,n,p).map(c).concat(Lt(zc(s/m)*m,a,m).map(f)).concat(Lt(zc(e/h)*h,t,h).filter((function(t){return Ic(t%p)>Ec})).map(u)).concat(Lt(zc(o/d)*d,i,d).filter((function(t){return Ic(t%m)>Ec})).map(l))}return y.lines=function(){return v().map((function(t){return{type:"LineString",coordinates:t}}))},y.outline=function(){return{type:"Polygon",coordinates:[c(r).concat(f(a).slice(1),c(n).reverse().slice(1),f(s).reverse().slice(1))]}},y.extent=function(t){return arguments.length?y.extentMajor(t).extentMinor(t):y.extentMinor()},y.extentMajor=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],s=+t[0][1],a=+t[1][1],r>n&&(t=r,r=n,n=t),s>a&&(t=s,s=a,a=t),y.precision(g)):[[r,s],[n,a]]},y.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],o=+n[0][1],i=+n[1][1],e>t&&(n=e,e=t,t=n),o>i&&(n=o,o=i,i=n),y.precision(g)):[[e,o],[t,i]]},y.step=function(t){return arguments.length?y.stepMajor(t).stepMinor(t):y.stepMinor()},y.stepMajor=function(t){return arguments.length?(p=+t[0],m=+t[1],y):[p,m]},y.stepMinor=function(t){return arguments.length?(h=+t[0],d=+t[1],y):[h,d]},y.precision=function(h){return arguments.length?(g=+h,u=md(o,i,90),l=gd(e,t,g),c=md(s,a,90),f=gd(r,n,g),y):g},y.extentMajor([[-180,-90+Ec],[180,90-Ec]]).extentMinor([[-180,-80-Ec],[180,80+Ec]])}function vd(){return yd()()}function xd(t,e){var n=t[0]*Lc,r=t[1]*Lc,i=e[0]*Lc,o=e[1]*Lc,a=Fc(r),s=Gc(r),u=Fc(o),l=Gc(o),c=a*Fc(n),f=a*Gc(n),h=u*Fc(i),d=u*Gc(i),p=2*Kc(Hc(Qc(o-r)+a*u*Qc(i-n))),m=Gc(p),g=p?function(t){var e=Gc(t*=p)/m,n=Gc(p-t)/m,r=n*c+e*h,i=n*f+e*d,o=n*s+e*l;return[Nc(i,r)*Rc,Nc(o,Hc(r*r+i*i))*Rc]}:function(){return[n*Rc,r*Rc]};return g.distance=p,g}var _d,bd,wd,Md,Ad=t=>t,Td=new S,Ed=new S,Cd={point:Yc,lineStart:Yc,lineEnd:Yc,polygonStart:function(){Cd.lineStart=kd,Cd.lineEnd=Od},polygonEnd:function(){Cd.lineStart=Cd.lineEnd=Cd.point=Yc,Td.add(Ic(Ed)),Ed=new S},result:function(){var t=Td/2;return Td=new S,t}};function kd(){Cd.point=Sd}function Sd(t,e){Cd.point=Pd,_d=wd=t,bd=Md=e}function Pd(t,e){Ed.add(Md*t-wd*e),wd=t,Md=e}function Od(){Pd(_d,bd)}var Rd=Cd,Ld=1/0,Id=Ld,Dd=-Ld,Nd=Dd,Fd={point:function(t,e){t<Ld&&(Ld=t);t>Dd&&(Dd=t);e<Id&&(Id=e);e>Nd&&(Nd=e)},lineStart:Yc,lineEnd:Yc,polygonStart:Yc,polygonEnd:Yc,result:function(){var t=[[Ld,Id],[Dd,Nd]];return Dd=Nd=-(Id=Ld=1/0),t}};var zd,Bd,jd,Vd,qd=Fd,Gd=0,Ud=0,Hd=0,Wd=0,Xd=0,Kd=0,Qd=0,Yd=0,$d=0,Zd={point:Jd,lineStart:tp,lineEnd:rp,polygonStart:function(){Zd.lineStart=ip,Zd.lineEnd=op},polygonEnd:function(){Zd.point=Jd,Zd.lineStart=tp,Zd.lineEnd=rp},result:function(){var t=$d?[Qd/$d,Yd/$d]:Kd?[Wd/Kd,Xd/Kd]:Hd?[Gd/Hd,Ud/Hd]:[NaN,NaN];return Gd=Ud=Hd=Wd=Xd=Kd=Qd=Yd=$d=0,t}};function Jd(t,e){Gd+=t,Ud+=e,++Hd}function tp(){Zd.point=ep}function ep(t,e){Zd.point=np,Jd(jd=t,Vd=e)}function np(t,e){var n=t-jd,r=e-Vd,i=Hc(n*n+r*r);Wd+=i*(jd+t)/2,Xd+=i*(Vd+e)/2,Kd+=i,Jd(jd=t,Vd=e)}function rp(){Zd.point=Jd}function ip(){Zd.point=ap}function op(){sp(zd,Bd)}function ap(t,e){Zd.point=sp,Jd(zd=jd=t,Bd=Vd=e)}function sp(t,e){var n=t-jd,r=e-Vd,i=Hc(n*n+r*r);Wd+=i*(jd+t)/2,Xd+=i*(Vd+e)/2,Kd+=i,Qd+=(i=Vd*t-jd*e)*(jd+t),Yd+=i*(Vd+e),$d+=3*i,Jd(jd=t,Vd=e)}var up=Zd;function lp(t){this._context=t}lp.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Oc)}},result:Yc};var cp,fp,hp,dp,pp,mp=new S,gp={point:Yc,lineStart:function(){gp.point=yp},lineEnd:function(){cp&&vp(fp,hp),gp.point=Yc},polygonStart:function(){cp=!0},polygonEnd:function(){cp=null},result:function(){var t=+mp;return mp=new S,t}};function yp(t,e){gp.point=vp,fp=dp=t,hp=pp=e}function vp(t,e){dp-=t,pp-=e,mp.add(Hc(dp*dp+pp*pp)),dp=t,pp=e}var xp=gp;let _p,bp,wp,Mp;class Ap{constructor(t){this._append=null==t?Tp:function(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return Tp;if(e!==_p){const t=10**e;_p=e,bp=function(e){let n=1;this._+=e[0];for(const r=e.length;n<r;++n)this._+=Math.round(arguments[n]*t)/t+e[n]}}return bp}(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){0===this._line&&(this._+="Z"),this._point=NaN}point(t,e){switch(this._point){case 0:this._append`M${t},${e}`,this._point=1;break;case 1:this._append`L${t},${e}`;break;default:if(this._append`M${t},${e}`,this._radius!==wp||this._append!==bp){const t=this._radius,e=this._;this._="",this._append`m0,${t}a${t},${t} 0 1,1 0,${-2*t}a${t},${t} 0 1,1 0,${2*t}z`,wp=t,bp=this._append,Mp=this._,this._=e}this._+=Mp}}result(){const t=this._;return this._="",t.length?t:null}}function Tp(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Ep(t,e){let n,r,i=3,o=4.5;function a(t){return t&&("function"==typeof o&&r.pointRadius(+o.apply(this,arguments)),nf(t,n(r))),r.result()}return a.area=function(t){return nf(t,n(Rd)),Rd.result()},a.measure=function(t){return nf(t,n(xp)),xp.result()},a.bounds=function(t){return nf(t,n(qd)),qd.result()},a.centroid=function(t){return nf(t,n(up)),up.result()},a.projection=function(e){return arguments.length?(n=null==e?(t=null,Ad):(t=e).stream,a):t},a.context=function(t){return arguments.length?(r=null==t?(e=null,new Ap(i)):new lp(e=t),"function"!=typeof o&&r.pointRadius(o),a):e},a.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(r.pointRadius(+t),+t),a):o},a.digits=function(t){if(!arguments.length)return i;if(null==t)i=null;else{const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);i=e}return null===e&&(r=new Ap(i)),a},a.projection(t).digits(i).context(e)}function Cp(t){return{stream:kp(t)}}function kp(t){return function(e){var n=new Sp;for(var r in t)n[r]=t[r];return n.stream=e,n}}function Sp(){}function Pp(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),nf(n,t.stream(qd)),e(qd.result()),null!=r&&t.clipExtent(r),t}function Op(t,e,n){return Pp(t,(function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),a=+e[0][0]+(r-o*(n[1][0]+n[0][0]))/2,s=+e[0][1]+(i-o*(n[1][1]+n[0][1]))/2;t.scale(150*o).translate([a,s])}),n)}function Rp(t,e,n){return Op(t,[[0,0],e],n)}function Lp(t,e,n){return Pp(t,(function(n){var r=+e,i=r/(n[1][0]-n[0][0]),o=(r-i*(n[1][0]+n[0][0]))/2,a=-i*n[0][1];t.scale(150*i).translate([o,a])}),n)}function Ip(t,e,n){return Pp(t,(function(n){var r=+e,i=r/(n[1][1]-n[0][1]),o=-i*n[0][0],a=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([o,a])}),n)}Sp.prototype={constructor:Sp,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Dp=16,Np=Fc(30*Lc);function Fp(t,e){return+e?function(t,e){function n(r,i,o,a,s,u,l,c,f,h,d,p,m,g){var y=l-r,v=c-i,x=y*y+v*v;if(x>4*e&&m--){var _=a+h,b=s+d,w=u+p,M=Hc(_*_+b*b+w*w),A=Kc(w/=M),T=Ic(Ic(w)-1)<Ec||Ic(o-f)<Ec?(o+f)/2:Nc(b,_),E=t(T,A),C=E[0],k=E[1],S=C-r,P=k-i,O=v*S-y*P;(O*O/x>e||Ic((y*S+v*P)/x-.5)>.3||a*h+s*d+u*p<Np)&&(n(r,i,o,a,s,u,C,k,T,_/=M,b/=M,w,m,g),g.point(C,k),n(C,k,T,_,b,w,l,c,f,h,d,p,m,g))}}return function(e){var r,i,o,a,s,u,l,c,f,h,d,p,m={point:g,lineStart:y,lineEnd:x,polygonStart:function(){e.polygonStart(),m.lineStart=_},polygonEnd:function(){e.polygonEnd(),m.lineStart=y}};function g(n,r){n=t(n,r),e.point(n[0],n[1])}function y(){c=NaN,m.point=v,e.lineStart()}function v(r,i){var o=Sf([r,i]),a=t(r,i);n(c,f,l,h,d,p,c=a[0],f=a[1],l=r,h=o[0],d=o[1],p=o[2],Dp,e),e.point(c,f)}function x(){m.point=g,e.lineEnd()}function _(){y(),m.point=b,m.lineEnd=w}function b(t,e){v(r=t,e),i=c,o=f,a=h,s=d,u=p,m.point=v}function w(){n(c,f,l,h,d,p,i,o,r,a,s,u,Dp,e),m.lineEnd=x,x()}return m}}(t,e):function(t){return kp({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var zp=kp({point:function(t,e){this.stream.point(t*Lc,e*Lc)}});function Bp(t,e,n,r,i,o){if(!o)return function(t,e,n,r,i){function o(o,a){return[e+t*(o*=r),n-t*(a*=i)]}return o.invert=function(o,a){return[(o-e)/t*r,(n-a)/t*i]},o}(t,e,n,r,i);var a=Fc(o),s=Gc(o),u=a*t,l=s*t,c=a/t,f=s/t,h=(s*n-a*e)/t,d=(s*e+a*n)/t;function p(t,o){return[u*(t*=r)-l*(o*=i)+e,n-l*t-u*o]}return p.invert=function(t,e){return[r*(c*t-f*e+h),i*(d-f*t-c*e)]},p}function jp(t){return Vp((function(){return t}))()}function Vp(t){var e,n,r,i,o,a,s,u,l,c,f=150,h=480,d=250,p=0,m=0,g=0,y=0,v=0,x=0,_=1,b=1,w=null,M=qh,A=null,T=Ad,E=.5;function C(t){return u(t[0]*Lc,t[1]*Lc)}function k(t){return(t=u.invert(t[0],t[1]))&&[t[0]*Rc,t[1]*Rc]}function S(){var t=Bp(f,0,0,_,b,x).apply(null,e(p,m)),r=Bp(f,h-t[0],d-t[1],_,b,x);return n=Ah(g,y,v),s=wh(e,r),u=wh(n,s),a=Fp(s,E),P()}function P(){return l=c=null,C}return C.stream=function(t){return l&&c===t?l:l=zp(function(t){return kp({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}(n)(M(a(T(c=t)))))},C.preclip=function(t){return arguments.length?(M=t,w=void 0,P()):M},C.postclip=function(t){return arguments.length?(T=t,A=r=i=o=null,P()):T},C.clipAngle=function(t){return arguments.length?(M=+t?Gh(w=t*Lc):(w=null,qh),P()):w*Rc},C.clipExtent=function(t){return arguments.length?(T=null==t?(A=r=i=o=null,Ad):Yh(A=+t[0][0],r=+t[0][1],i=+t[1][0],o=+t[1][1]),P()):null==A?null:[[A,r],[i,o]]},C.scale=function(t){return arguments.length?(f=+t,S()):f},C.translate=function(t){return arguments.length?(h=+t[0],d=+t[1],S()):[h,d]},C.center=function(t){return arguments.length?(p=t[0]%360*Lc,m=t[1]%360*Lc,S()):[p*Rc,m*Rc]},C.rotate=function(t){return arguments.length?(g=t[0]%360*Lc,y=t[1]%360*Lc,v=t.length>2?t[2]%360*Lc:0,S()):[g*Rc,y*Rc,v*Rc]},C.angle=function(t){return arguments.length?(x=t%360*Lc,S()):x*Rc},C.reflectX=function(t){return arguments.length?(_=t?-1:1,S()):_<0},C.reflectY=function(t){return arguments.length?(b=t?-1:1,S()):b<0},C.precision=function(t){return arguments.length?(a=Fp(s,E=t*t),P()):Hc(E)},C.fitExtent=function(t,e){return Op(C,t,e)},C.fitSize=function(t,e){return Rp(C,t,e)},C.fitWidth=function(t,e){return Lp(C,t,e)},C.fitHeight=function(t,e){return Ip(C,t,e)},function(){return e=t.apply(this,arguments),C.invert=e.invert&&k,S()}}function qp(t){var e=0,n=kc/3,r=Vp(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*Lc,n=t[1]*Lc):[e*Rc,n*Rc]},i}function Gp(t,e){var n=Gc(t),r=(n+Gc(e))/2;if(Ic(r)<Ec)return function(t){var e=Fc(t);function n(t,n){return[t*e,Gc(n)/e]}return n.invert=function(t,n){return[t/e,Kc(n*e)]},n}(t);var i=1+n*(2*r-n),o=Hc(i)/r;function a(t,e){var n=Hc(i-2*r*Gc(e))/r;return[n*Gc(t*=r),o-n*Fc(t)]}return a.invert=function(t,e){var n=o-e,a=Nc(t,Ic(n))*Uc(n);return n*r<0&&(a-=kc*Uc(t)*Uc(n)),[a/r,Kc((i-(t*t+n*n)*r*r)/(2*r))]},a}function Up(){return qp(Gp).scale(155.424).center([0,33.6442])}function Hp(){return Up().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Wp(){var t,e,n,r,i,o,a=Hp(),s=Up().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=Up().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,e){o=[t,e]}};function c(t){var e=t[0],a=t[1];return o=null,n.point(e,a),o||(r.point(e,a),o)||(i.point(e,a),o)}function f(){return t=e=null,c}return c.invert=function(t){var e=a.scale(),n=a.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?u:a).invert(t)},c.stream=function(n){return t&&e===n?t:(r=[a.stream(e=n),s.stream(n),u.stream(n)],i=r.length,t={point:function(t,e){for(var n=-1;++n<i;)r[n].point(t,e)},sphere:function(){for(var t=-1;++t<i;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<i;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<i;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<i;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<i;)r[t].polygonEnd()}});var r,i},c.precision=function(t){return arguments.length?(a.precision(t),s.precision(t),u.precision(t),f()):a.precision()},c.scale=function(t){return arguments.length?(a.scale(t),s.scale(.35*t),u.scale(t),c.translate(a.translate())):a.scale()},c.translate=function(t){if(!arguments.length)return a.translate();var e=a.scale(),o=+t[0],c=+t[1];return n=a.translate(t).clipExtent([[o-.455*e,c-.238*e],[o+.455*e,c+.238*e]]).stream(l),r=s.translate([o-.307*e,c+.201*e]).clipExtent([[o-.425*e+Ec,c+.12*e+Ec],[o-.214*e-Ec,c+.234*e-Ec]]).stream(l),i=u.translate([o-.205*e,c+.212*e]).clipExtent([[o-.214*e+Ec,c+.166*e+Ec],[o-.115*e-Ec,c+.234*e-Ec]]).stream(l),f()},c.fitExtent=function(t,e){return Op(c,t,e)},c.fitSize=function(t,e){return Rp(c,t,e)},c.fitWidth=function(t,e){return Lp(c,t,e)},c.fitHeight=function(t,e){return Ip(c,t,e)},c.scale(1070)}function Xp(t){return function(e,n){var r=Fc(e),i=Fc(n),o=t(r*i);return o===1/0?[2,0]:[o*i*Gc(e),o*Gc(n)]}}function Kp(t){return function(e,n){var r=Hc(e*e+n*n),i=t(r),o=Gc(i),a=Fc(i);return[Nc(e*o,r*a),Kc(r&&n*o/r)]}}var Qp=Xp((function(t){return Hc(2/(1+t))}));function Yp(){return jp(Qp).scale(124.75).clipAngle(179.999)}Qp.invert=Kp((function(t){return 2*Kc(t/2)}));var $p=Xp((function(t){return(t=Xc(t))&&t/Gc(t)}));function Zp(){return jp($p).scale(79.4188).clipAngle(179.999)}function Jp(t,e){return[t,Vc(Wc((Sc+e)/2))]}function tm(){return em(Jp).scale(961/Oc)}function em(t){var e,n,r,i=jp(t),o=i.center,a=i.scale,s=i.translate,u=i.clipExtent,l=null;function c(){var o=kc*a(),s=i(kh(i.rotate()).invert([0,0]));return u(null==l?[[s[0]-o,s[1]-o],[s[0]+o,s[1]+o]]:t===Jp?[[Math.max(s[0]-o,l),e],[Math.min(s[0]+o,n),r]]:[[l,Math.max(s[1]-o,e)],[n,Math.min(s[1]+o,r)]])}return i.scale=function(t){return arguments.length?(a(t),c()):a()},i.translate=function(t){return arguments.length?(s(t),c()):s()},i.center=function(t){return arguments.length?(o(t),c()):o()},i.clipExtent=function(t){return arguments.length?(null==t?l=e=n=r=null:(l=+t[0][0],e=+t[0][1],n=+t[1][0],r=+t[1][1]),c()):null==l?null:[[l,e],[n,r]]},c()}function nm(t){return Wc((Sc+t)/2)}function rm(t,e){var n=Fc(t),r=t===e?Gc(t):Vc(n/Fc(e))/Vc(nm(e)/nm(t)),i=n*qc(nm(t),r)/r;if(!r)return Jp;function o(t,e){i>0?e<-Sc+Ec&&(e=-Sc+Ec):e>Sc-Ec&&(e=Sc-Ec);var n=i/qc(nm(e),r);return[n*Gc(r*t),i-n*Fc(r*t)]}return o.invert=function(t,e){var n=i-e,o=Uc(r)*Hc(t*t+n*n),a=Nc(t,Ic(n))*Uc(n);return n*r<0&&(a-=kc*Uc(t)*Uc(n)),[a/r,2*Dc(qc(i/o,1/r))-Sc]},o}function im(){return qp(rm).scale(109.5).parallels([30,30])}function om(t,e){return[t,e]}function am(){return jp(om).scale(152.63)}function sm(t,e){var n=Fc(t),r=t===e?Gc(t):(n-Fc(e))/(e-t),i=n/r+t;if(Ic(r)<Ec)return om;function o(t,e){var n=i-e,o=r*t;return[n*Gc(o),i-n*Fc(o)]}return o.invert=function(t,e){var n=i-e,o=Nc(t,Ic(n))*Uc(n);return n*r<0&&(o-=kc*Uc(t)*Uc(n)),[o/r,i-Uc(r)*Hc(t*t+n*n)]},o}function um(){return qp(sm).scale(131.154).center([0,13.9389])}$p.invert=Kp((function(t){return t})),Jp.invert=function(t,e){return[t,2*Dc(Bc(e))-Sc]},om.invert=om;var lm=1.340264,cm=-.081106,fm=893e-6,hm=.003796,dm=Hc(3)/2;function pm(t,e){var n=Kc(dm*Gc(e)),r=n*n,i=r*r*r;return[t*Fc(n)/(dm*(lm+3*cm*r+i*(7*fm+9*hm*r))),n*(lm+cm*r+i*(fm+hm*r))]}function mm(){return jp(pm).scale(177.158)}function gm(t,e){var n=Fc(e),r=Fc(t)*n;return[n*Gc(t)/r,Gc(e)/r]}function ym(){return jp(gm).scale(144.049).clipAngle(60)}function vm(){var t,e,n,r,i,o,a,s=1,u=0,l=0,c=1,f=1,h=0,d=null,p=1,m=1,g=kp({point:function(t,e){var n=x([t,e]);this.stream.point(n[0],n[1])}}),y=Ad;function v(){return p=s*c,m=s*f,o=a=null,x}function x(n){var r=n[0]*p,i=n[1]*m;if(h){var o=i*t-r*e;r=r*t+i*e,i=o}return[r+u,i+l]}return x.invert=function(n){var r=n[0]-u,i=n[1]-l;if(h){var o=i*t+r*e;r=r*t-i*e,i=o}return[r/p,i/m]},x.stream=function(t){return o&&a===t?o:o=g(y(a=t))},x.postclip=function(t){return arguments.length?(y=t,d=n=r=i=null,v()):y},x.clipExtent=function(t){return arguments.length?(y=null==t?(d=n=r=i=null,Ad):Yh(d=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),v()):null==d?null:[[d,n],[r,i]]},x.scale=function(t){return arguments.length?(s=+t,v()):s},x.translate=function(t){return arguments.length?(u=+t[0],l=+t[1],v()):[u,l]},x.angle=function(n){return arguments.length?(e=Gc(h=n%360*Lc),t=Fc(h),v()):h*Rc},x.reflectX=function(t){return arguments.length?(c=t?-1:1,v()):c<0},x.reflectY=function(t){return arguments.length?(f=t?-1:1,v()):f<0},x.fitExtent=function(t,e){return Op(x,t,e)},x.fitSize=function(t,e){return Rp(x,t,e)},x.fitWidth=function(t,e){return Lp(x,t,e)},x.fitHeight=function(t,e){return Ip(x,t,e)},x}function xm(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function _m(){return jp(xm).scale(175.295)}function bm(t,e){return[Fc(e)*Gc(t),Gc(e)]}function wm(){return jp(bm).scale(249.5).clipAngle(90+Ec)}function Mm(t,e){var n=Fc(e),r=1+Fc(t)*n;return[n*Gc(t)/r,Gc(e)/r]}function Am(){return jp(Mm).scale(250).clipAngle(142)}function Tm(t,e){return[Vc(Wc((Sc+e)/2)),-t]}function Em(){var t=em(Tm),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)}function Cm(t,e){return t.parent===e.parent?1:2}function km(t,e){return t+e.x}function Sm(t,e){return Math.max(t,e.y)}function Pm(){var t=Cm,e=1,n=1,r=!1;function i(i){var o,a=0;i.eachAfter((function(e){var n=e.children;n?(e.x=function(t){return t.reduce(km,0)/t.length}(n),e.y=function(t){return 1+t.reduce(Sm,0)}(n)):(e.x=o?a+=t(e,o):0,e.y=0,o=e)}));var s=function(t){for(var e;e=t.children;)t=e[0];return t}(i),u=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(i),l=s.x-t(s,u)/2,c=u.x+t(u,s)/2;return i.eachAfter(r?function(t){t.x=(t.x-i.x)*e,t.y=(i.y-t.y)*n}:function(t){t.x=(t.x-l)/(c-l)*e,t.y=(1-(i.y?t.y/i.y:1))*n})}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i}function Om(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function Rm(t,e){t instanceof Map?(t=[void 0,t],void 0===e&&(e=Im)):void 0===e&&(e=Lm);for(var n,r,i,o,a,s=new Fm(t),u=[s];n=u.pop();)if((i=e(n.data))&&(a=(i=Array.from(i)).length))for(n.children=i,o=a-1;o>=0;--o)u.push(r=i[o]=new Fm(i[o])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(Nm)}function Lm(t){return t.children}function Im(t){return Array.isArray(t)?t[1]:null}function Dm(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function Nm(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function Fm(t){this.data=t,this.depth=this.height=0,this.parent=null}function zm(t){return null==t?null:Bm(t)}function Bm(t){if("function"!=typeof t)throw new Error;return t}function jm(){return 0}function Vm(t){return function(){return t}}pm.invert=function(t,e){for(var n,r=e,i=r*r,o=i*i*i,a=0;a<12&&(o=(i=(r-=n=(r*(lm+cm*i+o*(fm+hm*i))-e)/(lm+3*cm*i+o*(7*fm+9*hm*i)))*r)*i*i,!(Ic(n)<Cc));++a);return[dm*t*(lm+3*cm*i+o*(7*fm+9*hm*i))/Fc(r),Kc(Gc(r)/dm)]},gm.invert=Kp(Dc),xm.invert=function(t,e){var n,r=e,i=25;do{var o=r*r,a=o*o;r-=n=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-e)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(Ic(n)>Ec&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]},bm.invert=Kp(Kc),Mm.invert=Kp((function(t){return 2*Dc(t)})),Tm.invert=function(t,e){return[-e,2*Dc(Bc(t))-Sc]},Fm.prototype=Rm.prototype={constructor:Fm,count:function(){return this.eachAfter(Om)},each:function(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this},eachAfter:function(t,e){for(var n,r,i,o=this,a=[o],s=[],u=-1;o=a.pop();)if(s.push(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r]);for(;o=s.pop();)t.call(e,o,++u,this);return this},eachBefore:function(t,e){for(var n,r,i=this,o=[i],a=-1;i=o.pop();)if(t.call(e,i,++a,this),n=i.children)for(r=n.length-1;r>=0;--r)o.push(n[r]);return this},find:function(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r},sum:function(t){return this.eachAfter((function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n}))},sort:function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;t=n.pop(),e=r.pop();for(;t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){return Array.from(this)},leaves:function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},links:function(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e},copy:function(){return Rm(this).eachBefore(Dm)},[Symbol.iterator]:function*(){var t,e,n,r,i=this,o=[i];do{for(t=o.reverse(),o=[];i=t.pop();)if(yield i,e=i.children)for(n=0,r=e.length;n<r;++n)o.push(e[n])}while(o.length)}};const qm=1664525,Gm=1013904223,Um=4294967296;function Hm(){let t=1;return()=>(t=(qm*t+Gm)%Um)/Um}function Wm(t){return Xm(t,Hm())}function Xm(t,e){for(var n,r,i=0,o=(t=function(t,e){let n,r,i=t.length;for(;i;)r=e()*i--|0,n=t[i],t[i]=t[r],t[r]=n;return t}(Array.from(t),e)).length,a=[];i<o;)n=t[i],r&&Ym(r,n)?++i:(r=Zm(a=Km(a,n)),i=0);return r}function Km(t,e){var n,r;if($m(e,t))return[e];for(n=0;n<t.length;++n)if(Qm(e,t[n])&&$m(Jm(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(Qm(Jm(t[n],t[r]),e)&&Qm(Jm(t[n],e),t[r])&&Qm(Jm(t[r],e),t[n])&&$m(tg(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function Qm(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function Ym(t,e){var n=t.r-e.r+1e-9*Math.max(t.r,e.r,1),r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function $m(t,e){for(var n=0;n<e.length;++n)if(!Ym(t,e[n]))return!1;return!0}function Zm(t){switch(t.length){case 1:return function(t){return{x:t.x,y:t.y,r:t.r}}(t[0]);case 2:return Jm(t[0],t[1]);case 3:return tg(t[0],t[1],t[2])}}function Jm(t,e){var n=t.x,r=t.y,i=t.r,o=e.x,a=e.y,s=e.r,u=o-n,l=a-r,c=s-i,f=Math.sqrt(u*u+l*l);return{x:(n+o+u/f*c)/2,y:(r+a+l/f*c)/2,r:(f+i+s)/2}}function tg(t,e,n){var r=t.x,i=t.y,o=t.r,a=e.x,s=e.y,u=e.r,l=n.x,c=n.y,f=n.r,h=r-a,d=r-l,p=i-s,m=i-c,g=u-o,y=f-o,v=r*r+i*i-o*o,x=v-a*a-s*s+u*u,_=v-l*l-c*c+f*f,b=d*p-h*m,w=(p*_-m*x)/(2*b)-r,M=(m*g-p*y)/b,A=(d*x-h*_)/(2*b)-i,T=(h*y-d*g)/b,E=M*M+T*T-1,C=2*(o+w*M+A*T),k=w*w+A*A-o*o,S=-(Math.abs(E)>1e-6?(C+Math.sqrt(C*C-4*E*k))/(2*E):k/C);return{x:r+w+M*S,y:i+A+T*S,r:S}}function eg(t,e,n){var r,i,o,a,s=t.x-e.x,u=t.y-e.y,l=s*s+u*u;l?(i=e.r+n.r,i*=i,a=t.r+n.r,i>(a*=a)?(r=(l+a-i)/(2*l),o=Math.sqrt(Math.max(0,a/l-r*r)),n.x=t.x-r*s-o*u,n.y=t.y-r*u+o*s):(r=(l+i-a)/(2*l),o=Math.sqrt(Math.max(0,i/l-r*r)),n.x=e.x+r*s-o*u,n.y=e.y+r*u+o*s)):(n.x=e.x+n.r,n.y=e.y)}function ng(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function rg(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,o=(e.y*n.r+n.y*e.r)/r;return i*i+o*o}function ig(t){this._=t,this.next=null,this.previous=null}function og(t,e){if(!(o=(t=function(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(t)).length))return 0;var n,r,i,o,a,s,u,l,c,f,h;if((n=t[0]).x=0,n.y=0,!(o>1))return n.r;if(r=t[1],n.x=-r.r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;eg(r,n,i=t[2]),n=new ig(n),r=new ig(r),i=new ig(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;t:for(u=3;u<o;++u){eg(n._,r._,i=t[u]),i=new ig(i),l=r.next,c=n.previous,f=r._.r,h=n._.r;do{if(f<=h){if(ng(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue t}f+=l._.r,l=l.next}else{if(ng(c._,i._)){(n=c).next=r,r.previous=n,--u;continue t}h+=c._.r,c=c.previous}}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,a=rg(n);(i=i.next)!==r;)(s=rg(i))<a&&(n=i,a=s);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=Xm(n,e),u=0;u<o;++u)(n=t[u]).x-=i.x,n.y-=i.y;return i.r}function ag(t){return og(t,Hm()),t}function sg(t){return Math.sqrt(t.value)}function ug(){var t=null,e=1,n=1,r=jm;function i(i){const o=Hm();return i.x=e/2,i.y=n/2,t?i.eachBefore(lg(t)).eachAfter(cg(r,.5,o)).eachBefore(fg(1)):i.eachBefore(lg(sg)).eachAfter(cg(jm,1,o)).eachAfter(cg(r,i.r/Math.min(e,n),o)).eachBefore(fg(Math.min(e,n)/(2*i.r))),i}return i.radius=function(e){return arguments.length?(t=zm(e),i):t},i.size=function(t){return arguments.length?(e=+t[0],n=+t[1],i):[e,n]},i.padding=function(t){return arguments.length?(r="function"==typeof t?t:Vm(+t),i):r},i}function lg(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function cg(t,e,n){return function(r){if(i=r.children){var i,o,a,s=i.length,u=t(r)*e||0;if(u)for(o=0;o<s;++o)i[o].r+=u;if(a=og(i,n),u)for(o=0;o<s;++o)i[o].r-=u;r.r=a+u}}}function fg(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function hg(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function dg(t,e,n,r,i){for(var o,a=t.children,s=-1,u=a.length,l=t.value&&(r-e)/t.value;++s<u;)(o=a[s]).y0=n,o.y1=i,o.x0=e,o.x1=e+=o.value*l}function pg(){var t=1,e=1,n=0,r=!1;function i(i){var o=i.height+1;return i.x0=i.y0=n,i.x1=t,i.y1=e/o,i.eachBefore(function(t,e){return function(r){r.children&&dg(r,r.x0,t*(r.depth+1)/e,r.x1,t*(r.depth+2)/e);var i=r.x0,o=r.y0,a=r.x1-n,s=r.y1-n;a<i&&(i=a=(i+a)/2),s<o&&(o=s=(o+s)/2),r.x0=i,r.y0=o,r.x1=a,r.y1=s}}(e,o)),r&&i.eachBefore(hg),i}return i.round=function(t){return arguments.length?(r=!!t,i):r},i.size=function(n){return arguments.length?(t=+n[0],e=+n[1],i):[t,e]},i.padding=function(t){return arguments.length?(n=+t,i):n},i}var mg={depth:-1},gg={},yg={};function vg(t){return t.id}function xg(t){return t.parentId}function _g(){var t,e=vg,n=xg;function r(r){var i,o,a,s,u,l,c,f,h=Array.from(r),d=e,p=n,m=new Map;if(null!=t){const e=h.map(((e,n)=>function(t){t=`${t}`;let e=t.length;wg(t,e-1)&&!wg(t,e-2)&&(t=t.slice(0,-1));return"/"===t[0]?t:`/${t}`}(t(e,n,r)))),n=e.map(bg),i=new Set(e).add("");for(const t of n)i.has(t)||(i.add(t),e.push(t),n.push(bg(t)),h.push(yg));d=(t,n)=>e[n],p=(t,e)=>n[e]}for(a=0,i=h.length;a<i;++a)o=h[a],l=h[a]=new Fm(o),null!=(c=d(o,a,r))&&(c+="")&&(f=l.id=c,m.set(f,m.has(f)?gg:l)),null!=(c=p(o,a,r))&&(c+="")&&(l.parent=c);for(a=0;a<i;++a)if(c=(l=h[a]).parent){if(!(u=m.get(c)))throw new Error("missing: "+c);if(u===gg)throw new Error("ambiguous: "+c);u.children?u.children.push(l):u.children=[l],l.parent=u}else{if(s)throw new Error("multiple roots");s=l}if(!s)throw new Error("no root");if(null!=t){for(;s.data===yg&&1===s.children.length;)s=s.children[0],--i;for(let t=h.length-1;t>=0&&(l=h[t]).data===yg;--t)l.data=null}if(s.parent=mg,s.eachBefore((function(t){t.depth=t.parent.depth+1,--i})).eachBefore(Nm),s.parent=null,i>0)throw new Error("cycle");return s}return r.id=function(t){return arguments.length?(e=zm(t),r):e},r.parentId=function(t){return arguments.length?(n=zm(t),r):n},r.path=function(e){return arguments.length?(t=zm(e),r):t},r}function bg(t){let e=t.length;if(e<2)return"";for(;--e>1&&!wg(t,e););return t.slice(0,e)}function wg(t,e){if("/"===t[e]){let n=0;for(;e>0&&"\\"===t[--e];)++n;if(!(1&n))return!0}return!1}function Mg(t,e){return t.parent===e.parent?1:2}function Ag(t){var e=t.children;return e?e[0]:t.t}function Tg(t){var e=t.children;return e?e[e.length-1]:t.t}function Eg(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function Cg(t,e,n){return t.a.parent===e.parent?t.a:n}function kg(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function Sg(){var t=Mg,e=1,n=1,r=null;function i(i){var u=function(t){for(var e,n,r,i,o,a=new kg(t,0),s=[a];e=s.pop();)if(r=e._.children)for(e.children=new Array(o=r.length),i=o-1;i>=0;--i)s.push(n=e.children[i]=new kg(r[i],i)),n.parent=e;return(a.parent=new kg(null,0)).children=[a],a}(i);if(u.eachAfter(o),u.parent.m=-u.z,u.eachBefore(a),r)i.eachBefore(s);else{var l=i,c=i,f=i;i.eachBefore((function(t){t.x<l.x&&(l=t),t.x>c.x&&(c=t),t.depth>f.depth&&(f=t)}));var h=l===c?1:t(l,c)/2,d=h-l.x,p=e/(c.x+h+d),m=n/(f.depth||1);i.eachBefore((function(t){t.x=(t.x+d)*p,t.y=t.depth*m}))}return i}function o(e){var n=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(n){!function(t){for(var e,n=0,r=0,i=t.children,o=i.length;--o>=0;)(e=i[o]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(e);var o=(n[0].z+n[n.length-1].z)/2;i?(e.z=i.z+t(e._,i._),e.m=e.z-o):e.z=o}else i&&(e.z=i.z+t(e._,i._));e.parent.A=function(e,n,r){if(n){for(var i,o=e,a=e,s=n,u=o.parent.children[0],l=o.m,c=a.m,f=s.m,h=u.m;s=Tg(s),o=Ag(o),s&&o;)u=Ag(u),(a=Tg(a)).a=e,(i=s.z+f-o.z-l+t(s._,o._))>0&&(Eg(Cg(s,e,r),e,i),l+=i,c+=i),f+=s.m,l+=o.m,h+=u.m,c+=a.m;s&&!Tg(a)&&(a.t=s,a.m+=f-c),o&&!Ag(u)&&(u.t=o,u.m+=l-h,r=e)}return r}(e,i,e.parent.A||r[0])}function a(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function s(t){t.x*=e,t.y=t.depth*n}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i}function Pg(t,e,n,r,i){for(var o,a=t.children,s=-1,u=a.length,l=t.value&&(i-n)/t.value;++s<u;)(o=a[s]).x0=e,o.x1=r,o.y0=n,o.y1=n+=o.value*l}kg.prototype=Object.create(Fm.prototype);var Og=(1+Math.sqrt(5))/2;function Rg(t,e,n,r,i,o){for(var a,s,u,l,c,f,h,d,p,m,g,y=[],v=e.children,x=0,_=0,b=v.length,w=e.value;x<b;){u=i-n,l=o-r;do{c=v[_++].value}while(!c&&_<b);for(f=h=c,g=c*c*(m=Math.max(l/u,u/l)/(w*t)),p=Math.max(h/g,g/f);_<b;++_){if(c+=s=v[_].value,s<f&&(f=s),s>h&&(h=s),g=c*c*m,(d=Math.max(h/g,g/f))>p){c-=s;break}p=d}y.push(a={value:c,dice:u<l,children:v.slice(x,_)}),a.dice?dg(a,n,r,i,w?r+=l*c/w:o):Pg(a,n,r,w?n+=u*c/w:i,o),w-=c,x=_}return y}var Lg=function t(e){function n(t,n,r,i,o){Rg(e,t,n,r,i,o)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(Og);function Ig(){var t=Lg,e=!1,n=1,r=1,i=[0],o=jm,a=jm,s=jm,u=jm,l=jm;function c(t){return t.x0=t.y0=0,t.x1=n,t.y1=r,t.eachBefore(f),i=[0],e&&t.eachBefore(hg),t}function f(e){var n=i[e.depth],r=e.x0+n,c=e.y0+n,f=e.x1-n,h=e.y1-n;f<r&&(r=f=(r+f)/2),h<c&&(c=h=(c+h)/2),e.x0=r,e.y0=c,e.x1=f,e.y1=h,e.children&&(n=i[e.depth+1]=o(e)/2,r+=l(e)-n,c+=a(e)-n,(f-=s(e)-n)<r&&(r=f=(r+f)/2),(h-=u(e)-n)<c&&(c=h=(c+h)/2),t(e,r,c,f,h))}return c.round=function(t){return arguments.length?(e=!!t,c):e},c.size=function(t){return arguments.length?(n=+t[0],r=+t[1],c):[n,r]},c.tile=function(e){return arguments.length?(t=Bm(e),c):t},c.padding=function(t){return arguments.length?c.paddingInner(t).paddingOuter(t):c.paddingInner()},c.paddingInner=function(t){return arguments.length?(o="function"==typeof t?t:Vm(+t),c):o},c.paddingOuter=function(t){return arguments.length?c.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):c.paddingTop()},c.paddingTop=function(t){return arguments.length?(a="function"==typeof t?t:Vm(+t),c):a},c.paddingRight=function(t){return arguments.length?(s="function"==typeof t?t:Vm(+t),c):s},c.paddingBottom=function(t){return arguments.length?(u="function"==typeof t?t:Vm(+t),c):u},c.paddingLeft=function(t){return arguments.length?(l="function"==typeof t?t:Vm(+t),c):l},c}function Dg(t,e,n,r,i){var o,a,s=t.children,u=s.length,l=new Array(u+1);for(l[0]=a=o=0;o<u;++o)l[o+1]=a+=s[o].value;!function t(e,n,r,i,o,a,u){if(e>=n-1){var c=s[e];return c.x0=i,c.y0=o,c.x1=a,void(c.y1=u)}var f=l[e],h=r/2+f,d=e+1,p=n-1;for(;d<p;){var m=d+p>>>1;l[m]<h?d=m+1:p=m}h-l[d-1]<l[d]-h&&e+1<d&&--d;var g=l[d]-f,y=r-g;if(a-i>u-o){var v=r?(i*y+a*g)/r:a;t(e,d,g,i,o,v,u),t(d,n,y,v,o,a,u)}else{var x=r?(o*y+u*g)/r:u;t(e,d,g,i,o,a,x),t(d,n,y,i,x,a,u)}}(0,u,t.value,e,n,r,i)}function Ng(t,e,n,r,i){(1&t.depth?Pg:dg)(t,e,n,r,i)}var Fg=function t(e){function n(t,n,r,i,o){if((a=t._squarify)&&a.ratio===e)for(var a,s,u,l,c,f=-1,h=a.length,d=t.value;++f<h;){for(u=(s=a[f]).children,l=s.value=0,c=u.length;l<c;++l)s.value+=u[l].value;s.dice?dg(s,n,r,i,d?r+=(o-r)*s.value/d:o):Pg(s,n,r,d?n+=(i-n)*s.value/d:i,o),d-=s.value}else t._squarify=a=Rg(e,t,n,r,i,o),a.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(Og);function zg(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}function Bg(t,e){var n=Dr(+t,+e);return function(t){var e=n(t);return e-360*Math.floor(e/360)}}function jg(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Vg(t){return((t=Math.exp(t))+1/t)/2}var qg=function t(e,n,r){function i(t,i){var o,a,s=t[0],u=t[1],l=t[2],c=i[0],f=i[1],h=i[2],d=c-s,p=f-u,m=d*d+p*p;if(m<1e-12)a=Math.log(h/l)/e,o=function(t){return[s+t*d,u+t*p,l*Math.exp(e*t*a)]};else{var g=Math.sqrt(m),y=(h*h-l*l+r*m)/(2*l*n*g),v=(h*h-l*l-r*m)/(2*h*n*g),x=Math.log(Math.sqrt(y*y+1)-y),_=Math.log(Math.sqrt(v*v+1)-v);a=(_-x)/e,o=function(t){var r=t*a,i=Vg(x),o=l/(n*g)*(i*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(e*r+x)-function(t){return((t=Math.exp(t))-1/t)/2}(x));return[s+o*d,u+o*p,l*i/Vg(e*r+x)]}}return o.duration=1e3*a*e/Math.SQRT2,o}return i.rho=function(e){var n=Math.max(.001,+e),r=n*n;return t(n,r,r*r)},i}(Math.SQRT2,2,4);function Gg(t){return function(e,n){var r=t((e=Tr(e)).h,(n=Tr(n)).h),i=Fr(e.s,n.s),o=Fr(e.l,n.l),a=Fr(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=i(t),e.l=o(t),e.opacity=a(t),e+""}}}var Ug=Gg(Dr),Hg=Gg(Fr);function Wg(t,e){var n=Fr((t=Da(t)).l,(e=Da(e)).l),r=Fr(t.a,e.a),i=Fr(t.b,e.b),o=Fr(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=r(e),t.b=i(e),t.opacity=o(e),t+""}}function Xg(t){return function(e,n){var r=t((e=Ga(e)).h,(n=Ga(n)).h),i=Fr(e.c,n.c),o=Fr(e.l,n.l),a=Fr(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=o(t),e.opacity=a(t),e+""}}}var Kg=Xg(Dr),Qg=Xg(Fr);function Yg(t){return function e(n){function r(e,r){var i=t((e=ts(e)).h,(r=ts(r)).h),o=Fr(e.s,r.s),a=Fr(e.l,r.l),s=Fr(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=o(t),e.l=a(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,r.gamma=e,r}(1)}var $g=Yg(Dr),Zg=Yg(Fr);function Jg(t,e){void 0===e&&(e=t,t=Zr);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(t){var e=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return o[e](t-e)}}function ty(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n}function ey(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[1]*i[0]-e[0]*i[1];return o/2}function ny(t){for(var e,n,r=-1,i=t.length,o=0,a=0,s=t[i-1],u=0;++r<i;)e=s,s=t[r],u+=n=e[0]*s[1]-s[0]*e[1],o+=(e[0]+s[0])*n,a+=(e[1]+s[1])*n;return[o/(u*=3),a/u]}function ry(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function iy(t,e){return t[0]-e[0]||t[1]-e[1]}function oy(t){const e=t.length,n=[0,1];let r,i=2;for(r=2;r<e;++r){for(;i>1&&ry(t[n[i-2]],t[n[i-1]],t[r])<=0;)--i;n[i++]=r}return n.slice(0,i)}function ay(t){if((n=t.length)<3)return null;var e,n,r=new Array(n),i=new Array(n);for(e=0;e<n;++e)r[e]=[+t[e][0],+t[e][1],e];for(r.sort(iy),e=0;e<n;++e)i[e]=[r[e][0],-r[e][1]];var o=oy(r),a=oy(i),s=a[0]===o[0],u=a[a.length-1]===o[o.length-1],l=[];for(e=o.length-1;e>=0;--e)l.push(t[r[o[e]][2]]);for(e=+s;e<a.length-u;++e)l.push(t[r[a[e]][2]]);return l}function sy(t,e){for(var n,r,i=t.length,o=t[i-1],a=e[0],s=e[1],u=o[0],l=o[1],c=!1,f=0;f<i;++f)n=(o=t[f])[0],(r=o[1])>s!=l>s&&a<(u-n)*(s-r)/(l-r)+n&&(c=!c),u=n,l=r;return c}function uy(t){for(var e,n,r=-1,i=t.length,o=t[i-1],a=o[0],s=o[1],u=0;++r<i;)e=a,n=s,e-=a=(o=t[r])[0],n-=s=o[1],u+=Math.hypot(e,n);return u}var ly=Math.random,cy=function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,1===arguments.length?(n=t,t=0):n-=t,function(){return e()*n+t}}return n.source=t,n}(ly),fy=function t(e){function n(t,n){return arguments.length<2&&(n=t,t=0),t=Math.floor(t),n=Math.floor(n)-t,function(){return Math.floor(e()*n+t)}}return n.source=t,n}(ly),hy=function t(e){function n(t,n){var r,i;return t=null==t?0:+t,n=null==n?1:+n,function(){var o;if(null!=r)o=r,r=null;else do{r=2*e()-1,o=2*e()-1,i=r*r+o*o}while(!i||i>1);return t+n*o*Math.sqrt(-2*Math.log(i)/i)}}return n.source=t,n}(ly),dy=function t(e){var n=hy.source(e);function r(){var t=n.apply(this,arguments);return function(){return Math.exp(t())}}return r.source=t,r}(ly),py=function t(e){function n(t){return(t=+t)<=0?()=>0:function(){for(var n=0,r=t;r>1;--r)n+=e();return n+r*e()}}return n.source=t,n}(ly),my=function t(e){var n=py.source(e);function r(t){if(0==(t=+t))return e;var r=n(t);return function(){return r()/t}}return r.source=t,r}(ly),gy=function t(e){function n(t){return function(){return-Math.log1p(-e())/t}}return n.source=t,n}(ly),yy=function t(e){function n(t){if((t=+t)<0)throw new RangeError("invalid alpha");return t=1/-t,function(){return Math.pow(1-e(),t)}}return n.source=t,n}(ly),vy=function t(e){function n(t){if((t=+t)<0||t>1)throw new RangeError("invalid p");return function(){return Math.floor(e()+t)}}return n.source=t,n}(ly),xy=function t(e){function n(t){if((t=+t)<0||t>1)throw new RangeError("invalid p");return 0===t?()=>1/0:1===t?()=>1:(t=Math.log1p(-t),function(){return 1+Math.floor(Math.log1p(-e())/t)})}return n.source=t,n}(ly),_y=function t(e){var n=hy.source(e)();function r(t,r){if((t=+t)<0)throw new RangeError("invalid k");if(0===t)return()=>0;if(r=null==r?1:+r,1===t)return()=>-Math.log1p(-e())*r;var i=(t<1?t+1:t)-1/3,o=1/(3*Math.sqrt(i)),a=t<1?()=>Math.pow(e(),1/t):()=>1;return function(){do{do{var t=n(),s=1+o*t}while(s<=0);s*=s*s;var u=1-e()}while(u>=1-.0331*t*t*t*t&&Math.log(u)>=.5*t*t+i*(1-s+Math.log(s)));return i*s*a()*r}}return r.source=t,r}(ly),by=function t(e){var n=_y.source(e);function r(t,e){var r=n(t),i=n(e);return function(){var t=r();return 0===t?0:t/(t+i())}}return r.source=t,r}(ly),wy=function t(e){var n=xy.source(e),r=by.source(e);function i(t,e){return t=+t,(e=+e)>=1?()=>t:e<=0?()=>0:function(){for(var i=0,o=t,a=e;o*a>16&&o*(1-a)>16;){var s=Math.floor((o+1)*a),u=r(s,o-s+1)();u<=a?(i+=s,o-=s,a=(a-u)/(1-u)):(o=s-1,a/=u)}for(var l=a<.5,c=n(l?a:1-a),f=c(),h=0;f<=o;++h)f+=c();return i+(l?h:o-h)}}return i.source=t,i}(ly),My=function t(e){function n(t,n,r){var i;return 0==(t=+t)?i=t=>-Math.log(t):(t=1/t,i=e=>Math.pow(e,t)),n=null==n?0:+n,r=null==r?1:+r,function(){return n+r*i(-Math.log1p(-e()))}}return n.source=t,n}(ly),Ay=function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,function(){return t+n*Math.tan(Math.PI*e())}}return n.source=t,n}(ly),Ty=function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,function(){var r=e();return t+n*Math.log(r/(1-r))}}return n.source=t,n}(ly),Ey=function t(e){var n=_y.source(e),r=wy.source(e);function i(t){return function(){for(var i=0,o=t;o>16;){var a=Math.floor(.875*o),s=n(a)();if(s>o)return i+r(a-1,o/s)();i+=a,o-=s}for(var u=-Math.log1p(-e()),l=0;u<=o;++l)u-=Math.log1p(-e());return i+l}}return i.source=t,i}(ly);const Cy=1664525,ky=1013904223,Sy=1/4294967296;function Py(t=Math.random()){let e=0|(0<=t&&t<1?t/Sy:Math.abs(t));return()=>(e=Cy*e+ky|0,Sy*(e>>>0))}function Oy(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function Ry(t,e){switch(arguments.length){case 0:break;case 1:"function"==typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"==typeof e?this.interpolator(e):this.range(e)}return this}const Ly=Symbol("implicit");function Iy(){var t=new R,e=[],n=[],r=Ly;function i(i){let o=t.get(i);if(void 0===o){if(r!==Ly)return r;t.set(i,o=e.push(i)-1)}return n[o%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new R;for(const r of n)t.has(r)||t.set(r,e.push(r)-1);return i},i.range=function(t){return arguments.length?(n=Array.from(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return Iy(e,n).unknown(r)},Oy.apply(i,arguments),i}function Dy(){var t,e,n=Iy().unknown(void 0),r=n.domain,i=n.range,o=0,a=1,s=!1,u=0,l=0,c=.5;function f(){var n=r().length,f=a<o,h=f?a:o,d=f?o:a;t=(d-h)/Math.max(1,n-u+2*l),s&&(t=Math.floor(t)),h+=(d-h-t*(n-u))*c,e=t*(1-u),s&&(h=Math.round(h),e=Math.round(e));var p=Lt(n).map((function(e){return h+t*e}));return i(f?p.reverse():p)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),f()):r()},n.range=function(t){return arguments.length?([o,a]=t,o=+o,a=+a,f()):[o,a]},n.rangeRound=function(t){return[o,a]=t,o=+o,a=+a,s=!0,f()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(s=!!t,f()):s},n.padding=function(t){return arguments.length?(u=Math.min(1,l=+t),f()):u},n.paddingInner=function(t){return arguments.length?(u=Math.min(1,t),f()):u},n.paddingOuter=function(t){return arguments.length?(l=+t,f()):l},n.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),f()):c},n.copy=function(){return Dy(r(),[o,a]).round(s).paddingInner(u).paddingOuter(l).align(c)},Oy.apply(f(),arguments)}function Ny(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Ny(e())},t}function Fy(){return Ny(Dy.apply(null,arguments).paddingInner(1))}function zy(t){return+t}var By=[0,1];function jy(t){return t}function Vy(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:function(t){return function(){return t}}(isNaN(e)?NaN:.5)}function qy(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=Vy(i,r),o=n(a,o)):(r=Vy(r,i),o=n(o,a)),function(t){return o(r(t))}}function Gy(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=Vy(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(e){var n=h(t,e,1,r)-1;return o[n](i[n](e))}}function Uy(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Hy(){var t,e,n,r,i,o,a=By,s=By,u=Zr,l=jy;function c(){var t=Math.min(a.length,s.length);return l!==jy&&(l=function(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}(a[0],a[t-1])),r=t>2?Gy:qy,i=o=null,f}function f(e){return null==e||isNaN(e=+e)?n:(i||(i=r(a.map(t),s,u)))(t(l(e)))}return f.invert=function(n){return l(e((o||(o=r(s,a.map(t),Xr)))(n)))},f.domain=function(t){return arguments.length?(a=Array.from(t,zy),c()):a.slice()},f.range=function(t){return arguments.length?(s=Array.from(t),c()):s.slice()},f.rangeRound=function(t){return s=Array.from(t),u=jg,c()},f.clamp=function(t){return arguments.length?(l=!!t||jy,c()):l!==jy},f.interpolate=function(t){return arguments.length?(u=t,c()):u},f.unknown=function(t){return arguments.length?(n=t,f):n},function(n,r){return t=n,e=r,c()}}function Wy(){return Hy()(jy,jy)}function Xy(t,e,n,r){var i,o=ct(t,e,n);switch((r=fc(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=Ac(o,a))||(r.precision=i),vc(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=Tc(o,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=Mc(o))||(r.precision=i-2*("%"===r.type))}return yc(r)}function Ky(t){var e=t.domain;return t.ticks=function(t){var n=e();return ut(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return Xy(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i,o=e(),a=0,s=o.length-1,u=o[a],l=o[s],c=10;for(l<u&&(i=u,u=l,l=i,i=a,a=s,s=i);c-- >0;){if((i=lt(u,l,n))===r)return o[a]=u,o[s]=l,e(o);if(i>0)u=Math.floor(u/i)*i,l=Math.ceil(l/i)*i;else{if(!(i<0))break;u=Math.ceil(u*i)/i,l=Math.floor(l*i)/i}r=i}return t},t}function Qy(){var t=Wy();return t.copy=function(){return Uy(t,Qy())},Oy.apply(t,arguments),Ky(t)}function Yy(t){var e;function n(t){return null==t||isNaN(t=+t)?e:t}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=Array.from(e,zy),n):t.slice()},n.unknown=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return Yy(t).unknown(e)},t=arguments.length?Array.from(t,zy):[0,1],Ky(n)}function $y(t,e){var n,r=0,i=(t=t.slice()).length-1,o=t[r],a=t[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t}function Zy(t){return Math.log(t)}function Jy(t){return Math.exp(t)}function tv(t){return-Math.log(-t)}function ev(t){return-Math.exp(-t)}function nv(t){return isFinite(t)?+("1e"+t):t<0?0:t}function rv(t){return(e,n)=>-t(-e,n)}function iv(t){const e=t(Zy,Jy),n=e.domain;let r,i,o=10;function a(){return r=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}(o),i=function(t){return 10===t?nv:t===Math.E?Math.exp:e=>Math.pow(t,e)}(o),n()[0]<0?(r=rv(r),i=rv(i),t(tv,ev)):t(Zy,Jy),e}return e.base=function(t){return arguments.length?(o=+t,a()):o},e.domain=function(t){return arguments.length?(n(t),a()):n()},e.ticks=t=>{const e=n();let a=e[0],s=e[e.length-1];const u=s<a;u&&([a,s]=[s,a]);let l,c,f=r(a),h=r(s);const d=null==t?10:+t;let p=[];if(!(o%1)&&h-f<d){if(f=Math.floor(f),h=Math.ceil(h),a>0){for(;f<=h;++f)for(l=1;l<o;++l)if(c=f<0?l/i(-f):l*i(f),!(c<a)){if(c>s)break;p.push(c)}}else for(;f<=h;++f)for(l=o-1;l>=1;--l)if(c=f>0?l/i(-f):l*i(f),!(c<a)){if(c>s)break;p.push(c)}2*p.length<d&&(p=ut(a,s,d))}else p=ut(f,h,Math.min(h-f,d)).map(i);return u?p.reverse():p},e.tickFormat=(t,n)=>{if(null==t&&(t=10),null==n&&(n=10===o?"s":","),"function"!=typeof n&&(o%1||null!=(n=fc(n)).precision||(n.trim=!0),n=yc(n)),t===1/0)return n;const a=Math.max(1,o*t/e.ticks().length);return t=>{let e=t/i(Math.round(r(t)));return e*o<o-.5&&(e*=o),e<=a?n(t):""}},e.nice=()=>n($y(n(),{floor:t=>i(Math.floor(r(t))),ceil:t=>i(Math.ceil(r(t)))})),e}function ov(){const t=iv(Hy()).domain([1,10]);return t.copy=()=>Uy(t,ov()).base(t.base()),Oy.apply(t,arguments),t}function av(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function sv(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function uv(t){var e=1,n=t(av(e),sv(e));return n.constant=function(n){return arguments.length?t(av(e=+n),sv(e)):e},Ky(n)}function lv(){var t=uv(Hy());return t.copy=function(){return Uy(t,lv()).constant(t.constant())},Oy.apply(t,arguments)}function cv(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function fv(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function hv(t){return t<0?-t*t:t*t}function dv(t){var e=t(jy,jy),n=1;return e.exponent=function(e){return arguments.length?1===(n=+e)?t(jy,jy):.5===n?t(fv,hv):t(cv(n),cv(1/n)):n},Ky(e)}function pv(){var t=dv(Hy());return t.copy=function(){return Uy(t,pv()).exponent(t.exponent())},Oy.apply(t,arguments),t}function mv(){return pv.apply(null,arguments).exponent(.5)}function gv(t){return Math.sign(t)*t*t}function yv(){var t,e=Wy(),n=[0,1],r=!1;function i(n){var i=function(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}(e(n));return isNaN(i)?t:r?Math.round(i):i}return i.invert=function(t){return e.invert(gv(t))},i.domain=function(t){return arguments.length?(e.domain(t),i):e.domain()},i.range=function(t){return arguments.length?(e.range((n=Array.from(t,zy)).map(gv)),i):n.slice()},i.rangeRound=function(t){return i.range(t).round(!0)},i.round=function(t){return arguments.length?(r=!!t,i):r},i.clamp=function(t){return arguments.length?(e.clamp(t),i):e.clamp()},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return yv(e.domain(),n).round(r).clamp(e.clamp()).unknown(t)},Oy.apply(i,arguments),Ky(i)}function vv(){var t,e=[],n=[],i=[];function o(){var t=0,r=Math.max(1,n.length);for(i=new Array(r-1);++t<r;)i[t-1]=wt(e,t/r);return a}function a(e){return null==e||isNaN(e=+e)?t:n[h(i,e)]}return a.invertExtent=function(t){var r=n.indexOf(t);return r<0?[NaN,NaN]:[r>0?i[r-1]:e[0],r<i.length?i[r]:e[e.length-1]]},a.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)null==n||isNaN(n=+n)||e.push(n);return e.sort(r),o()},a.range=function(t){return arguments.length?(n=Array.from(t),o()):n.slice()},a.unknown=function(e){return arguments.length?(t=e,a):t},a.quantiles=function(){return i.slice()},a.copy=function(){return vv().domain(e).range(n).unknown(t)},Oy.apply(a,arguments)}function xv(){var t,e=0,n=1,r=1,i=[.5],o=[0,1];function a(e){return null!=e&&e<=e?o[h(i,e,0,r)]:t}function s(){var t=-1;for(i=new Array(r);++t<r;)i[t]=((t+1)*n-(t-r)*e)/(r+1);return a}return a.domain=function(t){return arguments.length?([e,n]=t,e=+e,n=+n,s()):[e,n]},a.range=function(t){return arguments.length?(r=(o=Array.from(t)).length-1,s()):o.slice()},a.invertExtent=function(t){var a=o.indexOf(t);return a<0?[NaN,NaN]:a<1?[e,i[0]]:a>=r?[i[r-1],n]:[i[a-1],i[a]]},a.unknown=function(e){return arguments.length?(t=e,a):a},a.thresholds=function(){return i.slice()},a.copy=function(){return xv().domain([e,n]).range(o).unknown(t)},Oy.apply(Ky(a),arguments)}function _v(){var t,e=[.5],n=[0,1],r=1;function i(i){return null!=i&&i<=i?n[h(e,i,0,r)]:t}return i.domain=function(t){return arguments.length?(e=Array.from(t),r=Math.min(e.length,n.length-1),i):e.slice()},i.range=function(t){return arguments.length?(n=Array.from(t),r=Math.min(e.length,n.length-1),i):n.slice()},i.invertExtent=function(t){var r=n.indexOf(t);return[e[r-1],e[r]]},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return _v().domain(e).range(n).unknown(t)},Oy.apply(i,arguments)}const bv=1e3,wv=6e4,Mv=36e5,Av=864e5,Tv=6048e5,Ev=2592e6,Cv=31536e6,kv=new Date,Sv=new Date;function Pv(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=e=>(t(e=new Date(+e)),e),i.ceil=n=>(t(n=new Date(n-1)),e(n,1),t(n),n),i.round=t=>{const e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=(t,n)=>(e(t=new Date(+t),null==n?1:Math.floor(n)),t),i.range=(n,r,o)=>{const a=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return a;let s;do{a.push(s=new Date(+n)),e(n,o),t(n)}while(s<n&&n<r);return a},i.filter=n=>Pv((e=>{if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),((t,r)=>{if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););})),n&&(i.count=(e,r)=>(kv.setTime(+e),Sv.setTime(+r),t(kv),t(Sv),Math.floor(n(kv,Sv))),i.every=t=>(t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?e=>r(e)%t==0:e=>i.count(0,e)%t==0):i:null)),i}const Ov=Pv((()=>{}),((t,e)=>{t.setTime(+t+e)}),((t,e)=>e-t));Ov.every=t=>(t=Math.floor(t),isFinite(t)&&t>0?t>1?Pv((e=>{e.setTime(Math.floor(e/t)*t)}),((e,n)=>{e.setTime(+e+n*t)}),((e,n)=>(n-e)/t)):Ov:null);const Rv=Ov.range,Lv=Pv((t=>{t.setTime(t-t.getMilliseconds())}),((t,e)=>{t.setTime(+t+e*bv)}),((t,e)=>(e-t)/bv),(t=>t.getUTCSeconds())),Iv=Lv.range,Dv=Pv((t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*bv)}),((t,e)=>{t.setTime(+t+e*wv)}),((t,e)=>(e-t)/wv),(t=>t.getMinutes())),Nv=Dv.range,Fv=Pv((t=>{t.setUTCSeconds(0,0)}),((t,e)=>{t.setTime(+t+e*wv)}),((t,e)=>(e-t)/wv),(t=>t.getUTCMinutes())),zv=Fv.range,Bv=Pv((t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*bv-t.getMinutes()*wv)}),((t,e)=>{t.setTime(+t+e*Mv)}),((t,e)=>(e-t)/Mv),(t=>t.getHours())),jv=Bv.range,Vv=Pv((t=>{t.setUTCMinutes(0,0,0)}),((t,e)=>{t.setTime(+t+e*Mv)}),((t,e)=>(e-t)/Mv),(t=>t.getUTCHours())),qv=Vv.range,Gv=Pv((t=>t.setHours(0,0,0,0)),((t,e)=>t.setDate(t.getDate()+e)),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*wv)/Av),(t=>t.getDate()-1)),Uv=Gv.range,Hv=Pv((t=>{t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+e)}),((t,e)=>(e-t)/Av),(t=>t.getUTCDate()-1)),Wv=Hv.range,Xv=Pv((t=>{t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+e)}),((t,e)=>(e-t)/Av),(t=>Math.floor(t/Av))),Kv=Xv.range;function Qv(t){return Pv((e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),((t,e)=>{t.setDate(t.getDate()+7*e)}),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*wv)/Tv))}const Yv=Qv(0),$v=Qv(1),Zv=Qv(2),Jv=Qv(3),tx=Qv(4),ex=Qv(5),nx=Qv(6),rx=Yv.range,ix=$v.range,ox=Zv.range,ax=Jv.range,sx=tx.range,ux=ex.range,lx=nx.range;function cx(t){return Pv((e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+7*e)}),((t,e)=>(e-t)/Tv))}const fx=cx(0),hx=cx(1),dx=cx(2),px=cx(3),mx=cx(4),gx=cx(5),yx=cx(6),vx=fx.range,xx=hx.range,_x=dx.range,bx=px.range,wx=mx.range,Mx=gx.range,Ax=yx.range,Tx=Pv((t=>{t.setDate(1),t.setHours(0,0,0,0)}),((t,e)=>{t.setMonth(t.getMonth()+e)}),((t,e)=>e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())),(t=>t.getMonth())),Ex=Tx.range,Cx=Pv((t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)}),((t,e)=>e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())),(t=>t.getUTCMonth())),kx=Cx.range,Sx=Pv((t=>{t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,e)=>{t.setFullYear(t.getFullYear()+e)}),((t,e)=>e.getFullYear()-t.getFullYear()),(t=>t.getFullYear()));Sx.every=t=>isFinite(t=Math.floor(t))&&t>0?Pv((e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),((e,n)=>{e.setFullYear(e.getFullYear()+n*t)})):null;const Px=Sx.range,Ox=Pv((t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)}),((t,e)=>e.getUTCFullYear()-t.getUTCFullYear()),(t=>t.getUTCFullYear()));Ox.every=t=>isFinite(t=Math.floor(t))&&t>0?Pv((e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),((e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null;const Rx=Ox.range;function Lx(t,e,n,r,i,a){const s=[[Lv,1,bv],[Lv,5,5e3],[Lv,15,15e3],[Lv,30,3e4],[a,1,wv],[a,5,3e5],[a,15,9e5],[a,30,18e5],[i,1,Mv],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,Av],[r,2,1728e5],[n,1,Tv],[e,1,Ev],[e,3,7776e6],[t,1,Cv]];function u(e,n,r){const i=Math.abs(n-e)/r,a=o((([,,t])=>t)).right(s,i);if(a===s.length)return t.every(ct(e/Cv,n/Cv,r));if(0===a)return Ov.every(Math.max(ct(e,n,r),1));const[u,l]=s[i/s[a-1][2]<s[a][2]/i?a-1:a];return u.every(l)}return[function(t,e,n){const r=e<t;r&&([t,e]=[e,t]);const i=n&&"function"==typeof n.range?n:u(t,e,n),o=i?i.range(t,+e+1):[];return r?o.reverse():o},u]}const[Ix,Dx]=Lx(Ox,Cx,fx,Xv,Vv,Fv),[Nx,Fx]=Lx(Sx,Tx,Yv,Gv,Bv,Dv);function zx(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Bx(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function jx(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Vx(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,u=t.shortMonths,l=Jx(i),c=t_(i),f=Jx(o),h=t_(o),d=Jx(a),p=t_(a),m=Jx(s),g=t_(s),y=Jx(u),v=t_(u),x={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:b_,e:b_,f:E_,g:F_,G:B_,H:w_,I:M_,j:A_,L:T_,m:C_,M:k_,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:ub,s:lb,S:S_,u:P_,U:O_,V:L_,w:I_,W:D_,x:null,X:null,y:N_,Y:z_,Z:j_,"%":sb},_={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return u[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:V_,e:V_,f:W_,g:rb,G:ob,H:q_,I:G_,j:U_,L:H_,m:X_,M:K_,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:ub,s:lb,S:Q_,u:Y_,U:$_,V:J_,w:tb,W:eb,x:null,X:null,y:nb,Y:ib,Z:ab,"%":sb},b={a:function(t,e,n){var r=d.exec(e.slice(n));return r?(t.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(t,e,n){var r=f.exec(e.slice(n));return r?(t.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(t,e,n){var r=y.exec(e.slice(n));return r?(t.m=v.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(t,e,n){var r=m.exec(e.slice(n));return r?(t.m=g.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(t,n,r){return A(t,e,n,r)},d:f_,e:f_,f:y_,g:s_,G:a_,H:d_,I:d_,j:h_,L:g_,m:c_,M:p_,p:function(t,e,n){var r=l.exec(e.slice(n));return r?(t.p=c.get(r[0].toLowerCase()),n+r[0].length):-1},q:l_,Q:x_,s:__,S:m_,u:n_,U:r_,V:i_,w:e_,W:o_,x:function(t,e,r){return A(t,n,e,r)},X:function(t,e,n){return A(t,r,e,n)},y:s_,Y:a_,Z:u_,"%":v_};function w(t,e){return function(n){var r,i,o,a=[],s=-1,u=0,l=t.length;for(n instanceof Date||(n=new Date(+n));++s<l;)37===t.charCodeAt(s)&&(a.push(t.slice(u,s)),null!=(i=Xx[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),a.push(r),u=s+1);return a.push(t.slice(u,s)),a.join("")}}function M(t,e){return function(n){var r,i,o=jx(1900,void 0,1);if(A(o,t,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(e&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=Bx(jx(o.y,0,1))).getUTCDay(),r=i>4||0===i?hx.ceil(r):hx(r),r=Hv.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=zx(jx(o.y,0,1))).getDay(),r=i>4||0===i?$v.ceil(r):$v(r),r=Gv.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?Bx(jx(o.y,0,1)).getUTCDay():zx(jx(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,Bx(o)):zx(o)}}function A(t,e,n,r){for(var i,o,a=0,s=e.length,u=n.length;a<s;){if(r>=u)return-1;if(37===(i=e.charCodeAt(a++))){if(i=e.charAt(a++),!(o=b[i in Xx?e.charAt(a++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return x.x=w(n,x),x.X=w(r,x),x.c=w(e,x),_.x=w(n,_),_.X=w(r,_),_.c=w(e,_),{format:function(t){var e=w(t+="",x);return e.toString=function(){return t},e},parse:function(t){var e=M(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=w(t+="",_);return e.toString=function(){return t},e},utcParse:function(t){var e=M(t+="",!0);return e.toString=function(){return t},e}}}var qx,Gx,Ux,Hx,Wx,Xx={"-":"",_:" ",0:"0"},Kx=/^\s*\d+/,Qx=/^%/,Yx=/[\\^$*+?|[\]().{}]/g;function $x(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function Zx(t){return t.replace(Yx,"\\$&")}function Jx(t){return new RegExp("^(?:"+t.map(Zx).join("|")+")","i")}function t_(t){return new Map(t.map(((t,e)=>[t.toLowerCase(),e])))}function e_(t,e,n){var r=Kx.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function n_(t,e,n){var r=Kx.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function r_(t,e,n){var r=Kx.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function i_(t,e,n){var r=Kx.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function o_(t,e,n){var r=Kx.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function a_(t,e,n){var r=Kx.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function s_(t,e,n){var r=Kx.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function u_(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function l_(t,e,n){var r=Kx.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function c_(t,e,n){var r=Kx.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function f_(t,e,n){var r=Kx.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function h_(t,e,n){var r=Kx.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function d_(t,e,n){var r=Kx.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function p_(t,e,n){var r=Kx.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function m_(t,e,n){var r=Kx.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function g_(t,e,n){var r=Kx.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function y_(t,e,n){var r=Kx.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function v_(t,e,n){var r=Qx.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function x_(t,e,n){var r=Kx.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function __(t,e,n){var r=Kx.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function b_(t,e){return $x(t.getDate(),e,2)}function w_(t,e){return $x(t.getHours(),e,2)}function M_(t,e){return $x(t.getHours()%12||12,e,2)}function A_(t,e){return $x(1+Gv.count(Sx(t),t),e,3)}function T_(t,e){return $x(t.getMilliseconds(),e,3)}function E_(t,e){return T_(t,e)+"000"}function C_(t,e){return $x(t.getMonth()+1,e,2)}function k_(t,e){return $x(t.getMinutes(),e,2)}function S_(t,e){return $x(t.getSeconds(),e,2)}function P_(t){var e=t.getDay();return 0===e?7:e}function O_(t,e){return $x(Yv.count(Sx(t)-1,t),e,2)}function R_(t){var e=t.getDay();return e>=4||0===e?tx(t):tx.ceil(t)}function L_(t,e){return t=R_(t),$x(tx.count(Sx(t),t)+(4===Sx(t).getDay()),e,2)}function I_(t){return t.getDay()}function D_(t,e){return $x($v.count(Sx(t)-1,t),e,2)}function N_(t,e){return $x(t.getFullYear()%100,e,2)}function F_(t,e){return $x((t=R_(t)).getFullYear()%100,e,2)}function z_(t,e){return $x(t.getFullYear()%1e4,e,4)}function B_(t,e){var n=t.getDay();return $x((t=n>=4||0===n?tx(t):tx.ceil(t)).getFullYear()%1e4,e,4)}function j_(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+$x(e/60|0,"0",2)+$x(e%60,"0",2)}function V_(t,e){return $x(t.getUTCDate(),e,2)}function q_(t,e){return $x(t.getUTCHours(),e,2)}function G_(t,e){return $x(t.getUTCHours()%12||12,e,2)}function U_(t,e){return $x(1+Hv.count(Ox(t),t),e,3)}function H_(t,e){return $x(t.getUTCMilliseconds(),e,3)}function W_(t,e){return H_(t,e)+"000"}function X_(t,e){return $x(t.getUTCMonth()+1,e,2)}function K_(t,e){return $x(t.getUTCMinutes(),e,2)}function Q_(t,e){return $x(t.getUTCSeconds(),e,2)}function Y_(t){var e=t.getUTCDay();return 0===e?7:e}function $_(t,e){return $x(fx.count(Ox(t)-1,t),e,2)}function Z_(t){var e=t.getUTCDay();return e>=4||0===e?mx(t):mx.ceil(t)}function J_(t,e){return t=Z_(t),$x(mx.count(Ox(t),t)+(4===Ox(t).getUTCDay()),e,2)}function tb(t){return t.getUTCDay()}function eb(t,e){return $x(hx.count(Ox(t)-1,t),e,2)}function nb(t,e){return $x(t.getUTCFullYear()%100,e,2)}function rb(t,e){return $x((t=Z_(t)).getUTCFullYear()%100,e,2)}function ib(t,e){return $x(t.getUTCFullYear()%1e4,e,4)}function ob(t,e){var n=t.getUTCDay();return $x((t=n>=4||0===n?mx(t):mx.ceil(t)).getUTCFullYear()%1e4,e,4)}function ab(){return"+0000"}function sb(){return"%"}function ub(t){return+t}function lb(t){return Math.floor(+t/1e3)}function cb(t){return qx=Vx(t),Gx=qx.format,Ux=qx.parse,Hx=qx.utcFormat,Wx=qx.utcParse,qx}function fb(t){return new Date(t)}function hb(t){return t instanceof Date?+t:+new Date(+t)}function db(t,e,n,r,i,o,a,s,u,l){var c=Wy(),f=c.invert,h=c.domain,d=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),v=l("%b %d"),x=l("%B"),_=l("%Y");function b(t){return(u(t)<t?d:s(t)<t?p:a(t)<t?m:o(t)<t?g:r(t)<t?i(t)<t?y:v:n(t)<t?x:_)(t)}return c.invert=function(t){return new Date(f(t))},c.domain=function(t){return arguments.length?h(Array.from(t,hb)):h().map(fb)},c.ticks=function(e){var n=h();return t(n[0],n[n.length-1],null==e?10:e)},c.tickFormat=function(t,e){return null==e?b:l(e)},c.nice=function(t){var n=h();return t&&"function"==typeof t.range||(t=e(n[0],n[n.length-1],null==t?10:t)),t?h($y(n,t)):c},c.copy=function(){return Uy(c,db(t,e,n,r,i,o,a,s,u,l))},c}function pb(){return Oy.apply(db(Nx,Fx,Sx,Tx,Yv,Gv,Bv,Dv,Lv,Gx).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function mb(){return Oy.apply(db(Ix,Dx,Ox,Cx,fx,Hv,Vv,Fv,Lv,Hx).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function gb(){var t,e,n,r,i,o=0,a=1,s=jy,u=!1;function l(e){return null==e||isNaN(e=+e)?i:s(0===n?.5:(e=(r(e)-t)*n,u?Math.max(0,Math.min(1,e)):e))}function c(t){return function(e){var n,r;return arguments.length?([n,r]=e,s=t(n,r),l):[s(0),s(1)]}}return l.domain=function(i){return arguments.length?([o,a]=i,t=r(o=+o),e=r(a=+a),n=t===e?0:1/(e-t),l):[o,a]},l.clamp=function(t){return arguments.length?(u=!!t,l):u},l.interpolator=function(t){return arguments.length?(s=t,l):s},l.range=c(Zr),l.rangeRound=c(jg),l.unknown=function(t){return arguments.length?(i=t,l):i},function(i){return r=i,t=i(o),e=i(a),n=t===e?0:1/(e-t),l}}function yb(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function vb(){var t=Ky(gb()(jy));return t.copy=function(){return yb(t,vb())},Ry.apply(t,arguments)}function xb(){var t=iv(gb()).domain([1,10]);return t.copy=function(){return yb(t,xb()).base(t.base())},Ry.apply(t,arguments)}function _b(){var t=uv(gb());return t.copy=function(){return yb(t,_b()).constant(t.constant())},Ry.apply(t,arguments)}function bb(){var t=dv(gb());return t.copy=function(){return yb(t,bb()).exponent(t.exponent())},Ry.apply(t,arguments)}function wb(){return bb.apply(null,arguments).exponent(.5)}function Mb(){var t=[],e=jy;function n(n){if(null!=n&&!isNaN(n=+n))return e((h(t,n,1)-1)/(t.length-1))}return n.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let n of e)null==n||isNaN(n=+n)||t.push(n);return t.sort(r),n},n.interpolator=function(t){return arguments.length?(e=t,n):e},n.range=function(){return t.map(((n,r)=>e(r/(t.length-1))))},n.quantiles=function(e){return Array.from({length:e+1},((n,r)=>bt(t,r/e)))},n.copy=function(){return Mb(e).domain(t)},Ry.apply(n,arguments)}function Ab(){var t,e,n,r,i,o,a,s=0,u=.5,l=1,c=1,f=jy,h=!1;function d(t){return isNaN(t=+t)?a:(t=.5+((t=+o(t))-e)*(c*t<c*e?r:i),f(h?Math.max(0,Math.min(1,t)):t))}function p(t){return function(e){var n,r,i;return arguments.length?([n,r,i]=e,f=Jg(t,[n,r,i]),d):[f(0),f(.5),f(1)]}}return d.domain=function(a){return arguments.length?([s,u,l]=a,t=o(s=+s),e=o(u=+u),n=o(l=+l),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),c=e<t?-1:1,d):[s,u,l]},d.clamp=function(t){return arguments.length?(h=!!t,d):h},d.interpolator=function(t){return arguments.length?(f=t,d):f},d.range=p(Zr),d.rangeRound=p(jg),d.unknown=function(t){return arguments.length?(a=t,d):a},function(a){return o=a,t=a(s),e=a(u),n=a(l),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),c=e<t?-1:1,d}}function Tb(){var t=Ky(Ab()(jy));return t.copy=function(){return yb(t,Tb())},Ry.apply(t,arguments)}function Eb(){var t=iv(Ab()).domain([.1,1,10]);return t.copy=function(){return yb(t,Eb()).base(t.base())},Ry.apply(t,arguments)}function Cb(){var t=uv(Ab());return t.copy=function(){return yb(t,Cb()).constant(t.constant())},Ry.apply(t,arguments)}function kb(){var t=dv(Ab());return t.copy=function(){return yb(t,kb()).exponent(t.exponent())},Ry.apply(t,arguments)}function Sb(){return kb.apply(null,arguments).exponent(.5)}function Pb(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n}cb({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Ob=Pb("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Rb=Pb("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Lb=Pb("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Ib=Pb("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),Db=Pb("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Nb=Pb("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Fb=Pb("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),zb=Pb("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Bb=Pb("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),jb=Pb("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Vb=Pb("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),qb=t=>jr(t[t.length-1]),Gb=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Pb),Ub=qb(Gb),Hb=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Pb),Wb=qb(Hb),Xb=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Pb),Kb=qb(Xb),Qb=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Pb),Yb=qb(Qb),$b=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Pb),Zb=qb($b),Jb=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Pb),tw=qb(Jb),ew=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Pb),nw=qb(ew),rw=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Pb),iw=qb(rw),ow=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Pb),aw=qb(ow),sw=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Pb),uw=qb(sw),lw=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Pb),cw=qb(lw),fw=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Pb),hw=qb(fw),dw=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Pb),pw=qb(dw),mw=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Pb),gw=qb(mw),yw=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Pb),vw=qb(yw),xw=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Pb),_w=qb(xw),bw=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Pb),ww=qb(bw),Mw=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Pb),Aw=qb(Mw),Tw=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Pb),Ew=qb(Tw),Cw=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Pb),kw=qb(Cw),Sw=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Pb),Pw=qb(Sw),Ow=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Pb),Rw=qb(Ow),Lw=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Pb),Iw=qb(Lw),Dw=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Pb),Nw=qb(Dw),Fw=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Pb),zw=qb(Fw),Bw=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Pb),jw=qb(Bw),Vw=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Pb),qw=qb(Vw);function Gw(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+")"}var Uw=Zg(ts(300,.5,0),ts(-240,.5,1)),Hw=Zg(ts(-100,.75,.35),ts(80,1.5,.8)),Ww=Zg(ts(260,.75,.35),ts(80,1.5,.8)),Xw=ts();function Kw(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return Xw.h=360*t-100,Xw.s=1.5-1.5*e,Xw.l=.8-.9*e,Xw+""}var Qw=gr(),Yw=Math.PI/3,$w=2*Math.PI/3;function Zw(t){var e;return t=(.5-t)*Math.PI,Qw.r=255*(e=Math.sin(t))*e,Qw.g=255*(e=Math.sin(t+Yw))*e,Qw.b=255*(e=Math.sin(t+$w))*e,Qw+""}function Jw(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")"}function tM(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}var eM=tM(Pb("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),nM=tM(Pb("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),rM=tM(Pb("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),iM=tM(Pb("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function oM(t){return Vn(Cn(t).call(document.documentElement))}var aM=0;function sM(){return new uM}function uM(){this._="@"+(++aM).toString(36)}function lM(t,e){return t.target&&(t=Jr(t),void 0===e&&(e=t.currentTarget),t=t.touches||[t]),Array.from(t,(t=>ti(t,e)))}function cM(t){return"string"==typeof t?new zn([document.querySelectorAll(t)],[document.documentElement]):new zn([Se(t)],Fn)}function fM(t){return function(){return t}}uM.prototype=sM.prototype={constructor:uM,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};const hM=Math.abs,dM=Math.atan2,pM=Math.cos,mM=Math.max,gM=Math.min,yM=Math.sin,vM=Math.sqrt,xM=1e-12,_M=Math.PI,bM=_M/2,wM=2*_M;function MM(t){return t>=1?bM:t<=-1?-bM:Math.asin(t)}function AM(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(null==n)e=null;else{const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);e=t}return t},()=>new la(e)}function TM(t){return t.innerRadius}function EM(t){return t.outerRadius}function CM(t){return t.startAngle}function kM(t){return t.endAngle}function SM(t){return t&&t.padAngle}function PM(t,e,n,r,i,o,a){var s=t-n,u=e-r,l=(a?o:-o)/vM(s*s+u*u),c=l*u,f=-l*s,h=t+c,d=e+f,p=n+c,m=r+f,g=(h+p)/2,y=(d+m)/2,v=p-h,x=m-d,_=v*v+x*x,b=i-o,w=h*m-p*d,M=(x<0?-1:1)*vM(mM(0,b*b*_-w*w)),A=(w*x-v*M)/_,T=(-w*v-x*M)/_,E=(w*x+v*M)/_,C=(-w*v+x*M)/_,k=A-g,S=T-y,P=E-g,O=C-y;return k*k+S*S>P*P+O*O&&(A=E,T=C),{cx:A,cy:T,x01:-c,y01:-f,x11:A*(i/b-1),y11:T*(i/b-1)}}function OM(){var t=TM,e=EM,n=fM(0),r=null,i=CM,o=kM,a=SM,s=null,u=AM(l);function l(){var l,c,f=+t.apply(this,arguments),h=+e.apply(this,arguments),d=i.apply(this,arguments)-bM,p=o.apply(this,arguments)-bM,m=hM(p-d),g=p>d;if(s||(s=l=u()),h<f&&(c=h,h=f,f=c),h>xM)if(m>wM-xM)s.moveTo(h*pM(d),h*yM(d)),s.arc(0,0,h,d,p,!g),f>xM&&(s.moveTo(f*pM(p),f*yM(p)),s.arc(0,0,f,p,d,g));else{var y,v,x=d,_=p,b=d,w=p,M=m,A=m,T=a.apply(this,arguments)/2,E=T>xM&&(r?+r.apply(this,arguments):vM(f*f+h*h)),C=gM(hM(h-f)/2,+n.apply(this,arguments)),k=C,S=C;if(E>xM){var P=MM(E/f*yM(T)),O=MM(E/h*yM(T));(M-=2*P)>xM?(b+=P*=g?1:-1,w-=P):(M=0,b=w=(d+p)/2),(A-=2*O)>xM?(x+=O*=g?1:-1,_-=O):(A=0,x=_=(d+p)/2)}var R=h*pM(x),L=h*yM(x),I=f*pM(w),D=f*yM(w);if(C>xM){var N,F=h*pM(_),z=h*yM(_),B=f*pM(b),j=f*yM(b);if(m<_M)if(N=function(t,e,n,r,i,o,a,s){var u=n-t,l=r-e,c=a-i,f=s-o,h=f*u-c*l;if(!(h*h<xM))return[t+(h=(c*(e-o)-f*(t-i))/h)*u,e+h*l]}(R,L,B,j,F,z,I,D)){var V=R-N[0],q=L-N[1],G=F-N[0],U=z-N[1],H=1/yM(function(t){return t>1?0:t<-1?_M:Math.acos(t)}((V*G+q*U)/(vM(V*V+q*q)*vM(G*G+U*U)))/2),W=vM(N[0]*N[0]+N[1]*N[1]);k=gM(C,(f-W)/(H-1)),S=gM(C,(h-W)/(H+1))}else k=S=0}A>xM?S>xM?(y=PM(B,j,R,L,h,S,g),v=PM(F,z,I,D,h,S,g),s.moveTo(y.cx+y.x01,y.cy+y.y01),S<C?s.arc(y.cx,y.cy,S,dM(y.y01,y.x01),dM(v.y01,v.x01),!g):(s.arc(y.cx,y.cy,S,dM(y.y01,y.x01),dM(y.y11,y.x11),!g),s.arc(0,0,h,dM(y.cy+y.y11,y.cx+y.x11),dM(v.cy+v.y11,v.cx+v.x11),!g),s.arc(v.cx,v.cy,S,dM(v.y11,v.x11),dM(v.y01,v.x01),!g))):(s.moveTo(R,L),s.arc(0,0,h,x,_,!g)):s.moveTo(R,L),f>xM&&M>xM?k>xM?(y=PM(I,D,F,z,f,-k,g),v=PM(R,L,B,j,f,-k,g),s.lineTo(y.cx+y.x01,y.cy+y.y01),k<C?s.arc(y.cx,y.cy,k,dM(y.y01,y.x01),dM(v.y01,v.x01),!g):(s.arc(y.cx,y.cy,k,dM(y.y01,y.x01),dM(y.y11,y.x11),!g),s.arc(0,0,f,dM(y.cy+y.y11,y.cx+y.x11),dM(v.cy+v.y11,v.cx+v.x11),g),s.arc(v.cx,v.cy,k,dM(v.y11,v.x11),dM(v.y01,v.x01),!g))):s.arc(0,0,f,w,b,g):s.lineTo(I,D)}else s.moveTo(0,0);if(s.closePath(),l)return s=null,l+""||null}return l.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-_M/2;return[pM(r)*n,yM(r)*n]},l.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:fM(+e),l):t},l.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:fM(+t),l):e},l.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:fM(+t),l):n},l.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:fM(+t),l):r},l.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:fM(+t),l):i},l.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:fM(+t),l):o},l.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:fM(+t),l):a},l.context=function(t){return arguments.length?(s=null==t?null:t,l):s},l}var RM=Array.prototype.slice;function LM(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function IM(t){this._context=t}function DM(t){return new IM(t)}function NM(t){return t[0]}function FM(t){return t[1]}function zM(t,e){var n=fM(!0),r=null,i=DM,o=null,a=AM(s);function s(s){var u,l,c,f=(s=LM(s)).length,h=!1;for(null==r&&(o=i(c=a())),u=0;u<=f;++u)!(u<f&&n(l=s[u],u,s))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(l,u,s),+e(l,u,s));if(c)return o=null,c+""||null}return t="function"==typeof t?t:void 0===t?NM:fM(t),e="function"==typeof e?e:void 0===e?FM:fM(e),s.x=function(e){return arguments.length?(t="function"==typeof e?e:fM(+e),s):t},s.y=function(t){return arguments.length?(e="function"==typeof t?t:fM(+t),s):e},s.defined=function(t){return arguments.length?(n="function"==typeof t?t:fM(!!t),s):n},s.curve=function(t){return arguments.length?(i=t,null!=r&&(o=i(r)),s):i},s.context=function(t){return arguments.length?(null==t?r=o=null:o=i(r=t),s):r},s}function BM(t,e,n){var r=null,i=fM(!0),o=null,a=DM,s=null,u=AM(l);function l(l){var c,f,h,d,p,m=(l=LM(l)).length,g=!1,y=new Array(m),v=new Array(m);for(null==o&&(s=a(p=u())),c=0;c<=m;++c){if(!(c<m&&i(d=l[c],c,l))===g)if(g=!g)f=c,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),h=c-1;h>=f;--h)s.point(y[h],v[h]);s.lineEnd(),s.areaEnd()}g&&(y[c]=+t(d,c,l),v[c]=+e(d,c,l),s.point(r?+r(d,c,l):y[c],n?+n(d,c,l):v[c]))}if(p)return s=null,p+""||null}function c(){return zM().defined(i).curve(a).context(o)}return t="function"==typeof t?t:void 0===t?NM:fM(+t),e="function"==typeof e?e:fM(void 0===e?0:+e),n="function"==typeof n?n:void 0===n?FM:fM(+n),l.x=function(e){return arguments.length?(t="function"==typeof e?e:fM(+e),r=null,l):t},l.x0=function(e){return arguments.length?(t="function"==typeof e?e:fM(+e),l):t},l.x1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:fM(+t),l):r},l.y=function(t){return arguments.length?(e="function"==typeof t?t:fM(+t),n=null,l):e},l.y0=function(t){return arguments.length?(e="function"==typeof t?t:fM(+t),l):e},l.y1=function(t){return arguments.length?(n=null==t?null:"function"==typeof t?t:fM(+t),l):n},l.lineX0=l.lineY0=function(){return c().x(t).y(e)},l.lineY1=function(){return c().x(t).y(n)},l.lineX1=function(){return c().x(r).y(e)},l.defined=function(t){return arguments.length?(i="function"==typeof t?t:fM(!!t),l):i},l.curve=function(t){return arguments.length?(a=t,null!=o&&(s=a(o)),l):a},l.context=function(t){return arguments.length?(null==t?o=s=null:s=a(o=t),l):o},l}function jM(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function VM(t){return t}function qM(){var t=VM,e=jM,n=null,r=fM(0),i=fM(wM),o=fM(0);function a(a){var s,u,l,c,f,h=(a=LM(a)).length,d=0,p=new Array(h),m=new Array(h),g=+r.apply(this,arguments),y=Math.min(wM,Math.max(-wM,i.apply(this,arguments)-g)),v=Math.min(Math.abs(y)/h,o.apply(this,arguments)),x=v*(y<0?-1:1);for(s=0;s<h;++s)(f=m[p[s]=s]=+t(a[s],s,a))>0&&(d+=f);for(null!=e?p.sort((function(t,n){return e(m[t],m[n])})):null!=n&&p.sort((function(t,e){return n(a[t],a[e])})),s=0,l=d?(y-h*x)/d:0;s<h;++s,g=c)u=p[s],c=g+((f=m[u])>0?f*l:0)+x,m[u]={data:a[u],index:s,value:f,startAngle:g,endAngle:c,padAngle:v};return m}return a.value=function(e){return arguments.length?(t="function"==typeof e?e:fM(+e),a):t},a.sortValues=function(t){return arguments.length?(e=t,n=null,a):e},a.sort=function(t){return arguments.length?(n=t,e=null,a):n},a.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:fM(+t),a):r},a.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:fM(+t),a):i},a.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:fM(+t),a):o},a}IM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var GM=HM(DM);function UM(t){this._curve=t}function HM(t){function e(e){return new UM(t(e))}return e._curve=t,e}function WM(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(HM(t)):e()._curve},t}function XM(){return WM(zM().curve(GM))}function KM(){var t=BM().curve(GM),e=t.curve,n=t.lineX0,r=t.lineX1,i=t.lineY0,o=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return WM(n())},delete t.lineX0,t.lineEndAngle=function(){return WM(r())},delete t.lineX1,t.lineInnerRadius=function(){return WM(i())},delete t.lineY0,t.lineOuterRadius=function(){return WM(o())},delete t.lineY1,t.curve=function(t){return arguments.length?e(HM(t)):e()._curve},t}function QM(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]}UM.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};class YM{constructor(t,e){this._context=t,this._x=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,e,t,e):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+e)/2,t,this._y0,t,e)}this._x0=t,this._y0=e}}class $M{constructor(t){this._context=t}lineStart(){this._point=0}lineEnd(){}point(t,e){if(t=+t,e=+e,0===this._point)this._point=1;else{const n=QM(this._x0,this._y0),r=QM(this._x0,this._y0=(this._y0+e)/2),i=QM(t,this._y0),o=QM(t,e);this._context.moveTo(...n),this._context.bezierCurveTo(...r,...i,...o)}this._x0=t,this._y0=e}}function ZM(t){return new YM(t,!0)}function JM(t){return new YM(t,!1)}function tA(t){return new $M(t)}function eA(t){return t.source}function nA(t){return t.target}function rA(t){let e=eA,n=nA,r=NM,i=FM,o=null,a=null,s=AM(u);function u(){let u;const l=RM.call(arguments),c=e.apply(this,l),f=n.apply(this,l);if(null==o&&(a=t(u=s())),a.lineStart(),l[0]=c,a.point(+r.apply(this,l),+i.apply(this,l)),l[0]=f,a.point(+r.apply(this,l),+i.apply(this,l)),a.lineEnd(),u)return a=null,u+""||null}return u.source=function(t){return arguments.length?(e=t,u):e},u.target=function(t){return arguments.length?(n=t,u):n},u.x=function(t){return arguments.length?(r="function"==typeof t?t:fM(+t),u):r},u.y=function(t){return arguments.length?(i="function"==typeof t?t:fM(+t),u):i},u.context=function(e){return arguments.length?(null==e?o=a=null:a=t(o=e),u):o},u}function iA(){return rA(ZM)}function oA(){return rA(JM)}function aA(){const t=rA(tA);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}const sA=vM(3);var uA={draw(t,e){const n=.59436*vM(e+gM(e/28,.75)),r=n/2,i=r*sA;t.moveTo(0,n),t.lineTo(0,-n),t.moveTo(-i,-r),t.lineTo(i,r),t.moveTo(-i,r),t.lineTo(i,-r)}},lA={draw(t,e){const n=vM(e/_M);t.moveTo(n,0),t.arc(0,0,n,0,wM)}},cA={draw(t,e){const n=vM(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}};const fA=vM(1/3),hA=2*fA;var dA={draw(t,e){const n=vM(e/hA),r=n*fA;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},pA={draw(t,e){const n=.62625*vM(e);t.moveTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.lineTo(-n,0),t.closePath()}},mA={draw(t,e){const n=.87559*vM(e-gM(e/7,2));t.moveTo(-n,0),t.lineTo(n,0),t.moveTo(0,n),t.lineTo(0,-n)}},gA={draw(t,e){const n=vM(e),r=-n/2;t.rect(r,r,n,n)}},yA={draw(t,e){const n=.4431*vM(e);t.moveTo(n,n),t.lineTo(n,-n),t.lineTo(-n,-n),t.lineTo(-n,n),t.closePath()}};const vA=yM(_M/10)/yM(7*_M/10),xA=yM(wM/10)*vA,_A=-pM(wM/10)*vA;var bA={draw(t,e){const n=vM(.8908130915292852*e),r=xA*n,i=_A*n;t.moveTo(0,-n),t.lineTo(r,i);for(let e=1;e<5;++e){const o=wM*e/5,a=pM(o),s=yM(o);t.lineTo(s*n,-a*n),t.lineTo(a*r-s*i,s*r+a*i)}t.closePath()}};const wA=vM(3);var MA={draw(t,e){const n=-vM(e/(3*wA));t.moveTo(0,2*n),t.lineTo(-wA*n,-n),t.lineTo(wA*n,-n),t.closePath()}};const AA=vM(3);var TA={draw(t,e){const n=.6824*vM(e),r=n/2,i=n*AA/2;t.moveTo(0,-n),t.lineTo(i,r),t.lineTo(-i,r),t.closePath()}};const EA=-.5,CA=vM(3)/2,kA=1/vM(12),SA=3*(kA/2+1);var PA={draw(t,e){const n=vM(e/SA),r=n/2,i=n*kA,o=r,a=n*kA+n,s=-o,u=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(s,u),t.lineTo(EA*r-CA*i,CA*r+EA*i),t.lineTo(EA*o-CA*a,CA*o+EA*a),t.lineTo(EA*s-CA*u,CA*s+EA*u),t.lineTo(EA*r+CA*i,EA*i-CA*r),t.lineTo(EA*o+CA*a,EA*a-CA*o),t.lineTo(EA*s+CA*u,EA*u-CA*s),t.closePath()}},OA={draw(t,e){const n=.6189*vM(e-gM(e/6,1.7));t.moveTo(-n,-n),t.lineTo(n,n),t.moveTo(-n,n),t.lineTo(n,-n)}};const RA=[lA,cA,dA,gA,bA,MA,PA],LA=[lA,mA,OA,TA,uA,yA,pA];function IA(t,e){let n=null,r=AM(i);function i(){let i;if(n||(n=i=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),i)return n=null,i+""||null}return t="function"==typeof t?t:fM(t||lA),e="function"==typeof e?e:fM(void 0===e?64:+e),i.type=function(e){return arguments.length?(t="function"==typeof e?e:fM(e),i):t},i.size=function(t){return arguments.length?(e="function"==typeof t?t:fM(+t),i):e},i.context=function(t){return arguments.length?(n=null==t?null:t,i):n},i}function DA(){}function NA(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function FA(t){this._context=t}function zA(t){return new FA(t)}function BA(t){this._context=t}function jA(t){return new BA(t)}function VA(t){this._context=t}function qA(t){return new VA(t)}function GA(t,e){this._basis=new FA(t),this._beta=e}FA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:NA(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:NA(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},BA.prototype={areaStart:DA,areaEnd:DA,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:NA(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},VA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:NA(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},GA.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],o=e[0],a=t[n]-i,s=e[n]-o,u=-1;++u<=n;)r=u/n,this._basis.point(this._beta*t[u]+(1-this._beta)*(i+r*a),this._beta*e[u]+(1-this._beta)*(o+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var UA=function t(e){function n(t){return 1===e?new FA(t):new GA(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function HA(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function WA(t,e){this._context=t,this._k=(1-e)/6}WA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:HA(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:HA(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var XA=function t(e){function n(t){return new WA(t,e)}return n.tension=function(e){return t(+e)},n}(0);function KA(t,e){this._context=t,this._k=(1-e)/6}KA.prototype={areaStart:DA,areaEnd:DA,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:HA(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var QA=function t(e){function n(t){return new KA(t,e)}return n.tension=function(e){return t(+e)},n}(0);function YA(t,e){this._context=t,this._k=(1-e)/6}YA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:HA(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var $A=function t(e){function n(t){return new YA(t,e)}return n.tension=function(e){return t(+e)},n}(0);function ZA(t,e,n){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>xM){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>xM){var l=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*l+t._x1*t._l23_2a-e*t._l12_2a)/c,a=(a*l+t._y1*t._l23_2a-n*t._l12_2a)/c}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function JA(t,e){this._context=t,this._alpha=e}JA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:ZA(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var tT=function t(e){function n(t){return e?new JA(t,e):new WA(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function eT(t,e){this._context=t,this._alpha=e}eT.prototype={areaStart:DA,areaEnd:DA,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:ZA(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var nT=function t(e){function n(t){return e?new eT(t,e):new KA(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function rT(t,e){this._context=t,this._alpha=e}rT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ZA(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var iT=function t(e){function n(t){return e?new rT(t,e):new YA(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function oT(t){this._context=t}function aT(t){return new oT(t)}function sT(t){return t<0?-1:1}function uT(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(sT(o)+sT(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function lT(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function cT(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function fT(t){this._context=t}function hT(t){this._context=new dT(t)}function dT(t){this._context=t}function pT(t){return new fT(t)}function mT(t){return new hT(t)}function gT(t){this._context=t}function yT(t){var e,n,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,a[e]-=n*a[e-1];for(i[r-1]=a[r-1]/o[r-1],e=r-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function vT(t){return new gT(t)}function xT(t,e){this._context=t,this._t=e}function _T(t){return new xT(t,.5)}function bT(t){return new xT(t,0)}function wT(t){return new xT(t,1)}function MT(t,e){if((i=t.length)>1)for(var n,r,i,o=1,a=t[e[0]],s=a.length;o<i;++o)for(r=a,a=t[e[o]],n=0;n<s;++n)a[n][1]+=a[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}function AT(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function TT(t,e){return t[e]}function ET(t){const e=[];return e.key=t,e}function CT(){var t=fM([]),e=AT,n=MT,r=TT;function i(i){var o,a,s=Array.from(t.apply(this,arguments),ET),u=s.length,l=-1;for(const t of i)for(o=0,++l;o<u;++o)(s[o][l]=[0,+r(t,s[o].key,l,i)]).data=t;for(o=0,a=LM(e(s));o<u;++o)s[a[o]].index=o;return n(s,a),s}return i.keys=function(e){return arguments.length?(t="function"==typeof e?e:fM(Array.from(e)),i):t},i.value=function(t){return arguments.length?(r="function"==typeof t?t:fM(+t),i):r},i.order=function(t){return arguments.length?(e=null==t?AT:"function"==typeof t?t:fM(Array.from(t)),i):e},i.offset=function(t){return arguments.length?(n=null==t?MT:t,i):n},i}function kT(t,e){if((r=t.length)>0){for(var n,r,i,o=0,a=t[0].length;o<a;++o){for(i=n=0;n<r;++n)i+=t[n][o][1]||0;if(i)for(n=0;n<r;++n)t[n][o][1]/=i}MT(t,e)}}function ST(t,e){if((s=t.length)>0)for(var n,r,i,o,a,s,u=0,l=t[e[0]].length;u<l;++u)for(o=a=0,n=0;n<s;++n)(i=(r=t[e[n]][u])[1]-r[0])>0?(r[0]=o,r[1]=o+=i):i<0?(r[1]=a,r[0]=a+=i):(r[0]=0,r[1]=i)}function PT(t,e){if((n=t.length)>0){for(var n,r=0,i=t[e[0]],o=i.length;r<o;++r){for(var a=0,s=0;a<n;++a)s+=t[a][r][1]||0;i[r][1]+=i[r][0]=-s/2}MT(t,e)}}function OT(t,e){if((i=t.length)>0&&(r=(n=t[e[0]]).length)>0){for(var n,r,i,o=0,a=1;a<r;++a){for(var s=0,u=0,l=0;s<i;++s){for(var c=t[e[s]],f=c[a][1]||0,h=(f-(c[a-1][1]||0))/2,d=0;d<s;++d){var p=t[e[d]];h+=(p[a][1]||0)-(p[a-1][1]||0)}u+=f,l+=h*f}n[a-1][1]+=n[a-1][0]=o,u&&(o-=l/u)}n[a-1][1]+=n[a-1][0]=o,MT(t,e)}}function RT(t){var e=t.map(LT);return AT(t).sort((function(t,n){return e[t]-e[n]}))}function LT(t){for(var e,n=-1,r=0,i=t.length,o=-1/0;++n<i;)(e=+t[n][1])>o&&(o=e,r=n);return r}function IT(t){var e=t.map(DT);return AT(t).sort((function(t,n){return e[t]-e[n]}))}function DT(t){for(var e,n=0,r=-1,i=t.length;++r<i;)(e=+t[r][1])&&(n+=e);return n}function NT(t){return IT(t).reverse()}function FT(t){var e,n,r=t.length,i=t.map(DT),o=RT(t),a=0,s=0,u=[],l=[];for(e=0;e<r;++e)n=o[e],a<s?(a+=i[n],u.push(n)):(s+=i[n],l.push(n));return l.reverse().concat(u)}function zT(t){return AT(t).reverse()}oT.prototype={areaStart:DA,areaEnd:DA,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},fT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:cT(this,this._t0,lT(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,cT(this,lT(this,n=uT(this,t,e)),n);break;default:cT(this,this._t0,n=uT(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(hT.prototype=Object.create(fT.prototype)).point=function(t,e){fT.prototype.point.call(this,e,t)},dT.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}},gT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=yT(t),i=yT(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},xT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var BT="%Y-%m-%dT%H:%M:%S.%LZ";var jT=Date.prototype.toISOString?function(t){return t.toISOString()}:Hx(BT),VT=jT;var qT=+new Date("2000-01-01T00:00:00.000Z")?function(t){var e=new Date(t);return isNaN(e)?null:e}:Wx(BT),GT=qT;function UT(t,e,n){var r=new di,i=e;return null==e?(r.restart(t,e,n),r):(r._restart=r.restart,r.restart=function(t,e,n){e=+e,n=null==n?fi():+n,r._restart((function o(a){a+=i,r._restart(o,i+=e,n),t(a)}),e,n)},r.restart(t,e,n),r)}var HT=t=>()=>t;function WT(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function XT(t,e,n){this.k=t,this.x=e,this.y=n}XT.prototype={constructor:XT,scale:function(t){return 1===t?this:new XT(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new XT(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var KT=new XT(1,0,0);function QT(t){for(;!t.__zoom;)if(!(t=t.parentNode))return KT;return t.__zoom}function YT(t){t.stopImmediatePropagation()}function $T(t){t.preventDefault(),t.stopImmediatePropagation()}function ZT(t){return!(t.ctrlKey&&"wheel"!==t.type||t.button)}function JT(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function tE(){return this.__zoom||KT}function eE(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function nE(){return navigator.maxTouchPoints||"ontouchstart"in this}function rE(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function iE(){var t,e,n,r=ZT,i=JT,o=rE,a=eE,s=nE,u=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],c=250,f=qg,h=Ee("start","zoom","end"),d=0,p=10;function m(t){t.property("__zoom",tE).on("wheel.zoom",w,{passive:!1}).on("mousedown.zoom",M).on("dblclick.zoom",A).filter(s).on("touchstart.zoom",T).on("touchmove.zoom",E).on("touchend.zoom touchcancel.zoom",C).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(t,e){return(e=Math.max(u[0],Math.min(u[1],e)))===t.k?t:new XT(e,t.x,t.y)}function y(t,e,n){var r=e[0]-n[0]*t.k,i=e[1]-n[1]*t.k;return r===t.x&&i===t.y?t:new XT(t.k,r,i)}function v(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function x(t,e,n,r){t.on("start.zoom",(function(){_(this,arguments).event(r).start()})).on("interrupt.zoom end.zoom",(function(){_(this,arguments).event(r).end()})).tween("zoom",(function(){var t=this,o=arguments,a=_(t,o).event(r),s=i.apply(t,o),u=null==n?v(s):"function"==typeof n?n.apply(t,o):n,l=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),c=t.__zoom,h="function"==typeof e?e.apply(t,o):e,d=f(c.invert(u).concat(l/c.k),h.invert(u).concat(l/h.k));return function(t){if(1===t)t=h;else{var e=d(t),n=l/e[2];t=new XT(n,u[0]-e[0]*n,u[1]-e[1]*n)}a.zoom(null,t)}}))}function _(t,e,n){return!n&&t.__zooming||new b(t,e)}function b(t,e){this.that=t,this.args=e,this.active=0,this.sourceEvent=null,this.extent=i.apply(t,e),this.taps=0}function w(t,...e){if(r.apply(this,arguments)){var n=_(this,e).event(t),i=this.__zoom,s=Math.max(u[0],Math.min(u[1],i.k*Math.pow(2,a.apply(this,arguments)))),c=ti(t);if(n.wheel)n.mouse[0][0]===c[0]&&n.mouse[0][1]===c[1]||(n.mouse[1]=i.invert(n.mouse[0]=c)),clearTimeout(n.wheel);else{if(i.k===s)return;n.mouse=[c,i.invert(c)],Pi(this),n.start()}$T(t),n.wheel=setTimeout((function(){n.wheel=null,n.end()}),150),n.zoom("mouse",o(y(g(i,s),n.mouse[0],n.mouse[1]),n.extent,l))}}function M(t,...e){if(!n&&r.apply(this,arguments)){var i=t.currentTarget,a=_(this,e,!0).event(t),s=Vn(t.view).on("mousemove.zoom",(function(t){if($T(t),!a.moved){var e=t.clientX-c,n=t.clientY-f;a.moved=e*e+n*n>d}a.event(t).zoom("mouse",o(y(a.that.__zoom,a.mouse[0]=ti(t,i),a.mouse[1]),a.extent,l))}),!0).on("mouseup.zoom",(function(t){s.on("mousemove.zoom mouseup.zoom",null),Xn(t.view,a.moved),$T(t),a.event(t).end()}),!0),u=ti(t,i),c=t.clientX,f=t.clientY;Wn(t.view),YT(t),a.mouse=[u,this.__zoom.invert(u)],Pi(this),a.start()}}function A(t,...e){if(r.apply(this,arguments)){var n=this.__zoom,a=ti(t.changedTouches?t.changedTouches[0]:t,this),s=n.invert(a),u=n.k*(t.shiftKey?.5:2),f=o(y(g(n,u),a,s),i.apply(this,e),l);$T(t),c>0?Vn(this).transition().duration(c).call(x,f,a,t):Vn(this).call(m.transform,f,a,t)}}function T(n,...i){if(r.apply(this,arguments)){var o,a,s,u,l=n.touches,c=l.length,f=_(this,i,n.changedTouches.length===c).event(n);for(YT(n),a=0;a<c;++a)u=[u=ti(s=l[a],this),this.__zoom.invert(u),s.identifier],f.touch0?f.touch1||f.touch0[2]===u[2]||(f.touch1=u,f.taps=0):(f.touch0=u,o=!0,f.taps=1+!!t);t&&(t=clearTimeout(t)),o&&(f.taps<2&&(e=u[0],t=setTimeout((function(){t=null}),500)),Pi(this),f.start())}}function E(t,...e){if(this.__zooming){var n,r,i,a,s=_(this,e).event(t),u=t.changedTouches,c=u.length;for($T(t),n=0;n<c;++n)i=ti(r=u[n],this),s.touch0&&s.touch0[2]===r.identifier?s.touch0[0]=i:s.touch1&&s.touch1[2]===r.identifier&&(s.touch1[0]=i);if(r=s.that.__zoom,s.touch1){var f=s.touch0[0],h=s.touch0[1],d=s.touch1[0],p=s.touch1[1],m=(m=d[0]-f[0])*m+(m=d[1]-f[1])*m,v=(v=p[0]-h[0])*v+(v=p[1]-h[1])*v;r=g(r,Math.sqrt(m/v)),i=[(f[0]+d[0])/2,(f[1]+d[1])/2],a=[(h[0]+p[0])/2,(h[1]+p[1])/2]}else{if(!s.touch0)return;i=s.touch0[0],a=s.touch0[1]}s.zoom("touch",o(y(r,i,a),s.extent,l))}}function C(t,...r){if(this.__zooming){var i,o,a=_(this,r).event(t),s=t.changedTouches,u=s.length;for(YT(t),n&&clearTimeout(n),n=setTimeout((function(){n=null}),500),i=0;i<u;++i)o=s[i],a.touch0&&a.touch0[2]===o.identifier?delete a.touch0:a.touch1&&a.touch1[2]===o.identifier&&delete a.touch1;if(a.touch1&&!a.touch0&&(a.touch0=a.touch1,delete a.touch1),a.touch0)a.touch0[1]=this.__zoom.invert(a.touch0[0]);else if(a.end(),2===a.taps&&(o=ti(o,this),Math.hypot(e[0]-o[0],e[1]-o[1])<p)){var l=Vn(this).on("dblclick.zoom");l&&l.apply(this,arguments)}}}return m.transform=function(t,e,n,r){var i=t.selection?t.selection():t;i.property("__zoom",tE),t!==i?x(t,e,n,r):i.interrupt().each((function(){_(this,arguments).event(r).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()}))},m.scaleBy=function(t,e,n,r){m.scaleTo(t,(function(){return this.__zoom.k*("function"==typeof e?e.apply(this,arguments):e)}),n,r)},m.scaleTo=function(t,e,n,r){m.transform(t,(function(){var t=i.apply(this,arguments),r=this.__zoom,a=null==n?v(t):"function"==typeof n?n.apply(this,arguments):n,s=r.invert(a),u="function"==typeof e?e.apply(this,arguments):e;return o(y(g(r,u),a,s),t,l)}),n,r)},m.translateBy=function(t,e,n,r){m.transform(t,(function(){return o(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),i.apply(this,arguments),l)}),null,r)},m.translateTo=function(t,e,n,r,a){m.transform(t,(function(){var t=i.apply(this,arguments),a=this.__zoom,s=null==r?v(t):"function"==typeof r?r.apply(this,arguments):r;return o(KT.translate(s[0],s[1]).scale(a.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof n?-n.apply(this,arguments):-n),t,l)}),r,a)},b.prototype={event:function(t){return t&&(this.sourceEvent=t),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){var e=Vn(this.that).datum();h.call(t,this.that,new WT(t,{sourceEvent:this.sourceEvent,target:m,type:t,transform:this.that.__zoom,dispatch:h}),e)}},m.wheelDelta=function(t){return arguments.length?(a="function"==typeof t?t:HT(+t),m):a},m.filter=function(t){return arguments.length?(r="function"==typeof t?t:HT(!!t),m):r},m.touchable=function(t){return arguments.length?(s="function"==typeof t?t:HT(!!t),m):s},m.extent=function(t){return arguments.length?(i="function"==typeof t?t:HT([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),m):i},m.scaleExtent=function(t){return arguments.length?(u[0]=+t[0],u[1]=+t[1],m):[u[0],u[1]]},m.translateExtent=function(t){return arguments.length?(l[0][0]=+t[0][0],l[1][0]=+t[1][0],l[0][1]=+t[0][1],l[1][1]=+t[1][1],m):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},m.constrain=function(t){return arguments.length?(o=t,m):o},m.duration=function(t){return arguments.length?(c=+t,m):c},m.interpolate=function(t){return arguments.length?(f=t,m):f},m.on=function(){var t=h.on.apply(h,arguments);return t===h?m:t},m.clickDistance=function(t){return arguments.length?(d=(t=+t)*t,m):Math.sqrt(d)},m.tapDistance=function(t){return arguments.length?(p=+t,m):p},m}QT.prototype=XT.prototype},2087:function(t,e,n){"use strict";function r(t,e,n=2){const r=e&&e.length,o=r?e[0]*n:t.length;let s=i(t,0,o,n,!0);const u=[];if(!s||s.next===s.prev)return u;let l,c,d;if(r&&(s=function(t,e,n,r){const o=[];for(let n=0,a=e.length;n<a;n++){const s=i(t,e[n]*r,n<a-1?e[n+1]*r:t.length,r,!1);s===s.next&&(s.steiner=!0),o.push(m(s))}o.sort(f);for(let t=0;t<o.length;t++)n=h(o[t],n);return n}(t,e,s,n)),t.length>80*n){l=1/0,c=1/0;let e=-1/0,r=-1/0;for(let i=n;i<o;i+=n){const n=t[i],o=t[i+1];n<l&&(l=n),o<c&&(c=o),n>e&&(e=n),o>r&&(r=o)}d=Math.max(e-l,r-c),d=0!==d?32767/d:0}return a(s,u,n,l,c,d,0),u}function i(t,e,n,r,i){let o;if(i===S(t,e,n,r)>0)for(let i=e;i<n;i+=r)o=T(i/r|0,t[i],t[i+1],o);else for(let i=n-r;i>=e;i-=r)o=T(i/r|0,t[i],t[i+1],o);return o&&x(o,o.next)&&(E(o),o=o.next),o}function o(t,e){if(!t)return t;e||(e=t);let n,r=t;do{if(n=!1,r.steiner||!x(r,r.next)&&0!==v(r.prev,r,r.next))r=r.next;else{if(E(r),r=e=r.prev,r===r.next)break;n=!0}}while(n||r!==e);return e}function a(t,e,n,r,i,f,h){if(!t)return;!h&&f&&function(t,e,n,r){let i=t;do{0===i.z&&(i.z=p(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){let e,n=1;do{let r,i=t;t=null;let o=null;for(e=0;i;){e++;let a=i,s=0;for(let t=0;t<n&&(s++,a=a.nextZ,a);t++);let u=n;for(;s>0||u>0&&a;)0!==s&&(0===u||!a||i.z<=a.z)?(r=i,i=i.nextZ,s--):(r=a,a=a.nextZ,u--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;i=a}o.nextZ=null,n*=2}while(e>1)}(i)}(t,r,i,f);let d=t;for(;t.prev!==t.next;){const p=t.prev,m=t.next;if(f?u(t,r,i,f):s(t))e.push(p.i,t.i,m.i),E(t),t=m.next,d=m.next;else if((t=m)===d){h?1===h?a(t=l(o(t),e),e,n,r,i,f,2):2===h&&c(t,e,n,r,i,f):a(o(t),e,n,r,i,f,1);break}}}function s(t){const e=t.prev,n=t,r=t.next;if(v(e,n,r)>=0)return!1;const i=e.x,o=n.x,a=r.x,s=e.y,u=n.y,l=r.y,c=i<o?i<a?i:a:o<a?o:a,f=s<u?s<l?s:l:u<l?u:l,h=i>o?i>a?i:a:o>a?o:a,d=s>u?s>l?s:l:u>l?u:l;let p=r.next;for(;p!==e;){if(p.x>=c&&p.x<=h&&p.y>=f&&p.y<=d&&g(i,s,o,u,a,l,p.x,p.y)&&v(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function u(t,e,n,r){const i=t.prev,o=t,a=t.next;if(v(i,o,a)>=0)return!1;const s=i.x,u=o.x,l=a.x,c=i.y,f=o.y,h=a.y,d=s<u?s<l?s:l:u<l?u:l,m=c<f?c<h?c:h:f<h?f:h,y=s>u?s>l?s:l:u>l?u:l,x=c>f?c>h?c:h:f>h?f:h,_=p(d,m,e,n,r),b=p(y,x,e,n,r);let w=t.prevZ,M=t.nextZ;for(;w&&w.z>=_&&M&&M.z<=b;){if(w.x>=d&&w.x<=y&&w.y>=m&&w.y<=x&&w!==i&&w!==a&&g(s,c,u,f,l,h,w.x,w.y)&&v(w.prev,w,w.next)>=0)return!1;if(w=w.prevZ,M.x>=d&&M.x<=y&&M.y>=m&&M.y<=x&&M!==i&&M!==a&&g(s,c,u,f,l,h,M.x,M.y)&&v(M.prev,M,M.next)>=0)return!1;M=M.nextZ}for(;w&&w.z>=_;){if(w.x>=d&&w.x<=y&&w.y>=m&&w.y<=x&&w!==i&&w!==a&&g(s,c,u,f,l,h,w.x,w.y)&&v(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;M&&M.z<=b;){if(M.x>=d&&M.x<=y&&M.y>=m&&M.y<=x&&M!==i&&M!==a&&g(s,c,u,f,l,h,M.x,M.y)&&v(M.prev,M,M.next)>=0)return!1;M=M.nextZ}return!0}function l(t,e){let n=t;do{const r=n.prev,i=n.next.next;!x(r,i)&&_(r,n,n.next,i)&&M(r,i)&&M(i,r)&&(e.push(r.i,n.i,i.i),E(n),E(n.next),n=t=i),n=n.next}while(n!==t);return o(n)}function c(t,e,n,r,i,s){let u=t;do{let t=u.next.next;for(;t!==u.prev;){if(u.i!==t.i&&y(u,t)){let l=A(u,t);return u=o(u,u.next),l=o(l,l.next),a(u,e,n,r,i,s,0),void a(l,e,n,r,i,s,0)}t=t.next}u=u.next}while(u!==t)}function f(t,e){return t.x-e.x}function h(t,e){const n=function(t,e){let n=e;const r=t.x,i=t.y;let o,a=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){const t=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(t<=r&&t>a&&(a=t,o=n.x<n.next.x?n:n.next,t===r))return o}n=n.next}while(n!==e);if(!o)return null;const s=o,u=o.x,l=o.y;let c=1/0;n=o;do{if(r>=n.x&&n.x>=u&&r!==n.x&&g(i<l?r:a,i,u,l,i<l?a:r,i,n.x,n.y)){const e=Math.abs(i-n.y)/(r-n.x);M(n,t)&&(e<c||e===c&&(n.x>o.x||n.x===o.x&&d(o,n)))&&(o=n,c=e)}n=n.next}while(n!==s);return o}(t,e);if(!n)return e;const r=A(n,t);return o(r,r.next),o(n,n.next)}function d(t,e){return v(t.prev,t,e.prev)<0&&v(e.next,t,t.next)<0}function p(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function m(t){let e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function g(t,e,n,r,i,o,a,s){return(i-a)*(e-s)>=(t-a)*(o-s)&&(t-a)*(r-s)>=(n-a)*(e-s)&&(n-a)*(o-s)>=(i-a)*(r-s)}function y(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&_(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(M(t,e)&&M(e,t)&&function(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(v(t.prev,t,e.prev)||v(t,e.prev,e))||x(t,e)&&v(t.prev,t,t.next)>0&&v(e.prev,e,e.next)>0)}function v(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function x(t,e){return t.x===e.x&&t.y===e.y}function _(t,e,n,r){const i=w(v(t,e,n)),o=w(v(t,e,r)),a=w(v(n,r,t)),s=w(v(n,r,e));return i!==o&&a!==s||(!(0!==i||!b(t,n,e))||(!(0!==o||!b(t,r,e))||(!(0!==a||!b(n,t,r))||!(0!==s||!b(n,e,r)))))}function b(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function w(t){return t>0?1:t<0?-1:0}function M(t,e){return v(t.prev,t,t.next)<0?v(t,e,t.next)>=0&&v(t,t.prev,e)>=0:v(t,e,t.prev)<0||v(t,t.next,e)<0}function A(t,e){const n=C(t.i,t.x,t.y),r=C(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function T(t,e,n,r){const i=C(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function E(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function C(t,e,n){return{i:t,x:e,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function k(t,e,n,r){const i=e&&e.length,o=i?e[0]*n:t.length;let a=Math.abs(S(t,0,o,n));if(i)for(let r=0,i=e.length;r<i;r++){const o=e[r]*n,s=r<i-1?e[r+1]*n:t.length;a-=Math.abs(S(t,o,s,n))}let s=0;for(let e=0;e<r.length;e+=3){const i=r[e]*n,o=r[e+1]*n,a=r[e+2]*n;s+=Math.abs((t[i]-t[a])*(t[o+1]-t[i+1])-(t[i]-t[o])*(t[a+1]-t[i+1]))}return 0===a&&0===s?0:Math.abs((s-a)/a)}function S(t,e,n,r){let i=0;for(let o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}function P(t){const e=[],n=[],r=t[0][0].length;let i=0,o=0;for(const a of t){for(const t of a)for(let n=0;n<r;n++)e.push(t[n]);o&&(i+=o,n.push(i)),o=a.length}return{vertices:e,holes:n,dimensions:r}}n.r(e),n.d(e,{default:function(){return r},deviation:function(){return k},flatten:function(){return P}})}},n={};function r(t){var i=n[t];if(void 0!==i)return i.exports;var o=n[t]={id:t,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.exports}return r.m=e,r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,{a:e}),e},r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.b=document.baseURI||self.location.href,r.nc=void 0,r(2257)}()}));
//# sourceMappingURL=geo.min.js.map