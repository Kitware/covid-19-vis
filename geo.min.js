(function e(t,n){if(typeof exports==="object"&&typeof module==="object")module.exports=n();else if(typeof define==="function"&&define.amd)define([],n);else if(typeof exports==="object")exports["geo"]=n();else t["geo"]=n()})(typeof self!=="undefined"?self:this,function(){return function(e){var t={};function n(r){if(t[r]){return t[r].exports}var i=t[r]={i:r,l:false,exports:{}};e[r].call(i.exports,i,i.exports,n);i.l=true;return i.exports}n.m=e;n.c=t;n.d=function(e,t,r){if(!n.o(e,t)){Object.defineProperty(e,t,{configurable:false,enumerable:true,get:r})}};n.n=function(e){var t=e&&e.__esModule?function t(){return e["default"]}:function t(){return e};n.d(t,"a",t);return t};n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};n.p="dist/built";return n(n.s=268)}([function(e,t,n){var r=n(6);var i=n(28);var a=n(21);var o=n(22);var s=n(29);var u="prototype";var l=function(e,t,n){var c=e&l.F;var f=e&l.G;var d=e&l.S;var p=e&l.P;var h=e&l.B;var g=f?r:d?r[t]||(r[t]={}):(r[t]||{})[u];var m=f?i:i[t]||(i[t]={});var v=m[u]||(m[u]={});var y,b,M,x;if(f)n=t;for(y in n){b=!c&&g&&g[y]!==undefined;M=(b?g:n)[y];x=h&&b?s(M,r):p&&typeof M=="function"?s(Function.call,M):M;if(g)o(g,y,M,e&l.U);if(m[y]!=M)a(m,y,x);if(p&&v[y]!=M)v[y]=M}};r.core=i;l.F=1;l.G=2;l.S=4;l.P=8;l.B=16;l.W=32;l.U=64;l.R=128;e.exports=l},function(e,t,n){"use strict";function r(){return function(){}}e.exports=function(e,t){var n=r();n.prototype=t.prototype;e.prototype=new n;e.prototype.constructor=e}},function(e,t,n){"use strict";var r=n(3);var i={dom:{}};var a={};var o={};var s={};var u={};var l={};var c={};var f={};var d={};var p={};p.registerFileReader=function(e,t){c[e]=t};p.createFileReader=function(e,t){if(c.hasOwnProperty(e)){return c[e](t)}return null};p.registerRenderer=function(e,t){s[e]=t};p.createRenderer=function(e,t,n,r){if(s.hasOwnProperty(e)){var i=s[e]({layer:t,canvas:n,options:r});i._init();return i}return null};p.checkRenderer=function(e,t){if(e===null){return e}if(s.hasOwnProperty(e)){var n=s[e];if(!n.supported||n.supported()){return n.apiname||e}if(!n.fallback||t){return false}var r=p.checkRenderer(n.fallback(),true);if(r!==false){console.warn(e+" renderer is unavailable, using "+r+" renderer instead")}return r}return false};p.rendererForFeatures=function(e){var t=["webgl","canvas","svg","vtkjs",null];var n,r,i,a,o,s;for(r=0;r<t.length;r+=1){n=t[r];if(p.checkRenderer(n,true)===false){continue}if(!e){return n}if(!u[n]){continue}s=true;for(a=0;a<e.length;a+=1){i=e[a];o=null;if(i.indexOf(".")>=0){o=i;i=i.substr(0,i.indexOf("."))}if(u[n][i]===undefined){s=false;break}if(o&&l[n][i]&&!l[n][i][o]){s=false;break}}if(s){return n}}console.warn('There is no renderer available for the feature list "'+(e||[]).join(", ")+'".');return false};p.registerFeature=function(e,t,n,r){if(!(e in u)){u[e]={};l[e]={}}var i=u[e][t];if(i){console.warn("The "+e+"."+t+" feature is already registered")}u[e][t]=n;l[e][t]=r;return i};p.createFeature=function(e,t,n,i){var a=n.api(),o={layer:t,renderer:n};if(a in u&&e in u[a]){if(i!==undefined){r.extend(true,o,i)}var s=u[a][e](o);if(t.gcs===undefined){t.gcs=function(){return t.map().gcs()}}return s}return null};p.registerLayerAdjustment=function(e,t,n){if(!(e in f)){f[e]={}}var r=f[e][t];if(r){console.warn("The "+e+"."+t+" layer adjustment is already registered")}f[e][t]=n;return r};p.adjustLayerForRenderer=function(e,t){var n=t.rendererName();if(n){if(f&&f[n]&&f[n][e]){f[n][e].apply(t)}}};p.registerLayer=function(e,t,n){a[e]=t;o[e]=n};p.createLayer=function(e,t,n){var i={map:t},s=null;if(e in a){if(!n.renderer&&!n.features&&o){i.features=o[e]}if(n!==undefined){r.extend(true,i,n)}s=a[e](i);s.layerName=e;s._init();return s}else{return null}};p.registerWidget=function(e,t,n){if(!(e in i)){i[e]={}}var r=i[e][t];if(r){console.warn("The "+e+"."+t+" widget is already registered")}i[e][t]=n;return r};p.createWidget=function(e,t,n){var a={layer:t};if(e in i.dom){if(n!==undefined){r.extend(true,a,n)}return i.dom[e](a)}throw new Error("Cannot create unknown widget "+e)};p.registerAnnotation=function(e,t,n){var r=d[e];if(r){console.warn("The "+e+" annotation is already registered")}d[e]={func:t,features:n||{}};return r};p.createAnnotation=function(e,t){if(!d[e]){console.warn("The "+e+" annotation is not registered");return}var n=d[e].func(t);return n};p.listAnnotations=function(){return Object.keys(d)};p.featuresForAnnotations=function(e){var t=[];var n=Array.isArray(e)?e:Object.keys(e);n.forEach(function(n){if(!d[n]){return}Object.keys(d[n].features).forEach(function(i){if(Array.isArray(e)||e[n]===true||!Array.isArray(d[n].features[i])){t.push(i)}else{e[n].forEach(function(e){if(r.inArray(e,d[n].features[i])>=0){t.push(i)}})}})});return t};p.rendererForAnnotations=function(e){return p.rendererForFeatures(p.featuresForAnnotations(e))};p.registries={annotations:d,features:u,featureCapabilities:l,fileReaders:c,layers:a,renderers:s,widgets:i};e.exports=p},function(e,t,n){var r,i;
/*!
 * jQuery JavaScript Library v3.4.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2019-05-01T21:04Z
 */
/*!
 * jQuery JavaScript Library v3.4.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2019-05-01T21:04Z
 */
(function(t,n){"use strict";if(typeof e==="object"&&typeof e.exports==="object"){e.exports=t.document?n(t,true):function(e){if(!e.document){throw new Error("jQuery requires a window with a document")}return n(e)}}else{n(t)}})(typeof window!=="undefined"?window:this,function(n,a){"use strict";var o=[];var s=n.document;var u=Object.getPrototypeOf;var l=o.slice;var c=o.concat;var f=o.push;var d=o.indexOf;var p={};var h=p.toString;var g=p.hasOwnProperty;var m=g.toString;var v=m.call(Object);var y={};var b=function e(t){return typeof t==="function"&&typeof t.nodeType!=="number"};var M=function e(t){return t!=null&&t===t.window};var x={type:true,src:true,nonce:true,noModule:true};function w(e,t,n){n=n||s;var r,i,a=n.createElement("script");a.text=e;if(t){for(r in x){i=t[r]||t.getAttribute&&t.getAttribute(r);if(i){a.setAttribute(r,i)}}}n.head.appendChild(a).parentNode.removeChild(a)}function A(e){if(e==null){return e+""}return typeof e==="object"||typeof e==="function"?p[h.call(e)]||"object":typeof e}var T="3.4.1",C=function(e,t){return new C.fn.init(e,t)},S=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;C.fn=C.prototype={jquery:T,constructor:C,length:0,toArray:function(){return l.call(this)},get:function(e){if(e==null){return l.call(this)}return e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=C.merge(this.constructor(),e);t.prevObject=this;return t},each:function(e){return C.each(this,e)},map:function(e){return this.pushStack(C.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(l.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:f,sort:o.sort,splice:o.splice};C.extend=C.fn.extend=function(){var e,t,n,r,i,a,o=arguments[0]||{},s=1,u=arguments.length,l=false;if(typeof o==="boolean"){l=o;o=arguments[s]||{};s++}if(typeof o!=="object"&&!b(o)){o={}}if(s===u){o=this;s--}for(;s<u;s++){if((e=arguments[s])!=null){for(t in e){r=e[t];if(t==="__proto__"||o===r){continue}if(l&&r&&(C.isPlainObject(r)||(i=Array.isArray(r)))){n=o[t];if(i&&!Array.isArray(n)){a=[]}else if(!i&&!C.isPlainObject(n)){a={}}else{a=n}i=false;o[t]=C.extend(l,a,r)}else if(r!==undefined){o[t]=r}}}}return o};C.extend({expando:"jQuery"+(T+Math.random()).replace(/\D/g,""),isReady:true,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;if(!e||h.call(e)!=="[object Object]"){return false}t=u(e);if(!t){return true}n=g.call(t,"constructor")&&t.constructor;return typeof n==="function"&&m.call(n)===v},isEmptyObject:function(e){var t;for(t in e){return false}return true},globalEval:function(e,t){w(e,{nonce:t&&t.nonce})},each:function(e,t){var n,r=0;if(D(e)){n=e.length;for(;r<n;r++){if(t.call(e[r],r,e[r])===false){break}}}else{for(r in e){if(t.call(e[r],r,e[r])===false){break}}}return e},trim:function(e){return e==null?"":(e+"").replace(S,"")},makeArray:function(e,t){var n=t||[];if(e!=null){if(D(Object(e))){C.merge(n,typeof e==="string"?[e]:e)}else{f.call(n,e)}}return n},inArray:function(e,t,n){return t==null?-1:d.call(t,e,n)},merge:function(e,t){var n=+t.length,r=0,i=e.length;for(;r<n;r++){e[i++]=t[r]}e.length=i;return e},grep:function(e,t,n){var r,i=[],a=0,o=e.length,s=!n;for(;a<o;a++){r=!t(e[a],a);if(r!==s){i.push(e[a])}}return i},map:function(e,t,n){var r,i,a=0,o=[];if(D(e)){r=e.length;for(;a<r;a++){i=t(e[a],a,n);if(i!=null){o.push(i)}}}else{for(a in e){i=t(e[a],a,n);if(i!=null){o.push(i)}}}return c.apply([],o)},guid:1,support:y});if(typeof Symbol==="function"){C.fn[Symbol.iterator]=o[Symbol.iterator]}C.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){p["[object "+t+"]"]=t.toLowerCase()});function D(e){var t=!!e&&"length"in e&&e.length,n=A(e);if(b(e)||M(e)){return false}return n==="array"||t===0||typeof t==="number"&&t>0&&t-1 in e}var I=
/*!
 * Sizzle CSS Selector Engine v2.3.4
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://js.foundation/
 *
 * Date: 2019-04-08
 */
function(e){var t,n,r,i,a,o,s,u,l,c,f,d,p,h,g,m,v,y,b,M="sizzle"+1*new Date,x=e.document,w=0,A=0,T=ue(),C=ue(),S=ue(),D=ue(),I=function(e,t){if(e===t){f=true}return 0},E={}.hasOwnProperty,N=[],O=N.pop,_=N.push,L=N.push,P=N.slice,k=function(e,t){var n=0,r=e.length;for(;n<r;n++){if(e[n]===t){return n}}return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",j="[\\x20\\t\\r\\n\\f]",B="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",z="\\["+j+"*("+B+")(?:"+j+"*([*^$|!~]?=)"+j+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+B+"))|)"+j+"*\\]",F=":("+B+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+z+")*)|"+".*"+")\\)|)",V=new RegExp(j+"+","g"),U=new RegExp("^"+j+"+|((?:^|[^\\\\])(?:\\\\.)*)"+j+"+$","g"),G=new RegExp("^"+j+"*,"+j+"*"),W=new RegExp("^"+j+"*([>+~]|"+j+")"+j+"*"),H=new RegExp(j+"|>"),Y=new RegExp(F),Q=new RegExp("^"+B+"$"),q={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),TAG:new RegExp("^("+B+"|[*])"),ATTR:new RegExp("^"+z),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+j+"*(even|odd|(([+-]|)(\\d*)n|)"+j+"*(?:([+-]|)"+j+"*(\\d+)|))"+j+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+j+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+j+"*((?:-\\d)?\\d*)"+j+"*\\)|)(?=[^-]|$)","i")},X=/HTML$/i,K=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,J=/^[^{]+\{\s*\[native \w/,$=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\([\\da-f]{1,6}"+j+"?|("+j+")|.)","ig"),ne=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,r&1023|56320)},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){if(t){if(e==="\0"){return"�"}return e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" "}return"\\"+e},ae=function(){d()},oe=Me(function(e){return e.disabled===true&&e.nodeName.toLowerCase()==="fieldset"},{dir:"parentNode",next:"legend"});try{L.apply(N=P.call(x.childNodes),x.childNodes);N[x.childNodes.length].nodeType}catch(e){L={apply:N.length?function(e,t){_.apply(e,P.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]){}e.length=n-1}}}function se(e,t,r,i){var a,s,l,c,f,h,v,y=t&&t.ownerDocument,w=t?t.nodeType:9;r=r||[];if(typeof e!=="string"||!e||w!==1&&w!==9&&w!==11){return r}if(!i){if((t?t.ownerDocument||t:x)!==p){d(t)}t=t||p;if(g){if(w!==11&&(f=$.exec(e))){if(a=f[1]){if(w===9){if(l=t.getElementById(a)){if(l.id===a){r.push(l);return r}}else{return r}}else{if(y&&(l=y.getElementById(a))&&b(t,l)&&l.id===a){r.push(l);return r}}}else if(f[2]){L.apply(r,t.getElementsByTagName(e));return r}else if((a=f[3])&&n.getElementsByClassName&&t.getElementsByClassName){L.apply(r,t.getElementsByClassName(a));return r}}if(n.qsa&&!D[e+" "]&&(!m||!m.test(e))&&(w!==1||t.nodeName.toLowerCase()!=="object")){v=e;y=t;if(w===1&&H.test(e)){if(c=t.getAttribute("id")){c=c.replace(re,ie)}else{t.setAttribute("id",c=M)}h=o(e);s=h.length;while(s--){h[s]="#"+c+" "+be(h[s])}v=h.join(",");y=ee.test(e)&&ve(t.parentNode)||t}try{L.apply(r,y.querySelectorAll(v));return r}catch(t){D(e,true)}finally{if(c===M){t.removeAttribute("id")}}}}}return u(e.replace(U,"$1"),t,r,i)}function ue(){var e=[];function t(n,i){if(e.push(n+" ")>r.cacheLength){delete t[e.shift()]}return t[n+" "]=i}return t}function le(e){e[M]=true;return e}function ce(e){var t=p.createElement("fieldset");try{return!!e(t)}catch(e){return false}finally{if(t.parentNode){t.parentNode.removeChild(t)}t=null}}function fe(e,t){var n=e.split("|"),i=n.length;while(i--){r.attrHandle[n[i]]=t}}function de(e,t){var n=t&&e,r=n&&e.nodeType===1&&t.nodeType===1&&e.sourceIndex-t.sourceIndex;if(r){return r}if(n){while(n=n.nextSibling){if(n===t){return-1}}}return e?1:-1}function pe(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function he(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function ge(e){return function(t){if("form"in t){if(t.parentNode&&t.disabled===false){if("label"in t){if("label"in t.parentNode){return t.parentNode.disabled===e}else{return t.disabled===e}}return t.isDisabled===e||t.isDisabled!==!e&&oe(t)===e}return t.disabled===e}else if("label"in t){return t.disabled===e}return false}}function me(e){return le(function(t){t=+t;return le(function(n,r){var i,a=e([],n.length,t),o=a.length;while(o--){if(n[i=a[o]]){n[i]=!(r[i]=n[i])}}})})}function ve(e){return e&&typeof e.getElementsByTagName!=="undefined"&&e}n=se.support={};a=se.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!X.test(t||n&&n.nodeName||"HTML")};d=se.setDocument=function(e){var t,i,o=e?e.ownerDocument||e:x;if(o===p||o.nodeType!==9||!o.documentElement){return p}p=o;h=p.documentElement;g=!a(p);if(x!==p&&(i=p.defaultView)&&i.top!==i){if(i.addEventListener){i.addEventListener("unload",ae,false)}else if(i.attachEvent){i.attachEvent("onunload",ae)}}n.attributes=ce(function(e){e.className="i";return!e.getAttribute("className")});n.getElementsByTagName=ce(function(e){e.appendChild(p.createComment(""));return!e.getElementsByTagName("*").length});n.getElementsByClassName=J.test(p.getElementsByClassName);n.getById=ce(function(e){h.appendChild(e).id=M;return!p.getElementsByName||!p.getElementsByName(M).length});if(n.getById){r.filter["ID"]=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}};r.find["ID"]=function(e,t){if(typeof t.getElementById!=="undefined"&&g){var n=t.getElementById(e);return n?[n]:[]}}}else{r.filter["ID"]=function(e){var t=e.replace(te,ne);return function(e){var n=typeof e.getAttributeNode!=="undefined"&&e.getAttributeNode("id");return n&&n.value===t}};r.find["ID"]=function(e,t){if(typeof t.getElementById!=="undefined"&&g){var n,r,i,a=t.getElementById(e);if(a){n=a.getAttributeNode("id");if(n&&n.value===e){return[a]}i=t.getElementsByName(e);r=0;while(a=i[r++]){n=a.getAttributeNode("id");if(n&&n.value===e){return[a]}}}return[]}}}r.find["TAG"]=n.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!=="undefined"){return t.getElementsByTagName(e)}else if(n.qsa){return t.querySelectorAll(e)}}:function(e,t){var n,r=[],i=0,a=t.getElementsByTagName(e);if(e==="*"){while(n=a[i++]){if(n.nodeType===1){r.push(n)}}return r}return a};r.find["CLASS"]=n.getElementsByClassName&&function(e,t){if(typeof t.getElementsByClassName!=="undefined"&&g){return t.getElementsByClassName(e)}};v=[];m=[];if(n.qsa=J.test(p.querySelectorAll)){ce(function(e){h.appendChild(e).innerHTML="<a id='"+M+"'></a>"+"<select id='"+M+"-\r\\' msallowcapture=''>"+"<option selected=''></option></select>";if(e.querySelectorAll("[msallowcapture^='']").length){m.push("[*^$]="+j+"*(?:''|\"\")")}if(!e.querySelectorAll("[selected]").length){m.push("\\["+j+"*(?:value|"+R+")")}if(!e.querySelectorAll("[id~="+M+"-]").length){m.push("~=")}if(!e.querySelectorAll(":checked").length){m.push(":checked")}if(!e.querySelectorAll("a#"+M+"+*").length){m.push(".#.+[+~]")}});ce(function(e){e.innerHTML="<a href='' disabled='disabled'></a>"+"<select disabled='disabled'><option/></select>";var t=p.createElement("input");t.setAttribute("type","hidden");e.appendChild(t).setAttribute("name","D");if(e.querySelectorAll("[name=d]").length){m.push("name"+j+"*[*^$|!~]?=")}if(e.querySelectorAll(":enabled").length!==2){m.push(":enabled",":disabled")}h.appendChild(e).disabled=true;if(e.querySelectorAll(":disabled").length!==2){m.push(":enabled",":disabled")}e.querySelectorAll("*,:x");m.push(",.*:")})}if(n.matchesSelector=J.test(y=h.matches||h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector)){ce(function(e){n.disconnectedMatch=y.call(e,"*");y.call(e,"[s!='']:x");v.push("!=",F)})}m=m.length&&new RegExp(m.join("|"));v=v.length&&new RegExp(v.join("|"));t=J.test(h.compareDocumentPosition);b=t||J.test(h.contains)?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!(r&&r.nodeType===1&&(n.contains?n.contains(r):e.compareDocumentPosition&&e.compareDocumentPosition(r)&16))}:function(e,t){if(t){while(t=t.parentNode){if(t===e){return true}}}return false};I=t?function(e,t){if(e===t){f=true;return 0}var r=!e.compareDocumentPosition-!t.compareDocumentPosition;if(r){return r}r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1;if(r&1||!n.sortDetached&&t.compareDocumentPosition(e)===r){if(e===p||e.ownerDocument===x&&b(x,e)){return-1}if(t===p||t.ownerDocument===x&&b(x,t)){return 1}return c?k(c,e)-k(c,t):0}return r&4?-1:1}:function(e,t){if(e===t){f=true;return 0}var n,r=0,i=e.parentNode,a=t.parentNode,o=[e],s=[t];if(!i||!a){return e===p?-1:t===p?1:i?-1:a?1:c?k(c,e)-k(c,t):0}else if(i===a){return de(e,t)}n=e;while(n=n.parentNode){o.unshift(n)}n=t;while(n=n.parentNode){s.unshift(n)}while(o[r]===s[r]){r++}return r?de(o[r],s[r]):o[r]===x?-1:s[r]===x?1:0};return p};se.matches=function(e,t){return se(e,null,null,t)};se.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p){d(e)}if(n.matchesSelector&&g&&!D[t+" "]&&(!v||!v.test(t))&&(!m||!m.test(t))){try{var r=y.call(e,t);if(r||n.disconnectedMatch||e.document&&e.document.nodeType!==11){return r}}catch(e){D(t,true)}}return se(t,p,null,[e]).length>0};se.contains=function(e,t){if((e.ownerDocument||e)!==p){d(e)}return b(e,t)};se.attr=function(e,t){if((e.ownerDocument||e)!==p){d(e)}var i=r.attrHandle[t.toLowerCase()],a=i&&E.call(r.attrHandle,t.toLowerCase())?i(e,t,!g):undefined;return a!==undefined?a:n.attributes||!g?e.getAttribute(t):(a=e.getAttributeNode(t))&&a.specified?a.value:null};se.escape=function(e){return(e+"").replace(re,ie)};se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};se.uniqueSort=function(e){var t,r=[],i=0,a=0;f=!n.detectDuplicates;c=!n.sortStable&&e.slice(0);e.sort(I);if(f){while(t=e[a++]){if(t===e[a]){i=r.push(a)}}while(i--){e.splice(r[i],1)}}c=null;return e};i=se.getText=function(e){var t,n="",r=0,a=e.nodeType;if(!a){while(t=e[r++]){n+=i(t)}}else if(a===1||a===9||a===11){if(typeof e.textContent==="string"){return e.textContent}else{for(e=e.firstChild;e;e=e.nextSibling){n+=i(e)}}}else if(a===3||a===4){return e.nodeValue}return n};r=se.selectors={cacheLength:50,createPseudo:le,match:q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){e[1]=e[1].replace(te,ne);e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne);if(e[2]==="~="){e[3]=" "+e[3]+" "}return e.slice(0,4)},CHILD:function(e){e[1]=e[1].toLowerCase();if(e[1].slice(0,3)==="nth"){if(!e[3]){se.error(e[0])}e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd"));e[5]=+(e[7]+e[8]||e[3]==="odd")}else if(e[3]){se.error(e[0])}return e},PSEUDO:function(e){var t,n=!e[6]&&e[2];if(q["CHILD"].test(e[0])){return null}if(e[3]){e[2]=e[4]||e[5]||""}else if(n&&Y.test(n)&&(t=o(n,true))&&(t=n.indexOf(")",n.length-t)-n.length)){e[0]=e[0].slice(0,t);e[2]=n.slice(0,t)}return e.slice(0,3)}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return e==="*"?function(){return true}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=T[e+" "];return t||(t=new RegExp("(^|"+j+")"+e+"("+j+"|$)"))&&T(e,function(e){return t.test(typeof e.className==="string"&&e.className||typeof e.getAttribute!=="undefined"&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=se.attr(r,e);if(i==null){return t==="!="}if(!t){return true}i+="";return t==="="?i===n:t==="!="?i!==n:t==="^="?n&&i.indexOf(n)===0:t==="*="?n&&i.indexOf(n)>-1:t==="$="?n&&i.slice(-n.length)===n:t==="~="?(" "+i.replace(V," ")+" ").indexOf(n)>-1:t==="|="?i===n||i.slice(0,n.length+1)===n+"-":false}},CHILD:function(e,t,n,r,i){var a=e.slice(0,3)!=="nth",o=e.slice(-4)!=="last",s=t==="of-type";return r===1&&i===0?function(e){return!!e.parentNode}:function(t,n,u){var l,c,f,d,p,h,g=a!==o?"nextSibling":"previousSibling",m=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!u&&!s,b=false;if(m){if(a){while(g){d=t;while(d=d[g]){if(s?d.nodeName.toLowerCase()===v:d.nodeType===1){return false}}h=g=e==="only"&&!h&&"nextSibling"}return true}h=[o?m.firstChild:m.lastChild];if(o&&y){d=m;f=d[M]||(d[M]={});c=f[d.uniqueID]||(f[d.uniqueID]={});l=c[e]||[];p=l[0]===w&&l[1];b=p&&l[2];d=p&&m.childNodes[p];while(d=++p&&d&&d[g]||(b=p=0)||h.pop()){if(d.nodeType===1&&++b&&d===t){c[e]=[w,p,b];break}}}else{if(y){d=t;f=d[M]||(d[M]={});c=f[d.uniqueID]||(f[d.uniqueID]={});l=c[e]||[];p=l[0]===w&&l[1];b=p}if(b===false){while(d=++p&&d&&d[g]||(b=p=0)||h.pop()){if((s?d.nodeName.toLowerCase()===v:d.nodeType===1)&&++b){if(y){f=d[M]||(d[M]={});c=f[d.uniqueID]||(f[d.uniqueID]={});c[e]=[w,b]}if(d===t){break}}}}}b-=i;return b===r||b%r===0&&b/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);if(i[M]){return i(t)}if(i.length>1){n=[e,e,"",t];return r.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,n){var r,a=i(e,t),o=a.length;while(o--){r=k(e,a[o]);e[r]=!(n[r]=a[o])}}):function(e){return i(e,0,n)}}return i}},pseudos:{not:le(function(e){var t=[],n=[],r=s(e.replace(U,"$1"));return r[M]?le(function(e,t,n,i){var a,o=r(e,null,i,[]),s=e.length;while(s--){if(a=o[s]){e[s]=!(t[s]=a)}}}):function(e,i,a){t[0]=e;r(t,null,a,n);t[0]=null;return!n.pop()}}),has:le(function(e){return function(t){return se(e,t).length>0}}),contains:le(function(e){e=e.replace(te,ne);return function(t){return(t.textContent||i(t)).indexOf(e)>-1}}),lang:le(function(e){if(!Q.test(e||"")){se.error("unsupported lang: "+e)}e=e.replace(te,ne).toLowerCase();return function(t){var n;do{if(n=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang")){n=n.toLowerCase();return n===e||n.indexOf(e+"-")===0}}while((t=t.parentNode)&&t.nodeType===1);return false}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(false),disabled:ge(true),checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex}return e.selected===true},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling){if(e.nodeType<6){return false}}return true},parent:function(e){return!r.pseudos["empty"](e)},header:function(e){return Z.test(e.nodeName)},input:function(e){return K.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},text:function(e){var t;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((t=e.getAttribute("type"))==null||t.toLowerCase()==="text")},first:me(function(){return[0]}),last:me(function(e,t){return[t-1]}),eq:me(function(e,t,n){return[n<0?n+t:n]}),even:me(function(e,t){var n=0;for(;n<t;n+=2){e.push(n)}return e}),odd:me(function(e,t){var n=1;for(;n<t;n+=2){e.push(n)}return e}),lt:me(function(e,t,n){var r=n<0?n+t:n>t?t:n;for(;--r>=0;){e.push(r)}return e}),gt:me(function(e,t,n){var r=n<0?n+t:n;for(;++r<t;){e.push(r)}return e})}};r.pseudos["nth"]=r.pseudos["eq"];for(t in{radio:true,checkbox:true,file:true,password:true,image:true}){r.pseudos[t]=pe(t)}for(t in{submit:true,reset:true}){r.pseudos[t]=he(t)}function ye(){}ye.prototype=r.filters=r.pseudos;r.setFilters=new ye;o=se.tokenize=function(e,t){var n,i,a,o,s,u,l,c=C[e+" "];if(c){return t?0:c.slice(0)}s=e;u=[];l=r.preFilter;while(s){if(!n||(i=G.exec(s))){if(i){s=s.slice(i[0].length)||s}u.push(a=[])}n=false;if(i=W.exec(s)){n=i.shift();a.push({value:n,type:i[0].replace(U," ")});s=s.slice(n.length)}for(o in r.filter){if((i=q[o].exec(s))&&(!l[o]||(i=l[o](i)))){n=i.shift();a.push({value:n,type:o,matches:i});s=s.slice(n.length)}}if(!n){break}}return t?s.length:s?se.error(e):C(e,u).slice(0)};function be(e){var t=0,n=e.length,r="";for(;t<n;t++){r+=e[t].value}return r}function Me(e,t,n){var r=t.dir,i=t.next,a=i||r,o=n&&a==="parentNode",s=A++;return t.first?function(t,n,i){while(t=t[r]){if(t.nodeType===1||o){return e(t,n,i)}}return false}:function(t,n,u){var l,c,f,d=[w,s];if(u){while(t=t[r]){if(t.nodeType===1||o){if(e(t,n,u)){return true}}}}else{while(t=t[r]){if(t.nodeType===1||o){f=t[M]||(t[M]={});c=f[t.uniqueID]||(f[t.uniqueID]={});if(i&&i===t.nodeName.toLowerCase()){t=t[r]||t}else if((l=c[a])&&l[0]===w&&l[1]===s){return d[2]=l[2]}else{c[a]=d;if(d[2]=e(t,n,u)){return true}}}}}return false}}function xe(e){return e.length>1?function(t,n,r){var i=e.length;while(i--){if(!e[i](t,n,r)){return false}}return true}:e[0]}function we(e,t,n){var r=0,i=t.length;for(;r<i;r++){se(e,t[r],n)}return n}function Ae(e,t,n,r,i){var a,o=[],s=0,u=e.length,l=t!=null;for(;s<u;s++){if(a=e[s]){if(!n||n(a,r,i)){o.push(a);if(l){t.push(s)}}}}return o}function Te(e,t,n,r,i,a){if(r&&!r[M]){r=Te(r)}if(i&&!i[M]){i=Te(i,a)}return le(function(a,o,s,u){var l,c,f,d=[],p=[],h=o.length,g=a||we(t||"*",s.nodeType?[s]:s,[]),m=e&&(a||!t)?Ae(g,d,e,s,u):g,v=n?i||(a?e:h||r)?[]:o:m;if(n){n(m,v,s,u)}if(r){l=Ae(v,p);r(l,[],s,u);c=l.length;while(c--){if(f=l[c]){v[p[c]]=!(m[p[c]]=f)}}}if(a){if(i||e){if(i){l=[];c=v.length;while(c--){if(f=v[c]){l.push(m[c]=f)}}i(null,v=[],l,u)}c=v.length;while(c--){if((f=v[c])&&(l=i?k(a,f):d[c])>-1){a[l]=!(o[l]=f)}}}}else{v=Ae(v===o?v.splice(h,v.length):v);if(i){i(null,o,v,u)}else{L.apply(o,v)}}})}function Ce(e){var t,n,i,a=e.length,o=r.relative[e[0].type],s=o||r.relative[" "],u=o?1:0,c=Me(function(e){return e===t},s,true),f=Me(function(e){return k(t,e)>-1},s,true),d=[function(e,n,r){var i=!o&&(r||n!==l)||((t=n).nodeType?c(e,n,r):f(e,n,r));t=null;return i}];for(;u<a;u++){if(n=r.relative[e[u].type]){d=[Me(xe(d),n)]}else{n=r.filter[e[u].type].apply(null,e[u].matches);if(n[M]){i=++u;for(;i<a;i++){if(r.relative[e[i].type]){break}}return Te(u>1&&xe(d),u>1&&be(e.slice(0,u-1).concat({value:e[u-2].type===" "?"*":""})).replace(U,"$1"),n,u<i&&Ce(e.slice(u,i)),i<a&&Ce(e=e.slice(i)),i<a&&be(e))}d.push(n)}}return xe(d)}function Se(e,t){var n=t.length>0,i=e.length>0,a=function(a,o,s,u,c){var f,h,m,v=0,y="0",b=a&&[],M=[],x=l,A=a||i&&r.find["TAG"]("*",c),T=w+=x==null?1:Math.random()||.1,C=A.length;if(c){l=o===p||o||c}for(;y!==C&&(f=A[y])!=null;y++){if(i&&f){h=0;if(!o&&f.ownerDocument!==p){d(f);s=!g}while(m=e[h++]){if(m(f,o||p,s)){u.push(f);break}}if(c){w=T}}if(n){if(f=!m&&f){v--}if(a){b.push(f)}}}v+=y;if(n&&y!==v){h=0;while(m=t[h++]){m(b,M,o,s)}if(a){if(v>0){while(y--){if(!(b[y]||M[y])){M[y]=O.call(u)}}}M=Ae(M)}L.apply(u,M);if(c&&!a&&M.length>0&&v+t.length>1){se.uniqueSort(u)}}if(c){w=T;l=x}return b};return n?le(a):a}s=se.compile=function(e,t){var n,r=[],i=[],a=S[e+" "];if(!a){if(!t){t=o(e)}n=t.length;while(n--){a=Ce(t[n]);if(a[M]){r.push(a)}else{i.push(a)}}a=S(e,Se(i,r));a.selector=e}return a};u=se.select=function(e,t,n,i){var a,u,l,c,f,d=typeof e==="function"&&e,p=!i&&o(e=d.selector||e);n=n||[];if(p.length===1){u=p[0]=p[0].slice(0);if(u.length>2&&(l=u[0]).type==="ID"&&t.nodeType===9&&g&&r.relative[u[1].type]){t=(r.find["ID"](l.matches[0].replace(te,ne),t)||[])[0];if(!t){return n}else if(d){t=t.parentNode}e=e.slice(u.shift().value.length)}a=q["needsContext"].test(e)?0:u.length;while(a--){l=u[a];if(r.relative[c=l.type]){break}if(f=r.find[c]){if(i=f(l.matches[0].replace(te,ne),ee.test(u[0].type)&&ve(t.parentNode)||t)){u.splice(a,1);e=i.length&&be(u);if(!e){L.apply(n,i);return n}break}}}}(d||s(e,p))(i,t,!g,n,!t||ee.test(e)&&ve(t.parentNode)||t);return n};n.sortStable=M.split("").sort(I).join("")===M;n.detectDuplicates=!!f;d();n.sortDetached=ce(function(e){return e.compareDocumentPosition(p.createElement("fieldset"))&1});if(!ce(function(e){e.innerHTML="<a href='#'></a>";return e.firstChild.getAttribute("href")==="#"})){fe("type|href|height|width",function(e,t,n){if(!n){return e.getAttribute(t,t.toLowerCase()==="type"?1:2)}})}if(!n.attributes||!ce(function(e){e.innerHTML="<input/>";e.firstChild.setAttribute("value","");return e.firstChild.getAttribute("value")===""})){fe("value",function(e,t,n){if(!n&&e.nodeName.toLowerCase()==="input"){return e.defaultValue}})}if(!ce(function(e){return e.getAttribute("disabled")==null})){fe(R,function(e,t,n){var r;if(!n){return e[t]===true?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}})}return se}(n);C.find=I;C.expr=I.selectors;C.expr[":"]=C.expr.pseudos;C.uniqueSort=C.unique=I.uniqueSort;C.text=I.getText;C.isXMLDoc=I.isXML;C.contains=I.contains;C.escapeSelector=I.escape;var E=function(e,t,n){var r=[],i=n!==undefined;while((e=e[t])&&e.nodeType!==9){if(e.nodeType===1){if(i&&C(e).is(n)){break}r.push(e)}}return r};var N=function(e,t){var n=[];for(;e;e=e.nextSibling){if(e.nodeType===1&&e!==t){n.push(e)}}return n};var O=C.expr.match.needsContext;function _(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var L=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function P(e,t,n){if(b(t)){return C.grep(e,function(e,r){return!!t.call(e,r,e)!==n})}if(t.nodeType){return C.grep(e,function(e){return e===t!==n})}if(typeof t!=="string"){return C.grep(e,function(e){return d.call(t,e)>-1!==n})}return C.filter(t,e,n)}C.filter=function(e,t,n){var r=t[0];if(n){e=":not("+e+")"}if(t.length===1&&r.nodeType===1){return C.find.matchesSelector(r,e)?[r]:[]}return C.find.matches(e,C.grep(t,function(e){return e.nodeType===1}))};C.fn.extend({find:function(e){var t,n,r=this.length,i=this;if(typeof e!=="string"){return this.pushStack(C(e).filter(function(){for(t=0;t<r;t++){if(C.contains(i[t],this)){return true}}}))}n=this.pushStack([]);for(t=0;t<r;t++){C.find(e,i[t],n)}return r>1?C.uniqueSort(n):n},filter:function(e){return this.pushStack(P(this,e||[],false))},not:function(e){return this.pushStack(P(this,e||[],true))},is:function(e){return!!P(this,typeof e==="string"&&O.test(e)?C(e):e||[],false).length}});var k,R=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,j=C.fn.init=function(e,t,n){var r,i;if(!e){return this}n=n||k;if(typeof e==="string"){if(e[0]==="<"&&e[e.length-1]===">"&&e.length>=3){r=[null,e,null]}else{r=R.exec(e)}if(r&&(r[1]||!t)){if(r[1]){t=t instanceof C?t[0]:t;C.merge(this,C.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:s,true));if(L.test(r[1])&&C.isPlainObject(t)){for(r in t){if(b(this[r])){this[r](t[r])}else{this.attr(r,t[r])}}}return this}else{i=s.getElementById(r[2]);if(i){this[0]=i;this.length=1}return this}}else if(!t||t.jquery){return(t||n).find(e)}else{return this.constructor(t).find(e)}}else if(e.nodeType){this[0]=e;this.length=1;return this}else if(b(e)){return n.ready!==undefined?n.ready(e):e(C)}return C.makeArray(e,this)};j.prototype=C.fn;k=C(s);var B=/^(?:parents|prev(?:Until|All))/,z={children:true,contents:true,next:true,prev:true};C.fn.extend({has:function(e){var t=C(e,this),n=t.length;return this.filter(function(){var e=0;for(;e<n;e++){if(C.contains(this,t[e])){return true}}})},closest:function(e,t){var n,r=0,i=this.length,a=[],o=typeof e!=="string"&&C(e);if(!O.test(e)){for(;r<i;r++){for(n=this[r];n&&n!==t;n=n.parentNode){if(n.nodeType<11&&(o?o.index(n)>-1:n.nodeType===1&&C.find.matchesSelector(n,e))){a.push(n);break}}}}return this.pushStack(a.length>1?C.uniqueSort(a):a)},index:function(e){if(!e){return this[0]&&this[0].parentNode?this.first().prevAll().length:-1}if(typeof e==="string"){return d.call(C(e),this[0])}return d.call(this,e.jquery?e[0]:e)},add:function(e,t){return this.pushStack(C.uniqueSort(C.merge(this.get(),C(e,t))))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}});function F(e,t){while((e=e[t])&&e.nodeType!==1){}return e}C.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return E(e,"parentNode")},parentsUntil:function(e,t,n){return E(e,"parentNode",n)},next:function(e){return F(e,"nextSibling")},prev:function(e){return F(e,"previousSibling")},nextAll:function(e){return E(e,"nextSibling")},prevAll:function(e){return E(e,"previousSibling")},nextUntil:function(e,t,n){return E(e,"nextSibling",n)},prevUntil:function(e,t,n){return E(e,"previousSibling",n)},siblings:function(e){return N((e.parentNode||{}).firstChild,e)},children:function(e){return N(e.firstChild)},contents:function(e){if(typeof e.contentDocument!=="undefined"){return e.contentDocument}if(_(e,"template")){e=e.content||e}return C.merge([],e.childNodes)}},function(e,t){C.fn[e]=function(n,r){var i=C.map(this,t,n);if(e.slice(-5)!=="Until"){r=n}if(r&&typeof r==="string"){i=C.filter(r,i)}if(this.length>1){if(!z[e]){C.uniqueSort(i)}if(B.test(e)){i.reverse()}}return this.pushStack(i)}});var V=/[^\x20\t\r\n\f]+/g;function U(e){var t={};C.each(e.match(V)||[],function(e,n){t[n]=true});return t}C.Callbacks=function(e){e=typeof e==="string"?U(e):C.extend({},e);var t,n,r,i,a=[],o=[],s=-1,u=function(){i=i||e.once;r=t=true;for(;o.length;s=-1){n=o.shift();while(++s<a.length){if(a[s].apply(n[0],n[1])===false&&e.stopOnFalse){s=a.length;n=false}}}if(!e.memory){n=false}t=false;if(i){if(n){a=[]}else{a=""}}},l={add:function(){if(a){if(n&&!t){s=a.length-1;o.push(n)}(function t(n){C.each(n,function(n,r){if(b(r)){if(!e.unique||!l.has(r)){a.push(r)}}else if(r&&r.length&&A(r)!=="string"){t(r)}})})(arguments);if(n&&!t){u()}}return this},remove:function(){C.each(arguments,function(e,t){var n;while((n=C.inArray(t,a,n))>-1){a.splice(n,1);if(n<=s){s--}}});return this},has:function(e){return e?C.inArray(e,a)>-1:a.length>0},empty:function(){if(a){a=[]}return this},disable:function(){i=o=[];a=n="";return this},disabled:function(){return!a},lock:function(){i=o=[];if(!n&&!t){a=n=""}return this},locked:function(){return!!i},fireWith:function(e,n){if(!i){n=n||[];n=[e,n.slice?n.slice():n];o.push(n);if(!t){u()}}return this},fire:function(){l.fireWith(this,arguments);return this},fired:function(){return!!r}};return l};function G(e){return e}function W(e){throw e}function H(e,t,n,r){var i;try{if(e&&b(i=e.promise)){i.call(e).done(t).fail(n)}else if(e&&b(i=e.then)){i.call(e,t,n)}else{t.apply(undefined,[e].slice(r))}}catch(e){n.apply(undefined,[e])}}C.extend({Deferred:function(e){var t=[["notify","progress",C.Callbacks("memory"),C.Callbacks("memory"),2],["resolve","done",C.Callbacks("once memory"),C.Callbacks("once memory"),0,"resolved"],["reject","fail",C.Callbacks("once memory"),C.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){a.done(arguments).fail(arguments);return this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return C.Deferred(function(n){C.each(t,function(t,r){var i=b(e[r[4]])&&e[r[4]];a[r[1]](function(){var e=i&&i.apply(this,arguments);if(e&&b(e.promise)){e.promise().progress(n.notify).done(n.resolve).fail(n.reject)}else{n[r[0]+"With"](this,i?[e]:arguments)}})});e=null}).promise()},then:function(e,r,i){var a=0;function o(e,t,r,i){return function(){var s=this,u=arguments,l=function(){var n,l;if(e<a){return}n=r.apply(s,u);if(n===t.promise()){throw new TypeError("Thenable self-resolution")}l=n&&(typeof n==="object"||typeof n==="function")&&n.then;if(b(l)){if(i){l.call(n,o(a,t,G,i),o(a,t,W,i))}else{a++;l.call(n,o(a,t,G,i),o(a,t,W,i),o(a,t,G,t.notifyWith))}}else{if(r!==G){s=undefined;u=[n]}(i||t.resolveWith)(s,u)}},c=i?l:function(){try{l()}catch(n){if(C.Deferred.exceptionHook){C.Deferred.exceptionHook(n,c.stackTrace)}if(e+1>=a){if(r!==W){s=undefined;u=[n]}t.rejectWith(s,u)}}};if(e){c()}else{if(C.Deferred.getStackHook){c.stackTrace=C.Deferred.getStackHook()}n.setTimeout(c)}}}return C.Deferred(function(n){t[0][3].add(o(0,n,b(i)?i:G,n.notifyWith));t[1][3].add(o(0,n,b(e)?e:G));t[2][3].add(o(0,n,b(r)?r:W))}).promise()},promise:function(e){return e!=null?C.extend(e,i):i}},a={};C.each(t,function(e,n){var o=n[2],s=n[5];i[n[1]]=o.add;if(s){o.add(function(){r=s},t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock)}o.add(n[3].fire);a[n[0]]=function(){a[n[0]+"With"](this===a?undefined:this,arguments);return this};a[n[0]+"With"]=o.fireWith});i.promise(a);if(e){e.call(a,a)}return a},when:function(e){var t=arguments.length,n=t,r=Array(n),i=l.call(arguments),a=C.Deferred(),o=function(e){return function(n){r[e]=this;i[e]=arguments.length>1?l.call(arguments):n;if(!--t){a.resolveWith(r,i)}}};if(t<=1){H(e,a.done(o(n)).resolve,a.reject,!t);if(a.state()==="pending"||b(i[n]&&i[n].then)){return a.then()}}while(n--){H(i[n],o(n),a.reject)}return a.promise()}});var Y=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;C.Deferred.exceptionHook=function(e,t){if(n.console&&n.console.warn&&e&&Y.test(e.name)){n.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)}};C.readyException=function(e){n.setTimeout(function(){throw e})};var Q=C.Deferred();C.fn.ready=function(e){Q.then(e).catch(function(e){C.readyException(e)});return this};C.extend({isReady:false,readyWait:1,ready:function(e){if(e===true?--C.readyWait:C.isReady){return}C.isReady=true;if(e!==true&&--C.readyWait>0){return}Q.resolveWith(s,[C])}});C.ready.then=Q.then;function q(){s.removeEventListener("DOMContentLoaded",q);n.removeEventListener("load",q);C.ready()}if(s.readyState==="complete"||s.readyState!=="loading"&&!s.documentElement.doScroll){n.setTimeout(C.ready)}else{s.addEventListener("DOMContentLoaded",q);n.addEventListener("load",q)}var X=function(e,t,n,r,i,a,o){var s=0,u=e.length,l=n==null;if(A(n)==="object"){i=true;for(s in n){X(e,t,s,n[s],true,a,o)}}else if(r!==undefined){i=true;if(!b(r)){o=true}if(l){if(o){t.call(e,r);t=null}else{l=t;t=function(e,t,n){return l.call(C(e),n)}}}if(t){for(;s<u;s++){t(e[s],n,o?r:r.call(e[s],s,t(e[s],n)))}}}if(i){return e}if(l){return t.call(e)}return u?t(e[0],n):a};var K=/^-ms-/,Z=/-([a-z])/g;function J(e,t){return t.toUpperCase()}function $(e){return e.replace(K,"ms-").replace(Z,J)}var ee=function(e){return e.nodeType===1||e.nodeType===9||!+e.nodeType};function te(){this.expando=C.expando+te.uid++}te.uid=1;te.prototype={cache:function(e){var t=e[this.expando];if(!t){t={};if(ee(e)){if(e.nodeType){e[this.expando]=t}else{Object.defineProperty(e,this.expando,{value:t,configurable:true})}}}return t},set:function(e,t,n){var r,i=this.cache(e);if(typeof t==="string"){i[$(t)]=n}else{for(r in t){i[$(r)]=t[r]}}return i},get:function(e,t){return t===undefined?this.cache(e):e[this.expando]&&e[this.expando][$(t)]},access:function(e,t,n){if(t===undefined||t&&typeof t==="string"&&n===undefined){return this.get(e,t)}this.set(e,t,n);return n!==undefined?n:t},remove:function(e,t){var n,r=e[this.expando];if(r===undefined){return}if(t!==undefined){if(Array.isArray(t)){t=t.map($)}else{t=$(t);t=t in r?[t]:t.match(V)||[]}n=t.length;while(n--){delete r[t[n]]}}if(t===undefined||C.isEmptyObject(r)){if(e.nodeType){e[this.expando]=undefined}else{delete e[this.expando]}}},hasData:function(e){var t=e[this.expando];return t!==undefined&&!C.isEmptyObject(t)}};var ne=new te;var re=new te;var ie=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ae=/[A-Z]/g;function oe(e){if(e==="true"){return true}if(e==="false"){return false}if(e==="null"){return null}if(e===+e+""){return+e}if(ie.test(e)){return JSON.parse(e)}return e}function se(e,t,n){var r;if(n===undefined&&e.nodeType===1){r="data-"+t.replace(ae,"-$&").toLowerCase();n=e.getAttribute(r);if(typeof n==="string"){try{n=oe(n)}catch(e){}re.set(e,t,n)}else{n=undefined}}return n}C.extend({hasData:function(e){return re.hasData(e)||ne.hasData(e)},data:function(e,t,n){return re.access(e,t,n)},removeData:function(e,t){re.remove(e,t)},_data:function(e,t,n){return ne.access(e,t,n)},_removeData:function(e,t){ne.remove(e,t)}});C.fn.extend({data:function(e,t){var n,r,i,a=this[0],o=a&&a.attributes;if(e===undefined){if(this.length){i=re.get(a);if(a.nodeType===1&&!ne.get(a,"hasDataAttrs")){n=o.length;while(n--){if(o[n]){r=o[n].name;if(r.indexOf("data-")===0){r=$(r.slice(5));se(a,r,i[r])}}}ne.set(a,"hasDataAttrs",true)}}return i}if(typeof e==="object"){return this.each(function(){re.set(this,e)})}return X(this,function(t){var n;if(a&&t===undefined){n=re.get(a,e);if(n!==undefined){return n}n=se(a,e);if(n!==undefined){return n}return}this.each(function(){re.set(this,e,t)})},null,t,arguments.length>1,null,true)},removeData:function(e){return this.each(function(){re.remove(this,e)})}});C.extend({queue:function(e,t,n){var r;if(e){t=(t||"fx")+"queue";r=ne.get(e,t);if(n){if(!r||Array.isArray(n)){r=ne.access(e,t,C.makeArray(n))}else{r.push(n)}}return r||[]}},dequeue:function(e,t){t=t||"fx";var n=C.queue(e,t),r=n.length,i=n.shift(),a=C._queueHooks(e,t),o=function(){C.dequeue(e,t)};if(i==="inprogress"){i=n.shift();r--}if(i){if(t==="fx"){n.unshift("inprogress")}delete a.stop;i.call(e,o,a)}if(!r&&a){a.empty.fire()}},_queueHooks:function(e,t){var n=t+"queueHooks";return ne.get(e,n)||ne.access(e,n,{empty:C.Callbacks("once memory").add(function(){ne.remove(e,[t+"queue",n])})})}});C.fn.extend({queue:function(e,t){var n=2;if(typeof e!=="string"){t=e;e="fx";n--}if(arguments.length<n){return C.queue(this[0],e)}return t===undefined?this:this.each(function(){var n=C.queue(this,e,t);C._queueHooks(this,e);if(e==="fx"&&n[0]!=="inprogress"){C.dequeue(this,e)}})},dequeue:function(e){return this.each(function(){C.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=C.Deferred(),a=this,o=this.length,s=function(){if(!--r){i.resolveWith(a,[a])}};if(typeof e!=="string"){t=e;e=undefined}e=e||"fx";while(o--){n=ne.get(a[o],e+"queueHooks");if(n&&n.empty){r++;n.empty.add(s)}}s();return i.promise(t)}});var ue=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source;var le=new RegExp("^(?:([+-])=|)("+ue+")([a-z%]*)$","i");var ce=["Top","Right","Bottom","Left"];var fe=s.documentElement;var de=function(e){return C.contains(e.ownerDocument,e)},pe={composed:true};if(fe.getRootNode){de=function(e){return C.contains(e.ownerDocument,e)||e.getRootNode(pe)===e.ownerDocument}}var he=function(e,t){e=t||e;return e.style.display==="none"||e.style.display===""&&de(e)&&C.css(e,"display")==="none"};var ge=function(e,t,n,r){var i,a,o={};for(a in t){o[a]=e.style[a];e.style[a]=t[a]}i=n.apply(e,r||[]);for(a in t){e.style[a]=o[a]}return i};function me(e,t,n,r){var i,a,o=20,s=r?function(){return r.cur()}:function(){return C.css(e,t,"")},u=s(),l=n&&n[3]||(C.cssNumber[t]?"":"px"),c=e.nodeType&&(C.cssNumber[t]||l!=="px"&&+u)&&le.exec(C.css(e,t));if(c&&c[3]!==l){u=u/2;l=l||c[3];c=+u||1;while(o--){C.style(e,t,c+l);if((1-a)*(1-(a=s()/u||.5))<=0){o=0}c=c/a}c=c*2;C.style(e,t,c+l);n=n||[]}if(n){c=+c||+u||0;i=n[1]?c+(n[1]+1)*n[2]:+n[2];if(r){r.unit=l;r.start=c;r.end=i}}return i}var ve={};function ye(e){var t,n=e.ownerDocument,r=e.nodeName,i=ve[r];if(i){return i}t=n.body.appendChild(n.createElement(r));i=C.css(t,"display");t.parentNode.removeChild(t);if(i==="none"){i="block"}ve[r]=i;return i}function be(e,t){var n,r,i=[],a=0,o=e.length;for(;a<o;a++){r=e[a];if(!r.style){continue}n=r.style.display;if(t){if(n==="none"){i[a]=ne.get(r,"display")||null;if(!i[a]){r.style.display=""}}if(r.style.display===""&&he(r)){i[a]=ye(r)}}else{if(n!=="none"){i[a]="none";ne.set(r,"display",n)}}}for(a=0;a<o;a++){if(i[a]!=null){e[a].style.display=i[a]}}return e}C.fn.extend({show:function(){return be(this,true)},hide:function(){return be(this)},toggle:function(e){if(typeof e==="boolean"){return e?this.show():this.hide()}return this.each(function(){if(he(this)){C(this).show()}else{C(this).hide()}})}});var Me=/^(?:checkbox|radio)$/i;var xe=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i;var we=/^$|^module$|\/(?:java|ecma)script/i;var Ae={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ae.optgroup=Ae.option;Ae.tbody=Ae.tfoot=Ae.colgroup=Ae.caption=Ae.thead;Ae.th=Ae.td;function Te(e,t){var n;if(typeof e.getElementsByTagName!=="undefined"){n=e.getElementsByTagName(t||"*")}else if(typeof e.querySelectorAll!=="undefined"){n=e.querySelectorAll(t||"*")}else{n=[]}if(t===undefined||t&&_(e,t)){return C.merge([e],n)}return n}function Ce(e,t){var n=0,r=e.length;for(;n<r;n++){ne.set(e[n],"globalEval",!t||ne.get(t[n],"globalEval"))}}var Se=/<|&#?\w+;/;function De(e,t,n,r,i){var a,o,s,u,l,c,f=t.createDocumentFragment(),d=[],p=0,h=e.length;for(;p<h;p++){a=e[p];if(a||a===0){if(A(a)==="object"){C.merge(d,a.nodeType?[a]:a)}else if(!Se.test(a)){d.push(t.createTextNode(a))}else{o=o||f.appendChild(t.createElement("div"));s=(xe.exec(a)||["",""])[1].toLowerCase();u=Ae[s]||Ae._default;o.innerHTML=u[1]+C.htmlPrefilter(a)+u[2];c=u[0];while(c--){o=o.lastChild}C.merge(d,o.childNodes);o=f.firstChild;o.textContent=""}}}f.textContent="";p=0;while(a=d[p++]){if(r&&C.inArray(a,r)>-1){if(i){i.push(a)}continue}l=de(a);o=Te(f.appendChild(a),"script");if(l){Ce(o)}if(n){c=0;while(a=o[c++]){if(we.test(a.type||"")){n.push(a)}}}}return f}(function(){var e=s.createDocumentFragment(),t=e.appendChild(s.createElement("div")),n=s.createElement("input");n.setAttribute("type","radio");n.setAttribute("checked","checked");n.setAttribute("name","t");t.appendChild(n);y.checkClone=t.cloneNode(true).cloneNode(true).lastChild.checked;t.innerHTML="<textarea>x</textarea>";y.noCloneChecked=!!t.cloneNode(true).lastChild.defaultValue})();var Ie=/^key/,Ee=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ne=/^([^.]*)(?:\.(.+)|)/;function Oe(){return true}function _e(){return false}function Le(e,t){return e===Pe()===(t==="focus")}function Pe(){try{return s.activeElement}catch(e){}}function ke(e,t,n,r,i,a){var o,s;if(typeof t==="object"){if(typeof n!=="string"){r=r||n;n=undefined}for(s in t){ke(e,s,n,r,t[s],a)}return e}if(r==null&&i==null){i=n;r=n=undefined}else if(i==null){if(typeof n==="string"){i=r;r=undefined}else{i=r;r=n;n=undefined}}if(i===false){i=_e}else if(!i){return e}if(a===1){o=i;i=function(e){C().off(e);return o.apply(this,arguments)};i.guid=o.guid||(o.guid=C.guid++)}return e.each(function(){C.event.add(this,t,i,r,n)})}C.event={global:{},add:function(e,t,n,r,i){var a,o,s,u,l,c,f,d,p,h,g,m=ne.get(e);if(!m){return}if(n.handler){a=n;n=a.handler;i=a.selector}if(i){C.find.matchesSelector(fe,i)}if(!n.guid){n.guid=C.guid++}if(!(u=m.events)){u=m.events={}}if(!(o=m.handle)){o=m.handle=function(t){return typeof C!=="undefined"&&C.event.triggered!==t.type?C.event.dispatch.apply(e,arguments):undefined}}t=(t||"").match(V)||[""];l=t.length;while(l--){s=Ne.exec(t[l])||[];p=g=s[1];h=(s[2]||"").split(".").sort();if(!p){continue}f=C.event.special[p]||{};p=(i?f.delegateType:f.bindType)||p;f=C.event.special[p]||{};c=C.extend({type:p,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&C.expr.match.needsContext.test(i),namespace:h.join(".")},a);if(!(d=u[p])){d=u[p]=[];d.delegateCount=0;if(!f.setup||f.setup.call(e,r,h,o)===false){if(e.addEventListener){e.addEventListener(p,o)}}}if(f.add){f.add.call(e,c);if(!c.handler.guid){c.handler.guid=n.guid}}if(i){d.splice(d.delegateCount++,0,c)}else{d.push(c)}C.event.global[p]=true}},remove:function(e,t,n,r,i){var a,o,s,u,l,c,f,d,p,h,g,m=ne.hasData(e)&&ne.get(e);if(!m||!(u=m.events)){return}t=(t||"").match(V)||[""];l=t.length;while(l--){s=Ne.exec(t[l])||[];p=g=s[1];h=(s[2]||"").split(".").sort();if(!p){for(p in u){C.event.remove(e,p+t[l],n,r,true)}continue}f=C.event.special[p]||{};p=(r?f.delegateType:f.bindType)||p;d=u[p]||[];s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)");o=a=d.length;while(a--){c=d[a];if((i||g===c.origType)&&(!n||n.guid===c.guid)&&(!s||s.test(c.namespace))&&(!r||r===c.selector||r==="**"&&c.selector)){d.splice(a,1);if(c.selector){d.delegateCount--}if(f.remove){f.remove.call(e,c)}}}if(o&&!d.length){if(!f.teardown||f.teardown.call(e,h,m.handle)===false){C.removeEvent(e,p,m.handle)}delete u[p]}}if(C.isEmptyObject(u)){ne.remove(e,"handle events")}},dispatch:function(e){var t=C.event.fix(e);var n,r,i,a,o,s,u=new Array(arguments.length),l=(ne.get(this,"events")||{})[t.type]||[],c=C.event.special[t.type]||{};u[0]=t;for(n=1;n<arguments.length;n++){u[n]=arguments[n]}t.delegateTarget=this;if(c.preDispatch&&c.preDispatch.call(this,t)===false){return}s=C.event.handlers.call(this,t,l);n=0;while((a=s[n++])&&!t.isPropagationStopped()){t.currentTarget=a.elem;r=0;while((o=a.handlers[r++])&&!t.isImmediatePropagationStopped()){if(!t.rnamespace||o.namespace===false||t.rnamespace.test(o.namespace)){t.handleObj=o;t.data=o.data;i=((C.event.special[o.origType]||{}).handle||o.handler).apply(a.elem,u);if(i!==undefined){if((t.result=i)===false){t.preventDefault();t.stopPropagation()}}}}}if(c.postDispatch){c.postDispatch.call(this,t)}return t.result},handlers:function(e,t){var n,r,i,a,o,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!(e.type==="click"&&e.button>=1)){for(;l!==this;l=l.parentNode||this){if(l.nodeType===1&&!(e.type==="click"&&l.disabled===true)){a=[];o={};for(n=0;n<u;n++){r=t[n];i=r.selector+" ";if(o[i]===undefined){o[i]=r.needsContext?C(i,this).index(l)>-1:C.find(i,this,null,[l]).length}if(o[i]){a.push(r)}}if(a.length){s.push({elem:l,handlers:a})}}}}l=this;if(u<t.length){s.push({elem:l,handlers:t.slice(u)})}return s},addProp:function(e,t){Object.defineProperty(C.Event.prototype,e,{enumerable:true,configurable:true,get:b(t)?function(){if(this.originalEvent){return t(this.originalEvent)}}:function(){if(this.originalEvent){return this.originalEvent[e]}},set:function(t){Object.defineProperty(this,e,{enumerable:true,configurable:true,writable:true,value:t})}})},fix:function(e){return e[C.expando]?e:new C.Event(e)},special:{load:{noBubble:true},click:{setup:function(e){var t=this||e;if(Me.test(t.type)&&t.click&&_(t,"input")){Re(t,"click",Oe)}return false},trigger:function(e){var t=this||e;if(Me.test(t.type)&&t.click&&_(t,"input")){Re(t,"click")}return true},_default:function(e){var t=e.target;return Me.test(t.type)&&t.click&&_(t,"input")&&ne.get(t,"click")||_(t,"a")}},beforeunload:{postDispatch:function(e){if(e.result!==undefined&&e.originalEvent){e.originalEvent.returnValue=e.result}}}}};function Re(e,t,n){if(!n){if(ne.get(e,t)===undefined){C.event.add(e,t,Oe)}return}ne.set(e,t,false);C.event.add(e,t,{namespace:false,handler:function(e){var r,i,a=ne.get(this,t);if(e.isTrigger&1&&this[t]){if(!a.length){a=l.call(arguments);ne.set(this,t,a);r=n(this,t);this[t]();i=ne.get(this,t);if(a!==i||r){ne.set(this,t,false)}else{i={}}if(a!==i){e.stopImmediatePropagation();e.preventDefault();return i.value}}else if((C.event.special[t]||{}).delegateType){e.stopPropagation()}}else if(a.length){ne.set(this,t,{value:C.event.trigger(C.extend(a[0],C.Event.prototype),a.slice(1),this)});e.stopImmediatePropagation()}}})}C.removeEvent=function(e,t,n){if(e.removeEventListener){e.removeEventListener(t,n)}};C.Event=function(e,t){if(!(this instanceof C.Event)){return new C.Event(e,t)}if(e&&e.type){this.originalEvent=e;this.type=e.type;this.isDefaultPrevented=e.defaultPrevented||e.defaultPrevented===undefined&&e.returnValue===false?Oe:_e;this.target=e.target&&e.target.nodeType===3?e.target.parentNode:e.target;this.currentTarget=e.currentTarget;this.relatedTarget=e.relatedTarget}else{this.type=e}if(t){C.extend(this,t)}this.timeStamp=e&&e.timeStamp||Date.now();this[C.expando]=true};C.Event.prototype={constructor:C.Event,isDefaultPrevented:_e,isPropagationStopped:_e,isImmediatePropagationStopped:_e,isSimulated:false,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Oe;if(e&&!this.isSimulated){e.preventDefault()}},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Oe;if(e&&!this.isSimulated){e.stopPropagation()}},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Oe;if(e&&!this.isSimulated){e.stopImmediatePropagation()}this.stopPropagation()}};C.each({altKey:true,bubbles:true,cancelable:true,changedTouches:true,ctrlKey:true,detail:true,eventPhase:true,metaKey:true,pageX:true,pageY:true,shiftKey:true,view:true,char:true,code:true,charCode:true,key:true,keyCode:true,button:true,buttons:true,clientX:true,clientY:true,offsetX:true,offsetY:true,pointerId:true,pointerType:true,screenX:true,screenY:true,targetTouches:true,toElement:true,touches:true,which:function(e){var t=e.button;if(e.which==null&&Ie.test(e.type)){return e.charCode!=null?e.charCode:e.keyCode}if(!e.which&&t!==undefined&&Ee.test(e.type)){if(t&1){return 1}if(t&2){return 3}if(t&4){return 2}return 0}return e.which}},C.event.addProp);C.each({focus:"focusin",blur:"focusout"},function(e,t){C.event.special[e]={setup:function(){Re(this,e,Le);return false},trigger:function(){Re(this,e);return true},delegateType:t}});C.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){C.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,a=e.handleObj;if(!i||i!==r&&!C.contains(r,i)){e.type=a.origType;n=a.handler.apply(this,arguments);e.type=t}return n}}});C.fn.extend({on:function(e,t,n,r){return ke(this,e,t,n,r)},one:function(e,t,n,r){return ke(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj){r=e.handleObj;C(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler);return this}if(typeof e==="object"){for(i in e){this.off(i,t,e[i])}return this}if(t===false||typeof t==="function"){n=t;t=undefined}if(n===false){n=_e}return this.each(function(){C.event.remove(this,e,n,t)})}});var je=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Be=/<script|<style|<link/i,ze=/checked\s*(?:[^=]|=\s*.checked.)/i,Fe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ve(e,t){if(_(e,"table")&&_(t.nodeType!==11?t:t.firstChild,"tr")){return C(e).children("tbody")[0]||e}return e}function Ue(e){e.type=(e.getAttribute("type")!==null)+"/"+e.type;return e}function Ge(e){if((e.type||"").slice(0,5)==="true/"){e.type=e.type.slice(5)}else{e.removeAttribute("type")}return e}function We(e,t){var n,r,i,a,o,s,u,l;if(t.nodeType!==1){return}if(ne.hasData(e)){a=ne.access(e);o=ne.set(t,a);l=a.events;if(l){delete o.handle;o.events={};for(i in l){for(n=0,r=l[i].length;n<r;n++){C.event.add(t,i,l[i][n])}}}}if(re.hasData(e)){s=re.access(e);u=C.extend({},s);re.set(t,u)}}function He(e,t){var n=t.nodeName.toLowerCase();if(n==="input"&&Me.test(e.type)){t.checked=e.checked}else if(n==="input"||n==="textarea"){t.defaultValue=e.defaultValue}}function Ye(e,t,n,r){t=c.apply([],t);var i,a,o,s,u,l,f=0,d=e.length,p=d-1,h=t[0],g=b(h);if(g||d>1&&typeof h==="string"&&!y.checkClone&&ze.test(h)){return e.each(function(i){var a=e.eq(i);if(g){t[0]=h.call(this,i,a.html())}Ye(a,t,n,r)})}if(d){i=De(t,e[0].ownerDocument,false,e,r);a=i.firstChild;if(i.childNodes.length===1){i=a}if(a||r){o=C.map(Te(i,"script"),Ue);s=o.length;for(;f<d;f++){u=i;if(f!==p){u=C.clone(u,true,true);if(s){C.merge(o,Te(u,"script"))}}n.call(e[f],u,f)}if(s){l=o[o.length-1].ownerDocument;C.map(o,Ge);for(f=0;f<s;f++){u=o[f];if(we.test(u.type||"")&&!ne.access(u,"globalEval")&&C.contains(l,u)){if(u.src&&(u.type||"").toLowerCase()!=="module"){if(C._evalUrl&&!u.noModule){C._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")})}}else{w(u.textContent.replace(Fe,""),u,l)}}}}}}return e}function Qe(e,t,n){var r,i=t?C.filter(t,e):e,a=0;for(;(r=i[a])!=null;a++){if(!n&&r.nodeType===1){C.cleanData(Te(r))}if(r.parentNode){if(n&&de(r)){Ce(Te(r,"script"))}r.parentNode.removeChild(r)}}return e}C.extend({htmlPrefilter:function(e){return e.replace(je,"<$1></$2>")},clone:function(e,t,n){var r,i,a,o,s=e.cloneNode(true),u=de(e);if(!y.noCloneChecked&&(e.nodeType===1||e.nodeType===11)&&!C.isXMLDoc(e)){o=Te(s);a=Te(e);for(r=0,i=a.length;r<i;r++){He(a[r],o[r])}}if(t){if(n){a=a||Te(e);o=o||Te(s);for(r=0,i=a.length;r<i;r++){We(a[r],o[r])}}else{We(e,s)}}o=Te(s,"script");if(o.length>0){Ce(o,!u&&Te(e,"script"))}return s},cleanData:function(e){var t,n,r,i=C.event.special,a=0;for(;(n=e[a])!==undefined;a++){if(ee(n)){if(t=n[ne.expando]){if(t.events){for(r in t.events){if(i[r]){C.event.remove(n,r)}else{C.removeEvent(n,r,t.handle)}}}n[ne.expando]=undefined}if(n[re.expando]){n[re.expando]=undefined}}}}});C.fn.extend({detach:function(e){return Qe(this,e,true)},remove:function(e){return Qe(this,e)},text:function(e){return X(this,function(e){return e===undefined?C.text(this):this.empty().each(function(){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){this.textContent=e}})},null,e,arguments.length)},append:function(){return Ye(this,arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=Ve(this,e);t.appendChild(e)}})},prepend:function(){return Ye(this,arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=Ve(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Ye(this,arguments,function(e){if(this.parentNode){this.parentNode.insertBefore(e,this)}})},after:function(){return Ye(this,arguments,function(e){if(this.parentNode){this.parentNode.insertBefore(e,this.nextSibling)}})},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){if(e.nodeType===1){C.cleanData(Te(e,false));e.textContent=""}}return this},clone:function(e,t){e=e==null?false:e;t=t==null?e:t;return this.map(function(){return C.clone(this,e,t)})},html:function(e){return X(this,function(e){var t=this[0]||{},n=0,r=this.length;if(e===undefined&&t.nodeType===1){return t.innerHTML}if(typeof e==="string"&&!Be.test(e)&&!Ae[(xe.exec(e)||["",""])[1].toLowerCase()]){e=C.htmlPrefilter(e);try{for(;n<r;n++){t=this[n]||{};if(t.nodeType===1){C.cleanData(Te(t,false));t.innerHTML=e}}t=0}catch(e){}}if(t){this.empty().append(e)}},null,e,arguments.length)},replaceWith:function(){var e=[];return Ye(this,arguments,function(t){var n=this.parentNode;if(C.inArray(this,e)<0){C.cleanData(Te(this));if(n){n.replaceChild(t,this)}}},e)}});C.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){C.fn[e]=function(e){var n,r=[],i=C(e),a=i.length-1,o=0;for(;o<=a;o++){n=o===a?this:this.clone(true);C(i[o])[t](n);f.apply(r,n.get())}return this.pushStack(r)}});var qe=new RegExp("^("+ue+")(?!px)[a-z%]+$","i");var Xe=function(e){var t=e.ownerDocument.defaultView;if(!t||!t.opener){t=n}return t.getComputedStyle(e)};var Ke=new RegExp(ce.join("|"),"i");(function(){function e(){if(!c){return}l.style.cssText="position:absolute;left:-11111px;width:60px;"+"margin-top:1px;padding:0;border:0";c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;"+"margin:auto;border:1px;padding:1px;"+"width:60%;top:1%";fe.appendChild(l).appendChild(c);var e=n.getComputedStyle(c);r=e.top!=="1%";u=t(e.marginLeft)===12;c.style.right="60%";o=t(e.right)===36;i=t(e.width)===36;c.style.position="absolute";a=t(c.offsetWidth/3)===12;fe.removeChild(l);c=null}function t(e){return Math.round(parseFloat(e))}var r,i,a,o,u,l=s.createElement("div"),c=s.createElement("div");if(!c.style){return}c.style.backgroundClip="content-box";c.cloneNode(true).style.backgroundClip="";y.clearCloneStyle=c.style.backgroundClip==="content-box";C.extend(y,{boxSizingReliable:function(){e();return i},pixelBoxStyles:function(){e();return o},pixelPosition:function(){e();return r},reliableMarginLeft:function(){e();return u},scrollboxSize:function(){e();return a}})})();function Ze(e,t,n){var r,i,a,o,s=e.style;n=n||Xe(e);if(n){o=n.getPropertyValue(t)||n[t];if(o===""&&!de(e)){o=C.style(e,t)}if(!y.pixelBoxStyles()&&qe.test(o)&&Ke.test(t)){r=s.width;i=s.minWidth;a=s.maxWidth;s.minWidth=s.maxWidth=s.width=o;o=n.width;s.width=r;s.minWidth=i;s.maxWidth=a}}return o!==undefined?o+"":o}function Je(e,t){return{get:function(){if(e()){delete this.get;return}return(this.get=t).apply(this,arguments)}}}var $e=["Webkit","Moz","ms"],et=s.createElement("div").style,tt={};function nt(e){var t=e[0].toUpperCase()+e.slice(1),n=$e.length;while(n--){e=$e[n]+t;if(e in et){return e}}}function rt(e){var t=C.cssProps[e]||tt[e];if(t){return t}if(e in et){return e}return tt[e]=nt(e)||e}var it=/^(none|table(?!-c[ea]).+)/,at=/^--/,ot={position:"absolute",visibility:"hidden",display:"block"},st={letterSpacing:"0",fontWeight:"400"};function ut(e,t,n){var r=le.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function lt(e,t,n,r,i,a){var o=t==="width"?1:0,s=0,u=0;if(n===(r?"border":"content")){return 0}for(;o<4;o+=2){if(n==="margin"){u+=C.css(e,n+ce[o],true,i)}if(!r){u+=C.css(e,"padding"+ce[o],true,i);if(n!=="padding"){u+=C.css(e,"border"+ce[o]+"Width",true,i)}else{s+=C.css(e,"border"+ce[o]+"Width",true,i)}}else{if(n==="content"){u-=C.css(e,"padding"+ce[o],true,i)}if(n!=="margin"){u-=C.css(e,"border"+ce[o]+"Width",true,i)}}}if(!r&&a>=0){u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-a-u-s-.5))||0}return u}function ct(e,t,n){var r=Xe(e),i=!y.boxSizingReliable()||n,a=i&&C.css(e,"boxSizing",false,r)==="border-box",o=a,s=Ze(e,t,r),u="offset"+t[0].toUpperCase()+t.slice(1);if(qe.test(s)){if(!n){return s}s="auto"}if((!y.boxSizingReliable()&&a||s==="auto"||!parseFloat(s)&&C.css(e,"display",false,r)==="inline")&&e.getClientRects().length){a=C.css(e,"boxSizing",false,r)==="border-box";o=u in e;if(o){s=e[u]}}s=parseFloat(s)||0;return s+lt(e,t,n||(a?"border":"content"),o,r,s)+"px"}C.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ze(e,"opacity");return n===""?"1":n}}}},cssNumber:{animationIterationCount:true,columnCount:true,fillOpacity:true,flexGrow:true,flexShrink:true,fontWeight:true,gridArea:true,gridColumn:true,gridColumnEnd:true,gridColumnStart:true,gridRow:true,gridRowEnd:true,gridRowStart:true,lineHeight:true,opacity:true,order:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{},style:function(e,t,n,r){if(!e||e.nodeType===3||e.nodeType===8||!e.style){return}var i,a,o,s=$(t),u=at.test(t),l=e.style;if(!u){t=rt(s)}o=C.cssHooks[t]||C.cssHooks[s];if(n!==undefined){a=typeof n;if(a==="string"&&(i=le.exec(n))&&i[1]){n=me(e,t,i);a="number"}if(n==null||n!==n){return}if(a==="number"&&!u){n+=i&&i[3]||(C.cssNumber[s]?"":"px")}if(!y.clearCloneStyle&&n===""&&t.indexOf("background")===0){l[t]="inherit"}if(!o||!("set"in o)||(n=o.set(e,n,r))!==undefined){if(u){l.setProperty(t,n)}else{l[t]=n}}}else{if(o&&"get"in o&&(i=o.get(e,false,r))!==undefined){return i}return l[t]}},css:function(e,t,n,r){var i,a,o,s=$(t),u=at.test(t);if(!u){t=rt(s)}o=C.cssHooks[t]||C.cssHooks[s];if(o&&"get"in o){i=o.get(e,true,n)}if(i===undefined){i=Ze(e,t,r)}if(i==="normal"&&t in st){i=st[t]}if(n===""||n){a=parseFloat(i);return n===true||isFinite(a)?a||0:i}return i}});C.each(["height","width"],function(e,t){C.cssHooks[t]={get:function(e,n,r){if(n){return it.test(C.css(e,"display"))&&(!e.getClientRects().length||!e.getBoundingClientRect().width)?ge(e,ot,function(){return ct(e,t,r)}):ct(e,t,r)}},set:function(e,n,r){var i,a=Xe(e),o=!y.scrollboxSize()&&a.position==="absolute",s=o||r,u=s&&C.css(e,"boxSizing",false,a)==="border-box",l=r?lt(e,t,r,u,a):0;if(u&&o){l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(a[t])-lt(e,t,"border",false,a)-.5)}if(l&&(i=le.exec(n))&&(i[3]||"px")!=="px"){e.style[t]=n;n=C.css(e,t)}return ut(e,n,l)}}});C.cssHooks.marginLeft=Je(y.reliableMarginLeft,function(e,t){if(t){return(parseFloat(Ze(e,"marginLeft"))||e.getBoundingClientRect().left-ge(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}});C.each({margin:"",padding:"",border:"Width"},function(e,t){C.cssHooks[e+t]={expand:function(n){var r=0,i={},a=typeof n==="string"?n.split(" "):[n];for(;r<4;r++){i[e+ce[r]+t]=a[r]||a[r-2]||a[0]}return i}};if(e!=="margin"){C.cssHooks[e+t].set=ut}});C.fn.extend({css:function(e,t){return X(this,function(e,t,n){var r,i,a={},o=0;if(Array.isArray(t)){r=Xe(e);i=t.length;for(;o<i;o++){a[t[o]]=C.css(e,t[o],false,r)}return a}return n!==undefined?C.style(e,t,n):C.css(e,t)},e,t,arguments.length>1)}});function ft(e,t,n,r,i){return new ft.prototype.init(e,t,n,r,i)}C.Tween=ft;ft.prototype={constructor:ft,init:function(e,t,n,r,i,a){this.elem=e;this.prop=n;this.easing=i||C.easing._default;this.options=t;this.start=this.now=this.cur();this.end=r;this.unit=a||(C.cssNumber[n]?"":"px")},cur:function(){var e=ft.propHooks[this.prop];return e&&e.get?e.get(this):ft.propHooks._default.get(this)},run:function(e){var t,n=ft.propHooks[this.prop];if(this.options.duration){this.pos=t=C.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration)}else{this.pos=t=e}this.now=(this.end-this.start)*t+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)}if(n&&n.set){n.set(this)}else{ft.propHooks._default.set(this)}return this}};ft.prototype.init.prototype=ft.prototype;ft.propHooks={_default:{get:function(e){var t;if(e.elem.nodeType!==1||e.elem[e.prop]!=null&&e.elem.style[e.prop]==null){return e.elem[e.prop]}t=C.css(e.elem,e.prop,"");return!t||t==="auto"?0:t},set:function(e){if(C.fx.step[e.prop]){C.fx.step[e.prop](e)}else if(e.elem.nodeType===1&&(C.cssHooks[e.prop]||e.elem.style[rt(e.prop)]!=null)){C.style(e.elem,e.prop,e.now+e.unit)}else{e.elem[e.prop]=e.now}}}};ft.propHooks.scrollTop=ft.propHooks.scrollLeft={set:function(e){if(e.elem.nodeType&&e.elem.parentNode){e.elem[e.prop]=e.now}}};C.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"};C.fx=ft.prototype.init;C.fx.step={};var dt,pt,ht=/^(?:toggle|show|hide)$/,gt=/queueHooks$/;function mt(){if(pt){if(s.hidden===false&&n.requestAnimationFrame){n.requestAnimationFrame(mt)}else{n.setTimeout(mt,C.fx.interval)}C.fx.tick()}}function vt(){n.setTimeout(function(){dt=undefined});return dt=Date.now()}function yt(e,t){var n,r=0,i={height:e};t=t?1:0;for(;r<4;r+=2-t){n=ce[r];i["margin"+n]=i["padding"+n]=e}if(t){i.opacity=i.width=e}return i}function bt(e,t,n){var r,i=(wt.tweeners[t]||[]).concat(wt.tweeners["*"]),a=0,o=i.length;for(;a<o;a++){if(r=i[a].call(n,t,e)){return r}}}function Mt(e,t,n){var r,i,a,o,s,u,l,c,f="width"in t||"height"in t,d=this,p={},h=e.style,g=e.nodeType&&he(e),m=ne.get(e,"fxshow");if(!n.queue){o=C._queueHooks(e,"fx");if(o.unqueued==null){o.unqueued=0;s=o.empty.fire;o.empty.fire=function(){if(!o.unqueued){s()}}}o.unqueued++;d.always(function(){d.always(function(){o.unqueued--;if(!C.queue(e,"fx").length){o.empty.fire()}})})}for(r in t){i=t[r];if(ht.test(i)){delete t[r];a=a||i==="toggle";if(i===(g?"hide":"show")){if(i==="show"&&m&&m[r]!==undefined){g=true}else{continue}}p[r]=m&&m[r]||C.style(e,r)}}u=!C.isEmptyObject(t);if(!u&&C.isEmptyObject(p)){return}if(f&&e.nodeType===1){n.overflow=[h.overflow,h.overflowX,h.overflowY];l=m&&m.display;if(l==null){l=ne.get(e,"display")}c=C.css(e,"display");if(c==="none"){if(l){c=l}else{be([e],true);l=e.style.display||l;c=C.css(e,"display");be([e])}}if(c==="inline"||c==="inline-block"&&l!=null){if(C.css(e,"float")==="none"){if(!u){d.done(function(){h.display=l});if(l==null){c=h.display;l=c==="none"?"":c}}h.display="inline-block"}}}if(n.overflow){h.overflow="hidden";d.always(function(){h.overflow=n.overflow[0];h.overflowX=n.overflow[1];h.overflowY=n.overflow[2]})}u=false;for(r in p){if(!u){if(m){if("hidden"in m){g=m.hidden}}else{m=ne.access(e,"fxshow",{display:l})}if(a){m.hidden=!g}if(g){be([e],true)}d.done(function(){if(!g){be([e])}ne.remove(e,"fxshow");for(r in p){C.style(e,r,p[r])}})}u=bt(g?m[r]:0,r,d);if(!(r in m)){m[r]=u.start;if(g){u.end=u.start;u.start=0}}}}function xt(e,t){var n,r,i,a,o;for(n in e){r=$(n);i=t[r];a=e[n];if(Array.isArray(a)){i=a[1];a=e[n]=a[0]}if(n!==r){e[r]=a;delete e[n]}o=C.cssHooks[r];if(o&&"expand"in o){a=o.expand(a);delete e[r];for(n in a){if(!(n in e)){e[n]=a[n];t[n]=i}}}else{t[r]=i}}}function wt(e,t,n){var r,i,a=0,o=wt.prefilters.length,s=C.Deferred().always(function(){delete u.elem}),u=function(){if(i){return false}var t=dt||vt(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,a=1-r,o=0,u=l.tweens.length;for(;o<u;o++){l.tweens[o].run(a)}s.notifyWith(e,[l,a,n]);if(a<1&&u){return n}if(!u){s.notifyWith(e,[l,1,0])}s.resolveWith(e,[l]);return false},l=s.promise({elem:e,props:C.extend({},t),opts:C.extend(true,{specialEasing:{},easing:C.easing._default},n),originalProperties:t,originalOptions:n,startTime:dt||vt(),duration:n.duration,tweens:[],createTween:function(t,n){var r=C.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);l.tweens.push(r);return r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i){return this}i=true;for(;n<r;n++){l.tweens[n].run(1)}if(t){s.notifyWith(e,[l,1,0]);s.resolveWith(e,[l,t])}else{s.rejectWith(e,[l,t])}return this}}),c=l.props;xt(c,l.opts.specialEasing);for(;a<o;a++){r=wt.prefilters[a].call(l,e,c,l.opts);if(r){if(b(r.stop)){C._queueHooks(l.elem,l.opts.queue).stop=r.stop.bind(r)}return r}}C.map(c,bt,l);if(b(l.opts.start)){l.opts.start.call(e,l)}l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always);C.fx.timer(C.extend(u,{elem:e,anim:l,queue:l.opts.queue}));return l}C.Animation=C.extend(wt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);me(n.elem,e,le.exec(t),n);return n}]},tweener:function(e,t){if(b(e)){t=e;e=["*"]}else{e=e.match(V)}var n,r=0,i=e.length;for(;r<i;r++){n=e[r];wt.tweeners[n]=wt.tweeners[n]||[];wt.tweeners[n].unshift(t)}},prefilters:[Mt],prefilter:function(e,t){if(t){wt.prefilters.unshift(e)}else{wt.prefilters.push(e)}}});C.speed=function(e,t,n){var r=e&&typeof e==="object"?C.extend({},e):{complete:n||!n&&t||b(e)&&e,duration:e,easing:n&&t||t&&!b(t)&&t};if(C.fx.off){r.duration=0}else{if(typeof r.duration!=="number"){if(r.duration in C.fx.speeds){r.duration=C.fx.speeds[r.duration]}else{r.duration=C.fx.speeds._default}}}if(r.queue==null||r.queue===true){r.queue="fx"}r.old=r.complete;r.complete=function(){if(b(r.old)){r.old.call(this)}if(r.queue){C.dequeue(this,r.queue)}};return r};C.fn.extend({fadeTo:function(e,t,n,r){return this.filter(he).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=C.isEmptyObject(e),a=C.speed(t,n,r),o=function(){var t=wt(this,C.extend({},e),a);if(i||ne.get(this,"finish")){t.stop(true)}};o.finish=o;return i||a.queue===false?this.each(o):this.queue(a.queue,o)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop;t(n)};if(typeof e!=="string"){n=t;t=e;e=undefined}if(t&&e!==false){this.queue(e||"fx",[])}return this.each(function(){var t=true,i=e!=null&&e+"queueHooks",a=C.timers,o=ne.get(this);if(i){if(o[i]&&o[i].stop){r(o[i])}}else{for(i in o){if(o[i]&&o[i].stop&&gt.test(i)){r(o[i])}}}for(i=a.length;i--;){if(a[i].elem===this&&(e==null||a[i].queue===e)){a[i].anim.stop(n);t=false;a.splice(i,1)}}if(t||!n){C.dequeue(this,e)}})},finish:function(e){if(e!==false){e=e||"fx"}return this.each(function(){var t,n=ne.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],a=C.timers,o=r?r.length:0;n.finish=true;C.queue(this,e,[]);if(i&&i.stop){i.stop.call(this,true)}for(t=a.length;t--;){if(a[t].elem===this&&a[t].queue===e){a[t].anim.stop(true);a.splice(t,1)}}for(t=0;t<o;t++){if(r[t]&&r[t].finish){r[t].finish.call(this)}}delete n.finish})}});C.each(["toggle","show","hide"],function(e,t){var n=C.fn[t];C.fn[t]=function(e,r,i){return e==null||typeof e==="boolean"?n.apply(this,arguments):this.animate(yt(t,true),e,r,i)}});C.each({slideDown:yt("show"),slideUp:yt("hide"),slideToggle:yt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){C.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}});C.timers=[];C.fx.tick=function(){var e,t=0,n=C.timers;dt=Date.now();for(;t<n.length;t++){e=n[t];if(!e()&&n[t]===e){n.splice(t--,1)}}if(!n.length){C.fx.stop()}dt=undefined};C.fx.timer=function(e){C.timers.push(e);C.fx.start()};C.fx.interval=13;C.fx.start=function(){if(pt){return}pt=true;mt()};C.fx.stop=function(){pt=null};C.fx.speeds={slow:600,fast:200,_default:400};C.fn.delay=function(e,t){e=C.fx?C.fx.speeds[e]||e:e;t=t||"fx";return this.queue(t,function(t,r){var i=n.setTimeout(t,e);r.stop=function(){n.clearTimeout(i)}})};(function(){var e=s.createElement("input"),t=s.createElement("select"),n=t.appendChild(s.createElement("option"));e.type="checkbox";y.checkOn=e.value!=="";y.optSelected=n.selected;e=s.createElement("input");e.value="t";e.type="radio";y.radioValue=e.value==="t"})();var At,Tt=C.expr.attrHandle;C.fn.extend({attr:function(e,t){return X(this,C.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){C.removeAttr(this,e)})}});C.extend({attr:function(e,t,n){var r,i,a=e.nodeType;if(a===3||a===8||a===2){return}if(typeof e.getAttribute==="undefined"){return C.prop(e,t,n)}if(a!==1||!C.isXMLDoc(e)){i=C.attrHooks[t.toLowerCase()]||(C.expr.match.bool.test(t)?At:undefined)}if(n!==undefined){if(n===null){C.removeAttr(e,t);return}if(i&&"set"in i&&(r=i.set(e,n,t))!==undefined){return r}e.setAttribute(t,n+"");return n}if(i&&"get"in i&&(r=i.get(e,t))!==null){return r}r=C.find.attr(e,t);return r==null?undefined:r},attrHooks:{type:{set:function(e,t){if(!y.radioValue&&t==="radio"&&_(e,"input")){var n=e.value;e.setAttribute("type",t);if(n){e.value=n}return t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(V);if(i&&e.nodeType===1){while(n=i[r++]){e.removeAttribute(n)}}}});At={set:function(e,t,n){if(t===false){C.removeAttr(e,n)}else{e.setAttribute(n,n)}return n}};C.each(C.expr.match.bool.source.match(/\w+/g),function(e,t){var n=Tt[t]||C.find.attr;Tt[t]=function(e,t,r){var i,a,o=t.toLowerCase();if(!r){a=Tt[o];Tt[o]=i;i=n(e,t,r)!=null?o:null;Tt[o]=a}return i}});var Ct=/^(?:input|select|textarea|button)$/i,St=/^(?:a|area)$/i;C.fn.extend({prop:function(e,t){return X(this,C.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[C.propFix[e]||e]})}});C.extend({prop:function(e,t,n){var r,i,a=e.nodeType;if(a===3||a===8||a===2){return}if(a!==1||!C.isXMLDoc(e)){t=C.propFix[t]||t;i=C.propHooks[t]}if(n!==undefined){if(i&&"set"in i&&(r=i.set(e,n,t))!==undefined){return r}return e[t]=n}if(i&&"get"in i&&(r=i.get(e,t))!==null){return r}return e[t]},propHooks:{tabIndex:{get:function(e){var t=C.find.attr(e,"tabindex");if(t){return parseInt(t,10)}if(Ct.test(e.nodeName)||St.test(e.nodeName)&&e.href){return 0}return-1}}},propFix:{for:"htmlFor",class:"className"}});if(!y.optSelected){C.propHooks.selected={get:function(e){var t=e.parentNode;if(t&&t.parentNode){t.parentNode.selectedIndex}return null},set:function(e){var t=e.parentNode;if(t){t.selectedIndex;if(t.parentNode){t.parentNode.selectedIndex}}}}}C.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){C.propFix[this.toLowerCase()]=this});function Dt(e){var t=e.match(V)||[];return t.join(" ")}function It(e){return e.getAttribute&&e.getAttribute("class")||""}function Et(e){if(Array.isArray(e)){return e}if(typeof e==="string"){return e.match(V)||[]}return[]}C.fn.extend({addClass:function(e){var t,n,r,i,a,o,s,u=0;if(b(e)){return this.each(function(t){C(this).addClass(e.call(this,t,It(this)))})}t=Et(e);if(t.length){while(n=this[u++]){i=It(n);r=n.nodeType===1&&" "+Dt(i)+" ";if(r){o=0;while(a=t[o++]){if(r.indexOf(" "+a+" ")<0){r+=a+" "}}s=Dt(r);if(i!==s){n.setAttribute("class",s)}}}}return this},removeClass:function(e){var t,n,r,i,a,o,s,u=0;if(b(e)){return this.each(function(t){C(this).removeClass(e.call(this,t,It(this)))})}if(!arguments.length){return this.attr("class","")}t=Et(e);if(t.length){while(n=this[u++]){i=It(n);r=n.nodeType===1&&" "+Dt(i)+" ";if(r){o=0;while(a=t[o++]){while(r.indexOf(" "+a+" ")>-1){r=r.replace(" "+a+" "," ")}}s=Dt(r);if(i!==s){n.setAttribute("class",s)}}}}return this},toggleClass:function(e,t){var n=typeof e,r=n==="string"||Array.isArray(e);if(typeof t==="boolean"&&r){return t?this.addClass(e):this.removeClass(e)}if(b(e)){return this.each(function(n){C(this).toggleClass(e.call(this,n,It(this),t),t)})}return this.each(function(){var t,i,a,o;if(r){i=0;a=C(this);o=Et(e);while(t=o[i++]){if(a.hasClass(t)){a.removeClass(t)}else{a.addClass(t)}}}else if(e===undefined||n==="boolean"){t=It(this);if(t){ne.set(this,"__className__",t)}if(this.setAttribute){this.setAttribute("class",t||e===false?"":ne.get(this,"__className__")||"")}}})},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++]){if(n.nodeType===1&&(" "+Dt(It(n))+" ").indexOf(t)>-1){return true}}return false}});var Nt=/\r/g;C.fn.extend({val:function(e){var t,n,r,i=this[0];if(!arguments.length){if(i){t=C.valHooks[i.type]||C.valHooks[i.nodeName.toLowerCase()];if(t&&"get"in t&&(n=t.get(i,"value"))!==undefined){return n}n=i.value;if(typeof n==="string"){return n.replace(Nt,"")}return n==null?"":n}return}r=b(e);return this.each(function(n){var i;if(this.nodeType!==1){return}if(r){i=e.call(this,n,C(this).val())}else{i=e}if(i==null){i=""}else if(typeof i==="number"){i+=""}else if(Array.isArray(i)){i=C.map(i,function(e){return e==null?"":e+""})}t=C.valHooks[this.type]||C.valHooks[this.nodeName.toLowerCase()];if(!t||!("set"in t)||t.set(this,i,"value")===undefined){this.value=i}})}});C.extend({valHooks:{option:{get:function(e){var t=C.find.attr(e,"value");return t!=null?t:Dt(C.text(e))}},select:{get:function(e){var t,n,r,i=e.options,a=e.selectedIndex,o=e.type==="select-one",s=o?null:[],u=o?a+1:i.length;if(a<0){r=u}else{r=o?a:0}for(;r<u;r++){n=i[r];if((n.selected||r===a)&&!n.disabled&&(!n.parentNode.disabled||!_(n.parentNode,"optgroup"))){t=C(n).val();if(o){return t}s.push(t)}}return s},set:function(e,t){var n,r,i=e.options,a=C.makeArray(t),o=i.length;while(o--){r=i[o];if(r.selected=C.inArray(C.valHooks.option.get(r),a)>-1){n=true}}if(!n){e.selectedIndex=-1}return a}}}});C.each(["radio","checkbox"],function(){C.valHooks[this]={set:function(e,t){if(Array.isArray(t)){return e.checked=C.inArray(C(e).val(),t)>-1}}};if(!y.checkOn){C.valHooks[this].get=function(e){return e.getAttribute("value")===null?"on":e.value}}});y.focusin="onfocusin"in n;var Ot=/^(?:focusinfocus|focusoutblur)$/,_t=function(e){e.stopPropagation()};C.extend(C.event,{trigger:function(e,t,r,i){var a,o,u,l,c,f,d,p,h=[r||s],m=g.call(e,"type")?e.type:e,v=g.call(e,"namespace")?e.namespace.split("."):[];o=p=u=r=r||s;if(r.nodeType===3||r.nodeType===8){return}if(Ot.test(m+C.event.triggered)){return}if(m.indexOf(".")>-1){v=m.split(".");m=v.shift();v.sort()}c=m.indexOf(":")<0&&"on"+m;e=e[C.expando]?e:new C.Event(m,typeof e==="object"&&e);e.isTrigger=i?2:3;e.namespace=v.join(".");e.rnamespace=e.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;e.result=undefined;if(!e.target){e.target=r}t=t==null?[e]:C.makeArray(t,[e]);d=C.event.special[m]||{};if(!i&&d.trigger&&d.trigger.apply(r,t)===false){return}if(!i&&!d.noBubble&&!M(r)){l=d.delegateType||m;if(!Ot.test(l+m)){o=o.parentNode}for(;o;o=o.parentNode){h.push(o);u=o}if(u===(r.ownerDocument||s)){h.push(u.defaultView||u.parentWindow||n)}}a=0;while((o=h[a++])&&!e.isPropagationStopped()){p=o;e.type=a>1?l:d.bindType||m;f=(ne.get(o,"events")||{})[e.type]&&ne.get(o,"handle");if(f){f.apply(o,t)}f=c&&o[c];if(f&&f.apply&&ee(o)){e.result=f.apply(o,t);if(e.result===false){e.preventDefault()}}}e.type=m;if(!i&&!e.isDefaultPrevented()){if((!d._default||d._default.apply(h.pop(),t)===false)&&ee(r)){if(c&&b(r[m])&&!M(r)){u=r[c];if(u){r[c]=null}C.event.triggered=m;if(e.isPropagationStopped()){p.addEventListener(m,_t)}r[m]();if(e.isPropagationStopped()){p.removeEventListener(m,_t)}C.event.triggered=undefined;if(u){r[c]=u}}}}return e.result},simulate:function(e,t,n){var r=C.extend(new C.Event,n,{type:e,isSimulated:true});C.event.trigger(r,null,t)}});C.fn.extend({trigger:function(e,t){return this.each(function(){C.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n){return C.event.trigger(e,t,n,true)}}});if(!y.focusin){C.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){C.event.simulate(t,e.target,C.event.fix(e))};C.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=ne.access(r,t);if(!i){r.addEventListener(e,n,true)}ne.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=ne.access(r,t)-1;if(!i){r.removeEventListener(e,n,true);ne.remove(r,t)}else{ne.access(r,t,i)}}}})}var Lt=n.location;var Pt=Date.now();var kt=/\?/;C.parseXML=function(e){var t;if(!e||typeof e!=="string"){return null}try{t=(new n.DOMParser).parseFromString(e,"text/xml")}catch(e){t=undefined}if(!t||t.getElementsByTagName("parsererror").length){C.error("Invalid XML: "+e)}return t};var Rt=/\[\]$/,jt=/\r?\n/g,Bt=/^(?:submit|button|image|reset|file)$/i,zt=/^(?:input|select|textarea|keygen)/i;function Ft(e,t,n,r){var i;if(Array.isArray(t)){C.each(t,function(t,i){if(n||Rt.test(e)){r(e,i)}else{Ft(e+"["+(typeof i==="object"&&i!=null?t:"")+"]",i,n,r)}})}else if(!n&&A(t)==="object"){for(i in t){Ft(e+"["+i+"]",t[i],n,r)}}else{r(e,t)}}C.param=function(e,t){var n,r=[],i=function(e,t){var n=b(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(n==null?"":n)};if(e==null){return""}if(Array.isArray(e)||e.jquery&&!C.isPlainObject(e)){C.each(e,function(){i(this.name,this.value)})}else{for(n in e){Ft(n,e[n],t,i)}}return r.join("&")};C.fn.extend({serialize:function(){return C.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=C.prop(this,"elements");return e?C.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!C(this).is(":disabled")&&zt.test(this.nodeName)&&!Bt.test(e)&&(this.checked||!Me.test(e))}).map(function(e,t){var n=C(this).val();if(n==null){return null}if(Array.isArray(n)){return C.map(n,function(e){return{name:t.name,value:e.replace(jt,"\r\n")}})}return{name:t.name,value:n.replace(jt,"\r\n")}}).get()}});var Vt=/%20/g,Ut=/#.*$/,Gt=/([?&])_=[^&]*/,Wt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ht=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Yt=/^(?:GET|HEAD)$/,Qt=/^\/\//,qt={},Xt={},Kt="*/".concat("*"),Zt=s.createElement("a");Zt.href=Lt.href;function Jt(e){return function(t,n){if(typeof t!=="string"){n=t;t="*"}var r,i=0,a=t.toLowerCase().match(V)||[];if(b(n)){while(r=a[i++]){if(r[0]==="+"){r=r.slice(1)||"*";(e[r]=e[r]||[]).unshift(n)}else{(e[r]=e[r]||[]).push(n)}}}}}function $t(e,t,n,r){var i={},a=e===Xt;function o(s){var u;i[s]=true;C.each(e[s]||[],function(e,s){var l=s(t,n,r);if(typeof l==="string"&&!a&&!i[l]){t.dataTypes.unshift(l);o(l);return false}else if(a){return!(u=l)}});return u}return o(t.dataTypes[0])||!i["*"]&&o("*")}function en(e,t){var n,r,i=C.ajaxSettings.flatOptions||{};for(n in t){if(t[n]!==undefined){(i[n]?e:r||(r={}))[n]=t[n]}}if(r){C.extend(true,e,r)}return e}function tn(e,t,n){var r,i,a,o,s=e.contents,u=e.dataTypes;while(u[0]==="*"){u.shift();if(r===undefined){r=e.mimeType||t.getResponseHeader("Content-Type")}}if(r){for(i in s){if(s[i]&&s[i].test(r)){u.unshift(i);break}}}if(u[0]in n){a=u[0]}else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){a=i;break}if(!o){o=i}}a=a||o}if(a){if(a!==u[0]){u.unshift(a)}return n[a]}}function nn(e,t,n,r){var i,a,o,s,u,l={},c=e.dataTypes.slice();if(c[1]){for(o in e.converters){l[o.toLowerCase()]=e.converters[o]}}a=c.shift();while(a){if(e.responseFields[a]){n[e.responseFields[a]]=t}if(!u&&r&&e.dataFilter){t=e.dataFilter(t,e.dataType)}u=a;a=c.shift();if(a){if(a==="*"){a=u}else if(u!=="*"&&u!==a){o=l[u+" "+a]||l["* "+a];if(!o){for(i in l){s=i.split(" ");if(s[1]===a){o=l[u+" "+s[0]]||l["* "+s[0]];if(o){if(o===true){o=l[i]}else if(l[i]!==true){a=s[0];c.unshift(s[1])}break}}}}if(o!==true){if(o&&e.throws){t=o(t)}else{try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+u+" to "+a}}}}}}}return{state:"success",data:t}}C.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Lt.href,type:"GET",isLocal:Ht.test(Lt.protocol),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Kt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":true,"text json":JSON.parse,"text xml":C.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(e,t){return t?en(en(e,C.ajaxSettings),t):en(C.ajaxSettings,e)},ajaxPrefilter:Jt(qt),ajaxTransport:Jt(Xt),ajax:function(e,t){if(typeof e==="object"){t=e;e=undefined}t=t||{};var r,i,a,o,u,l,c,f,d,p,h=C.ajaxSetup({},t),g=h.context||h,m=h.context&&(g.nodeType||g.jquery)?C(g):C.event,v=C.Deferred(),y=C.Callbacks("once memory"),b=h.statusCode||{},M={},x={},w="canceled",A={readyState:0,getResponseHeader:function(e){var t;if(c){if(!o){o={};while(t=Wt.exec(a)){o[t[1].toLowerCase()+" "]=(o[t[1].toLowerCase()+" "]||[]).concat(t[2])}}t=o[e.toLowerCase()+" "]}return t==null?null:t.join(", ")},getAllResponseHeaders:function(){return c?a:null},setRequestHeader:function(e,t){if(c==null){e=x[e.toLowerCase()]=x[e.toLowerCase()]||e;M[e]=t}return this},overrideMimeType:function(e){if(c==null){h.mimeType=e}return this},statusCode:function(e){var t;if(e){if(c){A.always(e[A.status])}else{for(t in e){b[t]=[b[t],e[t]]}}}return this},abort:function(e){var t=e||w;if(r){r.abort(t)}T(0,t);return this}};v.promise(A);h.url=((e||h.url||Lt.href)+"").replace(Qt,Lt.protocol+"//");h.type=t.method||t.type||h.method||h.type;h.dataTypes=(h.dataType||"*").toLowerCase().match(V)||[""];if(h.crossDomain==null){l=s.createElement("a");try{l.href=h.url;l.href=l.href;h.crossDomain=Zt.protocol+"//"+Zt.host!==l.protocol+"//"+l.host}catch(e){h.crossDomain=true}}if(h.data&&h.processData&&typeof h.data!=="string"){h.data=C.param(h.data,h.traditional)}$t(qt,h,t,A);if(c){return A}f=C.event&&h.global;if(f&&C.active++===0){C.event.trigger("ajaxStart")}h.type=h.type.toUpperCase();h.hasContent=!Yt.test(h.type);i=h.url.replace(Ut,"");if(!h.hasContent){p=h.url.slice(i.length);if(h.data&&(h.processData||typeof h.data==="string")){i+=(kt.test(i)?"&":"?")+h.data;delete h.data}if(h.cache===false){i=i.replace(Gt,"$1");p=(kt.test(i)?"&":"?")+"_="+Pt+++p}h.url=i+p}else if(h.data&&h.processData&&(h.contentType||"").indexOf("application/x-www-form-urlencoded")===0){h.data=h.data.replace(Vt,"+")}if(h.ifModified){if(C.lastModified[i]){A.setRequestHeader("If-Modified-Since",C.lastModified[i])}if(C.etag[i]){A.setRequestHeader("If-None-Match",C.etag[i])}}if(h.data&&h.hasContent&&h.contentType!==false||t.contentType){A.setRequestHeader("Content-Type",h.contentType)}A.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+(h.dataTypes[0]!=="*"?", "+Kt+"; q=0.01":""):h.accepts["*"]);for(d in h.headers){A.setRequestHeader(d,h.headers[d])}if(h.beforeSend&&(h.beforeSend.call(g,A,h)===false||c)){return A.abort()}w="abort";y.add(h.complete);A.done(h.success);A.fail(h.error);r=$t(Xt,h,t,A);if(!r){T(-1,"No Transport")}else{A.readyState=1;if(f){m.trigger("ajaxSend",[A,h])}if(c){return A}if(h.async&&h.timeout>0){u=n.setTimeout(function(){A.abort("timeout")},h.timeout)}try{c=false;r.send(M,T)}catch(e){if(c){throw e}T(-1,e)}}function T(e,t,o,s){var l,d,p,M,x,w=t;if(c){return}c=true;if(u){n.clearTimeout(u)}r=undefined;a=s||"";A.readyState=e>0?4:0;l=e>=200&&e<300||e===304;if(o){M=tn(h,A,o)}M=nn(h,M,A,l);if(l){if(h.ifModified){x=A.getResponseHeader("Last-Modified");if(x){C.lastModified[i]=x}x=A.getResponseHeader("etag");if(x){C.etag[i]=x}}if(e===204||h.type==="HEAD"){w="nocontent"}else if(e===304){w="notmodified"}else{w=M.state;d=M.data;p=M.error;l=!p}}else{p=w;if(e||!w){w="error";if(e<0){e=0}}}A.status=e;A.statusText=(t||w)+"";if(l){v.resolveWith(g,[d,w,A])}else{v.rejectWith(g,[A,w,p])}A.statusCode(b);b=undefined;if(f){m.trigger(l?"ajaxSuccess":"ajaxError",[A,h,l?d:p])}y.fireWith(g,[A,w]);if(f){m.trigger("ajaxComplete",[A,h]);if(!--C.active){C.event.trigger("ajaxStop")}}}return A},getJSON:function(e,t,n){return C.get(e,t,n,"json")},getScript:function(e,t){return C.get(e,undefined,t,"script")}});C.each(["get","post"],function(e,t){C[t]=function(e,n,r,i){if(b(n)){i=i||r;r=n;n=undefined}return C.ajax(C.extend({url:e,type:t,dataType:i,data:n,success:r},C.isPlainObject(e)&&e))}});C._evalUrl=function(e,t){return C.ajax({url:e,type:"GET",dataType:"script",cache:true,async:false,global:false,converters:{"text script":function(){}},dataFilter:function(e){C.globalEval(e,t)}})};C.fn.extend({wrapAll:function(e){var t;if(this[0]){if(b(e)){e=e.call(this[0])}t=C(e,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){t.insertBefore(this[0])}t.map(function(){var e=this;while(e.firstElementChild){e=e.firstElementChild}return e}).append(this)}return this},wrapInner:function(e){if(b(e)){return this.each(function(t){C(this).wrapInner(e.call(this,t))})}return this.each(function(){var t=C(this),n=t.contents();if(n.length){n.wrapAll(e)}else{t.append(e)}})},wrap:function(e){var t=b(e);return this.each(function(n){C(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){this.parent(e).not("body").each(function(){C(this).replaceWith(this.childNodes)});return this}});C.expr.pseudos.hidden=function(e){return!C.expr.pseudos.visible(e)};C.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)};C.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(e){}};var rn={0:200,1223:204},an=C.ajaxSettings.xhr();y.cors=!!an&&"withCredentials"in an;y.ajax=an=!!an;C.ajaxTransport(function(e){var t,r;if(y.cors||an&&!e.crossDomain){return{send:function(i,a){var o,s=e.xhr();s.open(e.type,e.url,e.async,e.username,e.password);if(e.xhrFields){for(o in e.xhrFields){s[o]=e.xhrFields[o]}}if(e.mimeType&&s.overrideMimeType){s.overrideMimeType(e.mimeType)}if(!e.crossDomain&&!i["X-Requested-With"]){i["X-Requested-With"]="XMLHttpRequest"}for(o in i){s.setRequestHeader(o,i[o])}t=function(e){return function(){if(t){t=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null;if(e==="abort"){s.abort()}else if(e==="error"){if(typeof s.status!=="number"){a(0,"error")}else{a(s.status,s.statusText)}}else{a(rn[s.status]||s.status,s.statusText,(s.responseType||"text")!=="text"||typeof s.responseText!=="string"?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders())}}}};s.onload=t();r=s.onerror=s.ontimeout=t("error");if(s.onabort!==undefined){s.onabort=r}else{s.onreadystatechange=function(){if(s.readyState===4){n.setTimeout(function(){if(t){r()}})}}}t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(e){if(t){throw e}}},abort:function(){if(t){t()}}}}});C.ajaxPrefilter(function(e){if(e.crossDomain){e.contents.script=false}});C.ajaxSetup({accepts:{script:"text/javascript, application/javascript, "+"application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){C.globalEval(e);return e}}});C.ajaxPrefilter("script",function(e){if(e.cache===undefined){e.cache=false}if(e.crossDomain){e.type="GET"}});C.ajaxTransport("script",function(e){if(e.crossDomain||e.scriptAttrs){var t,n;return{send:function(r,i){t=C("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove();n=null;if(e){i(e.type==="error"?404:200,e.type)}});s.head.appendChild(t[0])},abort:function(){if(n){n()}}}}});var on=[],sn=/(=)\?(?=&|$)|\?\?/;C.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=on.pop()||C.expando+"_"+Pt++;this[e]=true;return e}});C.ajaxPrefilter("json jsonp",function(e,t,r){var i,a,o,s=e.jsonp!==false&&(sn.test(e.url)?"url":typeof e.data==="string"&&(e.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&sn.test(e.data)&&"data");if(s||e.dataTypes[0]==="jsonp"){i=e.jsonpCallback=b(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback;if(s){e[s]=e[s].replace(sn,"$1"+i)}else if(e.jsonp!==false){e.url+=(kt.test(e.url)?"&":"?")+e.jsonp+"="+i}e.converters["script json"]=function(){if(!o){C.error(i+" was not called")}return o[0]};e.dataTypes[0]="json";a=n[i];n[i]=function(){o=arguments};r.always(function(){if(a===undefined){C(n).removeProp(i)}else{n[i]=a}if(e[i]){e.jsonpCallback=t.jsonpCallback;on.push(i)}if(o&&b(a)){a(o[0])}o=a=undefined});return"script"}});y.createHTMLDocument=function(){var e=s.implementation.createHTMLDocument("").body;e.innerHTML="<form></form><form></form>";return e.childNodes.length===2}();C.parseHTML=function(e,t,n){if(typeof e!=="string"){return[]}if(typeof t==="boolean"){n=t;t=false}var r,i,a;if(!t){if(y.createHTMLDocument){t=s.implementation.createHTMLDocument("");r=t.createElement("base");r.href=s.location.href;t.head.appendChild(r)}else{t=s}}i=L.exec(e);a=!n&&[];if(i){return[t.createElement(i[1])]}i=De([e],t,a);if(a&&a.length){C(a).remove()}return C.merge([],i.childNodes)};C.fn.load=function(e,t,n){var r,i,a,o=this,s=e.indexOf(" ");if(s>-1){r=Dt(e.slice(s));e=e.slice(0,s)}if(b(t)){n=t;t=undefined}else if(t&&typeof t==="object"){i="POST"}if(o.length>0){C.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){a=arguments;o.html(r?C("<div>").append(C.parseHTML(e)).find(r):e)}).always(n&&function(e,t){o.each(function(){n.apply(this,a||[e.responseText,t,e])})})}return this};C.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){C.fn[t]=function(e){return this.on(t,e)}});C.expr.pseudos.animated=function(e){return C.grep(C.timers,function(t){return e===t.elem}).length};C.offset={setOffset:function(e,t,n){var r,i,a,o,s,u,l,c=C.css(e,"position"),f=C(e),d={};if(c==="static"){e.style.position="relative"}s=f.offset();a=C.css(e,"top");u=C.css(e,"left");l=(c==="absolute"||c==="fixed")&&(a+u).indexOf("auto")>-1;if(l){r=f.position();o=r.top;i=r.left}else{o=parseFloat(a)||0;i=parseFloat(u)||0}if(b(t)){t=t.call(e,n,C.extend({},s))}if(t.top!=null){d.top=t.top-s.top+o}if(t.left!=null){d.left=t.left-s.left+i}if("using"in t){t.using.call(e,d)}else{f.css(d)}}};C.fn.extend({offset:function(e){if(arguments.length){return e===undefined?this:this.each(function(t){C.offset.setOffset(this,e,t)})}var t,n,r=this[0];if(!r){return}if(!r.getClientRects().length){return{top:0,left:0}}t=r.getBoundingClientRect();n=r.ownerDocument.defaultView;return{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}},position:function(){if(!this[0]){return}var e,t,n,r=this[0],i={top:0,left:0};if(C.css(r,"position")==="fixed"){t=r.getBoundingClientRect()}else{t=this.offset();n=r.ownerDocument;e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&C.css(e,"position")==="static"){e=e.parentNode}if(e&&e!==r&&e.nodeType===1){i=C(e).offset();i.top+=C.css(e,"borderTopWidth",true);i.left+=C.css(e,"borderLeftWidth",true)}}return{top:t.top-i.top-C.css(r,"marginTop",true),left:t.left-i.left-C.css(r,"marginLeft",true)}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&C.css(e,"position")==="static"){e=e.offsetParent}return e||fe})}});C.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;C.fn[e]=function(r){return X(this,function(e,r,i){var a;if(M(e)){a=e}else if(e.nodeType===9){a=e.defaultView}if(i===undefined){return a?a[t]:e[r]}if(a){a.scrollTo(!n?i:a.pageXOffset,n?i:a.pageYOffset)}else{e[r]=i}},e,r,arguments.length)}});C.each(["top","left"],function(e,t){C.cssHooks[t]=Je(y.pixelPosition,function(e,n){if(n){n=Ze(e,t);return qe.test(n)?C(e).position()[t]+"px":n}})});C.each({Height:"height",Width:"width"},function(e,t){C.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){C.fn[r]=function(i,a){var o=arguments.length&&(n||typeof i!=="boolean"),s=n||(i===true||a===true?"margin":"border");return X(this,function(t,n,i){var a;if(M(t)){return r.indexOf("outer")===0?t["inner"+e]:t.document.documentElement["client"+e]}if(t.nodeType===9){a=t.documentElement;return Math.max(t.body["scroll"+e],a["scroll"+e],t.body["offset"+e],a["offset"+e],a["client"+e])}return i===undefined?C.css(t,n,s):C.style(t,n,i,s)},t,o?i:undefined,o)}})});C.each(("blur focus focusin focusout resize scroll click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup contextmenu").split(" "),function(e,t){C.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}});C.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}});C.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)}});C.proxy=function(e,t){var n,r,i;if(typeof t==="string"){n=e[t];t=e;e=n}if(!b(e)){return undefined}r=l.call(arguments,2);i=function(){return e.apply(t||this,r.concat(l.call(arguments)))};i.guid=e.guid=e.guid||C.guid++;return i};C.holdReady=function(e){if(e){C.readyWait++}else{C.ready(true)}};C.isArray=Array.isArray;C.parseJSON=JSON.parse;C.nodeName=_;C.isFunction=b;C.isWindow=M;C.camelCase=$;C.type=A;C.now=Date.now;C.isNumeric=function(e){var t=C.type(e);return(t==="number"||t==="string")&&!isNaN(e-parseFloat(e))};if(true){!(r=[],i=function(){return C}.apply(t,r),i!==undefined&&(e.exports=i))}var un=n.jQuery,ln=n.$;C.noConflict=function(e){if(n.$===C){n.$=ln}if(e&&n.jQuery===C){n.jQuery=un}return C};if(!a){n.jQuery=n.$=C}return C})},function(e,t,n){var r=n(9);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){"use strict";e.exports=Object.assign(n(241),n(566),n(568),n(569),{DistanceGrid:n(245),ClusterGroup:n(246)})},function(e,t){var n=e.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();if(typeof __g=="number")__g=n},function(e,t,n){"use strict";n.d(t,"e",function(){return r});n.d(t,"f",function(){return i});n.d(t,"h",function(){return a});n.d(t,"g",function(){return o});n.d(t,"l",function(){return s});n.d(t,"d",function(){return u});n.d(t,"m",function(){return l});n.d(t,"j",function(){return c});n.d(t,"k",function(){return f});n.d(t,"b",function(){return d});n.d(t,"a",function(){return p});n.d(t,"i",function(){return h});n.d(t,"c",function(){return g});n.d(t,"o",function(){return m});n.d(t,"n",function(){return v});var r=1;var i=2;var a=4;var o=5;var s=484813681109536e-20;var u=Math.PI/2;var l=.16666666666666666;var c=.04722222222222222;var f=.022156084656084655;var d=1e-10;var p=.017453292519943295;var h=57.29577951308232;var g=Math.PI/4;var m=Math.PI*2;var v=3.14159265359},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return true}}},function(e,t){e.exports=function(e){return typeof e==="object"?e!==null:typeof e==="function"}},function(e,t,n){var r=n(68)("wks");var i=n(46);var a=n(6).Symbol;var o=typeof a=="function";var s=e.exports=function(e){return r[e]||(r[e]=o&&a[e]||(o?a:i)("Symbol."+e))};s.store=r},function(e,t,n){"use strict";var r={};r.layerAdd="geo_layerAdd";r.layerRemove="geo_layerRemove";r.zoom="geo_zoom";r.rotate="geo_rotate";r.pan="geo_pan";r.resize="geo_resize";r.draw="geo_draw";r.drawEnd="geo_drawEnd";r.unhidden="geo_unhidden";r.hidden="geo_hidden";r.mousemove="geo_mousemove";r.mouseclick="geo_mouseclick";r.brush="geo_brush";r.brushend="geo_brushend";r.brushstart="geo_brushstart";r.select="geo_select";r.zoomselect="geo_zoomselect";r.unzoomselect="geo_unzoomselect";r.actiondown="geo_actiondown";r.actionmove="geo_actionmove";r.actionup="geo_actionup";r.actionselection="geo_actionselection";r.actionwheel="geo_actionwheel";r.keyaction="geo_keyaction";r.transitionstart="geo_transitionstart";r.transitionend="geo_transitionend";r.transitioncancel="geo_transitioncancel";r.parallelprojection="geo_parallelprojection";r.feature={mousemove:"geo_feature_mousemove",mouseover:"geo_feature_mouseover",mouseover_order:"geo_feature_mouseover_order",mouseout:"geo_feature_mouseout",mouseon:"geo_feature_mouseon",mouseoff:"geo_feature_mouseoff",mouseclick:"geo_feature_mouseclick",mouseclick_order:"geo_feature_mouseclick_order",brushend:"geo_feature_brushend",brush:"geo_feature_brush"};r.pixelmap={prepared:"geo_pixelmap_prepared"};r.screenshot={ready:"geo_screenshot_ready"};r.camera={};r.camera.view="geo_camera_view";r.camera.projection="geo_camera_projection";r.camera.viewport="geo_camera_viewport";r.annotation={};r.annotation.add="geo_annotation_add";r.annotation.add_before="geo_annotation_add_before";r.annotation.update="geo_annotation_update";r.annotation.coordinates="geo_annotation_coordinates";r.annotation.select_edit_handle="geo_annotation_select_edit_handle";r.annotation.edit_action="geo_annotation_edit_action";r.annotation.remove="geo_annotation_remove";r.annotation.state="geo_annotation_state";r.annotation.mode="geo_annotation_mode";e.exports=r},function(e,t,n){"use strict";var r=n(7);var i=n(73);t["a"]=function(e){return Math.abs(e)<=r["n"]?e:e-Object(i["a"])(e)*r["o"]}},function(e,t,n){var r=n(31);var i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){e.exports=!n(8)(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},function(e,t,n){var r=n(4);var i=n(152);var a=n(34);var o=Object.defineProperty;t.f=n(14)?Object.defineProperty:function e(t,n,s){r(t);n=a(n,true);r(s);if(i)try{return o(t,n,s)}catch(e){}if("get"in s||"set"in s)throw TypeError("Accessors not supported!");if("value"in s)t[n]=s.value;return t}},function(e,t,n){var r=n(35);e.exports=function(e){return Object(r(e))}},function(e,t,n){"use strict";var r=n(189);var i=n(104);var a=n(75);var o=n(5);r=r.__esModule?r.default:r;var s=n(594);s.keys().forEach(function(e){r.Proj.projections.add(s(e))});var u={};var l=10;var c=new RegExp("^(.* |)\\+axis=e(n|s)u(| .*)$");var f=function e(t){"use strict";if(!(this instanceof e)){t=t||{};if(!(t.source in u)){if(Object.size(u)>=l){u={}}u[t.source]={}}if(!(t.target in u[t.source])){if(Object.size(u[t.source])>=l){u[t.source]={}}u[t.source][t.target]=new e(t)}return u[t.source][t.target]}var n=this,s,c,f,d,p,h,g;var m={s11:0,s12:4,s13:8,xoff:12,s21:1,s22:5,s23:9,yoff:13,s31:2,s32:6,s33:10,zoff:14};function v(e){if(!/(^|\s)\+(s[1-3][1-3]|[xyz]off)=\S/.exec(e)){return{proj:e}}var t=o.mat4AsArray(),n=[],r,i;e.split(/(\s+)/).forEach(function(e){var r=/^\+(s[1-3][1-3]|[xyz]off)=(.*)$/.exec(e);if(!r){n.push(e)}else{t[m[r[1]]]=parseFloat(r[2])}});i={proj:n.join(" "),orig:e};r=a.invert(o.mat4AsArray(),t);if(r){i.matrix=t;i.inverse=r}else{console.warn("Affine transform is not invertable and will not be used: "+e)}return i}function y(){var e=v(n.source()),t=v(n.target()),i=e.proj,a=t.proj;d=e.matrix;p=e.inverse;h=t.matrix;g=t.inverse;s=new r(i,a)}this.source=function(e){if(e===undefined){return c||"EPSG:4326"}c=e;y();return n};this.target=function(e){if(e===undefined){return f||"EPSG:3857"}f=e;y();return n};this._forward=function(e){if(d){var t=i.transformMat4(o.vec3AsArray(),[e.x,e.y,e.z||0],p);e={x:t[0],y:t[1],z:t[2]}}var n=s.forward(e);n.z=e.z||0;if(h){var r=i.transformMat4(o.vec3AsArray(),[n.x,n.y,n.z],h);n={x:r[0],y:r[1],z:r[2]}}return n};this._inverse=function(e){if(h){var t=i.transformMat4(o.vec3AsArray(),[e.x,e.y,e.z||0],g);e={x:t[0],y:t[1],z:t[2]}}var n=s.inverse(e);n.z=e.z||0;if(d){var r=i.transformMat4(o.vec3AsArray(),[n.x,n.y,n.z],d);n={x:r[0],y:r[1],z:r[2]}}return n};this.forward=function(e){if(Array.isArray(e)){return e.map(n._forward)}return n._forward(e)};this.inverse=function(e){if(Array.isArray(e)){return e.map(n._inverse)}return n._inverse(e)};t=t||{};try{this.source(t.source)}catch(e){console.error("Can't use transform source: "+t.source);this.source("EPSG:4326")}try{this.target(t.target)}catch(e){console.error("Can't use transform target: "+t.target);this.target("EPSG:3857")}return this};f.defs=r.defs;f.lookup=function(e){var t=n(3);var i,a=t.Deferred(),o;if(r.defs.hasOwnProperty(e)){return a.resolve(r.defs[e])}o=e.split(":");if(o.length!==2||o[0].toUpperCase()!=="EPSG"){return a.reject("Invalid projection code").promise()}i=o[1];return t.ajax({url:"https://epsg.io/?q="+i+"&format=json"}).done(function(n){var i=(n.results||[])[0];if(!i||!i.proj4){return a.reject(n).promise()}r.defs(e,i.proj4);return t.when(r.defs[e])})};f.transformCoordinates=function(e,t,n,r){"use strict";if(e===t||Array.isArray(n)&&!n.length){return n}if(Array.isArray(n)&&n.length>=3&&r===3&&!o.isObject(n[0])){return f.transformCoordinatesFlatArray3(e,t,n)}if(Array.isArray(n)&&n.length&&o.isObject(n[0])&&"x"in n[0]&&"y"in n[0]){var i=e.match(c),a=t.match(c);if(i&&a&&i[1]===a[1]&&i[3]===a[3]){if("z"in n[0]){return n.map(function(e){return{x:+e.x,y:-e.y,z:+e.z||0}})}return n.map(function(e){return{x:+e.x,y:-e.y}})}}var s=f({source:e,target:t}),u;if(o.isObject(n)&&"x"in n&&"y"in n){u=s.forward({x:+n.x,y:+n.y,z:+n.z||0});if("z"in n){return u}return{x:u.x,y:u.y}}if(Array.isArray(n)&&n.length===1&&o.isObject(n[0])&&"x"in n[0]&&"y"in n[0]){u=s.forward({x:+n[0].x,y:+n[0].y,z:+n[0].z||0});if("z"in n[0]){return[u]}return[{x:u.x,y:u.y}]}return f.transformCoordinatesArray(s,n,r)};f.transformCoordinatesArray=function(e,t,n){var r,i,a,s,u,l,c,f,d,p={};l=function e(){return 0};function h(){if(Array.isArray(t[0])){if(t[0].length===2){s=function e(n){return+t[n][0]};u=function e(n){return+t[n][1]};c=function e(t,n,r){f[t]=[n,r]}}else if(t[0].length===3){s=function e(n){return+t[n][0]};u=function e(n){return+t[n][1]};l=function e(n){return+t[n][2]};c=function e(t,n,r,i){f[t]=[n,r,i]}}else{throw new Error("Invalid coordinates. Requires two or three components per array")}}else{if(t.length===2){a=2;s=function e(n){return+t[n*a]};u=function e(n){return+t[n*a+1]};c=function e(t,n,r){f[t]=n;f[t+1]=r}}else if(t.length===3){a=3;s=function e(n){return+t[n*a]};u=function e(n){return+t[n*a+1]};l=function e(n){return+t[n*a+2]};c=function e(t,n,r,i){f[t]=n;f[t+1]=r;f[t+2]=i}}else if(n){if(n===2||n===3){a=n;s=function e(n){return+t[n]};u=function e(n){return+t[n+1]};if(n===2){c=function e(t,n,r){f[t]=n;f[t+1]=r}}else{l=function e(n){return+t[n+2]};c=function e(t,n,r,i){f[t]=n;f[t+1]=r;f[t+2]=i}}}else{throw new Error("Number of components should be two or three")}}else{throw new Error("Invalid coordinates")}}}function g(){if(t[0]&&"x"in t[0]&&"y"in t[0]){s=function e(n){return+t[n].x};u=function e(n){return+t[n].y};if("z"in t[0]){l=function e(n){return+t[n].z};c=function e(t,n,i,a){f[r]={x:n,y:i,z:a}}}else{c=function e(t,n,r){f[t]={x:n,y:r}}}}else{throw new Error("Invalid coordinates")}}if(Array.isArray(t)){f=[];f.length=t.length;i=t.length;if(!t.length){return f}if(Array.isArray(t[0])||o.isObject(t[0])){a=1;if(Array.isArray(t[0])){h()}else if(o.isObject(t[0])){g()}}else{h()}}else{throw new Error("Coordinates are not valid")}for(r=0;r<i;r+=a){p.x=s(r);p.y=u(r);p.z=l(r);d=e.forward(p);c(r,d.x,d.y,d.z)}return f};f.transformCoordinatesFlatArray3=function(e,t,n){"use strict";var i,a=e.match(c),o=t.match(c);if(a&&o&&a[1]===o[1]&&a[3]===o[3]){for(i=n.length-3+1;i>=0;i-=3){n[i]*=-1}return n}var s=r.Proj(e),u=r.Proj(t),l,f={};for(i=n.length-3;i>=0;i-=3){f.x=+n[i];f.y=+n[i+1];f.z=+(n[i+2]||0);l=r.transform(s,u,f);n[i]=l.x;n[i+1]=l.y;n[i+2]=l.z===undefined?f.z:l.z}return n};f.affineForward=function(e,t){"use strict";var n,r=e.origin,i=e.scale||{x:1,y:1,z:1};for(n=0;n<t.length;n+=1){t[n].x=(t[n].x-r.x)*i.x;t[n].y=(t[n].y-r.y)*i.y;t[n].z=((t[n].z||0)-(r.z||0))*i.z}return t};f.affineInverse=function(e,t){"use strict";var n,r=e.origin,i=e.scale||{x:1,y:1,z:1};for(n=0;n<t.length;n+=1){t[n].x=t[n].x/i.x+r.x;t[n].y=t[n].y/i.y+r.y;t[n].z=(t[n].z||0)/i.z+(r.z||0)}return t};f.sphericalDistance=function(e,t,n,i,a){i=i||"EPSG:4326";a=a||r.WGS84;n=n||i;if(n!==i){var o=f.transformCoordinates(n,i,[e,t]);e=o[0];t=o[1]}var s=e.y*Math.PI/180,u=t.y*Math.PI/180,l=(t.x-e.x)*Math.PI/180,c=Math.sin(s),d=Math.cos(s),p=Math.sin(u),h=Math.cos(u);var g=Math.atan2(Math.pow(Math.pow(h*Math.sin(l),2)+Math.pow(d*p-c*h*Math.cos(l),2),.5),c*p+d*h*Math.cos(l));return a.a*g};f.vincentyDistance=function(e,t,n,i,a,o){i=i||"EPSG:4326";a=a||r.WGS84;o=o||100;n=n||i;if(n!==i){var s=f.transformCoordinates(n,i,[e,t]);e=s[0];t=s[1]}var u=a.a,l=a.b||a.a*(1-(a.f||1/a.rf)),c=a.f||(a.rf?1/a.rf:1-l/u),d=e.y*Math.PI/180,p=t.y*Math.PI/180,h=((t.x-e.x)%360+360)%360*Math.PI/180,g=Math.atan((1-c)*Math.tan(d)),m=Math.atan((1-c)*Math.tan(p)),v=Math.sin(g),y=Math.cos(g),b=Math.sin(m),M=Math.cos(m),x=h,w=h+Math.PI*2,A,T,C,S,D,I,E,N,O,_,L,P;if(d===p&&!h){return{distance:0,alpha1:0,alpha2:0}}for(P=o;P>0&&Math.abs(x-w)>1e-12;P-=1){A=Math.pow(Math.pow(M*Math.sin(x),2)+Math.pow(y*b-v*M*Math.cos(x),2),.5);T=v*b+y*M*Math.cos(x);C=Math.atan2(A,T);S=y*M*Math.sin(x)/A;D=1-Math.pow(S,2);I=T-(D?2*v*b/D:0);E=c/16*D*(4+c*(4-3*D));w=x;x=h+(1-E)*c*S*(C+E*A*(I+E*T*(-1+2*Math.pow(I,2))))}if(!P){return}N=D*(u*u-l*l)/(l*l);O=1+N/16384*(4096+N*(-768+N*(320-175*N)));_=N/1024*(256+N*(-128+N*(74-47*N)));L=_*A*(I+_/4*(T*(-1+2*Math.pow(I,2))-_/6*I*(-3+4*A*A)*(-3+4*Math.pow(I,2))));return{distance:l*O*(C-L),alpha1:Math.atan2(M*Math.sin(x),y*b-v*M*Math.cos(x)),alpha2:Math.atan2(y*Math.sin(x),-v*M+y*b*Math.cos(x))}};f.proj4=r;e.exports=f},function(e,t){e.exports=function(e){if(typeof e!="function")throw TypeError(e+" is not a function!");return e}},function(e,t,n){"use strict";var r=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=n(3);var a=n(1);var o=n(78);var s=n(20);var u=n(17);var l=n(11);var c=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}o.call(this);var r=n(5);t=t||{};var a=this,c=this._exit,f=this.geoOn,d=this.geoOff,p,h=t.selectionAPI===undefined?"auto":t.selectionAPI,g={},m=t.layer===undefined?null:t.layer,v=t.gcs,y=t.visible===undefined?true:t.visible,b=t.bin===undefined?null:t.bin,M=t.renderer===undefined||m&&t.renderer===m.renderer()?null:t.renderer,x=s(),w=s(),A=s(),T=[],C=[];this._subfeatureStyles={};Object.defineProperty(this,"ready",{get:function e(){return p}});this._bindMouseHandlers=function(){if(!a.selectionAPI()){return}a._unbindMouseHandlers();a.geoOn(l.mousemove,a._handleMousemove);a.geoOn(l.mouseclick,a._handleMouseclick);a.geoOn(l.brushend,a._handleBrushend);a.geoOn(l.brush,a._handleBrush)};this._unbindMouseHandlers=function(){a.geoOff(l.mousemove,a._handleMousemove);a.geoOff(l.mouseclick,a._handleMouseclick);a.geoOff(l.brushend,a._handleBrushend);a.geoOff(l.brush,a._handleBrush)};this.pointSearch=function(e,t){return{index:[],found:[]}};this.boxSearch=function(e,t,n,r){return a.polygonSearch([e,{x:e.x,y:t.y},t,{x:t.x,y:e.y}],n,r)};this.polygonSearch=function(e,t,n){return{index:[],found:[]}};this._handleMousemove=function(t){var n=a.layer().map().interactor().mouse(),r=a.data(),i=a.pointSearch(n.geo),o=[],s=[],u=-1,c=-1,f;if(!C.length&&!i.index.length){return}f=i.extra||{};if(i.index.length>1){a.geoTrigger(l.feature.mouseover_order,{feature:a,mouse:n,previous:C,over:i,sourceEvent:t})}if(C.length){u=C[C.length-1]}o=i.index.filter(function(e){return C.indexOf(e)<0});s=C.filter(function(e){return i.index.indexOf(e)<0});e.eventID+=1;o.forEach(function(i,s){a.geoTrigger(l.feature.mouseover,{data:r[i],index:i,extra:f[i],mouse:n,eventID:e.eventID,top:s===o.length-1,sourceEvent:t},true)});e.eventID+=1;s.forEach(function(i,o){a.geoTrigger(l.feature.mouseout,{data:r[i],index:i,mouse:n,eventID:e.eventID,top:o===s.length-1,sourceEvent:t},true)});e.eventID+=1;i.index.forEach(function(o,s){a.geoTrigger(l.feature.mousemove,{data:r[o],index:o,extra:f[o],mouse:n,eventID:e.eventID,top:s===i.index.length-1,sourceEvent:t},true)});C=i.index;if(C.length){c=C[C.length-1]}if(u!==c){if(u!==-1){a.geoTrigger(l.feature.mouseoff,{data:r[u],index:u,mouse:n,sourceEvent:t},true)}if(c!==-1){a.geoTrigger(l.feature.mouseon,{data:r[c],index:c,extra:f[c],mouse:n,sourceEvent:t},true)}}};this._clearSelectedFeatures=function(){C=[];return a};this._handleMouseclick=function(t){var n=a.layer().map().interactor().mouse(),r=a.data(),i=a.pointSearch(n.geo),o=i.extra||{};if(i.index.length>1){a.geoTrigger(l.feature.mouseclick_order,{feature:a,mouse:n,over:i,sourceEvent:t})}n.buttonsDown=t.buttonsDown;e.eventID+=1;i.index.forEach(function(s,u){a.geoTrigger(l.feature.mouseclick,{data:r[s],index:s,extra:o[s],mouse:n,eventID:e.eventID,top:u===i.index.length-1,sourceEvent:t},true)})};this._handleBrush=function(t){var n=[t.gcs.lowerLeft,t.gcs.lowerRight,t.gcs.upperRight,t.gcs.upperLeft];if(a.layer()){var r=a.layer().map();n=u.transformCoordinates(r.gcs(),r.ingcs(),n)}var i=a.polygonSearch(n);e.eventID+=1;i.index.forEach(function(n,r){a.geoTrigger(l.feature.brush,{data:i.found[r],index:n,mouse:t.mouse,brush:t,eventID:e.eventID,top:r===i.index.length-1},true)})};this._handleBrushend=function(t){var n=[t.gcs.lowerLeft,t.gcs.lowerRight,t.gcs.upperRight,t.gcs.upperLeft];if(a.layer()){var r=a.layer().map();n=u.transformCoordinates(r.gcs(),r.ingcs(),n)}var i=a.polygonSearch(n);e.eventID+=1;i.index.forEach(function(n,r){a.geoTrigger(l.feature.brushend,{data:i.found[r],index:n,mouse:t.mouse,brush:t,eventID:e.eventID,top:r===i.index.length-1},true)})};this.style=function(e,t){if(e===undefined){return g}else if(typeof e==="string"&&t===undefined){return g[e]}else if(t===undefined){g=i.extend({},g,e);a.modified();return a}else{g[e]=t;a.modified();return a}};this.style.get=function(e){var t;if(e===undefined){var n={},i;for(i in g){if(g.hasOwnProperty(i)){n[i]=a.style.get(i)}}return n}if(e.toLowerCase().match(/color$/)){if(r.isFunction(g[e])){t=function t(){return r.convertColor(g[e].apply(a,arguments))}}else{t=r.ensureFunction(r.convertColor(g[e]))}}else{t=r.ensureFunction(g[e])}return t};this.updateStyleFromArray=function(e,t,n){if(typeof e!=="string"){i.each(e,function(e,t){a.updateStyleFromArray(e,t)})}else{var r;if(e.toLowerCase().match(/color$/)){r={r:0,g:0,b:0}}if(!Array.isArray(t)){return a}if(a._subfeatureStyles[e]){if(t.length&&Array.isArray(t[0])){a.style(e,function(e,n,i,a){var o=(t[a]||[])[n];return o!==undefined?o:r})}else{a.style(e,function(e,n,i,a){var o=t[a];return o!==undefined?o:r})}}else{a.style(e,function(e,n){var i=t[n];return i!==undefined?i:r})}}if(n&&a.visible()){a.draw()}return a};this.layer=function(){return m};this.renderer=function(){return M||m&&m.renderer()};this.gcs=function(e){if(e===undefined){if((v===undefined||v===null)&&m){return m.map().ingcs()}return v}else{v=e;a.modified();return a}};this.featureGcsToDisplay=function(e){var t=m.map();e=t.gcsToWorld(e,a.gcs());e=t.worldToDisplay(e);if(a.renderer().baseToLocal){e=a.renderer().baseToLocal(e)}return e};this.visible=function(e,t){if(e===undefined){if(!t&&m&&m.visible&&!m.visible()){return false}return y}if(y!==e||t){y=e;a.modified();if(m&&m.visible&&!m.visible()){e=false}if(e){a._bindMouseHandlers()}else{a._unbindMouseHandlers()}for(var n=0;n<T.length;n+=1){T[n].visible(y,t)}}return a};this.dependentFeatures=function(e){if(e===undefined){return T.slice()}T=e.slice();return a};this.bin=function(e,t){if(e===undefined){if(b===null&&!t){var n=a.parent(),i=n?n.children().indexOf(a):-1;return i>=0?i:0}return b}else{if(r.isNonNullFinite(e)){b=parseInt(e,10)}else{b=null}a.modified();return a}};this.dataTime=function(e){if(e===undefined){return x}else{x=e;a.modified();return a}};this.buildTime=function(e){if(e===undefined){return w}else{w=e;a.modified();return a}};this.updateTime=function(e){if(e===undefined){return A}else{A=e;a.modified();return a}};this.data=function(e){if(e===undefined){return a.style("data")||[]}else{a.style("data",e);a.dataTime().modified();a.modified();return a}};this.selectionAPI=function(e,t){if(e===undefined){if(!t&&m&&m.selectionAPI&&!m.selectionAPI()){return false}if(!t&&h==="auto"){return!!a.geoIsOn(Object.values(l.feature))}return h}if(e!=="auto"){e=!!e}if(e!==h||t){h=e;a._unbindMouseHandlers();a._bindMouseHandlers()}return a};this.mouseOverOrderHighestIndex=function(e){e.over.index.sort();var t=e.feature.data();e.over.index.forEach(function(n,r){e.over.found[r]=t[n]})};this._init=function(e){if(!m){throw new Error("Feature requires a valid layer")}g=i.extend({},{opacity:1},e.style===undefined?{}:e.style);a._bindMouseHandlers();p=true};this._build=function(){};this._update=function(){};this.geoOn=function(e,t){var n=a.selectionAPI(undefined,true)==="auto",r=n&&a.selectionAPI();var i=f.apply(a,arguments);if(n&&!r&&a.selectionAPI()){a._bindMouseHandlers()}return i};this.geoOff=function(e,t){var n=a.selectionAPI(undefined,true)==="auto",r=n&&a.selectionAPI();var i=d.apply(a,arguments);if(n&&r&&!a.selectionAPI()){a._unbindMouseHandlers()}return i};this._exit=function(){a._unbindMouseHandlers();C=[];g={};c();p=false};this._init(t);return this};c.eventID=0;c.create=function(e,t){"use strict";if(!(e instanceof n(79))){console.warn("Invalid layer");return null}if((typeof t==="undefined"?"undefined":r(t))!=="object"){console.warn("Invalid spec");return null}var i=t.type;var a=e.createFeature(i,t);if(!a){console.warn('Could not create feature type "'+i+'"');return null}t.data=t.data||[];return a.style(t)};a(c,o);e.exports=c},function(e,t,n){"use strict";var r=0;var i=function e(){"use strict";if(!(this instanceof e)){return new e}var t=this,n=0;this.modified=function(){r+=1;n=r;return t};this.timestamp=function(){return n};this.getMTime=this.timestamp;return this};e.exports=i},function(e,t,n){var r=n(15);var i=n(45);e.exports=n(14)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){e[t]=n;return e}},function(e,t,n){var r=n(6);var i=n(21);var a=n(24);var o=n(46)("src");var s=n(273);var u="toString";var l=(""+s).split(u);n(28).inspectSource=function(e){return s.call(e)};(e.exports=function(e,t,n,s){var u=typeof n=="function";if(u)a(n,"name")||i(n,"name",t);if(e[t]===n)return;if(u)a(n,o)||i(n,o,e[t]?""+e[t]:l.join(String(t)));if(e===r){e[t]=n}else if(!s){delete e[t];i(e,t,n)}else if(e[t]){e[t]=n}else{i(e,t,n)}})(Function.prototype,u,function e(){return typeof this=="function"&&this[o]||s.call(this)})},function(e,t,n){var r=n(0);var i=n(8);var a=n(35);var o=/"/g;var s=function(e,t,n,r){var i=String(a(e));var s="<"+t;if(n!=="")s+=" "+n+'="'+String(r).replace(o,"&quot;")+'"';return s+">"+i+"</"+t+">"};e.exports=function(e,t){var n={};n[e]=t(s);r(r.P+r.F*i(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",n)}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(69);var i=n(35);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(70);var i=n(45);var a=n(25);var o=n(34);var s=n(24);var u=n(152);var l=Object.getOwnPropertyDescriptor;t.f=n(14)?l:function e(t,n){t=a(t);n=o(n,true);if(u)try{return l(t,n)}catch(e){}if(s(t,n))return i(!r.f.call(t,n),t[n])}},function(e,t,n){var r=n(24);var i=n(16);var a=n(110)("IE_PROTO");var o=Object.prototype;e.exports=Object.getPrototypeOf||function(e){e=i(e);if(r(e,a))return e[a];if(typeof e.constructor=="function"&&e instanceof e.constructor){return e.constructor.prototype}return e instanceof Object?o:null}},function(e,t){var n=e.exports={version:"2.6.9"};if(typeof __e=="number")__e=n},function(e,t,n){var r=n(18);e.exports=function(e,t,n){r(e);if(t===undefined)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){var n=Math.ceil;var r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){"use strict";var r=n(8);e.exports=function(e,t){return!!e&&r(function(){t?e.call(null,function(){},1):e.call(null)})}},function(e,t,n){"use strict";var r=n(1);var i=n(2).registerRenderer;var a=n(56);var o=function e(t){"use strict";var r=e.d3;var i=n(58);var o=n(5);var s=n(11);var u=n(252);if(!(this instanceof e)){return new e(t)}a.call(this,t);var l=this._exit;i.call(this,t);t=t||{};var c=this,f=null,d={},p=null,h=null,g=1,m={dx:0,dy:0,rx:0,ry:0,rotation:0},v={},y={},b=null,M=null;function x(e,t){var n;for(n in t){if(t.hasOwnProperty(n)){e.attr(n,t[n])}}}this._convertColor=function(e,t){e=o.ensureFunction(e);t=t||function(){return true};return function(){var n="none";if(t.apply(c,arguments)){n=e.apply(c,arguments);if(n.hasOwnProperty("r")&&n.hasOwnProperty("g")&&n.hasOwnProperty("b")){n=r.rgb(255*n.r,255*n.g,255*n.b)}}return n}};this._convertScale=function(e){e=o.ensureFunction(e);return function(){return e.apply(c,arguments)/g}};function w(e,t){var n,r,i;function a(){if(t.fill.apply(c,arguments)){return null}else{return"none"}}function o(){if(t.stroke.apply(c,arguments)){return null}else{return"none"}}for(n in t){if(t.hasOwnProperty(n)){i=null;r=null;if(n==="strokeColor"){r="stroke";i=c._convertColor(t[n],t.stroke)}else if(n==="stroke"&&t[n]&&!t.hasOwnProperty("strokeColor")){r="stroke";i=o}else if(n==="strokeWidth"){r="stroke-width";i=c._convertScale(t[n])}else if(n==="strokeOpacity"){r="stroke-opacity";i=t[n]}else if(n==="fillColor"){r="fill";i=c._convertColor(t[n],t.fill)}else if(n==="fill"&&!t.hasOwnProperty("fillColor")){r="fill";i=a}else if(n==="fillOpacity"){r="fill-opacity";i=t[n]}else if(n==="lineCap"){r="stroke-linecap";i=t[n]}else if(n==="lineJoin"){r="stroke-linejoin";i=t[n]}else if(n==="miterLimit"){r="stroke-miterlimit";i=t[n]}if(r){e.style(r,i)}}}}function A(e){if(e){return b.select(".group-"+e)}return b.select(".group-"+c._svgid())}function T(){var e=c.layer(),t=e.map(),n=t.size().width,r=t.size().height;if(!n||!r){throw new Error("Map layer has size 0")}c._setWidthHeight(n,r);h=Math.pow(n*n+r*r,.5);p={upperLeft:t.displayToGcs({x:0,y:0},null),lowerRight:t.displayToGcs({x:n,y:r},null),center:t.displayToGcs({x:n/2,y:r/2},null)}}this._setTransform=function(){if(!p){T()}if(!f){return}var e=c.layer();var t=e.map(),n=t.gcsToDisplay(p.upperLeft,null),r=t.gcsToDisplay(p.lowerRight,null),i=t.gcsToDisplay(p.center,null),a=A(),o,s,u,l,d,v;u=Math.sqrt(Math.pow(r.y-n.y,2)+Math.pow(r.x-n.x,2))/h;l=t.rotation();d=-c.width()/2;v=-c.height()/2;o=u*d+i.x;s=u*v+i.y;if(!l){o=Math.round(o);s=Math.round(s)}var y="matrix("+[u,0,0,u,o,s].join()+")";if(l){y+=" rotate("+[l*180/Math.PI,-d,-v].join()+")"}a.attr("transform",y);g=u;m.dx=o;m.dy=s;m.rx=d;m.ry=v;m.rotation=l};this.baseToLocal=function(e){e={x:(e.x-m.dx)/g,y:(e.y-m.dy)/g};if(m.rotation){var t=Math.sin(-m.rotation),n=Math.cos(-m.rotation);var r=e.x+m.rx,i=e.y+m.ry;e={x:r*n-i*t-m.rx,y:r*t+i*n-m.ry}}return e};this.localToBase=function(e){if(m.rotation){var t=Math.sin(m.rotation),n=Math.cos(m.rotation);var r=e.x+m.rx,i=e.y+m.ry;e={x:r*n-i*t-m.rx,y:r*t+i*n-m.ry}}e={x:e.x*g+m.dx,y:e.y*g+m.dy};return e};this._init=function(e){if(!c.canvas()){var t;e.widget=e.widget||false;if("d3Parent"in e){b=r.select(e.d3Parent).append("svg")}else{b=r.select(c.layer().node().get(0)).append("svg")}b.attr("display","block");M=b.append("defs");var n=M.append("filter").attr("id","geo-highlight").attr("x","-100%").attr("y","-100%").attr("width","300%").attr("height","300%");n.append("feMorphology").attr("operator","dilate").attr("radius",2).attr("in","SourceAlpha").attr("result","dilateOut");n.append("feGaussianBlur").attr("stdDeviation",5).attr("in","dilateOut").attr("result","blurOut");n.append("feColorMatrix").attr("type","matrix").attr("values","-1 0 0 0 1  0 -1 0 0 1  0 0 -1 0 1  0 0 0 1 0").attr("in","blurOut").attr("result","invertOut");n.append("feBlend").attr("in","SourceGraphic").attr("in2","invertOut").attr("mode","normal");if(!e.widget){t=e.canvas||b.append("g")}n=M.append("filter").attr("id","geo-blur").attr("x","-100%").attr("y","-100%").attr("width","300%").attr("height","300%");n.append("feGaussianBlur").attr("stdDeviation",20).attr("in","SourceGraphic");f=c.layer().sticky();b.attr("class",c._svgid());b.attr("width",c.layer().node().width());b.attr("height",c.layer().node().height());if(!e.widget){t.attr("class","group-"+c._svgid());c.canvas(t)}else{c.canvas(b)}}c._setTransform();return c};this.api=function(){return e.apiname};this.scaleFactor=function(){return g};this._resize=function(e,t,n,r){if(!p){T()}b.attr("width",n);b.attr("height",r);c._setTransform();c._setWidthHeight(n,r);c.layer().geoTrigger(u,{scale:g},true);return c};this._exit=function(){d={};c.canvas().remove();b.remove();b=undefined;M.remove();M=undefined;v={};y={};l()};this._definitions=function(){return M};this._drawFeatures=function(e){d[e.id]={data:e.data,index:e.dataIndex,style:e.style,visible:e.visible,attributes:e.attributes,classes:e.classes,append:e.append,onlyRenderNew:e.onlyRenderNew,sortByZ:e.sortByZ,parentId:e.parentId};return c.__render(e.id,e.parentId)};this.__render=function(e,t){var n;if(e===undefined){for(n in d){if(d.hasOwnProperty(n)){c.__render(n)}}return c}if(t){c._renderFeature(e,t)}else{v[e]=true;c.layer().map().scheduleAnimationFrame(c._renderFrame)}return c};this._renderFrame=function(){var e;for(e in y){c.select(e).remove();M.selectAll("."+e).remove()}y={};var t=v;v={};for(e in t){if(t.hasOwnProperty(e)){c._renderFeature(e)}}};this._renderFeature=function(e,t){if(!d[e]){return c}var n=d[e].data,r=d[e].index,i=d[e].style,a=d[e].visible,o=d[e].attributes,s=d[e].classes,u=d[e].append,l=c.select(e,t).data(n,r),f,p;f=l.enter().append(u);l.exit().remove();p=d[e].onlyRenderNew?f:l;x(p,o);p.attr("class",s.concat([e]).join(" "));w(p,i);if(a){p.style("visibility",a()?"visible":"hidden")}if(f.size()&&d[e].sortByZ){l.sort(function(e,t){return(e.zIndex||0)-(t.zIndex||0)})}return c};this.select=function(e,t){return A(t).selectAll("."+e)};this._removeFeature=function(e){y[e]=true;c.layer().map().scheduleAnimationFrame(c._renderFrame);delete d[e];if(v[e]){delete v[e]}return c};this.draw=function(){};this.layer().geoOn(s.pan,c._setTransform);this.layer().geoOn(s.rotate,c._setTransform);this.layer().geoOn(s.zoom,function(){c._setTransform();c.__render();c.layer().geoTrigger(u,{scale:g},true)});this.layer().geoOn(s.resize,function(e){c._resize(e.x,e.y,e.width,e.height)});this._init(t);return this};o.apiname="svg";r(o,a);i("svg",o);i("d3",o);o.supported=function(){delete o.d3;try{o.d3=n(620)}catch(e){}return o.d3!==undefined};o.fallback=function(){return null};o.supported();e.exports=o},function(e,t,n){var r=n(9);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&typeof(n=e.toString)=="function"&&!r(i=n.call(e)))return i;if(typeof(n=e.valueOf)=="function"&&!r(i=n.call(e)))return i;if(!t&&typeof(n=e.toString)=="function"&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e){if(e==undefined)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(0);var i=n(28);var a=n(8);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e];var o={};o[e]=t(n);r(r.S+r.F*a(function(){n(1)}),"Object",o)}},function(e,t,n){var r=n(29);var i=n(69);var a=n(16);var o=n(13);var s=n(126);e.exports=function(e,t){var n=e==1;var u=e==2;var l=e==3;var c=e==4;var f=e==6;var d=e==5||f;var p=t||s;return function(t,s,h){var g=a(t);var m=i(g);var v=r(s,h,3);var y=o(m.length);var b=0;var M=n?p(t,y):u?p(t,0):undefined;var x,w;for(;y>b;b++)if(d||b in m){x=m[b];w=v(x,b,g);if(e){if(n)M[b]=w;else if(w)switch(e){case 3:return true;case 5:return x;case 6:return b;case 2:M.push(x)}else if(c)return false}}return f?-1:l||c?c:M}}},function(e,t,n){"use strict";var r=n(1);var i=n(20);var a=function e(){"use strict";if(!(this instanceof e)){return new e}var t=n(5);var r=this,a={},o=[],s=0;this.onIdle=function(e){if(s){o.push(e)}else{e()}return r};Object.defineProperty(this,"idle",{get:function e(){return!s},configurable:true});Object.defineProperty(this,"_promises",{get:function e(){return s},configurable:true});this.addPromise=function(e){function t(){s-=1;if(!s){o.splice(0,o.length).forEach(function(e){e()})}}s+=1;if(e.always){e.always(t)}else{e.then(t,t)}return r};this.geoOn=function(e,n){if(Array.isArray(e)){e.forEach(function(e){r.geoOn(e,n)});return r}if(!t.isFunction(n)){console.warn("Handler for "+e+" is not a function",n,r);return r}if(!a.hasOwnProperty(e)){a[e]=[]}a[e].push(n);return r};this.geoIsOn=function(e,t){if(Array.isArray(e)){return e.some(function(e){return r.geoIsOn(e,t)})}return(a[e]||[]).some(function(e){return e===t||t===undefined})};this.geoTrigger=function(e,t){if(Array.isArray(e)){e.forEach(function(e){r.geoTrigger(e,t)});return r}t=t||{};t.event=e;if(a.hasOwnProperty(e)){a[e].forEach(function(n){try{n.call(r,t)}catch(t){console.warn("Event handler for "+e+" threw an error",t)}})}return r};this.geoOff=function(e,t){if(e===undefined){a={};o=[];s=0}if(Array.isArray(e)){e.forEach(function(e){r.geoOff(e,t)});return r}if(!t){a[e]=[]}else if(Array.isArray(t)){t.forEach(function(t){r.geoOff(e,t)});return r}if(a.hasOwnProperty(e)){a[e]=a[e].filter(function(e){return e!==t})}return r};this._exit=function(){r.geoOff()};i.call(this);this.modified();return this};r(a,i);e.exports=a},function(e,t,n){"use strict";if(n(14)){var r=n(42);var i=n(6);var a=n(8);var o=n(0);var s=n(92);var u=n(134);var l=n(29);var c=n(52);var f=n(45);var d=n(21);var p=n(54);var h=n(31);var g=n(13);var m=n(180);var v=n(48);var y=n(34);var b=n(24);var M=n(61);var x=n(9);var w=n(16);var A=n(123);var T=n(49);var C=n(27);var S=n(50).f;var D=n(125);var I=n(46);var E=n(10);var N=n(37);var O=n(82);var _=n(72);var L=n(128);var P=n(63);var k=n(87);var R=n(51);var j=n(127);var B=n(169);var z=n(15);var F=n(26);var V=z.f;var U=F.f;var G=i.RangeError;var W=i.TypeError;var H=i.Uint8Array;var Y="ArrayBuffer";var Q="Shared"+Y;var q="BYTES_PER_ELEMENT";var X="prototype";var K=Array[X];var Z=u.ArrayBuffer;var J=u.DataView;var $=N(0);var ee=N(2);var te=N(3);var ne=N(4);var re=N(5);var ie=N(6);var ae=O(true);var oe=O(false);var se=L.values;var ue=L.keys;var le=L.entries;var ce=K.lastIndexOf;var fe=K.reduce;var de=K.reduceRight;var pe=K.join;var he=K.sort;var ge=K.slice;var me=K.toString;var ve=K.toLocaleString;var ye=E("iterator");var be=E("toStringTag");var Me=I("typed_constructor");var xe=I("def_constructor");var we=s.CONSTR;var Ae=s.TYPED;var Te=s.VIEW;var Ce="Wrong length!";var Se=N(1,function(e,t){return Oe(_(e,e[xe]),t)});var De=a(function(){return new H(new Uint16Array([1]).buffer)[0]===1});var Ie=!!H&&!!H[X].set&&a(function(){new H(1).set({})});var Ee=function(e,t){var n=h(e);if(n<0||n%t)throw G("Wrong offset!");return n};var Ne=function(e){if(x(e)&&Ae in e)return e;throw W(e+" is not a typed array!")};var Oe=function(e,t){if(!(x(e)&&Me in e)){throw W("It is not a typed array constructor!")}return new e(t)};var _e=function(e,t){return Le(_(e,e[xe]),t)};var Le=function(e,t){var n=0;var r=t.length;var i=Oe(e,r);while(r>n)i[n]=t[n++];return i};var Pe=function(e,t,n){V(e,t,{get:function(){return this._d[n]}})};var ke=function e(t){var n=w(t);var r=arguments.length;var i=r>1?arguments[1]:undefined;var a=i!==undefined;var o=D(n);var s,u,c,f,d,p;if(o!=undefined&&!A(o)){for(p=o.call(n),c=[],s=0;!(d=p.next()).done;s++){c.push(d.value)}n=c}if(a&&r>2)i=l(i,arguments[2],2);for(s=0,u=g(n.length),f=Oe(this,u);u>s;s++){f[s]=a?i(n[s],s):n[s]}return f};var Re=function e(){var t=0;var n=arguments.length;var r=Oe(this,n);while(n>t)r[t]=arguments[t++];return r};var je=!!H&&a(function(){ve.call(new H(1))});var Be=function e(){return ve.apply(je?ge.call(Ne(this)):Ne(this),arguments)};var ze={copyWithin:function e(t,n){return B.call(Ne(this),t,n,arguments.length>2?arguments[2]:undefined)},every:function e(t){return ne(Ne(this),t,arguments.length>1?arguments[1]:undefined)},fill:function e(t){return j.apply(Ne(this),arguments)},filter:function e(t){return _e(this,ee(Ne(this),t,arguments.length>1?arguments[1]:undefined))},find:function e(t){return re(Ne(this),t,arguments.length>1?arguments[1]:undefined)},findIndex:function e(t){return ie(Ne(this),t,arguments.length>1?arguments[1]:undefined)},forEach:function e(t){$(Ne(this),t,arguments.length>1?arguments[1]:undefined)},indexOf:function e(t){return oe(Ne(this),t,arguments.length>1?arguments[1]:undefined)},includes:function e(t){return ae(Ne(this),t,arguments.length>1?arguments[1]:undefined)},join:function e(t){return pe.apply(Ne(this),arguments)},lastIndexOf:function e(t){return ce.apply(Ne(this),arguments)},map:function e(t){return Se(Ne(this),t,arguments.length>1?arguments[1]:undefined)},reduce:function e(t){return fe.apply(Ne(this),arguments)},reduceRight:function e(t){return de.apply(Ne(this),arguments)},reverse:function e(){var t=this;var n=Ne(t).length;var r=Math.floor(n/2);var i=0;var a;while(i<r){a=t[i];t[i++]=t[--n];t[n]=a}return t},some:function e(t){return te(Ne(this),t,arguments.length>1?arguments[1]:undefined)},sort:function e(t){return he.call(Ne(this),t)},subarray:function e(t,n){var r=Ne(this);var i=r.length;var a=v(t,i);return new(_(r,r[xe]))(r.buffer,r.byteOffset+a*r.BYTES_PER_ELEMENT,g((n===undefined?i:v(n,i))-a))}};var Fe=function e(t,n){return _e(this,ge.call(Ne(this),t,n))};var Ve=function e(t){Ne(this);var n=Ee(arguments[1],1);var r=this.length;var i=w(t);var a=g(i.length);var o=0;if(a+n>r)throw G(Ce);while(o<a)this[n+o]=i[o++]};var Ue={entries:function e(){return le.call(Ne(this))},keys:function e(){return ue.call(Ne(this))},values:function e(){return se.call(Ne(this))}};var Ge=function(e,t){return x(e)&&e[Ae]&&typeof t!="symbol"&&t in e&&String(+t)==String(t)};var We=function e(t,n){return Ge(t,n=y(n,true))?f(2,t[n]):U(t,n)};var He=function e(t,n,r){if(Ge(t,n=y(n,true))&&x(r)&&b(r,"value")&&!b(r,"get")&&!b(r,"set")&&!r.configurable&&(!b(r,"writable")||r.writable)&&(!b(r,"enumerable")||r.enumerable)){t[n]=r.value;return t}return V(t,n,r)};if(!we){F.f=We;z.f=He}o(o.S+o.F*!we,"Object",{getOwnPropertyDescriptor:We,defineProperty:He});if(a(function(){me.call({})})){me=ve=function e(){return pe.call(this)}}var Ye=p({},ze);p(Ye,Ue);d(Ye,ye,Ue.values);p(Ye,{slice:Fe,set:Ve,constructor:function(){},toString:me,toLocaleString:Be});Pe(Ye,"buffer","b");Pe(Ye,"byteOffset","o");Pe(Ye,"byteLength","l");Pe(Ye,"length","e");V(Ye,be,{get:function(){return this[Ae]}});e.exports=function(e,t,n,u){u=!!u;var l=e+(u?"Clamped":"")+"Array";var f="get"+e;var p="set"+e;var h=i[l];var v=h||{};var y=h&&C(h);var b=!h||!s.ABV;var w={};var A=h&&h[X];var D=function(e,n){var r=e._d;return r.v[f](n*t+r.o,De)};var I=function(e,n,r){var i=e._d;if(u)r=(r=Math.round(r))<0?0:r>255?255:r&255;i.v[p](n*t+i.o,r,De)};var E=function(e,t){V(e,t,{get:function(){return D(this,t)},set:function(e){return I(this,t,e)},enumerable:true})};if(b){h=n(function(e,n,r,i){c(e,h,l,"_d");var a=0;var o=0;var s,u,f,p;if(!x(n)){f=m(n);u=f*t;s=new Z(u)}else if(n instanceof Z||(p=M(n))==Y||p==Q){s=n;o=Ee(r,t);var v=n.byteLength;if(i===undefined){if(v%t)throw G(Ce);u=v-o;if(u<0)throw G(Ce)}else{u=g(i)*t;if(u+o>v)throw G(Ce)}f=u/t}else if(Ae in n){return Le(h,n)}else{return ke.call(h,n)}d(e,"_d",{b:s,o:o,l:u,e:f,v:new J(s)});while(a<f)E(e,a++)});A=h[X]=T(Ye);d(A,"constructor",h)}else if(!a(function(){h(1)})||!a(function(){new h(-1)})||!k(function(e){new h;new h(null);new h(1.5);new h(e)},true)){h=n(function(e,n,r,i){c(e,h,l);var a;if(!x(n))return new v(m(n));if(n instanceof Z||(a=M(n))==Y||a==Q){return i!==undefined?new v(n,Ee(r,t),i):r!==undefined?new v(n,Ee(r,t)):new v(n)}if(Ae in n)return Le(h,n);return ke.call(h,n)});$(y!==Function.prototype?S(v).concat(S(y)):S(v),function(e){if(!(e in h))d(h,e,v[e])});h[X]=A;if(!r)A.constructor=h}var N=A[ye];var O=!!N&&(N.name=="values"||N.name==undefined);var _=Ue.values;d(h,Me,true);d(A,Ae,l);d(A,Te,true);d(A,xe,h);if(u?new h(1)[be]!=l:!(be in A)){V(A,be,{get:function(){return l}})}w[l]=h;o(o.G+o.W+o.F*(h!=v),w);o(o.S,l,{BYTES_PER_ELEMENT:t});o(o.S+o.F*a(function(){v.of.call(h,1)}),l,{from:ke,of:Re});if(!(q in A))d(A,q,t);o(o.P,l,ze);R(l);o(o.P+o.F*Ie,l,{set:Ve});o(o.P+o.F*!O,l,Ue);if(!r&&A.toString!=me)A.toString=me;o(o.P+o.F*a(function(){new h(1).slice()}),l,{slice:Fe});o(o.P+o.F*(a(function(){return[1,2].toLocaleString()!=new h([1,2]).toLocaleString()})||!a(function(){A.toLocaleString.call([1,2])})),l,{toLocaleString:Be});P[l]=O?N:_;if(!r&&!O)d(A,ye,_)}}else e.exports=function(){}},function(e,t,n){var r=n(175);var i=n(0);var a=n(68)("metadata");var o=a.store||(a.store=new(n(178)));var s=function(e,t,n){var i=o.get(e);if(!i){if(!n)return undefined;o.set(e,i=new r)}var a=i.get(t);if(!a){if(!n)return undefined;i.set(t,a=new r)}return a};var u=function(e,t,n){var r=s(t,n,false);return r===undefined?false:r.has(e)};var l=function(e,t,n){var r=s(t,n,false);return r===undefined?undefined:r.get(e)};var c=function(e,t,n,r){s(n,r,true).set(e,t)};var f=function(e,t){var n=s(e,t,false);var r=[];if(n)n.forEach(function(e,t){r.push(t)});return r};var d=function(e){return e===undefined||typeof e=="symbol"?e:String(e)};var p=function(e){i(i.S,"Reflect",e)};e.exports={store:o,map:s,has:u,get:l,set:c,keys:f,key:d,exp:p}},function(e,t,n){(function(t){e.exports=t["vgl"]=n(570)}).call(t,n(81))},function(e,t){e.exports=false},function(e,t,n){var r=n(46)("meta");var i=n(9);var a=n(24);var o=n(15).f;var s=0;var u=Object.isExtensible||function(){return true};var l=!n(8)(function(){return u(Object.preventExtensions({}))});var c=function(e){o(e,r,{value:{i:"O"+ ++s,w:{}}})};var f=function(e,t){if(!i(e))return typeof e=="symbol"?e:(typeof e=="string"?"S":"P")+e;if(!a(e,r)){if(!u(e))return"F";if(!t)return"E";c(e)}return e[r].i};var d=function(e,t){if(!a(e,r)){if(!u(e))return true;if(!t)return false;c(e)}return e[r].w};var p=function(e){if(l&&h.NEED&&u(e)&&!a(e,r))c(e);return e};var h=e.exports={KEY:r,NEED:false,fastKey:f,getWeak:d,onFreeze:p}},function(e,t,n){var r=n(10)("unscopables");var i=Array.prototype;if(i[r]==undefined)n(21)(i,r,{});e.exports=function(e){i[r][e]=true}},function(e,t){e.exports=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}},function(e,t){var n=0;var r=Math.random();e.exports=function(e){return"Symbol(".concat(e===undefined?"":e,")_",(++n+r).toString(36))}},function(e,t,n){var r=n(154);var i=n(111);e.exports=Object.keys||function e(t){return r(t,i)}},function(e,t,n){var r=n(31);var i=Math.max;var a=Math.min;e.exports=function(e,t){e=r(e);return e<0?i(e+t,0):a(e,t)}},function(e,t,n){var r=n(4);var i=n(155);var a=n(111);var o=n(110)("IE_PROTO");var s=function(){};var u="prototype";var l=function(){var e=n(108)("iframe");var t=a.length;var r="<";var i=">";var o;e.style.display="none";n(112).appendChild(e);e.src="javascript:";o=e.contentWindow.document;o.open();o.write(r+"script"+i+"document.F=Object"+r+"/script"+i);o.close();l=o.F;while(t--)delete l[u][a[t]];return l()};e.exports=Object.create||function e(t,n){var a;if(t!==null){s[u]=r(t);a=new s;s[u]=null;a[o]=t}else a=l();return n===undefined?a:i(a,n)}},function(e,t,n){var r=n(154);var i=n(111).concat("length","prototype");t.f=Object.getOwnPropertyNames||function e(t){return r(t,i)}},function(e,t,n){"use strict";var r=n(6);var i=n(15);var a=n(14);var o=n(10)("species");e.exports=function(e){var t=r[e];if(a&&t&&!t[o])i.f(t,o,{configurable:true,get:function(){return this}})}},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||r!==undefined&&r in e){throw TypeError(n+": incorrect invocation!")}return e}},function(e,t,n){var r=n(29);var i=n(167);var a=n(123);var o=n(4);var s=n(13);var u=n(125);var l={};var c={};var t=e.exports=function(e,t,n,f,d){var p=d?function(){return e}:u(e);var h=r(n,f,t?2:1);var g=0;var m,v,y,b;if(typeof p!="function")throw TypeError(e+" is not iterable!");if(a(p))for(m=s(e.length);m>g;g++){b=t?h(o(v=e[g])[0],v[1]):h(e[g]);if(b===l||b===c)return b}else for(y=p.call(e);!(v=y.next()).done;){b=i(y,h,v.value,t);if(b===l||b===c)return b}};t.BREAK=l;t.RETURN=c},function(e,t,n){var r=n(22);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},function(e,t,n){var r=n(9);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){"use strict";var r=n(1);var i=n(38);var a=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}i.call(this);t=t||{};var n=this,r=0,a=0,o=t.layer===undefined?null:t.layer,s=t.canvas===undefined?null:t.canvas,u=false;this.layer=function(){return o};this.canvas=function(e){if(e===undefined){return s}s=e;n.modified();return n};this.map=function(){if(o){return o.map()}else{return null}};this.initialized=function(e){if(e===undefined){return u}u=e;return n};this.api=function(){throw new Error("Should be implemented by derived classes")};this.width=function(){return r};this.height=function(){return a};this._setWidthHeight=function(e,t){r=e;a=t;return n};this._init=function(){return n};this._resize=function(e,t,r,i){n._setWidthHeight(r,i);return n};this._render=function(){return n};return this};r(a,i);e.exports=a},function(e,t,n){"use strict";var r=n(1);var i=n(19);var a=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}t=t||{};i.call(this,t);var r=n(3);var a=n(20);var o=n(246);var s=n(11);var u=n(5);var l=n(247);var c=this,f=this._init,d=null,p=a(),h=this.data,g=0,m=t.clustering,v=null,y=[],b=null,M=false;this.featureType="point";this.clustering=function(e){if(e===undefined){return m}if(m&&!e){v=null;m=false;h(y)}else if(e&&m!==e){m=e;c._clusterData()}return c};this._clusterData=function(){if(!m){return}var e=m===true?{radius:10}:m;var t=c.position();var n=c.layer().map(),i=n.gcsToDisplay(n.center(undefined,null),null),a=n.displayToGcs(i,c.gcs()),s=n.displayToGcs({x:i.x+e.radius,y:i.y},c.gcs()),l=Math.pow(Math.pow(s.y-a.y,2)+Math.pow(s.x-a.x,2),.5),f=n.zoom(),d=l*Math.pow(2,f);e=r.extend({},e,{radius:d});v=new o(e);y.forEach(function(e,n){var r=u.normalizeCoordinates(t(e,n));r.index=n;v.addPoint(r)});b=null;c._handleZoom(n.zoom())};this._handleZoom=function(e){var t=Math.floor(e);if(!m||t===b){return}b=t;var n=v.points(t).map(function(e){return y[e.index]});v.clusters(t).forEach(function(e){e.__cluster=true;e.__data=[];e.obj.each(function(t){e.__data.push(y[t.index])});n.push(e)});M=true;c.data(n)};this.position=function(e){if(e===undefined){return c.style("position")}else{var t=u.isFunction(e);c.style("position",function(n,r){if(n!==null&&n!==undefined&&n.__cluster){return n}else if(t){return e(n,r)}else{return e}});c.dataTime().modified();c.modified()}return c};this._updateRangeTree=function(){if(p.timestamp()>=c.dataTime().timestamp()&&p.timestamp()>=c.timestamp()){return}var e,t,n=c.style.get("radius"),r=c.style.get("stroke"),i=c.style.get("strokeWidth");t=c.position();g=0;e=c.data().map(function(e,a){var o=t(e,a);g=Math.max(g,n(e,a)+(r(e,a)?i(e,a):0));return[o.x,o.y]});d=new l(e);p.modified()};this.pointSearch=function(e,t){var n,r,i,a=[],o=[],s=[],u,l,f=c.gcs(),p,h=c.style.get("fill"),m=c.style.get("stroke"),v=c.style.get("strokeWidth"),y=c.style.get("radius");i=c.data();if(!i||!i.length){return{found:[],index:[]}}c._updateRangeTree();u=c.layer().map();l=u.gcsToDisplay(e,t);p=[u.displayToGcs({x:l.x-g,y:l.y-g},f),u.displayToGcs({x:l.x+g,y:l.y-g},f),u.displayToGcs({x:l.x-g,y:l.y+g},f),u.displayToGcs({x:l.x+g,y:l.y+g},f)];n={x:Math.min(p[0].x,p[1].x,p[2].x,p[3].x),y:Math.min(p[0].y,p[1].y,p[2].y,p[3].y)};r={x:Math.max(p[0].x,p[1].x,p[2].x,p[3].x),y:Math.max(p[0].y,p[1].y,p[2].y,p[3].y)};a=d.range(n.x,n.y,r.x,r.y);a.sort(function(e,t){return e-t});a.forEach(function(e){var t=i[e],n=m(i[e],e);if(!n&&!h(i[e],e)){return}var r=c.position()(t,e),a,d,p,g;p=y(i[e],e);p+=n?v(i[e],e):0;if(p){g=p*p;r=u.gcsToDisplay(r,f);a=r.x-l.x;d=r.y-l.y;if(a*a+d*d<=g){o.push(t);s.push(e)}}});return{found:o,index:s}};this.polygonSearch=function(e,t,n){var r=c.gcs(),i=[],a=[],o={},s=c.layer().map(),l=c.data(),f=c.style.get("fill"),p=c.style.get("stroke"),h=c.style.get("strokeWidth"),m=c.style.get("radius"),v,y,b,M;if(!e.outer){e={outer:e,inner:[]}}if(e.outer.length<3||!l||!l.length){return{found:[],index:[],extra:{}}}t=t||{};t.partial=t.partial||false;e={outer:s.gcsToDisplay(e.outer,n),inner:(e.inner||[]).map(function(e){return s.gcsToDisplay(e,n)})};e.outer.forEach(function(e){if(!y){y={x:e.x,y:e.y};b={x:e.x,y:e.y}}if(e.x<y.x){y.x=e.x}if(e.x>b.x){b.x=e.x}if(e.y<y.y){y.y=e.y}if(e.y>b.y){b.y=e.y}});c._updateRangeTree();M=[s.displayToGcs({x:y.x-g,y:y.y-g},r),s.displayToGcs({x:b.x+g,y:y.y-g},r),s.displayToGcs({x:b.x+g,y:b.y+g},r),s.displayToGcs({x:y.x-g,y:b.y+g},r)];y={x:Math.min(M[0].x,M[1].x,M[2].x,M[3].x),y:Math.min(M[0].y,M[1].y,M[2].y,M[3].y)};b={x:Math.max(M[0].x,M[1].x,M[2].x,M[3].x),y:Math.max(M[0].y,M[1].y,M[2].y,M[3].y)};v=d.range(y.x,y.y,b.x,b.y);v.sort(function(e,t){return e-t});v.forEach(function(n){var d=l[n],g=p(l[n],n);if(!g&&!f(l[n],n)){return}var v=c.position()(d,n);var y=m(l[n],n);y+=g?h(l[n],n):0;if(y){v=s.gcsToDisplay(v,r);var b=u.distanceToPolygon2d(v,e);if(b>=y||b>=0&&t.partial==="center"||b>=-y&&t.partial&&t.partial!=="center"){i.push(d);a.push(n);o[n]={partial:b<y,distance:b}}}});return{found:i,index:a,extra:o}};this.data=function(e){if(e===undefined){return h()}if(!M){y=e}if(m&&!M){c._clusterData()}else{h(e)}M=false;return c};this._init=function(e){e=e||{};f.call(c,e);var t=r.extend(true,{},{radius:5,stroke:true,strokeColor:{r:.851,g:.604,b:0},strokeWidth:1.25,strokeOpacity:1,fillColor:{r:1,g:.839,b:.439},fill:true,fillOpacity:.8,position:function e(t){return t},origin:function e(t){return t.length>=3?t.slice(0,3):[0,0,0]}},e.style===undefined?{}:e.style);if(e.position!==undefined){t.position=e.position}c.style(t);if(t.position){c.position(t.position)}c.dataTime().modified();c.geoOn(s.zoom,function(e){c._handleZoom(e.zoomLevel)});return c};return c};a.create=function(e,t){"use strict";t=t||{};t.type="point";return i.create(e,t)};a.capabilities={feature:"point",stroke:"point.stroke"};a.primitiveShapes={auto:"auto",sprite:"sprite",triangle:"triangle",square:"square"};r(a,i);e.exports=a},function(e,t,n){"use strict";var r=function e(t){"use strict";var r=n(38);var i=n(147);if(!(this instanceof r)){return new e(t)}var a="svg-"+i(),o=this._exit,s=this,u=this.draw;this._svgid=function(){return a};this.select=function(){return s.renderer().select(s._svgid())};this.draw=function(){if(s.ready){s._update();u()}return s};this._exit=function(){s.renderer()._removeFeature(s._svgid());o()};return this};e.exports=r},function(e,t,n){"use strict";var r=function e(t){"use strict";var r=n(38);if(!(this instanceof r)){return new e(t)}var i=this,a=this.draw;this.draw=function(){if(i.ready){i._update({mayDelay:true});i.renderer()._render();a()}return i};if(this.bin){var o=this.bin;this.bin=function(e,t){if(e===undefined&&!t&&o(undefined,true)===null){var n=i.layer&&i.layer(),r=n&&n.map&&n.map(),a=r&&r.listSceneObjects()||[],s=a.indexOf(i);if(s>=0){return s}}return o.apply(i,arguments)}}return this};e.exports=r},function(e,t,n){var r=n(15).f;var i=n(24);var a=n(10)("toStringTag");e.exports=function(e,t,n){if(e&&!i(e=n?e:e.prototype,a))r(e,a,{configurable:true,value:t})}},function(e,t,n){var r=n(30);var i=n(10)("toStringTag");var a=r(function(){return arguments}())=="Arguments";var o=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,s;return e===undefined?"Undefined":e===null?"Null":typeof(n=o(t=Object(e),i))=="string"?n:a?r(t):(s=r(t))=="Object"&&typeof t.callee=="function"?"Arguments":s}},function(e,t,n){var r=n(0);var i=n(35);var a=n(8);var o=n(114);var s="["+o+"]";var u="​";var l=RegExp("^"+s+s+"*");var c=RegExp(s+s+"*$");var f=function(e,t,n){var i={};var s=a(function(){return!!o[e]()||u[e]()!=u});var l=i[e]=s?t(d):o[e];if(n)i[n]=l;r(r.P+r.F*s,"String",i)};var d=f.trim=function(e,t){e=String(i(e));if(t&1)e=e.replace(l,"");if(t&2)e=e.replace(c,"");return e};e.exports=f},function(e,t){e.exports={}},function(e,t,n){"use strict";t["a"]=function(e,t,n){var r=e*t;return n/Math.sqrt(1-r*r)}},function(e,t,n){"use strict";t["a"]=function(e){if(Math.abs(e)>1){e=e>1?1:-1}return Math.asin(e)}},function(e,t,n){"use strict";var r=n(3);var i=n(1);var a=n(19);var o=function e(t){"use strict";var i=n(17);var o=n(5);if(!(this instanceof e)){return new e(t)}t=t||{};a.call(this,t);var s=this,u=this._init,l,c=0,f=[],d=[],p;this.featureType="quad";this._objectListStart=function(e){r.each(e,function(e,t){t.used=false})};this._objectListGet=function(e,t){for(var n=0;n<e.length;n+=1){if(e[n].entry===t){e[n].used=true;return e[n].value}}return undefined};this._objectListAdd=function(e,t,n){e.push({entry:t,value:n,used:true})};this._objectListEnd=function(e){for(var t=e.length-1;t>=0;t-=1){if(!e[t].used){e.splice(t,1)}}};this.pointSearch=function(e,t){var n=[],a=[],u={},l=[{},{},{},{}],c=[{},{},{},{}],f=[0,1,2,0],d=[1,2,3,1],h=s.data(),g=s.layer().map(),m,v;t=t===null?g.gcs():t===undefined?g.ingcs():t;e=i.transformCoordinates(t,g.gcs(),e);if(!p){s._generateQuads()}r.each([p.clrQuads,p.imgQuads,p.vidQuads],function(t,r){r.forEach(function(t,r){for(m=0;m<f.length;m+=1){l[m].x=t.pos[f[m]*3];l[m].y=t.pos[f[m]*3+1];l[m].z=t.pos[f[m]*3+2];c[m].x=t.pos[d[m]*3];c[m].y=t.pos[d[m]*3+1];c[m].z=t.pos[d[m]*3+2]}if(o.pointInPolygon(e,l)||o.pointInPolygon(e,c)){a.push(t.idx);n.push(h[t.idx]);v=o.pointToTriangleBasis2d(e,l[0],l[1],l[2]);if(!v||v.x+v.y>1){v=o.pointToTriangleBasis2d(e,c[2],c[1],c[0]);if(v){v.x=1-v.x}}else{v.y=1-v.y}if(v){u[t.idx]={basis:v}}}})});return{index:a,found:n,extra:u}};this.position=function(e){if(e===undefined){return s.style("position")}else{s.style("position",o.ensureFunction(e));s.dataTime().modified();s.modified()}return s};this._positionToQuad=function(e,t,n,a){var o=e.call(s,n,a);if((!o.ll||!o.ur)&&(!o.ul||!o.lr)){return}var u=s.gcs(),l=s.layer().map().gcs(),c={};r.each(["ll","lr","ul","ur"],function(e,r){if(o[r]!==undefined){c[r]={};if(o[r].x===undefined){c[r]=[o[r][0],o[r][1],o[r][2]]}else{c[r]=[o[r].x,o[r].y,o[r].z]}if(c[r][2]===undefined){c[r][2]=t.call(s,n,a)}if(u!==l&&u!==false){c[r]=i.transformCoordinates(u,l,c[r])}}});c.ll=c.ll||[c.ul[0],c.lr[1],(c.ul[2]+c.lr[2])/2];c.lr=c.lr||[c.ur[0],c.ll[1],(c.ur[2]+c.ll[2])/2];c.ur=c.ur||[c.lr[0],c.ul[1],(c.lr[2]+c.ul[2])/2];c.ul=c.ul||[c.ll[0],c.ur[1],(c.ll[2]+c.ur[2])/2];return c};this._checkQuadUpdate=function(e,t){};this._generateQuads=function(){var e=s.position(),t=s.style.get("image"),n=s.style.get("video"),i=s.style.get("delayRenderWhenSeeking"),a=s.style.get("color"),u=s.style.get("depth"),h=s.style.get("opacity"),g=s.style.get("drawOnAsyncResourceLoaded"),m=s.style.get("previewColor"),v=s.style.get("previewImage"),y=s.data(),b=[],M=[],x=[],w=[0,0,0],A,T;s._objectListStart(f);s._objectListStart(d);r.each(y,function(p,y){if(y._cachedQuad){T=y._cachedQuad.diag2;if(A===undefined||y._cachedQuad.diag2&&y._cachedQuad.diag2<A){w=y._cachedQuad.ll;A=y._cachedQuad.diag2}if(y._cachedQuad.clrquad){b.push(y._cachedQuad.clrquad)}if(y._cachedQuad.imgquad){if(y._cachedQuad.imageEntry){s._objectListGet(f,y._cachedQuad.imageEntry)}M.push(y._cachedQuad.imgquad)}if(y._cachedQuad.vidquad){if(y._cachedQuad.videoEntry){s._objectListGet(d,y._cachedQuad.videoEntry)}x.push(y._cachedQuad.vidquad)}return}var C,S,D,I,E,N,O,_,L,P,k,R,j,B={};_=s._positionToQuad(e,u,y,p);k=h.call(s,y,p);if(_===undefined||!k||k<0){return}T=Math.pow(_.ll[0]-_.ur[0],2)+Math.pow(_.ll[1]-_.ur[1],2)+Math.pow(_.ll[2]-_.ur[0],2)+Math.pow(_.lr[0]-_.ur[0],2)+Math.pow(_.lr[1]-_.ur[1],2)+Math.pow(_.lr[2]-_.ur[0],2);B.diag2=T;B.ll=_.ll;if(A===undefined||T&&T<A){w=_.ll;A=T}_=[_.ll[0],_.ll[1],_.ll[2],_.lr[0],_.lr[1],_.lr[2],_.ul[0],_.ul[1],_.ul[2],_.ur[0],_.ur[1],_.ur[2]];C={idx:p,pos:_,opacity:k,zOffset:y.zOffset};if(y.reference){C.reference=y.reference}if(y.crop){C.crop=y.crop}L=t.call(s,y,p);P=L?null:n.call(s,y,p);if(L){B.imageEntry=L;D=s._objectListGet(f,L);if(D===undefined){if(L instanceof Image||L instanceof HTMLCanvasElement){D=L}else{D=new Image;D.src=L}s._objectListAdd(f,L,D)}if(o.isReadyImage(D)||D instanceof HTMLCanvasElement){C.image=D}else{R=undefined;j=v.call(s,y,p);if(j&&o.isReadyImage(j)){C.image=j}else{R=m.call(s,y,p);C.color=o.convertColor(R);if(C.color&&C.color.r!==undefined&&C.color.g!==undefined&&C.color.b!==undefined){b.push(C);B.clrquad=C}else{R=undefined}}S=g.call(s,y,p);if(S){O=o.isReadyImage(D,true)?null:r.Deferred();E=D.onload;D.onload=function(){if(R!==undefined){if(r.inArray(C,b)>=0){b.splice(r.inArray(C,b),1)}delete B.clrquad}C.image=D;s.dataTime().modified();s.modified();s._update();s.layer().draw();if(O){O.resolve()}if(E){return E.apply(s,arguments)}};N=D.onerror;D.onerror=function(){if(O){O.reject()}if(N){return N.apply(s,arguments)}};if(O){s.layer().addPromise(O.promise())}}else if(R===undefined&&!C.image){return}}M.push(C);B.imgquad=C}else if(P){B.videoEntry=P;I=s._objectListGet(d,P);if(I===undefined){if(P instanceof HTMLVideoElement){I=P}else{I=document.createElement("video");I.src=P}s._objectListAdd(d,P,I);r(I).off(".geojsvideo").on("seeking.geojsvideo canplay.geojsvideo pause.geojsvideo playing.geojsvideo",function(e){s._checkQuadUpdate(C,e)})}C.delayRenderWhenSeeking=i.call(s,y,p);if(C.delayRenderWhenSeeking===undefined){C.delayRenderWhenSeeking=true}if(o.isReadyVideo(I)){C.video=I}else{R=m.call(s,y,p);C.color=o.convertColor(R);if(C.color&&C.color.r!==undefined&&C.color.g!==undefined&&C.color.b!==undefined){b.push(C);B.clrquad=C}else{R=undefined}S=g.call(s,y,p);if(S){O=o.isReadyVideo(I,true)?null:r.Deferred();E=I.onloadeddata;I.onloadeddata=function(){if(R!==undefined){if(r.inArray(C,b)>=0){b.splice(r.inArray(C,b),1)}delete B.clrquad}C.video=I;s.dataTime().modified();s.modified();s._update();s.layer().draw();if(O){O.resolve()}if(E){return E.apply(s,arguments)}};N=I.onerror;I.onerror=function(){if(O){O.reject()}if(N){return N.apply(s,arguments)}};if(O){s.layer().addPromise(O.promise())}}else if(R===undefined&&!C.video){return}}x.push(C);B.vidquad=C}else{C.color=o.convertColor(a.call(s,y,p));if(!C.color||C.color.r===undefined||C.color.g===undefined||C.color.b===undefined){return}b.push(C);B.clrquad=C}if(B.clrquad){c+=1;B.clrquad.quadId=c}if(B.imgquad){c+=1;B.imgquad.quadId=c}if(B.vidquad){c+=1;B.vidquad.quadId=c}if(l!==false){y._cachedQuad=B}});s._objectListEnd(f);s._objectListEnd(d);p={clrQuads:b,imgQuads:M,vidQuads:x,origin:new Float32Array(w)};return p};this.cacheUpdate=function(e){if(e===undefined||e===null){r.each(s.data(),function(e,t){if(t._cachedQuad){delete t._cachedQuad}})}else{if(isFinite(e)){e=s.data()[e]}if(e._cachedQuad){delete e._cachedQuad}}s.modified();return s};this.video=function(e){var t,n;if(isFinite(e)){e=s.data()[e]}if(e._cachedQuad){t=(e._cachedQuad.vidquad||{}).video}else{if(!p){s._generateQuads()}n=s.data().indexOf(e);if(n>=0){t=s._objectListGet(d,s.style.get("video")(e,n))}}if(t instanceof HTMLVideoElement){return t}return null};this._init=function(e){e=e||{};u.call(s,e);l=e.cacheQuads!==false;var t=r.extend({},{color:{r:1,g:1,b:1},opacity:1,depth:0,drawOnAsyncResourceLoaded:true,previewColor:null,previewImage:null,image:function e(t){return t.image},video:function e(t){return t.video},position:function e(t){return t}},e.style===undefined?{}:e.style);if(e.position!==undefined){t.position=o.ensureFunction(e.position)}s.style(t);s.dataTime().modified()};return s};o.create=function(e,t){"use strict";t=t||{};t.type="quad";return a.create(e,t)};o.capabilities={color:"quad.color",image:"quad.image",imageCrop:"quad.imageCrop",imageFixedScale:"quad.imageFixedScale",imageFull:"quad.imageFull",canvas:"quad.canvas",video:"quad.video"};i(o,a);e.exports=o},function(e,t,n){"use strict";var r=function e(t){"use strict";var r=n(38);if(!(this instanceof r)){return new e(t)}var i=this,a=this.draw,o={};this._renderOnCanvas=function(){};this._delayRender=function(){return false};this._canvasProperty=function(e,t,n){if(!e||!t){o={};return i}if(o[t]!==n){o[t]=n;e[t]=n}return i};this.draw=function(){if(i.ready){i._update();i.renderer()._render();a()}return i};return this};e.exports=r},function(e,t,n){var r=n(28);var i=n(6);var a="__core-js_shared__";var o=i[a]||(i[a]={});(e.exports=function(e,t){return o[e]||(o[e]=t!==undefined?t:{})})("versions",[]).push({version:r.version,mode:n(42)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var r=n(30);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return r(e)=="String"?e.split(""):Object(e)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){"use strict";var r=n(4);e.exports=function(){var e=r(this);var t="";if(e.global)t+="g";if(e.ignoreCase)t+="i";if(e.multiline)t+="m";if(e.unicode)t+="u";if(e.sticky)t+="y";return t}},function(e,t,n){var r=n(4);var i=n(18);var a=n(10)("species");e.exports=function(e,t){var n=r(e).constructor;var o;return n===undefined||(o=r(n)[a])==undefined?t:i(o)}},function(e,t,n){"use strict";t["a"]=function(e){return e<0?-1:1}},function(e,t,n){"use strict";var r=n(7);var i=n(73);t["a"]=function(e){return Math.abs(e)<r["d"]?e:e-Object(i["a"])(e)*Math.PI}},function(e,t,n){e.exports={create:n(538),clone:n(539),copy:n(540),identity:n(240),transpose:n(541),invert:n(542),adjoint:n(543),determinant:n(544),multiply:n(545),translate:n(546),scale:n(547),rotate:n(548),rotateX:n(549),rotateY:n(550),rotateZ:n(551),fromRotation:n(552),fromRotationTranslation:n(553),fromScaling:n(554),fromTranslation:n(555),fromXRotation:n(556),fromYRotation:n(557),fromZRotation:n(558),fromQuat:n(559),frustum:n(560),perspective:n(561),perspectiveFromFieldOfView:n(562),ortho:n(563),lookAt:n(564),str:n(565)}},function(e,t,n){"use strict";var r=n(1);var i=n(2).registerRenderer;var a=n(56);var o=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}t=t||{};a.call(this,t);var r=n(3);var i=n(41);var o=n(75);var s=n(5);var u=n(11);var l=this,c=null,f=null,d,p=false,h=this._init,g=this._exit;this.contextRenderer=function(){return c};this.api=function(){return e.apiname};this._init=function(){if(l.initialized()){return l}h.call(l);var e=t.canvas||r(document.createElement("canvas"));e.addClass("webgl-canvas");r(l.layer().node().get(0)).append(e);if(window.overrideContextAttributes){var n=e.get(0);var a=n.getContext;n.getContext=function(e,t){t=t||{};if(window.overrideContextAttributes){for(var r in window.overrideContextAttributes){if(window.overrideContextAttributes.hasOwnProperty(r)){t[r]=window.overrideContextAttributes[r]}}}return a.call(n,e,t)}}f=i.viewer(e.get(0),t.options);f.init();c=f.renderWindow().activeRenderer();c.setResetScene(false);if(f.renderWindow().renderers().length>0){c.setLayer(f.renderWindow().renderers().length)}l.canvas(e);var o=l.layer().map(),s=o.size();l._resize(0,0,s.width,s.height);return l};this._resize=function(e,t,n,r){var i=f.renderWindow();if(e!==i.windowPosition[0]||t!==i.windowPosition[1]||n!==l.width()||r!==l.height()){l._setWidthHeight(n,r);l.canvas().attr("width",n);l.canvas().attr("height",r);i.positionAndResize(e,t,n,r);p=true;l._render()}return l};this._render=function(){l.layer().map().scheduleAnimationFrame(l._renderFrame,true);return l};this._renderFrame=function(){if(f){if(p){p=false;l._updateRendererCamera()}f.render()}};this._glContext=function(){if(f&&f.renderWindow()){return f.renderWindow().context()}return i.GL};this._exit=function(){l.layer().map().scheduleAnimationFrame(l._renderFrame,"remove");l.canvas().remove();if(f){var e=new i.renderState;e.m_renderer=f;e.m_context=l._glContext();f.exit(e);if(l._glContext()!==i.GL&&l._glContext().getExtension("WEBGL_lose_context")&&l._glContext().getExtension("WEBGL_lose_context").loseContext){l._glContext().getExtension("WEBGL_lose_context").loseContext()}}i.clearCachedShaders(i.GL);f=null;g()};this._updateRendererCamera=function(){var e=f.renderWindow(),t=l.layer().map(),n=t.camera(),r=t.rotation()||0,i=n.view,a=n.projectionMatrix;if(a[15]){a=o.copy(s.mat4AsArray(),a);a=o.scale(a,a,[1,1,-.5]);a=o.translate(a,a,[0,0,n.clipbounds.far])}else{var u=n.clipbounds.near,c=n.clipbounds.far;a=o.copy(s.mat4AsArray(),a);a=o.scale(a,a,[1/u,1/u,-1/c])}var p=Math.PI/2,h=r%p,g=Math.min(Math.abs(h),Math.abs(h-p))<1e-5;e.renderers().forEach(function(e){var r=e.camera();if(s.compareArrays(i,r.viewMatrix())&&s.compareArrays(a,r.projectionMatrix())&&d===t.zoom()){return}d=t.zoom();r.setViewMatrix(i,true);r.setProjectionMatrix(a);var o=n.viewport;if(a[1]||a[2]||a[3]||a[4]||a[6]||a[7]||a[8]||a[9]||a[11]||a[15]!==1||!g||o.left&&o.left%1||o.top&&o.top%1||parseFloat(d.toFixed(6))!==parseFloat(d.toFixed(0))){r.viewAlignment=function(){return null}}else{r.viewAlignment=function(){var e={roundx:2/o.width,roundy:2/o.height};e.dx=o.width%2?e.roundx*.5:0;e.dy=o.height%2?e.roundy*.5:0;return e}}})};l.layer().geoOn(u.pan,function(e){void e;p=true});l.layer().geoOn(u.parallelprojection,function(e){var t=l.contextRenderer(),n,r=l.layer();if(e.geo&&e.geo._triggeredBy!==r){if(!t||!t.camera()){console.log("Parallel projection event triggered on unconnected VGL "+"renderer.");return}n=t.camera();n.setEnableParallelProjection(e.parallelProjection);p=true}});return this};o.apiname="webgl";r(o,a);i("webgl",o);i("vgl",o);var s;o.supported=function(){if(s===undefined){var e,t,n;try{e=document.createElement("canvas");t=e.getContext("webgl")||e.getContext("experimental-webgl");n=t.getSupportedExtensions();if(n.indexOf("WEBGL_debug_renderer_info")>=0){o._unmaskedRenderer=t.getParameter(t.getExtension("WEBGL_debug_renderer_info").UNMASKED_RENDERER_WEBGL)}o._maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE);o._maxPointSize=t.getParameter(t.ALIASED_POINT_SIZE_RANGE)[1];s=true}catch(e){console.warn("No webGL support");s=false}e=undefined;t=undefined;n=undefined}return s};o.fallback=function(){return null};e.exports=o},function(e,t,n){"use strict";var r=n(1);var i=n(19);var a=n(20);var o=n(17);var s=n(5);var u=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}var r=n(3);t=t||{};i.call(this,t);var u=this,l=this._init,c=a(),f;this.featureType="line";this._subfeatureStyles={lineCap:true,lineJoin:true,strokeColor:true,strokeOffset:true,strokeOpacity:true,strokeWidth:true};this.line=function(e){if(e===undefined){return u.style("line")}else{u.style("line",e);u.dataTime().modified();u.modified()}return u};this.position=function(e){if(e===undefined){return u.style("position")}else{u.style("position",e);u.dataTime().modified();u.modified()}return u};this._updatePointSearchInfo=function(){if(c.timestamp()>=u.dataTime().timestamp()&&c.timestamp()>=u.timestamp()){return f}c.modified();f=[];var e=u.data(),t=u.line(),n=u.style.get("strokeWidth"),r=u.position(),i=u.style.get("closed"),a=u.gcs(),s=u.layer().map().gcs();e.forEach(function(e,u){var l=i(e,u),c,d,p,h,g,m=[],v,y;t(e,u).forEach(function(t,i){var f=r(t,i,e,u);if(a!==s){f=o.transformCoordinates(a,s,f)}if(v===undefined){v={x:f.x,y:f.y}}if(y===undefined){y={x:f.x,y:f.y}}if(f.x<v.x){v.x=f.x}if(f.x>y.x){y.x=f.x}if(f.y<v.y){v.y=f.y}if(f.y>y.y){y.y=f.y}var b=Math.ceil(n(t,i,e,u)/2)+2;if(y.r===undefined||b>y.r){y.r=b}var M=b*b;if(c){m.push({u:f,v:c,r:p>b?p:b,r2:h>M?h:M,i:i,j:d})}c=f;d=i;p=b;h=M;if(!g&&l){g={p:f,r:b,r2:M,i:i}}});if(l&&g&&(c.x!==g.p.x||c.y!==g.p.y)){m.push({u:c,v:g.p,r:p>g.r?p:g.r,r2:h>g.r2?h:g.r2,i:d,j:g.i})}m.min=v;m.max=y;f.push(m)});return f};this.pointSearch=function(e,t){var n=u.data(),r=[],i=[],a={};if(!n||!n.length||!u.layer()){return{found:i,index:r,extra:a}}u._updatePointSearchInfo();var l=u.layer().map();t=t===null?l.gcs():t===undefined?l.ingcs():t;var c=l.unitsPerPixel(l.zoom()),d=c*c,p=o.transformCoordinates(t,l.gcs(),e),h=u.style.get("strokeWidth"),g=u.style.get("strokeOpacity"),m=u.line(),v,y,b,M;for(y=0;y<f.length;y+=1){M=f[y];v=null;for(b=0;b<M.length;b+=1){if(s.distance2dToLineSquared(p,M[b].u,M[b].v)<=M[b].r2*d){if(!v){v=m(n[y],y)}if((g(v[M[b].i],M[b].i,n[y],y)>0||g(v[M[b].j],M[b].j,n[y],y)>0)&&(h(v[M[b].i],M[b].i,n[y],y)>0||h(v[M[b].j],M[b].j,n[y],y)>0)){i.push(n[y]);r.push(y);a[y]=b;break}}}}return{found:i,index:r,extra:a}};this.polygonSearch=function(e,t,n){var r=u.data(),i=[],a=[],l={},c,d,p=u.layer().map(),h=u.style.get("strokeWidth"),g=u.style.get("strokeOpacity"),m=u.line();n=n===null?p.gcs():n===undefined?p.ingcs():n;if(!e.outer){e={outer:e,inner:[]}}if(!r||!r.length||e.outer.length<3){return{found:a,index:i,extra:l}}t=t||{};t.partial=t.partial||false;e={outer:o.transformCoordinates(n,p.gcs(),e.outer),inner:(e.inner||[]).map(function(e){return o.transformCoordinates(n,p.gcs(),e)})};e.outer.forEach(function(e){if(!c){c={x:e.x,y:e.y};d={x:e.x,y:e.y}}if(e.x<c.x){c.x=e.x}if(e.x>d.x){d.x=e.x}if(e.y<c.y){c.y=e.y}if(e.y>d.y){d.y=e.y}});u._updatePointSearchInfo();var v=p.unitsPerPixel(p.zoom()),y=void 0,b=void 0,M=void 0,x=void 0,w=void 0,A=void 0;for(y=0;y<f.length;y+=1){M=f[y];if(M.max.x<c.x-M.max.r*v||M.min.x>d.x+M.max.r*v||M.max.y<c.y-M.max.r*v||M.min.y>d.y+M.max.r*v){continue}var T=void 0,C=void 0,S=void 0;for(b=0;b<M.length;b+=1){x=M[b].u;w=M[b].v;A=M[b].r;if(x.x<c.x-A*v&&w.x<c.x-A*v||x.x>d.x+A*v&&w.x>d.x+A*v||x.y<c.y-A*v&&w.y<c.y-A*v||x.y>d.y+A*v&&w.y>d.y+A*v){continue}if(!S){S=m(r[y],y)}if(g(S[M[b].i],M[b].i,r[y],y)<=0&&g(S[M[b].j],M[b].j,r[y],y)<=0||h(S[M[b].i],M[b].i,r[y],y)<=0&&h(S[M[b].j],M[b].j,r[y],y)<=0){continue}var D=s.distanceToPolygon2d(x,e),I=s.distanceToPolygon2d(w,e);if(D>-A*v&&D<A*v||I>-A*v&&I<A&v||D*I<0){C=true;break}if(s.crossedLineSegmentPolygon2d(x,w,e)){C=true;break}var E=A*A*v*v;for(var N=0;N<e.outer.length&&!C;N+=1){C=s.distance2dToLineSquared(e.outer[N],x,w)<E}for(var O=0;O<e.inner.length&&!C;O+=1){for(var _=0;_<e.inner[O].length&&!C;_+=1){C=s.distance2dToLineSquared(e.inner[O][_],x,w)<E}}if(C){break}if(D>0){T=true}}if(!t.partial&&T&&!C||t.partial&&(T||C)){i.push(y);a.push(r[y]);l[y]={partial:C,segment:b<f[y].length?b:0}}}return{found:a,index:i,extra:l}};this.rdpSimplifyData=function(e,t,n,r){e=e||u.data();n=n||u.style.get("position");r=r||u.style.get("line");var i=u.layer().map(),a=i.gcs(),l=u.gcs(),c=u.style.get("closed");if(t===undefined){t=i.unitsPerPixel(i.zoom())*.5}e=e.map(function(e,i){var u=r(e,i),f=o.transformCoordinates(l,a,u.map(function(t,r){return n(t,r,e,i)})),d=s.rdpLineSimplify(f,t,c(e,i),[]);if(d.length<2||d.length===2&&s.distance2dSquared(d[0],d[1])<t*t){d=[]}d=o.transformCoordinates(a,l,d);for(var p in e){if(e.hasOwnProperty(p)&&!(Array.isArray(e)&&p>=0&&p<e.length)){d[p]=e[p]}}return d});u.style("position",function(e){return e});u.style("line",function(e){return e});u.data(e);return u};this._init=function(e){e=e||{};l.call(u,e);var t=r.extend({},{strokeWidth:1,strokeColor:{r:1,g:.8431372549,b:0},strokeStyle:"solid",strokeOpacity:1,antialiasing:2,closed:false,line:function e(t){return t},position:function e(t){return t},origin:function e(t){return t.length>=3?t.slice(0,3):[0,0,0]}},e.style===undefined?{}:e.style);if(e.line!==undefined){t.line=e.line}if(e.position!==undefined){t.position=e.position}u.style(t);u.dataTime().modified();return u};this._init(t);return this};u.create=function(e,t){"use strict";t=t||{};t.type="line";return i.create(e,t)};u.capabilities={feature:"line",basic:"line.basic",multicolor:"line.multicolor"};r(u,i);e.exports=u},function(e,t,n){"use strict";var r=n(1);var i=n(38);var a=function e(t){"use strict";if(!(this instanceof e)){return new e}i.call(this,t);var n=this,r=null,a=[],o=this._exit,s=this.geoTrigger,u=this.addPromise;this.addPromise=function(e){if(r){r.addPromise(e)}u(e);return n};this.parent=function(e){if(e===undefined){return r}r=e;return n};this.addChild=function(e){if(Array.isArray(e)){e.forEach(n.addChild);return n}e.parent(n);a.push(e);return n};this.removeChild=function(e){if(Array.isArray(e)){e.forEach(n.removeChild);return n}a=a.filter(function(t){return t!==e});return n};this.children=function(){return a.slice()};this.draw=function(e){n.children().forEach(function(t){t.draw(e)});return n};this.geoTrigger=function(e,t,i){var o;t=t||{};o=t.geo||{};t.geo=o;if(o.stopPropagation){return n}if(!i&&r&&o._triggeredBy!==r){o._triggeredBy=n;r.geoTrigger(e,t);return n}s.call(n,e,t);if(o.stopPropagation){return n}a.forEach(function(r){if(r.geoTrigger){o._triggeredBy=n;r.geoTrigger(e,t)}});return n};this._exit=function(){a=[];r=null;o()};return this};r(a,i);e.exports=a},function(e,t,n){"use strict";var r=n(1);var i=n(78);var a=n(19);var o=n(2).checkRenderer;var s=n(2).rendererForFeatures;var u=n(2).rendererForAnnotations;var l=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}t=t||{};i.call(this,t);var r=n(3);var a=n(20);var l=n(56);var c=n(2).createRenderer;var f=n(2).adjustLayerForRenderer;var d=n(11);var p=this,h=this._exit,g=t.id===undefined?e.newLayerId():t.id,m=t.name===undefined?"":t.name,v=t.map===undefined?null:t.map,y=null,b=t.canvas===undefined?null:t.canvas,M=t.renderer instanceof l?t.renderer:null,x=false,w=t.renderer!==undefined?t.renderer instanceof l?t.renderer.api():t.renderer:t.annotations?u(t.annotations):s(t.features),A=t.autoshareRenderer===undefined?true:t.autoshareRenderer,T=a(),C=a(),S=t.sticky===undefined?true:t.sticky,D=t.active===undefined?true:t.active,I=t.opacity===undefined?1:t.opacity,E=t.attribution||null,N=t.visible===undefined?true:t.visible,O=t.selectionAPI===undefined?true:t.selectionAPI,_;w=o(w);if(!v){throw new Error("Layers must be initialized on a map.")}function L(){return(p.parent()||p.map()).children().filter(function(t){return t instanceof e})}this.rendererName=function(){return w};this.autoshareRenderer=function(){return A};this.zIndex=function(e,t){if(e===undefined){return _}if(!t){L().reverse().forEach(function(t){if(t!==p&&t.zIndex()===e){t.zIndex(e+1)}})}if(e!==_){_=e;y.css("z-index",_);p.geoTrigger(d.layerRemove,{layer:p})}return p};this.moveUp=function(e){var t,n,r=null,i,a;if(e===undefined){e=1}a=1;if(e<0){a=-1;e=-e}t=L().sort(function(e,t){return a*(e.zIndex()-t.zIndex())});for(n=0;n<t.length;n+=1){if(r===null){if(t[n]===p){r=n}}else if(n-r<=e){i=p.zIndex();p.zIndex(t[n].zIndex(),true);t[n].zIndex(i,true)}else{break}}return p};this.moveDown=function(e){if(e===undefined){e=1}return p.moveUp(-e)};this.moveToTop=function(){return p.moveUp(L().length-1)};this.moveToBottom=function(){return p.moveDown(L().length-1)};this.sticky=function(){return S};this.active=function(e){if(e===undefined){return D}if(D!==e){D=e;y.toggleClass("active",D)}return p};this.node=function(){return y};this.id=function(t){if(t===undefined){return g}g=t===null?e.newLayerId():t;p.modified();return p};this.name=function(e){if(e===undefined){return m}m=e;y.attr("id",m);p.modified();return p};this.map=function(){return v};this.renderer=function(){return M};this._renderer=function(e){if(e===undefined){return M}M=e;return p};this.canvas=function(){return b};this._canvas=function(e){if(e===undefined){return b}b=e;return p};this.dataTime=function(){return T};this.updateTime=function(){return C};this.initialized=function(e){if(e!==undefined){x=e;return p}return x};this.toLocal=function(e){return e};this.fromLocal=function(e){return e};this.attribution=function(e){if(e!==undefined){E=e;p.map().updateAttribution();return p}return E};this.visible=function(e){if(e===undefined){return N}if(N!==e){N=e;y.toggleClass("hidden",!N);p.modified()}return p};this.selectionAPI=function(e){if(e===undefined){return O}if(O!==e){O=e}return p};this._init=function(e){if(x){return p}v.node().append(y);var n=r.extend({},t);delete n.map;if(M){p._canvas(M.canvas())}else if(w===null){p._renderer(null);p._canvas(y)}else if(b){p._renderer(c(w,p,b,n))}else{p._renderer(c(w,p,undefined,n));p._canvas(M.canvas())}y.toggleClass("active",p.active());x=true;if(!e){p.geoOn(d.resize,function(e){p._update({event:e})});p.geoOn(d.pan,function(e){p._update({event:e})});p.geoOn(d.rotate,function(e){p._update({event:e})});p.geoOn(d.zoom,function(e){p._update({event:e})})}return p};this._exit=function(){p.geoOff();if(M){M._exit()}y.off();y.remove();t={};p._canvas(null);p._renderer(null);h()};this._update=function(){return p};this.width=function(){return p.map().size().width};this.height=function(){return p.map().size().height};this.opacity=function(e){if(e!==undefined){I=e;y.css("opacity",I);return p}return I};y=r(document.createElement("div"));y.addClass("geojs-layer");y.attr("renderer",w);if(m){y.attr("id",m)}p.opacity(I);p.visible(N);if(t.zIndex===undefined){var P=-1;L().forEach(function(e){if(e.zIndex()!==undefined){P=Math.max(P,e.zIndex())}});t.zIndex=P+1}p.zIndex(t.zIndex);f("all",p);return p};l.newLayerId=function(){"use strict";var e=1;return function(){var t=e;e+=1;return t}}();l.create=function(e,t){"use strict";t=t||{};t.type=t.type||"feature";t.renderer=t.renderer===undefined?"webgl":t.renderer;t.renderer=o(t.renderer);if(!t.renderer){console.warn("Invalid renderer");return null}var n=e.createLayer(t.type,t);if(!n){console.warn("Unable to create a layer");return null}if(t.features){t.features.forEach(function(e){e.data=e.data||t.data;e.feature=a.create(n,e)})}return n};r(l,i);e.exports=l},function(e,t,n){"use strict";var r=n(1);var i=n(19);var a=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}t=t||{};i.call(this,t);var r=n(3);var a=this,o=this._init;this.featureType="text";this.position=function(e){if(e===undefined){return a.style("position")}else if(e!==a.style("position")){a.style("position",e);a.dataTime().modified();a.modified()}return a};this.text=function(e){if(e===undefined){return a.style("text")}else if(e!==a.style("text")){a.style("text",e);a.dataTime().modified();a.modified()}return a};this._init=function(e){e=e||{};o.call(a,e);var t=r.extend({},{font:"bold 16px sans-serif",textAlign:"center",textBaseline:"middle",color:{r:0,g:0,b:0},rotation:0,rotateWithMap:false,textScaled:false,position:function e(t){return t},text:function e(t){return t.text}},e.style===undefined?{}:e.style);if(e.position!==undefined){t.position=e.position}if(e.text!==undefined){t.text=e.text}a.style(t);if(t.position){a.position(t.position)}if(t.text){a.text(t.text)}a.dataTime().modified()};this._init(t);return a};a.usedStyles=["visible","font","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","lineHeight","fontFamily","textAlign","textBaseline","color","textOpacity","rotation","rotateWithMap","textScaled","offset","shadowColor","shadowOffset","shadowBlur","shadowRotate","textStrokeColor","textStrokeWidth"];a.create=function(e,t){"use strict";t=t||{};t.type="text";return i.create(e,t)};a.capabilities={feature:"text"};r(a,i);e.exports=a},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(1,eval)("this")}catch(e){if(typeof window==="object")n=window}e.exports=n},function(e,t,n){var r=n(25);var i=n(13);var a=n(48);e.exports=function(e){return function(t,n,o){var s=r(t);var u=i(s.length);var l=a(o,u);var c;if(e&&n!=n)while(u>l){c=s[l++];if(c!=c)return true}else for(;u>l;l++)if(e||l in s){if(s[l]===n)return e||l||0}return!e&&-1}}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(30);e.exports=Array.isArray||function e(t){return r(t)=="Array"}},function(e,t,n){var r=n(31);var i=n(35);e.exports=function(e){return function(t,n){var a=String(i(t));var o=r(n);var s=a.length;var u,l;if(o<0||o>=s)return e?"":undefined;u=a.charCodeAt(o);return u<55296||u>56319||o+1===s||(l=a.charCodeAt(o+1))<56320||l>57343?e?a.charAt(o):u:e?a.slice(o,o+2):(u-55296<<10)+(l-56320)+65536}}},function(e,t,n){var r=n(9);var i=n(30);var a=n(10)("match");e.exports=function(e){var t;return r(e)&&((t=e[a])!==undefined?!!t:i(e)=="RegExp")}},function(e,t,n){var r=n(10)("iterator");var i=false;try{var a=[7][r]();a["return"]=function(){i=true};Array.from(a,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return false;var n=false;try{var a=[7];var o=a[r]();o.next=function(){return{done:n=true}};a[r]=function(){return o};e(a)}catch(e){}return n}},function(e,t,n){"use strict";var r=n(61);var i=RegExp.prototype.exec;e.exports=function(e,t){var n=e.exec;if(typeof n==="function"){var a=n.call(e,t);if(typeof a!=="object"){throw new TypeError("RegExp exec method returned something other than an Object or null")}return a}if(r(e)!=="RegExp"){throw new TypeError("RegExp#exec called on incompatible receiver")}return i.call(e,t)}},function(e,t,n){"use strict";n(171);var r=n(22);var i=n(21);var a=n(8);var o=n(35);var s=n(10);var u=n(129);var l=s("species");var c=!a(function(){var e=/./;e.exec=function(){var e=[];e.groups={a:"7"};return e};return"".replace(e,"$<a>")!=="7"});var f=function(){var e=/(?:)/;var t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return n.length===2&&n[0]==="a"&&n[1]==="b"}();e.exports=function(e,t,n){var d=s(e);var p=!a(function(){var t={};t[d]=function(){return 7};return""[e](t)!=7});var h=p?!a(function(){var t=false;var n=/a/;n.exec=function(){t=true;return null};if(e==="split"){n.constructor={};n.constructor[l]=function(){return n}}n[d]("");return!t}):undefined;if(!p||!h||e==="replace"&&!c||e==="split"&&!f){var g=/./[d];var m=n(o,d,""[e],function e(t,n,r,i,a){if(n.exec===u){if(p&&!a){return{done:true,value:g.call(n,r,i)}}return{done:true,value:t.call(r,n,i)}}return{done:false}});var v=m[0];var y=m[1];r(String.prototype,e,v);i(RegExp.prototype,d,t==2?function(e,t){return y.call(e,this,t)}:function(e){return y.call(e,this)})}}},function(e,t,n){var r=n(6);var i=r.navigator;e.exports=i&&i.userAgent||""},function(e,t,n){"use strict";var r=n(6);var i=n(0);var a=n(22);var o=n(54);var s=n(43);var u=n(53);var l=n(52);var c=n(9);var f=n(8);var d=n(87);var p=n(60);var h=n(115);e.exports=function(e,t,n,g,m,v){var y=r[e];var b=y;var M=m?"set":"add";var x=b&&b.prototype;var w={};var A=function(e){var t=x[e];a(x,e,e=="delete"?function(e){return v&&!c(e)?false:t.call(this,e===0?0:e)}:e=="has"?function e(n){return v&&!c(n)?false:t.call(this,n===0?0:n)}:e=="get"?function e(n){return v&&!c(n)?undefined:t.call(this,n===0?0:n)}:e=="add"?function e(n){t.call(this,n===0?0:n);return this}:function e(n,r){t.call(this,n===0?0:n,r);return this})};if(typeof b!="function"||!(v||x.forEach&&!f(function(){(new b).entries().next()}))){b=g.getConstructor(t,e,m,M);o(b.prototype,n);s.NEED=true}else{var T=new b;var C=T[M](v?{}:-0,1)!=T;var S=f(function(){T.has(1)});var D=d(function(e){new b(e)});var I=!v&&f(function(){var e=new b;var t=5;while(t--)e[M](t,t);return!e.has(-0)});if(!D){b=t(function(t,n){l(t,b,e);var r=h(new y,t,b);if(n!=undefined)u(n,m,r[M],r);return r});b.prototype=x;x.constructor=b}if(S||I){A("delete");A("has");m&&A("get")}if(I||C)A(M);if(v&&x.clear)delete x.clear}p(b,e);w[e]=b;i(i.G+i.W+i.F*(b!=y),w);if(!v)g.setStrong(b,e,m);return b}},function(e,t,n){var r=n(6);var i=n(21);var a=n(46);var o=a("typed_array");var s=a("view");var u=!!(r.ArrayBuffer&&r.DataView);var l=u;var c=0;var f=9;var d;var p="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");while(c<f){if(d=r[p[c++]]){i(d.prototype,o,true);i(d.prototype,s,true)}else l=false}e.exports={ABV:u,CONSTR:l,TYPED:o,VIEW:s}},function(e,t,n){"use strict";e.exports=n(42)||!n(8)(function(){var e=Math.random();__defineSetter__.call(null,e,function(){});delete n(6)[e]})},function(e,t,n){"use strict";var r=n(0);e.exports=function(e){r(r.S,e,{of:function e(){var t=arguments.length;var n=new Array(t);while(t--)n[t]=arguments[t];return new this(n)}})}},function(e,t,n){"use strict";var r=n(0);var i=n(18);var a=n(29);var o=n(53);e.exports=function(e){r(r.S,e,{from:function e(t){var n=arguments[1];var r,s,u,l;i(this);r=n!==undefined;if(r)i(n);if(t==undefined)return new this;s=[];if(r){u=0;l=a(n,arguments[2],2);o(t,false,function(e){s.push(l(e,u++))})}else{o(t,false,s.push,s)}return new this(s)}})}},function(e,t,n){"use strict";t["a"]=i;var r=/[\s_\-\/\(\)]/g;function i(e,t){if(e[t]){return e[t]}var n=Object.keys(e);var i=t.toLowerCase().replace(r,"");var a=-1;var o,s;while(++a<n.length){o=n[a];s=o.toLowerCase().replace(r,"");if(s===i){return e[o]}}}},function(e,t,n){"use strict";var r=n(7);t["a"]=function(e,t,n){var i=e*n;var a=.5*e;i=Math.pow((1-i)/(1+i),a);return Math.tan(.5*(r["d"]-t))/i}},function(e,t,n){"use strict";var r=n(7);t["a"]=function(e,t){var n=.5*e;var i,a;var o=r["d"]-2*Math.atan(t);for(var s=0;s<=15;s++){i=e*Math.sin(o);a=r["d"]-2*Math.atan(t*Math.pow((1-i)/(1+i),n))-o;o+=a;if(Math.abs(a)<=1e-10){return o}}return-9999}},function(e,t,n){"use strict";t["a"]=function(e,t,n,r,i){return e*i-t*Math.sin(2*i)+n*Math.sin(4*i)-r*Math.sin(6*i)}},function(e,t,n){"use strict";t["a"]=function(e){return 1-.25*e*(1+e/16*(3+1.25*e))}},function(e,t,n){"use strict";t["a"]=function(e){return.375*e*(1+.25*e*(1+.46875*e))}},function(e,t,n){"use strict";t["a"]=function(e){return.05859375*e*e*(1+.75*e)}},function(e,t,n){"use strict";t["a"]=function(e){return e*e*e*(35/3072)}},function(e,t,n){e.exports={EPSILON:n(228),create:n(229),clone:n(505),angle:n(506),fromValues:n(230),copy:n(507),set:n(508),equals:n(509),exactEquals:n(510),add:n(511),subtract:n(233),sub:n(512),multiply:n(234),mul:n(513),divide:n(235),div:n(514),min:n(515),max:n(516),floor:n(517),ceil:n(518),round:n(519),scale:n(520),scaleAndAdd:n(521),distance:n(236),dist:n(522),squaredDistance:n(237),sqrDist:n(523),length:n(238),len:n(524),squaredLength:n(239),sqrLen:n(525),negate:n(526),inverse:n(527),normalize:n(231),dot:n(232),cross:n(528),lerp:n(529),random:n(530),transformMat4:n(531),transformMat3:n(532),transformQuat:n(533),rotateX:n(534),rotateY:n(535),rotateZ:n(536),forEach:n(537)}},function(e,t,n){"use strict";var r=n(1);var i=n(79);var a=n(11);var o=n(2);var s=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}i.call(this,t);var n=this,r=[],s=this._init,u=this._exit,l=this._update,c=this.visible,f=this.selectionAPI,d=this.draw;this.createFeature=function(e,t){var r=o.createFeature(e,n,n.renderer(),t);if(r){n.addFeature(r)}else{console.warn("Layer renderer ("+n.rendererName()+') does not support feature type "'+e+'"')}return r};this.addFeature=function(e){n.removeFeature(e);n.addChild(e);r.push(e);n.dataTime().modified();n.modified();return n};this.removeFeature=function(e){var t;t=r.indexOf(e);if(t>=0){r.splice(t,1);n.removeChild(e);n.dataTime().modified();n.modified()}return n};this.deleteFeature=function(e){if(e){if(r.indexOf(e)>=0){e._exit()}n.removeFeature(e)}return n};this.features=function(e){if(e===undefined){return r.slice()}else{var t=r.slice();var i;for(i=0;i<t.length;i+=1){if(e.indexOf(t[i])<0&&r.indexOf(t[i])>=0){n.deleteFeature(t[i])}}for(i=0;i<e.length;i+=1){n.addFeature(e[i])}return n}};this.gcsFeatures=function(e){if(e===undefined){var t,r;this.features().forEach(function(e){if(t===undefined){t=e.gcs()}else if(e.gcs()!==t){r=true}});return r?undefined:t}n.features().forEach(function(t){if(t.gcs()!==e){t.gcs(e)}});return n};this._init=function(){if(n.initialized()){return n}s.call(n,true);n.geoOn(a.resize,function(e){if(n.renderer()){n.renderer()._resize(e.x,e.y,e.width,e.height);n._update({event:e});n.renderer()._render()}else{n._update({event:e})}});n.geoOn(a.pan,function(e){n._update({event:e});if(n.renderer()){n.renderer()._render()}});n.geoOn(a.rotate,function(e){n._update({event:e});if(n.renderer()){n.renderer()._render()}});n.geoOn(a.zoom,function(e){n._update({event:e});if(n.renderer()){n.renderer()._render()}});return n};this._update=function(e){var t;if(!r.length){return n}l.call(n,e);if(n.dataTime().timestamp()>n.updateTime().timestamp()){for(t=0;t<r.length;t+=1){r[t].renderer(n.renderer())}}for(t=0;t<r.length;t+=1){r[t]._update()}n.updateTime().modified();return n};this._exit=function(){n.clear();u()};this.draw=function(){if(n.visible()){d();if(n.renderer()){n.renderer()._render()}}return n};this.visible=function(e){if(e===undefined){return c()}if(n.visible()!==e){c(e);var t=r.slice(),i;for(i=0;i<t.length;i+=1){t[i].visible(t[i].visible(undefined,true),true)}if(e){n.draw()}}return n};this.selectionAPI=function(e){if(e===undefined){return f()}if(n.selectionAPI()!==e){f(e);var t=r.slice(),i;for(i=0;i<t.length;i+=1){t[i].selectionAPI(t[i].selectionAPI(undefined,true),true)}}return n};this.clear=function(){while(r.length){n.deleteFeature(r[0])}return n};return n};r(s,i);o.registerLayer("feature",s);e.exports=s},function(e,t,n){"use strict";var r=n(1);var i=n(105);function a(e,t){return(e%t+t)%t}function o(e,t,n,r){return r[a(e+t+n,r.length)]}function s(e){var t=new RegExp(/\$?\{[xX]\}/g),n=new RegExp(/\$?\{[yY]\}/g),r=new RegExp(/\$?\{[zZ]\}/g),i=new RegExp(/\$?\{(s|S|[sS]:[^{}]+|[^-{}]-[^-{}]|([^,{}]+,)+[^,{}]+)\}/);var a=e.replace(new RegExp(i,"g"),"{s}").replace(t,"{x}").replace(n,"{y}").replace(r,"{z}");var s;var u=e.match(i);if(u){if(u[2]){s=u[1].split(",")}else if(u[1][1]===":"){s=u[1].substr(2).split("")}else if(u[1][1]==="-"){s=[];var l=u[1].charCodeAt(0),c=u[1].charCodeAt(2);for(var f=Math.min(l,c);f<=Math.max(l,c);f+=1){s.push(String.fromCharCode(f))}}}return function(e,t,n,r){return a.replace(/\{s\}/g,o(e,t,n,s||r)).replace(/\{x\}/g,e).replace(/\{y\}/g,t).replace(/\{z\}/g,n)}}var u=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}i.call(this,t);var r=n(3);var o=n(11);var u=n(17);var l=n(261);var c=n(254);var f=n(2).adjustLayerForRenderer;var d=n(149);t=r.extend(true,{},this.constructor.defaults,t||{});if(!t.cacheSize){t.cacheSize=t.keepLower?600:200}if(r.type(t.subdomains)==="string"){t.subdomains=t.subdomains.split("")}if(t.baseUrl){var p=t.baseUrl;if(p&&p.charAt(p.length-1)!=="/"){p+="/"}t.url=p+"{z}/{x}/{y}."+(t.imageFormat||"png")}t.originalUrl=t.url;if(r.type(t.url)==="string"){t.url=s(t.url)}var h=this._init,g=this._exit,m=this.visible,v=t.queueSize||6,y=t.initialQueueSize||0,b=[],M=[],x,w=this;this._options=r.extend(true,{},t);this.attribution(t.attribution);this._activeTiles={};this._tileTree={};this._cache=l({size:t.cacheSize});this._queue=c({size:v,initialSize:y,track:t.cacheSize,needed:function e(t){return t===w.cache.get(t.toString(),true)}});var A={};Object.defineProperty(this,"options",{get:function e(){return r.extend({},w._options)}});Object.defineProperty(this,"cache",{get:function e(){return w._cache}});Object.defineProperty(this,"activeTiles",{get:function e(){return r.extend({},w._activeTiles)}});Object.defineProperty(this,"queueSize",{get:function e(){return v},set:function e(t){v=t;w._queue.size=t}});Object.defineProperty(this,"initialQueueSize",{get:function e(){return y},set:function e(t){y=t||0;w._queue.initialSize=t||v}});this.tilesAtZoom=function(e){if(w._options.tilesAtZoom){return w._options.tilesAtZoom.call(w,e)}var t=Math.pow(2,e);return{x:t,y:t}};this.tilesMaxBounds=function(e){if(w._options.tilesMaxBounds){return w._options.tilesMaxBounds.call(w,e)}return null};this.tileCropFromBounds=function(e){if(!w._options.tilesMaxBounds){return}var t=e.index.level,n=w._tileBounds(e);if(M[t]===undefined){M[t]=w.tilesMaxBounds(t)||null}if(M[t]&&(n.right>M[t].x||n.bottom>M[t].y)){return{x:Math.max(0,Math.min(M[t].x,n.right)-n.left),y:Math.max(0,Math.min(M[t].y,n.bottom)-n.top)}}};this.isValid=function(e){if(!(w._options.minLevel<=e.level&&e.level<=w._options.maxLevel)){return false}if(!(w._options.wrapX||0<=e.x&&e.x<=w.tilesAtZoom(e.level).x-1)){return false}if(!(w._options.wrapY||0<=e.y&&e.y<=w.tilesAtZoom(e.level).y-1)){return false}return true};this._origin=function(e){var t=w.toLevel(w.toLocal(w.map().origin()),e),n=w._options,r,i;r={x:Math.floor(t.x/n.tileWidth),y:Math.floor(t.y/n.tileHeight)};i={x:t.x-n.tileWidth*r.x,y:t.y-n.tileHeight*r.y};return{index:r,offset:i}};this._tileBounds=function(e){var t=w._origin(e.index.level);return e.bounds(t.index,t.offset)};this.tileAtPoint=function(e,t){var n=w._origin(t);var r=w.map();e=w.displayToLevel(r.gcsToDisplay(e,null),t);if(isNaN(e.x)){e.x=0}if(isNaN(e.y)){e.y=0}var i=w._tileOffset(t);if(i){e.x+=i.x;e.y+=i.y}var a={x:Math.floor(n.index.x+(n.offset.x+e.x)/w._options.tileWidth),y:Math.floor(n.index.y+(n.offset.y+e.y)/w._options.tileHeight)};return a};this.gcsTileBounds=function(e,t){var n=e.index?e:d({index:e,size:{x:w._options.tileWidth,y:w._options.tileHeight},url:""});var r=w._tileOffset(n.index.level),i=n.bounds({x:0,y:0},r),a=w.map(),o=a.unitsPerPixel(n.index.level);var s=[{x:i.left*o,y:w._topDown()*i.top*o},{x:i.right*o,y:w._topDown()*i.bottom*o}];t=t===null?a.gcs():t===undefined?a.ingcs():t;if(t!==a.gcs()){s=u.transformCoordinates(a.gcs(),t,s)}return{left:s[0].x,top:s[0].y,right:s[1].x,bottom:s[1].y}};this._getTile=function(e,t){var n=t||e;return d({index:e,size:{x:w._options.tileWidth,y:w._options.tileHeight},queue:w._queue,url:w._options.url.call(w,n.x,n.y,n.level||0,w._options.subdomains)})};this._getTileCached=function(e,t,n){var r=w.cache.get(w._tileHash(e));if(r===null){r=w._getTile(e,t);w.cache.add(r,w.remove,n)}return r};this._tileHash=function(e){return[e.level||0,e.y,e.x].join("_")};this._getTileRange=function(e,t){var n=[w.tileAtPoint({x:t.left,y:t.top},e),w.tileAtPoint({x:t.right,y:t.top},e),w.tileAtPoint({x:t.left,y:t.bottom},e),w.tileAtPoint({x:t.right,y:t.bottom},e)];return{start:{x:Math.min(n[0].x,n[1].x,n[2].x,n[3].x),y:Math.min(n[0].y,n[1].y,n[2].y,n[3].y)},end:{x:Math.max(n[0].x,n[1].x,n[2].x,n[3].x),y:Math.max(n[0].y,n[1].y,n[2].y,n[3].y)}}};this._getTiles=function(e,t,n,i){var o,s,u=[],l,c,f,d,p,h,g,m=false,v,y,M=w._options.keepLower?w._options.minLevel:e;if(e<M){e=M}for(y=M;y<=e;y+=1){p=w._getTileRange(y,t);f=p.start;d=p.end;c=w.tilesAtZoom(y);if(!w._options.wrapX){f.x=Math.min(Math.max(f.x,0),c.x-1);d.x=Math.min(Math.max(d.x,0),c.x-1);if(y===M&&w._options.keepLower){f.x=0;d.x=c.x-1}}if(!w._options.wrapY){f.y=Math.min(Math.max(f.y,0),c.y-1);d.y=Math.min(Math.max(d.y,0),c.y-1);if(y===M&&w._options.keepLower){f.y=0;d.y=c.y-1}}if(w._options.gcs&&w._options.gcs!==w.map().gcs()&&y!==M&&(d.x+1-f.x)*(d.y+1-f.y)>w.map().size().width*w.map().size().height/w._options.tileWidth/w._options.tileHeight*16){break}for(o=f.x;o<=d.x;o+=1){for(s=f.y;s<=d.y;s+=1){l={level:y,x:o,y:s};h={level:y,x:o,y:s};if(w._options.wrapX){h.x=a(h.x,c.x)}if(w._options.wrapY){h.y=a(h.y,c.y)}if(w.isValid(h)){if(i&&u.length<b.length){v=b[u.length];m=m||l.level!==v.level||l.x!==v.x||l.y!==v.y}u.push({index:l,source:h})}}}}if(i){if(!m&&u.length===b.length){return}b.splice(0,b.length);r.each(u,function(e,t){b.push(t.index)})}if(n){g={x:(f.x+d.x)/2,y:(f.y+d.y)/2,level:e,bottomLevel:e};var x=Math.max(d.x-f.x,d.y-f.y)+1;for(;x>=1;x/=2){g.bottomLevel-=1}u.sort(w._loadMetric(g));if(w._queue){w._queue.batch(true)}}if(w.cache.size<u.length){console.log("Increasing cache size to "+u.length);w.cache.size=u.length}for(o=0;o<u.length;o+=1){u[o]=w._getTileCached(u[o].index,u[o].source,true)}w.cache.purge(w.remove);return u};this.gcs=function(e){if(e===undefined){return w._options.gcs||w.map().gcs()}var t=w.gcs();if(e===null){delete w._options.gcs}else{w._options.gcs=e}if(w.gcs()!==t){w.clear();w.gcsFeatures(w.gcs());w.modified();w._update()}return w};this.prefetch=function(e,t){var n;n=w._getTiles(e,t,true);return r.when.apply(r,n.map(function(e){return e.fetch()}))};this._loadMetric=function(e){return function(t,n){var r,i,a,o,s,u,l;t=t.index||t;n=n.index||n;if(t.level!==n.level){if(e.bottomLevel&&t.level>=e.bottomLevel!==n.level>=e.bottomLevel){return t.level>=e.bottomLevel?-1:1}return t.level-n.level}l=Math.pow(2,t.level-e.level);s=(e.x+.5)*l-.5;u=(e.y+.5)*l-.5;a=t.x-s;o=t.y-u;r=a*a+o*o;a=n.x-s;o=n.y-u;i=a*a+o*o;return r-i}};this.fromLevel=function(e,t){var n=Math.pow(2,-t);return{x:e.x*n,y:e.y*n}};this.toLevel=function(e,t){var n=Math.pow(2,t);return{x:e.x*n,y:e.y*n}};this.drawTile=function(e){var t=e.toString();if(w._activeTiles.hasOwnProperty(t)){w._moveToTop(e)}else{w._drawTile(e)}w._activeTiles[t]=e};this._drawTile=function(e){if(w.renderer()!==null){throw new Error("This draw method is not valid on renderer managed layers.")}var t=e.index.level,n=r(w._getSubLayer(t)),i=w._tileBounds(e),a=w._options.animationDuration,o=r('<div class="geo-tile-container"/>').attr("tile-reference",e.toString()),s;o.append(e.image);o.css({left:i.left-parseInt(n.attr("offsetx")||0,10)+"px",top:i.top-parseInt(n.attr("offsety")||0,10)+"px"});s=w.tileCropFromBounds(e);if(s){o.addClass("crop").css({width:s.x+"px",height:s.y+"px"})}if(a>0){e.fadeIn(a)}n.append(o);e.catch(function(){console.warn("Could not load tile at "+e.toString());w._remove(e)})};this.remove=function(e){var t=e.toString();var n=w._activeTiles[t];if(n instanceof d){w._remove(n)}delete w._activeTiles[t];return n};this._remove=function(e){if(e.image){if(e.image.parentElement){r(e.image.parentElement).remove()}else{console.log("No parent element to remove "+e.toString(),e)}r(e.image).remove()}};this._moveToTop=function(e){r.noop(e)};this._getViewBounds=function(){var e=w.map(),t=e.zoom(),n=w._options.tileRounding(t),r=Math.pow(2,t-n),i=e.size();var a=w.displayToLevel({x:0,y:0}),o=w.displayToLevel({x:i.width,y:0}),s=w.displayToLevel({x:0,y:i.height}),u=w.displayToLevel({x:i.width,y:i.height});return{level:n,scale:r,left:Math.min(a.x,o.x,s.x,u.x),right:Math.max(a.x,o.x,s.x,u.x),top:Math.min(a.y,o.y,s.y,u.y),bottom:Math.max(a.y,o.y,s.y,u.y)}};this._purge=function(e,t,n){var r,i;if(w._updating){return w}if(!n){n=w._getViewBounds()}for(i in w._activeTiles){r=w._activeTiles[i];if(w._canPurge(r,n,e,t)){w.remove(r)}}return w};this.clear=function(){var e=[],t;for(t in w._activeTiles){e.push(w.remove(t))}w._tileTree={};b=[];return e};this.reset=function(){w.clear();w._cache.clear();w._queue.initialSize=y;return w};this.toLocal=function(e,t){var n=w.map(),r=n.unitsPerPixel(t===undefined?n.zoom():t);return{x:e.x/r,y:w._topDown()*e.y/r}};this.fromLocal=function(e,t){var n=w.map(),r=n.unitsPerPixel(t===undefined?n.zoom():t);return{x:e.x*r,y:w._topDown()*e.y*r}};this._topDown=function(){return w._options.topDown?1:-1};this._getSubLayer=function(e){if(!w.canvas()){return}var t=w.canvas().find("div[data-tile-layer="+e.toFixed()+"]").get(0);if(!t){t=r('<div class=geo-tile-layer data-tile-layer="'+e.toFixed()+'"/>').get(0);w.canvas().append(t)}return t};this._updateSubLayers=function(e,t){var n=w.canvas(),i=parseInt(n.attr("lastlevel"),10),a=parseInt(n.attr("lastoffsetx")||0,10),o=parseInt(n.attr("lastoffsety")||0,10);if(i===e&&Math.abs(a-t.left)<65536&&Math.abs(o-t.top)<65536){return{x:a,y:o}}var s=w.map(),u=w._tileOffset(e),l=parseInt((t.left+t.right-s.size().width)/2+u.x,10),c=parseInt((t.top+t.bottom-s.size().height)/2+u.y,10);n.find(".geo-tile-layer").each(function(t,n){var i=r(n),a=parseInt(i.data("tileLayer"),10);i.css("transform","scale("+Math.pow(2,e-a)+")");var o=parseInt(l/Math.pow(2,e-a),10),s=parseInt(c/Math.pow(2,e-a),10),u=o-parseInt(i.attr("offsetx")||0,10),f=s-parseInt(i.attr("offsety")||0,10);i.attr({offsetx:o,offsety:s});i.find(".geo-tile-container").each(function(e,t){r(t).css({left:parseInt(r(t).css("left"),10)-u+"px",top:parseInt(r(t).css("top"),10)-f+"px"})})});n.attr({lastoffsetx:l,lastoffsety:c,lastlevel:e});return{x:l,y:c}};this._update=function(e){if(e&&e.event&&(e.event.event===o.zoom||e.event.event===o.rotate)){return w}if(!w.visible()){return w}var t=w.map(),n=t.bounds(undefined,null),i=t.zoom(),a=w._options.tileRounding(i),s;if(w._updateSubLayers){var u=w._getViewBounds();var l=w._updateSubLayers(a,u)||{x:0,y:0};var c=w._tileOffset(a);if(w.renderer()===null){var f=Math.pow(2,i-a),d=t.rotation(),p=-c.x+-(u.left+u.right)/2+l.x,h=-c.y+-(u.bottom+u.top)/2+l.y,g=p+t.size().width/2,m=h+t.size().height/2;w.canvas().css({"transform-origin":""+-p+"px "+-h+"px"});var v="translate("+g+"px"+","+m+"px"+")"+"scale("+f+")";if(d){v+="rotate("+d*180/Math.PI+"deg)"}w.canvas().css("transform",v)}w.canvas().attr({scale:Math.pow(2,i-a),dx:-c.x+-(u.left+u.right)/2,dy:-c.y+-(u.bottom+u.top)/2,offsetx:l.x,offsety:l.y,rotation:t.rotation()})}s=w._getTiles(a,n,true,true);if(s===undefined){return w}w._tileTree={};s.forEach(function(e){if(e.fetched()){w.drawTile(e);w._setTileTree(e)}else{if(!e._queued){e.then(function(){if(x){return}if(e!==w.cache.get(e.toString())){return}var n=t.zoom(),r=w._options.tileRounding(n),i=w._getViewBounds();if(w._canPurge(e,i,r)){w.remove(e);return}w.drawTile(e);w._setTileTree(e)});w.addPromise(e);e._queued=true}else{var n=w._queue?w._queue.get(e):-1;if(n>=0){w._queue.add(e)}}}});r.when.apply(r,s).done(function(){var e=w.map(),t=e.zoom(),n=w._options.tileRounding(t);w._purge(n,true)});return w};this._setTileTree=function(e){if(w._options.keepLower){return}var t=e.index;w._tileTree[t.level]=w._tileTree[t.level]||{};w._tileTree[t.level][t.x]=w._tileTree[t.level][t.x]||{};w._tileTree[t.level][t.x][t.y]=e};this._getTileTree=function(e){return((w._tileTree[e.level]||{})[e.x]||{})[e.y]||null};this._isCovered=function(e){var t=e.index.level,n=e.index.x,r=e.index.y,i=[];i=w._getTileTree({level:t-1,x:Math.floor(n/2),y:Math.floor(r/2)});if(i){return[i]}i=[w._getTileTree({level:t+1,x:2*n,y:2*r}),w._getTileTree({level:t+1,x:2*n+1,y:2*r}),w._getTileTree({level:t+1,x:2*n,y:2*r+1}),w._getTileTree({level:t+1,x:2*n+1,y:2*r+1})];if(i.every(function(e){return e!==null})){return i}return null};this._outOfBounds=function(e,t){var n=w._tileOffset(e.index.level);var r=1;if(e.index.level!==t.level){r=Math.pow(2,(t.level||0)-(e.index.level||0))}return(e.bottom-n.y)*r<t.top||(e.left-n.x)*r>t.right||(e.top-n.y)*r>t.bottom||(e.right-n.x)*r<t.left};this._canPurge=function(e,t,n,r){if(w._options.keepLower){n=n||0;if(n<e.index.level&&e.index.level!==w._options.minLevel){return true}if(e.index.level===w._options.minLevel&&!w._options.wrapX&&!w._options.wrapY){return false}}else{if((r||w._isCovered(e))&&n!==e.index.level){return true}}if(t){return w._outOfBounds(e,t)}return false};this.displayToLevel=function(e,t){var n=w.map(),r=n.zoom(),i=w._options.tileRounding(r),a=n.unitsPerPixel(t===undefined?i:t),o;if(e===undefined){var s=n.size();e={x:s.width/2,y:s.height/2}}try{o=n.displayToGcs(e,w._options.gcs||null)}catch(e){o={x:0,y:0}}var u={x:o.x/a,y:w._topDown()*o.y/a};return u};this.url=function(e){if(e===undefined){return w._options.originalUrl}if(e===w._options.originalUrl){return w}w._options.originalUrl=e;if(r.type(e)==="string"){e=s(e)}w._options.url=e;w.reset();w.map().draw();return w};this.subdomains=function(e){if(e===undefined){return w._options.subdomains}if(e){if(r.type(e)==="string"){if(e.indexOf(",")>=0){e=e.split(",")}else{e=e.split("")}}w._options.subdomains=e;w.reset();w.map().draw()}return w};this._tileOffset=function(e){if(A[e]===undefined){A[e]=w._options.tileOffset(e)}return A[e]};this.visible=function(e){if(e===undefined){return m()}if(w.visible()!==e){m(e);if(e){w._update()}}return w};this._init=function(){var e;h.apply(w,arguments);if(w.renderer()===null){for(e=0;e<=w._options.maxLevel;e+=1){w._getSubLayer(e)}}return w};this._exit=function(){w.reset();g.apply(w,arguments);x=true;return w};f("tile",this);return this};u.defaults={minLevel:0,maxLevel:18,tileOverlap:{x:0,y:0},tileWidth:256,tileHeight:256,wrapX:true,wrapY:false,url:null,subdomains:"abc",tileOffset:function e(t){return{x:0,y:0}},tilesMaxBounds:null,topDown:false,keepLower:true,tileRounding:Math.round,attribution:"",animationDuration:0};r(u,i);e.exports=u},function(e,t,n){"use strict";var r=n(151);var i=n(1);var a=n(2).registerWidget;var o=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}r.call(this,t);var i=n(33);var a=this,o=this._exit,s=null;this._init=function(){var e;if(t.hasOwnProperty("parent")){t.parent.addChild(a);e=t.parent.canvas()}a._createCanvas(e);a.canvas().addEventListener("mousedown",function(e){e.stopPropagation()});a.reposition();return a};this._exit=function(){if(s){s._exit()}o()};this._createCanvas=function(e){var t={layer:a.layer(),widget:true};if(e){t.d3Parent=e}s=i(t);s._resize=function(){};a.canvas(s.canvas()[0][0])};return this};i(o,r);a("dom","svg",o);e.exports=o},function(e,t,n){var r=n(9);var i=n(6).document;var a=r(i)&&r(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},function(e,t,n){var r=n(6);var i=n(28);var a=n(42);var o=n(153);var s=n(15).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=a?{}:r.Symbol||{});if(e.charAt(0)!="_"&&!(e in t))s(t,e,{value:o.f(e)})}},function(e,t,n){var r=n(68)("keys");var i=n(46);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(6).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(9);var i=n(4);var a=function(e,t){i(e);if(!r(t)&&t!==null)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=n(29)(Function.call,n(26).f(Object.prototype,"__proto__").set,2);r(e,[]);t=!(e instanceof Array)}catch(e){t=true}return function e(n,i){a(n,i);if(t)n.__proto__=i;else r(n,i);return n}}({},false):undefined),check:a}},function(e,t){e.exports="\t\n\v\f\r   ᠎    "+"         　\u2028\u2029\ufeff"},function(e,t,n){var r=n(9);var i=n(113).set;e.exports=function(e,t,n){var a=t.constructor;var o;if(a!==n&&typeof a=="function"&&(o=a.prototype)!==n.prototype&&r(o)&&i){i(e,o)}return e}},function(e,t,n){"use strict";var r=n(31);var i=n(35);e.exports=function e(t){var n=String(i(this));var a="";var o=r(t);if(o<0||o==Infinity)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(n+=n))if(o&1)a+=n;return a}},function(e,t){e.exports=Math.sign||function e(t){return(t=+t)==0||t!=t?t:t<0?-1:1}},function(e,t){var n=Math.expm1;e.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||n(-2e-17)!=-2e-17?function e(t){return(t=+t)==0?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:n},function(e,t,n){"use strict";var r=n(42);var i=n(0);var a=n(22);var o=n(21);var s=n(63);var u=n(120);var l=n(60);var c=n(27);var f=n(10)("iterator");var d=!([].keys&&"next"in[].keys());var p="@@iterator";var h="keys";var g="values";var m=function(){return this};e.exports=function(e,t,n,v,y,b,M){u(n,t,v);var x=function(e){if(!d&&e in C)return C[e];switch(e){case h:return function t(){return new n(this,e)};case g:return function t(){return new n(this,e)}}return function t(){return new n(this,e)}};var w=t+" Iterator";var A=y==g;var T=false;var C=e.prototype;var S=C[f]||C[p]||y&&C[y];var D=S||x(y);var I=y?!A?D:x("entries"):undefined;var E=t=="Array"?C.entries||S:S;var N,O,_;if(E){_=c(E.call(new e));if(_!==Object.prototype&&_.next){l(_,w,true);if(!r&&typeof _[f]!="function")o(_,f,m)}}if(A&&S&&S.name!==g){T=true;D=function e(){return S.call(this)}}if((!r||M)&&(d||T||!C[f])){o(C,f,D)}s[t]=D;s[w]=m;if(y){N={values:A?D:x(g),keys:b?D:x(h),entries:I};if(M)for(O in N){if(!(O in C))a(C,O,N[O])}else i(i.P+i.F*(d||T),t,N)}return N}},function(e,t,n){"use strict";var r=n(49);var i=n(45);var a=n(60);var o={};n(21)(o,n(10)("iterator"),function(){return this});e.exports=function(e,t,n){e.prototype=r(o,{next:i(1,n)});a(e,t+" Iterator")}},function(e,t,n){var r=n(86);var i=n(35);e.exports=function(e,t,n){if(r(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(e))}},function(e,t,n){var r=n(10)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{t[r]=false;return!"/./"[e](t)}catch(e){}}return true}},function(e,t,n){var r=n(63);var i=n(10)("iterator");var a=Array.prototype;e.exports=function(e){return e!==undefined&&(r.Array===e||a[i]===e)}},function(e,t,n){"use strict";var r=n(15);var i=n(45);e.exports=function(e,t,n){if(t in e)r.f(e,t,i(0,n));else e[t]=n}},function(e,t,n){var r=n(61);var i=n(10)("iterator");var a=n(63);e.exports=n(28).getIteratorMethod=function(e){if(e!=undefined)return e[i]||e["@@iterator"]||a[r(e)]}},function(e,t,n){var r=n(362);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){"use strict";var r=n(16);var i=n(48);var a=n(13);e.exports=function e(t){var n=r(this);var o=a(n.length);var s=arguments.length;var u=i(s>1?arguments[1]:undefined,o);var l=s>2?arguments[2]:undefined;var c=l===undefined?o:i(l,o);while(c>u)n[u++]=t;return n}},function(e,t,n){"use strict";var r=n(44);var i=n(170);var a=n(63);var o=n(25);e.exports=n(119)(Array,"Array",function(e,t){this._t=o(e);this._i=0;this._k=t},function(){var e=this._t;var t=this._k;var n=this._i++;if(!e||n>=e.length){this._t=undefined;return i(1)}if(t=="keys")return i(0,n);if(t=="values")return i(0,e[n]);return i(0,[n,e[n]])},"values");a.Arguments=a.Array;r("keys");r("values");r("entries")},function(e,t,n){"use strict";var r=n(71);var i=RegExp.prototype.exec;var a=String.prototype.replace;var o=i;var s="lastIndex";var u=function(){var e=/a/,t=/b*/g;i.call(e,"a");i.call(t,"a");return e[s]!==0||t[s]!==0}();var l=/()??/.exec("")[1]!==undefined;var c=u||l;if(c){o=function e(t){var n=this;var o,c,f,d;if(l){c=new RegExp("^"+n.source+"$(?!\\s)",r.call(n))}if(u)o=n[s];f=i.call(n,t);if(u&&f){n[s]=n.global?f.index+f[0].length:o}if(l&&f&&f.length>1){a.call(f[0],c,function(){for(d=1;d<arguments.length-2;d++){if(arguments[d]===undefined)f[d]=undefined}})}return f}}e.exports=o},function(e,t,n){"use strict";var r=n(85)(true);e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},function(e,t,n){var r=n(29);var i=n(160);var a=n(112);var o=n(108);var s=n(6);var u=s.process;var l=s.setImmediate;var c=s.clearImmediate;var f=s.MessageChannel;var d=s.Dispatch;var p=0;var h={};var g="onreadystatechange";var m,v,y;var b=function(){var e=+this;if(h.hasOwnProperty(e)){var t=h[e];delete h[e];t()}};var M=function(e){b.call(e.data)};if(!l||!c){l=function e(t){var n=[];var r=1;while(arguments.length>r)n.push(arguments[r++]);h[++p]=function(){i(typeof t=="function"?t:Function(t),n)};m(p);return p};c=function e(t){delete h[t]};if(n(30)(u)=="process"){m=function(e){u.nextTick(r(b,e,1))}}else if(d&&d.now){m=function(e){d.now(r(b,e,1))}}else if(f){v=new f;y=v.port2;v.port1.onmessage=M;m=r(y.postMessage,y,1)}else if(s.addEventListener&&typeof postMessage=="function"&&!s.importScripts){m=function(e){s.postMessage(e+"","*")};s.addEventListener("message",M,false)}else if(g in o("script")){m=function(e){a.appendChild(o("script"))[g]=function(){a.removeChild(this);b.call(e)}}}else{m=function(e){setTimeout(r(b,e,1),0)}}}e.exports={set:l,clear:c}},function(e,t,n){var r=n(6);var i=n(131).set;var a=r.MutationObserver||r.WebKitMutationObserver;var o=r.process;var s=r.Promise;var u=n(30)(o)=="process";e.exports=function(){var e,t,n;var l=function(){var r,i;if(u&&(r=o.domain))r.exit();while(e){i=e.fn;e=e.next;try{i()}catch(r){if(e)n();else t=undefined;throw r}}t=undefined;if(r)r.enter()};if(u){n=function(){o.nextTick(l)}}else if(a&&!(r.navigator&&r.navigator.standalone)){var c=true;var f=document.createTextNode("");new a(l).observe(f,{characterData:true});n=function(){f.data=c=!c}}else if(s&&s.resolve){var d=s.resolve(undefined);n=function(){d.then(l)}}else{n=function(){i.call(r,l)}}return function(r){var i={fn:r,next:undefined};if(t)t.next=i;if(!e){e=i;n()}t=i}}},function(e,t,n){"use strict";var r=n(18);function i(e){var t,n;this.promise=new e(function(e,r){if(t!==undefined||n!==undefined)throw TypeError("Bad Promise constructor");t=e;n=r});this.resolve=r(t);this.reject=r(n)}e.exports.f=function(e){return new i(e)}},function(e,t,n){"use strict";var r=n(6);var i=n(14);var a=n(42);var o=n(92);var s=n(21);var u=n(54);var l=n(8);var c=n(52);var f=n(31);var d=n(13);var p=n(180);var h=n(50).f;var g=n(15).f;var m=n(127);var v=n(60);var y="ArrayBuffer";var b="DataView";var M="prototype";var x="Wrong length!";var w="Wrong index!";var A=r[y];var T=r[b];var C=r.Math;var S=r.RangeError;var D=r.Infinity;var I=A;var E=C.abs;var N=C.pow;var O=C.floor;var _=C.log;var L=C.LN2;var P="buffer";var k="byteLength";var R="byteOffset";var j=i?"_b":P;var B=i?"_l":k;var z=i?"_o":R;function F(e,t,n){var r=new Array(n);var i=n*8-t-1;var a=(1<<i)-1;var o=a>>1;var s=t===23?N(2,-24)-N(2,-77):0;var u=0;var l=e<0||e===0&&1/e<0?1:0;var c,f,d;e=E(e);if(e!=e||e===D){f=e!=e?1:0;c=a}else{c=O(_(e)/L);if(e*(d=N(2,-c))<1){c--;d*=2}if(c+o>=1){e+=s/d}else{e+=s*N(2,1-o)}if(e*d>=2){c++;d/=2}if(c+o>=a){f=0;c=a}else if(c+o>=1){f=(e*d-1)*N(2,t);c=c+o}else{f=e*N(2,o-1)*N(2,t);c=0}}for(;t>=8;r[u++]=f&255,f/=256,t-=8);c=c<<t|f;i+=t;for(;i>0;r[u++]=c&255,c/=256,i-=8);r[--u]|=l*128;return r}function V(e,t,n){var r=n*8-t-1;var i=(1<<r)-1;var a=i>>1;var o=r-7;var s=n-1;var u=e[s--];var l=u&127;var c;u>>=7;for(;o>0;l=l*256+e[s],s--,o-=8);c=l&(1<<-o)-1;l>>=-o;o+=t;for(;o>0;c=c*256+e[s],s--,o-=8);if(l===0){l=1-a}else if(l===i){return c?NaN:u?-D:D}else{c=c+N(2,t);l=l-a}return(u?-1:1)*c*N(2,l-t)}function U(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function G(e){return[e&255]}function W(e){return[e&255,e>>8&255]}function H(e){return[e&255,e>>8&255,e>>16&255,e>>24&255]}function Y(e){return F(e,52,8)}function Q(e){return F(e,23,4)}function q(e,t,n){g(e[M],t,{get:function(){return this[n]}})}function X(e,t,n,r){var i=+n;var a=p(i);if(a+t>e[B])throw S(w);var o=e[j]._b;var s=a+e[z];var u=o.slice(s,s+t);return r?u:u.reverse()}function K(e,t,n,r,i,a){var o=+n;var s=p(o);if(s+t>e[B])throw S(w);var u=e[j]._b;var l=s+e[z];var c=r(+i);for(var f=0;f<t;f++)u[l+f]=c[a?f:t-f-1]}if(!o.ABV){A=function e(t){c(this,A,y);var n=p(t);this._b=m.call(new Array(n),0);this[B]=n};T=function e(t,n,r){c(this,T,b);c(t,A,b);var i=t[B];var a=f(n);if(a<0||a>i)throw S("Wrong offset!");r=r===undefined?i-a:d(r);if(a+r>i)throw S(x);this[j]=t;this[z]=a;this[B]=r};if(i){q(A,k,"_l");q(T,P,"_b");q(T,k,"_l");q(T,R,"_o")}u(T[M],{getInt8:function e(t){return X(this,1,t)[0]<<24>>24},getUint8:function e(t){return X(this,1,t)[0]},getInt16:function e(t){var n=X(this,2,t,arguments[1]);return(n[1]<<8|n[0])<<16>>16},getUint16:function e(t){var n=X(this,2,t,arguments[1]);return n[1]<<8|n[0]},getInt32:function e(t){return U(X(this,4,t,arguments[1]))},getUint32:function e(t){return U(X(this,4,t,arguments[1]))>>>0},getFloat32:function e(t){return V(X(this,4,t,arguments[1]),23,4)},getFloat64:function e(t){return V(X(this,8,t,arguments[1]),52,8)},setInt8:function e(t,n){K(this,1,t,G,n)},setUint8:function e(t,n){K(this,1,t,G,n)},setInt16:function e(t,n){K(this,2,t,W,n,arguments[2])},setUint16:function e(t,n){K(this,2,t,W,n,arguments[2])},setInt32:function e(t,n){K(this,4,t,H,n,arguments[2])},setUint32:function e(t,n){K(this,4,t,H,n,arguments[2])},setFloat32:function e(t,n){K(this,4,t,Q,n,arguments[2])},setFloat64:function e(t,n){K(this,8,t,Y,n,arguments[2])}})}else{if(!l(function(){A(1)})||!l(function(){new A(-1)})||l(function(){new A;new A(1.5);new A(NaN);return A.name!=y})){A=function e(t){c(this,A);return new I(p(t))};var Z=A[M]=I[M];for(var J=h(I),$=0,ee;J.length>$;){if(!((ee=J[$++])in A))s(A,ee,I[ee])}if(!a)Z.constructor=A}var te=new T(new A(2));var ne=T[M].setInt8;te.setInt8(0,2147483648);te.setInt8(1,2147483649);if(te.getInt8(0)||!te.getInt8(1))u(T[M],{setInt8:function e(t,n){ne.call(this,t,n<<24>>24)},setUint8:function e(t,n){ne.call(this,t,n<<24>>24)}},true)}v(A,y);v(T,b);s(T[M],o.VIEW,true);t[y]=A;t[b]=T},function(e,t){e.exports=function(e){var t=[];t.toString=function t(){return this.map(function(t){var r=n(t,e);if(t[2]){return"@media "+t[2]+"{"+r+"}"}else{return r}}).join("")};t.i=function(e,n){if(typeof e==="string")e=[[null,e,""]];var r={};for(var i=0;i<this.length;i++){var a=this[i][0];if(typeof a==="number")r[a]=true}for(i=0;i<e.length;i++){var o=e[i];if(typeof o[0]!=="number"||!r[o[0]]){if(n&&!o[2]){o[2]=n}else if(n){o[2]="("+o[2]+") and ("+n+")"}t.push(o)}}};return t};function n(e,t){var n=e[1]||"";var i=e[3];if(!i){return n}if(t&&typeof btoa==="function"){var a=r(i);var o=i.sources.map(function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"});return[n].concat(o).concat([a]).join("\n")}return[n].join("\n")}function r(e){var t=btoa(unescape(encodeURIComponent(JSON.stringify(e))));var n="sourceMappingURL=data:application/json;charset=utf-8;base64,"+t;return"/*# "+n+" */"}},function(e,t,n){var r={};var i=function(e){var t;return function(){if(typeof t==="undefined")t=e.apply(this,arguments);return t}};var a=i(function(){return window&&document&&document.all&&!window.atob});var o=function(e,t){if(t){return t.querySelector(e)}return document.querySelector(e)};var s=function(e){var t={};return function(e,n){if(typeof e==="function"){return e()}if(typeof t[e]==="undefined"){var r=o.call(this,e,n);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement){try{r=r.contentDocument.head}catch(e){r=null}}t[e]=r}return t[e]}}();var u=null;var l=0;var c=[];var f=n(475);e.exports=function(e,t){if(typeof DEBUG!=="undefined"&&DEBUG){if(typeof document!=="object")throw new Error("The style-loader cannot be used in a non-browser environment")}t=t||{};t.attrs=typeof t.attrs==="object"?t.attrs:{};if(!t.singleton&&typeof t.singleton!=="boolean")t.singleton=a();if(!t.insertInto)t.insertInto="head";if(!t.insertAt)t.insertAt="bottom";var n=p(e,t);d(n,t);return function e(i){var a=[];for(var o=0;o<n.length;o++){var s=n[o];var u=r[s.id];u.refs--;a.push(u)}if(i){var l=p(i,t);d(l,t)}for(var o=0;o<a.length;o++){var u=a[o];if(u.refs===0){for(var c=0;c<u.parts.length;c++)u.parts[c]();delete r[u.id]}}}};function d(e,t){for(var n=0;n<e.length;n++){var i=e[n];var a=r[i.id];if(a){a.refs++;for(var o=0;o<a.parts.length;o++){a.parts[o](i.parts[o])}for(;o<i.parts.length;o++){a.parts.push(M(i.parts[o],t))}}else{var s=[];for(var o=0;o<i.parts.length;o++){s.push(M(i.parts[o],t))}r[i.id]={id:i.id,refs:1,parts:s}}}}function p(e,t){var n=[];var r={};for(var i=0;i<e.length;i++){var a=e[i];var o=t.base?a[0]+t.base:a[0];var s=a[1];var u=a[2];var l=a[3];var c={css:s,media:u,sourceMap:l};if(!r[o])n.push(r[o]={id:o,parts:[c]});else r[o].parts.push(c)}return n}function h(e,t){var n=s(e.insertInto);if(!n){throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.")}var r=c[c.length-1];if(e.insertAt==="top"){if(!r){n.insertBefore(t,n.firstChild)}else if(r.nextSibling){n.insertBefore(t,r.nextSibling)}else{n.appendChild(t)}c.push(t)}else if(e.insertAt==="bottom"){n.appendChild(t)}else if(typeof e.insertAt==="object"&&e.insertAt.before){var i=s(e.insertAt.before,n);n.insertBefore(t,i)}else{throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n")}}function g(e){if(e.parentNode===null)return false;e.parentNode.removeChild(e);var t=c.indexOf(e);if(t>=0){c.splice(t,1)}}function m(e){var t=document.createElement("style");if(e.attrs.type===undefined){e.attrs.type="text/css"}if(e.attrs.nonce===undefined){var n=b();if(n){e.attrs.nonce=n}}y(t,e.attrs);h(e,t);return t}function v(e){var t=document.createElement("link");if(e.attrs.type===undefined){e.attrs.type="text/css"}e.attrs.rel="stylesheet";y(t,e.attrs);h(e,t);return t}function y(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function b(){if(false){return null}return n.nc}function M(e,t){var n,r,i,a;if(t.transform&&e.css){a=typeof t.transform==="function"?t.transform(e.css):t.transform.default(e.css);if(a){e.css=a}else{return function(){}}}if(t.singleton){var o=l++;n=u||(u=m(t));r=w.bind(null,n,o,false);i=w.bind(null,n,o,true)}else if(e.sourceMap&&typeof URL==="function"&&typeof URL.createObjectURL==="function"&&typeof URL.revokeObjectURL==="function"&&typeof Blob==="function"&&typeof btoa==="function"){n=v(t);r=T.bind(null,n,t);i=function(){g(n);if(n.href)URL.revokeObjectURL(n.href)}}else{n=m(t);r=A.bind(null,n);i=function(){g(n)}}r(e);return function t(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap){return}r(e=n)}else{i()}}}var x=function(){var e=[];return function(t,n){e[t]=n;return e.filter(Boolean).join("\n")}}();function w(e,t,n,r){var i=n?"":r.css;if(e.styleSheet){e.styleSheet.cssText=x(t,i)}else{var a=document.createTextNode(i);var o=e.childNodes;if(o[t])e.removeChild(o[t]);if(o.length){e.insertBefore(a,o[t])}else{e.appendChild(a)}}}function A(e,t){var n=t.css;var r=t.media;if(r){e.setAttribute("media",r)}if(e.styleSheet){e.styleSheet.cssText=n}else{while(e.firstChild){e.removeChild(e.firstChild)}e.appendChild(document.createTextNode(n))}}function T(e,t,n){var r=n.css;var i=n.sourceMap;var a=t.convertToAbsoluteUrls===undefined&&i;if(t.convertToAbsoluteUrls||a){r=f(r)}if(i){r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"}var o=new Blob([r],{type:"text/css"});var s=e.href;e.href=URL.createObjectURL(o);if(s)URL.revokeObjectURL(s)}},function(e,t,n){"use strict";var r={momentum:"geo_action_momentum",pan:"geo_action_pan",rotate:"geo_action_rotate",select:"geo_action_select",unzoomselect:"geo_action_unzoomselect",zoom:"geo_action_zoom",zoomrotate:"geo_action_zoom_rotate",zoomselect:"geo_action_zoomselect",annotation_line:"geo_annotation_line",annotation_polygon:"geo_annotation_polygon",annotation_rectangle:"geo_annotation_rectangle",annotation_edit_handle:"geo_annotation_edit_handle"};e.exports=r},function(e,t,n){"use strict";var r=n(477);var i=n(483);var a=n(484);var o=n(485);var s=n(487);var u=n(488);var l=n(96);function c(e,t){if(!(this instanceof c)){return new c(e)}t=t||function(e){if(e){throw e}};var n=Object(r["a"])(e);if(typeof n!=="object"){t(e);return}var a=c.projections.get(n.projName);if(!a){t(e);return}if(n.datumCode&&n.datumCode!=="none"){var f=Object(l["a"])(s["a"],n.datumCode);if(f){n.datum_params=f.towgs84?f.towgs84.split(","):null;n.ellps=f.ellipse;n.datumName=f.datumName?f.datumName:n.datumCode}}n.k0=n.k0||1;n.axis=n.axis||"enu";n.ellps=n.ellps||"wgs84";var d=Object(o["b"])(n.a,n.b,n.rf,n.ellps,n.sphere);var p=Object(o["a"])(d.a,d.b,d.rf,n.R_A);var h=n.datum||Object(u["a"])(n.datumCode,n.datum_params,d.a,d.b,p.es,p.ep2);Object(i["a"])(this,n);Object(i["a"])(this,a);this.a=d.a;this.b=d.b;this.rf=d.rf;this.sphere=d.sphere;this.es=p.es;this.e=p.e;this.ep2=p.ep2;this.datum=h;this.init();t(null,this)}c.projections=a["a"];c.projections.start();t["a"]=c},function(e,t,n){"use strict";t["a"]=function(e,t,n,r){n*=t;t*=t;return r[0]*e-n*(r[1]+t*(r[2]+t*(r[3]+t*r[4])))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t["init"]=c;t["forward"]=f;t["inverse"]=d;n.d(t,"names",function(){return p});var r=n(141);var i=n(201);var a=n(497);var o=n(499);var s=n(500);var u=n(501);var l=n(12);function c(){if(this.es===undefined||this.es<=0){throw new Error("incorrect elliptical usage")}this.x0=this.x0!==undefined?this.x0:0;this.y0=this.y0!==undefined?this.y0:0;this.long0=this.long0!==undefined?this.long0:0;this.lat0=this.lat0!==undefined?this.lat0:0;this.cgb=[];this.cbg=[];this.utg=[];this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es));var t=e/(2-e);var n=t;this.cgb[0]=t*(2+t*(-2/3+t*(-2+t*(116/45+t*(26/45+t*(-2854/675))))));this.cbg[0]=t*(-2+t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725))))));n=n*t;this.cgb[1]=n*(7/3+t*(-8/5+t*(-227/45+t*(2704/315+t*(2323/945)))));this.cbg[1]=n*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945)))));n=n*t;this.cgb[2]=n*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835))));this.cbg[2]=n*(-26/15+t*(34/21+t*(8/5+t*(-12686/2835))));n=n*t;this.cgb[3]=n*(4279/630+t*(-332/35+t*(-399572/14175)));this.cbg[3]=n*(1237/630+t*(-12/5+t*(-24832/14175)));n=n*t;this.cgb[4]=n*(4174/315+t*(-144838/6237));this.cbg[4]=n*(-734/315+t*(109598/31185));n=n*t;this.cgb[5]=n*(601676/22275);this.cbg[5]=n*(444337/155925);n=Math.pow(t,2);this.Qn=this.k0/(1+t)*(1+n*(1/4+n*(1/64+n/256)));this.utg[0]=t*(-.5+t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800))))));this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800))))));this.utg[1]=n*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720)))));this.gtu[1]=n*(13/48+t*(-3/5+t*(557/1440+t*(281/630+t*(-1983433/1935360)))));n=n*t;this.utg[2]=n*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720))));this.gtu[2]=n*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440))));n=n*t;this.utg[3]=n*(-4397/161280+t*(11/504+t*(830251/7257600)));this.gtu[3]=n*(49561/161280+t*(-179/168+t*(6601661/7257600)));n=n*t;this.utg[4]=n*(-4583/161280+t*(108847/3991680));this.gtu[4]=n*(34729/80640+t*(-3418889/1995840));n=n*t;this.utg[5]=n*(-20648693/638668800);this.gtu[5]=n*(212378941/319334400);var r=Object(o["a"])(this.cbg,this.lat0);this.Zb=-this.Qn*(r+Object(s["a"])(this.gtu,2*r))}function f(e){var t=Object(l["a"])(e.x-this.long0);var n=e.y;n=Object(o["a"])(this.cbg,n);var r=Math.sin(n);var s=Math.cos(n);var c=Math.sin(t);var f=Math.cos(t);n=Math.atan2(r,f*s);t=Math.atan2(c*s,Object(i["a"])(r,s*f));t=Object(a["a"])(Math.tan(t));var d=Object(u["a"])(this.gtu,2*n,2*t);n=n+d[0];t=t+d[1];var p;var h;if(Math.abs(t)<=2.623395162778){p=this.a*(this.Qn*t)+this.x0;h=this.a*(this.Qn*n+this.Zb)+this.y0}else{p=Infinity;h=Infinity}e.x=p;e.y=h;return e}function d(e){var t=(e.x-this.x0)*(1/this.a);var n=(e.y-this.y0)*(1/this.a);n=(n-this.Zb)/this.Qn;t=t/this.Qn;var a;var s;if(Math.abs(t)<=2.623395162778){var c=Object(u["a"])(this.utg,2*n,2*t);n=n+c[0];t=t+c[1];t=Math.atan(Object(r["a"])(t));var f=Math.sin(n);var d=Math.cos(n);var p=Math.sin(t);var h=Math.cos(t);n=Math.atan2(f*h,Object(i["a"])(p,h*d));t=Math.atan2(p,h*d);a=Object(l["a"])(t+this.long0);s=Object(o["a"])(this.cgb,n)}else{a=Infinity;s=Infinity}e.x=a;e.y=s;return e}var p=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"];t["default"]={init:c,forward:f,inverse:d,names:p}},function(e,t,n){"use strict";t["a"]=function(e){var t=Math.exp(e);t=(t-1/t)/2;return t}},function(e,t,n){"use strict";t["a"]=function(e,t,n){var r=t*n;return e/Math.sqrt(1-r*r)}},function(e,t,n){"use strict";t["a"]=function(e,t,n,r,i){var a;var o;a=e/t;for(var s=0;s<15;s++){o=(e-(t*a-n*Math.sin(2*a)+r*Math.sin(4*a)-i*Math.sin(6*a)))/(t-2*n*Math.cos(2*a)+4*r*Math.cos(4*a)-6*i*Math.cos(6*a));a+=o;if(Math.abs(o)<=1e-10){return a}}return NaN}},function(e,t,n){"use strict";t["a"]=function(e,t){var n;if(e>1e-7){n=e*t;return(1-e*e)*(t/(1-n*n)-.5/e*Math.log((1-n)/(1+n)))}else{return 2*t}}},function(e,t,n){"use strict";var r=n(3);var i=n(1);var a=n(19);var o=n(17);var s=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}t=t||{};a.call(this,t);var i=n(5);var s=this,u,l=this._init,c=this._exit,f=this.data,d=this.draw,p=this.modified,h=this.style,g=[];this.featureType="polygon";this._subfeatureStyles={fillColor:true,fillOpacity:true,lineCap:true,lineJoin:true,strokeColor:true,strokeOffset:true,strokeOpacity:true,strokeWidth:true};this.data=function(e){var t=f(e);if(e!==undefined){g=m();s._checkForStroke()}return t};function m(e,t,n){var r=s.gcs(),i=s.layer().map().gcs();e=e||s.data();t=t||s.style.get("position");n=n||s.style.get("polygon");var a=e.map(function(e,a){var u=n(e,a);if(!u){return}var l,c,f,d,p,h,g,m,v,y;d=u.outer||(Array.isArray(u)?u:[]);l=new Array(d.length);for(p=0;p<d.length;p+=1){l[p]=t.call(s,d[p],p,e,a);h=l[p].x||l[p][0]||0;g=l[p].y||l[p][1]||0;if(l[p].x===undefined){l[p]={x:h,y:g}}if(!p){f={min:{x:h,y:g},max:{x:h,y:g}}}else{if(h<f.min.x){f.min.x=h}if(g<f.min.y){f.min.y=g}if(h>f.max.x){f.max.x=h}if(g>f.max.y){f.max.y=g}}}c=(u.inner||[]).map(function(n){d=n||[];var r=new Array(d.length);for(p=0;p<d.length;p+=1){r[p]=t.call(s,d[p],p,e,a);if(r[p].x===undefined){r[p]={x:r[p].x||r[p][0]||0,y:r[p].y||r[p][1]||0}}}return r});m=o.transformCoordinates(r,i,l);v=c.map(function(e){return o.transformCoordinates(r,i,e)});for(p=0;p<m.length;p+=1){h=m[p].x;g=m[p].y;if(!p){y={min:{x:h,y:g},max:{x:h,y:g}}}else{if(h<y.min.x){y.min.x=h}if(g<y.min.y){y.min.y=g}if(h>y.max.x){y.max.x=h}if(g>y.max.y){y.max.y=g}}}return{outer:l,inner:c,range:f,mapouter:m,mapinner:v,maprange:y}});return a}this.polygonCoordinates=function(){return g};function v(e){if(i.isFunction(e)){return function(t){return e(t[0],t[1],t[2],t[3])}}else{return e}}this.polygon=function(e){if(e===undefined){return s.style("polygon")}else{s.style("polygon",e);s.dataTime().modified();s.modified();g=m()}return s};this.position=function(e){if(e===undefined){return s.style("position")}else{s.style("position",e);s.dataTime().modified();s.modified();g=m()}return s};this.pointSearch=function(e,t){var n=[],r=[],a={},l=s.data(),c=s.layer().map();t=t===null?c.gcs():t===undefined?c.ingcs():t;var f=o.transformCoordinates(t,c.gcs(),e);g.forEach(function(e,t){var o=i.pointInPolygon(f,e.mapouter,e.mapinner,e.maprange);if(o){r.push(t);a[t]=true;n.push(l[t])}});if(u){var d=u.pointSearch(e);d.found.forEach(function(e){if(e.length&&e[0].length===4&&!a[e[0][3]]){r.push(e[0][3]);a[e[0][3]]=true;n.push(l[e[0][3]])}})}return{index:r,found:n}};this.polygonSearch=function(e,t,n){var r=s.data(),a=[],l=[],c={},f,d,p=e,h={},m=s.layer().map();n=n===null?m.gcs():n===undefined?m.ingcs():n;if(!e.outer){e={outer:e,inner:[]}}if(!r||!r.length||e.outer.length<3){return{found:l,index:a,extra:c}}t=t||{};t.partial=t.partial||false;e={outer:o.transformCoordinates(n,m.gcs(),e.outer),inner:(e.inner||[]).map(function(e){return o.transformCoordinates(n,m.gcs(),e)})};e.outer.forEach(function(e){if(!f){f={x:e.x,y:e.y};d={x:e.x,y:e.y}}if(e.x<f.x){f.x=e.x}if(e.x>d.x){d.x=e.x}if(e.y<f.y){f.y=e.y}if(e.y>d.y){d.y=e.y}});g.forEach(function(n,o){if(!n.mapouter.length||n.maprange&&(n.maprange.max.x<f.x||n.maprange.min.x>d.x||n.maprange.max.y<f.y||n.maprange.min.y>d.y)){return}var s=void 0,u=void 0;for(var p=-1;p<n.mapinner.length&&!u;p+=1){var g=p<0?n.mapouter:n.mapinner[p];for(var m=0,v=g.length,y=v-1;m<v;y=m,m+=1){var b=i.distanceToPolygon2d(g[m],e),M=i.distanceToPolygon2d(g[y],e);if(b*M<0){u=true;break}if(i.crossedLineSegmentPolygon2d(g[m],g[y],e)){u=true;break}if(b>0){s=true}}}if(!s&&!u&&i.pointInPolygon(e.outer[0],n.mapouter,n.mapinner,n.maprange)){u=true}if(!t.partial&&s&&!u||t.partial&&(s||u)){a.push(o);l.push(r[o]);c[o]={partial:u};h[o]=true}});if(u){var v=u.polygonSearch(p,t);v.found.forEach(function(e,t){if(e.length&&e[0].length===4){if(!h[e[0][3]]){a.push(e[0][3]);h[e[0][3]]=true;l.push(r[e[0][3]]);c[v.index[t]]={partial:false}}if(v.extra[v.index[t]].partial){c[e[0][3]].partial=true}}})}return{found:l,index:a,extra:c}};this.style=function(e,t){var n=h.apply(s,arguments);if(e!==undefined&&(typeof e!=="string"||t!==undefined)){s._checkForStroke()}return n};this.style.get=h.get;this._getLoopData=function(e,t,n){var r=[],i;for(i=0;i<n.length;i+=1){r.push([n[i],i,e,t])}return r};this._checkForStroke=function(){if(h("stroke")===false){if(u&&s.layer()){s.layer().deleteFeature(u);u=null;s.dependentFeatures([])}return}if(!s.layer()){return}if(!u){u=s.layer().createFeature("line",{selectionAPI:false,gcs:s.gcs(),visible:s.visible(undefined,true)});s.dependentFeatures([u])}var e=s.style(),t;if(i.isFunction(e.stroke)||!e.stroke){var n=s.style.get("stroke"),r=s.style.get("strokeOpacity");t=function e(t){return n(t[2],t[3])?r(t[0],t[1],t[2],t[3]):0}}else{t=v(e.strokeOpacity)}u.style({antialiasing:v(e.antialiasing),closed:true,lineCap:v(e.lineCap),lineJoin:v(e.lineJoin),miterLimit:v(e.miterLimit),strokeWidth:v(e.strokeWidth),strokeStyle:v(e.strokeStyle),strokeColor:v(e.strokeColor),strokeOffset:v(e.strokeOffset),strokeOpacity:t});var a=s.data(),o=s.style("position");if(a!==u._lastData||o!==u._lastPosVal){var l=[],c,f,d,p=s.style.get("position"),g=s.style.get("polygon");for(c=0;c<a.length;c+=1){f=g(a[c],c);if(!f){continue}d=f.outer||(Array.isArray(f)?f:[]);if(d.length>=2){l.push(s._getLoopData(a[c],c,d));if(f.inner){f.inner.forEach(function(e){if(e.length>=2){l.push(s._getLoopData(a[c],c,e))}})}}}u.position(function(e,t,n,r){return p(e[0],e[1],e[2],e[3])});u.data(l);u._lastData=a;u._lastPosVal=o}};this.draw=function(){var e=d();if(u){u.draw()}return e};this.modified=function(){var e=p();if(u){u.modified()}return e};this.rdpSimplifyData=function(e,t,n,r){var a=s.layer().map(),u=a.gcs(),l=s.gcs(),c=m(e,n,r);if(t===undefined){t=a.unitsPerPixel(a.zoom())*.5}c=c.map(function(e){return{outer:o.transformCoordinates(l,u,e.outer),inner:e.inner.map(function(e){return o.transformCoordinates(l,u,e)})}});e=e.map(function(e,n){var r=c[n],a={};for(var s in e){if(e.hasOwnProperty(s)&&!(Array.isArray(e)&&s>=0&&s<e.length)){a[s]=e[s]}}if(r&&r.outer.length>=3){a.inner=r.inner.filter(function(e){return e.length>=3});a.outer=i.rdpLineSimplify(r.outer,t,true,a.inner);if(a.outer.length>=3){var f=a.inner.slice();a.inner.map(function(e,n){f[n]=a.outer;var r=i.rdpLineSimplify(e,t,true,f);f[n]=r;return r}).filter(function(e){return e.length>=3});a.outer=o.transformCoordinates(u,l,a.outer);a.inner=a.inner.map(function(e){return o.transformCoordinates(u,l,e)})}else{a.outer=a.inner=[]}}else{a.outer=[]}return a});s.style("position",function(e){return e});s.style("polygon",function(e){return e});s.data(e);return s};this.mouseOverOrderClosestBorder=function(e){var t=e.feature.data(),n=e.feature.layer().map(),r=o.transformCoordinates(n.ingcs(),e.feature.gcs(),e.mouse.geo),a=e.feature.polygonCoordinates(),s={};e.over.index.forEach(function(e,t){var n=a[e],o;n.outer.forEach(function(e,t){var a=n.outer[(t+1)%n.outer.length];var s=i.distance2dToLineSquared(r,e,a);if(o===undefined||s<o){o=s}});n.inner.forEach(function(e){e.forEach(function(t,n){var a=e[(n+1)%e.length];var s=i.distance2dToLineSquared(r,t,a);if(o===undefined||s<o){o=s}})});s[e]=o});e.over.index.sort(function(e,t){return s[e]-s[t]}).reverse();e.over.index.forEach(function(n,r){e.over.found[r]=t[n]})};this._exit=function(){if(u&&s.layer()){s.layer().deleteFeature(u);u=null;s.dependentFeatures([])}c()};this._init=function(e){e=e||{};l.call(s,e);var t=r.extend({},{fill:true,fillColor:{r:0,g:.5,b:.5},fillOpacity:1,stroke:false,strokeWidth:1,strokeStyle:"solid",strokeColor:{r:0,g:1,b:1},strokeOpacity:1,polygon:function e(t){return t},position:function e(t){return t},origin:function e(t){for(var n=0;n<t.length;n+=1){if(t[n].vertices.length>=3){return t[n].vertices.slice(0,3)}}return[0,0,0]}},e.style===undefined?{}:e.style);if(e.polygon!==undefined){t.polygon=e.polygon}if(e.position!==undefined){t.position=e.position}s.style(t);s._checkForStroke()};return this};s.create=function(e,t){"use strict";t=t||{};t.type="polygon";return a.create(e,t)};s.capabilities={feature:"polygon"};i(s,a);e.exports=s},function(e,t,n){"use strict";var r=n(1);var i=n(38);var a=n(5);var o=n(248);var s=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}i.call(this);var r=n(3);var s=n(11);var u=n(137);var l=n(5).throttle;var c=n(5).debounce;var f=n(5).actionMatch;var d=n(66);var p,h=this,g,m,v,y,b,M,x,w=null,A,T=false,C=false,S,D=function e(){};function I(e){var t=e.x,n=e.y;return Math.sqrt(t*t+n*n)}p=r.extend(true,{},{throttle:30,discreteZoom:false,actions:[{action:u.pan,input:"left",modifiers:{shift:false,ctrl:false},owner:"geo.mapInteractor",name:"button pan"},{action:u.zoom,input:"right",modifiers:{shift:false,ctrl:false},owner:"geo.mapInteractor",name:"button zoom"},{action:u.zoom,input:"wheel",modifiers:{shift:false,ctrl:false},owner:"geo.mapInteractor",name:"wheel zoom"},{action:u.rotate,input:"left",modifiers:{shift:false,ctrl:true},owner:"geo.mapInteractor",name:"button rotate"},{action:u.rotate,input:"wheel",modifiers:{shift:false,ctrl:true},owner:"geo.mapInteractor",name:"wheel rotate"},{action:u.select,input:"left",modifiers:{shift:true,ctrl:true},selectionRectangle:s.select,owner:"geo.mapInteractor",name:"drag select"},{action:u.zoomselect,input:"left",modifiers:{shift:true,ctrl:false},selectionRectangle:s.zoomselect,owner:"geo.mapInteractor",name:"drag zoom"},{action:u.unzoomselect,input:"right",modifiers:{shift:true,ctrl:false},selectionRectangle:s.unzoomselect,owner:"geo.mapInteractor",name:"drag unzoom"},{action:u.pan,input:"pan",owner:"geo.mapInteractor",name:"touch pan"},{action:u.zoomrotate,input:"rotate",owner:"geo.mapInteractor",name:"touch zoom and rotate"}],click:{enabled:true,buttons:{left:true,right:true,middle:true},duration:0,cancelOnMove:true},keyboard:{actions:{"zoom.in":["plus","shift+plus","shift+ctrl+plus","=","shift+=","shift+ctrl+="],"zoom.out":["-","shift+-","shift+ctrl+-","_","shift+_","shift+ctrl+_"],"zoom.0":["1"],"zoom.3":["2"],"zoom.6":["3"],"zoom.9":["4"],"zoom.12":["5"],"zoom.15":["6"],"zoom.18":["7"],"pan.left":["left","shift+left","shift+ctrl+left"],"pan.right":["right","shift+right","shift+ctrl+right"],"pan.up":["up","shift+up","shift+ctrl+up"],"pan.down":["down","shift+down","shift+ctrl+down"],"rotate.ccw":["<","shift+<","shift+ctrl+<",".","shift+.","shift+ctrl+."],"rotate.cw":[">","shift+>","shift+ctrl+>",",","shift+,","shift+ctrl+,"],"rotate.0":["0"]},meta:{0:{shift:false,ctrl:false},1:{shift:true,ctrl:true},2:{shift:true,ctrl:false}},focusHighlight:true},alwaysTouch:false,wheelScaleX:1,wheelScaleY:1,zoomScale:1,rotateWheelScale:6*Math.PI/180,zoomrotateMinimumRotation:5*Math.PI/180,zoomrotateReverseRotation:4*Math.PI/180,zoomrotateMinimumZoom:.05,zoomrotateMinimumPan:5,touchPanDelay:50,momentum:{enabled:true,maxSpeed:2.5,minSpeed:.01,stopTime:250,drag:.01,actions:[u.pan,u.zoom]},spring:{enabled:false,springConstant:5e-5},zoomAnimation:{enabled:true,duration:500,ease:function e(t){return(2-t)*t}}},t||{});if(t&&t.actions){p.actions=r.extend(true,[],t.actions)}if(t&&t.momentum&&t.momentum.actions){p.momentum.actions=r.extend(true,[],t.momentum.actions)}if(t&&t.keyboard&&t.keyboard.actions!==undefined){p.keyboard.actions=r.extend(true,{},t.keyboard.actions)}g={page:{x:0,y:0},map:{x:0,y:0},geo:{x:0,y:0},mapgcs:{x:0,y:0},buttons:{left:false,right:false,middle:false},modifiers:{alt:false,ctrl:false,shift:false,meta:false},time:new Date,deltaTime:1,velocity:{x:0,y:0}};b={};M={};this._handleKeys=function(e,t,n){if(n&&n.simulated===true){t=n}var r=p.keyboard.meta||{0:{}},i=h.map(),a=i.size(),o=e,u="",l,c,f={};for(l in r){if(r.hasOwnProperty(l)){if((r[l].shift===undefined||t.shiftKey===!!r[l].shift)&&(r[l].ctrl===undefined||t.ctrlKey===!!r[l].ctrl)&&(r[l].alt===undefined||t.altKey===!!r[l].alt)&&(r[l].meta===undefined||t.metaKey===!!r[l].meta)){c=l}}}if(c===undefined){return}t.stopPropagation();t.preventDefault();if(e.indexOf(".")>=0){o=e.substr(0,e.indexOf("."));u=e.substr(e.indexOf(".")+1)}switch(o){case"zoom":switch(u){case"in":f.zoomDelta=[.05,.25,1][c];break;case"out":f.zoomDelta=-[.05,.25,1][c];break;default:if(!isNaN(parseFloat(u))){f.zoom=parseFloat(u)}break}break;case"pan":switch(u){case"down":f.panY=-Math.max(1,[0,.05,.5][c]*a.height);break;case"left":f.panX=Math.max(1,[0,.05,.5][c]*a.width);break;case"right":f.panX=-Math.max(1,[0,.05,.5][c]*a.width);break;case"up":f.panY=Math.max(1,[0,.05,.5][c]*a.height);break}break;case"rotate":switch(u){case"ccw":f.rotationDelta=[1,5,90][c]*Math.PI/180;break;case"cw":f.rotationDelta=-[1,5,90][c]*Math.PI/180;break;default:if(!isNaN(parseFloat(u))){f.rotation=parseFloat(u)}break}break}i.geoTrigger(s.keyaction,{move:f,action:e,factor:c,event:t});if(f.cancel){return}if(f.zoom!==undefined){i.zoom(f.zoom)}else if(f.zoomDelta){i.zoom(i.zoom()+f.zoomDelta)}if(f.rotation!==undefined){i.rotation(f.rotation)}else if(f.rotationDelta){i.rotation(i.rotation()+f.rotationDelta)}if(f.panX||f.panY){i.pan({x:f.panX||0,y:f.panY||0})}};this.hasTouchSupport=function(){return"ontouchstart"in window||window.TouchEvent||window.DocumentTouch&&document instanceof window.DocumentTouch||(navigator.msMaxTouchPoints||navigator.maxTouchPoints)>1};this._handleTouch=function(e){var t=false;if(e.pointerType==="mouse"&&y.touchSupport){t=true}if(e.type==="hammer.input"){if(y.lastEventType==="pan"&&e.pointers.length!==1){t=true;y.lastEventType=null}else{return}}var n=/^(.*)(start|end|move|tap)$/.exec(e.type);if(!n||n.length!==3){t=true}if(t){if(b.boundDocumentHandlers&&y.lastEvent){h._handleMouseUpDocument(y.lastEvent)}return}e.which=n[1];var i=(new Date).valueOf();if(e.which==="pan"&&y.lastEventType!=="pan"&&i-y.lastTime<p.touchPanDelay){return}y.lastTime=i;y.lastEventType=e.which;y.lastEvent=e;if(e.pageX===undefined&&e.center!==undefined&&e.center.x!==undefined){e.pageX=e.center.x;e.pageY=e.center.y}if(n[2]==="start"){h._handleMouseDown(e);h._setClickMaybe(false);if(b.boundDocumentHandlers){r(document).on("mousemove.geojs",h._handleMouseUpDocument)}}if(n[2]==="start"||n[2]==="move"){if(b.boundDocumentHandlers){h._handleMouseMoveDocument(e)}else{h._handleMouseMove(e)}}if(n[2]==="end"||n[2]==="cancel"){if(b.boundDocumentHandlers){h._handleMouseUpDocument(e)}else{h._handleMouseUp(e)}y.lastEvent=null}if(n[2]==="tap"&&!b.boundDocumentHandlers){e.which=1;y.lastEventType=null;h._handleMouseDown(e);h._handleMouseUp(e);y.lastEventType=n[2]}};this.retriggerMouseMove=function(){h.map().geoTrigger(s.mousemove,h.mouse())};this._connectEvents=function(){if(!p.map){return h}h._disconnectEvents();x=r(p.map.node());h._handleMouseWheel=L();D=_();a.adjustActions(p.actions);var e={};["right","pan","rotate"].forEach(function(t){e[t]=p.actions.some(function(e){return e.input[t]})});x.on("wheel.geojs",h._handleMouseWheel);x.on("mousemove.geojs",h._handleMouseMove);x.on("mousedown.geojs",h._handleMouseDown);x.on("mouseup.geojs",h._handleMouseUp);x.on("dragstart",function(){return false});if(e.right){x.on("contextmenu.geojs",function(){return false})}if(p.keyboard&&p.keyboard.actions){m=o(x[0]);var t=[];for(var i in p.keyboard.actions){if(p.keyboard.actions.hasOwnProperty(i)){m.bind(p.keyboard.actions[i],function(e){return function(t,n){h._handleKeys(e,t,n)}}(i));t=t.concat(p.keyboard.actions[i])}}v=t}x.toggleClass("highlight-focus",!!(v&&v.length&&p.keyboard.focusHighlight));if((h.hasTouchSupport()||p.alwaysTouch)&&(e.pan||e.rotate)){var s;try{s=n(601)}catch(e){}if(s!==undefined){var u=[],l=["hammer.input"];if(e.rotate){u.push([s.Rotate,{enable:true}]);l=l.concat(["rotatestart","rotateend","rotatemove"])}if(e.pan){u.push([s.Pan,{direction:s.DIRECTION_ALL}]);l=l.concat(["panstart","panend","panmove"])}u.push([s.Tap,{event:"doubletap",taps:2}]);u.push([s.Tap,{event:"singletap"},undefined,["doubletap"]]);l=l.concat(["singletap"]);var c={recognizers:u,preventDefault:true};y={manager:new s.Manager(x[0],c),touchSupport:h.hasTouchSupport(),lastTime:0};y.manager.get("doubletap").recognizeWith("singletap");l.forEach(function(e){y.manager.on(e,h._handleTouch)})}}return h};this._disconnectEvents=function(){if(v){if(m){m.unbind(v)}v=null;m=null}if(y){y.manager.destroy();y=null}if(x){x.off(".geojs");x=null}h._handleMouseWheel=function(){};D=function e(){};return h};this.map=function(e){if(e!==undefined){p.map=e;h._connectEvents();return h}return p.map};this.options=function(e){if(e===undefined){return r.extend({},p)}r.extend(p,e);h._connectEvents();return h};this._getMousePosition=function(e){if(e.pageX===undefined||e.pageY===undefined){return}var t=x.offset(),n,r;r=(new Date).valueOf();n=r-g.time;g.time=r;g.deltaTime=n;g.velocity={x:(e.pageX-g.page.x)/n,y:(e.pageY-g.page.y)/n};g.page={x:e.pageX,y:e.pageY};g.map={x:e.pageX-t.left,y:e.pageY-t.top};try{g.geo=h.map().displayToGcs(g.map);g.mapgcs=h.map().displayToGcs(g.map,null)}catch(e){g.geo=g.mapgcs=null}};this._getMouseButton=function(e){if(e.buttons===undefined&&e.which===undefined){return}for(var t in g.buttons){if(g.buttons.hasOwnProperty(t)){g.buttons[t]=false}}if(e.buttons!==undefined){g.buttons.left=!!(e.buttons&1);g.buttons.right=!!(e.buttons&2);g.buttons.middle=!!(e.buttons&4)}else if(e.type!=="mouseup"){switch(e.which){case 1:g.buttons.left=true;break;case 2:g.buttons.middle=true;break;case 3:g.buttons.right=true;break}}if(e.which&&!(e.which>=1&&e.which<=3)){g.buttons[e.which]=true}};this._getMouseModifiers=function(e){g.modifiers.alt=e.altKey;g.modifiers.ctrl=e.ctrlKey;g.modifiers.meta=e.metaKey;g.modifiers.shift=e.shiftKey};this._getSelection=function(){var e=b.origin,t=h.mouse(),n=h.map(),i={},a={};i.upperLeft={x:Math.min(e.map.x,t.map.x),y:Math.min(e.map.y,t.map.y)};i.lowerRight={x:Math.max(e.map.x,t.map.x),y:Math.max(e.map.y,t.map.y)};i.upperRight={x:i.lowerRight.x,y:i.upperLeft.y};i.lowerLeft={x:i.upperLeft.x,y:i.lowerRight.y};a.upperLeft=n.displayToGcs(i.upperLeft,null);a.lowerRight=n.displayToGcs(i.lowerRight,null);a.upperRight=n.displayToGcs(i.upperRight,null);a.lowerLeft=n.displayToGcs(i.lowerLeft,null);A.data([{ul:a.upperLeft,ur:a.upperRight,ll:a.lowerLeft,lr:a.lowerRight}]);A.draw();return{display:i,gcs:a,mouse:t,origin:r.extend({},b.origin)}};this.cancel=function(e,t){var n;if(!e){n=!!b.action}else{n=b.action===e}if(n){if(!t){M={}}E()}return n};this._setClickMaybe=function(e){C=e;if(S){window.clearTimeout(S);S=null}};this._handleMouseDown=function(e){var t,n;if(T){return}if(y&&y.lastEventType==="tap"&&(new Date).valueOf()-y.lastTime<1e3){return}h._getMousePosition(e);h._getMouseButton(e);h._getMouseModifiers(e);if(p.click.enabled&&(!g.buttons.left||p.click.buttons.left)&&(!g.buttons.right||p.click.buttons.right)&&(!g.buttons.middle||p.click.buttons.middle)){h._setClickMaybe({x:g.page.x,y:g.page.y,buttons:r.extend({},g.buttons)});if(p.click.duration>0){S=window.setTimeout(function(){C=false;S=null},p.click.duration)}}n=f(g.buttons,g.modifiers,p.actions);t=(n||{}).action;var i=h.map();i.transitionCancel("_handleMouseDown"+(t?"."+t:""));h.cancel(u.momentum);g.velocity={x:0,y:0};if(t){M={kind:"move"};b={action:t,actionRecord:n,origin:r.extend(true,{},g),initialZoom:i.zoom(),initialRotation:i.rotation(),initialEventRotation:e.rotation,delta:{x:0,y:0}};if(n.selectionRectangle){if(w){w.clear();i.deleteLayer(w);w=null}w=i.createLayer("feature",{features:[d.capabilities.color],autoshareRenderer:false});A=w.createFeature("quad",{gcs:i.gcs()});A.style({opacity:.25,color:{r:.3,g:.3,b:.3}});i.geoTrigger(s.brushstart,h._getSelection())}i.geoTrigger(s.actiondown,{state:h.state(),mouse:h.mouse(),event:e});if(p.throttle>0){r(document).on("mousemove.geojs",l(p.throttle,h._handleMouseMoveDocument))}else{r(document).on("mousemove.geojs",h._handleMouseMoveDocument)}r(document).on("mouseup.geojs",h._handleMouseUpDocument);b.boundDocumentHandlers=true}};this._handleMouseMove=function(e){if(T){return}if(b.boundDocumentHandlers){return}if(p.click.cancelOnMove&&C){h._setClickMaybe(false)}h._getMousePosition(e);h._getMouseButton(e);h._getMouseModifiers(e);if(C){return}h.map().geoTrigger(s.mousemove,h.mouse())};this._handleZoomrotate=function(e){var t=Math.log2(e.scale);if(!b.zoomrotateAllowZoom&&t&&Math.abs(t)>=Math.log2(1+p.zoomrotateMinimumZoom)){if(p.zoomrotateMinimumZoom){b.initialZoom-=t}b.zoomrotateAllowZoom=true}if(b.zoomrotateAllowZoom&&t){var n=b.initialZoom+t;h.map().zoom(n,b.origin)}var r=(e.rotation-b.initialEventRotation)*Math.PI/180;if(!b.zoomrotateAllowRotation&&r&&Math.abs(r)>=p.zoomrotateMinimumRotation){if(p.zoomrotateMinimumRotation){b.initialEventRotation=e.rotation;r=0}b.zoomrotateAllowRotation=true}if(b.zoomrotateAllowRotation){var i=b.initialRotation+r;r=a.wrapAngle(i-h.map().rotation());if(r&&(r*(b.lastRotationDelta||0)>=0||Math.abs(r)>=p.zoomrotateReverseRotation)){h.map().rotation(i,b.origin);b.lastRotationDelta=r}}var o=b.origin.page;if(b.initialEventGeo){var s=x.offset();o=h.map().gcsToDisplay(b.initialEventGeo);o.x+=s.left;o.y+=s.top}var u=e.pageX,l=u-o.x,c=e.pageY,f=c-o.y,d=l*l+f*f;if(!b.zoomrotateAllowPan&&d&&d>=p.zoomrotateMinimumPan*p.zoomrotateMinimumPan){if(p.zoomrotateMinimumPan){l=f=0;b.initialEventGeo=h.mouse().geo}else{b.initialEventGeo=b.origin.geo}b.zoomrotateAllowPan=true}if(b.zoomrotateAllowPan&&(l||f)){h.map().pan({x:l,y:f})}};this._handleMouseMoveDocument=function(e){var t,n,r;if(!h.map()){return}if(T||M.kind!=="move"){return}h._getMousePosition(e);h._getMouseButton(e);h._getMouseModifiers(e);if(p.click.cancelOnMove&&(C.x===undefined||g.page.x!==C.x||g.page.y!==C.y)){h._setClickMaybe(false)}if(C){return}if(!b.action){console.log("WARNING: Invalid state in mapInteractor.");return}t=g.map.x-b.origin.map.x-b.delta.x;n=g.map.y-b.origin.map.y-b.delta.y;b.delta.x+=t;b.delta.y+=n;if(b.action===u.pan){h.map().pan({x:t,y:n},undefined,"limited")}else if(b.action===u.zoom){D(-n*p.zoomScale/120,b)}else if(b.action===u.rotate){var i,a;if(b.origin.rotation===undefined){i=b.origin.map.x-h.map().size().width/2;a=b.origin.map.y-h.map().size().height/2;b.origin.rotation=h.map().rotation()-Math.atan2(a,i)}i=g.map.x-h.map().size().width/2;a=g.map.y-h.map().size().height/2;h.map().rotation(b.origin.rotation+Math.atan2(a,i))}else if(b.action===u.zoomrotate){h._handleZoomrotate(e)}else if(b.actionRecord.selectionRectangle){r=h._getSelection();h.map().geoTrigger(s.brush,r)}h.map().geoTrigger(s.actionmove,{state:h.state(),mouse:h.mouse(),event:e});e.preventDefault()};function E(){b={boundDocumentHandlers:b.boundDocumentHandlers}}function N(e,t){t=t<=0?30:t;var n=O();var r=I(e);var i=e.x/r;var a=e.y/r;r=r*Math.exp(-p.momentum.drag*t);if(I(n)*t+r<p.momentum.minSpeed){return null}if(r>0){i=i*r;a=a*r}else{i=0;a=0}return{x:i-n.x*t,y:a-n.y*t}}function O(){var e,t,n,r;if(!p.spring.enabled){return{x:0,y:0}}var i=h.map().maxBounds(undefined,null);var a=h.map().gcsToDisplay({x:i.left,y:i.top},null);var o=h.map().gcsToDisplay({x:i.right,y:i.bottom},null);var s=p.spring.springConstant;var u=h.map().node().width();var l=h.map().node().height();e=s*Math.max(0,a.x);t=s*Math.max(0,u-o.x);n=s*Math.max(0,a.y)/2;r=s*Math.max(0,l-o.y)/2;return{x:e-t,y:n-r}}this._zoomFromSelection=function(e,t,n){if(e!==u.zoomselect&&e!==u.unzoomselect){return}if(t.x===n.x||t.y===n.y){return}var r,i,a=h.map(),o=a.size();var s={x:Math.abs((n.x-t.x)/o.width),y:Math.abs((n.y-t.y)/o.height)};if(e===u.zoomselect){i=a.displayToGcs({x:(t.x+n.x)/2,y:(t.y+n.y)/2},null);r=a.zoom()-Math.log2(Math.max(s.x,s.y))}else{r=a.zoom()+Math.log2(Math.max(s.x,s.y));i=a.center(undefined,null)}if(a.discreteZoom()){r=Math.floor(r)}a.zoom(r);if(e===u.zoomselect){a.center(i,null)}else{var l=a.gcsToDisplay(i,null);a.pan({x:(t.x+n.x)/2-l.x,y:(t.y+n.y)/2-l.y})}};this._handleMouseUpDocument=function(e){var t,n;if(T){return}M={};h._setClickMaybe(false);h._getMouseButton(e);h._getMouseModifiers(e);r(document).off(".geojs");b.boundDocumentHandlers=false;if(g.buttons.right){e.preventDefault()}if(b.actionRecord&&b.actionRecord.selectionRectangle){h._getMousePosition(e);t=h._getSelection();w.clear();h.map().deleteLayer(w);w=null;A=null;h.map().geoTrigger(s.brushend,t);if(b.actionRecord.selectionRectangle!==true){h.map().geoTrigger(b.actionRecord.selectionRectangle,t)}h._zoomFromSelection(b.action,t.display.lowerLeft,t.display.upperRight);h.map().geoTrigger(s.actionselection,{state:h.state(),mouse:h.mouse(),event:e,lowerLeft:t.display.lowerLeft,upperRight:t.display.upperRight})}h.map().geoTrigger(s.actionup,{state:h.state(),mouse:h.mouse(),event:e});n=b.action;E();if(p.momentum.enabled&&r.inArray(n,p.momentum.actions)>=0){var i=(new Date).valueOf();var a=i-g.time+g.deltaTime;if(i-g.time<p.momentum.stopTime){g.velocity.x*=g.deltaTime/a;g.velocity.y*=g.deltaTime/a;g.deltaTime=a}else{g.velocity.x=g.velocity.y=0}h.springBack(true,n)}};this._handleMouseUp=function(e){if(T){return}h._getMouseButton(e);if(C){h._handleMouseClick(e)}};this._handleMouseClick=function(e){if(b.actionRecord&&b.actionRecord.selectionRectangle){w.clear();h.map().deleteLayer(w);w=null;A=null;b.action=b.actionRecord=null}h._getMouseButton(e);h._getMouseModifiers(e);h.cancel(u.pan);r(document).off(".geojs");b.boundDocumentHandlers=false;var t=h.mouse();t.buttonsDown=C.buttons;h._setClickMaybe(false);h.map().geoTrigger(s.mouseclick,t)};function _(){var e=0,t=400,n,i,a;function o(t,o){var s=h.map(),u;n=r.extend(true,{},o);e+=t;if(a===undefined){i=a=s.zoom()}a+=t;if(s&&Math.abs(e)>=1&&p.discreteZoom&&!p.zoomAnimation.enabled){u=Math.round(e+s.zoom());e=e+s.zoom()-u;s.zoom(u,n)}}function s(){var t=h.map(),r;if(t){if(p.zoomAnimation.enabled){r=a;if(p.discreteZoom){r=Math.round(r);if(r===i&&a!==i){r=i+(a>i?1:-1)}}r=Math.round(t._fix_zoom(r)*1e6)/1e6;if(r!==t.zoom()){t.transitionCancel("debounced_zoom."+u.zoom);t.transition({zoom:r,zoomOrigin:n,duration:p.zoomAnimation.duration,ease:p.zoomAnimation.ease,done:function e(n){n=n||{};var r=new RegExp("\\."+u.zoom+"$");if(!n.next&&(!n.cancel||(""+n.source).search(r)<0)){a=undefined}if(p.discreteZoom&&n.cancel&&n.transition&&n.transition.end&&(""+n.source).search(r)<0){t.zoom(n.transition.end.zoom,n.transition.end.zoomOrigin)}}})}else{a=undefined}}else{r=e+t.zoom();if(p.discreteZoom){r=Math.round(r)}t.zoom(r,n)}}e=0}if(p.discreteZoom!==true&&p.discreteZoom>0){t=p.discreteZoom}if((p.discreteZoom===true||p.discreteZoom>0)&&!p.zoomAnimation.enabled){return c(t,false,s,o)}else{return function(e,t){if(!e&&a===undefined){return}o(e,t);s()}}}function L(){var e={};function t(t){var n,i;if(T){return}if(e!==M){e={kind:"wheel",scroll:{x:0,y:0}};M=e}t.preventDefault();t.deltaFactor=1;if(t.originalEvent.deltaMode===1){t.deltaFactor=40}else if(t.originalEvent.deltaMode===2){t.deltaFactor=r(window).height()}n=t.originalEvent.deltaX||0;i=t.originalEvent.deltaY||0;n=n*p.wheelScaleX*t.deltaFactor/120;i=i*p.wheelScaleY*t.deltaFactor/120;e.scroll.x+=n;e.scroll.y+=i}function n(t){var n,r,i;if(e!==M){return}h._getMousePosition(t);h._getMouseButton(t);h._getMouseModifiers(t);i=f({wheel:true},g.modifiers,p.actions);r=(i||{}).action;if(r){var a=h.map().transitionCancel("wheel."+r);a|=h.cancel(u.momentum,true);if(a){g.geo=h.map().displayToGcs(g.map);g.mapgcs=h.map().displayToGcs(g.map,null)}switch(r){case u.pan:h.map().pan({x:M.scroll.x,y:M.scroll.y},undefined,"limited");break;case u.zoom:n=-M.scroll.y;D(n,g);break;case u.rotate:h.map().rotation(h.map().rotation()+M.scroll.y*p.rotateWheelScale,g);break}h.map().geoTrigger(s.actionwheel,{state:h.state(),mouse:h.mouse(),eventData:t})}M={}}if(p.throttle>0){return l(p.throttle,false,n,t)}else{return function(e){t(e);n(e)}}}this._handleMouseWheel=function(){};this.springBack=function(e,t){if(b.action===u.momentum){return}if(!e){g.velocity={x:0,y:0}}b.origAction=t;b.action=u.momentum;b.origin=h.mouse();b.momentum=h.mouse();b.start=new Date;b.handler=function(){var e,t,n,r;if(b.action!==u.momentum||!h.map()||h.map().transition()){return}r=Math.min(b.momentum.deltaTime,30);n=b.start.valueOf();b.start=new Date;e=N(b.momentum.velocity,b.start-n);if(!e){E();return}t=I(e);if(t>p.momentum.maxSpeed){t=p.momentum.maxSpeed/t;e.x=e.x*t;e.y=e.y*t}if(!isFinite(e.x)||!isFinite(e.y)){e.x=0;e.y=0}b.momentum.velocity.x=e.x;b.momentum.velocity.y=e.y;switch(b.origAction){case u.zoom:var i=b.momentum.velocity.y*r;D(-i*p.zoomScale/120,b);break;default:h.map().pan({x:b.momentum.velocity.x*r,y:b.momentum.velocity.y*r},undefined,"limited");break}if(b.handler){h.map().scheduleAnimationFrame(b.handler)}};if(b.handler){h.map().scheduleAnimationFrame(b.handler)}};this.destroy=function(){h._disconnectEvents();if(h.map()){r(h.map().node()).removeClass("highlight-focus")}h.map(null)};this.mouse=function(){return r.extend(true,{},g)};this.keyboard=function(e){if(e===undefined){return r.extend(true,{},p.keyboard||{})}return h.options({keyboard:e})};this.state=function(){return r.extend(true,{},b)};this.pause=function(e){if(e===undefined){return T}T=!!e;return h};this.addAction=function(e,t){if(!e||!e.action||!e.input){return}a.addAction(p.actions,e,t);if(p.map&&p.actions.some(function(e){return e.input.right})){x.off("contextmenu.geojs");x.on("contextmenu.geojs",function(){return false})}};this.hasAction=function(e,t,n){return a.hasAction(p.actions,e,t,n)};this.removeAction=function(e,t,n){var r=a.removeAction(p.actions,e,t,n);if(p.map&&!p.actions.some(function(e){return e.input.right})){x.off("contextmenu.geojs")}return r};this.simulateEvent=function(e,t){var n,i,a,o,s;if(!h.map()){return h}if(e==="keyboard"&&m){var u={shiftKey:t.shift||t.shiftKey||false,ctrlKey:t.ctrl||t.ctrlKey||false,altKey:t.alt||t.altKey||false,metaKey:t.meta||t.metaKey||false,toString:function e(){return t.keys},stopPropagation:function e(){},preventDefault:function e(){},simulated:true};m.trigger(u);return}i=t.page||{};if(t.map){a=x.offset();i.x=t.map.x+a.left;i.y=t.map.y+a.top}if(t.button==="left"){o=1;s=1}else if(t.button==="right"){o=3;s=2}else if(t.button==="middle"){o=2;s=4}t.modifiers=t.modifiers||[];t.wheelDelta=t.wheelDelta||{};n=r.Event(e,{pageX:i.x,pageY:i.y,which:o,buttons:s,altKey:t.modifiers.indexOf("alt")>=0,ctrlKey:t.modifiers.indexOf("ctrl")>=0,metaKey:t.modifiers.indexOf("meta")>=0,shiftKey:t.modifiers.indexOf("shift")>=0,center:t.center,rotation:t.touch?t.rotation||0:t.rotation,scale:t.touch?t.scale||1:t.scale,pointers:t.pointers,pointerType:t.pointerType,originalEvent:{deltaX:t.wheelDelta.x,deltaY:t.wheelDelta.y,deltaMode:t.wheelMode,preventDefault:function e(){},stopPropagation:function e(){},stopImmediatePropagation:function e(){}}});if(t.touch&&y){h._handleTouch(n)}else{x.trigger(n)}if(e.indexOf(".geojs")>=0){r(document).trigger(n)}};this._connectEvents();return this};r(s,i);e.exports=s},function(e,t,n){"use strict";var r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",i=8;var a=function e(){var t=[],n;t.length=i;for(n=0;n<i;n+=1){t[n]=r.charAt(Math.floor(Math.random()*r.length))}return t.join("")};e.exports=a},function(e,t,n){"use strict";var r=n(1);var i=n(19);var a=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}var r=n(3);var a=n(5);t=t||{};i.call(this,t);var o=this,s=this._init,u={};this.featureType="mesh";this.mesh=function(e,t){if(e===undefined){return u}if(typeof e==="string"&&t===undefined){return u[e]}if(t===undefined){var n=r.extend({},{gridWidth:function t(){if(e.gridHeight){return Math.floor(o.data().length/e.gridHeight)}return Math.floor(Math.sqrt(o.data().length))},gridHeight:function t(){if(e.gridWidth){return Math.floor(o.data().length/e.gridWidth)}return Math.floor(Math.sqrt(o.data().length))}},u,e);u=n}else{u[e]=t}o.modified();return o};this.mesh.get=function(e){if(e===undefined){var t={},n;for(n in u){if(u.hasOwnProperty(n)){t[n]=o.mesh.get(n)}}return t}return a.ensureFunction(u[e])};this.position=function(e){if(e===undefined){return o.style("position")}else{o.style("position",e);o.dataTime().modified();o.modified()}return o};this._createMesh=function(e){e=e||{};var t,n,r,i,a,s,u,l,c,f,d=o.data(),p=o.position(),h,g=o.mesh.get("elements")(d),m=o.mesh.get("elementPacking")(d),v=o.mesh.get("gridWidth")(d),y=o.mesh.get("gridHeight")(d),b=o.mesh.get("wrapLongitude")(d),M=o.mesh.get("x0")(d),x=o.mesh.get("y0")(d),w=o.mesh.get("dx")(d),A=o.mesh.get("dy")(d),T,C,S,D,I=v,E={shape:"square",elements:[]};if(!g){if(v*y>d.length){y=Math.floor(d.length/v)}l=M===null||M===undefined||x===null||x===undefined||!w||!A;b=!!(b===undefined||b);if(!l&&b&&(M<-180||M>180||M+w*(v-1)<-180||M+w*(v-1)>180)&&w>-180&&w<180&&w*(v-1)<360+1e-4){T=[];for(t=0;t<v;t+=1){S=M+t*w;while(S<-180){S+=360}while(S>180){S-=360}if(t&&Math.abs(S-T[T.length-1])>180){if(S>T[T.length-1]){T.push(S-360);T.push(T[T.length-2]+360)}else{T.push(S+360);T.push(T[T.length-2]-360)}C=t}T.push(S)}v+=2;if(Math.abs(Math.abs(I*w)-360)<.01){v+=1;S=M+I*w;while(S<-180){S+=360}while(S>180){S-=360}T.push(S)}}s=v*y;if(C!==undefined){E.index=new Array(s);for(t=0;t<s;t+=1){r=Math.floor(t/v);D=t-r*v;D+=D>C?-2:0;if(D>=I){D-=I}D+=r*I;E.index[t]=D}}for(r=a=0;r<y-1;r+=1,a+=1){for(t=0;t<v-1;t+=1,a+=1){if(t!==C){E.elements.push(a);E.elements.push(a+1);E.elements.push(a+v);E.elements.push(a+v+1);E.elements.push(a+v);E.elements.push(a+1)}}}}else{var N=g.length&&Array.isArray(g[0]);if(m==="square"||m!=="triangle"&&(!N&&!(g.length%4)&&g.length%3||N&&g[0].length===4)){E.shape="square";if(N){for(t=0;t<g.length;t+=1){E.elements.push(g[t][0]);E.elements.push(g[t][1]);E.elements.push(g[t][3]);E.elements.push(g[t][2]);E.elements.push(g[t][3]);E.elements.push(g[t][1])}}else{for(t=0;t<g.length-3;t+=4){E.elements.push(g[t]);E.elements.push(g[t+1]);E.elements.push(g[t+3]);E.elements.push(g[t+2]);E.elements.push(g[t+3]);E.elements.push(g[t+1])}}}else{E.shape="triangle";if(N){for(t=0;t<g.length;t+=1){E.elements.push(g[t][0]);E.elements.push(g[t][1]);E.elements.push(g[t][2])}}else{E.elements=g.slice(0,g.length-g.length%3)}}s=d.length;l=true}E.verticesPerElement=E.shape==="triangle"?3:6;if(e.used){for(t=0;t<s;t+=1){a=E.index?E.index[t]:t;if(!e.used(d[a],a)){break}}if(t!==s){u=t;var O=new Array(s),_=E.verticesPerElement;for(r=0;r<u;r+=1){O[r]=r}O[u]=-1;if(!E.index){E.index=new Array(d.length);for(r=0;r<d.length;r+=1){E.index[r]=r}}for(t=u+1;t<s;t+=1){a=E.index[t];if(e.used(d[a],a)){O[t]=u;E.index[u]=E.index[t];u+=1}else{O[t]=-1}}E.index.splice(u);for(t=i=0;t<E.elements.length;t+=_){for(r=0;r<_;r+=1){if(O[E.elements[t+r]]<0){break}E.elements[i+r]=O[E.elements[t+r]]}if(r===_){i+=_}}E.elements.splice(i);s=u}}E.pos=new Array(s*3);for(f in e){if(f!=="used"&&e.hasOwnProperty(f)){E[f]=new Array(s)}}for(t=n=0;t<s;t+=1,n+=3){a=E.index?E.index[t]:t;c=d[a];if(l){h=p(c,a);E.pos[n]=h.x;E.pos[n+1]=h.y;E.pos[n+2]=h.z||0}else{if(C===undefined){E.pos[n]=M+w*(a%v)}else{E.pos[n]=T[t%v]}E.pos[n+1]=x+A*Math.floor(a/v);E.pos[n+2]=0;h={x:E.pos[n],y:E.pos[n+1],z:E.pos[n+2]}}for(f in e){if(f!=="used"&&e.hasOwnProperty(f)){E[f][t]=e[f](c,a,h)}}}E.numVertices=s;E.numElements=E.elements.length/E.verticesPerElement;return E};this._init=function(e){s.call(o,e);e=e||{};var t=r.extend({},{position:function e(t){return t}},e.style||{});o.mesh(e.mesh||{});o.style(t)};return this};r(a,i);e.exports=a},function(e,t,n){"use strict";var r=n(3);var i=function e(t){if(!(this instanceof e)){return new e(t)}this._index=t.index;this._size=t.size;this._overlap=t.overlap||{x:0,y:0};this._wrap=t.wrap||{x:1,y:1};this._url=t.url;this._fetched=false;this._queue=t.queue||null;Object.defineProperty(this,"index",{get:function e(){return this._index}});Object.defineProperty(this,"size",{get:function e(){return this._size}});Object.defineProperty(this,"overlap",{get:function e(){return this._overlap}});this.fetch=function(){if(!this._fetched){r.get(this._url).done(function(){this._fetched=true}.bind(this)).promise(this)}return this};this.fetched=function(){return this._fetched};this.then=function(e,t){if(!this.fetched()&&this._queue&&this._queue.add&&(!this.state||this.state()==="pending")){this._queue.add(this,this.fetch)}else{this.fetch()}if(this.done&&this.fail){this.done(e).fail(t)}else{this.then(e,t)}return this};this.catch=function(e){this.then(undefined,e);return this};this.toString=function(){return[this._index.level||0,this._index.y,this._index.x].join("_")};this.bounds=function(e,t){var n,r,i,a;n=this.size.x*(this.index.x-e.x)-this.overlap.x-t.x;r=n+this.size.x+this.overlap.x*2;a=this.size.y*(this.index.y-e.y)-this.overlap.y-t.y;i=a+this.size.y+this.overlap.y*2;if(this.overlap.x&&this.index.x===e.x){n+=this.overlap.x}if(this.overlap.y&&this.index.y===e.y){a+=this.overlap.y}return{left:n,right:r,bottom:i,top:a}};Object.defineProperty(this,"bottom",{get:function e(){return this.size.y*(this.index.y+1)+this.overlap.y}});Object.defineProperty(this,"top",{get:function e(){return this.size.y*this.index.y-(this.index.y?this.overlap.y:0)}});Object.defineProperty(this,"left",{get:function e(){return this.size.x*this.index.x-(this.index.x?this.overlap.x:0)}});Object.defineProperty(this,"right",{get:function e(){return this.size.x*(this.index.x+1)+this.overlap.x}});this.fadeIn=function(e){r.noop(e);return this}};e.exports=i},function(e,t,n){"use strict";var r=n(1);var i=n(148);var a=n(2);var o=n(5);var s={17:[{l0:1,h0:2,l1:0,h1:2}],18:[{l0:0,h0:1,l1:2,h1:1}],20:[{l0:2,h0:0,l1:1,h1:0}],22:[{l0:2,h0:0,l1:2,h1:1}],21:[{l0:1,h0:2,l1:1,h1:0}],19:[{l0:0,h0:1,l1:0,h1:2}],1:[{l0:2,h0:3,l1:1,h1:3}],2:[{l0:0,h0:2,l1:3,h1:2}],4:[{l0:3,h0:1,l1:0,h1:1}],8:[{l0:1,h0:0,l1:2,h1:0}],14:[{l0:3,h0:1,l1:3,h1:2}],13:[{l0:2,h0:3,l1:2,h1:0}],11:[{l0:1,h0:0,l1:1,h1:3}],7:[{l0:0,h0:2,l1:0,h1:1}],3:[{l0:0,h0:2,l1:1,h1:3}],10:[{l0:1,h0:0,l1:3,h1:2}],12:[{l0:3,h0:1,l1:2,h1:0}],5:[{l0:2,h0:3,l1:0,h1:1}],6:[{l0:0,h0:2,l1:0,h1:1},{l0:3,h0:1,l1:3,h1:2}],9:[{l0:1,h0:0,l1:1,h1:3},{l0:2,h0:3,l1:2,h1:0}]};var u=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}var r=n(3);var u=n(17);var l=n(11);var c=n(80);t=t||{};i.call(this,t);var f=this,d,p,h,g,m,v=this.draw,y=this._exit,b=this._init,M=this.modified,x=this._update;this.featureType="isoline";this.contour=f.mesh;this.isoline=f.mesh;this._createIsolines=function(){var e=f.style.get("value"),t=f.style("used")!==undefined?f.style.get("used"):function(t,n){return o.isNonNullFinite(e(t,n))},n,r=false,i=[];var a=f._createMesh({used:t,value:e});n=f._getValueList(a);if(!n.length){return{}}n.forEach(function(e){var t=f._isolinesForValue(a,e);if(t.length){i=i.concat(t);r=r||!!e.label}});return{lines:i,mesh:a,values:n,hasLabels:r}};this._getValueList=function(e){var t=f.isoline,n=t.get("values")(e),r=t.get("spacing")(e),i=t.get("count")(e),a=t.get("autofit")(e),s=t.get("levels")(e),u,l,c,d,p,h,g;if(!e.numVertices||!e.numElements){return[]}u=o.getMinMaxValues(e.value,t.get("min")(e),t.get("max")(e),true);e.minValue=u.min;e.maxValue=u.max;l=e.maxValue-e.minValue;if(l<=0){return[]}if(Array.isArray(n)){n=n.map(function(e,t){return{value:e.value!==undefined?e.value:e,position:t,level:e.level}});n=n.filter(function(t){return t.value>=e.minValue&&t.value<=e.maxValue})}else if(!r&&!a){n=Array(i);for(g=0;g<i;g+=1){n[g]={value:e.minValue+l*(g+1)/(i+1),position:g+1}}}else{if(!r){c=l/(i*2/3);p=Math.floor(Math.log10(c));h=Math.max(0,-p);d=Math.pow(10,p);c/=d;c=c>=5?5:c>=2?2:1;r=c*d}n=[];for(g=Math.ceil(e.minValue/r);g<=Math.floor(e.maxValue/r);g+=1){n.push({value:g*r,position:g,fixedDigits:h})}}if(s.length){n.forEach(function(e,n){if(e.level===undefined){e.level=0;for(var r=0,i=s[0];r<s.length&&!(e.position%i);r+=1,i*=s[r]){e.level=r+1}}if(t.get("label")(e,e.position)){var a=t.get("labelText")(e,e.position);if(a===undefined){if(e.fixedDigits!==undefined){a=""+parseFloat(e.value.toFixed(e.fixedDigits))}else{a=""+e.value}}if(a){e.label=a}}})}return n};this._addSegment=function(e,t,n){var r=[t,n],i=e.length,a,o,s,u,l,c;e.push(r);for(o=0;o<2;o+=1){for(a=i-1;a>=0;a-=1){s=e[a];u=s[0];l=s[s.length-1];if(n[0]===u[0]&&n[1]===u[1]){c=r.concat(s.slice(1))}else if(t[0]===l[0]&&t[1]===l[1]){c=s.concat(r.slice(1))}else{continue}e.splice(i,1);e[a]=r=c;i=a;t=r[0];n=r[r.length-1];break}if(a<0){break}}return e};this._chainVertex=function(e,t,n){var r=n[0],i=n[1],a=r*3,o=i*3,s=(t.value-e.value[r])/(e.value[i]-e.value[r]),u=1-s;return{x:e.pos[a]*u+e.pos[o]*s,y:e.pos[a+1]*u+e.pos[o+1]*s,z:e.pos[a+2]*u+e.pos[o+2]*s}};this._isolinesForValue=function(e,t){var n=t.value,r=Array(e.value.length),i=[],a,o,u,l;for(a=r.length-1;a>=0;a-=1){r[a]=e.value[a]<=n?0:1}var c=e.verticesPerElement,d=e.shape==="square",p=e.elements,h=p.length;for(o=0;o<h;o+=c){if(d){u=r[p[o]]*8+r[p[o+1]]*4+r[p[o+2]]*2+r[p[o+3]];if(u===0||u===15){continue}}else{u=16+r[p[o]]*4+r[p[o+1]]*2+r[p[o+2]];if(u===16||u===23){continue}}s[u].forEach(function(e){i=f._addSegment(i,[p[o+e.l0],p[o+e.h0]],[p[o+e.l1],p[o+e.h1]])})}l=i.map(function(n){var r=[];n.forEach(function(n){var i=f._chainVertex(e,t,n);if(!r.length||i.x!==r[r.length-1].x||i.y!==r[r.length-1].y){r.push(i)}});r.closed=r[0].x===r[r.length-1].x&&r[0].y===r[r.length-1].y;r.value=t.value;r.level=t.level;r.position=t.position;r.label=t.label;return r}).filter(function(e){return e.length>1});return l};this.modified=function(){var e=M();if(h){h.modified()}if(m){m.modified()}return e};this.labelPositions=function(){if(f.dataTime().timestamp()>=f.buildTime().timestamp()){f._build()}p=null;if(!m){return f}if(!d||!d.hasLabels||!d.lines||!d.lines.length){m.data([]);return f}var e=f.isoline,t=e.get("labelSpacing"),n=e.get("labelOffset"),r=e.get("labelViewport")(d.mesh),i=f.gcs(),a=f.layer().map(),s=a.gcs(),l=a.rotation(),c=a.size(),h=[],g=0;d.lines.forEach(function(e,f){if(!e.label){return}var d=t(e.value,e.value.position),p=n(e.value,e.value.position)||0,m=a.gcsToDisplay(e,i),v=0,y,b,M,x,w,A,T,C,S,D,I;if(d<=0||isNaN(d)){return}g=Math.max(d,g);p=p+.5-Math.floor(p+.5);y=m.map(function(t,n){if(!e.closed&&n+1===m.length){return 0}var r=Math.sqrt(o.distance2dSquared(t,m[n+1<m.length?n+1:0]));v+=r;return r});b=Math.floor(v/d);if(!b){return}I=u.transformCoordinates(i,s,e);M=v/b;x=M*p;w=0;for(A=0;A<m.length;A+=1){while(w+y[A]>=x){T=A+1===m.length?0:A+1;C=(x-w)/y[A];S=1-C;x+=M;if(r>0){D={x:m[A].x*S+m[T].x*C,y:m[A].y*S+m[T].y*C};if(D.x<-r||D.x>c.width+r||D.y<-r||D.y>c.height+r){continue}}h.push({x:I[A].x*S+I[T].x*C,y:I[A].y*S+I[T].y*C,z:I[A].z*S+I[T].z*C,line:e,rotation:Math.atan2(m[A].y-m[T].y,m[A].x-m[T].x)-l})}w+=y[A]}});m.gcs(s);m.data(h);m.style("renderThreshold",g*2);p={zoom:a.zoom(),center:a.center(),rotation:l,size:c,labelViewport:r,maxSpacing:g,labelAutoUpdate:e.get("labelAutoUpdate")(d.mesh)};return f};this.lastLabelPositions=function(){return r.extend({},p)};this._updateLabelPositions=function(){var e=p;if(!e||!e.labelAutoUpdate){return f}var t=f.layer().map(),n=t.zoom(),r=t.size(),i=!!(Math.abs(n-e.zoom)>=2);if(!i&&e.labelViewport>0){var a=Math.sqrt(o.distance2dSquared(t.gcsToDisplay(t.center()),t.gcsToDisplay(e.center)))*Math.pow(2,e.zoom-n);var s=e.labelViewport/2-e.maxSpacing*2-Math.max(r.width-e.size.width,r.height-e.size.height,0);i=i||a>=s}if(i){f.labelPositions().draw()}return f};this._build=function(){d=f._createIsolines();if(d&&d.lines&&d.lines.length){if(!h){h=f.layer().createFeature("line",{selectionAPI:false,gcs:f.gcs(),visible:f.visible(undefined,true),style:{closed:function e(t){return t.closed}}});f.dependentFeatures([h])}var e=f.style();h.data(d.lines).style({antialiasing:e.antialiasing,lineCap:e.lineCap,lineJoin:e.lineJoin,miterLimit:e.miterLimit,strokeWidth:e.strokeWidth,strokeStyle:e.strokeStyle,strokeColor:e.strokeColor,strokeOffset:e.strokeOffset,strokeOpacity:e.strokeOpacity});if(d.hasLabels){if(!m){if(!(a.registries.features[f.layer().rendererName()]||{}).text){var t=a.rendererForFeatures(["text"]);g=a.createLayer("feature",f.layer().map(),{renderer:t});f.layer().addChild(g);f.layer().node().append(g.node())}m=(g||f.layer()).createFeature("text",{selectionAPI:false,gcs:f.gcs(),visible:f.visible(undefined,true),style:{text:function e(t){return t.line.label}}}).geoOn(l.pan,f._updateLabelPositions)}c.usedStyles.forEach(function(t){if(t!=="visible"){m.style(t,e[t])}});f.dependentFeatures([h,m])}}else if(h){h.data([])}f.buildTime().modified();f.labelPositions();return f};this._update=function(){x.call(f);if(f.dataTime().timestamp()>=f.buildTime().timestamp()||f.updateTime().timestamp()<=f.timestamp()){f._build()}f.updateTime().modified();return f};this.draw=function(){var e=v();if(h){h.draw()}if(m){m.draw()}return e};this._exit=function(){if(m){if(g||f.layer()){(g||f.layer()).deleteFeature(m)}if(g&&f.layer()){f.layer().removeChild(g)}}if(h&&f.layer()){f.layer().deleteFeature(h)}m=null;g=null;h=null;f.dependentFeatures([]);y()};this._init=function(t){t=t||{};b.call(f,t);var n=r.extend({},{opacity:1,value:function e(t,n){return f.position()(t,n).z},rotateWithMap:true,rotation:e.rotationFunction(),strokeWidth:function e(t,n,r,i){return r.level+.5},strokeColor:{r:0,g:0,b:0},textStrokeColor:{r:1,g:1,b:1,a:.75},textStrokeWidth:2,fontSize:"12px"},t.style===undefined?{}:t.style);f.style(n);f.isoline(r.extend({},{count:15,autofit:true,levels:[5,5],label:function e(t){return t.level>=1},labelSpacing:200,labelViewport:1e4,labelAutoUpdate:true},t.mesh||{},t.contour||{},t.isoline||{}));if(t.mesh||t.contour||t.isoline){f.dataTime().modified()}};return this};u.rotationFunction=function(e,t){var n={higher:function e(t){return t.rotation},lower:function e(t){return t.rotation+Math.PI},map:function e(t){var n=t.rotation,r=o.wrapAngle(n,true);if(r>Math.PI/2||r<-Math.PI/2){n+=Math.PI}return n},screen:function e(n){var r=n.rotation,i=o.wrapAngle(r+t.rotation(),true);if(i>Math.PI/2||i<-Math.PI/2){r+=Math.PI}return r}};return n[e]||n.higher};r(u,i);e.exports=u},function(e,t,n){"use strict";var r=n(1);var i=n(78);var a=n(3);var o=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}t=t||{};i.call(this,t);var r=n(11);var o=this,s=this._exit,u=t.layer,l=null,c=t.position===undefined?{left:0,top:0}:t.position;if(t.parent!==undefined&&!(t.parent instanceof e)){throw new Error("Parent must be of type geo.gui.widget")}else if(t.parent){o.parent(t.parent)}this._init=function(){o.modified();return o};this._exit=function(){o.children().forEach(function(e){o.removeChild(e);e._exit()});o.layer().geoOff(r.pan,o.repositionEvent);if(o.parentCanvas().removeChild&&o.canvas()){try{o.parentCanvas().removeChild(o.canvas())}catch(e){}}s()};this.layer=function(){return u||o.parent()&&o.parent().layer()};this._createCanvas=function(){throw new Error("Must be defined in derived classes")};this.canvas=function(e){if(e===undefined){return l}l=e;return o};this._appendCanvasToParent=function(){o.parentCanvas().appendChild(o.canvas())};this.parentCanvas=function(){if(!o.parent()){return o.layer().canvas()}return o.parent().canvas()};this.position=function(e,t){if(e!==undefined){o.layer().geoOff(r.pan,o.repositionEvent);var n={};for(var i in c){if(c.hasOwnProperty(i)){n[i]=null}}c=e;if(c.hasOwnProperty("x")&&c.hasOwnProperty("y")){o.layer().geoOn(r.pan,o.repositionEvent)}o.reposition(a.extend(n,o.position()));return o}if(c.hasOwnProperty("x")&&c.hasOwnProperty("y")&&!t){var s=o.layer().map().gcsToDisplay(c);return{left:s.x,top:s.y,right:null,bottom:null}}return c};this.reposition=function(e){e=e||o.position();if(o.canvas()&&o.canvas().style){o.canvas().style.position="absolute";for(var t in e){if(e.hasOwnProperty(t)){if(/^\s*(-|\+)?(\d+(\.\d*)?|\d*\.\d+)([eE](-|\+)?\d+)?\s*$/.test(e[t])){o.canvas().style[t]=parseFloat(parseFloat(e[t]).toFixed(3))+"px"}else{o.canvas().style[t]=e[t]}}}}return o};this.repositionEvent=function(){return o.reposition()};this.isInViewport=function(){var e=o.position();var t=o.layer();return e.left>=0&&e.top>=0&&e.left<=t.width()&&e.top<=t.height()};if(c.hasOwnProperty("x")&&c.hasOwnProperty("y")){this.layer().geoOn(r.pan,o.repositionEvent)}};r(o,i);e.exports=o},function(e,t,n){e.exports=!n(14)&&!n(8)(function(){return Object.defineProperty(n(108)("div"),"a",{get:function(){return 7}}).a!=7})},function(e,t,n){t.f=n(10)},function(e,t,n){var r=n(24);var i=n(25);var a=n(82)(false);var o=n(110)("IE_PROTO");e.exports=function(e,t){var n=i(e);var s=0;var u=[];var l;for(l in n)if(l!=o)r(n,l)&&u.push(l);while(t.length>s)if(r(n,l=t[s++])){~a(u,l)||u.push(l)}return u}},function(e,t,n){var r=n(15);var i=n(4);var a=n(47);e.exports=n(14)?Object.defineProperties:function e(t,n){i(t);var o=a(n);var s=o.length;var u=0;var l;while(s>u)r.f(t,l=o[u++],n[l]);return t}},function(e,t,n){var r=n(25);var i=n(50).f;var a={}.toString;var o=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];var s=function(e){try{return i(e)}catch(e){return o.slice()}};e.exports.f=function e(t){return o&&a.call(t)=="[object Window]"?s(t):i(r(t))}},function(e,t,n){"use strict";var r=n(14);var i=n(47);var a=n(83);var o=n(70);var s=n(16);var u=n(69);var l=Object.assign;e.exports=!l||n(8)(function(){var e={};var t={};var n=Symbol();var r="abcdefghijklmnopqrst";e[n]=7;r.split("").forEach(function(e){t[e]=e});return l({},e)[n]!=7||Object.keys(l({},t)).join("")!=r})?function e(t,n){var l=s(t);var c=arguments.length;var f=1;var d=a.f;var p=o.f;while(c>f){var h=u(arguments[f++]);var g=d?i(h).concat(d(h)):i(h);var m=g.length;var v=0;var y;while(m>v){y=g[v++];if(!r||p.call(h,y))l[y]=h[y]}}return l}:l},function(e,t){e.exports=Object.is||function e(t,n){return t===n?t!==0||1/t===1/n:t!=t&&n!=n}},function(e,t,n){"use strict";var r=n(18);var i=n(9);var a=n(160);var o=[].slice;var s={};var u=function(e,t,n){if(!(t in s)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";s[t]=Function("F,a","return new F("+r.join(",")+")")}return s[t](e,n)};e.exports=Function.bind||function e(t){var n=r(this);var s=o.call(arguments,1);var l=function(){var e=s.concat(o.call(arguments));return this instanceof l?u(n,e.length,e):a(n,e,t)};if(i(n.prototype))l.prototype=n.prototype;return l}},function(e,t){e.exports=function(e,t,n){var r=n===undefined;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(6).parseInt;var i=n(62).trim;var a=n(114);var o=/^[-+]?0[xX]/;e.exports=r(a+"08")!==8||r(a+"0x16")!==22?function e(t,n){var a=i(String(t),3);return r(a,n>>>0||(o.test(a)?16:10))}:r},function(e,t,n){var r=n(6).parseFloat;var i=n(62).trim;e.exports=1/r(n(114)+"-0")!==-Infinity?function e(t){var n=i(String(t),3);var a=r(n);return a===0&&n.charAt(0)=="-"?-0:a}:r},function(e,t,n){var r=n(30);e.exports=function(e,t){if(typeof e!="number"&&r(e)!="Number")throw TypeError(t);return+e}},function(e,t,n){var r=n(9);var i=Math.floor;e.exports=function e(t){return!r(t)&&isFinite(t)&&i(t)===t}},function(e,t){e.exports=Math.log1p||function e(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(e,t,n){var r=n(117);var i=Math.pow;var a=i(2,-52);var o=i(2,-23);var s=i(2,127)*(2-o);var u=i(2,-126);var l=function(e){return e+1/a-1/a};e.exports=Math.fround||function e(t){var n=Math.abs(t);var i=r(t);var c,f;if(n<u)return i*l(n/u/o)*u*o;c=(1+o/a)*n;f=c-(c-n);if(f>s||f!=f)return i*Infinity;return i*f}},function(e,t,n){var r=n(4);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var a=e["return"];if(a!==undefined)r(a.call(e));throw t}}},function(e,t,n){var r=n(18);var i=n(16);var a=n(69);var o=n(13);e.exports=function(e,t,n,s,u){r(t);var l=i(e);var c=a(l);var f=o(l.length);var d=u?f-1:0;var p=u?-1:1;if(n<2)for(;;){if(d in c){s=c[d];d+=p;break}d+=p;if(u?d<0:f<=d){throw TypeError("Reduce of empty array with no initial value")}}for(;u?d>=0:f>d;d+=p)if(d in c){s=t(s,c[d],d,l)}return s}},function(e,t,n){"use strict";var r=n(16);var i=n(48);var a=n(13);e.exports=[].copyWithin||function e(t,n){var o=r(this);var s=a(o.length);var u=i(t,s);var l=i(n,s);var c=arguments.length>2?arguments[2]:undefined;var f=Math.min((c===undefined?s:i(c,s))-l,s-u);var d=1;if(l<u&&u<l+f){d=-1;l+=f-1;u+=f-1}while(f-- >0){if(l in o)o[u]=o[l];else delete o[u];u+=d;l+=d}return o}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";var r=n(129);n(0)({target:"RegExp",proto:true,forced:r!==/./.exec},{exec:r})},function(e,t,n){if(n(14)&&/./g.flags!="g")n(15).f(RegExp.prototype,"flags",{configurable:true,get:n(71)})},function(e,t){e.exports=function(e){try{return{e:false,v:e()}}catch(e){return{e:true,v:e}}}},function(e,t,n){var r=n(4);var i=n(9);var a=n(133);e.exports=function(e,t){r(e);if(i(t)&&t.constructor===e)return t;var n=a.f(e);var o=n.resolve;o(t);return n.promise}},function(e,t,n){"use strict";var r=n(176);var i=n(55);var a="Map";e.exports=n(91)(a,function(e){return function t(){return e(this,arguments.length>0?arguments[0]:undefined)}},{get:function e(t){var n=r.getEntry(i(this,a),t);return n&&n.v},set:function e(t,n){return r.def(i(this,a),t===0?0:t,n)}},r,true)},function(e,t,n){"use strict";var r=n(15).f;var i=n(49);var a=n(54);var o=n(29);var s=n(52);var u=n(53);var l=n(119);var c=n(170);var f=n(51);var d=n(14);var p=n(43).fastKey;var h=n(55);var g=d?"_s":"size";var m=function(e,t){var n=p(t);var r;if(n!=="F")return e._i[n];for(r=e._f;r;r=r.n){if(r.k==t)return r}};e.exports={getConstructor:function(e,t,n,l){var c=e(function(e,r){s(e,c,t,"_i");e._t=t;e._i=i(null);e._f=undefined;e._l=undefined;e[g]=0;if(r!=undefined)u(r,n,e[l],e)});a(c.prototype,{clear:function e(){for(var n=h(this,t),r=n._i,i=n._f;i;i=i.n){i.r=true;if(i.p)i.p=i.p.n=undefined;delete r[i.i]}n._f=n._l=undefined;n[g]=0},delete:function(e){var n=h(this,t);var r=m(n,e);if(r){var i=r.n;var a=r.p;delete n._i[r.i];r.r=true;if(a)a.n=i;if(i)i.p=a;if(n._f==r)n._f=i;if(n._l==r)n._l=a;n[g]--}return!!r},forEach:function e(n){h(this,t);var r=o(n,arguments.length>1?arguments[1]:undefined,3);var i;while(i=i?i.n:this._f){r(i.v,i.k,this);while(i&&i.r)i=i.p}},has:function e(n){return!!m(h(this,t),n)}});if(d)r(c.prototype,"size",{get:function(){return h(this,t)[g]}});return c},def:function(e,t,n){var r=m(e,t);var i,a;if(r){r.v=n}else{e._l=r={i:a=p(t,true),k:t,v:n,p:i=e._l,n:undefined,r:false};if(!e._f)e._f=r;if(i)i.n=r;e[g]++;if(a!=="F")e._i[a]=r}return e},getEntry:m,setStrong:function(e,t,n){l(e,t,function(e,n){this._t=h(e,t);this._k=n;this._l=undefined},function(){var e=this;var t=e._k;var n=e._l;while(n&&n.r)n=n.p;if(!e._t||!(e._l=n=n?n.n:e._t._f)){e._t=undefined;return c(1)}if(t=="keys")return c(0,n.k);if(t=="values")return c(0,n.v);return c(0,[n.k,n.v])},n?"entries":"values",!n,true);f(t)}}},function(e,t,n){"use strict";var r=n(176);var i=n(55);var a="Set";e.exports=n(91)(a,function(e){return function t(){return e(this,arguments.length>0?arguments[0]:undefined)}},{add:function e(t){return r.def(i(this,a),t=t===0?0:t,t)}},r)},function(e,t,n){"use strict";var r=n(6);var i=n(37)(0);var a=n(22);var o=n(43);var s=n(157);var u=n(179);var l=n(9);var c=n(55);var f=n(55);var d=!r.ActiveXObject&&"ActiveXObject"in r;var p="WeakMap";var h=o.getWeak;var g=Object.isExtensible;var m=u.ufstore;var v;var y=function(e){return function t(){return e(this,arguments.length>0?arguments[0]:undefined)}};var b={get:function e(t){if(l(t)){var n=h(t);if(n===true)return m(c(this,p)).get(t);return n?n[this._i]:undefined}},set:function e(t,n){return u.def(c(this,p),t,n)}};var M=e.exports=n(91)(p,y,b,u,true,true);if(f&&d){v=u.getConstructor(y,p);s(v.prototype,b);o.NEED=true;i(["delete","has","get","set"],function(e){var t=M.prototype;var n=t[e];a(t,e,function(t,r){if(l(t)&&!g(t)){if(!this._f)this._f=new v;var i=this._f[e](t,r);return e=="set"?this:i}return n.call(this,t,r)})})}},function(e,t,n){"use strict";var r=n(54);var i=n(43).getWeak;var a=n(4);var o=n(9);var s=n(52);var u=n(53);var l=n(37);var c=n(24);var f=n(55);var d=l(5);var p=l(6);var h=0;var g=function(e){return e._l||(e._l=new m)};var m=function(){this.a=[]};var v=function(e,t){return d(e.a,function(e){return e[0]===t})};m.prototype={get:function(e){var t=v(this,e);if(t)return t[1]},has:function(e){return!!v(this,e)},set:function(e,t){var n=v(this,e);if(n)n[1]=t;else this.a.push([e,t])},delete:function(e){var t=p(this.a,function(t){return t[0]===e});if(~t)this.a.splice(t,1);return!!~t}};e.exports={getConstructor:function(e,t,n,a){var l=e(function(e,r){s(e,l,t,"_i");e._t=t;e._i=h++;e._l=undefined;if(r!=undefined)u(r,n,e[a],e)});r(l.prototype,{delete:function(e){if(!o(e))return false;var n=i(e);if(n===true)return g(f(this,t))["delete"](e);return n&&c(n,this._i)&&delete n[this._i]},has:function e(n){if(!o(n))return false;var r=i(n);if(r===true)return g(f(this,t)).has(n);return r&&c(r,this._i)}});return l},def:function(e,t,n){var r=i(a(t),true);if(r===true)g(e).set(t,n);else r[e._i]=n;return e},ufstore:g}},function(e,t,n){var r=n(31);var i=n(13);e.exports=function(e){if(e===undefined)return 0;var t=r(e);var n=i(t);if(t!==n)throw RangeError("Wrong length!");return n}},function(e,t,n){var r=n(50);var i=n(83);var a=n(4);var o=n(6).Reflect;e.exports=o&&o.ownKeys||function e(t){var n=r.f(a(t));var o=i.f;return o?n.concat(o(t)):n}},function(e,t,n){"use strict";var r=n(84);var i=n(9);var a=n(13);var o=n(29);var s=n(10)("isConcatSpreadable");function u(e,t,n,l,c,f,d,p){var h=c;var g=0;var m=d?o(d,p,3):false;var v,y;while(g<l){if(g in n){v=m?m(n[g],g,t):n[g];y=false;if(i(v)){y=v[s];y=y!==undefined?!!y:r(v)}if(y&&f>0){h=u(e,t,v,a(v.length),h,f-1)-1}else{if(h>=9007199254740991)throw TypeError();e[h]=v}h++}g++}return h}e.exports=u},function(e,t,n){var r=n(13);var i=n(116);var a=n(35);e.exports=function(e,t,n,o){var s=String(a(e));var u=s.length;var l=n===undefined?" ":String(n);var c=r(t);if(c<=u||l=="")return s;var f=c-u;var d=i.call(l,Math.ceil(f/l.length));if(d.length>f)d=d.slice(0,f);return o?d+s:s+d}},function(e,t,n){var r=n(14);var i=n(47);var a=n(25);var o=n(70).f;e.exports=function(e){return function(t){var n=a(t);var s=i(n);var u=s.length;var l=0;var c=[];var f;while(u>l){f=s[l++];if(!r||o.call(n,f)){c.push(e?[f,n[f]]:n[f])}}return c}}},function(e,t,n){var r=n(61);var i=n(186);e.exports=function(e){return function t(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},function(e,t,n){var r=n(53);e.exports=function(e,t){var n=[];r(e,false,n.push,n,t);return n}},function(e,t){e.exports=Math.scale||function e(t,n,r,i,a){if(arguments.length===0||t!=t||n!=n||r!=r||i!=i||a!=a)return NaN;if(t===Infinity||t===-Infinity)return t;return(t-n)*(a-i)/(r-n)+i}},function(e,t,n){"use strict";var r=n(3);var i=n(1);var a=n(11);var o=n(137);var s=n(17);var u=n(5);var l=n(2).registerAnnotation;var c=n(77);var f=n(57);var d=n(145);var p=n(80);var h=0;var g={create:"create",done:"done",highlight:"highlight",edit:"edit"};var m="annotationAction";var v={fill:true,fillColor:function e(t){return t.selected?{r:0,g:1,b:1}:{r:.3,g:.3,b:.3}},fillOpacity:function e(t){return t.selected?.5:.25},radius:function e(t){return t.type==="edge"||t.type==="rotate"?8:10},scaled:false,stroke:true,strokeColor:{r:0,g:0,b:1},strokeOpacity:1,strokeWidth:function e(t){return t.type==="edge"||t.type==="rotate"?2:3},rotateHandleOffset:24,rotateHandleRotation:-Math.PI/4,resizeHandleOffset:48,resizeHandleRotation:-Math.PI/4,handles:{vertex:true,edge:true,center:true,rotate:true,resize:true}};var y=3;var b=function e(t,n){"use strict";if(!(this instanceof e)){return new e(t,n)}var i=this,l=r.extend({},{showLabel:true},n||{}),c=l.annotationId;delete l.annotationId;if(c===undefined||l.layer&&l.layer.annotationById(c)){h+=1;if(c!==undefined){console.warn("Annotation id "+c+" is in use; using "+h+" instead.")}c=h}else{if(c>h){h=c}}var f=l.name||t.charAt(0).toUpperCase()+t.substr(1)+" "+c,d=l.label||null,b=l.description||undefined,M=t,x=l.layer,w=l.state||g.done;delete l.state;delete l.layer;delete l.name;delete l.label;delete l.description;this._exit=function(){};this.id=function(){return c};this.name=function(e){if(e===undefined){return f}if(e!==null&&(""+e).trim()){e=(""+e).trim();if(e!==f){f=e;i.modified()}}return i};this.label=function(e,t){if(e===undefined){return d===null&&!t?f:d}if(e!==d){d=e;i.modified()}return i};this._labelPosition=function(){return u.centerFromPerimeter(i._coordinates())};this._rotateHandlePosition=function(e,t){var n=i.layer().map(),r=i._coordinates(),a=u.centerFromPerimeter(i._coordinates()),o=a?n.gcsToDisplay(a,null):undefined,s,l,c=0,f;if(!a){return}e=e||0;t=t||0;for(s=0;s<r.length;s+=1){l=n.gcsToDisplay(r[s],null);c=Math.max(c,Math.pow(l.x-o.x,2)+Math.pow(l.y-o.y,2))}f=Math.sqrt(c)+e;l=n.displayToGcs({x:o.x+f*Math.cos(t),y:o.y-f*Math.sin(t)},null);return l};this.labelRecord=function(){var e=i.options("showLabel");if(!e){return}var t=i.state();if(e===true&&t===g.create||e!==true&&e.indexOf(t)<0){return}var n=i.labelStyle();var r={text:i.label(),position:i._labelPosition()};if(!r.position){return}if(n){r.style=n}return r};this.description=function(e){if(e===undefined){return b}if(e!==b){b=e;i.modified()}return i};this.layer=function(e){if(e===undefined){return x}x=e;return i};this.state=function(e){if(e===undefined){return w}if(w!==e){w=e;if(i.layer()){i.layer().geoTrigger(a.annotation.state,{annotation:i})}}return i};this.actions=function(e){if(!e){e=i.state()}switch(e){case g.edit:return[{action:o.annotation_edit_handle,name:"annotation edit",owner:m,input:"left"},{action:o.annotation_edit_handle,name:"annotation edit",owner:m,input:"pan"}];default:return[]}};this.processAction=function(){return undefined};this.processEditAction=function(e){if(!e||!i._editHandle||!i._editHandle.handle){return}switch(i._editHandle.handle.type){case"vertex":return i._processEditActionVertex(e);case"edge":return i._processEditActionEdge(e);case"center":return i._processEditActionCenter(e);case"rotate":return i._processEditActionRotate(e);case"resize":return i._processEditActionResize(e)}};this.selectEditHandle=function(e,t){if(t&&i._editHandle&&i._editHandle.handle&&i._editHandle.handle.selected){i._editHandle.handle.selected=false}e.selected=t;var n=(i._editHandle||{}).amountRotated||0;i._editHandle={handle:e,startCoordinates:i._coordinates().slice(),center:u.centerFromPerimeter(i._coordinates()),rotatePosition:i._rotateHandlePosition(e.style.rotateHandleOffset,e.style.rotateHandleRotation+n),startAmountRotated:n,amountRotated:n,resizePosition:i._rotateHandlePosition(e.style.resizeHandleOffset,e.style.resizeHandleRotation)};if(i.layer()){i.layer().geoTrigger(a.annotation.select_edit_handle,{annotation:i,handle:i._editHandle,enable:t})}return i};this.options=function(e,t){if(e===undefined){return l}if(typeof e==="string"&&t===undefined){return l[e]}var n;if(t===undefined){n=e[i._coordinateOption]!==undefined;l=r.extend(true,l,e);["style","createStyle","editStyle","editHandleStyle","labelStyle","highlightStyle"].forEach(function(t){if(e[t]!==undefined){r.extend(l[t],e[t])}})}else{n=e===i._coordinateOption;l[e]=t}if(l.coordinates){var o=l.coordinates;delete l.coordinates;i._coordinates(o)}if(l.name!==undefined){var s=l.name;delete l.name;i.name(s)}if(l.label!==undefined){var u=l.label;delete l.label;i.label(u)}if(l.description!==undefined){var c=l.description;delete l.description;i.description(c)}i.modified();if(n&&i.layer()){i.layer().geoTrigger(a.annotation.coordinates,{annotation:i})}return i};this.style=function(e,t,n){n=n||"style";if(e===undefined){return l[n]}if(typeof e==="string"&&t===undefined){return(l[n]||{})[e]}if(l[n]===undefined){l[n]={}}if(t===undefined){l[n]=r.extend(true,l[n],e)}else{l[n][e]=t}i.modified();return i};["createStyle","editStyle","editHandleStyle","labelStyle","highlightStyle"].forEach(function(e){i[e]=function(t,n){return i.style(t,n,e)}});this.styleForState=function(e){e=e||i.state();if(e===g.edit||e===g.highlight){return r.extend({},l.style,l[e+"Style"])}if(e===g.create){return r.extend({},l.style,l.editStyle,l[e+"Style"])}return l[e+"Style"]||l.style||{}};this.type=function(){return M};this.features=function(){return[]};this.mouseClick=function(e){return undefined};this.mouseClickEdit=function(e){return undefined};this.mouseMove=function(e){return undefined};this._coordinates=function(e){return[]};this._coordinateOption="vertices";this.coordinates=function(e){var t=i._coordinates()||[];if(i.layer()){var n=i.layer().map();e=e===null?n.gcs():e===undefined?n.ingcs():e;if(e!==n.gcs()){t=s.transformCoordinates(n.gcs(),e,t)}}return t};this.modified=function(){if(i.layer()){i.layer().modified()}return i};this.draw=function(){if(i.layer()){i.layer()._update();i.layer().draw()}return i};this._geojsonStyles=function(){return["closed","fill","fillColor","fillOpacity","lineCap","lineJoin","radius","stroke","strokeColor","strokeOffset","strokeOpacity","strokeWidth"]};this._geojsonCoordinates=function(e){return[]};this._geojsonGeometryType=function(){return""};this.geojson=function(e,t){var n=i._geojsonCoordinates(e),r=i._geojsonGeometryType(),a=i._geojsonStyles(),o=i.options("style")||{},s=i.labelStyle()||{},l,c,f;if(!n||!n.length||!r){return}var h={type:"Feature",geometry:{type:r,coordinates:n},properties:{annotationType:M,name:i.name(),annotationId:i.id()}};if(d){h.properties.label=d}if(b){h.properties.description=b}if(i.options("showLabel")===false){h.properties.showLabel=i.options("showLabel")}for(l=0;l<a.length;l+=1){c=a[l];f=u.ensureFunction(o[c])();if(f!==undefined){if(c.toLowerCase().match(/color$/)){f=u.convertColorToHex(f,"needed")}h.properties[c]=f}}for(l=0;l<p.usedStyles.length;l+=1){c=p.usedStyles[l];f=u.ensureFunction(s[c])();if(f!==undefined){if(c.toLowerCase().match(/color$/)){f=u.convertColorToHex(f,"needed")}h.properties["label"+c.charAt(0).toUpperCase()+c.slice(1)]=f}}if(t){var g=i.layer().map();e=e===null?g.gcs():e===undefined?g.ingcs():e;h.crs={type:"name",properties:{type:"proj4",name:e}}}return h};this._addEditHandles=function(e,t,n,a){var o,s=r.extend({},v,i.editHandleStyle()),l=u.ensureFunction(s.handles)()||{},c=i._editHandle&&i._editHandle.handle&&i._editHandle.handle.selected?i._editHandle.handle:undefined;n=r.extend({},n);Object.keys(l).forEach(function(e){if(l[e]===false){n[e]=false}});if(!e[y]){e[y]={point:[]}}o=e[y].point;t.forEach(function(e,i){if(n.vertex!==false){o.push(r.extend({},e,{type:"vertex",index:i,style:s,editHandle:true}))}if(n.edge!==false&&i!==t.length-1&&(e.x!==t[i+1].x||e.y!==t[i+1].y)){o.push(r.extend({x:(e.x+t[i+1].x)/2,y:(e.y+t[i+1].y)/2},{type:"edge",index:i,style:s,editHandle:true}))}if(n.edge!==false&&!a&&i===t.length-1&&(e.x!==t[0].x||e.y!==t[0].y)){o.push(r.extend({x:(e.x+t[0].x)/2,y:(e.y+t[0].y)/2},{type:"edge",index:i,style:s,editHandle:true}))}});if(n.center!==false){o.push(r.extend({},u.centerFromPerimeter(i._coordinates()),{type:"center",style:s,editHandle:true}))}if(n.rotate!==false){o.push(r.extend(i._rotateHandlePosition(s.rotateHandleOffset,s.rotateHandleRotation+(c&&c.type==="rotate"?i._editHandle.amountRotated:0)),{type:"rotate",style:s,editHandle:true}));if(i._editHandle&&(!c||c.type!=="rotate")){i._editHandle.amountRotated=0}}if(n.resize!==false){o.push(r.extend(i._rotateHandlePosition(s.resizeHandleOffset,s.resizeHandleRotation),{type:"resize",style:s,editHandle:true}))}if(c){o.forEach(function(e){if(e.type===c.type&&e.index===c.index){e.selected=true}})}};this._processEditActionCenter=function(e){var t=i._editHandle.startCoordinates,n={x:e.mouse.mapgcs.x-e.state.origin.mapgcs.x,y:e.mouse.mapgcs.y-e.state.origin.mapgcs.y},r=i._coordinates();var a=t.map(function(e){return{x:e.x+n.x,y:e.y+n.y}});if(a[0].x!==r[0].x||a[0].y!==r[0].y){i._coordinates(a);return true}return false};this._processEditActionRotate=function(e){var t=i._editHandle,n=t.startCoordinates,r={x:e.mouse.mapgcs.x-e.state.origin.mapgcs.x,y:e.mouse.mapgcs.y-e.state.origin.mapgcs.y},a=Math.atan2(t.rotatePosition.y-t.center.y,t.rotatePosition.x-t.center.x),o=Math.atan2(t.rotatePosition.y+r.y-t.center.y,t.rotatePosition.x+r.x-t.center.x),s=o-a,u=i._coordinates();var l=n.map(function(e){var n={x:e.x-t.center.x,y:e.y-t.center.y};return{x:n.x*Math.cos(s)-n.y*Math.sin(s)+t.center.x,y:n.x*Math.sin(s)+n.y*Math.cos(s)+t.center.y}});if(l[0].x!==u[0].x||l[0].y!==u[0].y){i._coordinates(l);t.amountRotated=t.startAmountRotated+s;return true}return false};this._processEditActionResize=function(e){var t=i._editHandle,n=t.startCoordinates,r={x:e.mouse.mapgcs.x-e.state.origin.mapgcs.x,y:e.mouse.mapgcs.y-e.state.origin.mapgcs.y},a=i.layer().map(),o=a.gcsToDisplay(t.center,null),s=a.gcsToDisplay(t.resizePosition,null),u=a.gcsToDisplay({x:t.resizePosition.x+r.x,y:t.resizePosition.y+r.y},null),l=Math.pow(Math.pow(s.y-o.y,2)+Math.pow(s.x-o.x,2),.5)-t.handle.style.resizeHandleOffset,c=Math.pow(Math.pow(u.y-o.y,2)+Math.pow(u.x-o.x,2),.5)-t.handle.style.resizeHandleOffset,f=i._coordinates();if(c&&l){var d=c/l;var p=n.map(function(e){return{x:(e.x-t.center.x)*d+t.center.x,y:(e.y-t.center.y)*d+t.center.y}});if(p[0].x!==f[0].x||p[0].y!==f[0].y){i._coordinates(p);return true}}return false};this._processEditActionEdge=function(e){var t=i._editHandle,n=t.handle.index,r=i._coordinates();r.splice(n+1,0,{x:t.handle.x,y:t.handle.y});t.handle.type="vertex";t.handle.index+=1;t.startCoordinates=r.slice();i.modified();return true};this._processEditActionVertex=function(e,t){var n=i._editHandle,r=n.handle.index,o=n.startCoordinates,s=i._coordinates(),u=s.length,l=s[r],c={x:e.mouse.mapgcs.x-e.state.origin.mapgcs.x,y:e.mouse.mapgcs.y-e.state.origin.mapgcs.y},f=i.layer(),d=f.options("adjacentPointProximity"),p,h;s[r]={x:o[r].x+c.x,y:o[r].y+c.y};if(f.displayDistance(s[r],null,o[r],null)<=d){}else if(f.displayDistance(s[r],null,s[(r+1)%s.length],null)<=d){p=(r+1)%s.length}else if(f.displayDistance(s[r],null,s[(r+s.length-1)%s.length],null)<=d){p=(r+s.length-1)%s.length}h=p===0&&r===s.length-1||p===s.length-1&&r===0;if(t===false&&h){p=undefined}if(p!==undefined&&s.length>(t||i.options("style").closed?3:2)){s[r]={x:s[p].x,y:s[p].y};if(e.event===a.actionup){if(t&&h){i.options("style").closed=true}s.splice(r,1)}}if(s.length===u&&s[r].x===l.x&&s[r].y===l.y){return false}i._coordinates(s);return true}};function M(e,t,n,r,i){if(!n){n=e.state()}switch(n){case g.create:return[{action:o["annotation_"+r],name:r+" create",owner:m,input:"left",modifiers:{shift:false,ctrl:false}},{action:o["annotation_"+r],name:r+" create",owner:m,input:"pan"}];default:return t.apply(e,i)}}function x(e,t,n){var r=e.layer();if(e.state()!==g.create||!r||t.state.action!==o["annotation_"+n]){return}var i=r.options("continuousPointProximity");var a=r.options("continuousPointColinearity");if(i||i===0){var s=e.options("vertices");if(!s.length){s.push(t.mouse.mapgcs);s.push(t.mouse.mapgcs);return true}var u=r.displayDistance(s[s.length-2],null,t.mouse.map,"display");if(u&&u>i){if(s.length>=(e._lastClickVertexCount||1)+3){var l=r.displayDistance(s[s.length-3],null,s[s.length-2],null),c=u,f=r.displayDistance(s[s.length-3],null,t.mouse.map,"display");if(l&&f){var d=(f*f-l*l-c*c)/(2*l*c);if(d>Math.cos(a)){s.pop()}}}s[s.length-1]=t.mouse.mapgcs;s.push(t.mouse.mapgcs);return true}}}var w=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}t=r.extend(true,{},{style:{fill:true,fillColor:{r:0,g:1,b:0},fillOpacity:.25,polygon:function e(t){return t.polygon},stroke:true,strokeColor:{r:0,g:0,b:0},strokeOpacity:1,strokeWidth:3,uniformPolygon:true},highlightStyle:{fillColor:{r:0,g:1,b:1},fillOpacity:.5,strokeWidth:5},createStyle:{fillColor:{r:.3,g:.3,b:.3},fillOpacity:.25,strokeColor:{r:0,g:0,b:1}}},t||{});t.corners=t.corners||t.coordinates||[];delete t.coordinates;b.call(this,"rectangle",t);var n=this,i=this.actions,s=this.processEditAction;this.actions=function(e){if(!e){e=n.state()}switch(e){case g.create:return[{action:o.annotation_rectangle,name:"rectangle create",owner:m,input:"left",modifiers:{shift:false,ctrl:false},selectionRectangle:true}];default:return i.apply(n,arguments)}};this.processAction=function(e){var t=n.layer();if(n.state()!==g.create||!t||e.event!==a.actionselection||e.state.action!==o.annotation_rectangle){return}var r=t.map(),i=[r.displayToGcs({x:e.lowerLeft.x,y:e.lowerLeft.y},null),r.displayToGcs({x:e.lowerLeft.x,y:e.upperRight.y},null),r.displayToGcs({x:e.upperRight.x,y:e.upperRight.y},null),r.displayToGcs({x:e.upperRight.x,y:e.lowerLeft.y},null)];if(t.displayDistance(i[0],null,i[1],null)*t.displayDistance(i[0],null,i[3],null)<.01){return"remove"}n.options("corners",i);n.state(g.done);return"done"};this.features=function(){var e=n.options(),t=n.state(),r;switch(t){case g.create:r=[];if(e.corners&&e.corners.length>=4){r=[{polygon:{polygon:e.corners,style:n.styleForState(t)}}]}break;default:r=[{polygon:{polygon:e.corners,style:n.styleForState(t)}}];if(t===g.edit){n._addEditHandles(r,e.corners)}break}return r};this._coordinates=function(e){if(e&&e.length>=4){n.options("corners",e.slice(0,4))}return n.options("corners")};this._coordinateOption="corners";this._geojsonCoordinates=function(e){var t=n.coordinates(e);if(!t||n.state()===g.create||t.length<4){return}var r=[];for(var i=0;i<4;i+=1){r.push([t[i].x,t[i].y])}r.push([t[0].x,t[0].y]);return[r]};this._geojsonGeometryType=function(){return"Polygon"};this._geojsonStyles=function(){return["fill","fillColor","fillOpacity","lineCap","lineJoin","stroke","strokeColor","strokeOffset","strokeOpacity","strokeWidth"]};this._setCornersFromMouse=function(e,t){var i=n.layer().map(),a=i.gcsToDisplay({x:e[0].x,y:e[0].y},null),o=i.gcsToDisplay(t.mapgcs,null),s={x:o.x,y:a.y},u={x:a.x,y:o.y};e[2]=r.extend({},t.mapgcs);e[1]=i.displayToGcs(s,null);e[3]=i.displayToGcs(u,null)};this.mouseMove=function(e){if(n.state()!==g.create){return}var t=n.options("corners");if(t.length){n._setCornersFromMouse(t,e);return true}};this.mouseClick=function(e){var t=n.layer();if(n.state()!==g.create||!t){return}if(!e.buttonsDown.left&&!e.buttonsDown.right){return}var i=n.options("corners");if(e.buttonsDown.right&&!i.length){return}e.handled=true;if(i.length){n._setCornersFromMouse(i,e);if(t.displayDistance(i[0],null,i[1],null)*t.displayDistance(i[0],null,i[3],null)<.01){return"remove"}n.state(g.done);return"done"}if(e.buttonsDown.left){i.push(r.extend({},e.mapgcs));i.push(r.extend({},e.mapgcs));i.push(r.extend({},e.mapgcs));i.push(r.extend({},e.mapgcs));return true}};this.processEditAction=function(e){var t=n._editHandle.startCoordinates,r={x:e.mouse.mapgcs.x-e.state.origin.mapgcs.x,y:e.mouse.mapgcs.y-e.state.origin.mapgcs.y},i=n._editHandle.handle.type,a=n._editHandle.handle.index,o=[Math.atan2(t[1].y-t[0].y,t[1].x-t[0].x),Math.atan2(t[2].y-t[1].y,t[2].x-t[1].x),Math.atan2(t[3].y-t[2].y,t[3].x-t[2].x),Math.atan2(t[0].y-t[3].y,t[0].x-t[3].x)],u,l,c,f,d;if(!o[0]&&!o[1]&&!o[2]&&!o[3]){o[1]=Math.PI/2;o[2]=Math.PI;o[3]=-Math.PI/2}if(!o[0]&&!o[2]){o[0]=o[1]-Math.PI/2;o[2]=o[1]+Math.PI/2}if(!o[1]&&!o[3]){o[1]=o[2]-Math.PI/2;o[3]=o[2]+Math.PI/2}switch(i){case"vertex":u=t.map(function(e){return{x:e.x,y:e.y}});f=o[(a+1)%4];l={x:(r.x*Math.cos(f)+r.y*Math.sin(f))*Math.cos(f),y:(r.y*Math.sin(f)+r.x*Math.cos(f))*Math.sin(f)};d=o[a];c={x:(r.x*Math.cos(d)+r.y*Math.sin(d))*Math.cos(d),y:(r.y*Math.sin(d)+r.x*Math.cos(d))*Math.sin(d)};u[a].x+=r.x;u[a].y+=r.y;u[(a+1)%4].x+=l.x;u[(a+1)%4].y+=l.y;u[(a+3)%4].x+=c.x;u[(a+3)%4].y+=c.y;n.options("corners",u);return true;case"edge":u=t.map(function(e){return{x:e.x,y:e.y}});f=o[(a+1)%4];r={x:(r.x*Math.cos(f)+r.y*Math.sin(f))*Math.cos(f),y:(r.y*Math.sin(f)+r.x*Math.cos(f))*Math.sin(f)};u[a].x+=r.x;u[a].y+=r.y;u[(a+1)%4].x+=r.x;u[(a+1)%4].y+=r.y;n.options("corners",u);return true}return s.apply(n,arguments)}};i(w,b);var A={};A[d.capabilities.feature]=true;l("rectangle",w,A);var T=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}t=r.extend(true,{},{style:{fill:true,fillColor:{r:0,g:1,b:0},fillOpacity:.25,polygon:function e(t){return t.polygon},stroke:true,strokeColor:{r:0,g:0,b:0},strokeOpacity:1,strokeWidth:3,uniformPolygon:true},highlightStyle:{fillColor:{r:0,g:1,b:1},fillOpacity:.5,strokeWidth:5},createStyle:{closed:false,fillColor:{r:.3,g:.3,b:.3},fillOpacity:.25,line:function e(t){return Array.apply(null,Array(n.options("vertices").length)).map(function(){return t})},position:function e(t,r){return n.options("vertices")[r]},stroke:false,strokeColor:{r:0,g:0,b:1}}},t||{});t.vertices=t.vertices||t.coordinates||[];delete t.coordinates;b.call(this,"polygon",t);var n=this,i=this.actions;this.features=function(){var e=n.options(),t=n.state(),r=n.styleForState(t),i;switch(t){case g.create:i=[];if(e.vertices&&e.vertices.length>=3){i[1]={polygon:{polygon:e.vertices,style:r}}}if(e.vertices&&e.vertices.length>=2){i[2]={line:{line:e.vertices,style:r}}}break;default:i=[{polygon:{polygon:e.vertices,style:r}}];if(t===g.edit){n._addEditHandles(i,e.vertices)}break}return i};this._coordinates=function(e){if(e){n.options("vertices",e)}return n.options("vertices")};this.mouseMove=function(e){if(n.state()!==g.create){return}var t=n.options("vertices");if(t.length){t[t.length-1]=e.mapgcs;return true}};this.mouseClick=function(e){var t=n.layer();if(n.state()!==g.create||!t){return}var r=!!e.buttonsDown.right,i;if(!e.buttonsDown.left&&!e.buttonsDown.right){return}var a=n.options("vertices");if(e.buttonsDown.right&&!a.length){return}e.handled=true;if(e.buttonsDown.left){if(a.length){if(a.length>=2&&t.displayDistance(a[a.length-2],null,e.map,"display")<=t.options("adjacentPointProximity")){i=true;if(n._lastClick&&e.time-n._lastClick<t.options("dblClickTime")){r=true}}else if(a.length>=2&&t.displayDistance(a[0],null,e.map,"display")<=t.options("finalPointProximity")){r=true}else{a[a.length-1]=e.mapgcs}}else{a.push(e.mapgcs)}if(!r&&!i){a.push(e.mapgcs)}n._lastClick=e.time;n._lastClickVertexCount=a.length}if(r){if(a.length<4){return"remove"}a.pop();n.state(g.done);return"done"}return!i};this.actions=function(e){return M(n,i,e,"polygon",arguments)};this.processAction=function(e){return x(n,e,"polygon")};this._geojsonCoordinates=function(e){var t=n.coordinates(e);if(!t||t.length<3||n.state()===g.create){return}var r=[];for(var i=0;i<t.length;i+=1){r.push([t[i].x,t[i].y])}r.push([t[0].x,t[0].y]);return[r]};this._geojsonGeometryType=function(){return"Polygon"};this._geojsonStyles=function(){return["fill","fillColor","fillOpacity","lineCap","lineJoin","stroke","strokeColor","strokeOffset","strokeOpacity","strokeWidth"]}};i(T,b);var C={};C[d.capabilities.feature]=true;C[c.capabilities.basic]=[g.create];l("polygon",T,C);var S=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}t=r.extend(true,{},{style:{line:function e(t){return Array.apply(null,Array(n.options("vertices").length)).map(function(){return t})},position:function e(t,r){return n.options("vertices")[r]},strokeColor:{r:0,g:0,b:0},strokeOpacity:1,strokeWidth:3,closed:false,lineCap:"butt",lineJoin:"miter"},highlightStyle:{strokeWidth:5},createStyle:{line:function e(t){return Array.apply(null,Array(n.options("vertices").length)).map(function(){return t})},position:function e(t,r){return n.options("vertices")[r]},strokeColor:{r:0,g:0,b:1},strokeOpacity:1,strokeWidth:3,closed:false,lineCap:"butt",lineJoin:"miter"}},t||{});t.vertices=t.vertices||t.coordinates||[];delete t.coordinates;b.call(this,"line",t);var n=this,i=this.actions,a=this.processEditAction;this.features=function(){var e=n.options(),t=n.state(),r;switch(t){case g.create:r=[{line:{line:e.vertices,style:n.styleForState(t)}}];break;default:r=[{line:{line:e.vertices,style:n.styleForState(t)}}];if(t===g.edit){n._addEditHandles(r,e.vertices,undefined,!n.style("closed"))}break}return r};this._coordinates=function(e){if(e){n.options("vertices",e)}return n.options("vertices")};this.mouseMove=function(e){if(n.state()!==g.create){return}var t=n.options("vertices");if(t.length){t[t.length-1]=e.mapgcs;return true}};this.mouseClick=function(e){var t=n.layer();if(n.state()!==g.create||!t){return}var r=!!e.buttonsDown.right,i;if(!e.buttonsDown.left&&!e.buttonsDown.right){return}var a=n.options("vertices");if(e.buttonsDown.right&&!a.length){return}e.handled=true;if(e.buttonsDown.left){if(a.length){if(a.length>=2&&t.displayDistance(a[a.length-2],null,e.map,"display")<=t.options("adjacentPointProximity")){i=true;if(n._lastClick&&e.time-n._lastClick<t.options("dblClickTime")){r=true}}else if(a.length>=2&&t.displayDistance(a[0],null,e.map,"display")<=t.options("finalPointProximity")){r="close"}else{a[a.length-1]=e.mapgcs}}else{a.push(e.mapgcs)}if(!r&&!i){a.push(e.mapgcs)}n._lastClick=e.time;n._lastClickVertexCount=a.length}if(r){if(a.length<3){return"remove"}a.pop();n.options("style").closed=r==="close";n.state(g.done);return"done"}return!i};this.actions=function(e){return M(n,i,e,"line",arguments)};this.processAction=function(e){return x(n,e,"line")};this._geojsonCoordinates=function(e){var t=n.coordinates(e);if(!t||t.length<2||n.state()===g.create){return}var r=[];for(var i=0;i<t.length;i+=1){r.push([t[i].x,t[i].y])}return r};this._geojsonGeometryType=function(){return"LineString"};this._geojsonStyles=function(){return["closed","lineCap","lineJoin","strokeColor","strokeOffset","strokeOpacity","strokeWidth"]};this.processEditAction=function(e){switch(n._editHandle.handle.type){case"vertex":return n._processEditActionVertex(e,true)}return a.apply(n,arguments)};this.mouseClickEdit=function(e){var t=n.layer(),r=n._editHandle,i;if(n.state()!==g.edit||!t||!e.buttonsDown.left){return}if(!r||!r.handle.selected||r.handle.type!=="edge"||!n.options("style").closed){return}e.handled=true;if(n._lastClick&&e.time-n._lastClick<t.options("dblClickTime")){i=true}n._lastClick=e.time;if(i){var a=r.handle.index,o=n._coordinates(),s=o.slice(a+1).concat(o.slice(0,a+1));n._coordinates(s);n.options("style").closed=false;r.handle.index=undefined;return true}}};i(S,b);var D={};D[c.capabilities.basic]=[g.create];l("line",S,D);var I=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}t=r.extend(true,{},{style:{fill:true,fillColor:{r:0,g:1,b:0},fillOpacity:.25,radius:10,scaled:false,stroke:true,strokeColor:{r:0,g:0,b:0},strokeOpacity:1,strokeWidth:3},createStyle:{fillColor:{r:.3,g:.3,b:.3},fillOpacity:.25,strokeColor:{r:0,g:0,b:1}},highlightStyle:{fillColor:{r:0,g:1,b:1},fillOpacity:.5,strokeWidth:5}},t||{});t.position=t.position||(t.coordinates?t.coordinates[0]:undefined);delete t.coordinates;b.call(this,"point",t);var n=this;this.features=function(){var e=n.options(),t=n.state(),i,a,o;switch(t){case g.create:i=[];break;default:a=n.styleForState(t);if(e.style.scaled||e.style.scaled===0){if(e.style.scaled===true){e.style.scaled=n.layer().map().zoom()}a=r.extend({},a,{radius:function t(){var t=e.style.radius,r=n.layer().map().zoom();if(u.isFunction(t)){t=t.apply(n,arguments)}t*=Math.pow(2,r-e.style.scaled);return t}});o=true}i=[{point:{x:e.position.x,y:e.position.y,style:a,scaleOnZoom:o}}];if(t===g.edit){n._addEditHandles(i,[e.position],{edge:false,center:false,resize:false,rotate:false})}break}return i};this._coordinates=function(e){if(e&&e.length>=1){n.options("position",e[0])}if(n.state()===g.create){return[]}return[n.options("position")]};this._coordinateOption="position";this.mouseClick=function(e){if(n.state()!==g.create){return}if(!e.buttonsDown.left){return}e.handled=true;n.options("position",e.mapgcs);n.state(g.done);return"done"};this._geojsonStyles=function(){return["fill","fillColor","fillOpacity","radius","scaled","stroke","strokeColor","strokeOpacity","strokeWidth"]};this._geojsonCoordinates=function(e){var t=n.coordinates(e);if(!t||n.state()===g.create||t.length<1||t[0]===undefined){return}return[t[0].x,t[0].y]};this._geojsonGeometryType=function(){return"Point"}};i(I,b);var E={};E[f.capabilities.feature]=true;l("point",I,E);e.exports={state:g,actionOwner:m,annotation:b,lineAnnotation:S,pointAnnotation:I,polygonAnnotation:T,rectangleAnnotation:w,_editHandleFeatureLevel:y,defaultEditHandleStyle:v}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n(476);var i=n(138);var a=n(493);var o=n(196);var s=n(190);var u=n(195);var l=n(197);var c=n(494);var f=n(496);r["a"].defaultDatum="WGS84";r["a"].Proj=i["a"];r["a"].WGS84=new r["a"].Proj("WGS84");r["a"].Point=a["a"];r["a"].toPoint=o["a"];r["a"].defs=s["a"];r["a"].transform=u["a"];r["a"].mgrs=l["a"];r["a"].version=c["a"];Object(f["a"])(r["a"]);t["default"]=r["a"]},function(e,t,n){"use strict";var r=n(478);var i=n(191);var a=n(192);function o(e){var t=this;if(arguments.length===2){var n=arguments[1];if(typeof n==="string"){if(n.charAt(0)==="+"){o[e]=Object(i["a"])(arguments[1])}else{o[e]=Object(a["a"])(arguments[1])}}else{o[e]=n}}else if(arguments.length===1){if(Array.isArray(e)){return e.map(function(e){if(Array.isArray(e)){o.apply(t,e)}else{o(e)}})}else if(typeof e==="string"){if(e in o){return o[e]}}else if("EPSG"in e){o["EPSG:"+e.EPSG]=e}else if("ESRI"in e){o["ESRI:"+e.ESRI]=e}else if("IAU2000"in e){o["IAU2000:"+e.IAU2000]=e}else{console.log(e)}return}}Object(r["a"])(o);t["a"]=o},function(e,t,n){"use strict";var r=n(7);var i=n(479);var a=n(480);var o=n(96);t["a"]=function(e){var t={};var n=e.split("+").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,t){var n=t.split("=");n.push(true);e[n[0].toLowerCase()]=n[1];return e},{});var s,u,l;var c={proj:"projName",datum:"datumCode",rf:function(e){t.rf=parseFloat(e)},lat_0:function(e){t.lat0=e*r["a"]},lat_1:function(e){t.lat1=e*r["a"]},lat_2:function(e){t.lat2=e*r["a"]},lat_ts:function(e){t.lat_ts=e*r["a"]},lon_0:function(e){t.long0=e*r["a"]},lon_1:function(e){t.long1=e*r["a"]},lon_2:function(e){t.long2=e*r["a"]},alpha:function(e){t.alpha=parseFloat(e)*r["a"]},lonc:function(e){t.longc=e*r["a"]},x_0:function(e){t.x0=parseFloat(e)},y_0:function(e){t.y0=parseFloat(e)},k_0:function(e){t.k0=parseFloat(e)},k:function(e){t.k0=parseFloat(e)},a:function(e){t.a=parseFloat(e)},b:function(e){t.b=parseFloat(e)},r_a:function(){t.R_A=true},zone:function(e){t.zone=parseInt(e,10)},south:function(){t.utmSouth=true},towgs84:function(e){t.datum_params=e.split(",").map(function(e){return parseFloat(e)})},to_meter:function(e){t.to_meter=parseFloat(e)},units:function(e){t.units=e;var n=Object(o["a"])(a["a"],e);if(n){t.to_meter=n.to_meter}},from_greenwich:function(e){t.from_greenwich=e*r["a"]},pm:function(e){var n=Object(o["a"])(i["a"],e);t.from_greenwich=(n?n:parseFloat(e))*r["a"]},nadgrids:function(e){if(e==="@null"){t.datumCode="none"}else{t.nadgrids=e}},axis:function(e){var n="ewnsud";if(e.length===3&&n.indexOf(e.substr(0,1))!==-1&&n.indexOf(e.substr(1,1))!==-1&&n.indexOf(e.substr(2,1))!==-1){t.axis=e}}};for(s in n){u=n[s];if(s in c){l=c[s];if(typeof l==="function"){l(u)}else{t[l]=u}}else{t[s]=u}}if(typeof t.datumCode==="string"&&t.datumCode!=="WGS84"){t.datumCode=t.datumCode.toLowerCase()}return t}},function(e,t,n){"use strict";var r=n(481);var i=n(482);var a=.017453292519943295;function o(e,t){var n=t[0];var r=t[1];if(!(n in e)&&r in e){e[n]=e[r];if(t.length===3){e[n]=t[2](e[n])}}}function s(e){return e*a}function u(e){if(e.type==="GEOGCS"){e.projName="longlat"}else if(e.type==="LOCAL_CS"){e.projName="identity";e.local=true}else{if(typeof e.PROJECTION==="object"){e.projName=Object.keys(e.PROJECTION)[0]}else{e.projName=e.PROJECTION}}if(e.UNIT){e.units=e.UNIT.name.toLowerCase();if(e.units==="metre"){e.units="meter"}if(e.UNIT.convert){if(e.type==="GEOGCS"){if(e.DATUM&&e.DATUM.SPHEROID){e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a}}else{e.to_meter=e.UNIT.convert}}}var t=e.GEOGCS;if(e.type==="GEOGCS"){t=e}if(t){if(t.DATUM){e.datumCode=t.DATUM.name.toLowerCase()}else{e.datumCode=t.name.toLowerCase()}if(e.datumCode.slice(0,2)==="d_"){e.datumCode=e.datumCode.slice(2)}if(e.datumCode==="new_zealand_geodetic_datum_1949"||e.datumCode==="new_zealand_1949"){e.datumCode="nzgd49"}if(e.datumCode==="wgs_1984"){if(e.PROJECTION==="Mercator_Auxiliary_Sphere"){e.sphere=true}e.datumCode="wgs84"}if(e.datumCode.slice(-6)==="_ferro"){e.datumCode=e.datumCode.slice(0,-6)}if(e.datumCode.slice(-8)==="_jakarta"){e.datumCode=e.datumCode.slice(0,-8)}if(~e.datumCode.indexOf("belge")){e.datumCode="rnb72"}if(t.DATUM&&t.DATUM.SPHEROID){e.ellps=t.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk");if(e.ellps.toLowerCase().slice(0,13)==="international"){e.ellps="intl"}e.a=t.DATUM.SPHEROID.a;e.rf=parseFloat(t.DATUM.SPHEROID.rf,10)}if(t.DATUM&&t.DATUM.TOWGS84){e.datum_params=t.DATUM.TOWGS84}if(~e.datumCode.indexOf("osgb_1936")){e.datumCode="osgb36"}if(~e.datumCode.indexOf("osni_1952")){e.datumCode="osni52"}if(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965")){e.datumCode="ire65"}if(e.datumCode==="ch1903+"){e.datumCode="ch1903"}if(~e.datumCode.indexOf("israel")){e.datumCode="isr93"}}if(e.b&&!isFinite(e.b)){e.b=e.a}function n(t){var n=e.to_meter||1;return t*n}var r=function(t){return o(e,t)};var i=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",s],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",s],["x0","false_easting",n],["y0","false_northing",n],["long0","central_meridian",s],["lat0","latitude_of_origin",s],["lat0","standard_parallel_1",s],["lat1","standard_parallel_1",s],["lat2","standard_parallel_2",s],["azimuth","Azimuth"],["alpha","azimuth",s],["srsCode","name"]];i.forEach(r);if(!e.long0&&e.longc&&(e.projName==="Albers_Conic_Equal_Area"||e.projName==="Lambert_Azimuthal_Equal_Area")){e.long0=e.longc}if(!e.lat_ts&&e.lat1&&(e.projName==="Stereographic_South_Pole"||e.projName==="Polar Stereographic (variant B)")){e.lat0=s(e.lat1>0?90:-90);e.lat_ts=e.lat1}}t["a"]=function(e){var t=Object(r["a"])(e);var n=t.shift();var a=t.shift();t.unshift(["name",a]);t.unshift(["type",n]);var o={};Object(i["a"])(t,o);u(o);return o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t["init"]=u;t["forward"]=l;t["inverse"]=c;n.d(t,"names",function(){return f});var r=n(64);var i=n(12);var a=n(97);var o=n(98);var s=n(7);function u(){var e=this.b/this.a;this.es=1-e*e;if(!("x0"in this)){this.x0=0}if(!("y0"in this)){this.y0=0}this.e=Math.sqrt(this.es);if(this.lat_ts){if(this.sphere){this.k0=Math.cos(this.lat_ts)}else{this.k0=Object(r["a"])(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))}}else{if(!this.k0){if(this.k){this.k0=this.k}else{this.k0=1}}}}function l(e){var t=e.x;var n=e.y;if(n*s["i"]>90&&n*s["i"]<-90&&t*s["i"]>180&&t*s["i"]<-180){return null}var r,o;if(Math.abs(Math.abs(n)-s["d"])<=s["b"]){return null}else{if(this.sphere){r=this.x0+this.a*this.k0*Object(i["a"])(t-this.long0);o=this.y0+this.a*this.k0*Math.log(Math.tan(s["c"]+.5*n))}else{var u=Math.sin(n);var l=Object(a["a"])(this.e,n,u);r=this.x0+this.a*this.k0*Object(i["a"])(t-this.long0);o=this.y0-this.a*this.k0*Math.log(l)}e.x=r;e.y=o;return e}}function c(e){var t=e.x-this.x0;var n=e.y-this.y0;var r,a;if(this.sphere){a=s["d"]-2*Math.atan(Math.exp(-n/(this.a*this.k0)))}else{var u=Math.exp(-n/(this.a*this.k0));a=Object(o["a"])(this.e,u);if(a===-9999){return null}}r=Object(i["a"])(this.long0+t/(this.a*this.k0));e.x=r;e.y=a;return e}var f=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];t["default"]={init:u,forward:l,inverse:c,names:f}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t["init"]=r;n.d(t,"forward",function(){return i});n.d(t,"inverse",function(){return i});n.d(t,"names",function(){return a});function r(){}function i(e){return e}var a=["longlat","identity"];t["default"]={init:r,forward:i,inverse:i,names:a}},function(e,t,n){"use strict";t["a"]=c;var r=n(7);var i=n(489);var a=n(491);var o=n(138);var s=n(196);var u=n(492);function l(e,t){return(e.datum.datum_type===r["e"]||e.datum.datum_type===r["f"])&&t.datumCode!=="WGS84"||(t.datum.datum_type===r["e"]||t.datum.datum_type===r["f"])&&e.datumCode!=="WGS84"}function c(e,t,n){var f;if(Array.isArray(n)){n=Object(s["a"])(n)}Object(u["a"])(n);if(e.datum&&t.datum&&l(e,t)){f=new o["a"]("WGS84");n=c(e,f,n);e=f}if(e.axis!=="enu"){n=Object(a["a"])(e,false,n)}if(e.projName==="longlat"){n={x:n.x*r["a"],y:n.y*r["a"]}}else{if(e.to_meter){n={x:n.x*e.to_meter,y:n.y*e.to_meter}}n=e.inverse(n)}if(e.from_greenwich){n.x+=e.from_greenwich}n=Object(i["a"])(e.datum,t.datum,n);if(t.from_greenwich){n={x:n.x-t.from_greenwich,y:n.y}}if(t.projName==="longlat"){n={x:n.x*r["i"],y:n.y*r["i"]}}else{n=t.forward(n);if(t.to_meter){n={x:n.x/t.to_meter,y:n.y/t.to_meter}}}if(t.axis!=="enu"){return Object(a["a"])(t,true,n)}return n}},function(e,t,n){"use strict";t["a"]=function(e){var t={x:e[0],y:e[1]};if(e.length>2){t.z=e[2]}if(e.length>3){t.m=e[3]}return t}},function(e,t,n){"use strict";t["b"]=f;t["c"]=p;var r=6;var i="AJSAJS";var a="AFAFAF";var o=65;var s=73;var u=79;var l=86;var c=90;t["a"]={forward:f,inverse:d,toPoint:p};function f(e,t){t=t||5;return b(m({lat:e[1],lon:e[0]}),t)}function d(e){var t=v(A(e.toUpperCase()));if(t.lat&&t.lon){return[t.lon,t.lat,t.lon,t.lat]}return[t.left,t.bottom,t.right,t.top]}function p(e){var t=v(A(e.toUpperCase()));if(t.lat&&t.lon){return[t.lon,t.lat]}return[(t.left+t.right)/2,(t.top+t.bottom)/2]}function h(e){return e*(Math.PI/180)}function g(e){return 180*(e/Math.PI)}function m(e){var t=e.lat;var n=e.lon;var r=6378137;var i=.00669438;var a=.9996;var o;var s;var u,l,c,f,d;var p=h(t);var g=h(n);var m;var v;v=Math.floor((n+180)/6)+1;if(n===180){v=60}if(t>=56&&t<64&&n>=3&&n<12){v=32}if(t>=72&&t<84){if(n>=0&&n<9){v=31}else if(n>=9&&n<21){v=33}else if(n>=21&&n<33){v=35}else if(n>=33&&n<42){v=37}}o=(v-1)*6-180+3;m=h(o);s=i/(1-i);u=r/Math.sqrt(1-i*Math.sin(p)*Math.sin(p));l=Math.tan(p)*Math.tan(p);c=s*Math.cos(p)*Math.cos(p);f=Math.cos(p)*(g-m);d=r*((1-i/4-3*i*i/64-5*i*i*i/256)*p-(3*i/8+3*i*i/32+45*i*i*i/1024)*Math.sin(2*p)+(15*i*i/256+45*i*i*i/1024)*Math.sin(4*p)-35*i*i*i/3072*Math.sin(6*p));var b=a*u*(f+(1-l+c)*f*f*f/6+(5-18*l+l*l+72*c-58*s)*f*f*f*f*f/120)+5e5;var M=a*(d+u*Math.tan(p)*(f*f/2+(5-l+9*c+4*c*c)*f*f*f*f/24+(61-58*l+l*l+600*c-330*s)*f*f*f*f*f*f/720));if(t<0){M+=1e7}return{northing:Math.round(M),easting:Math.round(b),zoneNumber:v,zoneLetter:y(t)}}function v(e){var t=e.northing;var n=e.easting;var r=e.zoneLetter;var i=e.zoneNumber;if(i<0||i>60){return null}var a=.9996;var o=6378137;var s=.00669438;var u;var l=(1-Math.sqrt(1-s))/(1+Math.sqrt(1-s));var c,f,d,p,h,m;var y;var b,M;var x=n-5e5;var w=t;if(r<"N"){w-=1e7}y=(i-1)*6-180+3;u=s/(1-s);m=w/a;b=m/(o*(1-s/4-3*s*s/64-5*s*s*s/256));M=b+(3*l/2-27*l*l*l/32)*Math.sin(2*b)+(21*l*l/16-55*l*l*l*l/32)*Math.sin(4*b)+151*l*l*l/96*Math.sin(6*b);c=o/Math.sqrt(1-s*Math.sin(M)*Math.sin(M));f=Math.tan(M)*Math.tan(M);d=u*Math.cos(M)*Math.cos(M);p=o*(1-s)/Math.pow(1-s*Math.sin(M)*Math.sin(M),1.5);h=x/(c*a);var A=M-c*Math.tan(M)/p*(h*h/2-(5+3*f+10*d-4*d*d-9*u)*h*h*h*h/24+(61+90*f+298*d+45*f*f-252*u-3*d*d)*h*h*h*h*h*h/720);A=g(A);var T=(h-(1+2*f+d)*h*h*h/6+(5-2*d+28*f-3*d*d+8*u+24*f*f)*h*h*h*h*h/120)/Math.cos(M);T=y+g(T);var C;if(e.accuracy){var S=v({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});C={top:S.lat,right:S.lon,bottom:A,left:T}}else{C={lat:A,lon:T}}return C}function y(e){var t="Z";if(84>=e&&e>=72){t="X"}else if(72>e&&e>=64){t="W"}else if(64>e&&e>=56){t="V"}else if(56>e&&e>=48){t="U"}else if(48>e&&e>=40){t="T"}else if(40>e&&e>=32){t="S"}else if(32>e&&e>=24){t="R"}else if(24>e&&e>=16){t="Q"}else if(16>e&&e>=8){t="P"}else if(8>e&&e>=0){t="N"}else if(0>e&&e>=-8){t="M"}else if(-8>e&&e>=-16){t="L"}else if(-16>e&&e>=-24){t="K"}else if(-24>e&&e>=-32){t="J"}else if(-32>e&&e>=-40){t="H"}else if(-40>e&&e>=-48){t="G"}else if(-48>e&&e>=-56){t="F"}else if(-56>e&&e>=-64){t="E"}else if(-64>e&&e>=-72){t="D"}else if(-72>e&&e>=-80){t="C"}return t}function b(e,t){var n="00000"+e.easting,r="00000"+e.northing;return e.zoneNumber+e.zoneLetter+M(e.easting,e.northing,e.zoneNumber)+n.substr(n.length-5,t)+r.substr(r.length-5,t)}function M(e,t,n){var r=x(n);var i=Math.floor(e/1e5);var a=Math.floor(t/1e5)%20;return w(i,a,r)}function x(e){var t=e%r;if(t===0){t=r}return t}function w(e,t,n){var r=n-1;var f=i.charCodeAt(r);var d=a.charCodeAt(r);var p=f+e-1;var h=d+t;var g=false;if(p>c){p=p-c+o-1;g=true}if(p===s||f<s&&p>s||(p>s||f<s)&&g){p++}if(p===u||f<u&&p>u||(p>u||f<u)&&g){p++;if(p===s){p++}}if(p>c){p=p-c+o-1}if(h>l){h=h-l+o-1;g=true}else{g=false}if(h===s||d<s&&h>s||(h>s||d<s)&&g){h++}if(h===u||d<u&&h>u||(h>u||d<u)&&g){h++;if(h===s){h++}}if(h>l){h=h-l+o-1}var m=String.fromCharCode(p)+String.fromCharCode(h);return m}function A(e){if(e&&e.length===0){throw"MGRSPoint coverting from nothing"}var t=e.length;var n=null;var r="";var i;var a=0;while(!/[A-Z]/.test(i=e.charAt(a))){if(a>=2){throw"MGRSPoint bad conversion from: "+e}r+=i;a++}var o=parseInt(r,10);if(a===0||a+3>t){throw"MGRSPoint bad conversion from: "+e}var s=e.charAt(a++);if(s<="A"||s==="B"||s==="Y"||s>="Z"||s==="I"||s==="O"){throw"MGRSPoint zone letter "+s+" not handled: "+e}n=e.substring(a,a+=2);var u=x(o);var l=T(n.charAt(0),u);var c=C(n.charAt(1),u);while(c<S(s)){c+=2e6}var f=t-a;if(f%2!==0){throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+e}var d=f/2;var p=0;var h=0;var g,m,v,y,b;if(d>0){g=1e5/Math.pow(10,d);m=e.substring(a,a+d);p=parseFloat(m)*g;v=e.substring(a+d);h=parseFloat(v)*g}y=p+l;b=h+c;return{easting:y,northing:b,zoneLetter:s,zoneNumber:o,accuracy:g}}function T(e,t){var n=i.charCodeAt(t-1);var r=1e5;var a=false;while(n!==e.charCodeAt(0)){n++;if(n===s){n++}if(n===u){n++}if(n>c){if(a){throw"Bad character: "+e}n=o;a=true}r+=1e5}return r}function C(e,t){if(e>"V"){throw"MGRSPoint given invalid Northing "+e}var n=a.charCodeAt(t-1);var r=0;var i=false;while(n!==e.charCodeAt(0)){n++;if(n===s){n++}if(n===u){n++}if(n>l){if(i){throw"Bad character: "+e}n=o;i=true}r+=1e5}return r}function S(e){var t;switch(e){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0){return t}else{throw"Invalid zone letter: "+e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t["init"]=l;t["forward"]=c;t["inverse"]=f;n.d(t,"names",function(){return d});var r=n(199);var i=n(139);var a=n(200);var o=n(12);var s=n(7);var u=n(73);function l(){this.x0=this.x0!==undefined?this.x0:0;this.y0=this.y0!==undefined?this.y0:0;this.long0=this.long0!==undefined?this.long0:0;this.lat0=this.lat0!==undefined?this.lat0:0;if(this.es){this.en=Object(r["a"])(this.es);this.ml0=Object(i["a"])(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en)}}function c(e){var t=e.x;var n=e.y;var r=Object(o["a"])(t-this.long0);var a;var u,l;var c=Math.sin(n);var f=Math.cos(n);if(!this.es){var d=f*Math.sin(r);if(Math.abs(Math.abs(d)-1)<s["b"]){return 93}else{u=.5*this.a*this.k0*Math.log((1+d)/(1-d))+this.x0;l=f*Math.cos(r)/Math.sqrt(1-Math.pow(d,2));d=Math.abs(l);if(d>=1){if(d-1>s["b"]){return 93}else{l=0}}else{l=Math.acos(l)}if(n<0){l=-l}l=this.a*this.k0*(l-this.lat0)+this.y0}}else{var p=f*r;var h=Math.pow(p,2);var g=this.ep2*Math.pow(f,2);var m=Math.pow(g,2);var v=Math.abs(f)>s["b"]?Math.tan(n):0;var y=Math.pow(v,2);var b=Math.pow(y,2);a=1-this.es*Math.pow(c,2);p=p/Math.sqrt(a);var M=Object(i["a"])(n,c,f,this.en);u=this.a*(this.k0*p*(1+h/6*(1-y+g+h/20*(5-18*y+b+14*g-58*y*g+h/42*(61+179*b-b*y-479*y)))))+this.x0;l=this.a*(this.k0*(M-this.ml0+c*r*p/2*(1+h/12*(5-y+9*g+4*m+h/30*(61+b-58*y+270*g-330*y*g+h/56*(1385+543*b-b*y-3111*y))))))+this.y0}e.x=u;e.y=l;return e}function f(e){var t,n;var r,i;var l=(e.x-this.x0)*(1/this.a);var c=(e.y-this.y0)*(1/this.a);if(!this.es){var f=Math.exp(l/this.k0);var d=.5*(f-1/f);var p=this.lat0+c/this.k0;var h=Math.cos(p);t=Math.sqrt((1-Math.pow(h,2))/(1+Math.pow(d,2)));r=Math.asin(t);if(c<0){r=-r}if(d===0&&h===0){i=0}else{i=Object(o["a"])(Math.atan2(d,h)+this.long0)}}else{t=this.ml0+c/this.k0;n=Object(a["a"])(t,this.es,this.en);if(Math.abs(n)<s["d"]){var g=Math.sin(n);var m=Math.cos(n);var v=Math.abs(m)>s["b"]?Math.tan(n):0;var y=this.ep2*Math.pow(m,2);var b=Math.pow(y,2);var M=Math.pow(v,2);var x=Math.pow(M,2);t=1-this.es*Math.pow(g,2);var w=l*Math.sqrt(t)/this.k0;var A=Math.pow(w,2);t=t*v;r=n-t*A/(1-this.es)*.5*(1-A/12*(5+3*M-9*y*M+y-4*b-A/30*(61+90*M-252*y*M+45*x+46*y-A/56*(1385+3633*M+4095*x+1574*x*M))));i=Object(o["a"])(this.long0+w*(1-A/6*(1+2*M+y-A/20*(5+28*M+24*x+8*y*M+6*y-A/42*(61+662*M+1320*x+720*x*M))))/m)}else{r=s["d"]*Object(u["a"])(c);i=0}}e.x=i;e.y=r;return e}var d=["Transverse_Mercator","Transverse Mercator","tmerc"];t["default"]={init:l,forward:c,inverse:f,names:d}},function(e,t,n){"use strict";var r=1;var i=.25;var a=.046875;var o=.01953125;var s=.01068115234375;var u=.75;var l=.46875;var c=.013020833333333334;var f=.007120768229166667;var d=.3645833333333333;var p=.005696614583333333;var h=.3076171875;t["a"]=function(e){var t=[];t[0]=r-e*(i+e*(a+e*(o+e*s)));t[1]=e*(u-e*(a+e*(o+e*s)));var n=e*e;t[2]=n*(l-e*(c+e*f));n*=e;t[3]=n*(d-e*p);t[4]=n*e*h;return t}},function(e,t,n){"use strict";var r=n(139);var i=n(7);var a=20;t["a"]=function(e,t,n){var o=1/(1-t);var s=e;for(var u=a;u;--u){var l=Math.sin(s);var c=1-t*l*l;c=(Object(r["a"])(s,l,Math.cos(s),n)-e)*(c*Math.sqrt(c))*o;s-=c;if(Math.abs(c)<i["b"]){return s}}return s}},function(e,t,n){"use strict";t["a"]=function(e,t){e=Math.abs(e);t=Math.abs(t);var n=Math.max(e,t);var r=Math.min(e,t)/(n?n:1);return n*Math.sqrt(1+Math.pow(r,2))}},function(e,t,n){"use strict";t["a"]=function(e){var t=Math.exp(e);t=(t+1/t)/2;return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});n.d(t,"dependsOn",function(){return o});t["init"]=s;n.d(t,"names",function(){return u});var r=n(502);var i=n(140);var a=n(7);var o="etmerc";function s(){var e=Object(r["a"])(this.zone,this.long0);if(e===undefined){throw new Error("unknown utm zone")}this.lat0=0;this.long0=(6*Math.abs(e)-183)*a["a"];this.x0=5e5;this.y0=this.utmSouth?1e7:0;this.k0=.9996;i["default"].init.apply(this);this.forward=i["default"].forward;this.inverse=i["default"].inverse}var u=["Universal Transverse Mercator System","utm"];t["default"]={init:s,names:u,dependsOn:o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t["init"]=a;t["forward"]=o;t["inverse"]=s;n.d(t,"names",function(){return u});var r=n(205);var i=n(12);function a(){r["default"].init.apply(this);if(!this.rc){return}this.sinc0=Math.sin(this.phic0);this.cosc0=Math.cos(this.phic0);this.R2=2*this.rc;if(!this.title){this.title="Oblique Stereographic Alternative"}}function o(e){var t,n,a,o;e.x=Object(i["a"])(e.x-this.long0);r["default"].forward.apply(this,[e]);t=Math.sin(e.y);n=Math.cos(e.y);a=Math.cos(e.x);o=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*n*a);e.x=o*n*Math.sin(e.x);e.y=o*(this.cosc0*t-this.sinc0*n*a);e.x=this.a*e.x+this.x0;e.y=this.a*e.y+this.y0;return e}function s(e){var t,n,a,o,s;e.x=(e.x-this.x0)/this.a;e.y=(e.y-this.y0)/this.a;e.x/=this.k0;e.y/=this.k0;if(s=Math.sqrt(e.x*e.x+e.y*e.y)){var u=2*Math.atan2(s,this.R2);t=Math.sin(u);n=Math.cos(u);o=Math.asin(n*this.sinc0+e.y*t*this.cosc0/s);a=Math.atan2(e.x*t,s*this.cosc0*n-e.y*this.sinc0*t)}else{o=this.phic0;a=0}e.x=a;e.y=o;r["default"].inverse.apply(this,[e]);e.x=Object(i["a"])(e.x+this.long0);return e}var u=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];t["default"]={init:a,forward:o,inverse:s,names:u}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t["init"]=o;t["forward"]=s;t["inverse"]=u;n.d(t,"names",function(){return l});var r=n(503);var i=n(7);var a=20;function o(){var e=Math.sin(this.lat0);var t=Math.cos(this.lat0);t*=t;this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e);this.C=Math.sqrt(1+this.es*t*t/(1-this.es));this.phic0=Math.asin(e/this.C);this.ratexp=.5*this.C*this.e;this.K=Math.tan(.5*this.phic0+i["c"])/(Math.pow(Math.tan(.5*this.lat0+i["c"]),this.C)*Object(r["a"])(this.e*e,this.ratexp))}function s(e){var t=e.x;var n=e.y;e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+i["c"]),this.C)*Object(r["a"])(this.e*Math.sin(n),this.ratexp))-i["d"];e.x=this.C*t;return e}function u(e){var t=1e-14;var n=e.x/this.C;var o=e.y;var s=Math.pow(Math.tan(.5*o+i["c"])/this.K,1/this.C);for(var u=a;u>0;--u){o=2*Math.atan(s*Object(r["a"])(this.e*Math.sin(e.y),-.5*this.e))-i["d"];if(Math.abs(o-e.y)<t){break}e.y=o}if(!u){return null}e.x=n;e.y=o;return e}var l=["gauss"];t["default"]={init:o,forward:s,inverse:u,names:l}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t["ssfn_"]=l;t["init"]=c;t["forward"]=f;t["inverse"]=d;n.d(t,"names",function(){return p});var r=n(7);var i=n(73);var a=n(64);var o=n(97);var s=n(98);var u=n(12);function l(e,t,n){t*=n;return Math.tan(.5*(r["d"]+e))*Math.pow((1-t)/(1+t),.5*n)}function c(){this.coslat0=Math.cos(this.lat0);this.sinlat0=Math.sin(this.lat0);if(this.sphere){if(this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=r["b"]){this.k0=.5*(1+Object(i["a"])(this.lat0)*Math.sin(this.lat_ts))}}else{if(Math.abs(this.coslat0)<=r["b"]){if(this.lat0>0){this.con=1}else{this.con=-1}}this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e));if(this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=r["b"]){this.k0=.5*this.cons*Object(a["a"])(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Object(o["a"])(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))}this.ms1=Object(a["a"])(this.e,this.sinlat0,this.coslat0);this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-r["d"];this.cosX0=Math.cos(this.X0);this.sinX0=Math.sin(this.X0)}}function f(e){var t=e.x;var n=e.y;var i=Math.sin(n);var a=Math.cos(n);var s,l,c,f,d,p;var h=Object(u["a"])(t-this.long0);if(Math.abs(Math.abs(t-this.long0)-Math.PI)<=r["b"]&&Math.abs(n+this.lat0)<=r["b"]){e.x=NaN;e.y=NaN;return e}if(this.sphere){s=2*this.k0/(1+this.sinlat0*i+this.coslat0*a*Math.cos(h));e.x=this.a*s*a*Math.sin(h)+this.x0;e.y=this.a*s*(this.coslat0*i-this.sinlat0*a*Math.cos(h))+this.y0;return e}else{l=2*Math.atan(this.ssfn_(n,i,this.e))-r["d"];f=Math.cos(l);c=Math.sin(l);if(Math.abs(this.coslat0)<=r["b"]){d=Object(o["a"])(this.e,n*this.con,this.con*i);p=2*this.a*this.k0*d/this.cons;e.x=this.x0+p*Math.sin(t-this.long0);e.y=this.y0-this.con*p*Math.cos(t-this.long0);return e}else if(Math.abs(this.sinlat0)<r["b"]){s=2*this.a*this.k0/(1+f*Math.cos(h));e.y=s*c}else{s=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*c+this.cosX0*f*Math.cos(h)));e.y=s*(this.cosX0*c-this.sinX0*f*Math.cos(h))+this.y0}e.x=s*f*Math.sin(h)+this.x0}return e}function d(e){e.x-=this.x0;e.y-=this.y0;var t,n,i,a,o;var l=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var c=2*Math.atan(l/(2*this.a*this.k0));t=this.long0;n=this.lat0;if(l<=r["b"]){e.x=t;e.y=n;return e}n=Math.asin(Math.cos(c)*this.sinlat0+e.y*Math.sin(c)*this.coslat0/l);if(Math.abs(this.coslat0)<r["b"]){if(this.lat0>0){t=Object(u["a"])(this.long0+Math.atan2(e.x,-1*e.y))}else{t=Object(u["a"])(this.long0+Math.atan2(e.x,e.y))}}else{t=Object(u["a"])(this.long0+Math.atan2(e.x*Math.sin(c),l*this.coslat0*Math.cos(c)-e.y*this.sinlat0*Math.sin(c)))}e.x=t;e.y=n;return e}else{if(Math.abs(this.coslat0)<=r["b"]){if(l<=r["b"]){n=this.lat0;t=this.long0;e.x=t;e.y=n;return e}e.x*=this.con;e.y*=this.con;i=l*this.cons/(2*this.a*this.k0);n=this.con*Object(s["a"])(this.e,i);t=this.con*Object(u["a"])(this.con*this.long0+Math.atan2(e.x,-1*e.y))}else{a=2*Math.atan(l*this.cosX0/(2*this.a*this.k0*this.ms1));t=this.long0;if(l<=r["b"]){o=this.X0}else{o=Math.asin(Math.cos(a)*this.sinX0+e.y*Math.sin(a)*this.cosX0/l);t=Object(u["a"])(this.long0+Math.atan2(e.x*Math.sin(a),l*this.cosX0*Math.cos(a)-e.y*this.sinX0*Math.sin(a)))}n=-1*Object(s["a"])(this.e,Math.tan(.5*(r["d"]+o)))}}e.x=t;e.y=n;return e}var p=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"];t["default"]={init:c,forward:f,inverse:d,names:p,ssfn_:l}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t["init"]=r;t["forward"]=i;t["inverse"]=a;n.d(t,"names",function(){return o});function r(){var e=this.lat0;this.lambda0=this.long0;var t=Math.sin(e);var n=this.a;var r=this.rf;var i=1/r;var a=2*i-Math.pow(i,2);var o=this.e=Math.sqrt(a);this.R=this.k0*n*Math.sqrt(1-a)/(1-a*Math.pow(t,2));this.alpha=Math.sqrt(1+a/(1-a)*Math.pow(Math.cos(e),4));this.b0=Math.asin(t/this.alpha);var s=Math.log(Math.tan(Math.PI/4+this.b0/2));var u=Math.log(Math.tan(Math.PI/4+e/2));var l=Math.log((1+o*t)/(1-o*t));this.K=s-this.alpha*u+this.alpha*o/2*l}function i(e){var t=Math.log(Math.tan(Math.PI/4-e.y/2));var n=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y)));var r=-this.alpha*(t+n)+this.K;var i=2*(Math.atan(Math.exp(r))-Math.PI/4);var a=this.alpha*(e.x-this.lambda0);var o=Math.atan(Math.sin(a)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(a)));var s=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(a));e.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0;e.x=this.R*o+this.x0;return e}function a(e){var t=e.x-this.x0;var n=e.y-this.y0;var r=t/this.R;var i=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4);var a=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(r));var o=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(i)));var s=this.lambda0+o/this.alpha;var u=0;var l=a;var c=-1e3;var f=0;while(Math.abs(l-c)>1e-7){if(++f>20){return}u=1/this.alpha*(Math.log(Math.tan(Math.PI/4+a/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(l))/2));c=l;l=2*Math.atan(Math.exp(u))-Math.PI/2}e.x=s;e.y=l;return e}var o=["somerc"];t["default"]={init:r,forward:i,inverse:a,names:o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t["init"]=s;t["forward"]=u;t["inverse"]=l;n.d(t,"names",function(){return c});var r=n(97);var i=n(12);var a=n(98);var o=n(7);function s(){this.no_off=this.no_off||false;this.no_rot=this.no_rot||false;if(isNaN(this.k0)){this.k0=1}var e=Math.sin(this.lat0);var t=Math.cos(this.lat0);var n=this.e*e;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(t,4));this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-n*n);var a=Object(r["a"])(this.e,this.lat0,e);var o=this.bl/t*Math.sqrt((1-this.es)/(1-n*n));if(o*o<1){o=1}var s;var u;if(!isNaN(this.longc)){if(this.lat0>=0){s=o+Math.sqrt(o*o-1)}else{s=o-Math.sqrt(o*o-1)}this.el=s*Math.pow(a,this.bl);u=.5*(s-1/s);this.gamma0=Math.asin(Math.sin(this.alpha)/o);this.long0=this.longc-Math.asin(u*Math.tan(this.gamma0))/this.bl}else{var l=Object(r["a"])(this.e,this.lat1,Math.sin(this.lat1));var c=Object(r["a"])(this.e,this.lat2,Math.sin(this.lat2));if(this.lat0>=0){this.el=(o+Math.sqrt(o*o-1))*Math.pow(a,this.bl)}else{this.el=(o-Math.sqrt(o*o-1))*Math.pow(a,this.bl)}var f=Math.pow(l,this.bl);var d=Math.pow(c,this.bl);s=this.el/f;u=.5*(s-1/s);var p=(this.el*this.el-d*f)/(this.el*this.el+d*f);var h=(d-f)/(d+f);var g=Object(i["a"])(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(p*Math.tan(.5*this.bl*g)/h)/this.bl;this.long0=Object(i["a"])(this.long0);var m=Object(i["a"])(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*m)/u);this.alpha=Math.asin(o*Math.sin(this.gamma0))}if(this.no_off){this.uc=0}else{if(this.lat0>=0){this.uc=this.al/this.bl*Math.atan2(Math.sqrt(o*o-1),Math.cos(this.alpha))}else{this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(o*o-1),Math.cos(this.alpha))}}}function u(e){var t=e.x;var n=e.y;var a=Object(i["a"])(t-this.long0);var s,u;var l;if(Math.abs(Math.abs(n)-o["d"])<=o["b"]){if(n>0){l=-1}else{l=1}u=this.al/this.bl*Math.log(Math.tan(o["c"]+l*this.gamma0*.5));s=-1*l*o["d"]*this.al/this.bl}else{var c=Object(r["a"])(this.e,n,Math.sin(n));var f=this.el/Math.pow(c,this.bl);var d=.5*(f-1/f);var p=.5*(f+1/f);var h=Math.sin(this.bl*a);var g=(d*Math.sin(this.gamma0)-h*Math.cos(this.gamma0))/p;if(Math.abs(Math.abs(g)-1)<=o["b"]){u=Number.POSITIVE_INFINITY}else{u=.5*this.al*Math.log((1-g)/(1+g))/this.bl}if(Math.abs(Math.cos(this.bl*a))<=o["b"]){s=this.al*this.bl*a}else{s=this.al*Math.atan2(d*Math.cos(this.gamma0)+h*Math.sin(this.gamma0),Math.cos(this.bl*a))/this.bl}}if(this.no_rot){e.x=this.x0+s;e.y=this.y0+u}else{s-=this.uc;e.x=this.x0+u*Math.cos(this.alpha)+s*Math.sin(this.alpha);e.y=this.y0+s*Math.cos(this.alpha)-u*Math.sin(this.alpha)}return e}function l(e){var t,n;if(this.no_rot){n=e.y-this.y0;t=e.x-this.x0}else{n=(e.x-this.x0)*Math.cos(this.alpha)-(e.y-this.y0)*Math.sin(this.alpha);t=(e.y-this.y0)*Math.cos(this.alpha)+(e.x-this.x0)*Math.sin(this.alpha);t+=this.uc}var r=Math.exp(-1*this.bl*n/this.al);var s=.5*(r-1/r);var u=.5*(r+1/r);var l=Math.sin(this.bl*t/this.al);var c=(l*Math.cos(this.gamma0)+s*Math.sin(this.gamma0))/u;var f=Math.pow(this.el/Math.sqrt((1+c)/(1-c)),1/this.bl);if(Math.abs(c-1)<o["b"]){e.x=this.long0;e.y=o["d"]}else if(Math.abs(c+1)<o["b"]){e.x=this.long0;e.y=-1*o["d"]}else{e.y=Object(a["a"])(this.e,f);e.x=Object(i["a"])(this.long0-Math.atan2(s*Math.cos(this.gamma0)-l*Math.sin(this.gamma0),Math.cos(this.bl*t/this.al))/this.bl)}return e}var c=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"];t["default"]={init:s,forward:u,inverse:l,names:c}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t["init"]=l;t["forward"]=c;t["inverse"]=f;n.d(t,"names",function(){return d});var r=n(64);var i=n(97);var a=n(73);var o=n(12);var s=n(98);var u=n(7);function l(){if(!this.lat2){this.lat2=this.lat1}if(!this.k0){this.k0=1}this.x0=this.x0||0;this.y0=this.y0||0;if(Math.abs(this.lat1+this.lat2)<u["b"]){return}var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var t=Math.sin(this.lat1);var n=Math.cos(this.lat1);var a=Object(r["a"])(this.e,t,n);var o=Object(i["a"])(this.e,this.lat1,t);var s=Math.sin(this.lat2);var l=Math.cos(this.lat2);var c=Object(r["a"])(this.e,s,l);var f=Object(i["a"])(this.e,this.lat2,s);var d=Object(i["a"])(this.e,this.lat0,Math.sin(this.lat0));if(Math.abs(this.lat1-this.lat2)>u["b"]){this.ns=Math.log(a/c)/Math.log(o/f)}else{this.ns=t}if(isNaN(this.ns)){this.ns=t}this.f0=a/(this.ns*Math.pow(o,this.ns));this.rh=this.a*this.f0*Math.pow(d,this.ns);if(!this.title){this.title="Lambert Conformal Conic"}}function c(e){var t=e.x;var n=e.y;if(Math.abs(2*Math.abs(n)-Math.PI)<=u["b"]){n=Object(a["a"])(n)*(u["d"]-2*u["b"])}var r=Math.abs(Math.abs(n)-u["d"]);var s,l;if(r>u["b"]){s=Object(i["a"])(this.e,n,Math.sin(n));l=this.a*this.f0*Math.pow(s,this.ns)}else{r=n*this.ns;if(r<=0){return null}l=0}var c=this.ns*Object(o["a"])(t-this.long0);e.x=this.k0*(l*Math.sin(c))+this.x0;e.y=this.k0*(this.rh-l*Math.cos(c))+this.y0;return e}function f(e){var t,n,r;var i,a;var l=(e.x-this.x0)/this.k0;var c=this.rh-(e.y-this.y0)/this.k0;if(this.ns>0){t=Math.sqrt(l*l+c*c);n=1}else{t=-Math.sqrt(l*l+c*c);n=-1}var f=0;if(t!==0){f=Math.atan2(n*l,n*c)}if(t!==0||this.ns>0){n=1/this.ns;r=Math.pow(t/(this.a*this.f0),n);i=Object(s["a"])(this.e,r);if(i===-9999){return null}}else{i=-u["d"]}a=Object(o["a"])(f/this.ns+this.long0);e.x=a;e.y=i;return e}var d=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"];t["default"]={init:l,forward:c,inverse:f,names:d}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t["init"]=i;t["forward"]=a;t["inverse"]=o;n.d(t,"names",function(){return s});var r=n(12);function i(){this.a=6377397.155;this.es=.006674372230614;this.e=Math.sqrt(this.es);if(!this.lat0){this.lat0=.863937979737193}if(!this.long0){this.long0=.7417649320975901-.308341501185665}if(!this.k0){this.k0=.9999}this.s45=.785398163397448;this.s90=2*this.s45;this.fi0=this.lat0;this.e2=this.es;this.e=Math.sqrt(this.e2);this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2));this.uq=1.04216856380474;this.u0=Math.asin(Math.sin(this.fi0)/this.alfa);this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2);this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g;this.k1=this.k0;this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2));this.s0=1.37008346281555;this.n=Math.sin(this.s0);this.ro0=this.k1*this.n0/Math.tan(this.s0);this.ad=this.s90-this.uq}function a(e){var t,n,i,a,o,s,u;var l=e.x;var c=e.y;var f=Object(r["a"])(l-this.long0);t=Math.pow((1+this.e*Math.sin(c))/(1-this.e*Math.sin(c)),this.alfa*this.e/2);n=2*(Math.atan(this.k*Math.pow(Math.tan(c/2+this.s45),this.alfa)/t)-this.s45);i=-f*this.alfa;a=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(i));o=Math.asin(Math.cos(n)*Math.sin(i)/Math.cos(a));s=this.n*o;u=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(a/2+this.s45),this.n);e.y=u*Math.cos(s)/1;e.x=u*Math.sin(s)/1;if(!this.czech){e.y*=-1;e.x*=-1}return e}function o(e){var t,n,r,i,a,o,s;var u;var l=e.x;e.x=e.y;e.y=l;if(!this.czech){e.y*=-1;e.x*=-1}o=Math.sqrt(e.x*e.x+e.y*e.y);a=Math.atan2(e.y,e.x);i=a/Math.sin(this.s0);r=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45);t=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i));n=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(t));e.x=this.long0-n/this.alfa;s=t;u=0;var c=0;do{e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(s))/(1-this.e*Math.sin(s)),this.e/2))-this.s45);if(Math.abs(s-e.y)<1e-10){u=1}s=e.y;c+=1}while(u===0&&c<15);if(c>=15){return null}return e}var s=["Krovak","krovak"];t["default"]={init:i,forward:a,inverse:o,names:s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t["init"]=p;t["forward"]=h;t["inverse"]=g;n.d(t,"names",function(){return m});var r=n(99);var i=n(100);var a=n(101);var o=n(102);var s=n(103);var u=n(142);var l=n(12);var c=n(74);var f=n(143);var d=n(7);function p(){if(!this.sphere){this.e0=Object(i["a"])(this.es);this.e1=Object(a["a"])(this.es);this.e2=Object(o["a"])(this.es);this.e3=Object(s["a"])(this.es);this.ml0=this.a*Object(r["a"])(this.e0,this.e1,this.e2,this.e3,this.lat0)}}function h(e){var t,n;var i=e.x;var a=e.y;i=Object(l["a"])(i-this.long0);if(this.sphere){t=this.a*Math.asin(Math.cos(a)*Math.sin(i));n=this.a*(Math.atan2(Math.tan(a),Math.cos(i))-this.lat0)}else{var o=Math.sin(a);var s=Math.cos(a);var c=Object(u["a"])(this.a,this.e,o);var f=Math.tan(a)*Math.tan(a);var d=i*Math.cos(a);var p=d*d;var h=this.es*s*s/(1-this.es);var g=this.a*Object(r["a"])(this.e0,this.e1,this.e2,this.e3,a);t=c*d*(1-p*f*(1/6-(8-f+8*h)*p/120));n=g-this.ml0+c*o/s*p*(.5+(5-f+6*h)*p/24)}e.x=t+this.x0;e.y=n+this.y0;return e}function g(e){e.x-=this.x0;e.y-=this.y0;var t=e.x/this.a;var n=e.y/this.a;var r,i;if(this.sphere){var a=n+this.lat0;r=Math.asin(Math.sin(a)*Math.cos(t));i=Math.atan2(Math.tan(t),Math.cos(a))}else{var o=this.ml0/this.a+n;var s=Object(f["a"])(o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(s)-d["d"])<=d["b"]){e.x=this.long0;e.y=d["d"];if(n<0){e.y*=-1}return e}var p=Object(u["a"])(this.a,this.e,Math.sin(s));var h=p*p*p/this.a/this.a*(1-this.es);var g=Math.pow(Math.tan(s),2);var m=t*this.a/p;var v=m*m;r=s-p*Math.tan(s)/h*m*m*(.5-(1+3*g)*m*m/24);i=m*(1-v*(g/3+(1+3*g)*g*v/15))/Math.cos(s)}e.x=Object(l["a"])(i+this.long0);e.y=Object(c["a"])(r);return e}var m=["Cassini","Cassini_Soldner","cass"];t["default"]={init:p,forward:h,inverse:g,names:m}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});n.d(t,"S_POLE",function(){return o});n.d(t,"N_POLE",function(){return s});n.d(t,"EQUIT",function(){return u});n.d(t,"OBLIQ",function(){return l});t["init"]=c;t["forward"]=f;t["inverse"]=d;n.d(t,"names",function(){return x});var r=n(7);var i=n(144);var a=n(12);var o=1;var s=2;var u=3;var l=4;function c(){var e=Math.abs(this.lat0);if(Math.abs(e-r["d"])<r["b"]){this.mode=this.lat0<0?this.S_POLE:this.N_POLE}else if(Math.abs(e)<r["b"]){this.mode=this.EQUIT}else{this.mode=this.OBLIQ}if(this.es>0){var t;this.qp=Object(i["a"])(this.e,1);this.mmf=.5/(1-this.es);this.apa=b(this.es);switch(this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp);this.dd=1/this.rq;this.xmf=1;this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp);t=Math.sin(this.lat0);this.sinb1=Object(i["a"])(this.e,t)/this.qp;this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1);this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1);this.ymf=(this.xmf=this.rq)/this.dd;this.xmf*=this.dd;break}}else{if(this.mode===this.OBLIQ){this.sinph0=Math.sin(this.lat0);this.cosph0=Math.cos(this.lat0)}}}function f(e){var t,n,o,s,u,l,c,f,d,p;var h=e.x;var g=e.y;h=Object(a["a"])(h-this.long0);if(this.sphere){u=Math.sin(g);p=Math.cos(g);o=Math.cos(h);if(this.mode===this.OBLIQ||this.mode===this.EQUIT){n=this.mode===this.EQUIT?1+p*o:1+this.sinph0*u+this.cosph0*p*o;if(n<=r["b"]){return null}n=Math.sqrt(2/n);t=n*p*Math.sin(h);n*=this.mode===this.EQUIT?u:this.cosph0*u-this.sinph0*p*o}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE){o=-o}if(Math.abs(g+this.phi0)<r["b"]){return null}n=r["c"]-g*.5;n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n));t=n*Math.sin(h);n*=o}}else{c=0;f=0;d=0;o=Math.cos(h);s=Math.sin(h);u=Math.sin(g);l=Object(i["a"])(this.e,u);if(this.mode===this.OBLIQ||this.mode===this.EQUIT){c=l/this.qp;f=Math.sqrt(1-c*c)}switch(this.mode){case this.OBLIQ:d=1+this.sinb1*c+this.cosb1*f*o;break;case this.EQUIT:d=1+f*o;break;case this.N_POLE:d=r["d"]+g;l=this.qp-l;break;case this.S_POLE:d=g-r["d"];l=this.qp+l;break}if(Math.abs(d)<r["b"]){return null}switch(this.mode){case this.OBLIQ:case this.EQUIT:d=Math.sqrt(2/d);if(this.mode===this.OBLIQ){n=this.ymf*d*(this.cosb1*c-this.sinb1*f*o)}else{n=(d=Math.sqrt(2/(1+f*o)))*c*this.ymf}t=this.xmf*d*f*s;break;case this.N_POLE:case this.S_POLE:if(l>=0){t=(d=Math.sqrt(l))*s;n=o*(this.mode===this.S_POLE?d:-d)}else{t=n=0}break}}e.x=this.a*t+this.x0;e.y=this.a*n+this.y0;return e}function d(e){e.x-=this.x0;e.y-=this.y0;var t=e.x/this.a;var n=e.y/this.a;var i,o,s,u,l,c,f;if(this.sphere){var d=0,p,h=0;p=Math.sqrt(t*t+n*n);o=p*.5;if(o>1){return null}o=2*Math.asin(o);if(this.mode===this.OBLIQ||this.mode===this.EQUIT){h=Math.sin(o);d=Math.cos(o)}switch(this.mode){case this.EQUIT:o=Math.abs(p)<=r["b"]?0:Math.asin(n*h/p);t*=h;n=d*p;break;case this.OBLIQ:o=Math.abs(p)<=r["b"]?this.phi0:Math.asin(d*this.sinph0+n*h*this.cosph0/p);t*=h*this.cosph0;n=(d-Math.sin(o)*this.sinph0)*p;break;case this.N_POLE:n=-n;o=r["d"]-o;break;case this.S_POLE:o-=r["d"];break}i=n===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(t,n)}else{f=0;if(this.mode===this.OBLIQ||this.mode===this.EQUIT){t/=this.dd;n*=this.dd;c=Math.sqrt(t*t+n*n);if(c<r["b"]){e.x=0;e.y=this.phi0;return e}u=2*Math.asin(.5*c/this.rq);s=Math.cos(u);t*=u=Math.sin(u);if(this.mode===this.OBLIQ){f=s*this.sinb1+n*u*this.cosb1/c;l=this.qp*f;n=c*this.cosb1*s-n*this.sinb1*u}else{f=n*u/c;l=this.qp*f;n=c*s}}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE){n=-n}l=t*t+n*n;if(!l){e.x=0;e.y=this.phi0;return e}f=1-l/this.qp;if(this.mode===this.S_POLE){f=-f}}i=Math.atan2(t,n);o=M(Math.asin(f),this.apa)}e.x=Object(a["a"])(this.long0+i);e.y=o;return e}var p=.3333333333333333;var h=.17222222222222222;var g=.10257936507936508;var m=.06388888888888888;var v=.0664021164021164;var y=.016415012942191543;function b(e){var t;var n=[];n[0]=e*p;t=e*e;n[0]+=t*h;n[1]=t*m;t*=e;n[0]+=t*g;n[1]+=t*v;n[2]=t*y;return n}function M(e,t){var n=e+e;return e+t[0]*Math.sin(n)+t[1]*Math.sin(n+n)+t[2]*Math.sin(n+n+n)}var x=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];t["default"]={init:c,forward:f,inverse:d,names:x,S_POLE:o,N_POLE:s,EQUIT:u,OBLIQ:l}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t["init"]=u;t["forward"]=l;t["inverse"]=c;t["phi1z"]=f;n.d(t,"names",function(){return d});var r=n(64);var i=n(144);var a=n(12);var o=n(65);var s=n(7);function u(){if(Math.abs(this.lat1+this.lat2)<s["b"]){return}this.temp=this.b/this.a;this.es=1-Math.pow(this.temp,2);this.e3=Math.sqrt(this.es);this.sin_po=Math.sin(this.lat1);this.cos_po=Math.cos(this.lat1);this.t1=this.sin_po;this.con=this.sin_po;this.ms1=Object(r["a"])(this.e3,this.sin_po,this.cos_po);this.qs1=Object(i["a"])(this.e3,this.sin_po,this.cos_po);this.sin_po=Math.sin(this.lat2);this.cos_po=Math.cos(this.lat2);this.t2=this.sin_po;this.ms2=Object(r["a"])(this.e3,this.sin_po,this.cos_po);this.qs2=Object(i["a"])(this.e3,this.sin_po,this.cos_po);this.sin_po=Math.sin(this.lat0);this.cos_po=Math.cos(this.lat0);this.t3=this.sin_po;this.qs0=Object(i["a"])(this.e3,this.sin_po,this.cos_po);if(Math.abs(this.lat1-this.lat2)>s["b"]){this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1)}else{this.ns0=this.con}this.c=this.ms1*this.ms1+this.ns0*this.qs1;this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0}function l(e){var t=e.x;var n=e.y;this.sin_phi=Math.sin(n);this.cos_phi=Math.cos(n);var r=Object(i["a"])(this.e3,this.sin_phi,this.cos_phi);var o=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0;var s=this.ns0*Object(a["a"])(t-this.long0);var u=o*Math.sin(s)+this.x0;var l=this.rh-o*Math.cos(s)+this.y0;e.x=u;e.y=l;return e}function c(e){var t,n,r,i,o,s;e.x-=this.x0;e.y=this.rh-e.y+this.y0;if(this.ns0>=0){t=Math.sqrt(e.x*e.x+e.y*e.y);r=1}else{t=-Math.sqrt(e.x*e.x+e.y*e.y);r=-1}i=0;if(t!==0){i=Math.atan2(r*e.x,r*e.y)}r=t*this.ns0/this.a;if(this.sphere){s=Math.asin((this.c-r*r)/(2*this.ns0))}else{n=(this.c-r*r)/this.ns0;s=this.phi1z(this.e3,n)}o=Object(a["a"])(i/this.ns0+this.long0);e.x=o;e.y=s;return e}function f(e,t){var n,r,i,a,u;var l=Object(o["a"])(.5*t);if(e<s["b"]){return l}var c=e*e;for(var f=1;f<=25;f++){n=Math.sin(l);r=Math.cos(l);i=e*n;a=1-i*i;u=.5*a*a/r*(t/(1-c)-n/a+.5/e*Math.log((1-i)/(1+i)));l=l+u;if(Math.abs(u)<=1e-7){return l}}return null}var d=["Albers_Conic_Equal_Area","Albers","aea"];t["default"]={init:u,forward:l,inverse:c,names:d,phi1z:f}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t["init"]=o;t["forward"]=s;t["inverse"]=u;n.d(t,"names",function(){return l});var r=n(12);var i=n(65);var a=n(7);function o(){this.sin_p14=Math.sin(this.lat0);this.cos_p14=Math.cos(this.lat0);this.infinity_dist=1e3*this.a;this.rc=1}function s(e){var t,n;var i;var o;var s;var u;var l,c;var f=e.x;var d=e.y;i=Object(r["a"])(f-this.long0);t=Math.sin(d);n=Math.cos(d);o=Math.cos(i);u=this.sin_p14*t+this.cos_p14*n*o;s=1;if(u>0||Math.abs(u)<=a["b"]){l=this.x0+this.a*s*n*Math.sin(i)/u;c=this.y0+this.a*s*(this.cos_p14*t-this.sin_p14*n*o)/u}else{l=this.x0+this.infinity_dist*n*Math.sin(i);c=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*n*o)}e.x=l;e.y=c;return e}function u(e){var t;var n,a;var o;var s,u;e.x=(e.x-this.x0)/this.a;e.y=(e.y-this.y0)/this.a;e.x/=this.k0;e.y/=this.k0;if(t=Math.sqrt(e.x*e.x+e.y*e.y)){o=Math.atan2(t,this.rc);n=Math.sin(o);a=Math.cos(o);u=Object(i["a"])(a*this.sin_p14+e.y*n*this.cos_p14/t);s=Math.atan2(e.x*n,t*this.cos_p14*a-e.y*this.sin_p14*n);s=Object(r["a"])(this.long0+s)}else{u=this.phic0;s=0}e.x=s;e.y=u;return e}var l=["gnom"];t["default"]={init:o,forward:s,inverse:u,names:l}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t["init"]=s;t["forward"]=u;t["inverse"]=l;n.d(t,"names",function(){return c});var r=n(12);var i=n(144);var a=n(64);var o=n(504);function s(){if(!this.sphere){this.k0=Object(a["a"])(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))}}function u(e){var t=e.x;var n=e.y;var a,o;var s=Object(r["a"])(t-this.long0);if(this.sphere){a=this.x0+this.a*s*Math.cos(this.lat_ts);o=this.y0+this.a*Math.sin(n)/Math.cos(this.lat_ts)}else{var u=Object(i["a"])(this.e,Math.sin(n));a=this.x0+this.a*this.k0*s;o=this.y0+this.a*u*.5/this.k0}e.x=a;e.y=o;return e}function l(e){e.x-=this.x0;e.y-=this.y0;var t,n;if(this.sphere){t=Object(r["a"])(this.long0+e.x/this.a/Math.cos(this.lat_ts));n=Math.asin(e.y/this.a*Math.cos(this.lat_ts))}else{n=Object(o["a"])(this.e,2*e.y*this.k0/this.a);t=Object(r["a"])(this.long0+e.x/(this.a*this.k0))}e.x=t;e.y=n;return e}var c=["cea"];t["default"]={init:s,forward:u,inverse:l,names:c}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t["init"]=a;t["forward"]=o;t["inverse"]=s;n.d(t,"names",function(){return u});var r=n(12);var i=n(74);function a(){this.x0=this.x0||0;this.y0=this.y0||0;this.lat0=this.lat0||0;this.long0=this.long0||0;this.lat_ts=this.lat_ts||0;this.title=this.title||"Equidistant Cylindrical (Plate Carre)";this.rc=Math.cos(this.lat_ts)}function o(e){var t=e.x;var n=e.y;var a=Object(r["a"])(t-this.long0);var o=Object(i["a"])(n-this.lat0);e.x=this.x0+this.a*a*this.rc;e.y=this.y0+this.a*o;return e}function s(e){var t=e.x;var n=e.y;e.x=Object(r["a"])(this.long0+(t-this.x0)/(this.a*this.rc));e.y=Object(i["a"])(this.lat0+(n-this.y0)/this.a);return e}var u=["Equirectangular","Equidistant_Cylindrical","eqc"];t["default"]={init:a,forward:o,inverse:s,names:u}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t["init"]=p;t["forward"]=h;t["inverse"]=g;n.d(t,"names",function(){return m});var r=n(100);var i=n(101);var a=n(102);var o=n(103);var s=n(12);var u=n(74);var l=n(99);var c=n(7);var f=n(142);var d=20;function p(){this.temp=this.b/this.a;this.es=1-Math.pow(this.temp,2);this.e=Math.sqrt(this.es);this.e0=Object(r["a"])(this.es);this.e1=Object(i["a"])(this.es);this.e2=Object(a["a"])(this.es);this.e3=Object(o["a"])(this.es);this.ml0=this.a*Object(l["a"])(this.e0,this.e1,this.e2,this.e3,this.lat0)}function h(e){var t=e.x;var n=e.y;var r,i,a;var o=Object(s["a"])(t-this.long0);a=o*Math.sin(n);if(this.sphere){if(Math.abs(n)<=c["b"]){r=this.a*o;i=-1*this.a*this.lat0}else{r=this.a*Math.sin(a)/Math.tan(n);i=this.a*(Object(u["a"])(n-this.lat0)+(1-Math.cos(a))/Math.tan(n))}}else{if(Math.abs(n)<=c["b"]){r=this.a*o;i=-1*this.ml0}else{var d=Object(f["a"])(this.a,this.e,Math.sin(n))/Math.tan(n);r=d*Math.sin(a);i=this.a*Object(l["a"])(this.e0,this.e1,this.e2,this.e3,n)-this.ml0+d*(1-Math.cos(a))}}e.x=r+this.x0;e.y=i+this.y0;return e}function g(e){var t,n,r,i,a;var o,u;var f,p;r=e.x-this.x0;i=e.y-this.y0;if(this.sphere){if(Math.abs(i+this.a*this.lat0)<=c["b"]){t=Object(s["a"])(r/this.a+this.long0);n=0}else{o=this.lat0+i/this.a;u=r*r/this.a/this.a+o*o;f=o;var h;for(a=d;a;--a){h=Math.tan(f);p=-1*(o*(f*h+1)-f-.5*(f*f+u)*h)/((f-o)/h-1);f+=p;if(Math.abs(p)<=c["b"]){n=f;break}}t=Object(s["a"])(this.long0+Math.asin(r*Math.tan(f)/this.a)/Math.sin(n))}}else{if(Math.abs(i+this.ml0)<=c["b"]){n=0;t=Object(s["a"])(this.long0+r/this.a)}else{o=(this.ml0+i)/this.a;u=r*r/this.a/this.a+o*o;f=o;var g,m,v,y;var b;for(a=d;a;--a){b=this.e*Math.sin(f);g=Math.sqrt(1-b*b)*Math.tan(f);m=this.a*Object(l["a"])(this.e0,this.e1,this.e2,this.e3,f);v=this.e0-2*this.e1*Math.cos(2*f)+4*this.e2*Math.cos(4*f)-6*this.e3*Math.cos(6*f);y=m/this.a;p=(o*(g*y+1)-y-.5*g*(y*y+u))/(this.es*Math.sin(2*f)*(y*y+u-2*o*y)/(4*g)+(o-y)*(g*v-2/Math.sin(2*f))-v);f-=p;if(Math.abs(p)<=c["b"]){n=f;break}}g=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n);t=Object(s["a"])(this.long0+Math.asin(r*g/this.a)/Math.sin(n))}}e.x=t;e.y=n;return e}var m=["Polyconic","poly"];t["default"]={init:p,forward:h,inverse:g,names:m}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});n.d(t,"iterations",function(){return i});t["init"]=a;t["forward"]=o;t["inverse"]=s;n.d(t,"names",function(){return u});var r=n(7);var i=1;function a(){this.A=[];this.A[1]=.6399175073;this.A[2]=-.1358797613;this.A[3]=.063294409;this.A[4]=-.02526853;this.A[5]=.0117879;this.A[6]=-.0055161;this.A[7]=.0026906;this.A[8]=-.001333;this.A[9]=67e-5;this.A[10]=-34e-5;this.B_re=[];this.B_im=[];this.B_re[1]=.7557853228;this.B_im[1]=0;this.B_re[2]=.249204646;this.B_im[2]=.003371507;this.B_re[3]=-.001541739;this.B_im[3]=.04105856;this.B_re[4]=-.10162907;this.B_im[4]=.01727609;this.B_re[5]=-.26623489;this.B_im[5]=-.36249218;this.B_re[6]=-.6870983;this.B_im[6]=-1.1651967;this.C_re=[];this.C_im=[];this.C_re[1]=1.3231270439;this.C_im[1]=0;this.C_re[2]=-.577245789;this.C_im[2]=-.007809598;this.C_re[3]=.508307513;this.C_im[3]=-.112208952;this.C_re[4]=-.15094762;this.C_im[4]=.18200602;this.C_re[5]=1.01418179;this.C_im[5]=1.64497696;this.C_re[6]=1.9660549;this.C_im[6]=2.5127645;this.D=[];this.D[1]=1.5627014243;this.D[2]=.5185406398;this.D[3]=-.03333098;this.D[4]=-.1052906;this.D[5]=-.0368594;this.D[6]=.007317;this.D[7]=.0122;this.D[8]=.00394;this.D[9]=-.0013}function o(e){var t;var n=e.x;var i=e.y;var a=i-this.lat0;var o=n-this.long0;var s=a/r["l"]*1e-5;var u=o;var l=1;var c=0;for(t=1;t<=10;t++){l=l*s;c=c+this.A[t]*l}var f=c;var d=u;var p=1;var h=0;var g;var m;var v=0;var y=0;for(t=1;t<=6;t++){g=p*f-h*d;m=h*f+p*d;p=g;h=m;v=v+this.B_re[t]*p-this.B_im[t]*h;y=y+this.B_im[t]*p+this.B_re[t]*h}e.x=y*this.a+this.x0;e.y=v*this.a+this.y0;return e}function s(e){var t;var n=e.x;var i=e.y;var a=n-this.x0;var o=i-this.y0;var s=o/this.a;var u=a/this.a;var l=1;var c=0;var f;var d;var p=0;var h=0;for(t=1;t<=6;t++){f=l*s-c*u;d=c*s+l*u;l=f;c=d;p=p+this.C_re[t]*l-this.C_im[t]*c;h=h+this.C_im[t]*l+this.C_re[t]*c}for(var g=0;g<this.iterations;g++){var m=p;var v=h;var y;var b;var M=s;var x=u;for(t=2;t<=6;t++){y=m*p-v*h;b=v*p+m*h;m=y;v=b;M=M+(t-1)*(this.B_re[t]*m-this.B_im[t]*v);x=x+(t-1)*(this.B_im[t]*m+this.B_re[t]*v)}m=1;v=0;var w=this.B_re[1];var A=this.B_im[1];for(t=2;t<=6;t++){y=m*p-v*h;b=v*p+m*h;m=y;v=b;w=w+t*(this.B_re[t]*m-this.B_im[t]*v);A=A+t*(this.B_im[t]*m+this.B_re[t]*v)}var T=w*w+A*A;p=(M*w+x*A)/T;h=(x*w-M*A)/T}var C=p;var S=h;var D=1;var I=0;for(t=1;t<=9;t++){D=D*C;I=I+this.D[t]*D}var E=this.lat0+I*r["l"]*1e5;var N=this.long0+S;e.x=N;e.y=E;return e}var u=["New_Zealand_Map_Grid","nzmg"];t["default"]={init:a,forward:o,inverse:s,names:u}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t["init"]=i;t["forward"]=a;t["inverse"]=o;n.d(t,"names",function(){return s});var r=n(12);function i(){}function a(e){var t=e.x;var n=e.y;var i=Object(r["a"])(t-this.long0);var a=this.x0+this.a*i;var o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;e.x=a;e.y=o;return e}function o(e){e.x-=this.x0;e.y-=this.y0;var t=Object(r["a"])(this.long0+e.x/this.a);var n=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);e.x=t;e.y=n;return e}var s=["Miller_Cylindrical","mill"];t["default"]={init:i,forward:a,inverse:o,names:s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t["init"]=f;t["forward"]=d;t["inverse"]=p;n.d(t,"names",function(){return h});var r=n(12);var i=n(74);var a=n(199);var o=n(139);var s=n(200);var u=n(7);var l=n(65);var c=20;function f(){if(!this.sphere){this.en=Object(a["a"])(this.es)}else{this.n=1;this.m=0;this.es=0;this.C_y=Math.sqrt((this.m+1)/this.n);this.C_x=this.C_y/(this.m+1)}}function d(e){var t,n;var i=e.x;var a=e.y;i=Object(r["a"])(i-this.long0);if(this.sphere){if(!this.m){a=this.n!==1?Math.asin(this.n*Math.sin(a)):a}else{var s=this.n*Math.sin(a);for(var l=c;l;--l){var f=(this.m*a+Math.sin(a)-s)/(this.m+Math.cos(a));a-=f;if(Math.abs(f)<u["b"]){break}}}t=this.a*this.C_x*i*(this.m+Math.cos(a));n=this.a*this.C_y*a}else{var d=Math.sin(a);var p=Math.cos(a);n=this.a*Object(o["a"])(a,d,p,this.en);t=this.a*i*p/Math.sqrt(1-this.es*d*d)}e.x=t;e.y=n;return e}function p(e){var t,n,a,o;e.x-=this.x0;a=e.x/this.a;e.y-=this.y0;t=e.y/this.a;if(this.sphere){t/=this.C_y;a=a/(this.C_x*(this.m+Math.cos(t)));if(this.m){t=Object(l["a"])((this.m*t+Math.sin(t))/this.n)}else if(this.n!==1){t=Object(l["a"])(Math.sin(t)/this.n)}a=Object(r["a"])(a+this.long0);t=Object(i["a"])(t)}else{t=Object(s["a"])(e.y/this.a,this.es,this.en);o=Math.abs(t);if(o<u["d"]){o=Math.sin(t);n=this.long0+e.x*Math.sqrt(1-this.es*o*o)/(this.a*Math.cos(t));a=Object(r["a"])(n)}else if(o-u["b"]<u["d"]){a=this.long0}}e.x=a;e.y=t;return e}var h=["Sinusoidal","sinu"];t["default"]={init:f,forward:d,inverse:p,names:h}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t["init"]=a;t["forward"]=o;t["inverse"]=s;n.d(t,"names",function(){return u});var r=n(12);var i=n(7);function a(){}function o(e){var t=e.x;var n=e.y;var a=Object(r["a"])(t-this.long0);var o=n;var s=Math.PI*Math.sin(n);while(true){var u=-(o+Math.sin(o)-s)/(1+Math.cos(o));o+=u;if(Math.abs(u)<i["b"]){break}}o/=2;if(Math.PI/2-Math.abs(n)<i["b"]){a=0}var l=.900316316158*this.a*a*Math.cos(o)+this.x0;var c=1.4142135623731*this.a*Math.sin(o)+this.y0;e.x=l;e.y=c;return e}function s(e){var t;var n;e.x-=this.x0;e.y-=this.y0;n=e.y/(1.4142135623731*this.a);if(Math.abs(n)>.999999999999){n=.999999999999}t=Math.asin(n);var i=Object(r["a"])(this.long0+e.x/(.900316316158*this.a*Math.cos(t)));if(i<-Math.PI){i=-Math.PI}if(i>Math.PI){i=Math.PI}n=(2*t+Math.sin(2*t))/Math.PI;if(Math.abs(n)>1){n=1}var a=Math.asin(n);e.x=i;e.y=a;return e}var u=["Mollweide","moll"];t["default"]={init:a,forward:o,inverse:s,names:u}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t["init"]=p;t["forward"]=h;t["inverse"]=g;n.d(t,"names",function(){return m});var r=n(100);var i=n(101);var a=n(102);var o=n(103);var s=n(64);var u=n(99);var l=n(12);var c=n(74);var f=n(143);var d=n(7);function p(){if(Math.abs(this.lat1+this.lat2)<d["b"]){return}this.lat2=this.lat2||this.lat1;this.temp=this.b/this.a;this.es=1-Math.pow(this.temp,2);this.e=Math.sqrt(this.es);this.e0=Object(r["a"])(this.es);this.e1=Object(i["a"])(this.es);this.e2=Object(a["a"])(this.es);this.e3=Object(o["a"])(this.es);this.sinphi=Math.sin(this.lat1);this.cosphi=Math.cos(this.lat1);this.ms1=Object(s["a"])(this.e,this.sinphi,this.cosphi);this.ml1=Object(u["a"])(this.e0,this.e1,this.e2,this.e3,this.lat1);if(Math.abs(this.lat1-this.lat2)<d["b"]){this.ns=this.sinphi}else{this.sinphi=Math.sin(this.lat2);this.cosphi=Math.cos(this.lat2);this.ms2=Object(s["a"])(this.e,this.sinphi,this.cosphi);this.ml2=Object(u["a"])(this.e0,this.e1,this.e2,this.e3,this.lat2);this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)}this.g=this.ml1+this.ms1/this.ns;this.ml0=Object(u["a"])(this.e0,this.e1,this.e2,this.e3,this.lat0);this.rh=this.a*(this.g-this.ml0)}function h(e){var t=e.x;var n=e.y;var r;if(this.sphere){r=this.a*(this.g-n)}else{var i=Object(u["a"])(this.e0,this.e1,this.e2,this.e3,n);r=this.a*(this.g-i)}var a=this.ns*Object(l["a"])(t-this.long0);var o=this.x0+r*Math.sin(a);var s=this.y0+this.rh-r*Math.cos(a);e.x=o;e.y=s;return e}function g(e){e.x-=this.x0;e.y=this.rh-e.y+this.y0;var t,n,r,i;if(this.ns>=0){n=Math.sqrt(e.x*e.x+e.y*e.y);t=1}else{n=-Math.sqrt(e.x*e.x+e.y*e.y);t=-1}var a=0;if(n!==0){a=Math.atan2(t*e.x,t*e.y)}if(this.sphere){i=Object(l["a"])(this.long0+a/this.ns);r=Object(c["a"])(this.g-n/this.a);e.x=i;e.y=r;return e}else{var o=this.g-n/this.a;r=Object(f["a"])(o,this.e0,this.e1,this.e2,this.e3);i=Object(l["a"])(this.long0+a/this.ns);e.x=i;e.y=r;return e}}var m=["Equidistant_Conic","eqdc"];t["default"]={init:p,forward:h,inverse:g,names:m}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t["init"]=o;t["forward"]=s;t["inverse"]=u;n.d(t,"names",function(){return l});var r=n(12);var i=n(7);var a=n(65);function o(){this.R=this.a}function s(e){var t=e.x;var n=e.y;var o=Object(r["a"])(t-this.long0);var s,u;if(Math.abs(n)<=i["b"]){s=this.x0+this.R*o;u=this.y0}var l=Object(a["a"])(2*Math.abs(n/Math.PI));if(Math.abs(o)<=i["b"]||Math.abs(Math.abs(n)-i["d"])<=i["b"]){s=this.x0;if(n>=0){u=this.y0+Math.PI*this.R*Math.tan(.5*l)}else{u=this.y0+Math.PI*this.R*-Math.tan(.5*l)}}var c=.5*Math.abs(Math.PI/o-o/Math.PI);var f=c*c;var d=Math.sin(l);var p=Math.cos(l);var h=p/(d+p-1);var g=h*h;var m=h*(2/d-1);var v=m*m;var y=Math.PI*this.R*(c*(h-v)+Math.sqrt(f*(h-v)*(h-v)-(v+f)*(g-v)))/(v+f);if(o<0){y=-y}s=this.x0+y;var b=f+h;y=Math.PI*this.R*(m*b-c*Math.sqrt((v+f)*(f+1)-b*b))/(v+f);if(n>=0){u=this.y0+y}else{u=this.y0-y}e.x=s;e.y=u;return e}function u(e){var t,n;var a,o,s,u,l,c;var f;var d;var p;var h;var g;e.x-=this.x0;e.y-=this.y0;p=Math.PI*this.R;a=e.x/p;o=e.y/p;s=a*a+o*o;u=-Math.abs(o)*(1+s);l=u-2*o*o+a*a;c=-2*u+1+2*o*o+s*s;g=o*o/c+(2*l*l*l/c/c/c-9*u*l/c/c)/27;f=(u-l*l/3/c)/c;d=2*Math.sqrt(-f/3);p=3*g/f/d;if(Math.abs(p)>1){if(p>=0){p=1}else{p=-1}}h=Math.acos(p)/3;if(e.y>=0){n=(-d*Math.cos(h+Math.PI/3)-l/3/c)*Math.PI}else{n=-(-d*Math.cos(h+Math.PI/3)-l/3/c)*Math.PI}if(Math.abs(a)<i["b"]){t=this.long0}else{t=Object(r["a"])(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(a*a-o*o)+s*s))/2/a)}e.x=t;e.y=n;return e}var l=["Van_der_Grinten_I","VanDerGrinten","vandg"];t["default"]={init:o,forward:s,inverse:u,names:l}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t["init"]=p;t["forward"]=h;t["inverse"]=g;n.d(t,"names",function(){return m});var r=n(12);var i=n(7);var a=n(99);var o=n(100);var s=n(101);var u=n(102);var l=n(103);var c=n(142);var f=n(65);var d=n(143);function p(){this.sin_p12=Math.sin(this.lat0);this.cos_p12=Math.cos(this.lat0)}function h(e){var t=e.x;var n=e.y;var f=Math.sin(e.y);var d=Math.cos(e.y);var p=Object(r["a"])(t-this.long0);var h,g,m,v,y,b,M,x,w,A,T,C,S,D,I,E,N,O,_,L,P,k,R;if(this.sphere){if(Math.abs(this.sin_p12-1)<=i["b"]){e.x=this.x0+this.a*(i["d"]-n)*Math.sin(p);e.y=this.y0-this.a*(i["d"]-n)*Math.cos(p);return e}else if(Math.abs(this.sin_p12+1)<=i["b"]){e.x=this.x0+this.a*(i["d"]+n)*Math.sin(p);e.y=this.y0+this.a*(i["d"]+n)*Math.cos(p);return e}else{O=this.sin_p12*f+this.cos_p12*d*Math.cos(p);E=Math.acos(O);N=E/Math.sin(E);e.x=this.x0+this.a*N*d*Math.sin(p);e.y=this.y0+this.a*N*(this.cos_p12*f-this.sin_p12*d*Math.cos(p));return e}}else{h=Object(o["a"])(this.es);g=Object(s["a"])(this.es);m=Object(u["a"])(this.es);v=Object(l["a"])(this.es);if(Math.abs(this.sin_p12-1)<=i["b"]){y=this.a*Object(a["a"])(h,g,m,v,i["d"]);b=this.a*Object(a["a"])(h,g,m,v,n);e.x=this.x0+(y-b)*Math.sin(p);e.y=this.y0-(y-b)*Math.cos(p);return e}else if(Math.abs(this.sin_p12+1)<=i["b"]){y=this.a*Object(a["a"])(h,g,m,v,i["d"]);b=this.a*Object(a["a"])(h,g,m,v,n);e.x=this.x0+(y+b)*Math.sin(p);e.y=this.y0+(y+b)*Math.cos(p);return e}else{M=f/d;x=Object(c["a"])(this.a,this.e,this.sin_p12);w=Object(c["a"])(this.a,this.e,f);A=Math.atan((1-this.es)*M+this.es*x*this.sin_p12/(w*d));T=Math.atan2(Math.sin(p),this.cos_p12*Math.tan(A)-this.sin_p12*Math.cos(p));if(T===0){_=Math.asin(this.cos_p12*Math.sin(A)-this.sin_p12*Math.cos(A))}else if(Math.abs(Math.abs(T)-Math.PI)<=i["b"]){_=-Math.asin(this.cos_p12*Math.sin(A)-this.sin_p12*Math.cos(A))}else{_=Math.asin(Math.sin(p)*Math.cos(A)/Math.sin(T))}C=this.e*this.sin_p12/Math.sqrt(1-this.es);S=this.e*this.cos_p12*Math.cos(T)/Math.sqrt(1-this.es);D=C*S;I=S*S;L=_*_;P=L*_;k=P*_;R=k*_;E=x*_*(1-L*I*(1-I)/6+P/8*D*(1-2*I)+k/120*(I*(4-7*I)-3*C*C*(1-7*I))-R/48*D);e.x=this.x0+E*Math.sin(T);e.y=this.y0+E*Math.cos(T);return e}}}function g(e){e.x-=this.x0;e.y-=this.y0;var t,n,p,h,g,m,v,y,b,M,x,w,A,T,C,S,D,I,E,N,O,_,L;if(this.sphere){t=Math.sqrt(e.x*e.x+e.y*e.y);if(t>2*i["d"]*this.a){return}n=t/this.a;p=Math.sin(n);h=Math.cos(n);g=this.long0;if(Math.abs(t)<=i["b"]){m=this.lat0}else{m=Object(f["a"])(h*this.sin_p12+e.y*p*this.cos_p12/t);v=Math.abs(this.lat0)-i["d"];if(Math.abs(v)<=i["b"]){if(this.lat0>=0){g=Object(r["a"])(this.long0+Math.atan2(e.x,-e.y))}else{g=Object(r["a"])(this.long0-Math.atan2(-e.x,e.y))}}else{g=Object(r["a"])(this.long0+Math.atan2(e.x*p,t*this.cos_p12*h-e.y*this.sin_p12*p))}}e.x=g;e.y=m;return e}else{y=Object(o["a"])(this.es);b=Object(s["a"])(this.es);M=Object(u["a"])(this.es);x=Object(l["a"])(this.es);if(Math.abs(this.sin_p12-1)<=i["b"]){w=this.a*Object(a["a"])(y,b,M,x,i["d"]);t=Math.sqrt(e.x*e.x+e.y*e.y);A=w-t;m=Object(d["a"])(A/this.a,y,b,M,x);g=Object(r["a"])(this.long0+Math.atan2(e.x,-1*e.y));e.x=g;e.y=m;return e}else if(Math.abs(this.sin_p12+1)<=i["b"]){w=this.a*Object(a["a"])(y,b,M,x,i["d"]);t=Math.sqrt(e.x*e.x+e.y*e.y);A=t-w;m=Object(d["a"])(A/this.a,y,b,M,x);g=Object(r["a"])(this.long0+Math.atan2(e.x,e.y));e.x=g;e.y=m;return e}else{t=Math.sqrt(e.x*e.x+e.y*e.y);S=Math.atan2(e.x,e.y);T=Object(c["a"])(this.a,this.e,this.sin_p12);D=Math.cos(S);I=this.e*this.cos_p12*D;E=-I*I/(1-this.es);N=3*this.es*(1-E)*this.sin_p12*this.cos_p12*D/(1-this.es);O=t/T;_=O-E*(1+E)*Math.pow(O,3)/6-N*(1+3*E)*Math.pow(O,4)/24;L=1-E*_*_/2-O*_*_*_/6;C=Math.asin(this.sin_p12*Math.cos(_)+this.cos_p12*Math.sin(_)*D);g=Object(r["a"])(this.long0+Math.asin(Math.sin(S)*Math.sin(_)/Math.cos(C)));m=Math.atan((1-this.es*L*this.sin_p12/Math.sin(C))*Math.tan(C)/(1-this.es));e.x=g;e.y=m;return e}}}var m=["Azimuthal_Equidistant","aeqd"];t["default"]={init:p,forward:h,inverse:g,names:m}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t["init"]=o;t["forward"]=s;t["inverse"]=u;n.d(t,"names",function(){return l});var r=n(12);var i=n(65);var a=n(7);function o(){this.sin_p14=Math.sin(this.lat0);this.cos_p14=Math.cos(this.lat0)}function s(e){var t,n;var i;var o;var s;var u,l,c;var f=e.x;var d=e.y;i=Object(r["a"])(f-this.long0);t=Math.sin(d);n=Math.cos(d);o=Math.cos(i);u=this.sin_p14*t+this.cos_p14*n*o;s=1;if(u>0||Math.abs(u)<=a["b"]){l=this.a*s*n*Math.sin(i);c=this.y0+this.a*s*(this.cos_p14*t-this.sin_p14*n*o)}e.x=l;e.y=c;return e}function u(e){var t;var n;var o,s;var u;var l,c;e.x-=this.x0;e.y-=this.y0;t=Math.sqrt(e.x*e.x+e.y*e.y);n=Object(i["a"])(t/this.a);o=Math.sin(n);s=Math.cos(n);l=this.long0;if(Math.abs(t)<=a["b"]){c=this.lat0;e.x=l;e.y=c;return e}c=Object(i["a"])(s*this.sin_p14+e.y*o*this.cos_p14/t);u=Math.abs(this.lat0)-a["d"];if(Math.abs(u)<=a["b"]){if(this.lat0>=0){l=Object(r["a"])(this.long0+Math.atan2(e.x,-e.y))}else{l=Object(r["a"])(this.long0-Math.atan2(-e.x,e.y))}e.x=l;e.y=c;return e}l=Object(r["a"])(this.long0+Math.atan2(e.x*o,t*this.cos_p14*s-e.y*this.sin_p14*o));e.x=l;e.y=c;return e}var l=["ortho"];t["default"]={init:o,forward:s,inverse:u,names:l}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t["init"]=o;t["forward"]=s;t["inverse"]=u;n.d(t,"names",function(){return f});var r=n(7);var i={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6};var a={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function o(){this.x0=this.x0||0;this.y0=this.y0||0;this.lat0=this.lat0||0;this.long0=this.long0||0;this.lat_ts=this.lat_ts||0;this.title=this.title||"Quadrilateralized Spherical Cube";if(this.lat0>=r["d"]-r["c"]/2){this.face=i.TOP}else if(this.lat0<=-(r["d"]-r["c"]/2)){this.face=i.BOTTOM}else if(Math.abs(this.long0)<=r["c"]){this.face=i.FRONT}else if(Math.abs(this.long0)<=r["d"]+r["c"]){this.face=this.long0>0?i.RIGHT:i.LEFT}else{this.face=i.BACK}if(this.es!==0){this.one_minus_f=1-(this.a-this.b)/this.a;this.one_minus_f_squared=this.one_minus_f*this.one_minus_f}}function s(e){var t={x:0,y:0};var n,o;var s,u;var f,d;var p={value:0};e.x-=this.long0;if(this.es!==0){n=Math.atan(this.one_minus_f_squared*Math.tan(e.y))}else{n=e.y}o=e.x;if(this.face===i.TOP){u=r["d"]-n;if(o>=r["c"]&&o<=r["d"]+r["c"]){p.value=a.AREA_0;s=o-r["d"]}else if(o>r["d"]+r["c"]||o<=-(r["d"]+r["c"])){p.value=a.AREA_1;s=o>0?o-r["n"]:o+r["n"]}else if(o>-(r["d"]+r["c"])&&o<=-r["c"]){p.value=a.AREA_2;s=o+r["d"]}else{p.value=a.AREA_3;s=o}}else if(this.face===i.BOTTOM){u=r["d"]+n;if(o>=r["c"]&&o<=r["d"]+r["c"]){p.value=a.AREA_0;s=-o+r["d"]}else if(o<r["c"]&&o>=-r["c"]){p.value=a.AREA_1;s=-o}else if(o<-r["c"]&&o>=-(r["d"]+r["c"])){p.value=a.AREA_2;s=-o-r["d"]}else{p.value=a.AREA_3;s=o>0?-o+r["n"]:-o-r["n"]}}else{var h,g,m;var v,y;var b,M;if(this.face===i.RIGHT){o=c(o,+r["d"])}else if(this.face===i.BACK){o=c(o,+r["n"])}else if(this.face===i.LEFT){o=c(o,-r["d"])}v=Math.sin(n);y=Math.cos(n);b=Math.sin(o);M=Math.cos(o);h=y*M;g=y*b;m=v;if(this.face===i.FRONT){u=Math.acos(h);s=l(u,m,g,p)}else if(this.face===i.RIGHT){u=Math.acos(g);s=l(u,m,-h,p)}else if(this.face===i.BACK){u=Math.acos(-h);s=l(u,m,-g,p)}else if(this.face===i.LEFT){u=Math.acos(-g);s=l(u,m,h,p)}else{u=s=0;p.value=a.AREA_0}}d=Math.atan(12/r["n"]*(s+Math.acos(Math.sin(s)*Math.cos(r["c"]))-r["d"]));f=Math.sqrt((1-Math.cos(u))/(Math.cos(d)*Math.cos(d))/(1-Math.cos(Math.atan(1/Math.cos(s)))));if(p.value===a.AREA_1){d+=r["d"]}else if(p.value===a.AREA_2){d+=r["n"]}else if(p.value===a.AREA_3){d+=1.5*r["n"]}t.x=f*Math.cos(d);t.y=f*Math.sin(d);t.x=t.x*this.a+this.x0;t.y=t.y*this.a+this.y0;e.x=t.x;e.y=t.y;return e}function u(e){var t={lam:0,phi:0};var n,o,s,u;var l,f,d,p;var h;var g={value:0};e.x=(e.x-this.x0)/this.a;e.y=(e.y-this.y0)/this.a;o=Math.atan(Math.sqrt(e.x*e.x+e.y*e.y));n=Math.atan2(e.y,e.x);if(e.x>=0&&e.x>=Math.abs(e.y)){g.value=a.AREA_0}else if(e.y>=0&&e.y>=Math.abs(e.x)){g.value=a.AREA_1;n-=r["d"]}else if(e.x<0&&-e.x>=Math.abs(e.y)){g.value=a.AREA_2;n=n<0?n+r["n"]:n-r["n"]}else{g.value=a.AREA_3;n+=r["d"]}h=r["n"]/12*Math.tan(n);l=Math.sin(h)/(Math.cos(h)-1/Math.sqrt(2));f=Math.atan(l);s=Math.cos(n);u=Math.tan(o);d=1-s*s*u*u*(1-Math.cos(Math.atan(1/Math.cos(f))));if(d<-1){d=-1}else if(d>+1){d=+1}if(this.face===i.TOP){p=Math.acos(d);t.phi=r["d"]-p;if(g.value===a.AREA_0){t.lam=f+r["d"]}else if(g.value===a.AREA_1){t.lam=f<0?f+r["n"]:f-r["n"]}else if(g.value===a.AREA_2){t.lam=f-r["d"]}else{t.lam=f}}else if(this.face===i.BOTTOM){p=Math.acos(d);t.phi=p-r["d"];if(g.value===a.AREA_0){t.lam=-f+r["d"]}else if(g.value===a.AREA_1){t.lam=-f}else if(g.value===a.AREA_2){t.lam=-f-r["d"]}else{t.lam=f<0?-f-r["n"]:-f+r["n"]}}else{var m,v,y;m=d;h=m*m;if(h>=1){y=0}else{y=Math.sqrt(1-h)*Math.sin(f)}h+=y*y;if(h>=1){v=0}else{v=Math.sqrt(1-h)}if(g.value===a.AREA_1){h=v;v=-y;y=h}else if(g.value===a.AREA_2){v=-v;y=-y}else if(g.value===a.AREA_3){h=v;v=y;y=-h}if(this.face===i.RIGHT){h=m;m=-v;v=h}else if(this.face===i.BACK){m=-m;v=-v}else if(this.face===i.LEFT){h=m;m=v;v=-h}t.phi=Math.acos(-y)-r["d"];t.lam=Math.atan2(v,m);if(this.face===i.RIGHT){t.lam=c(t.lam,-r["d"])}else if(this.face===i.BACK){t.lam=c(t.lam,-r["n"])}else if(this.face===i.LEFT){t.lam=c(t.lam,+r["d"])}}if(this.es!==0){var b;var M,x;b=t.phi<0?1:0;M=Math.tan(t.phi);x=this.b/Math.sqrt(M*M+this.one_minus_f_squared);t.phi=Math.atan(Math.sqrt(this.a*this.a-x*x)/(this.one_minus_f*x));if(b){t.phi=-t.phi}}t.lam+=this.long0;e.x=t.lam;e.y=t.phi;return e}function l(e,t,n,i){var o;if(e<r["b"]){i.value=a.AREA_0;o=0}else{o=Math.atan2(t,n);if(Math.abs(o)<=r["c"]){i.value=a.AREA_0}else if(o>r["c"]&&o<=r["d"]+r["c"]){i.value=a.AREA_1;o-=r["d"]}else if(o>r["d"]+r["c"]||o<=-(r["d"]+r["c"])){i.value=a.AREA_2;o=o>=0?o-r["n"]:o+r["n"]}else{i.value=a.AREA_3;o+=r["d"]}}return o}function c(e,t){var n=e+t;if(n<-r["n"]){n+=r["o"]}else if(n>+r["n"]){n-=r["o"]}return n}var f=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];t["default"]={init:o,forward:s,inverse:u,names:f}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t["init"]=g;t["forward"]=m;t["inverse"]=v;n.d(t,"names",function(){return y});var r=n(7);var i=n(12);var a=[[1,2.2199e-17,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]];var o=[[-5.20417e-18,.0124,1.21431e-18,-8.45284e-11],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]];var s=.8487;var u=1.3523;var l=r["i"]/5;var c=1/l;var f=18;var d=function(e,t){return e[0]+t*(e[1]+t*(e[2]+t*e[3]))};var p=function(e,t){return e[1]+t*(2*e[2]+t*3*e[3])};function h(e,t,n,r){var i=t;for(;r;--r){var a=e(i);i-=a;if(Math.abs(a)<n){break}}return i}function g(){this.x0=this.x0||0;this.y0=this.y0||0;this.long0=this.long0||0;this.es=0;this.title=this.title||"Robinson"}function m(e){var t=Object(i["a"])(e.x-this.long0);var n=Math.abs(e.y);var p=Math.floor(n*l);if(p<0){p=0}else if(p>=f){p=f-1}n=r["i"]*(n-c*p);var h={x:d(a[p],n)*t,y:d(o[p],n)};if(e.y<0){h.y=-h.y}h.x=h.x*this.a*s+this.x0;h.y=h.y*this.a*u+this.y0;return h}function v(e){var t={x:(e.x-this.x0)/(this.a*s),y:Math.abs(e.y-this.y0)/(this.a*u)};if(t.y>=1){t.x/=a[f][0];t.y=e.y<0?-r["d"]:r["d"]}else{var n=Math.floor(t.y*f);if(n<0){n=0}else if(n>=f){n=f-1}for(;;){if(o[n][0]>t.y){--n}else if(o[n+1][0]<=t.y){++n}else{break}}var l=o[n];var c=5*(t.y-l[0])/(o[n+1][0]-l[0]);c=h(function(e){return(d(l,e)-t.y)/p(l,e)},c,r["b"],100);t.x/=d(a[n],c);t.y=(5*n+c)*r["a"];if(e.y<0){t.y=-t.y}}t.x=Object(i["a"])(t.x+this.long0);return t}var y=["Robinson","robin"];t["default"]={init:g,forward:m,inverse:v,names:y}},function(e,t){e.exports=1e-6},function(e,t){e.exports=n;function n(){var e=new Float32Array(3);e[0]=0;e[1]=0;e[2]=0;return e}},function(e,t){e.exports=n;function n(e,t,n){var r=new Float32Array(3);r[0]=e;r[1]=t;r[2]=n;return r}},function(e,t){e.exports=n;function n(e,t){var n=t[0],r=t[1],i=t[2];var a=n*n+r*r+i*i;if(a>0){a=1/Math.sqrt(a);e[0]=t[0]*a;e[1]=t[1]*a;e[2]=t[2]*a}return e}},function(e,t){e.exports=n;function n(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}},function(e,t){e.exports=n;function n(e,t,n){e[0]=t[0]-n[0];e[1]=t[1]-n[1];e[2]=t[2]-n[2];return e}},function(e,t){e.exports=n;function n(e,t,n){e[0]=t[0]*n[0];e[1]=t[1]*n[1];e[2]=t[2]*n[2];return e}},function(e,t){e.exports=n;function n(e,t,n){e[0]=t[0]/n[0];e[1]=t[1]/n[1];e[2]=t[2]/n[2];return e}},function(e,t){e.exports=n;function n(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)}},function(e,t){e.exports=n;function n(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i}},function(e,t){e.exports=n;function n(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}},function(e,t){e.exports=n;function n(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}},function(e,t){e.exports=n;function n(e){e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},function(e,t,n){"use strict";var r=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=n(3);var a=n(189);a=a.__esModule?a.default:a;var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";var s='<svg xmlns="http://www.w3.org/2000/svg">'+'<foreignObject width="100%" height="100%">'+"</foreignObject>"+"</svg>";var u={},l=200,c=15,f,d;function p(){var e;for(e=0;e<arguments.length;e+=1){if(isFinite(arguments[e])){return arguments[e]}}}var h={pointInPolygon:function e(t,n,r,i){if(n.outer){r=n.inner;n=n.outer}if(n.length<3){return false}if(i&&i.min&&i.max){if(t.x<i.min.x||t.y<i.min.y||t.x>i.max.x||t.y>i.max.y){return false}}return h.distanceToPolygon2d(t,r?{outer:n,inner:r}:n)>0},pointToTriangleBasis2d:function e(t,n,r,i){var a=r.x-n.x,o=i.x-n.x,s=r.y-n.y,u=i.y-n.y,l=t.x-n.x,c=t.y-n.y,f=a*u-o*s;if(f){return{x:(l*u-c*o)/f,y:(l*-s+c*a)/f}}},isReadyImage:function e(t,n){if(t instanceof Image&&t.complete&&t.src){if(t.naturalWidth&&t.naturalHeight||n){return true}}return false},isReadyVideo:function e(t,n){if(t instanceof HTMLVideoElement&&t.src&&t.HAVE_CURRENT_DATA!==undefined){if(t.videoWidth&&t.videoHeight&&t.readyState>=t.HAVE_CURRENT_DATA||n&&t.error){return true}}return false},isFunction:function e(t){return typeof t==="function"},ensureFunction:function e(t){if(h.isFunction(t)){return t}else{return function(){return t}}},isNonNullFinite:function e(t){return isFinite(t)&&t!==null&&t!==false&&t!==""},randomString:function e(t){var n,r,i;t=t||8;n="";for(r=0;r<t;r+=1){i=Math.floor(Math.random()*o.length);n+=o.substring(i,i+1)}return n},normalizeCoordinates:function e(t){t=t||{};if(Array.isArray(t)){return{x:t[0],y:t[1],z:t[2]||0}}return{x:p(t.x,t.longitude,t.lng,t.lon,0),y:p(t.y,t.latitude,t.lat,0),z:p(t.z,t.elevation,t.elev,t.height,0)}},range:function e(t,n,r){r=r||1;var i=[];for(var a=t;a<=n;a+=r){i.push(a)}return i},compareArrays:function e(t,n){return t.length===n.length&&t.every(function(e,t){return e===n[t]})},vec3AsArray:function e(){return[0,0,0]},mat3AsArray:function e(){return[1,0,0,0,1,0,0,0,1]},mat4AsArray:function e(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},getGeomBuffer:function e(t,n,r,i,a){i=i===undefined?.2:i;a=a===undefined?.1:a;var o=t.sourceByName(n),s=o.data(),u=Math.floor((i+1)*r);s=o.data();if(s instanceof Float32Array&&(s.length===r||s.length>=r&&s.length<=u)){return s}var l=r;if(s instanceof Float32Array&&s.length&&r&&a>0){l=Math.floor((a+1)*r)}s=new Float32Array(l);o.setData(s);return s},adjustActions:function e(t){var n,r;for(r=0;r<t.length;r+=1){n=t[r];if(i.type(n.input)==="string"){var a={};a[n.input]=true;n.input=a}if(!n.modifiers){n.modifiers={}}if(i.type(n.modifiers)==="string"){var o={};o[n.modifiers]=true;n.modifiers=o}}},addAction:function e(t,n,r){if(r){t.push(n)}else{t.unshift(n)}h.adjustActions(t)},hasAction:function e(t,n,r,i){if(n&&n.action){r=n.name;i=n.owner;n=n.action}for(var a=0;a<t.length;a+=1){if((!n||t[a].action===n)&&(!r||t[a].name===r)&&(!i||t[a].owner===i)){return t[a]}}return null},removeAction:function e(t,n,r,a){var o,s=0;do{o=h.hasAction(t,n,r,a);if(o){t.splice(i.inArray(o,t),1);s+=1}}while(o);return s},actionMatch:function e(t,n,r){var i;if(r.some(function(e){for(var r in e.input){if(e.input.hasOwnProperty(r)){if(e.input[r]===false&&t[r]||e.input[r]&&!t[r]){return false}}}for(var a in e.modifiers){if(e.modifiers.hasOwnProperty(a)){if(e.modifiers[a]===false&&n[a]||e.modifiers[a]&&!n[a]){return false}}}i=e;return true})){return i}},pixelCoordinateParams:function e(t,n,r,a,o){var s,u,l;if(t){t=i(t);s=t.innerWidth();u=t.innerHeight()}a=a||n;o=o||r;l=a!==n||o!==r;var c=Math.min(0,Math.floor(Math.log(Math.min((s||a)/a,(u||o)/o))/Math.log(2))),f=Math.ceil(Math.log(Math.max(n/a,r/o))/Math.log(2));var d={node:t,ingcs:"+proj=longlat +axis=esu",gcs:"+proj=longlat +axis=enu",maxBounds:{left:0,top:0,right:n,bottom:r},unitsPerPixel:Math.pow(2,f),center:{x:n/2,y:r/2},min:c,max:f,zoom:c,clampBoundsX:true,clampBoundsY:true,clampZoom:true};var p={maxLevel:f,wrapX:false,wrapY:false,tileOffset:function e(){return{x:0,y:0}},attribution:"",tileWidth:a,tileHeight:o,tileRounding:Math.ceil,tilesAtZoom:l?function(e){var t=Math.pow(2,f-e);return{x:Math.ceil(n/a/t),y:Math.ceil(r/o/t)}}:undefined,tilesMaxBounds:l?function(e){var t=Math.pow(2,f-e);return{x:Math.floor(n/t),y:Math.floor(r/t)}}:undefined};return{map:d,layer:p}},centerFromPerimeter:function e(t){var n,r,i,a,o,s;if(!t||!t.length){return}if(t.length===1){return{x:t[0].x,y:t[0].y}}n={x:0,y:0};o=0;r=t[t.length-1];for(s=0;s<t.length;s+=1){i=r;r=t[s];a=Math.sqrt(Math.pow(i.x-r.x,2)+Math.pow(i.y-r.y,2));n.x+=(r.x+i.x)*a;n.y+=(r.y+i.y)*a;o+=2*a}n.x/=o;n.y/=o;return o?n:{x:r.x,y:r.y}},distance2dSquared:function e(t,n){var r=t.x-n.x,i=t.y-n.y;return r*r+i*i},distance2dToLineSquared:function e(t,n,r){var i=r.x-n.x,a=r.y-n.y,o=i*i+a*a,s=0;if(o){s=((t.x-n.x)*i+(t.y-n.y)*a)/o;s=Math.max(0,Math.min(1,s))}return h.distance2dSquared(t,{x:n.x+s*i,y:n.y+s*a})},distanceToPolygon2d:function e(t,n){var r=n.outer||n;var i=false,a=void 0,o=void 0,s=void 0;for(var u=0,l=r.length,c=l-1;u<l;c=u,u+=1){var f=r[u],d=r[c];if(f.y>t.y!==d.y>t.y&&t.x<(d.x-f.x)*(t.y-f.y)/(d.y-f.y)+f.x){i=!i}o=h.distance2dToLineSquared(t,f,d);if(a===undefined||o<a){a=o}}if(n.inner){n.inner.forEach(function(e){var n=h.distanceToPolygon2d(t,e);if(n*n<a){a=n*n}if(n>0){i=!i}})}s=(i?1:-1)*Math.sqrt(a);return s},triangleTwiceSignedArea2d:function e(t,n,r){return(n.y-t.y)*(r.x-n.x)-(n.x-t.x)*(r.y-n.y)},crossedLineSegmentPolygon2d:function e(t,n,r){var i=r.outer||r,a=i.length,o=void 0,s=void 0;for(o=0,s=a-1;o<a;s=o,o+=1){if(h.crossedLineSegments2d(t,n,i[o],i[s])){return true}}if(r.inner){for(o=0;o<r.inner.length;o+=1){if(h.crossedLineSegmentPolygon2d(t,n,r.inner[o])){return true}}}return false},crossedLineSegments2d:function e(t,n,r,i){if(t.x>r.x&&t.x>i.x&&n.x>r.x&&n.x>i.x||t.x<r.x&&t.x<i.x&&n.x<r.x&&n.x<i.x||t.y>r.y&&t.y>i.y&&n.y>r.y&&n.y>i.y||t.y<r.y&&t.y<i.y&&n.y<r.y&&n.y<i.y){return false}if(t.x===r.x&&t.y===r.y||t.x===i.x&&t.y===i.y||n.x===r.x&&n.y===r.y||n.x===i.x&&n.y===i.y){return false}if(h.triangleTwiceSignedArea2d(t,n,r)*h.triangleTwiceSignedArea2d(t,n,i)>0||h.triangleTwiceSignedArea2d(r,i,t)*h.triangleTwiceSignedArea2d(r,i,n)>0){return false}return true},segmentCrossesLineList2d:function e(t,n,r){var i=r.some(function(e){return e.some(function(r,i){if(i){return h.crossedLineSegments2d(t,n,e[i-1],r)}})});return i},rdpLineSimplify:function e(t,n,r,i){if(t.length<=2||n<0){return t}var a,o,s=-1,u,l=n*n;if(r){for(a=1;a<t.length;a+=1){o=h.distance2dSquared(t[0],t[a]);if(o>s){s=o;u=a}}if(s*4<=l){return t.slice(u,u+1)}t=t.slice(u).concat(t.slice(0,u+1));t=h.rdpLineSimplify(t,n,false,i);t.splice(t.length-1);return t}for(a=1;a<t.length-1;a+=1){o=h.distance2dToLineSquared(t[a],t[0],t[t.length-1]);if(o>s){s=o;u=a}}if(s<=l&&(!i||!h.segmentCrossesLineList2d(t[0],t[t.length-1],i))){return[t[0],t[t.length-1]]}var c=t.slice(0,u+1),f=t.slice(u),d=h.rdpLineSimplify(c,n,false,i?i.concat([f]):null),p=h.rdpLineSimplify(f,n,false,i?i.concat([c]):null);return d.slice(0,d.length-1).concat(p)},getMinMaxValues:function e(t,n,r,a){if(t.length&&(a||!i.isNumeric(n)||!i.isNumeric(r))){var o=t[0],s=t[0],u,l;for(l=t.length-1;l>0;l-=1){u=t[l];if(u<o){o=u}if(u>s){s=u}}if(!i.isNumeric(n)||a&&o>n){n=o}if(!i.isNumeric(r)||a&&s<r){r=s}}return{min:n,max:r}},wrapAngle:function e(t){t=t%(Math.PI*2);if(t<-Math.PI){t+=Math.PI*2}else if(t>=Math.PI){t-=Math.PI*2}return t},escapeUnicodeHTML:function e(t){return t.replace(/./g,function(e){var t=e.charCodeAt();if(t<127){return e}return"&#"+t.toString(10)+";"})},dereferenceElements:function e(t){var n=[];i("img,image",t).each(function(){var e=i(this);var t=e.is("image")?"href":"src";if(e.attr(t)){var r=new Image;if(e.attr(t).substr(0,4)==="http"||e[0].crossOrigin){r.crossOrigin=e[0].crossOrigin||"anonymous"}var a=i.Deferred();r.onload=function(){var n=document.createElement("canvas");n.width=r.naturalWidth;n.height=r.naturalHeight;n.getContext("2d").drawImage(r,0,0);e.attr(t,n.toDataURL("image/png"));if(e.attr(t).substr(0,10)!=="data:image"){e.remove()}a.resolve()};r.onerror=function(){e.remove();a.resolve()};r.src=e.attr(t);n.push(a)}});return n},dereferenceCssUrlsRegex:/url\(["']?(http[^)"']+|[^:)"']+)["']?\)/g,dereferenceCssUrls:function e(t,n,r,a,o){var s=[],u=[];t=t.replace(/\/\*[^\0]*?\*\//g,"");t=t.replace(/\r/g,"\n").replace(/\s+\n/g,"\n").replace(/\n\s+/g,"\n").replace(/\n\n+/g,"\n");if(o){var l=/(^[^?#]*)\/[^?#/]*([?#]|$)/g.exec(o);o=l&&l[1]?l[1]+"/":null}t.replace(h.dereferenceCssUrlsRegex,function(e,t){var n=s.length,r=i.Deferred(),a=new XMLHttpRequest;s.push(r);u.push("");if(/^[^/:][^:]*(\/|$)/g.exec(t)&&o){t=o+t}a.open("GET",t,true);a.responseType="arraybuffer";a.onload=function(){if(this.status===200){var e=new Uint8Array(this.response),t=new Array(e.length),i;for(i=0;i<e.length;i+=1){t[i]=String.fromCharCode(e[i])}t=t.join("");u[n]="url(data:"+a.getResponseHeader("content-type")+";base64,"+btoa(t)+")"}r.resolve()};a.onerror=r.resolve;a.send();return e});i.when.apply(i,s).then(function(){var e=0;t=t.replace(h.dereferenceCssUrlsRegex,function(t,n){e+=1;return u[e-1]});if(a===undefined){n.text(t)}else{n.style[a]=t}r.resolve()})},htmlToImageSupported:function e(){if(d===undefined){var t=i.Deferred();var n=i(s);n.attr({width:"10px",height:"10px","text-rendering":"optimizeLegibility"});i("foreignObject",n).append("<div/>");var r=new Image;r.onload=r.onerror=function(){var e=document.createElement("canvas");e.width=10;e.height=10;var n=e.getContext("2d");n.drawImage(r,0,0);try{e.toDataURL();d=true}catch(e){console.warn("This browser does not support converting HTML to an image via "+"SVG foreignObject.  Some functionality will be limited.",e);d=false}t.resolve(d)};r.src="data:image/svg+xml;base64,"+btoa(h.escapeUnicodeHTML((new XMLSerializer).serializeToString(n[0])));return t}return d},htmlToImage:function e(t,n){var r=i.Deferred(),a=[h.htmlToImageSupported()],o;var u=i(t);t=i(t).clone();while(n&&n>0){u=u.parent();if(u.is("div")){o=i("<div>").attr({class:u.attr("class"),id:u.attr("id")}).css({width:"100%",height:"100%",background:"none",margin:0});o.append(t);t=o}n-=1}i("canvas",t).remove();i("*",t).addBack().each(function(){var e=this.style;for(var t=0;t<e.length;t+=1){var n=this.style[t];if(this.style[n].match(h.dereferenceCssUrlsRegex)){var r=i.Deferred();h.dereferenceCssUrls(this.style[n],this,r,n);a.push(r)}}});o=i('<div xmlns="http://www.w3.org/1999/xhtml">');o.css({width:u.width()+"px",height:u.height()+"px"});o.append(i("<head>"));var l=i("<body>");o.append(l);l.css({width:u.width()+"px",height:u.height()+"px",background:"none",margin:0});l.append(t);a=a.concat(h.dereferenceElements(t));i('style,link[rel="stylesheet"]').each(function(){var e=i('<style type="text/css">'),t=i.Deferred();if(i(this).is("style")){var n=i(this).text();h.dereferenceCssUrls(n,e,t)}else{var r=i(this).attr("href");i.get(r).done(function(n){h.dereferenceCssUrls(n,e,t,undefined,r)}).fail(function(n,i,a){console.warn("Failed to dereference "+r,i,a);e.remove();t.resolve()})}a.push(t);i("head",o).append(e)});i.when.apply(i,a).then(function(){var e=i(s);e.attr({width:u.width()+"px",height:u.height()+"px","text-rendering":"optimizeLegibility"});i("foreignObject",e).append(o);var t=new Image;if(!h.htmlToImageSupported()){r.resolve(t)}else{t.onload=function(){r.resolve(t)};t.onerror=function(){console.warn("Failed to render html to image");r.reject()};t.src="data:image/svg+xml;base64,"+btoa(h.escapeUnicodeHTML((new XMLSerializer).serializeToString(e[0])))}});return r},timeReport:function e(t){i.each(u,function(e,t){if(t.count){t.stddev=Math.sqrt(Math.abs((t.sum2-t.sum*t.sum/t.count)/t.count));t.average=t.sum/t.count}else{t.stddev=0;t.average=0}});if(t){return u[t]}return u},timeFunctionStart:function e(t,n){if(!u[t]||n){u[t]={count:0,sum:0,sum2:0,max:0,recent:[]}}u[t].start=window.performance.now()},timeFunctionStop:function e(t){if(!u[t]||!u[t].start){return}var n=window.performance.now()-u[t].start;u[t].start=null;u[t].sum+=n;u[t].sum2+=n*n;u[t].count+=1;u[t].max=Math.max(u[t].max,n);u[t].recent.push(n);if(u[t].recent.length>l){u[t].recent.splice(0,u[t].recent.length-l)}},timeRequestAnimationFrame:function e(t,n,r,i){if(!u.requestAnimationFrame||n){u.requestAnimationFrame={count:0,sum:0,sum2:0,max:0,above_threshold:0,recent:[],recentsub:[]}}if(r){c=r}if(i){l=i}if(t&&f){window.requestAnimationFrame=f;f=null}else if(!t&&!f){f=window.requestAnimationFrame;window.requestAnimationFrame=function(e){return f.call(window,function(t){var n=u.requestAnimationFrame,r;if(n.timestamp!==t){n.nowDelta=window.performance.now()-t;if(Math.abs(n.nowDelta)<1e3){n.nowDelta=0}n.timestamp=t;n.subcalls=n.subcalls||0;n.start={sum:n.sum,sum2:n.sum2,count:n.count,max:n.max,above_threshold:n.above_threshold};n.recent.push([0]);n.recentsub.push([]);if(n.recent.length>l){n.recent.splice(0,n.recent.length-l);n.recentsub.splice(0,n.recentsub.length-l)}}n.subcalls+=1;e.apply(this,arguments);var i=window.performance.now()-t;i-=n.nowDelta;n.sum=n.start.sum+i;n.sum2=n.start.sum2+i*i;n.count=n.start.count+1;n.max=Math.max(n.max,i);n.above_threshold=n.start.above_threshold+(i>=c?1:0);n.recent[n.recent.length-1]=i;r=n.recentsub[n.recent.length-1];r.push({total_duration:i,duration:i-(r.length?r[r.length-1].total_duration:0),callback:e.name||e})})}}},isObject:function e(t){var n=typeof t==="undefined"?"undefined":r(t);return t!==null&&t!==undefined&&(n==="object"||n==="function")},radiusEarth:a.WGS84.a};e.exports=h},function(e,t,n){e.exports={create:n(571),clone:n(572),fromValues:n(573),copy:n(574),set:n(575),add:n(576),subtract:n(577),multiply:n(578),divide:n(579),min:n(580),max:n(581),scale:n(243),scaleAndAdd:n(582),distance:n(583),squaredDistance:n(584),length:n(585),squaredLength:n(586),negate:n(587),inverse:n(588),normalize:n(244),dot:n(589),lerp:n(590),random:n(591),transformMat4:n(592),transformQuat:n(593)}},function(e,t){e.exports=n;function n(e,t,n){e[0]=t[0]*n;e[1]=t[1]*n;e[2]=t[2]*n;e[3]=t[3]*n;return e}},function(e,t){e.exports=n;function n(e,t){var n=t[0],r=t[1],i=t[2],a=t[3];var o=n*n+r*r+i*i+a*a;if(o>0){o=1/Math.sqrt(o);e[0]=n*o;e[1]=r*o;e[2]=i*o;e[3]=a*o}return e}},function(e,t,n){"use strict";var r=n(3);var i={};i.Util={stamp:function e(t){t._leaflet_id=t._leaflet_id||++i.Util.lastId;return t._leaflet_id},lastId:0};var a=function e(t){this._cellSize=t;this._sqCellSize=t*t;this._grid={};this._objectPoint={}};a.prototype={addObject:function e(t,n){var r=this._getCoord(n.x),a=this._getCoord(n.y),o=this._grid,s=o[a]=o[a]||{},u=s[r]=s[r]||[],l=i.Util.stamp(t);n.obj=t;this._objectPoint[l]=n;u.push(t)},updateObject:function e(t,n){this.removeObject(t);this.addObject(t,n)},removeObject:function e(t,n){var r=this._getCoord(n.x),a=this._getCoord(n.y),o=this._grid,s=o[a]=o[a]||{},u=s[r]=s[r]||[],l,c;delete this._objectPoint[i.Util.stamp(t)];for(l=0,c=u.length;l<c;l++){if(u[l]===t){u.splice(l,1);if(c===1){delete s[r]}return true}}},eachObject:function e(t,n){var r,i,a,o,s,u,l,c=this._grid;for(r in c){s=c[r];for(i in s){u=s[i];for(a=0,o=u.length;a<o;a++){l=t.call(n,u[a]);if(l){a--;o--}}}}},getNearObject:function e(t){var n=this._getCoord(t.x),r=this._getCoord(t.y),a,o,s,u,l,c,f,d,p=this._objectPoint,h=this._sqCellSize,g=null;for(a=r-1;a<=r+1;a++){u=this._grid[a];if(u){for(o=n-1;o<=n+1;o++){l=u[o];if(l){for(s=0,c=l.length;s<c;s++){f=l[s];d=this._sqDist(p[i.Util.stamp(f)],t);if(d<h){h=d;g=f}}}}}}return g},contents:function e(){return r.map(this._objectPoint,function(e){return e})},_getCoord:function e(t){return Math.floor(t/this._cellSize)},_sqDist:function e(t,n){var r=n.x-t.x,i=n.y-t.y;return r*r+i*i}};e.exports=a},function(e,t,n){"use strict";var r=n(3);function i(e,t,n){this._group=e;this._zoom=t;this._points=[];this._clusters=[];this._count=0;this._parent=null;this._coord=null;var r=this;(n||[]).forEach(function(e){r._add(e)})}i.prototype._add=function(e){var t=1;if(e instanceof i){this._clusters.push(e);t=e._count}else{this._points.push(e)}e._parent=this;this._increment(t)};i.prototype._increment=function(e){this._coord=null;this._count+=e;if(this._parent){this._parent._increment(e)}};i.prototype.count=function(){return this._count};i.prototype.each=function(e){var t;for(t=0;t<this._points.length;t+=1){e.call(this,this._points[t],this._zoom)}for(t=0;t<this._clusters.length;t+=1){this._clusters[t].each.call(this._clusters[t],e)}};i.prototype.coords=function(){var e,t={x:0,y:0};if(this._coord){return this._coord}for(e=0;e<this._points.length;e+=1){t.x+=this._points[e].x;t.y+=this._points[e].y}for(e=0;e<this._clusters.length;e+=1){t.x+=this._clusters[e].coords().x*this._clusters[e].count();t.y+=this._clusters[e].coords().y*this._clusters[e].count()}return{x:t.x/this.count(),y:t.y/this.count()}};function a(e){var t=n(245);this._opts=r.extend({maxZoom:18,radius:5},e);this._clusters={};this._points={};var a,o;for(a=this._opts.maxZoom;a>=0;a-=1){o=this._opts.radius*Math.pow(2,-a);this._clusters[a]=new t(o);this._points[a]=new t(o)}this._topClusterLevel=new i(this,-1)}a.prototype.addPoint=function(e){var t,n,a,o,s,u;for(t=this._opts.maxZoom;t>=0;t-=1){n=this._clusters[t].getNearObject(e);if(n){n._add(e);return}n=this._points[t].getNearObject(e);if(n){a=n._parent;if(a){for(u=a._points.length-1;u>=0;u-=1){if(a._points[u]===n){a._points.splice(u,1);a._increment(-1);break}}}if(!a){r.noop()}o=new i(this,t,[n,e]);this._clusters[t].addObject(o,o.coords());s=o;for(u=t-1;u>a._zoom;u-=1){s=new i(this,u,[s]);this._clusters[u].addObject(s,s.coords())}a._add(s);for(u=t;u>=0;u-=1){if(!this._points[u].removeObject(n,n)){break}}return}this._points[t].addObject(e,e)}this._topClusterLevel._add(e)};a.prototype.points=function(e){e=Math.min(Math.max(Math.floor(e),0),this._opts.maxZoom-1);return this._points[Math.floor(e)].contents()};a.prototype.clusters=function(e){e=Math.min(Math.max(Math.floor(e),0),this._opts.maxZoom-1);return this._clusters[Math.floor(e)].contents()};e.exports=a},function(e,t,n){(function(t,n){true?e.exports=n():typeof define==="function"&&define.amd?define(n):t.KDBush=n()})(this,function(){"use strict";function e(n,r,i,a,o,s){if(o-a<=i){return}var u=a+o>>1;t(n,r,u,a,o,s%2);e(n,r,i,a,u-1,s+1);e(n,r,i,u+1,o,s+1)}function t(e,r,i,a,o,s){while(o>a){if(o-a>600){var u=o-a+1;var l=i-a+1;var c=Math.log(u);var f=.5*Math.exp(2*c/3);var d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1);var p=Math.max(a,Math.floor(i-l*f/u+d));var h=Math.min(o,Math.floor(i+(u-l)*f/u+d));t(e,r,i,p,h,s)}var g=r[2*i+s];var m=a;var v=o;n(e,r,a,i);if(r[2*o+s]>g){n(e,r,a,o)}while(m<v){n(e,r,m,v);m++;v--;while(r[2*m+s]<g){m++}while(r[2*v+s]>g){v--}}if(r[2*a+s]===g){n(e,r,a,v)}else{v++;n(e,r,v,o)}if(v<=i){a=v+1}if(i<=v){o=v-1}}}function n(e,t,n,i){r(e,n,i);r(t,2*n,2*i);r(t,2*n+1,2*i+1)}function r(e,t,n){var r=e[t];e[t]=e[n];e[n]=r}function i(e,t,n,r,i,a,o){var s=[0,e.length-1,0];var u=[];var l,c;while(s.length){var f=s.pop();var d=s.pop();var p=s.pop();if(d-p<=o){for(var h=p;h<=d;h++){l=t[2*h];c=t[2*h+1];if(l>=n&&l<=i&&c>=r&&c<=a){u.push(e[h])}}continue}var g=Math.floor((p+d)/2);l=t[2*g];c=t[2*g+1];if(l>=n&&l<=i&&c>=r&&c<=a){u.push(e[g])}var m=(f+1)%2;if(f===0?n<=l:r<=c){s.push(p);s.push(g-1);s.push(m)}if(f===0?i>=l:a>=c){s.push(g+1);s.push(d);s.push(m)}}return u}function a(e,t,n,r,i,a){var s=[0,e.length-1,0];var u=[];var l=i*i;while(s.length){var c=s.pop();var f=s.pop();var d=s.pop();if(f-d<=a){for(var p=d;p<=f;p++){if(o(t[2*p],t[2*p+1],n,r)<=l){u.push(e[p])}}continue}var h=Math.floor((d+f)/2);var g=t[2*h];var m=t[2*h+1];if(o(g,m,n,r)<=l){u.push(e[h])}var v=(c+1)%2;if(c===0?n-i<=g:r-i<=m){s.push(d);s.push(h-1);s.push(v)}if(c===0?n+i>=g:r+i>=m){s.push(h+1);s.push(f);s.push(v)}}return u}function o(e,t,n,r){var i=e-n;var a=t-r;return i*i+a*a}var s=function(e){return e[0]};var u=function(e){return e[1]};var l=function t(n,r,i,a,o){if(r===void 0)r=s;if(i===void 0)i=u;if(a===void 0)a=64;if(o===void 0)o=Float64Array;this.nodeSize=a;this.points=n;var l=n.length<65536?Uint16Array:Uint32Array;var c=this.ids=new l(n.length);var f=this.coords=new o(n.length*2);for(var d=0;d<n.length;d++){c[d]=d;f[2*d]=r(n[d]);f[2*d+1]=i(n[d])}e(c,f,a,0,c.length-1,0)};l.prototype.range=function e(t,n,r,a){return i(this.ids,this.coords,t,n,r,a,this.nodeSize)};l.prototype.within=function e(t,n,r){return a(this.ids,this.coords,t,n,r,this.nodeSize)};return l})},function(e,t,n){var r;(function(i,a,o){if(!i){return}var s={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"};var u={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"};var l={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"};var c={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"};var f;for(var d=1;d<20;++d){s[111+d]="f"+d}for(d=0;d<=9;++d){s[d+96]=d.toString()}function p(e,t,n){if(e.addEventListener){e.addEventListener(t,n,false);return}e.attachEvent("on"+t,n)}function h(e){if(e.type=="keypress"){var t=String.fromCharCode(e.which);if(!e.shiftKey){t=t.toLowerCase()}return t}if(s[e.which]){return s[e.which]}if(u[e.which]){return u[e.which]}return String.fromCharCode(e.which).toLowerCase()}function g(e,t){return e.sort().join(",")===t.sort().join(",")}function m(e){var t=[];if(e.shiftKey){t.push("shift")}if(e.altKey){t.push("alt")}if(e.ctrlKey){t.push("ctrl")}if(e.metaKey){t.push("meta")}return t}function v(e){if(e.preventDefault){e.preventDefault();return}e.returnValue=false}function y(e){if(e.stopPropagation){e.stopPropagation();return}e.cancelBubble=true}function b(e){return e=="shift"||e=="ctrl"||e=="alt"||e=="meta"}function M(){if(!f){f={};for(var e in s){if(e>95&&e<112){continue}if(s.hasOwnProperty(e)){f[s[e]]=e}}}return f}function x(e,t,n){if(!n){n=M()[e]?"keydown":"keypress"}if(n=="keypress"&&t.length){n="keydown"}return n}function w(e){if(e==="+"){return["+"]}e=e.replace(/\+{2}/g,"+plus");return e.split("+")}function A(e,t){var n;var r;var i;var a=[];n=w(e);for(i=0;i<n.length;++i){r=n[i];if(c[r]){r=c[r]}if(t&&t!="keypress"&&l[r]){r=l[r];a.push("shift")}if(b(r)){a.push(r)}}t=x(r,a,t);return{key:r,modifiers:a,action:t}}function T(e,t){if(e===null||e===a){return false}if(e===t){return true}return T(e.parentNode,t)}function C(e){var t=this;e=e||a;if(!(t instanceof C)){return new C(e)}t.target=e;t._callbacks={};t._directMap={};var n={};var r;var i=false;var o=false;var s=false;function u(e){e=e||{};var t=false,r;for(r in n){if(e[r]){t=true;continue}n[r]=0}if(!t){s=false}}function l(e,r,i,a,o,s){var u;var l;var c=[];var f=i.type;if(!t._callbacks[e]){return[]}if(f=="keyup"&&b(e)){r=[e]}for(u=0;u<t._callbacks[e].length;++u){l=t._callbacks[e][u];if(!a&&l.seq&&n[l.seq]!=l.level){continue}if(f!=l.action){continue}if(f=="keypress"&&!i.metaKey&&!i.ctrlKey||g(r,l.modifiers)){var d=!a&&l.combo==o;var p=a&&l.seq==a&&l.level==s;if(d||p){t._callbacks[e].splice(u,1)}c.push(l)}}return c}function c(e,n,r,i){if(t.stopCallback(n,n.target||n.srcElement,r,i)){return}if(e(n,r)===false){v(n);y(n)}}t._handleKey=function(e,t,n){var r=l(e,t,n);var i;var a={};var f=0;var d=false;for(i=0;i<r.length;++i){if(r[i].seq){f=Math.max(f,r[i].level)}}for(i=0;i<r.length;++i){if(r[i].seq){if(r[i].level!=f){continue}d=true;a[r[i].seq]=1;c(r[i].callback,n,r[i].combo,r[i].seq);continue}if(!d){c(r[i].callback,n,r[i].combo)}}var p=n.type=="keypress"&&o;if(n.type==s&&!b(e)&&!p){u(a)}o=d&&n.type=="keydown"};function f(e){if(typeof e.which!=="number"){e.which=e.keyCode}var n=h(e);if(!n){return}if(e.type=="keyup"&&i===n){i=false;return}t.handleKey(n,m(e),e)}function d(){clearTimeout(r);r=setTimeout(u,1e3)}function M(e,t,r,a){n[e]=0;function o(t){return function(){s=t;++n[e];d()}}function l(t){c(r,t,e);if(a!=="keyup"){i=h(t)}setTimeout(u,10)}for(var f=0;f<t.length;++f){var p=f+1===t.length;var g=p?l:o(a||A(t[f+1]).action);x(t[f],g,a,e,f)}}function x(e,n,r,i,a){t._directMap[e+":"+r]=n;e=e.replace(/\s+/g," ");var o=e.split(" ");var s;if(o.length>1){M(e,o,n,r);return}s=A(e,r);t._callbacks[s.key]=t._callbacks[s.key]||[];l(s.key,s.modifiers,{type:s.action},i,e,a);t._callbacks[s.key][i?"unshift":"push"]({callback:n,modifiers:s.modifiers,action:s.action,seq:i,level:a,combo:e})}t._bindMultiple=function(e,t,n){for(var r=0;r<e.length;++r){x(e[r],t,n)}};p(e,"keypress",f);p(e,"keydown",f);p(e,"keyup",f)}C.prototype.bind=function(e,t,n){var r=this;e=e instanceof Array?e:[e];r._bindMultiple.call(r,e,t,n);return r};C.prototype.unbind=function(e,t){var n=this;return n.bind.call(n,e,function(){},t)};C.prototype.trigger=function(e,t){var n=this;if(n._directMap[e+":"+t]){n._directMap[e+":"+t]({},e)}return n};C.prototype.reset=function(){var e=this;e._callbacks={};e._directMap={};return e};C.prototype.stopCallback=function(e,t){var n=this;if((" "+t.className+" ").indexOf(" mousetrap ")>-1){return false}if(T(t,n.target)){return false}if("composedPath"in e&&typeof e.composedPath==="function"){var r=e.composedPath()[0];if(r!==e.target){t=r}}return t.tagName=="INPUT"||t.tagName=="SELECT"||t.tagName=="TEXTAREA"||t.isContentEditable};C.prototype.handleKey=function(){var e=this;return e._handleKey.apply(e,arguments)};C.addKeycodes=function(e){for(var t in e){if(e.hasOwnProperty(t)){s[t]=e[t]}}f=null};C.init=function(){var e=C(a);for(var t in e){if(t.charAt(0)!=="_"){C[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t)}}};C.init();i.Mousetrap=C;if(typeof e!=="undefined"&&e.exports){e.exports=C}if(true){!(r=function(){return C}.call(t,n,t,e),r!==o&&(e.exports=r))}})(typeof window!=="undefined"?window:null,typeof window!=="undefined"?document:null)},function(e,t,n){"use strict";var r=n(1);var i=n(38);var a=n(5);var o=n(250);var s=n(104);var u=n(75);var l=n(242);var c=function e(t){if(!(this instanceof e)){return new e(t)}var r=n(11);t=t||{};i.call(this,t);this._view=a.mat4AsArray();this._proj=a.mat4AsArray();this._projection=null;this._transform=a.mat4AsArray();this._inverse=a.mat4AsArray();this._bounds=null;this._display=null;this._world=null;this._viewport={width:1,height:1};this._createProj=function(){var e=this._projection==="perspective"?u.frustum:u.ortho,t=this._clipbounds[this._projection];e(this._proj,t.left,t.right,t.bottom,t.top,t.near,t.far)};this._update=function(){this._bounds=null;this._display=null;this._world=null;this._transform=u.multiply(a.mat4AsArray(),this._proj,this._view);u.invert(this._inverse,this._transform);this.geoTrigger(r.camera.view,{camera:this})};Object.defineProperty(this,"view",{get:function e(){return this._view},set:function e(t){u.copy(this._view,t);this._update()},configurable:true});Object.defineProperty(this,"bounds",{get:function e(){if(this._bounds===null){this._bounds=this._getBounds()}return this._bounds},set:function e(t){this._setBounds(t);this._update()}});Object.defineProperty(this,"clipbounds",{get:function e(){return this._clipbounds[this._projection]},set:function e(t){var n=this._clipbounds[this._projection];t={left:t.left===undefined?n.left:t.left,right:t.right===undefined?n.right:t.right,top:t.top===undefined?n.top:t.top,bottom:t.bottom===undefined?n.bottom:t.bottom,near:t.near===undefined?n.near:t.near,far:t.far===undefined?n.far:t.far};if(t.left===t.right){throw new Error("Left and right values must be different")}if(t.top===t.bottom){throw new Error("Top and bottom values must be different")}if(t.near===t.far){throw new Error("Near and far values must be different")}this._clipbounds[this._projection]=t;this._createProj();this._update()}});Object.defineProperty(this,"display",{get:function e(){if(this._display===null){var t=this._clipbounds[this._projection];var n=a.mat4AsArray();u.translate(n,n,[this.viewport.width/2,this.viewport.height/2,0]);u.scale(n,n,[this.viewport.width/(t.right-t.left),this.viewport.height/(t.bottom-t.top),1]);u.translate(n,n,[-(t.left+t.right)/2,-(t.top+t.bottom)/2,0]);u.multiply(n,n,this._transform);this._display=n}return this._display}});Object.defineProperty(this,"world",{get:function e(){if(this._world===null){this._world=u.invert(a.mat4AsArray(),this.display)}return this._world}});Object.defineProperty(this,"projection",{get:function e(){return this._projection},set:function e(t){if(!this.constructor.projection[t]){throw new Error("Unsupported projection type: "+t)}if(t!==this._projection){this._projection=t;this._createProj();this._update();this.geoTrigger(r.camera.projection,{camera:this,projection:t})}}});Object.defineProperty(this,"projectionMatrix",{get:function e(){return this._proj}});Object.defineProperty(this,"transform",{get:function e(){return this._transform}});Object.defineProperty(this,"inverse",{get:function e(){return this._inverse}});Object.defineProperty(this,"viewport",{get:function e(){return{width:this._viewport.width,height:this._viewport.height,left:this._viewport.left,top:this._viewport.top}},set:function e(t){if(!(t.width>0&&t.height>0)){throw new Error("Invalid viewport dimensions")}if(t.width===this._viewport.width&&t.height===this._viewport.height){return}if(this._viewport.width&&this._viewport.height){this._scale([this._viewport.width/t.width,this._viewport.height/t.height,1]);this._translate([(t.width-this._viewport.width)/2,(t.height-this._viewport.height)/2,0])}this._viewport={width:t.width,height:t.height,left:t.left,top:t.top};this._update();this.geoTrigger(r.camera.viewport,{camera:this,viewport:this.viewport})}});this._resetView=function(){u.identity(this._view);return this};this._translate=function(e){u.translate(this._view,this._view,e);return this};this._scale=function(e){u.scale(this._view,this._view,e);return this};this._worldToClip4=function(e){return l.transformMat4(e,e,this._transform)};this._clipToWorld4=function(e){return l.transformMat4(e,e,this._inverse)};this.applyProjection=function(e){var t;if(this._projection==="perspective"){t=1/(e[3]||1);e[0]=t*e[0];e[1]=t*e[1];e[2]=t*e[2];e[3]=t}else{e[3]=1}return e};this.unapplyProjection=function(e){var t;if(this._projection==="perspective"){t=e[3]||1;e[0]=t*e[0];e[1]=t*e[1];e[2]=t*e[2];e[3]=t}else{e[3]=1}return e};this.worldToDisplay4=function(e){e=[e[0],e[1],e[2]||0,e[3]||1];e=l.transformMat4(e,e,this.display);if(e[3]&&e[3]!==1){e=[e[0]/e[3],e[1]/e[3],e[2]/e[3],1]}return e};this.displayToWorld4=function(e){e=[e[0],e[1],e[2]||0,e[3]||1];e=l.transformMat4(e,e,this.world);if(e[3]&&e[3]!==1){e=[e[0]/e[3],e[1]/e[3],e[2]/e[3],1]}return e};this.worldToDisplay=function(e){var t=this._clipbounds[this._projection];e=this.worldToDisplay4([e.x,e.y,-t.near]);return{x:e[0],y:e[1]}};this.displayToWorld=function(e){e=this.displayToWorld4([e.x,e.y,-1]);return{x:e[0],y:e[1]}};this._getBounds=function(){var e,t,n,r,i={};e=this.displayToWorld({x:0,y:0});t=this.displayToWorld({x:this._viewport.width,y:0});n=this.displayToWorld({x:0,y:this._viewport.height});r=this.displayToWorld({x:this._viewport.width,y:this._viewport.height});i.left=Math.min(e.x,t.x,n.x,r.x);i.bottom=Math.min(e.y,t.y,n.y,r.y);i.right=Math.max(e.x,t.x,n.x,r.x);i.top=Math.max(e.y,t.y,n.y,r.y);return i};this._setBounds=function(e){var t={width:e.right-e.left,height:e.top-e.bottom};var n={x:(e.left+e.right)/2,y:(e.bottom+e.top)/2};this._viewFromCenterSizeRotation(n,t,0);return this};this._viewFromCenterSizeRotation=function(e,t,n){var r=a.vec3AsArray(),i=a.vec3AsArray(),o,s,u,l;this._resetView();u=Math.abs(t.width);l=Math.abs(t.height);o=u/l;s=this._viewport.width/this._viewport.height;if(o>=s){l=u/s;i[0]=2/u;i[1]=2/l}else{u=l*s;i[0]=2/u;i[1]=2/l}i[2]=1;this._scale(i);if(n){this._rotate(n)}r[0]=-e.x;r[1]=-e.y;r[2]=0;this._translate(r);return this};this.viewFromCenterSizeRotation=function(e,t,n){this._viewFromCenterSizeRotation(e,t,n);this._update();return this};this.pan=function(e){if(!e.x&&!e.y&&!e.z){return}this._translate([e.x,e.y,e.z||0]);this._update();return this};this.zoom=function(e){if(e===1){return}u.scale(this._view,this._view,[e,e,e]);this._update();return this};this._rotate=function(e,t,n){if(!e){return}n=n||[0,0,-1];if(!t){t=[0,0,0]}else if(t.x!==undefined){t=[t.x||0,t.y||0,t.z||0]}var r=[-t[0],-t[1],-t[2]];u.translate(this._view,this._view,t);u.rotate(this._view,this._view,e,n);u.translate(this._view,this._view,r);return this};this.css=function(t){var n;switch((t||"").toLowerCase()){case"display":case"":n=this.display;break;case"world":n=this.world;break;default:throw new Error("Unknown transform "+t)}return e.css(n)};this.ppMatrix=function(e,t){var n=e;t=t||2;function r(e){var r=n[e],i=r.toExponential(t);if(r>=0){i=" "+i}return i}return[[r(0),r(4),r(8),r(12)].join(" "),[r(1),r(5),r(9),r(13)].join(" "),[r(2),r(6),r(10),r(14)].join(" "),[r(3),r(7),r(11),r(15)].join(" ")].join("\n")};this.toString=function(){return this.ppMatrix(this._transform)};this.debug=function(){return["bounds",JSON.stringify(this.bounds),"view:",this.ppMatrix(this._view),"projection:",this.ppMatrix(this._proj),"transform:",this.ppMatrix(this._transform)].join("\n")};this.valueOf=function(){return this._transform};this._clipbounds=this.constructor.clipbounds;this._resetView();this.projection=t.projection||"parallel";if(t.viewport){this.viewport=t.viewport}this._update();return this};c.projection={perspective:true,parallel:true};c.clipbounds={perspective:{left:-1,right:1,top:1,bottom:-1,far:2e3,near:.01},parallel:{left:-1,right:1,top:1,bottom:-1,far:-1,near:1}};c.css=function(e){return"matrix3d("+e.map(function(e){e=(+e).toPrecision(15);if(e.indexOf("e")>=0){e=(+e).toString()}else if(e.indexOf(".")>=0){e=e.replace(/(\.|)0+$/,"")}return e}).join(",")+")"};c.vec3=s;c.mat3=o;c.vec4=l;c.mat4=u;r(c,i);e.exports=c},function(e,t,n){e.exports={adjoint:n(602),clone:n(603),copy:n(604),create:n(605),determinant:n(606),frob:n(607),fromMat2:n(608),fromMat4:n(609),fromQuat:n(610),identity:n(611),invert:n(612),multiply:n(613),normalFromMat4:n(614),rotate:n(615),scale:n(616),str:n(617),translate:n(618),transpose:n(619)}},function(e,t,n){"use strict";var r=n(1);var i=n(19);var a=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}t=t||{};i.call(this,t);var r=n(3);var a=n(5).ensureFunction;delete t.layer;delete t.renderer;var o=n(33).d3,s=this,u=this._init,l=r.extend({},{colorRange:[{r:.07514311,g:.468049805,b:1},{r:.468487184,g:.588057293,b:1},{r:.656658579,g:.707001303,b:1},{r:.821573924,g:.837809045,b:1},{r:.943467973,g:.943498599,b:.943398095},{r:1,g:.788626485,b:.750707739},{r:1,g:.6289553,b:.568237474},{r:1,g:.472800903,b:.404551679},{r:.916482116,g:.236630659,b:.209939162}],scale:o.scale.quantize(),geoId:function e(t){return t.properties.GEO_ID},scalarId:function e(t){return t.id},scalarValue:function e(t){return t.value}},t);this.featureType="choropleth";this.scalar=function(e,t){var n,r;if(e===undefined){return s.choropleth.get("scalar")()||[]}else{n=s.choropleth.get("scalarId");r=s.choropleth.get("scalarValue");l.scalar=e;l.scalarAggregator=t||o.mean;l.scalar._dictionary=e.reduce(function(e,t){var i,a;i=n(t);a=r(t);e[i]=e[i]?e[i].push(a):[a];return e},{});s.dataTime().modified()}return s};this.choropleth=function(e,t){var n;if(e===undefined){return l}if(typeof e==="string"&&t===undefined){return l[e]}if(t===undefined){n=r.extend({},l,e);l=n}else{l[e]=t}s.modified();return s};this.choropleth.get=function(e){var t={},n;if(e===undefined){for(n in l){if(l.hasOwnProperty(n)){t[n]=s.choropleth.get(n)}}return t}return a(l[e])};this._featureToPolygons=function(e,t){var n=s.layer().createFeature("polygon",{});if(e.geometry.type==="Polygon"){n.data([{type:"Polygon",coordinates:e.geometry.coordinates}])}else if(e.geometry.type==="MultiPolygon"){n.data(e.geometry.coordinates.map(function(e){return{type:"Polygon",coordinates:e}}))}n.polygon(function(e){return{outer:e.coordinates[0],inner:e.coordinates[1]}}).position(function(e){return{x:e[0],y:e[1]}}).style({fillColor:t});return n};this._generateScale=function(e){var t=o.extent(s.scalar(),e||undefined);s.choropleth().scale.domain(t).range(s.choropleth().colorRange);return s};this.createChoropleth=function(){var e=s.choropleth,t=s.data(),n=s.scalar(),r=e.get("scalarValue"),i=e.get("geoId");s._generateScale(r);return t.map(function(t){var r=i(t);var a=n._dictionary[r];var o=e().scalarAggregator(a);var u=s.choropleth().scale(o);return s._featureToPolygons(t,u)})};this._init=function(e){u.call(s,e);if(l){s.dataTime().modified()}return s};this._init(t);return this};r(a,i);e.exports=a},function(e,t,n){"use strict";e.exports="geo_svg_rescale"},function(e,t,n){"use strict";var r=n(1);var i=n(148);var a=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}var r=n(3);var a=n(5);t=t||{};i.call(this,t);var o=this,s=this._init;this._createContours=function(){var e=o.contour,t=o.style.get("value"),n=o.style("used")!==undefined?o.style.get("used"):function(e,n){return a.isNonNullFinite(t(e,n))},i,s,u,l,c;var f=o._createMesh({used:n,opacity:o.style.get("opacity"),value:t});if(!f.numVertices||!f.numElements){return f}var d=e.get("stepped")(f),p=e.get("opacityRange")(f),h=e.get("rangeValues")(f);f.stepped=d===undefined||d?true:false;f.colorMap=[];f.minColor=r.extend({a:e.get("minOpacity")(f)||0},a.convertColor(e.get("minColor")(f)));f.maxColor=r.extend({a:e.get("maxOpacity")(f)||0},a.convertColor(e.get("maxColor")(f)));e.get("colorRange")(f).forEach(function(e,t){f.colorMap.push(r.extend({a:p&&p[t]!==undefined?p[t]:1},a.convertColor(e)))});i=a.getMinMaxValues(f.value,e.get("min")(f),e.get("max")(f));f.minValue=i.min;f.maxValue=i.max;if(!h||h.length!==f.colorMap.length+1){h=null}if(h){for(c=1;c<h.length;c+=1){if(h[c-1]>h[c]){h=null;break}}}if(h){f.minValue=h[0];f.maxValue=h[h.length-1]}u=f.maxValue-f.minValue;if(!u){f.colorMap=f.colorMap.slice(0,1);u=1;h=null}f.rangeValues=h;f.factor=f.colorMap.length/u;for(l=0;l<f.numVertices;l+=1){s=f.value[l];if(h&&s>=f.minValue&&s<=f.maxValue){for(c=1;c<h.length;c+=1){if(s<=h[c]){f.value[l]=c-1+(s-h[c-1])/(h[c]-h[c-1]);break}}}else{f.value[l]=(s-f.minValue)*f.factor}}return f};this.contour=o.mesh;this._init=function(e){s.call(o,e);var t=r.extend({},{opacity:1,value:function e(t,n){return o.position()(t,n).z},origin:function e(t){return t.length>=3?[t[0],t[1],0]:[0,0,0]}},e.style===undefined?{}:e.style);o.style(t);o.contour(r.extend({},{minColor:"black",minOpacity:0,maxColor:"black",maxOpacity:0,colorRange:[{r:.07514311,g:.468049805,b:1},{r:.468487184,g:.588057293,b:1},{r:.656658579,g:.707001303,b:1},{r:.821573924,g:.837809045,b:1},{r:.943467973,g:.943498599,b:.943398095},{r:1,g:.788626485,b:.750707739},{r:1,g:.6289553,b:.568237474},{r:1,g:.472800903,b:.404551679},{r:.916482116,g:.236630659,b:.209939162}]},e.mesh||{},e.contour||{}));if(e.mesh||e.contour){o.dataTime().modified()}};this._init(t);return this};r(a,i);e.exports=a},function(e,t,n){"use strict";var r=n(3);var i=function e(t){if(!(this instanceof e)){return new e(t)}t=t||{};this._size=t.size||6;this._initialSize=t.initialSize||0;this._track=t.track||600;this._needed=t.needed||null;this._batch=false;var n=this,i=1;Object.defineProperty(this,"size",{get:function e(){return n._size},set:function e(t){n._size=t;if(n._initialSize>1&&t<n._initialSize){n._initialSize=t}n.next_item()}});Object.defineProperty(this,"initialSize",{get:function e(){return n._initialSize},set:function e(t){n._initialSize=t;n.next_item()}});Object.defineProperty(this,"length",{get:function e(){return n._queue.length}});Object.defineProperty(this,"processing",{get:function e(){return n._processing}});this.clear=function(){n._queue=[];n._processing=0;return n};this.add=function(e,t,i){if(e.__fetchQueue){var a=r.inArray(e,n._queue);if(a>=0){n._queue.splice(a,1);n._addToQueue(e,i);return e}}var o=r.Deferred();var s=r.Deferred();o.done(function(){r.when(t.call(e)).always(s.resolve)}).fail(s.resolve);e.__fetchQueue=o;n._addToQueue(e,i);r.when(o,s).always(function(){if(n._processing>0){n._processing-=1}n._initialSize=0;n.next_item()}).promise(e);n.next_item();return e};this._addToQueue=function(e,t){e.__fetchQueue._batch=n._batch;if(t){n._queue.push(e)}else if(!this._batch){n._queue.unshift(e)}else{for(var r=0;r<n._queue.length;r+=1){if(n._queue[r].__fetchQueue._batch!==n._batch){break}}n._queue.splice(r,0,e)}};this.get=function(e){return r.inArray(e,n._queue)};this.remove=function(e){var t=r.inArray(e,n._queue);if(t>=0){n._queue.splice(t,1);return true}return false};this.batch=function(e){if(e===undefined){return n._batch}if(!e){n._batch=false}else{n._batch=i;i+=1}return n};this.next_item=function(){if(n._innextitem){return}n._innextitem=true;if(n._queue.length>n._track&&n._needed){for(var e=n._queue.length-1;e>=0;e-=1){if(!n._needed(n._queue[e])){var t=n._queue.splice(e,1)[0];n._processing+=1;t.__fetchQueue.reject();delete t.__fetchQueue}}}while(n._processing<(n._initialSize||n._size)&&n._queue.length){var r=n._queue.shift();if(r.__fetchQueue){n._processing+=1;var i=n._needed?n._needed(r):true;if(i){r.__fetchQueue.resolve()}else{r.__fetchQueue.reject()}delete r.__fetchQueue}}n._innextitem=false};this.clear();return this};e.exports=i},function(e,t,n){"use strict";var r=n(1);var i=n(105);var a=n(38);var o=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}a.call(this);t=t||{};if(!(t.layer instanceof i)){throw new Error("fileReader must be given a feature layer")}var n=t.layer;this.layer=function(){return n};this.canRead=function(e){return false};this.read=function(e,t,n){var r=new Promise(function(e,n){if(t){t(false)}throw new Error("The default file reader always fails")});this.addPromise(r);return r};function r(e,t){var n=new FileReader;if(t){n.onprogress=t}n.onloadend=function(){e(n.error||n.result)};return n}this._getString=function(e,t,n){var i=r(t,n);i.readAsText(e)};return this};r(o,a);e.exports=o},function(e,t,n){"use strict";var r=n(1);var i=n(19);var a=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}t=t||{};i.call(this,t);var r=n(3);var a=n(5);var o=n(2);var s=this,u=this.draw,l=this.style,c=null,f=null,d=function e(t){return t.children},p=[],h=this._init,g=this._exit;this.featureType="graph";this._init=function(e){h.call(s,e);var t=r.extend(true,{},{nodes:{radius:5,fill:true,fillColor:{r:1,g:0,b:0},strokeColor:{r:0,g:0,b:0}},links:{strokeColor:{r:0,g:0,b:0}},linkType:"path"},e.style===undefined?{}:e.style);s.style(t);s.nodes(function(e){return e});return s};this._build=function(){s.children().forEach(function(e){e._build()})};this._update=function(){s.children().forEach(function(e){e._update()})};this._exit=function(){s.data([]);p.forEach(function(e){e._exit();s.removeChild(e)});p=[];f._exit();s.removeChild(f);g();return s};this.style=function(e,t){var n=l.call(s,e,t);if(n!==s){return n}f.style(e.nodes);p.forEach(function(t){t.style(e.links)});return s};this.style.get=l.get;this.links=function(e){if(e===undefined){return d}d=a.ensureFunction(e);return s};this.nodes=function(e){if(e===undefined){return c}c=e;s.modified();return s};this.nodeFeature=function(){return f};this.linkFeatures=function(){return p};this.draw=function(){var e=s.layer(),t=s.data(),n=0,r;r=s.style();f.data(t);f.style(r.nodes);t.forEach(function(t){(t.children||[]).forEach(function(i){var a;n+=1;if(p.length<n){a=o.createFeature(r.linkType,e,e.renderer()).style(r.links);s.addChild(a);p.push(a)}p[n-1].data([t,i])})});p.splice(n,p.length-n).forEach(function(e){e._exit();s.removeChild(e)});u();return s};f=o.createFeature("point",this.layer(),this.layer().renderer());s.addChild(f);if(t.nodes){this.nodes(t.nodes)}this._init(t);return this};r(a,i);e.exports=a},function(e,t,n){"use strict";var r=n(3);var i=n(1);var a=n(19);var o=n(17);var s=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}t=t||{};a.call(this,t);var n=this,i,s,u,l,c,f,d,p=this._init;this.featureType="heatmap";i=t.position||function(e){return e};s=t.intensity||function(e){return 1};u=t.maxIntensity!==undefined?t.maxIntensity:null;l=t.minIntensity!==undefined?t.minIntensity:null;f=t.binned!==undefined?t.binned:"auto";c=t.updateDelay?parseInt(t.updateDelay,10):1e3;this.maxIntensity=function(e){if(e===undefined){return u}else{u=e;n.dataTime().modified();n.modified()}return n};this.minIntensity=function(e){if(e===undefined){return l}else{l=e;n.dataTime().modified();n.modified()}return n};this.updateDelay=function(e){if(e===undefined){return c}else{c=parseInt(e,10)}return n};this.binned=function(e){if(e===undefined){return f}else{if(e==="true"){e=true}else if(e==="false"){e=false}else if(e!=="auto"&&e!==true&&e!==false){e=parseInt(e,10);if(e<=0||isNaN(e)){e=false}}f=e;n.dataTime().modified();n.modified()}return n};this.position=function(e){if(e===undefined){return i}else{i=e;n.dataTime().modified();n.modified()}return n};this.gcsPosition=function(){n._update();return d};this.intensity=function(e){if(e===undefined){return s}else{s=e;n.dataTime().modified();n.modified()}return n};this._init=function(e){p.call(n,e);var t=r.extend({},{radius:10,blurRadius:10,gaussian:true,color:{0:{r:0,g:0,b:0,a:0},.25:{r:0,g:0,b:1,a:.5},.5:{r:0,g:1,b:1,a:.6},.75:{r:1,g:1,b:0,a:.7},1:{r:1,g:0,b:0,a:.8}}},e.style===undefined?{}:e.style);n.style(t);if(i){n.dataTime().modified()}};this._build=function(){var e=n.data(),t=null,r=[],i=u===null||u===undefined,a=l===null||l===undefined;e.forEach(function(e,o){r.push(n.position()(e,o));if(i||a){t=n.intensity()(e,o);if(u===null||u===undefined){u=t}if(l===null||l===undefined){l=t}if(i&&t>u){u=t}if(a&&t<l){l=t}}});if(a&&i&&l===u){l-=1}d=o.transformCoordinates(n.gcs(),n.layer().map().gcs(),r);n.buildTime().modified();return n};this._init(t);return this};i(s,a);e.exports=s},function(e,t,n){"use strict";var r=n(1);var i=n(149);var a=function e(t){if(!(this instanceof e)){return new e(t)}var r=n(3);t.size=t.size||{x:256,y:256};this._image=null;this._cors=t.crossDomain||t.crossDomain===null?t.crossDomain:"anonymous";i.call(this,t);Object.defineProperty(this,"image",{get:function e(){return this._image}});this.fetch=function(){var e;if(!this._image){this._image=new Image(this.right-this.left,this.bottom-this.top);if(this._cors&&this._url.indexOf(":")>=0&&this._url.indexOf("/")===this._url.indexOf(":")+1){this._image.crossOrigin=this._cors}e=r.Deferred();this._image.onload=e.resolve;this._image.onerror=e.reject;this._image.src=this._url;e.done(function(){this._fetched=true}.bind(this)).promise(this)}return this};this.fadeIn=function(e){var t=this.fetch(),n=r.Deferred();r(this._image).css("display","none");t.done(function(){r(this._image).fadeIn(e,function(){n.resolve()})}.bind(this));return n.promise(this)};return this};r(a,i);e.exports=a},function(e,t,n){"use strict";var r=n(1);var i=n(2).registerLayer;var a=n(79);var o=function e(t){"use strict";var r=n(2).createWidget;t.renderer="dom";t.sticky=false;if(!(this instanceof e)){return new e(t)}a.call(this,t);var i=this,o=this._exit;this.createWidget=function(e,t){var n=r(e,i,t);if(!(t&&"parent"in t)){i.addChild(n)}n._init(t);i.modified();return n};this.deleteWidget=function(e){e._exit();i.removeChild(e);i.modified();return i};this._exit=function(){i.children().forEach(function(e){i.deleteWidget(e)});o()}};r(o,a);i("ui",o);e.exports=o},function(e,t,n){"use strict";var r=n(1);var i=n(19);var a=n(57);var o=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}t=t||{};a.call(this,t);var r=n(3);var i=n(20);var o=n(5);var s=n(247);var u=this,l=this._init,c=null,f=i(),d=0,p=0,h=0;this.featureType="marker";this._updateRangeTree=function(){if(f.timestamp()>=u.dataTime().timestamp()&&f.timestamp()>=u.timestamp()){return}var t,n,r=u.style.get("radius"),i=u.style.get("strokeWidth"),a=u.style.get("strokeOffset"),o=u.style.get("scaleWithZoom");n=u.position();d=0;p=0;h=0;t=u.data().map(function(t,s){var u=n(t,s);var l=r(t,s),c=o(t,s),f=i(t,s),g=Math.sign(a(t,s));var m=l+f*(g+1)/2,v=l+f*(g-1)/2;c=e.scaleMode[c]||(c>=1&&c<=3?c:0);switch(c){case e.scaleMode.stroke:if(v>d){d=v}if(f>h){h=f}break;case e.scaleMode.fill:case e.scaleMode.all:if(m>p){p=m}break;default:if(m>d){d=m}break}return[u.x,u.y]});c=new s(t);f.modified()};this._approximateMaxRadius=function(e){u._updateRangeTree();var t=Math.pow(2,e);return Math.max(d+h*t,p*t)};this.pointSearch=function(t,n){var r,i,a,o=[],s=[],l=[],f=u.gcs(),d,p=u.style.get("radius"),h=u.style.get("strokeWidth"),g=u.style.get("strokeOffset"),m=u.style.get("scaleWithZoom");a=u.data();if(!a||!a.length){return{found:[],index:[]}}u._updateRangeTree();var v=u.layer().map();n=n===null?v.gcs():n===undefined?v.ingcs():n;var y=v.gcsToDisplay(t,n),b=v.zoom(),M=Math.pow(2,b),x=this._approximateMaxRadius(b);d=[v.displayToGcs({x:y.x-x,y:y.y-x},f),v.displayToGcs({x:y.x+x,y:y.y-x},f),v.displayToGcs({x:y.x-x,y:y.y+x},f),v.displayToGcs({x:y.x+x,y:y.y+x},f)];r={x:Math.min(d[0].x,d[1].x,d[2].x,d[3].x),y:Math.min(d[0].y,d[1].y,d[2].y,d[3].y)};i={x:Math.max(d[0].x,d[1].x,d[2].x,d[3].x),y:Math.max(d[0].y,d[1].y,d[2].y,d[3].y)};o=c.range(r.x,r.y,i.x,i.y);o.sort(function(e,t){return e-t});o.forEach(function(t){var n=a[t],r=p(a[t],t),i=m(a[t],t),o=g(a[t],t),c=i?h(a[t],t):0;var d=r+c*(o-1)/2;r=d+c;var b=u.position()(n,t),x,w,A;i=e.scaleMode[i]||(i>=1&&i<=3?i:0);switch(i){case e.scaleMode.fill:r=d*M+c;break;case e.scaleMode.stroke:r=d+c*M;break;case e.scaleMode.all:r*=M;break}if(r){A=r*r;b=v.gcsToDisplay(b,f);x=b.x-y.x;w=b.y-y.y;if(x*x+w*w<=A){s.push(n);l.push(t)}}});return{found:s,index:l}};this.polygonSearch=function(t,n,r){var i=u.gcs(),a=[],s=[],l={},f=u.layer().map(),d=u.data(),p=u.style.get("radius"),h=u.style.get("strokeWidth"),g=u.style.get("strokeOffset"),m=u.style.get("scaleWithZoom"),v,y,b,M,x=f.zoom(),w=Math.pow(2,x),A=this._approximateMaxRadius(x);r=r===null?f.gcs():r===undefined?f.ingcs():r;if(!t.outer){t={outer:t,inner:[]}}if(t.outer.length<3||!d||!d.length){return{found:[],index:[],extra:{}}}n=n||{};n.partial=n.partial||false;t={outer:f.gcsToDisplay(t.outer,r),inner:(t.inner||[]).map(function(e){return f.gcsToDisplay(e,r)})};t.outer.forEach(function(e){if(!y){y={x:e.x,y:e.y};b={x:e.x,y:e.y}}if(e.x<y.x){y.x=e.x}if(e.x>b.x){b.x=e.x}if(e.y<y.y){y.y=e.y}if(e.y>b.y){b.y=e.y}});u._updateRangeTree();M=[f.displayToGcs({x:y.x-A,y:y.y-A},i),f.displayToGcs({x:b.x+A,y:y.y-A},i),f.displayToGcs({x:b.x+A,y:b.y+A},i),f.displayToGcs({x:y.x-A,y:b.y+A},i)];y={x:Math.min(M[0].x,M[1].x,M[2].x,M[3].x),y:Math.min(M[0].y,M[1].y,M[2].y,M[3].y)};b={x:Math.max(M[0].x,M[1].x,M[2].x,M[3].x),y:Math.max(M[0].y,M[1].y,M[2].y,M[3].y)};v=c.range(y.x,y.y,b.x,b.y);v.sort(function(e,t){return e-t});v.forEach(function(r){var c=d[r];var v=u.position()(c,r);var y=p(d[r],r),b=m(d[r],r),M=g(d[r],r),x=b?h(d[r],r):0;var A=y+x*(M-1)/2;b=e.scaleMode[b]||(b>=1&&b<=3?b:0);y=A+x;switch(b){case e.scaleMode.fill:y=A*w+x;break;case e.scaleMode.stroke:y=A+x*w;break;case e.scaleMode.all:y*=w;break}if(y){v=f.gcsToDisplay(v,i);var T=o.distanceToPolygon2d(v,t);if(T>=y||T>=0&&n.partial==="center"||T>=-y&&n.partial&&n.partial!=="center"){a.push(c);s.push(r);l[r]={partial:T<y,distance:T}}}});return{found:a,index:s,extra:l}};this._init=function(t){t=r.extend(true,{},{style:r.extend({},{radius:6.25,strokeColor:{r:.851,g:.604,b:0},strokeOffset:-1,strokeOpacity:1,strokeWidth:1.25,fillColor:{r:1,g:.839,b:.439},fillOpacity:.8,symbol:0,symbolValue:0,rotation:0,scaleWithZoom:e.scaleMode.none,rotateWithMap:false},t&&t.style===undefined?{}:t.style)},t);l.call(u,t);return u};return u};o.create=function(e,t){"use strict";t=t||{};t.type="marker";return i.create(e,t)};o.capabilities={feature:"marker"};o.primitiveShapes=a.primitiveShapes;o.symbols={circle:0,ellipse:0,flowerBase:1,flowerMax:16,triangle:16,diamond:17,starBase:17,starMax:16,square:32,rectangle:32,crossBase:33,crossMax:16,oval:48,jackBase:49,jackMax:16,drop:64,dropBase:65,dropMax:16,arrow:80,arrowBase:81,arrowMax:16,length:96};["flower","star","cross","jack","drop","arrow"].forEach(function(e){for(var t=2;t<=o.symbols[e+"Max"];t+=1){o.symbols[e+t]=o.symbols[e+"Base"]-2+t}});o.scaleMode={none:0,fill:1,stroke:2,all:3};r(o,a);e.exports=o},function(e,t,n){"use strict";var r=function e(t){if(!(this instanceof e)){return new e(t)}t=t||{};this._size=t.size||64;Object.defineProperty(this,"size",{get:function e(){return this._size},set:function e(t){while(this._atime.length>t){this.remove(this._atime[this._atime.length-1])}this._size=t}});Object.defineProperty(this,"length",{get:function e(){return this._atime.length}});this._access=function(e){return this._atime.indexOf(e)};this.remove=function(e){var t=typeof e==="string"?e:e.toString();if(!(t in this._cache)){return false}this._atime.splice(this._access(t),1);delete this._cache[t];return true};this.clear=function(){this._cache={};this._atime=[];return this};this.get=function(e,t){e=typeof e==="string"?e:e.toString();if(!(e in this._cache)){return null}if(!t){this._atime.splice(this._access(e),1);this._atime.unshift(e)}return this._cache[e]};this.add=function(e,t,n){this.remove(e);var r=e.toString();this._cache[r]=e;this._atime.unshift(r);if(!n){this.purge(t)}};this.purge=function(e){var t;while(this._atime.length>this.size){t=this._atime.pop();var n=this._cache[t];if(e){e(n)}delete this._cache[t]}};this.clear();return this};e.exports=r},function(e,t,n){"use strict";var r=n(3);var i=n(1);var a=n(19);var o=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}t=t||{};a.call(this,t);var n=this,i=this._init;this.featureType="path";this.position=function(e){if(e===undefined){return n.style("position")}if(e!==n.style("position")){n.style("position",e);n.dataTime().modified();n.modified()}return n};this._init=function(e){i.call(n,e);var t=r.extend({},{strokeWidth:1,strokeColor:{r:1,g:1,b:1},position:function e(t){return t}},e.style===undefined?{}:e.style);if(e.position!==undefined){t.position=e.position}n.style(t);if(t.position){n.position(t.position)}n.dataTime().modified();return n};this._init(t);return this};i(o,a);e.exports=o},function(e,t,n){"use strict";var r=n(3);var i=n(1);var a=n(19);var o=n(11);var s=n(5);var u=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}t=t||{};a.call(this,t);var n=this,i,u,l,c=this._update,f=this._init,d=this._exit;this.featureType="pixelmap";this.position=function(e){if(e===undefined){return n.style("position")}else if(e!==n.style("position")){n.style("position",e);n.dataTime().modified();n.modified()}return n};this.url=function(e){if(e===undefined){return n.style("url")}else if(e!==n.style("url")){u=l=undefined;n.style("url",e);n.dataTime().modified();n.modified()}return n};this.maxIndex=function(){if(l){if(l.maxIndex===undefined){l.maxIndex=0;for(var e in l.mappedColors){if(l.mappedColors.hasOwnProperty(e)){l.maxIndex=Math.max(l.maxIndex,e)}}}return l.maxIndex}};this.color=function(e){if(e===undefined){return n.style("color")}else if(e!==n.style("color")){n.style("color",e);n.dataTime().modified();n.modified()}return n};this.pointSearch=function(e,t){if(i&&l){var r=i.pointSearch(e,t);if(r.index.length===1&&r.extra&&r.extra[r.index[0]].basis){var a=r.extra[r.index[0]].basis,o,s,u;o=Math.floor(a.x*l.width);s=Math.floor(a.y*l.height);if(o>=0&&o<l.width&&s>=0&&s<l.height){u=l.indices[s*l.width+o];r={index:[u],found:[n.data()[u]]};return r}}}return{index:[],found:[]}};this._build=function(){n.buildTime().modified();if(!u){var e=n.style.get("url")();if(s.isReadyImage(e)){u=e;n._computePixelmap()}else if(e){var t=r.Deferred(),i,a;if(e instanceof Image){u=e;i=e.onload;a=e.onerror}else{u=new Image;if(e.indexOf(":")>=0&&e.indexOf("/")===e.indexOf(":")+1){u.crossOrigin=n.style.get("crossDomain")()||"anonymous"}}u.onload=function(){if(i){i.apply(n,arguments)}if(n.style.get("url")()===e){l=undefined;n._computePixelmap()}t.resolve()};u.onerror=function(){if(a){a.apply(n,arguments)}t.reject()};t.promise(n);n.layer().addPromise(n);if(!(e instanceof Image)){u.src=e}}}else if(l){n._computePixelmap()}return n};this._preparePixelmap=function(){var e,t,n;if(!s.isReadyImage(u)){return}l={width:u.naturalWidth,height:u.naturalHeight,canvas:document.createElement("canvas")};l.canvas.width=l.width;l.canvas.height=l.height;l.context=l.canvas.getContext("2d");l.context.drawImage(u,0,0);l.imageData=l.context.getImageData(0,0,l.canvas.width,l.canvas.height);n=l.imageData.data;l.indices=new Array(n.length/4);l.area=n.length/4;l.mappedColors={};for(e=0;e<n.length;e+=4){t=n[e]+(n[e+1]<<8)+(n[e+2]<<16);l.indices[e/4]=t;if(!l.mappedColors[t]){l.mappedColors[t]={first:e/4}}l.mappedColors[t].last=e/4}return l};this._computePixelmap=function(){var e=n.data()||[],t=n.style.get("color"),r,a,s,u,c,f,d,p,h=-1,g,m;if(!l){if(!n._preparePixelmap()){return}m=true}d=l.mappedColors;p=l.area;for(a in d){if(d.hasOwnProperty(a)){u=t(e[a],+a)||{};u=[(u.r||0)*255,(u.g||0)*255,(u.b||0)*255,u.a===undefined?255:u.a*255];d[a].update=!d[a].color||d[a].color[0]!==u[0]||d[a].color[1]!==u[1]||d[a].color[2]!==u[2]||d[a].color[3]!==u[3];if(d[a].update){d[a].color=u;p=Math.min(d[a].first,p);h=Math.max(d[a].last,h)}}}if(p>=h){return}c=l.imageData.data;f=l.indices;for(r=p;r<=h;r+=1){a=f[r];if(a!==s){s=a;u=d[a].color;g=d[a].update}if(g){c[r*4]=u[0];c[r*4+1]=u[1];c[r*4+2]=u[2];c[r*4+3]=u[3]}}l.context.putImageData(l.imageData,0,0,0,Math.floor(p/l.width),l.width,Math.ceil((h+1)/l.width));if(!i){i=n.layer().createFeature("quad",{selectionAPI:false,gcs:n.gcs(),visible:n.visible(undefined,true)});n.dependentFeatures([i]);i.style({image:l.canvas,position:n.style.get("position")}).data([{}]).draw()}if(m){n.geoTrigger(o.pixelmap.prepared,{pixelmap:n})}};this._update=function(){c.call(n);if(n.buildTime().timestamp()<=n.dataTime().timestamp()||n.updateTime().timestamp()<n.timestamp()){n._build()}n.updateTime().modified();return n};this._exit=function(){if(i&&n.layer()){n.layer().deleteFeature(i);i=null;n.dependentFeatures([])}d();return n};this._init=function(e){e=e||{};f.call(n,e);var t=r.extend({},{color:function e(t,n){return{r:(n&255)/255,g:(n>>8&255)/255,b:(n>>16&255)/255,a:1}},position:function e(t){return t}},e.style===undefined?{}:e.style);if(e.position!==undefined){t.position=e.position}if(e.url!==undefined){t.url=e.url}if(e.color!==undefined){t.color=e.color}n.style(t);n.dataTime().modified();return n};return this};u.create=function(e,t){"use strict";t=t||{};t.type="pixelmap";return a.create(e,t)};u.capabilities={feature:"pixelmap"};i(u,a);e.exports=u},function(e,t,n){"use strict";var r=n(1);var i=n(19);var a=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}var r=n(3);t=t||{};i.call(this,t);var a=this,o=this._init;this.featureType="vector";this.origin=function(e){if(e===undefined){return a.style("origin")}else{a.style("origin",e);a.dataTime().modified()}return a};this.delta=function(e){if(e===undefined){return a.style("delta")}else{a.style("delta",e);a.dataTime().modified()}return a};this._init=function(e){o.call(a,e);var t=r.extend({},{strokeColor:"black",strokeWidth:2,strokeOpacity:1,originStyle:"none",endStyle:"arrow",origin:{x:0,y:0,z:0},delta:function e(t){return t},scale:null},e.style===undefined?{}:e.style);if(e.origin!==undefined){t.origin=e.origin}a.style(t);a.dataTime().modified();return a}};r(a,i);e.exports=a},function(e,t,n){"use strict";var r=n(1);var i=n(2).registerRenderer;var a=n(56);var o=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}t=t||{};a.call(this,t);var r=n(75);var i=n(11);var o=e.vtkjs;var s=o.Rendering.Misc.vtkGenericRenderWindow;var u=this,l=this._init;var c=s.newInstance({background:[0,0,0,0]});c.setContainer(u.layer().node().get(0));c.getInteractor().unbindEvents();c.resize();var f=c.getRenderer();var d=c.getRenderWindow();this.contextRenderer=function(){return f};this.api=function(){return e.apiname};this._init=function(){if(u.initialized()){return u}l.call(u);var e=u.layer().map(),t=e.size();u._resize(0,0,t.width,t.height);e.camera().clipbounds={near:-e.unitsPerPixel(),far:e.unitsPerPixel()};return u};this._resize=function(e,t,n,r){u._setWidthHeight(n,r);c.resize();u._render();return u};this._render=function(){u.layer().map().scheduleAnimationFrame(u._renderFrame,true);return u};this._renderFrame=function(){var e=u.layer(),t=e.features(),n;for(n=0;n<t.length;n+=1){if(t[n].visible()){t[n]._update()}}u._updateRendererCamera();d.render()};this._exit=function(){};this._updateRendererCamera=function(){var e=u.layer().map(),t=e.camera(),n=t.view,i=t.projectionMatrix;var a=r.create();r.copy(a,n);var o=r.create();r.copy(o,i);u.contextRenderer().getActiveCamera().setViewMatrix(a);u.contextRenderer().getActiveCamera().setProjectionMatrix(o)};u.layer().geoOn(i.pan,function(e){u._render()});u.layer().geoOn(i.parallelprojection,function(e){});return this};o.apiname="vtkjs";r(o,a);i("vtkjs",o);o.supported=function(){delete o.vtkjs;try{o.vtkjs=n(648)}catch(e){}if((!o.vtkjs||!o.vtkjs.Rendering)&&window.vtk&&window.vtk.Rendering){o.vtkjs=window.vtk}return o.vtkjs!==undefined};o.fallback=function(){return null};o.supported();e.exports=o},function(e,t,n){"use strict";var r=n(57);function i(e,t){t=t||{};e._primitiveShapeAuto=true;e._primitiveShape=r.primitiveShapes.auto;if(r.primitiveShapes[t.primitiveShape]!==undefined){e._primitiveShape=t.primitiveShape}e._primitiveShapeAuto=e._primitiveShape===r.primitiveShapes.auto;if(e._primitiveShapeAuto){e._primitiveShape=r.primitiveShapes.sprite;e._primitiveShapeAuto=true}e._pointPolygon=function(t,n,i,a){var o;switch(e._primitiveShape){case r.primitiveShapes.triangle:o=[t,n-a*2,t-i*Math.sqrt(3),n+a,t+i*Math.sqrt(3),n+a];break;case r.primitiveShapes.square:o=[t-i,n+a,t-i,n-a,t+i,n+a,t-i,n-a,t+i,n-a,t+i,n+a];break;default:o=[t,n];break}return o};e.verticesPerFeature=function(){var t=e._pointPolygon(0,0,1,1);return t.length/2};e.primitiveShape=function(t,n){if(t===undefined){return n||!e._primitiveShapeAuto?e._primitiveShape:r.primitiveShapes.auto}if(r.primitiveShapes[t]!==undefined){var i=false;if(t===r.primitiveShapes.auto){i=!e._primitiveShapeAuto;e._primitiveShapeAuto=true}else{i=e._primitiveShapeAuto||e._primitiveShape!==t;e._primitiveShapeAuto=false;e._primitiveShape=t}if(i){e.renderer().contextRenderer().removeActor(e.actors()[0]);e._init(true);e.dataTime().modified()}}return e}}e.exports=i},function(e,t,n){"use strict";var r=n(151);var i=n(1);var a=n(2).registerWidget;var o=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}r.call(this,t);var n=this,i="div";this._init=function(){if(t.hasOwnProperty("parent")){t.parent.addChild(n)}n._createCanvas();n._appendCanvasToParent();n.canvas().addEventListener("mousedown",function(e){e.stopPropagation()});n.reposition();return n};this._createCanvas=function(){n.canvas(document.createElement(t.el||i))};return this};i(o,r);a("dom","dom",o);e.exports=o},function(e,t,n){n(269);e.exports=n(472)},function(e,t,n){(function(e){if(!e._babelPolyfill){n(270)}}).call(t,n(81))},function(e,t,n){"use strict";(function(e){n(271);n(468);n(469);if(e._babelPolyfill){throw new Error("only one instance of babel-polyfill is allowed")}e._babelPolyfill=true;var t="defineProperty";function r(e,n,r){e[n]||Object[t](e,n,{writable:true,configurable:true,value:r})}r(String.prototype,"padLeft","".padStart);r(String.prototype,"padRight","".padEnd);"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(e){[][e]&&r(Array,e,Function.call.bind([][e]))})}).call(t,n(81))},function(e,t,n){n(272);n(275);n(276);n(277);n(278);n(279);n(280);n(281);n(282);n(283);n(284);n(285);n(286);n(287);n(288);n(289);n(290);n(291);n(292);n(293);n(294);n(295);n(296);n(297);n(298);n(299);n(300);n(301);n(302);n(303);n(304);n(305);n(306);n(307);n(308);n(309);n(310);n(311);n(312);n(313);n(314);n(315);n(316);n(317);n(318);n(319);n(320);n(321);n(322);n(323);n(324);n(325);n(326);n(327);n(328);n(329);n(330);n(331);n(332);n(333);n(334);n(335);n(336);n(337);n(338);n(339);n(340);n(341);n(342);n(343);n(344);n(345);n(346);n(347);n(348);n(349);n(350);n(352);n(353);n(355);n(356);n(357);n(358);n(359);n(360);n(361);n(363);n(364);n(365);n(366);n(367);n(368);n(369);n(370);n(371);n(372);n(373);n(374);n(375);n(128);n(376);n(171);n(377);n(172);n(378);n(379);n(380);n(381);n(382);n(175);n(177);n(178);n(383);n(384);n(385);n(386);n(387);n(388);n(389);n(390);n(391);n(392);n(393);n(394);n(395);n(396);n(397);n(398);n(399);n(400);n(401);n(402);n(403);n(404);n(405);n(406);n(407);n(408);n(409);n(410);n(411);n(412);n(413);n(414);n(415);n(416);n(417);n(418);n(419);n(420);n(421);n(422);n(423);n(424);n(425);n(426);n(427);n(428);n(429);n(430);n(431);n(432);n(433);n(434);n(435);n(436);n(437);n(438);n(439);n(440);n(441);n(442);n(443);n(444);n(445);n(446);n(447);n(448);n(449);n(450);n(451);n(452);n(453);n(454);n(455);n(456);n(457);n(458);n(459);n(460);n(461);n(462);n(463);n(464);n(465);n(466);n(467);e.exports=n(28)},function(e,t,n){"use strict";var r=n(6);var i=n(24);var a=n(14);var o=n(0);var s=n(22);var u=n(43).KEY;var l=n(8);var c=n(68);var f=n(60);var d=n(46);var p=n(10);var h=n(153);var g=n(109);var m=n(274);var v=n(84);var y=n(4);var b=n(9);var M=n(16);var x=n(25);var w=n(34);var A=n(45);var T=n(49);var C=n(156);var S=n(26);var D=n(83);var I=n(15);var E=n(47);var N=S.f;var O=I.f;var _=C.f;var L=r.Symbol;var P=r.JSON;var k=P&&P.stringify;var R="prototype";var j=p("_hidden");var B=p("toPrimitive");var z={}.propertyIsEnumerable;var F=c("symbol-registry");var V=c("symbols");var U=c("op-symbols");var G=Object[R];var W=typeof L=="function"&&!!D.f;var H=r.QObject;var Y=!H||!H[R]||!H[R].findChild;var Q=a&&l(function(){return T(O({},"a",{get:function(){return O(this,"a",{value:7}).a}})).a!=7})?function(e,t,n){var r=N(G,t);if(r)delete G[t];O(e,t,n);if(r&&e!==G)O(G,t,r)}:O;var q=function(e){var t=V[e]=T(L[R]);t._k=e;return t};var X=W&&typeof L.iterator=="symbol"?function(e){return typeof e=="symbol"}:function(e){return e instanceof L};var K=function e(t,n,r){if(t===G)K(U,n,r);y(t);n=w(n,true);y(r);if(i(V,n)){if(!r.enumerable){if(!i(t,j))O(t,j,A(1,{}));t[j][n]=true}else{if(i(t,j)&&t[j][n])t[j][n]=false;r=T(r,{enumerable:A(0,false)})}return Q(t,n,r)}return O(t,n,r)};var Z=function e(t,n){y(t);var r=m(n=x(n));var i=0;var a=r.length;var o;while(a>i)K(t,o=r[i++],n[o]);return t};var J=function e(t,n){return n===undefined?T(t):Z(T(t),n)};var $=function e(t){var n=z.call(this,t=w(t,true));if(this===G&&i(V,t)&&!i(U,t))return false;return n||!i(this,t)||!i(V,t)||i(this,j)&&this[j][t]?n:true};var ee=function e(t,n){t=x(t);n=w(n,true);if(t===G&&i(V,n)&&!i(U,n))return;var r=N(t,n);if(r&&i(V,n)&&!(i(t,j)&&t[j][n]))r.enumerable=true;return r};var te=function e(t){var n=_(x(t));var r=[];var a=0;var o;while(n.length>a){if(!i(V,o=n[a++])&&o!=j&&o!=u)r.push(o)}return r};var ne=function e(t){var n=t===G;var r=_(n?U:x(t));var a=[];var o=0;var s;while(r.length>o){if(i(V,s=r[o++])&&(n?i(G,s):true))a.push(V[s])}return a};if(!W){L=function e(){if(this instanceof L)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:undefined);var n=function(e){if(this===G)n.call(U,e);if(i(this,j)&&i(this[j],t))this[j][t]=false;Q(this,t,A(1,e))};if(a&&Y)Q(G,t,{configurable:true,set:n});return q(t)};s(L[R],"toString",function e(){return this._k});S.f=ee;I.f=K;n(50).f=C.f=te;n(70).f=$;D.f=ne;if(a&&!n(42)){s(G,"propertyIsEnumerable",$,true)}h.f=function(e){return q(p(e))}}o(o.G+o.W+o.F*!W,{Symbol:L});for(var re="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ie=0;re.length>ie;)p(re[ie++]);for(var ae=E(p.store),oe=0;ae.length>oe;)g(ae[oe++]);o(o.S+o.F*!W,"Symbol",{for:function(e){return i(F,e+="")?F[e]:F[e]=L(e)},keyFor:function e(t){if(!X(t))throw TypeError(t+" is not a symbol!");for(var n in F)if(F[n]===t)return n},useSetter:function(){Y=true},useSimple:function(){Y=false}});o(o.S+o.F*!W,"Object",{create:J,defineProperty:K,defineProperties:Z,getOwnPropertyDescriptor:ee,getOwnPropertyNames:te,getOwnPropertySymbols:ne});var se=l(function(){D.f(1)});o(o.S+o.F*se,"Object",{getOwnPropertySymbols:function e(t){return D.f(M(t))}});P&&o(o.S+o.F*(!W||l(function(){var e=L();return k([e])!="[null]"||k({a:e})!="{}"||k(Object(e))!="{}"})),"JSON",{stringify:function e(t){var n=[t];var r=1;var i,a;while(arguments.length>r)n.push(arguments[r++]);a=i=n[1];if(!b(i)&&t===undefined||X(t))return;if(!v(i))i=function(e,t){if(typeof a=="function")t=a.call(this,e,t);if(!X(t))return t};n[1]=i;return k.apply(P,n)}});L[R][B]||n(21)(L[R],B,L[R].valueOf);f(L,"Symbol");f(Math,"Math",true);f(r.JSON,"JSON",true)},function(e,t,n){e.exports=n(68)("native-function-to-string",Function.toString)},function(e,t,n){var r=n(47);var i=n(83);var a=n(70);e.exports=function(e){var t=r(e);var n=i.f;if(n){var o=n(e);var s=a.f;var u=0;var l;while(o.length>u)if(s.call(e,l=o[u++]))t.push(l)}return t}},function(e,t,n){var r=n(0);r(r.S,"Object",{create:n(49)})},function(e,t,n){var r=n(0);r(r.S+r.F*!n(14),"Object",{defineProperty:n(15).f})},function(e,t,n){var r=n(0);r(r.S+r.F*!n(14),"Object",{defineProperties:n(155)})},function(e,t,n){var r=n(25);var i=n(26).f;n(36)("getOwnPropertyDescriptor",function(){return function e(t,n){return i(r(t),n)}})},function(e,t,n){var r=n(16);var i=n(27);n(36)("getPrototypeOf",function(){return function e(t){return i(r(t))}})},function(e,t,n){var r=n(16);var i=n(47);n(36)("keys",function(){return function e(t){return i(r(t))}})},function(e,t,n){n(36)("getOwnPropertyNames",function(){return n(156).f})},function(e,t,n){var r=n(9);var i=n(43).onFreeze;n(36)("freeze",function(e){return function t(n){return e&&r(n)?e(i(n)):n}})},function(e,t,n){var r=n(9);var i=n(43).onFreeze;n(36)("seal",function(e){return function t(n){return e&&r(n)?e(i(n)):n}})},function(e,t,n){var r=n(9);var i=n(43).onFreeze;n(36)("preventExtensions",function(e){return function t(n){return e&&r(n)?e(i(n)):n}})},function(e,t,n){var r=n(9);n(36)("isFrozen",function(e){return function t(n){return r(n)?e?e(n):false:true}})},function(e,t,n){var r=n(9);n(36)("isSealed",function(e){return function t(n){return r(n)?e?e(n):false:true}})},function(e,t,n){var r=n(9);n(36)("isExtensible",function(e){return function t(n){return r(n)?e?e(n):true:false}})},function(e,t,n){var r=n(0);r(r.S+r.F,"Object",{assign:n(157)})},function(e,t,n){var r=n(0);r(r.S,"Object",{is:n(158)})},function(e,t,n){var r=n(0);r(r.S,"Object",{setPrototypeOf:n(113).set})},function(e,t,n){"use strict";var r=n(61);var i={};i[n(10)("toStringTag")]="z";if(i+""!="[object z]"){n(22)(Object.prototype,"toString",function e(){return"[object "+r(this)+"]"},true)}},function(e,t,n){var r=n(0);r(r.P,"Function",{bind:n(159)})},function(e,t,n){var r=n(15).f;var i=Function.prototype;var a=/^\s*function ([^ (]*)/;var o="name";o in i||n(14)&&r(i,o,{configurable:true,get:function(){try{return(""+this).match(a)[1]}catch(e){return""}}})},function(e,t,n){"use strict";var r=n(9);var i=n(27);var a=n(10)("hasInstance");var o=Function.prototype;if(!(a in o))n(15).f(o,a,{value:function(e){if(typeof this!="function"||!r(e))return false;if(!r(this.prototype))return e instanceof this;while(e=i(e))if(this.prototype===e)return true;return false}})},function(e,t,n){var r=n(0);var i=n(161);r(r.G+r.F*(parseInt!=i),{parseInt:i})},function(e,t,n){var r=n(0);var i=n(162);r(r.G+r.F*(parseFloat!=i),{parseFloat:i})},function(e,t,n){"use strict";var r=n(6);var i=n(24);var a=n(30);var o=n(115);var s=n(34);var u=n(8);var l=n(50).f;var c=n(26).f;var f=n(15).f;var d=n(62).trim;var p="Number";var h=r[p];var g=h;var m=h.prototype;var v=a(n(49)(m))==p;var y="trim"in String.prototype;var b=function(e){var t=s(e,false);if(typeof t=="string"&&t.length>2){t=y?t.trim():d(t,3);var n=t.charCodeAt(0);var r,i,a;if(n===43||n===45){r=t.charCodeAt(2);if(r===88||r===120)return NaN}else if(n===48){switch(t.charCodeAt(1)){case 66:case 98:i=2;a=49;break;case 79:case 111:i=8;a=55;break;default:return+t}for(var o=t.slice(2),u=0,l=o.length,c;u<l;u++){c=o.charCodeAt(u);if(c<48||c>a)return NaN}return parseInt(o,i)}}return+t};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function e(t){var n=arguments.length<1?0:t;var r=this;return r instanceof h&&(v?u(function(){m.valueOf.call(r)}):a(r)!=p)?o(new g(b(n)),r,h):b(n)};for(var M=n(14)?l(g):("MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,"+"EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,"+"MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger").split(","),x=0,w;M.length>x;x++){if(i(g,w=M[x])&&!i(h,w)){f(h,w,c(g,w))}}h.prototype=m;m.constructor=h;n(22)(r,p,h)}},function(e,t,n){"use strict";var r=n(0);var i=n(31);var a=n(163);var o=n(116);var s=1..toFixed;var u=Math.floor;var l=[0,0,0,0,0,0];var c="Number.toFixed: incorrect invocation!";var f="0";var d=function(e,t){var n=-1;var r=t;while(++n<6){r+=e*l[n];l[n]=r%1e7;r=u(r/1e7)}};var p=function(e){var t=6;var n=0;while(--t>=0){n+=l[t];l[t]=u(n/e);n=n%e*1e7}};var h=function(){var e=6;var t="";while(--e>=0){if(t!==""||e===0||l[e]!==0){var n=String(l[e]);t=t===""?n:t+o.call(f,7-n.length)+n}}return t};var g=function(e,t,n){return t===0?n:t%2===1?g(e,t-1,n*e):g(e*e,t/2,n)};var m=function(e){var t=0;var n=e;while(n>=4096){t+=12;n/=4096}while(n>=2){t+=1;n/=2}return t};r(r.P+r.F*(!!s&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||(0xde0b6b3a7640080).toFixed(0)!=="1000000000000000128")||!n(8)(function(){s.call({})})),"Number",{toFixed:function e(t){var n=a(this,c);var r=i(t);var s="";var u=f;var l,v,y,b;if(r<0||r>20)throw RangeError(c);if(n!=n)return"NaN";if(n<=-1e21||n>=1e21)return String(n);if(n<0){s="-";n=-n}if(n>1e-21){l=m(n*g(2,69,1))-69;v=l<0?n*g(2,-l,1):n/g(2,l,1);v*=4503599627370496;l=52-l;if(l>0){d(0,v);y=r;while(y>=7){d(1e7,0);y-=7}d(g(10,y,1),0);y=l-1;while(y>=23){p(1<<23);y-=23}p(1<<y);d(1,1);p(2);u=h()}else{d(0,v);d(1<<-l,0);u=h()+o.call(f,r)}}if(r>0){b=u.length;u=s+(b<=r?"0."+o.call(f,r-b)+u:u.slice(0,b-r)+"."+u.slice(b-r))}else{u=s+u}return u}})},function(e,t,n){"use strict";var r=n(0);var i=n(8);var a=n(163);var o=1..toPrecision;r(r.P+r.F*(i(function(){return o.call(1,undefined)!=="1"})||!i(function(){o.call({})})),"Number",{toPrecision:function e(t){var n=a(this,"Number#toPrecision: incorrect invocation!");return t===undefined?o.call(n):o.call(n,t)}})},function(e,t,n){var r=n(0);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,n){var r=n(0);var i=n(6).isFinite;r(r.S,"Number",{isFinite:function e(t){return typeof t=="number"&&i(t)}})},function(e,t,n){var r=n(0);r(r.S,"Number",{isInteger:n(164)})},function(e,t,n){var r=n(0);r(r.S,"Number",{isNaN:function e(t){return t!=t}})},function(e,t,n){var r=n(0);var i=n(164);var a=Math.abs;r(r.S,"Number",{isSafeInteger:function e(t){return i(t)&&a(t)<=9007199254740991}})},function(e,t,n){var r=n(0);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,n){var r=n(0);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,n){var r=n(0);var i=n(162);r(r.S+r.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(e,t,n){var r=n(0);var i=n(161);r(r.S+r.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(e,t,n){var r=n(0);var i=n(165);var a=Math.sqrt;var o=Math.acosh;r(r.S+r.F*!(o&&Math.floor(o(Number.MAX_VALUE))==710&&o(Infinity)==Infinity),"Math",{acosh:function e(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:i(t-1+a(t-1)*a(t+1))}})},function(e,t,n){var r=n(0);var i=Math.asinh;function a(e){return!isFinite(e=+e)||e==0?e:e<0?-a(-e):Math.log(e+Math.sqrt(e*e+1))}r(r.S+r.F*!(i&&1/i(0)>0),"Math",{asinh:a})},function(e,t,n){var r=n(0);var i=Math.atanh;r(r.S+r.F*!(i&&1/i(-0)<0),"Math",{atanh:function e(t){return(t=+t)==0?t:Math.log((1+t)/(1-t))/2}})},function(e,t,n){var r=n(0);var i=n(117);r(r.S,"Math",{cbrt:function e(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(e,t,n){var r=n(0);r(r.S,"Math",{clz32:function e(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(e,t,n){var r=n(0);var i=Math.exp;r(r.S,"Math",{cosh:function e(t){return(i(t=+t)+i(-t))/2}})},function(e,t,n){var r=n(0);var i=n(118);r(r.S+r.F*(i!=Math.expm1),"Math",{expm1:i})},function(e,t,n){var r=n(0);r(r.S,"Math",{fround:n(166)})},function(e,t,n){var r=n(0);var i=Math.abs;r(r.S,"Math",{hypot:function e(t,n){var r=0;var a=0;var o=arguments.length;var s=0;var u,l;while(a<o){u=i(arguments[a++]);if(s<u){l=s/u;r=r*l*l+1;s=u}else if(u>0){l=u/s;r+=l*l}else r+=u}return s===Infinity?Infinity:s*Math.sqrt(r)}})},function(e,t,n){var r=n(0);var i=Math.imul;r(r.S+r.F*n(8)(function(){return i(4294967295,5)!=-5||i.length!=2}),"Math",{imul:function e(t,n){var r=65535;var i=+t;var a=+n;var o=r&i;var s=r&a;return 0|o*s+((r&i>>>16)*s+o*(r&a>>>16)<<16>>>0)}})},function(e,t,n){var r=n(0);r(r.S,"Math",{log10:function e(t){return Math.log(t)*Math.LOG10E}})},function(e,t,n){var r=n(0);r(r.S,"Math",{log1p:n(165)})},function(e,t,n){var r=n(0);r(r.S,"Math",{log2:function e(t){return Math.log(t)/Math.LN2}})},function(e,t,n){var r=n(0);r(r.S,"Math",{sign:n(117)})},function(e,t,n){var r=n(0);var i=n(118);var a=Math.exp;r(r.S+r.F*n(8)(function(){return!Math.sinh(-2e-17)!=-2e-17}),"Math",{sinh:function e(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(a(t-1)-a(-t-1))*(Math.E/2)}})},function(e,t,n){var r=n(0);var i=n(118);var a=Math.exp;r(r.S,"Math",{tanh:function e(t){var n=i(t=+t);var r=i(-t);return n==Infinity?1:r==Infinity?-1:(n-r)/(a(t)+a(-t))}})},function(e,t,n){var r=n(0);r(r.S,"Math",{trunc:function e(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(e,t,n){var r=n(0);var i=n(48);var a=String.fromCharCode;var o=String.fromCodePoint;r(r.S+r.F*(!!o&&o.length!=1),"String",{fromCodePoint:function e(t){var n=[];var r=arguments.length;var o=0;var s;while(r>o){s=+arguments[o++];if(i(s,1114111)!==s)throw RangeError(s+" is not a valid code point");n.push(s<65536?a(s):a(((s-=65536)>>10)+55296,s%1024+56320))}return n.join("")}})},function(e,t,n){var r=n(0);var i=n(25);var a=n(13);r(r.S,"String",{raw:function e(t){var n=i(t.raw);var r=a(n.length);var o=arguments.length;var s=[];var u=0;while(r>u){s.push(String(n[u++]));if(u<o)s.push(String(arguments[u]))}return s.join("")}})},function(e,t,n){"use strict";n(62)("trim",function(e){return function t(){return e(this,3)}})},function(e,t,n){"use strict";var r=n(85)(true);n(119)(String,"String",function(e){this._t=String(e);this._i=0},function(){var e=this._t;var t=this._i;var n;if(t>=e.length)return{value:undefined,done:true};n=r(e,t);this._i+=n.length;return{value:n,done:false}})},function(e,t,n){"use strict";var r=n(0);var i=n(85)(false);r(r.P,"String",{codePointAt:function e(t){return i(this,t)}})},function(e,t,n){"use strict";var r=n(0);var i=n(13);var a=n(121);var o="endsWith";var s=""[o];r(r.P+r.F*n(122)(o),"String",{endsWith:function e(t){var n=a(this,t,o);var r=arguments.length>1?arguments[1]:undefined;var u=i(n.length);var l=r===undefined?u:Math.min(i(r),u);var c=String(t);return s?s.call(n,c,l):n.slice(l-c.length,l)===c}})},function(e,t,n){"use strict";var r=n(0);var i=n(121);var a="includes";r(r.P+r.F*n(122)(a),"String",{includes:function e(t){return!!~i(this,t,a).indexOf(t,arguments.length>1?arguments[1]:undefined)}})},function(e,t,n){var r=n(0);r(r.P,"String",{repeat:n(116)})},function(e,t,n){"use strict";var r=n(0);var i=n(13);var a=n(121);var o="startsWith";var s=""[o];r(r.P+r.F*n(122)(o),"String",{startsWith:function e(t){var n=a(this,t,o);var r=i(Math.min(arguments.length>1?arguments[1]:undefined,n.length));var u=String(t);return s?s.call(n,u,r):n.slice(r,r+u.length)===u}})},function(e,t,n){"use strict";n(23)("anchor",function(e){return function t(n){return e(this,"a","name",n)}})},function(e,t,n){"use strict";n(23)("big",function(e){return function t(){return e(this,"big","","")}})},function(e,t,n){"use strict";n(23)("blink",function(e){return function t(){return e(this,"blink","","")}})},function(e,t,n){"use strict";n(23)("bold",function(e){return function t(){return e(this,"b","","")}})},function(e,t,n){"use strict";n(23)("fixed",function(e){return function t(){return e(this,"tt","","")}})},function(e,t,n){"use strict";n(23)("fontcolor",function(e){return function t(n){return e(this,"font","color",n)}})},function(e,t,n){"use strict";n(23)("fontsize",function(e){return function t(n){return e(this,"font","size",n)}})},function(e,t,n){"use strict";n(23)("italics",function(e){return function t(){return e(this,"i","","")}})},function(e,t,n){"use strict";n(23)("link",function(e){return function t(n){return e(this,"a","href",n)}})},function(e,t,n){"use strict";n(23)("small",function(e){return function t(){return e(this,"small","","")}})},function(e,t,n){"use strict";n(23)("strike",function(e){return function t(){return e(this,"strike","","")}})},function(e,t,n){"use strict";n(23)("sub",function(e){return function t(){return e(this,"sub","","")}})},function(e,t,n){"use strict";n(23)("sup",function(e){return function t(){return e(this,"sup","","")}})},function(e,t,n){var r=n(0);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,n){"use strict";var r=n(0);var i=n(16);var a=n(34);r(r.P+r.F*n(8)(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1}),"Date",{toJSON:function e(t){var n=i(this);var r=a(n);return typeof r=="number"&&!isFinite(r)?null:n.toISOString()}})},function(e,t,n){var r=n(0);var i=n(351);r(r.P+r.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},function(e,t,n){"use strict";var r=n(8);var i=Date.prototype.getTime;var a=Date.prototype.toISOString;var o=function(e){return e>9?e:"0"+e};e.exports=r(function(){return a.call(new Date(-5e13-1))!="0385-07-25T07:06:39.999Z"})||!r(function(){a.call(new Date(NaN))})?function e(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var t=this;var n=t.getUTCFullYear();var r=t.getUTCMilliseconds();var a=n<0?"-":n>9999?"+":"";return a+("00000"+Math.abs(n)).slice(a?-6:-4)+"-"+o(t.getUTCMonth()+1)+"-"+o(t.getUTCDate())+"T"+o(t.getUTCHours())+":"+o(t.getUTCMinutes())+":"+o(t.getUTCSeconds())+"."+(r>99?r:"0"+o(r))+"Z"}:a},function(e,t,n){var r=Date.prototype;var i="Invalid Date";var a="toString";var o=r[a];var s=r.getTime;if(new Date(NaN)+""!=i){n(22)(r,a,function e(){var t=s.call(this);return t===t?o.call(this):i})}},function(e,t,n){var r=n(10)("toPrimitive");var i=Date.prototype;if(!(r in i))n(21)(i,r,n(354))},function(e,t,n){"use strict";var r=n(4);var i=n(34);var a="number";e.exports=function(e){if(e!=="string"&&e!==a&&e!=="default")throw TypeError("Incorrect hint");return i(r(this),e!=a)}},function(e,t,n){var r=n(0);r(r.S,"Array",{isArray:n(84)})},function(e,t,n){"use strict";var r=n(29);var i=n(0);var a=n(16);var o=n(167);var s=n(123);var u=n(13);var l=n(124);var c=n(125);i(i.S+i.F*!n(87)(function(e){Array.from(e)}),"Array",{from:function e(t){var n=a(t);var i=typeof this=="function"?this:Array;var f=arguments.length;var d=f>1?arguments[1]:undefined;var p=d!==undefined;var h=0;var g=c(n);var m,v,y,b;if(p)d=r(d,f>2?arguments[2]:undefined,2);if(g!=undefined&&!(i==Array&&s(g))){for(b=g.call(n),v=new i;!(y=b.next()).done;h++){l(v,h,p?o(b,d,[y.value,h],true):y.value)}}else{m=u(n.length);for(v=new i(m);m>h;h++){l(v,h,p?d(n[h],h):n[h])}}v.length=h;return v}})},function(e,t,n){"use strict";var r=n(0);var i=n(124);r(r.S+r.F*n(8)(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function e(){var t=0;var n=arguments.length;var r=new(typeof this=="function"?this:Array)(n);while(n>t)i(r,t,arguments[t++]);r.length=n;return r}})},function(e,t,n){"use strict";var r=n(0);var i=n(25);var a=[].join;r(r.P+r.F*(n(69)!=Object||!n(32)(a)),"Array",{join:function e(t){return a.call(i(this),t===undefined?",":t)}})},function(e,t,n){"use strict";var r=n(0);var i=n(112);var a=n(30);var o=n(48);var s=n(13);var u=[].slice;r(r.P+r.F*n(8)(function(){if(i)u.call(i)}),"Array",{slice:function e(t,n){var r=s(this.length);var i=a(this);n=n===undefined?r:n;if(i=="Array")return u.call(this,t,n);var l=o(t,r);var c=o(n,r);var f=s(c-l);var d=new Array(f);var p=0;for(;p<f;p++)d[p]=i=="String"?this.charAt(l+p):this[l+p];return d}})},function(e,t,n){"use strict";var r=n(0);var i=n(18);var a=n(16);var o=n(8);var s=[].sort;var u=[1,2,3];r(r.P+r.F*(o(function(){u.sort(undefined)})||!o(function(){u.sort(null)})||!n(32)(s)),"Array",{sort:function e(t){return t===undefined?s.call(a(this)):s.call(a(this),i(t))}})},function(e,t,n){"use strict";var r=n(0);var i=n(37)(0);var a=n(32)([].forEach,true);r(r.P+r.F*!a,"Array",{forEach:function e(t){return i(this,t,arguments[1])}})},function(e,t,n){var r=n(9);var i=n(84);var a=n(10)("species");e.exports=function(e){var t;if(i(e)){t=e.constructor;if(typeof t=="function"&&(t===Array||i(t.prototype)))t=undefined;if(r(t)){t=t[a];if(t===null)t=undefined}}return t===undefined?Array:t}},function(e,t,n){"use strict";var r=n(0);var i=n(37)(1);r(r.P+r.F*!n(32)([].map,true),"Array",{map:function e(t){return i(this,t,arguments[1])}})},function(e,t,n){"use strict";var r=n(0);var i=n(37)(2);r(r.P+r.F*!n(32)([].filter,true),"Array",{filter:function e(t){return i(this,t,arguments[1])}})},function(e,t,n){"use strict";var r=n(0);var i=n(37)(3);r(r.P+r.F*!n(32)([].some,true),"Array",{some:function e(t){return i(this,t,arguments[1])}})},function(e,t,n){"use strict";var r=n(0);var i=n(37)(4);r(r.P+r.F*!n(32)([].every,true),"Array",{every:function e(t){return i(this,t,arguments[1])}})},function(e,t,n){"use strict";var r=n(0);var i=n(168);r(r.P+r.F*!n(32)([].reduce,true),"Array",{reduce:function e(t){return i(this,t,arguments.length,arguments[1],false)}})},function(e,t,n){"use strict";var r=n(0);var i=n(168);r(r.P+r.F*!n(32)([].reduceRight,true),"Array",{reduceRight:function e(t){return i(this,t,arguments.length,arguments[1],true)}})},function(e,t,n){"use strict";var r=n(0);var i=n(82)(false);var a=[].indexOf;var o=!!a&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(o||!n(32)(a)),"Array",{indexOf:function e(t){return o?a.apply(this,arguments)||0:i(this,t,arguments[1])}})},function(e,t,n){"use strict";var r=n(0);var i=n(25);var a=n(31);var o=n(13);var s=[].lastIndexOf;var u=!!s&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(u||!n(32)(s)),"Array",{lastIndexOf:function e(t){if(u)return s.apply(this,arguments)||0;var n=i(this);var r=o(n.length);var l=r-1;if(arguments.length>1)l=Math.min(l,a(arguments[1]));if(l<0)l=r+l;for(;l>=0;l--)if(l in n)if(n[l]===t)return l||0;return-1}})},function(e,t,n){var r=n(0);r(r.P,"Array",{copyWithin:n(169)});n(44)("copyWithin")},function(e,t,n){var r=n(0);r(r.P,"Array",{fill:n(127)});n(44)("fill")},function(e,t,n){"use strict";var r=n(0);var i=n(37)(5);var a="find";var o=true;if(a in[])Array(1)[a](function(){o=false});r(r.P+r.F*o,"Array",{find:function e(t){return i(this,t,arguments.length>1?arguments[1]:undefined)}});n(44)(a)},function(e,t,n){"use strict";var r=n(0);var i=n(37)(6);var a="findIndex";var o=true;if(a in[])Array(1)[a](function(){o=false});r(r.P+r.F*o,"Array",{findIndex:function e(t){return i(this,t,arguments.length>1?arguments[1]:undefined)}});n(44)(a)},function(e,t,n){n(51)("Array")},function(e,t,n){var r=n(6);var i=n(115);var a=n(15).f;var o=n(50).f;var s=n(86);var u=n(71);var l=r.RegExp;var c=l;var f=l.prototype;var d=/a/g;var p=/a/g;var h=new l(d)!==d;if(n(14)&&(!h||n(8)(function(){p[n(10)("match")]=false;return l(d)!=d||l(p)==p||l(d,"i")!="/a/i"}))){l=function e(t,n){var r=this instanceof l;var a=s(t);var o=n===undefined;return!r&&a&&t.constructor===l&&o?t:i(h?new c(a&&!o?t.source:t,n):c((a=t instanceof l)?t.source:t,a&&o?u.call(t):n),r?this:f,l)};var g=function(e){e in l||a(l,e,{configurable:true,get:function(){return c[e]},set:function(t){c[e]=t}})};for(var m=o(c),v=0;m.length>v;)g(m[v++]);f.constructor=l;l.prototype=f;n(22)(r,"RegExp",l)}n(51)("RegExp")},function(e,t,n){"use strict";n(172);var r=n(4);var i=n(71);var a=n(14);var o="toString";var s=/./[o];var u=function(e){n(22)(RegExp.prototype,o,e,true)};if(n(8)(function(){return s.call({source:"a",flags:"b"})!="/a/b"})){u(function e(){var t=r(this);return"/".concat(t.source,"/","flags"in t?t.flags:!a&&t instanceof RegExp?i.call(t):undefined)})}else if(s.name!=o){u(function e(){return s.call(this)})}},function(e,t,n){"use strict";var r=n(4);var i=n(13);var a=n(130);var o=n(88);n(89)("match",1,function(e,t,n,s){return[function n(r){var i=e(this);var a=r==undefined?undefined:r[t];return a!==undefined?a.call(r,i):new RegExp(r)[t](String(i))},function(e){var t=s(n,e,this);if(t.done)return t.value;var u=r(e);var l=String(this);if(!u.global)return o(u,l);var c=u.unicode;u.lastIndex=0;var f=[];var d=0;var p;while((p=o(u,l))!==null){var h=String(p[0]);f[d]=h;if(h==="")u.lastIndex=a(l,i(u.lastIndex),c);d++}return d===0?null:f}]})},function(e,t,n){"use strict";var r=n(4);var i=n(16);var a=n(13);var o=n(31);var s=n(130);var u=n(88);var l=Math.max;var c=Math.min;var f=Math.floor;var d=/\$([$&`']|\d\d?|<[^>]*>)/g;var p=/\$([$&`']|\d\d?)/g;var h=function(e){return e===undefined?e:String(e)};n(89)("replace",2,function(e,t,n,g){return[function r(i,a){var o=e(this);var s=i==undefined?undefined:i[t];return s!==undefined?s.call(i,o,a):n.call(String(o),i,a)},function(e,t){var i=g(n,e,this,t);if(i.done)return i.value;var f=r(e);var d=String(this);var p=typeof t==="function";if(!p)t=String(t);var v=f.global;if(v){var y=f.unicode;f.lastIndex=0}var b=[];while(true){var M=u(f,d);if(M===null)break;b.push(M);if(!v)break;var x=String(M[0]);if(x==="")f.lastIndex=s(d,a(f.lastIndex),y)}var w="";var A=0;for(var T=0;T<b.length;T++){M=b[T];var C=String(M[0]);var S=l(c(o(M.index),d.length),0);var D=[];for(var I=1;I<M.length;I++)D.push(h(M[I]));var E=M.groups;if(p){var N=[C].concat(D,S,d);if(E!==undefined)N.push(E);var O=String(t.apply(undefined,N))}else{O=m(C,d,S,D,E,t)}if(S>=A){w+=d.slice(A,S)+O;A=S+C.length}}return w+d.slice(A)}];function m(e,t,r,a,o,s){var u=r+e.length;var l=a.length;var c=p;if(o!==undefined){o=i(o);c=d}return n.call(s,c,function(n,i){var s;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,r);case"'":return t.slice(u);case"<":s=o[i.slice(1,-1)];break;default:var c=+i;if(c===0)return n;if(c>l){var d=f(c/10);if(d===0)return n;if(d<=l)return a[d-1]===undefined?i.charAt(1):a[d-1]+i.charAt(1);return n}s=a[c-1]}return s===undefined?"":s})}})},function(e,t,n){"use strict";var r=n(4);var i=n(158);var a=n(88);n(89)("search",1,function(e,t,n,o){return[function n(r){var i=e(this);var a=r==undefined?undefined:r[t];return a!==undefined?a.call(r,i):new RegExp(r)[t](String(i))},function(e){var t=o(n,e,this);if(t.done)return t.value;var s=r(e);var u=String(this);var l=s.lastIndex;if(!i(l,0))s.lastIndex=0;var c=a(s,u);if(!i(s.lastIndex,l))s.lastIndex=l;return c===null?-1:c.index}]})},function(e,t,n){"use strict";var r=n(86);var i=n(4);var a=n(72);var o=n(130);var s=n(13);var u=n(88);var l=n(129);var c=n(8);var f=Math.min;var d=[].push;var p="split";var h="length";var g="lastIndex";var m=4294967295;var v=!c(function(){RegExp(m,"y")});n(89)("split",2,function(e,t,n,c){var y;if("abbc"[p](/(b)*/)[1]=="c"||"test"[p](/(?:)/,-1)[h]!=4||"ab"[p](/(?:ab)*/)[h]!=2||"."[p](/(.?)(.?)/)[h]!=4||"."[p](/()()/)[h]>1||""[p](/.?/)[h]){y=function(e,t){var i=String(this);if(e===undefined&&t===0)return[];if(!r(e))return n.call(i,e,t);var a=[];var o=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":"");var s=0;var u=t===undefined?m:t>>>0;var c=new RegExp(e.source,o+"g");var f,p,v;while(f=l.call(c,i)){p=c[g];if(p>s){a.push(i.slice(s,f.index));if(f[h]>1&&f.index<i[h])d.apply(a,f.slice(1));v=f[0][h];s=p;if(a[h]>=u)break}if(c[g]===f.index)c[g]++}if(s===i[h]){if(v||!c.test(""))a.push("")}else a.push(i.slice(s));return a[h]>u?a.slice(0,u):a}}else if("0"[p](undefined,0)[h]){y=function(e,t){return e===undefined&&t===0?[]:n.call(this,e,t)}}else{y=n}return[function n(r,i){var a=e(this);var o=r==undefined?undefined:r[t];return o!==undefined?o.call(r,a,i):y.call(String(a),r,i)},function(e,t){var r=c(y,e,this,t,y!==n);if(r.done)return r.value;var l=i(e);var d=String(this);var p=a(l,RegExp);var h=l.unicode;var g=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(v?"y":"g");var b=new p(v?l:"^(?:"+l.source+")",g);var M=t===undefined?m:t>>>0;if(M===0)return[];if(d.length===0)return u(b,d)===null?[d]:[];var x=0;var w=0;var A=[];while(w<d.length){b.lastIndex=v?w:0;var T=u(b,v?d:d.slice(w));var C;if(T===null||(C=f(s(b.lastIndex+(v?0:w)),d.length))===x){w=o(d,w,h)}else{A.push(d.slice(x,w));if(A.length===M)return A;for(var S=1;S<=T.length-1;S++){A.push(T[S]);if(A.length===M)return A}w=x=C}}A.push(d.slice(x));return A}]})},function(e,t,n){"use strict";var r=n(42);var i=n(6);var a=n(29);var o=n(61);var s=n(0);var u=n(9);var l=n(18);var c=n(52);var f=n(53);var d=n(72);var p=n(131).set;var h=n(132)();var g=n(133);var m=n(173);var v=n(90);var y=n(174);var b="Promise";var M=i.TypeError;var x=i.process;var w=x&&x.versions;var A=w&&w.v8||"";var T=i[b];var C=o(x)=="process";var S=function(){};var D,I,E,N;var O=I=g.f;var _=!!function(){try{var e=T.resolve(1);var t=(e.constructor={})[n(10)("species")]=function(e){e(S,S)};return(C||typeof PromiseRejectionEvent=="function")&&e.then(S)instanceof t&&A.indexOf("6.6")!==0&&v.indexOf("Chrome/66")===-1}catch(e){}}();var L=function(e){var t;return u(e)&&typeof(t=e.then)=="function"?t:false};var P=function(e,t){if(e._n)return;e._n=true;var n=e._c;h(function(){var r=e._v;var i=e._s==1;var a=0;var o=function(t){var n=i?t.ok:t.fail;var a=t.resolve;var o=t.reject;var s=t.domain;var u,l,c;try{if(n){if(!i){if(e._h==2)j(e);e._h=1}if(n===true)u=r;else{if(s)s.enter();u=n(r);if(s){s.exit();c=true}}if(u===t.promise){o(M("Promise-chain cycle"))}else if(l=L(u)){l.call(u,a,o)}else a(u)}else o(r)}catch(e){if(s&&!c)s.exit();o(e)}};while(n.length>a)o(n[a++]);e._c=[];e._n=false;if(t&&!e._h)k(e)})};var k=function(e){p.call(i,function(){var t=e._v;var n=R(e);var r,a,o;if(n){r=m(function(){if(C){x.emit("unhandledRejection",t,e)}else if(a=i.onunhandledrejection){a({promise:e,reason:t})}else if((o=i.console)&&o.error){o.error("Unhandled promise rejection",t)}});e._h=C||R(e)?2:1}e._a=undefined;if(n&&r.e)throw r.v})};var R=function(e){return e._h!==1&&(e._a||e._c).length===0};var j=function(e){p.call(i,function(){var t;if(C){x.emit("rejectionHandled",e)}else if(t=i.onrejectionhandled){t({promise:e,reason:e._v})}})};var B=function(e){var t=this;if(t._d)return;t._d=true;t=t._w||t;t._v=e;t._s=2;if(!t._a)t._a=t._c.slice();P(t,true)};var z=function(e){var t=this;var n;if(t._d)return;t._d=true;t=t._w||t;try{if(t===e)throw M("Promise can't be resolved itself");if(n=L(e)){h(function(){var r={_w:t,_d:false};try{n.call(e,a(z,r,1),a(B,r,1))}catch(e){B.call(r,e)}})}else{t._v=e;t._s=1;P(t,false)}}catch(e){B.call({_w:t,_d:false},e)}};if(!_){T=function e(t){c(this,T,b,"_h");l(t);D.call(this);try{t(a(z,this,1),a(B,this,1))}catch(e){B.call(this,e)}};D=function e(t){this._c=[];this._a=undefined;this._s=0;this._d=false;this._v=undefined;this._h=0;this._n=false};D.prototype=n(54)(T.prototype,{then:function e(t,n){var r=O(d(this,T));r.ok=typeof t=="function"?t:true;r.fail=typeof n=="function"&&n;r.domain=C?x.domain:undefined;this._c.push(r);if(this._a)this._a.push(r);if(this._s)P(this,false);return r.promise},catch:function(e){return this.then(undefined,e)}});E=function(){var e=new D;this.promise=e;this.resolve=a(z,e,1);this.reject=a(B,e,1)};g.f=O=function(e){return e===T||e===N?new E(e):I(e)}}s(s.G+s.W+s.F*!_,{Promise:T});n(60)(T,b);n(51)(b);N=n(28)[b];s(s.S+s.F*!_,b,{reject:function e(t){var n=O(this);var r=n.reject;r(t);return n.promise}});s(s.S+s.F*(r||!_),b,{resolve:function e(t){return y(r&&this===N?T:this,t)}});s(s.S+s.F*!(_&&n(87)(function(e){T.all(e)["catch"](S)})),b,{all:function e(t){var n=this;var r=O(n);var i=r.resolve;var a=r.reject;var o=m(function(){var e=[];var r=0;var o=1;f(t,false,function(t){var s=r++;var u=false;e.push(undefined);o++;n.resolve(t).then(function(t){if(u)return;u=true;e[s]=t;--o||i(e)},a)});--o||i(e)});if(o.e)a(o.v);return r.promise},race:function e(t){var n=this;var r=O(n);var i=r.reject;var a=m(function(){f(t,false,function(e){n.resolve(e).then(r.resolve,i)})});if(a.e)i(a.v);return r.promise}})},function(e,t,n){"use strict";var r=n(179);var i=n(55);var a="WeakSet";n(91)(a,function(e){return function t(){return e(this,arguments.length>0?arguments[0]:undefined)}},{add:function e(t){return r.def(i(this,a),t,true)}},r,false,true)},function(e,t,n){"use strict";var r=n(0);var i=n(92);var a=n(134);var o=n(4);var s=n(48);var u=n(13);var l=n(9);var c=n(6).ArrayBuffer;var f=n(72);var d=a.ArrayBuffer;var p=a.DataView;var h=i.ABV&&c.isView;var g=d.prototype.slice;var m=i.VIEW;var v="ArrayBuffer";r(r.G+r.W+r.F*(c!==d),{ArrayBuffer:d});r(r.S+r.F*!i.CONSTR,v,{isView:function e(t){return h&&h(t)||l(t)&&m in t}});r(r.P+r.U+r.F*n(8)(function(){return!new d(2).slice(1,undefined).byteLength}),v,{slice:function e(t,n){if(g!==undefined&&n===undefined)return g.call(o(this),t);var r=o(this).byteLength;var i=s(t,r);var a=s(n===undefined?r:n,r);var l=new(f(this,d))(u(a-i));var c=new p(this);var h=new p(l);var m=0;while(i<a){h.setUint8(m++,c.getUint8(i++))}return l}});n(51)(v)},function(e,t,n){var r=n(0);r(r.G+r.W+r.F*!n(92).ABV,{DataView:n(134).DataView})},function(e,t,n){n(39)("Int8",1,function(e){return function t(n,r,i){return e(this,n,r,i)}})},function(e,t,n){n(39)("Uint8",1,function(e){return function t(n,r,i){return e(this,n,r,i)}})},function(e,t,n){n(39)("Uint8",1,function(e){return function t(n,r,i){return e(this,n,r,i)}},true)},function(e,t,n){n(39)("Int16",2,function(e){return function t(n,r,i){return e(this,n,r,i)}})},function(e,t,n){n(39)("Uint16",2,function(e){return function t(n,r,i){return e(this,n,r,i)}})},function(e,t,n){n(39)("Int32",4,function(e){return function t(n,r,i){return e(this,n,r,i)}})},function(e,t,n){n(39)("Uint32",4,function(e){return function t(n,r,i){return e(this,n,r,i)}})},function(e,t,n){n(39)("Float32",4,function(e){return function t(n,r,i){return e(this,n,r,i)}})},function(e,t,n){n(39)("Float64",8,function(e){return function t(n,r,i){return e(this,n,r,i)}})},function(e,t,n){var r=n(0);var i=n(18);var a=n(4);var o=(n(6).Reflect||{}).apply;var s=Function.apply;r(r.S+r.F*!n(8)(function(){o(function(){})}),"Reflect",{apply:function e(t,n,r){var u=i(t);var l=a(r);return o?o(u,n,l):s.call(u,n,l)}})},function(e,t,n){var r=n(0);var i=n(49);var a=n(18);var o=n(4);var s=n(9);var u=n(8);var l=n(159);var c=(n(6).Reflect||{}).construct;var f=u(function(){function e(){}return!(c(function(){},[],e)instanceof e)});var d=!u(function(){c(function(){})});r(r.S+r.F*(f||d),"Reflect",{construct:function e(t,n){a(t);o(n);var r=arguments.length<3?t:a(arguments[2]);if(d&&!f)return c(t,n,r);if(t==r){switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3])}var u=[null];u.push.apply(u,n);return new(l.apply(t,u))}var p=r.prototype;var h=i(s(p)?p:Object.prototype);var g=Function.apply.call(t,h,n);return s(g)?g:h}})},function(e,t,n){var r=n(15);var i=n(0);var a=n(4);var o=n(34);i(i.S+i.F*n(8)(function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function e(t,n,i){a(t);n=o(n,true);a(i);try{r.f(t,n,i);return true}catch(e){return false}}})},function(e,t,n){var r=n(0);var i=n(26).f;var a=n(4);r(r.S,"Reflect",{deleteProperty:function e(t,n){var r=i(a(t),n);return r&&!r.configurable?false:delete t[n]}})},function(e,t,n){"use strict";var r=n(0);var i=n(4);var a=function(e){this._t=i(e);this._i=0;var t=this._k=[];var n;for(n in e)t.push(n)};n(120)(a,"Object",function(){var e=this;var t=e._k;var n;do{if(e._i>=t.length)return{value:undefined,done:true}}while(!((n=t[e._i++])in e._t));return{value:n,done:false}});r(r.S,"Reflect",{enumerate:function e(t){return new a(t)}})},function(e,t,n){var r=n(26);var i=n(27);var a=n(24);var o=n(0);var s=n(9);var u=n(4);function l(e,t){var n=arguments.length<3?e:arguments[2];var o,c;if(u(e)===n)return e[t];if(o=r.f(e,t))return a(o,"value")?o.value:o.get!==undefined?o.get.call(n):undefined;if(s(c=i(e)))return l(c,t,n)}o(o.S,"Reflect",{get:l})},function(e,t,n){var r=n(26);var i=n(0);var a=n(4);i(i.S,"Reflect",{getOwnPropertyDescriptor:function e(t,n){return r.f(a(t),n)}})},function(e,t,n){var r=n(0);var i=n(27);var a=n(4);r(r.S,"Reflect",{getPrototypeOf:function e(t){return i(a(t))}})},function(e,t,n){var r=n(0);r(r.S,"Reflect",{has:function e(t,n){return n in t}})},function(e,t,n){var r=n(0);var i=n(4);var a=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function e(t){i(t);return a?a(t):true}})},function(e,t,n){var r=n(0);r(r.S,"Reflect",{ownKeys:n(181)})},function(e,t,n){var r=n(0);var i=n(4);var a=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function e(t){i(t);try{if(a)a(t);return true}catch(e){return false}}})},function(e,t,n){var r=n(15);var i=n(26);var a=n(27);var o=n(24);var s=n(0);var u=n(45);var l=n(4);var c=n(9);function f(e,t,n){var s=arguments.length<4?e:arguments[3];var d=i.f(l(e),t);var p,h;if(!d){if(c(h=a(e))){return f(h,t,n,s)}d=u(0)}if(o(d,"value")){if(d.writable===false||!c(s))return false;if(p=i.f(s,t)){if(p.get||p.set||p.writable===false)return false;p.value=n;r.f(s,t,p)}else r.f(s,t,u(0,n));return true}return d.set===undefined?false:(d.set.call(s,n),true)}s(s.S,"Reflect",{set:f})},function(e,t,n){var r=n(0);var i=n(113);if(i)r(r.S,"Reflect",{setPrototypeOf:function e(t,n){i.check(t,n);try{i.set(t,n);return true}catch(e){return false}}})},function(e,t,n){"use strict";var r=n(0);var i=n(82)(true);r(r.P,"Array",{includes:function e(t){return i(this,t,arguments.length>1?arguments[1]:undefined)}});n(44)("includes")},function(e,t,n){"use strict";var r=n(0);var i=n(182);var a=n(16);var o=n(13);var s=n(18);var u=n(126);r(r.P,"Array",{flatMap:function e(t){var n=a(this);var r,l;s(t);r=o(n.length);l=u(n,0);i(l,n,n,r,0,1,t,arguments[1]);return l}});n(44)("flatMap")},function(e,t,n){"use strict";var r=n(0);var i=n(182);var a=n(16);var o=n(13);var s=n(31);var u=n(126);r(r.P,"Array",{flatten:function e(){var t=arguments[0];var n=a(this);var r=o(n.length);var l=u(n,0);i(l,n,n,r,0,t===undefined?1:s(t));return l}});n(44)("flatten")},function(e,t,n){"use strict";var r=n(0);var i=n(85)(true);r(r.P,"String",{at:function e(t){return i(this,t)}})},function(e,t,n){"use strict";var r=n(0);var i=n(183);var a=n(90);var o=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(a);r(r.P+r.F*o,"String",{padStart:function e(t){return i(this,t,arguments.length>1?arguments[1]:undefined,true)}})},function(e,t,n){"use strict";var r=n(0);var i=n(183);var a=n(90);var o=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(a);r(r.P+r.F*o,"String",{padEnd:function e(t){return i(this,t,arguments.length>1?arguments[1]:undefined,false)}})},function(e,t,n){"use strict";n(62)("trimLeft",function(e){return function t(){return e(this,1)}},"trimStart")},function(e,t,n){"use strict";n(62)("trimRight",function(e){return function t(){return e(this,2)}},"trimEnd")},function(e,t,n){"use strict";var r=n(0);var i=n(35);var a=n(13);var o=n(86);var s=n(71);var u=RegExp.prototype;var l=function(e,t){this._r=e;this._s=t};n(120)(l,"RegExp String",function e(){var t=this._r.exec(this._s);return{value:t,done:t===null}});r(r.P,"String",{matchAll:function e(t){i(this);if(!o(t))throw TypeError(t+" is not a regexp!");var n=String(this);var r="flags"in u?String(t.flags):s.call(t);var c=new RegExp(t.source,~r.indexOf("g")?r:"g"+r);c.lastIndex=a(t.lastIndex);return new l(c,n)}})},function(e,t,n){n(109)("asyncIterator")},function(e,t,n){n(109)("observable")},function(e,t,n){var r=n(0);var i=n(181);var a=n(25);var o=n(26);var s=n(124);r(r.S,"Object",{getOwnPropertyDescriptors:function e(t){var n=a(t);var r=o.f;var u=i(n);var l={};var c=0;var f,d;while(u.length>c){d=r(n,f=u[c++]);if(d!==undefined)s(l,f,d)}return l}})},function(e,t,n){var r=n(0);var i=n(184)(false);r(r.S,"Object",{values:function e(t){return i(t)}})},function(e,t,n){var r=n(0);var i=n(184)(true);r(r.S,"Object",{entries:function e(t){return i(t)}})},function(e,t,n){"use strict";var r=n(0);var i=n(16);var a=n(18);var o=n(15);n(14)&&r(r.P+n(93),"Object",{__defineGetter__:function e(t,n){o.f(i(this),t,{get:a(n),enumerable:true,configurable:true})}})},function(e,t,n){"use strict";var r=n(0);var i=n(16);var a=n(18);var o=n(15);n(14)&&r(r.P+n(93),"Object",{__defineSetter__:function e(t,n){o.f(i(this),t,{set:a(n),enumerable:true,configurable:true})}})},function(e,t,n){"use strict";var r=n(0);var i=n(16);var a=n(34);var o=n(27);var s=n(26).f;n(14)&&r(r.P+n(93),"Object",{__lookupGetter__:function e(t){var n=i(this);var r=a(t,true);var u;do{if(u=s(n,r))return u.get}while(n=o(n))}})},function(e,t,n){"use strict";var r=n(0);var i=n(16);var a=n(34);var o=n(27);var s=n(26).f;n(14)&&r(r.P+n(93),"Object",{__lookupSetter__:function e(t){var n=i(this);var r=a(t,true);var u;do{if(u=s(n,r))return u.set}while(n=o(n))}})},function(e,t,n){var r=n(0);r(r.P+r.R,"Map",{toJSON:n(185)("Map")})},function(e,t,n){var r=n(0);r(r.P+r.R,"Set",{toJSON:n(185)("Set")})},function(e,t,n){n(94)("Map")},function(e,t,n){n(94)("Set")},function(e,t,n){n(94)("WeakMap")},function(e,t,n){n(94)("WeakSet")},function(e,t,n){n(95)("Map")},function(e,t,n){n(95)("Set")},function(e,t,n){n(95)("WeakMap")},function(e,t,n){n(95)("WeakSet")},function(e,t,n){var r=n(0);r(r.G,{global:n(6)})},function(e,t,n){var r=n(0);r(r.S,"System",{global:n(6)})},function(e,t,n){var r=n(0);var i=n(30);r(r.S,"Error",{isError:function e(t){return i(t)==="Error"}})},function(e,t,n){var r=n(0);r(r.S,"Math",{clamp:function e(t,n,r){return Math.min(r,Math.max(n,t))}})},function(e,t,n){var r=n(0);r(r.S,"Math",{DEG_PER_RAD:Math.PI/180})},function(e,t,n){var r=n(0);var i=180/Math.PI;r(r.S,"Math",{degrees:function e(t){return t*i}})},function(e,t,n){var r=n(0);var i=n(187);var a=n(166);r(r.S,"Math",{fscale:function e(t,n,r,o,s){return a(i(t,n,r,o,s))}})},function(e,t,n){var r=n(0);r(r.S,"Math",{iaddh:function e(t,n,r,i){var a=t>>>0;var o=n>>>0;var s=r>>>0;return o+(i>>>0)+((a&s|(a|s)&~(a+s>>>0))>>>31)|0}})},function(e,t,n){var r=n(0);r(r.S,"Math",{isubh:function e(t,n,r,i){var a=t>>>0;var o=n>>>0;var s=r>>>0;return o-(i>>>0)-((~a&s|~(a^s)&a-s>>>0)>>>31)|0}})},function(e,t,n){var r=n(0);r(r.S,"Math",{imulh:function e(t,n){var r=65535;var i=+t;var a=+n;var o=i&r;var s=a&r;var u=i>>16;var l=a>>16;var c=(u*s>>>0)+(o*s>>>16);return u*l+(c>>16)+((o*l>>>0)+(c&r)>>16)}})},function(e,t,n){var r=n(0);r(r.S,"Math",{RAD_PER_DEG:180/Math.PI})},function(e,t,n){var r=n(0);var i=Math.PI/180;r(r.S,"Math",{radians:function e(t){return t*i}})},function(e,t,n){var r=n(0);r(r.S,"Math",{scale:n(187)})},function(e,t,n){var r=n(0);r(r.S,"Math",{umulh:function e(t,n){var r=65535;var i=+t;var a=+n;var o=i&r;var s=a&r;var u=i>>>16;var l=a>>>16;var c=(u*s>>>0)+(o*s>>>16);return u*l+(c>>>16)+((o*l>>>0)+(c&r)>>>16)}})},function(e,t,n){var r=n(0);r(r.S,"Math",{signbit:function e(t){return(t=+t)!=t?t:t==0?1/t==Infinity:t>0}})},function(e,t,n){"use strict";var r=n(0);var i=n(28);var a=n(6);var o=n(72);var s=n(174);r(r.P+r.R,"Promise",{finally:function(e){var t=o(this,i.Promise||a.Promise);var n=typeof e=="function";return this.then(n?function(n){return s(t,e()).then(function(){return n})}:e,n?function(n){return s(t,e()).then(function(){throw n})}:e)}})},function(e,t,n){"use strict";var r=n(0);var i=n(133);var a=n(173);r(r.S,"Promise",{try:function(e){var t=i.f(this);var n=a(e);(n.e?t.reject:t.resolve)(n.v);return t.promise}})},function(e,t,n){var r=n(40);var i=n(4);var a=r.key;var o=r.set;r.exp({defineMetadata:function e(t,n,r,s){o(t,n,i(r),a(s))}})},function(e,t,n){var r=n(40);var i=n(4);var a=r.key;var o=r.map;var s=r.store;r.exp({deleteMetadata:function e(t,n){var r=arguments.length<3?undefined:a(arguments[2]);var u=o(i(n),r,false);if(u===undefined||!u["delete"](t))return false;if(u.size)return true;var l=s.get(n);l["delete"](r);return!!l.size||s["delete"](n)}})},function(e,t,n){var r=n(40);var i=n(4);var a=n(27);var o=r.has;var s=r.get;var u=r.key;var l=function(e,t,n){var r=o(e,t,n);if(r)return s(e,t,n);var i=a(t);return i!==null?l(e,i,n):undefined};r.exp({getMetadata:function e(t,n){return l(t,i(n),arguments.length<3?undefined:u(arguments[2]))}})},function(e,t,n){var r=n(177);var i=n(186);var a=n(40);var o=n(4);var s=n(27);var u=a.keys;var l=a.key;var c=function(e,t){var n=u(e,t);var a=s(e);if(a===null)return n;var o=c(a,t);return o.length?n.length?i(new r(n.concat(o))):o:n};a.exp({getMetadataKeys:function e(t){return c(o(t),arguments.length<2?undefined:l(arguments[1]))}})},function(e,t,n){var r=n(40);var i=n(4);var a=r.get;var o=r.key;r.exp({getOwnMetadata:function e(t,n){return a(t,i(n),arguments.length<3?undefined:o(arguments[2]))}})},function(e,t,n){var r=n(40);var i=n(4);var a=r.keys;var o=r.key;r.exp({getOwnMetadataKeys:function e(t){return a(i(t),arguments.length<2?undefined:o(arguments[1]))}})},function(e,t,n){var r=n(40);var i=n(4);var a=n(27);var o=r.has;var s=r.key;var u=function(e,t,n){var r=o(e,t,n);if(r)return true;var i=a(t);return i!==null?u(e,i,n):false};r.exp({hasMetadata:function e(t,n){return u(t,i(n),arguments.length<3?undefined:s(arguments[2]))}})},function(e,t,n){var r=n(40);var i=n(4);var a=r.has;var o=r.key;r.exp({hasOwnMetadata:function e(t,n){return a(t,i(n),arguments.length<3?undefined:o(arguments[2]))}})},function(e,t,n){var r=n(40);var i=n(4);var a=n(18);var o=r.key;var s=r.set;r.exp({metadata:function e(t,n){return function e(r,u){s(t,n,(u!==undefined?i:a)(r),o(u))}}})},function(e,t,n){var r=n(0);var i=n(132)();var a=n(6).process;var o=n(30)(a)=="process";r(r.G,{asap:function e(t){var n=o&&a.domain;i(n?n.bind(t):t)}})},function(e,t,n){"use strict";var r=n(0);var i=n(6);var a=n(28);var o=n(132)();var s=n(10)("observable");var u=n(18);var l=n(4);var c=n(52);var f=n(54);var d=n(21);var p=n(53);var h=p.RETURN;var g=function(e){return e==null?undefined:u(e)};var m=function(e){var t=e._c;if(t){e._c=undefined;t()}};var v=function(e){return e._o===undefined};var y=function(e){if(!v(e)){e._o=undefined;m(e)}};var b=function(e,t){l(e);this._c=undefined;this._o=e;e=new M(this);try{var n=t(e);var r=n;if(n!=null){if(typeof n.unsubscribe==="function")n=function(){r.unsubscribe()};else u(n);this._c=n}}catch(t){e.error(t);return}if(v(this))m(this)};b.prototype=f({},{unsubscribe:function e(){y(this)}});var M=function(e){this._s=e};M.prototype=f({},{next:function e(t){var n=this._s;if(!v(n)){var r=n._o;try{var i=g(r.next);if(i)return i.call(r,t)}catch(e){try{y(n)}finally{throw e}}}},error:function e(t){var n=this._s;if(v(n))throw t;var r=n._o;n._o=undefined;try{var i=g(r.error);if(!i)throw t;t=i.call(r,t)}catch(e){try{m(n)}finally{throw e}}m(n);return t},complete:function e(t){var n=this._s;if(!v(n)){var r=n._o;n._o=undefined;try{var i=g(r.complete);t=i?i.call(r,t):undefined}catch(e){try{m(n)}finally{throw e}}m(n);return t}}});var x=function e(t){c(this,x,"Observable","_f")._f=u(t)};f(x.prototype,{subscribe:function e(t){return new b(t,this._f)},forEach:function e(t){var n=this;return new(a.Promise||i.Promise)(function(e,r){u(t);var i=n.subscribe({next:function(e){try{return t(e)}catch(e){r(e);i.unsubscribe()}},error:r,complete:e})})}});f(x,{from:function e(t){var n=typeof this==="function"?this:x;var r=g(l(t)[s]);if(r){var i=l(r.call(t));return i.constructor===n?i:new n(function(e){return i.subscribe(e)})}return new n(function(e){var n=false;o(function(){if(!n){try{if(p(t,false,function(t){e.next(t);if(n)return h})===h)return}catch(t){if(n)throw t;e.error(t);return}e.complete()}});return function(){n=true}})},of:function e(){for(var t=0,n=arguments.length,r=new Array(n);t<n;)r[t]=arguments[t++];return new(typeof this==="function"?this:x)(function(e){var t=false;o(function(){if(!t){for(var n=0;n<r.length;++n){e.next(r[n]);if(t)return}e.complete()}});return function(){t=true}})}});d(x.prototype,s,function(){return this});r(r.G,{Observable:x});n(51)("Observable")},function(e,t,n){var r=n(6);var i=n(0);var a=n(90);var o=[].slice;var s=/MSIE .\./.test(a);var u=function(e){return function(t,n){var r=arguments.length>2;var i=r?o.call(arguments,2):false;return e(r?function(){(typeof t=="function"?t:Function(t)).apply(this,i)}:t,n)}};i(i.G+i.B+i.F*s,{setTimeout:u(r.setTimeout),setInterval:u(r.setInterval)})},function(e,t,n){var r=n(0);var i=n(131);r(r.G+r.B,{setImmediate:i.set,clearImmediate:i.clear})},function(e,t,n){var r=n(128);var i=n(47);var a=n(22);var o=n(6);var s=n(21);var u=n(63);var l=n(10);var c=l("iterator");var f=l("toStringTag");var d=u.Array;var p={CSSRuleList:true,CSSStyleDeclaration:false,CSSValueList:false,ClientRectList:false,DOMRectList:false,DOMStringList:false,DOMTokenList:true,DataTransferItemList:false,FileList:false,HTMLAllCollection:false,HTMLCollection:false,HTMLFormElement:false,HTMLSelectElement:false,MediaList:true,MimeTypeArray:false,NamedNodeMap:false,NodeList:true,PaintRequestList:false,Plugin:false,PluginArray:false,SVGLengthList:false,SVGNumberList:false,SVGPathSegList:false,SVGPointList:false,SVGStringList:false,SVGTransformList:false,SourceBufferList:false,StyleSheetList:true,TextTrackCueList:false,TextTrackList:false,TouchList:false};for(var h=i(p),g=0;g<h.length;g++){var m=h[g];var v=p[m];var y=o[m];var b=y&&y.prototype;var M;if(b){if(!b[c])s(b,c,d);if(!b[f])s(b,f,m);u[m]=d;if(v)for(M in r)if(!b[M])a(b,M,r[M],true)}}},function(e,t,n){(function(t){!function(t){"use strict";var n=Object.prototype;var r=n.hasOwnProperty;var i;var a=typeof Symbol==="function"?Symbol:{};var o=a.iterator||"@@iterator";var s=a.asyncIterator||"@@asyncIterator";var u=a.toStringTag||"@@toStringTag";var l=typeof e==="object";var c=t.regeneratorRuntime;if(c){if(l){e.exports=c}return}c=t.regeneratorRuntime=l?e.exports:{};function f(e,t,n,r){var i=t&&t.prototype instanceof y?t:y;var a=Object.create(i.prototype);var o=new O(r||[]);a._invoke=D(e,n,o);return a}c.wrap=f;function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}var p="suspendedStart";var h="suspendedYield";var g="executing";var m="completed";var v={};function y(){}function b(){}function M(){}var x={};x[o]=function(){return this};var w=Object.getPrototypeOf;var A=w&&w(w(_([])));if(A&&A!==n&&r.call(A,o)){x=A}var T=M.prototype=y.prototype=Object.create(x);b.prototype=T.constructor=M;M.constructor=b;M[u]=b.displayName="GeneratorFunction";function C(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}c.isGeneratorFunction=function(e){var t=typeof e==="function"&&e.constructor;return t?t===b||(t.displayName||t.name)==="GeneratorFunction":false};c.mark=function(e){if(Object.setPrototypeOf){Object.setPrototypeOf(e,M)}else{e.__proto__=M;if(!(u in e)){e[u]="GeneratorFunction"}}e.prototype=Object.create(T);return e};c.awrap=function(e){return{__await:e}};function S(e){function n(t,i,a,o){var s=d(e[t],e,i);if(s.type==="throw"){o(s.arg)}else{var u=s.arg;var l=u.value;if(l&&typeof l==="object"&&r.call(l,"__await")){return Promise.resolve(l.__await).then(function(e){n("next",e,a,o)},function(e){n("throw",e,a,o)})}return Promise.resolve(l).then(function(e){u.value=e;a(u)},o)}}if(typeof t.process==="object"&&t.process.domain){n=t.process.domain.bind(n)}var i;function a(e,t){function r(){return new Promise(function(r,i){n(e,t,r,i)})}return i=i?i.then(r,r):r()}this._invoke=a}C(S.prototype);S.prototype[s]=function(){return this};c.AsyncIterator=S;c.async=function(e,t,n,r){var i=new S(f(e,t,n,r));return c.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})};function D(e,t,n){var r=p;return function i(a,o){if(r===g){throw new Error("Generator is already running")}if(r===m){if(a==="throw"){throw o}return L()}n.method=a;n.arg=o;while(true){var s=n.delegate;if(s){var u=I(s,n);if(u){if(u===v)continue;return u}}if(n.method==="next"){n.sent=n._sent=n.arg}else if(n.method==="throw"){if(r===p){r=m;throw n.arg}n.dispatchException(n.arg)}else if(n.method==="return"){n.abrupt("return",n.arg)}r=g;var l=d(e,t,n);if(l.type==="normal"){r=n.done?m:h;if(l.arg===v){continue}return{value:l.arg,done:n.done}}else if(l.type==="throw"){r=m;n.method="throw";n.arg=l.arg}}}}function I(e,t){var n=e.iterator[t.method];if(n===i){t.delegate=null;if(t.method==="throw"){if(e.iterator.return){t.method="return";t.arg=i;I(e,t);if(t.method==="throw"){return v}}t.method="throw";t.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var r=d(n,e.iterator,t.arg);if(r.type==="throw"){t.method="throw";t.arg=r.arg;t.delegate=null;return v}var a=r.arg;if(!a){t.method="throw";t.arg=new TypeError("iterator result is not an object");t.delegate=null;return v}if(a.done){t[e.resultName]=a.value;t.next=e.nextLoc;if(t.method!=="return"){t.method="next";t.arg=i}}else{return a}t.delegate=null;return v}C(T);T[u]="Generator";T[o]=function(){return this};T.toString=function(){return"[object Generator]"};function E(e){var t={tryLoc:e[0]};if(1 in e){t.catchLoc=e[1]}if(2 in e){t.finallyLoc=e[2];t.afterLoc=e[3]}this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal";delete t.arg;e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}];e.forEach(E,this);this.reset(true)}c.keys=function(e){var t=[];for(var n in e){t.push(n)}t.reverse();return function n(){while(t.length){var r=t.pop();if(r in e){n.value=r;n.done=false;return n}}n.done=true;return n}};function _(e){if(e){var t=e[o];if(t){return t.call(e)}if(typeof e.next==="function"){return e}if(!isNaN(e.length)){var n=-1,a=function t(){while(++n<e.length){if(r.call(e,n)){t.value=e[n];t.done=false;return t}}t.value=i;t.done=true;return t};return a.next=a}}return{next:L}}c.values=_;function L(){return{value:i,done:true}}O.prototype={constructor:O,reset:function(e){this.prev=0;this.next=0;this.sent=this._sent=i;this.done=false;this.delegate=null;this.method="next";this.arg=i;this.tryEntries.forEach(N);if(!e){for(var t in this){if(t.charAt(0)==="t"&&r.call(this,t)&&!isNaN(+t.slice(1))){this[t]=i}}}},stop:function(){this.done=true;var e=this.tryEntries[0];var t=e.completion;if(t.type==="throw"){throw t.arg}return this.rval},dispatchException:function(e){if(this.done){throw e}var t=this;function n(n,r){s.type="throw";s.arg=e;t.next=n;if(r){t.method="next";t.arg=i}return!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a];var s=o.completion;if(o.tryLoc==="root"){return n("end")}if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc");var l=r.call(o,"finallyLoc");if(u&&l){if(this.prev<o.catchLoc){return n(o.catchLoc,true)}else if(this.prev<o.finallyLoc){return n(o.finallyLoc)}}else if(u){if(this.prev<o.catchLoc){return n(o.catchLoc,true)}}else if(l){if(this.prev<o.finallyLoc){return n(o.finallyLoc)}}else{throw new Error("try statement without catch or finally")}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}if(a&&(e==="break"||e==="continue")&&a.tryLoc<=t&&t<=a.finallyLoc){a=null}var o=a?a.completion:{};o.type=e;o.arg=t;if(a){this.method="next";this.next=a.finallyLoc;return v}return this.complete(o)},complete:function(e,t){if(e.type==="throw"){throw e.arg}if(e.type==="break"||e.type==="continue"){this.next=e.arg}else if(e.type==="return"){this.rval=this.arg=e.arg;this.method="return";this.next="end"}else if(e.type==="normal"&&t){this.next=t}return v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e){this.complete(n.completion,n.afterLoc);N(n);return v}}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if(r.type==="throw"){var i=r.arg;N(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){this.delegate={iterator:_(e),resultName:t,nextLoc:n};if(this.method==="next"){this.arg=i}return v}}}(typeof t==="object"?t:typeof window==="object"?window:typeof self==="object"?self:this)}).call(t,n(81))},function(e,t,n){n(470);e.exports=n(28).RegExp.escape},function(e,t,n){var r=n(0);var i=n(471)(/[\\^$*+?.()|[\]{}]/g,"\\$&");r(r.S,"RegExp",{escape:function e(t){return i(t)}})},function(e,t){e.exports=function(e,t){var n=t===Object(t)?function(e){return t[e]}:t;return function(t){return String(t).replace(e,n)}}},function(e,t,n){"use strict";
/**
 * GeoJS
 * @copyright 2013-2018, Kitware, Inc.
 * @license Apache-2.0
 * @namespace geo
 */
/*
 * Bundled with the following libraries:
 *
 * vgl
 * @copyright 2014-2016, Kitware, Inc.
 * @license Apache-2.0
 *
 * Proj4js
 * @copyright 2014, Mike Adair, Richard Greenwood, Didier Richard, Stephen Irons, Olivier Terral and Calvin Metcalf
 * @license MIT
 *
 * gl-matrix
 * @copyright 2015, Brandon Jones, Colin MacKenzie IV
 * @license MIT
 *
 * JQuery
 * @copyright jQuery Foundation and other contributors
 * @license MIT
 *
 * earcut
 * @copyright 2016, Mapbox
 * @license ISC
 *
 * kdbush
 * @copyright 2017, Vladimir Agafonkin
 * @license ISC
 */var r=n(3);n(473);e.exports=r.extend({annotation:n(188),annotationLayer:n(600),camera:n(249),choroplethFeature:n(251),contourFeature:n(253),domRenderer:n(621),event:n(11),feature:n(19),featureLayer:n(105),fetchQueue:n(254),fileReader:n(255),geo_action:n(137),graphFeature:n(256),heatmapFeature:n(257),imageTile:n(258),isolineFeature:n(150),geojsonReader:n(622),layer:n(79),lineFeature:n(77),map:n(623),mapInteractor:n(146),markerFeature:n(260),meshFeature:n(148),object:n(38),osmLayer:n(624),pathFeature:n(262),pointFeature:n(57),polygonFeature:n(145),quadFeature:n(66),pixelmapFeature:n(263),renderer:n(56),sceneObject:n(78),textFeature:n(80),tile:n(149),tileCache:n(261),tileLayer:n(106),timestamp:n(20),transform:n(17),typedef:n(625),vectorFeature:n(264),inherit:n(1),version:n(626),sha:n(627),util:n(5),jQuery:r,canvas:n(628),svg:n(637),vtkjs:n(645),webgl:n(649),gui:n(680)},n(2));if(window&&!window.$){window.$=r}if(window&&!window.jQuery){window.jQuery=r}},function(e,t,n){var r=n(474);if(typeof r==="string")r=[[e.i,r,""]];var i;var a;var o={hmr:true};o.transform=i;o.insertInto=undefined;var s=n(136)(r,o);if(r.locals)e.exports=r.locals;if(false){e.hot.accept("!!../node_modules/css-loader/index.js!../node_modules/stylus-loader/index.js!./main.styl",function(){var t=require("!!../node_modules/css-loader/index.js!../node_modules/stylus-loader/index.js!./main.styl");if(typeof t==="string")t=[[e.id,t,""]];var n=function(e,t){var n,r=0;for(n in e){if(!t||e[n]!==t[n])return false;r++}for(n in t)r--;return r===0}(r.locals,t.locals);if(!n)throw new Error("Aborting CSS HMR due to changed css-modules locals.");s(t)});e.hot.dispose(function(){s()})}},function(e,t,n){t=e.exports=n(135)(false);t.push([e.i,'.geojs-map {\n  position: relative;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n.geojs-map .geo-attribution {\n  position: absolute;\n  right: 0;\n  bottom: 0;\n  padding-right: 5px;\n  cursor: auto;\n  font: 11px/1.5 "Helvetica Neue", Arial, Helvetica, sans-serif;\n  z-index: 1001;\n  background: rgba(255,255,255,0.7);\n  clear: both;\n  display: block;\n  pointer-events: auto;\n}\n.geojs-map .geo-attribution .geo-attribution-layer {\n  padding-left: 5px;\n}\n.geojs-map .canvas-canvas {\n  display: block;\n  -webkit-transform-origin: 0px 0px;\n  -moz-transform-origin: 0px 0px;\n  -o-transform-origin: 0px 0px;\n  -ms-transform-origin: 0px 0px;\n  transform-origin: 0px 0px;\n}\n.geojs-map .webgl-canvas {\n  display: block;\n}\n.geojs-map .geojs-layer {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n  pointer-events: none;\n}\n.geojs-map .geojs-layer.active:not(.hidden) > * {\n  pointer-events: auto;\n}\n.geojs-map .geojs-layer.hidden {\n  display: none;\n}\n.geojs-map .geojs-layer.hidden[renderer="webgl"] {\n  display: inherit;\n}\n.geojs-map .geo-tile-layer {\n  -webkit-transform-origin: 0px 0px;\n  -moz-transform-origin: 0px 0px;\n  -o-transform-origin: 0px 0px;\n  -ms-transform-origin: 0px 0px;\n  transform-origin: 0px 0px;\n  line-height: 0;\n  font-size: 0;\n}\n.geojs-map.annotation-input {\n  cursor: crosshair;\n}\n.geojs-map.highlight-focus:after {\n  content: "";\n  display: block;\n  position: absolute;\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  left: 0px;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  border: 3px solid Highlight;\n  opacity: 1;\n  -ms-filter: none;\n  filter: none;\n  -webkit-transition: opacity 0s;\n  -moz-transition: opacity 0s;\n  -o-transition: opacity 0s;\n  -ms-transition: opacity 0s;\n  transition: opacity 0s;\n  visibility: hidden;\n}\n.geojs-map.highlight-focus:focus:after {\n  visibility: visible;\n  -webkit-transition: opacity 2.5s ease-in;\n  -moz-transition: opacity 2.5s ease-in;\n  -o-transition: opacity 2.5s ease-in;\n  -ms-transition: opacity 2.5s ease-in;\n  transition: opacity 2.5s ease-in;\n  opacity: 0;\n  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";\n  filter: alpha(opacity=0);\n}\n.geo-tile-container {\n  position: absolute;\n}\n.geo-tile-container.crop {\n  overflow: hidden;\n}\n',""])},function(e,t){e.exports=function(e){var t=typeof window!=="undefined"&&window.location;if(!t){throw new Error("fixUrls requires window.location")}if(!e||typeof e!=="string"){return e}var n=t.protocol+"//"+t.host;var r=n+t.pathname.replace(/\/[^\/]*$/,"/");var i=e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var i=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)){return e}var a;if(i.indexOf("//")===0){a=i}else if(i.indexOf("/")===0){a=n+i}else{a=r+i.replace(/^\.\//,"")}return"url("+JSON.stringify(a)+")"});return i}},function(e,t,n){"use strict";var r=n(138);var i=n(195);var a=Object(r["a"])("WGS84");function o(e,t,n){var r,a,o;if(Array.isArray(n)){r=Object(i["a"])(e,t,n);if(n.length===3){return[r.x,r.y,r.z]}else{return[r.x,r.y]}}else{a=Object(i["a"])(e,t,n);o=Object.keys(n);if(o.length===2){return a}o.forEach(function(e){if(e==="x"||e==="y"){return}a[e]=n[e]});return a}}function s(e){if(e instanceof r["a"]){return e}if(e.oProj){return e.oProj}return Object(r["a"])(e)}function u(e,t,n){e=s(e);var r=false;var i;if(typeof t==="undefined"){t=e;e=a;r=true}else if(typeof t.x!=="undefined"||Array.isArray(t)){n=t;t=e;e=a;r=true}t=s(t);if(n){return o(e,t,n)}else{i={forward:function(n){return o(e,t,n)},inverse:function(n){return o(t,e,n)}};if(r){i.oProj=t}return i}}t["a"]=u},function(e,t,n){"use strict";var r=n(190);var i=n(192);var a=n(191);var o=n(96);function s(e){return typeof e==="string"}function u(e){return e in r["a"]}var l=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function c(e){return l.some(function(t){return e.indexOf(t)>-1})}var f=["3857","900913","3785","102113"];function d(e){var t=Object(o["a"])(e,"authority");if(!t){return}var n=Object(o["a"])(t,"epsg");return n&&f.indexOf(n)>-1}function p(e){var t=Object(o["a"])(e,"extension");if(!t){return}return Object(o["a"])(t,"proj4")}function h(e){return e[0]==="+"}function g(e){if(s(e)){if(u(e)){return r["a"][e]}if(c(e)){var t=Object(i["a"])(e);if(d(t)){return r["a"]["EPSG:3857"]}var n=p(t);if(n){return Object(a["a"])(n)}return t}if(h(e)){return Object(a["a"])(e)}}else{return e}}t["a"]=g},function(e,t,n){"use strict";t["a"]=function(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees");e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees");e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");e.WGS84=e["EPSG:4326"];e["EPSG:3785"]=e["EPSG:3857"];e.GOOGLE=e["EPSG:3857"];e["EPSG:900913"]=e["EPSG:3857"];e["EPSG:102113"]=e["EPSG:3857"]}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={};r.greenwich=0;r.lisbon=-9.131906111111;r.paris=2.337229166667;r.bogota=-74.080916666667;r.madrid=-3.687938888889;r.rome=12.452333333333;r.bern=7.439583333333;r.jakarta=106.807719444444;r.ferro=-17.666666666667;r.brussels=4.367975;r.stockholm=18.058277777778;r.athens=23.7163375;r.oslo=10.722916666667},function(e,t,n){"use strict";t["a"]={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}}},function(e,t,n){"use strict";t["a"]=g;var r=1;var i=2;var a=3;var o=4;var s=5;var u=-1;var l=/\s/;var c=/[A-Za-z]/;var f=/[A-Za-z84]/;var d=/[,\]]/;var p=/[\d\.E\-\+]/;function h(e){if(typeof e!=="string"){throw new Error("not a string")}this.text=e.trim();this.level=0;this.place=0;this.root=null;this.stack=[];this.currentObject=null;this.state=r}h.prototype.readCharicter=function(){var e=this.text[this.place++];if(this.state!==o){while(l.test(e)){if(this.place>=this.text.length){return}e=this.text[this.place++]}}switch(this.state){case r:return this.neutral(e);case i:return this.keyword(e);case o:return this.quoted(e);case s:return this.afterquote(e);case a:return this.number(e);case u:return}};h.prototype.afterquote=function(e){if(e==='"'){this.word+='"';this.state=o;return}if(d.test(e)){this.word=this.word.trim();this.afterItem(e);return}throw new Error("havn't handled \""+e+'" in afterquote yet, index '+this.place)};h.prototype.afterItem=function(e){if(e===","){if(this.word!==null){this.currentObject.push(this.word)}this.word=null;this.state=r;return}if(e==="]"){this.level--;if(this.word!==null){this.currentObject.push(this.word);this.word=null}this.state=r;this.currentObject=this.stack.pop();if(!this.currentObject){this.state=u}return}};h.prototype.number=function(e){if(p.test(e)){this.word+=e;return}if(d.test(e)){this.word=parseFloat(this.word);this.afterItem(e);return}throw new Error("havn't handled \""+e+'" in number yet, index '+this.place)};h.prototype.quoted=function(e){if(e==='"'){this.state=s;return}this.word+=e;return};h.prototype.keyword=function(e){if(f.test(e)){this.word+=e;return}if(e==="["){var t=[];t.push(this.word);this.level++;if(this.root===null){this.root=t}else{this.currentObject.push(t)}this.stack.push(this.currentObject);this.currentObject=t;this.state=r;return}if(d.test(e)){this.afterItem(e);return}throw new Error("havn't handled \""+e+'" in keyword yet, index '+this.place)};h.prototype.neutral=function(e){if(c.test(e)){this.word=e;this.state=i;return}if(e==='"'){this.word="";this.state=o;return}if(p.test(e)){this.word=e;this.state=a;return}if(d.test(e)){this.afterItem(e);return}throw new Error("havn't handled \""+e+'" in neutral yet, index '+this.place)};h.prototype.output=function(){while(this.place<this.text.length){this.readCharicter()}if(this.state===u){return this.root}throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function g(e){var t=new h(e);return t.output()}},function(e,t,n){"use strict";t["a"]=i;function r(e,t,n){if(Array.isArray(t)){n.unshift(t);t=null}var r=t?{}:e;var a=n.reduce(function(e,t){i(t,e);return e},r);if(t){e[t]=a}}function i(e,t){if(!Array.isArray(e)){t[e]=true;return}var n=e.shift();if(n==="PARAMETER"){n=e.shift()}if(e.length===1){if(Array.isArray(e[0])){t[n]={};i(e[0],t[n]);return}t[n]=e[0];return}if(!e.length){t[n]=true;return}if(n==="TOWGS84"){t[n]=e;return}if(!Array.isArray(n)){t[n]={}}var a;switch(n){case"UNIT":case"PRIMEM":case"VERT_DATUM":t[n]={name:e[0].toLowerCase(),convert:e[1]};if(e.length===3){i(e[2],t[n])}return;case"SPHEROID":case"ELLIPSOID":t[n]={name:e[0],a:e[1],rf:e[2]};if(e.length===4){i(e[3],t[n])}return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":e[0]=["name",e[0]];r(t,n,e);return;default:a=-1;while(++a<e.length){if(!Array.isArray(e[a])){return i(e,t[n])}}return r(t,n,e)}}},function(e,t,n){"use strict";t["a"]=function(e,t){e=e||{};var n,r;if(!t){return e}for(r in t){n=t[r];if(n!==undefined){e[r]=n}}return e}},function(e,t,n){"use strict";var r=n(193);var i=n(194);var a=[r["default"],i["default"]];var o={};var s=[];function u(e,t){var n=s.length;if(!e.names){console.log(t);return true}s[n]=e;e.names.forEach(function(e){o[e.toLowerCase()]=n});return this}function l(e){if(!e){return false}var t=e.toLowerCase();if(typeof o[t]!=="undefined"&&s[o[t]]){return s[o[t]]}}function c(){a.forEach(u)}t["a"]={start:c,add:u,get:l}},function(e,t,n){"use strict";t["a"]=o;t["b"]=s;var r=n(7);var i=n(486);var a=n(96);function o(e,t,n,i){var a=e*e;var o=t*t;var s=(a-o)/a;var u=0;if(i){e*=1-s*(r["m"]+s*(r["j"]+s*r["k"]));a=e*e;s=0}else{u=Math.sqrt(s)}var l=(a-o)/o;return{es:s,e:u,ep2:l}}function s(e,t,n,o,s){if(!e){var u=Object(a["a"])(i["b"],o);if(!u){u=i["a"]}e=u.a;t=u.b;n=u.rf}if(n&&!t){t=(1-1/n)*e}if(n===0||Math.abs(e-t)<r["b"]){s=true;t=e}return{a:e,b:t,rf:n,sphere:s}}},function(e,t,n){"use strict";n.d(t,"b",function(){return r});n.d(t,"a",function(){return i});var r={};r.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};r.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};r.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};r.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};r.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"};r.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};r.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};r.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"};r.andrae={a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};r.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};r.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};r.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"};r.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};r.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"};r.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."};r.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"};r.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};r.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};r.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"};r.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"};r.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"};r.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"};r.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"};r.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};r.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};r.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};r.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};r.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};r.hough={a:6378270,rf:297,ellipseName:"Hough"};r.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};r.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};r.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};r.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};r.new_intl={a:6378157.5,b:6356772.2,ellipseName:"New International 1967"};r.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};r.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};r.SEasia={a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"};r.walbeck={a:6376896,b:6355834.8467,ellipseName:"Walbeck"};r.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};r.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};r.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var i=r.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};r.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={};r.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"};r.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"};r.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"};r.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"};r.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"};r.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"};r.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"};r.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"};r.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"};r.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"};r.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"};r.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"};r.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"};r.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"};r.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"};r.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"};r.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}},function(e,t,n){"use strict";var r=n(7);function i(e,t,n,i,a,o){var s={};if(e===undefined||e==="none"){s.datum_type=r["g"]}else{s.datum_type=r["h"]}if(t){s.datum_params=t.map(parseFloat);if(s.datum_params[0]!==0||s.datum_params[1]!==0||s.datum_params[2]!==0){s.datum_type=r["e"]}if(s.datum_params.length>3){if(s.datum_params[3]!==0||s.datum_params[4]!==0||s.datum_params[5]!==0||s.datum_params[6]!==0){s.datum_type=r["f"];s.datum_params[3]*=r["l"];s.datum_params[4]*=r["l"];s.datum_params[5]*=r["l"];s.datum_params[6]=s.datum_params[6]/1e6+1}}}s.a=n;s.b=i;s.es=a;s.ep2=o;return s}t["a"]=i},function(e,t,n){"use strict";var r=n(7);var i=n(490);function a(e){return e===r["e"]||e===r["f"]}t["a"]=function(e,t,n){if(Object(i["a"])(e,t)){return n}if(e.datum_type===r["g"]||t.datum_type===r["g"]){return n}if(e.es===t.es&&e.a===t.a&&!a(e.datum_type)&&!a(t.datum_type)){return n}n=Object(i["e"])(n,e.es,e.a);if(a(e.datum_type)){n=Object(i["d"])(n,e.datum_type,e.datum_params)}if(a(t.datum_type)){n=Object(i["b"])(n,t.datum_type,t.datum_params)}return Object(i["c"])(n,t.es,t.a,t.b)}},function(e,t,n){"use strict";t["a"]=i;t["e"]=a;t["c"]=o;t["d"]=s;t["b"]=u;var r=n(7);function i(e,t){if(e.datum_type!==t.datum_type){return false}else if(e.a!==t.a||Math.abs(e.es-t.es)>5e-11){return false}else if(e.datum_type===r["e"]){return e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]}else if(e.datum_type===r["f"]){return e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]&&e.datum_params[3]===t.datum_params[3]&&e.datum_params[4]===t.datum_params[4]&&e.datum_params[5]===t.datum_params[5]&&e.datum_params[6]===t.datum_params[6]}else{return true}}function a(e,t,n){var i=e.x;var a=e.y;var o=e.z?e.z:0;var s;var u;var l;var c;if(a<-r["d"]&&a>-1.001*r["d"]){a=-r["d"]}else if(a>r["d"]&&a<1.001*r["d"]){a=r["d"]}else if(a<-r["d"]){return{x:-Infinity,y:-Infinity,z:e.z}}else if(a>r["d"]){return{x:Infinity,y:Infinity,z:e.z}}if(i>Math.PI){i-=2*Math.PI}u=Math.sin(a);c=Math.cos(a);l=u*u;s=n/Math.sqrt(1-t*l);return{x:(s+o)*c*Math.cos(i),y:(s+o)*c*Math.sin(i),z:(s*(1-t)+o)*u}}function o(e,t,n,i){var a=1e-12;var o=a*a;var s=30;var u;var l;var c;var f;var d;var p;var h;var g;var m;var v;var y;var b;var M;var x=e.x;var w=e.y;var A=e.z?e.z:0;var T;var C;var S;u=Math.sqrt(x*x+w*w);l=Math.sqrt(x*x+w*w+A*A);if(u/n<a){T=0;if(l/n<a){C=r["d"];S=-i;return{x:e.x,y:e.y,z:e.z}}}else{T=Math.atan2(w,x)}c=A/l;f=u/l;d=1/Math.sqrt(1-t*(2-t)*f*f);g=f*(1-t)*d;m=c*d;M=0;do{M++;h=n/Math.sqrt(1-t*m*m);S=u*g+A*m-h*(1-t*m*m);p=t*h/(h+S);d=1/Math.sqrt(1-p*(2-p)*f*f);v=f*(1-p)*d;y=c*d;b=y*g-v*m;g=v;m=y}while(b*b>o&&M<s);C=Math.atan(y/Math.abs(v));return{x:T,y:C,z:S}}function s(e,t,n){if(t===r["e"]){return{x:e.x+n[0],y:e.y+n[1],z:e.z+n[2]}}else if(t===r["f"]){var i=n[0];var a=n[1];var o=n[2];var s=n[3];var u=n[4];var l=n[5];var c=n[6];return{x:c*(e.x-l*e.y+u*e.z)+i,y:c*(l*e.x+e.y-s*e.z)+a,z:c*(-u*e.x+s*e.y+e.z)+o}}}function u(e,t,n){if(t===r["e"]){return{x:e.x-n[0],y:e.y-n[1],z:e.z-n[2]}}else if(t===r["f"]){var i=n[0];var a=n[1];var o=n[2];var s=n[3];var u=n[4];var l=n[5];var c=n[6];var f=(e.x-i)/c;var d=(e.y-a)/c;var p=(e.z-o)/c;return{x:f+l*d-u*p,y:-l*f+d+s*p,z:u*f-s*d+p}}}},function(e,t,n){"use strict";t["a"]=function(e,t,n){var r=n.x,i=n.y,a=n.z||0;var o,s,u;var l={};for(u=0;u<3;u++){if(t&&u===2&&n.z===undefined){continue}if(u===0){o=r;s="x"}else if(u===1){o=i;s="y"}else{o=a;s="z"}switch(e.axis[u]){case"e":l[s]=o;break;case"w":l[s]=-o;break;case"n":l[s]=o;break;case"s":l[s]=-o;break;case"u":if(n[s]!==undefined){l.z=o}break;case"d":if(n[s]!==undefined){l.z=-o}break;default:return null}}return l}},function(e,t,n){"use strict";t["a"]=function(e){r(e.x);r(e.y)};function r(e){if(typeof Number.isFinite==="function"){if(Number.isFinite(e)){return}throw new TypeError("coordinates must be finite numbers")}if(typeof e!=="number"||e!==e||!isFinite(e)){throw new TypeError("coordinates must be finite numbers")}}},function(e,t,n){"use strict";var r=n(197);function i(e,t,n){if(!(this instanceof i)){return new i(e,t,n)}if(Array.isArray(e)){this.x=e[0];this.y=e[1];this.z=e[2]||0}else if(typeof e==="object"){this.x=e.x;this.y=e.y;this.z=e.z||0}else if(typeof e==="string"&&typeof t==="undefined"){var r=e.split(",");this.x=parseFloat(r[0],10);this.y=parseFloat(r[1],10);this.z=parseFloat(r[2],10)||0}else{this.x=e;this.y=t;this.z=n||0}console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}i.fromMGRS=function(e){return new i(Object(r["c"])(e))};i.prototype.toMGRS=function(e){return Object(r["b"])([this.x,this.y],e)};t["a"]=i},function(e,t,n){"use strict";var r=n(495);var i=n.n(r);if(n.o(r,"version"))n.d(t,"a",function(){return r["version"]})},function(e,t){e.exports={_args:[["proj4@2.5.0","/home/ubuntu/misc/geojs"]],_from:"proj4@2.5.0",_id:"proj4@2.5.0",_inBundle:false,_integrity:"sha512-XZTRT7OPdLzgvtTqL8DG2cEj8lYdovztOwiwpwRSYayOty5Ipf3H68dh/fiL+HKDEyetmQSMhkkMGiJoyziz3w==",_location:"/proj4",_phantomChildren:{},_requested:{type:"version",registry:true,raw:"proj4@2.5.0",name:"proj4",escapedName:"proj4",rawSpec:"2.5.0",saveSpec:null,fetchSpec:"2.5.0"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/proj4/-/proj4-2.5.0.tgz",_spec:"2.5.0",_where:"/home/ubuntu/misc/geojs",author:"",bugs:{url:"https://github.com/proj4js/proj4js/issues"},contributors:[{name:"Mike Adair",email:"madair@dmsolutions.ca"},{name:"Richard Greenwood",email:"rich@greenwoodmap.com"},{name:"Calvin Metcalf",email:"calvin.metcalf@gmail.com"},{name:"Richard Marsden",url:"http://www.winwaed.com"},{name:"T. Mittan"},{name:"D. Steinwand"},{name:"S. Nelson"}],dependencies:{mgrs:"1.0.0","wkt-parser":"^1.2.0"},description:"Proj4js is a JavaScript library to transform point coordinates from one coordinate system to another, including datum transformations.",devDependencies:{chai:"~4.1.2","curl-amd":"github:cujojs/curl",grunt:"^1.0.1","grunt-cli":"~1.2.0","grunt-contrib-connect":"~1.0.2","grunt-contrib-jshint":"~1.1.0","grunt-contrib-uglify":"~3.1.0","grunt-mocha-phantomjs":"~4.0.0","grunt-rollup":"^6.0.0",istanbul:"~0.4.5",mocha:"~4.0.0",rollup:"^0.50.0","rollup-plugin-json":"^2.3.0","rollup-plugin-node-resolve":"^3.0.0",tin:"~0.5.0"},directories:{test:"test",doc:"docs"},homepage:"https://github.com/proj4js/proj4js#readme",license:"MIT",main:"dist/proj4-src.js",module:"lib/index.js",name:"proj4",repository:{type:"git",url:"git://github.com/proj4js/proj4js.git"},scripts:{build:"grunt","build:tmerc":"grunt build:tmerc",test:"npm run build && istanbul test _mocha test/test.js"},version:"2.5.0"}},function(e,t,n){"use strict";var r=n(198);var i=n(140);var a=n(203);var o=n(204);var s=n(206);var u=n(207);var l=n(208);var c=n(209);var f=n(210);var d=n(211);var p=n(212);var h=n(213);var g=n(214);var m=n(215);var v=n(216);var y=n(217);var b=n(218);var M=n(219);var x=n(220);var w=n(221);var A=n(222);var T=n(223);var C=n(224);var S=n(225);var D=n(226);var I=n(227);t["a"]=function(e){e.Proj.projections.add(r["default"]);e.Proj.projections.add(i["default"]);e.Proj.projections.add(a["default"]);e.Proj.projections.add(o["default"]);e.Proj.projections.add(s["default"]);e.Proj.projections.add(u["default"]);e.Proj.projections.add(l["default"]);e.Proj.projections.add(c["default"]);e.Proj.projections.add(f["default"]);e.Proj.projections.add(d["default"]);e.Proj.projections.add(p["default"]);e.Proj.projections.add(h["default"]);e.Proj.projections.add(g["default"]);e.Proj.projections.add(m["default"]);e.Proj.projections.add(v["default"]);e.Proj.projections.add(y["default"]);e.Proj.projections.add(b["default"]);e.Proj.projections.add(M["default"]);e.Proj.projections.add(x["default"]);e.Proj.projections.add(w["default"]);e.Proj.projections.add(A["default"]);e.Proj.projections.add(T["default"]);e.Proj.projections.add(C["default"]);e.Proj.projections.add(S["default"]);e.Proj.projections.add(D["default"]);e.Proj.projections.add(I["default"])}},function(e,t,n){"use strict";var r=n(201);var i=n(498);t["a"]=function(e){var t=Math.abs(e);t=Object(i["a"])(t*(1+t/(Object(r["a"])(1,t)+1)));return e<0?-t:t}},function(e,t,n){"use strict";t["a"]=function(e){var t=1+e;var n=t-1;return n===0?e:e*Math.log(t)/n}},function(e,t,n){"use strict";t["a"]=function(e,t){var n=2*Math.cos(2*t);var r=e.length-1;var i=e[r];var a=0;var o;while(--r>=0){o=-a+n*i+e[r];a=i;i=o}return t+o*Math.sin(2*t)}},function(e,t,n){"use strict";t["a"]=function(e,t){var n=2*Math.cos(t);var r=e.length-1;var i=e[r];var a=0;var o;while(--r>=0){o=-a+n*i+e[r];a=i;i=o}return Math.sin(t)*o}},function(e,t,n){"use strict";var r=n(141);var i=n(202);t["a"]=function(e,t,n){var a=Math.sin(t);var o=Math.cos(t);var s=Object(r["a"])(n);var u=Object(i["a"])(n);var l=2*o*u;var c=-2*a*s;var f=e.length-1;var d=e[f];var p=0;var h=0;var g=0;var m;var v;while(--f>=0){m=h;v=p;h=d;p=g;d=-m+l*h-c*p+e[f];g=-v+c*h+l*p}l=a*u;c=o*s;return[l*d-c*g,l*g+c*d]}},function(e,t,n){"use strict";var r=n(12);t["a"]=function(e,t){if(e===undefined){e=Math.floor((Object(r["a"])(t)+Math.PI)*30/Math.PI)+1;if(e<0){return 0}else if(e>60){return 60}}return e}},function(e,t,n){"use strict";t["a"]=function(e,t){return Math.pow((1-e)/(1+e),t)}},function(e,t,n){"use strict";var r=n(7);t["a"]=function(e,t){var n=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(t)-n)<1e-6){if(t<0){return-1*r["d"]}else{return r["d"]}}var i=Math.asin(.5*t);var a;var o;var s;var u;for(var l=0;l<30;l++){o=Math.sin(i);s=Math.cos(i);u=e*o;a=Math.pow(1-u*u,2)/(2*s)*(t/(1-e*e)-o/(1-u*u)+.5/e*Math.log((1-u)/(1+u)));i+=a;if(Math.abs(a)<=1e-10){return i}}return NaN}},function(e,t){e.exports=n;function n(e){var t=new Float32Array(3);t[0]=e[0];t[1]=e[1];t[2]=e[2];return t}},function(e,t,n){e.exports=o;var r=n(230);var i=n(231);var a=n(232);function o(e,t){var n=r(e[0],e[1],e[2]);var o=r(t[0],t[1],t[2]);i(n,n);i(o,o);var s=a(n,o);if(s>1){return 0}else{return Math.acos(s)}}},function(e,t){e.exports=n;function n(e,t){e[0]=t[0];e[1]=t[1];e[2]=t[2];return e}},function(e,t){e.exports=n;function n(e,t,n,r){e[0]=t;e[1]=n;e[2]=r;return e}},function(e,t,n){e.exports=i;var r=n(228);function i(e,t){var n=e[0];var i=e[1];var a=e[2];var o=t[0];var s=t[1];var u=t[2];return Math.abs(n-o)<=r*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-s)<=r*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(a-u)<=r*Math.max(1,Math.abs(a),Math.abs(u))}},function(e,t){e.exports=n;function n(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}},function(e,t){e.exports=n;function n(e,t,n){e[0]=t[0]+n[0];e[1]=t[1]+n[1];e[2]=t[2]+n[2];return e}},function(e,t,n){e.exports=n(233)},function(e,t,n){e.exports=n(234)},function(e,t,n){e.exports=n(235)},function(e,t){e.exports=n;function n(e,t,n){e[0]=Math.min(t[0],n[0]);e[1]=Math.min(t[1],n[1]);e[2]=Math.min(t[2],n[2]);return e}},function(e,t){e.exports=n;function n(e,t,n){e[0]=Math.max(t[0],n[0]);e[1]=Math.max(t[1],n[1]);e[2]=Math.max(t[2],n[2]);return e}},function(e,t){e.exports=n;function n(e,t){e[0]=Math.floor(t[0]);e[1]=Math.floor(t[1]);e[2]=Math.floor(t[2]);return e}},function(e,t){e.exports=n;function n(e,t){e[0]=Math.ceil(t[0]);e[1]=Math.ceil(t[1]);e[2]=Math.ceil(t[2]);return e}},function(e,t){e.exports=n;function n(e,t){e[0]=Math.round(t[0]);e[1]=Math.round(t[1]);e[2]=Math.round(t[2]);return e}},function(e,t){e.exports=n;function n(e,t,n){e[0]=t[0]*n;e[1]=t[1]*n;e[2]=t[2]*n;return e}},function(e,t){e.exports=n;function n(e,t,n,r){e[0]=t[0]+n[0]*r;e[1]=t[1]+n[1]*r;e[2]=t[2]+n[2]*r;return e}},function(e,t,n){e.exports=n(236)},function(e,t,n){e.exports=n(237)},function(e,t,n){e.exports=n(238)},function(e,t,n){e.exports=n(239)},function(e,t){e.exports=n;function n(e,t){e[0]=-t[0];e[1]=-t[1];e[2]=-t[2];return e}},function(e,t){e.exports=n;function n(e,t){e[0]=1/t[0];e[1]=1/t[1];e[2]=1/t[2];return e}},function(e,t){e.exports=n;function n(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[0],s=n[1],u=n[2];e[0]=i*u-a*s;e[1]=a*o-r*u;e[2]=r*s-i*o;return e}},function(e,t){e.exports=n;function n(e,t,n,r){var i=t[0],a=t[1],o=t[2];e[0]=i+r*(n[0]-i);e[1]=a+r*(n[1]-a);e[2]=o+r*(n[2]-o);return e}},function(e,t){e.exports=n;function n(e,t){t=t||1;var n=Math.random()*2*Math.PI;var r=Math.random()*2-1;var i=Math.sqrt(1-r*r)*t;e[0]=Math.cos(n)*i;e[1]=Math.sin(n)*i;e[2]=r*t;return e}},function(e,t){e.exports=n;function n(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[3]*r+n[7]*i+n[11]*a+n[15];o=o||1;e[0]=(n[0]*r+n[4]*i+n[8]*a+n[12])/o;e[1]=(n[1]*r+n[5]*i+n[9]*a+n[13])/o;e[2]=(n[2]*r+n[6]*i+n[10]*a+n[14])/o;return e}},function(e,t){e.exports=n;function n(e,t,n){var r=t[0],i=t[1],a=t[2];e[0]=r*n[0]+i*n[3]+a*n[6];e[1]=r*n[1]+i*n[4]+a*n[7];e[2]=r*n[2]+i*n[5]+a*n[8];return e}},function(e,t){e.exports=n;function n(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[0],s=n[1],u=n[2],l=n[3],c=l*r+s*a-u*i,f=l*i+u*r-o*a,d=l*a+o*i-s*r,p=-o*r-s*i-u*a;e[0]=c*l+p*-o+f*-u-d*-s;e[1]=f*l+p*-s+d*-o-c*-u;e[2]=d*l+p*-u+c*-s-f*-o;return e}},function(e,t){e.exports=n;function n(e,t,n,r){var i=n[1];var a=n[2];var o=t[1]-i;var s=t[2]-a;var u=Math.sin(r);var l=Math.cos(r);e[0]=t[0];e[1]=i+o*l-s*u;e[2]=a+o*u+s*l;return e}},function(e,t){e.exports=n;function n(e,t,n,r){var i=n[0];var a=n[2];var o=t[0]-i;var s=t[2]-a;var u=Math.sin(r);var l=Math.cos(r);e[0]=i+s*u+o*l;e[1]=t[1];e[2]=a+s*l-o*u;return e}},function(e,t){e.exports=n;function n(e,t,n,r){var i=n[0];var a=n[1];var o=t[0]-i;var s=t[1]-a;var u=Math.sin(r);var l=Math.cos(r);e[0]=i+o*l-s*u;e[1]=a+o*u+s*l;e[2]=t[2];return e}},function(e,t,n){e.exports=i;var r=n(229)();function i(e,t,n,i,a,o){var s,u;if(!t){t=3}if(!n){n=0}if(i){u=Math.min(i*t+n,e.length)}else{u=e.length}for(s=n;s<u;s+=t){r[0]=e[s];r[1]=e[s+1];r[2]=e[s+2];a(r,r,o);e[s]=r[0];e[s+1]=r[1];e[s+2]=r[2]}return e}},function(e,t){e.exports=n;function n(){var e=new Float32Array(16);e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},function(e,t){e.exports=n;function n(e){var t=new Float32Array(16);t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];t[4]=e[4];t[5]=e[5];t[6]=e[6];t[7]=e[7];t[8]=e[8];t[9]=e[9];t[10]=e[10];t[11]=e[11];t[12]=e[12];t[13]=e[13];t[14]=e[14];t[15]=e[15];return t}},function(e,t){e.exports=n;function n(e,t){e[0]=t[0];e[1]=t[1];e[2]=t[2];e[3]=t[3];e[4]=t[4];e[5]=t[5];e[6]=t[6];e[7]=t[7];e[8]=t[8];e[9]=t[9];e[10]=t[10];e[11]=t[11];e[12]=t[12];e[13]=t[13];e[14]=t[14];e[15]=t[15];return e}},function(e,t){e.exports=n;function n(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],a=t[6],o=t[7],s=t[11];e[1]=t[4];e[2]=t[8];e[3]=t[12];e[4]=n;e[6]=t[9];e[7]=t[13];e[8]=r;e[9]=a;e[11]=t[14];e[12]=i;e[13]=o;e[14]=s}else{e[0]=t[0];e[1]=t[4];e[2]=t[8];e[3]=t[12];e[4]=t[1];e[5]=t[5];e[6]=t[9];e[7]=t[13];e[8]=t[2];e[9]=t[6];e[10]=t[10];e[11]=t[14];e[12]=t[3];e[13]=t[7];e[14]=t[11];e[15]=t[15]}return e}},function(e,t){e.exports=n;function n(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=t[8],f=t[9],d=t[10],p=t[11],h=t[12],g=t[13],m=t[14],v=t[15],y=n*s-r*o,b=n*u-i*o,M=n*l-a*o,x=r*u-i*s,w=r*l-a*s,A=i*l-a*u,T=c*g-f*h,C=c*m-d*h,S=c*v-p*h,D=f*m-d*g,I=f*v-p*g,E=d*v-p*m,N=y*E-b*I+M*D+x*S-w*C+A*T;if(!N){return null}N=1/N;e[0]=(s*E-u*I+l*D)*N;e[1]=(i*I-r*E-a*D)*N;e[2]=(g*A-m*w+v*x)*N;e[3]=(d*w-f*A-p*x)*N;e[4]=(u*S-o*E-l*C)*N;e[5]=(n*E-i*S+a*C)*N;e[6]=(m*M-h*A-v*b)*N;e[7]=(c*A-d*M+p*b)*N;e[8]=(o*I-s*S+l*T)*N;e[9]=(r*S-n*I-a*T)*N;e[10]=(h*w-g*M+v*y)*N;e[11]=(f*M-c*w-p*y)*N;e[12]=(s*C-o*D-u*T)*N;e[13]=(n*D-r*C+i*T)*N;e[14]=(g*b-h*x-m*y)*N;e[15]=(c*x-f*b+d*y)*N;return e}},function(e,t){e.exports=n;function n(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=t[8],f=t[9],d=t[10],p=t[11],h=t[12],g=t[13],m=t[14],v=t[15];e[0]=s*(d*v-p*m)-f*(u*v-l*m)+g*(u*p-l*d);e[1]=-(r*(d*v-p*m)-f*(i*v-a*m)+g*(i*p-a*d));e[2]=r*(u*v-l*m)-s*(i*v-a*m)+g*(i*l-a*u);e[3]=-(r*(u*p-l*d)-s*(i*p-a*d)+f*(i*l-a*u));e[4]=-(o*(d*v-p*m)-c*(u*v-l*m)+h*(u*p-l*d));e[5]=n*(d*v-p*m)-c*(i*v-a*m)+h*(i*p-a*d);e[6]=-(n*(u*v-l*m)-o*(i*v-a*m)+h*(i*l-a*u));e[7]=n*(u*p-l*d)-o*(i*p-a*d)+c*(i*l-a*u);e[8]=o*(f*v-p*g)-c*(s*v-l*g)+h*(s*p-l*f);e[9]=-(n*(f*v-p*g)-c*(r*v-a*g)+h*(r*p-a*f));e[10]=n*(s*v-l*g)-o*(r*v-a*g)+h*(r*l-a*s);e[11]=-(n*(s*p-l*f)-o*(r*p-a*f)+c*(r*l-a*s));e[12]=-(o*(f*m-d*g)-c*(s*m-u*g)+h*(s*d-u*f));e[13]=n*(f*m-d*g)-c*(r*m-i*g)+h*(r*d-i*f);e[14]=-(n*(s*m-u*g)-o*(r*m-i*g)+h*(r*u-i*s));e[15]=n*(s*d-u*f)-o*(r*d-i*f)+c*(r*u-i*s);return e}},function(e,t){e.exports=n;function n(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],l=e[8],c=e[9],f=e[10],d=e[11],p=e[12],h=e[13],g=e[14],m=e[15],v=t*o-n*a,y=t*s-r*a,b=t*u-i*a,M=n*s-r*o,x=n*u-i*o,w=r*u-i*s,A=l*h-c*p,T=l*g-f*p,C=l*m-d*p,S=c*g-f*h,D=c*m-d*h,I=f*m-d*g;return v*I-y*D+b*S+M*C-x*T+w*A}},function(e,t){e.exports=n;function n(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],f=t[8],d=t[9],p=t[10],h=t[11],g=t[12],m=t[13],v=t[14],y=t[15];var b=n[0],M=n[1],x=n[2],w=n[3];e[0]=b*r+M*s+x*f+w*g;e[1]=b*i+M*u+x*d+w*m;e[2]=b*a+M*l+x*p+w*v;e[3]=b*o+M*c+x*h+w*y;b=n[4];M=n[5];x=n[6];w=n[7];e[4]=b*r+M*s+x*f+w*g;e[5]=b*i+M*u+x*d+w*m;e[6]=b*a+M*l+x*p+w*v;e[7]=b*o+M*c+x*h+w*y;b=n[8];M=n[9];x=n[10];w=n[11];e[8]=b*r+M*s+x*f+w*g;e[9]=b*i+M*u+x*d+w*m;e[10]=b*a+M*l+x*p+w*v;e[11]=b*o+M*c+x*h+w*y;b=n[12];M=n[13];x=n[14];w=n[15];e[12]=b*r+M*s+x*f+w*g;e[13]=b*i+M*u+x*d+w*m;e[14]=b*a+M*l+x*p+w*v;e[15]=b*o+M*c+x*h+w*y;return e}},function(e,t){e.exports=n;function n(e,t,n){var r=n[0],i=n[1],a=n[2],o,s,u,l,c,f,d,p,h,g,m,v;if(t===e){e[12]=t[0]*r+t[4]*i+t[8]*a+t[12];e[13]=t[1]*r+t[5]*i+t[9]*a+t[13];e[14]=t[2]*r+t[6]*i+t[10]*a+t[14];e[15]=t[3]*r+t[7]*i+t[11]*a+t[15]}else{o=t[0];s=t[1];u=t[2];l=t[3];c=t[4];f=t[5];d=t[6];p=t[7];h=t[8];g=t[9];m=t[10];v=t[11];e[0]=o;e[1]=s;e[2]=u;e[3]=l;e[4]=c;e[5]=f;e[6]=d;e[7]=p;e[8]=h;e[9]=g;e[10]=m;e[11]=v;e[12]=o*r+c*i+h*a+t[12];e[13]=s*r+f*i+g*a+t[13];e[14]=u*r+d*i+m*a+t[14];e[15]=l*r+p*i+v*a+t[15]}return e}},function(e,t){e.exports=n;function n(e,t,n){var r=n[0],i=n[1],a=n[2];e[0]=t[0]*r;e[1]=t[1]*r;e[2]=t[2]*r;e[3]=t[3]*r;e[4]=t[4]*i;e[5]=t[5]*i;e[6]=t[6]*i;e[7]=t[7]*i;e[8]=t[8]*a;e[9]=t[9]*a;e[10]=t[10]*a;e[11]=t[11]*a;e[12]=t[12];e[13]=t[13];e[14]=t[14];e[15]=t[15];return e}},function(e,t){e.exports=n;function n(e,t,n,r){var i=r[0],a=r[1],o=r[2],s=Math.sqrt(i*i+a*a+o*o),u,l,c,f,d,p,h,g,m,v,y,b,M,x,w,A,T,C,S,D,I,E,N,O;if(Math.abs(s)<1e-6){return null}s=1/s;i*=s;a*=s;o*=s;u=Math.sin(n);l=Math.cos(n);c=1-l;f=t[0];d=t[1];p=t[2];h=t[3];g=t[4];m=t[5];v=t[6];y=t[7];b=t[8];M=t[9];x=t[10];w=t[11];A=i*i*c+l;T=a*i*c+o*u;C=o*i*c-a*u;S=i*a*c-o*u;D=a*a*c+l;I=o*a*c+i*u;E=i*o*c+a*u;N=a*o*c-i*u;O=o*o*c+l;e[0]=f*A+g*T+b*C;e[1]=d*A+m*T+M*C;e[2]=p*A+v*T+x*C;e[3]=h*A+y*T+w*C;e[4]=f*S+g*D+b*I;e[5]=d*S+m*D+M*I;e[6]=p*S+v*D+x*I;e[7]=h*S+y*D+w*I;e[8]=f*E+g*N+b*O;e[9]=d*E+m*N+M*O;e[10]=p*E+v*N+x*O;e[11]=h*E+y*N+w*O;if(t!==e){e[12]=t[12];e[13]=t[13];e[14]=t[14];e[15]=t[15]}return e}},function(e,t){e.exports=n;function n(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[4],o=t[5],s=t[6],u=t[7],l=t[8],c=t[9],f=t[10],d=t[11];if(t!==e){e[0]=t[0];e[1]=t[1];e[2]=t[2];e[3]=t[3];e[12]=t[12];e[13]=t[13];e[14]=t[14];e[15]=t[15]}e[4]=a*i+l*r;e[5]=o*i+c*r;e[6]=s*i+f*r;e[7]=u*i+d*r;e[8]=l*i-a*r;e[9]=c*i-o*r;e[10]=f*i-s*r;e[11]=d*i-u*r;return e}},function(e,t){e.exports=n;function n(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],u=t[3],l=t[8],c=t[9],f=t[10],d=t[11];if(t!==e){e[4]=t[4];e[5]=t[5];e[6]=t[6];e[7]=t[7];e[12]=t[12];e[13]=t[13];e[14]=t[14];e[15]=t[15]}e[0]=a*i-l*r;e[1]=o*i-c*r;e[2]=s*i-f*r;e[3]=u*i-d*r;e[8]=a*r+l*i;e[9]=o*r+c*i;e[10]=s*r+f*i;e[11]=u*r+d*i;return e}},function(e,t){e.exports=n;function n(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],u=t[3],l=t[4],c=t[5],f=t[6],d=t[7];if(t!==e){e[8]=t[8];e[9]=t[9];e[10]=t[10];e[11]=t[11];e[12]=t[12];e[13]=t[13];e[14]=t[14];e[15]=t[15]}e[0]=a*i+l*r;e[1]=o*i+c*r;e[2]=s*i+f*r;e[3]=u*i+d*r;e[4]=l*i-a*r;e[5]=c*i-o*r;e[6]=f*i-s*r;e[7]=d*i-u*r;return e}},function(e,t){e.exports=n;function n(e,t,n){var r,i,a;var o=n[0];var s=n[1];var u=n[2];var l=Math.sqrt(o*o+s*s+u*u);if(Math.abs(l)<1e-6){return null}l=1/l;o*=l;s*=l;u*=l;r=Math.sin(t);i=Math.cos(t);a=1-i;e[0]=o*o*a+i;e[1]=s*o*a+u*r;e[2]=u*o*a-s*r;e[3]=0;e[4]=o*s*a-u*r;e[5]=s*s*a+i;e[6]=u*s*a+o*r;e[7]=0;e[8]=o*u*a+s*r;e[9]=s*u*a-o*r;e[10]=u*u*a+i;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},function(e,t){e.exports=n;function n(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=r+r,u=i+i,l=a+a,c=r*s,f=r*u,d=r*l,p=i*u,h=i*l,g=a*l,m=o*s,v=o*u,y=o*l;e[0]=1-(p+g);e[1]=f+y;e[2]=d-v;e[3]=0;e[4]=f-y;e[5]=1-(c+g);e[6]=h+m;e[7]=0;e[8]=d+v;e[9]=h-m;e[10]=1-(c+p);e[11]=0;e[12]=n[0];e[13]=n[1];e[14]=n[2];e[15]=1;return e}},function(e,t){e.exports=n;function n(e,t){e[0]=t[0];e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=t[1];e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=t[2];e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},function(e,t){e.exports=n;function n(e,t){e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=t[0];e[13]=t[1];e[14]=t[2];e[15]=1;return e}},function(e,t){e.exports=n;function n(e,t){var n=Math.sin(t),r=Math.cos(t);e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=r;e[6]=n;e[7]=0;e[8]=0;e[9]=-n;e[10]=r;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},function(e,t){e.exports=n;function n(e,t){var n=Math.sin(t),r=Math.cos(t);e[0]=r;e[1]=0;e[2]=-n;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=n;e[9]=0;e[10]=r;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},function(e,t){e.exports=n;function n(e,t){var n=Math.sin(t),r=Math.cos(t);e[0]=r;e[1]=n;e[2]=0;e[3]=0;e[4]=-n;e[5]=r;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},function(e,t){e.exports=n;function n(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n+n,s=r+r,u=i+i,l=n*o,c=r*o,f=r*s,d=i*o,p=i*s,h=i*u,g=a*o,m=a*s,v=a*u;e[0]=1-f-h;e[1]=c+v;e[2]=d-m;e[3]=0;e[4]=c-v;e[5]=1-l-h;e[6]=p+g;e[7]=0;e[8]=d+m;e[9]=p-g;e[10]=1-l-f;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}},function(e,t){e.exports=n;function n(e,t,n,r,i,a,o){var s=1/(n-t),u=1/(i-r),l=1/(a-o);e[0]=a*2*s;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=a*2*u;e[6]=0;e[7]=0;e[8]=(n+t)*s;e[9]=(i+r)*u;e[10]=(o+a)*l;e[11]=-1;e[12]=0;e[13]=0;e[14]=o*a*2*l;e[15]=0;return e}},function(e,t){e.exports=n;function n(e,t,n,r,i){var a=1/Math.tan(t/2),o=1/(r-i);e[0]=a/n;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=a;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=(i+r)*o;e[11]=-1;e[12]=0;e[13]=0;e[14]=2*i*r*o;e[15]=0;return e}},function(e,t){e.exports=n;function n(e,t,n,r){var i=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),u=2/(o+s),l=2/(i+a);e[0]=u;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=l;e[6]=0;e[7]=0;e[8]=-((o-s)*u*.5);e[9]=(i-a)*l*.5;e[10]=r/(n-r);e[11]=-1;e[12]=0;e[13]=0;e[14]=r*n/(n-r);e[15]=0;return e}},function(e,t){e.exports=n;function n(e,t,n,r,i,a,o){var s=1/(t-n),u=1/(r-i),l=1/(a-o);e[0]=-2*s;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=-2*u;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=2*l;e[11]=0;e[12]=(t+n)*s;e[13]=(i+r)*u;e[14]=(o+a)*l;e[15]=1;return e}},function(e,t,n){var r=n(240);e.exports=i;function i(e,t,n,i){var a,o,s,u,l,c,f,d,p,h,g=t[0],m=t[1],v=t[2],y=i[0],b=i[1],M=i[2],x=n[0],w=n[1],A=n[2];if(Math.abs(g-x)<1e-6&&Math.abs(m-w)<1e-6&&Math.abs(v-A)<1e-6){return r(e)}f=g-x;d=m-w;p=v-A;h=1/Math.sqrt(f*f+d*d+p*p);f*=h;d*=h;p*=h;a=b*p-M*d;o=M*f-y*p;s=y*d-b*f;h=Math.sqrt(a*a+o*o+s*s);if(!h){a=0;o=0;s=0}else{h=1/h;a*=h;o*=h;s*=h}u=d*s-p*o;l=p*a-f*s;c=f*o-d*a;h=Math.sqrt(u*u+l*l+c*c);if(!h){u=0;l=0;c=0}else{h=1/h;u*=h;l*=h;c*=h}e[0]=a;e[1]=u;e[2]=f;e[3]=0;e[4]=o;e[5]=l;e[6]=d;e[7]=0;e[8]=s;e[9]=c;e[10]=p;e[11]=0;e[12]=-(a*g+o*m+s*v);e[13]=-(u*g+l*m+c*v);e[14]=-(f*g+d*m+p*v);e[15]=1;return e}},function(e,t){e.exports=n;function n(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}},function(e,t,n){"use strict";var r=n(241);var i=n(567);var a={maxCount:1e3,count:0,memo:{}};function o(e,t){a.count+=1;if(a.count>=a.maxCount){a.memo={};a.count=0}a.memo[e]=t;return t}var s={convertColor:function e(t){if(t===undefined||t===null||t.r!==undefined&&t.g!==undefined&&t.b!==undefined){return t}if(a.memo[t]!==undefined){return a.memo[t]}var n,r=t;if(typeof t==="string"){var u=t.toLowerCase();if(i.hasOwnProperty(u)){t={r:i[u][0]/255,g:i[u][1]/255,b:i[u][2]/255}}else if(t.charAt(0)==="#"){if(t.length===4||t.length===5){if(t.length===5){n=parseInt(t.slice(4),16)/15}t=parseInt(t.slice(1,4),16);t=(t&3840)*4352+(t&240)*272+(t&15)*17}else if(t.length===7||t.length===9){if(t.length===9){n=parseInt(t.slice(7),16)/255}t=parseInt(t.slice(1,7),16)}}else if(u==="transparent"){n=t=0}else if(u.indexOf("(")>=0){for(var l=0;l<s.cssColorConversions.length;l+=1){var c=s.cssColorConversions[l].regex.exec(u);if(c){t=s.cssColorConversions[l].process(u,c);return o(r,t)}}}}if(isFinite(t)){t={r:((t&16711680)>>16)/255,g:((t&65280)>>8)/255,b:(t&255)/255}}if(n!==undefined&&t&&t.r!==undefined){t.a=n}return o(r,t)},convertColorAndOpacity:function e(t,n,i){t=s.convertColor(t);if(!t||t.r===undefined||t.g===undefined||t.b===undefined){t=s.convertColor(i||{r:0,g:0,b:0})}if(!t||t.r===undefined||t.g===undefined||t.b===undefined){t={r:0,g:0,b:0}}t={r:isFinite(t.r)&&t.r>=0?t.r<=1?+t.r:1:0,g:isFinite(t.g)&&t.g>=0?t.g<=1?+t.g:1:0,b:isFinite(t.b)&&t.b>=0?t.b<=1?+t.b:1:0,a:r.isNonNullFinite(t.a)&&t.a>=0&&t.a<1?+t.a:1};if(r.isNonNullFinite(n)&&n<1){t.a=n<=0?0:t.a*n}return t},convertColorToHex:function e(t,n){var r=s.convertColor(t),i;if(!r.r&&!r.g&&!r.b){i="#000000"}else{i="#"+((1<<24)+(Math.round(r.r*255)<<16)+(Math.round(r.g*255)<<8)+Math.round(r.b*255)).toString(16).slice(1)}if(r.a!==undefined&&n&&(r.a<1||n!=="needed")){i+=(256+Math.round(r.a*255)).toString(16).slice(1)}return i},convertColorToRGBA:function e(t){var n=s.convertColor(t);if(!n){n={r:0,g:0,b:0}}if(!r.isNonNullFinite(n.a)||n.a>1){n.a=1}return"rgba("+Math.round(n.r*255)+", "+Math.round(n.g*255)+", "+Math.round(n.b*255)+", "+ +(+n.a).toFixed(5)+")"},cssAngleUnitsBase:{deg:360,grad:400,rad:2*Math.PI,turn:1},cssNumberRegex:"[+-]?(?:\\d+\\.?\\d*|\\.\\d+)(?:[eE][+-]?\\d+)?"};s.cssColorConversions=[{name:"rgb",regex:new RegExp("^\\s*rgba?"+"\\(\\s*("+s.cssNumberRegex+")\\s*(%?)\\s*"+",?\\s*("+s.cssNumberRegex+")\\s*(%?)\\s*"+",?\\s*("+s.cssNumberRegex+")\\s*(%?)\\s*"+"([/,]?\\s*("+s.cssNumberRegex+")\\s*(%?)\\s*)?"+"\\)\\s*$"),process:function e(t,n){t={r:Math.min(1,Math.max(0,+n[1]/(n[2]?100:255))),g:Math.min(1,Math.max(0,+n[3]/(n[4]?100:255))),b:Math.min(1,Math.max(0,+n[5]/(n[6]?100:255)))};if(n[7]){t.a=Math.min(1,Math.max(0,+n[8]/(n[9]?100:1)))}return t}},{name:"hsl",regex:new RegExp("^\\s*hsla?"+"\\(\\s*("+s.cssNumberRegex+")\\s*(deg|grad|rad|turn)?\\s*"+",?\\s*("+s.cssNumberRegex+")\\s*%\\s*"+",?\\s*("+s.cssNumberRegex+")\\s*%\\s*"+"([/,]?\\s*("+s.cssNumberRegex+")\\s*(%?)\\s*)?"+"\\)\\s*$"),process:function e(t,n){var r=function e(t,n,r){r=r-Math.floor(r);if(r*6<1){return t+(n-t)*r*6}if(r*6<3){return n}if(r*6<4){return t+(n-t)*(2/3-r)*6}return t};var i=+n[1]/(s.cssAngleUnitsBase[n[2]]||360),a=Math.min(1,Math.max(0,+n[3]/100)),o=Math.min(1,Math.max(0,+n[4]/100)),u=o<=.5?o*(a+1):o+a-o*a,l=o*2-u;t={r:r(l,u,i+1/3),g:r(l,u,i),b:r(l,u,i-1/3)};if(n[5]){t.a=Math.min(1,Math.max(0,+n[6]/(n[7]?100:1)))}return t}}];e.exports=s},function(e,t,n){"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(e,t,n){"use strict";var r=function e(t,n,r,i,a){var o,s=0;if(typeof n!=="boolean"){a=i;i=r;r=n;n=undefined}if(typeof i!=="function"){a=i;i=function e(){}}function u(){var e=this,u=+new Date-s,l=arguments;function c(){s=+new Date;r.apply(e,l)}function f(){o=undefined}i.apply(e,l);if(a&&!o){c()}void(o&&clearTimeout(o));if(a===undefined&&u>t){c()}else if(n!==true){o=setTimeout(a?f:c,a===undefined?t-u:t)}}return u};var i=function e(t,n,i,a){if(typeof n!=="boolean"){a=i;i=n;n=false}a=a||function(){};return r(t,false,i,a,!!n)};e.exports={throttle:r,debounce:i}},function(e,t,n){"use strict";var r=n(3);var i=n(41);var a=n(76);var o,s;e.exports={};e.exports.mockWebglRenderer=function e(t){"use strict";var i=n(41);if(t===undefined){t=true}if(i._mocked){throw new Error("webgl renderer already mocked")}var u={};var l=function e(t){u[t]=(u[t]||0)+1};var c=function e(t){return function(){l(t)}};var f=0,d=function e(t){return function(){l(t);f+=1;return f}};var p={activeTexture:c("activeTexture"),attachShader:c("attachShader"),bindAttribLocation:c("bindAttribLocation"),bindBuffer:c("bindBuffer"),bindFramebuffer:c("bindFramebuffer"),bindTexture:c("bindTexture"),blendFuncSeparate:c("blendFuncSeparate"),bufferData:c("bufferData"),bufferSubData:c("bufferSubData"),checkFramebufferStatus:function e(t){l("checkFramebufferStatus");if(t===i.GL.FRAMEBUFFER){return i.GL.FRAMEBUFFER_COMPLETE}},clear:c("clear"),clearColor:c("clearColor"),clearDepth:c("clearDepth"),compileShader:c("compileShader"),createBuffer:d("createBuffer"),createFramebuffer:c("createFramebuffer"),createProgram:d("createProgram"),createShader:d("createShader"),createTexture:d("createTexture"),deleteBuffer:c("deleteBuffer"),deleteProgram:c("deleteProgram"),deleteShader:c("deleteShader"),deleteTexture:c("deleteTexture"),detachShader:c("detachShader"),depthFunc:c("depthFunc"),disable:c("disable"),disableVertexAttribArray:c("disableVertexAttribArray"),drawArrays:c("drawArrays"),enable:c("enable"),enableVertexAttribArray:c("enableVertexAttribArray"),finish:c("finish"),getExtension:d("getExtension"),getParameter:function e(t){l("getParameter");switch(t){case i.GL.ALIASED_POINT_SIZE_RANGE:return[1,64];case i.GL.DEPTH_BITS:return 16;case i.GL.MAX_TEXTURE_SIZE:return 4096}},getProgramParameter:function e(t,n){l("getProgramParameter");if(n===i.GL.LINK_STATUS){return true}},getShaderInfoLog:function e(){l("getShaderInfoLog");return"log"},getShaderParameter:function e(t,n){l("getShaderParameter");if(n===i.GL.COMPILE_STATUS){return true}},getSupportedExtensions:function e(){l("getSupportedExtensions");return[]},getUniformLocation:d("getUniformLocation"),isEnabled:function e(t){l("isEnabled");if(t===i.GL.BLEND){return true}},linkProgram:c("linkProgram"),pixelStorei:c("pixelStorei"),shaderSource:c("shaderSource"),texImage2D:c("texImage2D"),texParameteri:c("texParameteri"),uniform1iv:c("uniform1iv"),uniform1fv:c("uniform1fv"),uniform2fv:c("uniform2fv"),uniform3fv:c("uniform3fv"),uniform4fv:c("uniform4fv"),uniformMatrix3fv:c("uniformMatrix3fv"),uniformMatrix4fv:c("uniformMatrix4fv"),useProgram:c("useProgram"),vertexAttribPointer:c("vertexAttribPointer"),vertexAttrib3fv:c("vertexAttrib3fv"),viewport:c("viewport")};o=i.renderWindow;var h=function e(){i.renderWindow=o;var t=new i.renderWindow,n;i.renderWindow=e;t._setup=function(){var e,a=t.renderers(),o=t.windowSize(),s=t.windowPosition();n=r.extend({},i.GL,p);for(e=0;e<a.length;e+=1){if(a[e].width()>o[0]||a[e].width()===0||a[e].height()>o[1]||a[e].height()===0){a[e].resize(s[0],s[1],o[0],o[1])}}return true};t.context=function(){return n};return t};i.renderWindow=h;s=a.supported;a.supported=function(){return!!t};a._maxTextureSize=4096;a._maxPointSize=64;i._mocked=true;i.mockCounts=function(){return u}};e.exports.restoreWebglRenderer=function(){if(i._mocked){i.renderWindow=o;a.supported=s;delete i._mocked;delete i.mockCounts}}},function(e,t,n){var r,i;var a=n(75);var o=n(242);var s=n(104);var u=n(3);(function(n,a){if(true){!(r=[],i=function(){return n["vgl"]=a()}.apply(t,r),i!==undefined&&(e.exports=i))}else if(typeof e==="object"&&e.exports){e.exports=a()}else{n["vgl"]=a()}})(this,function(){if(typeof e==="undefined"){var e={}}e.namespace=function(t){"use strict";var n=t.split("."),r=e,i;if(n[0]==="ogs"){n=n.slice(1)}for(i=0;i<n.length;i+=1){if(typeof r[n[i]]==="undefined"){r[n[i]]={}}r=r[n[i]]}return r};var t=e.namespace("gl");window.vgl=t;t.inherit=function(e,t){"use strict";var n=inherit.func();n.prototype=t.prototype;e.prototype=new n;e.prototype.constructor=e};t.inherit.func=function(){"use strict";return function(){}};window.inherit=t.inherit;Object.size=function(e){"use strict";var t=0,n;for(n in e){if(e.hasOwnProperty(n)){t+=1}}return t};if(!Math.log2){Math.log2=function(e){return Math.log(e)/Math.log(2)}}t.version="0.3.11";t.GL={ACTIVE_ATTRIBUTES:35721,ACTIVE_TEXTURE:34016,ACTIVE_UNIFORMS:35718,ALIASED_LINE_WIDTH_RANGE:33902,ALIASED_POINT_SIZE_RANGE:33901,ALPHA:6406,ALPHA_BITS:3413,ALWAYS:519,ARRAY_BUFFER:34962,ARRAY_BUFFER_BINDING:34964,ATTACHED_SHADERS:35717,BACK:1029,BLEND:3042,BLEND_COLOR:32773,BLEND_DST_ALPHA:32970,BLEND_DST_RGB:32968,BLEND_EQUATION:32777,BLEND_EQUATION_ALPHA:34877,BLEND_EQUATION_RGB:32777,BLEND_SRC_ALPHA:32971,BLEND_SRC_RGB:32969,BLUE_BITS:3412,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,BROWSER_DEFAULT_WEBGL:37444,BUFFER_SIZE:34660,BUFFER_USAGE:34661,BYTE:5120,CCW:2305,CLAMP_TO_EDGE:33071,COLOR_ATTACHMENT0:36064,COLOR_BUFFER_BIT:16384,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,COMPILE_STATUS:35713,COMPRESSED_TEXTURE_FORMATS:34467,CONSTANT_ALPHA:32771,CONSTANT_COLOR:32769,CONTEXT_LOST_WEBGL:37442,CULL_FACE:2884,CULL_FACE_MODE:2885,CURRENT_PROGRAM:35725,CURRENT_VERTEX_ATTRIB:34342,CW:2304,DECR:7683,DECR_WRAP:34056,DELETE_STATUS:35712,DEPTH_ATTACHMENT:36096,DEPTH_BITS:3414,DEPTH_BUFFER_BIT:256,DEPTH_CLEAR_VALUE:2931,DEPTH_COMPONENT:6402,DEPTH_COMPONENT16:33189,DEPTH_FUNC:2932,DEPTH_RANGE:2928,DEPTH_STENCIL:34041,DEPTH_STENCIL_ATTACHMENT:33306,DEPTH_TEST:2929,DEPTH_WRITEMASK:2930,DITHER:3024,DONT_CARE:4352,DST_ALPHA:772,DST_COLOR:774,DYNAMIC_DRAW:35048,ELEMENT_ARRAY_BUFFER:34963,ELEMENT_ARRAY_BUFFER_BINDING:34965,EQUAL:514,FASTEST:4353,FLOAT:5126,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,FRAGMENT_SHADER:35632,FRAMEBUFFER:36160,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_BINDING:36006,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_UNSUPPORTED:36061,FRONT:1028,FRONT_AND_BACK:1032,FRONT_FACE:2886,FUNC_ADD:32774,FUNC_REVERSE_SUBTRACT:32779,FUNC_SUBTRACT:32778,GENERATE_MIPMAP_HINT:33170,GEQUAL:518,GREATER:516,GREEN_BITS:3411,HIGH_FLOAT:36338,HIGH_INT:36341,INCR:7682,INCR_WRAP:34055,INT:5124,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,INVALID_ENUM:1280,INVALID_FRAMEBUFFER_OPERATION:1286,INVALID_OPERATION:1282,INVALID_VALUE:1281,INVERT:5386,KEEP:7680,LEQUAL:515,LESS:513,LINEAR:9729,LINEAR_MIPMAP_LINEAR:9987,LINEAR_MIPMAP_NEAREST:9985,LINES:1,LINE_LOOP:2,LINE_STRIP:3,LINE_WIDTH:2849,LINK_STATUS:35714,LOW_FLOAT:36336,LOW_INT:36339,LUMINANCE:6409,LUMINANCE_ALPHA:6410,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_CUBE_MAP_TEXTURE_SIZE:34076,MAX_FRAGMENT_UNIFORM_VECTORS:36349,MAX_RENDERBUFFER_SIZE:34024,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_TEXTURE_SIZE:3379,MAX_VARYING_VECTORS:36348,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VIEWPORT_DIMS:3386,MEDIUM_FLOAT:36337,MEDIUM_INT:36340,MIRRORED_REPEAT:33648,NEAREST:9728,NEAREST_MIPMAP_LINEAR:9986,NEAREST_MIPMAP_NEAREST:9984,NEVER:512,NICEST:4354,NONE:0,NOTEQUAL:517,NO_ERROR:0,ONE:1,ONE_MINUS_CONSTANT_ALPHA:32772,ONE_MINUS_CONSTANT_COLOR:32770,ONE_MINUS_DST_ALPHA:773,ONE_MINUS_DST_COLOR:775,ONE_MINUS_SRC_ALPHA:771,ONE_MINUS_SRC_COLOR:769,OUT_OF_MEMORY:1285,PACK_ALIGNMENT:3333,POINTS:0,POLYGON_OFFSET_FACTOR:32824,POLYGON_OFFSET_FILL:32823,POLYGON_OFFSET_UNITS:10752,RED_BITS:3410,RENDERBUFFER:36161,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_BINDING:36007,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_STENCIL_SIZE:36181,RENDERBUFFER_WIDTH:36162,RENDERER:7937,REPEAT:10497,REPLACE:7681,RGB:6407,RGB565:36194,RGB5_A1:32855,RGBA:6408,RGBA4:32854,SAMPLER_2D:35678,SAMPLER_CUBE:35680,SAMPLES:32937,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_BUFFERS:32936,SAMPLE_COVERAGE:32928,SAMPLE_COVERAGE_INVERT:32939,SAMPLE_COVERAGE_VALUE:32938,SCISSOR_BOX:3088,SCISSOR_TEST:3089,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,SHORT:5122,SRC_ALPHA:770,SRC_ALPHA_SATURATE:776,SRC_COLOR:768,STATIC_DRAW:35044,STENCIL_ATTACHMENT:36128,STENCIL_BACK_FAIL:34817,STENCIL_BACK_FUNC:34816,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,STENCIL_BITS:3415,STENCIL_BUFFER_BIT:1024,STENCIL_CLEAR_VALUE:2961,STENCIL_FAIL:2964,STENCIL_FUNC:2962,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_TEST:2960,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STREAM_DRAW:35040,SUBPIXEL_BITS:3408,TEXTURE:5890,TEXTURE0:33984,TEXTURE1:33985,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE2:33986,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE3:33987,TEXTURE30:34014,TEXTURE31:34015,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE_2D:3553,TEXTURE_BINDING_2D:32873,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP:34067,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TRIANGLES:4,TRIANGLE_FAN:6,TRIANGLE_STRIP:5,UNPACK_ALIGNMENT:3317,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,UNSIGNED_BYTE:5121,UNSIGNED_INT:5125,UNSIGNED_SHORT:5123,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,VALIDATE_STATUS:35715,VENDOR:7936,VERSION:7938,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_SHADER:35633,VIEWPORT:2978,ZERO:0};var n=0;t.timestamp=function(){"use strict";if(!(this instanceof t.timestamp)){return new t.timestamp}var e=0;this.modified=function(){n+=1;e=n};this.getMTime=function(){return e}};t.object=function(){"use strict";if(!(this instanceof t.object)){return new t.object}var e=t.timestamp();e.modified();this.modified=function(){e.modified()};this.getMTime=function(){return e.getMTime()};return this};t.event=function(){"use strict";if(!(this instanceof t.event)){return new t.event}t.object.call(this);return this};inherit(t.event,t.object);t.event.keyPress="vgl.event.keyPress";t.event.mousePress="vgl.event.mousePress";t.event.mouseRelease="vgl.event.mouseRelease";t.event.contextMenu="vgl.event.contextMenu";t.event.configure="vgl.event.configure";t.event.enable="vgl.event.enable";t.event.mouseWheel="vgl.event.mouseWheel";t.event.keyRelease="vgl.event.keyRelease";t.event.middleButtonPress="vgl.event.middleButtonPress";t.event.startInteraction="vgl.event.startInteraction";t.event.enter="vgl.event.enter";t.event.rightButtonPress="vgl.event.rightButtonPress";t.event.middleButtonRelease="vgl.event.middleButtonRelease";t.event.char="vgl.event.char";t.event.disable="vgl.event.disable";t.event.endInteraction="vgl.event.endInteraction";t.event.mouseMove="vgl.event.mouseMove";t.event.mouseOut="vgl.event.mouseOut";t.event.expose="vgl.event.expose";t.event.timer="vgl.event.timer";t.event.leftButtonPress="vgl.event.leftButtonPress";t.event.leave="vgl.event.leave";t.event.rightButtonRelease="vgl.event.rightButtonRelease";t.event.leftButtonRelease="vgl.event.leftButtonRelease";t.event.click="vgl.event.click";t.event.dblClick="vgl.event.dblClick";t.boundingObject=function(){"use strict";if(!(this instanceof t.boundingObject)){return new t.boundingObject}t.object.call(this);var e=[0,0,0,0,0,0],n=t.timestamp(),r=t.timestamp();n.modified();r.modified();this.bounds=function(){return e};this.hasValidBounds=function(e){if(e[0]===Number.MAX_VALUE||e[1]===-Number.MAX_VALUE||e[2]===Number.MAX_VALUE||e[3]===-Number.MAX_VALUE||e[4]===Number.MAX_VALUE||e[5]===-Number.MAX_VALUE){return false}return true};this.setBounds=function(t,r,i,a,o,s){if(!this.hasValidBounds([t,r,i,a,o,s])){return}e[0]=t;e[1]=r;e[2]=i;e[3]=a;e[4]=o;e[5]=s;this.modified();n.modified();return true};this.resetBounds=function(){e[0]=Number.MAX_VALUE;e[1]=-Number.MAX_VALUE;e[2]=Number.MAX_VALUE;e[3]=-Number.MAX_VALUE;e[4]=Number.MAX_VALUE;e[5]=-Number.MAX_VALUE;this.modified()};this.computeBounds=function(){};this.computeBoundsTimestamp=function(){return n};this.boundsDirtyTimestamp=function(){return r};this.resetBounds();return this};t.boundingObject.ReferenceFrame={Relative:0,Absolute:1};inherit(t.boundingObject,t.object);t.node=function(){"use strict";if(!(this instanceof t.node)){return new t.node}t.boundingObject.call(this);var e=null,n=null,r=true,i=false;this.accept=function(e){e.visit(this)};this.material=function(){return n};this.setMaterial=function(e){if(e!==n){n=e;this.modified();return true}return false};this.visible=function(){return r};this.setVisible=function(e){if(e!==r){r=e;this.modified();return true}return false};this.parent=function(){return e};this.setParent=function(t){if(t!==e){if(e!==null){e.removeChild(this)}e=t;this.modified();return true}return false};this.overlay=function(){return i};this.setOverlay=function(e){if(i!==e){i=e;this.modified();return true}return false};this.ascend=function(e){e=e};this.traverse=function(e){e=e};this.boundsModified=function(){this.boundsDirtyTimestamp().modified();if(e!==null){e.boundsModified()}};return this};inherit(t.node,t.boundingObject);t.groupNode=function(){"use strict";if(!(this instanceof t.groupNode)){return new t.groupNode}t.node.call(this);var e=[];this.b_setVisible=this.setVisible;this.setVisible=function(t){var n;if(this.b_setVisible(t)!==true){return false}for(n=0;n<e.length;n+=1){e[n].setVisible(t)}return true};this.addChild=function(n){if(n instanceof t.node){if(e.indexOf(n)===-1){n.setParent(this);e.push(n);this.boundsDirtyTimestamp().modified();return true}return false}return false};this.removeChild=function(t){if(t.parent()===this){var n=e.indexOf(t);if(n>=0){e.splice(n,1);t.setParent(null);this.boundsDirtyTimestamp().modified();return true}}};this.removeChildren=function(){while(e.length){this.removeChild(e[0])}this.modified()};this.children=function(){return e};this.hasChild=function(t){var n=0,r=false;for(n=0;n<e.length;n+=1){if(e[n]===t){r=true;break}}return r};this.accept=function(e){e.visit(this)};this.traverse=function(e){switch(e.type()){case e.UpdateVisitor:this.traverseChildrenAndUpdateBounds(e);break;case e.CullVisitor:this.traverseChildren(e);break;default:break}};this.traverseChildrenAndUpdateBounds=function(t){var n;if(this.parent()&&this.boundsDirtyTimestamp().getMTime()>this.computeBoundsTimestamp().getMTime()){this.parent().boundsDirtyTimestamp().modified()}this.computeBounds();if(t.mode()===t.TraverseAllChildren){for(n=0;n<e.length;n+=1){e[n].accept(t);this.updateBounds(e[n])}}this.computeBoundsTimestamp().modified()};this.traverseChildren=function(t){var n;if(t.mode()===t.TraverseAllChildren){for(n=0;n<e.length;n+=1){e[n].accept(t)}}};this.computeBounds=function(){var t=0;if(this.computeBoundsTimestamp().getMTime()>this.boundsDirtyTimestamp().getMTime()){return}for(t=0;t<e.length;t+=1){this.updateBounds(e[t])}};this.updateBounds=function(e){if(e.overlay()){return}e.computeBounds();var t=this.bounds(),n=e.bounds(),r=0,i=0,a;for(a=0;a<3;a+=1){r=a*2;i=a*2+1;if(n[r]<t[r]){t[r]=n[r]}if(n[i]>t[i]){t[i]=n[i]}}this.setBounds(t[0],t[1],t[2],t[3],t[4],t[5])};return this};inherit(t.groupNode,t.node);t.actor=function(){"use strict";if(!(this instanceof t.actor)){return new t.actor}t.node.call(this);var e=this,n=a.create(),r=t.boundingObject.ReferenceFrame.Relative,i=null;this.matrix=function(){return n};this.setMatrix=function(t){if(t!==n){n=t;e.modified()}};this.referenceFrame=function(){return r};this.setReferenceFrame=function(t){if(t!==r){r=t;e.modified();return true}return false};this.mapper=function(){return i};this.setMapper=function(t){if(t!==i){i=t;e.boundsModified()}};this.accept=function(e){e=e};this.ascend=function(e){e=e};this.computeLocalToWorldMatrix=function(e,t){e=e;t=t};this.computeWorldToLocalMatrix=function(e,t){e=e;t=t};this.computeBounds=function(){if(i===null||i===undefined){e.resetBounds();return}var t=e.computeBoundsTimestamp(),r,a,o,u;if(e.boundsDirtyTimestamp().getMTime()>t.getMTime()||i.boundsDirtyTimestamp().getMTime()>t.getMTime()){i.computeBounds();r=i.bounds();a=[r[0],r[2],r[4]];o=[r[1],r[3],r[5]];s.transformMat4(a,a,n);s.transformMat4(o,o,n);u=[a[0]>o[0]?o[0]:a[0],a[0]>o[0]?a[0]:o[0],a[1]>o[1]?o[1]:a[1],a[1]>o[1]?a[1]:o[1],a[2]>o[2]?o[2]:a[2],a[2]>o[2]?a[2]:o[2]];e.setBounds(u[0],u[1],u[2],u[3],u[4],u[5]);t.modified()}};return e};inherit(t.actor,t.node);t.freezeObject=function(e){"use strict";var t=Object.freeze?Object.freeze(e):undefined;if(typeof t==="undefined"){return e}return t};t.defaultValue=function(e,t){"use strict";if(typeof e!=="undefined"){return e}return t};t.defaultValue.EMPTY_OBJECT=t.freezeObject({});t.graphicsObject=function(e){"use strict";e=e;if(!(this instanceof t.graphicsObject)){return new t.graphicsObject}t.object.call(this);var n=this;this._setup=function(e){e=e;return false};this._cleanup=function(e){e=e;return false};this.bind=function(e){e=e;return false};this.undoBind=function(e){e=e;return false};this.render=function(e){e=e;return false};this.remove=function(e){n._cleanup(e)};return n};inherit(t.graphicsObject,t.object);t.geojsonReader=function(){"use strict";if(!(this instanceof t.geojsonReader)){return new t.geojsonReader}this.readScalars=function(e,n,r,i){var a=null,o=null,s=null,u=null,l=null;if(this.m_scalarFormat==="values"&&e.length===4){o=e[3];a=n.sourceData(t.vertexAttributeKeys.Scalar);if(!a){a=new t.sourceDataSf;if(this.m_scalarRange){a.setScalarRange(this.m_scalarRange[0],this.m_scalarRange[1])}if(r!==undefined){a.data().length=r}n.addSource(a)}if(r===undefined){a.pushBack(o)}else{a.insertAt(i,o)}}else if(this.m_scalarFormat==="rgb"&&e.length===6){a=n.sourceData(t.vertexAttributeKeys.Color);if(!a){a=new t.sourceDataC3fv;if(r!==undefined){a.length=r*3}n.addSource(a)}s=e[3];u=e[4];l=e[5];if(r===undefined){a.pushBack([s,u,l])}else{a.insertAt(i,[s,u,l])}}};this.readPoint=function(e){var n=new t.geometryData,r=new t.points,i=new t.sourceDataP3fv,a=new Uint16Array(1),o=null,s=null,u=null,l=null;n.addSource(i);for(l=0;l<1;l+=1){a[l]=l;o=e[0];s=e[1];u=0;if(e.length>2){u=e[2]}i.pushBack([o,s,u]);this.readScalars(e,n)}r.setIndices(a);n.addPrimitive(r);n.setName("aPoint");return n};this.readMultiPoint=function(e){var n=new t.geometryData,r=new t.points,i=new t.sourceDataP3fv,a=new Uint16Array(e.length),o=0,s=e.length,u=null,l=null,c=null,f;i.data().length=s*3;for(f=0;f<e.length;f+=1){a[f]=f;u=e[f][0];l=e[f][1];c=0;if(e[f].length>2){c=e[f][2]}i.insertAt(o,[u,l,c]);this.readScalars(e[f],n,s,o);o+=1}r.setIndices(a);n.addPrimitive(r);n.addSource(i);n.setName("manyPoints");return n};this.readLineString=function(e){var n=new t.geometryData,r=new t.lineStrip,i=new t.sourceDataP3fv,a=[],o=null,s=null,u=null,l=null;r.setIndicesPerPrimitive(e.length);for(o=0;o<e.length;o+=1){a.push(o);s=e[o][0];u=e[o][1];l=0;if(e[o].length>2){l=e[o][2]}i.pushBack([s,u,l]);this.readScalars(e[o],n)}r.setIndices(a);n.addPrimitive(r);n.addSource(i);n.setName("aLineString");return n};this.readMultiLineString=function(e){var n=new t.geometryData,r=new t.sourceDataP3fv,i=0,a=e.length*2,o=null,s=null,u=null,l=null,c=null,f=null,d=null,p=null;r.data().length=a*3;for(s=0;s<e.length;s+=1){f=[];d=new t.lineStrip;p=e[s].length;d.setIndicesPerPrimitive(p);for(o=0;o<p;o+=1){f.push(i);u=e[s][o][0];l=e[s][o][1];c=0;if(e[s][o].length>2){c=e[s][o][2]}r.insertAt(i,[u,l,c]);this.readScalars(e[s][o],n,a*2,i);i+=1}d.setIndices(f);n.addPrimitive(d)}n.setName("aMultiLineString");n.addSource(r);return n};this.readPolygon=function(e){var n=new t.geometryData,r=new t.sourceDataP3fv,i=null,a=null,o=null,s=e[0].length,u=1,l=null,c=null,f=null;for(l=0;l<s;l+=1){i=e[0][l][0];a=e[0][l][1];o=0;if(e[0][l].length>2){o=e[0][l][2]}r.pushBack([i,a,o]);this.readScalars(e[0][l],n);if(l>1){c=new Uint16Array([0,u,l]);f=new t.triangles;f.setIndices(c);n.addPrimitive(f);u=l}}n.setName("POLY");n.addSource(r);return n};this.readMultiPolygon=function(e){var n=new t.geometryData,r=new t.sourceDataP3fv,i=0,a=e.length,o=0,s=a*3,u=new t.triangles,l=[],c=null,f=null,d=null,p=null,h=null,g=null,m=null,v=null,y=null,b=false,M=0;r.data().length=a*3;for(f=0;f<a;f+=1){g=e[f][0].length;m=i;v=i+1;y=[false,false,false];for(c=0;c<g;c+=1){d=e[f][0][c][0];p=e[f][0][c][1];h=0;if(e[f][0][c].length>2){h=e[f][0][c][2]}b=false;if(d>180){b=true;d=d-360}if(c===0){y[0]=b}else{y[1+(c-1)%2]=b}r.insertAt(o,[d,p,h]);this.readScalars(e[f][0][c],n,s,o);o+=1;if(c>1){if(y[0]===y[1]&&y[1]===y[2]){l[M*3+0]=m;l[M*3+1]=v;l[M*3+2]=i;M+=1}v=i}i+=1}}u.setIndices(l);n.addPrimitive(u);n.setName("aMultiPoly");n.addSource(r);return n};this.readGJObjectInt=function(e){if(!e.hasOwnProperty("type")){return null}if(e.properties&&e.properties.ScalarFormat&&e.properties.ScalarFormat==="values"){this.m_scalarFormat="values";if(e.properties.ScalarRange){this.m_scalarRange=e.properties.ScalarRange}}if(e.properties&&e.properties.ScalarFormat&&e.properties.ScalarFormat==="rgb"){this.m_scalarFormat="rgb"}var t,n=e.type,r=null,i=null,a=null;switch(n){case"Point":t=this.readPoint(e.coordinates);break;case"MultiPoint":t=this.readMultiPoint(e.coordinates);break;case"LineString":t=this.readLineString(e.coordinates);break;case"MultiLineString":t=this.readMultiLineString(e.coordinates);break;case"Polygon":t=this.readPolygon(e.coordinates);break;case"MultiPolygon":t=this.readMultiPolygon(e.coordinates);break;case"GeometryCollection":i=[];for(a=0;a<e.geometries.length;a+=1){r=this.readGJObject(e.geometries[a]);i.push(r)}t=i;break;case"Feature":r=this.readGJObject(e.geometry);t=r;break;case"FeatureCollection":i=[];for(a=0;a<e.features.length;a+=1){r=this.readGJObject(e.features[a]);i.push(r)}t=i;break;default:console.log("Don't understand type "+n);t=null;break}return t};this.readGJObject=function(e){var t;t=this.readGJObjectInt(e);return t};this.linearizeGeoms=function(e,t){var n=null;if(Object.prototype.toString.call(t)==="[object Array]"){for(n=0;n<t.length;n+=1){this.linearizeGeoms(e,t[n])}}else{e.push(t)}};this.readGeomObject=function(e){var t,n=[];t=this.readGJObject(e);this.linearizeGeoms(n,t);return n};this.getPrimitives=function(e){if(!e){return[]}var t=JSON.parse(e),n=this.readGJObject(t),r=[];this.m_scalarFormat="none";this.m_scalarRange=null;this.linearizeGeoms(r,n);return{geoms:r,scalarFormat:this.m_scalarFormat,scalarRange:this.m_scalarRange}};return this};t.data=function(){"use strict";if(!(this instanceof t.data)){return new t.data}this.type=function(){}};t.data.raster=0;t.data.point=1;t.data.lineString=2;t.data.polygon=3;t.data.geometry=10;t.primitive=function(){"use strict";if(!(this instanceof t.primitive)){return new t.primitive}var e=0,n=0,r=0,i=null;this.indices=function(){return i};this.createIndices=function(e){void e;i=new Uint16Array};this.numberOfIndices=function(){return i.length};this.sizeInBytes=function(){return i.length*Uint16Array.BYTES_PER_ELEMENT};this.primitiveType=function(){return n};this.setPrimitiveType=function(e){n=e};this.indicesPerPrimitive=function(){return e};this.setIndicesPerPrimitive=function(t){e=t};this.indicesValueType=function(){return r};this.setIndicesValueType=function(e){r=e};this.setIndices=function(e){i=new Uint16Array(e)};return this};t.triangleStrip=function(){"use strict";if(!(this instanceof t.triangleStrip)){return new t.triangleStrip}t.primitive.call(this);this.setPrimitiveType(t.GL.TRIANGLE_STRIP);this.setIndicesValueType(t.GL.UNSIGNED_SHORT);this.setIndicesPerPrimitive(3);return this};inherit(t.triangleStrip,t.primitive);t.triangles=function(){"use strict";if(!(this instanceof t.triangles)){return new t.triangles}t.primitive.call(this);this.setPrimitiveType(t.GL.TRIANGLES);this.setIndicesValueType(t.GL.UNSIGNED_SHORT);this.setIndicesPerPrimitive(3);return this};inherit(t.triangles,t.primitive);t.lines=function(){"use strict";if(!(this instanceof t.lines)){return new t.lines}t.primitive.call(this);this.setPrimitiveType(t.GL.LINES);this.setIndicesValueType(t.GL.UNSIGNED_SHORT);this.setIndicesPerPrimitive(2);return this};inherit(t.lines,t.primitive);t.lineStrip=function(){"use strict";if(!(this instanceof t.lineStrip)){return new t.lineStrip}t.primitive.call(this);this.setPrimitiveType(t.GL.LINE_STRIP);this.setIndicesValueType(t.GL.UNSIGNED_SHORT);this.setIndicesPerPrimitive(2);return this};inherit(t.lineStrip,t.primitive);t.points=function(){"use strict";if(!(this instanceof t.points)){return new t.points}t.primitive.call(this);this.setPrimitiveType(t.GL.POINTS);this.setIndicesValueType(t.GL.UNSIGNED_SHORT);this.setIndicesPerPrimitive(1);return this};inherit(t.points,t.primitive);t.vertexDataP3f=function(){"use strict";if(!(this instanceof t.vertexDataP3f)){return new t.vertexDataP3f}this.m_position=[];return this};t.vertexDataP3N3f=function(){"use strict";if(!(this instanceof t.vertexDataP3N3f)){return new t.vertexDataP3N3f}this.m_position=[];this.m_normal=[];return this};t.vertexDataP3T3f=function(){"use strict";if(!(this instanceof t.vertexDataP3T3f)){return new t.vertexDataP3T3f}this.m_position=[];this.m_texCoordinate=[];return this};t.sourceData=function(e){"use strict";if(!(this instanceof t.sourceData)){return new t.sourceData(e)}e=e||{};var n={},r=[],i=e.name||"Source "+(new Date).toISOString(),a=function(){this.m_numberOfComponents=0;this.m_dataType=0;this.m_dataTypeSize=0;this.m_normalized=false;this.m_stride=0;this.m_offset=0};this.data=function(){return r};this.getData=function(){return this.data()};this.dataToFloat32Array=function(){if(!(r instanceof Float32Array)){r=new Float32Array(r)}return r};this.setData=function(e){if(!(e instanceof Array)&&!(e instanceof Float32Array)){console.log("[error] Requires array");return}if(e instanceof Float32Array){r=e}else{r=e.slice(0)}};this.addAttribute=function(e,t,r,i,o,s,u){if(!n.hasOwnProperty(e)){var l=new a;l.m_dataType=t;l.m_dataTypeSize=r;l.m_offset=i;l.m_stride=o;l.m_numberOfComponents=s;l.m_normalized=u;n[e]=l}};this.sizeOfArray=function(){return Object.size(r)};this.lengthOfArray=function(){return r.length};this.sizeInBytes=function(){var e=0,t=this.keys(),n;for(n=0;n<t.length;n+=1){e+=this.attributeNumberOfComponents(t[n])*this.sizeOfAttributeDataType(t[n])}e*=this.sizeOfArray();return e};this.hasKey=function(e){return n.hasOwnProperty(e)};this.keys=function(){return Object.keys(n)};this.numberOfAttributes=function(){return Object.size(n)};this.attributeNumberOfComponents=function(e){if(n.hasOwnProperty(e)){return n[e].m_numberOfComponents}return 0};this.normalized=function(e){if(n.hasOwnProperty(e)){return n[e].m_normalized}return false};this.sizeOfAttributeDataType=function(e){if(n.hasOwnProperty(e)){return n[e].m_dataTypeSize}return 0};this.attributeDataType=function(e){if(n.hasOwnProperty(e)){return n[e].m_dataType}return undefined};this.attributeOffset=function(e){if(n.hasOwnProperty(e)){return n[e].m_offset}return 0};this.attributeStride=function(e){if(n.hasOwnProperty(e)){return n[e].m_stride}return 0};this.pushBack=function(e){void e};this.insert=function(e){var t;if(!r.length&&e.length&&e instanceof Float32Array){r=e;return}if(!r.slice&&(r.length||!e.slice)){r=Array.prototype.slice.call(r)}if(!e.length){r[r.length]=e}else{if(!r.length&&e.slice){r=e.slice(0)}else{for(t=0;t<e.length;t+=1){r[r.length]=e[t]}}}};this.insertAt=function(e,t){var n;if(!t.length){r[e]=t}else{for(n=0;n<t.length;n+=1){r[e*t.length+n]=t[n]}}};this.name=function(){return i};this.setName=function(e){i=e};return this};t.sourceDataAnyfv=function(e,n,r){"use strict";if(!(this instanceof t.sourceDataAnyfv)){return new t.sourceDataAnyfv(e,n,r)}t.sourceData.call(this,r);this.addAttribute(n,t.GL.FLOAT,4,0,e*4,e,false);this.pushBack=function(e){this.insert(e)};return this};inherit(t.sourceDataAnyfv,t.sourceData);t.sourceDataP3T3f=function(e){"use strict";if(!(this instanceof t.sourceDataP3T3f)){return new t.sourceDataP3T3f(e)}t.sourceData.call(this,e);this.addAttribute(t.vertexAttributeKeys.Position,t.GL.FLOAT,4,0,6*4,3,false);this.addAttribute(t.vertexAttributeKeys.TextureCoordinate,t.GL.FLOAT,4,12,6*4,3,false);this.pushBack=function(e){this.insert(e.m_position);this.insert(e.m_texCoordinate)};return this};inherit(t.sourceDataP3T3f,t.sourceData);t.sourceDataP3N3f=function(e){"use strict";if(!(this instanceof t.sourceDataP3N3f)){return new t.sourceDataP3N3f(e)}t.sourceData.call(this,e);this.addAttribute(t.vertexAttributeKeys.Position,t.GL.FLOAT,4,0,6*4,3,false);this.addAttribute(t.vertexAttributeKeys.Normal,t.GL.FLOAT,4,12,6*4,3,false);this.pushBack=function(e){this.insert(e.m_position);this.insert(e.m_normal)};return this};inherit(t.sourceDataP3N3f,t.sourceData);t.sourceDataP3fv=function(e){"use strict";if(!(this instanceof t.sourceDataP3fv)){return new t.sourceDataP3fv(e)}t.sourceData.call(this,e);this.addAttribute(t.vertexAttributeKeys.Position,t.GL.FLOAT,4,0,3*4,3,false);this.pushBack=function(e){this.insert(e)};return this};inherit(t.sourceDataP3fv,t.sourceData);t.sourceDataT2fv=function(e){"use strict";if(!(this instanceof t.sourceDataT2fv)){return new t.sourceDataT2fv(e)}t.sourceData.call(this,e);this.addAttribute(t.vertexAttributeKeys.TextureCoordinate,t.GL.FLOAT,4,0,2*4,2,false);this.pushBack=function(e){this.insert(e)};return this};inherit(t.sourceDataT2fv,t.sourceData);t.sourceDataC3fv=function(e){"use strict";if(!(this instanceof t.sourceDataC3fv)){return new t.sourceDataC3fv(e)}t.sourceData.call(this,e);this.addAttribute(t.vertexAttributeKeys.Color,t.GL.FLOAT,4,0,3*4,3,false);this.pushBack=function(e){this.insert(e)};return this};inherit(t.sourceDataC3fv,t.sourceData);t.sourceDataSf=function(e){"use strict";if(!(this instanceof t.sourceDataSf)){return new t.sourceDataSf(e)}var n=null,r=null,i=null,a=null;t.sourceData.call(this,e);this.addAttribute(t.vertexAttributeKeys.Scalar,t.GL.FLOAT,4,0,4,1,false);this.pushBack=function(e){if(r===null||e>r){r=e}if(n===null||e<n){n=e}this.data()[this.data().length]=e};this.insertAt=function(e,t){if(r===null||t>r){r=t}if(n===null||t<n){n=t}this.data()[e]=t};this.scalarRange=function(){if(i===null||a===null){return[n,r]}return[i,a]};this.setScalarRange=function(e,t){i=e;a=t};return this};inherit(t.sourceDataSf,t.sourceData);t.sourceDataDf=function(e){"use strict";if(!(this instanceof t.sourceDataDf)){return new t.sourceDataDf(e)}t.sourceData.call(this,e);this.addAttribute(t.vertexAttributeKeys.Scalar,t.GL.FLOAT,4,0,4,1,false);this.pushBack=function(e){this.data()[this.data().length]=e};this.insertAt=function(e,t){this.data()[e]=t};return this};inherit(t.sourceDataDf,t.sourceData);t.geometryData=function(){"use strict";if(!(this instanceof t.geometryData)){return new t.geometryData}t.data.call(this);var e="",n=[],r=[],i=[0,0,0,0,0,0],a=t.timestamp(),o=t.timestamp();this.type=function(){return t.data.geometry};this.name=function(){return e};this.setName=function(t){e=t};this.addSource=function(e,n){if(n!==undefined){e.setName(n)}if(r.indexOf(e)===-1){r.push(e);if(e.hasKey(t.vertexAttributeKeys.Position)){o.modified()}return true}return false};this.source=function(e){if(e<r.length){return r[e]}return 0};this.sourceByName=function(e){for(var t=0;t<r.length;t+=1){if(r[t].name()===e){return r[t]}}return 0};this.numberOfSources=function(){return r.length};this.sourceData=function(e){var t;for(t=0;t<r.length;t+=1){if(r[t].hasKey(e)){return r[t]}}return null};this.addPrimitive=function(e){n.push(e);return true};this.primitive=function(e){if(e<n.length){return n[e]}return null};this.numberOfPrimitives=function(){return n.length};this.bounds=function(){if(o.getMTime()>a.getMTime()){this.computeBounds()}return i};this.boundsDirty=function(e){if(e){o.modified()}return o.getMTime()>a.getMTime()};this.resetBounds=function(){i[0]=0;i[1]=0;i[2]=0;i[3]=0;i[4]=0;i[5]=0};this.setBounds=function(e,t,n,r,o,s){i[0]=e;i[1]=t;i[2]=n;i[3]=r;i[4]=o;i[5]=s;a.modified();return true};this.computeBounds=function(){if(o.getMTime()>a.getMTime()){var e=t.vertexAttributeKeys.Position,n=this.sourceData(e),r=n.data(),s=n.attributeNumberOfComponents(e),u=n.attributeStride(e),l=n.attributeOffset(e),c=n.sizeOfAttributeDataType(e),f=r.length,d,p,h,g,m,v=null,y;u/=c;l/=c;this.resetBounds();for(d=0;d<s;d+=1){p=d*2;h=d*2+1;if(f){g=m=i[h]=r[l+d]}else{g=m=0}for(y=l+u+d;y<f;y+=u){v=r[y];if(v>g){g=v}if(v<m){m=v}}i[p]=m;i[h]=g}a.modified()}};this.findClosestVertex=function(e){var n=t.vertexAttributeKeys.Position,r=this.sourceData(n),i=r.sizeOfAttributeDataType(n),a=r.attributeNumberOfComponents(n),o=r.data(),s=r.attributeStride(n)/i,u=r.attributeOffset(n)/i,l=Number.MAX_VALUE,c=null,f,d,p,h,g,m,v;if(a!==3){console.log("[warning] Find closest vertex assumes three"+"component vertex ")}if(!e.z){e={x:e.x,y:e.y,z:0}}for(f=u,v=0;f<o.length;f+=s,v+=1){d=[o[f],o[f+1],o[f+2]];p=d[0]-e.x;h=d[1]-e.y;g=d[2]-e.z;m=Math.sqrt(p*p+h*h+g*g);if(m<l){l=m;c=v}}return c};this.getPosition=function(e){var n=t.vertexAttributeKeys.Position,r=this.sourceData(n),i=r.sizeOfAttributeDataType(n),a=r.attributeNumberOfComponents(n),o=r.data(),s=r.attributeStride(n)/i,u=r.attributeOffset(n)/i;if(a!==3){console.log("[warning] getPosition assumes three component data")}return[o[u+e*s],o[u+e*s+1],o[u+e*s+2]]};this.getScalar=function(e){var n=t.vertexAttributeKeys.Scalar,r=this.sourceData(n),i,a,o,s;if(!r){return null}i=r.sizeOfAttributeDataType(n);a=r.data();o=r.attributeStride(n)/i;s=r.attributeOffset(n)/i;if(e*o+s>=a.length){console.log("access out of bounds in getScalar")}return a[e*o+s]};return this};inherit(t.geometryData,t.data);t.mapper=function(e){"use strict";if(!(this instanceof t.mapper)){return new t.mapper(e)}t.boundingObject.call(this);e=e||{};var n=[0,1,1],r=null,i=[],a={},o=e.dynamicDraw===undefined?false:e.dynamicDraw,s=t.timestamp(),u=null,l=this;this.deleteVertexBufferObjects=function(e){var t;var n=u;if(e){n=e.m_context}if(n){for(t=0;t<i.length;t+=1){n.deleteBuffer(i[t])}}};this._cleanup=function(e){l.deleteVertexBufferObjects(e);f(e);l.modified()};function c(e){if(r){if(e){u=e.m_context}var n=r.numberOfSources(),l,c,f,d=null,p,h,g,m;for(l=0;l<n;l+=1){d=u.createBuffer();u.bindBuffer(t.GL.ARRAY_BUFFER,d);m=r.source(l).data();if(!(m instanceof Float32Array)){m=new Float32Array(m)}u.bufferData(t.GL.ARRAY_BUFFER,m,o?t.GL.DYNAMIC_DRAW:t.GL.STATIC_DRAW);p=r.source(l).keys();h=[];for(c=0;c<p.length;c+=1){h.push(p[c])}a[l]=h;i[l]=d}g=r.numberOfPrimitives();for(f=0;f<g;f+=1){d=u.createBuffer();u.bindBuffer(t.GL.ARRAY_BUFFER,d);u.bufferData(t.GL.ARRAY_BUFFER,r.primitive(f).indices(),t.GL.STATIC_DRAW);i[l]=d;l+=1}s.modified()}}function f(e){void e;a={};i=[]}function d(e){l.deleteVertexBufferObjects(e);f(e);c(e)}this.computeBounds=function(){if(r===null||typeof r==="undefined"){this.resetBounds();return}var e=this.computeBoundsTimestamp(),t=this.boundsDirtyTimestamp(),n=null;if(t.getMTime()>e.getMTime()){n=r.bounds();this.setBounds(n[0],n[1],n[2],n[3],n[4],n[5]);e.modified()}};this.color=function(){return n};this.setColor=function(e,t,r){n[0]=e;n[1]=t;n[2]=r;this.modified()};this.geometryData=function(){return r};this.setGeometryData=function(e){if(r!==e){r=e;this.modified();this.boundsDirtyTimestamp().modified()}};this.updateSourceBuffer=function(e,n,a){if(a){u=a.m_context}if(!u){return false}var o=-1;for(var s=0;s<r.numberOfSources();s+=1){if(r.source(s).name()===e){o=s;break}}if(o<0||o>=i.length){return false}if(!n){n=r.source(s).dataToFloat32Array()}u.bindBuffer(t.GL.ARRAY_BUFFER,i[o]);if(n instanceof Float32Array){u.bufferSubData(t.GL.ARRAY_BUFFER,0,n)}else{u.bufferSubData(t.GL.ARRAY_BUFFER,0,new Float32Array(n))}return true};this.getSourceBuffer=function(e){var t=r.sourceByName(e);if(!t){return new Float32Array}return t.dataToFloat32Array()};this.render=function(e,n){if(this.getMTime()>s.getMTime()||e.m_contextChanged){d(e)}u=e.m_context;u.vertexAttrib3fv(t.vertexAttributeKeys.Color,this.color());var o=0,l=0,c,f=null,p=null;for(c in a){if(a.hasOwnProperty(c)){u.bindBuffer(t.GL.ARRAY_BUFFER,i[o]);for(l=0;l<a[c].length;l+=1){e.m_material.bindVertexData(e,a[c][l])}o+=1}}f=r.numberOfPrimitives();for(l=0;l<f;l+=1,o+=1){p=r.primitive(l);if(!p.numberOfIndices()){continue}u.bindBuffer(t.GL.ARRAY_BUFFER,i[o]);switch(p.primitiveType()){case t.GL.POINTS:u.drawArrays(t.GL.POINTS,0,p.numberOfIndices());break;case t.GL.LINES:u.drawArrays(t.GL.LINES,0,p.numberOfIndices());break;case t.GL.LINE_STRIP:u.drawArrays(t.GL.LINE_STRIP,0,p.numberOfIndices());break;case t.GL.TRIANGLES:u.drawArrays(t.GL.TRIANGLES,0,p.numberOfIndices());break;case t.GL.TRIANGLE_STRIP:u.drawArrays(t.GL.TRIANGLE_STRIP,0,p.numberOfIndices());break}u.bindBuffer(t.GL.ARRAY_BUFFER,null)}if(!n){this.undoBindVertexData(e)}};this.undoBindVertexData=function(e){var t,n;for(t in a){if(a.hasOwnProperty(t)){for(n=0;n<a[t].length;n+=1){e.m_material.undoBindVertexData(e,a[t][n])}}}};return this};inherit(t.mapper,t.boundingObject);t.groupMapper=function(){"use strict";if(!(this instanceof t.groupMapper)){return new t.groupMapper}t.mapper.call(this);var e=t.timestamp(),n=[],r=[];this.geometryData=function(e){if(e!==undefined&&e<r.length){return r[e]}if(r.length>0){return r[0]}return null};this.setGeometryData=function(e){if(r.length===1){if(r[0]===e){return}}r=[];r.push(e);this.modified()};this.geometryDataArray=function(){return r};this.setGeometryDataArray=function(e){if(e instanceof Array){if(r!==e){r=[];r=e;this.modified();return true}}else{console.log("[error] Requies array of geometry data")}return false};this.computeBounds=function(){if(r===null||r===undefined){this.resetBounds();return}var e=this.computeBoundsTimestamp(),t=this.boundsDirtyTimestamp(),n=this.bounds(),i=null,a=null;if(t.getMTime()>e.getMTime()){for(a=0;a<r.length;a+=1){i=r[a].bounds();if(n[0]>i[0]){n[0]=i[0]}if(n[1]<i[1]){n[1]=i[1]}if(n[2]>i[2]){n[2]=i[2]}if(n[3]<i[3]){n[3]=i[3]}if(n[4]>i[4]){n[4]=i[4]}if(n[5]<i[5]){n[5]=i[5]}}this.modified();e.modified()}};this.render=function(i){var a=null;if(this.getMTime()>e.getMTime()){for(a=0;a<r.length;a+=1){n.push(t.mapper());n[a].setGeometryData(r[a])}e.modified()}for(a=0;a<n.length;a+=1){n[a].render(i)}};return this};inherit(t.groupMapper,t.mapper);t.materialAttributeType={Undefined:0,ShaderProgram:1,Texture:2,Blend:3,Depth:4};t.materialAttribute=function(e){"use strict";if(!(this instanceof t.materialAttribute)){return new t.materialAttribute(e)}t.graphicsObject.call(this);var n=this,r=e,i=true;this.type=function(){return r};this.enabled=function(){return i};this.bindVertexData=function(e,t){e=e;t=t;return false};this.undoBindVertexData=function(e,t){e=e;t=t;return false};return n};inherit(t.materialAttribute,t.graphicsObject);t.blendFunction=function(e,n){"use strict";if(!(this instanceof t.blendFunction)){return new t.blendFunction(e,n)}var r=e,i=n;this.apply=function(e){e.m_context.blendFuncSeparate(r,i,t.GL.ONE,t.GL.ONE_MINUS_SRC_ALPHA)};return this};t.blend=function(){"use strict";if(!(this instanceof t.blend)){return new t.blend}t.materialAttribute.call(this,t.materialAttributeType.Blend);var e=false,n=t.blendFunction(t.GL.SRC_ALPHA,t.GL.ONE_MINUS_SRC_ALPHA);this.bind=function(r){e=r.m_context.isEnabled(t.GL.BLEND);if(this.enabled()){r.m_context.enable(t.GL.BLEND);n.apply(r)}else{r.m_context.disable(t.GL.BLEND)}return true};this.undoBind=function(n){if(e){n.m_context.enable(t.GL.BLEND)}else{n.m_context.disable(t.GL.BLEND)}return true};return this};inherit(t.blend,t.materialAttribute);t.material=function(){"use strict";if(!(this instanceof t.material)){return new t.material}t.graphicsObject.call(this);var e=this,n=new t.shaderProgram,r=100,i={},a={};this.binNumber=function(){return r};this.setBinNumber=function(t){r=t;e.modified()};this.exists=function(e){if(e.type()===t.materialAttributeType.Texture){return i.hasOwnProperty(e.textureUnit())}return a.hasOwnProperty(e.type())};this.uniform=function(e){return n?n.uniform(e):null};this.attribute=function(e,n){if(a.hasOwnProperty(e)){return a[e]}if(e===t.materialAttributeType.Texture&&i.hasOwnProperty(n)){return i[n]}return null};this.setAttribute=function(r){if(r.type()===t.materialAttributeType.Texture){if(i[r.textureUnit()]===r){return false}i[r.textureUnit()]=r;e.modified();return true}if(a[r.type()]===r){return false}if(r.type()===t.materialAttributeType.ShaderProgram){n=r}a[r.type()]=r;e.modified();return true};this.addAttribute=function(r){if(e.exists(r)){return false}if(r.type()===t.materialAttributeType.Texture){i[r.textureUnit()]=r;e.modified();return true}if(r.type()===t.materialAttributeType.ShaderProgram){n=r}a[r.type()]=r;e.modified();return true};this.shaderProgram=function(){return n};this._setup=function(e){void e;return false};this._cleanup=function(t){for(var r in a){if(a.hasOwnProperty(r)){a[r]._cleanup(t)}}for(r in i){if(i.hasOwnProperty(r)){i[r]._cleanup(t)}}n._cleanup(t);e.modified()};this.bind=function(e){var t=null;n.bind(e);for(t in a){if(a.hasOwnProperty(t)){if(a[t]!==n){a[t].bind(e)}}}for(t in i){if(i.hasOwnProperty(t)){i[t].bind(e)}}};this.undoBind=function(e){var t=null;for(t in a){if(a.hasOwnProperty(t)){a[t].undoBind(e)}}for(t in i){if(i.hasOwnProperty(t)){i[t].undoBind(e)}}};this.bindVertexData=function(e,t){var n=null;for(n in a){if(a.hasOwnProperty(n)){a[n].bindVertexData(e,t)}}};this.undoBindVertexData=function(e,t){var n=null;for(n in a){if(a.hasOwnProperty(n)){a[n].undoBindVertexData(e,t)}}};return e};t.material.RenderBin={Base:0,Default:100,Opaque:100,Transparent:1e3,Overlay:1e4};inherit(t.material,t.graphicsObject);t.renderState=function(){"use strict";this.m_context=null;this.m_modelViewMatrix=a.create();this.m_normalMatrix=a.create();this.m_projectionMatrix=null;this.m_material=null;this.m_mapper=null};t.renderer=function(e){"use strict";if(!(this instanceof t.renderer)){return new t.renderer(e)}t.graphicsObject.call(this);e=e||{};var n=this;n.m_renderWindow=null;n.m_contextChanged=false;n.m_sceneRoot=new t.groupNode;n.m_camera=new t.camera(e);n.m_nearClippingPlaneTolerance=null;n.m_x=0;n.m_y=0;n.m_width=0;n.m_height=0;n.m_resizable=true;n.m_resetScene=true;n.m_layer=0;n.m_renderPasses=null;n.m_resetClippingRange=true;n.m_depthBits=null;n.m_camera.addChild(n.m_sceneRoot);this.width=function(){return n.m_width};this.height=function(){return n.m_height};this.layer=function(){return n.m_layer};this.setLayer=function(e){n.m_layer=e;n.modified()};this.isResizable=function(){return n.m_resizable};this.setResizable=function(e){n.m_resizable=e};this.renderWindow=function(){return n.m_renderWindow};this.setRenderWindow=function(e){if(n.m_renderWindow!==e){if(n.m_renderWindow){n.m_renderWindow.removeRenderer(this)}n.m_renderWindow=e;n.m_contextChanged=true;n.modified()}};this.backgroundColor=function(){return n.m_camera.clearColor()};this.setBackgroundColor=function(e,t,r,i){n.m_camera.setClearColor(e,t,r,i);n.modified()};this.sceneRoot=function(){return n.m_sceneRoot};this.camera=function(){return n.m_camera};this.render=function(){var e,r,i,o=null,s=[],u=a.create(),l=null;r=new t.renderState;r.m_renderer=n;r.m_context=n.renderWindow().context();if(!n.m_depthBits||n.m_contextChanged){n.m_depthBits=r.m_context.getParameter(t.GL.DEPTH_BITS)}r.m_contextChanged=n.m_contextChanged;if(n.m_renderPasses){for(e=0;e<n.m_renderPasses.length;e+=1){if(n.m_renderPasses[e].render(r)){console.log("returning");n.m_renderPasses[e].remove(r);return}n.m_renderPasses[e].remove(r)}}r.m_context.enable(t.GL.DEPTH_TEST);r.m_context.depthFunc(t.GL.LEQUAL);if(n.m_camera.clearMask()&t.GL.COLOR_BUFFER_BIT){l=n.m_camera.clearColor();r.m_context.clearColor(l[0],l[1],l[2],l[3])}if(n.m_camera.clearMask()&t.GL.DEPTH_BUFFER_BIT){r.m_context.clearDepth(n.m_camera.clearDepth())}r.m_context.clear(n.m_camera.clearMask());r.m_context.viewport(n.m_x,n.m_y,n.m_width,n.m_height);i=n.m_sceneRoot.children();if(i.length>0&&n.m_resetScene){n.resetCamera();n.m_resetScene=false}for(e=0;e<i.length;e+=1){o=i[e];o.computeBounds();if(o.visible()&&o.material().binNumber()>=0){s.push([o.material().binNumber(),o])}}s.sort(function(e,t){return e[0]-t[0]});for(e=0;e<s.length;e+=1){o=s[e][1];if(o.referenceFrame()===t.boundingObject.ReferenceFrame.Relative){var c=n.m_camera.viewMatrix();if(c instanceof Array){r.m_modelViewMatrix=new Array(16)}a.multiply(r.m_modelViewMatrix,c,o.matrix());r.m_projectionMatrix=n.m_camera.projectionMatrix();r.m_modelViewAlignment=n.m_camera.viewAlignment()}else{r.m_modelViewMatrix=o.matrix();r.m_modelViewAlignment=null;r.m_projectionMatrix=a.create();a.ortho(r.m_projectionMatrix,0,n.m_width,0,n.m_height,-1,1)}a.invert(u,r.m_modelViewMatrix);a.transpose(r.m_normalMatrix,u);r.m_material=o.material();r.m_mapper=o.mapper();r.m_material.bind(r);r.m_mapper.render(r);r.m_material.undoBind(r)}r.m_context.finish();n.m_contextChanged=false;n.m_lastRenderState=r};this.resetCamera=function(){n.m_camera.computeBounds();var e=n.m_camera.directionOfProjection(),t=n.m_camera.bounds(),r=[(t[0]+t[1])/2,(t[2]+t[3])/2,(t[4]+t[5])/2],i=[t[1]-t[0],t[3]-t[2],t[5]-t[4]],a=0,o=n.m_camera.viewAspect(),u=n.m_camera.viewAngle(),l=null,c=null;if(i[0]>i[1]){if(i[0]>i[2]){a=i[0]/2}else{a=i[2]/2}}else{if(i[1]>i[2]){a=i[1]/2}else{a=i[2]/2}}if(o>=1){u=2*Math.atan(Math.tan(u*.5)/o)}else{u=2*Math.atan(Math.tan(u*.5)*o)}l=a/Math.sin(u*.5);c=n.m_camera.viewUpDirection();if(Math.abs(s.dot(c,e))>.999){n.m_camera.setViewUpDirection(-c[2],c[0],c[1])}n.m_camera.setFocalPoint(r[0],r[1],r[2]);n.m_camera.setPosition(r[0]+l*-e[0],r[1]+l*-e[1],r[2]+l*-e[2]);n.resetCameraClippingRange(t)};this.hasValidBounds=function(e){if(e[0]===Number.MAX_VALUE||e[1]===-Number.MAX_VALUE||e[2]===Number.MAX_VALUE||e[3]===-Number.MAX_VALUE||e[4]===Number.MAX_VALUE||e[5]===-Number.MAX_VALUE){return false}return true};this.resetCameraClippingRange=function(e){if(typeof e==="undefined"){n.m_camera.computeBounds();e=n.m_camera.bounds()}if(!n.hasValidBounds(e)){return}var t=n.m_camera.viewPlaneNormal(),r=n.m_camera.position(),i=-t[0],a=-t[1],o=-t[2],s=-(i*r[0]+a*r[1]+o*r[2]),u=vec2.create(),l=null,c=null,f=null,d=null;if(!n.m_resetClippingRange){return}u[0]=i*e[0]+a*e[2]+o*e[4]+s;u[1]=1e-18;for(d=0;d<2;d+=1){for(f=0;f<2;f+=1){for(c=0;c<2;c+=1){l=i*e[c]+a*e[2+f]+o*e[4+d]+s;u[0]=l<u[0]?l:u[0];u[1]=l>u[1]?l:u[1]}}}if(u[0]<0){u[0]=0}u[0]=.99*u[0]-(u[1]-u[0])*.5;u[1]=1.01*u[1]+(u[1]-u[0])*.5;u[0]=u[0]>=u[1]?.01*u[1]:u[0];if(!n.m_nearClippingPlaneTolerance){n.m_nearClippingPlaneTolerance=.01;if(n.m_depthBits&&n.m_depthBits>16){n.m_nearClippingPlaneTolerance=.001}}if(u[0]<n.m_nearClippingPlaneTolerance*u[1]){u[0]=n.m_nearClippingPlaneTolerance*u[1]}n.m_camera.setClippingRange(u[0],u[1])};this.resize=function(e,t){if(!e||!t){return}n.positionAndResize(n.m_x,n.m_y,e,t)};this.positionAndResize=function(e,t,r,i){var a;if(e<0||t<0||r<=0||i<=0){console.log("[error] Invalid position and resize values",e,t,r,i);return}if(n.m_resizable){n.m_width=r;n.m_height=i;n.m_camera.setViewAspect(r/i);n.m_camera.setParallelExtents({width:r,height:i});n.modified()}if(n.m_renderPasses){for(a=0;a<n.m_renderPasses.length;a+=1){n.m_renderPasses[a].resize(r,i);n.m_renderPasses[a].renderer().positionAndResize(e,t,r,i)}}};this.addActor=function(e){if(e instanceof t.actor){n.m_sceneRoot.addChild(e);n.modified();return true}return false};this.hasActor=function(e){return n.m_sceneRoot.hasChild(e)};this.addActors=function(e){var t=null;if(e instanceof Array){for(t=0;t<e.length;t+=1){n.m_sceneRoot.addChild(e[t])}n.modified()}};this.removeActor=function(e){if(n.m_sceneRoot.children().indexOf(e)!==-1){if(n.m_lastRenderState){if(e.mapper()){e.mapper()._cleanup(n.m_lastRenderState)}if(e.material()){e.material()._cleanup(n.m_lastRenderState)}}e.modified();n.m_sceneRoot.removeChild(e);n.modified();return true}return false};this.removeActors=function(e){if(!(e instanceof Array)){return false}var t;for(t=0;t<e.length;t+=1){n.m_sceneRoot.removeChild(e[t])}n.modified();return true};this.removeAllActors=function(){return n.m_sceneRoot.removeChildren()};this.worldToDisplay=function(e,t,n,r,i){var s=a.create(),u=null,l=null,c=null,f=null,d=null;a.multiply(s,n,t);d=o.create();o.transformMat4(d,e,s);if(d[3]!==0){d[0]=d[0]/d[3];d[1]=d[1]/d[3];d[2]=d[2]/d[3];d[3]=1}u=(d[0]+1)/2*r;l=(1-d[1])/2*i;c=d[2];f=d[3];return o.fromValues(u,l,c,f)};this.displayToWorld=function(e,t,n,r,i){var s=2*e[0]/r-1,u=-(2*e[1]/i)+1,l=e[2],c=a.create(),f=null;a.multiply(c,n,t);a.invert(c,c);f=o.fromValues(s,u,l,1);o.transformMat4(f,f,c);if(f[3]!==0){f[0]=f[0]/f[3];f[1]=f[1]/f[3];f[2]=f[2]/f[3];f[3]=1}return f};this.focusDisplayPoint=function(){var e=n.m_camera.focalPoint(),t=o.fromValues(e[0],e[1],e[2],1);return n.worldToDisplay(t,n.m_camera.viewMatrix(),n.m_camera.projectionMatrix(),n.m_width,n.m_height)};this.resetScene=function(){return n.m_resetScene};this.setResetScene=function(e){if(n.m_resetScene!==e){n.m_resetScene=e;n.modified()}};this.resetClippingRange=function(){return n.m_resetClippingRange};this.setResetClippingRange=function(e){if(n.m_resetClippingRange!==e){n.m_resetClippingRange=e;n.modified()}};this.addRenderPass=function(e){var t;if(n.m_renderPasses){for(t=0;t<n.m_renderPasses.length;t+=1){if(e===n.m_renderPasses[t]){return}}}n.m_renderPasses=[];n.m_renderPasses.push(e)};this.removeRenderPass=function(e){e=e};this._cleanup=function(e){var t=n.m_sceneRoot.children();for(var r=0;r<t.length;r+=1){var i=t[r];i.material()._cleanup(e);i.mapper()._cleanup(e)}n.m_sceneRoot.removeChildren();n.modified()};return n};inherit(t.renderer,t.graphicsObject);t.renderWindow=function(e){"use strict";if(!(this instanceof t.renderWindow)){return new t.renderWindow(e)}t.graphicsObject.call(this);var n=this,r=0,i=0,a=400,s=400,u=e,l=null,c=[],f=null;this.windowSize=function(){return[a,s]};this.setWindowSize=function(e,t){if(a!==e||s!==t){a=e;s=t;n.modified();return true}return false};this.windowPosition=function(){return[r,i]};this.setWindowPosition=function(e,t){if(r!==e||i!==t){r=e;i=t;n.modified();return true}return false};this.renderers=function(){return c};this.activeRenderer=function(){return l};this.addRenderer=function(e){if(n.hasRenderer(e)===false){c.push(e);e.setRenderWindow(n);if(l===null){l=e}if(e.layer()!==0){e.camera().setClearMask(t.GL.DepthBufferBit)}n.modified();return true}return false};this.removeRenderer=function(e){var t=c.indexOf(e);if(t!==-1){if(l===e){l=null}c.splice(t,1);n.modified();return true}return false};this.getRenderer=function(e){if(e<c.length){return c[e]}console.log("[WARNING] Out of index array");return null};this.hasRenderer=function(e){var t;for(t=0;t<c.length;t+=1){if(e===c[t]){return true}}return false};this.resize=function(e,t){n.positionAndResize(r,i,e,t);n.modified()};this.positionAndResize=function(e,t,o,u){r=e;i=t;a=o;s=u;var l;for(l=0;l<c.length;l+=1){c[l].positionAndResize(r,i,a,s)}n.modified()};this._setup=function(e){e=e;f=null;try{f=u.getContext("webgl")||u.getContext("experimental-webgl");var t;for(t=0;t<c.length;t+=1){if(c[t].width()>a||c[t].width()===0||c[t].height()>s||c[t].height()===0){c[t].resize(r,i,a,s)}}return true}catch(e){}if(!f){console("[ERROR] Unable to initialize WebGL. Your browser may not support it.")}return false};this.context=function(){return f};this._cleanup=function(e){var r;for(r=0;r<c.length;r+=1){c[r]._cleanup(e)}t.clearCachedShaders(e?e.m_context:null);n.modified()};this.render=function(){var e;c.sort(function(e,t){return e.layer()-t.layer()});for(e=0;e<c.length;e+=1){c[e].render()}};this.focusDisplayPoint=function(){return l.focusDisplayPoint()};this.displayToWorld=function(e,t,n,r){r=r===undefined?r=l:r;var i=r.camera();if(!n){n=r.focusDisplayPoint()}return r.displayToWorld(o.fromValues(e,t,n[2],1),i.viewMatrix(),i.projectionMatrix(),a,s)};this.worldToDisplay=function(e,t,n,r){r=r===undefined?r=l:r;var i=r.camera();return r.worldToDisplay(o.fromValues(e,t,n,1),i.viewMatrix(),i.projectionMatrix(),a,s)};return n};inherit(t.renderWindow,t.graphicsObject);t.camera=function(e){"use strict";if(!(this instanceof t.camera)){return new t.camera(e)}t.groupNode.call(this);e=e||{};var n=Math.PI*30/180,r=o.fromValues(0,0,1,1),i=o.fromValues(0,0,0,1),u=s.fromValues(0,0,0),l=o.fromValues(0,1,0,0),c=o.fromValues(1,0,0,0),f=.01,d=1e4,p=1,h=o.fromValues(0,0,-1,0),g=o.fromValues(0,0,1,0),m=a.create(),v=a.create(),y=t.timestamp(),b=t.timestamp(),M=-1,x=1,w=+1,A=-1,T={zoom:1,tilesize:256},C=true,S=true,D=true,I=false,E=[0,0,0,0],N=1,O=t.GL.COLOR_BUFFER_BIT|t.GL.DEPTH_BUFFER_BIT;if(e.parallelProjection!==undefined){I=e.parallelProjection?true:false}this.viewAngle=function(){return n};this.setViewAngleDegrees=function(e){this.setViewAngle(Math.PI*e/180)};this.setViewAngle=function(e){if(D){n=e;this.modified()}};this.position=function(){return r};this.setPosition=function(e,t,n){if(C){r=o.fromValues(e,t,n,1);this.modified()}};this.focalPoint=function(){return i};this.setFocalPoint=function(e,t,n){if(S&&C){i=o.fromValues(e,t,n,1);this.modified()}};this.viewUpDirection=function(){return l};this.setViewUpDirection=function(e,t,n){l=o.fromValues(e,t,n,0);this.modified()};this.centerOfRotation=function(){return u};this.setCenterOfRotation=function(e){u=e;this.modified()};this.clippingRange=function(){return[f,d]};this.setClippingRange=function(e,t){f=e;d=t;this.modified()};this.viewAspect=function(){return p};this.setViewAspect=function(e){p=e;this.modified()};this.enableScale=function(){return D};this.setEnableScale=function(e){if(e!==D){D=e;this.modified();return true}return D};this.enableRotation=function(){return S};this.setEnableRotation=function(e){if(e!==S){S=e;this.modified();return true}return S};this.enableTranslation=function(){return C};this.setEnableTranslation=function(e){if(e!==C){C=e;this.modified();return true}return C};this.isEnabledParallelProjection=function(){return I};this.enableParallelProjection=function(e){if(e!==I){I=e;this.modified();return true}return I};this.setEnableParallelProjection=function(e){return this.enableParallelProjection(e)};this.parallelProjection=function(){return{left:M,right:x,top:w,bottom:A}};this.setParallelProjection=function(e,t,n,r){M=e;x=t;w=n;A=r;this.modified()};this.parallelExtents=function(){return T};this.setParallelExtents=function(e){var t=["width","height","zoom","tilesize"],n=false,r,i;for(r=0;r<t.length;r+=1){i=t[r];if(e[i]!==undefined&&e[i]!==T[i]){T[i]=e[i];n=true}}if(n&&T.width&&T.height&&T.zoom!==undefined&&T.tilesize){var a=this.unitsPerPixel(T.zoom,T.tilesize);x=a*T.width/2;M=-x;w=a*T.height/2;A=-w;this.modified()}};this.unitsPerPixel=function(e,t){t=t||256;return 360*Math.pow(2,-e)/t};this.directionOfProjection=function(){this.computeDirectionOfProjection();return h};this.viewPlaneNormal=function(){this.computeViewPlaneNormal();return g};this.viewMatrix=function(){return this.computeViewMatrix()};this.setViewMatrix=function(e,t){if(!t){a.copy(m,e)}else{m=e.slice()}y.modified()};this.projectionMatrix=function(){return this.computeProjectionMatrix()};this.setProjectionMatrix=function(e){a.copy(v,e);b.modified()};this.clearMask=function(){return O};this.setClearMask=function(e){O=e;this.modified()};this.clearColor=function(){return E};this.setClearColor=function(e,t,n,r){E[0]=e;E[1]=t;E[2]=n;E[3]=r;this.modified()};this.clearDepth=function(){return N};this.setClearDepth=function(e){N=e;this.modified()};this.computeDirectionOfProjection=function(){s.subtract(h,i,r);s.normalize(h,h);this.modified()};this.computeViewPlaneNormal=function(){g[0]=-h[0];g[1]=-h[1];g[2]=-h[2]};this.zoom=function(e,t){if(e===0){return}if(!C){return}e=e*s.distance(i,r);if(!t){t=h;r[0]=i[0]-e*t[0];r[1]=i[1]-e*t[1];r[2]=i[2]-e*t[2]}else{r[0]=r[0]+e*t[0];r[1]=r[1]+e*t[1];r[2]=r[2]+e*t[2]}this.modified()};this.pan=function(e,t,n){if(!C){return}r[0]+=e;r[1]+=t;r[2]+=n;i[0]+=e;i[1]+=t;i[2]+=n;this.modified()};this.computeOrthogonalAxes=function(){this.computeDirectionOfProjection();s.cross(c,h,l);s.normalize(c,c);this.modified()};this.rotate=function(e,t){if(!S){return}e=.5*e*(Math.PI/180);t=.5*t*(Math.PI/180);var n=a.create(),f=new s.create;a.identity(n);f[0]=-u[0];f[1]=-u[1];f[2]=-u[2];a.translate(n,n,u);a.rotate(n,n,e,l);a.rotate(n,n,t,c);a.translate(n,n,f);o.transformMat4(r,r,n);o.transformMat4(i,i,n);o.transformMat4(l,l,n);o.normalize(l,l);this.computeOrthogonalAxes();this.modified()};this.computeViewMatrix=function(){if(y.getMTime()<this.getMTime()){a.lookAt(m,r,i,l);y.modified()}return m};this.viewAlignment=function(){if(!I){var e=this.projectionMatrix();if(e[1]||e[2]||e[3]||e[4]||e[6]||e[7]||e[8]||e[9]||e[12]||e[13]||e[15]){return null}}var t=this.unitsPerPixel(T.zoom,T.tilesize);if(!T.width||!T.height||!t){return null}if(parseFloat(T.zoom.toFixed(6))!==parseFloat(T.zoom.toFixed(0))){return null}var n={roundx:t,roundy:t,dx:0,dy:0};if(T.width%2){n.dx=t*.5}if(T.height%2){n.dy=t*.5}return n};this.computeProjectionMatrix=function(){if(b.getMTime()<this.getMTime()){if(!I){a.perspective(v,n,p,f,d)}else{a.ortho(v,M,x,A,w,f,d)}b.modified()}return v};this.zoomToHeight=function(e,r,i){return t.zoomToHeight(e,r,i,n)};this.computeDirectionOfProjection();return this};inherit(t.camera,t.groupNode);t.zoomToHeight=function(e,t,n,r){"use strict";r=r||30*Math.PI/180;var i=360*Math.pow(2,-e);i/=Math.tan(r/2)*2*256/n;return i};t.heightToZoom=function(e,t,n,r){"use strict";r=r||30*Math.PI/180;e*=Math.tan(r/2)*2*256/n;var i=-Math.log2(e/360);return i};t.interactorStyle=function(){"use strict";if(!(this instanceof t.interactorStyle)){return new t.interactorStyle}t.object.call(this);var e=this,n=null;this.viewer=function(){return n};this.setViewer=function(r){if(r!==n){n=r;u(n).on(t.event.mousePress,e.handleMouseDown);u(n).on(t.event.mouseRelease,e.handleMouseUp);u(n).on(t.event.mouseMove,e.handleMouseMove);u(n).on(t.event.mouseOut,e.handleMouseOut);u(n).on(t.event.mouseWheel,e.handleMouseWheel);u(n).on(t.event.keyPress,e.handleKeyPress);u(n).on(t.event.mouseContextMenu,e.handleContextMenu);u(n).on(t.event.click,e.handleClick);u(n).on(t.event.dblClick,e.handleDoubleClick);this.modified()}};this.handleMouseDown=function(e){e=e;return true};this.handleMouseUp=function(e){e=e;return true};this.handleMouseMove=function(e){e=e;return true};this.handleMouseOut=function(e){e=e;return true};this.handleMouseWheel=function(e){e=e;return true};this.handleClick=function(e){e=e;return true};this.handleDoubleClick=function(e){e=e;return true};this.handleKeyPress=function(e){e=e;return true};this.handleContextMenu=function(e){e=e;return true};this.reset=function(){return true};return this};inherit(t.interactorStyle,t.object);t.trackballInteractorStyle=function(){"use strict";if(!(this instanceof t.trackballInteractorStyle)){return new t.trackballInteractorStyle}t.interactorStyle.call(this);var e=this,n=false,r=false,i=false,a,s={x:0,y:0},u={x:0,y:0};this.handleMouseMove=function(t){var l=e.viewer().renderWindow().windowSize()[0],c=e.viewer().renderWindow().windowSize()[1],f=e.viewer().renderWindow().activeRenderer(),d=f.camera(),p=e.viewer().relMouseCoords(t),h,g,m,v,y,b,M,x,w,A,T;a=false;s={x:0,y:0};if(p.x<0||p.x>l){s.x=0;a=true}else{s.x=p.x}if(p.y<0||p.y>c){s.y=0;a=true}else{s.y=p.y}if(a===true){return}h=d.focalPoint();m=o.fromValues(h[0],h[1],h[2],1);g=f.worldToDisplay(m,d.viewMatrix(),d.projectionMatrix(),l,c);v=o.fromValues(s.x,s.y,g[2],1);y=o.fromValues(u.x,u.y,g[2],1);b=f.displayToWorld(v,d.viewMatrix(),d.projectionMatrix(),l,c);M=f.displayToWorld(y,d.viewMatrix(),d.projectionMatrix(),l,c);x=b[0]-M[0];w=b[1]-M[1];A=b[2]-M[2];if(i){d.pan(-x,-w,-A);e.viewer().render()}if(n){d.rotate(u.x-s.x,u.y-s.y);f.resetCameraClippingRange();e.viewer().render()}if(r){T=2*(s.y-u.y)/c;if(T>0){d.zoom(1-Math.abs(T))}else{d.zoom(1+Math.abs(T))}f.resetCameraClippingRange();e.viewer().render()}u.x=s.x;u.y=s.y;return false};this.handleMouseDown=function(t){var a;if(t.button===0){n=true}if(t.button===1){i=true}if(t.button===2){r=true}a=e.viewer().relMouseCoords(t);if(a.x<0){u.x=0}else{u.x=a.x}if(a.y<0){u.y=0}else{u.y=a.y}return false};this.handleMouseUp=function(e){if(e.button===0){n=false}if(e.button===1){i=false}if(e.button===2){r=false}return false};this.handleMouseWheel=function(t){var n=e.viewer().renderWindow().activeRenderer(),r=n.camera();if(t.originalEvent.wheelDelta<0){r.zoom(.9)}else{r.zoom(1.1)}n.resetCameraClippingRange();e.viewer().render();return true};return this};inherit(t.trackballInteractorStyle,t.interactorStyle);t.viewer=function(e,n){"use strict";if(!(this instanceof t.viewer)){return new t.viewer(e,n)}t.object.call(this);var r=this,i=e,a=true,o=null,s=t.renderer(n),l=t.renderWindow(i);this.canvas=function(){return i};this.renderWindow=function(){return l};this.init=function(){if(l!==null){l._setup()}else{console.log("[ERROR] No render window attached")}};this.exit=function(e){if(l!==null){l._cleanup(e)}else{console.log("[ERROR] No render window attached")}};this.interactorStyle=function(){return o};this.setInteractorStyle=function(e){if(e!==o){o=e;o.setViewer(this);this.modified()}};this.handleMouseDown=function(e){if(a===true){var n=u.event.fix(e||window.event);if(e.button===2){n.preventDefault()}n.state="down";n.type=t.event.mousePress;u(r).trigger(n)}return true};this.handleMouseUp=function(e){if(a===true){var n=u.event.fix(e||window.event);n.preventDefault();n.state="up";n.type=t.event.mouseRelease;u(r).trigger(n)}return true};this.handleMouseMove=function(e){if(a===true){var n=u.event.fix(e||window.event);n.preventDefault();n.type=t.event.mouseMove;u(r).trigger(n)}return true};this.handleMouseWheel=function(e){if(a===true){var n=u.event.fix(e||window.event);n.preventDefault();n.type=t.event.mouseWheel;u(r).trigger(n)}return true};this.handleMouseOut=function(e){if(a===true){var n=u.event.fix(e||window.event);n.preventDefault();n.type=t.event.mouseOut;u(r).trigger(n)}return true};this.handleKeyPress=function(e){if(a===true){var n=u.event.fix(e||window.event);n.preventDefault();n.type=t.event.keyPress;u(r).trigger(n)}return true};this.handleContextMenu=function(e){if(a===true){var n=u.event.fix(e||window.event);n.preventDefault();n.type=t.event.contextMenu;u(r).trigger(n)}return false};this.handleClick=function(e){if(a===true){var n=u.event.fix(e||window.event);n.preventDefault();n.type=t.event.click;u(r).trigger(n)}return false};this.handleDoubleClick=function(e){if(a===true){var n=u.event.fix(e||window.event);n.preventDefault();n.type=t.event.dblClick;u(r).trigger(n)}return false};this.relMouseCoords=function(e){if(e.pageX===undefined||e.pageY===undefined){throw"Missing attributes pageX and pageY on the event"}var t=0,n=0,r=0,a=0,o=i;do{t+=o.offsetLeft-o.scrollLeft;n+=o.offsetTop-o.scrollTop;o=o.offsetParent}while(o);r=e.pageX-t;a=e.pageY-n;return{x:r,y:a}};this.render=function(){l.render()};this.bindEventHandlers=function(){u(i).on("mousedown",this.handleMouseDown);u(i).on("mouseup",this.handleMouseUp);u(i).on("mousemove",this.handleMouseMove);u(i).on("mousewheel",this.handleMouseWheel);u(i).on("contextmenu",this.handleContextMenu)};this.unbindEventHandlers=function(){u(i).off("mousedown",this.handleMouseDown);u(i).off("mouseup",this.handleMouseUp);u(i).off("mousemove",this.handleMouseMove);u(i).off("mousewheel",this.handleMouseWheel);u(i).off("contextmenu",this.handleContextMenu)};this._init=function(){this.bindEventHandlers();l.addRenderer(s)};this._init();return this};inherit(t.viewer,t.object);t.shader=function(e){"use strict";if(!(this instanceof t.shader)){return new t.shader(e)}t.object.call(this);var n=[],r=e,i="";this._getContextEntry=function(e){var r=e.m_context,i,a;for(i=0;i<n.length;i+=1){if(n[i].context===r){return n[i]}}a={context:r,compileTimestamp:t.timestamp()};n.push(a);return a};this.removeContext=function(e){var t=e.m_context,r;for(r=0;r<n.length;r+=1){if(n[r].context===t){n.splice(r,1);return}}};this.shaderHandle=function(e){var t=this._getContextEntry(e);return t.shaderHandle};this.shaderType=function(){return r};this.shaderSource=function(){return i};this.setShaderSource=function(e){i=e;this.modified()};this.compile=function(e){var n=this._getContextEntry(e);if(this.getMTime()<n.compileTimestamp.getMTime()){return n.shaderHandle}e.m_context.deleteShader(n.shaderHandle);n.shaderHandle=e.m_context.createShader(r);e.m_context.shaderSource(n.shaderHandle,i);e.m_context.compileShader(n.shaderHandle);if(!e.m_context.getShaderParameter(n.shaderHandle,t.GL.COMPILE_STATUS)){console.log("[ERROR] An error occurred compiling the shaders: "+e.m_context.getShaderInfoLog(n.shaderHandle));console.log(i);e.m_context.deleteShader(n.shaderHandle);return null}n.compileTimestamp.modified();return n.shaderHandle};this.attachShader=function(e,t){e.m_context.attachShader(t,this.shaderHandle(e))}};inherit(t.shader,t.object);(function(){"use strict";var e=[],n=10;t.getCachedShader=function(r,i,a){for(var o=0;o<e.length;o+=1){if(e[o].type===r&&e[o].context===i&&e[o].source===a){if(o){e.splice(0,0,e.splice(o,1)[0])}return e[0].shader}}var s=new t.shader(r);s.setShaderSource(a);e.unshift({type:r,context:i,source:a,shader:s});if(e.length>=n){e.splice(n,e.length-n)}return s};t.clearCachedShaders=function(t){for(var n=e.length-1;n>=0;n-=1){if(t===null||t===undefined||e[n].context===t){e.splice(n,1)}}}})();var r=function(){"use strict";var e=".";var t=document.getElementsByTagName("script");if(t.length>0){var n=t.length-1;var r=t[n];n=r.src.lastIndexOf("/");e=r.src.substring(0,n)}return function(){return e}}();t.shaderProgram=function(){"use strict";if(!(this instanceof t.shaderProgram)){return new t.shaderProgram}t.materialAttribute.call(this,t.materialAttributeType.ShaderProgram);var e=this,n=0,i=t.timestamp(),a=t.timestamp(),o=[],s=[],l={},c={},f={};this.loadFromFile=function(n,r){var i,a=false;u.ajax({url:r,type:"GET",dataType:"text",async:false,success:function(r){i=t.shader(n);i.setShaderSource(r);e.addShader(i);a=true}});return a};this.loadShader=function(e,t){return this.loadFromFile(e,r()+"/shaders/"+t)};this.queryUniformLocation=function(e,t){return e.m_context.getUniformLocation(n,t)};this.queryAttributeLocation=function(e,t){return e.m_context.getAttribLocation(n,t)};this.addShader=function(t){if(o.indexOf(t)>-1){return false}var n;for(n=o.length-2;n>=0;n-=1){if(o[n].shaderType()===t.shaderType()){o.splice(n,1)}}o.push(t);e.modified();return true};this.addUniform=function(t){if(s.indexOf(t)>-1){return false}s.push(t);e.modified();return true};this.addVertexAttribute=function(t,n){l[n]=t;e.modified()};this.uniformLocation=function(e){return c[e]};this.attributeLocation=function(e){return f[e]};this.uniform=function(e){var t;for(t=0;t<s.length;t+=1){if(s[t].name()===e){return s[t]}}return null};this.updateUniforms=function(e){var t;for(t=0;t<s.length;t+=1){s[t].callGL(e,c[s[t].name()])}};this.link=function(e){e.m_context.linkProgram(n);if(!e.m_context.getProgramParameter(n,t.GL.LINK_STATUS)){console.log("[ERROR] Unable to initialize the shader program.");return false}return true};this.use=function(e){e.m_context.useProgram(n)};this._setup=function(e){if(n===0){n=e.m_context.createProgram()}};this._cleanup=function(t){e.deleteVertexAndFragment(t);e.deleteProgram(t);e.modified()};this.deleteProgram=function(e){if(n){e.m_context.deleteProgram(n)}n=0};this.deleteVertexAndFragment=function(e){var t;for(t=0;t<o.length;t+=1){if(o[t].shaderHandle(e)){e.m_context.detachShader(n,o[t].shaderHandle(e))}e.m_context.deleteShader(o[t].shaderHandle(e));o[t].removeContext(e)}};this.compileAndLink=function(t){var r;if(i.getMTime()>=this.getMTime()){return}e._setup(t);for(r=0;r<o.length;r+=1){o[r].compile(t);o[r].attachShader(t,n)}e.bindAttributes(t);if(!e.link(t)){console.log("[ERROR] Failed to link Program");e._cleanup(t)}i.modified()};this.bind=function(t){var n=0;if(a.getMTime()<e.getMTime()){e.compileAndLink(t);e.use(t);e.bindUniforms(t);a.modified()}else{e.use(t)}for(n=0;n<s.length;n+=1){s[n].update(t,e)}e.updateUniforms(t)};this.undoBind=function(e){e.m_context.useProgram(null)};this.bindVertexData=function(e,t){if(l.hasOwnProperty(t)){l[t].bindVertexData(e,t)}};this.undoBindVertexData=function(e,t){if(l.hasOwnProperty(t)){l[t].undoBindVertexData(e,t)}};this.bindUniforms=function(e){var t;for(t=0;t<s.length;t+=1){c[s[t].name()]=this.queryUniformLocation(e,s[t].name())}};this.bindAttributes=function(e){var t,r;for(t in l){if(l.hasOwnProperty(t)){r=l[t].name();e.m_context.bindAttribLocation(n,t,r);f[r]=t}}};return e};inherit(t.shaderProgram,t.materialAttribute);t.texture=function(){"use strict";if(!(this instanceof t.texture)){return new t.texture}t.materialAttribute.call(this,t.materialAttributeType.Texture);this.m_width=0;this.m_height=0;this.m_depth=0;this.m_textureHandle=null;this.m_textureUnit=0;this.m_pixelFormat=t.GL.RGBA;this.m_pixelDataType=t.GL.UNSIGNED_BYTE;this.m_internalFormat=t.GL.RGBA;this.m_nearestPixel=false;this.m_image=null;var e=t.timestamp(),n=this;function r(e){switch(n.m_textureUnit){case 0:e.m_context.activeTexture(t.GL.TEXTURE0);break;case 1:e.m_context.activeTexture(t.GL.TEXTURE1);break;case 2:e.m_context.activeTexture(t.GL.TEXTURE2);break;case 3:e.m_context.activeTexture(t.GL.TEXTURE3);break;case 4:e.m_context.activeTexture(t.GL.TEXTURE4);break;case 5:e.m_context.activeTexture(t.GL.TEXTURE5);break;case 6:e.m_context.activeTexture(t.GL.TEXTURE6);break;case 7:e.m_context.activeTexture(t.GL.TEXTURE7);break;case 8:e.m_context.activeTexture(t.GL.TEXTURE8);break;case 9:e.m_context.activeTexture(t.GL.TEXTURE9);break;case 10:e.m_context.activeTexture(t.GL.TEXTURE10);break;case 11:e.m_context.activeTexture(t.GL.TEXTURE11);break;case 12:e.m_context.activeTexture(t.GL.TEXTURE12);break;case 13:e.m_context.activeTexture(t.GL.TEXTURE13);break;case 14:e.m_context.activeTexture(t.GL.TEXTURE14);break;case 15:e.m_context.activeTexture(t.GL.TEXTURE15);break;default:throw"[error] Texture unit "+n.m_textureUnit+" is not supported"}}this.setup=function(n){r(n);n.m_context.deleteTexture(this.m_textureHandle);this.m_textureHandle=n.m_context.createTexture();n.m_context.bindTexture(t.GL.TEXTURE_2D,this.m_textureHandle);n.m_context.texParameteri(t.GL.TEXTURE_2D,t.GL.TEXTURE_MIN_FILTER,this.m_nearestPixel?t.GL.NEAREST:t.GL.LINEAR);n.m_context.texParameteri(t.GL.TEXTURE_2D,t.GL.TEXTURE_MAG_FILTER,this.m_nearestPixel?t.GL.NEAREST:t.GL.LINEAR);n.m_context.texParameteri(t.GL.TEXTURE_2D,t.GL.TEXTURE_WRAP_S,t.GL.CLAMP_TO_EDGE);n.m_context.texParameteri(t.GL.TEXTURE_2D,t.GL.TEXTURE_WRAP_T,t.GL.CLAMP_TO_EDGE);if(this.m_image!==null){n.m_context.pixelStorei(t.GL.UNPACK_ALIGNMENT,1);n.m_context.pixelStorei(t.GL.UNPACK_FLIP_Y_WEBGL,true);this.updateDimensions();this.computeInternalFormatUsingImage();n.m_context.texImage2D(t.GL.TEXTURE_2D,0,this.m_internalFormat,this.m_pixelFormat,this.m_pixelDataType,this.m_image)}else{n.m_context.texImage2D(t.GL.TEXTURE_2D,0,this.m_internalFormat,this.m_width,this.m_height,0,this.m_pixelFormat,this.m_pixelDataType,null)}n.m_context.bindTexture(t.GL.TEXTURE_2D,null);e.modified()};this.bind=function(n){if(this.getMTime()>e.getMTime()){this.setup(n)}r(n);n.m_context.bindTexture(t.GL.TEXTURE_2D,this.m_textureHandle)};this.undoBind=function(e){e.m_context.bindTexture(t.GL.TEXTURE_2D,null)};this.image=function(){return this.m_image};this.setImage=function(e){if(e!==null){this.m_image=e;this.updateDimensions();this.modified();return true}return false};this.nearestPixel=function(){return this.m_nearestPixel};this.setNearestPixel=function(e){e=e?true:false;if(e!==this.m_nearestPixel){this.m_nearestPixel=e;this.modified();return true}return false};this.textureUnit=function(){return this.m_textureUnit};this.setTextureUnit=function(e){if(this.m_textureUnit===e){return false}this.m_textureUnit=e;this.modified();return true};this.width=function(){return this.m_width};this.setWidth=function(e){if(n.m_width!==e){n.m_width=e;n.modified();return true}return false};this.height=function(){return n.m_height};this.setHeight=function(e){if(n.m_height!==e){n.m_height=e;n.modified();return true}return false};this.depth=function(){return this.m_depth};this.setDepth=function(e){if(this.m_image===null){return false}this.m_depth=e;this.modified();return true};this.textureHandle=function(){return this.m_textureHandle};this.internalFormat=function(){return this.m_internalFormat};this.setInternalFormat=function(e){if(this.m_internalFormat!==e){this.m_internalFormat=e;this.modified();return true}return false};this.pixelFormat=function(){return this.m_pixelFormat};this.setPixelFormat=function(e){if(this.m_image===null){return false}this.m_pixelFormat=e;this.modified();return true};this.pixelDataType=function(){return this.m_pixelDataType};this.setPixelDataType=function(e){if(this.m_image===null){return false}this.m_pixelDataType=e;this.modified();return true};this.computeInternalFormatUsingImage=function(){this.m_internalFormat=t.GL.RGBA;this.m_pixelFormat=t.GL.RGBA;this.m_pixelDataType=t.GL.UNSIGNED_BYTE};this.updateDimensions=function(){if(this.m_image!==null){this.m_width=this.m_image.width;this.m_height=this.m_image.height;this.m_depth=0}};return this};inherit(t.texture,t.materialAttribute);t.lookupTable=function(){"use strict";if(!(this instanceof t.lookupTable)){return new t.lookupTable}t.texture.call(this);var e=t.timestamp(),n=[0,0];this.m_colorTable=[.07514311,.468049805,1,1,.247872569,.498782363,1,1,.339526309,.528909511,1,1,.409505078,.558608486,1,1,.468487184,.588057293,1,1,.520796675,.617435078,1,1,.568724526,.646924167,1,1,.613686735,.676713218,1,1,.656658579,.707001303,1,1,.698372844,.738002964,1,1,.739424025,.769954435,1,1,.780330104,.803121429,1,1,.821573924,.837809045,1,1,.863634967,.874374691,1,1,.907017747,.913245283,1,1,.936129275,.938743558,.983038586,1,.943467973,.943498599,.943398095,1,.990146732,.928791426,.917447482,1,1,.88332677,.861943246,1,1,.833985467,.803839606,1,1,.788626485,.750707739,1,1,.746206642,.701389973,1,1,.70590052,.654994046,1,1,.667019783,.610806959,1,1,.6289553,.568237474,1,1,.591130233,.526775617,1,1,.552955184,.485962266,1,1,.513776083,.445364274,1,1,.472800903,.404551679,1,1,.428977855,.363073592,1,1,.380759558,.320428137,1,.961891484,.313155629,.265499262,1,.916482116,.236630659,.209939162,1].map(function(e){return e*255});this.setup=function(n){if(this.textureUnit()===0){n.m_context.activeTexture(t.GL.TEXTURE0)}else if(this.textureUnit()===1){n.m_context.activeTexture(t.GL.TEXTURE1)}n.m_context.deleteTexture(this.m_textureHandle);this.m_textureHandle=n.m_context.createTexture();n.m_context.bindTexture(t.GL.TEXTURE_2D,this.m_textureHandle);n.m_context.texParameteri(t.GL.TEXTURE_2D,t.GL.TEXTURE_MIN_FILTER,t.GL.LINEAR);n.m_context.texParameteri(t.GL.TEXTURE_2D,t.GL.TEXTURE_MAG_FILTER,t.GL.LINEAR);n.m_context.texParameteri(t.GL.TEXTURE_2D,t.GL.TEXTURE_WRAP_S,t.GL.CLAMP_TO_EDGE);n.m_context.texParameteri(t.GL.TEXTURE_2D,t.GL.TEXTURE_WRAP_T,t.GL.CLAMP_TO_EDGE);n.m_context.pixelStorei(t.GL.UNPACK_ALIGNMENT,1);this.m_width=this.m_colorTable.length/4;this.m_height=1;this.m_depth=0;n.m_context.texImage2D(t.GL.TEXTURE_2D,0,t.GL.RGBA,this.m_width,this.m_height,this.m_depth,t.GL.RGBA,t.GL.UNSIGNED_BYTE,new Uint8Array(this.m_colorTable));n.m_context.bindTexture(t.GL.TEXTURE_2D,null);e.modified()};this.colorTable=function(){return this.m_colorTable};this.setColorTable=function(e){if(this.m_colorTable===e){return false}this.m_colorTable=e;this.modified();return true};this.range=function(){return n};this.setRange=function(e){if(n===e){return false}n=e;this.modified();return true};this.updateRange=function(e){if(!(e instanceof Array)){console.log("[error] Invalid data type for range. Requires array [min,max]")}if(e[0]<n[0]){n[0]=e[0];this.modified()}if(e[1]>n[1]){n[1]=e[1];this.modified()}};return this};inherit(t.lookupTable,t.texture);t.uniform=function(e,n){"use strict";if(!(this instanceof t.uniform)){return new t.uniform(e,n)}this.getTypeNumberOfComponents=function(e){switch(e){case t.GL.FLOAT:case t.GL.INT:case t.GL.BOOL:return 1;case t.GL.FLOAT_VEC2:case t.GL.INT_VEC2:case t.GL.BOOL_VEC2:return 2;case t.GL.FLOAT_VEC3:case t.GL.INT_VEC3:case t.GL.BOOL_VEC3:return 3;case t.GL.FLOAT_VEC4:case t.GL.INT_VEC4:case t.GL.BOOL_VEC4:return 4;case t.GL.FLOAT_MAT3:return 9;case t.GL.FLOAT_MAT4:return 16;default:return 0}};var r=e,i=n,a=[];a.length=this.getTypeNumberOfComponents(r);this.name=function(){return i};this.type=function(){return r};this.get=function(){return a};this.set=function(e){var t=0,n=a.length;if(n!==1){for(t=0;t<n;t+=1){a[t]=e[t]}}else{a[0]=e}};this.callGL=function(e,n){switch(r){case t.GL.BOOL:case t.GL.INT:e.m_context.uniform1iv(n,a);break;case t.GL.FLOAT:e.m_context.uniform1fv(n,a);break;case t.GL.BOOL_VEC2:case t.GL.INT_VEC2:e.m_context.uniform2iv(n,a);break;case t.GL.FLOAT_VEC2:e.m_context.uniform2fv(n,a);break;case t.GL.BOOL_VEC3:case t.GL.INT_VEC3:e.m_context.uniform3iv(n,a);break;case t.GL.FLOAT_VEC3:e.m_context.uniform3fv(n,a);break;case t.GL.BOOL_VEC4:case t.GL.INT_VEC4:e.m_context.uniform4iv(n,a);break;case t.GL.FLOAT_VEC4:e.m_context.uniform4fv(n,a);break;case t.GL.FLOAT_MAT3:e.m_context.uniformMatrix3fv(n,t.GL.FALSE,a);break;case t.GL.FLOAT_MAT4:e.m_context.uniformMatrix4fv(n,t.GL.FALSE,a);break;default:break}};this.update=function(e,t){void e;void t};return this};t.modelViewUniform=function(e){"use strict";if(!(this instanceof t.modelViewUniform)){return new t.modelViewUniform(e)}if(!e){e="modelViewMatrix"}t.uniform.call(this,t.GL.FLOAT_MAT4,e);this.set(a.create());this.update=function(e,t){void t;this.set(e.m_modelViewMatrix)};return this};inherit(t.modelViewUniform,t.uniform);t.modelViewOriginUniform=function(e,n){"use strict";if(!(this instanceof t.modelViewOriginUniform)){return new t.modelViewOriginUniform(e,n)}if(!e){e="modelViewMatrix"}n=n||[0,0,0];var r=[n[0],n[1],n[2]||0];t.uniform.call(this,t.GL.FLOAT_MAT4,e);this.set(a.create());this.setOrigin=function(e){e=e||[0,0,0];r=[e[0],e[1],e[2]||0]};this.update=function(e,t){void t;var n=e.m_modelViewMatrix;if(e.m_modelViewAlignment){var i=e.m_modelViewAlignment;n=n.slice?n.slice():Array.prototype.slice.call(n);n[12]=Math.round(n[12]/i.roundx)*i.roundx+i.dx;n[13]=Math.round(n[13]/i.roundy)*i.roundy+i.dy}n=a.translate(a.create(),n,r);this.set(n)};return this};inherit(t.modelViewOriginUniform,t.uniform);t.projectionUniform=function(e){"use strict";if(!(this instanceof t.projectionUniform)){return new t.projectionUniform(e)}if(!e){e="projectionMatrix"}t.uniform.call(this,t.GL.FLOAT_MAT4,e);this.set(a.create());this.update=function(e,t){void t;this.set(e.m_projectionMatrix)};return this};inherit(t.projectionUniform,t.uniform);t.floatUniform=function(e,n){"use strict";if(!(this instanceof t.floatUniform)){return new t.floatUniform(e,n)}if(!e){e="floatUniform"}n=n===undefined?1:n;t.uniform.call(this,t.GL.FLOAT,e);this.set(n)};inherit(t.floatUniform,t.uniform);t.normalMatrixUniform=function(e){"use strict";if(!(this instanceof t.normalMatrixUniform)){return new t.normalMatrixUniform(e)}if(!e){e="normalMatrix"}t.uniform.call(this,t.GL.FLOAT_MAT4,e);this.set(a.create());this.update=function(e,t){void t;this.set(e.m_normalMatrix)};return this};inherit(t.normalMatrixUniform,t.uniform);t.vertexAttributeKeys={Position:0,Normal:1,TextureCoordinate:2,Color:3,Scalar:4,CountAttributeIndex:5};t.vertexAttributeKeysIndexed={Zero:0,One:1,Two:2,Three:3,Four:4,Five:5,Six:6,Seven:7,Eight:8,Nine:9};t.vertexAttribute=function(e){"use strict";if(!(this instanceof t.vertexAttribute)){return new t.vertexAttribute(e)}var n=e;this.name=function(){return n};this.bindVertexData=function(e,t){var r=e.m_mapper.geometryData(),i=r.sourceData(t),a=e.m_material.shaderProgram();e.m_context.vertexAttribPointer(a.attributeLocation(n),i.attributeNumberOfComponents(t),i.attributeDataType(t),i.normalized(t),i.attributeStride(t),i.attributeOffset(t));e.m_context.enableVertexAttribArray(a.attributeLocation(n))};this.undoBindVertexData=function(e,t){t=t;var r=e.m_material.shaderProgram();e.m_context.disableVertexAttribArray(r.attributeLocation(n))}};t.source=function(){"use strict";if(!(this instanceof t.source)){return new t.source}t.object.call(this);this.create=function(){};return this};inherit(t.source,t.object);t.planeSource=function(){"use strict";if(!(this instanceof t.planeSource)){return new t.planeSource}t.source.call(this);var e=[0,0,0],n=[1,0,0],r=[0,1,0],i=[0,0,1],a=1,o=1,s=null;this.setOrigin=function(t,n,r){e[0]=t;e[1]=n;e[2]=r};this.setPoint1=function(e,t,r){n[0]=e;n[1]=t;n[2]=r};this.setPoint2=function(e,t,n){r[0]=e;r[1]=t;r[2]=n};this.create=function(){s=new t.geometryData;var u=[],l=[],c=[],f=[],d=[],p,h,g,m,v=0,y=0,b=0,M=0,x=[],w=[],A=[],T=[],C=[],S=null,D=null,I=null,E;u.length=3;l.length=2;c.length=3;f.length=3;d.length=3;for(p=0;p<3;p+=1){c[p]=n[p]-e[p];f[p]=r[p]-e[p]}m=(a+1)*(o+1);x.length=3*m;w.length=3*m;T.length=2*m;C.length=m;for(p=0;p<o+1;p+=1){l[1]=p/o;for(h=0;h<a+1;h+=1){l[0]=h/a;for(g=0;g<3;g+=1){u[g]=e[g]+l[0]*c[g]+l[1]*f[g]}x[v++]=u[0];x[v++]=u[1];x[v++]=u[2];A[b++]=1;A[b++]=1;A[b++]=1;w[y++]=i[0];w[y++]=i[1];w[y++]=i[2];T[M++]=l[0];T[M++]=l[1]}}for(p=0;p<o;p+=1){for(h=0;h<a;h+=1){d[0]=h+p*(a+1);d[1]=d[0]+1;d[2]=d[0]+a+2;d[3]=d[0]+a+1}}for(p=0;p<m;p+=1){C[p]=p}S=new t.triangleStrip;S.setIndices(C);D=t.sourceDataP3fv();D.pushBack(x);I=t.sourceDataC3fv();I.pushBack(A);E=t.sourceDataT2fv();E.pushBack(T);s.addSource(D);s.addSource(I);s.addSource(E);s.addPrimitive(S);return s}};inherit(t.planeSource,t.source);t.pointSource=function(){"use strict";if(!(this instanceof t.pointSource)){return new t.pointSource}t.source.call(this);var e=this,n=[],r=[],i=[],a=[],o=null;this.getPositions=function(){return n};this.setPositions=function(t){if(t instanceof Array){n=t}else{console.log("[ERROR] Invalid data type for positions. Array is required.")}e.modified()};this.getColors=function(){return r};this.setColors=function(t){if(t instanceof Array){r=t}else{console.log("[ERROR] Invalid data type for colors. Array is required.")}e.modified()};this.getSize=function(){return a};this.setSize=function(e){a=e;this.modified()};this.setTextureCoordinates=function(t){if(t instanceof Array){i=t}else{console.log("[ERROR] Invalid data type for "+"texture coordinates. Array is required.")}e.modified()};this.create=function(){o=new t.geometryData;if(n.length%3!==0){console.log("[ERROR] Invalid length of the points array");return}var e=n.length/3,s=0,u=[],l,c,f,d,p;u.length=e;for(s=0;s<e;s+=1){u[s]=s}p=t.sourceDataDf();if(e!==a.length){for(s=0;s<e;s+=1){p.pushBack(a)}}else{p.setData(a)}o.addSource(p);l=new t.points;l.setIndices(u);c=t.sourceDataP3fv();c.pushBack(n);o.addSource(c);if(r.length>0&&r.length===n.length){f=t.sourceDataC3fv();f.pushBack(r);o.addSource(f)}else if(r.length>0&&r.length!==n.length){console.log("[ERROR] Number of colors are different than number of points")}if(i.length>0&&i.length===n.length){d=t.sourceDataT2fv();d.pushBack(i);o.addSource(d)}else if(i.length>0&&i.length/2!==n.length/3){console.log("[ERROR] Number of texture coordinates are different than "+"number of points")}o.addPrimitive(l);return o}};inherit(t.pointSource,t.source);t.lineSource=function(e,n){"use strict";if(!(this instanceof t.lineSource)){return new t.lineSource}t.source.call(this);var r=e,i=n;this.setPositions=function(e){if(e instanceof Array){r=e;this.modified();return true}console.log("[ERROR] Invalid data type for positions. Array is required.");return false};this.setColors=function(e){if(e instanceof Array){i=e;this.modified();return true}console.log("[ERROR] Invalid data type for colors. Array is required.");return false};this.create=function(){if(!r){console.log("[error] Invalid positions");return}if(r.length%3!==0){console.log("[error] Line source requires 3d points");return}if(r.length%3!==0){console.log("[ERROR] Invalid length of the points array");return}var e=new t.geometryData,n=r.length/3,a,o=[],s,u,l;o.length=n;for(a=0;a<n;a+=1){o[a]=a}s=new t.lines;s.setIndices(o);u=t.sourceDataP3fv();u.pushBack(r);e.addSource(u);if(i&&i.length>0&&i.length===r.length){l=t.sourceDataC3fv();l.pushBack(i);e.addSource(l)}else if(i&&i.length>0&&i.length!==r.length){console.log("[error] Number of colors are different than number of points")}e.addPrimitive(s);return e}};inherit(t.lineSource,t.source);t.utils=function(){"use strict";if(!(this instanceof t.utils)){return new t.utils}t.object.call(this);return this};inherit(t.utils,t.object);t.utils.computePowerOfTwo=function(e,t){"use strict";t=t||1;while(t<e){t*=2}return t};t.utils.createTextureVertexShader=function(e){"use strict";var n=["attribute vec3 vertexPosition;","attribute vec3 textureCoord;","uniform mediump float pointSize;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","varying highp vec3 iTextureCoord;","void main(void)","{","gl_PointSize = pointSize;","gl_Position = projectionMatrix * modelViewMatrix * vec4(vertexPosition, 1.0);"," iTextureCoord = textureCoord;","}"].join("\n");return t.getCachedShader(t.GL.VERTEX_SHADER,e,n)};t.utils.createTextureFragmentShader=function(e){"use strict";var n=["varying highp vec3 iTextureCoord;","uniform sampler2D sampler2d;","uniform mediump float opacity;","void main(void) {","gl_FragColor = vec4(texture2D(sampler2d, vec2(iTextureCoord.s, "+"iTextureCoord.t)).xyz, opacity);","}"].join("\n");return t.getCachedShader(t.GL.FRAGMENT_SHADER,e,n)};t.utils.createRgbaTextureFragmentShader=function(e){"use strict";var n=["varying highp vec3 iTextureCoord;","uniform sampler2D sampler2d;","uniform mediump float opacity;","void main(void) {","  mediump vec4 color = vec4(texture2D(sampler2d, vec2("+"iTextureCoord.s, iTextureCoord.t)).xyzw);","  color.w *= opacity;","  gl_FragColor = color;","}"].join("\n");return t.getCachedShader(t.GL.FRAGMENT_SHADER,e,n)};t.utils.createVertexShader=function(e){"use strict";var n=["attribute vec3 vertexPosition;","attribute vec3 vertexColor;","uniform mediump float pointSize;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","varying mediump vec3 iVertexColor;","varying highp vec3 iTextureCoord;","void main(void)","{","gl_PointSize = pointSize;","gl_Position = projectionMatrix * modelViewMatrix * vec4(vertexPosition, 1.0);"," iVertexColor = vertexColor;","}"].join("\n");return t.getCachedShader(t.GL.VERTEX_SHADER,e,n)};t.utils.createPointVertexShader=function(e){"use strict";var n=["attribute vec3 vertexPosition;","attribute vec3 vertexColor;","attribute float vertexSize;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","varying mediump vec3 iVertexColor;","varying highp vec3 iTextureCoord;","void main(void)","{","gl_PointSize =  vertexSize;","gl_Position = projectionMatrix * modelViewMatrix * vec4(vertexPosition, 1.0);"," iVertexColor = vertexColor;","}"].join("\n");return t.getCachedShader(t.GL.VERTEX_SHADER,e,n)};t.utils.createVertexShaderSolidColor=function(e){"use strict";var n=["attribute vec3 vertexPosition;","uniform mediump float pointSize;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","void main(void)","{","gl_PointSize = pointSize;","gl_Position = projectionMatrix * modelViewMatrix * vec4(vertexPosition, 1.0);","}"].join("\n");return t.getCachedShader(t.GL.VERTEX_SHADER,e,n)};t.utils.createVertexShaderColorMap=function(e,n,r){"use strict";n=n;r=r;var i=["attribute vec3 vertexPosition;","attribute float vertexScalar;","uniform mediump float pointSize;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float lutMin;","uniform float lutMax;","varying mediump float iVertexScalar;","void main(void)","{","gl_PointSize = pointSize;","gl_Position = projectionMatrix * modelViewMatrix * vec4(vertexPosition, 1.0);","iVertexScalar = (vertexScalar-lutMin)/(lutMax-lutMin);","}"].join("\n");return t.getCachedShader(t.GL.VERTEX_SHADER,e,i)};t.utils.createFragmentShader=function(e){"use strict";var n=["varying mediump vec3 iVertexColor;","uniform mediump float opacity;","void main(void) {","gl_FragColor = vec4(iVertexColor, opacity);","}"].join("\n");return t.getCachedShader(t.GL.FRAGMENT_SHADER,e,n)};t.utils.createPhongVertexShader=function(e){"use strict";var n=["attribute highp vec3 vertexPosition;","attribute mediump vec3 vertexNormal;","attribute mediump vec3 vertexColor;","uniform highp mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 normalMatrix;","varying highp vec4 varPosition;","varying mediump vec3 varNormal;","varying mediump vec3 varVertexColor;","void main(void)","{","varPosition = modelViewMatrix * vec4(vertexPosition, 1.0);","gl_Position = projectionMatrix * varPosition;","varNormal = vec3(normalMatrix * vec4(vertexNormal, 0.0));","varVertexColor = vertexColor;","}"].join("\n");return t.getCachedShader(t.GL.VERTEX_SHADER,e,n)};t.utils.createPhongFragmentShader=function(e){"use strict";var n=["uniform mediump float opacity;","precision mediump float;","varying vec3 varNormal;","varying vec4 varPosition;","varying mediump vec3 varVertexColor;","const vec3 lightPos = vec3(0.0, 0.0,10000.0);","const vec3 ambientColor = vec3(0.01, 0.01, 0.01);","const vec3 specColor = vec3(0.0, 0.0, 0.0);","void main() {","vec3 normal = normalize(varNormal);","vec3 lightDir = normalize(lightPos);","vec3 reflectDir = -reflect(lightDir, normal);","vec3 viewDir = normalize(-varPosition.xyz);","float lambertian = max(dot(lightDir, normal), 0.0);","vec3 color = vec3(0.0);","if(lambertian > 0.0) {","  color = lambertian * varVertexColor;","}","gl_FragColor = vec4(color * opacity, 1.0 - opacity);","}"].join("\n");return t.getCachedShader(t.GL.FRAGMENT_SHADER,e,n)};t.utils.createFragmentShaderSolidColor=function(e,n){"use strict";var r=["uniform mediump float opacity;","void main(void) {","gl_FragColor = vec4("+n[0]+","+n[1]+","+n[2]+", opacity);","}"].join("\n");return t.getCachedShader(t.GL.FRAGMENT_SHADER,e,r)};t.utils.createFragmentShaderColorMap=function(e){"use strict";var n=["varying mediump float iVertexScalar;","uniform sampler2D sampler2d;","uniform mediump float opacity;","void main(void) {","gl_FragColor = vec4(texture2D(sampler2d, vec2(iVertexScalar, "+"0.0)).xyz, opacity);","}"].join("\n");return t.getCachedShader(t.GL.FRAGMENT_SHADER,e,n)};t.utils.createPointSpritesVertexShader=function(e){"use strict";var n=["attribute vec3 vertexPosition;","attribute vec3 vertexColor;","uniform mediump vec2 pointSize;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float height;","varying mediump vec3 iVertexColor;","varying highp float iVertexScalar;","void main(void)","{","mediump float realPointSize = pointSize.y;","if (pointSize.x > pointSize.y) {","  realPointSize = pointSize.x;}","gl_PointSize = realPointSize ;","iVertexScalar = vertexPosition.z;","gl_Position = projectionMatrix * modelViewMatrix * "+"vec4(vertexPosition.xy, height, 1.0);"," iVertexColor = vertexColor;","}"].join("\n");return t.getCachedShader(t.GL.VERTEX_SHADER,e,n)};t.utils.createPointSpritesFragmentShader=function(e){"use strict";var n=["varying mediump vec3 iVertexColor;","varying highp float iVertexScalar;","uniform sampler2D opacityLookup;","uniform highp float lutMin;","uniform highp float lutMax;","uniform sampler2D scalarsToColors;","uniform int useScalarsToColors;","uniform int useVertexColors;","uniform mediump vec2 pointSize;","uniform mediump float vertexColorWeight;","void main(void) {","mediump vec2 realTexCoord;","if (pointSize.x > pointSize.y) {","  realTexCoord = vec2(1.0, pointSize.y/pointSize.x) * gl_PointCoord;","} else {","  realTexCoord = vec2(pointSize.x/pointSize.y, 1.0) * gl_PointCoord;","}","highp float texOpacity = texture2D(opacityLookup, realTexCoord).w;","if (useScalarsToColors == 1) {","  gl_FragColor = vec4(texture2D(scalarsToColors, vec2(("+"iVertexScalar - lutMin)/(lutMax - lutMin), 0.0)).xyz, "+"texOpacity);","} else if (useVertexColors == 1) {","  gl_FragColor = vec4(iVertexColor, texOpacity);","} else {","  gl_FragColor = vec4(texture2D(opacityLookup, realTexCoord).xyz, texOpacity);","}}"].join("\n");return t.getCachedShader(t.GL.FRAGMENT_SHADER,e,n)};t.utils.createTextureMaterial=function(e,n){"use strict";var r=new t.material,i=new t.blend,a=new t.shaderProgram,o=t.utils.createTextureVertexShader(t.GL),s=null,u=new t.vertexAttribute("vertexPosition"),l=new t.vertexAttribute("textureCoord"),c=new t.floatUniform("pointSize",5),f,d=new t.projectionUniform("projectionMatrix"),p=new t.uniform(t.GL.INT,"sampler2d"),h=null;if(n!==undefined){f=new t.modelViewOriginUniform("modelViewMatrix",n)}else{f=new t.modelViewUniform("modelViewMatrix")}p.set(0);a.addVertexAttribute(u,t.vertexAttributeKeys.Position);a.addVertexAttribute(l,t.vertexAttributeKeys.TextureCoordinate);a.addUniform(c);a.addUniform(f);a.addUniform(d);if(e){s=t.utils.createRgbaTextureFragmentShader(t.GL)}else{s=t.utils.createTextureFragmentShader(t.GL)}h=new t.floatUniform("opacity",1);a.addUniform(h);a.addShader(s);a.addShader(o);r.addAttribute(a);r.addAttribute(i);return r};t.utils.createGeometryMaterial=function(){"use strict";var e=new t.material,n=new t.shaderProgram,r=5,i=1,a=t.utils.createVertexShader(t.GL),o=t.utils.createFragmentShader(t.GL),s=new t.vertexAttribute("vertexPosition"),u=new t.vertexAttribute("vertexColor"),l=new t.floatUniform("pointSize",r),c=new t.floatUniform("opacity",i),f=new t.modelViewUniform("modelViewMatrix"),d=new t.projectionUniform("projectionMatrix");n.addVertexAttribute(s,t.vertexAttributeKeys.Position);n.addVertexAttribute(u,t.vertexAttributeKeys.Color);n.addUniform(l);n.addUniform(c);n.addUniform(f);n.addUniform(d);n.addShader(o);n.addShader(a);e.addAttribute(n);return e};t.utils.createPointGeometryMaterial=function(e){"use strict";e=e===undefined?1:e;var n=new t.material,r=new t.blend,i=new t.shaderProgram,a=t.utils.createPointVertexShader(t.GL),o=t.utils.createFragmentShader(t.GL),s=new t.vertexAttribute("vertexPosition"),u=new t.vertexAttribute("vertexColor"),l=new t.vertexAttribute("vertexSize"),c=new t.floatUniform("opacity",e),f=new t.modelViewUniform("modelViewMatrix"),d=new t.projectionUniform("projectionMatrix");i.addVertexAttribute(s,t.vertexAttributeKeys.Position);i.addVertexAttribute(u,t.vertexAttributeKeys.Color);i.addVertexAttribute(l,t.vertexAttributeKeys.Scalar);i.addUniform(c);i.addUniform(f);i.addUniform(d);i.addShader(o);i.addShader(a);n.addAttribute(i);n.addAttribute(r);return n};t.utils.createPhongMaterial=function(){"use strict";var e=new t.material,n=new t.shaderProgram,r=t.utils.createPhongVertexShader(t.GL),i=t.utils.createPhongFragmentShader(t.GL),a=new t.vertexAttribute("vertexPosition"),o=new t.vertexAttribute("vertexNormal"),s=new t.vertexAttribute("vertexColor"),u=new t.floatUniform("opacity",1),l=new t.modelViewUniform("modelViewMatrix"),c=new t.normalMatrixUniform("normalMatrix"),f=new t.projectionUniform("projectionMatrix");n.addVertexAttribute(a,t.vertexAttributeKeys.Position);n.addVertexAttribute(o,t.vertexAttributeKeys.Normal);n.addVertexAttribute(s,t.vertexAttributeKeys.Color);n.addUniform(u);n.addUniform(l);n.addUniform(f);n.addUniform(c);n.addShader(i);n.addShader(r);e.addAttribute(n);return e};t.utils.createColorMaterial=function(){"use strict";var e=new t.material,n=new t.blend,r=new t.shaderProgram,i=t.utils.createVertexShader(t.GL),a=t.utils.createFragmentShader(t.GL),o=new t.vertexAttribute("vertexPosition"),s=new t.vertexAttribute("textureCoord"),u=new t.vertexAttribute("vertexColor"),l=new t.floatUniform("pointSize",5),c=new t.floatUniform("opacity",1),f=new t.modelViewUniform("modelViewMatrix"),d=new t.projectionUniform("projectionMatrix");r.addVertexAttribute(o,t.vertexAttributeKeys.Position);r.addVertexAttribute(u,t.vertexAttributeKeys.Color);r.addVertexAttribute(s,t.vertexAttributeKeys.TextureCoordinate);r.addUniform(l);r.addUniform(c);r.addUniform(f);r.addUniform(d);r.addShader(a);r.addShader(i);e.addAttribute(r);e.addAttribute(n);return e};t.utils.createColorMappedMaterial=function(e){"use strict";if(!e){e=new t.lookupTable}var n=e.range(),r=new t.material,i=new t.blend,a=new t.shaderProgram,o=t.utils.createVertexShaderColorMap(t.GL,n[0],n[1]),s=t.utils.createFragmentShaderColorMap(t.GL),u=new t.vertexAttribute("vertexPosition"),l=new t.vertexAttribute("vertexScalar"),c=new t.floatUniform("pointSize",5),f=new t.floatUniform("opacity",1),d=new t.floatUniform("lutMin",n[0]),p=new t.floatUniform("lutMax",n[1]),h=new t.modelViewUniform("modelViewMatrix"),g=new t.projectionUniform("projectionMatrix"),m=new t.uniform(t.GL.FLOAT,"sampler2d"),v=e;m.set(0);a.addVertexAttribute(u,t.vertexAttributeKeys.Position);a.addVertexAttribute(l,t.vertexAttributeKeys.Scalar);a.addUniform(c);a.addUniform(f);a.addUniform(d);a.addUniform(p);a.addUniform(h);a.addUniform(g);a.addShader(s);a.addShader(o);r.addAttribute(a);r.addAttribute(i);r.addAttribute(v);return r};t.utils.updateColorMappedMaterial=function(e,t){"use strict";if(!e){console.log("[warning] Invalid material. Nothing to update.");return}if(!t){console.log("[warning] Invalid lookup table. Nothing to update.");return}var n=e.shaderProgram().uniform("lutMin"),r=e.shaderProgram().uniform("lutMax");n.set(t.range()[0]);r.set(t.range()[1]);e.setAttribute(t)};t.utils.createSolidColorMaterial=function(e){"use strict";if(!e){e=[1,1,1]}var n=new t.material,r=new t.blend,i=new t.shaderProgram,a=t.utils.createVertexShaderSolidColor(t.GL),o=t.utils.createFragmentShaderSolidColor(t.GL,e),s=new t.vertexAttribute("vertexPosition"),u=new t.floatUniform("pointSize",5),l=new t.floatUniform("opacity",1),c=new t.modelViewUniform("modelViewMatrix"),f=new t.projectionUniform("projectionMatrix");i.addVertexAttribute(s,t.vertexAttributeKeys.Position);i.addUniform(u);i.addUniform(l);i.addUniform(c);i.addUniform(f);i.addShader(o);i.addShader(a);n.addAttribute(i);n.addAttribute(r);return n};t.utils.createPointSpritesMaterial=function(e,n){"use strict";var r=n===undefined?[0,1]:n.range(),i=new t.material,a=new t.blend,o=new t.shaderProgram,s=t.utils.createPointSpritesVertexShader(t.GL),u=t.utils.createPointSpritesFragmentShader(t.GL),l=new t.vertexAttribute("vertexPosition"),c=new t.vertexAttribute("vertexColor"),f=new t.floatUniform("height",0),d=new t.floatUniform("vertexColorWeight",0),p=new t.floatUniform("lutMin",r[0]),h=new t.floatUniform("lutMax",r[1]),g=new t.modelViewUniform("modelViewMatrix"),m=new t.projectionUniform("projectionMatrix"),v=new t.uniform(t.GL.INT,"opacityLookup"),y=new t.uniform(t.GL.INT,"scalarsToColors"),b=new t.uniform(t.GL.INT,"useScalarsToColors"),M=new t.uniform(t.GL.INT,"useVertexColors"),x=new t.uniform(t.GL.FLOAT_VEC2,"pointSize"),w=new t.texture;v.set(0);y.set(1);b.set(0);M.set(0);x.set([1,1]);o.addVertexAttribute(l,t.vertexAttributeKeys.Position);o.addVertexAttribute(c,t.vertexAttributeKeys.Color);o.addUniform(f);o.addUniform(d);o.addUniform(g);o.addUniform(m);o.addUniform(v);o.addUniform(M);o.addUniform(b);o.addUniform(x);o.addShader(u);o.addShader(s);i.addAttribute(o);i.addAttribute(a);if(n){o.addUniform(y);b.set(1);o.addUniform(p);o.addUniform(h);n.setTextureUnit(1);i.addAttribute(n)}w.setImage(e);w.setTextureUnit(0);i.addAttribute(w);return i};t.utils.createPlane=function(e,n,r,i,a,o,s,u,l){"use strict";var c=new t.mapper,f=new t.planeSource,d=t.utils.createGeometryMaterial(),p=new t.actor;f.setOrigin(e,n,r);f.setPoint1(i,a,o);f.setPoint2(s,u,l);c.setGeometryData(f.create());p.setMapper(c);p.setMaterial(d);return p};t.utils.createTexturePlane=function(e,n,r,i,a,o,s,u,l,c){"use strict";var f=new t.mapper,d=new t.planeSource,p=t.utils.createTextureMaterial(c,[e,n,r]),h=new t.actor;d.setPoint1(i-e,a-n,o-r);d.setPoint2(s-e,u-n,l-r);f.setGeometryData(d.create());h.setMapper(f);h.setMaterial(p);return h};t.utils.createPoints=function(e,n,r,i,a){"use strict";if(!e){console.log("[ERROR] Cannot create points without positions");return null}a=a===undefined?1:a;var o=new t.mapper,s=new t.pointSource,u=t.utils.createPointGeometryMaterial(a),l=new t.actor;s.setPositions(e);if(r){s.setColors(r)}if(i){s.setTextureCoordinates(i)}if(n){s.setSize(n)}else{s.setSize(1)}o.setGeometryData(s.create());l.setMapper(o);l.setMaterial(u);return l};t.utils.createPointSprites=function(e,n,r,i){"use strict";if(!e){console.log("[ERROR] Point sprites requires an image");return null}if(!n){console.log("[ERROR] Cannot create points without positions");return null}var a=new t.mapper,o=new t.pointSource,s=t.utils.createPointSpritesMaterial(e),u=new t.actor;o.setPositions(n);if(r){o.setColors(r)}if(i){o.setTextureCoordinates(i)}a.setGeometryData(o.create());u.setMapper(a);u.setMaterial(s);return u};t.utils.createLines=function(e,n){"use strict";if(!e){console.log("[ERROR] Cannot create points without positions");return null}var r=new t.mapper,i=new t.lineSource,a=t.utils.createGeometryMaterial(),o=new t.actor;i.setPositions(e);if(n){i.setColors(n)}r.setGeometryData(i.create());o.setMapper(r);o.setMaterial(a);return o};t.utils.createColorLegend=function(e,n,r,i,a,o,s){"use strict";if(!n){console.log("[error] Invalid lookup table");return[]}function u(e,n,r){if(!n){console.log("[error] Create labels requires positions (x,y,z) array");return}if(n.length%3!==0){console.log("[error] Create labels require positions array contain 3d points");return}if(!r){console.log("[error] Create labels requires Valid range");return}var i=null,a=t.utils.computePowerOfTwo(48),o=0,s=[],u=[],l=[],c=[],f=n[6]-n[0],d=4,p;u.length=3;l.length=3;c.length=3;for(p=0;p<2;p+=1){o=p*(n.length-3);u[0]=n[o]-f;u[1]=n[o+1]-2*f;u[2]=n[o+2];l[0]=n[o]+f;l[1]=u[1];l[2]=u[2];c[0]=u[0];c[1]=n[1];c[2]=u[2];i=t.utils.createTexturePlane(u[0],u[1],u[2],l[0],l[1],l[2],c[0],c[1],c[2],true);i.setReferenceFrame(t.boundingObject.ReferenceFrame.Absolute);i.material().setBinNumber(t.material.RenderBin.Overlay);i.material().addAttribute(t.utils.create2DTexture(r[p].toFixed(2).toString(),12,null));s.push(i)}u[0]=(n[0]+n[n.length-3]-a)*.5;u[1]=n[1]+d;u[2]=n[2];l[0]=u[0]+a;l[1]=u[1];l[2]=u[2];c[0]=u[0];c[1]=u[1]+a;c[2]=u[2];i=t.utils.createTexturePlane(u[0],u[1],u[2],l[0],l[1],l[2],c[0],c[1],c[2],true);i.setReferenceFrame(t.boundingObject.ReferenceFrame.Absolute);i.material().setBinNumber(t.material.RenderBin.Overlay);i.material().addAttribute(t.utils.create2DTexture(e,24,null));s.push(i);return s}function l(e,t,n,r,i,a,o,s,l,c,f,d,p,h,g){g=g;var m=l-a,v=null,y=m/d,b=[],M=[];for(v=0;v<=d;v+=1){b.push(a+y*v);b.push(o);b.push(s);b.push(a+y*v);b.push(o+h);b.push(s)}M=M.concat(u(e,b,t.range()));return M}var c=r[0]+i,f=r[1],d=0,p=r[0],h=r[1]+a,g=0,m=[],v=null,y=null,b=t.groupNode();v=t.utils.createTexturePlane(r[0],r[1],r[2],c,f,d,p,h,g,true);y=v.material();y.addAttribute(n);v.setMaterial(y);b.addChild(v);v.material().setBinNumber(t.material.RenderBin.Overlay);v.setReferenceFrame(t.boundingObject.ReferenceFrame.Absolute);m.push(v);m=m.concat(l(e,n,r[0],r[1],r[1],p,f,d,c,f,d,o,s,5,3));return m};t.utils.create2DTexture=function(e,n,r,i,a,o,s){"use strict";var u=document.getElementById("textRendering"),l=null,c=t.texture();i=i||"sans-serif";a=a||"center";o=o||"bottom";if(typeof s==="undefined"){s=true}if(!u){u=document.createElement("canvas")}l=u.getContext("2d");u.setAttribute("id","textRendering");u.style.display="none";u.height=t.utils.computePowerOfTwo(8*n);u.width=u.height;l.fillStyle="rgba(0, 0, 0, 0)";l.fillRect(0,0,l.canvas.width,l.canvas.height);l.fillStyle="rgba(200, 85, 10, 1.0)";l.textAlign=a;l.textBaseline=o;l.font=4*n+"px "+i;if(s){l.font="bold "+l.font}l.fillText(e,u.width/2,u.height/2,u.width);c.setImage(u);c.updateDimensions();return c};t.picker=function(){"use strict";if(!(this instanceof t.picker)){return new t.picker}t.object.call(this);var e=[];this.getActors=function(){return e};this.pick=function(t,n,r){if(t===undefined){return 0}if(n===undefined){return 0}if(r===undefined){return 0}e=[];var i=r.camera(),a=r.width(),s=r.height(),u=i.focalPoint(),l=o.fromValues(u[0],u[1],u[2],1),c=r.worldToDisplay(l,i.viewMatrix(),i.projectionMatrix(),a,s),f=o.fromValues(t,n,c[2],1),d=r.displayToWorld(f,i.viewMatrix(),i.projectionMatrix(),a,s),p=i.position(),h=[],g,m,v,y,b,M,x,w,A,T,C;for(v=0;v<3;v+=1){h[v]=d[v]-p[v]}g=r.sceneRoot().children();m=0;for(v=0;v<g.length;v+=1){C=g[v];if(C.visible()===true){y=C.bounds();if(h[0]>=0){b=(y[0]-p[0])/h[0];M=(y[1]-p[0])/h[0]}else{b=(y[1]-p[0])/h[0];M=(y[0]-p[0])/h[0]}if(h[1]>=0){x=(y[2]-p[1])/h[1];w=(y[3]-p[1])/h[1]}else{x=(y[3]-p[1])/h[1];w=(y[2]-p[1])/h[1]}if(b>w||x>M){continue}if(x>b){b=x}if(w<M){M=w}if(h[2]>=0){A=(y[4]-p[2])/h[2];T=(y[5]-p[2])/h[2]}else{A=(y[5]-p[2])/h[2];T=(y[4]-p[2])/h[2]}if(b>T||A>M){continue}if(A>b){b=A}if(T<M){M=T}e[m]=C;m+=1}}return m};return this};inherit(t.picker,t.object);t.shapefileReader=function(){"use strict";if(!(this instanceof t.shapefileReader)){return new t.shapefileReader}var e=this;var n=0;var r=1;var i=5;var a=3;this.int8=function(e,t){return e.charCodeAt(t)};this.bint32=function(e,t){return((e.charCodeAt(t)&255)<<24)+((e.charCodeAt(t+1)&255)<<16)+((e.charCodeAt(t+2)&255)<<8)+(e.charCodeAt(t+3)&255)};this.lint32=function(e,t){return((e.charCodeAt(t+3)&255)<<24)+((e.charCodeAt(t+2)&255)<<16)+((e.charCodeAt(t+1)&255)<<8)+(e.charCodeAt(t)&255)};this.bint16=function(e,t){return((e.charCodeAt(t)&255)<<8)+(e.charCodeAt(t+1)&255)};this.lint16=function(e,t){return((e.charCodeAt(t+1)&255)<<8)+(e.charCodeAt(t)&255)};this.ldbl64=function(e,t){var n=e.charCodeAt(t)&255;var r=e.charCodeAt(t+1)&255;var i=e.charCodeAt(t+2)&255;var a=e.charCodeAt(t+3)&255;var o=e.charCodeAt(t+4)&255;var s=e.charCodeAt(t+5)&255;var u=e.charCodeAt(t+6)&255;var l=e.charCodeAt(t+7)&255;var c=1-2*(l>>7);var f=((l&127)<<4)+((u&240)>>4)-1023;var d=(u&15)*Math.pow(2,48)+s*Math.pow(2,40)+o*Math.pow(2,32)+a*Math.pow(2,24)+i*Math.pow(2,16)+r*Math.pow(2,8)+n;return c*(1+d*Math.pow(2,-52))*Math.pow(2,f)};this.lfloat32=function(e,t){var n=e.charCodeAt(t)&255;var r=e.charCodeAt(t+1)&255;var i=e.charCodeAt(t+2)&255;var a=e.charCodeAt(t+3)&255;var o=1-2*(a>>7);var s=((a&127)<<1)+((i&254)>>7)-127;var u=(i&127)*Math.pow(2,16)+r*Math.pow(2,8)+n;return o*(1+u*Math.pow(2,-23))*Math.pow(2,s)};this.str=function(e,t,n){var r=[];var i=t;while(i<t+n){var a=e[i];if(a.charCodeAt(0)!==0){r.push(a)}else{break}i+=1}return r.join("")};this.readHeader=function(e){var t=this.bint32(e,0);var n=this.bint32(e,24);var r=this.lint32(e,28);var i=this.lint32(e,32);return{code:t,length:n,version:r,shapetype:i}};this.loadShx=function(t){var n=[];var r=function(r){n.push(2*e.bint32(t,r));return r+8};var i=100;while(i<t.length){i=r(i)}return n};this.Shapefile=function(e){var t=e.path;u.ajax({url:t+".shx",mimeType:"text/plain; charset=x-user-defined",success:function(n){var r=this.loadShx(n);u.ajax({url:t+".shp",mimeType:"text/plain; charset=x-user-defined",success:function(n){u.ajax({url:t+".dbf",mimeType:"text/plain; charset=x-user-defined",success:function(t){var i=this.loadShp(n,t,r,e);e.success(i)}})}})}})};this.localShapefile=function(t){var n=t.shx;var r=t.shp;var i=t.dbf;var a=new FileReader;a.onloadend=function(){var n=e.loadShx(a.result);var o=new FileReader;o.onloadend=function(){var r=o.result;var a=new FileReader;a.onloadend=function(){var i=a.result;var o=e.loadShp(r,i,n,t);t.success(o)};a.readAsBinaryString(i)};o.readAsBinaryString(r)};a.readAsBinaryString(n)};this.loadDBF=function(t){var n=function(n){var r=e.str(t,n,10);var i=e.str(t,n+11,1);var a=e.int8(t,n+16);return{name:r,type:i,length:a}};var r=e.int8(t,0);if(r===4){throw"Level 7 dBASE not supported"}var i=e.lint32(t,4);var a=e.lint16(t,8);var o=e.lint16(t,10);var s=32;var u=32;var l=s;var c=[];while(l<a-1){c.push(n(l));l+=u}var f=[];var d=a;while(d<a+i*o){var p=e.str(t,d,1);if(p==="*"){d+=o}else{d+=1;var h={};for(var g=0;g<c.length;g+=1){var m=c[g];var v;if(m.type==="C"){v=e.str(t,d,m.length).trim()}else if(m.type==="N"){v=parseFloat(e.str(t,d,m.length))}d+=m.length;h[m.name]=v}f.push(h)}}return f};this.loadShp=function(t,o,s,u){u=u;var l=[];var c=function(n,r,i){var a=[];for(var o=i-1;o>=r;o-=1){var s=e.ldbl64(t,n+16*o);var u=e.ldbl64(t,n+16*o+8);a.push([s,u])}return a};var f=function(o){var s=o+8;var u=e.lint32(t,s);var f,d,p,h,g,m,v,y,b;if(u===n){console.log("NULL Shape")}else if(u===r){var M=e.ldbl64(t,s+4);var x=e.ldbl64(t,s+12);l.push({type:"Point",attr:{},geom:[[M,x]]})}else if(u===i){f=e.lint32(t,s+36);d=e.lint32(t,s+40);p=o+52;h=o+52+4*f;b=[];for(g=0;g<f;g+=1){m=e.lint32(t,p+g*4);if(g+1<f){v=e.lint32(t,p+(g+1)*4)}else{v=d}y=c(h,m,v);b.push(y)}l.push({type:"Polygon",attr:{},geom:[b]})}else if(u===a){f=e.lint32(t,s+36);d=e.lint32(t,s+40);p=o+52;h=o+52+4*f;b=[];for(g=0;g<f;g+=1){m=e.lint32(t,p+g*4);if(g+1<f){v=e.lint32(t,p+(g+1)*4)}else{v=d}y=c(h,m,v);b.push(y)}l.push({type:"Polyline",attr:{},geom:[b]})}else{throw"Not Implemented: "+u}};var d=this.loadDBF(o),p;for(p=0;p<s.length;p+=1){var h=s[p];f(h)}var g=[];for(p=0;p<l.length;p+=1){var m=l[p];m.attr=d[p];g.push(m)}return g};return this};t.vtkReader=function(){"use strict";if(!(this instanceof t.vtkReader)){return new t.vtkReader}var e=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],n=[],r={},i=0,o=null,s=null,u=-1,l="",c=0,f=0,d=null,p=0;if(n.length===0){for(p=0;p<e.length;p+=1){n[e[p]]=p}}this.ntos=function(e){var t;t=e.toString(16);if(t.length===1){t="0"+t}t="%"+t;return unescape(t)};this.readReverseBase64=function(){var e;if(!l){return u}while(true){if(c>=l.length){return u}e=l.charAt(c);c+=1;if(n[e]){return n[e]}if(e==="A"){return 0}}return u};this.decode64=function(e){var t="",n=new Array(4),r=false;l=e;c=0;while(!r&&(n[0]=this.readReverseBase64())!==u&&(n[1]=this.readReverseBase64())!==u){n[2]=this.readReverseBase64();n[3]=this.readReverseBase64();t+=this.ntos(n[0]<<2&255|n[1]>>4);if(n[2]!==u){t+=this.ntos(n[1]<<4&255|n[2]>>2);if(n[3]!==u){t+=this.ntos(n[2]<<6&255|n[3])}else{r=true}}else{r=true}}return t};this.readNumber=function(e){var t=e[f++]+(e[f++]<<8)+(e[f++]<<16)+(e[f++]<<24);return t};this.readF3Array=function(e,t){var n=e*4*3,r=new Int8Array(n),i=null,a;for(a=0;a<n;a+=1){r[a]=t[f];f+=1}i=new Float32Array(r.buffer);return i};this.readColorArray=function(e,t,n){var r,i=0,a=new Array(e*3);for(r=0;r<e;r+=1){a[i++]=t[f++]/255;a[i++]=t[f++]/255;a[i++]=t[f++]/255;f++}n.insert(a)};this.parseObject=function(e){var n=new t.geometryData,r=t.mapper(),i=[],o=null,s=null,u,l=null,c=null,h,g,m,v,y,b,M,x,w,A;s=atob(e.data);for(p=0;p<s.length;p+=1){i[p]=s.charCodeAt(p)&255}f=0;u=this.readNumber(i);o=String.fromCharCode(i[f]);f+=1;n.setName(o);if(o==="L"){l=this.parseLineData(n,i);c=t.utils.createGeometryMaterial()}else if(o==="M"){l=this.parseMeshData(n,i);c=t.utils.createPhongMaterial()}else if(o==="P"){l=this.parsePointData(n,i);c=t.utils.createGeometryMaterial()}else if(o==="C"){g=this.parseColorMapData(n,i,u);b=[];for(p=0;p<g.colors.length;p+=1){b.push(g.colors[p][1]);b.push(g.colors[p][2]);b.push(g.colors[p][3]);b.push(g.colors[p][0]*255)}y=new t.lookupTable;y.setColorTable(b);M=d.renderWindow().windowSize();x=g.size[0]*M[0];w=g.size[1]*M[1];A=[g.position[0]*M[0],(1-g.position[1])*M[1],0];A[1]=A[1]-w;w=30;return t.utils.createColorLegend(g.title,y,A,x,w,3,0)}else{console.log("Ignoring unrecognized encoded data type "+o)}r.setGeometryData(n);if(e.hasTransparency){m=c.shaderProgram();v=m.uniform("opacity");console.log("opacity ",e.opacity);v.set(e.opacity);c.setBinNumber(1e3)}h=t.actor();h.setMapper(r);h.setMaterial(c);h.setMatrix(a.transpose(a.create(),l));return[h]};this.parseLineData=function(e,n){var r=null,i=null,o=null,s=a.create(),u,l,c,d,p,h,g,m,v=null,y=0;l=this.readNumber(n);v=new Array(l*3);r=new t.sourceDataP3fv;c=this.readF3Array(l,n);for(m=0;m<l;m+=1){v[y++]=c[m*3];v[y++]=c[m*3+1];v[y++]=c[m*3+2]}r.insert(v);e.addSource(r);i=new t.sourceDataC3fv;this.readColorArray(l,n,i);e.addSource(i);o=new t.lines;e.addPrimitive(o);u=this.readNumber(n);d=new Int8Array(u*2);for(m=0;m<u*2;m+=1){d[m]=n[f];f+=1}p=new Uint16Array(d.buffer);o.setIndices(p);o.setPrimitiveType(t.GL.LINES);h=16*4;d=new Int8Array(h);for(m=0;m<h;m+=1){d[m]=n[f];f+=1}g=new Float32Array(d.buffer);a.copy(s,g);return s};this.parseMeshData=function(e,n){var r=null,i=null,o=null,s=a.create(),u=null,l,c,d,p,h,g,m,v,y=null,b=0;c=this.readNumber(n);y=new Array(c*6);r=new t.sourceDataP3N3f;d=this.readF3Array(c,n);o=this.readF3Array(c,n);for(v=0;v<c;v+=1){y[b++]=d[v*3];y[b++]=d[v*3+1];y[b++]=d[v*3+2];y[b++]=o[v*3];y[b++]=o[v*3+1];y[b++]=o[v*3+2]}r.insert(y);e.addSource(r);i=new t.sourceDataC3fv;this.readColorArray(c,n,i);e.addSource(i);p=[];u=new t.triangles;l=this.readNumber(n);p=new Int8Array(l*2);for(v=0;v<l*2;v+=1){p[v]=n[f];f+=1}h=new Uint16Array(p.buffer);u.setIndices(h);e.addPrimitive(u);g=16*4;p=new Int8Array(g);for(v=0;v<g;v+=1){p[v]=n[f];f+=1}m=new Float32Array(p.buffer);a.copy(s,m);return s};this.parsePointData=function(e,n){var r,i,o,s,u,l=a.create(),c=null,d=null,h=null,g,m=null,v=0;r=this.readNumber(n);m=new Array(r*3);c=new t.sourceDataP3fv;i=this.readF3Array(r,n);o=new Uint16Array(r);for(p=0;p<r;p+=1){o[p]=p;m[v++]=i[p*3];m[v++]=i[p*3+1];m[v++]=i[p*3+2]}c.insert(m);e.addSource(c);d=new t.sourceDataC3fv;this.readColorArray(r,n,d);e.addSource(d);h=new t.points;h.setIndices(o);e.addPrimitive(h);u=16*4;s=new Int8Array(u);for(p=0;p<u;p+=1){s[p]=n[f];f+=1}g=new Float32Array(s.buffer);a.copy(l,g);return l};this.parseColorMapData=function(e,t,n){var r,i,a,o,s,u={};u.numOfColors=n;i=8;r=new Int8Array(i);for(o=0;o<i;o+=1){r[o]=t[f];f+=1}u.position=new Float32Array(r.buffer);i=8;r=new Int8Array(i);for(o=0;o<i;o+=1){r[o]=t[f];f+=1}u.size=new Float32Array(r.buffer);u.colors=[];for(s=0;s<u.numOfColors;s+=1){r=new Int8Array(4);for(o=0;o<4;o+=1){r[o]=t[f];f+=1}a=[new Float32Array(r.buffer)[0],t[f++],t[f++],t[f++]];u.colors[s]=a}u.orientation=t[f++];u.numOfLabels=t[f++];u.title="";while(f<t.length){u.title+=String.fromCharCode(t[f++])}return u};this.parseSceneMetadata=function(e,t){var n=o.Renderers[t],r=e.camera(),i,a,u;a=(n.size[0]-n.origin[0])*s.width;u=(n.size[1]-n.origin[1])*s.height;e.resize(a,u);r.setCenterOfRotation([n.LookAt[1],n.LookAt[2],n.LookAt[3]]);r.setViewAngleDegrees(n.LookAt[0]);r.setPosition(n.LookAt[7],n.LookAt[8],n.LookAt[9]);r.setFocalPoint(n.LookAt[1],n.LookAt[2],n.LookAt[3]);r.setViewUpDirection(n.LookAt[4],n.LookAt[5],n.LookAt[6]);if(t===0){i=n.Background1;e.setBackgroundColor(i[0],i[1],i[2],1)}else{e.setResizable(false)}e.setLayer(t)};this.initScene=function(){var e,t;if(o===null){return d}for(t=o.Renderers.length-1;t>=0;t-=1){e=this.getRenderer(t);this.parseSceneMetadata(e,t)}return d};this.createViewer=function(e){var n;if(d===null){s=e;d=t.viewer(e);d.init();d.renderWindow().removeRenderer(d.renderWindow().activeRenderer());d.renderWindow().addRenderer(new t.depthPeelRenderer);r[0]=d.renderWindow().activeRenderer();d.renderWindow().resize(e.width,e.height);n=t.pvwInteractorStyle();d.setInteractorStyle(n)}return d};this.deleteViewer=function(){r={};d=null};this.updateCanvas=function(e){s=e;d.renderWindow().resize(e.width,e.height);return d};this.numObjects=function(){return i};this.getRenderer=function(e){var n;n=r[e];if(n===null||typeof n==="undefined"){n=new t.renderer;n.setResetScene(false);n.setResetClippingRange(false);d.renderWindow().addRenderer(n);if(e!==0){n.camera().setClearMask(t.GL.DepthBufferBit)}r[e]=n}return n};this.setVtkScene=function(e){o=e};return this};t.DataBuffers=function(e){"use strict";if(!(this instanceof t.DataBuffers)){return new t.DataBuffers(e)}var n={};var r;if(!e&&e!==0){r=256}else{r=e}var i=0;var a=function(e,t,n,r){if(!e){throw"No destination"}if(!n){n=0}if(!r){r=t.length}for(var i=0;i<r;i+=1){e[n+i]=t[i]}};var o=function(e){var t=r;if(t*2<e){t=e}while(t<e){t*=2}r=t;for(var i in n){if(n.hasOwnProperty(i)){var o=new Float32Array(t*n[i].len);var s=n[i].array;a(o,s);n[i].array=o;n[i].dirty=true}}};this.create=function(e,t){if(!t||t<0){throw"Length of buffer must be a positive integer"}var i=new Float32Array(r*t);n[e]={array:i,len:t,dirty:false};return n[e].array};this.alloc=function(e){if(i+e>=r){o(i+e)}var t=i;i+=e;return t};this.get=function(e){return n[e].array};this.write=function(e,t,i,o){if(i+o>r){throw"Write would exceed buffer size"}a(n[e].array,t,i*n[e].len,o*n[e].len);n[e].dirty=true};this.repeat=function(e,t,i,o){if(i+o>r){throw"Repeat would exceed buffer size"}for(var s=0;s<o;s+=1){a(n[e].array,t,(i+s)*n[e].len,n[e].len)}n[e].dirty=true};this.count=function(){return i};this.data=function(e){return n[e].array}};return t})},function(e,t){e.exports=n;function n(){var e=new Float32Array(4);e[0]=0;e[1]=0;e[2]=0;e[3]=0;return e}},function(e,t){e.exports=n;function n(e){var t=new Float32Array(4);t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];return t}},function(e,t){e.exports=n;function n(e,t,n,r){var i=new Float32Array(4);i[0]=e;i[1]=t;i[2]=n;i[3]=r;return i}},function(e,t){e.exports=n;function n(e,t){e[0]=t[0];e[1]=t[1];e[2]=t[2];e[3]=t[3];return e}},function(e,t){e.exports=n;function n(e,t,n,r,i){e[0]=t;e[1]=n;e[2]=r;e[3]=i;return e}},function(e,t){e.exports=n;function n(e,t,n){e[0]=t[0]+n[0];e[1]=t[1]+n[1];e[2]=t[2]+n[2];e[3]=t[3]+n[3];return e}},function(e,t){e.exports=n;function n(e,t,n){e[0]=t[0]-n[0];e[1]=t[1]-n[1];e[2]=t[2]-n[2];e[3]=t[3]-n[3];return e}},function(e,t){e.exports=n;function n(e,t,n){e[0]=t[0]*n[0];e[1]=t[1]*n[1];e[2]=t[2]*n[2];e[3]=t[3]*n[3];return e}},function(e,t){e.exports=n;function n(e,t,n){e[0]=t[0]/n[0];e[1]=t[1]/n[1];e[2]=t[2]/n[2];e[3]=t[3]/n[3];return e}},function(e,t){e.exports=n;function n(e,t,n){e[0]=Math.min(t[0],n[0]);e[1]=Math.min(t[1],n[1]);e[2]=Math.min(t[2],n[2]);e[3]=Math.min(t[3],n[3]);return e}},function(e,t){e.exports=n;function n(e,t,n){e[0]=Math.max(t[0],n[0]);e[1]=Math.max(t[1],n[1]);e[2]=Math.max(t[2],n[2]);e[3]=Math.max(t[3],n[3]);return e}},function(e,t){e.exports=n;function n(e,t,n,r){e[0]=t[0]+n[0]*r;e[1]=t[1]+n[1]*r;e[2]=t[2]+n[2]*r;e[3]=t[3]+n[3]*r;return e}},function(e,t){e.exports=n;function n(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],a=t[3]-e[3];return Math.sqrt(n*n+r*r+i*i+a*a)}},function(e,t){e.exports=n;function n(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],a=t[3]-e[3];return n*n+r*r+i*i+a*a}},function(e,t){e.exports=n;function n(e){var t=e[0],n=e[1],r=e[2],i=e[3];return Math.sqrt(t*t+n*n+r*r+i*i)}},function(e,t){e.exports=n;function n(e){var t=e[0],n=e[1],r=e[2],i=e[3];return t*t+n*n+r*r+i*i}},function(e,t){e.exports=n;function n(e,t){e[0]=-t[0];e[1]=-t[1];e[2]=-t[2];e[3]=-t[3];return e}},function(e,t){e.exports=n;function n(e,t){e[0]=1/t[0];e[1]=1/t[1];e[2]=1/t[2];e[3]=1/t[3];return e}},function(e,t){e.exports=n;function n(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}},function(e,t){e.exports=n;function n(e,t,n,r){var i=t[0],a=t[1],o=t[2],s=t[3];e[0]=i+r*(n[0]-i);e[1]=a+r*(n[1]-a);e[2]=o+r*(n[2]-o);e[3]=s+r*(n[3]-s);return e}},function(e,t,n){var r=n(244);var i=n(243);e.exports=a;function a(e,t){t=t||1;e[0]=Math.random();e[1]=Math.random();e[2]=Math.random();e[3]=Math.random();r(e,e);i(e,e,t);return e}},function(e,t){e.exports=n;function n(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3];e[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o;e[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o;e[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o;e[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o;return e}},function(e,t){e.exports=n;function n(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[0],s=n[1],u=n[2],l=n[3],c=l*r+s*a-u*i,f=l*i+u*r-o*a,d=l*a+o*i-s*r,p=-o*r-s*i-u*a;e[0]=c*l+p*-o+f*-u-d*-s;e[1]=f*l+p*-s+d*-o-c*-u;e[2]=d*l+p*-u+c*-s-f*-o;e[3]=t[3];return e}},function(e,t,n){var r={"./aea.js":213,"./aeqd.js":224,"./cass.js":211,"./cea.js":215,"./eqc.js":216,"./eqdc.js":222,"./equi.js":595,"./etmerc.js":140,"./gauss.js":205,"./gnom.js":214,"./gstmerc.js":596,"./krovak.js":210,"./laea.js":212,"./lcc.js":209,"./longlat.js":194,"./merc.js":193,"./mill.js":219,"./moll.js":221,"./nzmg.js":218,"./omerc.js":208,"./ortho.js":225,"./poly.js":217,"./qsc.js":226,"./robin.js":227,"./sinu.js":220,"./somerc.js":207,"./stere.js":206,"./sterea.js":204,"./tmerc.js":198,"./utm.js":203,"./vandg.js":223};function i(e){return n(a(e))}function a(e){var t=r[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}i.keys=function e(){return Object.keys(r)};i.resolve=a;e.exports=i;i.id=594},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t["init"]=i;t["forward"]=a;t["inverse"]=o;n.d(t,"names",function(){return s});var r=n(12);function i(){this.x0=this.x0||0;this.y0=this.y0||0;this.lat0=this.lat0||0;this.long0=this.long0||0}function a(e){var t=e.x;var n=e.y;var i=Object(r["a"])(t-this.long0);var a=this.x0+this.a*i*Math.cos(this.lat0);var o=this.y0+this.a*n;this.t1=a;this.t2=Math.cos(this.lat0);e.x=a;e.y=o;return e}function o(e){e.x-=this.x0;e.y-=this.y0;var t=e.y/this.a;var n=Object(r["a"])(this.long0+e.x/(this.a*Math.cos(this.lat0)));e.x=n;e.y=t}var s=["equi"];t["default"]={init:i,forward:a,inverse:o,names:s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t["init"]=s;t["forward"]=u;t["inverse"]=l;n.d(t,"names",function(){return c});var r=n(597);var i=n(141);var a=n(202);var o=n(598);function s(){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);this.lc=this.long0;this.rs=Math.sqrt(1+this.e*this.e*Math.pow(Math.cos(this.lat0),4)/(1-this.e*this.e));var t=Math.sin(this.lat0);var n=Math.asin(t/this.rs);var i=Math.sin(n);this.cp=Object(r["a"])(0,n,i)-this.rs*Object(r["a"])(this.e,this.lat0,t);this.n2=this.k0*this.a*Math.sqrt(1-this.e*this.e)/(1-this.e*this.e*t*t);this.xs=this.x0;this.ys=this.y0-this.n2*n;if(!this.title){this.title="Gauss Schreiber transverse mercator"}}function u(e){var t=e.x;var n=e.y;var o=this.rs*(t-this.lc);var s=this.cp+this.rs*Object(r["a"])(this.e,n,Math.sin(n));var u=Math.asin(Math.sin(o)/Object(a["a"])(s));var l=Object(r["a"])(0,u,Math.sin(u));e.x=this.xs+this.n2*l;e.y=this.ys+this.n2*Math.atan(Object(i["a"])(s)/Math.cos(o));return e}function l(e){var t=e.x;var n=e.y;var s=Math.atan(Object(i["a"])((t-this.xs)/this.n2)/Math.cos((n-this.ys)/this.n2));var u=Math.asin(Math.sin((n-this.ys)/this.n2)/Object(a["a"])((t-this.xs)/this.n2));var l=Object(r["a"])(0,u,Math.sin(u));e.x=this.lc+s/this.rs;e.y=Object(o["a"])(this.e,(l-this.cp)/this.rs);return e}var c=["gstmerg"];t["default"]={init:s,forward:u,inverse:l,names:c}},function(e,t,n){"use strict";var r=n(7);t["a"]=function(e,t,n){if(Math.abs(t)>r["d"]){return Number.NaN}if(t===r["d"]){return Number.POSITIVE_INFINITY}if(t===-1*r["d"]){return Number.NEGATIVE_INFINITY}var i=e*n;return Math.log(Math.tan((r["d"]+t)/2))+e*Math.log((1-i)/(1+i))/2}},function(e,t,n){"use strict";var r=n(599);t["a"]=function(e,t){var n=Object(r["a"])(1,t);var i=0;var a=0;do{i=n;a=e*Math.sin(i);n=Object(r["a"])(Math.exp(e*Math.log((1+a)/(1-a))/2),t)}while(Math.abs(n-i)>1e-12);return n}},function(e,t,n){"use strict";var r=n(7);t["a"]=function(e,t){return 2*Math.atan(e*Math.exp(t))-r["d"]}},function(e,t,n){"use strict";var r=n(1);var i=n(105);var a=n(188);var o=n(11);var s=n(2);var u=n(17);var l=n(3);var c=n(248);var f=n(80);var d=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}i.call(this,t);var r=n(146);var d=n(20);var p=n(5);var h=this,g=this._init,m=this._exit,v=this.draw,y=this._update,b=d(),M,x=null,w=[],A=[],T,C,S;var D={closed:{dataType:"boolean",keys:["closed","close"]},fill:{dataType:"boolean",keys:["fill"]},fillColor:{dataType:"color",keys:["fillColor","fill-color","marker-color","fill"]},fillOpacity:{dataType:"opacity",keys:["fillOpacity","fill-opacity"]},lineCap:{dataType:"text",keys:["lineCap","line-cap"]},lineJoin:{dataType:"text",keys:["lineJoin","line-join"]},radius:{dataType:"positive",keys:["radius"]},scaled:{dataType:"booleanOrNumber",keys:["scaled"]},stroke:{dataType:"boolean",keys:["stroke"]},strokeColor:{dataType:"color",keys:["strokeColor","stroke-color","stroke"]},strokeOffset:{dataType:"number",keys:["strokeOffset","stroke-offset"]},strokeOpacity:{dataType:"opacity",keys:["strokeOpacity","stroke-opacity"]},strokeWidth:{dataType:"positive",keys:["strokeWidth","stroke-width"]}};var I={offset:"coordinate2",rotateWithMap:"boolean",rotation:"angle",scaleWithMap:"boolean",scale:"booleanOrNumber",shadowBlur:"numberOrBlank",shadowOffset:"coordinate2",strokeWidth:"numberOrBlank",visible:"boolean"};f.usedStyles.forEach(function(e){D[e]={option:"labelStyle",dataType:I[e]||"text",keys:[e,"label"+e.charAt(0).toUpperCase()+e.slice(1),e.replace(/([A-Z])/g,"-$1").toLowerCase(),"label-"+e.replace(/([A-Z])/g,"-$1").toLowerCase()]}});M=l.extend(true,{},{dblClickTime:300,adjacentPointProximity:5,continuousPointProximity:5,continuousPointColinearity:1*Math.PI/180,finalPointProximity:10,showLabels:true,clickToEdit:false},t);this._processAction=function(e){var t;if(e.state&&e.state.actionRecord&&e.state.actionRecord.owner===a.actionOwner&&h.currentAnnotation){switch(h.mode()){case h.modes.edit:t=h.currentAnnotation.processEditAction(e);if(h.currentAnnotation&&h.currentAnnotation._editHandle&&h.currentAnnotation._editHandle.handle){h.geoTrigger(o.annotation.edit_action,{annotation:h.currentAnnotation,handle:h.currentAnnotation._editHandle?h.currentAnnotation._editHandle.handle:undefined,action:e.event});if(e.event===o.actionup){h._selectEditHandle({data:h.currentAnnotation._editHandle.handle},h.currentAnnotation._editHandle.handle.selected)}}break;default:t=h.currentAnnotation.processAction(e);break}}h._updateFromEvent(t)};this._updateFromEvent=function(e){switch(e){case"remove":h.removeAnnotation(h.currentAnnotation,false);h.mode(null);break;case"done":h.mode(null);break}if(e){h.modified();h.draw()}};this._handleMouseMove=function(e){if(h.mode()&&h.currentAnnotation){var t=h.currentAnnotation.mouseMove(e);if(t){h.modified();h.draw()}}};this._selectEditHandle=function(e,t){if(!e.data||!e.data.editHandle){return}l.each(A[a._editHandleFeatureLevel],function(e,t){t.feature.modified()});h.currentAnnotation.selectEditHandle(e.data,t);h.draw();h.map().node().toggleClass("annotation-input",!!t);h.map().interactor().removeAction(undefined,undefined,a.actionOwner);if(t){var n=h.currentAnnotation.actions(a.state.edit);l.each(n,function(e,t){h.map().interactor().addAction(t)})}return h};this._handleMouseOn=function(e){if(!e.data||!e.data.annotation){return}if(h.mode()===h.modes.edit&&h.currentAnnotation){h._selectEditHandle(e,true);return}if(h.mode()||h.currentAnnotation||!h.options("clickToEdit")){return}e.data.annotation.state(a.state.highlight);h.modified();h.draw()};this._handleMouseOff=function(e){if(!e.data||!e.data.annotation){return}if(h.mode()===h.modes.edit&&e.data.editHandle&&e.data.selected){h._selectEditHandle(e,false);return}if(e.data.annotation.state()===a.state.highlight){e.data.annotation.state(a.state.done);h.modified();h.draw()}};this._handleMouseClick=function(e){var t=false,n;if(h.mode()===h.modes.edit){if(h.map().interactor().hasAction(undefined,undefined,a.actionOwner)){n=h.currentAnnotation.mouseClickEdit(e);h._updateFromEvent(n);return}h.mode(null);h.draw();l.each(A,function(e,t){l.each(t,function(e,t){t.feature._clearSelectedFeatures()})});t=true}else if(h.mode()&&h.currentAnnotation){n=h.currentAnnotation.mouseClick(e);h._updateFromEvent(n);t=!h.mode()}else if(!h.mode()&&!h.currentAnnotation&&h.options("clickToEdit")){var r=h.annotations().filter(function(e){return e.state()===a.state.highlight});if(r.length!==1){return}h.mode(h.modes.edit,r[0]);h.draw();t=true}if(t){h.map().interactor().retriggerMouseMove()}};this.options=function(e,t){if(e===undefined){return M}if(typeof e==="string"&&t===undefined){return M[e]}if(t===undefined){M=l.extend(true,M,e)}else{M[e]=t}h.modified();return h};this.displayDistance=function(e,t,n,r){var i=h.map();if(t!=="display"){t=t===null?i.gcs():t===undefined?i.ingcs():t;e=i.gcsToDisplay(e,t)}if(r!=="display"){r=r===null?i.gcs():r===undefined?i.ingcs():r;n=i.gcsToDisplay(n,r)}var a=Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2));return a};this.addAnnotation=function(e,t){var n=l.inArray(e,w);if(n<0){h.geoTrigger(o.annotation.add_before,{annotation:e});w.push(e);e.layer(h);var r=h.map();t=t===null?r.gcs():t===undefined?r.ingcs():t;if(t!==r.gcs()){e._coordinates(u.transformCoordinates(t,r.gcs(),e._coordinates()))}h.modified();h.draw();h.geoTrigger(o.annotation.add,{annotation:e})}return h};this.removeAnnotation=function(e,t){var n=l.inArray(e,w);if(n>=0){if(e===h.currentAnnotation){h.currentAnnotation=null}e._exit();w.splice(n,1);if(t!==false){h.modified();h.draw()}h.geoTrigger(o.annotation.remove,{annotation:e})}return n>=0};this.removeAllAnnotations=function(e,t){var n=0,r,i=0;while(i<w.length){r=w[i];if(e&&r.state()===a.state.create){i+=1;continue}h.removeAnnotation(r,false);n+=1}if(n&&t!==false){h.modified();h.draw()}return n};this.annotations=function(){return w.slice()};this.annotationById=function(e){if(e!==undefined&&e!==null){e=+e}var t=w.filter(function(t){return t.id()===e});if(t.length){return t[0]}};this.modes={edit:"edit"};this.mode=function(e,t){if(e===undefined){return x}if(e!==x||e===h.modes.edit&&t!==h.editAnnotation){var n,r,i=h.map().node(),s=x;x=e;i.toggleClass("annotation-input",!!(x&&x!==h.modes.edit));if(!S){S=c(i[0])}if(x){S.bind("esc",function(){h.mode(null)})}else{S.unbind("esc")}if(h.currentAnnotation){switch(h.currentAnnotation.state()){case a.state.create:h.removeAnnotation(h.currentAnnotation);break;case a.state.edit:h.currentAnnotation.state(a.state.done);h.modified();h.draw();break}h.currentAnnotation=null}switch(x){case h.modes.edit:h.currentAnnotation=t;h.currentAnnotation.state(a.state.edit);h.modified();break;case"line":n=a.lineAnnotation;break;case"point":n=a.pointAnnotation;break;case"polygon":n=a.polygonAnnotation;break;case"rectangle":n=a.rectangleAnnotation;break}h.map().interactor().removeAction(undefined,undefined,a.actionOwner);if(n){h.currentAnnotation=n({state:a.state.create,layer:h});h.addAnnotation(h.currentAnnotation,null);r=h.currentAnnotation.actions(a.state.create);l.each(r,function(e,t){h.map().interactor().addAction(t)})}h.geoTrigger(o.annotation.mode,{mode:x,oldMode:s});if(s===h.modes.edit){h.modified()}}return h};this.geojson=function(e,t,n,r){if(e!==undefined){var i=s.createFileReader("geojsonReader",{layer:h});if(!i.canRead(e)){return}if(t===true){h.removeAllAnnotations(true,false)}if(t==="update"){l.each(h.annotations(),function(e,t){t.options("updated",false)})}i.read(e,function(e){l.each(e.slice(),function(e,t){h._geojsonFeatureToAnnotation(t,n);h.deleteFeature(t)})});if(t==="update"){l.each(h.annotations(),function(e,t){if(t.options("updated")===false&&t.state()===a.state.done){h.removeAnnotation(t,false)}})}h.modified();h.draw();return w.length}e=null;var o=[];l.each(w,function(e,t){var i=t.geojson(n,r);if(i){o.push(i)}});if(o.length){e={type:"FeatureCollection",features:o}}return e};this._geojsonFeatureToAnnotation=function(e,t){var n=e.data(),r=s.listAnnotations(),i=h.map();t=t===null?i.gcs():t===undefined?i.ingcs():t;l.each(n,function(n,c){var f=(c.properties||{}).annotationType||e.featureType,d=l.extend({},c.properties||{}),g,m,v,y;if(l.inArray(f,r)<0){return}d.style=d.style||{};d.labelStyle=d.labelStyle||{};delete d.annotationType;switch(e.featureType){case"line":g=e.line()(c,n);if(!g||g.length<2){return}g=g.slice();break;case"polygon":g=e.polygon()(c,n);if(!g||!g.outer||g.outer.length<3){return}g=g.outer.slice();if(g[g.length-1][0]===g[0][0]&&g[g.length-1][1]===g[0][1]){g.splice(g.length-1,1);if(g.length<3){return}}break;case"point":g=[e.position()(c,n)];break}for(v=0;v<g.length;v+=1){g[v]=p.normalizeCoordinates(g[v])}m=c.crs&&c.crs.type==="name"&&c.crs.properties&&c.crs.properties.type==="proj4"&&c.crs.properties.name?c.crs.properties.name:t;if(m!==i.gcs()){g=u.transformCoordinates(m,i.gcs(),g)}d.coordinates=g;l.each(D,function(t,r){var i;l.each(r.keys,function(e,t){if(i===undefined){i=h.validateAttribute(d[t],r.dataType)}});if(i===undefined){i=h.validateAttribute(e.style.get(t)(c,n),r.dataType)}if(i!==undefined){d[r.option||"style"][t]=i}});l.each(D,function(e,t){l.each(t.keys,function(e,t){delete d[t]})});if(d.annotationId!==undefined){y=h.annotationById(d.annotationId);if(y){delete d.annotationId}}if(y&&y.type()===f&&y.state()===a.state.done&&y.options("updated")===false){delete d.state;delete d.layer;d.updated=true;y.options(d);h.geoTrigger(o.annotation.update,{annotation:y})}else{d.state=a.state.done;d.layer=h;d.updated="new";h.addAnnotation(s.createAnnotation(f,d),null)}})};this.validateAttribute=function(e,t){var n;if(e===undefined||e===null){return}switch(t){case"angle":if(e===""){break}n=/^\s*([-.0-9eE]+)\s*(deg|rad|grad|turn)?\s*$/.exec((""+e).toLowerCase());if(!n||!isFinite(n[1])){return}var r=n[2]==="grad"?Math.PI/200:n[2]==="deg"?Math.PI/180:n[2]==="turn"?2*Math.PI:1;e=+n[1]*r;break;case"boolean":e=!!e&&["false","no","off"].indexOf((""+e).toLowerCase())<0;break;case"booleanOrNumber":if(!e&&e!==0&&e!==""||["true","false","off","on","no","yes"].indexOf((""+e).toLowerCase())>=0){e=!!e&&["false","no","off"].indexOf((""+e).toLowerCase())<0}else{if(!p.isNonNullFinite(e)){return}e=+e}break;case"coordinate2":if(e===""){break}if(e&&p.isNonNullFinite(e.x)&&p.isNonNullFinite(e.y)){e.x=+e.x;e.y=+e.y;break}try{e=JSON.parse(e)}catch(e){}if(e&&p.isNonNullFinite(e.x)&&p.isNonNullFinite(e.y)){e.x=+e.x;e.y=+e.y;break}if(Array.isArray(e)&&p.isNonNullFinite(e[0])&&p.isNonNullFinite(e[1])){e={x:+e[0],y:+e[1]};break}n=/^\s*([-.0-9eE]+)(?:\s+|\s*,)\s*([-.0-9eE]+)\s*$/.exec(""+e);if(!n||!isFinite(n[1])||!isFinite(n[2])){return}e={x:+n[1],y:+n[2]};break;case"color":e=p.convertColor(e);if(e===undefined||e.r===undefined){return}break;case"number":if(!p.isNonNullFinite(e)){return}e=+e;break;case"numberOrBlank":if(e===""){break}if(!p.isNonNullFinite(e)){return}e=+e;break;case"opacity":if(e===""){return}e=+e;if(isNaN(e)||e<0||e>1){return}break;case"positive":e=+e;if(!isFinite(e)||e<=0){return}break;case"text":e=""+e;break}return e};this._update=function(){if(h.timestamp()>b.timestamp()){var e=h.options("showLabels")?[]:null,t=h.options("clickToEdit")||h.mode()===h.modes.edit;l.each(A,function(e,t){l.each(t,function(e,t){t.data=[];delete t.feature.scaleOnZoom})});l.each(w,function(n,r){var i=r.features();if(e){var a=r.labelRecord();if(a){e.push(a)}}l.each(i,function(e,n){if(A[e]===undefined){A[e]={}}l.each(n,function(n,i){if(!A[e][n]){var a=h.createFeature(n,{gcs:h.map().gcs(),selectionAPI:t});if(!a){var s="error_feature_"+n;if(!h[s]){console.warn("Cannot create a "+n+" feature for "+"annotations.");h[s]=true}return}if(t){a.geoOn(o.feature.mouseon,h._handleMouseOn);a.geoOn(o.feature.mouseoff,h._handleMouseOff)}var u={};l.each(["closed","fill","fillColor","fillOpacity","line","lineCap","lineJoin","polygon","position","radius","stroke","strokeColor","strokeOffset","strokeOpacity","strokeWidth","uniformPolygon"],function(e,t){var n;if(a.style()[t]!==undefined){n=a.style.get(t)}u[t]=function(e,r,i,a){var o=e&&e.style?e.style:e&&e[2]&&e[2].style?e[2].style:i.style;var s=o?o[t]:e;if(p.isFunction(s)){s=s(e,r,i,a)}if(s===undefined&&n){s=n(e,r,i,a)}return s}});a.style(u);A[e][n]={feature:a,style:u,data:[]}}else{a=A[e][n].feature;if(a.selectionAPI()!==!!t){a.selectionAPI(t);if(t){a.geoOn(o.feature.mouseon,h._handleMouseOn);a.geoOn(o.feature.mouseoff,h._handleMouseOff)}else{a.geoOff(o.feature.mouseon,h._handleMouseOn);a.geoOff(o.feature.mouseoff,h._handleMouseOff)}}}var c=i.data||i;if(!Array.isArray(c)){c=[c]}c.forEach(function(t){t.annotation=r;A[e][n].data.push(t);if(i.scaleOnZoom){A[e][n].feature.scaleOnZoom=true}})})})});l.each(A,function(e,t){l.each(t,function(e,t){t.feature.data(t.data)})});h._updateLabels(e);b.modified()}y.call(h,arguments);return h};this._updateLabels=function(e){if(!e||!e.length){h._removeLabelFeature();return h}if(!T){if(!(s.registries.features[h.rendererName()]||{}).text){var t=s.rendererForFeatures(["text"]);C=s.createLayer("feature",h.map(),{renderer:t});h.addChild(C);C._update();h.geoTrigger(o.layerAdd,{target:h,layer:C})}var n={};f.usedStyles.forEach(function(e){n[e]=function(t,n){if(t.style&&t.style[e]!==undefined){return t.style[e]}return(h.options("defaultLabelStyle")||{})[e]}});T=(C||h).createFeature("text",{style:n,gcs:h.map().gcs(),position:function e(t){return t.position}})}T.data(e);return h};this._handleZoom=function(){var e,t=h.features();for(e=0;e<t.length;e+=1){if(t[e].scaleOnZoom){t[e].modified()}}};this._removeLabelFeature=function(){if(C){C._exit();h.removeChild(C);h.geoTrigger(o.layerRemove,{target:h,layer:C});C=T=null}if(T){h.removeFeature(T);T=null}return h};this.draw=function(){h._update();v.call(h);return h};this._init=function(){g.call(h);if(!h.map().interactor()){h.map().interactor(r({actions:[]}))}h.geoOn(o.actionselection,h._processAction);h.geoOn(o.actionmove,h._processAction);h.geoOn(o.actionup,h._processAction);h.geoOn(o.mouseclick,h._handleMouseClick);h.geoOn(o.mousemove,h._handleMouseMove);h.geoOn(o.zoom,h._handleZoom);return h};this._exit=function(){if(S){S.reset()}h._removeLabelFeature();m.call(h);w=[];A=[];return h};return h};r(d,i);s.registerLayer("annotation",d);e.exports=d},function(e,t,n){var r;
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
(function(i,a,o,s){"use strict";var u=["","webkit","Moz","MS","ms","o"];var l=a.createElement("div");var c="function";var f=Math.round;var d=Math.abs;var p=Date.now;function h(e,t,n){return setTimeout(w(e,n),t)}function g(e,t,n){if(Array.isArray(e)){m(e,n[t],n);return true}return false}function m(e,t,n){var r;if(!e){return}if(e.forEach){e.forEach(t,n)}else if(e.length!==s){r=0;while(r<e.length){t.call(n,e[r],r,e);r++}}else{for(r in e){e.hasOwnProperty(r)&&t.call(n,e[r],r,e)}}}function v(e,t,n){var r="DEPRECATED METHOD: "+t+"\n"+n+" AT \n";return function(){var t=new Error("get-stack-trace");var n=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace";var a=i.console&&(i.console.warn||i.console.log);if(a){a.call(i.console,r,n)}return e.apply(this,arguments)}}var y;if(typeof Object.assign!=="function"){y=function e(t){if(t===s||t===null){throw new TypeError("Cannot convert undefined or null to object")}var n=Object(t);for(var r=1;r<arguments.length;r++){var i=arguments[r];if(i!==s&&i!==null){for(var a in i){if(i.hasOwnProperty(a)){n[a]=i[a]}}}}return n}}else{y=Object.assign}var b=v(function e(t,n,r){var i=Object.keys(n);var a=0;while(a<i.length){if(!r||r&&t[i[a]]===s){t[i[a]]=n[i[a]]}a++}return t},"extend","Use `assign`.");var M=v(function e(t,n){return b(t,n,true)},"merge","Use `assign`.");function x(e,t,n){var r=t.prototype,i;i=e.prototype=Object.create(r);i.constructor=e;i._super=r;if(n){y(i,n)}}function w(e,t){return function n(){return e.apply(t,arguments)}}function A(e,t){if(typeof e==c){return e.apply(t?t[0]||s:s,t)}return e}function T(e,t){return e===s?t:e}function C(e,t,n){m(E(t),function(t){e.addEventListener(t,n,false)})}function S(e,t,n){m(E(t),function(t){e.removeEventListener(t,n,false)})}function D(e,t){while(e){if(e==t){return true}e=e.parentNode}return false}function I(e,t){return e.indexOf(t)>-1}function E(e){return e.trim().split(/\s+/g)}function N(e,t,n){if(e.indexOf&&!n){return e.indexOf(t)}else{var r=0;while(r<e.length){if(n&&e[r][n]==t||!n&&e[r]===t){return r}r++}return-1}}function O(e){return Array.prototype.slice.call(e,0)}function _(e,t,n){var r=[];var i=[];var a=0;while(a<e.length){var o=t?e[a][t]:e[a];if(N(i,o)<0){r.push(e[a])}i[a]=o;a++}if(n){if(!t){r=r.sort()}else{r=r.sort(function e(n,r){return n[t]>r[t]})}}return r}function L(e,t){var n,r;var i=t[0].toUpperCase()+t.slice(1);var a=0;while(a<u.length){n=u[a];r=n?n+i:t;if(r in e){return r}a++}return s}var P=1;function k(){return P++}function R(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||i}var j=/mobile|tablet|ip(ad|hone|od)|android/i;var B="ontouchstart"in i;var z=L(i,"PointerEvent")!==s;var F=B&&j.test(navigator.userAgent);var V="touch";var U="pen";var G="mouse";var W="kinect";var H=25;var Y=1;var Q=2;var q=4;var X=8;var K=1;var Z=2;var J=4;var $=8;var ee=16;var te=Z|J;var ne=$|ee;var re=te|ne;var ie=["x","y"];var ae=["clientX","clientY"];function oe(e,t){var n=this;this.manager=e;this.callback=t;this.element=e.element;this.target=e.options.inputTarget;this.domHandler=function(t){if(A(e.options.enable,[e])){n.handler(t)}};this.init()}oe.prototype={handler:function(){},init:function(){this.evEl&&C(this.element,this.evEl,this.domHandler);this.evTarget&&C(this.target,this.evTarget,this.domHandler);this.evWin&&C(R(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&S(this.element,this.evEl,this.domHandler);this.evTarget&&S(this.target,this.evTarget,this.domHandler);this.evWin&&S(R(this.element),this.evWin,this.domHandler)}};function se(e){var t;var n=e.options.inputClass;if(n){t=n}else if(z){t=Ie}else if(F){t=Re}else if(!B){t=Ae}else{t=Fe}return new t(e,ue)}function ue(e,t,n){var r=n.pointers.length;var i=n.changedPointers.length;var a=t&Y&&r-i===0;var o=t&(q|X)&&r-i===0;n.isFirst=!!a;n.isFinal=!!o;if(a){e.session={}}n.eventType=t;le(e,n);e.emit("hammer.input",n);e.recognize(n);e.session.prevInput=n}function le(e,t){var n=e.session;var r=t.pointers;var i=r.length;if(!n.firstInput){n.firstInput=de(t)}if(i>1&&!n.firstMultiple){n.firstMultiple=de(t)}else if(i===1){n.firstMultiple=false}var a=n.firstInput;var o=n.firstMultiple;var s=o?o.center:a.center;var u=t.center=pe(r);t.timeStamp=p();t.deltaTime=t.timeStamp-a.timeStamp;t.angle=ve(s,u);t.distance=me(s,u);ce(n,t);t.offsetDirection=ge(t.deltaX,t.deltaY);var l=he(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=l.x;t.overallVelocityY=l.y;t.overallVelocity=d(l.x)>d(l.y)?l.x:l.y;t.scale=o?be(o.pointers,r):1;t.rotation=o?ye(o.pointers,r):0;t.maxPointers=!n.prevInput?t.pointers.length:t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers;fe(n,t);var c=e.element;if(D(t.srcEvent.target,c)){c=t.srcEvent.target}t.target=c}function ce(e,t){var n=t.center;var r=e.offsetDelta||{};var i=e.prevDelta||{};var a=e.prevInput||{};if(t.eventType===Y||a.eventType===q){i=e.prevDelta={x:a.deltaX||0,y:a.deltaY||0};r=e.offsetDelta={x:n.x,y:n.y}}t.deltaX=i.x+(n.x-r.x);t.deltaY=i.y+(n.y-r.y)}function fe(e,t){var n=e.lastInterval||t,r=t.timeStamp-n.timeStamp,i,a,o,u;if(t.eventType!=X&&(r>H||n.velocity===s)){var l=t.deltaX-n.deltaX;var c=t.deltaY-n.deltaY;var f=he(r,l,c);a=f.x;o=f.y;i=d(f.x)>d(f.y)?f.x:f.y;u=ge(l,c);e.lastInterval=t}else{i=n.velocity;a=n.velocityX;o=n.velocityY;u=n.direction}t.velocity=i;t.velocityX=a;t.velocityY=o;t.direction=u}function de(e){var t=[];var n=0;while(n<e.pointers.length){t[n]={clientX:f(e.pointers[n].clientX),clientY:f(e.pointers[n].clientY)};n++}return{timeStamp:p(),pointers:t,center:pe(t),deltaX:e.deltaX,deltaY:e.deltaY}}function pe(e){var t=e.length;if(t===1){return{x:f(e[0].clientX),y:f(e[0].clientY)}}var n=0,r=0,i=0;while(i<t){n+=e[i].clientX;r+=e[i].clientY;i++}return{x:f(n/t),y:f(r/t)}}function he(e,t,n){return{x:t/e||0,y:n/e||0}}function ge(e,t){if(e===t){return K}if(d(e)>=d(t)){return e<0?Z:J}return t<0?$:ee}function me(e,t,n){if(!n){n=ie}var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return Math.sqrt(r*r+i*i)}function ve(e,t,n){if(!n){n=ie}var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return Math.atan2(i,r)*180/Math.PI}function ye(e,t){return ve(t[1],t[0],ae)+ve(e[1],e[0],ae)}function be(e,t){return me(t[0],t[1],ae)/me(e[0],e[1],ae)}var Me={mousedown:Y,mousemove:Q,mouseup:q};var xe="mousedown";var we="mousemove mouseup";function Ae(){this.evEl=xe;this.evWin=we;this.pressed=false;oe.apply(this,arguments)}x(Ae,oe,{handler:function e(t){var n=Me[t.type];if(n&Y&&t.button===0){this.pressed=true}if(n&Q&&t.which!==1){n=q}if(!this.pressed){return}if(n&q){this.pressed=false}this.callback(this.manager,n,{pointers:[t],changedPointers:[t],pointerType:G,srcEvent:t})}});var Te={pointerdown:Y,pointermove:Q,pointerup:q,pointercancel:X,pointerout:X};var Ce={2:V,3:U,4:G,5:W};var Se="pointerdown";var De="pointermove pointerup pointercancel";if(i.MSPointerEvent&&!i.PointerEvent){Se="MSPointerDown";De="MSPointerMove MSPointerUp MSPointerCancel"}function Ie(){this.evEl=Se;this.evWin=De;oe.apply(this,arguments);this.store=this.manager.session.pointerEvents=[]}x(Ie,oe,{handler:function e(t){var n=this.store;var r=false;var i=t.type.toLowerCase().replace("ms","");var a=Te[i];var o=Ce[t.pointerType]||t.pointerType;var s=o==V;var u=N(n,t.pointerId,"pointerId");if(a&Y&&(t.button===0||s)){if(u<0){n.push(t);u=n.length-1}}else if(a&(q|X)){r=true}if(u<0){return}n[u]=t;this.callback(this.manager,a,{pointers:n,changedPointers:[t],pointerType:o,srcEvent:t});if(r){n.splice(u,1)}}});var Ee={touchstart:Y,touchmove:Q,touchend:q,touchcancel:X};var Ne="touchstart";var Oe="touchstart touchmove touchend touchcancel";function _e(){this.evTarget=Ne;this.evWin=Oe;this.started=false;oe.apply(this,arguments)}x(_e,oe,{handler:function e(t){var n=Ee[t.type];if(n===Y){this.started=true}if(!this.started){return}var r=Le.call(this,t,n);if(n&(q|X)&&r[0].length-r[1].length===0){this.started=false}this.callback(this.manager,n,{pointers:r[0],changedPointers:r[1],pointerType:V,srcEvent:t})}});function Le(e,t){var n=O(e.touches);var r=O(e.changedTouches);if(t&(q|X)){n=_(n.concat(r),"identifier",true)}return[n,r]}var Pe={touchstart:Y,touchmove:Q,touchend:q,touchcancel:X};var ke="touchstart touchmove touchend touchcancel";function Re(){this.evTarget=ke;this.targetIds={};oe.apply(this,arguments)}x(Re,oe,{handler:function e(t){var n=Pe[t.type];var r=je.call(this,t,n);if(!r){return}this.callback(this.manager,n,{pointers:r[0],changedPointers:r[1],pointerType:V,srcEvent:t})}});function je(e,t){var n=O(e.touches);var r=this.targetIds;if(t&(Y|Q)&&n.length===1){r[n[0].identifier]=true;return[n,n]}var i,a,o=O(e.changedTouches),s=[],u=this.target;a=n.filter(function(e){return D(e.target,u)});if(t===Y){i=0;while(i<a.length){r[a[i].identifier]=true;i++}}i=0;while(i<o.length){if(r[o[i].identifier]){s.push(o[i])}if(t&(q|X)){delete r[o[i].identifier]}i++}if(!s.length){return}return[_(a.concat(s),"identifier",true),s]}var Be=2500;var ze=25;function Fe(){oe.apply(this,arguments);var e=w(this.handler,this);this.touch=new Re(this.manager,e);this.mouse=new Ae(this.manager,e);this.primaryTouch=null;this.lastTouches=[]}x(Fe,oe,{handler:function e(t,n,r){var i=r.pointerType==V,a=r.pointerType==G;if(a&&r.sourceCapabilities&&r.sourceCapabilities.firesTouchEvents){return}if(i){Ve.call(this,n,r)}else if(a&&Ge.call(this,r)){return}this.callback(t,n,r)},destroy:function e(){this.touch.destroy();this.mouse.destroy()}});function Ve(e,t){if(e&Y){this.primaryTouch=t.changedPointers[0].identifier;Ue.call(this,t)}else if(e&(q|X)){Ue.call(this,t)}}function Ue(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var r=this.lastTouches;var i=function(){var e=r.indexOf(n);if(e>-1){r.splice(e,1)}};setTimeout(i,Be)}}function Ge(e){var t=e.srcEvent.clientX,n=e.srcEvent.clientY;for(var r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r];var a=Math.abs(t-i.x),o=Math.abs(n-i.y);if(a<=ze&&o<=ze){return true}}return false}var We=L(l.style,"touchAction");var He=We!==s;var Ye="compute";var Qe="auto";var qe="manipulation";var Xe="none";var Ke="pan-x";var Ze="pan-y";var Je=tt();function $e(e,t){this.manager=e;this.set(t)}$e.prototype={set:function(e){if(e==Ye){e=this.compute()}if(He&&this.manager.element.style&&Je[e]){this.manager.element.style[We]=e}this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];m(this.manager.recognizers,function(t){if(A(t.options.enable,[t])){e=e.concat(t.getTouchAction())}});return et(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent;var n=e.offsetDirection;if(this.manager.session.prevented){t.preventDefault();return}var r=this.actions;var i=I(r,Xe)&&!Je[Xe];var a=I(r,Ze)&&!Je[Ze];var o=I(r,Ke)&&!Je[Ke];if(i){var s=e.pointers.length===1;var u=e.distance<2;var l=e.deltaTime<250;if(s&&u&&l){return}}if(o&&a){return}if(i||a&&n&te||o&&n&ne){return this.preventSrc(t)}},preventSrc:function(e){this.manager.session.prevented=true;e.preventDefault()}};function et(e){if(I(e,Xe)){return Xe}var t=I(e,Ke);var n=I(e,Ze);if(t&&n){return Xe}if(t||n){return t?Ke:Ze}if(I(e,qe)){return qe}return Qe}function tt(){if(!He){return false}var e={};var t=i.CSS&&i.CSS.supports;["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){e[n]=t?i.CSS.supports("touch-action",n):true});return e}var nt=1;var rt=2;var it=4;var at=8;var ot=at;var st=16;var ut=32;function lt(e){this.options=y({},this.defaults,e||{});this.id=k();this.manager=null;this.options.enable=T(this.options.enable,true);this.state=nt;this.simultaneous={};this.requireFail=[]}lt.prototype={defaults:{},set:function(e){y(this.options,e);this.manager&&this.manager.touchAction.update();return this},recognizeWith:function(e){if(g(e,"recognizeWith",this)){return this}var t=this.simultaneous;e=dt(e,this);if(!t[e.id]){t[e.id]=e;e.recognizeWith(this)}return this},dropRecognizeWith:function(e){if(g(e,"dropRecognizeWith",this)){return this}e=dt(e,this);delete this.simultaneous[e.id];return this},requireFailure:function(e){if(g(e,"requireFailure",this)){return this}var t=this.requireFail;e=dt(e,this);if(N(t,e)===-1){t.push(e);e.requireFailure(this)}return this},dropRequireFailure:function(e){if(g(e,"dropRequireFailure",this)){return this}e=dt(e,this);var t=N(this.requireFail,e);if(t>-1){this.requireFail.splice(t,1)}return this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this;var n=this.state;function r(n){t.manager.emit(n,e)}if(n<at){r(t.options.event+ct(n))}r(t.options.event);if(e.additionalEvent){r(e.additionalEvent)}if(n>=at){r(t.options.event+ct(n))}},tryEmit:function(e){if(this.canEmit()){return this.emit(e)}this.state=ut},canEmit:function(){var e=0;while(e<this.requireFail.length){if(!(this.requireFail[e].state&(ut|nt))){return false}e++}return true},recognize:function(e){var t=y({},e);if(!A(this.options.enable,[this,t])){this.reset();this.state=ut;return}if(this.state&(ot|st|ut)){this.state=nt}this.state=this.process(t);if(this.state&(rt|it|at|st)){this.tryEmit(t)}},process:function(e){},getTouchAction:function(){},reset:function(){}};function ct(e){if(e&st){return"cancel"}else if(e&at){return"end"}else if(e&it){return"move"}else if(e&rt){return"start"}return""}function ft(e){if(e==ee){return"down"}else if(e==$){return"up"}else if(e==Z){return"left"}else if(e==J){return"right"}return""}function dt(e,t){var n=t.manager;if(n){return n.get(e)}return e}function pt(){lt.apply(this,arguments)}x(pt,lt,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return t===0||e.pointers.length===t},process:function(e){var t=this.state;var n=e.eventType;var r=t&(rt|it);var i=this.attrTest(e);if(r&&(n&X||!i)){return t|st}else if(r||i){if(n&q){return t|at}else if(!(t&rt)){return rt}return t|it}return ut}});function ht(){pt.apply(this,arguments);this.pX=null;this.pY=null}x(ht,pt,{defaults:{event:"pan",threshold:10,pointers:1,direction:re},getTouchAction:function(){var e=this.options.direction;var t=[];if(e&te){t.push(Ze)}if(e&ne){t.push(Ke)}return t},directionTest:function(e){var t=this.options;var n=true;var r=e.distance;var i=e.direction;var a=e.deltaX;var o=e.deltaY;if(!(i&t.direction)){if(t.direction&te){i=a===0?K:a<0?Z:J;n=a!=this.pX;r=Math.abs(e.deltaX)}else{i=o===0?K:o<0?$:ee;n=o!=this.pY;r=Math.abs(e.deltaY)}}e.direction=i;return n&&r>t.threshold&&i&t.direction},attrTest:function(e){return pt.prototype.attrTest.call(this,e)&&(this.state&rt||!(this.state&rt)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX;this.pY=e.deltaY;var t=ft(e.direction);if(t){e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}});function gt(){pt.apply(this,arguments)}x(gt,pt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Xe]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&rt)},emit:function(e){if(e.scale!==1){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}});function mt(){lt.apply(this,arguments);this._timer=null;this._input=null}x(mt,lt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Qe]},process:function(e){var t=this.options;var n=e.pointers.length===t.pointers;var r=e.distance<t.threshold;var i=e.deltaTime>t.time;this._input=e;if(!r||!n||e.eventType&(q|X)&&!i){this.reset()}else if(e.eventType&Y){this.reset();this._timer=h(function(){this.state=ot;this.tryEmit()},t.time,this)}else if(e.eventType&q){return ot}return ut},reset:function(){clearTimeout(this._timer)},emit:function(e){if(this.state!==ot){return}if(e&&e.eventType&q){this.manager.emit(this.options.event+"up",e)}else{this._input.timeStamp=p();this.manager.emit(this.options.event,this._input)}}});function vt(){pt.apply(this,arguments)}x(vt,pt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Xe]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&rt)}});function yt(){pt.apply(this,arguments)}x(yt,pt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:te|ne,pointers:1},getTouchAction:function(){return ht.prototype.getTouchAction.call(this)},attrTest:function(e){var t=this.options.direction;var n;if(t&(te|ne)){n=e.overallVelocity}else if(t&te){n=e.overallVelocityX}else if(t&ne){n=e.overallVelocityY}return this._super.attrTest.call(this,e)&&t&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&d(n)>this.options.velocity&&e.eventType&q},emit:function(e){var t=ft(e.offsetDirection);if(t){this.manager.emit(this.options.event+t,e)}this.manager.emit(this.options.event,e)}});function bt(){lt.apply(this,arguments);this.pTime=false;this.pCenter=false;this._timer=null;this._input=null;this.count=0}x(bt,lt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[qe]},process:function(e){var t=this.options;var n=e.pointers.length===t.pointers;var r=e.distance<t.threshold;var i=e.deltaTime<t.time;this.reset();if(e.eventType&Y&&this.count===0){return this.failTimeout()}if(r&&i&&n){if(e.eventType!=q){return this.failTimeout()}var a=this.pTime?e.timeStamp-this.pTime<t.interval:true;var o=!this.pCenter||me(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp;this.pCenter=e.center;if(!o||!a){this.count=1}else{this.count+=1}this._input=e;var s=this.count%t.taps;if(s===0){if(!this.hasRequireFailures()){return ot}else{this._timer=h(function(){this.state=ot;this.tryEmit()},t.interval,this);return rt}}}return ut},failTimeout:function(){this._timer=h(function(){this.state=ut},this.options.interval,this);return ut},reset:function(){clearTimeout(this._timer)},emit:function(){if(this.state==ot){this._input.tapCount=this.count;this.manager.emit(this.options.event,this._input)}}});function Mt(e,t){t=t||{};t.recognizers=T(t.recognizers,Mt.defaults.preset);return new At(e,t)}Mt.VERSION="2.0.7";Mt.defaults={domEvents:false,touchAction:Ye,enable:true,inputTarget:null,inputClass:null,preset:[[vt,{enable:false}],[gt,{enable:false},["rotate"]],[yt,{direction:te}],[ht,{direction:te},["swipe"]],[bt],[bt,{event:"doubletap",taps:2},["tap"]],[mt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var xt=1;var wt=2;function At(e,t){this.options=y({},Mt.defaults,t||{});this.options.inputTarget=this.options.inputTarget||e;this.handlers={};this.session={};this.recognizers=[];this.oldCssProps={};this.element=e;this.input=se(this);this.touchAction=new $e(this,this.options.touchAction);Tt(this,true);m(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]);e[3]&&t.requireFailure(e[3])},this)}At.prototype={set:function(e){y(this.options,e);if(e.touchAction){this.touchAction.update()}if(e.inputTarget){this.input.destroy();this.input.target=e.inputTarget;this.input.init()}return this},stop:function(e){this.session.stopped=e?wt:xt},recognize:function(e){var t=this.session;if(t.stopped){return}this.touchAction.preventDefaults(e);var n;var r=this.recognizers;var i=t.curRecognizer;if(!i||i&&i.state&ot){i=t.curRecognizer=null}var a=0;while(a<r.length){n=r[a];if(t.stopped!==wt&&(!i||n==i||n.canRecognizeWith(i))){n.recognize(e)}else{n.reset()}if(!i&&n.state&(rt|it|at)){i=t.curRecognizer=n}a++}},get:function(e){if(e instanceof lt){return e}var t=this.recognizers;for(var n=0;n<t.length;n++){if(t[n].options.event==e){return t[n]}}return null},add:function(e){if(g(e,"add",this)){return this}var t=this.get(e.options.event);if(t){this.remove(t)}this.recognizers.push(e);e.manager=this;this.touchAction.update();return e},remove:function(e){if(g(e,"remove",this)){return this}e=this.get(e);if(e){var t=this.recognizers;var n=N(t,e);if(n!==-1){t.splice(n,1);this.touchAction.update()}}return this},on:function(e,t){if(e===s){return}if(t===s){return}var n=this.handlers;m(E(e),function(e){n[e]=n[e]||[];n[e].push(t)});return this},off:function(e,t){if(e===s){return}var n=this.handlers;m(E(e),function(e){if(!t){delete n[e]}else{n[e]&&n[e].splice(N(n[e],t),1)}});return this},emit:function(e,t){if(this.options.domEvents){Ct(e,t)}var n=this.handlers[e]&&this.handlers[e].slice();if(!n||!n.length){return}t.type=e;t.preventDefault=function(){t.srcEvent.preventDefault()};var r=0;while(r<n.length){n[r](t);r++}},destroy:function(){this.element&&Tt(this,false);this.handlers={};this.session={};this.input.destroy();this.element=null}};function Tt(e,t){var n=e.element;if(!n.style){return}var r;m(e.options.cssProps,function(i,a){r=L(n.style,a);if(t){e.oldCssProps[r]=n.style[r];n.style[r]=i}else{n.style[r]=e.oldCssProps[r]||""}});if(!t){e.oldCssProps={}}}function Ct(e,t){var n=a.createEvent("Event");n.initEvent(e,true,true);n.gesture=t;t.target.dispatchEvent(n)}y(Mt,{INPUT_START:Y,INPUT_MOVE:Q,INPUT_END:q,INPUT_CANCEL:X,STATE_POSSIBLE:nt,STATE_BEGAN:rt,STATE_CHANGED:it,STATE_ENDED:at,STATE_RECOGNIZED:ot,STATE_CANCELLED:st,STATE_FAILED:ut,DIRECTION_NONE:K,DIRECTION_LEFT:Z,DIRECTION_RIGHT:J,DIRECTION_UP:$,DIRECTION_DOWN:ee,DIRECTION_HORIZONTAL:te,DIRECTION_VERTICAL:ne,DIRECTION_ALL:re,Manager:At,Input:oe,TouchAction:$e,TouchInput:Re,MouseInput:Ae,PointerEventInput:Ie,TouchMouseInput:Fe,SingleTouchInput:_e,Recognizer:lt,AttrRecognizer:pt,Tap:bt,Pan:ht,Swipe:yt,Pinch:gt,Rotate:vt,Press:mt,on:C,off:S,each:m,merge:M,extend:b,assign:y,inherit:x,bindFn:w,prefixed:L});var St=typeof i!=="undefined"?i:typeof self!=="undefined"?self:{};St.Hammer=Mt;if(true){!(r=function(){return Mt}.call(t,n,t,e),r!==s&&(e.exports=r))}else if(typeof e!="undefined"&&e.exports){e.exports=Mt}else{i[o]=Mt}})(window,document,"Hammer")},function(e,t){e.exports=n;function n(e,t){var n=t[0],r=t[1],i=t[2];var a=t[3],o=t[4],s=t[5];var u=t[6],l=t[7],c=t[8];e[0]=o*c-s*l;e[1]=i*l-r*c;e[2]=r*s-i*o;e[3]=s*u-a*c;e[4]=n*c-i*u;e[5]=i*a-n*s;e[6]=a*l-o*u;e[7]=r*u-n*l;e[8]=n*o-r*a;return e}},function(e,t){e.exports=n;function n(e){var t=new Float32Array(9);t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];t[4]=e[4];t[5]=e[5];t[6]=e[6];t[7]=e[7];t[8]=e[8];return t}},function(e,t){e.exports=n;function n(e,t){e[0]=t[0];e[1]=t[1];e[2]=t[2];e[3]=t[3];e[4]=t[4];e[5]=t[5];e[6]=t[6];e[7]=t[7];e[8]=t[8];return e}},function(e,t){e.exports=n;function n(){var e=new Float32Array(9);e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=1;e[5]=0;e[6]=0;e[7]=0;e[8]=1;return e}},function(e,t){e.exports=n;function n(e){var t=e[0],n=e[1],r=e[2];var i=e[3],a=e[4],o=e[5];var s=e[6],u=e[7],l=e[8];return t*(l*a-o*u)+n*(o*s-l*i)+r*(u*i-a*s)}},function(e,t){e.exports=n;function n(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]+e[3]*e[3]+e[4]*e[4]+e[5]*e[5]+e[6]*e[6]+e[7]*e[7]+e[8]*e[8])}},function(e,t){e.exports=n;function n(e,t){e[0]=t[0];e[1]=t[1];e[2]=0;e[3]=t[2];e[4]=t[3];e[5]=0;e[6]=t[4];e[7]=t[5];e[8]=1;return e}},function(e,t){e.exports=n;function n(e,t){e[0]=t[0];e[1]=t[1];e[2]=t[2];e[3]=t[4];e[4]=t[5];e[5]=t[6];e[6]=t[8];e[7]=t[9];e[8]=t[10];return e}},function(e,t){e.exports=n;function n(e,t){var n=t[0];var r=t[1];var i=t[2];var a=t[3];var o=n+n;var s=r+r;var u=i+i;var l=n*o;var c=r*o;var f=r*s;var d=i*o;var p=i*s;var h=i*u;var g=a*o;var m=a*s;var v=a*u;e[0]=1-f-h;e[3]=c-v;e[6]=d+m;e[1]=c+v;e[4]=1-l-h;e[7]=p-g;e[2]=d-m;e[5]=p+g;e[8]=1-l-f;return e}},function(e,t){e.exports=n;function n(e){e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=1;e[5]=0;e[6]=0;e[7]=0;e[8]=1;return e}},function(e,t){e.exports=n;function n(e,t){var n=t[0],r=t[1],i=t[2];var a=t[3],o=t[4],s=t[5];var u=t[6],l=t[7],c=t[8];var f=c*o-s*l;var d=-c*a+s*u;var p=l*a-o*u;var h=n*f+r*d+i*p;if(!h)return null;h=1/h;e[0]=f*h;e[1]=(-c*r+i*l)*h;e[2]=(s*r-i*o)*h;e[3]=d*h;e[4]=(c*n-i*u)*h;e[5]=(-s*n+i*a)*h;e[6]=p*h;e[7]=(-l*n+r*u)*h;e[8]=(o*n-r*a)*h;return e}},function(e,t){e.exports=n;function n(e,t,n){var r=t[0],i=t[1],a=t[2];var o=t[3],s=t[4],u=t[5];var l=t[6],c=t[7],f=t[8];var d=n[0],p=n[1],h=n[2];var g=n[3],m=n[4],v=n[5];var y=n[6],b=n[7],M=n[8];e[0]=d*r+p*o+h*l;e[1]=d*i+p*s+h*c;e[2]=d*a+p*u+h*f;e[3]=g*r+m*o+v*l;e[4]=g*i+m*s+v*c;e[5]=g*a+m*u+v*f;e[6]=y*r+b*o+M*l;e[7]=y*i+b*s+M*c;e[8]=y*a+b*u+M*f;return e}},function(e,t){e.exports=n;function n(e,t){var n=t[0],r=t[1],i=t[2],a=t[3];var o=t[4],s=t[5],u=t[6],l=t[7];var c=t[8],f=t[9],d=t[10],p=t[11];var h=t[12],g=t[13],m=t[14],v=t[15];var y=n*s-r*o;var b=n*u-i*o;var M=n*l-a*o;var x=r*u-i*s;var w=r*l-a*s;var A=i*l-a*u;var T=c*g-f*h;var C=c*m-d*h;var S=c*v-p*h;var D=f*m-d*g;var I=f*v-p*g;var E=d*v-p*m;var N=y*E-b*I+M*D+x*S-w*C+A*T;if(!N)return null;N=1/N;e[0]=(s*E-u*I+l*D)*N;e[1]=(u*S-o*E-l*C)*N;e[2]=(o*I-s*S+l*T)*N;e[3]=(i*I-r*E-a*D)*N;e[4]=(n*E-i*S+a*C)*N;e[5]=(r*S-n*I-a*T)*N;e[6]=(g*A-m*w+v*x)*N;e[7]=(m*M-h*A-v*b)*N;e[8]=(h*w-g*M+v*y)*N;return e}},function(e,t){e.exports=n;function n(e,t,n){var r=t[0],i=t[1],a=t[2];var o=t[3],s=t[4],u=t[5];var l=t[6],c=t[7],f=t[8];var d=Math.sin(n);var p=Math.cos(n);e[0]=p*r+d*o;e[1]=p*i+d*s;e[2]=p*a+d*u;e[3]=p*o-d*r;e[4]=p*s-d*i;e[5]=p*u-d*a;e[6]=l;e[7]=c;e[8]=f;return e}},function(e,t){e.exports=n;function n(e,t,n){var r=n[0];var i=n[1];e[0]=r*t[0];e[1]=r*t[1];e[2]=r*t[2];e[3]=i*t[3];e[4]=i*t[4];e[5]=i*t[5];e[6]=t[6];e[7]=t[7];e[8]=t[8];return e}},function(e,t){e.exports=n;function n(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}},function(e,t){e.exports=n;function n(e,t,n){var r=t[0],i=t[1],a=t[2];var o=t[3],s=t[4],u=t[5];var l=t[6],c=t[7],f=t[8];var d=n[0],p=n[1];e[0]=r;e[1]=i;e[2]=a;e[3]=o;e[4]=s;e[5]=u;e[6]=d*r+p*o+l;e[7]=d*i+p*s+c;e[8]=d*a+p*u+f;return e}},function(e,t){e.exports=n;function n(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3];e[2]=t[6];e[3]=n;e[5]=t[7];e[6]=r;e[7]=i}else{e[0]=t[0];e[1]=t[3];e[2]=t[6];e[3]=t[1];e[4]=t[4];e[5]=t[7];e[6]=t[2];e[7]=t[5];e[8]=t[8]}return e}},function(e,t,n){var r,i;!function(){var a={version:"3.5.17"};var o=[].slice,s=function(e){return o.call(e)};var u=this.document;function l(e){return e&&(e.ownerDocument||e.document||e).documentElement}function c(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}if(u){try{s(u.documentElement.childNodes)[0].nodeType}catch(e){s=function(e){var t=e.length,n=new Array(t);while(t--)n[t]=e[t];return n}}}if(!Date.now)Date.now=function(){return+new Date};if(u){try{u.createElement("DIV").style.setProperty("opacity",0,"")}catch(e){var f=this.Element.prototype,d=f.setAttribute,p=f.setAttributeNS,h=this.CSSStyleDeclaration.prototype,g=h.setProperty;f.setAttribute=function(e,t){d.call(this,e,t+"")};f.setAttributeNS=function(e,t,n){p.call(this,e,t,n+"")};h.setProperty=function(e,t,n){g.call(this,e,t+"",n)}}}a.ascending=m;function m(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}a.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN};a.min=function(e,t){var n=-1,r=e.length,i,a;if(arguments.length===1){while(++n<r)if((a=e[n])!=null&&a>=a){i=a;break}while(++n<r)if((a=e[n])!=null&&i>a)i=a}else{while(++n<r)if((a=t.call(e,e[n],n))!=null&&a>=a){i=a;break}while(++n<r)if((a=t.call(e,e[n],n))!=null&&i>a)i=a}return i};a.max=function(e,t){var n=-1,r=e.length,i,a;if(arguments.length===1){while(++n<r)if((a=e[n])!=null&&a>=a){i=a;break}while(++n<r)if((a=e[n])!=null&&a>i)i=a}else{while(++n<r)if((a=t.call(e,e[n],n))!=null&&a>=a){i=a;break}while(++n<r)if((a=t.call(e,e[n],n))!=null&&a>i)i=a}return i};a.extent=function(e,t){var n=-1,r=e.length,i,a,o;if(arguments.length===1){while(++n<r)if((a=e[n])!=null&&a>=a){i=o=a;break}while(++n<r)if((a=e[n])!=null){if(i>a)i=a;if(o<a)o=a}}else{while(++n<r)if((a=t.call(e,e[n],n))!=null&&a>=a){i=o=a;break}while(++n<r)if((a=t.call(e,e[n],n))!=null){if(i>a)i=a;if(o<a)o=a}}return[i,o]};function v(e){return e===null?NaN:+e}function y(e){return!isNaN(e)}a.sum=function(e,t){var n=0,r=e.length,i,a=-1;if(arguments.length===1){while(++a<r)if(y(i=+e[a]))n+=i}else{while(++a<r)if(y(i=+t.call(e,e[a],a)))n+=i}return n};a.mean=function(e,t){var n=0,r=e.length,i,a=-1,o=r;if(arguments.length===1){while(++a<r)if(y(i=v(e[a])))n+=i;else--o}else{while(++a<r)if(y(i=v(t.call(e,e[a],a))))n+=i;else--o}if(o)return n/o};a.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),i=+e[r-1],a=n-r;return a?i+a*(e[r]-i):i};a.median=function(e,t){var n=[],r=e.length,i,o=-1;if(arguments.length===1){while(++o<r)if(y(i=v(e[o])))n.push(i)}else{while(++o<r)if(y(i=v(t.call(e,e[o],o))))n.push(i)}if(n.length)return a.quantile(n.sort(m),.5)};a.variance=function(e,t){var n=e.length,r=0,i,a,o=0,s=-1,u=0;if(arguments.length===1){while(++s<n){if(y(i=v(e[s]))){a=i-r;r+=a/++u;o+=a*(i-r)}}}else{while(++s<n){if(y(i=v(t.call(e,e[s],s)))){a=i-r;r+=a/++u;o+=a*(i-r)}}}if(u>1)return o/(u-1)};a.deviation=function(){var e=a.variance.apply(this,arguments);return e?Math.sqrt(e):e};function b(e){return{left:function(t,n,r,i){if(arguments.length<3)r=0;if(arguments.length<4)i=t.length;while(r<i){var a=r+i>>>1;if(e(t[a],n)<0)r=a+1;else i=a}return r},right:function(t,n,r,i){if(arguments.length<3)r=0;if(arguments.length<4)i=t.length;while(r<i){var a=r+i>>>1;if(e(t[a],n)>0)i=a;else r=a+1}return r}}}var M=b(m);a.bisectLeft=M.left;a.bisect=a.bisectRight=M.right;a.bisector=function(e){return b(e.length===1?function(t,n){return m(e(t),n)}:e)};a.shuffle=function(e,t,n){if((r=arguments.length)<3){n=e.length;if(r<2)t=0}var r=n-t,i,a;while(r){a=Math.random()*r--|0;i=e[r+t],e[r+t]=e[a+t],e[a+t]=i}return e};a.permute=function(e,t){var n=t.length,r=new Array(n);while(n--)r[n]=e[t[n]];return r};a.pairs=function(e){var t=0,n=e.length-1,r,i=e[0],a=new Array(n<0?0:n);while(t<n)a[t]=[r=i,i=e[++t]];return a};a.transpose=function(e){if(!(o=e.length))return[];for(var t=-1,n=a.min(e,x),r=new Array(n);++t<n;){for(var i=-1,o,s=r[t]=new Array(o);++i<o;){s[i]=e[i][t]}}return r};function x(e){return e.length}a.zip=function(){return a.transpose(arguments)};a.keys=function(e){var t=[];for(var n in e)t.push(n);return t};a.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t};a.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t};a.merge=function(e){var t=e.length,n,r=-1,i=0,a,o;while(++r<t)i+=e[r].length;a=new Array(i);while(--t>=0){o=e[t];n=o.length;while(--n>=0){a[--i]=o[n]}}return a};var w=Math.abs;a.range=function(e,t,n){if(arguments.length<3){n=1;if(arguments.length<2){t=e;e=0}}if((t-e)/n===Infinity)throw new Error("infinite range");var r=[],i=A(w(n)),a=-1,o;e*=i,t*=i,n*=i;if(n<0)while((o=e+n*++a)>t)r.push(o/i);else while((o=e+n*++a)<t)r.push(o/i);return r};function A(e){var t=1;while(e*t%1)t*=10;return t}function T(e,t){for(var n in t){Object.defineProperty(e.prototype,n,{value:t[n],enumerable:false})}}a.map=function(e,t){var n=new C;if(e instanceof C){e.forEach(function(e,t){n.set(e,t)})}else if(Array.isArray(e)){var r=-1,i=e.length,a;if(arguments.length===1)while(++r<i)n.set(r,e[r]);else while(++r<i)n.set(t.call(e,a=e[r],r),a)}else{for(var o in e)n.set(o,e[o])}return n};function C(){this._=Object.create(null)}var S="__proto__",D="\0";T(C,{has:N,get:function(e){return this._[I(e)]},set:function(e,t){return this._[I(e)]=t},remove:O,keys:_,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:E(t),value:this._[t]});return e},size:L,empty:P,forEach:function(e){for(var t in this._)e.call(this,E(t),this._[t])}});function I(e){return(e+="")===S||e[0]===D?D+e:e}function E(e){return(e+="")[0]===D?e.slice(1):e}function N(e){return I(e)in this._}function O(e){return(e=I(e))in this._&&delete this._[e]}function _(){var e=[];for(var t in this._)e.push(E(t));return e}function L(){var e=0;for(var t in this._)++e;return e}function P(){for(var e in this._)return false;return true}a.nest=function(){var e={},t=[],n=[],r,i;function o(n,a,s){if(s>=t.length)return i?i.call(e,a):r?a.sort(r):a;var u=-1,l=a.length,c=t[s++],f,d,p,h=new C,g;while(++u<l){if(g=h.get(f=c(d=a[u]))){g.push(d)}else{h.set(f,[d])}}if(n){d=n();p=function(e,t){d.set(e,o(n,t,s))}}else{d={};p=function(e,t){d[e]=o(n,t,s)}}h.forEach(p);return d}function s(e,r){if(r>=t.length)return e;var i=[],a=n[r++];e.forEach(function(e,t){i.push({key:e,values:s(t,r)})});return a?i.sort(function(e,t){return a(e.key,t.key)}):i}e.map=function(e,t){return o(t,e,0)};e.entries=function(e){return s(o(a.map,e,0),0)};e.key=function(n){t.push(n);return e};e.sortKeys=function(r){n[t.length-1]=r;return e};e.sortValues=function(t){r=t;return e};e.rollup=function(t){i=t;return e};return e};a.set=function(e){var t=new k;if(e)for(var n=0,r=e.length;n<r;++n)t.add(e[n]);return t};function k(){this._=Object.create(null)}T(k,{has:N,add:function(e){this._[I(e+="")]=true;return e},remove:O,values:_,size:L,empty:P,forEach:function(e){for(var t in this._)e.call(this,E(t))}});a.behavior={};function R(e){return e}a.rebind=function(e,t){var n=1,r=arguments.length,i;while(++n<r)e[i=arguments[n]]=j(e,t,t[i]);return e};function j(e,t,n){return function(){var r=n.apply(t,arguments);return r===t?e:r}}function B(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,r=z.length;n<r;++n){var i=z[n]+t;if(i in e)return i}}var z=["webkit","ms","moz","Moz","o","O"];function F(){}a.dispatch=function(){var e=new V,t=-1,n=arguments.length;while(++t<n)e[arguments[t]]=U(e);return e};function V(){}V.prototype.on=function(e,t){var n=e.indexOf("."),r="";if(n>=0){r=e.slice(n+1);e=e.slice(0,n)}if(e)return arguments.length<2?this[e].on(r):this[e].on(r,t);if(arguments.length===2){if(t==null)for(e in this){if(this.hasOwnProperty(e))this[e].on(r,null)}return this}};function U(e){var t=[],n=new C;function r(){var n=t,r=-1,i=n.length,a;while(++r<i)if(a=n[r].on)a.apply(this,arguments);return e}r.on=function(r,i){var a=n.get(r),o;if(arguments.length<2)return a&&a.on;if(a){a.on=null;t=t.slice(0,o=t.indexOf(a)).concat(t.slice(o+1));n.remove(r)}if(i)t.push(n.set(r,{on:i}));return e};return r}a.event=null;function G(){a.event.preventDefault()}function W(){var e=a.event,t;while(t=e.sourceEvent)e=t;return e}function H(e){var t=new V,n=0,r=arguments.length;while(++n<r)t[arguments[n]]=U(t);t.of=function(n,r){return function(i){try{var o=i.sourceEvent=a.event;i.target=e;a.event=i;t[i.type].apply(n,r)}finally{a.event=o}}};return t}a.requote=function(e){return e.replace(Y,"\\$&")};var Y=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;var Q={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]};function q(e){Q(e,J);return e}var X=function(e,t){return t.querySelector(e)},K=function(e,t){return t.querySelectorAll(e)},Z=function(e,t){var n=e.matches||e[B(e,"matchesSelector")];Z=function(e,t){return n.call(e,t)};return Z(e,t)};if(typeof Sizzle==="function"){X=function(e,t){return Sizzle(e,t)[0]||null};K=Sizzle;Z=Sizzle.matchesSelector}a.selection=function(){return a.select(u.documentElement)};var J=a.selection.prototype=[];J.select=function(e){var t=[],n,r,i,a;e=$(e);for(var o=-1,s=this.length;++o<s;){t.push(n=[]);n.parentNode=(i=this[o]).parentNode;for(var u=-1,l=i.length;++u<l;){if(a=i[u]){n.push(r=e.call(a,a.__data__,u,o));if(r&&"__data__"in a)r.__data__=a.__data__}else{n.push(null)}}}return q(t)};function $(e){return typeof e==="function"?e:function(){return X(e,this)}}J.selectAll=function(e){var t=[],n,r;e=ee(e);for(var i=-1,a=this.length;++i<a;){for(var o=this[i],u=-1,l=o.length;++u<l;){if(r=o[u]){t.push(n=s(e.call(r,r.__data__,u,i)));n.parentNode=r}}}return q(t)};function ee(e){return typeof e==="function"?e:function(){return K(e,this)}}var te="http://www.w3.org/1999/xhtml";var ne={svg:"http://www.w3.org/2000/svg",xhtml:te,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};a.ns={prefix:ne,qualify:function(e){var t=e.indexOf(":"),n=e;if(t>=0&&(n=e.slice(0,t))!=="xmlns")e=e.slice(t+1);return ne.hasOwnProperty(n)?{space:ne[n],local:e}:e}};J.attr=function(e,t){if(arguments.length<2){if(typeof e==="string"){var n=this.node();e=a.ns.qualify(e);return e.local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(re(t,e[t]));return this}return this.each(re(e,t))};function re(e,t){e=a.ns.qualify(e);function n(){this.removeAttribute(e)}function r(){this.removeAttributeNS(e.space,e.local)}function i(){this.setAttribute(e,t)}function o(){this.setAttributeNS(e.space,e.local,t)}function s(){var n=t.apply(this,arguments);if(n==null)this.removeAttribute(e);else this.setAttribute(e,n)}function u(){var n=t.apply(this,arguments);if(n==null)this.removeAttributeNS(e.space,e.local);else this.setAttributeNS(e.space,e.local,n)}return t==null?e.local?r:n:typeof t==="function"?e.local?u:s:e.local?o:i}function ie(e){return e.trim().replace(/\s+/g," ")}J.classed=function(e,t){if(arguments.length<2){if(typeof e==="string"){var n=this.node(),r=(e=oe(e)).length,i=-1;if(t=n.classList){while(++i<r)if(!t.contains(e[i]))return false}else{t=n.getAttribute("class");while(++i<r)if(!ae(e[i]).test(t))return false}return true}for(t in e)this.each(se(t,e[t]));return this}return this.each(se(e,t))};function ae(e){return new RegExp("(?:^|\\s+)"+a.requote(e)+"(?:\\s+|$)","g")}function oe(e){return(e+"").trim().split(/^|\s+/)}function se(e,t){e=oe(e).map(ue);var n=e.length;function r(){var r=-1;while(++r<n)e[r](this,t)}function i(){var r=-1,i=t.apply(this,arguments);while(++r<n)e[r](this,i)}return typeof t==="function"?i:r}function ue(e){var t=ae(e);return function(n,r){if(i=n.classList)return r?i.add(e):i.remove(e);var i=n.getAttribute("class")||"";if(r){t.lastIndex=0;if(!t.test(i))n.setAttribute("class",ie(i+" "+e))}else{n.setAttribute("class",ie(i.replace(t," ")))}}}J.style=function(e,t,n){var r=arguments.length;if(r<3){if(typeof e!=="string"){if(r<2)t="";for(n in e)this.each(le(n,e[n],t));return this}if(r<2){var i=this.node();return c(i).getComputedStyle(i,null).getPropertyValue(e)}n=""}return this.each(le(e,t,n))};function le(e,t,n){function r(){this.style.removeProperty(e)}function i(){this.style.setProperty(e,t,n)}function a(){var r=t.apply(this,arguments);if(r==null)this.style.removeProperty(e);else this.style.setProperty(e,r,n)}return t==null?r:typeof t==="function"?a:i}J.property=function(e,t){if(arguments.length<2){if(typeof e==="string")return this.node()[e];for(t in e)this.each(ce(t,e[t]));return this}return this.each(ce(e,t))};function ce(e,t){function n(){delete this[e]}function r(){this[e]=t}function i(){var n=t.apply(this,arguments);if(n==null)delete this[e];else this[e]=n}return t==null?n:typeof t==="function"?i:r}J.text=function(e){return arguments.length?this.each(typeof e==="function"?function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}:e==null?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent};J.html=function(e){return arguments.length?this.each(typeof e==="function"?function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}:e==null?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML};J.append=function(e){e=fe(e);return this.select(function(){return this.appendChild(e.apply(this,arguments))})};function fe(e){function t(){var t=this.ownerDocument,n=this.namespaceURI;return n===te&&t.documentElement.namespaceURI===te?t.createElement(e):t.createElementNS(n,e)}function n(){return this.ownerDocument.createElementNS(e.space,e.local)}return typeof e==="function"?e:(e=a.ns.qualify(e)).local?n:t}J.insert=function(e,t){e=fe(e);t=$(t);return this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})};J.remove=function(){return this.each(de)};function de(){var e=this.parentNode;if(e)e.removeChild(this)}J.data=function(e,t){var n=-1,r=this.length,i,a;if(!arguments.length){e=new Array(r=(i=this[0]).length);while(++n<r){if(a=i[n]){e[n]=a.__data__}}return e}function o(e,n){var r,i=e.length,a=n.length,o=Math.min(i,a),c=new Array(a),f=new Array(a),d=new Array(i),p,h;if(t){var g=new C,m=new Array(i),v;for(r=-1;++r<i;){if(p=e[r]){if(g.has(v=t.call(p,p.__data__,r))){d[r]=p}else{g.set(v,p)}m[r]=v}}for(r=-1;++r<a;){if(!(p=g.get(v=t.call(n,h=n[r],r)))){f[r]=pe(h)}else if(p!==true){c[r]=p;p.__data__=h}g.set(v,true)}for(r=-1;++r<i;){if(r in m&&g.get(m[r])!==true){d[r]=e[r]}}}else{for(r=-1;++r<o;){p=e[r];h=n[r];if(p){p.__data__=h;c[r]=p}else{f[r]=pe(h)}}for(;r<a;++r){f[r]=pe(n[r])}for(;r<i;++r){d[r]=e[r]}}f.update=c;f.parentNode=c.parentNode=d.parentNode=e.parentNode;s.push(f);u.push(c);l.push(d)}var s=ve([]),u=q([]),l=q([]);if(typeof e==="function"){while(++n<r){o(i=this[n],e.call(i,i.parentNode.__data__,n))}}else{while(++n<r){o(i=this[n],e)}}u.enter=function(){return s};u.exit=function(){return l};return u};function pe(e){return{__data__:e}}J.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")};J.filter=function(e){var t=[],n,r,i;if(typeof e!=="function")e=he(e);for(var a=0,o=this.length;a<o;a++){t.push(n=[]);n.parentNode=(r=this[a]).parentNode;for(var s=0,u=r.length;s<u;s++){if((i=r[s])&&e.call(i,i.__data__,s,a)){n.push(i)}}}return q(t)};function he(e){return function(){return Z(this,e)}}J.order=function(){for(var e=-1,t=this.length;++e<t;){for(var n=this[e],r=n.length-1,i=n[r],a;--r>=0;){if(a=n[r]){if(i&&i!==a.nextSibling)i.parentNode.insertBefore(a,i);i=a}}}return this};J.sort=function(e){e=ge.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()};function ge(e){if(!arguments.length)e=m;return function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}J.each=function(e){return me(this,function(t,n,r){e.call(t,t.__data__,n,r)})};function me(e,t){for(var n=0,r=e.length;n<r;n++){for(var i=e[n],a=0,o=i.length,s;a<o;a++){if(s=i[a])t(s,a,n)}}return e}J.call=function(e){var t=s(arguments);e.apply(t[0]=this,t);return this};J.empty=function(){return!this.node()};J.node=function(){for(var e=0,t=this.length;e<t;e++){for(var n=this[e],r=0,i=n.length;r<i;r++){var a=n[r];if(a)return a}}return null};J.size=function(){var e=0;me(this,function(){++e});return e};function ve(e){Q(e,ye);return e}var ye=[];a.selection.enter=ve;a.selection.enter.prototype=ye;ye.append=J.append;ye.empty=J.empty;ye.node=J.node;ye.call=J.call;ye.size=J.size;ye.select=function(e){var t=[],n,r,i,a,o;for(var s=-1,u=this.length;++s<u;){i=(a=this[s]).update;t.push(n=[]);n.parentNode=a.parentNode;for(var l=-1,c=a.length;++l<c;){if(o=a[l]){n.push(i[l]=r=e.call(a.parentNode,o.__data__,l,s));r.__data__=o.__data__}else{n.push(null)}}}return q(t)};ye.insert=function(e,t){if(arguments.length<2)t=be(this);return J.insert.call(this,e,t)};function be(e){var t,n;return function(r,i,a){var o=e[a].update,s=o.length,u;if(a!=n)n=a,t=0;if(i>=t)t=i+1;while(!(u=o[t])&&++t<s);return u}}a.select=function(e){var t;if(typeof e==="string"){t=[X(e,u)];t.parentNode=u.documentElement}else{t=[e];t.parentNode=l(e)}return q([t])};a.selectAll=function(e){var t;if(typeof e==="string"){t=s(K(e,u));t.parentNode=u.documentElement}else{t=s(e);t.parentNode=null}return q([t])};J.on=function(e,t,n){var r=arguments.length;if(r<3){if(typeof e!=="string"){if(r<2)t=false;for(n in e)this.each(Me(n,e[n],t));return this}if(r<2)return(r=this.node()["__on"+e])&&r._;n=false}return this.each(Me(e,t,n))};function Me(e,t,n){var r="__on"+e,i=e.indexOf("."),o=we;if(i>0)e=e.slice(0,i);var u=xe.get(e);if(u)e=u,o=Ae;function l(){var t=this[r];if(t){this.removeEventListener(e,t,t.$);delete this[r]}}function c(){var i=o(t,s(arguments));l.call(this);this.addEventListener(e,this[r]=i,i.$=n);i._=t}function f(){var t=new RegExp("^__on([^.]+)"+a.requote(e)+"$"),n;for(var r in this){if(n=r.match(t)){var i=this[r];this.removeEventListener(n[1],i,i.$);delete this[r]}}}return i?t?c:l:t?F:f}var xe=a.map({mouseenter:"mouseover",mouseleave:"mouseout"});if(u){xe.forEach(function(e){if("on"+e in u)xe.remove(e)})}function we(e,t){return function(n){var r=a.event;a.event=n;t[0]=this.__data__;try{e.apply(this,t)}finally{a.event=r}}}function Ae(e,t){var n=we(e,t);return function(e){var t=this,r=e.relatedTarget;if(!r||r!==t&&!(r.compareDocumentPosition(t)&8)){n.call(t,e)}}}var Te,Ce=0;function Se(e){var t=".dragsuppress-"+ ++Ce,n="click"+t,r=a.select(c(e)).on("touchmove"+t,G).on("dragstart"+t,G).on("selectstart"+t,G);if(Te==null){Te="onselectstart"in e?false:B(e.style,"userSelect")}if(Te){var i=l(e).style,o=i[Te];i[Te]="none"}return function(e){r.on(t,null);if(Te)i[Te]=o;if(e){var a=function(){r.on(n,null)};r.on(n,function(){G();a()},true);setTimeout(a,0)}}}a.mouse=function(e){return Ie(e,W())};var De=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Ie(e,t){if(t.changedTouches)t=t.changedTouches[0];var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();if(De<0){var i=c(e);if(i.scrollX||i.scrollY){n=a.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var o=n[0][0].getScreenCTM();De=!(o.f||o.e);n.remove()}}if(De)r.x=t.pageX,r.y=t.pageY;else r.x=t.clientX,r.y=t.clientY;r=r.matrixTransform(e.getScreenCTM().inverse());return[r.x,r.y]}var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}a.touch=function(e,t,n){if(arguments.length<3)n=t,t=W().changedTouches;if(t)for(var r=0,i=t.length,a;r<i;++r){if((a=t[r]).identifier===n){return Ie(e,a)}}};a.behavior.drag=function(){var e=H(i,"drag","dragstart","dragend"),t=null,n=o(F,a.mouse,c,"mousemove","mouseup"),r=o(Ee,a.touch,R,"touchmove","touchend");function i(){this.on("mousedown.drag",n).on("touchstart.drag",r)}function o(n,r,i,o,s){return function(){var u=this,l=a.event.target.correspondingElement||a.event.target,c=u.parentNode,f=e.of(u,arguments),d=0,p=n(),h=".drag"+(p==null?"":"-"+p),g,m=a.select(i(l)).on(o+h,b).on(s+h,M),v=Se(l),y=r(c,p);if(t){g=t.apply(u,arguments);g=[g.x-y[0],g.y-y[1]]}else{g=[0,0]}f({type:"dragstart"});function b(){var e=r(c,p),t,n;if(!e)return;t=e[0]-y[0];n=e[1]-y[1];d|=t|n;y=e;f({type:"drag",x:e[0]+g[0],y:e[1]+g[1],dx:t,dy:n})}function M(){if(!r(c,p))return;m.on(o+h,null).on(s+h,null);v(d);f({type:"dragend"})}}}i.origin=function(e){if(!arguments.length)return t;t=e;return i};return a.rebind(i,e,"on")};function Ee(){return a.event.changedTouches[0].identifier}a.touches=function(e,t){if(arguments.length<2)t=W().touches;return t?s(t).map(function(t){var n=Ie(e,t);n.identifier=t.identifier;return n}):[]};var Ne=1e-6,Oe=Ne*Ne,_e=Math.PI,Le=2*_e,Pe=Le-Ne,ke=_e/2,Re=_e/180,je=180/_e;function Be(e){return e>0?1:e<0?-1:0}function ze(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function Fe(e){return e>1?0:e<-1?_e:Math.acos(e)}function Ve(e){return e>1?ke:e<-1?-ke:Math.asin(e)}function Ue(e){return((e=Math.exp(e))-1/e)/2}function Ge(e){return((e=Math.exp(e))+1/e)/2}function We(e){return((e=Math.exp(2*e))-1)/(e+1)}function He(e){return(e=Math.sin(e/2))*e}var Ye=Math.SQRT2,Qe=2,qe=4;a.interpolateZoom=function(e,t){var n=e[0],r=e[1],i=e[2],a=t[0],o=t[1],s=t[2],u=a-n,l=o-r,c=u*u+l*l,f,d;if(c<Oe){d=Math.log(s/i)/Ye;f=function(e){return[n+e*u,r+e*l,i*Math.exp(Ye*e*d)]}}else{var p=Math.sqrt(c),h=(s*s-i*i+qe*c)/(2*i*Qe*p),g=(s*s-i*i-qe*c)/(2*s*Qe*p),m=Math.log(Math.sqrt(h*h+1)-h),v=Math.log(Math.sqrt(g*g+1)-g);d=(v-m)/Ye;f=function(e){var t=e*d,a=Ge(m),o=i/(Qe*p)*(a*We(Ye*t+m)-Ue(m));return[n+o*u,r+o*l,i*a/Ge(Ye*t+m)]}}f.duration=d*1e3;return f};a.behavior.zoom=function(){var e={x:0,y:0,k:1},t,n,r,i=[960,500],o=Xe,s=250,l=0,f="mousedown.zoom",d="mousemove.zoom",p="mouseup.zoom",h,g="touchstart.zoom",m,v=H(w,"zoomstart","zoom","zoomend"),y,b,M,x;if(!Ze){Ze="onwheel"in u?(Ke=function(){return-a.event.deltaY*(a.event.deltaMode?120:1)},"wheel"):"onmousewheel"in u?(Ke=function(){return a.event.wheelDelta},"mousewheel"):(Ke=function(){return-a.event.detail},"MozMousePixelScroll")}function w(e){e.on(f,_).on(Ze+".zoom",P).on("dblclick.zoom",k).on(g,L)}w.event=function(t){t.each(function(){var t=v.of(this,arguments),r=e;if(ku){a.select(this).transition().each("start.zoom",function(){e=this.__chart__||{x:0,y:0,k:1};E(t)}).tween("zoom:zoom",function(){var o=i[0],s=i[1],u=n?n[0]:o/2,l=n?n[1]:s/2,c=a.interpolateZoom([(u-e.x)/e.k,(l-e.y)/e.k,o/e.k],[(u-r.x)/r.k,(l-r.y)/r.k,o/r.k]);return function(n){var r=c(n),i=o/r[2];this.__chart__=e={x:u-r[0]*i,y:l-r[1]*i,k:i};N(t)}}).each("interrupt.zoom",function(){O(t)}).each("end.zoom",function(){O(t)})}else{this.__chart__=e;E(t);N(t);O(t)}})};w.translate=function(t){if(!arguments.length)return[e.x,e.y];e={x:+t[0],y:+t[1],k:e.k};I();return w};w.scale=function(t){if(!arguments.length)return e.k;e={x:e.x,y:e.y,k:null};C(+t);I();return w};w.scaleExtent=function(e){if(!arguments.length)return o;o=e==null?Xe:[+e[0],+e[1]];return w};w.center=function(e){if(!arguments.length)return r;r=e&&[+e[0],+e[1]];return w};w.size=function(e){if(!arguments.length)return i;i=e&&[+e[0],+e[1]];return w};w.duration=function(e){if(!arguments.length)return s;s=+e;return w};w.x=function(t){if(!arguments.length)return b;b=t;y=t.copy();e={x:0,y:0,k:1};return w};w.y=function(t){if(!arguments.length)return x;x=t;M=t.copy();e={x:0,y:0,k:1};return w};function A(t){return[(t[0]-e.x)/e.k,(t[1]-e.y)/e.k]}function T(t){return[t[0]*e.k+e.x,t[1]*e.k+e.y]}function C(t){e.k=Math.max(o[0],Math.min(o[1],t))}function S(t,n){n=T(n);e.x+=t[0]-n[0];e.y+=t[1]-n[1]}function D(t,r,i,o){t.__chart__={x:e.x,y:e.y,k:e.k};C(Math.pow(2,o));S(n=r,i);t=a.select(t);if(s>0)t=t.transition().duration(s);t.call(w.event)}function I(){if(b)b.domain(y.range().map(function(t){return(t-e.x)/e.k}).map(y.invert));if(x)x.domain(M.range().map(function(t){return(t-e.y)/e.k}).map(M.invert))}function E(e){if(!l++)e({type:"zoomstart"})}function N(t){I();t({type:"zoom",scale:e.k,translate:[e.x,e.y]})}function O(e){if(!--l)e({type:"zoomend"}),n=null}function _(){var e=this,t=v.of(e,arguments),n=0,r=a.select(c(e)).on(d,s).on(p,u),i=A(a.mouse(e)),o=Se(e);Nu.call(e);E(t);function s(){n=1;S(a.mouse(e),i);N(t)}function u(){r.on(d,null).on(p,null);o(n);O(t)}}function L(){var t=this,n=v.of(t,arguments),r={},i=0,o,s=".zoom-"+a.event.changedTouches[0].identifier,u="touchmove"+s,l="touchend"+s,c=[],d=a.select(t),p=Se(t);y();E(n);d.on(f,null).on(g,y);function h(){var n=a.touches(t);o=e.k;n.forEach(function(e){if(e.identifier in r)r[e.identifier]=A(e)});return n}function y(){var n=a.event.target;a.select(n).on(u,b).on(l,M);c.push(n);var o=a.event.changedTouches;for(var s=0,f=o.length;s<f;++s){r[o[s].identifier]=null}var d=h(),p=Date.now();if(d.length===1){if(p-m<500){var g=d[0];D(t,g,r[g.identifier],Math.floor(Math.log(e.k)/Math.LN2)+1);G()}m=p}else if(d.length>1){var g=d[0],v=d[1],y=g[0]-v[0],x=g[1]-v[1];i=y*y+x*x}}function b(){var e=a.touches(t),s,u,l,c;Nu.call(t);for(var f=0,d=e.length;f<d;++f,c=null){l=e[f];if(c=r[l.identifier]){if(u)break;s=l,u=c}}if(c){var p=(p=l[0]-s[0])*p+(p=l[1]-s[1])*p,h=i&&Math.sqrt(p/i);s=[(s[0]+l[0])/2,(s[1]+l[1])/2];u=[(u[0]+c[0])/2,(u[1]+c[1])/2];C(h*o)}m=null;S(s,u);N(n)}function M(){if(a.event.touches.length){var e=a.event.changedTouches;for(var t=0,i=e.length;t<i;++t){delete r[e[t].identifier]}for(var o in r){return void h()}}a.selectAll(c).on(s,null);d.on(f,_).on(g,L);p();O(n)}}function P(){var i=v.of(this,arguments);if(h)clearTimeout(h);else Nu.call(this),t=A(n=r||a.mouse(this)),E(i);h=setTimeout(function(){h=null;O(i)},50);G();C(Math.pow(2,Ke()*.002)*e.k);S(n,t);N(i)}function k(){var t=a.mouse(this),n=Math.log(e.k)/Math.LN2;D(this,t,A(t),a.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1)}return a.rebind(w,v,"on")};var Xe=[0,Infinity],Ke,Ze;a.color=Je;function Je(){}Je.prototype.toString=function(){return this.rgb()+""};a.hsl=$e;function $e(e,t,n){return this instanceof $e?void(this.h=+e,this.s=+t,this.l=+n):arguments.length<2?e instanceof $e?new $e(e.h,e.s,e.l):xt(""+e,wt,$e):new $e(e,t,n)}var et=$e.prototype=new Je;et.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);return new $e(this.h,this.s,this.l/e)};et.darker=function(e){e=Math.pow(.7,arguments.length?e:1);return new $e(this.h,this.s,e*this.l)};et.rgb=function(){return tt(this.h,this.s,this.l)};function tt(e,t,n){var r,i;e=isNaN(e)?0:(e%=360)<0?e+360:e;t=isNaN(t)?0:t<0?0:t>1?1:t;n=n<0?0:n>1?1:n;i=n<=.5?n*(1+t):n+t-n*t;r=2*n-i;function a(e){if(e>360)e-=360;else if(e<0)e+=360;if(e<60)return r+(i-r)*e/60;if(e<180)return i;if(e<240)return r+(i-r)*(240-e)/60;return r}function o(e){return Math.round(a(e)*255)}return new mt(o(e+120),o(e),o(e-120))}a.hcl=nt;function nt(e,t,n){return this instanceof nt?void(this.h=+e,this.c=+t,this.l=+n):arguments.length<2?e instanceof nt?new nt(e.h,e.c,e.l):e instanceof at?dt(e.l,e.a,e.b):dt((e=At((e=a.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new nt(e,t,n)}var rt=nt.prototype=new Je;rt.brighter=function(e){return new nt(this.h,this.c,Math.min(100,this.l+ot*(arguments.length?e:1)))};rt.darker=function(e){return new nt(this.h,this.c,Math.max(0,this.l-ot*(arguments.length?e:1)))};rt.rgb=function(){return it(this.h,this.c,this.l).rgb()};function it(e,t,n){if(isNaN(e))e=0;if(isNaN(t))t=0;return new at(n,Math.cos(e*=Re)*t,Math.sin(e)*t)}a.lab=at;function at(e,t,n){return this instanceof at?void(this.l=+e,this.a=+t,this.b=+n):arguments.length<2?e instanceof at?new at(e.l,e.a,e.b):e instanceof nt?it(e.h,e.c,e.l):At((e=mt(e)).r,e.g,e.b):new at(e,t,n)}var ot=18;var st=.95047,ut=1,lt=1.08883;var ct=at.prototype=new Je;ct.brighter=function(e){return new at(Math.min(100,this.l+ot*(arguments.length?e:1)),this.a,this.b)};ct.darker=function(e){return new at(Math.max(0,this.l-ot*(arguments.length?e:1)),this.a,this.b)};ct.rgb=function(){return ft(this.l,this.a,this.b)};function ft(e,t,n){var r=(e+16)/116,i=r+t/500,a=r-n/200;i=pt(i)*st;r=pt(r)*ut;a=pt(a)*lt;return new mt(gt(3.2404542*i-1.5371385*r-.4985314*a),gt(-.969266*i+1.8760108*r+.041556*a),gt(.0556434*i-.2040259*r+1.0572252*a))}function dt(e,t,n){return e>0?new nt(Math.atan2(n,t)*je,Math.sqrt(t*t+n*n),e):new nt(NaN,NaN,e)}function pt(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function ht(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function gt(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}a.rgb=mt;function mt(e,t,n){return this instanceof mt?void(this.r=~~e,this.g=~~t,this.b=~~n):arguments.length<2?e instanceof mt?new mt(e.r,e.g,e.b):xt(""+e,mt,tt):new mt(e,t,n)}function vt(e){return new mt(e>>16,e>>8&255,e&255)}function yt(e){return vt(e)+""}var bt=mt.prototype=new Je;bt.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b,i=30;if(!t&&!n&&!r)return new mt(i,i,i);if(t&&t<i)t=i;if(n&&n<i)n=i;if(r&&r<i)r=i;return new mt(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,r/e))};bt.darker=function(e){e=Math.pow(.7,arguments.length?e:1);return new mt(e*this.r,e*this.g,e*this.b)};bt.hsl=function(){return wt(this.r,this.g,this.b)};bt.toString=function(){return"#"+Mt(this.r)+Mt(this.g)+Mt(this.b)};function Mt(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function xt(e,t,n){var r=0,i=0,a=0,o,s,u;o=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase());if(o){s=o[2].split(",");switch(o[1]){case"hsl":{return n(parseFloat(s[0]),parseFloat(s[1])/100,parseFloat(s[2])/100)}case"rgb":{return t(Ct(s[0]),Ct(s[1]),Ct(s[2]))}}}if(u=St.get(e)){return t(u.r,u.g,u.b)}if(e!=null&&e.charAt(0)==="#"&&!isNaN(u=parseInt(e.slice(1),16))){if(e.length===4){r=(u&3840)>>4;r=r>>4|r;i=u&240;i=i>>4|i;a=u&15;a=a<<4|a}else if(e.length===7){r=(u&16711680)>>16;i=(u&65280)>>8;a=u&255}}return t(r,i,a)}function wt(e,t,n){var r=Math.min(e/=255,t/=255,n/=255),i=Math.max(e,t,n),a=i-r,o,s,u=(i+r)/2;if(a){s=u<.5?a/(i+r):a/(2-i-r);if(e==i)o=(t-n)/a+(t<n?6:0);else if(t==i)o=(n-e)/a+2;else o=(e-t)/a+4;o*=60}else{o=NaN;s=u>0&&u<1?0:o}return new $e(o,s,u)}function At(e,t,n){e=Tt(e);t=Tt(t);n=Tt(n);var r=ht((.4124564*e+.3575761*t+.1804375*n)/st),i=ht((.2126729*e+.7151522*t+.072175*n)/ut),a=ht((.0193339*e+.119192*t+.9503041*n)/lt);return at(116*i-16,500*(r-i),200*(i-a))}function Tt(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Ct(e){var t=parseFloat(e);return e.charAt(e.length-1)==="%"?Math.round(t*2.55):t}var St=a.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});St.forEach(function(e,t){St.set(e,vt(t))});function Dt(e){return typeof e==="function"?e:function(){return e}}a.functor=Dt;a.xhr=It(R);function It(e){return function(t,n,r){if(arguments.length===2&&typeof n==="function")r=n,n=null;return Et(t,n,e,r)}}function Et(e,t,n,r){var i={},o=a.dispatch("beforesend","progress","load","error"),u={},l=new XMLHttpRequest,c=null;if(this.XDomainRequest&&!("withCredentials"in l)&&/^(http(s)?:)?\/\//.test(e))l=new XDomainRequest;"onload"in l?l.onload=l.onerror=f:l.onreadystatechange=function(){l.readyState>3&&f()};function f(){var e=l.status,t;if(!e&&Ot(l)||e>=200&&e<300||e===304){try{t=n.call(i,l)}catch(e){o.error.call(i,e);return}o.load.call(i,t)}else{o.error.call(i,l)}}l.onprogress=function(e){var t=a.event;a.event=e;try{o.progress.call(i,l)}finally{a.event=t}};i.header=function(e,t){e=(e+"").toLowerCase();if(arguments.length<2)return u[e];if(t==null)delete u[e];else u[e]=t+"";return i};i.mimeType=function(e){if(!arguments.length)return t;t=e==null?null:e+"";return i};i.responseType=function(e){if(!arguments.length)return c;c=e;return i};i.response=function(e){n=e;return i};["get","post"].forEach(function(e){i[e]=function(){return i.send.apply(i,[e].concat(s(arguments)))}});i.send=function(n,r,a){if(arguments.length===2&&typeof r==="function")a=r,r=null;l.open(n,e,true);if(t!=null&&!("accept"in u))u["accept"]=t+",*/*";if(l.setRequestHeader)for(var s in u)l.setRequestHeader(s,u[s]);if(t!=null&&l.overrideMimeType)l.overrideMimeType(t);if(c!=null)l.responseType=c;if(a!=null)i.on("error",a).on("load",function(e){a(null,e)});o.beforesend.call(i,l);l.send(r==null?null:r);return i};i.abort=function(){l.abort();return i};a.rebind(i,o,"on");return r==null?i:i.get(Nt(r))}function Nt(e){return e.length===1?function(t,n){e(t==null?n:null)}:e}function Ot(e){var t=e.responseType;return t&&t!=="text"?e.response:e.responseText}a.dsv=function(e,t){var n=new RegExp('["'+e+"\n]"),r=e.charCodeAt(0);function i(e,n,r){if(arguments.length<3)r=n,n=null;var i=Et(e,t,n==null?a:o(n),r);i.row=function(e){return arguments.length?i.response((n=e)==null?a:o(e)):n};return i}function a(e){return i.parse(e.responseText)}function o(e){return function(t){return i.parse(t.responseText,e)}}i.parse=function(e,t){var n;return i.parseRows(e,function(e,r){if(n)return n(e,r-1);var i=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");n=t?function(e,n){return t(i(e),n)}:i})};i.parseRows=function(e,t){var n={},i={},a=[],o=e.length,s=0,u=0,l,c;function f(){if(s>=o)return i;if(c)return c=false,n;var t=s;if(e.charCodeAt(t)===34){var a=t;while(a++<o){if(e.charCodeAt(a)===34){if(e.charCodeAt(a+1)!==34)break;++a}}s=a+2;var u=e.charCodeAt(a+1);if(u===13){c=true;if(e.charCodeAt(a+2)===10)++s}else if(u===10){c=true}return e.slice(t+1,a).replace(/""/g,'"')}while(s<o){var u=e.charCodeAt(s++),l=1;if(u===10)c=true;else if(u===13){c=true;if(e.charCodeAt(s)===10)++s,++l}else if(u!==r)continue;return e.slice(t,s-l)}return e.slice(t)}while((l=f())!==i){var d=[];while(l!==n&&l!==i){d.push(l);l=f()}if(t&&(d=t(d,u++))==null)continue;a.push(d)}return a};i.format=function(t){if(Array.isArray(t[0]))return i.formatRows(t);var n=new k,r=[];t.forEach(function(e){for(var t in e){if(!n.has(t)){r.push(n.add(t))}}});return[r.map(u).join(e)].concat(t.map(function(t){return r.map(function(e){return u(t[e])}).join(e)})).join("\n")};i.formatRows=function(e){return e.map(s).join("\n")};function s(t){return t.map(u).join(e)}function u(e){return n.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}return i};a.csv=a.dsv(",","text/csv");a.tsv=a.dsv("\t","text/tab-separated-values");var _t,Lt,Pt,kt,Rt=this[B(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};a.timer=function(){jt.apply(this,arguments)};function jt(e,t,n){var r=arguments.length;if(r<2)t=0;if(r<3)n=Date.now();var i=n+t,a={c:e,t:i,n:null};if(Lt)Lt.n=a;else _t=a;Lt=a;if(!Pt){kt=clearTimeout(kt);Pt=1;Rt(Bt)}return a}function Bt(){var e=zt(),t=Ft()-e;if(t>24){if(isFinite(t)){clearTimeout(kt);kt=setTimeout(Bt,t)}Pt=0}else{Pt=1;Rt(Bt)}}a.timer.flush=function(){zt();Ft()};function zt(){var e=Date.now(),t=_t;while(t){if(e>=t.t&&t.c(e-t.t))t.c=null;t=t.n}return e}function Ft(){var e,t=_t,n=Infinity;while(t){if(t.c){if(t.t<n)n=t.t;t=(e=t).n}else{t=e?e.n=t.n:_t=t.n}}Lt=e;return n}function Vt(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}a.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var Ut=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(Gt);a.formatPrefix=function(e,t){var n=0;if(e=+e){if(e<0)e*=-1;if(t)e=a.round(e,Vt(e,t));n=1+Math.floor(1e-12+Math.log(e)/Math.LN10);n=Math.max(-24,Math.min(24,Math.floor((n-1)/3)*3))}return Ut[8+n/3]};function Gt(e,t){var n=Math.pow(10,w(8-t)*3);return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}}function Wt(e){var t=e.decimal,n=e.thousands,r=e.grouping,i=e.currency,o=r&&n?function(e,t){var i=e.length,a=[],o=0,s=r[0],u=0;while(i>0&&s>0){if(u+s+1>t)s=Math.max(1,t-u);a.push(e.substring(i-=s,i+s));if((u+=s+1)>t)break;s=r[o=(o+1)%r.length]}return a.reverse().join(n)}:R;return function(e){var n=Ht.exec(e),r=n[1]||" ",s=n[2]||">",u=n[3]||"-",l=n[4]||"",c=n[5],f=+n[6],d=n[7],p=n[8],h=n[9],g=1,m="",v="",y=false,b=true;if(p)p=+p.substring(1);if(c||r==="0"&&s==="="){c=r="0";s="="}switch(h){case"n":d=true;h="g";break;case"%":g=100;v="%";h="f";break;case"p":g=100;v="%";h="r";break;case"b":case"o":case"x":case"X":if(l==="#")m="0"+h.toLowerCase();case"c":b=false;case"d":y=true;p=0;break;case"s":g=-1;h="r";break}if(l==="$")m=i[0],v=i[1];if(h=="r"&&!p)h="g";if(p!=null){if(h=="g")p=Math.max(1,Math.min(21,p));else if(h=="e"||h=="f")p=Math.max(0,Math.min(20,p))}h=Yt.get(h)||Qt;var M=c&&d;return function(e){var n=v;if(y&&e%1)return"";var i=e<0||e===0&&1/e<0?(e=-e,"-"):u==="-"?"":u;if(g<0){var l=a.formatPrefix(e,p);e=l.scale(e);n=l.symbol+v}else{e*=g}e=h(e,p);var x=e.lastIndexOf("."),w,A;if(x<0){var T=b?e.lastIndexOf("e"):-1;if(T<0)w=e,A="";else w=e.substring(0,T),A=e.substring(T)}else{w=e.substring(0,x);A=t+e.substring(x+1)}if(!c&&d)w=o(w,Infinity);var C=m.length+w.length+A.length+(M?0:i.length),S=C<f?new Array(C=f-C+1).join(r):"";if(M)w=o(S+w,S.length?f-A.length:Infinity);i+=m;e=w+A;return(s==="<"?i+e+S:s===">"?S+i+e:s==="^"?S.substring(0,C>>=1)+i+e+S.substring(C):i+(M?e:S+e))+n}}}var Ht=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i;var Yt=a.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=a.round(e,Vt(e,t))).toFixed(Math.max(0,Math.min(20,Vt(e*(1+1e-15),t))))}});function Qt(e){return e+""}var qt=a.time={},Xt=Date;function Kt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}Kt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Zt.setUTCDate.apply(this._,arguments)},setDay:function(){Zt.setUTCDay.apply(this._,arguments)},setFullYear:function(){Zt.setUTCFullYear.apply(this._,arguments)},setHours:function(){Zt.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Zt.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Zt.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Zt.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Zt.setUTCSeconds.apply(this._,arguments)},setTime:function(){Zt.setTime.apply(this._,arguments)}};var Zt=Date.prototype;function Jt(e,t,n){function r(t){var n=e(t),r=a(n,1);return t-n<r-t?n:r}function i(n){t(n=e(new Xt(n-1)),1);return n}function a(e,n){t(e=new Xt(+e),n);return e}function o(e,r,a){var o=i(e),s=[];if(a>1){while(o<r){if(!(n(o)%a))s.push(new Date(+o));t(o,1)}}else{while(o<r)s.push(new Date(+o)),t(o,1)}return s}function s(e,t,n){try{Xt=Kt;var r=new Kt;r._=e;return o(r,t,n)}finally{Xt=Date}}e.floor=e;e.round=r;e.ceil=i;e.offset=a;e.range=o;var u=e.utc=$t(e);u.floor=u;u.round=$t(r);u.ceil=$t(i);u.offset=$t(a);u.range=s;return e}function $t(e){return function(t,n){try{Xt=Kt;var r=new Kt;r._=t;return e(r,n)._}finally{Xt=Date}}}qt.year=Jt(function(e){e=qt.day(e);e.setMonth(0,1);return e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()});qt.years=qt.year.range;qt.years.utc=qt.year.utc.range;qt.day=Jt(function(e){var t=new Xt(2e3,0);t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate());return t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1});qt.days=qt.day.range;qt.days.utc=qt.day.utc.range;qt.dayOfYear=function(e){var t=qt.year(e);return Math.floor((e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/864e5)};["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,t){t=7-t;var n=qt[e]=Jt(function(e){(e=qt.day(e)).setDate(e.getDate()-(e.getDay()+t)%7);return e},function(e,t){e.setDate(e.getDate()+Math.floor(t)*7)},function(e){var n=qt.year(e).getDay();return Math.floor((qt.dayOfYear(e)+(n+t)%7)/7)-(n!==t)});qt[e+"s"]=n.range;qt[e+"s"].utc=n.utc.range;qt[e+"OfYear"]=function(e){var n=qt.year(e).getDay();return Math.floor((qt.dayOfYear(e)+(n+t)%7)/7)}});qt.week=qt.sunday;qt.weeks=qt.sunday.range;qt.weeks.utc=qt.sunday.utc.range;qt.weekOfYear=qt.sundayOfYear;function en(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,s=e.shortDays,u=e.months,l=e.shortMonths;function c(e){var t=e.length;function n(n){var r=[],i=-1,a=0,o,s,u;while(++i<t){if(e.charCodeAt(i)===37){r.push(e.slice(a,i));if((s=tn[o=e.charAt(++i)])!=null)o=e.charAt(++i);if(u=x[o])o=u(n,s==null?o==="e"?" ":"0":s);r.push(o);a=i+1}}r.push(e.slice(a,i));return r.join("")}n.parse=function(t){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},r=f(n,e,t,0);if(r!=t.length)return null;if("p"in n)n.H=n.H%12+n.p*12;var i=n.Z!=null&&Xt!==Kt,a=new(i?Kt:Xt);if("j"in n)a.setFullYear(n.y,0,n.j);else if("W"in n||"U"in n){if(!("w"in n))n.w="W"in n?1:0;a.setFullYear(n.y,0,1);a.setFullYear(n.y,0,"W"in n?(n.w+6)%7+n.W*7-(a.getDay()+5)%7:n.w+n.U*7-(a.getDay()+6)%7)}else a.setFullYear(n.y,n.m,n.d);a.setHours(n.H+(n.Z/100|0),n.M+n.Z%100,n.S,n.L);return i?a._:a};n.toString=function(){return e};return n}function f(e,t,n,r){var i,a,o,s=0,u=t.length,l=n.length;while(s<u){if(r>=l)return-1;i=t.charCodeAt(s++);if(i===37){o=t.charAt(s++);a=w[o in tn?t.charAt(s++):o];if(!a||(r=a(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++)){return-1}}return r}c.utc=function(e){var t=c(e);function n(e){try{Xt=Kt;var n=new Xt;n._=e;return t(n)}finally{Xt=Date}}n.parse=function(e){try{Xt=Kt;var n=t.parse(e);return n&&n._}finally{Xt=Date}};n.toString=t.toString;return n};c.multi=c.utc.multi=Tn;var d=a.map(),p=on(o),h=sn(o),g=on(s),m=sn(s),v=on(u),y=sn(u),b=on(l),M=sn(l);i.forEach(function(e,t){d.set(e.toLowerCase(),t)});var x={a:function(e){return s[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return u[e.getMonth()]},c:c(t),d:function(e,t){return an(e.getDate(),t,2)},e:function(e,t){return an(e.getDate(),t,2)},H:function(e,t){return an(e.getHours(),t,2)},I:function(e,t){return an(e.getHours()%12||12,t,2)},j:function(e,t){return an(1+qt.dayOfYear(e),t,3)},L:function(e,t){return an(e.getMilliseconds(),t,3)},m:function(e,t){return an(e.getMonth()+1,t,2)},M:function(e,t){return an(e.getMinutes(),t,2)},p:function(e){return i[+(e.getHours()>=12)]},S:function(e,t){return an(e.getSeconds(),t,2)},U:function(e,t){return an(qt.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return an(qt.mondayOfYear(e),t,2)},x:c(n),X:c(r),y:function(e,t){return an(e.getFullYear()%100,t,2)},Y:function(e,t){return an(e.getFullYear()%1e4,t,4)},Z:wn,"%":function(){return"%"}};var w={a:A,A:T,b:C,B:S,c:D,d:mn,e:mn,H:yn,I:yn,j:vn,L:xn,m:gn,M:bn,p:N,S:Mn,U:ln,w:un,W:cn,x:I,X:E,y:dn,Y:fn,Z:pn,"%":An};function A(e,t,n){g.lastIndex=0;var r=g.exec(t.slice(n));return r?(e.w=m.get(r[0].toLowerCase()),n+r[0].length):-1}function T(e,t,n){p.lastIndex=0;var r=p.exec(t.slice(n));return r?(e.w=h.get(r[0].toLowerCase()),n+r[0].length):-1}function C(e,t,n){b.lastIndex=0;var r=b.exec(t.slice(n));return r?(e.m=M.get(r[0].toLowerCase()),n+r[0].length):-1}function S(e,t,n){v.lastIndex=0;var r=v.exec(t.slice(n));return r?(e.m=y.get(r[0].toLowerCase()),n+r[0].length):-1}function D(e,t,n){return f(e,x.c.toString(),t,n)}function I(e,t,n){return f(e,x.x.toString(),t,n)}function E(e,t,n){return f(e,x.X.toString(),t,n)}function N(e,t,n){var r=d.get(t.slice(n,n+=2).toLowerCase());return r==null?-1:(e.p=r,n)}return c}var tn={"-":"",_:" ",0:"0"},nn=/^\s*\d+/,rn=/^%/;function an(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function on(e){return new RegExp("^(?:"+e.map(a.requote).join("|")+")","i")}function sn(e){var t=new C,n=-1,r=e.length;while(++n<r)t.set(e[n].toLowerCase(),n);return t}function un(e,t,n){nn.lastIndex=0;var r=nn.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function ln(e,t,n){nn.lastIndex=0;var r=nn.exec(t.slice(n));return r?(e.U=+r[0],n+r[0].length):-1}function cn(e,t,n){nn.lastIndex=0;var r=nn.exec(t.slice(n));return r?(e.W=+r[0],n+r[0].length):-1}function fn(e,t,n){nn.lastIndex=0;var r=nn.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function dn(e,t,n){nn.lastIndex=0;var r=nn.exec(t.slice(n,n+2));return r?(e.y=hn(+r[0]),n+r[0].length):-1}function pn(e,t,n){return/^[+-]\d{4}$/.test(t=t.slice(n,n+5))?(e.Z=-t,n+5):-1}function hn(e){return e+(e>68?1900:2e3)}function gn(e,t,n){nn.lastIndex=0;var r=nn.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function mn(e,t,n){nn.lastIndex=0;var r=nn.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function vn(e,t,n){nn.lastIndex=0;var r=nn.exec(t.slice(n,n+3));return r?(e.j=+r[0],n+r[0].length):-1}function yn(e,t,n){nn.lastIndex=0;var r=nn.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function bn(e,t,n){nn.lastIndex=0;var r=nn.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Mn(e,t,n){nn.lastIndex=0;var r=nn.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function xn(e,t,n){nn.lastIndex=0;var r=nn.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function wn(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",r=w(t)/60|0,i=w(t)%60;return n+an(r,"0",2)+an(i,"0",2)}function An(e,t,n){rn.lastIndex=0;var r=rn.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Tn(e){var t=e.length,n=-1;while(++n<t)e[n][0]=this(e[n][0]);return function(t){var n=0,r=e[n];while(!r[1](t))r=e[++n];return r[0](t)}}a.locale=function(e){return{numberFormat:Wt(e),timeFormat:en(e)}};var Cn=a.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});a.format=Cn.numberFormat;a.geo={};function Sn(){}Sn.prototype={s:0,t:0,add:function(e){In(e,this.t,Dn);In(Dn.s,this.s,this);if(this.s)this.t+=Dn.t;else this.s=Dn.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Dn=new Sn;function In(e,t,n){var r=n.s=e+t,i=r-e,a=r-i;n.t=e-a+(t-i)}a.geo.stream=function(e,t){if(e&&Nn.hasOwnProperty(e.type)){Nn[e.type](e,t)}else{En(e,t)}};function En(e,t){if(e&&On.hasOwnProperty(e.type)){On[e.type](e,t)}}var Nn={Feature:function(e,t){En(e.geometry,t)},FeatureCollection:function(e,t){var n=e.features,r=-1,i=n.length;while(++r<i)En(n[r].geometry,t)}};var On={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates;t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){var n=e.coordinates,r=-1,i=n.length;while(++r<i)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){_n(e.coordinates,t,0)},MultiLineString:function(e,t){var n=e.coordinates,r=-1,i=n.length;while(++r<i)_n(n[r],t,0)},Polygon:function(e,t){Ln(e.coordinates,t)},MultiPolygon:function(e,t){var n=e.coordinates,r=-1,i=n.length;while(++r<i)Ln(n[r],t)},GeometryCollection:function(e,t){var n=e.geometries,r=-1,i=n.length;while(++r<i)En(n[r],t)}};function _n(e,t,n){var r=-1,i=e.length-n,a;t.lineStart();while(++r<i)a=e[r],t.point(a[0],a[1],a[2]);t.lineEnd()}function Ln(e,t){var n=-1,r=e.length;t.polygonStart();while(++n<r)_n(e[n],t,1);t.polygonEnd()}a.geo.area=function(e){Pn=0;a.geo.stream(e,Rn);return Pn};var Pn,kn=new Sn;var Rn={sphere:function(){Pn+=4*_e},point:F,lineStart:F,lineEnd:F,polygonStart:function(){kn.reset();Rn.lineStart=jn},polygonEnd:function(){var e=2*kn;Pn+=e<0?4*_e+e:e;Rn.lineStart=Rn.lineEnd=Rn.point=F}};function jn(){var e,t,n,r,i;Rn.point=function(o,s){Rn.point=a;n=(e=o)*Re,r=Math.cos(s=(t=s)*Re/2+_e/4),i=Math.sin(s)};function a(e,t){e*=Re;t=t*Re/2+_e/4;var a=e-n,o=a>=0?1:-1,s=o*a,u=Math.cos(t),l=Math.sin(t),c=i*l,f=r*u+c*Math.cos(s),d=c*o*Math.sin(s);kn.add(Math.atan2(d,f));n=e,r=u,i=l}Rn.lineEnd=function(){a(e,t)}}function Bn(e){var t=e[0],n=e[1],r=Math.cos(n);return[r*Math.cos(t),r*Math.sin(t),Math.sin(n)]}function zn(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Fn(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Vn(e,t){e[0]+=t[0];e[1]+=t[1];e[2]+=t[2]}function Un(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Gn(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t;e[1]/=t;e[2]/=t}function Wn(e){return[Math.atan2(e[1],e[0]),Ve(e[2])]}function Hn(e,t){return w(e[0]-t[0])<Ne&&w(e[1]-t[1])<Ne}a.geo.bounds=function(){var e,t,n,r,i,o,s,u,l,c,f;var d={point:p,lineStart:g,lineEnd:m,polygonStart:function(){d.point=v;d.lineStart=y;d.lineEnd=b;l=0;Rn.polygonStart()},polygonEnd:function(){Rn.polygonEnd();d.point=p;d.lineStart=g;d.lineEnd=m;if(kn<0)e=-(n=180),t=-(r=90);else if(l>Ne)r=90;else if(l<-Ne)t=-90;f[0]=e,f[1]=n}};function p(i,a){c.push(f=[e=i,n=i]);if(a<t)t=a;if(a>r)r=a}function h(a,o){var s=Bn([a*Re,o*Re]);if(u){var l=Fn(u,s),c=[l[1],-l[0],0],f=Fn(c,l);Gn(f);f=Wn(f);var d=a-i,h=d>0?1:-1,g=f[0]*je*h,m=w(d)>180;if(m^(h*i<g&&g<h*a)){var v=f[1]*je;if(v>r)r=v}else if(g=(g+360)%360-180,m^(h*i<g&&g<h*a)){var v=-f[1]*je;if(v<t)t=v}else{if(o<t)t=o;if(o>r)r=o}if(m){if(a<i){if(M(e,a)>M(e,n))n=a}else{if(M(a,n)>M(e,n))e=a}}else{if(n>=e){if(a<e)e=a;if(a>n)n=a}else{if(a>i){if(M(e,a)>M(e,n))n=a}else{if(M(a,n)>M(e,n))e=a}}}}else{p(a,o)}u=s,i=a}function g(){d.point=h}function m(){f[0]=e,f[1]=n;d.point=p;u=null}function v(e,t){if(u){var n=e-i;l+=w(n)>180?n+(n>0?360:-360):n}else o=e,s=t;Rn.point(e,t);h(e,t)}function y(){Rn.lineStart()}function b(){v(o,s);Rn.lineEnd();if(w(l)>Ne)e=-(n=180);f[0]=e,f[1]=n;u=null}function M(e,t){return(t-=e)<0?t+360:t}function x(e,t){return e[0]-t[0]}function A(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}return function(i){r=n=-(e=t=Infinity);c=[];a.geo.stream(i,d);var o=c.length;if(o){c.sort(x);for(var s=1,u=c[0],l,p=[u];s<o;++s){l=c[s];if(A(l[0],u)||A(l[1],u)){if(M(u[0],l[1])>M(u[0],u[1]))u[1]=l[1];if(M(l[0],u[1])>M(u[0],u[1]))u[0]=l[0]}else{p.push(u=l)}}var h=-Infinity,g;for(var o=p.length-1,s=0,u=p[o],l;s<=o;u=l,++s){l=p[s];if((g=M(u[1],l[0]))>h)h=g,e=l[0],n=u[1]}}c=f=null;return e===Infinity||t===Infinity?[[NaN,NaN],[NaN,NaN]]:[[e,t],[n,r]]}}();a.geo.centroid=function(e){Yn=Qn=qn=Xn=Kn=Zn=Jn=$n=er=tr=nr=0;a.geo.stream(e,rr);var t=er,n=tr,r=nr,i=t*t+n*n+r*r;if(i<Oe){t=Zn,n=Jn,r=$n;if(Qn<Ne)t=qn,n=Xn,r=Kn;i=t*t+n*n+r*r;if(i<Oe)return[NaN,NaN]}return[Math.atan2(n,t)*je,Ve(r/Math.sqrt(i))*je]};var Yn,Qn,qn,Xn,Kn,Zn,Jn,$n,er,tr,nr;var rr={sphere:F,point:ir,lineStart:or,lineEnd:sr,polygonStart:function(){rr.lineStart=ur},polygonEnd:function(){rr.lineStart=or}};function ir(e,t){e*=Re;var n=Math.cos(t*=Re);ar(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function ar(e,t,n){++Yn;qn+=(e-qn)/Yn;Xn+=(t-Xn)/Yn;Kn+=(n-Kn)/Yn}function or(){var e,t,n;rr.point=function(i,a){i*=Re;var o=Math.cos(a*=Re);e=o*Math.cos(i);t=o*Math.sin(i);n=Math.sin(a);rr.point=r;ar(e,t,n)};function r(r,i){r*=Re;var a=Math.cos(i*=Re),o=a*Math.cos(r),s=a*Math.sin(r),u=Math.sin(i),l=Math.atan2(Math.sqrt((l=t*u-n*s)*l+(l=n*o-e*u)*l+(l=e*s-t*o)*l),e*o+t*s+n*u);Qn+=l;Zn+=l*(e+(e=o));Jn+=l*(t+(t=s));$n+=l*(n+(n=u));ar(e,t,n)}}function sr(){rr.point=ir}function ur(){var e,t,n,r,i;rr.point=function(o,s){e=o,t=s;rr.point=a;o*=Re;var u=Math.cos(s*=Re);n=u*Math.cos(o);r=u*Math.sin(o);i=Math.sin(s);ar(n,r,i)};rr.lineEnd=function(){a(e,t);rr.lineEnd=sr;rr.point=ir};function a(e,t){e*=Re;var a=Math.cos(t*=Re),o=a*Math.cos(e),s=a*Math.sin(e),u=Math.sin(t),l=r*u-i*s,c=i*o-n*u,f=n*s-r*o,d=Math.sqrt(l*l+c*c+f*f),p=n*o+r*s+i*u,h=d&&-Fe(p)/d,g=Math.atan2(d,p);er+=h*l;tr+=h*c;nr+=h*f;Qn+=g;Zn+=g*(n+(n=o));Jn+=g*(r+(r=s));$n+=g*(i+(i=u));ar(n,r,i)}}function lr(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}if(e.invert&&t.invert)n.invert=function(n,r){return n=t.invert(n,r),n&&e.invert(n[0],n[1])};return n}function cr(){return true}function fr(e,t,n,r,i){var a=[],o=[];e.forEach(function(e){if((t=e.length-1)<=0)return;var t,n=e[0],r=e[t];if(Hn(n,r)){i.lineStart();for(var s=0;s<t;++s)i.point((n=e[s])[0],n[1]);i.lineEnd();return}var u=new pr(n,e,null,true),l=new pr(n,null,u,false);u.o=l;a.push(u);o.push(l);u=new pr(r,e,null,false);l=new pr(r,null,u,true);u.o=l;a.push(u);o.push(l)});o.sort(t);dr(a);dr(o);if(!a.length)return;for(var s=0,u=n,l=o.length;s<l;++s){o[s].e=u=!u}var c=a[0],f,d;while(1){var p=c,h=true;while(p.v)if((p=p.n)===c)return;f=p.z;i.lineStart();do{p.v=p.o.v=true;if(p.e){if(h){for(var s=0,l=f.length;s<l;++s)i.point((d=f[s])[0],d[1])}else{r(p.x,p.n.x,1,i)}p=p.n}else{if(h){f=p.p.z;for(var s=f.length-1;s>=0;--s)i.point((d=f[s])[0],d[1])}else{r(p.x,p.p.x,-1,i)}p=p.p}p=p.o;f=p.z;h=!h}while(!p.v);i.lineEnd()}}function dr(e){if(!(t=e.length))return;var t,n=0,r=e[0],i;while(++n<t){r.n=i=e[n];i.p=r;r=i}r.n=i=e[0];i.p=r}function pr(e,t,n,r){this.x=e;this.z=t;this.o=n;this.e=r;this.v=false;this.n=this.p=null}function hr(e,t,n,r){return function(i,o){var s=t(o),u=i.invert(r[0],r[1]);var l={point:c,lineStart:d,lineEnd:p,polygonStart:function(){l.point=M;l.lineStart=x;l.lineEnd=w;h=[];y=[]},polygonEnd:function(){l.point=c;l.lineStart=d;l.lineEnd=p;h=a.merge(h);var e=wr(u,y);if(h.length){if(!v)o.polygonStart(),v=true;fr(h,vr,e,n,o)}else if(e){if(!v)o.polygonStart(),v=true;o.lineStart();n(null,null,1,o);o.lineEnd()}if(v)o.polygonEnd(),v=false;h=y=null},sphere:function(){o.polygonStart();o.lineStart();n(null,null,1,o);o.lineEnd();o.polygonEnd()}};function c(t,n){var r=i(t,n);if(e(t=r[0],n=r[1]))o.point(t,n)}function f(e,t){var n=i(e,t);s.point(n[0],n[1])}function d(){l.point=f;s.lineStart()}function p(){l.point=c;s.lineEnd()}var h;var g=mr(),m=t(g),v=false,y,b;function M(e,t){b.push([e,t]);var n=i(e,t);m.point(n[0],n[1])}function x(){m.lineStart();b=[]}function w(){M(b[0][0],b[0][1]);m.lineEnd();var e=m.clean(),t=g.buffer(),n,r=t.length;b.pop();y.push(b);b=null;if(!r)return;if(e&1){n=t[0];var r=n.length-1,i=-1,a;if(r>0){if(!v)o.polygonStart(),v=true;o.lineStart();while(++i<r)o.point((a=n[i])[0],a[1]);o.lineEnd()}return}if(r>1&&e&2)t.push(t.pop().concat(t.shift()));h.push(t.filter(gr))}return l}}function gr(e){return e.length>1}function mr(){var e=[],t;return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:F,buffer:function(){var n=e;e=[];t=null;return n},rejoin:function(){if(e.length>1)e.push(e.pop().concat(e.shift()))}}}function vr(e,t){return((e=e.x)[0]<0?e[1]-ke-Ne:ke-e[1])-((t=t.x)[0]<0?t[1]-ke-Ne:ke-t[1])}var yr=hr(cr,br,xr,[-_e,-_e/2]);function br(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart();i=1},point:function(a,o){var s=a>0?_e:-_e,u=w(a-t);if(w(u-_e)<Ne){e.point(t,n=(n+o)/2>0?ke:-ke);e.point(r,n);e.lineEnd();e.lineStart();e.point(s,n);e.point(a,n);i=0}else if(r!==s&&u>=_e){if(w(t-r)<Ne)t-=r*Ne;if(w(a-s)<Ne)a-=s*Ne;n=Mr(t,n,a,o);e.point(r,n);e.lineEnd();e.lineStart();e.point(s,n);i=0}e.point(t=a,n=o);r=s},lineEnd:function(){e.lineEnd();t=n=NaN},clean:function(){return 2-i}}}function Mr(e,t,n,r){var i,a,o=Math.sin(e-n);return w(o)>Ne?Math.atan((Math.sin(t)*(a=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(t))*Math.sin(e))/(i*a*o)):(t+r)/2}function xr(e,t,n,r){var i;if(e==null){i=n*ke;r.point(-_e,i);r.point(0,i);r.point(_e,i);r.point(_e,0);r.point(_e,-i);r.point(0,-i);r.point(-_e,-i);r.point(-_e,0);r.point(-_e,i)}else if(w(e[0]-t[0])>Ne){var a=e[0]<t[0]?_e:-_e;i=n*a/2;r.point(-a,i);r.point(0,i);r.point(a,i)}else{r.point(t[0],t[1])}}function wr(e,t){var n=e[0],r=e[1],i=[Math.sin(n),-Math.cos(n),0],a=0,o=0;kn.reset();for(var s=0,u=t.length;s<u;++s){var l=t[s],c=l.length;if(!c)continue;var f=l[0],d=f[0],p=f[1]/2+_e/4,h=Math.sin(p),g=Math.cos(p),m=1;while(true){if(m===c)m=0;e=l[m];var v=e[0],y=e[1]/2+_e/4,b=Math.sin(y),M=Math.cos(y),x=v-d,w=x>=0?1:-1,A=w*x,T=A>_e,C=h*b;kn.add(Math.atan2(C*w*Math.sin(A),g*M+C*Math.cos(A)));a+=T?x+w*Le:x;if(T^d>=n^v>=n){var S=Fn(Bn(f),Bn(e));Gn(S);var D=Fn(i,S);Gn(D);var I=(T^x>=0?-1:1)*Ve(D[2]);if(r>I||r===I&&(S[0]||S[1])){o+=T^x>=0?1:-1}}if(!m++)break;d=v,h=b,g=M,f=e}}return(a<-Ne||a<Ne&&kn<-Ne)^o&1}function Ar(e){var t=Math.cos(e),n=t>0,r=w(t)>Ne,i=oi(e,6*Re);return hr(a,o,i,n?[0,-e]:[-_e,e-_e]);function a(e,n){return Math.cos(e)*Math.cos(n)>t}function o(e){var t,i,o,l,c;return{lineStart:function(){l=o=false;c=1},point:function(f,d){var p=[f,d],h,g=a(f,d),m=n?g?0:u(f,d):g?u(f+(f<0?_e:-_e),d):0;if(!t&&(l=o=g))e.lineStart();if(g!==o){h=s(t,p);if(Hn(t,h)||Hn(p,h)){p[0]+=Ne;p[1]+=Ne;g=a(p[0],p[1])}}if(g!==o){c=0;if(g){e.lineStart();h=s(p,t);e.point(h[0],h[1])}else{h=s(t,p);e.point(h[0],h[1]);e.lineEnd()}t=h}else if(r&&t&&n^g){var v;if(!(m&i)&&(v=s(p,t,true))){c=0;if(n){e.lineStart();e.point(v[0][0],v[0][1]);e.point(v[1][0],v[1][1]);e.lineEnd()}else{e.point(v[1][0],v[1][1]);e.lineEnd();e.lineStart();e.point(v[0][0],v[0][1])}}}if(g&&(!t||!Hn(t,p))){e.point(p[0],p[1])}t=p,o=g,i=m},lineEnd:function(){if(o)e.lineEnd();t=null},clean:function(){return c|(l&&o)<<1}}}function s(e,n,r){var i=Bn(e),a=Bn(n);var o=[1,0,0],s=Fn(i,a),u=zn(s,s),l=s[0],c=u-l*l;if(!c)return!r&&e;var f=t*u/c,d=-t*l/c,p=Fn(o,s),h=Un(o,f),g=Un(s,d);Vn(h,g);var m=p,v=zn(h,m),y=zn(m,m),b=v*v-y*(zn(h,h)-1);if(b<0)return;var M=Math.sqrt(b),x=Un(m,(-v-M)/y);Vn(x,h);x=Wn(x);if(!r)return x;var A=e[0],T=n[0],C=e[1],S=n[1],D;if(T<A)D=A,A=T,T=D;var I=T-A,E=w(I-_e)<Ne,N=E||I<Ne;if(!E&&S<C)D=C,C=S,S=D;if(N?E?C+S>0^x[1]<(w(x[0]-A)<Ne?C:S):C<=x[1]&&x[1]<=S:I>_e^(A<=x[0]&&x[0]<=T)){var O=Un(m,(-v+M)/y);Vn(O,h);return[x,Wn(O)]}}function u(t,r){var i=n?e:_e-e,a=0;if(t<-i)a|=1;else if(t>i)a|=2;if(r<-i)a|=4;else if(r>i)a|=8;return a}}function Tr(e,t,n,r){return function(i){var a=i.a,o=i.b,s=a.x,u=a.y,l=o.x,c=o.y,f=0,d=1,p=l-s,h=c-u,g;g=e-s;if(!p&&g>0)return;g/=p;if(p<0){if(g<f)return;if(g<d)d=g}else if(p>0){if(g>d)return;if(g>f)f=g}g=n-s;if(!p&&g<0)return;g/=p;if(p<0){if(g>d)return;if(g>f)f=g}else if(p>0){if(g<f)return;if(g<d)d=g}g=t-u;if(!h&&g>0)return;g/=h;if(h<0){if(g<f)return;if(g<d)d=g}else if(h>0){if(g>d)return;if(g>f)f=g}g=r-u;if(!h&&g<0)return;g/=h;if(h<0){if(g>d)return;if(g>f)f=g}else if(h>0){if(g<f)return;if(g<d)d=g}if(f>0)i.a={x:s+f*p,y:u+f*h};if(d<1)i.b={x:s+d*p,y:u+d*h};return i}}var Cr=1e9;a.geo.clipExtent=function(){var e,t,n,r,i,a,o={stream:function(e){if(i)i.valid=false;i=a(e);i.valid=true;return i},extent:function(s){if(!arguments.length)return[[e,t],[n,r]];a=Sr(e=+s[0][0],t=+s[0][1],n=+s[1][0],r=+s[1][1]);if(i)i.valid=false,i=null;return o}};return o.extent([[0,0],[960,500]])};function Sr(e,t,n,r){return function(u){var l=u,c=mr(),f=Tr(e,t,n,r),d,p,h;var g={point:b,lineStart:I,lineEnd:E,polygonStart:function(){u=c;d=[];p=[];D=true},polygonEnd:function(){u=l;d=a.merge(d);var t=m([e,r]),n=D&&t,i=d.length;if(n||i){u.polygonStart();if(n){u.lineStart();v(null,null,1,u);u.lineEnd()}if(i){fr(d,o,t,v,u)}u.polygonEnd()}d=p=h=null}};function m(e){var t=0,n=p.length,r=e[1];for(var i=0;i<n;++i){for(var a=1,o=p[i],s=o.length,u=o[0],l;a<s;++a){l=o[a];if(u[1]<=r){if(l[1]>r&&ze(u,l,e)>0)++t}else{if(l[1]<=r&&ze(u,l,e)<0)--t}u=l}}return t!==0}function v(a,o,u,l){var c=0,f=0;if(a==null||(c=i(a,u))!==(f=i(o,u))||s(a,o)<0^u>0){do{l.point(c===0||c===3?e:n,c>1?r:t)}while((c=(c+u+4)%4)!==f)}else{l.point(o[0],o[1])}}function y(i,a){return e<=i&&i<=n&&t<=a&&a<=r}function b(e,t){if(y(e,t))u.point(e,t)}var M,x,w,A,T,C,S,D;function I(){g.point=N;if(p)p.push(h=[]);S=true;C=false;A=T=NaN}function E(){if(d){N(M,x);if(w&&C)c.rejoin();d.push(c.buffer())}g.point=b;if(C)u.lineEnd()}function N(e,t){e=Math.max(-Cr,Math.min(Cr,e));t=Math.max(-Cr,Math.min(Cr,t));var n=y(e,t);if(p)h.push([e,t]);if(S){M=e,x=t,w=n;S=false;if(n){u.lineStart();u.point(e,t)}}else{if(n&&C)u.point(e,t);else{var r={a:{x:A,y:T},b:{x:e,y:t}};if(f(r)){if(!C){u.lineStart();u.point(r.a.x,r.a.y)}u.point(r.b.x,r.b.y);if(!n)u.lineEnd();D=false}else if(n){u.lineStart();u.point(e,t);D=false}}}A=e,T=t,C=n}return g};function i(r,i){return w(r[0]-e)<Ne?i>0?0:3:w(r[0]-n)<Ne?i>0?2:1:w(r[1]-t)<Ne?i>0?1:0:i>0?3:2}function o(e,t){return s(e.x,t.x)}function s(e,t){var n=i(e,1),r=i(t,1);return n!==r?n-r:n===0?t[1]-e[1]:n===1?e[0]-t[0]:n===2?e[1]-t[1]:t[0]-e[0]}}function Dr(e){var t=0,n=_e/3,r=Jr(e),i=r(t,n);i.parallels=function(e){if(!arguments.length)return[t/_e*180,n/_e*180];return r(t=e[0]*_e/180,n=e[1]*_e/180)};return i}function Ir(e,t){var n=Math.sin(e),r=(n+Math.sin(t))/2,i=1+n*(2*r-n),a=Math.sqrt(i)/r;function o(e,t){var n=Math.sqrt(i-2*r*Math.sin(t))/r;return[n*Math.sin(e*=r),a-n*Math.cos(e)]}o.invert=function(e,t){var n=a-t;return[Math.atan2(e,n)/r,Ve((i-(e*e+n*n)*r*r)/(2*r))]};return o}(a.geo.conicEqualArea=function(){return Dr(Ir)}).raw=Ir;a.geo.albers=function(){return a.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};a.geo.albersUsa=function(){var e=a.geo.albers();var t=a.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]);var n=a.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]);var r,i={point:function(e,t){r=[e,t]}},o,s,u;function l(e){var t=e[0],n=e[1];r=null;(o(t,n),r)||(s(t,n),r)||u(t,n);return r}l.invert=function(r){var i=e.scale(),a=e.translate(),o=(r[0]-a[0])/i,s=(r[1]-a[1])/i;return(s>=.12&&s<.234&&o>=-.425&&o<-.214?t:s>=.166&&s<.234&&o>=-.214&&o<-.115?n:e).invert(r)};l.stream=function(r){var i=e.stream(r),a=t.stream(r),o=n.stream(r);return{point:function(e,t){i.point(e,t);a.point(e,t);o.point(e,t)},sphere:function(){i.sphere();a.sphere();o.sphere()},lineStart:function(){i.lineStart();a.lineStart();o.lineStart()},lineEnd:function(){i.lineEnd();a.lineEnd();o.lineEnd()},polygonStart:function(){i.polygonStart();a.polygonStart();o.polygonStart()},polygonEnd:function(){i.polygonEnd();a.polygonEnd();o.polygonEnd()}}};l.precision=function(r){if(!arguments.length)return e.precision();e.precision(r);t.precision(r);n.precision(r);return l};l.scale=function(r){if(!arguments.length)return e.scale();e.scale(r);t.scale(r*.35);n.scale(r);return l.translate(e.translate())};l.translate=function(r){if(!arguments.length)return e.translate();var a=e.scale(),c=+r[0],f=+r[1];o=e.translate(r).clipExtent([[c-.455*a,f-.238*a],[c+.455*a,f+.238*a]]).stream(i).point;s=t.translate([c-.307*a,f+.201*a]).clipExtent([[c-.425*a+Ne,f+.12*a+Ne],[c-.214*a-Ne,f+.234*a-Ne]]).stream(i).point;u=n.translate([c-.205*a,f+.212*a]).clipExtent([[c-.214*a+Ne,f+.166*a+Ne],[c-.115*a-Ne,f+.234*a-Ne]]).stream(i).point;return l};return l.scale(1070)};var Er,Nr,Or={point:F,lineStart:F,lineEnd:F,polygonStart:function(){Nr=0;Or.lineStart=_r},polygonEnd:function(){Or.lineStart=Or.lineEnd=Or.point=F;Er+=w(Nr/2)}};function _r(){var e,t,n,r;Or.point=function(a,o){Or.point=i;e=n=a,t=r=o};function i(e,t){Nr+=r*e-n*t;n=e,r=t}Or.lineEnd=function(){i(e,t)}}var Lr,Pr,kr,Rr;var jr={point:Br,lineStart:F,lineEnd:F,polygonStart:F,polygonEnd:F};function Br(e,t){if(e<Lr)Lr=e;if(e>kr)kr=e;if(t<Pr)Pr=t;if(t>Rr)Rr=t}function zr(){var e=Fr(4.5),t=[];var n={point:r,lineStart:function(){n.point=i},lineEnd:o,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=o;n.point=r},pointRadius:function(t){e=Fr(t);return n},result:function(){if(t.length){var e=t.join("");t=[];return e}}};function r(n,r){t.push("M",n,",",r,e)}function i(e,r){t.push("M",e,",",r);n.point=a}function a(e,n){t.push("L",e,",",n)}function o(){n.point=r}function s(){t.push("Z")}return n}function Fr(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}var Vr={point:Ur,lineStart:Gr,lineEnd:Wr,polygonStart:function(){Vr.lineStart=Hr},polygonEnd:function(){Vr.point=Ur;Vr.lineStart=Gr;Vr.lineEnd=Wr}};function Ur(e,t){qn+=e;Xn+=t;++Kn}function Gr(){var e,t;Vr.point=function(r,i){Vr.point=n;Ur(e=r,t=i)};function n(n,r){var i=n-e,a=r-t,o=Math.sqrt(i*i+a*a);Zn+=o*(e+n)/2;Jn+=o*(t+r)/2;$n+=o;Ur(e=n,t=r)}}function Wr(){Vr.point=Ur}function Hr(){var e,t,n,r;Vr.point=function(a,o){Vr.point=i;Ur(e=n=a,t=r=o)};function i(e,t){var i=e-n,a=t-r,o=Math.sqrt(i*i+a*a);Zn+=o*(n+e)/2;Jn+=o*(r+t)/2;$n+=o;o=r*e-n*t;er+=o*(n+e);tr+=o*(r+t);nr+=o*3;Ur(n=e,r=t)}Vr.lineEnd=function(){i(e,t)}}function Yr(e){var t=4.5;var n={point:r,lineStart:function(){n.point=i},lineEnd:o,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=o;n.point=r},pointRadius:function(e){t=e;return n},result:F};function r(n,r){e.moveTo(n+t,r);e.arc(n,r,t,0,Le)}function i(t,r){e.moveTo(t,r);n.point=a}function a(t,n){e.lineTo(t,n)}function o(){n.point=r}function s(){e.closePath()}return n}function Qr(e){var t=.5,n=Math.cos(30*Re),r=16;function i(e){return(r?o:a)(e)}function a(t){return Kr(t,function(n,r){n=e(n,r);t.point(n[0],n[1])})}function o(t){var n,i,a,o,u,l,c,f,d,p,h,g,m;var v={point:y,lineStart:b,lineEnd:x,polygonStart:function(){t.polygonStart();v.lineStart=w},polygonEnd:function(){t.polygonEnd();v.lineStart=b}};function y(n,r){n=e(n,r);t.point(n[0],n[1])}function b(){d=NaN;v.point=M;t.lineStart()}function M(n,i){var a=Bn([n,i]),o=e(n,i);s(d,p,f,h,g,m,d=o[0],p=o[1],f=n,h=a[0],g=a[1],m=a[2],r,t);t.point(d,p)}function x(){v.point=y;t.lineEnd()}function w(){b();v.point=A;v.lineEnd=T}function A(e,t){M(n=e,i=t),a=d,o=p,u=h,l=g,c=m;v.point=M}function T(){s(d,p,f,h,g,m,a,o,n,u,l,c,r,t);v.lineEnd=x;x()}return v}function s(r,i,a,o,u,l,c,f,d,p,h,g,m,v){var y=c-r,b=f-i,M=y*y+b*b;if(M>4*t&&m--){var x=o+p,A=u+h,T=l+g,C=Math.sqrt(x*x+A*A+T*T),S=Math.asin(T/=C),D=w(w(T)-1)<Ne||w(a-d)<Ne?(a+d)/2:Math.atan2(A,x),I=e(D,S),E=I[0],N=I[1],O=E-r,_=N-i,L=b*O-y*_;if(L*L/M>t||w((y*O+b*_)/M-.5)>.3||o*p+u*h+l*g<n){s(r,i,a,o,u,l,E,N,D,x/=C,A/=C,T,m,v);v.point(E,N);s(E,N,D,x,A,T,c,f,d,p,h,g,m,v)}}}i.precision=function(e){if(!arguments.length)return Math.sqrt(t);r=(t=e*e)>0&&16;return i};return i}a.geo.path=function(){var e=4.5,t,n,r,i,o;function s(t){if(t){if(typeof e==="function")i.pointRadius(+e.apply(this,arguments));if(!o||!o.valid)o=r(i);a.geo.stream(t,o)}return i.result()}s.area=function(e){Er=0;a.geo.stream(e,r(Or));return Er};s.centroid=function(e){qn=Xn=Kn=Zn=Jn=$n=er=tr=nr=0;a.geo.stream(e,r(Vr));return nr?[er/nr,tr/nr]:$n?[Zn/$n,Jn/$n]:Kn?[qn/Kn,Xn/Kn]:[NaN,NaN]};s.bounds=function(e){kr=Rr=-(Lr=Pr=Infinity);a.geo.stream(e,r(jr));return[[Lr,Pr],[kr,Rr]]};s.projection=function(e){if(!arguments.length)return t;r=(t=e)?e.stream||qr(e):R;return u()};s.context=function(t){if(!arguments.length)return n;i=(n=t)==null?new zr:new Yr(t);if(typeof e!=="function")i.pointRadius(e);return u()};s.pointRadius=function(t){if(!arguments.length)return e;e=typeof t==="function"?t:(i.pointRadius(+t),+t);return s};function u(){o=null;return s}return s.projection(a.geo.albersUsa()).context(null)};function qr(e){var t=Qr(function(t,n){return e([t*je,n*je])});return function(e){return $r(t(e))}}a.geo.transform=function(e){return{stream:function(t){var n=new Xr(t);for(var r in e)n[r]=e[r];return n}}};function Xr(e){this.stream=e}Xr.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Kr(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}a.geo.projection=Zr;a.geo.projectionMutator=Jr;function Zr(e){return Jr(function(){return e})()}function Jr(e){var t,n,r,i=Qr(function(e,n){e=t(e,n);return[e[0]*o+h,g-e[1]*o]}),o=150,s=480,u=250,l=0,c=0,f=0,d=0,p=0,h,g,m=yr,v=R,y=null,b=null,M;function x(e){e=r(e[0]*Re,e[1]*Re);return[e[0]*o+h,g-e[1]*o]}function w(e){e=r.invert((e[0]-h)/o,(g-e[1])/o);return e&&[e[0]*je,e[1]*je]}x.stream=function(e){if(M)M.valid=false;M=$r(m(n,i(v(e))));M.valid=true;return M};x.clipAngle=function(e){if(!arguments.length)return y;m=e==null?(y=e,yr):Ar((y=+e)*Re);return T()};x.clipExtent=function(e){if(!arguments.length)return b;b=e;v=e?Sr(e[0][0],e[0][1],e[1][0],e[1][1]):R;return T()};x.scale=function(e){if(!arguments.length)return o;o=+e;return A()};x.translate=function(e){if(!arguments.length)return[s,u];s=+e[0];u=+e[1];return A()};x.center=function(e){if(!arguments.length)return[l*je,c*je];l=e[0]%360*Re;c=e[1]%360*Re;return A()};x.rotate=function(e){if(!arguments.length)return[f*je,d*je,p*je];f=e[0]%360*Re;d=e[1]%360*Re;p=e.length>2?e[2]%360*Re:0;return A()};a.rebind(x,i,"precision");function A(){r=lr(n=ni(f,d,p),t);var e=t(l,c);h=s-e[0]*o;g=u+e[1]*o;return T()}function T(){if(M)M.valid=false,M=null;return x}return function(){t=e.apply(this,arguments);x.invert=t.invert&&w;return A()}}function $r(e){return Kr(e,function(t,n){e.point(t*Re,n*Re)})}function ei(e,t){return[e,t]}(a.geo.equirectangular=function(){return Zr(ei)}).raw=ei.invert=ei;a.geo.rotation=function(e){e=ni(e[0]%360*Re,e[1]*Re,e.length>2?e[2]*Re:0);function t(t){t=e(t[0]*Re,t[1]*Re);return t[0]*=je,t[1]*=je,t}t.invert=function(t){t=e.invert(t[0]*Re,t[1]*Re);return t[0]*=je,t[1]*=je,t};return t};function ti(e,t){return[e>_e?e-Le:e<-_e?e+Le:e,t]}ti.invert=ei;function ni(e,t,n){return e?t||n?lr(ii(e),ai(t,n)):ii(e):t||n?ai(t,n):ti}function ri(e){return function(t,n){return t+=e,[t>_e?t-Le:t<-_e?t+Le:t,n]}}function ii(e){var t=ri(e);t.invert=ri(-e);return t}function ai(e,t){var n=Math.cos(e),r=Math.sin(e),i=Math.cos(t),a=Math.sin(t);function o(e,t){var o=Math.cos(t),s=Math.cos(e)*o,u=Math.sin(e)*o,l=Math.sin(t),c=l*n+s*r;return[Math.atan2(u*i-c*a,s*n-l*r),Ve(c*i+u*a)]}o.invert=function(e,t){var o=Math.cos(t),s=Math.cos(e)*o,u=Math.sin(e)*o,l=Math.sin(t),c=l*i-u*a;return[Math.atan2(u*i+l*a,s*n+c*r),Ve(c*n-s*r)]};return o}a.geo.circle=function(){var e=[0,0],t,n=6,r;function i(){var t=typeof e==="function"?e.apply(this,arguments):e,n=ni(-t[0]*Re,-t[1]*Re,0).invert,i=[];r(null,null,1,{point:function(e,t){i.push(e=n(e,t));e[0]*=je,e[1]*=je}});return{type:"Polygon",coordinates:[i]}}i.origin=function(t){if(!arguments.length)return e;e=t;return i};i.angle=function(e){if(!arguments.length)return t;r=oi((t=+e)*Re,n*Re);return i};i.precision=function(e){if(!arguments.length)return n;r=oi(t*Re,(n=+e)*Re);return i};return i.angle(90)};function oi(e,t){var n=Math.cos(e),r=Math.sin(e);return function(i,a,o,s){var u=o*t;if(i!=null){i=si(n,i);a=si(n,a);if(o>0?i<a:i>a)i+=o*Le}else{i=e+o*Le;a=e-.5*u}for(var l,c=i;o>0?c>a:c<a;c-=u){s.point((l=Wn([n,-r*Math.cos(c),-r*Math.sin(c)]))[0],l[1])}}}function si(e,t){var n=Bn(t);n[0]-=e;Gn(n);var r=Fe(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Ne)%(2*Math.PI)}a.geo.distance=function(e,t){var n=(t[0]-e[0])*Re,r=e[1]*Re,i=t[1]*Re,a=Math.sin(n),o=Math.cos(n),s=Math.sin(r),u=Math.cos(r),l=Math.sin(i),c=Math.cos(i),f;return Math.atan2(Math.sqrt((f=c*a)*f+(f=u*l-s*c*o)*f),s*l+u*c*o)};a.geo.graticule=function(){var e,t,n,r,i,o,s,u,l=10,c=l,f=90,d=360,p,h,g,m,v=2.5;function y(){return{type:"MultiLineString",coordinates:b()}}function b(){return a.range(Math.ceil(r/f)*f,n,f).map(g).concat(a.range(Math.ceil(u/d)*d,s,d).map(m)).concat(a.range(Math.ceil(t/l)*l,e,l).filter(function(e){return w(e%f)>Ne}).map(p)).concat(a.range(Math.ceil(o/c)*c,i,c).filter(function(e){return w(e%d)>Ne}).map(h))}y.lines=function(){return b().map(function(e){return{type:"LineString",coordinates:e}})};y.outline=function(){return{type:"Polygon",coordinates:[g(r).concat(m(s).slice(1),g(n).reverse().slice(1),m(u).reverse().slice(1))]}};y.extent=function(e){if(!arguments.length)return y.minorExtent();return y.majorExtent(e).minorExtent(e)};y.majorExtent=function(e){if(!arguments.length)return[[r,u],[n,s]];r=+e[0][0],n=+e[1][0];u=+e[0][1],s=+e[1][1];if(r>n)e=r,r=n,n=e;if(u>s)e=u,u=s,s=e;return y.precision(v)};y.minorExtent=function(n){if(!arguments.length)return[[t,o],[e,i]];t=+n[0][0],e=+n[1][0];o=+n[0][1],i=+n[1][1];if(t>e)n=t,t=e,e=n;if(o>i)n=o,o=i,i=n;return y.precision(v)};y.step=function(e){if(!arguments.length)return y.minorStep();return y.majorStep(e).minorStep(e)};y.majorStep=function(e){if(!arguments.length)return[f,d];f=+e[0],d=+e[1];return y};y.minorStep=function(e){if(!arguments.length)return[l,c];l=+e[0],c=+e[1];return y};y.precision=function(a){if(!arguments.length)return v;v=+a;p=ui(o,i,90);h=li(t,e,v);g=ui(u,s,90);m=li(r,n,v);return y};return y.majorExtent([[-180,-90+Ne],[180,90-Ne]]).minorExtent([[-180,-80-Ne],[180,80+Ne]])};function ui(e,t,n){var r=a.range(e,t-Ne,n).concat(t);return function(e){return r.map(function(t){return[e,t]})}}function li(e,t,n){var r=a.range(e,t-Ne,n).concat(t);return function(e){return r.map(function(t){return[t,e]})}}function ci(e){return e.source}function fi(e){return e.target}a.geo.greatArc=function(){var e=ci,t,n=fi,r;function i(){return{type:"LineString",coordinates:[t||e.apply(this,arguments),r||n.apply(this,arguments)]}}i.distance=function(){return a.geo.distance(t||e.apply(this,arguments),r||n.apply(this,arguments))};i.source=function(n){if(!arguments.length)return e;e=n,t=typeof n==="function"?null:n;return i};i.target=function(e){if(!arguments.length)return n;n=e,r=typeof e==="function"?null:e;return i};i.precision=function(){return arguments.length?i:0};return i};a.geo.interpolate=function(e,t){return di(e[0]*Re,e[1]*Re,t[0]*Re,t[1]*Re)};function di(e,t,n,r){var i=Math.cos(t),a=Math.sin(t),o=Math.cos(r),s=Math.sin(r),u=i*Math.cos(e),l=i*Math.sin(e),c=o*Math.cos(n),f=o*Math.sin(n),d=2*Math.asin(Math.sqrt(He(r-t)+i*o*He(n-e))),p=1/Math.sin(d);var h=d?function(e){var t=Math.sin(e*=d)*p,n=Math.sin(d-e)*p,r=n*u+t*c,i=n*l+t*f,o=n*a+t*s;return[Math.atan2(i,r)*je,Math.atan2(o,Math.sqrt(r*r+i*i))*je]}:function(){return[e*je,t*je]};h.distance=d;return h}a.geo.length=function(e){pi=0;a.geo.stream(e,hi);return pi};var pi;var hi={sphere:F,point:F,lineStart:gi,lineEnd:F,polygonStart:F,polygonEnd:F};function gi(){var e,t,n;hi.point=function(i,a){e=i*Re,t=Math.sin(a*=Re),n=Math.cos(a);hi.point=r};hi.lineEnd=function(){hi.point=hi.lineEnd=F};function r(r,i){var a=Math.sin(i*=Re),o=Math.cos(i),s=w((r*=Re)-e),u=Math.cos(s);pi+=Math.atan2(Math.sqrt((s=o*Math.sin(s))*s+(s=n*a-t*o*u)*s),t*a+n*o*u);e=r,t=a,n=o}}function mi(e,t){function n(t,n){var r=Math.cos(t),i=Math.cos(n),a=e(r*i);return[a*i*Math.sin(t),a*Math.sin(n)]}n.invert=function(e,n){var r=Math.sqrt(e*e+n*n),i=t(r),a=Math.sin(i),o=Math.cos(i);return[Math.atan2(e*a,r*o),Math.asin(r&&n*a/r)]};return n}var vi=mi(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(a.geo.azimuthalEqualArea=function(){return Zr(vi)}).raw=vi;var yi=mi(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},R);(a.geo.azimuthalEquidistant=function(){return Zr(yi)}).raw=yi;function bi(e,t){var n=Math.cos(e),r=function(e){return Math.tan(_e/4+e/2)},i=e===t?Math.sin(e):Math.log(n/Math.cos(t))/Math.log(r(t)/r(e)),a=n*Math.pow(r(e),i)/i;if(!i)return wi;function o(e,t){if(a>0){if(t<-ke+Ne)t=-ke+Ne}else{if(t>ke-Ne)t=ke-Ne}var n=a/Math.pow(r(t),i);return[n*Math.sin(i*e),a-n*Math.cos(i*e)]}o.invert=function(e,t){var n=a-t,r=Be(i)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/i,2*Math.atan(Math.pow(a/r,1/i))-ke]};return o}(a.geo.conicConformal=function(){return Dr(bi)}).raw=bi;function Mi(e,t){var n=Math.cos(e),r=e===t?Math.sin(e):(n-Math.cos(t))/(t-e),i=n/r+e;if(w(r)<Ne)return ei;function a(e,t){var n=i-t;return[n*Math.sin(r*e),i-n*Math.cos(r*e)]}a.invert=function(e,t){var n=i-t;return[Math.atan2(e,n)/r,i-Be(r)*Math.sqrt(e*e+n*n)]};return a}(a.geo.conicEquidistant=function(){return Dr(Mi)}).raw=Mi;var xi=mi(function(e){return 1/e},Math.atan);(a.geo.gnomonic=function(){return Zr(xi)}).raw=xi;function wi(e,t){return[e,Math.log(Math.tan(_e/4+t/2))]}wi.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-ke]};function Ai(e){var t=Zr(e),n=t.scale,r=t.translate,i=t.clipExtent,a;t.scale=function(){var e=n.apply(t,arguments);return e===t?a?t.clipExtent(null):t:e};t.translate=function(){var e=r.apply(t,arguments);return e===t?a?t.clipExtent(null):t:e};t.clipExtent=function(e){var o=i.apply(t,arguments);if(o===t){if(a=e==null){var s=_e*n(),u=r();i([[u[0]-s,u[1]-s],[u[0]+s,u[1]+s]])}}else if(a){o=null}return o};return t.clipExtent(null)}(a.geo.mercator=function(){return Ai(wi)}).raw=wi;var Ti=mi(function(){return 1},Math.asin);(a.geo.orthographic=function(){return Zr(Ti)}).raw=Ti;var Ci=mi(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(a.geo.stereographic=function(){return Zr(Ci)}).raw=Ci;function Si(e,t){return[Math.log(Math.tan(_e/4+t/2)),-e]}Si.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-ke]};(a.geo.transverseMercator=function(){var e=Ai(Si),t=e.center,n=e.rotate;e.center=function(e){return e?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])};e.rotate=function(e){return e?n([e[0],e[1],e.length>2?e[2]+90:90]):(e=n(),[e[0],e[1],e[2]-90])};return n([0,0,90])}).raw=Si;a.geom={};function Di(e){return e[0]}function Ii(e){return e[1]}a.geom.hull=function(e){var t=Di,n=Ii;if(arguments.length)return r(e);function r(e){if(e.length<3)return[];var r=Dt(t),i=Dt(n),a,o=e.length,s=[],u=[];for(a=0;a<o;a++){s.push([+r.call(this,e[a],a),+i.call(this,e[a],a),a])}s.sort(Ni);for(a=0;a<o;a++)u.push([s[a][0],-s[a][1]]);var l=Ei(s),c=Ei(u);var f=c[0]===l[0],d=c[c.length-1]===l[l.length-1],p=[];for(a=l.length-1;a>=0;--a)p.push(e[s[l[a]][2]]);for(a=+f;a<c.length-d;++a)p.push(e[s[c[a]][2]]);return p}r.x=function(e){return arguments.length?(t=e,r):t};r.y=function(e){return arguments.length?(n=e,r):n};return r};function Ei(e){var t=e.length,n=[0,1],r=2;for(var i=2;i<t;i++){while(r>1&&ze(e[n[r-2]],e[n[r-1]],e[i])<=0)--r;n[r++]=i}return n.slice(0,r)}function Ni(e,t){return e[0]-t[0]||e[1]-t[1]}a.geom.polygon=function(e){Q(e,Oi);return e};var Oi=a.geom.polygon.prototype=[];Oi.area=function(){var e=-1,t=this.length,n,r=this[t-1],i=0;while(++e<t){n=r;r=this[e];i+=n[1]*r[0]-n[0]*r[1]}return i*.5};Oi.centroid=function(e){var t=-1,n=this.length,r=0,i=0,a,o=this[n-1],s;if(!arguments.length)e=-1/(6*this.area());while(++t<n){a=o;o=this[t];s=a[0]*o[1]-o[0]*a[1];r+=(a[0]+o[0])*s;i+=(a[1]+o[1])*s}return[r*e,i*e]};Oi.clip=function(e){var t,n=Pi(e),r=-1,i=this.length-Pi(this),a,o,s=this[i-1],u,l,c;while(++r<i){t=e.slice();e.length=0;u=this[r];l=t[(o=t.length-n)-1];a=-1;while(++a<o){c=t[a];if(_i(c,s,u)){if(!_i(l,s,u)){e.push(Li(l,c,s,u))}e.push(c)}else if(_i(l,s,u)){e.push(Li(l,c,s,u))}l=c}if(n)e.push(e[0]);s=u}return e};function _i(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function Li(e,t,n,r){var i=e[0],a=n[0],o=t[0]-i,s=r[0]-a,u=e[1],l=n[1],c=t[1]-u,f=r[1]-l,d=(s*(u-l)-f*(i-a))/(f*o-s*c);return[i+d*o,u+d*c]}function Pi(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}var ki,Ri,ji,Bi=[],zi,Fi,Vi=[];function Ui(){la(this);this.edge=this.site=this.circle=null}function Gi(e){var t=Bi.pop()||new Ui;t.site=e;return t}function Wi(e){ea(e);ji.remove(e);Bi.push(e);la(e)}function Hi(e){var t=e.circle,n=t.x,r=t.cy,i={x:n,y:r},a=e.P,o=e.N,s=[e];Wi(e);var u=a;while(u.circle&&w(n-u.circle.x)<Ne&&w(r-u.circle.cy)<Ne){a=u.P;s.unshift(u);Wi(u);u=a}s.unshift(u);ea(u);var l=o;while(l.circle&&w(n-l.circle.x)<Ne&&w(r-l.circle.cy)<Ne){o=l.N;s.push(l);Wi(l);l=o}s.push(l);ea(l);var c=s.length,f;for(f=1;f<c;++f){l=s[f];u=s[f-1];oa(l.edge,u.site,l.site,i)}u=s[0];l=s[c-1];l.edge=ia(u.site,l.site,null,i);$i(u);$i(l)}function Yi(e){var t=e.x,n=e.y,r,i,a,o,s=ji._;while(s){a=Qi(s,n)-t;if(a>Ne)s=s.L;else{o=t-qi(s,n);if(o>Ne){if(!s.R){r=s;break}s=s.R}else{if(a>-Ne){r=s.P;i=s}else if(o>-Ne){r=s;i=s.N}else{r=i=s}break}}}var u=Gi(e);ji.insert(r,u);if(!r&&!i)return;if(r===i){ea(r);i=Gi(r.site);ji.insert(u,i);u.edge=i.edge=ia(r.site,u.site);$i(r);$i(i);return}if(!i){u.edge=ia(r.site,u.site);return}ea(r);ea(i);var l=r.site,c=l.x,f=l.y,d=e.x-c,p=e.y-f,h=i.site,g=h.x-c,m=h.y-f,v=2*(d*m-p*g),y=d*d+p*p,b=g*g+m*m,M={x:(m*y-p*b)/v+c,y:(d*b-g*y)/v+f};oa(i.edge,l,h,M);u.edge=ia(l,e,null,M);i.edge=ia(e,h,null,M);$i(r);$i(i)}function Qi(e,t){var n=e.site,r=n.x,i=n.y,a=i-t;if(!a)return r;var o=e.P;if(!o)return-Infinity;n=o.site;var s=n.x,u=n.y,l=u-t;if(!l)return s;var c=s-r,f=1/a-1/l,d=c/l;if(f)return(-d+Math.sqrt(d*d-2*f*(c*c/(-2*l)-u+l/2+i-a/2)))/f+r;return(r+s)/2}function qi(e,t){var n=e.N;if(n)return Qi(n,t);var r=e.site;return r.y===t?r.x:Infinity}function Xi(e){this.site=e;this.edges=[]}Xi.prototype.prepare=function(){var e=this.edges,t=e.length,n;while(t--){n=e[t].edge;if(!n.b||!n.a)e.splice(t,1)}e.sort(Zi);return e.length};function Ki(e){var t=e[0][0],n=e[1][0],r=e[0][1],i=e[1][1],a,o,s,u,l=Ri,c=l.length,f,d,p,h,g,m;while(c--){f=l[c];if(!f||!f.prepare())continue;p=f.edges;h=p.length;d=0;while(d<h){m=p[d].end(),s=m.x,u=m.y;g=p[++d%h].start(),a=g.x,o=g.y;if(w(s-a)>Ne||w(u-o)>Ne){p.splice(d,0,new sa(aa(f.site,m,w(s-t)<Ne&&i-u>Ne?{x:t,y:w(a-t)<Ne?o:i}:w(u-i)<Ne&&n-s>Ne?{x:w(o-i)<Ne?a:n,y:i}:w(s-n)<Ne&&u-r>Ne?{x:n,y:w(a-n)<Ne?o:r}:w(u-r)<Ne&&s-t>Ne?{x:w(o-r)<Ne?a:t,y:r}:null),f.site,null));++h}}}}function Zi(e,t){return t.angle-e.angle}function Ji(){la(this);this.x=this.y=this.arc=this.site=this.cy=null}function $i(e){var t=e.P,n=e.N;if(!t||!n)return;var r=t.site,i=e.site,a=n.site;if(r===a)return;var o=i.x,s=i.y,u=r.x-o,l=r.y-s,c=a.x-o,f=a.y-s;var d=2*(u*f-l*c);if(d>=-Oe)return;var p=u*u+l*l,h=c*c+f*f,g=(f*p-l*h)/d,m=(u*h-c*p)/d,f=m+s;var v=Vi.pop()||new Ji;v.arc=e;v.site=i;v.x=g+o;v.y=f+Math.sqrt(g*g+m*m);v.cy=f;e.circle=v;var y=null,b=Fi._;while(b){if(v.y<b.y||v.y===b.y&&v.x<=b.x){if(b.L)b=b.L;else{y=b.P;break}}else{if(b.R)b=b.R;else{y=b;break}}}Fi.insert(y,v);if(!y)zi=v}function ea(e){var t=e.circle;if(t){if(!t.P)zi=t.N;Fi.remove(t);Vi.push(t);la(t);e.circle=null}}function ta(e){var t=ki,n=Tr(e[0][0],e[0][1],e[1][0],e[1][1]),r=t.length,i;while(r--){i=t[r];if(!na(i,e)||!n(i)||w(i.a.x-i.b.x)<Ne&&w(i.a.y-i.b.y)<Ne){i.a=i.b=null;t.splice(r,1)}}}function na(e,t){var n=e.b;if(n)return true;var r=e.a,i=t[0][0],a=t[1][0],o=t[0][1],s=t[1][1],u=e.l,l=e.r,c=u.x,f=u.y,d=l.x,p=l.y,h=(c+d)/2,g=(f+p)/2,m,v;if(p===f){if(h<i||h>=a)return;if(c>d){if(!r)r={x:h,y:o};else if(r.y>=s)return;n={x:h,y:s}}else{if(!r)r={x:h,y:s};else if(r.y<o)return;n={x:h,y:o}}}else{m=(c-d)/(p-f);v=g-m*h;if(m<-1||m>1){if(c>d){if(!r)r={x:(o-v)/m,y:o};else if(r.y>=s)return;n={x:(s-v)/m,y:s}}else{if(!r)r={x:(s-v)/m,y:s};else if(r.y<o)return;n={x:(o-v)/m,y:o}}}else{if(f<p){if(!r)r={x:i,y:m*i+v};else if(r.x>=a)return;n={x:a,y:m*a+v}}else{if(!r)r={x:a,y:m*a+v};else if(r.x<i)return;n={x:i,y:m*i+v}}}}e.a=r;e.b=n;return true}function ra(e,t){this.l=e;this.r=t;this.a=this.b=null}function ia(e,t,n,r){var i=new ra(e,t);ki.push(i);if(n)oa(i,e,t,n);if(r)oa(i,t,e,r);Ri[e.i].edges.push(new sa(i,e,t));Ri[t.i].edges.push(new sa(i,t,e));return i}function aa(e,t,n){var r=new ra(e,null);r.a=t;r.b=n;ki.push(r);return r}function oa(e,t,n,r){if(!e.a&&!e.b){e.a=r;e.l=t;e.r=n}else if(e.l===n){e.b=r}else{e.a=r}}function sa(e,t,n){var r=e.a,i=e.b;this.edge=e;this.site=t;this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}sa.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function ua(){this._=null}function la(e){e.U=e.C=e.L=e.R=e.P=e.N=null}ua.prototype={insert:function(e,t){var n,r,i;if(e){t.P=e;t.N=e.N;if(e.N)e.N.P=t;e.N=t;if(e.R){e=e.R;while(e.L)e=e.L;e.L=t}else{e.R=t}n=e}else if(this._){e=da(this._);t.P=null;t.N=e;e.P=e.L=t;n=e}else{t.P=t.N=null;this._=t;n=null}t.L=t.R=null;t.U=n;t.C=true;e=t;while(n&&n.C){r=n.U;if(n===r.L){i=r.R;if(i&&i.C){n.C=i.C=false;r.C=true;e=r}else{if(e===n.R){ca(this,n);e=n;n=e.U}n.C=false;r.C=true;fa(this,r)}}else{i=r.L;if(i&&i.C){n.C=i.C=false;r.C=true;e=r}else{if(e===n.L){fa(this,n);e=n;n=e.U}n.C=false;r.C=true;ca(this,r)}}n=e.U}this._.C=false},remove:function(e){if(e.N)e.N.P=e.P;if(e.P)e.P.N=e.N;e.N=e.P=null;var t=e.U,n,r=e.L,i=e.R,a,o;if(!r)a=i;else if(!i)a=r;else a=da(i);if(t){if(t.L===e)t.L=a;else t.R=a}else{this._=a}if(r&&i){o=a.C;a.C=e.C;a.L=r;r.U=a;if(a!==i){t=a.U;a.U=e.U;e=a.R;t.L=e;a.R=i;i.U=a}else{a.U=t;t=a;e=a.R}}else{o=e.C;e=a}if(e)e.U=t;if(o)return;if(e&&e.C){e.C=false;return}do{if(e===this._)break;if(e===t.L){n=t.R;if(n.C){n.C=false;t.C=true;ca(this,t);n=t.R}if(n.L&&n.L.C||n.R&&n.R.C){if(!n.R||!n.R.C){n.L.C=false;n.C=true;fa(this,n);n=t.R}n.C=t.C;t.C=n.R.C=false;ca(this,t);e=this._;break}}else{n=t.L;if(n.C){n.C=false;t.C=true;fa(this,t);n=t.L}if(n.L&&n.L.C||n.R&&n.R.C){if(!n.L||!n.L.C){n.R.C=false;n.C=true;ca(this,n);n=t.L}n.C=t.C;t.C=n.L.C=false;fa(this,t);e=this._;break}}n.C=true;e=t;t=t.U}while(!e.C);if(e)e.C=false}};function ca(e,t){var n=t,r=t.R,i=n.U;if(i){if(i.L===n)i.L=r;else i.R=r}else{e._=r}r.U=i;n.U=r;n.R=r.L;if(n.R)n.R.U=n;r.L=n}function fa(e,t){var n=t,r=t.L,i=n.U;if(i){if(i.L===n)i.L=r;else i.R=r}else{e._=r}r.U=i;n.U=r;n.L=r.R;if(n.L)n.L.U=n;r.R=n}function da(e){while(e.L)e=e.L;return e}function pa(e,t){var n=e.sort(ha).pop(),r,i,a;ki=[];Ri=new Array(e.length);ji=new ua;Fi=new ua;while(true){a=zi;if(n&&(!a||n.y<a.y||n.y===a.y&&n.x<a.x)){if(n.x!==r||n.y!==i){Ri[n.i]=new Xi(n);Yi(n);r=n.x,i=n.y}n=e.pop()}else if(a){Hi(a.arc)}else{break}}if(t)ta(t),Ki(t);var o={cells:Ri,edges:ki};ji=Fi=ki=Ri=null;return o}function ha(e,t){return t.y-e.y||t.x-e.x}a.geom.voronoi=function(e){var t=Di,n=Ii,r=t,i=n,a=ga;if(e)return o(e);function o(e){var t=new Array(e.length),n=a[0][0],r=a[0][1],i=a[1][0],o=a[1][1];pa(s(e),a).cells.forEach(function(a,s){var u=a.edges,l=a.site,c=t[s]=u.length?u.map(function(e){var t=e.start();return[t.x,t.y]}):l.x>=n&&l.x<=i&&l.y>=r&&l.y<=o?[[n,o],[i,o],[i,r],[n,r]]:[];c.point=e[s]});return t}function s(e){return e.map(function(e,t){return{x:Math.round(r(e,t)/Ne)*Ne,y:Math.round(i(e,t)/Ne)*Ne,i:t}})}o.links=function(e){return pa(s(e)).edges.filter(function(e){return e.l&&e.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})};o.triangles=function(e){var t=[];pa(s(e)).cells.forEach(function(n,r){var i=n.site,a=n.edges.sort(Zi),o=-1,s=a.length,u,l,c=a[s-1].edge,f=c.l===i?c.r:c.l;while(++o<s){u=c;l=f;c=a[o].edge;f=c.l===i?c.r:c.l;if(r<l.i&&r<f.i&&ma(i,l,f)<0){t.push([e[r],e[l.i],e[f.i]])}}});return t};o.x=function(e){return arguments.length?(r=Dt(t=e),o):t};o.y=function(e){return arguments.length?(i=Dt(n=e),o):n};o.clipExtent=function(e){if(!arguments.length)return a===ga?null:a;a=e==null?ga:e;return o};o.size=function(e){if(!arguments.length)return a===ga?null:a&&a[1];return o.clipExtent(e&&[[0,0],e])};return o};var ga=[[-1e6,-1e6],[1e6,1e6]];function ma(e,t,n){return(e.x-n.x)*(t.y-e.y)-(e.x-t.x)*(n.y-e.y)}a.geom.delaunay=function(e){return a.geom.voronoi().triangles(e)};a.geom.quadtree=function(e,t,n,r,i){var a=Di,o=Ii,s;if(s=arguments.length){a=va;o=ya;if(s===3){i=n;r=t;n=t=0}return u(e)}function u(e){var u,l=Dt(a),c=Dt(o),f,d,p,h,g,m,v,y;if(t!=null){g=t,m=n,v=r,y=i}else{v=y=-(g=m=Infinity);f=[],d=[];h=e.length;if(s)for(p=0;p<h;++p){u=e[p];if(u.x<g)g=u.x;if(u.y<m)m=u.y;if(u.x>v)v=u.x;if(u.y>y)y=u.y;f.push(u.x);d.push(u.y)}else for(p=0;p<h;++p){var b=+l(u=e[p],p),M=+c(u,p);if(b<g)g=b;if(M<m)m=M;if(b>v)v=b;if(M>y)y=M;f.push(b);d.push(M)}}var x=v-g,A=y-m;if(x>A)y=m+x;else v=g+A;function T(e,t,n,r,i,a,o,s){if(isNaN(n)||isNaN(r))return;if(e.leaf){var u=e.x,l=e.y;if(u!=null){if(w(u-n)+w(l-r)<.01){C(e,t,n,r,i,a,o,s)}else{var c=e.point;e.x=e.y=e.point=null;C(e,c,u,l,i,a,o,s);C(e,t,n,r,i,a,o,s)}}else{e.x=n,e.y=r,e.point=t}}else{C(e,t,n,r,i,a,o,s)}}function C(e,t,n,r,i,a,o,s){var u=(i+o)*.5,l=(a+s)*.5,c=n>=u,f=r>=l,d=f<<1|c;e.leaf=false;e=e.nodes[d]||(e.nodes[d]=ba());if(c)i=u;else o=u;if(f)a=l;else s=l;T(e,t,n,r,i,a,o,s)}var S=ba();S.add=function(e){T(S,e,+l(e,++p),+c(e,p),g,m,v,y)};S.visit=function(e){Ma(e,S,g,m,v,y)};S.find=function(e){return xa(S,e[0],e[1],g,m,v,y)};p=-1;if(t==null){while(++p<h){T(S,e[p],f[p],d[p],g,m,v,y)}--p}else e.forEach(S.add);f=d=e=u=null;return S}u.x=function(e){return arguments.length?(a=e,u):a};u.y=function(e){return arguments.length?(o=e,u):o};u.extent=function(e){if(!arguments.length)return t==null?null:[[t,n],[r,i]];if(e==null)t=n=r=i=null;else t=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1];return u};u.size=function(e){if(!arguments.length)return t==null?null:[r-t,i-n];if(e==null)t=n=r=i=null;else t=n=0,r=+e[0],i=+e[1];return u};return u};function va(e){return e.x}function ya(e){return e.y}function ba(){return{leaf:true,nodes:[],point:null,x:null,y:null}}function Ma(e,t,n,r,i,a){if(!e(t,n,r,i,a)){var o=(n+i)*.5,s=(r+a)*.5,u=t.nodes;if(u[0])Ma(e,u[0],n,r,o,s);if(u[1])Ma(e,u[1],o,r,i,s);if(u[2])Ma(e,u[2],n,s,o,a);if(u[3])Ma(e,u[3],o,s,i,a)}}function xa(e,t,n,r,i,a,o){var s=Infinity,u;(function e(l,c,f,d,p){if(c>a||f>o||d<r||p<i)return;if(h=l.point){var h,g=t-l.x,m=n-l.y,v=g*g+m*m;if(v<s){var y=Math.sqrt(s=v);r=t-y,i=n-y;a=t+y,o=n+y;u=h}}var b=l.nodes,M=(c+d)*.5,x=(f+p)*.5,w=t>=M,A=n>=x;for(var T=A<<1|w,C=T+4;T<C;++T){if(l=b[T&3])switch(T&3){case 0:e(l,c,f,M,x);break;case 1:e(l,M,f,d,x);break;case 2:e(l,c,x,M,p);break;case 3:e(l,M,x,d,p);break}}})(e,r,i,a,o);return u}a.interpolateRgb=wa;function wa(e,t){e=a.rgb(e);t=a.rgb(t);var n=e.r,r=e.g,i=e.b,o=t.r-n,s=t.g-r,u=t.b-i;return function(e){return"#"+Mt(Math.round(n+o*e))+Mt(Math.round(r+s*e))+Mt(Math.round(i+u*e))}}a.interpolateObject=Aa;function Aa(e,t){var n={},r={},i;for(i in e){if(i in t){n[i]=Ia(e[i],t[i])}else{r[i]=e[i]}}for(i in t){if(!(i in e)){r[i]=t[i]}}return function(e){for(i in n)r[i]=n[i](e);return r}}a.interpolateNumber=Ta;function Ta(e,t){e=+e,t=+t;return function(n){return e*(1-n)+t*n}}a.interpolateString=Ca;function Ca(e,t){var n=Sa.lastIndex=Da.lastIndex=0,r,i,a,o=-1,s=[],u=[];e=e+"",t=t+"";while((r=Sa.exec(e))&&(i=Da.exec(t))){if((a=i.index)>n){a=t.slice(n,a);if(s[o])s[o]+=a;else s[++o]=a}if((r=r[0])===(i=i[0])){if(s[o])s[o]+=i;else s[++o]=i}else{s[++o]=null;u.push({i:o,x:Ta(r,i)})}n=Da.lastIndex}if(n<t.length){a=t.slice(n);if(s[o])s[o]+=a;else s[++o]=a}return s.length<2?u[0]?(t=u[0].x,function(e){return t(e)+""}):function(){return t}:(t=u.length,function(e){for(var n=0,r;n<t;++n)s[(r=u[n]).i]=r.x(e);return s.join("")})}var Sa=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Da=new RegExp(Sa.source,"g");a.interpolate=Ia;function Ia(e,t){var n=a.interpolators.length,r;while(--n>=0&&!(r=a.interpolators[n](e,t)));return r}a.interpolators=[function(e,t){var n=typeof t;return(n==="string"?St.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?wa:Ca:t instanceof Je?wa:Array.isArray(t)?Ea:n==="object"&&isNaN(t)?Aa:Ta)(e,t)}];a.interpolateArray=Ea;function Ea(e,t){var n=[],r=[],i=e.length,a=t.length,o=Math.min(e.length,t.length),s;for(s=0;s<o;++s)n.push(Ia(e[s],t[s]));for(;s<i;++s)r[s]=e[s];for(;s<a;++s)r[s]=t[s];return function(e){for(s=0;s<o;++s)r[s]=n[s](e);return r}}var Na=function(){return R};var Oa=a.map({linear:Na,poly:za,quad:function(){return Ra},cubic:function(){return ja},sin:function(){return Fa},exp:function(){return Va},circle:function(){return Ua},elastic:Ga,back:Wa,bounce:function(){return Ha}});var _a=a.map({in:R,out:Pa,"in-out":ka,"out-in":function(e){return ka(Pa(e))}});a.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.slice(0,t):e,r=t>=0?e.slice(t+1):"in";n=Oa.get(n)||Na;r=_a.get(r)||R;return La(r(n.apply(null,o.call(arguments,1))))};function La(e){return function(t){return t<=0?0:t>=1?1:e(t)}}function Pa(e){return function(t){return 1-e(1-t)}}function ka(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function Ra(e){return e*e}function ja(e){return e*e*e}function Ba(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function za(e){return function(t){return Math.pow(t,e)}}function Fa(e){return 1-Math.cos(e*ke)}function Va(e){return Math.pow(2,10*(e-1))}function Ua(e){return 1-Math.sqrt(1-e*e)}function Ga(e,t){var n;if(arguments.length<2)t=.45;if(arguments.length)n=t/Le*Math.asin(1/e);else e=1,n=t/4;return function(r){return 1+e*Math.pow(2,-10*r)*Math.sin((r-n)*Le/t)}}function Wa(e){if(!e)e=1.70158;return function(t){return t*t*((e+1)*t-e)}}function Ha(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}a.interpolateHcl=Ya;function Ya(e,t){e=a.hcl(e);t=a.hcl(t);var n=e.h,r=e.c,i=e.l,o=t.h-n,s=t.c-r,u=t.l-i;if(isNaN(s))s=0,r=isNaN(r)?t.c:r;if(isNaN(o))o=0,n=isNaN(n)?t.h:n;else if(o>180)o-=360;else if(o<-180)o+=360;return function(e){return it(n+o*e,r+s*e,i+u*e)+""}}a.interpolateHsl=Qa;function Qa(e,t){e=a.hsl(e);t=a.hsl(t);var n=e.h,r=e.s,i=e.l,o=t.h-n,s=t.s-r,u=t.l-i;if(isNaN(s))s=0,r=isNaN(r)?t.s:r;if(isNaN(o))o=0,n=isNaN(n)?t.h:n;else if(o>180)o-=360;else if(o<-180)o+=360;return function(e){return tt(n+o*e,r+s*e,i+u*e)+""}}a.interpolateLab=qa;function qa(e,t){e=a.lab(e);t=a.lab(t);var n=e.l,r=e.a,i=e.b,o=t.l-n,s=t.a-r,u=t.b-i;return function(e){return ft(n+o*e,r+s*e,i+u*e)+""}}a.interpolateRound=Xa;function Xa(e,t){t-=e;return function(n){return Math.round(e+t*n)}}a.transform=function(e){var t=u.createElementNS(a.ns.prefix.svg,"g");return(a.transform=function(e){if(e!=null){t.setAttribute("transform",e);var n=t.transform.baseVal.consolidate()}return new Ka(n?n.matrix:eo)})(e)};function Ka(e){var t=[e.a,e.b],n=[e.c,e.d],r=Ja(t),i=Za(t,n),a=Ja($a(n,t,-i))||0;if(t[0]*n[1]<n[0]*t[1]){t[0]*=-1;t[1]*=-1;r*=-1;i*=-1}this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*je;this.translate=[e.e,e.f];this.scale=[r,a];this.skew=a?Math.atan2(i,a)*je:0}Ka.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function Za(e,t){return e[0]*t[0]+e[1]*t[1]}function Ja(e){var t=Math.sqrt(Za(e,e));if(t){e[0]/=t;e[1]/=t}return t}function $a(e,t,n){e[0]+=n*t[0];e[1]+=n*t[1];return e}var eo={a:1,b:0,c:0,d:1,e:0,f:0};a.interpolateTransform=oo;function to(e){return e.length?e.pop()+",":""}function no(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push("translate(",null,",",null,")");r.push({i:i-4,x:Ta(e[0],t[0])},{i:i-2,x:Ta(e[1],t[1])})}else if(t[0]||t[1]){n.push("translate("+t+")")}}function ro(e,t,n,r){if(e!==t){if(e-t>180)t+=360;else if(t-e>180)e+=360;r.push({i:n.push(to(n)+"rotate(",null,")")-2,x:Ta(e,t)})}else if(t){n.push(to(n)+"rotate("+t+")")}}function io(e,t,n,r){if(e!==t){r.push({i:n.push(to(n)+"skewX(",null,")")-2,x:Ta(e,t)})}else if(t){n.push(to(n)+"skewX("+t+")")}}function ao(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push(to(n)+"scale(",null,",",null,")");r.push({i:i-4,x:Ta(e[0],t[0])},{i:i-2,x:Ta(e[1],t[1])})}else if(t[0]!==1||t[1]!==1){n.push(to(n)+"scale("+t+")")}}function oo(e,t){var n=[],r=[];e=a.transform(e),t=a.transform(t);no(e.translate,t.translate,n,r);ro(e.rotate,t.rotate,n,r);io(e.skew,t.skew,n,r);ao(e.scale,t.scale,n,r);e=t=null;return function(e){var t=-1,i=r.length,a;while(++t<i)n[(a=r[t]).i]=a.x(e);return n.join("")}}function so(e,t){t=(t-=e=+e)||1/t;return function(n){return(n-e)/t}}function uo(e,t){t=(t-=e=+e)||1/t;return function(n){return Math.max(0,Math.min(1,(n-e)/t))}}a.layout={};a.layout.bundle=function(){return function(e){var t=[],n=-1,r=e.length;while(++n<r)t.push(lo(e[n]));return t}};function lo(e){var t=e.source,n=e.target,r=fo(t,n),i=[t];while(t!==r){t=t.parent;i.push(t)}var a=i.length;while(n!==r){i.splice(a,0,n);n=n.parent}return i}function co(e){var t=[],n=e.parent;while(n!=null){t.push(e);e=n;n=n.parent}t.push(e);return t}function fo(e,t){if(e===t)return e;var n=co(e),r=co(t),i=n.pop(),a=r.pop(),o=null;while(i===a){o=i;i=n.pop();a=r.pop()}return o}a.layout.chord=function(){var e={},t,n,r,i,o=0,s,u,l;function c(){var e={},c=[],d=a.range(i),p=[],h,g,m,v,y;t=[];n=[];h=0,v=-1;while(++v<i){g=0,y=-1;while(++y<i){g+=r[v][y]}c.push(g);p.push(a.range(i));h+=g}if(s){d.sort(function(e,t){return s(c[e],c[t])})}if(u){p.forEach(function(e,t){e.sort(function(e,n){return u(r[t][e],r[t][n])})})}h=(Le-o*i)/h;g=0,v=-1;while(++v<i){m=g,y=-1;while(++y<i){var b=d[v],M=p[b][y],x=r[b][M],w=g,A=g+=x*h;e[b+"-"+M]={index:b,subindex:M,startAngle:w,endAngle:A,value:x}}n[b]={index:b,startAngle:m,endAngle:g,value:c[b]};g+=o}v=-1;while(++v<i){y=v-1;while(++y<i){var T=e[v+"-"+y],C=e[y+"-"+v];if(T.value||C.value){t.push(T.value<C.value?{source:C,target:T}:{source:T,target:C})}}}if(l)f()}function f(){t.sort(function(e,t){return l((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}e.matrix=function(a){if(!arguments.length)return r;i=(r=a)&&r.length;t=n=null;return e};e.padding=function(r){if(!arguments.length)return o;o=r;t=n=null;return e};e.sortGroups=function(r){if(!arguments.length)return s;s=r;t=n=null;return e};e.sortSubgroups=function(n){if(!arguments.length)return u;u=n;t=null;return e};e.sortChords=function(n){if(!arguments.length)return l;l=n;if(t)f();return e};e.chords=function(){if(!t)c();return t};e.groups=function(){if(!n)c();return n};return e};a.layout.force=function(){var e={},t=a.dispatch("start","tick","end"),n,r=[1,1],i,o,s=.9,u=yo,l=bo,c=-30,f=Mo,d=.1,p=.64,h=[],g=[],m,v,y;function b(e){return function(t,n,r,i){if(t.point!==e){var a=t.cx-e.x,o=t.cy-e.y,s=i-n,u=a*a+o*o;if(s*s/p<u){if(u<f){var l=t.charge/u;e.px-=a*l;e.py-=o*l}return true}if(t.point&&u&&u<f){var l=t.pointCharge/u;e.px-=a*l;e.py-=o*l}}return!t.charge}}e.tick=function(){if((o*=.99)<.005){n=null;t.end({type:"end",alpha:o=0});return true}var e=h.length,i=g.length,u,l,f,p,M,x,w,A,T;for(l=0;l<i;++l){f=g[l];p=f.source;M=f.target;A=M.x-p.x;T=M.y-p.y;if(x=A*A+T*T){x=o*v[l]*((x=Math.sqrt(x))-m[l])/x;A*=x;T*=x;M.x-=A*(w=p.weight+M.weight?p.weight/(p.weight+M.weight):.5);M.y-=T*w;p.x+=A*(w=1-w);p.y+=T*w}}if(w=o*d){A=r[0]/2;T=r[1]/2;l=-1;if(w)while(++l<e){f=h[l];f.x+=(A-f.x)*w;f.y+=(T-f.y)*w}}if(c){vo(u=a.geom.quadtree(h),o,y);l=-1;while(++l<e){if(!(f=h[l]).fixed){u.visit(b(f))}}}l=-1;while(++l<e){f=h[l];if(f.fixed){f.x=f.px;f.y=f.py}else{f.x-=(f.px-(f.px=f.x))*s;f.y-=(f.py-(f.py=f.y))*s}}t.tick({type:"tick",alpha:o})};e.nodes=function(t){if(!arguments.length)return h;h=t;return e};e.links=function(t){if(!arguments.length)return g;g=t;return e};e.size=function(t){if(!arguments.length)return r;r=t;return e};e.linkDistance=function(t){if(!arguments.length)return u;u=typeof t==="function"?t:+t;return e};e.distance=e.linkDistance;e.linkStrength=function(t){if(!arguments.length)return l;l=typeof t==="function"?t:+t;return e};e.friction=function(t){if(!arguments.length)return s;s=+t;return e};e.charge=function(t){if(!arguments.length)return c;c=typeof t==="function"?t:+t;return e};e.chargeDistance=function(t){if(!arguments.length)return Math.sqrt(f);f=t*t;return e};e.gravity=function(t){if(!arguments.length)return d;d=+t;return e};e.theta=function(t){if(!arguments.length)return Math.sqrt(p);p=t*t;return e};e.alpha=function(r){if(!arguments.length)return o;r=+r;if(o){if(r>0){o=r}else{n.c=null,n.t=NaN,n=null;t.end({type:"end",alpha:o=0})}}else if(r>0){t.start({type:"start",alpha:o=r});n=jt(e.tick)}return e};e.start=function(){var t,n=h.length,i=g.length,a=r[0],o=r[1],s,f;for(t=0;t<n;++t){(f=h[t]).index=t;f.weight=0}for(t=0;t<i;++t){f=g[t];if(typeof f.source=="number")f.source=h[f.source];if(typeof f.target=="number")f.target=h[f.target];++f.source.weight;++f.target.weight}for(t=0;t<n;++t){f=h[t];if(isNaN(f.x))f.x=d("x",a);if(isNaN(f.y))f.y=d("y",o);if(isNaN(f.px))f.px=f.x;if(isNaN(f.py))f.py=f.y}m=[];if(typeof u==="function")for(t=0;t<i;++t)m[t]=+u.call(this,g[t],t);else for(t=0;t<i;++t)m[t]=u;v=[];if(typeof l==="function")for(t=0;t<i;++t)v[t]=+l.call(this,g[t],t);else for(t=0;t<i;++t)v[t]=l;y=[];if(typeof c==="function")for(t=0;t<n;++t)y[t]=+c.call(this,h[t],t);else for(t=0;t<n;++t)y[t]=c;function d(e,r){if(!s){s=new Array(n);for(u=0;u<n;++u){s[u]=[]}for(u=0;u<i;++u){var a=g[u];s[a.source.index].push(a.target);s[a.target.index].push(a.source)}}var o=s[t],u=-1,l=o.length,c;while(++u<l)if(!isNaN(c=o[u][e]))return c;return Math.random()*r}return e.resume()};e.resume=function(){return e.alpha(.1)};e.stop=function(){return e.alpha(0)};e.drag=function(){if(!i)i=a.behavior.drag().origin(R).on("dragstart.force",po).on("drag.force",M).on("dragend.force",ho);if(!arguments.length)return i;this.on("mouseover.force",go).on("mouseout.force",mo).call(i)};function M(t){t.px=a.event.x,t.py=a.event.y;e.resume()}return a.rebind(e,t,"on")};function po(e){e.fixed|=2}function ho(e){e.fixed&=~6}function go(e){e.fixed|=4;e.px=e.x,e.py=e.y}function mo(e){e.fixed&=~4}function vo(e,t,n){var r=0,i=0;e.charge=0;if(!e.leaf){var a=e.nodes,o=a.length,s=-1,u;while(++s<o){u=a[s];if(u==null)continue;vo(u,t,n);e.charge+=u.charge;r+=u.charge*u.cx;i+=u.charge*u.cy}}if(e.point){if(!e.leaf){e.point.x+=Math.random()-.5;e.point.y+=Math.random()-.5}var l=t*n[e.point.index];e.charge+=e.pointCharge=l;r+=l*e.point.x;i+=l*e.point.y}e.cx=r/e.charge;e.cy=i/e.charge}var yo=20,bo=1,Mo=Infinity;a.layout.hierarchy=function(){var e=So,t=To,n=Co;function r(i){var a=[i],o=[],s;i.depth=0;while((s=a.pop())!=null){o.push(s);if((l=t.call(r,s,s.depth))&&(u=l.length)){var u,l,c;while(--u>=0){a.push(c=l[u]);c.parent=s;c.depth=s.depth+1}if(n)s.value=0;s.children=l}else{if(n)s.value=+n.call(r,s,s.depth)||0;delete s.children}}Ao(i,function(t){var r,i;if(e&&(r=t.children))r.sort(e);if(n&&(i=t.parent))i.value+=t.value});return o}r.sort=function(t){if(!arguments.length)return e;e=t;return r};r.children=function(e){if(!arguments.length)return t;t=e;return r};r.value=function(e){if(!arguments.length)return n;n=e;return r};r.revalue=function(e){if(n){wo(e,function(e){if(e.children)e.value=0});Ao(e,function(e){var t;if(!e.children)e.value=+n.call(r,e,e.depth)||0;if(t=e.parent)t.value+=e.value})}return e};return r};function xo(e,t){a.rebind(e,t,"sort","children","value");e.nodes=e;e.links=Do;return e}function wo(e,t){var n=[e];while((e=n.pop())!=null){t(e);if((i=e.children)&&(r=i.length)){var r,i;while(--r>=0)n.push(i[r])}}}function Ao(e,t){var n=[e],r=[];while((e=n.pop())!=null){r.push(e);if((o=e.children)&&(a=o.length)){var i=-1,a,o;while(++i<a)n.push(o[i])}}while((e=r.pop())!=null){t(e)}}function To(e){return e.children}function Co(e){return e.value}function So(e,t){return t.value-e.value}function Do(e){return a.merge(e.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}a.layout.partition=function(){var e=a.layout.hierarchy(),t=[1,1];function n(e,t,r,i){var a=e.children;e.x=t;e.y=e.depth*i;e.dx=r;e.dy=i;if(a&&(s=a.length)){var o=-1,s,u,l;r=e.value?r/e.value:0;while(++o<s){n(u=a[o],t,l=u.value*r,i);t+=l}}}function r(e){var t=e.children,n=0;if(t&&(a=t.length)){var i=-1,a;while(++i<a)n=Math.max(n,r(t[i]))}return 1+n}function i(i,a){var o=e.call(this,i,a);n(o[0],0,t[0],t[1]/r(o[0]));return o}i.size=function(e){if(!arguments.length)return t;t=e;return i};return xo(i,e)};a.layout.pie=function(){var e=Number,t=Io,n=0,r=Le,i=0;function o(s){var u=s.length,l=s.map(function(t,n){return+e.call(o,t,n)}),c=+(typeof n==="function"?n.apply(this,arguments):n),f=(typeof r==="function"?r.apply(this,arguments):r)-c,d=Math.min(Math.abs(f)/u,+(typeof i==="function"?i.apply(this,arguments):i)),p=d*(f<0?-1:1),h=a.sum(l),g=h?(f-u*p)/h:0,m=a.range(u),v=[],y;if(t!=null)m.sort(t===Io?function(e,t){return l[t]-l[e]}:function(e,n){return t(s[e],s[n])});m.forEach(function(e){v[e]={data:s[e],value:y=l[e],startAngle:c,endAngle:c+=y*g+p,padAngle:d}});return v}o.value=function(t){if(!arguments.length)return e;e=t;return o};o.sort=function(e){if(!arguments.length)return t;t=e;return o};o.startAngle=function(e){if(!arguments.length)return n;n=e;return o};o.endAngle=function(e){if(!arguments.length)return r;r=e;return o};o.padAngle=function(e){if(!arguments.length)return i;i=e;return o};return o};var Io={};a.layout.stack=function(){var e=R,t=Po,n=ko,r=Oo,i=Eo,o=No;function s(u,l){if(!(g=u.length))return u;var c=u.map(function(t,n){return e.call(s,t,n)});var f=c.map(function(e){return e.map(function(e,t){return[i.call(s,e,t),o.call(s,e,t)]})});var d=t.call(s,f,l);c=a.permute(c,d);f=a.permute(f,d);var p=n.call(s,f,l);var h=c[0].length,g,m,v,y;for(v=0;v<h;++v){r.call(s,c[0][v],y=p[v],f[0][v][1]);for(m=1;m<g;++m){r.call(s,c[m][v],y+=f[m-1][v][1],f[m][v][1])}}return u}s.values=function(t){if(!arguments.length)return e;e=t;return s};s.order=function(e){if(!arguments.length)return t;t=typeof e==="function"?e:_o.get(e)||Po;return s};s.offset=function(e){if(!arguments.length)return n;n=typeof e==="function"?e:Lo.get(e)||ko;return s};s.x=function(e){if(!arguments.length)return i;i=e;return s};s.y=function(e){if(!arguments.length)return o;o=e;return s};s.out=function(e){if(!arguments.length)return r;r=e;return s};return s};function Eo(e){return e.x}function No(e){return e.y}function Oo(e,t,n){e.y0=t;e.y=n}var _o=a.map({"inside-out":function(e){var t=e.length,n,r,i=e.map(Ro),o=e.map(jo),s=a.range(t).sort(function(e,t){return i[e]-i[t]}),u=0,l=0,c=[],f=[];for(n=0;n<t;++n){r=s[n];if(u<l){u+=o[r];c.push(r)}else{l+=o[r];f.push(r)}}return f.reverse().concat(c)},reverse:function(e){return a.range(e.length).reverse()},default:Po});var Lo=a.map({silhouette:function(e){var t=e.length,n=e[0].length,r=[],i=0,a,o,s,u=[];for(o=0;o<n;++o){for(a=0,s=0;a<t;a++)s+=e[a][o][1];if(s>i)i=s;r.push(s)}for(o=0;o<n;++o){u[o]=(i-r[o])/2}return u},wiggle:function(e){var t=e.length,n=e[0],r=n.length,i,a,o,s,u,l,c,f,d,p=[];p[0]=f=d=0;for(a=1;a<r;++a){for(i=0,s=0;i<t;++i)s+=e[i][a][1];for(i=0,u=0,c=n[a][0]-n[a-1][0];i<t;++i){for(o=0,l=(e[i][a][1]-e[i][a-1][1])/(2*c);o<i;++o){l+=(e[o][a][1]-e[o][a-1][1])/c}u+=l*e[i][a][1]}p[a]=f-=s?u/s*c:0;if(f<d)d=f}for(a=0;a<r;++a)p[a]-=d;return p},expand:function(e){var t=e.length,n=e[0].length,r=1/t,i,a,o,s=[];for(a=0;a<n;++a){for(i=0,o=0;i<t;i++)o+=e[i][a][1];if(o)for(i=0;i<t;i++)e[i][a][1]/=o;else for(i=0;i<t;i++)e[i][a][1]=r}for(a=0;a<n;++a)s[a]=0;return s},zero:ko});function Po(e){return a.range(e.length)}function ko(e){var t=-1,n=e[0].length,r=[];while(++t<n)r[t]=0;return r}function Ro(e){var t=1,n=0,r=e[0][1],i,a=e.length;for(;t<a;++t){if((i=e[t][1])>r){n=t;r=i}}return n}function jo(e){return e.reduce(Bo,0)}function Bo(e,t){return e+t[1]}a.layout.histogram=function(){var e=true,t=Number,n=Vo,r=zo;function i(i,o){var s=[],u=i.map(t,this),l=n.call(this,u,o),c=r.call(this,l,u,o),f,o=-1,d=u.length,p=c.length-1,h=e?1:1/d,g;while(++o<p){f=s[o]=[];f.dx=c[o+1]-(f.x=c[o]);f.y=0}if(p>0){o=-1;while(++o<d){g=u[o];if(g>=l[0]&&g<=l[1]){f=s[a.bisect(c,g,1,p)-1];f.y+=h;f.push(i[o])}}}return s}i.value=function(e){if(!arguments.length)return t;t=e;return i};i.range=function(e){if(!arguments.length)return n;n=Dt(e);return i};i.bins=function(e){if(!arguments.length)return r;r=typeof e==="number"?function(t){return Fo(t,e)}:Dt(e);return i};i.frequency=function(t){if(!arguments.length)return e;e=!!t;return i};return i};function zo(e,t){return Fo(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function Fo(e,t){var n=-1,r=+e[0],i=(e[1]-r)/t,a=[];while(++n<=t)a[n]=i*n+r;return a}function Vo(e){return[a.min(e),a.max(e)]}a.layout.pack=function(){var e=a.layout.hierarchy().sort(Uo),t=0,n=[1,1],r;function i(i,a){var o=e.call(this,i,a),s=o[0],u=n[0],l=n[1],c=r==null?Math.sqrt:typeof r==="function"?r:function(){return r};s.x=s.y=0;Ao(s,function(e){e.r=+c(e.value)});Ao(s,Yo);if(t){var f=t*(r?1:Math.max(2*s.r/u,2*s.r/l))/2;Ao(s,function(e){e.r+=f});Ao(s,Yo);Ao(s,function(e){e.r-=f})}Xo(s,u/2,l/2,r?1:1/Math.max(2*s.r/u,2*s.r/l));return o}i.size=function(e){if(!arguments.length)return n;n=e;return i};i.radius=function(e){if(!arguments.length)return r;r=e==null||typeof e==="function"?e:+e;return i};i.padding=function(e){if(!arguments.length)return t;t=+e;return i};return xo(i,e)};function Uo(e,t){return e.value-t.value}function Go(e,t){var n=e._pack_next;e._pack_next=t;t._pack_prev=e;t._pack_next=n;n._pack_prev=t}function Wo(e,t){e._pack_next=t;t._pack_prev=e}function Ho(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.r+t.r;return.999*i*i>n*n+r*r}function Yo(e){if(!(t=e.children)||!(d=t.length))return;var t,n=Infinity,r=-Infinity,i=Infinity,a=-Infinity,o,s,u,l,c,f,d;function p(e){n=Math.min(e.x-e.r,n);r=Math.max(e.x+e.r,r);i=Math.min(e.y-e.r,i);a=Math.max(e.y+e.r,a)}t.forEach(Qo);o=t[0];o.x=-o.r;o.y=0;p(o);if(d>1){s=t[1];s.x=s.r;s.y=0;p(s);if(d>2){u=t[2];Ko(o,s,u);p(u);Go(o,u);o._pack_prev=u;Go(u,s);s=o._pack_next;for(l=3;l<d;l++){Ko(o,s,u=t[l]);var h=0,g=1,m=1;for(c=s._pack_next;c!==s;c=c._pack_next,g++){if(Ho(c,u)){h=1;break}}if(h==1){for(f=o._pack_prev;f!==c._pack_prev;f=f._pack_prev,m++){if(Ho(f,u)){break}}}if(h){if(g<m||g==m&&s.r<o.r)Wo(o,s=c);else Wo(o=f,s);l--}else{Go(o,u);s=u;p(u)}}}}var v=(n+r)/2,y=(i+a)/2,b=0;for(l=0;l<d;l++){u=t[l];u.x-=v;u.y-=y;b=Math.max(b,u.r+Math.sqrt(u.x*u.x+u.y*u.y))}e.r=b;t.forEach(qo)}function Qo(e){e._pack_next=e._pack_prev=e}function qo(e){delete e._pack_next;delete e._pack_prev}function Xo(e,t,n,r){var i=e.children;e.x=t+=r*e.x;e.y=n+=r*e.y;e.r*=r;if(i){var a=-1,o=i.length;while(++a<o)Xo(i[a],t,n,r)}}function Ko(e,t,n){var r=e.r+n.r,i=t.x-e.x,a=t.y-e.y;if(r&&(i||a)){var o=t.r+n.r,s=i*i+a*a;o*=o;r*=r;var u=.5+(r-o)/(2*s),l=Math.sqrt(Math.max(0,2*o*(r+s)-(r-=s)*r-o*o))/(2*s);n.x=e.x+u*i+l*a;n.y=e.y+u*a-l*i}else{n.x=e.x+r;n.y=e.y}}a.layout.tree=function(){var e=a.layout.hierarchy().sort(null).value(null),t=Zo,n=[1,1],r=null;function i(i,a){var l=e.call(this,i,a),f=l[0],d=o(f);Ao(d,s),d.parent.m=-d.z;wo(d,u);if(r)wo(f,c);else{var p=f,h=f,g=f;wo(f,function(e){if(e.x<p.x)p=e;if(e.x>h.x)h=e;if(e.depth>g.depth)g=e});var m=t(p,h)/2-p.x,v=n[0]/(h.x+t(h,p)/2+m),y=n[1]/(g.depth||1);wo(f,function(e){e.x=(e.x+m)*v;e.y=e.depth*y})}return l}function o(e){var t={A:null,children:[e]},n=[t],r;while((r=n.pop())!=null){for(var i=r.children,a,o=0,s=i.length;o<s;++o){n.push((i[o]=a={_:i[o],parent:r,children:(a=i[o].children)&&a.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=a)}}return t.children[0]}function s(e){var n=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(n.length){ts(e);var a=(n[0].z+n[n.length-1].z)/2;if(i){e.z=i.z+t(e._,i._);e.m=e.z-a}else{e.z=a}}else if(i){e.z=i.z+t(e._,i._)}e.parent.A=l(e,i,e.parent.A||r[0])}function u(e){e._.x=e.z+e.parent.m;e.m+=e.parent.m}function l(e,n,r){if(n){var i=e,a=e,o=n,s=i.parent.children[0],u=i.m,l=a.m,c=o.m,f=s.m,d;while(o=$o(o),i=Jo(i),o&&i){s=Jo(s);a=$o(a);a.a=e;d=o.z+c-i.z-u+t(o._,i._);if(d>0){es(ns(o,e,r),e,d);u+=d;l+=d}c+=o.m;u+=i.m;f+=s.m;l+=a.m}if(o&&!$o(a)){a.t=o;a.m+=c-l}if(i&&!Jo(s)){s.t=i;s.m+=u-f;r=e}}return r}function c(e){e.x*=n[0];e.y=e.depth*n[1]}i.separation=function(e){if(!arguments.length)return t;t=e;return i};i.size=function(e){if(!arguments.length)return r?null:n;r=(n=e)==null?c:null;return i};i.nodeSize=function(e){if(!arguments.length)return r?n:null;r=(n=e)==null?null:c;return i};return xo(i,e)};function Zo(e,t){return e.parent==t.parent?1:2}function Jo(e){var t=e.children;return t.length?t[0]:e.t}function $o(e){var t=e.children,n;return(n=t.length)?t[n-1]:e.t}function es(e,t,n){var r=n/(t.i-e.i);t.c-=r;t.s+=n;e.c+=r;t.z+=n;t.m+=n}function ts(e){var t=0,n=0,r=e.children,i=r.length,a;while(--i>=0){a=r[i];a.z+=t;a.m+=t;t+=a.s+(n+=a.c)}}function ns(e,t,n){return e.a.parent===t.parent?e.a:n}a.layout.cluster=function(){var e=a.layout.hierarchy().sort(null).value(null),t=Zo,n=[1,1],r=false;function i(i,a){var o=e.call(this,i,a),s=o[0],u,l=0;Ao(s,function(e){var n=e.children;if(n&&n.length){e.x=is(n);e.y=rs(n)}else{e.x=u?l+=t(e,u):0;e.y=0;u=e}});var c=as(s),f=os(s),d=c.x-t(c,f)/2,p=f.x+t(f,c)/2;Ao(s,r?function(e){e.x=(e.x-s.x)*n[0];e.y=(s.y-e.y)*n[1]}:function(e){e.x=(e.x-d)/(p-d)*n[0];e.y=(1-(s.y?e.y/s.y:1))*n[1]});return o}i.separation=function(e){if(!arguments.length)return t;t=e;return i};i.size=function(e){if(!arguments.length)return r?null:n;r=(n=e)==null;return i};i.nodeSize=function(e){if(!arguments.length)return r?n:null;r=(n=e)!=null;return i};return xo(i,e)};function rs(e){return 1+a.max(e,function(e){return e.y})}function is(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function as(e){var t=e.children;return t&&t.length?as(t[0]):e}function os(e){var t=e.children,n;return t&&(n=t.length)?os(t[n-1]):e}a.layout.treemap=function(){var e=a.layout.hierarchy(),t=Math.round,n=[1,1],r=null,i=ss,o=false,s,u="squarify",l=.5*(1+Math.sqrt(5));function c(e,t){var n=-1,r=e.length,i,a;while(++n<r){a=(i=e[n]).value*(t<0?0:t);i.area=isNaN(a)||a<=0?0:a}}function f(e){var t=e.children;if(t&&t.length){var n=i(e),r=[],a=t.slice(),o,s=Infinity,l,d=u==="slice"?n.dx:u==="dice"?n.dy:u==="slice-dice"?e.depth&1?n.dy:n.dx:Math.min(n.dx,n.dy),g;c(a,n.dx*n.dy/e.value);r.area=0;while((g=a.length)>0){r.push(o=a[g-1]);r.area+=o.area;if(u!=="squarify"||(l=p(r,d))<=s){a.pop();s=l}else{r.area-=r.pop().area;h(r,d,n,false);d=Math.min(n.dx,n.dy);r.length=r.area=0;s=Infinity}}if(r.length){h(r,d,n,true);r.length=r.area=0}t.forEach(f)}}function d(e){var t=e.children;if(t&&t.length){var n=i(e),r=t.slice(),a,o=[];c(r,n.dx*n.dy/e.value);o.area=0;while(a=r.pop()){o.push(a);o.area+=a.area;if(a.z!=null){h(o,a.z?n.dx:n.dy,n,!r.length);o.length=o.area=0}}t.forEach(d)}}function p(e,t){var n=e.area,r,i=0,a=Infinity,o=-1,s=e.length;while(++o<s){if(!(r=e[o].area))continue;if(r<a)a=r;if(r>i)i=r}n*=n;t*=t;return n?Math.max(t*i*l/n,n/(t*a*l)):Infinity}function h(e,n,r,i){var a=-1,o=e.length,s=r.x,u=r.y,l=n?t(e.area/n):0,c;if(n==r.dx){if(i||l>r.dy)l=r.dy;while(++a<o){c=e[a];c.x=s;c.y=u;c.dy=l;s+=c.dx=Math.min(r.x+r.dx-s,l?t(c.area/l):0)}c.z=true;c.dx+=r.x+r.dx-s;r.y+=l;r.dy-=l}else{if(i||l>r.dx)l=r.dx;while(++a<o){c=e[a];c.x=s;c.y=u;c.dx=l;u+=c.dy=Math.min(r.y+r.dy-u,l?t(c.area/l):0)}c.z=false;c.dy+=r.y+r.dy-u;r.x+=l;r.dx-=l}}function g(t){var r=s||e(t),i=r[0];i.x=i.y=0;if(i.value)i.dx=n[0],i.dy=n[1];else i.dx=i.dy=0;if(s)e.revalue(i);c([i],i.dx*i.dy/i.value);(s?d:f)(i);if(o)s=r;return r}g.size=function(e){if(!arguments.length)return n;n=e;return g};g.padding=function(e){if(!arguments.length)return r;function t(t){var n=e.call(g,t,t.depth);return n==null?ss(t):us(t,typeof n==="number"?[n,n,n,n]:n)}function n(t){return us(t,e)}var a;i=(r=e)==null?ss:(a=typeof e)==="function"?t:a==="number"?(e=[e,e,e,e],n):n;return g};g.round=function(e){if(!arguments.length)return t!=Number;t=e?Math.round:Number;return g};g.sticky=function(e){if(!arguments.length)return o;o=e;s=null;return g};g.ratio=function(e){if(!arguments.length)return l;l=e;return g};g.mode=function(e){if(!arguments.length)return u;u=e+"";return g};return xo(g,e)};function ss(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function us(e,t){var n=e.x+t[3],r=e.y+t[0],i=e.dx-t[1]-t[3],a=e.dy-t[0]-t[2];if(i<0){n+=i/2;i=0}if(a<0){r+=a/2;a=0}return{x:n,y:r,dx:i,dy:a}}a.random={normal:function(e,t){var n=arguments.length;if(n<2)t=1;if(n<1)e=0;return function(){var n,r,i;do{n=Math.random()*2-1;r=Math.random()*2-1;i=n*n+r*r}while(!i||i>1);return e+t*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var e=a.random.normal.apply(a,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=a.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(e){return function(){for(var t=0,n=0;n<e;n++)t+=Math.random();return t}}};a.scale={};function ls(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function cs(e){return e.rangeExtent?e.rangeExtent():ls(e.range())}function fs(e,t,n,r){var i=n(e[0],e[1]),a=r(t[0],t[1]);return function(e){return a(i(e))}}function ds(e,t){var n=0,r=e.length-1,i=e[n],a=e[r],o;if(a<i){o=n,n=r,r=o;o=i,i=a,a=o}e[n]=t.floor(i);e[r]=t.ceil(a);return e}function ps(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:hs}var hs={floor:R,ceil:R};function gs(e,t,n,r){var i=[],o=[],s=0,u=Math.min(e.length,t.length)-1;if(e[u]<e[0]){e=e.slice().reverse();t=t.slice().reverse()}while(++s<=u){i.push(n(e[s-1],e[s]));o.push(r(t[s-1],t[s]))}return function(t){var n=a.bisect(e,t,1,u)-1;return o[n](i[n](t))}}a.scale.linear=function(){return ms([0,1],[0,1],Ia,false)};function ms(e,t,n,r){var i,a;function o(){var o=Math.min(e.length,t.length)>2?gs:fs,u=r?uo:so;i=o(e,t,u,n);a=o(t,e,u,Ia);return s}function s(e){return i(e)}s.invert=function(e){return a(e)};s.domain=function(t){if(!arguments.length)return e;e=t.map(Number);return o()};s.range=function(e){if(!arguments.length)return t;t=e;return o()};s.rangeRound=function(e){return s.range(e).interpolate(Xa)};s.clamp=function(e){if(!arguments.length)return r;r=e;return o()};s.interpolate=function(e){if(!arguments.length)return n;n=e;return o()};s.ticks=function(t){return Ms(e,t)};s.tickFormat=function(t,n){return xs(e,t,n)};s.nice=function(t){ys(e,t);return o()};s.copy=function(){return ms(e,t,n,r)};return o()}function vs(e,t){return a.rebind(e,t,"range","rangeRound","interpolate","clamp")}function ys(e,t){ds(e,ps(bs(e,t)[2]));ds(e,ps(bs(e,t)[2]));return e}function bs(e,t){if(t==null)t=10;var n=ls(e),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),a=t/r*i;if(a<=.15)i*=10;else if(a<=.35)i*=5;else if(a<=.75)i*=2;n[0]=Math.ceil(n[0]/i)*i;n[1]=Math.floor(n[1]/i)*i+i*.5;n[2]=i;return n}function Ms(e,t){return a.range.apply(a,bs(e,t))}function xs(e,t,n){var r=bs(e,t);if(n){var i=Ht.exec(n);i.shift();if(i[8]==="s"){var o=a.formatPrefix(Math.max(w(r[0]),w(r[1])));if(!i[7])i[7]="."+As(o.scale(r[2]));i[8]="f";n=a.format(i.join(""));return function(e){return n(o.scale(e))+o.symbol}}if(!i[7])i[7]="."+Ts(i[8],r);n=i.join("")}else{n=",."+As(r[2])+"f"}return a.format(n)}var ws={s:1,g:1,p:1,r:1,e:1};function As(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function Ts(e,t){var n=As(t[2]);return e in ws?Math.abs(n-As(Math.max(w(t[0]),w(t[1]))))+ +(e!=="e"):n-(e==="%")*2}a.scale.log=function(){return Cs(a.scale.linear().domain([0,1]),10,true,[1,10])};function Cs(e,t,n,r){function i(e){return(n?Math.log(e<0?0:e):-Math.log(e>0?0:-e))/Math.log(t)}function o(e){return n?Math.pow(t,e):-Math.pow(t,-e)}function s(t){return e(i(t))}s.invert=function(t){return o(e.invert(t))};s.domain=function(t){if(!arguments.length)return r;n=t[0]>=0;e.domain((r=t.map(Number)).map(i));return s};s.base=function(n){if(!arguments.length)return t;t=+n;e.domain(r.map(i));return s};s.nice=function(){var t=ds(r.map(i),n?Math:Ds);e.domain(t);r=t.map(o);return s};s.ticks=function(){var e=ls(r),a=[],s=e[0],u=e[1],l=Math.floor(i(s)),c=Math.ceil(i(u)),f=t%1?2:t;if(isFinite(c-l)){if(n){for(;l<c;l++)for(var d=1;d<f;d++)a.push(o(l)*d);a.push(o(l))}else{a.push(o(l));for(;l++<c;)for(var d=f-1;d>0;d--)a.push(o(l)*d)}for(l=0;a[l]<s;l++){}for(c=a.length;a[c-1]>u;c--){}a=a.slice(l,c)}return a};s.tickFormat=function(e,n){if(!arguments.length)return Ss;if(arguments.length<2)n=Ss;else if(typeof n!=="function")n=a.format(n);var r=Math.max(1,t*e/s.ticks().length);return function(e){var a=e/o(Math.round(i(e)));if(a*t<t-.5)a*=t;return a<=r?n(e):""}};s.copy=function(){return Cs(e.copy(),t,n,r)};return vs(s,e)}var Ss=a.format(".0e"),Ds={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};a.scale.pow=function(){return Is(a.scale.linear(),1,[0,1])};function Is(e,t,n){var r=Es(t),i=Es(1/t);function a(t){return e(r(t))}a.invert=function(t){return i(e.invert(t))};a.domain=function(t){if(!arguments.length)return n;e.domain((n=t.map(Number)).map(r));return a};a.ticks=function(e){return Ms(n,e)};a.tickFormat=function(e,t){return xs(n,e,t)};a.nice=function(e){return a.domain(ys(n,e))};a.exponent=function(o){if(!arguments.length)return t;r=Es(t=o);i=Es(1/t);e.domain(n.map(r));return a};a.copy=function(){return Is(e.copy(),t,n)};return vs(a,e)}function Es(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}a.scale.sqrt=function(){return a.scale.pow().exponent(.5)};a.scale.ordinal=function(){return Ns([],{t:"range",a:[[]]})};function Ns(e,t){var n,r,i;function o(i){return r[((n.get(i)||(t.t==="range"?n.set(i,e.push(i)):NaN))-1)%r.length]}function s(t,n){return a.range(e.length).map(function(e){return t+n*e})}o.domain=function(r){if(!arguments.length)return e;e=[];n=new C;var i=-1,a=r.length,s;while(++i<a)if(!n.has(s=r[i]))n.set(s,e.push(s));return o[t.t].apply(o,t.a)};o.range=function(e){if(!arguments.length)return r;r=e;i=0;t={t:"range",a:arguments};return o};o.rangePoints=function(n,a){if(arguments.length<2)a=0;var u=n[0],l=n[1],c=e.length<2?(u=(u+l)/2,0):(l-u)/(e.length-1+a);r=s(u+c*a/2,c);i=0;t={t:"rangePoints",a:arguments};return o};o.rangeRoundPoints=function(n,a){if(arguments.length<2)a=0;var u=n[0],l=n[1],c=e.length<2?(u=l=Math.round((u+l)/2),0):(l-u)/(e.length-1+a)|0;r=s(u+Math.round(c*a/2+(l-u-(e.length-1+a)*c)/2),c);i=0;t={t:"rangeRoundPoints",a:arguments};return o};o.rangeBands=function(n,a,u){if(arguments.length<2)a=0;if(arguments.length<3)u=a;var l=n[1]<n[0],c=n[l-0],f=n[1-l],d=(f-c)/(e.length-a+2*u);r=s(c+d*u,d);if(l)r.reverse();i=d*(1-a);t={t:"rangeBands",a:arguments};return o};o.rangeRoundBands=function(n,a,u){if(arguments.length<2)a=0;if(arguments.length<3)u=a;var l=n[1]<n[0],c=n[l-0],f=n[1-l],d=Math.floor((f-c)/(e.length-a+2*u));r=s(c+Math.round((f-c-(e.length-a)*d)/2),d);if(l)r.reverse();i=Math.round(d*(1-a));t={t:"rangeRoundBands",a:arguments};return o};o.rangeBand=function(){return i};o.rangeExtent=function(){return ls(t.a[0])};o.copy=function(){return Ns(e,t)};return o.domain(e)}a.scale.category10=function(){return a.scale.ordinal().range(Os)};a.scale.category20=function(){return a.scale.ordinal().range(_s)};a.scale.category20b=function(){return a.scale.ordinal().range(Ls)};a.scale.category20c=function(){return a.scale.ordinal().range(Ps)};var Os=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(yt);var _s=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(yt);var Ls=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(yt);var Ps=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(yt);a.scale.quantile=function(){return ks([],[])};function ks(e,t){var n;function r(){var r=0,o=t.length;n=[];while(++r<o)n[r-1]=a.quantile(e,r/o);return i}function i(e){if(!isNaN(e=+e))return t[a.bisect(n,e)]}i.domain=function(t){if(!arguments.length)return e;e=t.map(v).filter(y).sort(m);return r()};i.range=function(e){if(!arguments.length)return t;t=e;return r()};i.quantiles=function(){return n};i.invertExtent=function(r){r=t.indexOf(r);return r<0?[NaN,NaN]:[r>0?n[r-1]:e[0],r<n.length?n[r]:e[e.length-1]]};i.copy=function(){return ks(e,t)};return r()}a.scale.quantize=function(){return Rs(0,1,[0,1])};function Rs(e,t,n){var r,i;function a(t){return n[Math.max(0,Math.min(i,Math.floor(r*(t-e))))]}function o(){r=n.length/(t-e);i=n.length-1;return a}a.domain=function(n){if(!arguments.length)return[e,t];e=+n[0];t=+n[n.length-1];return o()};a.range=function(e){if(!arguments.length)return n;n=e;return o()};a.invertExtent=function(t){t=n.indexOf(t);t=t<0?NaN:t/r+e;return[t,t+1/r]};a.copy=function(){return Rs(e,t,n)};return o()}a.scale.threshold=function(){return js([.5],[0,1])};function js(e,t){function n(n){if(n<=n)return t[a.bisect(e,n)]}n.domain=function(t){if(!arguments.length)return e;e=t;return n};n.range=function(e){if(!arguments.length)return t;t=e;return n};n.invertExtent=function(n){n=t.indexOf(n);return[e[n-1],e[n]]};n.copy=function(){return js(e,t)};return n}a.scale.identity=function(){return Bs([0,1])};function Bs(e){function t(e){return+e}t.invert=t;t.domain=t.range=function(n){if(!arguments.length)return e;e=n.map(t);return t};t.ticks=function(t){return Ms(e,t)};t.tickFormat=function(t,n){return xs(e,t,n)};t.copy=function(){return Bs(e)};return t}a.svg={};function zs(){return 0}a.svg.arc=function(){var e=Vs,t=Us,n=zs,r=Fs,i=Gs,a=Ws,o=Hs;function s(){var s=Math.max(0,+e.apply(this,arguments)),l=Math.max(0,+t.apply(this,arguments)),c=i.apply(this,arguments)-ke,f=a.apply(this,arguments)-ke,d=Math.abs(f-c),p=c>f?0:1;if(l<s)h=l,l=s,s=h;if(d>=Pe)return u(l,p)+(s?u(s,1-p):"")+"Z";var h,g,m,v,y=0,b=0,M,x,w,A,T,C,S,D,I=[];if(v=(+o.apply(this,arguments)||0)/2){m=r===Fs?Math.sqrt(s*s+l*l):+r.apply(this,arguments);if(!p)b*=-1;if(l)b=Ve(m/l*Math.sin(v));if(s)y=Ve(m/s*Math.sin(v))}if(l){M=l*Math.cos(c+b);x=l*Math.sin(c+b);w=l*Math.cos(f-b);A=l*Math.sin(f-b);var E=Math.abs(f-c-2*b)<=_e?0:1;if(b&&Ys(M,x,w,A)===p^E){var N=(c+f)/2;M=l*Math.cos(N);x=l*Math.sin(N);w=A=null}}else{M=x=0}if(s){T=s*Math.cos(f-y);C=s*Math.sin(f-y);S=s*Math.cos(c+y);D=s*Math.sin(c+y);var O=Math.abs(c-f+2*y)<=_e?0:1;if(y&&Ys(T,C,S,D)===1-p^O){var _=(c+f)/2;T=s*Math.cos(_);C=s*Math.sin(_);S=D=null}}else{T=C=0}if(d>Ne&&(h=Math.min(Math.abs(l-s)/2,+n.apply(this,arguments)))>.001){g=s<l^p?0:1;var L=h,P=h;if(d<_e){var k=S==null?[T,C]:w==null?[M,x]:Li([M,x],[S,D],[w,A],[T,C]),R=M-k[0],j=x-k[1],B=w-k[0],z=A-k[1],F=1/Math.sin(Math.acos((R*B+j*z)/(Math.sqrt(R*R+j*j)*Math.sqrt(B*B+z*z)))/2),V=Math.sqrt(k[0]*k[0]+k[1]*k[1]);P=Math.min(h,(s-V)/(F-1));L=Math.min(h,(l-V)/(F+1))}if(w!=null){var U=Qs(S==null?[T,C]:[S,D],[M,x],l,L,p),G=Qs([w,A],[T,C],l,L,p);if(h===L){I.push("M",U[0],"A",L,",",L," 0 0,",g," ",U[1],"A",l,",",l," 0 ",1-p^Ys(U[1][0],U[1][1],G[1][0],G[1][1]),",",p," ",G[1],"A",L,",",L," 0 0,",g," ",G[0])}else{I.push("M",U[0],"A",L,",",L," 0 1,",g," ",G[0])}}else{I.push("M",M,",",x)}if(S!=null){var W=Qs([M,x],[S,D],s,-P,p),H=Qs([T,C],w==null?[M,x]:[w,A],s,-P,p);if(h===P){I.push("L",H[0],"A",P,",",P," 0 0,",g," ",H[1],"A",s,",",s," 0 ",p^Ys(H[1][0],H[1][1],W[1][0],W[1][1]),",",1-p," ",W[1],"A",P,",",P," 0 0,",g," ",W[0])}else{I.push("L",H[0],"A",P,",",P," 0 0,",g," ",W[0])}}else{I.push("L",T,",",C)}}else{I.push("M",M,",",x);if(w!=null)I.push("A",l,",",l," 0 ",E,",",p," ",w,",",A);I.push("L",T,",",C);if(S!=null)I.push("A",s,",",s," 0 ",O,",",1-p," ",S,",",D)}I.push("Z");return I.join("")}function u(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}s.innerRadius=function(t){if(!arguments.length)return e;e=Dt(t);return s};s.outerRadius=function(e){if(!arguments.length)return t;t=Dt(e);return s};s.cornerRadius=function(e){if(!arguments.length)return n;n=Dt(e);return s};s.padRadius=function(e){if(!arguments.length)return r;r=e==Fs?Fs:Dt(e);return s};s.startAngle=function(e){if(!arguments.length)return i;i=Dt(e);return s};s.endAngle=function(e){if(!arguments.length)return a;a=Dt(e);return s};s.padAngle=function(e){if(!arguments.length)return o;o=Dt(e);return s};s.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-ke;return[Math.cos(r)*n,Math.sin(r)*n]};return s};var Fs="auto";function Vs(e){return e.innerRadius}function Us(e){return e.outerRadius}function Gs(e){return e.startAngle}function Ws(e){return e.endAngle}function Hs(e){return e&&e.padAngle}function Ys(e,t,n,r){return(e-n)*t-(t-r)*e>0?0:1}function Qs(e,t,n,r,i){var a=e[0]-t[0],o=e[1]-t[1],s=(i?r:-r)/Math.sqrt(a*a+o*o),u=s*o,l=-s*a,c=e[0]+u,f=e[1]+l,d=t[0]+u,p=t[1]+l,h=(c+d)/2,g=(f+p)/2,m=d-c,v=p-f,y=m*m+v*v,b=n-r,M=c*p-d*f,x=(v<0?-1:1)*Math.sqrt(Math.max(0,b*b*y-M*M)),w=(M*v-m*x)/y,A=(-M*m-v*x)/y,T=(M*v+m*x)/y,C=(-M*m+v*x)/y,S=w-h,D=A-g,I=T-h,E=C-g;if(S*S+D*D>I*I+E*E)w=T,A=C;return[[w-u,A-l],[w*n/b,A*n/b]]}function qs(e){var t=Di,n=Ii,r=cr,i=Ks,a=i.key,o=.7;function s(a){var s=[],u=[],l=-1,c=a.length,f,d=Dt(t),p=Dt(n);function h(){s.push("M",i(e(u),o))}while(++l<c){if(r.call(this,f=a[l],l)){u.push([+d.call(this,f,l),+p.call(this,f,l)])}else if(u.length){h();u=[]}}if(u.length)h();return s.length?s.join(""):null}s.x=function(e){if(!arguments.length)return t;t=e;return s};s.y=function(e){if(!arguments.length)return n;n=e;return s};s.defined=function(e){if(!arguments.length)return r;r=e;return s};s.interpolate=function(e){if(!arguments.length)return a;if(typeof e==="function")a=i=e;else a=(i=Xs.get(e)||Ks).key;return s};s.tension=function(e){if(!arguments.length)return o;o=e;return s};return s}a.svg.line=function(){return qs(R)};var Xs=a.map({linear:Ks,"linear-closed":Zs,step:Js,"step-before":$s,"step-after":eu,basis:ou,"basis-open":su,"basis-closed":uu,bundle:lu,cardinal:ru,"cardinal-open":tu,"cardinal-closed":nu,monotone:yu});Xs.forEach(function(e,t){t.key=e;t.closed=/-closed$/.test(e)});function Ks(e){return e.length>1?e.join("L"):e+"Z"}function Zs(e){return e.join("L")+"Z"}function Js(e){var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];while(++t<n)i.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1]);if(n>1)i.push("H",r[0]);return i.join("")}function $s(e){var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];while(++t<n)i.push("V",(r=e[t])[1],"H",r[0]);return i.join("")}function eu(e){var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];while(++t<n)i.push("H",(r=e[t])[0],"V",r[1]);return i.join("")}function tu(e,t){return e.length<4?Ks(e):e[1]+iu(e.slice(1,-1),au(e,t))}function nu(e,t){return e.length<3?Zs(e):e[0]+iu((e.push(e[0]),e),au([e[e.length-2]].concat(e,[e[1]]),t))}function ru(e,t){return e.length<3?Ks(e):e[0]+iu(e,au(e,t))}function iu(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2){return Ks(e)}var n=e.length!=t.length,r="",i=e[0],a=e[1],o=t[0],s=o,u=1;if(n){r+="Q"+(a[0]-o[0]*2/3)+","+(a[1]-o[1]*2/3)+","+a[0]+","+a[1];i=e[1];u=2}if(t.length>1){s=t[1];a=e[u];u++;r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1];for(var l=2;l<t.length;l++,u++){a=e[u];s=t[l];r+="S"+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1]}}if(n){var c=e[u];r+="Q"+(a[0]+s[0]*2/3)+","+(a[1]+s[1]*2/3)+","+c[0]+","+c[1]}return r}function au(e,t){var n=[],r=(1-t)/2,i,a=e[0],o=e[1],s=1,u=e.length;while(++s<u){i=a;a=o;o=e[s];n.push([r*(o[0]-i[0]),r*(o[1]-i[1])])}return n}function ou(e){if(e.length<3)return Ks(e);var t=1,n=e.length,r=e[0],i=r[0],a=r[1],o=[i,i,i,(r=e[1])[0]],s=[a,a,a,r[1]],u=[i,",",a,"L",cu(pu,o),",",cu(pu,s)];e.push(e[n-1]);while(++t<=n){r=e[t];o.shift();o.push(r[0]);s.shift();s.push(r[1]);hu(u,o,s)}e.pop();u.push("L",r);return u.join("")}function su(e){if(e.length<4)return Ks(e);var t=[],n=-1,r=e.length,i,a=[0],o=[0];while(++n<3){i=e[n];a.push(i[0]);o.push(i[1])}t.push(cu(pu,a)+","+cu(pu,o));--n;while(++n<r){i=e[n];a.shift();a.push(i[0]);o.shift();o.push(i[1]);hu(t,a,o)}return t.join("")}function uu(e){var t,n=-1,r=e.length,i=r+4,a,o=[],s=[];while(++n<4){a=e[n%r];o.push(a[0]);s.push(a[1])}t=[cu(pu,o),",",cu(pu,s)];--n;while(++n<i){a=e[n%r];o.shift();o.push(a[0]);s.shift();s.push(a[1]);hu(t,o,s)}return t.join("")}function lu(e,t){var n=e.length-1;if(n){var r=e[0][0],i=e[0][1],a=e[n][0]-r,o=e[n][1]-i,s=-1,u,l;while(++s<=n){u=e[s];l=s/n;u[0]=t*u[0]+(1-t)*(r+l*a);u[1]=t*u[1]+(1-t)*(i+l*o)}}return ou(e)}function cu(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}var fu=[0,2/3,1/3,0],du=[0,1/3,2/3,0],pu=[0,1/6,2/3,1/6];function hu(e,t,n){e.push("C",cu(fu,t),",",cu(fu,n),",",cu(du,t),",",cu(du,n),",",cu(pu,t),",",cu(pu,n))}function gu(e,t){return(t[1]-e[1])/(t[0]-e[0])}function mu(e){var t=0,n=e.length-1,r=[],i=e[0],a=e[1],o=r[0]=gu(i,a);while(++t<n){r[t]=(o+(o=gu(i=a,a=e[t+1])))/2}r[t]=o;return r}function vu(e){var t=[],n,r,i,a,o=mu(e),s=-1,u=e.length-1;while(++s<u){n=gu(e[s],e[s+1]);if(w(n)<Ne){o[s]=o[s+1]=0}else{r=o[s]/n;i=o[s+1]/n;a=r*r+i*i;if(a>9){a=n*3/Math.sqrt(a);o[s]=a*r;o[s+1]=a*i}}}s=-1;while(++s<=u){a=(e[Math.min(u,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s]));t.push([a||0,o[s]*a||0])}return t}function yu(e){return e.length<3?Ks(e):e[0]+iu(e,vu(e))}a.svg.line.radial=function(){var e=qs(bu);e.radius=e.x,delete e.x;e.angle=e.y,delete e.y;return e};function bu(e){var t,n=-1,r=e.length,i,a;while(++n<r){t=e[n];i=t[0];a=t[1]-ke;t[0]=i*Math.cos(a);t[1]=i*Math.sin(a)}return e}function Mu(e){var t=Di,n=Di,r=0,i=Ii,a=cr,o=Ks,s=o.key,u=o,l="L",c=.7;function f(s){var f=[],d=[],p=[],h=-1,g=s.length,m,v=Dt(t),y=Dt(r),b=t===n?function(){return x}:Dt(n),M=r===i?function(){return w}:Dt(i),x,w;function A(){f.push("M",o(e(p),c),l,u(e(d.reverse()),c),"Z")}while(++h<g){if(a.call(this,m=s[h],h)){d.push([x=+v.call(this,m,h),w=+y.call(this,m,h)]);p.push([+b.call(this,m,h),+M.call(this,m,h)])}else if(d.length){A();d=[];p=[]}}if(d.length)A();return f.length?f.join(""):null}f.x=function(e){if(!arguments.length)return n;t=n=e;return f};f.x0=function(e){if(!arguments.length)return t;t=e;return f};f.x1=function(e){if(!arguments.length)return n;n=e;return f};f.y=function(e){if(!arguments.length)return i;r=i=e;return f};f.y0=function(e){if(!arguments.length)return r;r=e;return f};f.y1=function(e){if(!arguments.length)return i;i=e;return f};f.defined=function(e){if(!arguments.length)return a;a=e;return f};f.interpolate=function(e){if(!arguments.length)return s;if(typeof e==="function")s=o=e;else s=(o=Xs.get(e)||Ks).key;u=o.reverse||o;l=o.closed?"M":"L";return f};f.tension=function(e){if(!arguments.length)return c;c=e;return f};return f}$s.reverse=eu;eu.reverse=$s;a.svg.area=function(){return Mu(R)};a.svg.area.radial=function(){var e=Mu(bu);e.radius=e.x,delete e.x;e.innerRadius=e.x0,delete e.x0;e.outerRadius=e.x1,delete e.x1;e.angle=e.y,delete e.y;e.startAngle=e.y0,delete e.y0;e.endAngle=e.y1,delete e.y1;return e};a.svg.chord=function(){var e=ci,t=fi,n=xu,r=Gs,i=Ws;function a(n,r){var i=o(this,e,n,r),a=o(this,t,n,r);return"M"+i.p0+u(i.r,i.p1,i.a1-i.a0)+(s(i,a)?l(i.r,i.p1,i.r,i.p0):l(i.r,i.p1,a.r,a.p0)+u(a.r,a.p1,a.a1-a.a0)+l(a.r,a.p1,i.r,i.p0))+"Z"}function o(e,t,a,o){var s=t.call(e,a,o),u=n.call(e,s,o),l=r.call(e,s,o)-ke,c=i.call(e,s,o)-ke;return{r:u,a0:l,a1:c,p0:[u*Math.cos(l),u*Math.sin(l)],p1:[u*Math.cos(c),u*Math.sin(c)]}}function s(e,t){return e.a0==t.a0&&e.a1==t.a1}function u(e,t,n){return"A"+e+","+e+" 0 "+ +(n>_e)+",1 "+t}function l(e,t,n,r){return"Q 0,0 "+r}a.radius=function(e){if(!arguments.length)return n;n=Dt(e);return a};a.source=function(t){if(!arguments.length)return e;e=Dt(t);return a};a.target=function(e){if(!arguments.length)return t;t=Dt(e);return a};a.startAngle=function(e){if(!arguments.length)return r;r=Dt(e);return a};a.endAngle=function(e){if(!arguments.length)return i;i=Dt(e);return a};return a};function xu(e){return e.radius}a.svg.diagonal=function(){var e=ci,t=fi,n=wu;function r(r,i){var a=e.call(this,r,i),o=t.call(this,r,i),s=(a.y+o.y)/2,u=[a,{x:a.x,y:s},{x:o.x,y:s},o];u=u.map(n);return"M"+u[0]+"C"+u[1]+" "+u[2]+" "+u[3]}r.source=function(t){if(!arguments.length)return e;e=Dt(t);return r};r.target=function(e){if(!arguments.length)return t;t=Dt(e);return r};r.projection=function(e){if(!arguments.length)return n;n=e;return r};return r};function wu(e){return[e.x,e.y]}a.svg.diagonal.radial=function(){var e=a.svg.diagonal(),t=wu,n=e.projection;e.projection=function(e){return arguments.length?n(Au(t=e)):t};return e};function Au(e){return function(){var t=e.apply(this,arguments),n=t[0],r=t[1]-ke;return[n*Math.cos(r),n*Math.sin(r)]}}a.svg.symbol=function(){var e=Cu,t=Tu;function n(n,r){return(Du.get(e.call(this,n,r))||Su)(t.call(this,n,r))}n.type=function(t){if(!arguments.length)return e;e=Dt(t);return n};n.size=function(e){if(!arguments.length)return t;t=Dt(e);return n};return n};function Tu(){return 64}function Cu(){return"circle"}function Su(e){var t=Math.sqrt(e/_e);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}var Du=a.map({circle:Su,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Eu)),n=t*Eu;return"M0,"+-t+"L"+n+",0"+" 0,"+t+" "+-n+",0"+"Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Iu),n=t*Iu/2;return"M0,"+n+"L"+t+","+-n+" "+-t+","+-n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Iu),n=t*Iu/2;return"M0,"+-n+"L"+t+","+n+" "+-t+","+n+"Z"}});a.svg.symbolTypes=Du.keys();var Iu=Math.sqrt(3),Eu=Math.tan(30*Re);J.transition=function(e){var t=ku||++Pu,n=zu(e),r=[],i,a,o=Ru||{time:Date.now(),ease:Ba,delay:0,duration:250};for(var s=-1,u=this.length;++s<u;){r.push(i=[]);for(var l=this[s],c=-1,f=l.length;++c<f;){if(a=l[c])Fu(a,c,n,t,o);i.push(a)}}return _u(r,n,t)};J.interrupt=function(e){return this.each(e==null?Nu:Ou(zu(e)))};var Nu=Ou(zu());function Ou(e){return function(){var t,n,r;if((t=this[e])&&(r=t[n=t.active])){r.timer.c=null;r.timer.t=NaN;if(--t.count)delete t[n];else delete this[e];t.active+=.5;r.event&&r.event.interrupt.call(this,this.__data__,r.index)}}}function _u(e,t,n){Q(e,Lu);e.namespace=t;e.id=n;return e}var Lu=[],Pu=0,ku,Ru;Lu.call=J.call;Lu.empty=J.empty;Lu.node=J.node;Lu.size=J.size;a.transition=function(e,t){return e&&e.transition?ku?e.transition(t):e:a.selection().transition(e)};a.transition.prototype=Lu;Lu.select=function(e){var t=this.id,n=this.namespace,r=[],i,a,o;e=$(e);for(var s=-1,u=this.length;++s<u;){r.push(i=[]);for(var l=this[s],c=-1,f=l.length;++c<f;){if((o=l[c])&&(a=e.call(o,o.__data__,c,s))){if("__data__"in o)a.__data__=o.__data__;Fu(a,c,n,t,o[n][t]);i.push(a)}else{i.push(null)}}}return _u(r,n,t)};Lu.selectAll=function(e){var t=this.id,n=this.namespace,r=[],i,a,o,s,u;e=ee(e);for(var l=-1,c=this.length;++l<c;){for(var f=this[l],d=-1,p=f.length;++d<p;){if(o=f[d]){u=o[n][t];a=e.call(o,o.__data__,d,l);r.push(i=[]);for(var h=-1,g=a.length;++h<g;){if(s=a[h])Fu(s,h,n,t,u);i.push(s)}}}}return _u(r,n,t)};Lu.filter=function(e){var t=[],n,r,i;if(typeof e!=="function")e=he(e);for(var a=0,o=this.length;a<o;a++){t.push(n=[]);for(var r=this[a],s=0,u=r.length;s<u;s++){if((i=r[s])&&e.call(i,i.__data__,s,a)){n.push(i)}}}return _u(t,this.namespace,this.id)};Lu.tween=function(e,t){var n=this.id,r=this.namespace;if(arguments.length<2)return this.node()[r][n].tween.get(e);return me(this,t==null?function(t){t[r][n].tween.remove(e)}:function(i){i[r][n].tween.set(e,t)})};function ju(e,t,n,r){var i=e.id,a=e.namespace;return me(e,typeof n==="function"?function(e,o,s){e[a][i].tween.set(t,r(n.call(e,e.__data__,o,s)))}:(n=r(n),function(e){e[a][i].tween.set(t,n)}))}Lu.attr=function(e,t){if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var n=e=="transform"?oo:Ia,r=a.ns.qualify(e);function i(){this.removeAttribute(r)}function o(){this.removeAttributeNS(r.space,r.local)}function s(e){return e==null?i:(e+="",function(){var t=this.getAttribute(r),i;return t!==e&&(i=n(t,e),function(e){this.setAttribute(r,i(e))})})}function u(e){return e==null?o:(e+="",function(){var t=this.getAttributeNS(r.space,r.local),i;return t!==e&&(i=n(t,e),function(e){this.setAttributeNS(r.space,r.local,i(e))})})}return ju(this,"attr."+e,t,r.local?u:s)};Lu.attrTween=function(e,t){var n=a.ns.qualify(e);function r(e,r){var i=t.call(this,e,r,this.getAttribute(n));return i&&function(e){this.setAttribute(n,i(e))}}function i(e,r){var i=t.call(this,e,r,this.getAttributeNS(n.space,n.local));return i&&function(e){this.setAttributeNS(n.space,n.local,i(e))}}return this.tween("attr."+e,n.local?i:r)};Lu.style=function(e,t,n){var r=arguments.length;if(r<3){if(typeof e!=="string"){if(r<2)t="";for(n in e)this.style(n,e[n],t);return this}n=""}function i(){this.style.removeProperty(e)}function a(t){return t==null?i:(t+="",function(){var r=c(this).getComputedStyle(this,null).getPropertyValue(e),i;return r!==t&&(i=Ia(r,t),function(t){this.style.setProperty(e,i(t),n)})})}return ju(this,"style."+e,t,a)};Lu.styleTween=function(e,t,n){if(arguments.length<3)n="";function r(r,i){var a=t.call(this,r,i,c(this).getComputedStyle(this,null).getPropertyValue(e));return a&&function(t){this.style.setProperty(e,a(t),n)}}return this.tween("style."+e,r)};Lu.text=function(e){return ju(this,"text",e,Bu)};function Bu(e){if(e==null)e="";return function(){this.textContent=e}}Lu.remove=function(){var e=this.namespace;return this.each("end.transition",function(){var t;if(this[e].count<2&&(t=this.parentNode))t.removeChild(this)})};Lu.ease=function(e){var t=this.id,n=this.namespace;if(arguments.length<1)return this.node()[n][t].ease;if(typeof e!=="function")e=a.ease.apply(a,arguments);return me(this,function(r){r[n][t].ease=e})};Lu.delay=function(e){var t=this.id,n=this.namespace;if(arguments.length<1)return this.node()[n][t].delay;return me(this,typeof e==="function"?function(r,i,a){r[n][t].delay=+e.call(r,r.__data__,i,a)}:(e=+e,function(r){r[n][t].delay=e}))};Lu.duration=function(e){var t=this.id,n=this.namespace;if(arguments.length<1)return this.node()[n][t].duration;return me(this,typeof e==="function"?function(r,i,a){r[n][t].duration=Math.max(1,e.call(r,r.__data__,i,a))}:(e=Math.max(1,e),function(r){r[n][t].duration=e}))};Lu.each=function(e,t){var n=this.id,r=this.namespace;if(arguments.length<2){var i=Ru,o=ku;try{ku=n;me(this,function(t,i,a){Ru=t[r][n];e.call(t,t.__data__,i,a)})}finally{Ru=i;ku=o}}else{me(this,function(i){var o=i[r][n];(o.event||(o.event=a.dispatch("start","end","interrupt"))).on(e,t)})}return this};Lu.transition=function(){var e=this.id,t=++Pu,n=this.namespace,r=[],i,a,o,s;for(var u=0,l=this.length;u<l;u++){r.push(i=[]);for(var a=this[u],c=0,f=a.length;c<f;c++){if(o=a[c]){s=o[n][e];Fu(o,c,n,t,{time:s.time,ease:s.ease,delay:s.delay+s.duration,duration:s.duration})}i.push(o)}}return _u(r,n,t)};function zu(e){return e==null?"__transition__":"__transition_"+e+"__"}function Fu(e,t,n,r,i){var a=e[n]||(e[n]={active:0,count:0}),o=a[r],s,u,l,c,f;function d(e){var t=o.delay;u.t=t+s;if(t<=e)return p(e-t);u.c=p}function p(n){var i=a.active,d=a[i];if(d){d.timer.c=null;d.timer.t=NaN;--a.count;delete a[i];d.event&&d.event.interrupt.call(e,e.__data__,d.index)}for(var p in a){if(+p<r){var g=a[p];g.timer.c=null;g.timer.t=NaN;--a.count;delete a[p]}}u.c=h;jt(function(){if(u.c&&h(n||1)){u.c=null;u.t=NaN}return 1},0,s);a.active=r;o.event&&o.event.start.call(e,e.__data__,t);f=[];o.tween.forEach(function(n,r){if(r=r.call(e,e.__data__,t)){f.push(r)}});c=o.ease;l=o.duration}function h(i){var s=i/l,u=c(s),d=f.length;while(d>0){f[--d].call(e,u)}if(s>=1){o.event&&o.event.end.call(e,e.__data__,t);if(--a.count)delete a[r];else delete e[n];return 1}}if(!o){s=i.time;u=jt(d,0,s);o=a[r]={tween:new C,time:s,timer:u,delay:i.delay,duration:i.duration,ease:i.ease,index:t};i=null;++a.count}}a.svg.axis=function(){var e=a.scale.linear(),t=Vu,n=6,r=6,i=3,o=[10],u=null,l;function c(s){s.each(function(){var s=a.select(this);var c=this.__chart__||e,f=this.__chart__=e.copy();var d=u==null?f.ticks?f.ticks.apply(f,o):f.domain():u,p=l==null?f.tickFormat?f.tickFormat.apply(f,o):R:l,h=s.selectAll(".tick").data(d,f),g=h.enter().insert("g",".domain").attr("class","tick").style("opacity",Ne),m=a.transition(h.exit()).style("opacity",Ne).remove(),v=a.transition(h.order()).style("opacity",1),y=Math.max(n,0)+i,b;var M=cs(f),x=s.selectAll(".domain").data([0]),w=(x.enter().append("path").attr("class","domain"),a.transition(x));g.append("line");g.append("text");var A=g.select("line"),T=v.select("line"),C=h.select("text").text(p),S=g.select("text"),D=v.select("text"),I=t==="top"||t==="left"?-1:1,E,N,O,_;if(t==="bottom"||t==="top"){b=Gu,E="x",O="y",N="x2",_="y2";C.attr("dy",I<0?"0em":".71em").style("text-anchor","middle");w.attr("d","M"+M[0]+","+I*r+"V0H"+M[1]+"V"+I*r)}else{b=Wu,E="y",O="x",N="y2",_="x2";C.attr("dy",".32em").style("text-anchor",I<0?"end":"start");w.attr("d","M"+I*r+","+M[0]+"H0V"+M[1]+"H"+I*r)}A.attr(_,I*n);S.attr(O,I*y);T.attr(N,0).attr(_,I*n);D.attr(E,0).attr(O,I*y);if(f.rangeBand){var L=f,P=L.rangeBand()/2;c=f=function(e){return L(e)+P}}else if(c.rangeBand){c=f}else{m.call(b,f,c)}g.call(b,c,f);v.call(b,f,f)})}c.scale=function(t){if(!arguments.length)return e;e=t;return c};c.orient=function(e){if(!arguments.length)return t;t=e in Uu?e+"":Vu;return c};c.ticks=function(){if(!arguments.length)return o;o=s(arguments);return c};c.tickValues=function(e){if(!arguments.length)return u;u=e;return c};c.tickFormat=function(e){if(!arguments.length)return l;l=e;return c};c.tickSize=function(e){var t=arguments.length;if(!t)return n;n=+e;r=+arguments[t-1];return c};c.innerTickSize=function(e){if(!arguments.length)return n;n=+e;return c};c.outerTickSize=function(e){if(!arguments.length)return r;r=+e;return c};c.tickPadding=function(e){if(!arguments.length)return i;i=+e;return c};c.tickSubdivide=function(){return arguments.length&&c};return c};var Vu="bottom",Uu={top:1,right:1,bottom:1,left:1};function Gu(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate("+(isFinite(r)?r:n(e))+",0)"})}function Wu(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate(0,"+(isFinite(r)?r:n(e))+")"})}a.svg.brush=function(){var e=H(d,"brushstart","brush","brushend"),t=null,n=null,r=[0,0],i=[0,0],o,s,u=true,l=true,f=Yu[0];function d(e){e.each(function(){var e=a.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",m).on("touchstart.brush",m);var r=e.selectAll(".background").data([0]);r.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var i=e.selectAll(".resize").data(f,R);i.exit().remove();i.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Hu[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");i.style("display",d.empty()?"none":null);var o=a.transition(e),s=a.transition(r),u;if(t){u=cs(t);s.attr("x",u[0]).attr("width",u[1]-u[0]);h(o)}if(n){u=cs(n);s.attr("y",u[0]).attr("height",u[1]-u[0]);g(o)}p(o)})}d.event=function(t){t.each(function(){var t=e.of(this,arguments),n={x:r,y:i,i:o,j:s},u=this.__chart__||n;this.__chart__=n;if(ku){a.select(this).transition().each("start.brush",function(){o=u.i;s=u.j;r=u.x;i=u.y;t({type:"brushstart"})}).tween("brush:brush",function(){var e=Ea(r,n.x),a=Ea(i,n.y);o=s=null;return function(o){r=n.x=e(o);i=n.y=a(o);t({type:"brush",mode:"resize"})}}).each("end.brush",function(){o=n.i;s=n.j;t({type:"brush",mode:"resize"});t({type:"brushend"})})}else{t({type:"brushstart"});t({type:"brush",mode:"resize"});t({type:"brushend"})}})};function p(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+r[+/e$/.test(e)]+","+i[+/^s/.test(e)]+")"})}function h(e){e.select(".extent").attr("x",r[0]);e.selectAll(".extent,.n>rect,.s>rect").attr("width",r[1]-r[0])}function g(e){e.select(".extent").attr("y",i[0]);e.selectAll(".extent,.e>rect,.w>rect").attr("height",i[1]-i[0])}function m(){var f=this,m=a.select(a.event.target),v=e.of(f,arguments),y=a.select(f),b=m.datum(),M=!/^(n|s)$/.test(b)&&t,x=!/^(e|w)$/.test(b)&&n,w=m.classed("extent"),A=Se(f),T,C=a.mouse(f),S;var D=a.select(c(f)).on("keydown.brush",N).on("keyup.brush",O);if(a.event.changedTouches){D.on("touchmove.brush",_).on("touchend.brush",P)}else{D.on("mousemove.brush",_).on("mouseup.brush",P)}y.interrupt().selectAll("*").interrupt();if(w){C[0]=r[0]-C[0];C[1]=i[0]-C[1]}else if(b){var I=+/w$/.test(b),E=+/^n/.test(b);S=[r[1-I]-C[0],i[1-E]-C[1]];C[0]=r[I];C[1]=i[E]}else if(a.event.altKey)T=C.slice();y.style("pointer-events","none").selectAll(".resize").style("display",null);a.select("body").style("cursor",m.style("cursor"));v({type:"brushstart"});_();function N(){if(a.event.keyCode==32){if(!w){T=null;C[0]-=r[1];C[1]-=i[1];w=2}G()}}function O(){if(a.event.keyCode==32&&w==2){C[0]+=r[1];C[1]+=i[1];w=0;G()}}function _(){var e=a.mouse(f),o=false;if(S){e[0]+=S[0];e[1]+=S[1]}if(!w){if(a.event.altKey){if(!T)T=[(r[0]+r[1])/2,(i[0]+i[1])/2];C[0]=r[+(e[0]<T[0])];C[1]=i[+(e[1]<T[1])]}else T=null}if(M&&L(e,t,0)){h(y);o=true}if(x&&L(e,n,1)){g(y);o=true}if(o){p(y);v({type:"brush",mode:w?"move":"resize"})}}function L(e,t,n){var a=cs(t),c=a[0],f=a[1],d=C[n],p=n?i:r,h=p[1]-p[0],g,m;if(w){c-=d;f-=h+d}g=(n?l:u)?Math.max(c,Math.min(f,e[n])):e[n];if(w){m=(g+=d)+h}else{if(T)d=Math.max(c,Math.min(f,2*T[n]-g));if(d<g){m=g;g=d}else{m=d}}if(p[0]!=g||p[1]!=m){if(n)s=null;else o=null;p[0]=g;p[1]=m;return true}}function P(){_();y.style("pointer-events","all").selectAll(".resize").style("display",d.empty()?"none":null);a.select("body").style("cursor",null);D.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);A();v({type:"brushend"})}}d.x=function(e){if(!arguments.length)return t;t=e;f=Yu[!t<<1|!n];return d};d.y=function(e){if(!arguments.length)return n;n=e;f=Yu[!t<<1|!n];return d};d.clamp=function(e){if(!arguments.length)return t&&n?[u,l]:t?u:n?l:null;if(t&&n)u=!!e[0],l=!!e[1];else if(t)u=!!e;else if(n)l=!!e;return d};d.extent=function(e){var a,u,l,c,f;if(!arguments.length){if(t){if(o){a=o[0],u=o[1]}else{a=r[0],u=r[1];if(t.invert)a=t.invert(a),u=t.invert(u);if(u<a)f=a,a=u,u=f}}if(n){if(s){l=s[0],c=s[1]}else{l=i[0],c=i[1];if(n.invert)l=n.invert(l),c=n.invert(c);if(c<l)f=l,l=c,c=f}}return t&&n?[[a,l],[u,c]]:t?[a,u]:n&&[l,c]}if(t){a=e[0],u=e[1];if(n)a=a[0],u=u[0];o=[a,u];if(t.invert)a=t(a),u=t(u);if(u<a)f=a,a=u,u=f;if(a!=r[0]||u!=r[1])r=[a,u]}if(n){l=e[0],c=e[1];if(t)l=l[1],c=c[1];s=[l,c];if(n.invert)l=n(l),c=n(c);if(c<l)f=l,l=c,c=f;if(l!=i[0]||c!=i[1])i=[l,c]}return d};d.clear=function(){if(!d.empty()){r=[0,0],i=[0,0];o=s=null}return d};d.empty=function(){return!!t&&r[0]==r[1]||!!n&&i[0]==i[1]};return a.rebind(d,e,"on")};var Hu={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"};var Yu=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];var Qu=qt.format=Cn.timeFormat;var qu=Qu.utc;var Xu=qu("%Y-%m-%dT%H:%M:%S.%LZ");Qu.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Ku:Xu;function Ku(e){return e.toISOString()}Ku.parse=function(e){var t=new Date(e);return isNaN(t)?null:t};Ku.toString=Xu.toString;qt.second=Jt(function(e){return new Xt(Math.floor(e/1e3)*1e3)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*1e3)},function(e){return e.getSeconds()});qt.seconds=qt.second.range;qt.seconds.utc=qt.second.utc.range;qt.minute=Jt(function(e){return new Xt(Math.floor(e/6e4)*6e4)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*6e4)},function(e){return e.getMinutes()});qt.minutes=qt.minute.range;qt.minutes.utc=qt.minute.utc.range;qt.hour=Jt(function(e){var t=e.getTimezoneOffset()/60;return new Xt((Math.floor(e/36e5-t)+t)*36e5)},function(e,t){e.setTime(e.getTime()+Math.floor(t)*36e5)},function(e){return e.getHours()});qt.hours=qt.hour.range;qt.hours.utc=qt.hour.utc.range;qt.month=Jt(function(e){e=qt.day(e);e.setDate(1);return e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()});qt.months=qt.month.range;qt.months.utc=qt.month.utc.range;function Zu(e,t,n){function r(t){return e(t)}r.invert=function(t){return Ju(e.invert(t))};r.domain=function(t){if(!arguments.length)return e.domain().map(Ju);e.domain(t);return r};function i(e,n){var r=e[1]-e[0],i=r/n,o=a.bisect($u,i);return o==$u.length?[t.year,bs(e.map(function(e){return e/31536e6}),n)[2]]:!o?[nl,bs(e,n)[2]]:t[i/$u[o-1]<$u[o]/i?o-1:o]}r.nice=function(e,t){var n=r.domain(),a=ls(n),o=e==null?i(a,10):typeof e==="number"&&i(a,e);if(o)e=o[0],t=o[1];function s(n){return!isNaN(n)&&!e.range(n,Ju(+n+1),t).length}return r.domain(ds(n,t>1?{floor:function(t){while(s(t=e.floor(t)))t=Ju(t-1);return t},ceil:function(t){while(s(t=e.ceil(t)))t=Ju(+t+1);return t}}:e))};r.ticks=function(e,t){var n=ls(r.domain()),a=e==null?i(n,10):typeof e==="number"?i(n,e):!e.range&&[{range:e},t];if(a)e=a[0],t=a[1];return e.range(n[0],Ju(+n[1]+1),t<1?1:t)};r.tickFormat=function(){return n};r.copy=function(){return Zu(e.copy(),t,n)};return vs(r,e)}function Ju(e){return new Date(e)}var $u=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6];var el=[[qt.second,1],[qt.second,5],[qt.second,15],[qt.second,30],[qt.minute,1],[qt.minute,5],[qt.minute,15],[qt.minute,30],[qt.hour,1],[qt.hour,3],[qt.hour,6],[qt.hour,12],[qt.day,1],[qt.day,2],[qt.week,1],[qt.month,1],[qt.month,3],[qt.year,1]];var tl=Qu.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&e.getDate()!=1}],["%b %d",function(e){return e.getDate()!=1}],["%B",function(e){return e.getMonth()}],["%Y",cr]]);var nl={range:function(e,t,n){return a.range(Math.ceil(e/n)*n,+t,n).map(Ju)},floor:R,ceil:R};el.year=qt.year;qt.scale=function(){return Zu(a.scale.linear(),el,tl)};var rl=el.map(function(e){return[e[0].utc,e[1]]});var il=qu.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&e.getUTCDate()!=1}],["%b %d",function(e){return e.getUTCDate()!=1}],["%B",function(e){return e.getUTCMonth()}],["%Y",cr]]);rl.year=qt.year.utc;qt.scale.utc=function(){return Zu(a.scale.linear(),rl,il)};a.text=It(function(e){return e.responseText});a.json=function(e,t){return Et(e,"application/json",al,t)};function al(e){return JSON.parse(e.responseText)}a.html=function(e,t){return Et(e,"text/html",ol,t)};function ol(e){var t=u.createRange();t.selectNode(u.body);return t.createContextualFragment(e.responseText)}a.xml=It(function(e){return e.responseXML});if(true)this.d3=a,!(r=a,i=typeof r==="function"?r.call(t,n,t,e):r,i!==undefined&&(e.exports=i));else if(typeof e==="object"&&e.exports)e.exports=a;else this.d3=a}()},function(e,t,n){"use strict";var r=n(1);var i=n(56);var a=n(2).registerRenderer;var o=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}i.call(this,t);t=t||{};var n=this;this.api=function(){return"dom"};this._init=function(){var e=n.layer().node();if(!n.canvas()&&e&&e.length){n.canvas(e[0])}return n};this._init(t);return this};r(o,i);a("dom",o);e.exports=o},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};function i(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var a=n(1);var o=n(2).registerFileReader;var s=n(255);var u=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}var a=n(3);var o=n(5).convertColor;var u=this,l=r({},t,{pointStyle:r({fill:true,fillColor:"#ff7800",fillOpacity:.8,stroke:true,strokeColor:"#000",strokeWidth:1,strokeOpacity:1,radius:8},t.pointStyle),lineStyle:r({strokeColor:"#ff7800",strokeWidth:4,strokeOpacity:.5,strokeOffset:0,lineCap:"butt",lineJoin:"miter",closed:false},t.lineStyle),polygonStyle:r({fill:true,fillColor:"#b0de5c",fillOpacity:.8,stroke:true,strokeColor:"#999999",strokeWidth:2,strokeOpacity:1},t.polygonStyle)});s.call(this,l);this.canRead=function(e){if(e instanceof File||e instanceof Blob){return!!(e.type==="application/json"||e.name&&e.name.match(/\.json$/))}else if(typeof e==="string"){try{JSON.parse(e)}catch(e){return false}return true}try{if(Array.isArray(u._featureArray(e))){return true}}catch(e){}return false};this._readObject=function(e,t,n){var r;function i(e){try{r=JSON.parse(e);t(r)}catch(n){if(!r){a.ajax({type:"GET",url:e,dataType:"text"}).done(function(e){try{r=JSON.parse(e);t(r)}catch(e){if(!r){t(false)}}}).fail(function(){t(false)})}}}if(e instanceof File||e instanceof Blob){u._getString(e,i,n)}else if(typeof e==="string"){i(e)}else{t(e)}};this._featureArray=function(e){var t,n=[];switch(e.type){case"FeatureCollection":t=e.features;break;case"Feature":t=[e];break;case"GeometryCollection":t=e.geometries.map(function(e){return{type:"Feature",geometry:e,properties:{}}});break;case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":t=[{type:"Feature",geometry:e,properties:{}}];break;default:throw new Error("Invalid json type")}t.forEach(function(e){Array.prototype.push.apply(n,u._feature(e))});n=n.filter(function(e){return e.geometry&&e.geometry.coordinates&&e.geometry.coordinates.length});return n};this._feature=function(e){if(e.type!=="Feature"){throw new Error("Invalid feature object")}switch(e.geometry.type){case"Point":case"LineString":case"Polygon":return[e];case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.geometry.coordinates.map(function(t){return{type:"Feature",geometry:{type:e.geometry.type.replace("Multi",""),coordinates:t},properties:e.properties}});default:throw new Error("Invalid geometry type")}};this._position=function(e){return{x:e[0],y:e[1],z:e[2]||0}};this._style=function(e,t){var n=e.toLowerCase().match(/color$/);if(n){t=o(t)}return function(r,i,a,s){var u;if(a!==undefined&&a.properties){u=a.properties}else{u=r.properties}if(u!==undefined&&u.hasOwnProperty(e)){return n?o(u[e]):u[e]}return t}};this.read=function(e,t,n){var a=new Promise(function(a,o){function s(e){if(e===false){if(t){t(e)}o(new Error("Failed to parse GeoJSON"));return}var n=void 0,s=[],c=void 0,f=void 0,d=void 0,p=void 0;try{n=u._featureArray(e)}catch(e){o(e);return}c=n.filter(function(e){return e.geometry.type==="Point"});if(c.length){p=u.layer().createFeature("point");if(p){p.data(c).position(function(e){return u._position(e.geometry.coordinates)}).style([{}].concat(Object.keys(l.pointStyle)).reduce(function(e,t){return r(i({},t,c.some(function(e){return e.properties&&e.properties[t]!==undefined})?u._style(t,l.pointStyle[t]):l.pointStyle[t]),e)}));s.push(p)}}f=n.filter(function(e){return e.geometry.type==="LineString"});if(f.length){p=u.layer().createFeature("line");if(p){p.data(f).line(function(e){return e.geometry.coordinates}).position(u._position).style([{}].concat(Object.keys(l.lineStyle)).reduce(function(e,t){return r(i({},t,f.some(function(e){return e.properties&&e.properties[t]!==undefined})?u._style(t,l.lineStyle[t]):l.lineStyle[t]),e)}));s.push(p)}}d=n.filter(function(e){return e.geometry.type==="Polygon"});if(d.length){p=u.layer().createFeature("polygon");if(p){p.data(d).polygon(function(e,t){return{outer:e.geometry.coordinates[0],inner:e.geometry.coordinates.slice(1)}}).position(u._position).style([{}].concat(Object.keys(l.polygonStyle)).reduce(function(e,t){return r(i({},t,d.some(function(e){return e.properties&&e.properties[t]!==undefined})?u._style(t,l.polygonStyle[t]):l.polygonStyle[t]),e)}));s.push(p)}}if(t){t(s)}a(s)}u._readObject(e,s,n)});u.addPromise(a);return a}};a(u,s);o("geojsonReader",u);o("jsonReader",u);e.exports=u},function(e,t,n){"use strict";var r=n(3);var i=n(1);var a=n(78);var o=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}t=t||{};if(t.node===undefined||t.node===null){console.warn("map creation requires a node");return this}a.call(this,t);var i=n(249);var o=n(17);var s=n(5);var u=n(2);var l=n(11);var c=n(146);var f=n(259);var d=this,p=this._exit,h=r(t.node),g=t.width||h.width()||512,m=t.height||h.height()||512,v=t.gcs===undefined?"EPSG:3857":t.gcs,y=t.ingcs===undefined?"EPSG:4326":t.ingcs,b={x:0,y:0},M=t.zoom===undefined?4:t.zoom,x=t.rotation?t.rotation:0,w=null,A=null,T={min:0,max:16,origMin:0},C=null,S=null,D=t.discreteZoom?true:false,I=typeof t.allowRotation==="function"?t.allowRotation:t.allowRotation===undefined?true:!!t.allowRotation,E=t.maxBounds||{},N=t.camera||i(),O,_,L,P,k=t.animationQueue||[],R=t.autoResize===undefined?true:t.autoResize,j=t.autoshareRenderer,B;var z=((E.left||0)+(E.right||0))/2,F=((E.bottom||0)+(E.top||0))/2;E.left=o.transformCoordinates(E.gcs||y,v,{x:E.left!==undefined?E.left:-180,y:F}).x;E.right=o.transformCoordinates(E.gcs||y,v,{x:E.right!==undefined?E.right:180,y:F}).x;E.top=E.top!==undefined?o.transformCoordinates(E.gcs||y,v,{x:z,y:E.top}).y:E.right;E.bottom=E.bottom!==undefined?o.transformCoordinates(E.gcs||y,v,{x:z,y:E.bottom}).y:E.left;O=t.unitsPerPixel||(E.right-E.left)/256;N.viewport={width:g,height:m,left:h.offset().left,top:h.offset().top};t.center=s.normalizeCoordinates(t.center);_=t.clampBoundsX===undefined?false:t.clampBoundsX;L=t.clampBoundsY===undefined?true:t.clampBoundsY;P=t.clampZoom===undefined?true:t.clampZoom;this.unitsPerPixel=function(e,t){e=e||0;if(t){O=Math.pow(2,e)*t;d.draw();return d}return Math.pow(2,-e)*O};this.animationQueue=function(e){if(e===undefined){return k}if(e!==k){if(k.length){if(e.length&&e[0]!==k[0]){window["cancelAnimationFrame"](k[0])}for(var t=e.length?1:0;t<k.length;t+=1){e.push(k[t])}}k=e}return d};this.autoResize=function(e){if(e===undefined){return R}if(e!==R){r(window).off("resize",ee);R=e;if(R){r(window).on("resize",ee)}}return d};this.clampBoundsX=function(e){if(e===undefined){return _}if(e!==_){_=!!e;d.pan({x:0,y:0})}return d};this.clampBoundsY=function(e){if(e===undefined){return L}if(e!==L){L=!!e;d.pan({x:0,y:0})}return d};this.clampZoom=function(e){if(e===undefined){return P}if(e!==P){P=!!e;K();d.zoom(M)}return d};this.allowRotation=function(e){if(e===undefined){return I}if(typeof e!=="function"){e=!!e}if(e!==I){I=e;d.rotation(x)}return d};this.origin=function(){return r.extend({},B)};this.camera=function(){return N};this.gcs=function(e){if(e===undefined){return v}if(e!==v){var t=d.center(undefined,undefined);v=e;K();var n=d._fix_zoom(M);if(n!==M){d.zoom(n)}d.center(t,undefined)}return d};this.ingcs=function(e){if(e===undefined){return y}y=e;return d};this.node=function(){return h};this.zoom=function(e,t,n){if(e===undefined){return M}var r,i;var a=t&&(t.mapgcs||t.geo)&&t.map;var o=a;e=d._fix_zoom(e,n);if(e===M){return d}M=e;i=d.boundsFromZoomAndCenter(e,b,x,null,n,o);d.modified();$(i,x);r={zoomLevel:M,screenPosition:t?t.map:undefined};d.geoTrigger(l.zoom,r);if(a){var s=d.gcsToDisplay(t.mapgcs||t.geo,t.mapgcs?null:undefined);d.pan({x:t.map.x-s.x,y:t.map.y-s.y},n,true)}else{d.pan({x:0,y:0},n)}return d};this.pan=function(e,t,n){var r={screenDelta:e};if(e.x||e.y){var i=d.unitsPerPixel(M);var a=Math.sin(x),o=Math.cos(x);N.pan({x:(e.x*o- -e.y*a)*i,y:(e.x*a+-e.y*o)*i})}var s=N.bounds;s=J(s,x,n==="limited"?{x:e.x,y:e.y,unit:i}:undefined,n===true);if(s!==N.bounds){var u=d.gcsToDisplay({x:N.bounds.left,y:N.bounds.top},null);s=d.boundsFromZoomAndCenter(M,{x:(s.left+s.right)/2,y:(s.top+s.bottom)/2},x,null,t,true);$(s,x);var c=d.gcsToDisplay({x:N.bounds.left,y:N.bounds.top},null);r.screenDelta.x+=c.x-u.x;r.screenDelta.y+=c.y-u.y}b=N.displayToWorld({x:g/2,y:m/2});d.geoTrigger(l.pan,r);d.modified();return d};this.rotation=function(e,t,n){if(e===undefined){return x}var r=t&&t.geo&&t.map;e=Z(e,n);if(e===x){return d}x=e;var i=d.boundsFromZoomAndCenter(M,b,x,null,n,true);d.modified();$(i,x);var a={rotation:x,screenPosition:t?t.map:undefined};d.geoTrigger(l.rotate,a);if(r){var o=d.gcsToDisplay(t.geo);d.pan({x:t.map.x-o.x,y:t.map.y-o.y},undefined,true)}else{d.pan({x:0,y:0},undefined,true)}K();d.zoom(M,undefined,n);return d};this.center=function(e,t,n,i){var a;if(e===undefined){a=r.extend({},d.worldToGcs(b,t));return a}a=d.gcsToWorld(e,t);$(d.boundsFromZoomAndCenter(M,a,x,null,n,i),x);d.modified();d.geoTrigger(l.pan,{screenDelta:{x:0,y:0}});return d};this.createLayer=function(e,t){t=t||{};if(d.autoshareRenderer()!==undefined){t=Object.assign({autoshareRenderer:d.autoshareRenderer()},t)}var n=u.createLayer(e,d,t);if(n){d.addChild(n);d.children().forEach(function(e){if(e instanceof f){e.moveToTop()}});n._update();d.modified();d.geoTrigger(l.layerAdd,{target:d,layer:n})}return n};this.deleteLayer=function(e){if(e!==null&&e!==undefined){e._exit();d.removeChild(e);d.modified();d.geoTrigger(l.layerRemove,{target:d,layer:e})}return e};this.size=function(e){if(e===undefined){return{width:g,height:m}}var t=d.center();g=e.width||g;m=e.height||m;K();var n=d._fix_zoom(M);if(n!==M){d.zoom(n)}d.camera().viewport={width:g,height:m,left:h.offset().left,top:h.offset().top};d.center(t);d.geoTrigger(l.resize,{target:d,width:g,height:m});d.modified();return d};this.rotatedSize=function(){if(!this.rotation()){return{width:g,height:m}}var e=q({x:0,y:0},{width:g,height:m},d.rotation());return{width:Math.abs(e.right-e.left),height:Math.abs(e.top-e.bottom)}};this.gcsToWorld=function(e,t){if(Array.isArray(e)){return e.map(function(e){return d.gcsToWorld(e,t)})}t=t===null?v:t===undefined?y:t;if(t!==v){e=o.transformCoordinates(t,v,e)}if(B.x||B.y||B.z){e=o.affineForward({origin:B},[e])[0]}else if(!("z"in e)){e={x:e.x,y:e.y,z:0}}return e};this.worldToGcs=function(e,t){if(Array.isArray(e)){return e.map(function(e){return d.worldToGcs(e,t)})}if(B.x||B.y||B.z){e=o.affineInverse({origin:B},[e])[0]}else if(!("z"in e)){e={x:e.x,y:e.y,z:0}}t=t===null?v:t===undefined?y:t;if(t!==v){e=o.transformCoordinates(v,t,e)}return e};this.gcsToDisplay=function(e,t){e=d.gcsToWorld(e,t);return d.worldToDisplay(e)};this.worldToDisplay=function(e){if(Array.isArray(e)){return e.map(function(e){return N.worldToDisplay(e)})}return N.worldToDisplay(e)};this.displayToGcs=function(e,t){e=d.displayToWorld(e);return d.worldToGcs(e,t)};this.displayToWorld=function(e){if(Array.isArray(e)){return e.map(function(e){return N.displayToWorld(e)})}return N.displayToWorld(e)};this.draw=function(){var e,t=d.children();d.geoTrigger(l.draw,{target:d});d._update();for(e=0;e<t.length;e+=1){t[e].draw()}d.geoTrigger(l.drawEnd,{target:d});return d};this.fileReader=function(e,t){if(e===undefined){return w}if(typeof e==="string"){t=t||{};if(!t.layer){t.layer=d.createLayer("feature",r.extend({},t))}t.renderer=t.layer.renderer().api();w=u.createFileReader(e,t)}else{w=e}return d};function V(){var e;if(typeof document.hidden!=="undefined"){e="hidden"}else if(typeof document.msHidden!=="undefined"){e="msHidden"}else if(typeof document.webkitHidden!=="undefined"){e="webkitHidden"}d.geoTrigger(document[e]?l.hidden:l.unhidden)}function U(e){var t;if(typeof document.hidden!=="undefined"){t="visibilitychange"}else if(typeof document.msHidden!=="undefined"){t="msvisibilitychange"}else if(typeof document.webkitHidden!=="undefined"){t="webkitvisibilitychange"}document.removeEventListener(t,V);if(e!==false){document.addEventListener(t,V)}}this._init=function(){if(h===undefined||h===null){throw new Error("Map require DIV node")}if(h.data("data-geojs-map")&&r.isFunction(h.data("data-geojs-map").exit)){h.data("data-geojs-map").exit()}h.addClass("geojs-map");h.data("data-geojs-map",d);U();return d};this._update=function(e){var t,n=d.children();for(t=0;t<n.length;t+=1){n[t]._update(e)}return d};this.exit=function(){U(false);var e,t=d.children();for(e=t.length-1;e>=0;e-=1){t[e]._exit();d.removeChild(t[e])}if(d.interactor()){d.interactor().destroy();d.interactor(null)}k=[];d.node().data("data-geojs-map",null);d.node().off(".geo");d.node().empty();r(window).off("resize",ee);p()};this.interactor=function(e){if(e===undefined){return A}if(A&&A!==e){A.destroy()}A=e;if(A){if(!h.attr("tabindex")){h.attr("tabindex",0)}A.map(d)}return d};this.zoomRange=function(e,t){if(e===undefined){return r.extend({},T)}if(e.max!==undefined){T.max=e.max}if(e.min!==undefined){T.min=T.origMin=e.min}K();if(!t){d.zoom(M)}return d};this.transition=function(e,t,n){if(e===undefined){return C}if(C){var i=r.extend(true,{},C.end);if(i.center&&v!==y){i.center=o.transformCoordinates(v,y,i.center)}S=r.extend({},i||{},S||{},e);return d}function a(e,t,n){return e+(t-e)*n}function u(e,t){return function(n){var i=[];r.each(e,function(r){i.push(a(e[r],t[r],n))});return i}}var c=d.unitsPerPixel(0);function f(e){return Math.pow(2,-(e+1))*c*m}function p(e){return-Math.log2(e/c/m)-1}var h={center:undefined,zoom:d.zoom(),rotation:d.rotation(),duration:1e3,ease:function e(t){return t},interp:u,done:null,zCoord:true};if(e.center){t=t===null?v:t===undefined?y:t;e=r.extend(true,{},e);e.center=s.normalizeCoordinates(e.center);if(t!==v){e.center=o.transformCoordinates(t,v,e.center)}}e=r.extend(true,{},h,e);C={start:{center:d.center(undefined,null),zoom:d.zoom(),rotation:d.rotation()},end:{center:e.center,zoom:d._fix_zoom(e.zoom),rotation:Z(e.rotation,undefined,true)},ease:e.ease,zCoord:e.zCoord,done:e.done,duration:e.duration,zoomOrigin:e.zoomOrigin};C.interp=e.interp([C.start.center.x,C.start.center.y,e.zCoord?f(C.start.zoom):C.start.zoom,C.start.rotation],[C.end.center?C.end.center.x:C.start.center.x,C.end.center?C.end.center.y:C.start.center.y,e.zCoord?f(C.end.zoom):C.end.zoom,C.end.rotation]);function g(t){var n=C.done,r=S;if(C.cancel===true){d.geoTrigger(l.transitioncancel,e);if(n){n({cancel:true,source:C.cancelSource,transition:C})}C=null;if(S){r=S;S=null;d.transition(r,undefined,t)}return}if(!C.start.time){C.start.time=t;C.end.time=t+e.duration}C.time=t-C.start.time;if(t>=C.end.time||r){if(!r){if(C.end.center){var i=M!==d._fix_zoom(C.end.zoom);d.center(C.end.center,null,i,i)}d.zoom(C.end.zoom,C.zoomOrigin);d.rotation(Z(C.end.rotation))}d.geoTrigger(l.transitionend,e);if(n){n({next:!!r})}C=null;if(S){r=S;S=null;d.transition(r,undefined,t)}return}var a=C.ease((t-C.start.time)/e.duration);var o=C.interp(a);if(C.zCoord){o[2]=p(o[2])}if(d._fix_zoom(o[2],true)===M){d.center({x:o[0],y:o[1]},null,true,true)}else{b=d.gcsToWorld({x:o[0],y:o[1]},null,true,true);d.zoom(o[2],C.zoomOrigin,true)}d.rotation(o[3],undefined,true);d.scheduleAnimationFrame(g)}d.geoTrigger(l.transitionstart,e);if(l.cancelNavigation){C=null;d.geoTrigger(l.transitionend,e);return d}else if(l.cancelAnimation){e.duration=0;g(0)}else if(n){g(n)}else{d.scheduleAnimationFrame(g)}return d};this.transitionCancel=function(e){if(C&&(C.cancel!==true||S)){C.cancel=true;C.cancelSource=e||C.cancelSource||"";S=null;return true}return false};this.bounds=function(e,t){var n;t=t===null?v:t===undefined?y:t;if(e!==undefined){if(t!==v){var r=o.transformCoordinates(t,v,[{x:e.left,y:e.top},{x:e.right,y:e.bottom}]);e={left:r[0].x,top:r[0].y,right:r[1].x,bottom:r[1].y}}e=J(e,x);n=d.zoomAndCenterFromBounds(e,x,null);d.zoom(n.zoom);d.center(n.center,null)}return d.boundsFromZoomAndCenter(M,b,x,t,true)};this.maxBounds=function(e,t){t=t===null?v:t===undefined?y:t;if(e===undefined){return{left:o.transformCoordinates(v,t,{x:E.left,y:0}).x,right:o.transformCoordinates(v,t,{x:E.right,y:0}).x,bottom:o.transformCoordinates(v,t,{x:0,y:E.bottom}).y,top:o.transformCoordinates(v,t,{x:0,y:E.top}).y}}var n=((e.left||0)+(e.right||0))/2,r=((e.bottom||0)+(e.top||0))/2;if(e.left!==undefined){E.left=o.transformCoordinates(t,v,{x:e.left,y:r}).x}if(e.right!==undefined){E.right=o.transformCoordinates(t,v,{x:e.right,y:r}).x}if(e.bottom!==undefined){E.bottom=o.transformCoordinates(t,v,{x:n,y:e.bottom}).y}if(e.top!==undefined){E.top=o.transformCoordinates(t,v,{x:n,y:e.top}).y}K();d.zoom(M);d.pan({x:0,y:0});return d};this.zoomAndCenterFromBounds=function(e,t,n){var r,i;n=n===null?v:n===undefined?y:n;if(n!==v){var a=o.transformCoordinates(n,v,[{x:e.left,y:e.top},{x:e.right,y:e.bottom}]);e={left:a[0].x,top:a[0].y,right:a[1].x,bottom:a[1].y}}if(e.left>=e.right||e.bottom>=e.top){throw new Error("Invalid bounds provided")}i=d._fix_zoom(X(e,t));e=J(e,t);r={x:(e.left+e.right)/2-B.x,y:(e.top+e.bottom)/2-B.y};if(n!==v){r=o.transformCoordinates(v,n,r)}return{zoom:i,center:r}};this.boundsFromZoomAndCenter=function(e,t,n,r,i,a){var s,u,l,c,f,p;r=r===null?v:r===undefined?y:r;e=d._fix_zoom(e,i);p=d.unitsPerPixel(e);t=d.gcsToWorld(t,null);s=g*p;u=m*p;l=s/2;c=u/2;if(n){t.x+=B.x;t.y+=B.y;f=q(t,{width:s,height:u},n);f.width=s;f.height=u;f=J(f,n,undefined,a)}else{f={left:t.x-l+B.x,right:t.x+l+B.x,bottom:t.y-c+B.y,top:t.y+c+B.y};f=J(f,0,undefined,a)}if(r!==v){var h=o.transformCoordinates(v,r,[[f.left,f.top],[f.right,f.bottom]]);f={left:h[0][0],top:h[0][1],right:h[1][0],bottom:h[1][1]}}f.width=s;f.height=u;return f};this.discreteZoom=function(e){if(e===undefined){return D}e=e?true:false;if(D!==e){D=e;if(D){d.zoom(Math.round(d.zoom()))}if(d.interactor()){d.interactor().options({discreteZoom:D})}}return d};this.layers=this.children;function G(e,t){var n=e.zIndex(),r=t.zIndex();if(n!==r){return n-r}var i=e.node()[0],a=t.node()[0],o=i&&i.parentNode,s=a&&a.parentNode;if(o&&s&&o===s){var u=Array.from(o.children),l=u.indexOf(i),c=u.indexOf(a);if(l>=0&&c>=0){return l-c}}return o?-1:s?1:0}this.sortedLayers=function(){return d.children().sort(G)};this.listSceneObjects=function(e){var t=[];e=e||d.sortedLayers();e.forEach(function(e){if(t.indexOf(e)<0){t.push(e);if(e.children){var n=e.children();if(n.length){t=t.concat(d.listSceneObjects(n))}}}});return t};this.updateAttribution=function(){d.node().find(".geo-attribution").remove();var e=r("<div/>").addClass("geo-attribution").on("mousedown",function(e){e.stopPropagation()});d.children().forEach(function(t){var n=t.attribution();if(n){r("<span/>").addClass("geo-attribution-layer").html(n).appendTo(e)}});if(r("span",e).length){e.appendTo(d.node())}return d};this.screenshot=function(e,t,n,i){var a;if(e&&!Array.isArray(e)&&!e.renderer){t=t||e.type;n=n||e.encoderOptions;i=i||e;e=e.layers}i=i||{};if(i.wait){var o=r.extend({},i,{wait:false});a=r.Deferred();var u=function e(){window.requestAnimationFrame(function(){a.resolve()})};if(i.wait==="idle"){d.onIdle(u)}else{u()}return a.then(function(){return d.screenshot(e,t,n,o)})}a=r.when();if(!e){e=d.layers();if(i.attribution===null||i.attribution===undefined){i.attribution=true}}else if(!Array.isArray(e)){e=[e]}e=e.filter(function(e){return d.layers().indexOf(e)>=0&&e.opacity()>0&&(!e.visible||e.visible())});e=e.sort(G);var c=document.createElement("canvas");c.width=g;c.height=m;var f=c.getContext("2d");if(i.background!==false&&i.background!==null){var p=i.background;if(i.background===undefined){f.fillStyle="white";f.fillRect(0,0,c.width,c.height);d.node().parents().get().reverse().forEach(function(e){p=window.getComputedStyle(e).backgroundColor;if(p&&p!=="transparent"){f.fillStyle=p;f.fillRect(0,0,c.width,c.height)}});p=window.getComputedStyle(d.node()[0]).backgroundColor}if(p&&p!=="transparent"){f.fillStyle=p;f.fillRect(0,0,c.width,c.height)}}e.forEach(function(e){var t=e.opacity();e.node().children("canvas").each(function(){var n=r(this);a=a.then(function(){if(e.renderer()&&e.renderer().api()==="webgl"){e.renderer()._renderFrame()}W(f,t,n,n[0])})});if((e.node().children().not("canvas").length||!e.node().children().length)&&(!e.renderer()||e.renderer().api()!=="webgl")){a=a.then(function(){return s.htmlToImage(e.node(),1).done(function(e){W(f,1,r([]),e)})})}});if(i.attribution){d.node().find(".geo-attribution").each(function(){var e=r(this);a=a.then(function(){return s.htmlToImage(e,1).done(function(e){W(f,1,r([]),e)})})})}a=a.then(function(){var e=c;if(t!=="canvas"){try{c=c.toDataURL(t,n)}catch(e){console.warn("Failed to convert screenshot to output",e);var i=r.Deferred();i.reject();return i}}d.geoTrigger(l.screenshot.ready,{canvas:e,screenshot:c});return c});return a};this.scheduleAnimationFrame=function(e,t){if(!k.length){k.push(window["requestAnimationFrame"](H))}var n=k.indexOf(e,1);if(n>=0){if(!t){return}k.splice(n,1);if(t==="remove"){return}}k.push(e);return k[0]};this._fix_zoom=function(e,t){e=Math.round(e*1e6)/1e6;e=Math.max(Math.min(T.max,e),T.min);if(D&&!t){e=Math.round(e);if(e<T.min){e=Math.ceil(T.min)}}return e};this.autoshareRenderer=function(e){if(e===undefined){return j}j=e===null?undefined:e;return d};function W(e,t,n,r){e.globalAlpha=t;var i=n.css("transform");if(i&&i.substr(0,7)==="matrix("){e.setTransform.apply(e,i.substr(7,i.length-8).split(",").map(parseFloat))}else{e.setTransform(1,0,0,1,0,0)}e.drawImage(r,0,0)}function H(){var e=k.splice(0,k.length);for(var t=1;t<e.length;t+=1){try{e[t].apply(d,arguments)}catch(e){console.error(e)}}}function Y(e){var t=e.right-e.left,n=e.top-e.bottom,r=Math.abs(t/n),i=g/m,a,o;if(r>i){a=1;o=r/i}else{o=1;a=i/r}return{x:a,y:o}}function Q(e,t){if(t){var n={x:(e.left+e.right)/2,y:(e.top+e.bottom)/2};var r={width:Math.abs(e.left-e.right),height:Math.abs(e.top-e.bottom)};e=q(n,r,t)}return e}function q(e,t,n){var r=t.width/2,i=t.height/2;var a=Math.sin(n),o=Math.cos(n);var s={},u={},l={},c={};s.x=e.x+-r*o- -i*a;s.y=e.y+-r*a+-i*o;u.x=e.x+r*o- -i*a;u.y=e.y+r*a+-i*o;l.x=e.x+-r*o-i*a;l.y=e.y+-r*a+i*o;c.x=e.x+r*o-i*a;c.y=e.y+r*a+i*o;return{left:Math.min(s.x,u.x,l.x,c.x),right:Math.max(s.x,u.x,l.x,c.x),bottom:Math.min(s.y,u.y,l.y,c.y),top:Math.max(s.y,u.y,l.y,c.y)}}function X(e,t){if(t===undefined){t=x}e=Q(e,t);var n=Y(e),r;if(n.y>n.x){r=-Math.log2(Math.abs(e.right-e.left)*n.x/(g*O))}else{r=-Math.log2(Math.abs(e.top-e.bottom)*n.y/(m*O))}return r}function K(){if(P){T.min=Math.max(T.origMin,X(E))}else{T.min=T.origMin}}function Z(e,t,n){if(!I){return 0}if(!t&&typeof I==="function"){e=I(e)}if(!n){var r=Math.PI*2;e=e%r+(e>=0?0:r);if(Math.min(Math.abs(e),Math.abs(e-r))<1e-5){e=0}}return e}function J(e,t,n,i){if(!_&&!L){return e}var a,o,s=E;if(t){s=r.extend({},E);var u=Math.abs(e.right-e.left),l=Math.abs(e.top-e.bottom),c=Math.abs(Math.sin(t)),f=Math.abs(Math.cos(t)),d,p;if(e.width&&e.height){d=e.width;p=e.height}else if(Math.abs(c-f)<5e-4){if(g&&m){var h=Math.abs(g/m);var v=Math.pow(1+Math.pow(h,2),.5);d=Math.max(u,l)/v;p=d*h}else{d=u*f;p=l*c}}else{d=(f*u-c*l)/(f*f-c*c);p=(f*l-c*u)/(f*f-c*c)}var y=u-Math.max(f*d,c*p),b=l-Math.max(f*p,c*d);s.left-=y;s.right+=y;s.top+=b;s.bottom-=b}if(i){s={left:s.left-(e.right-e.left)/2,right:s.right+(e.right-e.left)/2,top:s.top-(e.bottom-e.top)/2,bottom:s.bottom+(e.bottom-e.top)/2}}if(_){if(e.right-e.left>s.right-s.left){a=s.left-(e.right-e.left-(s.right-s.left))/2-e.left}else if(e.left<s.left){a=s.left-e.left}else if(e.right>s.right){a=s.right-e.right}if(a&&(!n||n.x*a>0)){if(n&&Math.abs(a)>Math.abs(n.x*n.unit)){a=Math.abs(n.x*n.unit)*a/Math.abs(a)}e={left:e.left+=a,right:e.right+=a,top:e.top,bottom:e.bottom}}}if(L){if(e.top-e.bottom>s.top-s.bottom){o=s.bottom-(e.top-e.bottom-(s.top-s.bottom))/2-e.bottom}else if(e.top>s.top){o=s.top-e.top}else if(e.bottom<s.bottom){o=s.bottom-e.bottom}if(o&&(!n||-n.y*o>0)){if(n&&Math.abs(o)>Math.abs(n.y*n.unit)){o=Math.abs(n.y*n.unit)*o/Math.abs(o)}e={top:e.top+=o,bottom:e.bottom+=o,left:e.left,right:e.right}}}return e}function $(e,t){N.rotation=t||0;if(e.width&&e.height&&t){var n=(e.left+e.right)/2,r=(e.top+e.bottom)/2;N.viewFromCenterSizeRotation({x:n,y:r},e,t)}else{N.bounds=e}b={x:(N.bounds.left+N.bounds.right)/2,y:(N.bounds.top+N.bounds.bottom)/2}}function ee(){d.size({width:h.width(),height:h.height()})}this._init(t);this.node().on("dragover.geo",function(e){var t=e.originalEvent;if(d.fileReader()){t.stopPropagation();t.preventDefault();t.dataTransfer.dropEffect="copy"}}).on("drop.geo",function(e){var t=e.originalEvent,n=d.fileReader(),r,i;function a(){d.draw()}if(n){t.stopPropagation();t.preventDefault();for(r=0;r<t.dataTransfer.files.length;r+=1){i=t.dataTransfer.files[r];if(n.canRead(i)){n.read(i,a)}}}});B={x:0,y:0};this.zoomRange(t,true);M=this._fix_zoom(M);x=Z(x);this.center(r.extend({},t.center||b),undefined);if(t.interactor!==null){this.interactor(t.interactor||c({discreteZoom:D}))}if(R){r(window).on("resize",ee)}d.geoOn([l.layerAdd,l.layerRemove],d.updateAttribution);return this};o.create=function(e){"use strict";var t=o(e),r=n(79);if(!t||!t.zoom){console.warn("Could not create map.");return null}e.data=e.data||[];e.layers=e.layers||[];e.layers.forEach(function(n){n.data=n.data||e.data;n.layer=r.create(t,n)});return t};i(o,a);e.exports=o},function(e,t,n){"use strict";var r=n(3);var i=n(1);var a=n(106);var o=n(2);var s=n(66);var u=function e(t){var i=n(258);if(!(this instanceof e)){return new e(t)}t=t||{};if(t.mapOpacity!==undefined&&t.opacity===undefined){t=r.extend({},t);t.opacity=t.mapOpacity}t=r.extend(true,{},this.constructor.defaults,e.tileSources[this.constructor.defaults.source]||{},e.tileSources[t.source]||{},t);a.call(this,t);var o=this;this.mapOpacity=this.opacity;this._getTile=function(e,t){var n=t||e;return i({index:e,size:{x:o._options.tileWidth,y:o._options.tileHeight},queue:o._queue,overlap:o._options.tileOverlap,scale:o._options.tileScale,url:o._options.url.call(o,n.x,n.y,n.level||0,o._options.subdomains),crossDomain:o._options.crossDomain})};this.source=function(t){if(t===undefined){for(var n in e.tileSources){if(e.tileSources[n].url===o.url()){return n}}return}if(e.tileSources[t]){o.url(e.tileSources[t].url);o.subdomains(e.tileSources[t].subdomains||"abc");o.attribution(e.tileSources[t].attribution||"");o._options.maxLevel=e.tileSources[t].maxLevel||18;o._options.minLevel=e.tileSources[t].minLevel||0}return o}};u.defaults=r.extend({},a.defaults,{tileOffset:function e(t){var n=Math.pow(2,t-1)*256;return{x:n,y:n}},url:"",source:"stamen-toner-lite"});var l='Map tiles by <a href="http://stamen.com">Stamen '+'Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0">'+'CC BY 3.0</a>. Data by <a href="http://openstreetmap.org">OpenStreetMap'+'</a>, under <a href="http://www.openstreetmap.org/copyright">ODbL</a>.';u.tileSources={"nationalmap-satellite":{url:"https://basemap.nationalmap.gov/arcgis/rest/services/USGSImageryOnly/MapServer/tile/{z}/{y}/{x}",attribution:'Tile data from <a href="https://basemap.nationalmap.gov/">USGS</a>',minLevel:0,maxLevel:16},osm:{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'Tile data &copy; <a href="https://osm.org/copyright">'+"OpenStreetMap</a> contributors",subdomains:"abc",minLevel:0,maxLevel:19},"stamen-terrain":{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png",attribution:l,subdomains:"abcd",minLevel:0,maxLevel:14},"stamen-terrain-background":{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/terrain-background/{z}/{x}/{y}.png",attribution:l,subdomains:"abcd",minLevel:0,maxLevel:14},"stamen-toner":{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}.png",attribution:l,subdomains:"abcd",minLevel:0,maxLevel:20},"stamen-toner-lite":{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}.png",attribution:l,subdomains:"abcd",minLevel:0,maxLevel:20},wikimedia:{url:"https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}.png",attribution:'<a href="https://wikimediafoundation.org/wiki/Maps_Terms_of_Use">Wikimedia maps</a> | Map data &copy; <a href="http://openstreetmap.org/copyright">OpenStreetMap contributors</a>',minLevel:0,maxLevel:19}};i(u,a);o.registerLayer("osm",u,[s.capabilities.image]);e.exports=u},function(e,t,n){"use strict"},function(e,t,n){"use strict";e.exports="0.19.8"},function(e,t,n){"use strict";e.exports="90d9f55d7336c9f45e2585cb157d4cbb73a9d3ba"},function(e,t,n){"use strict";e.exports={canvasRenderer:n(629),heatmapFeature:n(630),isolineFeature:n(631),lineFeature:n(632),pixelmapFeature:n(633),quadFeature:n(634),textFeature:n(635),tileLayer:n(636)}},function(e,t,n){"use strict";var r=n(1);var i=n(2).registerRenderer;var a=n(56);var o=function e(t){"use strict";var r=n(3);if(!(this instanceof e)){return new e(t)}t=t||{};a.call(this,t);var i=this,o=true,s=this._init,u=this._exit;this.clearCanvas=function(e){o=e};this.api=function(){return e.apiname};this._init=function(){if(i.initialized()){return i}s.call(i);var e=t.canvas||r(document.createElement("canvas"));i.context2d=e[0].getContext("2d");e.addClass("canvas-canvas");r(i.layer().node().get(0)).append(e);i.canvas(e);var n=i.layer().map(),a=n.size();i._resize(0,0,a.width,a.height);return i};this._resize=function(e,t,n,r){var a=i.canvas();if(parseInt(a.attr("width"),10)!==n||parseInt(a.attr("height"),10)!==r){i._setWidthHeight(n,r);a.attr("width",n);a.attr("height",r);i._render()}return i};this._render=function(){i.layer().map().scheduleAnimationFrame(i._renderFrame);return i};this._renderFrame=function(){var e=i.layer(),t=e.map(),n=t.size(),r=e.features?e.features():[],a;for(a=0;a<r.length;a+=1){if(r[a]._delayRender()){i._render();return}}if(o){i.context2d.setTransform(1,0,0,1,0,0);i.context2d.clearRect(0,0,n.width,n.height)}for(a=0;a<r.length;a+=1){if(r[a].visible()){r[a]._renderOnCanvas(i.context2d,t)}}};this._exit=function(){i.canvas().remove();u()};return this};o.apiname="canvas";r(o,a);i("canvas",o);var s;o.supported=function(){if(s===undefined){var e;try{e=document.createElement("canvas");s=!!(e.getContext&&e.getContext("2d"))}catch(e){s=false}e=undefined}return s};o.fallback=function(){return null};e.exports=o},function(e,t,n){"use strict";var r=n(1);var i=n(2).registerFeature;var a=n(257);var o=n(20);var s=n(5);var u=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}a.call(this,t);var r=n(67);r.call(this);var i=n(11);var u=this,l,c,f,d,p,h=this._init,g=this._update,m=o();this._computeGradient=function(){var e,t,n,r,i;i=u.style("color");if(!u._grad||u._gradColors!==i){e=document.createElement("canvas");n=e.getContext("2d");r=n.createLinearGradient(0,0,0,256);e.width=1;e.height=256;for(t in i){r.addColorStop(t,s.convertColorToRGBA(i[t]))}n.fillStyle=r;n.fillRect(0,0,1,256);u._grad=n.getImageData(0,0,1,256).data;u._gradColors=i}return u};this._createCircle=function(){var e,t,n,r,i,a;n=u.style("radius");i=u.style("blurRadius");a=u.style("gaussian");if(!u._circle||u._circle.gaussian!==a||u._circle.radius!==n||u._circle.blurRadius!==i){e=u._circle=document.createElement("canvas");t=e.getContext("2d");r=i+n;e.width=e.height=r*2;if(!a){t.shadowOffsetX=t.shadowOffsetY=r*2;t.shadowBlur=i;t.shadowColor="black";t.beginPath();t.arc(-r,-r,n,0,Math.PI*2,true);t.closePath();t.fill()}else{var o=t.createRadialGradient(r,r,0,r,r,r);o.addColorStop(0,"rgba(255,255,255,1)");o.addColorStop(.1,"rgba(255,255,255,0.946)");o.addColorStop(.2,"rgba(255,255,255,0.801)");o.addColorStop(.3,"rgba(255,255,255,0.607)");o.addColorStop(.4,"rgba(255,255,255,0.411)");o.addColorStop(.5,"rgba(255,255,255,0.249)");o.addColorStop(.6,"rgba(255,255,255,0.135)");o.addColorStop(.7,"rgba(255,255,255,0.066)");o.addColorStop(.8,"rgba(255,255,255,0.029)");o.addColorStop(.9,"rgba(255,255,255,0.011)");o.addColorStop(1,"rgba(255,255,255,0)");t.fillStyle=o;t.fillRect(0,0,r*2,r*2)}e.radius=n;e.blurRadius=i;e.gaussian=a;u._circle=e}return u};this._colorize=function(e,t){var n=new Uint32Array(t.buffer),r=e.length,i,a,o;if(!l||l.length!==r){l=new ArrayBuffer(r);c=new Uint8ClampedArray(l);f=new Uint32Array(l)}for(i=3,o=0;i<r;i+=4,o+=1){a=e[i];if(a){f[o]=n[a]}}e.set(c)};this._renderPoints=function(e,t,n,r){var i=u.gcsPosition(),a=u.intensity(),o=u.minIntensity(),s=u.maxIntensity()-o||1,l,c,f;for(l=n.length-1;l>=0;l-=1){c=t.worldToDisplay(i[l]);f=(a(n[l],l)-o)/s;if(f<=0){continue}e.globalAlpha=f<.01?.01:f>1?1:f;e.drawImage(u._circle,c.x-r,c.y-r)}};this._renderBinnedData=function(e,t,n,r,i){var a=u.gcsPosition(),o=u.intensity(),s=u.minIntensity(),l=u.maxIntensity()-s||1,c=t.size(),f=[],d=Math.ceil(r/i),p=Math.ceil(c.width/i)+d*2+2,h=Math.ceil(c.height/i)+d*2+2,g=n.length,m,v,y,b,M,x,w,A;for(m=0;m<g;m+=1){v=t.worldToDisplay(a[m]);if(isNaN(v.x)||isNaN(v.y)){continue}if(w===undefined){w=(v.x%i+i)%i;A=(v.y%i+i)%i}b=Math.floor((v.x-w)/i)+d+1;if(b<0||b>=p){continue}M=Math.floor((v.y-A)/i)+d+1;if(M<0||M>=h){continue}y=(o(n[m],m)-s)/l;if(y<=0){continue}if(y>1){y=1}f[M]=f[M]||[];b*=4;x=f[M];if(!x[b]){x[b]=x[b+1]=y;x[b+2]=v.x*y;x[b+3]=v.y*y}else{x[b]+=y;x[b+1]+=(1-x[b+1])*y;x[b+2]+=v.x*y;x[b+3]+=v.y*y}}for(M=f.length-1;M>=0;M-=1){x=f[M];if(x){for(b=x.length-4;b>=0;b-=4){if(x[b]){y=x[b+1];e.globalAlpha=y<.01?.01:y>1?1:y;e.drawImage(u._circle,x[b+2]/x[b]-r,x[b+3]/x[b]-r)}}}}};this._renderOnCanvas=function(e,t){if(m.timestamp()<u.buildTime().timestamp()){var n=u.data()||[],r=u.style("radius")+u.style("blurRadius"),i=u.binned(),a,o,s=u.layer(),l=t.size();if(i===true||i==="auto"){i=Math.max(Math.floor(r/8),3);if(u.binned()==="auto"){var c=Math.ceil((l.width+r*2)/i)*Math.ceil((l.height+r*2)/i);if(c>=n.length){i=0}}}if(i<1||isNaN(i)){i=false}u._binned=i;e.setTransform(1,0,0,1,0,0);e.clearRect(0,0,l.width,l.height);p="";t.scheduleAnimationFrame(u._setTransform,false);s.canvas().css({transform:""});u._createCircle();u._computeGradient();if(!i){u._renderPoints(e,t,n,r)}else{u._renderBinnedData(e,t,n,r,i)}a=s.canvas()[0];o=e.getImageData(0,0,a.width,a.height);u._colorize(o.data,u._grad);e.putImageData(o,0,0);d={zoom:t.zoom(),gcsOrigin:t.displayToGcs({x:0,y:0},null),rotation:t.rotation(),lastScale:undefined,lastOrigin:{x:0,y:0},lastRotation:undefined};m.modified();s.renderer().clearCanvas(false)}return u};this._init=function(){h.call(u,t);u.geoOn(i.pan,u._animatePan);return u};this._update=function(){g.call(u);if(u.buildTime().timestamp()<=u.dataTime().timestamp()||u.updateTime().timestamp()<u.timestamp()){u._build()}u.updateTime().modified();return u};this._setTransform=function(){if(u.layer()&&u.layer().canvas()&&u.layer().canvas()[0]){u.layer().canvas()[0].style.transform=p}};this._animatePan=function(){if(!d){return}var e=u.layer().map(),t=e.zoom(),n=Math.pow(2,t-d.zoom),r=e.gcsToDisplay(d.gcsOrigin,null),i=e.rotation();if(d.lastScale===n&&d.lastOrigin.x===r.x&&d.lastOrigin.y===r.y&&d.lastRotation===i){return}var a=""+" translate("+r.x+"px"+","+r.y+"px"+")"+" scale("+n+")"+" rotate("+(i-d.rotation)*180/Math.PI+"deg)";e.scheduleAnimationFrame(u._setTransform);p=a;d.lastScale=n;d.lastOrigin.x=r.x;d.lastOrigin.y=r.y;d.lastRotation=i;if(d.timeout){window.clearTimeout(d.timeout);d.timeout=undefined}if(parseFloat(n.toFixed(4))!==1||parseFloat((i-d.rotation).toFixed(4))!==0||parseFloat(r.x.toFixed(1))!==0||parseFloat(r.y.toFixed(1))!==0){d.timeout=window.setTimeout(function(){d.timeout=undefined;u.buildTime().modified();u.layer().draw()},u.updateDelay())}};u._init(t);return this};r(u,a);i("canvas","heatmap",u);e.exports=u},function(e,t,n){"use strict";var r=n(1);var i=n(2).registerFeature;var a=n(150);var o=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}t=t||{};a.call(this,t);var r=n(67);r.call(this);this._init(t);return this};r(o,a);i("canvas","isoline",o);e.exports=o},function(e,t,n){"use strict";var r=n(1);var i=n(2).registerFeature;var a=n(77);var o=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}var r=n(67);t=t||{};a.call(this,t);r.call(this);var i=this;this._renderOnCanvas=function(e,t){var n=i.data(),r=i.position(),a=i.line(),o=i.style.get("strokeWidth"),s=i.style.get("strokeColor"),u=i.style.get("strokeOpacity"),l=i.style.get("lineCap"),c=i.style.get("lineJoin"),f=i.style.get("miterLimit")(n),d=i.style.get("closed"),p={},h={},g,m,v,y,b;n.forEach(function(t,n){m=a(t,n);if(m.length<2){return}h.closed=d(t,n);h.width=o(m[0],0,t,n);h.color=s(m[0],0,t,n);h.opacity=u(m[0],0,t,n);h.linecap=l(m[0],0,t,n);h.linejoin=c(m[0],0,t,n);h.strokeStyle="rgba("+h.color.g*255+", "+h.color.g*255+", "+h.color.b*255+", "+(h.opacity!==undefined?h.opacity:1)+")";if(p.strokeStyle!==h.strokeStyle||p.width!==h.width||p.linecap!==h.linecap||p.linejoin!==h.linejoin||p.miterlimit!==h.miterlimit){if(p.strokeStyle!==undefined){e.stroke()}e.beginPath();e.strokeStyle=h.strokeStyle;e.lineWidth=h.width;e.lineCap=h.linecap;e.lineJoin=h.linejoin;e.miterLimit=f}for(b=0;b<m.length;b+=1){v=i.featureGcsToDisplay(r(m[b],b,t,n));if(!b){y=v;e.moveTo(v.x,v.y)}else{e.lineTo(v.x,v.y)}}if(h.closed){e.lineTo(y.x,y.y)}g=p;p=h;h=g});if(p.strokeStyle!==undefined){e.stroke()}};this._init(t);return this};r(o,a);var s={};s[a.capabilities.basic]=true;s[a.capabilities.multicolor]=false;i("canvas","line",o,s);e.exports=o},function(e,t,n){"use strict";var r=n(1);var i=n(2).registerFeature;var a=n(263);var o=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}a.call(this,t);var r=n(67);r.call(this);this._init(t);return this};r(o,a);i("canvas","pixelmap",o);e.exports=o},function(e,t,n){"use strict";var r=n(1);var i=n(2).registerFeature;var a=n(66);var o=n(5);var s=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}a.call(this,t);var r=n(67);r.call(this);var i=n(3);var s=this,u=this._exit,l=this._init,c=this._update,f;this._build=function(){if(!s.position()){return}f=s._generateQuads();if(f.imgQuads){f.imgQuads.sort(function(e,t){return e.pos[2]-t.pos[2]})}s.buildTime().modified()};this._checkQuadUpdate=function(e,t){s.layer().map().scheduleAnimationFrame(s._checkIfChanged)};this._checkIfChanged=function(){if(!f||!f.vidQuads||!f.vidQuads.length){return}var e=false,t=false;i.each(f.vidQuads,function(n,r){if(r.video&&r.video.HAVE_CURRENT_DATA!==undefined){if(!r.video.seeking&&r.video.readyState>=r.video.HAVE_CURRENT_DATA){e=true}if(!r.video.paused||r.video.seeking){t=true}}});if(e&&s.renderer()){s.renderer()._render()}if(t){s.layer().map().scheduleAnimationFrame(s._checkIfChanged)}};this._renderColorQuads=function(e,t){if(!f.clrQuads||!f.clrQuads.length){return}var n=e.globalAlpha;var r=n;i.each(f.clrQuads,function(n,i){var a=t.gcsToDisplay({x:i.pos[0],y:i.pos[1]},null),s=t.gcsToDisplay({x:i.pos[3],y:i.pos[4]},null),u=t.gcsToDisplay({x:i.pos[6],y:i.pos[7]},null),l=t.gcsToDisplay({x:i.pos[9],y:i.pos[10]},null);if(i.opacity!==r){r=i.opacity;e.globalAlpha=r}e.fillStyle=o.convertColorToHex(i.color,true);e.beginPath();e.moveTo(a.x,a.y);e.lineTo(s.x,s.y);e.lineTo(l.x,l.y);e.lineTo(u.x,u.y);e.closePath();e.fill()});if(r!==n){e.globalAlpha=n}};this._renderImageAndVideoQuads=function(e,t){if((!f.imgQuads||!f.imgQuads.length)&&(!f.vidQuads||!f.vidQuads.length)){return}var n=e.globalAlpha;var r=n;i.each([f.imgQuads,f.vidQuads],function(n,a){if(!a){return}i.each(a,function(n,i){var a,o,s;if(i.image){a=i.image;o=a.width;s=a.height}else if(i.video){a=i.video;o=a.videoWidth;s=a.videoHeight;if(a.seeking){return}}if(!a||!o||!s||i.opacity<=0){return}var u=t.gcsToDisplay({x:i.pos[0],y:i.pos[1]},null),l=t.gcsToDisplay({x:i.pos[6],y:i.pos[7]},null),c=t.gcsToDisplay({x:i.pos[9],y:i.pos[10]},null);e.setTransform((c.x-l.x)/o,(c.y-l.y)/o,(u.x-l.x)/s,(u.y-l.y)/s,l.x,l.y);if(i.opacity!==r){r=i.opacity;e.globalAlpha=r}if(!i.crop){e.drawImage(a,0,0)}else{var f=Math.min(o,i.crop.x),d=Math.min(s,i.crop.y);if(f>0&&d>0){e.drawImage(a,0,0,f,d,0,0,f,d)}}})});if(r!==n){e.globalAlpha=n}e.setTransform(1,0,0,1,0,0)};this._delayRender=function(){var e=false;if(f&&f.vidQuads&&f.vidQuads.length){i.each(f.vidQuads,function(t,n){if(n.video&&n.video.HAVE_CURRENT_DATA!==undefined){e|=n.video.seeking&&n.delayRenderWhenSeeking}})}return e};this._renderOnCanvas=function(e,t){if(f){s._renderImageAndVideoQuads(e,t);s._renderColorQuads(e,t)}};this._update=function(){c.call(s);if(s.buildTime().timestamp()<=s.dataTime().timestamp()||s.updateTime().timestamp()<s.timestamp()){s._build()}s.updateTime().modified();s.layer().map().scheduleAnimationFrame(s._checkIfChanged)};this._init=function(){l.call(s,t)};this._exit=function(){u.call(s)};s._init(t);return this};r(s,a);var u={};u[a.capabilities.color]=true;u[a.capabilities.image]=true;u[a.capabilities.imageCrop]=true;u[a.capabilities.imageFixedScale]=true;u[a.capabilities.imageFull]=false;u[a.capabilities.canvas]=true;u[a.capabilities.video]=true;i("canvas","quad",s,u);e.exports=s},function(e,t,n){"use strict";var r=n(1);var i=n(2).registerFeature;var a=n(80);var o=n(5);var s=n(250);var u=n(104);var l=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}var r=n(67);t=t||{};a.call(this,t);r.call(this);var i=this,l="bold 16px sans-serif",c=new RegExp("^\\s*"+"(?=(?:(?:[-a-z0-9]+\\s+){0,3}(italic|oblique))?)"+"(?=(?:(?:[-a-z0-9]+\\s+){0,3}(small-caps))?)"+"(?=(?:(?:[-a-z0-9]+\\s+){0,3}(bold(?:er)?|lighter|[1-9]00))?)"+"(?=(?:(?:[-a-z0-9]+\\s+){0,3}((?:ultra-|extra-|semi-)?(?:condensed|expanded)))?)"+"(?:(?:normal|\\1|\\2|\\3|\\4)\\s+){0,4}"+"((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))"+"(?:/(normal|[.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])))?\\s+"+'([-,\\"\\sa-z]+?)\\s*$',"i");this.getFontFromStyles=function(e,t,n){var r=i.style.get("font")(t,n)||l;if(e){var a=c.exec(r);if(a===null){a=c.exec(l)}a[1]=i.style.get("fontStyle")(t,n)||a[1];a[2]=i.style.get("fontVariant")(t,n)||a[2];a[3]=i.style.get("fontWeight")(t,n)||a[3];a[4]=i.style.get("fontStretch")(t,n)||a[4];a[5]=i.style.get("fontSize")(t,n)||a[5]||"16px";a[6]=i.style.get("lineHeight")(t,n)||a[6];a[7]=i.style.get("fontFamily")(t,n)||a[7]||"sans-serif";r=(a[1]||"")+" "+(a[2]||"")+" "+(a[3]||"")+" "+(a[4]||"")+" "+(a[5]||"")+(a[6]?"/"+a[6]:"")+" "+a[7];r=r.trim().replace(/\s\s+/g," ")}return r};this._renderOnCanvas=function(e,t){var n=i.data(),r=i.style.get("position"),a=i.style.get("renderThreshold")(n),l=i.style.get("text"),c=t.rotation(),f=t.zoom(),d=t.size(),p,h,g,m,v,y,b,M,x,w,A,T,C,S,D=o.mat3AsArray();p=["fontStyle","fontVariant","fontWeight","fontStretch","fontSize","lineHeight","fontFamily"].some(function(e){return i.style(e)!==null&&i.style(e)!==undefined});i._canvasProperty();g=i.featureGcsToDisplay(n.map(r));n.forEach(function(t,n){m=g[n];if(a>0&&(m.x<-a||m.x>d.width+a||m.y<-a||m.y>d.height+a)){return}v=i.style.get("visible")(t,n);if(!v&&v!==undefined){return}y=o.convertColorAndOpacity(i.style.get("color")(t,n),i.style.get("textOpacity")(t,n));M=o.convertColorAndOpacity(i.style.get("textStrokeColor")(t,n),i.style.get("textOpacity")(t,n),{r:0,g:0,b:0,a:0});if(y.a===0&&M.a===0){return}i._canvasProperty(e,"fillStyle",o.convertColorToRGBA(y));h=l(t,n);i._canvasProperty(e,"font",i.getFontFromStyles(p,t,n));i._canvasProperty(e,"textAlign",i.style.get("textAlign")(t,n)||"center");i._canvasProperty(e,"textBaseline",i.style.get("textBaseline")(t,n)||"middle");w=i.style.get("rotation")(t,n)||0;A=i.style.get("rotateWithMap")(t,n)&&c;T=i.style.get("textScaled")(t,n);T=o.isNonNullFinite(T)?Math.pow(2,f-T):null;C=i.style.get("offset")(t,n);S=o.mat3AsArray();if(w||A||T&&T!==1||C&&(C.x||C.y)){s.translate(S,S,[m.x,m.y]);if(A&&c){s.rotate(S,S,c)}s.translate(S,S,[C&&C.x?+C.x:0,C&&C.y?+C.y:0]);if(w){s.rotate(S,S,w)}if(T&&T!==1){s.scale(S,S,[T,T])}s.translate(S,S,[-m.x,-m.y])}if(D[0]!==S[0]||D[1]!==S[1]||D[3]!==S[3]||D[4]!==S[4]||D[6]!==S[6]||D[7]!==S[7]){e.setTransform(S[0],S[1],S[3],S[4],S[6],S[7]);s.copy(D,S)}y=o.convertColorAndOpacity(i.style.get("shadowColor")(t,n),undefined,{r:0,g:0,b:0,a:0});if(y.a){C=i.style.get("shadowOffset")(t,n);b=i.style.get("shadowBlur")(t,n)}if(y.a&&(C&&(C.x||C.y)||b)){i._canvasProperty(e,"shadowColor",o.convertColorToRGBA(y));if(C&&(w||A)&&i.style.get("shadowRotate")(t,n)){S=[+C.x,+C.y,0];u.rotateZ(S,S,[0,0,0],w+(A?c:0));C={x:S[0],y:S[1]}}i._canvasProperty(e,"shadowOffsetX",C&&C.x?+C.x:0);i._canvasProperty(e,"shadowOffsetY",C&&C.y?+C.y:0);i._canvasProperty(e,"shadowBlur",b||0)}else{i._canvasProperty(e,"shadowColor","rgba(0,0,0,0)")}if(M.a){x=i.style.get("textStrokeWidth")(t,n);if(isFinite(x)&&x>0){i._canvasProperty(e,"strokeStyle",o.convertColorToRGBA(M));i._canvasProperty(e,"lineWidth",x);e.strokeText(h,m.x,m.y);i._canvasProperty(e,"shadowColor","rgba(0,0,0,0)")}}e.fillText(h,m.x,m.y)});i._canvasProperty(e,"globalAlpha",1);e.setTransform(1,0,0,1,0,0)};return this};r(l,a);var c={};i("canvas","text",l,c);e.exports=l},function(e,t,n){"use strict";var r=n(2).registerLayerAdjustment;var i=function e(){"use strict";var t=this,n=this._init,r=this._exit,i,a=0,o=[];this._drawTile=function(e){if(!i){return}var n=t._tileBounds(e),r=e.index.level||0,s=t._tileOffset(r),u=t.tileCropFromBounds(e),l={};if(u){l.crop=u}l.ul=t.fromLocal(t.fromLevel({x:n.left-s.x,y:n.top-s.y},r),0);l.ll=t.fromLocal(t.fromLevel({x:n.left-s.x,y:n.bottom-s.y},r),0);l.ur=t.fromLocal(t.fromLevel({x:n.right-s.x,y:n.top-s.y},r),0);l.lr=t.fromLocal(t.fromLevel({x:n.right-s.x,y:n.bottom-s.y},r),0);l.ul.z=l.ll.z=l.ur.z=l.lr.z=r;a+=1;l.id=a;e.quadId=l.id;l.image=e.image;o.push(l);i.data(o);i._update();t.draw()};this._remove=function(e){if(e.quadId!==undefined&&i){for(var n=0;n<o.length;n+=1){if(o[n].id===e.quadId){o.splice(n,1);break}}i.data(o);i._update();t.draw()}};this._exit=function(){t.deleteFeature(i);i=null;o=[];r.apply(t,arguments)};this._init=function(){n.apply(t,arguments);i=t.createFeature("quad",{previewColor:t._options.previewColor,previewImage:t._options.previewImage});i.geoTrigger=undefined;i.gcs(t._options.gcs||t.map().gcs());i.data(o);i._update()};this._getSubLayer=function(){};this._updateSubLayers=undefined};r("canvas","tile",i);e.exports=i},function(e,t,n){"use strict";var r=n(11);r.svg={rescale:n(252)};e.exports={graphFeature:n(638),lineFeature:n(639),object:n(58),pathFeature:n(640),pointFeature:n(641),quadFeature:n(642),renderer:n(33),tileLayer:n(643),uniqueID:n(147),vectorFeature:n(644)}},function(e,t,n){"use strict";var r=n(1);var i=n(2).registerFeature;var a=n(256);var o=function e(t){"use strict";var n=this;if(!(this instanceof e)){return new e(t)}a.call(this,t);this.select=function(){var e=n.renderer(),t={},r=n.nodeFeature(),i=n.linkFeatures();t.nodes=e.select(r._svgid());t.links=i.map(function(t){return e.select(t._svgid())});return t};return this};r(o,a);i("svg","graph",o);e.exports=o},function(e,t,n){"use strict";var r=n(1);var i=n(2).registerFeature;var a=n(77);var o=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}var r=n(33).d3;var i=n(58);var o=n(20);var s=n(5);t=t||{};a.call(this,t);i.call(this);var u=this,l=this._init,c=o(),f=0,d=this._update;this._init=function(e){l.call(u,e);return u};this._build=function(){var e=u.data()||[],t=u.style(),n=u.renderer(),i=u.position(),a,o;d.call(u);t.fill=function(){return false};e.forEach(function(e,o){var l;var c=u.line()(e,o);var f={},d;function p(t){if(s.isFunction(t)){return function(){return t(c[0],0,e,o)}}else{return t}}for(d in t){if(t.hasOwnProperty(d)){f[d]=p(t[d])}}a=r.svg.line().x(function(e){return u.featureGcsToDisplay(e).x}).y(function(e){return u.featureGcsToDisplay(e).y}).interpolate(u.style.get("closed")(e,o)&&c.length>2?"linear-closed":"linear");l={data:[c.map(function(t,n){return i(t,n,e,o)})],append:"path",attributes:{d:a},id:u._svgid()+o,classes:["svgLineFeature","svgSubLine-"+o],visible:u.visible,style:f};n._drawFeatures(l)});for(o=e.length;o<f;o+=1){n._removeFeature(u._svgid()+o)}f=e.length;c.modified();u.updateTime().modified();return u};this._update=function(){d.call(u);if(u.timestamp()>=c.timestamp()){u._build()}return u};this._init(t);return this};r(o,a);var s={};s[a.capabilities.basic]=true;s[a.capabilities.multicolor]=false;i("svg","line",o,s);e.exports=o},function(e,t,n){"use strict";var r=n(1);var i=n(2).registerFeature;var a=n(262);var o=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}var r=n(3);var i=n(33).d3;var o=n(58);var s=n(20);t=t||{};a.call(this,t);o.call(this);var u=this,l=s(),c=this._update,f={};f.style={};this._build=function(){var e=u.data()||[],t=u.style.get(),n=u.style.get("position"),a,o;c.call(u);o=function e(t){var n={source:t.source,target:t.target};return i.svg.diagonal()(n)};a=[];e.forEach(function(t,r){var i,o;if(r<e.length-1){i=n(t,r);o=n(e[r+1],r+1);a.push({source:u.featureGcsToDisplay(i),target:u.featureGcsToDisplay(o)})}});f.data=a;f.attributes={d:o};f.id=u._svgid();f.append="path";f.classes=["svgPathFeature"];f.style=r.extend({fill:function e(){return false},fillColor:{r:0,g:0,b:0}},t);f.visible=u.visible;u.renderer()._drawFeatures(f);l.modified();u.updateTime().modified();return u};this._update=function(){c.call(u);if(u.dataTime().timestamp()>=l.timestamp()){u._build()}return u};this._init(t);return this};r(o,a);i("svg","path",o);e.exports=o},function(e,t,n){"use strict";var r=n(1);var i=n(2).registerFeature;var a=n(57);var o=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}var r=n(58);var i=n(20);t=t||{};a.call(this,t);r.call(this);var o=this,s=this._init,u=this._update,l=i(),c={};this._init=function(e){s.call(o,e);return o};this._build=function(){var e=o.data(),t=o.style.get(),n=o.renderer(),r=o.position();u.call(o);if(!e){e=[]}c.id=o._svgid();c.data=e;c.append="circle";c.attributes={r:n._convertScale(t.radius),cx:function e(t){return o.featureGcsToDisplay(r(t)).x},cy:function e(t){return o.featureGcsToDisplay(r(t)).y}};c.style=t;c.classes=["svgPointFeature"];c.visible=o.visible;o.renderer()._drawFeatures(c);l.modified();o.updateTime().modified();return o};this._update=function(){u.call(o);if(o.timestamp()>=l.timestamp()){o._build()}return o};this._init(t);return this};r(o,a);var s={};s[a.capabilities.stroke]=true;i("svg","point",o,s);e.exports=o},function(e,t,n){"use strict";var r=n(1);var i=n(2).registerFeature;var a=n(66);var o=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}var r=n(3);var i=n(33).d3;var o=n(58);a.call(this,t);o.call(this);var s=this,u=this._exit,l=this._init,c=this._update,f;this._build=function(){if(!this.position()){return}var e=s.renderer(),t=e.layer().map();f=s._generateQuads();var n=[];r.each(f.clrQuads,function(e,t){n.push({type:"clr",quad:t,zIndex:t.pos[2]})});r.each(f.imgQuads,function(e,t){if(t.image){n.push({type:"img",quad:t,zIndex:t.pos[2]})}});var a={id:s._svgid(),data:n,dataIndex:function e(t){return t.quad.quadId},append:function e(t){var n=this.namespaceURI,r=t.type==="clr"?"polygon":"image";return n?document.createElementNS(n,r):document.createElement(r)},attributes:{fill:function e(t){if(t.type==="clr"){return i.rgb(255*t.quad.color.r,255*t.quad.color.g,255*t.quad.color.b)}if(t.quad.opacity!==1){i.select(this).style("opacity",t.quad.opacity)}},height:function e(t){return t.type==="clr"?undefined:1},points:function n(r){if(r.type==="clr"&&!r.points){var n=[],i;for(i=0;i<r.quad.pos.length;i+=3){var a={x:r.quad.pos[i],y:r.quad.pos[i+1],z:r.quad.pos[i+2]};a=t.gcsToDisplay(a,null);a=e.baseToLocal(a);n.push(""+a.x+","+a.y)}r.points=n[0]+" "+n[1]+" "+n[3]+" "+n[2]}return r.type==="clr"?r.points:undefined},preserveAspectRatio:function e(t){return t.type==="clr"?undefined:"none"},reference:function e(t){return t.quad.reference},stroke:false,transform:function n(r){if(r.type==="img"&&r.quad.image&&!r.svgTransform){var i=[],a,o=-1,s,u,l,c=r.quad.image.width,f=r.quad.image.height;for(u=0;u<r.quad.pos.length;u+=3){var d={x:r.quad.pos[u],y:r.quad.pos[u+1],z:r.quad.pos[u+2]};d=t.gcsToDisplay(d,null);d=e.baseToLocal(d);i.push(d)}for(u=0;u<4;u+=1){a=Math.abs(i[(u+1)%4].x*(i[(u+2)%4].y-i[(u+3)%4].y)+i[(u+2)%4].x*(i[(u+3)%4].y-i[(u+1)%4].y)+i[(u+3)%4].x*(i[(u+1)%4].y-i[(u+2)%4].y))/2;if(a>o){o=a;s=u}}r.svgTransform=[s===3||s===2?i[1].x-i[0].x:i[3].x-i[2].x,s===3||s===2?i[1].y-i[0].y:i[3].y-i[2].y,s===0||s===2?i[1].x-i[3].x:i[0].x-i[2].x,s===0||s===2?i[1].y-i[3].y:i[0].y-i[2].y,s===2?i[3].x+i[0].x-i[1].x:i[2].x,s===2?i[3].y+i[0].y-i[1].y:i[2].y];if(Math.abs(r.svgTransform[1]/c)<1e-6&&Math.abs(r.svgTransform[2]/f)<1e-6){l=r.svgTransform[0]/c;r.svgTransform[4]=Math.round(r.svgTransform[4]/l)*l;l=r.svgTransform[3]/f;r.svgTransform[5]=Math.round(r.svgTransform[5]/l)*l}}return r.type!=="img"||!r.quad.image?undefined:"matrix("+r.svgTransform.join(" ")+")"},width:function e(t){return t.type==="clr"?undefined:1},x:function e(t){return t.type==="clr"?undefined:0},"xlink:href":function e(t){return t.type==="clr"||!t.quad.image?undefined:t.quad.image.src},y:function e(t){return t.type==="clr"?undefined:0}},style:{fillOpacity:function e(t){return t.type==="clr"?t.quad.opacity:undefined}},onlyRenderNew:!this.style("previewColor")&&!this.style("previewImage"),sortByZ:true,visible:s.visible,classes:["svgQuadFeature"]};e._drawFeatures(a);s.buildTime().modified()};this._update=function(){c.call(s);if(s.buildTime().timestamp()<=s.dataTime().timestamp()||s.buildTime().timestamp()<s.timestamp()){s._build()}return s};this._init=function(){l.call(s,t)};this._exit=function(){u.call(s)};s._init(t);return this};r(o,a);var s={};s[a.capabilities.color]=true;s[a.capabilities.image]=true;s[a.capabilities.imageCrop]=false;s[a.capabilities.imageFixedScale]=false;s[a.capabilities.imageFull]=false;s[a.capabilities.canvas]=false;s[a.capabilities.video]=false;i("svg","quad",o,s);e.exports=o},function(e,t,n){"use strict";var r=n(2).registerLayerAdjustment;var i=function e(){"use strict";var t=this,n=this._init,r=this._exit,i,a=0,o=[];this._drawTile=function(e){if(!i){return}var n=t._tileBounds(e),r=e.index.level||0,s=t._tileOffset(r),u={};u.ul=t.fromLocal(t.fromLevel({x:n.left-s.x,y:n.top-s.y},r),0);u.ll=t.fromLocal(t.fromLevel({x:n.left-s.x,y:n.bottom-s.y},r),0);u.ur=t.fromLocal(t.fromLevel({x:n.right-s.x,y:n.top-s.y},r),0);u.lr=t.fromLocal(t.fromLevel({x:n.right-s.x,y:n.bottom-s.y},r),0);u.ul.z=u.ll.z=u.ur.z=u.lr.z=r;a+=1;u.id=a;e.quadId=u.id;u.image=e.image;u.reference=e.toString();o.push(u);i.data(o);i._update();t.draw()};this._remove=function(e){if(e.quadId!==undefined&&i){for(var n=0;n<o.length;n+=1){if(o[n].id===e.quadId){o.splice(n,1);break}}i.data(o);i._update();t.draw()}};this._exit=function(){t.deleteFeature(i);i=null;o=[];r.apply(t,arguments)};this._init=function(){n.apply(t,arguments);i=t.createFeature("quad",{previewColor:t._options.previewColor,previewImage:t._options.previewImage});i.geoTrigger=undefined;i.gcs(t._options.gcs||t.map().gcs());i.data(o);i._update()};this._getSubLayer=function(){};this._updateSubLayers=undefined};r("svg","tile",i);e.exports=i},function(e,t,n){"use strict";var r=n(1);var i=n(2).registerFeature;var a=n(264);var o={arrow:{attrs:{class:"geo-vector-arrow geo-vector-marker",viewBox:"0 0 10 10",refX:1,refY:5,markerHeight:5,markerWidth:5,orient:"auto"},path:"M 0 0 L 10 5 L 0 10 z"},point:{attrs:{class:"geo-vector-point geo-vector-marker",viewBox:"0 0 12 12",refX:6,refY:6,markerHeight:8,markerWidth:8,orient:"auto"},path:"M 6 3 A 3 3 0 1 1 5.99999 3 Z"},bar:{attrs:{class:"geo-vector-bar geo-vector-marker",viewBox:"0 0 10 10",refX:0,refY:5,markerHeight:6,markerWidth:6,orient:"auto"},path:"M 0 0 L 2 0 L 2 10 L 0 10 z"},wedge:{attrs:{class:"geo-vector-wedge geo-vector-marker",viewBox:"0 0 10 10",refX:10,refY:5,markerHeight:5,markerWidth:5,orient:"auto"},path:"M 0 0 L 1 0 L 10 5 L 1 10 L 0 10 L 9 5 L 0 0"}};var s=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}var r=n(58);var i=n(20);var s=n(33).d3;t=t||{};a.call(this,t);r.call(this);var u=this,l=this._exit,c=this._update,f=i(),d={};function p(e,t,n){return u._svgid()+"_marker_"+t+"_"+n}function h(e,t,n,r,i){var a=u.renderer()._definitions().selectAll("g.marker-group#"+u._svgid()).data(e.length?[1]:[]);a.enter().append("g").attr("id",u._svgid).attr("class","marker-group");a.exit().remove();var l=e.reduce(function(e,t,n){var a=o[i(t,n)];var s=o[r(t,n)];if(a){e.push({data:t,dataIndex:n,head:true})}if(s){e.push({data:t,dataIndex:n,head:false})}return e},[]);var c=a.selectAll("marker.geo-vector-marker").data(l);c.enter().append("marker").append("path");var f=u.renderer();c.each(function(e){var t=s.select(this);var n=e.head?o[i(e.data,e.dataIndex)]:o[r(e.data,e.dataIndex)];Object.keys(n.attrs).map(function(e){t.attr(e,n.attrs[e])})}).attr("id",function(e){return p(e.data,e.dataIndex,e.head?"head":"tail")}).style("stroke",function(e){return f._convertColor(t)(e.data,e.dataIndex)}).style("fill",function(e){return f._convertColor(t)(e.data,e.dataIndex)}).style("opacity",function(e){return n(e.data,e.dataIndex)}).select("path").attr("d",function(e){return e.head?o[i(e.data,e.dataIndex)].path:o[r(e.data,e.dataIndex)].path});c.exit().remove()}this._build=function(){var e=u.data(),t=u.style.get(),n=u.renderer(),r=u.origin(),i=u.delta(),a=[],o=u.style("scale"),s=0;c.call(u);if(!e){e=[]}a=e.map(function(e,t){var n=u.featureGcsToDisplay(r(e,t)),a=i(e,t);s=Math.max(s,a.x*a.x+a.y*a.y);return{x1:n.x,y1:n.y,dx:a.x,dy:-a.y}});s=Math.sqrt(s);if(!o){o=75/(s?s:1)}function l(){return o/n.scaleFactor()}d.id=u._svgid();d.data=e;d.append="line";d.attributes={x1:function e(t,n){return a[n].x1},y1:function e(t,n){return a[n].y1},x2:function e(t,n){return a[n].x1+l()*a[n].dx},y2:function e(t,n){return a[n].y1+l()*a[n].dy},"marker-start":function e(t,n){return"url(#"+p(t,n,"tail")+")"},"marker-end":function e(t,n){return"url(#"+p(t,n,"head")+")"}};d.style={stroke:function e(){return true},strokeColor:t.strokeColor,strokeWidth:t.strokeWidth,strokeOpacity:t.strokeOpacity,originStyle:t.originStyle,endStyle:t.endStyle};d.classes=["svgVectorFeature"];d.visible=u.visible;h(e,t.strokeColor,t.strokeOpacity,t.originStyle,t.endStyle);u.renderer()._drawFeatures(d);f.modified();u.updateTime().modified();return u};this._update=function(){c.call(u);if(u.timestamp()>=f.timestamp()){u._build()}else{h(d.data,d.style.strokeColor,d.style.strokeOpacity,d.style.originStyle,d.style.endStyle)}return u};this._exit=function(){l.call(u);d={};h([],null,null,null,null)};this._init(t);return this};s.markerConfigs=o;r(s,a);i("svg","vector",s);e.exports=s},function(e,t,n){"use strict";e.exports={pointFeature:n(646),vtkjsRenderer:n(265)}},function(e,t,n){"use strict";var r=n(1);var i=n(2).registerFeature;var a=n(57);var o=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}t=t||{};a.call(this,t);var r=n(17);var i=n(647);var o=n(265).vtkjs;var s=o.Rendering.Core.vtkActor;var u=o.Common.Core.vtkDataArray;var l=o.Rendering.Core.vtkGlyph3DMapper;var c=o.Rendering.Core.vtkMapper;var f=o.Common.DataModel.vtkPointSet;var d=o.Filters.Sources.vtkSphereSource;i.call(this);var p=this,h,g,m,v,y,b=this._init,M=this._exit,x=this._update;this._createPipeline=function(){g=f.newInstance();m=d.newInstance();m.setThetaResolution(30);m.setPhiResolution(30);var e=l.newInstance({orient:false,colorByArrayName:"color",scalarMode:c.ScalarMode.USE_POINT_FIELD_DATA,colorMode:c.ColorMode.DIRECT_SCALARS,scaling:true,scaleArray:"diam",scaleMode:l.ScaleModes.SCALE_BY_MAGNITUDE});e.setInputData(g,0);e.setInputConnection(m.getOutputPort(),1);h=s.newInstance();h.setMapper(e);h.getProperty().setAmbient(1);p.renderer().contextRenderer().addActor(h)};this._init=function(){b.call(p,t);p.renderer().contextRenderer().setLayer(1);p._createPipeline()};this._build=function(){var e,t,n,i,a,o,s=p.data().length,l=new Array(s*3),c=p.data(),f=p.position(),d=p.style.get("radius"),h=p.style.get("fill"),m=p.style.get("fillColor"),b=p.style.get("fillOpacity"),M=p.layer().map().unitsPerPixel(p.layer().map().zoom());if(!y||y.length!==s){y=new Float32Array(s)}if(!v||v.length!==s*4){v=new Uint8Array(s*4)}for(e=t=n=0;e<s;e+=1,t+=3,n+=4){i=f(c[e],e);l[t]=i.x;l[t+1]=i.y;l[t+2]=i.z||0;o=o||l[t+2];y[e]=d(c[e],e)*M*2;a=m(c[e],e);v[n]=a.r*255;v[n+1]=a.g*255;v[n+2]=a.b*255;v[n+3]=h(c[e],e)?b(c[e],e)*255:0}l=r.transformCoordinates(p.gcs(),p.layer().map().gcs(),l,3);if(!o&&p.gcs()!==p.layer().map().gcs()){for(e=t=0;e<s;e+=1,t+=3){l[t+2]=0}}g.getPoints().setData(l,3);g.getPointData().addArray(u.newInstance({name:"color",values:v,numberOfComponents:4}));g.getPointData().addArray(u.newInstance({name:"diam",values:y}));p.buildTime().modified()};this._update=function(){x.call(p);if(p.dataTime().getMTime()>=p.buildTime().getMTime()||p.updateTime().getMTime()<p.getMTime()){p._build()}else{var e=p.data(),t=p.style.get("radius");var n=p.layer().map().unitsPerPixel(p.layer().map().zoom());var r=g.getPointData().getArray("diam");var i=r.getData().map(function(r,i){return t(e[i],i)*n*2});r.setData(i);g.modified()}p.updateTime().modified()};this._exit=function(){p.renderer().contextRenderer().removeActor(h);M()};p._init();return this};r(o,a);var s={};s[a.capabilities.stroke]=false;i("vtkjs","point",o,s);e.exports=o},function(e,t,n){"use strict";var r=function e(t){"use strict";var r=n(38);if(!(this instanceof r)){return new e(t)}var i=this,a=this.draw;this.draw=function(){if(i.ready){i._update();i.renderer()._render();a()}return i};return this};e.exports=r},function(e,t,n){
/*!
 * @project        vtk.js
 * @build          Tue, Jul 9, 2019 6:02 PM ET
 * @copyright      Copyright (c) 2019 Kitware, Inc.
 *
 */
!function(n,r){if(true)e.exports=r();else if("function"==typeof define&&define.amd)define([],r);else{var i=r();for(var a in i)("object"==typeof t?t:n)[a]=i[a]}}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=214)}([function(e,t,n){"use strict";(function(e){n.d(t,"g",function(){return h}),n.d(t,"e",function(){return w}),n.d(t,"c",function(){return A}),n.d(t,"f",function(){return D}),n.d(t,"b",function(){return O}),n.d(t,"d",function(){return _});var r=n(8);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var u=0,l=Symbol("void");var c={};function f(){}["log","debug","info","warn","error","time","timeEnd","group","groupEnd"].forEach(function(e){c[e]=f}),e.console=console.hasOwnProperty("log")?console:c;var d={debug:f,error:e.console.error||f,info:e.console.info||f,log:e.console.log||f,warn:e.console.warn||f};function p(){d.debug.apply(d,arguments)}function h(){d.error.apply(d,arguments)}function g(){d.warn.apply(d,arguments)}var m={};var v={Float32Array:Float32Array,Float64Array:Float64Array,Uint8Array:Uint8Array,Int8Array:Int8Array,Uint16Array:Uint16Array,Int16Array:Int16Array,Uint32Array:Uint32Array,Int32Array:Int32Array};function y(e){return e.charAt(0).toUpperCase()+e.slice(1)}function b(e){Object.keys(e).forEach(function(t){Array.isArray(e[t])&&(e[t]=[].concat(e[t]))})}function M(e){return e.isA?e.getState():e}function x(e){setTimeout(e,0)}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b(t);var n=[];function r(e){n[e]=null}return Number.isInteger(t.mtime)||(t.mtime=++u),t.classHierarchy=["vtkObject"],e.isDeleted=function(){return!!t.deleted},e.modified=function(r){t.deleted?h("instance deleted - cannot call any method"):r&&r<e.getMTime()||(t.mtime=++u,n.forEach(function(t){return t&&t(e)}))},e.onModified=function(e){if(t.deleted)return h("instance deleted - cannot call any method"),null;var i=n.length;return n.push(e),function(e){return Object.freeze({unsubscribe:function(){r(e)}})}(i)},e.getMTime=function(){return t.mtime},e.isA=function(e){for(var n=t.classHierarchy.length;n--;)if(t.classHierarchy[n]===e)return!0;return!1},e.getClassName=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t.classHierarchy[t.classHierarchy.length-1-e]},e.set=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=!1;return Object.keys(n).forEach(function(o){var u=i?null:e["set".concat(y(o))];u&&Array.isArray(n[o])&&u.length>1?a=u.apply(void 0,s(n[o]))||a:u?a=u(n[o])||a:(-1!==["mtime"].indexOf(o)||r||g("Warning: Set value to model directly ".concat(o,", ").concat(n[o])),t[o]=n[o],a=!0)}),a},e.get=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return t;var i={};return n.forEach(function(e){i[e]=t[e]}),i},e.getReferenceByName=function(e){return t[e]},e.delete=function(){Object.keys(t).forEach(function(e){return delete t[e]}),n.forEach(function(e,t){return r(t)}),t.deleted=!0},e.getState=function(){var n=Object.assign({},t,{vtkClass:e.getClassName()});Object.keys(n).forEach(function(e){null===n[e]||void 0===n[e]?delete n[e]:n[e].isA?n[e]=n[e].getState():Array.isArray(n[e])&&(n[e]=n[e].map(M))});var r={};return Object.keys(n).sort().forEach(function(e){r[e]=n[e]}),r.mtime&&delete r.mtime,r},e.shallowCopy=function(n){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n.getClassName()!==e.getClassName())throw new Error("Cannot ShallowCopy ".concat(n.getClassName()," into ").concat(e.getClassName()));var i=n.get(),a=Object.keys(t).sort();Object.keys(i).sort().forEach(function(e){var n=a.indexOf(e);-1===n?r&&p("add ".concat(e," in shallowCopy")):a.splice(n,1),t[e]=i[e]}),a.length&&r&&p("Untouched keys: ".concat(a.join(", "))),e.modified()},e}function A(e,t,n){n.forEach(function(n){"object"===o(n)?e["get".concat(y(n.name))]=function(){return t[n.name]}:e["get".concat(y(n))]=function(){return t[n]}})}var T={enum:function(e,t,n){return function(r){if("string"==typeof r){if(void 0!==n.enum[r])return t[n.name]!==n.enum[r]&&(t[n.name]=n.enum[r],e.modified(),!0);throw h("Set Enum with invalid argument ".concat(n,", ").concat(r)),new RangeError("Set Enum with invalid string argument")}if("number"==typeof r){if(t[n.name]!==r){if(-1!==Object.keys(n.enum).map(function(e){return n.enum[e]}).indexOf(r))return t[n.name]=r,e.modified(),!0;throw h("Set Enum outside numeric range ".concat(n,", ").concat(r)),new RangeError("Set Enum outside numeric range")}return!1}throw h("Set Enum with invalid argument (String/Number) ".concat(n,", ").concat(r)),new TypeError("Set Enum with invalid argument (String/Number)")}}};function C(e){if("object"===o(e)){var t=T[e.type];if(t)return function(n,r){return t(n,r,e)};throw h("No setter for field ".concat(e)),new TypeError("No setter for field")}return function(t,n){return function(r){return n.deleted?(h("instance deleted - cannot call any method"),!1):n[e]!==r&&(n[e]=r,t.modified(),!0)}}}function S(e,t,n){n.forEach(function(n){"object"===o(n)?e["set".concat(y(n.name))]=C(n)(e,t):e["set".concat(y(n))]=C(n)(e,t)})}function D(e,t,n){A(e,t,n),S(e,t,n)}function I(e,t,n){n.forEach(function(n){e["get".concat(y(n))]=function(){return[].concat(t[n])},e["get".concat(y(n),"ByReference")]=function(){return t[n]}})}function E(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;n.forEach(function(n){e["set".concat(y(n))]=function(){if(t.deleted)return h("instance deleted - cannot call any method"),!1;for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];var u=o;if(1===u.length&&Array.isArray(u[0])&&(u=u[0]),u.length!==r){if(!(u.length<r&&void 0!==i))throw new RangeError("Invalid number of values for array setter");for(u=[].concat(u);u.length<r;)u.push(i)}var l=!1;return t[n].forEach(function(e,t){if(e!==u[t]){if(l)return;l=!0}}),(l||t[n].length!==u.length)&&(t[n]=[].concat(u),e.modified()),!0},e["set".concat(y(n),"From")]=function(e){var r=t[n];e.forEach(function(e,t){r[t]=e})}})}var N=Symbol("Event abort");function O(e,t,n){var r=[],i=e.delete,o=1;function s(e){for(var t=0;t<r.length;++t){if(a(r[t],1)[0]===e)return void r.splice(t,1)}}e["invoke".concat(y(n))]=function(){var n=arguments;if(t.deleted)h("instance deleted - cannot call any method");else{var i=r.slice(),o=function(t){var r=a(i[t],3),o=r[1],s=r[2];if(!o)return"continue";if(s<0)setTimeout(function(){return o.apply(e,n)},1-s);else if(o.apply(e,n)===N)return"break"};e:for(var s=0;s<i.length;++s)switch(o(s)){case"continue":continue;case"break":break e}}},e["on".concat(y(n))]=function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e.apply)return console.error("Invalid callback for event ".concat(n)),null;if(t.deleted)return h("instance deleted - cannot call any method"),null;var a=o++;return r.push([a,e,i]),r.sort(function(e,t){return t[2]-e[2]}),function(e){return Object.freeze({unsubscribe:function(){s(e)}})}(a)},e.delete=function(){i(),r.forEach(function(e){return s(a(e,1)[0])})}}function _(e,t){var n=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={};return e(n,{},t),Object.freeze(n)};return t&&r.a.register(t,n),n}function L(e){return e&&e.isA&&e.isA("vtkObject")}function P(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.keystore=Object.assign(t.keystore||{},n),e.setKey=function(e,n){t.keystore[e]=n},e.getKey=function(e,n){return t.keystore[e]},e.getAllKeys=function(e,n){return Object.keys(t.keystore)},e.deleteKey=function(e,n){return delete t.keystore[e]},e.clearKeystore=function(){return e.getAllKeys().forEach(function(e){return delete t.keystore[e]})}}var k=1,R="__root__";var j=10,B=40,z=800;t.a={algo:function(e,t,n,i){function a(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t.deleted?h("instance deleted - cannot call any method"):r>=t.numberOfInputs?h("algorithm ".concat(e.getClassName()," only has ").concat(t.numberOfInputs," input ports. To add more input ports, use addInputData()")):(t.inputData[r]!==n||t.inputConnection[r])&&(t.inputData[r]=n,t.inputConnection[r]=null,e.modified&&e.modified())}function o(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(t.deleted)h("instance deleted - cannot call any method");else{if(r>=t.numberOfInputs){var i="algorithm ".concat(e.getClassName()," only has ");return i+="".concat(t.numberOfInputs),void h(i+=" input ports. To add more input ports, use addInputConnection()")}t.inputData[r]=null,t.inputConnection[r]=n}}function s(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t.deleted?(h("instance deleted - cannot call any method"),null):(e.shouldUpdate()&&e.update(),t.output[n])}if(t.inputData?t.inputData=t.inputData.map(r.a):t.inputData=[],t.inputConnection?t.inputConnection=t.inputConnection.map(r.a):t.inputConnection=[],t.output?t.output=t.output.map(r.a):t.output=[],t.inputArrayToProcess?t.inputArrayToProcess=t.inputArrayToProcess.map(r.a):t.inputArrayToProcess=[],t.numberOfInputs=n,e.shouldUpdate=function(){for(var n=e.getMTime(),r=i,a=1/0;r--;){if(!t.output[r])return!0;var o=t.output[r].getMTime();if(o<n)return!0;o<a&&(a=o)}for(r=t.numberOfInputs;r--;)if(t.inputConnection[r]&&t.inputConnection[r].filter.shouldUpdate())return!0;for(r=t.numberOfInputs;r--;)if(e.getInputData(r)&&e.getInputData(r).getMTime()>a)return!0;return!1},t.numberOfInputs){for(var u=t.numberOfInputs;u--;)t.inputData.push(null),t.inputConnection.push(null);e.setInputData=a,e.setInputConnection=o,e.addInputData=function(e){t.deleted?h("instance deleted - cannot call any method"):(t.numberOfInputs++,a(e,t.numberOfInputs-1))},e.addInputConnection=function(e){t.deleted?h("instance deleted - cannot call any method"):(t.numberOfInputs++,o(e,t.numberOfInputs-1))},e.getInputData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t.inputConnection[e]&&(t.inputData[e]=t.inputConnection[e]()),t.inputData[e]},e.getInputConnection=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t.inputConnection[e]}}i&&(e.getOutputData=s,e.getOutputPort=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=function(){return s(t)};return n.filter=e,n}),e.update=function(){var n=[];if(t.numberOfInputs)for(var r=0;r<t.numberOfInputs;)n[r]=e.getInputData(r),r++;e.shouldUpdate()&&e.requestData&&e.requestData(n,t.output)},e.getNumberOfInputPorts=function(){return t.numberOfInputs},e.getNumberOfOutputPorts=function(){return i},e.getInputArrayToProcess=function(e){var n=t.inputArrayToProcess[e],r=t.inputData[e];return n&&r?r["get".concat(n.fieldAssociation)]().getArray(n.arrayName):null},e.setInputArrayToProcess=function(e,n,r){for(var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Scalars";t.inputArrayToProcess.length<e;)t.inputArrayToProcess.push(null);t.inputArrayToProcess[e]={arrayName:n,fieldAssociation:r,attributeType:i}}},capitalize:y,chain:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.filter(function(e){return!!e}).forEach(function(e){return e.apply(void 0,n)})}},debounce:function(e,t,n){var r,i=this;return function(){for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];var u=i,l=n&&!r;clearTimeout(r),r=setTimeout(function(){r=null,n||e.apply(u,o)},t),l&&e.apply(u,o)}},enumToString:function(e,t){return Object.keys(e).find(function(n){return e[n]===t})},event:O,EVENT_ABORT:N,formatBytesToProperUnit:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=["TB","GB","MB","KB"],i=Number(e),a="B";i>n;)i/=n,a=r.pop();return"".concat(i.toFixed(t)," ").concat(a)},formatNumbersWithThousandSeparator:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ",n=[],r=e;r>1e3;)n.push("000".concat(r%1e3).slice(-3)),r=Math.floor(r/1e3);return r>0&&n.push(r),n.reverse(),n.join(t)},get:A,getArray:I,getCurrentGlobalMTime:function(){return u},getStateArrayMapFunc:M,isVtkObject:L,keystore:P,newInstance:_,normalizeWheel:function(e){var t=0,n=0,r=0,i=0;return"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=n,n=0),r=t*j,i=n*j,"deltaY"in e&&(i=e.deltaY),"deltaX"in e&&(r=e.deltaX),(r||i)&&e.deltaMode&&(1===e.deltaMode?(r*=B,i*=B):(r*=z,i*=z)),r&&!t&&(t=r<1?-1:1),i&&!n&&(n=i<1?-1:1),{spinX:t,spinY:n,pixelX:r,pixelY:i}},obj:w,proxy:function(e,t){P(e,t);var n=e.delete;t.proxyId="".concat(k++),t.ui=JSON.parse(JSON.stringify(t.ui||[])),A(e,t,["proxyId","proxyGroup","proxyName"]),D(e,t,["proxyManager"]);var r={},a={};function o(e,t){a[t]||(a[t]=[]);for(var n=a[t],i=0;i<e.length;i++)n.push(e[i].name),r[e[i].name]=e[i],e[i].children&&e[i].children.length&&o(e[i].children,e[i].name)}function s(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,r=[],i=t.proxyId,o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R;return a[e]}(n)||[],u=0;u<o.length;u++){var l=o[u],c=e["get".concat(y(l))],f={id:i,name:l,value:c?c():void 0},d=s(l);d.length&&(f.children=d),r.push(f)}return r}o(t.ui,R),e.updateUI=function(n){t.ui=JSON.parse(JSON.stringify(n||[])),Object.keys(r).forEach(function(e){return delete r[e]}),Object.keys(a).forEach(function(e){return delete a[e]}),o(t.ui,R),e.modified()},e.updateProxyProperty=function(e,t){var n=r[e];n?Object.assign(n,t):r[e]=Object.assign({},t)},e.activate=function(){if(t.proxyManager){var n="setActive".concat(y(e.getProxyGroup().slice(0,-1)));t.proxyManager[n]&&t.proxyManager[n](e)}},t.propertyLinkSubscribers={},e.registerPropertyLinkForGC=function(e,n){n in t.propertyLinkSubscribers||(t.propertyLinkSubscribers[n]=[]),t.propertyLinkSubscribers[n].push(e)},e.gcPropertyLinks=function(n){for(var r=t.propertyLinkSubscribers[n]||[];r.length;)r.pop().unbind(e)},t.propertyLinkMap={},e.getPropertyLink=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t.propertyLinkMap[e])return t.propertyLinkMap[e];var r=null,a=[],o=0,s=!1;function u(n){var u=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(s)return null;var l=[],c=null;for(o=a.length;o--;){var f=a[o];f.instance===n?c=f:l.push(f)}if(!c)return null;var d=c.instance["get".concat(y(c.propertyName))]();if(d!==r||u){for(r=d,s=!0;l.length;){var p=l.pop();p.instance.set(i({},p.propertyName,r))}s=!1}return t.propertyLinkMap[e].persistent&&(t.propertyLinkMap[e].value=d),d}function l(e,t){var n=[];for(o=a.length;o--;){var r=a[o];r.instance!==e||r.propertyName!==t&&void 0!==t||(r.subscription.unsubscribe(),n.push(o))}for(;n.length;)a.splice(n.pop(),1)}var c={bind:function(n,r){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=n.onModified(u),c=a[0];return a.push({instance:n,propertyName:r,subscription:s}),o&&(t.propertyLinkMap[e].persistent&&void 0!==t.propertyLinkMap[e].value?n.set(i({},r,t.propertyLinkMap[e].value)):c&&u(c.instance,!0)),{unsubscribe:function(){return l(n,r)}}},unbind:l,unsubscribe:function(){for(;a.length;)a.pop().subscription.unsubscribe()},persistent:n};return t.propertyLinkMap[e]=c,c},e.listPropertyNames=function(){return s().map(function(e){return e.name})},e.getPropertyByName=function(e){return s().find(function(t){return t.name===e})},e.getPropertyDomainByName=function(e){return r[e].domain},e.getProxySection=function(){return{id:t.proxyId,name:t.proxyGroup,ui:t.ui,properties:s()}},e.delete=function(){for(var r=Object.keys(t.propertyLinkMap),i=r.length;i--;)t.propertyLinkMap[r[i]].unsubscribe();Object.keys(t.propertyLinkSubscribers).forEach(e.gcPropertyLinks),n()},x(function(){if(t.links)for(var n=0;n<t.links.length;n++){var r=t.links[n],i=r.link,a=r.property,o=r.persistent,s=r.updateOnBind;if("application"===r.type){var u=t.proxyManager.getPropertyLink(i,o);e.registerPropertyLinkForGC(u,"application"),u.bind(e,a,s)}}})},proxyPropertyMapping:function(e,t,n){for(var r=e.delete,i=[],a=Object.keys(n),o=a.length;o--;){var s=a[o],u=n[s],l=u.modelKey,c=u.property,f=u.modified,d=void 0===f||f,p=y(c),h=y(s);e["get".concat(h)]=t[l]["get".concat(p)],e["set".concat(h)]=t[l]["set".concat(p)],d&&i.push(t[l].onModified(e.modified))}e.delete=function(){for(;i.length;)i.pop().unsubscribe();r()}},proxyPropertyState:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t.this=e;for(var i=Object.keys(r),a=i.length,o=function(){var o=i[a];t[o]=r[o];var s=n[o];e["set".concat(y(o))]=function(n){n!==t[o]&&(t[o]=n,function(e){for(var n=Object.keys(e),r=n.length;r--;){var i=n[r];t[i].set(e[i])}}(s[n]),e.modified())}};a--;)o();i.length&&A(e,t,i)},safeArrays:b,set:S,setArray:E,setGet:D,setGetArray:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;I(e,t,n),E(e,t,n,r,i)},setImmediate:x,setLoggerFunction:function(e,t){d[e]&&(d[e]=t||f)},throttle:function(e,t){var n=!1,r=null;function i(){n=!1,null!==r&&(a.apply(void 0,s(r)),r=null)}function a(){for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];n?r=o:(n=!0,e.apply(void 0,o),setTimeout(i,t))}return a},traverseInstanceTree:function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(L(t)){if(i.indexOf(t)>=0)return r;i.push(t);var a=n(t);void 0!==a&&r.push(a);var o=t.get();Object.keys(o).forEach(function(t){var a=o[t];Array.isArray(a)?a.forEach(function(t){e(t,n,r,i)}):e(a,n,r,i)})}return r},TYPED_ARRAYS:v,uncapitalize:function(e){return e.charAt(0).toLowerCase()+e.slice(1)},VOID:l,vtkDebugMacro:p,vtkErrorMacro:h,vtkInfoMacro:function(){d.info.apply(d,arguments)},vtkLogMacro:function(){d.log.apply(d,arguments)},vtkOnceErrorMacro:function(e){m[e]||(d.error(e),m[e]=!0)},vtkWarningMacro:g}}).call(this,n(33))},function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"EPSILON",function(){return l}),n.d(r,"ARRAY_TYPE",function(){return c}),n.d(r,"RANDOM",function(){return f}),n.d(r,"setMatrixArrayType",function(){return d}),n.d(r,"toRadian",function(){return h}),n.d(r,"equals",function(){return g});var i={};n.r(i),n.d(i,"create",function(){return m}),n.d(i,"fromMat4",function(){return v}),n.d(i,"clone",function(){return y}),n.d(i,"copy",function(){return b}),n.d(i,"fromValues",function(){return M}),n.d(i,"set",function(){return x}),n.d(i,"identity",function(){return w}),n.d(i,"transpose",function(){return A}),n.d(i,"invert",function(){return T}),n.d(i,"adjoint",function(){return C}),n.d(i,"determinant",function(){return S}),n.d(i,"multiply",function(){return D}),n.d(i,"translate",function(){return I}),n.d(i,"rotate",function(){return E}),n.d(i,"scale",function(){return N}),n.d(i,"fromTranslation",function(){return O}),n.d(i,"fromRotation",function(){return _}),n.d(i,"fromScaling",function(){return L}),n.d(i,"fromMat2d",function(){return P}),n.d(i,"fromQuat",function(){return k}),n.d(i,"normalFromMat4",function(){return R}),n.d(i,"projection",function(){return j}),n.d(i,"str",function(){return B}),n.d(i,"frob",function(){return z}),n.d(i,"add",function(){return F}),n.d(i,"subtract",function(){return V}),n.d(i,"multiplyScalar",function(){return U}),n.d(i,"multiplyScalarAndAdd",function(){return G}),n.d(i,"exactEquals",function(){return W}),n.d(i,"equals",function(){return H}),n.d(i,"mul",function(){return Y}),n.d(i,"sub",function(){return Q});var a={};n.r(a),n.d(a,"create",function(){return q}),n.d(a,"clone",function(){return X}),n.d(a,"copy",function(){return K}),n.d(a,"fromValues",function(){return Z}),n.d(a,"set",function(){return J}),n.d(a,"identity",function(){return $}),n.d(a,"transpose",function(){return ee}),n.d(a,"invert",function(){return te}),n.d(a,"adjoint",function(){return ne}),n.d(a,"determinant",function(){return re}),n.d(a,"multiply",function(){return ie}),n.d(a,"translate",function(){return ae}),n.d(a,"scale",function(){return oe}),n.d(a,"rotate",function(){return se}),n.d(a,"rotateX",function(){return ue}),n.d(a,"rotateY",function(){return le}),n.d(a,"rotateZ",function(){return ce}),n.d(a,"fromTranslation",function(){return fe}),n.d(a,"fromScaling",function(){return de}),n.d(a,"fromRotation",function(){return pe}),n.d(a,"fromXRotation",function(){return he}),n.d(a,"fromYRotation",function(){return ge}),n.d(a,"fromZRotation",function(){return me}),n.d(a,"fromRotationTranslation",function(){return ve}),n.d(a,"fromQuat2",function(){return ye}),n.d(a,"getTranslation",function(){return be}),n.d(a,"getScaling",function(){return Me}),n.d(a,"getRotation",function(){return xe}),n.d(a,"fromRotationTranslationScale",function(){return we}),n.d(a,"fromRotationTranslationScaleOrigin",function(){return Ae}),n.d(a,"fromQuat",function(){return Te}),n.d(a,"frustum",function(){return Ce}),n.d(a,"perspective",function(){return Se}),n.d(a,"perspectiveFromFieldOfView",function(){return De}),n.d(a,"ortho",function(){return Ie}),n.d(a,"lookAt",function(){return Ee}),n.d(a,"targetTo",function(){return Ne}),n.d(a,"str",function(){return Oe}),n.d(a,"frob",function(){return _e}),n.d(a,"add",function(){return Le}),n.d(a,"subtract",function(){return Pe}),n.d(a,"multiplyScalar",function(){return ke}),n.d(a,"multiplyScalarAndAdd",function(){return Re}),n.d(a,"exactEquals",function(){return je}),n.d(a,"equals",function(){return Be}),n.d(a,"mul",function(){return ze}),n.d(a,"sub",function(){return Fe});var o={};n.r(o),n.d(o,"create",function(){return Ve}),n.d(o,"clone",function(){return Ue}),n.d(o,"length",function(){return Ge}),n.d(o,"fromValues",function(){return We}),n.d(o,"copy",function(){return He}),n.d(o,"set",function(){return Ye}),n.d(o,"add",function(){return Qe}),n.d(o,"subtract",function(){return qe}),n.d(o,"multiply",function(){return Xe}),n.d(o,"divide",function(){return Ke}),n.d(o,"ceil",function(){return Ze}),n.d(o,"floor",function(){return Je}),n.d(o,"min",function(){return $e}),n.d(o,"max",function(){return et}),n.d(o,"round",function(){return tt}),n.d(o,"scale",function(){return nt}),n.d(o,"scaleAndAdd",function(){return rt}),n.d(o,"distance",function(){return it}),n.d(o,"squaredDistance",function(){return at}),n.d(o,"squaredLength",function(){return ot}),n.d(o,"negate",function(){return st}),n.d(o,"inverse",function(){return ut}),n.d(o,"normalize",function(){return lt}),n.d(o,"dot",function(){return ct}),n.d(o,"cross",function(){return ft}),n.d(o,"lerp",function(){return dt}),n.d(o,"hermite",function(){return pt}),n.d(o,"bezier",function(){return ht}),n.d(o,"random",function(){return gt}),n.d(o,"transformMat4",function(){return mt}),n.d(o,"transformMat3",function(){return vt}),n.d(o,"transformQuat",function(){return yt}),n.d(o,"rotateX",function(){return bt}),n.d(o,"rotateY",function(){return Mt}),n.d(o,"rotateZ",function(){return xt}),n.d(o,"angle",function(){return wt}),n.d(o,"zero",function(){return At}),n.d(o,"str",function(){return Tt}),n.d(o,"exactEquals",function(){return Ct}),n.d(o,"equals",function(){return St}),n.d(o,"sub",function(){return It}),n.d(o,"mul",function(){return Et}),n.d(o,"div",function(){return Nt}),n.d(o,"dist",function(){return Ot}),n.d(o,"sqrDist",function(){return _t}),n.d(o,"len",function(){return Lt}),n.d(o,"sqrLen",function(){return Pt}),n.d(o,"forEach",function(){return kt});var s={};n.r(s),n.d(s,"create",function(){return Rt}),n.d(s,"clone",function(){return jt}),n.d(s,"fromValues",function(){return Bt}),n.d(s,"copy",function(){return zt}),n.d(s,"set",function(){return Ft}),n.d(s,"add",function(){return Vt}),n.d(s,"subtract",function(){return Ut}),n.d(s,"multiply",function(){return Gt}),n.d(s,"divide",function(){return Wt}),n.d(s,"ceil",function(){return Ht}),n.d(s,"floor",function(){return Yt}),n.d(s,"min",function(){return Qt}),n.d(s,"max",function(){return qt}),n.d(s,"round",function(){return Xt}),n.d(s,"scale",function(){return Kt}),n.d(s,"scaleAndAdd",function(){return Zt}),n.d(s,"distance",function(){return Jt}),n.d(s,"squaredDistance",function(){return $t}),n.d(s,"length",function(){return en}),n.d(s,"squaredLength",function(){return tn}),n.d(s,"negate",function(){return nn}),n.d(s,"inverse",function(){return rn}),n.d(s,"normalize",function(){return an}),n.d(s,"dot",function(){return on}),n.d(s,"cross",function(){return sn}),n.d(s,"lerp",function(){return un}),n.d(s,"random",function(){return ln}),n.d(s,"transformMat4",function(){return cn}),n.d(s,"transformQuat",function(){return fn}),n.d(s,"zero",function(){return dn}),n.d(s,"str",function(){return pn}),n.d(s,"exactEquals",function(){return hn}),n.d(s,"equals",function(){return gn}),n.d(s,"sub",function(){return mn}),n.d(s,"mul",function(){return vn}),n.d(s,"div",function(){return yn}),n.d(s,"dist",function(){return bn}),n.d(s,"sqrDist",function(){return Mn}),n.d(s,"len",function(){return xn}),n.d(s,"sqrLen",function(){return wn}),n.d(s,"forEach",function(){return An});var u={};n.r(u),n.d(u,"create",function(){return Tn}),n.d(u,"identity",function(){return Cn}),n.d(u,"setAxisAngle",function(){return Sn}),n.d(u,"getAxisAngle",function(){return Dn}),n.d(u,"multiply",function(){return In}),n.d(u,"rotateX",function(){return En}),n.d(u,"rotateY",function(){return Nn}),n.d(u,"rotateZ",function(){return On}),n.d(u,"calculateW",function(){return _n}),n.d(u,"slerp",function(){return Ln}),n.d(u,"random",function(){return Pn}),n.d(u,"invert",function(){return kn}),n.d(u,"conjugate",function(){return Rn}),n.d(u,"fromMat3",function(){return jn}),n.d(u,"fromEuler",function(){return Bn}),n.d(u,"str",function(){return zn}),n.d(u,"clone",function(){return Yn}),n.d(u,"fromValues",function(){return Qn}),n.d(u,"copy",function(){return qn}),n.d(u,"set",function(){return Xn}),n.d(u,"add",function(){return Kn}),n.d(u,"mul",function(){return Zn}),n.d(u,"scale",function(){return Jn}),n.d(u,"dot",function(){return $n}),n.d(u,"lerp",function(){return er}),n.d(u,"length",function(){return tr}),n.d(u,"len",function(){return nr}),n.d(u,"squaredLength",function(){return rr}),n.d(u,"sqrLen",function(){return ir}),n.d(u,"normalize",function(){return ar}),n.d(u,"exactEquals",function(){return or}),n.d(u,"equals",function(){return sr}),n.d(u,"rotationTo",function(){return ur}),n.d(u,"sqlerp",function(){return lr}),n.d(u,"setAxes",function(){return cr});var l=1e-6,c="undefined"!=typeof Float32Array?Float32Array:Array,f=Math.random;function d(e){c=e}var p=Math.PI/180;function h(e){return e*p}function g(e,t){return Math.abs(e-t)<=l*Math.max(1,Math.abs(e),Math.abs(t))}function m(){var e=new c(9);return c!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function v(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function y(e){var t=new c(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function b(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function M(e,t,n,r,i,a,o,s,u){var l=new c(9);return l[0]=e,l[1]=t,l[2]=n,l[3]=r,l[4]=i,l[5]=a,l[6]=o,l[7]=s,l[8]=u,l}function x(e,t,n,r,i,a,o,s,u,l){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=a,e[5]=o,e[6]=s,e[7]=u,e[8]=l,e}function w(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function A(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function T(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=t[8],f=c*o-s*l,d=-c*a+s*u,p=l*a-o*u,h=n*f+r*d+i*p;return h?(h=1/h,e[0]=f*h,e[1]=(-c*r+i*l)*h,e[2]=(s*r-i*o)*h,e[3]=d*h,e[4]=(c*n-i*u)*h,e[5]=(-s*n+i*a)*h,e[6]=p*h,e[7]=(-l*n+r*u)*h,e[8]=(o*n-r*a)*h,e):null}function C(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=t[8];return e[0]=o*c-s*l,e[1]=i*l-r*c,e[2]=r*s-i*o,e[3]=s*u-a*c,e[4]=n*c-i*u,e[5]=i*a-n*s,e[6]=a*l-o*u,e[7]=r*u-n*l,e[8]=n*o-r*a,e}function S(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],l=e[8];return t*(l*a-o*u)+n*(-l*i+o*s)+r*(u*i-a*s)}function D(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],f=t[8],d=n[0],p=n[1],h=n[2],g=n[3],m=n[4],v=n[5],y=n[6],b=n[7],M=n[8];return e[0]=d*r+p*o+h*l,e[1]=d*i+p*s+h*c,e[2]=d*a+p*u+h*f,e[3]=g*r+m*o+v*l,e[4]=g*i+m*s+v*c,e[5]=g*a+m*u+v*f,e[6]=y*r+b*o+M*l,e[7]=y*i+b*s+M*c,e[8]=y*a+b*u+M*f,e}function I(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],f=t[8],d=n[0],p=n[1];return e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=u,e[6]=d*r+p*o+l,e[7]=d*i+p*s+c,e[8]=d*a+p*u+f,e}function E(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],f=t[8],d=Math.sin(n),p=Math.cos(n);return e[0]=p*r+d*o,e[1]=p*i+d*s,e[2]=p*a+d*u,e[3]=p*o-d*r,e[4]=p*s-d*i,e[5]=p*u-d*a,e[6]=l,e[7]=c,e[8]=f,e}function N(e,t,n){var r=n[0],i=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function O(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function _(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function L(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function P(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function k(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n+n,s=r+r,u=i+i,l=n*o,c=r*o,f=r*s,d=i*o,p=i*s,h=i*u,g=a*o,m=a*s,v=a*u;return e[0]=1-f-h,e[3]=c-v,e[6]=d+m,e[1]=c+v,e[4]=1-l-h,e[7]=p-g,e[2]=d-m,e[5]=p+g,e[8]=1-l-f,e}function R(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=t[8],f=t[9],d=t[10],p=t[11],h=t[12],g=t[13],m=t[14],v=t[15],y=n*s-r*o,b=n*u-i*o,M=n*l-a*o,x=r*u-i*s,w=r*l-a*s,A=i*l-a*u,T=c*g-f*h,C=c*m-d*h,S=c*v-p*h,D=f*m-d*g,I=f*v-p*g,E=d*v-p*m,N=y*E-b*I+M*D+x*S-w*C+A*T;return N?(N=1/N,e[0]=(s*E-u*I+l*D)*N,e[1]=(u*S-o*E-l*C)*N,e[2]=(o*I-s*S+l*T)*N,e[3]=(i*I-r*E-a*D)*N,e[4]=(n*E-i*S+a*C)*N,e[5]=(r*S-n*I-a*T)*N,e[6]=(g*A-m*w+v*x)*N,e[7]=(m*M-h*A-v*b)*N,e[8]=(h*w-g*M+v*y)*N,e):null}function j(e,t,n){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function B(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function z(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))}function F(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e}function V(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e}function U(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e}function G(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e}function W(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function H(e,t){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],c=e[7],f=e[8],d=t[0],p=t[1],h=t[2],g=t[3],m=t[4],v=t[5],y=t[6],b=t[7],M=t[8];return Math.abs(n-d)<=l*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(r-p)<=l*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(i-h)<=l*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(a-g)<=l*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(o-m)<=l*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(s-v)<=l*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(u-y)<=l*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(c-b)<=l*Math.max(1,Math.abs(c),Math.abs(b))&&Math.abs(f-M)<=l*Math.max(1,Math.abs(f),Math.abs(M))}var Y=D,Q=V;function q(){var e=new c(16);return c!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function X(e){var t=new c(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function K(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Z(e,t,n,r,i,a,o,s,u,l,f,d,p,h,g,m){var v=new c(16);return v[0]=e,v[1]=t,v[2]=n,v[3]=r,v[4]=i,v[5]=a,v[6]=o,v[7]=s,v[8]=u,v[9]=l,v[10]=f,v[11]=d,v[12]=p,v[13]=h,v[14]=g,v[15]=m,v}function J(e,t,n,r,i,a,o,s,u,l,c,f,d,p,h,g,m){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=a,e[5]=o,e[6]=s,e[7]=u,e[8]=l,e[9]=c,e[10]=f,e[11]=d,e[12]=p,e[13]=h,e[14]=g,e[15]=m,e}function $(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ee(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],a=t[6],o=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=a,e[11]=t[14],e[12]=i,e[13]=o,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function te(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=t[8],f=t[9],d=t[10],p=t[11],h=t[12],g=t[13],m=t[14],v=t[15],y=n*s-r*o,b=n*u-i*o,M=n*l-a*o,x=r*u-i*s,w=r*l-a*s,A=i*l-a*u,T=c*g-f*h,C=c*m-d*h,S=c*v-p*h,D=f*m-d*g,I=f*v-p*g,E=d*v-p*m,N=y*E-b*I+M*D+x*S-w*C+A*T;return N?(N=1/N,e[0]=(s*E-u*I+l*D)*N,e[1]=(i*I-r*E-a*D)*N,e[2]=(g*A-m*w+v*x)*N,e[3]=(d*w-f*A-p*x)*N,e[4]=(u*S-o*E-l*C)*N,e[5]=(n*E-i*S+a*C)*N,e[6]=(m*M-h*A-v*b)*N,e[7]=(c*A-d*M+p*b)*N,e[8]=(o*I-s*S+l*T)*N,e[9]=(r*S-n*I-a*T)*N,e[10]=(h*w-g*M+v*y)*N,e[11]=(f*M-c*w-p*y)*N,e[12]=(s*C-o*D-u*T)*N,e[13]=(n*D-r*C+i*T)*N,e[14]=(g*b-h*x-m*y)*N,e[15]=(c*x-f*b+d*y)*N,e):null}function ne(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=t[8],f=t[9],d=t[10],p=t[11],h=t[12],g=t[13],m=t[14],v=t[15];return e[0]=s*(d*v-p*m)-f*(u*v-l*m)+g*(u*p-l*d),e[1]=-(r*(d*v-p*m)-f*(i*v-a*m)+g*(i*p-a*d)),e[2]=r*(u*v-l*m)-s*(i*v-a*m)+g*(i*l-a*u),e[3]=-(r*(u*p-l*d)-s*(i*p-a*d)+f*(i*l-a*u)),e[4]=-(o*(d*v-p*m)-c*(u*v-l*m)+h*(u*p-l*d)),e[5]=n*(d*v-p*m)-c*(i*v-a*m)+h*(i*p-a*d),e[6]=-(n*(u*v-l*m)-o*(i*v-a*m)+h*(i*l-a*u)),e[7]=n*(u*p-l*d)-o*(i*p-a*d)+c*(i*l-a*u),e[8]=o*(f*v-p*g)-c*(s*v-l*g)+h*(s*p-l*f),e[9]=-(n*(f*v-p*g)-c*(r*v-a*g)+h*(r*p-a*f)),e[10]=n*(s*v-l*g)-o*(r*v-a*g)+h*(r*l-a*s),e[11]=-(n*(s*p-l*f)-o*(r*p-a*f)+c*(r*l-a*s)),e[12]=-(o*(f*m-d*g)-c*(s*m-u*g)+h*(s*d-u*f)),e[13]=n*(f*m-d*g)-c*(r*m-i*g)+h*(r*d-i*f),e[14]=-(n*(s*m-u*g)-o*(r*m-i*g)+h*(r*u-i*s)),e[15]=n*(s*d-u*f)-o*(r*d-i*f)+c*(r*u-i*s),e}function re(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],l=e[8],c=e[9],f=e[10],d=e[11],p=e[12],h=e[13],g=e[14],m=e[15];return(t*o-n*a)*(f*m-d*g)-(t*s-r*a)*(c*m-d*h)+(t*u-i*a)*(c*g-f*h)+(n*s-r*o)*(l*m-d*p)-(n*u-i*o)*(l*g-f*p)+(r*u-i*s)*(l*h-c*p)}function ie(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],f=t[8],d=t[9],p=t[10],h=t[11],g=t[12],m=t[13],v=t[14],y=t[15],b=n[0],M=n[1],x=n[2],w=n[3];return e[0]=b*r+M*s+x*f+w*g,e[1]=b*i+M*u+x*d+w*m,e[2]=b*a+M*l+x*p+w*v,e[3]=b*o+M*c+x*h+w*y,b=n[4],M=n[5],x=n[6],w=n[7],e[4]=b*r+M*s+x*f+w*g,e[5]=b*i+M*u+x*d+w*m,e[6]=b*a+M*l+x*p+w*v,e[7]=b*o+M*c+x*h+w*y,b=n[8],M=n[9],x=n[10],w=n[11],e[8]=b*r+M*s+x*f+w*g,e[9]=b*i+M*u+x*d+w*m,e[10]=b*a+M*l+x*p+w*v,e[11]=b*o+M*c+x*h+w*y,b=n[12],M=n[13],x=n[14],w=n[15],e[12]=b*r+M*s+x*f+w*g,e[13]=b*i+M*u+x*d+w*m,e[14]=b*a+M*l+x*p+w*v,e[15]=b*o+M*c+x*h+w*y,e}function ae(e,t,n){var r,i,a,o,s,u,l,c,f,d,p,h,g=n[0],m=n[1],v=n[2];return t===e?(e[12]=t[0]*g+t[4]*m+t[8]*v+t[12],e[13]=t[1]*g+t[5]*m+t[9]*v+t[13],e[14]=t[2]*g+t[6]*m+t[10]*v+t[14],e[15]=t[3]*g+t[7]*m+t[11]*v+t[15]):(r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],f=t[8],d=t[9],p=t[10],h=t[11],e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=u,e[6]=l,e[7]=c,e[8]=f,e[9]=d,e[10]=p,e[11]=h,e[12]=r*g+s*m+f*v+t[12],e[13]=i*g+u*m+d*v+t[13],e[14]=a*g+l*m+p*v+t[14],e[15]=o*g+c*m+h*v+t[15]),e}function oe(e,t,n){var r=n[0],i=n[1],a=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function se(e,t,n,r){var i,a,o,s,u,c,f,d,p,h,g,m,v,y,b,M,x,w,A,T,C,S,D,I,E=r[0],N=r[1],O=r[2],_=Math.sqrt(E*E+N*N+O*O);return _<l?null:(E*=_=1/_,N*=_,O*=_,i=Math.sin(n),o=1-(a=Math.cos(n)),s=t[0],u=t[1],c=t[2],f=t[3],d=t[4],p=t[5],h=t[6],g=t[7],m=t[8],v=t[9],y=t[10],b=t[11],M=E*E*o+a,x=N*E*o+O*i,w=O*E*o-N*i,A=E*N*o-O*i,T=N*N*o+a,C=O*N*o+E*i,S=E*O*o+N*i,D=N*O*o-E*i,I=O*O*o+a,e[0]=s*M+d*x+m*w,e[1]=u*M+p*x+v*w,e[2]=c*M+h*x+y*w,e[3]=f*M+g*x+b*w,e[4]=s*A+d*T+m*C,e[5]=u*A+p*T+v*C,e[6]=c*A+h*T+y*C,e[7]=f*A+g*T+b*C,e[8]=s*S+d*D+m*I,e[9]=u*S+p*D+v*I,e[10]=c*S+h*D+y*I,e[11]=f*S+g*D+b*I,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function ue(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[4],o=t[5],s=t[6],u=t[7],l=t[8],c=t[9],f=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*i+l*r,e[5]=o*i+c*r,e[6]=s*i+f*r,e[7]=u*i+d*r,e[8]=l*i-a*r,e[9]=c*i-o*r,e[10]=f*i-s*r,e[11]=d*i-u*r,e}function le(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],u=t[3],l=t[8],c=t[9],f=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i-l*r,e[1]=o*i-c*r,e[2]=s*i-f*r,e[3]=u*i-d*r,e[8]=a*r+l*i,e[9]=o*r+c*i,e[10]=s*r+f*i,e[11]=u*r+d*i,e}function ce(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],u=t[3],l=t[4],c=t[5],f=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i+l*r,e[1]=o*i+c*r,e[2]=s*i+f*r,e[3]=u*i+d*r,e[4]=l*i-a*r,e[5]=c*i-o*r,e[6]=f*i-s*r,e[7]=d*i-u*r,e}function fe(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function de(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function pe(e,t,n){var r,i,a,o=n[0],s=n[1],u=n[2],c=Math.sqrt(o*o+s*s+u*u);return c<l?null:(o*=c=1/c,s*=c,u*=c,r=Math.sin(t),a=1-(i=Math.cos(t)),e[0]=o*o*a+i,e[1]=s*o*a+u*r,e[2]=u*o*a-s*r,e[3]=0,e[4]=o*s*a-u*r,e[5]=s*s*a+i,e[6]=u*s*a+o*r,e[7]=0,e[8]=o*u*a+s*r,e[9]=s*u*a-o*r,e[10]=u*u*a+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function he(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ge(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function me(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ve(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=r+r,u=i+i,l=a+a,c=r*s,f=r*u,d=r*l,p=i*u,h=i*l,g=a*l,m=o*s,v=o*u,y=o*l;return e[0]=1-(p+g),e[1]=f+y,e[2]=d-v,e[3]=0,e[4]=f-y,e[5]=1-(c+g),e[6]=h+m,e[7]=0,e[8]=d+v,e[9]=h-m,e[10]=1-(c+p),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function ye(e,t){var n=new c(3),r=-t[0],i=-t[1],a=-t[2],o=t[3],s=t[4],u=t[5],l=t[6],f=t[7],d=r*r+i*i+a*a+o*o;return d>0?(n[0]=2*(s*o+f*r+u*a-l*i)/d,n[1]=2*(u*o+f*i+l*r-s*a)/d,n[2]=2*(l*o+f*a+s*i-u*r)/d):(n[0]=2*(s*o+f*r+u*a-l*i),n[1]=2*(u*o+f*i+l*r-s*a),n[2]=2*(l*o+f*a+s*i-u*r)),ve(e,t,n),e}function be(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function Me(e,t){var n=t[0],r=t[1],i=t[2],a=t[4],o=t[5],s=t[6],u=t[8],l=t[9],c=t[10];return e[0]=Math.sqrt(n*n+r*r+i*i),e[1]=Math.sqrt(a*a+o*o+s*s),e[2]=Math.sqrt(u*u+l*l+c*c),e}function xe(e,t){var n=t[0]+t[5]+t[10],r=0;return n>0?(r=2*Math.sqrt(n+1),e[3]=.25*r,e[0]=(t[6]-t[9])/r,e[1]=(t[8]-t[2])/r,e[2]=(t[1]-t[4])/r):t[0]>t[5]&&t[0]>t[10]?(r=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/r,e[0]=.25*r,e[1]=(t[1]+t[4])/r,e[2]=(t[8]+t[2])/r):t[5]>t[10]?(r=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/r,e[0]=(t[1]+t[4])/r,e[1]=.25*r,e[2]=(t[6]+t[9])/r):(r=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/r,e[0]=(t[8]+t[2])/r,e[1]=(t[6]+t[9])/r,e[2]=.25*r),e}function we(e,t,n,r){var i=t[0],a=t[1],o=t[2],s=t[3],u=i+i,l=a+a,c=o+o,f=i*u,d=i*l,p=i*c,h=a*l,g=a*c,m=o*c,v=s*u,y=s*l,b=s*c,M=r[0],x=r[1],w=r[2];return e[0]=(1-(h+m))*M,e[1]=(d+b)*M,e[2]=(p-y)*M,e[3]=0,e[4]=(d-b)*x,e[5]=(1-(f+m))*x,e[6]=(g+v)*x,e[7]=0,e[8]=(p+y)*w,e[9]=(g-v)*w,e[10]=(1-(f+h))*w,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function Ae(e,t,n,r,i){var a=t[0],o=t[1],s=t[2],u=t[3],l=a+a,c=o+o,f=s+s,d=a*l,p=a*c,h=a*f,g=o*c,m=o*f,v=s*f,y=u*l,b=u*c,M=u*f,x=r[0],w=r[1],A=r[2],T=i[0],C=i[1],S=i[2],D=(1-(g+v))*x,I=(p+M)*x,E=(h-b)*x,N=(p-M)*w,O=(1-(d+v))*w,_=(m+y)*w,L=(h+b)*A,P=(m-y)*A,k=(1-(d+g))*A;return e[0]=D,e[1]=I,e[2]=E,e[3]=0,e[4]=N,e[5]=O,e[6]=_,e[7]=0,e[8]=L,e[9]=P,e[10]=k,e[11]=0,e[12]=n[0]+T-(D*T+N*C+L*S),e[13]=n[1]+C-(I*T+O*C+P*S),e[14]=n[2]+S-(E*T+_*C+k*S),e[15]=1,e}function Te(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n+n,s=r+r,u=i+i,l=n*o,c=r*o,f=r*s,d=i*o,p=i*s,h=i*u,g=a*o,m=a*s,v=a*u;return e[0]=1-f-h,e[1]=c+v,e[2]=d-m,e[3]=0,e[4]=c-v,e[5]=1-l-h,e[6]=p+g,e[7]=0,e[8]=d+m,e[9]=p-g,e[10]=1-l-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Ce(e,t,n,r,i,a,o){var s=1/(n-t),u=1/(i-r),l=1/(a-o);return e[0]=2*a*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*u,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(i+r)*u,e[10]=(o+a)*l,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*a*2*l,e[15]=0,e}function Se(e,t,n,r,i){var a,o=1/Math.tan(t/2);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(a=1/(r-i),e[10]=(i+r)*a,e[14]=2*i*r*a):(e[10]=-1,e[14]=-2*r),e}function De(e,t,n,r){var i=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),u=2/(o+s),l=2/(i+a);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=-(o-s)*u*.5,e[9]=(i-a)*l*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e}function Ie(e,t,n,r,i,a,o){var s=1/(t-n),u=1/(r-i),l=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*u,e[14]=(o+a)*l,e[15]=1,e}function Ee(e,t,n,r){var i,a,o,s,u,c,f,d,p,h,g=t[0],m=t[1],v=t[2],y=r[0],b=r[1],M=r[2],x=n[0],w=n[1],A=n[2];return Math.abs(g-x)<l&&Math.abs(m-w)<l&&Math.abs(v-A)<l?$(e):(f=g-x,d=m-w,p=v-A,i=b*(p*=h=1/Math.sqrt(f*f+d*d+p*p))-M*(d*=h),a=M*(f*=h)-y*p,o=y*d-b*f,(h=Math.sqrt(i*i+a*a+o*o))?(i*=h=1/h,a*=h,o*=h):(i=0,a=0,o=0),s=d*o-p*a,u=p*i-f*o,c=f*a-d*i,(h=Math.sqrt(s*s+u*u+c*c))?(s*=h=1/h,u*=h,c*=h):(s=0,u=0,c=0),e[0]=i,e[1]=s,e[2]=f,e[3]=0,e[4]=a,e[5]=u,e[6]=d,e[7]=0,e[8]=o,e[9]=c,e[10]=p,e[11]=0,e[12]=-(i*g+a*m+o*v),e[13]=-(s*g+u*m+c*v),e[14]=-(f*g+d*m+p*v),e[15]=1,e)}function Ne(e,t,n,r){var i=t[0],a=t[1],o=t[2],s=r[0],u=r[1],l=r[2],c=i-n[0],f=a-n[1],d=o-n[2],p=c*c+f*f+d*d;p>0&&(c*=p=1/Math.sqrt(p),f*=p,d*=p);var h=u*d-l*f,g=l*c-s*d,m=s*f-u*c;return(p=h*h+g*g+m*m)>0&&(h*=p=1/Math.sqrt(p),g*=p,m*=p),e[0]=h,e[1]=g,e[2]=m,e[3]=0,e[4]=f*m-d*g,e[5]=d*h-c*m,e[6]=c*g-f*h,e[7]=0,e[8]=c,e[9]=f,e[10]=d,e[11]=0,e[12]=i,e[13]=a,e[14]=o,e[15]=1,e}function Oe(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function _e(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))}function Le(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e}function Pe(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}function ke(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e}function Re(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e[9]=t[9]+n[9]*r,e[10]=t[10]+n[10]*r,e[11]=t[11]+n[11]*r,e[12]=t[12]+n[12]*r,e[13]=t[13]+n[13]*r,e[14]=t[14]+n[14]*r,e[15]=t[15]+n[15]*r,e}function je(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function Be(e,t){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],c=e[7],f=e[8],d=e[9],p=e[10],h=e[11],g=e[12],m=e[13],v=e[14],y=e[15],b=t[0],M=t[1],x=t[2],w=t[3],A=t[4],T=t[5],C=t[6],S=t[7],D=t[8],I=t[9],E=t[10],N=t[11],O=t[12],_=t[13],L=t[14],P=t[15];return Math.abs(n-b)<=l*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(r-M)<=l*Math.max(1,Math.abs(r),Math.abs(M))&&Math.abs(i-x)<=l*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(a-w)<=l*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(o-A)<=l*Math.max(1,Math.abs(o),Math.abs(A))&&Math.abs(s-T)<=l*Math.max(1,Math.abs(s),Math.abs(T))&&Math.abs(u-C)<=l*Math.max(1,Math.abs(u),Math.abs(C))&&Math.abs(c-S)<=l*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(f-D)<=l*Math.max(1,Math.abs(f),Math.abs(D))&&Math.abs(d-I)<=l*Math.max(1,Math.abs(d),Math.abs(I))&&Math.abs(p-E)<=l*Math.max(1,Math.abs(p),Math.abs(E))&&Math.abs(h-N)<=l*Math.max(1,Math.abs(h),Math.abs(N))&&Math.abs(g-O)<=l*Math.max(1,Math.abs(g),Math.abs(O))&&Math.abs(m-_)<=l*Math.max(1,Math.abs(m),Math.abs(_))&&Math.abs(v-L)<=l*Math.max(1,Math.abs(v),Math.abs(L))&&Math.abs(y-P)<=l*Math.max(1,Math.abs(y),Math.abs(P))}var ze=ie,Fe=Pe;function Ve(){var e=new c(3);return c!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Ue(e){var t=new c(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Ge(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}function We(e,t,n){var r=new c(3);return r[0]=e,r[1]=t,r[2]=n,r}function He(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Ye(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}function Qe(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function qe(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function Xe(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function Ke(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function Ze(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function Je(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function $e(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function et(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function tt(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function nt(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function rt(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}function it(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)}function at(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i}function ot(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}function st(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function ut(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function lt(e,t){var n=t[0],r=t[1],i=t[2],a=n*n+r*r+i*i;return a>0&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e}function ct(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function ft(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[0],s=n[1],u=n[2];return e[0]=i*u-a*s,e[1]=a*o-r*u,e[2]=r*s-i*o,e}function dt(e,t,n,r){var i=t[0],a=t[1],o=t[2];return e[0]=i+r*(n[0]-i),e[1]=a+r*(n[1]-a),e[2]=o+r*(n[2]-o),e}function pt(e,t,n,r,i,a){var o=a*a,s=o*(2*a-3)+1,u=o*(a-2)+a,l=o*(a-1),c=o*(3-2*a);return e[0]=t[0]*s+n[0]*u+r[0]*l+i[0]*c,e[1]=t[1]*s+n[1]*u+r[1]*l+i[1]*c,e[2]=t[2]*s+n[2]*u+r[2]*l+i[2]*c,e}function ht(e,t,n,r,i,a){var o=1-a,s=o*o,u=a*a,l=s*o,c=3*a*s,f=3*u*o,d=u*a;return e[0]=t[0]*l+n[0]*c+r[0]*f+i[0]*d,e[1]=t[1]*l+n[1]*c+r[1]*f+i[1]*d,e[2]=t[2]*l+n[2]*c+r[2]*f+i[2]*d,e}function gt(e,t){t=t||1;var n=2*f()*Math.PI,r=2*f()-1,i=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(n)*i,e[1]=Math.sin(n)*i,e[2]=r*t,e}function mt(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[3]*r+n[7]*i+n[11]*a+n[15];return o=o||1,e[0]=(n[0]*r+n[4]*i+n[8]*a+n[12])/o,e[1]=(n[1]*r+n[5]*i+n[9]*a+n[13])/o,e[2]=(n[2]*r+n[6]*i+n[10]*a+n[14])/o,e}function vt(e,t,n){var r=t[0],i=t[1],a=t[2];return e[0]=r*n[0]+i*n[3]+a*n[6],e[1]=r*n[1]+i*n[4]+a*n[7],e[2]=r*n[2]+i*n[5]+a*n[8],e}function yt(e,t,n){var r=n[0],i=n[1],a=n[2],o=n[3],s=t[0],u=t[1],l=t[2],c=i*l-a*u,f=a*s-r*l,d=r*u-i*s,p=i*d-a*f,h=a*c-r*d,g=r*f-i*c,m=2*o;return c*=m,f*=m,d*=m,p*=2,h*=2,g*=2,e[0]=s+c+p,e[1]=u+f+h,e[2]=l+d+g,e}function bt(e,t,n,r){var i=[],a=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],a[0]=i[0],a[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),a[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e}function Mt(e,t,n,r){var i=[],a=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],a[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),a[1]=i[1],a[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e}function xt(e,t,n,r){var i=[],a=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],a[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),a[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),a[2]=i[2],e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e}function wt(e,t){var n=We(e[0],e[1],e[2]),r=We(t[0],t[1],t[2]);lt(n,n),lt(r,r);var i=ct(n,r);return i>1?0:i<-1?Math.PI:Math.acos(i)}function At(e){return e[0]=0,e[1]=0,e[2]=0,e}function Tt(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function Ct(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function St(e,t){var n=e[0],r=e[1],i=e[2],a=t[0],o=t[1],s=t[2];return Math.abs(n-a)<=l*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-o)<=l*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-s)<=l*Math.max(1,Math.abs(i),Math.abs(s))}var Dt,It=qe,Et=Xe,Nt=Ke,Ot=it,_t=at,Lt=Ge,Pt=ot,kt=(Dt=Ve(),function(e,t,n,r,i,a){var o,s;for(t||(t=3),n||(n=0),s=r?Math.min(r*t+n,e.length):e.length,o=n;o<s;o+=t)Dt[0]=e[o],Dt[1]=e[o+1],Dt[2]=e[o+2],i(Dt,Dt,a),e[o]=Dt[0],e[o+1]=Dt[1],e[o+2]=Dt[2];return e});function Rt(){var e=new c(4);return c!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function jt(e){var t=new c(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Bt(e,t,n,r){var i=new c(4);return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i}function zt(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Ft(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e}function Vt(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}function Ut(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function Gt(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}function Wt(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e}function Ht(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function Yt(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function Qt(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e}function qt(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e}function Xt(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function Kt(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function Zt(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e}function Jt(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],a=t[3]-e[3];return Math.sqrt(n*n+r*r+i*i+a*a)}function $t(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],a=t[3]-e[3];return n*n+r*r+i*i+a*a}function en(e){var t=e[0],n=e[1],r=e[2],i=e[3];return Math.sqrt(t*t+n*n+r*r+i*i)}function tn(e){var t=e[0],n=e[1],r=e[2],i=e[3];return t*t+n*n+r*r+i*i}function nn(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function rn(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function an(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n*n+r*r+i*i+a*a;return o>0&&(o=1/Math.sqrt(o)),e[0]=n*o,e[1]=r*o,e[2]=i*o,e[3]=a*o,e}function on(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function sn(e,t,n,r){var i=n[0]*r[1]-n[1]*r[0],a=n[0]*r[2]-n[2]*r[0],o=n[0]*r[3]-n[3]*r[0],s=n[1]*r[2]-n[2]*r[1],u=n[1]*r[3]-n[3]*r[1],l=n[2]*r[3]-n[3]*r[2],c=t[0],f=t[1],d=t[2],p=t[3];return e[0]=f*l-d*u+p*s,e[1]=-c*l+d*o-p*a,e[2]=c*u-f*o+p*i,e[3]=-c*s+f*a-d*i,e}function un(e,t,n,r){var i=t[0],a=t[1],o=t[2],s=t[3];return e[0]=i+r*(n[0]-i),e[1]=a+r*(n[1]-a),e[2]=o+r*(n[2]-o),e[3]=s+r*(n[3]-s),e}function ln(e,t){var n,r,i,a,o,s;t=t||1;do{o=(n=2*f()-1)*n+(r=2*f()-1)*r}while(o>=1);do{s=(i=2*f()-1)*i+(a=2*f()-1)*a}while(s>=1);var u=Math.sqrt((1-o)/s);return e[0]=t*n,e[1]=t*r,e[2]=t*i*u,e[3]=t*a*u,e}function cn(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o,e}function fn(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[0],s=n[1],u=n[2],l=n[3],c=l*r+s*a-u*i,f=l*i+u*r-o*a,d=l*a+o*i-s*r,p=-o*r-s*i-u*a;return e[0]=c*l+p*-o+f*-u-d*-s,e[1]=f*l+p*-s+d*-o-c*-u,e[2]=d*l+p*-u+c*-s-f*-o,e[3]=t[3],e}function dn(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}function pn(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function hn(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function gn(e,t){var n=e[0],r=e[1],i=e[2],a=e[3],o=t[0],s=t[1],u=t[2],c=t[3];return Math.abs(n-o)<=l*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-s)<=l*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-u)<=l*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(a-c)<=l*Math.max(1,Math.abs(a),Math.abs(c))}var mn=Ut,vn=Gt,yn=Wt,bn=Jt,Mn=$t,xn=en,wn=tn,An=function(){var e=Rt();return function(t,n,r,i,a,o){var s,u;for(n||(n=4),r||(r=0),u=i?Math.min(i*n+r,t.length):t.length,s=r;s<u;s+=n)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],a(e,e,o),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2],t[s+3]=e[3];return t}}();function Tn(){var e=new c(4);return c!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function Cn(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function Sn(e,t,n){n*=.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}function Dn(e,t){var n=2*Math.acos(t[3]),r=Math.sin(n/2);return r>l?(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r):(e[0]=1,e[1]=0,e[2]=0),n}function In(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=n[0],u=n[1],l=n[2],c=n[3];return e[0]=r*c+o*s+i*l-a*u,e[1]=i*c+o*u+a*s-r*l,e[2]=a*c+o*l+r*u-i*s,e[3]=o*c-r*s-i*u-a*l,e}function En(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u+o*s,e[1]=i*u+a*s,e[2]=a*u-i*s,e[3]=o*u-r*s,e}function Nn(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u-a*s,e[1]=i*u+o*s,e[2]=a*u+r*s,e[3]=o*u-i*s,e}function On(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u+i*s,e[1]=i*u-r*s,e[2]=a*u+o*s,e[3]=o*u-a*s,e}function _n(e,t){var n=t[0],r=t[1],i=t[2];return e[0]=n,e[1]=r,e[2]=i,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),e}function Ln(e,t,n,r){var i,a,o,s,u,c=t[0],f=t[1],d=t[2],p=t[3],h=n[0],g=n[1],m=n[2],v=n[3];return(a=c*h+f*g+d*m+p*v)<0&&(a=-a,h=-h,g=-g,m=-m,v=-v),1-a>l?(i=Math.acos(a),o=Math.sin(i),s=Math.sin((1-r)*i)/o,u=Math.sin(r*i)/o):(s=1-r,u=r),e[0]=s*c+u*h,e[1]=s*f+u*g,e[2]=s*d+u*m,e[3]=s*p+u*v,e}function Pn(e){var t=f(),n=f(),r=f(),i=Math.sqrt(1-t),a=Math.sqrt(t);return e[0]=i*Math.sin(2*Math.PI*n),e[1]=i*Math.cos(2*Math.PI*n),e[2]=a*Math.sin(2*Math.PI*r),e[3]=a*Math.cos(2*Math.PI*r),e}function kn(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n*n+r*r+i*i+a*a,s=o?1/o:0;return e[0]=-n*s,e[1]=-r*s,e[2]=-i*s,e[3]=a*s,e}function Rn(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function jn(e,t){var n,r=t[0]+t[4]+t[8];if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[3*i+i]&&(i=2);var a=(i+1)%3,o=(i+2)%3;n=Math.sqrt(t[3*i+i]-t[3*a+a]-t[3*o+o]+1),e[i]=.5*n,n=.5/n,e[3]=(t[3*a+o]-t[3*o+a])*n,e[a]=(t[3*a+i]+t[3*i+a])*n,e[o]=(t[3*o+i]+t[3*i+o])*n}return e}function Bn(e,t,n,r){var i=.5*Math.PI/180;t*=i,n*=i,r*=i;var a=Math.sin(t),o=Math.cos(t),s=Math.sin(n),u=Math.cos(n),l=Math.sin(r),c=Math.cos(r);return e[0]=a*u*c-o*s*l,e[1]=o*s*c+a*u*l,e[2]=o*u*l-a*s*c,e[3]=o*u*c+a*s*l,e}function zn(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}var Fn,Vn,Un,Gn,Wn,Hn,Yn=jt,Qn=Bt,qn=zt,Xn=Ft,Kn=Vt,Zn=In,Jn=Kt,$n=on,er=un,tr=en,nr=tr,rr=tn,ir=rr,ar=an,or=hn,sr=gn,ur=(Fn=Ve(),Vn=We(1,0,0),Un=We(0,1,0),function(e,t,n){var r=ct(t,n);return r<-.999999?(ft(Fn,Vn,t),Lt(Fn)<1e-6&&ft(Fn,Un,t),lt(Fn,Fn),Sn(e,Fn,Math.PI),e):r>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(ft(Fn,t,n),e[0]=Fn[0],e[1]=Fn[1],e[2]=Fn[2],e[3]=1+r,ar(e,e))}),lr=(Gn=Tn(),Wn=Tn(),function(e,t,n,r,i,a){return Ln(Gn,t,i,a),Ln(Wn,n,r,a),Ln(e,Gn,Wn,2*a*(1-a)),e}),cr=(Hn=m(),function(e,t,n,r){return Hn[0]=n[0],Hn[3]=n[1],Hn[6]=n[2],Hn[1]=r[0],Hn[4]=r[1],Hn[7]=r[2],Hn[2]=-t[0],Hn[5]=-t[1],Hn[8]=-t[2],ar(e,jn(e,Hn))});n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return a}),n.d(t,"d",function(){return u}),n.d(t,"e",function(){return o}),n.d(t,"f",function(){return s})},function(e,t,n){"use strict";n.r(t),n.d(t,"Pi",function(){return g}),n.d(t,"radiansFromDegrees",function(){return m}),n.d(t,"degreesFromRadians",function(){return v}),n.d(t,"round",function(){return y}),n.d(t,"floor",function(){return b}),n.d(t,"ceil",function(){return M}),n.d(t,"min",function(){return x}),n.d(t,"max",function(){return w}),n.d(t,"arrayMin",function(){return A}),n.d(t,"arrayMax",function(){return T}),n.d(t,"ceilLog2",function(){return C}),n.d(t,"factorial",function(){return S}),n.d(t,"nearestPowerOfTwo",function(){return D}),n.d(t,"isPowerOfTwo",function(){return I}),n.d(t,"binomial",function(){return E}),n.d(t,"beginCombination",function(){return N}),n.d(t,"nextCombination",function(){return O}),n.d(t,"randomSeed",function(){return _}),n.d(t,"getSeed",function(){return L}),n.d(t,"random",function(){return P}),n.d(t,"gaussian",function(){return k}),n.d(t,"add",function(){return R}),n.d(t,"subtract",function(){return j}),n.d(t,"multiplyScalar",function(){return B}),n.d(t,"multiplyScalar2D",function(){return z}),n.d(t,"dot",function(){return F}),n.d(t,"outer",function(){return V}),n.d(t,"cross",function(){return U}),n.d(t,"norm",function(){return G}),n.d(t,"normalize",function(){return W}),n.d(t,"perpendiculars",function(){return H}),n.d(t,"projectVector",function(){return Y}),n.d(t,"dot2D",function(){return Q}),n.d(t,"projectVector2D",function(){return q}),n.d(t,"distance2BetweenPoints",function(){return X}),n.d(t,"angleBetweenVectors",function(){return K}),n.d(t,"gaussianAmplitude",function(){return Z}),n.d(t,"gaussianWeight",function(){return J}),n.d(t,"outer2D",function(){return $}),n.d(t,"norm2D",function(){return ee}),n.d(t,"normalize2D",function(){return te}),n.d(t,"determinant2x2",function(){return ne}),n.d(t,"LUFactor3x3",function(){return re}),n.d(t,"LUSolve3x3",function(){return ie}),n.d(t,"linearSolve3x3",function(){return ae}),n.d(t,"multiply3x3_vect3",function(){return oe}),n.d(t,"multiply3x3_mat3",function(){return se}),n.d(t,"multiplyMatrix",function(){return ue}),n.d(t,"transpose3x3",function(){return le}),n.d(t,"invert3x3",function(){return ce}),n.d(t,"identity3x3",function(){return fe}),n.d(t,"determinant3x3",function(){return de}),n.d(t,"quaternionToMatrix3x3",function(){return pe}),n.d(t,"areMatricesEqual",function(){return he}),n.d(t,"jacobiN",function(){return ge}),n.d(t,"matrix3x3ToQuaternion",function(){return me}),n.d(t,"multiplyQuaternion",function(){return ve}),n.d(t,"orthogonalize3x3",function(){return ye}),n.d(t,"diagonalize3x3",function(){return be}),n.d(t,"singularValueDecomposition3x3",function(){return Me}),n.d(t,"luFactorLinearSystem",function(){return xe}),n.d(t,"luSolveLinearSystem",function(){return we}),n.d(t,"solveLinearSystem",function(){return Ae}),n.d(t,"invertMatrix",function(){return Te}),n.d(t,"estimateMatrixCondition",function(){return Ce}),n.d(t,"jacobi",function(){return Se}),n.d(t,"solveHomogeneousLeastSquares",function(){return De}),n.d(t,"solveLeastSquares",function(){return Ie}),n.d(t,"hex2float",function(){return Ee}),n.d(t,"rgb2hsv",function(){return Ne}),n.d(t,"hsv2rgb",function(){return Oe}),n.d(t,"lab2xyz",function(){return _e}),n.d(t,"xyz2lab",function(){return Le}),n.d(t,"xyz2rgb",function(){return Pe}),n.d(t,"rgb2xyz",function(){return ke}),n.d(t,"rgb2lab",function(){return Re}),n.d(t,"lab2rgb",function(){return je}),n.d(t,"uninitializeBounds",function(){return Be}),n.d(t,"areBoundsInitialized",function(){return ze}),n.d(t,"clampValue",function(){return Fe}),n.d(t,"clampAndNormalizeValue",function(){return Ve}),n.d(t,"getScalarTypeFittingRange",function(){return Ue}),n.d(t,"getAdjustedScalarRange",function(){return Ge}),n.d(t,"extentIsWithinOtherExtent",function(){return We}),n.d(t,"boundsIsWithinOtherBounds",function(){return He}),n.d(t,"pointIsWithinBounds",function(){return Ye}),n.d(t,"solve3PointCircle",function(){return Qe}),n.d(t,"inf",function(){return qe}),n.d(t,"negInf",function(){return Xe}),n.d(t,"isInf",function(){return Ke}),n.d(t,"isFinite",function(){return Ze}),n.d(t,"isNaN",function(){return Je}),n.d(t,"isNan",function(){return $e}),n.d(t,"createUninitializedBounds",function(){return et}),n.d(t,"getMajorAxisIndex",function(){return tt}),n.d(t,"floatToHex2",function(){return nt}),n.d(t,"floatRGB2HexCode",function(){return rt}),n.d(t,"float2CssRGBA",function(){return at});var r=n(127),i=n.n(r),a=n(0);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var s=a.a.vtkErrorMacro,u=a.a.vtkWarningMacro,l=0,c=20,f=1e-12;function d(e){return function(){return s("vtkMath::".concat(e," - NOT IMPLEMENTED"))}}function p(e,t){for(var n=0;n<3;n++){var r=e[n];e[n]=t[n],t[n]=r}}function h(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=[];t.length<e;)t.push(0);return t}var g=function(){return Math.PI};function m(e){return e/180*Math.PI}function v(e){return 180*e/Math.PI}var y=Math.round,b=Math.floor,M=Math.ceil,x=Math.min,w=Math.max;function A(e){for(var t=1/0,n=0,r=e.length;n<r;++n)e[n]<t&&(t=e[n]);return t}function T(e){for(var t=-1/0,n=0,r=e.length;n<r;++n)t<e[n]&&(t=e[n]);return t}var C=d("ceilLog2"),S=d("factorial");function D(e){for(var t=1;t<e;)t*=2;return t}function I(e){return e===D(e)}function E(e,t){for(var n=1,r=1;r<=t;++r)n*=(e-r+1)/r;return Math.floor(n)}function N(e,t){if(e<t)return 0;for(var n=h(t),r=0;r<t;++r)n[r]=r;return n}function O(e,t,n){for(var r=0,i=t-1;i>=0;--i)if(n[i]<e-t+i){for(var a=n[i]+1;i<t;)n[i++]=a++;r=1;break}return r}function _(e){i()("".concat(e),{global:!0}),l=e}function L(){return l}function P(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e+((arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)-e)*Math.random()}var k=d("gaussian");function R(e,t,n){n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2]}function j(e,t,n){n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2]}function B(e,t){e[0]*=t,e[1]*=t,e[2]*=t}function z(e,t){e[0]*=t,e[1]*=t}function F(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function V(e,t,n){for(var r=0;r<3;r++)for(var i=0;i<3;i++)n[r][i]=e[r]*t[i]}function U(e,t,n){var r=e[1]*t[2]-e[2]*t[1],i=e[2]*t[0]-e[0]*t[2],a=e[0]*t[1]-e[1]*t[0];n[0]=r,n[1]=i,n[2]=a}function G(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;switch(t){case 1:return Math.abs(e);case 2:return Math.sqrt(e[0]*e[0]+e[1]*e[1]);case 3:return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);default:for(var n=0,r=0;r<t;r++)n+=e[r]*e[r];return Math.sqrt(n)}}function W(e){var t=G(e);return 0!==t&&(e[0]/=t,e[1]/=t,e[2]/=t),t}function H(e,t,n,r){var i,a,o,s=e[0]*e[0],u=e[1]*e[1],l=e[2]*e[2],c=Math.sqrt(s+u+l);s>u&&s>l?(i=0,a=1,o=2):u>l?(i=1,a=2,o=0):(i=2,a=0,o=1);var f=e[i]/c,d=e[a]/c,p=e[o]/c,h=Math.sqrt(f*f+p*p);if(0!==r){var g=Math.sin(r),m=Math.cos(r);t&&(t[i]=(p*m-f*d*g)/h,t[a]=g*h,t[o]=(-f*m-d*p*g)/h),n&&(n[i]=(-p*g-f*d*m)/h,n[a]=m*h,n[o]=(f*g-d*p*m)/h)}else t&&(t[i]=p/h,t[a]=0,t[o]=-f/h),n&&(n[i]=-f*d/h,n[a]=h,n[o]=-d*p/h)}function Y(e,t,n){var r=F(t,t);if(0===r)return n[0]=0,n[1]=0,n[2]=0,!1;for(var i=F(e,t)/r,a=0;a<3;a++)n[a]=t[a];return B(n,i),!0}function Q(e,t){return e[0]*t[0]+e[1]*t[1]}function q(e,t,n){var r=Q(t,t);if(0===r)return n[0]=0,n[1]=0,!1;for(var i=Q(e,t)/r,a=0;a<2;a++)n[a]=t[a];return z(n,i),!0}function X(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])+(e[2]-t[2])*(e[2]-t[2])}function K(e,t){var n=[0,0,0];return U(e,t,n),Math.atan2(G(n),F(e,t))}function Z(e,t,n){var r=Math.abs(e-n);return 1/Math.sqrt(2*Math.PI*t)*Math.exp(-Math.pow(r,2)/(2*t))}function J(e,t,n){var r=Math.abs(e-n);return Math.exp(-Math.pow(r,2)/(2*t))}function $(e,t,n){for(var r=0;r<2;r++)for(var i=0;i<2;i++)n[r][i]=e[r]*t[i]}function ee(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function te(e){var t=ee(e);return 0!==t&&(e[0]/=t,e[1]/=t),t}function ne(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 2===t.length?t[0][0]*t[1][1]-t[1][0]*t[0][1]:4===t.length?t[0]*t[3]-t[1]*t[2]:Number.NaN}function re(e,t){for(var n,r,i,a=[0,0,0],o=0;o<3;o++)i=Math.abs(e[o][0]),(r=Math.abs(e[o][1]))>i&&(i=r),(r=Math.abs(e[o][2]))>i&&(i=r),a[o]=1/i;i=a[0]*Math.abs(e[0][0]),n=0,(r=a[1]*Math.abs(e[1][0]))>=i&&(i=r,n=1),(r=a[2]*Math.abs(e[2][0]))>=i&&(n=2),0!==n&&(p(e[n],e[0]),a[n]=a[0]),t[0]=n,e[1][0]/=e[0][0],e[2][0]/=e[0][0],e[1][1]-=e[1][0]*e[0][1],e[2][1]-=e[2][0]*e[0][1],i=a[1]*Math.abs(e[1][1]),n=1,(r=a[2]*Math.abs(e[2][1]))>=i&&(n=2,p(e[2],e[1]),a[2]=a[1]),t[1]=n,e[2][1]/=e[1][1],e[1][2]-=e[1][0]*e[0][2],e[2][2]-=e[2][0]*e[0][2]+e[2][1]*e[1][2],t[2]=2}function ie(e,t,n){var r=n[t[0]];n[t[0]]=n[0],n[0]=r,r=n[t[1]],n[t[1]]=n[1],n[1]=r-e[1][0]*n[0],r=n[t[2]],n[t[2]]=n[2],n[2]=r-e[2][0]*n[0]-e[2][1]*n[1],n[2]/=e[2][2],n[1]=(n[1]-e[1][2]*n[2])/e[1][1],n[0]=(n[0]-e[0][1]*n[1]-e[0][2]*n[2])/e[0][0]}function ae(e,t,n){var r=e[0][0],i=e[0][1],a=e[0][2],o=e[1][0],s=e[1][1],u=e[1][2],l=e[2][0],c=e[2][1],f=e[2][2],d=+ne(s,c,u,f),p=-ne(o,l,u,f),h=+ne(o,l,s,c),g=-ne(i,c,a,f),m=+ne(r,l,a,f),v=-ne(r,l,i,c),y=+ne(i,s,a,u),b=-ne(r,o,a,u),M=+ne(r,o,i,s),x=r*d+i*p+a*h,w=d*t[0]+g*t[1]+y*t[2],A=p*t[0]+m*t[1]+b*t[2],T=h*t[0]+v*t[1]+M*t[2];n[0]=w/x,n[1]=A/x,n[2]=T/x}function oe(e,t,n){var r=e[0][0]*t[0]+e[0][1]*t[1]+e[0][2]*t[2],i=e[1][0]*t[0]+e[1][1]*t[1]+e[1][2]*t[2],a=e[2][0]*t[0]+e[2][1]*t[1]+e[2][2]*t[2];n[0]=r,n[1]=i,n[2]=a}function se(e,t,n){for(var r=[[0,0,0],[0,0,0],[0,0,0]],i=0;i<3;i++)r[0][i]=e[0][0]*t[0][i]+e[0][1]*t[1][i]+e[0][2]*t[2][i],r[1][i]=e[1][0]*t[0][i]+e[1][1]*t[1][i]+e[1][2]*t[2][i],r[2][i]=e[2][0]*t[0][i]+e[2][1]*t[1][i]+e[2][2]*t[2][i];for(var a=0;a<3;a++)n[a][0]=r[a][0],n[a][1]=r[a][1],n[a][2]=r[a][2]}function ue(e,t,n,r,i,a,o){r!==i&&s("Number of columns of A must match number of rows of B.");for(var u=0;u<n;u++)for(var l=0;l<a;l++){o[u][l]=0;for(var c=0;c<r;c++)o[u][l]+=e[u][c]*t[c][l]}}function le(e,t){var n;n=e[1][0],t[1][0]=e[0][1],t[0][1]=n,n=e[2][0],t[2][0]=e[0][2],t[0][2]=n,n=e[2][1],t[2][1]=e[1][2],t[1][2]=n,t[0][0]=e[0][0],t[1][1]=e[1][1],t[2][2]=e[2][2]}function ce(e,t){var n=e[0][0],r=e[0][1],i=e[0][2],a=e[1][0],o=e[1][1],s=e[1][2],u=e[2][0],l=e[2][1],c=e[2][2],f=+ne(o,l,s,c),d=-ne(a,u,s,c),p=+ne(a,u,o,l),h=-ne(r,l,i,c),g=+ne(n,u,i,c),m=-ne(n,u,r,l),v=+ne(r,o,i,s),y=-ne(n,a,i,s),b=+ne(n,a,r,o),M=n*f+r*d+i*p;t[0][0]=f/M,t[1][0]=d/M,t[2][0]=p/M,t[0][1]=h/M,t[1][1]=g/M,t[2][1]=m/M,t[0][2]=v/M,t[1][2]=y/M,t[2][2]=b/M}function fe(e){for(var t=0;t<3;t++)e[t][0]=e[t][1]=e[t][2]=0,e[t][t]=1}function de(e){return e[0][0]*e[1][1]*e[2][2]+e[1][0]*e[2][1]*e[0][2]+e[2][0]*e[0][1]*e[1][2]-e[0][0]*e[2][1]*e[1][2]-e[1][0]*e[0][1]*e[2][2]-e[2][0]*e[1][1]*e[0][2]}function pe(e,t){var n=e[0]*e[0],r=e[0]*e[1],i=e[0]*e[2],a=e[0]*e[3],o=e[1]*e[1],s=e[2]*e[2],u=e[3]*e[3],l=e[1]*e[2],c=e[1]*e[3],f=e[2]*e[3],d=o+s+u,p=1/(n+d),h=(n-d)*p;p*=2,t[0][0]=o*p+h,t[1][0]=(l+a)*p,t[2][0]=(c-i)*p,t[0][1]=(l-a)*p,t[1][1]=s*p+h,t[2][1]=(f+r)*p,t[0][2]=(c+i)*p,t[1][2]=(f-r)*p,t[2][2]=u*p+h}function he(e,t){if(!e.length===t.length)return!1;return e.every(function(e,n){return e===t[n]})}function ge(e,t,n,r){var i,a,o,s,l,f,d,p,g,m,v,y,b,M,x,w,A=h(t),T=h(t),C=function(e,t,n,r,i){M=e[t][n],b=e[r][i],e[t][n]=M-y*(b+M*m),e[r][i]=b+y*(M-b*m)};for(l=0;l<t;l++){for(s=0;s<t;s++)r[l][s]=0;r[l][l]=1}for(l=0;l<t;l++)A[l]=n[l]=e[l][l],T[l]=0;for(i=0;i<c;i++){for(v=0,l=0;l<t-1;l++)for(s=l+1;s<t;s++)v+=Math.abs(e[l][s]);if(0===v)break;for(d=i<3?.2*v/(t*t):0,l=0;l<t-1;l++)for(s=l+1;s<t;s++)if(M=100*Math.abs(e[l][s]),i>3&&Math.abs(n[l])+M===Math.abs(n[l])&&Math.abs(n[s])+M===Math.abs(n[s]))e[l][s]=0;else if(Math.abs(e[l][s])>d){for(b=n[s]-n[l],Math.abs(b)+M===Math.abs(b)?g=e[l][s]/b:(p=.5*b/e[l][s],g=1/(Math.abs(p)+Math.sqrt(1+p*p)),p<0&&(g=-g)),x=1/Math.sqrt(1+g*g),m=(y=g*x)/(1+x),b=g*e[l][s],T[l]-=b,T[s]+=b,n[l]-=b,n[s]+=b,e[l][s]=0,a=0;a<=l-1;a++)C(e,a,l,a,s);for(a=l+1;a<=s-1;a++)C(e,l,a,a,s);for(a=s+1;a<t;a++)C(e,l,a,s,a);for(a=0;a<t;a++)C(r,a,l,a,s)}for(l=0;l<t;l++)A[l]+=T[l],n[l]=A[l],T[l]=0}if(i>=c)return u("vtkMath::Jacobi: Error extracting eigenfunctions"),0;for(a=0;a<t-1;a++){for(w=n[o=a],i=a+1;i<t;i++)n[i]>=w&&(w=n[o=i]);if(o!==a)for(n[o]=n[a],n[a]=w,i=0;i<t;i++)w=r[i][a],r[i][a]=r[i][o],r[i][o]=w}var S=(t>>1)+(1&t);for(a=0;a<t;a++){for(f=0,i=0;i<t;i++)r[i][a]>=0&&f++;if(f<S)for(i=0;i<t;i++)r[i][a]*=-1}return 1}function me(e,t){var n=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];n[0][0]=e[0][0]+e[1][1]+e[2][2],n[1][1]=e[0][0]-e[1][1]-e[2][2],n[2][2]=-e[0][0]+e[1][1]-e[2][2],n[3][3]=-e[0][0]-e[1][1]+e[2][2],n[0][1]=n[1][0]=e[2][1]-e[1][2],n[0][2]=n[2][0]=e[0][2]-e[2][0],n[0][3]=n[3][0]=e[1][0]-e[0][1],n[1][2]=n[2][1]=e[1][0]+e[0][1],n[1][3]=n[3][1]=e[0][2]+e[2][0],n[2][3]=n[3][2]=e[2][1]+e[1][2];for(var r=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],i=[0,0,0,0],a=[0,0,0,0],o=0;o<4;o++)i[o]=n[o],a[o]=r[o];ge(i,4,[0,0,0,0],a),t[0]=r[0][0],t[1]=r[1][0],t[2]=r[2][0],t[3]=r[3][0]}function ve(e,t,n){var r=e[0]*t[0],i=e[0]*t[1],a=e[0]*t[2],o=e[0]*t[3],s=e[1]*t[0],u=e[1]*t[1],l=e[1]*t[2],c=e[1]*t[3],f=e[2]*t[0],d=e[2]*t[1],p=e[2]*t[2],h=e[2]*t[3],g=e[3]*t[0],m=e[3]*t[1],v=e[3]*t[2],y=e[3]*t[3];n[0]=r-u-p-y,n[1]=i+s+h-v,n[2]=a-c+f+m,n[3]=o+l-d+g}function ye(e,t){for(var n=0;n<3;n++)t[0][n]=e[0][n],t[1][n]=e[1][n],t[2][n]=e[2][n];for(var r,i=h(3),a=h(3),o=0;o<3;o++){var s=Math.abs(t[o][0]),u=Math.abs(t[o][1]),l=Math.abs(t[o][2]);r=l>(r=u>s?u:s)?l:r,i[o]=1,0!==r&&(i[o]/=r)}var c=Math.abs(t[0][0])*i[0],f=Math.abs(t[1][0])*i[1],d=Math.abs(t[2][0])*i[2];a[0]=0,f>=(r=c)&&(r=f,a[0]=1),d>=r&&(a[0]=2),0!==a[0]&&(p(t[a[0]],t[0]),i[a[0]]=i[0]);var g=Math.abs(t[1][1])*i[1],m=Math.abs(t[2][1])*i[2];a[1]=1,m>=(r=g)&&(a[1]=2,p(t[2],t[1])),a[2]=2;var v=0;if(de(t)<0){v=1;for(var y=0;y<3;y++)t[0][y]=-t[0][y],t[1][y]=-t[1][y],t[2][y]=-t[2][y]}var b=h(4);if(me(t,b),pe(b,t),v)for(var M=0;M<3;M++)t[0][M]=-t[0][M],t[1][M]=-t[1][M],t[2][M]=-t[2][M];1!==a[1]&&p(t[a[1]],t[1]),0!==a[0]&&p(t[a[0]],t[0])}function be(e,t,n){var r,i,a,o,s,u,l=[h(3),h(3),h(3)],c=h(3),f=h(3);for(r=0;r<3;r++)l[r][0]=e[r][0],l[r][1]=e[r][1],l[r][2]=e[r][2],c[r]=l[r],f[r]=n[r];if(ge(c,3,t,f),t[0]!==t[1]||t[0]!==t[2]){for(le(n,n),r=0;r<3;r++)if(t[(r+1)%3]===t[(r+2)%3]){for(u=Math.abs(n[r][0]),o=0,i=1;i<3;i++)u<(s=Math.abs(n[r][i]))&&(u=s,o=i);return o!==r&&(s=t[o],t[o]=t[r],t[r]=s,p(n[r],n[o])),n[o][o]<0&&(n[o][0]=-n[o][0],n[o][1]=-n[o][1],n[o][2]=-n[o][2]),a=(o+2)%3,n[i=(o+1)%3][0]=0,n[i][1]=0,n[i][2]=0,n[i][i]=1,U(n[o],n[i],n[a]),W(n[a]),U(n[a],n[o],n[i]),void le(n,n)}for(u=Math.abs(n[0][0]),o=0,r=1;r<3;r++)u<(s=Math.abs(n[r][0]))&&(u=s,o=r);for(0!==o&&(s=t[o],t[o]=t[0],t[0]=s,p(n[o],n[0])),Math.abs(n[1][1])<Math.abs(n[2][1])&&(s=t[2],t[2]=t[1],t[1]=s,p(n[2],n[1])),r=0;r<2;r++)n[r][r]<0&&(n[r][0]=-n[r][0],n[r][1]=-n[r][1],n[r][2]=-n[r][2]);de(n)<0&&(n[2][0]=-n[2][0],n[2][1]=-n[2][1],n[2][2]=-n[2][2]),le(n,n)}else fe(n)}function Me(e,t,n,r){var i,a=[h(3),h(3),h(3)];for(i=0;i<3;i++)a[0][i]=e[0][i],a[1][i]=e[1][i],a[2][i]=e[2][i];var o=de(a);if(o<0)for(i=0;i<3;i++)a[0][i]=-a[0][i],a[1][i]=-a[1][i],a[2][i]=-a[2][i];ye(a,t),le(a,a),se(a,t,r),be(r,n,r),se(t,r,t),le(r,r),o<0&&(n[0]=-n[0],n[1]=-n[1],n[2]=-n[2])}function xe(e,t,n){var r,i,a,o,s,l,c,d=0,p=h(n);for(r=0;r<n;r++){for(o=0,i=0;i<n;i++)(c=Math.abs(e[r][i]))>o&&(o=c);if(0===o)return u("Unable to factor linear system"),0;p[r]=1/o}for(i=0;i<n;i++){for(r=0;r<i;r++){for(s=e[r][i],a=0;a<r;a++)s-=e[r][a]*e[a][i];e[r][i]=s}for(o=0,r=i;r<n;r++){for(s=e[r][i],a=0;a<i;a++)s-=e[r][a]*e[a][i];e[r][i]=s,(l=p[r]*Math.abs(s))>=o&&(o=l,d=r)}if(i!==d){for(a=0;a<n;a++)l=e[d][a],e[d][a]=e[i][a],e[i][a]=l;p[d]=p[i]}if(t[i]=d,Math.abs(e[i][i])<=f)return u("Unable to factor linear system"),0;if(i!==n-1)for(l=1/e[i][i],r=i+1;r<n;r++)e[r][i]*=l}return 1}function we(e,t,n,r){var i,a,o,s,u;for(o=-1,i=0;i<r;i++){if(u=n[s=t[i]],n[s]=n[i],o>=0)for(a=o;a<=i-1;a++)u-=e[i][a]*n[a];else 0!==u&&(o=i);n[i]=u}for(i=r-1;i>=0;i--){for(u=n[i],a=i+1;a<r;a++)u-=e[i][a]*n[a];n[i]=u/e[i][i]}}function Ae(e,t,n){if(2===n){var r=h(2),i=ne(e[0][0],e[0][1],e[1][0],e[1][1]);return 0===i?0:(r[0]=(e[1][1]*t[0]-e[0][1]*t[1])/i,r[1]=(-e[1][0]*t[0]+e[0][0]*t[1])/i,t[0]=r[0],t[1]=r[1],1)}if(1===n)return 0===e[0][0]?0:(t[0]/=e[0][0],1);var a=h(n);return 0===xe(e,a,n)?0:(we(e,a,t,n),1)}function Te(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=r||h(n),o=i||h(n);if(0===xe(e,a,n))return 0;for(var s=0;s<n;s++){for(var u=0;u<n;u++)o[u]=0;o[s]=1,we(e,a,o,n);for(var l=0;l<n;l++)t[l][s]=o[l]}return 1}function Ce(e,t){for(var n=+Number.MAX_VALUE,r=-Number.MAX_VALUE,i=0;i<t;i++)for(var a=i;a<t;a++)Math.abs(e[i][a])>w&&(r=Math.abs(e[i][a]));for(var o=0;o<t;o++)Math.abs(e[o][o])<x&&(n=Math.abs(e[o][o]));return 0===n?Number.MAX_VALUE:r/n}function Se(e,t,n){return ge(e,3,t,n)}function De(e,t,n,r){if(e<n)return u("Insufficient number of samples. Underdetermined."),0;var i,a,o,s=h(n),l=h(n),c=h(n);for(i=0;i<n;i++)for(c[i]=h(n),s[i]=h(n),a=0;a<n;a++)s[i][a]=0;for(o=0;o<e;o++)for(i=0;i<n;i++)for(a=i;a<n;a++)s[i][a]+=t[o][i]*t[o][a];for(i=0;i<n;i++)for(a=0;a<i;a++)s[i][a]=s[a][i];for(ge(s,n,l,c),i=0;i<n;i++)r[i][0]=c[i][n-1];return 1}function Ie(e,t,n,r,i,a){var o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];if(e<n||e<i)return u("Insufficient number of samples. Underdetermined."),0;var s,l,c,d,p=h(i),g=1,m=0,v=0;if(o){for(c=0;c<i;c++)p[c]=1;for(l=0;l<e;l++)for(c=0;c<i;c++)Math.abs(r[l][c])>f&&(g=0,p[c]=0);if(g&&1===i)return u("Detected homogeneous system (Y=0), calling SolveHomogeneousLeastSquares()"),De(e,t,n,a);if(g)v=1;else for(c=0;c<i;c++)p[c]&&(v=1)}if(v){for(s=h(n),c=0;c<n;c++)s[c]=[0];m=De(e,t,n,s)}var y=h(n),b=h(n),M=h(n);for(l=0;l<n;l++){for(y[l]=h(n),b[l]=h(n),c=0;c<n;c++)y[l][c]=0,b[l][c]=0;for(M[l]=h(i),c=0;c<i;c++)M[l][c]=0}for(d=0;d<e;d++)for(l=0;l<n;l++){for(c=l;c<n;c++)y[l][c]+=t[d][l]*t[d][c];for(c=0;c<i;c++)M[l][c]+=t[d][l]*r[d][c]}for(l=0;l<n;l++)for(c=0;c<l;c++)y[l][c]=y[c][l];var x=Te(y,b,n);if(x)for(l=0;l<n;l++)for(c=0;c<i;c++)for(a[l][c]=0,d=0;d<n;d++)a[l][c]+=b[l][d]*M[d][c];if(v)for(c=0;c<i;c++)if(p[c])for(l=0;l<n;l++)a[l][c]=s[l][0];return v?m&&x:x}function Ee(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,.5,1];switch(e.length){case 3:return t[0]=17*parseInt(e[0],16)/255,t[1]=17*parseInt(e[1],16)/255,t[2]=17*parseInt(e[2],16)/255,t;case 4:return t[0]=17*parseInt(e[1],16)/255,t[1]=17*parseInt(e[2],16)/255,t[2]=17*parseInt(e[3],16)/255,t;case 6:return t[0]=parseInt(e.substr(0,2),16)/255,t[1]=parseInt(e.substr(2,2),16)/255,t[2]=parseInt(e.substr(4,2),16)/255,t;case 7:return t[0]=parseInt(e.substr(1,2),16)/255,t[1]=parseInt(e.substr(3,2),16)/255,t[2]=parseInt(e.substr(5,2),16)/255,t;case 9:return t[0]=parseInt(e.substr(1,2),16)/255,t[1]=parseInt(e.substr(3,2),16)/255,t[2]=parseInt(e.substr(5,2),16)/255,t[3]=parseInt(e.substr(7,2),16)/255,t;default:return t}}function Ne(e,t){var n,r,i=o(e,3),a=i[0],s=i[1],u=i[2],l=a,c=a;s>l?l=s:s<c&&(c=s),u>l?l=u:u<c&&(c=u);var f=l;(r=f>0?(l-c)/l:0)>0?(n=a===l?1/6*(s-u)/(l-c):s===l?1/3+1/6*(u-a)/(l-c):2/3+1/6*(a-s)/(l-c))<0&&(n+=1):n=0,t[0]=n,t[1]=r,t[2]=f}function Oe(e,t){var n,r,i,a=o(e,3),s=a[0],u=a[1],l=a[2];s>1/6&&s<=1/3?(r=1,n=(1/3-s)/(1/6),i=0):s>1/3&&s<=.5?(r=1,i=(s-1/3)/(1/6),n=0):s>.5&&s<=2/3?(i=1,r=(2/3-s)/(1/6),n=0):s>2/3&&s<=5/6?(i=1,n=(s-2/3)/(1/6),r=0):s>5/6&&s<=1?(n=1,i=(1-s)/(1/6),r=0):(n=1,r=s/(1/6),i=0),n=u*n+(1-u),r=u*r+(1-u),i=u*i+(1-u),n*=l,r*=l,i*=l,t[0]=n,t[1]=r,t[2]=i}function _e(e,t){var n=o(e,3),r=(n[0]+16)/116,i=n[1]/500+r,a=r-n[2]/200;r=Math.pow(r,3)>.008856?Math.pow(r,3):(r-16/116)/7.787,i=Math.pow(i,3)>.008856?Math.pow(i,3):(i-16/116)/7.787,a=Math.pow(a,3)>.008856?Math.pow(a,3):(a-16/116)/7.787;t[0]=.9505*i,t[1]=1*r,t[2]=1.089*a}function Le(e,t){var n=o(e,3),r=n[0]/.9505,i=n[1]/1,a=n[2]/1.089;r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,a=a>.008856?Math.pow(a,1/3):7.787*a+16/116,t[0]=116*i-16,t[1]=500*(r-i),t[2]=200*(i-a)}function Pe(e,t){var n=o(e,3),r=n[0],i=n[1],a=n[2],s=3.2406*r+-1.5372*i+-.4986*a,u=-.9689*r+1.8758*i+.0415*a,l=.0557*r+-.204*i+1.057*a;s>.0031308?s=1.055*Math.pow(s,1/2.4)-.055:s*=12.92,u>.0031308?u=1.055*Math.pow(u,1/2.4)-.055:u*=12.92,l>.0031308?l=1.055*Math.pow(l,1/2.4)-.055:l*=12.92;var c=s;c<u&&(c=u),c<l&&(c=l),c>1&&(s/=c,u/=c,l/=c),s<0&&(s=0),u<0&&(u=0),l<0&&(l=0),t[0]=s,t[1]=u,t[2]=l}function ke(e,t){var n=o(e,3),r=n[0],i=n[1],a=n[2];r>.04045?r=Math.pow((r+.055)/1.055,2.4):r/=12.92,i>.04045?i=Math.pow((i+.055)/1.055,2.4):i/=12.92,a>.04045?a=Math.pow((a+.055)/1.055,2.4):a/=12.92,t[0]=.4124*r+.3576*i+.1805*a,t[1]=.2126*r+.7152*i+.0722*a,t[2]=.0193*r+.1192*i+.9505*a}function Re(e,t){var n=[0,0,0];ke(e,n),Le(n,t)}function je(e,t){var n=[0,0,0];_e(e,n),Pe(n,t)}function Be(e){e[0]=1,e[1]=-1,e[2]=1,e[3]=-1,e[4]=1,e[5]=-1}function ze(e){return!(e[1]-e[0]<0)}function Fe(e,t,n){return e<t?t:e>n?n:e}function Ve(e,t){var n=0;return t[0]!==t[1]&&(n=((n=e<t[0]?t[0]:e>t[1]?t[1]:e)-t[0])/(t[1]-t[0])),n}var Ue=d("GetScalarTypeFittingRange"),Ge=d("GetAdjustedScalarRange");function We(e,t){if(!e||!t)return 0;for(var n=0;n<6;n+=2)if(e[n]<t[n]||e[n]>t[n+1]||e[n+1]<t[n]||e[n+1]>t[n+1])return 0;return 1}function He(e,t,n){if(!e||!t)return 0;for(var r=0;r<6;r+=2)if(e[r]+n[r/2]<t[r]||e[r]-n[r/2]>t[r+1]||e[r+1]+n[r/2]<t[r]||e[r+1]-n[r/2]>t[r+1])return 0;return 1}function Ye(e,t,n){if(!e||!t||!n)return 0;for(var r=0;r<3;r++)if(e[r]+n[r]<t[2*r]||e[r]-n[r]>t[2*r+1])return 0;return 1}function Qe(e,t,n,r){for(var i=h(3),a=h(3),o=h(3),s=h(3),u=h(3),l=h(3),c=0;c<3;++c)i[c]=e[c]-t[c],a[c]=t[c]-n[c],o[c]=n[c]-e[c],s[c]=-i[c],u[c]=-a[c],l[c]=-o[c];var f=G(s),d=G(u),p=G(o),g=h(3);U(i,a,g);for(var m=G(g),v=f*d*p/(2*m),y=2*m*m,b=d*d*F(i,l)/y,M=p*p*F(s,a)/y,x=f*f*F(o,u)/y,w=0;w<3;++w)r[w]=b*e[w]+M*t[w]+x*n[w];return v}var qe=1/0,Xe=-1/0,Ke=function(e){return!Number.isFinite(e)},Ze=Number.isFinite,Je=Number.isNaN,$e=Je;function et(){return[].concat([Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE])}function tt(e){for(var t=-1,n=-1,r=0;r<e.length;r++){var i=Math.abs(e[r]);i>t&&(n=r,t=i)}return n}function nt(e){var t=Math.floor(255*e);return t>15?t.toString(16):"0".concat(t.toString(16))}function rt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#";return"".concat(t).concat(e.map(nt).join(""))}function it(e){return Math.round(255*e)}function at(e){return 3===e.length?"rgb(".concat(e.map(it).join(", "),")"):"rgba(".concat(it(e[0]||0),", ").concat(it(e[1]||0),", ").concat(it(e[2]||0),", ").concat(e[3]||0,")")}t.default={Pi:g,radiansFromDegrees:m,degreesFromRadians:v,round:y,floor:b,ceil:M,ceilLog2:C,min:x,max:w,arrayMin:A,arrayMax:T,isPowerOfTwo:I,nearestPowerOfTwo:D,factorial:S,binomial:E,beginCombination:N,nextCombination:O,randomSeed:_,getSeed:L,random:P,gaussian:k,add:R,subtract:j,multiplyScalar:B,multiplyScalar2D:z,dot:F,outer:V,cross:U,norm:G,normalize:W,perpendiculars:H,projectVector:Y,projectVector2D:q,distance2BetweenPoints:X,angleBetweenVectors:K,gaussianAmplitude:Z,gaussianWeight:J,dot2D:Q,outer2D:$,norm2D:ee,normalize2D:te,determinant2x2:ne,LUFactor3x3:re,LUSolve3x3:ie,linearSolve3x3:ae,multiply3x3_vect3:oe,multiply3x3_mat3:se,multiplyMatrix:ue,transpose3x3:le,invert3x3:ce,identity3x3:fe,determinant3x3:de,quaternionToMatrix3x3:pe,areMatricesEqual:he,matrix3x3ToQuaternion:me,multiplyQuaternion:ve,orthogonalize3x3:ye,diagonalize3x3:be,singularValueDecomposition3x3:Me,solveLinearSystem:Ae,invertMatrix:Te,luFactorLinearSystem:xe,luSolveLinearSystem:we,estimateMatrixCondition:Ce,jacobi:Se,jacobiN:ge,solveHomogeneousLeastSquares:De,solveLeastSquares:Ie,hex2float:Ee,rgb2hsv:Ne,hsv2rgb:Oe,lab2xyz:_e,xyz2lab:Le,xyz2rgb:Pe,rgb2xyz:ke,rgb2lab:Re,lab2rgb:je,uninitializeBounds:Be,areBoundsInitialized:ze,clampValue:Fe,clampAndNormalizeValue:Ve,getScalarTypeFittingRange:Ue,getAdjustedScalarRange:Ge,extentIsWithinOtherExtent:We,boundsIsWithinOtherBounds:He,pointIsWithinBounds:Ye,solve3PointCircle:Qe,inf:qe,negInf:Xe,isInf:Ke,isNan:Je,isNaN:Je,isFinite:Ze,createUninitializedBounds:et,getMajorAxisIndex:tt,floatToHex2:nt,floatRGB2HexCode:rt,float2CssRGBA:at}},function(e,t,n){"use strict";var r=n(7),i=n(0),a=n(2),o=r.c.DefaultDataType,s=[];function u(){var e=Number.MAX_VALUE,t=-Number.MAX_VALUE,n=0,r=0;return{add:function(i){e>i&&(e=i),t<i&&(t=i),n++,r+=i},get:function(){return{min:e,max:t,count:n,sum:r,mean:r/n}},getRange:function(){return{min:e,max:t}}}}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=u(),i=e.length,a=0;if(t<0&&n>1){for(var o=0;o<i;o+=n){a=0;for(var s=0;s<n;s++)a+=e[o+s]*e[o+s];a=Math.pow(a,.5),r.add(a)}return r.getRange()}for(var l=t<0?0:t;l<i;l+=n)r.add(e[l]);return r.getRange()}function c(e){return Object.prototype.toString.call(e).split(" ")[1].slice(0,-1)}var f={computeRange:l,createRangeHelper:u,getDataType:c,getMaxNorm:function(e){for(var t=e.getNumberOfComponents(),n=0,r=0;r<e.getNumberOfTuples();++r){var i=a.norm(e.getTuple(r),t);i>n&&(n=i)}return n}};var d={name:"",numberOfComponents:1,size:0,dataType:o,rangeTuple:[0,0]};function p(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Object.assign(t,d,n),!t.empty&&!t.values&&!t.size)throw new TypeError("Cannot create vtkDataArray object without: size > 0, values");t.values?Array.isArray(t.values)&&(t.values=window[t.dataType].from(t.values)):t.values=new window[t.dataType](t.size),t.values&&(t.size=t.values.length,t.dataType=c(t.values)),i.a.obj(e,t),i.a.set(e,t,["name","numberOfComponents"]),function(e,t){function n(){t.ranges=null,e.modified()}t.classHierarchy.push("vtkDataArray"),e.getElementComponentSize=function(){return t.values.BYTES_PER_ELEMENT},e.getComponent=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.values[e*t.numberOfComponents+n]},e.setComponent=function(e,r,i){i!==t.values[e*t.numberOfComponents+r]&&(t.values[e*t.numberOfComponents+r]=i,n())},e.getData=function(){return t.values},e.getRange=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,n=e<0?t.numberOfComponents:e,r=null;return t.ranges||(t.ranges=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e||[];n.length<=t;)n.push(null);return n}(t.ranges,t.numberOfComponents)),(r=t.ranges[n])?(t.rangeTuple[0]=r.min,t.rangeTuple[1]=r.max,t.rangeTuple):(r=l(t.values,e,t.numberOfComponents),t.ranges[n]=r,t.rangeTuple[0]=r.min,t.rangeTuple[1]=r.max,t.rangeTuple)},e.setTuple=function(e,n){for(var r=e*t.numberOfComponents,i=0;i<t.numberOfComponents;i++)t.values[r+i]=n[i]},e.getTuple=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,r=t.numberOfComponents||1;n.length!==r&&(n.length=r);var i=e*r;if(1===r)n[0]=t.values[i];else if(2===r)n[0]=t.values[i],n[1]=t.values[i+1];else if(3===r)n[0]=t.values[i],n[1]=t.values[i+1],n[2]=t.values[i+2];else if(4===r)n[0]=t.values[i],n[1]=t.values[i+1],n[2]=t.values[i+2],n[3]=t.values[i+3];else for(var a=0;a<r;a++)n[a]=t.values[i+a];return n},e.getTupleLocation=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1)*t.numberOfComponents},e.getNumberOfComponents=function(){return t.numberOfComponents},e.getNumberOfValues=function(){return t.values.length},e.getNumberOfTuples=function(){return t.values.length/t.numberOfComponents},e.getDataType=function(){return t.dataType},e.newClone=function(){return h({empty:!0,name:t.name,dataType:t.dataType,numberOfComponents:t.numberOfComponents})},e.getName=function(){return t.name||(e.modified(),t.name="vtkDataArray".concat(e.getMTime())),t.name},e.setData=function(e,r){t.values=e,t.size=e.length,t.dataType=c(e),r&&(t.numberOfComponents=r),t.size%t.numberOfComponents!=0&&(t.numberOfComponents=1),n()},e.getState=function(){var n=Object.assign({},t,{vtkClass:e.getClassName()});n.values=Array.from(n.values),delete n.buffer,Object.keys(n).forEach(function(e){n[e]||delete n[e]});var r={};return Object.keys(n).sort().forEach(function(e){r[e]=n[e]}),r.mtime&&delete r.mtime,r}}(e,t)}var h=i.a.newInstance(p,"vtkDataArray");t.a=Object.assign({newInstance:h,extend:p},f,r.c)},function(e,t,n){"use strict";var r=n(0),i=n(8),a=n(24),o=n(79),s=n(52);var u={};function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,u,n),o.a.extend(e,t,n),r.a.setGet(e,t,["verts","lines","polys","strips"]),function(e,t){t.classHierarchy.push("vtkPolyData"),s.a.forEach(function(n){var r;e["getNumberOf".concat((r=n,r.replace(/(?:^\w|[A-Z]|\b\w)/g,function(e){return e.toUpperCase()}).replace(/\s+/g,"")))]=function(){return t[n].getNumberOfCells()},t[n]?t[n]=Object(i.a)(t[n]):t[n]=a.a.newInstance()}),e.getNumberOfCells=function(){return s.a.reduce(function(e,n){return e+t[n].getNumberOfCells()},0)};var n=e.shallowCopy;e.shallowCopy=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n(e,r),s.a.forEach(function(n){t[n]=a.a.newInstance(),t[n].shallowCopy(e.getReferenceByName(n))})}}(e,t)}var c=r.a.newInstance(l,"vtkPolyData");t.a={newInstance:c,extend:l}},function(e,t,n){"use strict";var r=n(1),i=n(0),a=n(43),o=n(16),s=i.a.vtkDebugMacro;var u={mapper:null,property:null,backfaceProperty:null,forceOpaque:!1,forceTranslucent:!1,bounds:[1,-1,1,-1,1,-1]};function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,u,n),a.a.extend(e,t,n),t.boundsMTime={},i.a.obj(t.boundsMTime),i.a.set(e,t,["property"]),i.a.setGet(e,t,["backfaceProperty","forceOpaque","forceTranslucent","mapper"]),function(e,t){t.classHierarchy.push("vtkActor");var n=Object.assign({},e);e.getActors=function(){return e},e.getIsOpaque=function(){if(t.forceOpaque)return!0;if(t.forceTranslucent)return!1;t.property||e.getProperty();var n=t.property.getOpacity()>=1;return n=(n=n&&(!t.texture||!t.texture.isTranslucent()))&&(!t.mapper||t.mapper.getIsOpaque())},e.hasTranslucentPolygonalGeometry=function(){return null!==t.mapper&&(null===t.property&&e.setProperty(e.makeProperty()),!e.getIsOpaque())},e.makeProperty=o.a.newInstance,e.getProperty=function(){return null===t.property&&(t.property=e.makeProperty()),t.property},e.getBounds=function(){if(null===t.mapper)return t.bounds;var n=t.mapper.getBounds();if(!n||6!==n.length)return n;if(n[0]>n[1])return t.mapperBounds=n.concat(),t.bounds=[1,-1,1,-1,1,-1],t.boundsMTime.modified(),n;if(!t.mapperBounds||n[0]!==t.mapperBounds[0]||n[1]!==t.mapperBounds[1]||n[2]!==t.mapperBounds[2]||n[3]!==t.mapperBounds[3]||n[4]!==t.mapperBounds[4]||n[5]!==t.mapperBounds[5]||e.getMTime()>t.boundsMTime.getMTime()){s("Recomputing bounds..."),t.mapperBounds=n.concat();var i=[r.e.fromValues(n[1],n[3],n[5]),r.e.fromValues(n[1],n[2],n[5]),r.e.fromValues(n[0],n[2],n[5]),r.e.fromValues(n[0],n[3],n[5]),r.e.fromValues(n[1],n[3],n[4]),r.e.fromValues(n[1],n[2],n[4]),r.e.fromValues(n[0],n[2],n[4]),r.e.fromValues(n[0],n[3],n[4])];e.computeMatrix();var a=r.c.create();r.c.transpose(a,t.matrix),i.forEach(function(e){return r.e.transformMat4(e,e,a)}),t.bounds[0]=t.bounds[2]=t.bounds[4]=Number.MAX_VALUE,t.bounds[1]=t.bounds[3]=t.bounds[5]=-Number.MAX_VALUE,t.bounds=t.bounds.map(function(e,t){return t%2==0?i.reduce(function(e,n){return e>n[t/2]?n[t/2]:e},e):i.reduce(function(e,n){return e<n[(t-1)/2]?n[(t-1)/2]:e},e)}),t.boundsMTime.modified()}return t.bounds},e.getMTime=function(){var e=n.getMTime();if(null!==t.property){var r=t.property.getMTime();e=r>e?r:e}if(null!==t.backfaceProperty){var i=t.backfaceProperty.getMTime();e=i>e?i:e}return e},e.getRedrawMTime=function(){var e=t.mtime;if(null!==t.mapper){var n=t.mapper.getMTime();e=n>e?n:e,null!==t.mapper.getInput()&&(t.mapper.getInputAlgorithm().update(),e=(n=t.mapper.getInput().getMTime())>e?n:e)}return e},e.getSupportsSelection=function(){return!!t.mapper&&t.mapper.getSupportsSelection()}}(e,t)}var c=i.a.newInstance(l,"vtkActor");t.a={newInstance:c,extend:l}},function(e,t,n){"use strict";var r=n(0),i=n(84),a=n(3),o=n(10),s=n(37),u=n(2),l=n(38);var c={addCoincidentTopologyMethods:function(e,t,n){n.forEach(function(n){e["get".concat(n.method)]=function(){return t[n.key]},e["set".concat(n.method)]=function(e,r){t[n.key]={factor:e,unit:r}}})},CATEGORIES:["Polygon","Line","Point"]},f=1,d=0,p=["VTK_RESOLVE_OFF","VTK_RESOLVE_POLYGON_OFFSET"];function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;d=e}var g={getResolveCoincidentTopologyAsString:function(){return p[d]},getResolveCoincidentTopologyPolygonOffsetFaces:function(){return f},getResolveCoincidentTopology:function(){return d},setResolveCoincidentTopology:h,setResolveCoincidentTopologyPolygonOffsetFaces:function(e){f=e},setResolveCoincidentTopologyToDefault:function(){h(0)},setResolveCoincidentTopologyToOff:function(){h(0)},setResolveCoincidentTopologyToPolygonOffset:function(){h(1)}},m=n(25),v=m.b.ColorMode,y=m.b.ScalarMode,b=m.b.GetArray,M=l.b.VectorMode,x=a.a.VtkDataTypes;function w(e){return function(){return r.a.vtkErrorMacro("vtkMapper::".concat(e," - NOT IMPLEMENTED"))}}var A={};c.addCoincidentTopologyMethods(A,{Polygon:{factor:2,offset:0},Line:{factor:1,offset:-1},Point:{factor:0,offset:-2}},c.CATEGORIES.map(function(e){return{key:e,method:"ResolveCoincidentTopology".concat(e,"OffsetParameters")}}));var T={colorMapColors:null,static:!1,lookupTable:null,scalarVisibility:!0,scalarRange:[0,1],useLookupTableScalarRange:!1,colorMode:0,scalarMode:0,arrayAccessMode:1,renderTime:0,colorByArrayName:null,fieldDataTupleId:-1,interpolateScalarsBeforeMapping:!1,colorCoordinates:null,colorTextureMap:null,forceCompileOnly:0,useInvertibleColors:!1,invertibleScalars:null,resolveCoincidentTopology:!1,viewSpecificProperties:null,customShaderAttributes:[]};function C(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,T,n),i.a.extend(e,t,n),r.a.get(e,t,["colorCoordinates","colorMapColors","colorTextureMap"]),r.a.setGet(e,t,["colorByArrayName","arrayAccessMode","colorMode","fieldDataTupleId","interpolateScalarsBeforeMapping","lookupTable","renderTime","resolveCoincidentTopology","scalarMode","scalarVisibility","static","useLookupTableScalarRange","viewSpecificProperties","customShaderAttributes"]),r.a.setGetArray(e,t,["scalarRange"],2),t.viewSpecificProperties||(t.viewSpecificProperties={}),function(e,t){t.classHierarchy.push("vtkMapper"),e.getBounds=function(){var n=e.getInputData();return n?(t.static||e.update(),t.bounds=n.getBounds()):t.bounds=u.createUninitializedBounds(),t.bounds},e.setForceCompileOnly=function(e){t.forceCompileOnly=e},e.createDefaultLookupTable=function(){t.lookupTable=s.a.newInstance()},e.getColorModeAsString=function(){return r.a.enumToString(v,t.colorMode)},e.setColorModeToDefault=function(){return e.setColorMode(0)},e.setColorModeToMapScalars=function(){return e.setColorMode(1)},e.setColorModeToDirectScalars=function(){return e.setColorMode(2)},e.getScalarModeAsString=function(){return r.a.enumToString(y,t.scalarMode)},e.setScalarModeToDefault=function(){return e.setScalarMode(0)},e.setScalarModeToUsePointData=function(){return e.setScalarMode(1)},e.setScalarModeToUseCellData=function(){return e.setScalarMode(2)},e.setScalarModeToUsePointFieldData=function(){return e.setScalarMode(3)},e.setScalarModeToUseCellFieldData=function(){return e.setScalarMode(4)},e.setScalarModeToUseFieldData=function(){return e.setScalarMode(5)},Object.keys(g).forEach(function(t){e[t]=g[t]}),Object.keys(A).forEach(function(t){e[t]=A[t]}),t.topologyOffset={Polygon:{factor:0,offset:0},Line:{factor:0,offset:0},Point:{factor:0,offset:0}},c.addCoincidentTopologyMethods(e,t.topologyOffset,c.CATEGORIES.map(function(e){return{key:e,method:"RelativeCoincidentTopology".concat(e,"OffsetParameters")}})),e.getCoincidentTopologyPolygonOffsetParameters=function(){var t=A.getResolveCoincidentTopologyPolygonOffsetParameters(),n=e.getRelativeCoincidentTopologyPolygonOffsetParameters();return{factor:t.factor+n.factor,offset:t.offset+n.offset}},e.getCoincidentTopologyLineOffsetParameters=function(){var t=A.getResolveCoincidentTopologyLineOffsetParameters(),n=e.getRelativeCoincidentTopologyLineOffsetParameters();return{factor:t.factor+n.factor,offset:t.offset+n.offset}},e.getCoincidentTopologyPointOffsetParameter=function(){var t=A.getResolveCoincidentTopologyPointOffsetParameters(),n=e.getRelativeCoincidentTopologyPointOffsetParameters();return{factor:t.factor+n.factor,offset:t.offset+n.offset}},e.getAbstractScalars=function(e,n,r,i,a){if(!e||!t.scalarVisibility)return{scalars:null,cellFLag:!1};var o=null,s=!1;if(n===y.DEFAULT)(o=e.getPointData().getScalars())||(o=e.getCellData().getScalars(),s=!0);else if(n===y.USE_POINT_DATA)o=e.getPointData().getScalars();else if(n===y.USE_CELL_DATA)o=e.getCellData().getScalars(),s=!0;else if(n===y.USE_POINT_FIELD_DATA){var u=e.getPointData();o=r===b.BY_ID?u.getArrayByIndex(i):u.getArrayByName(a)}else if(n===y.USE_CELL_FIELD_DATA){var l=e.getCellData();s=!0,o=r===b.BY_ID?l.getArrayByIndex(i):l.getArrayByName(a)}else if(n===y.USE_FIELD_DATA){var c=e.getFieldData();o=r===b.BY_ID?c.getArrayByIndex(i):c.getArrayByName(a)}return{scalars:o,cellFlag:s}},e.mapScalars=function(n,r){var i=e.getAbstractScalars(n,t.scalarMode,t.arrayAccessMode,t.arrayId,t.colorByArrayName).scalars;if(!i)return t.colorCoordinates=null,t.colorTextureMap=null,void(t.colorMapColors=null);if(t.useLookupTableScalarRange||e.getLookupTable().setRange(t.scalarRange[0],t.scalarRange[1]),e.canUseTextureMapForColoring(n))e.mapScalarsToTexture(i,r);else{t.colorCoordinates=null,t.colorTextureMap=null;var a=e.getLookupTable();a&&(a.build(),t.colorMapColors=a.mapScalars(i,t.colorMode,-1))}},e.scalarToTextureCoordinate=function(e,t,n){var r=.5,i=1;return u.isNan(e)||(i=.49,(r=(e-t)*n)>1e3?r=1e3:r<-1e3&&(r=-1e3)),{texCoordS:r,texCoordT:i}},e.createColorTextureCoordinates=function(t,n,r,i,a,o,u,l,c){var f=(o[1]-o[0])/l,d=[];d[0]=o[0]-f,d[1]=o[1]+f;var p=1/(d[1]-d[0]),h=n.getData(),g=t.getData(),m=0,v=0;if(a<0||a>=i)for(var y=0;y<r;++y){for(var b=0,M=0;M<i;++M)b+=g[m]*g[m],m++;var x=Math.sqrt(b);c&&(x=s.a.applyLogScale(x,u,o));var w=e.scalarToTextureCoordinate(x,d[0],p);h[v]=w.texCoordS,h[v+1]=w.texCoordT,v+=2}else{m+=a;for(var A=0;A<r;++A){var T=g[m];c&&(T=s.a.applyLogScale(T,u,o));var C=e.scalarToTextureCoordinate(T,d[0],p);h[v]=C.texCoordS,h[v+1]=C.texCoordT,v+=2,m+=i}}},e.mapScalarsToTexture=function(n,r){var i=t.lookupTable.getRange(),u=t.lookupTable.usingLogScale();u&&s.a.getLogRange(i,i);var l=t.lookupTable.getAlpha();if(t.colorMapColors=null,null==t.colorTextureMap||e.getMTime()>t.colorTextureMap.getMTime()||t.lookupTable.getMTime()>t.colorTextureMap.getMTime()||t.lookupTable.getAlpha()!==r){t.lookupTable.setAlpha(r),t.colorTextureMap=null,t.lookupTable.build();var c=t.lookupTable.getNumberOfAvailableColors();c>4094&&(c=4094),c+=2;for(var f=(i[1]-i[0])/(c-1-2),d=new Float64Array(2*c),p=0;p<c;++p)d[p]=i[0]+p*f-f,u&&(d[p]=Math.pow(10,d[p]));for(var h=0;h<c;++h)d[h+c]=NaN;t.colorTextureMap=o.a.newInstance(),t.colorTextureMap.setExtent(0,c-1,0,1,0,0);var g=a.a.newInstance({numberOfComponents:1,values:d});t.colorTextureMap.getPointData().setScalars(t.lookupTable.mapScalars(g,t.colorMode,0)),t.lookupTable.setAlpha(l)}if(!t.colorCoordinates||e.getMTime()>t.colorCoordinates.getMTime()||e.getInputData(0).getMTime()>t.colorCoordinates.getMTime()||t.lookupTable.getMTime()>t.colorCoordinates.getMTime()){t.colorCoordinates=null;var m=n.getNumberOfComponents(),v=n.getNumberOfTuples();t.colorCoordinates=a.a.newInstance({numberOfComponents:2,values:new Float32Array(2*v)});var y=t.lookupTable.getVectorComponent();t.lookupTable.getVectorMode()===M.MAGNITUDE&&n.getNumberOfComponents()>1&&(y=-1),e.createColorTextureCoordinates(n,t.colorCoordinates,v,m,y,i,t.lookupTable.getRange(),t.colorTextureMap.getPointData().getScalars().getNumberOfTuples()/2-2,u)}},e.getIsOpaque=function(){var t=e.getLookupTable();return!t||(t.build(),t.isOpaque())},e.canUseTextureMapForColoring=function(n){if(!t.interpolateScalarsBeforeMapping)return!1;if(t.lookupTable&&t.lookupTable.getIndexedLookup())return!1;var r=e.getAbstractScalars(n,t.scalarMode,t.arrayAccessMode,t.arrayId,t.colorByArrayName),i=r.scalars;return!(!i||r.cellFlag||t.colorMode===v.DEFAULT&&i.getDataType()===x.UNSIGNED_CHAR||t.colorMode===v.DIRECT_SCALARS)},e.clearColorArrays=function(){t.colorMapColors=null,t.colorCoordinates=null,t.colorTextureMap=null},e.getLookupTable=function(){return t.lookupTable||e.createDefaultLookupTable(),t.lookupTable},e.getMTime=function(){var e=t.mtime;if(null!==t.lookupTable){var n=t.lookupTable.getMTime();e=n>e?n:e}return e},e.getPrimitiveCount=function(){var t=e.getInputData();return{points:t.getPoints().getNumberOfValues()/3,verts:t.getVerts().getNumberOfValues()-t.getVerts().getNumberOfCells(),lines:t.getLines().getNumberOfValues()-2*t.getLines().getNumberOfCells(),triangles:t.getPolys().getNumberOfValues()-3*t.getLines().getNumberOfCells()}},e.acquireInvertibleLookupTable=w("AcquireInvertibleLookupTable"),e.valueToColor=w("ValueToColor"),e.colorToValue=w("ColorToValue"),e.useInvertibleColorFor=w("UseInvertibleColorFor"),e.clearInvertibleColor=w("ClearInvertibleColor")}(e,t)}var S=r.a.newInstance(C,"vtkMapper");t.a=Object.assign({newInstance:S,extend:C},A,g,m.b)},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i});var r={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},i={VOID:"",CHAR:"Int8Array",SIGNED_CHAR:"Int8Array",UNSIGNED_CHAR:"Uint8Array",SHORT:"Int16Array",UNSIGNED_SHORT:"Uint16Array",INT:"Int32Array",UNSIGNED_INT:"Uint32Array",FLOAT:"Float32Array",DOUBLE:"Float64Array"},a=i.FLOAT;t.c={DefaultDataType:a,DataTypeByteSize:r,VtkDataTypes:i}},function(e,t,n){"use strict";(function(e){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",function(){return a});var i={vtkObject:function(){return null}};function a(t){if(null==t)return t;if(t.isA)return t;if(!t.vtkClass)return e.console&&e.console.error&&e.console.error("Invalid VTK object"),null;var n=i[t.vtkClass];if(!n)return e.console&&e.console.error&&e.console.error("No vtk class found for Object of type ".concat(t.vtkClass)),null;var o=Object.assign({},t);Object.keys(o).forEach(function(e){o[e]&&"object"===r(o[e])&&o[e].vtkClass&&(o[e]=a(o[e]))});var s=n(o);return s&&s.modified&&s.modified(),s}a.register=function(e,t){i[e]=t}}).call(this,n(33))},function(e,t,n){"use strict";var r=n(1);function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(e){return e},s=new Float64Array(16);r.c.identity(s);var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.matrix=new Float64Array(16),r.c.identity(this.matrix),this.tmp=new Float64Array(3),this.angleConv=t?r.a.toRadian:o}var t,n,u;return t=e,(n=[{key:"rotateFromDirections",value:function(e,t){var n=new Float64Array(3),i=new Float64Array(3),a=new Float64Array(16);r.e.set(n,e[0],e[1],e[2]),r.e.set(i,t[0],t[1],t[2]),r.e.normalize(n,n),r.e.normalize(i,i);var o=r.e.dot(n,i);return o>=1?this:(r.e.cross(this.tmp,n,i),r.e.length(this.tmp,this.tmp)<1e-6&&(0===e[0]&&0===e[1]?r.e.set(this.tmp,0,1,0):r.e.set(this.tmp,0,-e[2],-e[1])),r.c.fromRotation(a,Math.acos(o),this.tmp),r.c.multiply(this.matrix,this.matrix,a),this)}},{key:"rotate",value:function(e,t){return r.e.set.apply(r.e,[this.tmp].concat(i(t))),r.e.normalize(this.tmp,this.tmp),r.c.rotate(this.matrix,this.matrix,this.angleConv(e),this.tmp),this}},{key:"rotateX",value:function(e){return r.c.rotateX(this.matrix,this.matrix,this.angleConv(e)),this}},{key:"rotateY",value:function(e){return r.c.rotateY(this.matrix,this.matrix,this.angleConv(e)),this}},{key:"rotateZ",value:function(e){return r.c.rotateZ(this.matrix,this.matrix,this.angleConv(e)),this}},{key:"translate",value:function(e,t,n){return r.e.set(this.tmp,e,t,n),r.c.translate(this.matrix,this.matrix,this.tmp),this}},{key:"scale",value:function(e,t,n){return r.e.set(this.tmp,e,t,n),r.c.scale(this.matrix,this.matrix,this.tmp),this}},{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(s[0]===this.matrix[0]&&s[1]===this.matrix[1]&&s[2]===this.matrix[2]&&s[3]===this.matrix[3]&&s[4]===this.matrix[4]&&s[5]===this.matrix[5]&&s[6]===this.matrix[6]&&s[7]===this.matrix[7]&&s[8]===this.matrix[8]&&s[9]===this.matrix[9]&&s[10]===this.matrix[10]&&s[11]===this.matrix[11]&&s[12]===this.matrix[12]&&s[13]===this.matrix[13]&&s[14]===this.matrix[14]&&s[15]===this.matrix[15])return this;for(var i=-1===n?e.length:t+3*n,a=t;a<i;a+=3)r.e.set(this.tmp,e[a],e[a+1],e[a+2]),r.e.transformMat4(this.tmp,this.tmp,this.matrix),e[a]=this.tmp[0],e[a+1]=this.tmp[1],e[a+2]=this.tmp[2];return this}},{key:"getMatrix",value:function(){return this.matrix}},{key:"getVTKMatrix",value:function(){return r.c.transpose(this.matrix,this.matrix),this.matrix}},{key:"setMatrix",value:function(e){return e&&16===e.length&&(this.matrix[0]=e[0],this.matrix[1]=e[1],this.matrix[2]=e[2],this.matrix[3]=e[3],this.matrix[4]=e[4],this.matrix[5]=e[5],this.matrix[6]=e[6],this.matrix[7]=e[7],this.matrix[8]=e[8],this.matrix[9]=e[9],this.matrix[10]=e[10],this.matrix[11]=e[11],this.matrix[12]=e[12],this.matrix[13]=e[13],this.matrix[14]=e[14],this.matrix[15]=e[15]),this}},{key:"identity",value:function(){return r.c.identity(this.matrix),this}}])&&a(t.prototype,n),u&&a(t,u),e}();t.a={buildFromDegree:function(){return new u(!0)},buildFromRadian:function(){return new u(!1)}}},function(e,t,n){"use strict";var r=n(0),i=n(42),a=n(77),o=n(22),s=n(1),u=r.a.vtkErrorMacro;var l={direction:null,indexToWorld:null,worldToIndex:null,spacing:[1,1,1],origin:[0,0,0],extent:[0,-1,0,-1,0,-1],dataDescription:o.a.EMPTY};function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Object.assign(t,l,n),i.a.extend(e,t,n),t.direction){if(Array.isArray(t.direction)){var c=t.direction.slice(0);t.direction=s.b.create();for(var f=0;f<9;++f)t.direction[f]=c[f]}}else t.direction=s.b.create();t.indexToWorld=new Float64Array(16),t.worldToIndex=new Float64Array(16),r.a.get(e,t,["direction","indexToWorld","worldToIndex"]),r.a.setGetArray(e,t,["origin","spacing"],3),r.a.getArray(e,t,["extent"],6),function(e,t){t.classHierarchy.push("vtkImageData"),e.setExtent=function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];if(t.deleted)u("instance deleted - cannot call any method");else if(r&&6===r.length){var o=!1;t.extent.forEach(function(e,t){if(e!==r[t]){if(o)return;o=!0}}),o&&(t.extent=[].concat(r),t.dataDescription=a.a.getDataDescriptionFromExtent(t.extent),e.modified())}},e.setDimensions=function(){var n,r,i;if(t.deleted)u("instance deleted - cannot call any method");else{if(1===arguments.length){var a=arguments.length<=0?void 0:arguments[0];n=a[0],r=a[1],i=a[2]}else{if(3!==arguments.length)return void u("Bad dimension specification");n=arguments.length<=0?void 0:arguments[0],r=arguments.length<=1?void 0:arguments[1],i=arguments.length<=2?void 0:arguments[2]}e.setExtent(0,n-1,0,r-1,0,i-1)}},e.getDimensions=function(){return[t.extent[1]-t.extent[0]+1,t.extent[3]-t.extent[2]+1,t.extent[5]-t.extent[4]+1]},e.getNumberOfCells=function(){for(var t=e.getDimensions(),n=1,r=0;r<3;r++){if(0===t[r])return 0;t[r]>1&&(n*=t[r]-1)}return n},e.getNumberOfPoints=function(){var t=e.getDimensions();return t[0]*t[1]*t[2]},e.getPoint=function(n){var r=e.getDimensions(),i=s.e.fromValues(0,0,0),a=[0,0,0];if(0===r[0]||0===r[1]||0===r[2])return u("Requesting a point from an empty image."),null;switch(t.dataDescription){case o.a.EMPTY:return null;case o.a.SINGLE_POINT:break;case o.a.X_LINE:i[0]=n;break;case o.a.Y_LINE:i[1]=n;break;case o.a.Z_LINE:i[2]=n;break;case o.a.XY_PLANE:i[0]=n%r[0],i[1]=n/r[0];break;case o.a.YZ_PLANE:i[1]=n%r[1],i[2]=n/r[1];break;case o.a.XZ_PLANE:i[0]=n%r[0],i[2]=n/r[0];break;case o.a.XYZ_GRID:i[0]=n%r[0],i[1]=n/r[0]%r[1],i[2]=n/(r[0]*r[1]);break;default:u("Invalid dataDescription")}var l=s.e.create();return e.indexToWorldVec3(i,l),s.e.copy(a,l),a},e.getBounds=function(){return e.extentToBounds(t.extent)},e.extentToBounds=function(t){var n=[t[0],t[2],t[4],t[1],t[2],t[4],t[0],t[3],t[4],t[1],t[3],t[4],t[0],t[2],t[5],t[1],t[2],t[5],t[0],t[3],t[5],t[1],t[3],t[5]],r=s.e.fromValues(n[0],n[1],n[2]),i=s.e.create();e.indexToWorldVec3(r,i);for(var a=[i[0],i[0],i[1],i[1],i[2],i[2]],o=3;o<24;o+=3)s.e.set(r,n[o],n[o+1],n[o+2]),e.indexToWorldVec3(r,i),i[0]<a[0]&&(a[0]=i[0]),i[1]<a[2]&&(a[2]=i[1]),i[2]<a[4]&&(a[4]=i[2]),i[0]>a[1]&&(a[1]=i[0]),i[1]>a[3]&&(a[3]=i[1]),i[2]>a[5]&&(a[5]=i[2]);return a},e.computeTransforms=function(){var e=s.e.fromValues(t.origin[0],t.origin[1],t.origin[2]);s.c.fromTranslation(t.indexToWorld,e),t.indexToWorld[0]=t.direction[0],t.indexToWorld[1]=t.direction[1],t.indexToWorld[2]=t.direction[2],t.indexToWorld[4]=t.direction[3],t.indexToWorld[5]=t.direction[4],t.indexToWorld[6]=t.direction[5],t.indexToWorld[8]=t.direction[6],t.indexToWorld[9]=t.direction[7],t.indexToWorld[10]=t.direction[8];var n=s.e.fromValues(t.spacing[0],t.spacing[1],t.spacing[2]);s.c.scale(t.indexToWorld,t.indexToWorld,n),s.c.invert(t.worldToIndex,t.indexToWorld)},e.setDirection=function(){if(t.deleted)return u("instance deleted - cannot call any method"),!1;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=r;if(1===a.length&&Array.isArray(a[0])&&(a=a[0]),9!==a.length)throw new RangeError("Invalid number of values for array setter");var o=!1;if(t.direction.forEach(function(e,t){if(e!==a[t]){if(o)return;o=!0}}),o){for(var s=0;s<9;++s)t.direction[s]=a[s];e.modified()}return!0},e.indexToWorldVec3=function(e,n){s.e.transformMat4(n,e,t.indexToWorld)},e.indexToWorld=function(e,n){var r=s.e.fromValues(e[0],e[1],e[2]),i=s.e.create();s.e.transformMat4(i,r,t.indexToWorld),s.e.copy(n,i)},e.worldToIndexVec3=function(e,n){s.e.transformMat4(n,e,t.worldToIndex)},e.worldToIndex=function(e,n){var r=s.e.fromValues(e[0],e[1],e[2]),i=s.e.create();s.e.transformMat4(i,r,t.worldToIndex),s.e.copy(n,i)},e.onModified(e.computeTransforms),e.computeTransforms(),e.getCenter=function(){for(var t=e.getBounds(),n=[],r=0;r<3;r++)n[r]=(t[2*r+1]+t[2*r])/2;return n}}(e,t)}var f=r.a.newInstance(c,"vtkImageData");t.a={newInstance:f,extend:c}},function(e,t,n){"use strict";var r=n(0),i=n(18);function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var s=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE];function u(e){return e[0]<=e[1]&&e[2]<=e[3]&&e[4]<=e[5]}function l(e){return[.5*(e[0]+e[1]),.5*(e[2]+e[3]),.5*(e[4]+e[5])]}function c(e,t){return e[2*t+1]-e[2*t]}function f(e){return[c(e,0),c(e,1),c(e,2)]}function d(e){var t=f(e);return t[0]>t[1]?t[0]>t[2]?t[0]:t[2]:t[1]>t[2]?t[1]:t[2]}function p(e){if(u(e)){var t=f(e);return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])}return null}function h(e,t){return e<=0&&t>=0||e>=0&&t<=0}function g(e,t){for(var n=0,r=0;r<2;r++)for(var i=2;i<4;i++)for(var a=4;a<6;a++)t[n]=[e[r],e[i],e[a]],n++}var m={isValid:u,getCenter:l,getLength:c,getLengths:f,getMaxLength:d,getDiagonalLength:p,getXRange:function(e){return e.slice(0,2)},getYRange:function(e){return e.slice(2,4)},getZRange:function(e){return e.slice(4,6)},getCorners:g,INIT_BOUNDS:s};var v={type:"vtkBoundingBox",bounds:[].concat(s),corners:[]};function y(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,v,n),r.a.obj(e,t),r.a.setGet(e,t,["bounds"]),function(e,t){t.classHierarchy.push("vtkBoundingBox"),e.clone=function(){var e=[].concat(t.bounds);return b({bounds:e})},e.equals=function(e){var n=t.bounds,r=e.getBounds();return n[0]===r[0]&&n[1]===r[1]&&n[2]===r[2]&&n[3]===r[3]&&n[4]===r[4]&&n[5]===r[5]},e.setMinPoint=function(e,n,r){var i=o(t.bounds,6),a=i[0],s=i[1],u=i[2],l=i[3],c=i[4],f=i[5];return t.bounds=[e,e>s?e:s,n,n>l?n:l,r,r>f?r:f],a!==e||u!==n||c!==r},e.setMaxPoint=function(e,n,r){var i=o(t.bounds,6),a=i[0],s=i[1],u=i[2],l=i[3],c=i[4],f=i[5];return t.bounds=[e<a?e:a,e,n<u?n:u,n,r<c?r:c,r],s!==e||l!==n||f!==r},e.addPoint=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.bounds=t.bounds.map(function(e,t){if(t%2==0){var r=t/2;return e<n[r]?e:n[r]}var i=(t-1)/2;return e>n[i]?e:n[i]})},e.addBounds=function(e,n,r,i,a,s){var u=o(t.bounds,6),l=u[0],c=u[1],f=u[2],d=u[3],p=u[4],h=u[5];t.bounds=[Math.min(e,l),Math.max(n,c),Math.min(r,f),Math.max(i,d),Math.min(a,p),Math.max(s,h)]},e.addBox=function(t){e.addBounds.apply(e,a(t.getBounds()))},e.isValid=function(){return u(t.bounds)},e.intersect=function(n){if(!e.isValid()||!n.isValid())return!1;for(var r,i=[0,0,0,0,0,0],a=n.getBounds(),o=0;o<3;o++)if(r=!1,a[2*o]>=t.bounds[2*o]&&a[2*o]<=t.bounds[2*o+1]?(r=!0,i[2*o]=a[2*o]):t.bounds[2*o]>=a[2*o]&&t.bounds[2*o]<=a[2*o+1]&&(r=!0,i[2*o]=t.bounds[2*o]),a[2*o+1]>=t.bounds[2*o]&&a[2*o+1]<=t.bounds[2*o+1]?(r=!0,i[2*o+1]=n.MaxPnt[o]):t.bounds[2*o+1]>=n.MinPnt[2*o]&&t.bounds[2*o+1]<=n.MaxPnt[2*o+1]&&(r=!0,i[2*o+1]=t.bounds[2*o+1]),!r)return!1;return t.bounds=i,!0},e.intersects=function(n){if(!e.isValid()||!n.isValid())return!1;for(var r=n.getBounds(),i=0;i<3;i++)if(!(r[2*i]>=t.bounds[2*i]&&r[2*i]<=t.bounds[2*i+1]||t.bounds[2*i]>=r[2*i]&&t.bounds[2*i]<=r[2*i+1]||r[2*i+1]>=t.bounds[2*i]&&r[2*i+1]<=t.bounds[2*i+1]||t.bounds[2*i+1]>=n.MinPnt[2*i]&&t.bounds[2*i+1]<=n.MaxPnt[2*i+1]))return!1;return!0},e.intersectPlane=function(e,n){for(var r=[[0,1,2,3,4,5,6,7],[0,1,4,5,2,3,6,7],[0,2,4,6,1,3,5,7]],a=[0,0,0,0,0,0,0,0],o=0,s=0;s<2;s++)for(var u=2;u<4;u++)for(var l=4;l<6;l++){var c=[t.bounds[s],t.bounds[u],t.bounds[l]];a[o++]=i.a.evaluate(n,e,c)}for(var f=2;f--&&!(h(a[r[f][0]],a[r[f][4]])&&h(a[r[f][1]],a[r[f][5]])&&h(a[r[f][2]],a[r[f][6]])&&h(a[r[f][3]],a[r[f][7]])););if(f<0)return!1;for(var d=Math.sign(n[f]),p=Math.abs((t.bounds[2*f+1]-t.bounds[2*f])*n[f]),g=d>0?1:0,m=0;m<4;m++)if(0!==p){var v=Math.abs(a[r[f][m]])/p;d>0&&v<g&&(g=v),d<0&&v>g&&(g=v)}var y=(1-g)*t.bounds[2*f]+g*t.bounds[2*f+1];return d>0?t.bounds[2*f]=y:t.bounds[2*f+1]=y,!0},e.containsPoint=function(e,n,r){return!(e<t.bounds[0]||e>t.bounds[1]||n<t.bounds[2]||n>t.bounds[3]||r<t.bounds[4]||r>t.bounds[5])},e.getMinPoint=function(){return[t.bounds[0],t.bounds[2],t.bounds[4]]},e.getMaxPoint=function(){return[t.bounds[1],t.bounds[3],t.bounds[5]]},e.getBound=function(e){return t.bound[e]},e.contains=function(t){return!!e.intersects(t)&&!!e.containsPoint.apply(e,a(t.getMinPoint()))&&(!!e.containsPoint.apply(e,a(t.getMaxPoint()))||0)},e.getCenter=function(){return l(t.bounds)},e.getLength=function(e){return c(t.bounds,e)},e.getLengths=function(){return f(t.bounds)},e.getMaxLength=function(){return d(t.bounds)},e.getDiagonalLength=function(){return p(t.bounds)},e.reset=function(){return e.setBounds([].concat(s))},e.inflate=function(e){t.bounds=t.bounds.map(function(t,n){return n%2==0?t-e:t+e})},e.getCorners=function(){return g(t.bounds,t.corners),t.corners},e.scale=function(n,r,i){if(e.isValid()){var a=[].concat(t.bounds);return n>=0?(a[0]*=n,a[1]*=n):(a[0]=n*t.bounds[1],a[1]=n*t.bounds[0]),r>=0?(a[2]*=r,a[3]*=r):(a[2]=r*t.bounds[3],a[3]=r*t.bounds[2]),i>=0?(a[4]*=i,a[5]*=i):(a[4]=i*t.bounds[5],a[5]=i*t.bounds[4]),t.bounds=a,!0}return!1}}(e,t)}var b=r.a.newInstance(y,"vtkBoundingBox");t.a=Object.assign({newInstance:b,extend:y},m)},function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return i});var r={UNIFORM:0,DATA_OBJECT_FIELD:0,COORDINATE:1,POINT_DATA:1,POINT:2,POINT_FIELD_DATA:2,CELL:3,CELL_FIELD_DATA:3,VERTEX:4,VERTEX_FIELD_DATA:4,EDGE:5,EDGE_FIELD_DATA:5,ROW:6,ROW_DATA:6},i={FIELD_ASSOCIATION_POINTS:0,FIELD_ASSOCIATION_CELLS:1,FIELD_ASSOCIATION_NONE:2,FIELD_ASSOCIATION_POINTS_THEN_CELLS:3,FIELD_ASSOCIATION_VERTICES:4,FIELD_ASSOCIATION_EDGES:5,FIELD_ASSOCIATION_ROWS:6,NUMBER_OF_ASSOCIATIONS:7};t.c={FieldDataTypes:r,FieldAssociations:i}},function(e,t,n){"use strict";var r=n(40),i=n(108),a=n(63),o=n(182),s=n(56);function u(e){return e}function l(e,t){for(var n=0;n<e.length;++n)t[n]=255&e.charCodeAt(n);return t}t.newBlob=function(e,n){t.checkSupport("blob");try{return new Blob(e,{type:n})}catch(t){try{for(var r=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder),i=0;i<e.length;i++)r.append(e[i]);return r.getBlob(n)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(e,t,n){var r=[],i=0,a=e.length;if(a<=n)return String.fromCharCode.apply(null,e);for(;i<a;)"array"===t||"nodebuffer"===t?r.push(String.fromCharCode.apply(null,e.slice(i,Math.min(i+n,a)))):r.push(String.fromCharCode.apply(null,e.subarray(i,Math.min(i+n,a)))),i+=n;return r.join("")},stringifyByChar:function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&1===String.fromCharCode.apply(null,a.newBuffer(1)).length}catch(e){return!1}}()}};function f(e){var n=65536,r=t.getTypeOf(e),i=!0;if("uint8array"===r?i=c.applyCanBeUsed.uint8array:"nodebuffer"===r&&(i=c.applyCanBeUsed.nodebuffer),i)for(;n>1;)try{return c.stringifyByChunk(e,r,n)}catch(e){n=Math.floor(n/2)}return c.stringifyByChar(e)}function d(e,t){for(var n=0;n<e.length;n++)t[n]=e[n];return t}t.applyFromCharCode=f;var p={};p.string={string:u,array:function(e){return l(e,new Array(e.length))},arraybuffer:function(e){return p.string.uint8array(e).buffer},uint8array:function(e){return l(e,new Uint8Array(e.length))},nodebuffer:function(e){return l(e,a.newBuffer(e.length))}},p.array={string:f,array:u,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return a.newBuffer(e)}},p.arraybuffer={string:function(e){return f(new Uint8Array(e))},array:function(e){return d(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:u,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return a.newBuffer(new Uint8Array(e))}},p.uint8array={string:f,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){var t=new Uint8Array(e.length);return e.length&&t.set(e,0),t.buffer},uint8array:u,nodebuffer:function(e){return a.newBuffer(e)}},p.nodebuffer={string:f,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return p.nodebuffer.uint8array(e).buffer},uint8array:function(e){return d(e,new Uint8Array(e.length))},nodebuffer:u},t.transformTo=function(e,n){if(n||(n=""),!e)return n;t.checkSupport(e);var r=t.getTypeOf(n);return p[r][e](n)},t.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":r.nodebuffer&&a.isBuffer(e)?"nodebuffer":r.uint8array&&e instanceof Uint8Array?"uint8array":r.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},t.checkSupport=function(e){if(!r[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},t.MAX_VALUE_16BITS=65535,t.MAX_VALUE_32BITS=-1,t.pretty=function(e){var t,n,r="";for(n=0;n<(e||"").length;n++)r+="\\x"+((t=e.charCodeAt(n))<16?"0":"")+t.toString(16).toUpperCase();return r},t.delay=function(e,t,n){o(function(){e.apply(n||null,t||[])})},t.inherits=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n},t.extend=function(){var e,t,n={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&void 0===n[t]&&(n[t]=arguments[e][t]);return n},t.prepareContent=function(e,n,a,o,u){return s.Promise.resolve(n).then(function(e){return r.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new s.Promise(function(t,n){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(e){n(e.target.error)},r.readAsArrayBuffer(e)}):e}).then(function(n){var c,f=t.getTypeOf(n);return f?("arraybuffer"===f?n=t.transformTo("uint8array",n):"string"===f&&(u?n=i.decode(n):a&&!0!==o&&(n=l(c=n,r.uint8array?new Uint8Array(c.length):new Array(c.length)))),n):s.Promise.reject(new Error("The data of '"+e+"' is in an unsupported format !"))})}},function(e,t,n){"use strict";var r=n(0),i=n(3),a=n(7),o=r.a.vtkErrorMacro,s=[1,-1,1,-1,1,-1];var u={empty:!0,numberOfComponents:3,dataType:a.b.FLOAT,bounds:[1,-1,1,-1,1,-1]};function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,u,n),i.a.extend(e,t,n),function(e,t){t.classHierarchy.push("vtkPoints"),e.getNumberOfPoints=e.getNumberOfTuples,e.setNumberOfPoints=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;e.getNumberOfPoints()!==n&&(t.size=n*r,t.values=new window[t.dataType](t.size),e.setNumberOfComponents(r),e.modified())},e.setPoint=function(e){for(var n=e*t.numberOfComponents,r=0;r<t.numberOfComponents;r++)t.values[n+r]=r+1<1||arguments.length<=r+1?void 0:arguments[r+1]},e.getPoint=e.getTuple,e.getBounds=function(){if(3===e.getNumberOfComponents()){var n=e.getRange(0);t.bounds[0]=n[0],t.bounds[1]=n[1];var r=e.getRange(1);t.bounds[2]=r[0],t.bounds[3]=r[1];var i=e.getRange(2);return t.bounds[4]=i[0],t.bounds[5]=i[1],t.bounds}if(2!==e.getNumberOfComponents())return o("getBounds called on an array with components of\n        ".concat(e.getNumberOfComponents())),s;var a=e.getRange(0);t.bounds[0]=a[0],t.bounds[1]=a[1];var u=e.getRange(1);return t.bounds[2]=u[0],t.bounds[3]=u[1],t.bounds[4]=0,t.bounds[5]=0,t.bounds},e.computeBounds=e.getBounds,e.setNumberOfComponents(t.numberOfComponents<2?3:t.numberOfComponents)}(e,t)}var c=r.a.newInstance(l,"vtkPoints");t.a={newInstance:c,extend:l}},function(e,t,n){"use strict";var r=n(32),i=n(17),a=n.n(i),o=n(0),s=n(20),u=n(7),l=o.a.vtkErrorMacro,c=o.a.vtkDebugMacro,f=0;function d(e){var t=document.querySelector('.webResource[data-url="'.concat(e,'"]'));return t?t.innerHTML:null}function p(e){return"/"===e[0]?e.substr(1):e}var h={fetchJSON:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments.length>1?arguments[1]:void 0;return arguments.length>2&&void 0!==arguments[2]&&arguments[2],new Promise(function(t,n){var r=d(p(e));null===r?n(new Error("No such JSON ".concat(e))):t(JSON.parse(r))})},fetchText:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments.length>1?arguments[1]:void 0;return arguments.length>2&&void 0!==arguments[2]&&arguments[2],new Promise(function(t,n){var r=d(e);null===r?n(new Error("No such text ".concat(e))):t(r)})},fetchArray:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise(function(o,h){var g=p([t,n.ref.basepath,i.compression?"".concat(n.ref.id,".gz"):n.ref.id].join("/")),m=d(g);if(null===m)h(new Error("No such array ".concat(g)));else{if("string"===n.dataType){var v=atob(m);i.compression&&(v=a.a.inflate(v,{to:"string"})),n.values=JSON.parse(v)}else{var y=Object(r.toByteArray)(m);n.buffer=new ArrayBuffer(y.length),new Uint8Array(n.buffer).set(y),i.compression&&("string"===n.dataType||"JSON"===n.dataType?n.buffer=a.a.inflate(new Uint8Array(n.buffer),{to:"string"}):n.buffer=a.a.inflate(new Uint8Array(n.buffer)).buffer),"JSON"===n.ref.encode?n.values=JSON.parse(n.buffer):(s.a.ENDIANNESS!==n.ref.encode&&s.a.ENDIANNESS&&(c("Swap bytes of ".concat(n.name)),s.a.swapBytes(n.buffer,u.a[n.dataType])),n.values=new window[n.dataType](n.buffer)),n.values.length!==n.size&&l("Error in FetchArray: ".concat(n.name," does not have the proper array size. Got ").concat(n.values.length,", instead of ").concat(n.size))}delete n.ref,0==--f&&e.invokeBusy&&e.invokeBusy(!1),e.modified&&e.modified(),o(n)}})}},g=o.a.vtkErrorMacro,m=o.a.vtkDebugMacro,v=0;var y={fetchArray:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return n.ref&&!n.ref.pending?new Promise(function(i,o){var l=new XMLHttpRequest,c=[t,n.ref.basepath,r.compression?"".concat(n.ref.id,".gz"):n.ref.id].join("/");l.onreadystatechange=function(t){1===l.readyState&&(n.ref.pending=!0,1==++v&&e.invokeBusy&&e.invokeBusy(!0)),4===l.readyState&&(n.ref.pending=!1,200===l.status||0===l.status?(n.buffer=l.response,r.compression&&("string"===n.dataType||"JSON"===n.dataType?n.buffer=a.a.inflate(new Uint8Array(n.buffer),{to:"string"}):n.buffer=a.a.inflate(new Uint8Array(n.buffer)).buffer),"JSON"===n.ref.encode?n.values=JSON.parse(n.buffer):(s.a.ENDIANNESS!==n.ref.encode&&s.a.ENDIANNESS&&(m("Swap bytes of ".concat(n.name)),s.a.swapBytes(n.buffer,u.a[n.dataType])),n.values=new window[n.dataType](n.buffer)),n.values.length!==n.size&&g("Error in FetchArray: ".concat(n.name,", does not have the proper array size. Got ").concat(n.values.length,", instead of ").concat(n.size)),delete n.ref,0==--v&&e.invokeBusy&&e.invokeBusy(!1),e.modified&&e.modified(),i(n)):o({xhr:l,e:t}))},r&&r.progressCallback&&l.addEventListener("progress",r.progressCallback),l.open("GET",c,!0),l.responseType=r.compression||"string"!==n.dataType?"arraybuffer":"text",l.send()}):Promise.resolve(n)},fetchJSON:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(function(r,i){var o=new XMLHttpRequest;o.onreadystatechange=function(t){1===o.readyState&&1==++v&&e.invokeBusy&&e.invokeBusy(!0),4===o.readyState&&(0==--v&&e.invokeBusy&&e.invokeBusy(!1),200===o.status||0===o.status?n.compression?r(JSON.parse(a.a.inflate(new Uint8Array(o.response),{to:"string"}))):r(JSON.parse(o.responseText)):i({xhr:o,e:t}))},n&&n.progressCallback&&o.addEventListener("progress",n.progressCallback),o.open("GET",t,!0),o.responseType=n.compression?"arraybuffer":"text",o.send()})},fetchText:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n&&n.compression&&"gz"!==n.compression&&(g("Supported algorithms are: [gz]"),g("Unkown compression algorithm: ".concat(n.compression))),new Promise(function(r,i){var o=new XMLHttpRequest;o.onreadystatechange=function(t){1===o.readyState&&1==++v&&e.invokeBusy&&e.invokeBusy(!0),4===o.readyState&&(0==--v&&e.invokeBusy&&e.invokeBusy(!1),200===o.status||0===o.status?n.compression?r(a.a.inflate(new Uint8Array(o.response),{to:"string"})):r(o.responseText):i({xhr:o,e:t}))},n.progressCallback&&o.addEventListener("progress",n.progressCallback),o.open("GET",t,!0),o.responseType=n.compression?"arraybuffer":"text",o.send()})},fetchBinary:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(n,r){var i=new XMLHttpRequest;i.onreadystatechange=function(e){4===i.readyState&&(200===i.status||0===i.status?n(i.response):r({xhr:i,e:e}))},t&&t.progressCallback&&i.addEventListener("progress",t.progressCallback),i.open("GET",e,!0),i.responseType="arraybuffer",i.send()})}},b=n(85),M=n.n(b),x=o.a.vtkErrorMacro,w=o.a.vtkDebugMacro;var A={uint8array:function(e,t,n){return function(r){e.buffer=new ArrayBuffer(r.length),new Uint8Array(e.buffer).set(r),t&&("string"===e.dataType||"JSON"===e.dataType?e.buffer=a.a.inflate(new Uint8Array(e.buffer),{to:"string"}):e.buffer=a.a.inflate(new Uint8Array(e.buffer)).buffer),"JSON"===e.ref.encode?e.values=JSON.parse(e.buffer):(s.a.ENDIANNESS!==e.ref.encode&&s.a.ENDIANNESS&&(w("Swap bytes of ".concat(e.name)),s.a.swapBytes(e.buffer,u.a[e.dataType])),e.values=new window[e.dataType](e.buffer)),e.values.length!==e.size&&x("Error in FetchArray: ".concat(e.name," does not have the proper array size. Got ").concat(e.values.length,", instead of ").concat(e.size)),n()}},string:function(e,t,n){return function(r){e.values=t?JSON.parse(a.a.inflate(r,{to:"string"})):JSON.parse(r),n()}}};function T(e){return"/"===e[0]?e.substr(1):e}var C={create:function(e){var t=!1,n=0,r=new M.a,i=r;return r.loadAsync(e.zipContent).then(function(){t=!0;var n=[];r.forEach(function(e,t){-1!==e.indexOf("index.json")&&n.push(e)}),n.sort(function(e,t){return e.length-t.length});for(var a=n[0].split("/");a.length>1;){var o=a.shift();i=i.folder(o)}e.callback&&e.callback(r)}),{fetchArray:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise(function(s,u){t||x("ERROR!!! zip not ready...");var l=T([r,a.ref.basepath,o.compression?"".concat(a.ref.id,".gz"):a.ref.id].join("/"));1==++n&&e.invokeBusy&&e.invokeBusy(!0);var c="string"!==a.dataType||o.compression?"uint8array":"string",f=A[c](a,o.compression,function(){delete a.ref,0==--n&&e.invokeBusy&&e.invokeBusy(!1),e.modified&&e.modified(),s(a)});i.file(l).async(c).then(f)})},fetchJSON:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=T(e);return t||x("ERROR!!! zip not ready..."),n.compression?"gz"===n.compression?i.file(r).async("uint8array").then(function(e){var t=a.a.inflate(e,{to:"string"});return Promise.resolve(JSON.parse(t))}):Promise.reject(new Error("Invalid compression")):i.file(r).async("string").then(function(e){return Promise.resolve(JSON.parse(e))})},fetchText:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=T(e);return t||x("ERROR!!! zip not ready..."),n.compression?"gz"===n.compression?i.file(r).async("uint8array").then(function(e){var t=a.a.inflate(e,{to:"string"});return Promise.resolve(t)}):Promise.reject(new Error("Invalid compression")):i.file(r).async("string").then(function(e){return Promise.resolve(e)})}}}},S={http:function(e){return y},zip:function(e){return C.create(e)},html:function(e){return h}};t.a={get:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"http",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return S[e](t)}}},function(e,t,n){"use strict";var r=n(0),i=n(19),a=i.b.Representation,o=i.b.Interpolation;function s(e){return function(){return r.a.vtkErrorMacro("vtkProperty::".concat(e," - NOT IMPLEMENTED"))}}var u={color:[1,1,1],ambientColor:[1,1,1],diffuseColor:[1,1,1],specularColor:[1,1,1],edgeColor:[0,0,0],ambient:0,diffuse:1,specular:0,specularPower:1,opacity:1,interpolation:o.GOURAUD,representation:a.SURFACE,edgeVisibility:!1,backfaceCulling:!1,frontfaceCulling:!1,pointSize:1,lineWidth:1,lighting:!0,shading:!1,materialName:null};function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,u,n),r.a.obj(e,t),r.a.setGet(e,t,["lighting","interpolation","ambient","diffuse","specular","specularPower","opacity","edgeVisibility","lineWidth","pointSize","backfaceCulling","frontfaceCulling","representation"]),r.a.setGetArray(e,t,["ambientColor","specularColor","diffuseColor","edgeColor"],3),function(e,t){t.classHierarchy.push("vtkProperty"),e.setColor=function(n,r,i){t.color[0]===n&&t.color[1]===r&&t.color[2]===i||(t.color[0]=n,t.color[1]=r,t.color[2]=i,e.modified()),e.setDiffuseColor(t.color),e.setAmbientColor(t.color),e.setSpecularColor(t.color)},e.computeCompositeColor=s("ComputeCompositeColor"),e.getColor=function(){var e=0;t.ambient+t.diffuse+t.specular>0&&(e=1/(t.ambient+t.diffuse+t.specular));for(var n=0;n<3;n++)t.color[n]=e*(t.ambient*t.ambientColor[n]+t.diffuse*t.diffuseColor[n]+t.specular*t.specularColor[n]);return[].concat(t.color)},e.addShaderVariable=s("AddShaderVariable"),e.setInterpolationToFlat=function(){return e.setInterpolation(o.FLAT)},e.setInterpolationToGouraud=function(){return e.setInterpolation(o.GOURAUD)},e.setInterpolationToPhong=function(){return e.setInterpolation(o.PHONG)},e.getInterpolationAsString=function(){return r.a.enumToString(o,t.interpolation)},e.setRepresentationToWireframe=function(){return e.setRepresentation(a.WIREFRAME)},e.setRepresentationToSurface=function(){return e.setRepresentation(a.SURFACE)},e.setRepresentationToPoints=function(){return e.setRepresentation(a.POINTS)},e.getRepresentationAsString=function(){return r.a.enumToString(a,t.representation)}}(e,t)}var c=r.a.newInstance(l,"vtkProperty");t.a=Object.assign({newInstance:c,extend:l},i.b)},function(e,t,n){"use strict";var r={};(0,n(39).assign)(r,n(162),n(165),n(102)),e.exports=r},function(e,t,n){"use strict";var r=n(2),i=n(0),a=1e-6;function o(e,t,n){var r=n[0]*(e[0]-t[0])+n[1]*(e[1]-t[1])+n[2]*(e[2]-t[2]);return Math.abs(r)}function s(e,t,n,i){var a=[];r.subtract(e,t,a);var o=r.dot(n,a);i[0]=e[0]-o*n[0],i[1]=e[1]-o*n[1],i[2]=e[2]-o*n[2]}function u(e,t,n){var i=r.dot(e,t),a=r.dot(t,t);0===a&&(a=1),n[0]=e[0]-i*t[0]/a,n[1]=e[1]-i*t[1]/a,n[2]=e[2]-i*t[2]/a}function l(e,t,n,i){var a=[];r.subtract(e,t,a);var o=r.dot(n,a),s=r.dot(n,n);0!==s?(i[0]=e[0]-o*n[0]/s,i[1]=e[1]-o*n[1]/s,i[2]=e[2]-o*n[2]/s):(i[0]=e[0],i[1]=e[1],i[2]=e[2])}function c(e,t,n,i){var o={intersection:!1,t:Number.MAX_VALUE,x:[]},s=[],u=[];r.subtract(t,e,s),r.subtract(n,e,u);var l=r.dot(i,u),c=r.dot(i,s);return(c<0?-c:c)<=(l<0?-l*a:l*a)?o:(o.t=l/c,o.x[0]=e[0]+o.t*s[0],o.x[1]=e[1]+o.t*s[1],o.x[2]=e[2]+o.t*s[2],o.intersection=o.t>=0&&o.t<=1,o)}var f={evaluate:function(e,t,n){return e[0]*(n[0]-t[0])+e[1]*(n[1]-t[1])+e[2]*(n[2]-t[2])},distanceToPlane:o,projectPoint:s,projectVector:u,generalizedProjectPoint:l,intersectWithLine:c};var d={normal:[0,0,1],origin:[0,0,0]};function p(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,d,n),i.a.obj(e,t),i.a.setGetArray(e,t,["normal","origin"],3),function(e,t){t.classHierarchy.push("vtkPlane"),e.distanceToPlane=function(e){return o(e,t.origin,t.normal)},e.projectPoint=function(e,n){s(e,t.origin,t.normal,n)},e.projectVector=function(e,n){u(e,t.normal,n)},e.push=function(e){if(0!==e)for(var n=0;n<3;n++)t.origin[n]+=e*t.normal[n]},e.generalizedProjectPoint=function(e,n){l(e,t.origin,t.normal,n)},e.evaluateFunction=function(e,n,r){return Array.isArray(e)?t.normal[0]*(e[0]-t.origin[0])+t.normal[1]*(e[1]-t.origin[1])+t.normal[2]*(e[2]-t.origin[2]):t.normal[0]*(e-t.origin[0])+t.normal[1]*(n-t.origin[1])+t.normal[2]*(r-t.origin[2])},e.evaluateGradient=function(e){return[t.normal[0],t.normal[1],t.normal[2]]},e.intersectWithLine=function(e,n){return c(e,n,t.origin,t.normal)}}(e,t)}var h=i.a.newInstance(p,"vtkPlane");t.a=Object.assign({newInstance:h,extend:p},f)},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r={FLAT:0,GOURAUD:1,PHONG:2},i={POINTS:0,WIREFRAME:1,SURFACE:2},a=r;t.b={Shading:r,Representation:i,Interpolation:a}},function(e,t,n){"use strict";function r(){var e=new ArrayBuffer(4),t=new Uint8Array(e),n=new Uint32Array(e);return t[0]=161,t[1]=178,t[2]=195,t[3]=212,3569595041===n[0]?"LittleEndian":2712847316===n[0]?"BigEndian":null}var i=r();t.a={ENDIANNESS:i,getEndianness:r,swapBytes:function(e,t){if(!(t<2))for(var n=new Int8Array(e),r=n.length,i=[],a=0;a<r;a+=t){for(var o=0;o<t;o++)i.push(n[a+o]);for(var s=0;s<t;s++)n[a+s]=i.pop()}}}},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i});var r={SCALARS:0,VECTORS:1,NORMALS:2,TCOORDS:3,TENSORS:4,GLOBALIDS:5,PEDIGREEIDS:6,EDGEFLAG:7,NUM_ATTRIBUTES:8},i={DEFAULT:0,SINGLE:1,DOUBLE:2};t.c={AttributeCopyOperations:{COPYTUPLE:0,INTERPOLATE:1,PASSDATA:2,ALLCOPY:3},AttributeLimitTypes:{MAX:0,EXACT:1,NOLIMIT:2},AttributeTypes:r,CellGhostTypes:{DUPLICATECELL:1,HIGHCONNECTIVITYCELL:2,LOWCONNECTIVITYCELL:4,REFINEDCELL:8,EXTERIORCELL:16,HIDDENCELL:32},DesiredOutputPrecision:i,PointGhostTypes:{DUPLICATEPOINT:1,HIDDENPOINT:2},ghostArrayName:"vtkGhostType"}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={UNCHANGED:0,SINGLE_POINT:1,X_LINE:2,Y_LINE:3,Z_LINE:4,XY_PLANE:5,YZ_PLANE:6,XZ_PLANE:7,XYZ_GRID:8,EMPTY:9};t.b={StructuredType:r}},function(e,t,n){(function(){var t,r,i,a,o,s,u,l,c,f,d,p,h={}.hasOwnProperty;p=n(41),d=p.isObject,f=p.isFunction,c=p.isEmpty,o=null,t=null,r=null,i=null,a=null,u=null,l=null,s=null,e.exports=function(){function e(e){this.parent=e,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.children=[],o||(o=n(65),t=n(66),r=n(67),i=n(68),a=n(69),u=n(74),l=n(75),s=n(76))}return e.prototype.element=function(e,t,n){var r,i,a,o,s,u,l,p,g,m;if(u=null,null==t&&(t={}),t=t.valueOf(),d(t)||(n=(g=[t,n])[0],t=g[1]),null!=e&&(e=e.valueOf()),Array.isArray(e))for(a=0,l=e.length;a<l;a++)i=e[a],u=this.element(i);else if(f(e))u=this.element(e.apply());else if(d(e)){for(s in e)if(h.call(e,s))if(m=e[s],f(m)&&(m=m.apply()),d(m)&&c(m)&&(m=null),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===s.indexOf(this.stringify.convertAttKey))u=this.attribute(s.substr(this.stringify.convertAttKey.length),m);else if(!this.options.separateArrayItems&&Array.isArray(m))for(o=0,p=m.length;o<p;o++)i=m[o],(r={})[s]=i,u=this.element(r);else d(m)?(u=this.element(s)).element(m):u=this.element(s,m)}else u=!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===e.indexOf(this.stringify.convertTextKey)?this.text(n):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===e.indexOf(this.stringify.convertCDataKey)?this.cdata(n):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===e.indexOf(this.stringify.convertCommentKey)?this.comment(n):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===e.indexOf(this.stringify.convertRawKey)?this.raw(n):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===e.indexOf(this.stringify.convertPIKey)?this.instruction(e.substr(this.stringify.convertPIKey.length),n):this.node(e,t,n);if(null==u)throw new Error("Could not create any elements with: "+e);return u},e.prototype.insertBefore=function(e,t,n){var r,i,a;if(this.isRoot)throw new Error("Cannot insert elements at root level");return i=this.parent.children.indexOf(this),a=this.parent.children.splice(i),r=this.parent.element(e,t,n),Array.prototype.push.apply(this.parent.children,a),r},e.prototype.insertAfter=function(e,t,n){var r,i,a;if(this.isRoot)throw new Error("Cannot insert elements at root level");return i=this.parent.children.indexOf(this),a=this.parent.children.splice(i+1),r=this.parent.element(e,t,n),Array.prototype.push.apply(this.parent.children,a),r},e.prototype.remove=function(){var e;if(this.isRoot)throw new Error("Cannot remove the root element");return e=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[e,e-e+1].concat([])),this.parent},e.prototype.node=function(e,t,n){var r,i;return null!=e&&(e=e.valueOf()),t||(t={}),t=t.valueOf(),d(t)||(n=(i=[t,n])[0],t=i[1]),r=new o(this,e,t),null!=n&&r.text(n),this.children.push(r),r},e.prototype.text=function(e){var t;return t=new l(this,e),this.children.push(t),this},e.prototype.cdata=function(e){var n;return n=new t(this,e),this.children.push(n),this},e.prototype.comment=function(e){var t;return t=new r(this,e),this.children.push(t),this},e.prototype.commentBefore=function(e){var t,n;return t=this.parent.children.indexOf(this),n=this.parent.children.splice(t),this.parent.comment(e),Array.prototype.push.apply(this.parent.children,n),this},e.prototype.commentAfter=function(e){var t,n;return t=this.parent.children.indexOf(this),n=this.parent.children.splice(t+1),this.parent.comment(e),Array.prototype.push.apply(this.parent.children,n),this},e.prototype.raw=function(e){var t;return t=new u(this,e),this.children.push(t),this},e.prototype.instruction=function(e,t){var n,r,i,a,o;if(null!=e&&(e=e.valueOf()),null!=t&&(t=t.valueOf()),Array.isArray(e))for(a=0,o=e.length;a<o;a++)n=e[a],this.instruction(n);else if(d(e))for(n in e)h.call(e,n)&&(r=e[n],this.instruction(n,r));else f(t)&&(t=t.apply()),i=new s(this,e,t),this.children.push(i);return this},e.prototype.instructionBefore=function(e,t){var n,r;return n=this.parent.children.indexOf(this),r=this.parent.children.splice(n),this.parent.instruction(e,t),Array.prototype.push.apply(this.parent.children,r),this},e.prototype.instructionAfter=function(e,t){var n,r;return n=this.parent.children.indexOf(this),r=this.parent.children.splice(n+1),this.parent.instruction(e,t),Array.prototype.push.apply(this.parent.children,r),this},e.prototype.declaration=function(e,t,n){var r,a;return r=this.document(),a=new i(r,e,t,n),r.children[0]instanceof i?r.children[0]=a:r.children.unshift(a),r.root()||r},e.prototype.doctype=function(e,t){var n,r,i,o,s,u,l,c,f;for(n=this.document(),r=new a(n,e,t),i=o=0,u=(c=n.children).length;o<u;i=++o)if(c[i]instanceof a)return n.children[i]=r,r;for(i=s=0,l=(f=n.children).length;s<l;i=++s)if(f[i].isRoot)return n.children.splice(i,0,r),r;return n.children.push(r),r},e.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},e.prototype.root=function(){var e;for(e=this;e;){if(e.isDocument)return e.rootObject;if(e.isRoot)return e;e=e.parent}},e.prototype.document=function(){var e;for(e=this;e;){if(e.isDocument)return e;e=e.parent}},e.prototype.end=function(e){return this.document().end(e)},e.prototype.prev=function(){var e;if((e=this.parent.children.indexOf(this))<1)throw new Error("Already at the first node");return this.parent.children[e-1]},e.prototype.next=function(){var e;if(-1===(e=this.parent.children.indexOf(this))||e===this.parent.children.length-1)throw new Error("Already at the last node");return this.parent.children[e+1]},e.prototype.importDocument=function(e){var t;return(t=e.root().clone()).parent=this,t.isRoot=!1,this.children.push(t),this},e.prototype.ele=function(e,t,n){return this.element(e,t,n)},e.prototype.nod=function(e,t,n){return this.node(e,t,n)},e.prototype.txt=function(e){return this.text(e)},e.prototype.dat=function(e){return this.cdata(e)},e.prototype.com=function(e){return this.comment(e)},e.prototype.ins=function(e,t){return this.instruction(e,t)},e.prototype.doc=function(){return this.document()},e.prototype.dec=function(e,t,n){return this.declaration(e,t,n)},e.prototype.dtd=function(e,t){return this.doctype(e,t)},e.prototype.e=function(e,t,n){return this.element(e,t,n)},e.prototype.n=function(e,t,n){return this.node(e,t,n)},e.prototype.t=function(e){return this.text(e)},e.prototype.d=function(e){return this.cdata(e)},e.prototype.c=function(e){return this.comment(e)},e.prototype.r=function(e){return this.raw(e)},e.prototype.i=function(e,t){return this.instruction(e,t)},e.prototype.u=function(){return this.up()},e.prototype.importXMLBuilder=function(e){return this.importDocument(e)},e}()}).call(this)},function(e,t,n){"use strict";var r=n(0),i=n(3);function a(e){var t=0;return e.filter(function(e,n){return n===t&&(t+=e+1,!0)})}var o={extractCellSizes:a,getNumberOfCells:function(e){return a(e).length}};var s={empty:!0,numberOfComponents:1,dataType:n(7).b.UNSIGNED_INT};function u(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,s,n),i.a.extend(e,t,n),function(e,t){t.classHierarchy.push("vtkCellArray"),e.getNumberOfCells=function(e){return void 0===t.numberOfCells||e?(t.cellSizes=a(t.values),t.numberOfCells=t.cellSizes.length,t.numberOfCells):t.numberOfCells},e.getCellSizes=function(e){return void 0===t.cellSizes||e?(t.cellSizes=a(t.values),t.cellSizes):t.cellSizes};var n=e.setData;e.setData=function(e){n(e,1),t.numberOfCells=void 0,t.cellSizes=void 0}}(e,t)}var l=r.a.newInstance(u,"vtkCellArray");t.a=Object.assign({newInstance:l,extend:u},o)},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={DEFAULT:0,USE_POINT_DATA:1,USE_CELL_DATA:2,USE_POINT_FIELD_DATA:3,USE_CELL_FIELD_DATA:4,USE_FIELD_DATA:5};t.b={ColorMode:{DEFAULT:0,MAP_SCALARS:1,DIRECT_SCALARS:2},GetArray:{BY_ID:0,BY_NAME:1},ScalarMode:r}},function(e,t,n){var r=n(157);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(54)(r,i);r.locals&&(e.exports=r.locals)},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t,n){"use strict";function r(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var n=0;n<this._listeners[e].length;n++)this._listeners[e][n].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.end()}),e.on("error",function(e){t.error(e)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var e=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},e.exports=r},function(e,t,n){"use strict";var r=n(0);function i(e){return function(){return r.a.vtkErrorMacro("vtkProp::".concat(e," - NOT IMPLEMENTED"))}}var a={visibility:!0,pickable:!0,dragable:!0,useBounds:!0,allocatedRenderTime:10,estimatedRenderTime:0,savedEstimatedRenderTime:0,renderTimeMultiplier:1,paths:null,textures:[]};function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,a,n),r.a.obj(e,t),r.a.get(e,t,["estimatedRenderTime","allocatedRenderTime"]),r.a.setGet(e,t,["visibility","pickable","dragable","useBounds","renderTimeMultiplier"]),function(e,t){t.classHierarchy.push("vtkProp"),e.getMTime=function(){for(var e=t.mtime,n=0;n<t.textures.length;++n){var r=t.textures[n].getMTime();r>e&&(e=r)}return e},e.getNestedProps=function(){return null},e.getActors=function(){return[]},e.getActors2D=function(){return[]},e.getVolumes=function(){return[]},e.pick=i("pick"),e.hasKey=i("hasKey"),e.getRedrawMTime=function(){return t.mtime},e.setEstimatedRenderTime=function(e){t.estimatedRenderTime=e,t.savedEstimatedRenderTime=e},e.restoreEstimatedRenderTime=function(){t.estimatedRenderTime=t.savedEstimatedRenderTime},e.addEstimatedRenderTime=function(e){t.estimatedRenderTime+=e},e.setAllocatedRenderTime=function(e){t.allocatedRenderTime=e,t.savedEstimatedRenderTime=t.estimatedRenderTime,t.estimatedRenderTime=0},e.getSupportsSelection=function(){return!1},e.getTextures=function(){return t.textures},e.hasTexture=function(e){return-1!==t.textures.indexOf(e)},e.addTexture=function(n){n&&!e.hasTexture(n)&&(t.textures=t.textures.concat(n),e.modified())},e.removeTexture=function(n){var r=t.textures.filter(function(e){return e!==n});t.textures.length!==r.length&&(t.textures=r,e.modified())},e.removeAllTextures=function(){t.textures=[],e.modified()}}(e,t)}var s=r.a.newInstance(o,"vtkProp");t.a={newInstance:s,extend:o}},function(e,t,n){var r=n(159);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(54)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(161);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(54)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){"use strict";t.byteLength=function(e){return 3*e.length/4-l(e)},t.toByteArray=function(e){var t,n,r,o,s,u=e.length;o=l(e),s=new a(3*u/4-o),n=o>0?u-4:u;var c=0;for(t=0;t<n;t+=4)r=i[e.charCodeAt(t)]<<18|i[e.charCodeAt(t+1)]<<12|i[e.charCodeAt(t+2)]<<6|i[e.charCodeAt(t+3)],s[c++]=r>>16&255,s[c++]=r>>8&255,s[c++]=255&r;2===o?(r=i[e.charCodeAt(t)]<<2|i[e.charCodeAt(t+1)]>>4,s[c++]=255&r):1===o&&(r=i[e.charCodeAt(t)]<<10|i[e.charCodeAt(t+1)]<<4|i[e.charCodeAt(t+2)]>>2,s[c++]=r>>8&255,s[c++]=255&r);return s},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,a="",o=[],s=0,u=n-i;s<u;s+=16383)o.push(c(e,s,s+16383>u?u:s+16383));1===i?(t=e[n-1],a+=r[t>>2],a+=r[t<<4&63],a+="=="):2===i&&(t=(e[n-2]<<8)+e[n-1],a+=r[t>>10],a+=r[t>>4&63],a+=r[t<<2&63],a+="=");return o.push(a),o.join("")};for(var r=[],i=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=o.length;s<u;++s)r[s]=o[s],i[o.charCodeAt(s)]=s;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function c(e,t,n){for(var i,a,o=[],s=t;s<n;s+=3)i=(e[s]<<16)+(e[s+1]<<8)+e[s+2],o.push(r[(a=i)>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"==typeof window?"undefined":n(window))&&(r=window)}e.exports=r},function(e,t,n){"use strict";var r=n(0);var i={repeat:!1,interpolate:!1,edgeClamp:!1,image:null,imageLoaded:!1};function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,i,n),r.a.obj(e,t),r.a.algo(e,t,6,0),r.a.get(e,t,["imageLoaded"]),r.a.setGet(e,t,["repeat","edgeClamp","interpolate","image"]),function(e,t){t.classHierarchy.push("vtkTexture"),e.imageLoaded=function(){t.image.removeEventListener("load",e.imageLoaded),t.imageLoaded=!0,e.modified()},e.setImage=function(n){t.image!==n&&(null!==n&&(e.setInputData(null),e.setInputConnection(null)),t.image=n,t.imageLoaded=!1,n.complete?e.imageLoaded():n.addEventListener("load",e.imageLoaded),e.modified())}}(e,t)}var o=r.a.newInstance(a,"vtkTexture");t.a={newInstance:o,extend:a}},function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var r=n(32),i=n(171),a=n(103);function o(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return l(this,e,t,n)}function l(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=d(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|h(t,n),i=(e=s(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(u.isBuffer(t)){var n=0|p(t.length);return 0===(e=s(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?s(e,0):d(e,t);if("Buffer"===t.type&&a(t.data))return d(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t){if(c(t),e=s(e,t<0?0:0|p(t)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function d(e,t){var n=t.length<0?0:0|p(t.length);e=s(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function p(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function h(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return F(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return V(e).length;default:if(r)return F(e).length;t=(""+t).toLowerCase(),r=!0}}function g(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function m(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=u.from(t,r)),u.isBuffer(t))return 0===t.length?-1:v(e,t,n,r,i);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):v(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function v(e,t,n,r,i){var a,o=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,s/=2,u/=2,n/=2}function l(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var c=-1;for(a=n;a<s;a++)if(l(e,a)===l(t,-1===c?0:a-c)){if(-1===c&&(c=a),a-c+1===u)return c*o}else-1!==c&&(a-=a-c),c=-1}else for(n+u>s&&(n=s-u),a=n;a>=0;a--){for(var f=!0,d=0;d<u;d++)if(l(e,a+d)!==l(t,d)){f=!1;break}if(f)return a}return-1}function y(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[n+o]=s}return o}function b(e,t,n,r){return U(F(t,e.length-n),e,n,r)}function M(e,t,n,r){return U(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function x(e,t,n,r){return M(e,t,n,r)}function w(e,t,n,r){return U(V(t),e,n,r)}function A(e,t,n,r){return U(function(e,t){for(var n,r,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),r=n>>8,i=n%256,a.push(i),a.push(r);return a}(t,e.length-n),e,n,r)}function T(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function C(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var a,o,s,u,l=e[i],c=null,f=l>239?4:l>223?3:l>191?2:1;if(i+f<=n)switch(f){case 1:l<128&&(c=l);break;case 2:128==(192&(a=e[i+1]))&&(u=(31&l)<<6|63&a)>127&&(c=u);break;case 3:a=e[i+1],o=e[i+2],128==(192&a)&&128==(192&o)&&(u=(15&l)<<12|(63&a)<<6|63&o)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:a=e[i+1],o=e[i+2],s=e[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&(u=(15&l)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&u<1114112&&(c=u)}null===c?(c=65533,f=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=f}return function(e){var t=e.length;if(t<=S)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=S));return n}(r)}t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=o(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,n){return l(null,e,t,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,n){return function(e,t,n,r){return c(t),t<=0?s(e,t):void 0!==n?"string"==typeof r?s(e,t).fill(n,r):s(e,t).fill(n):s(e,t)}(null,e,t,n)},u.allocUnsafe=function(e){return f(null,e)},u.allocUnsafeSlow=function(e){return f(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=u.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(!u.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},u.byteLength=h,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?C(this,0,e):function(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return E(this,t,n);case"utf8":case"utf-8":return C(this,t,n);case"ascii":return D(this,t,n);case"latin1":case"binary":return I(this,t,n);case"base64":return T(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,n,r,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0),s=Math.min(a,o),l=this.slice(r,i),c=e.slice(t,n),f=0;f<s;++f)if(l[f]!==c[f]){a=l[f],o=c[f];break}return a<o?-1:o<a?1:0},u.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return m(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return m(this,e,t,n,!1)},u.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return b(this,e,t,n);case"ascii":return M(this,e,t,n);case"latin1":case"binary":return x(this,e,t,n);case"base64":return w(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var S=4096;function D(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function I(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function E(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=t;a<n;++a)i+=z(e[a]);return i}function N(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function O(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function _(e,t,n,r,i,a){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function L(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-n,2);i<a;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function P(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-n,4);i<a;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function k(e,t,n,r,i,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function R(e,t,n,r,a){return a||k(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function j(e,t,n,r,a){return a||k(e,0,n,8),i.write(e,t,n,r,52,8),n+8}u.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=u.prototype;else{var i=t-e;n=new u(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+e]}return n},u.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},u.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},u.prototype.readUInt8=function(e,t){return t||O(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||O(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||O(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||O(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||O(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},u.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);for(var r=t,i=1,a=this[e+--r];r>0&&(i*=256);)a+=this[e+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},u.prototype.readInt8=function(e,t){return t||O(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||O(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(e,t){t||O(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(e,t){return t||O(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||O(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||O(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||O(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||O(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||O(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||_(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},u.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||_(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},u.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||_(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||_(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||_(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||_(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):P(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||_(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):P(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);_(this,e,t,n,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},u.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);_(this,e,t,n,i-1,-i)}var a=n-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||_(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||_(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||_(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||_(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):P(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||_(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):P(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,n){return R(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return R(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return j(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return j(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,a=r-n;if(this===e&&n<t&&t<r)for(i=a-1;i>=0;--i)e[i+t]=this[i+n];else if(a<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},u.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var o=u.isBuffer(e)?e:F(new u(e,r).toString()),s=o.length;for(a=0;a<n-t;++a)this[a+t]=o[a%s]}return this};var B=/[^+\/0-9A-Za-z-_]/g;function z(e){return e<16?"0"+e.toString(16):e.toString(16)}function F(e,t){var n;t=t||1/0;for(var r=e.length,i=null,a=[],o=0;o<r;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function V(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(B,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function U(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(33))},function(e,t,n){"use strict";var r=n(0),i=n(3),a=n(38),o=n(25),s=a.b.ScalarMappingTarget,u=a.b.VectorMode,l=i.a.VtkDataTypes,c=o.b.ColorMode,f=r.a.vtkErrorMacro;function d(e){return e}function p(e){return Math.floor(255*e+.5)}var h={alpha:1,vectorComponent:0,vectorSize:-1,vectorMode:u.COMPONENT,mappingRange:null,annotationArray:null,annotatedValueMap:null,indexedLookup:!1};function g(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,h,n),r.a.obj(e,t),t.mappingRange=[0,255],t.annotationArray=[],t.annotatedValueMap=[],r.a.setGet(e,t,["vectorSize","vectorComponent","vectorMode","alpha","indexedLookup"]),r.a.setArray(e,t,["mappingRange"],2),r.a.getArray(e,t,["mappingRange"]),function(e,t){t.classHierarchy.push("vtkScalarsToColors"),e.setVectorModeToMagnitude=function(){return e.setVectorMode(u.MAGNITUDE)},e.setVectorModeToComponent=function(){return e.setVectorMode(u.COMPONENT)},e.setVectorModeToRGBColors=function(){return e.setVectorMode(u.RGBCOLORS)},e.build=function(){},e.isOpaque=function(){return!0},e.setAnnotations=function(n,r){if(!(n&&!r||!n&&r))if(n&&r&&n.getNumberOfTuples()!==r.getNumberOfTuples())f("Values and annotations do not have the same number of tuples so ignoring");else{if(t.annotationArray=[],r&&n)for(var i=r.getNumberOfTuples(),a=0;a<i;a++)t.annotationArray.push({value:n[a],annotation:r[a]});e.updateAnnotatedValueMap(),e.modified()}},e.setAnnotation=function(n,r){var i=e.checkForAnnotatedValue(n),a=!1;return i>=0?t.annotationArray[i].annotation!==r&&(t.annotationArray[i].annotation=r,a=!0):(t.annotationArray.push({value:n,annotation:r}),i=t.annotationArray.length-1,a=!0),a&&(e.updateAnnotatedValueMap(),e.modified()),i},e.getNumberOfAnnotatedValues=function(){return t.annotationArray.length},e.getAnnotatedValue=function(e){return e<0||e>=t.annotationArray.length?null:t.annotationArray[e].value},e.getAnnotation=function(e){return void 0===t.annotationArray[e]?null:t.annotationArray[e].annotation},e.getAnnotatedValueIndex=function(n){return t.annotationArray.length?e.checkForAnnotatedValue(n):-1},e.removeAnnotation=function(n){var r=e.checkForAnnotatedValue(n),i=r>=0;return i&&(t.annotationArray.splice(r,1),e.updateAnnotatedValueMap(),e.modified()),i},e.resetAnnotations=function(){t.annotationArray=[],t.annotatedValueMap=[],e.modified()},e.getAnnotationColor=function(n,r){if(t.indexedLookup){var i=e.getAnnotatedValueIndex(n);e.getIndexedColor(i,r)}else e.getColor(parseFloat(n),r),r[3]=1},e.checkForAnnotatedValue=function(t){return e.getAnnotatedValueIndexInternal(t)},e.getAnnotatedValueIndexInternal=function(e){if(void 0!==t.annotatedValueMap[e]){var n=t.annotationArray.length;return t.annotatedValueMap[e]%n}return-1},e.getIndexedColor=function(e,t){t[0]=0,t[1]=0,t[2]=0,t[3]=0},e.updateAnnotatedValueMap=function(){t.annotatedValueMap=[];for(var e=t.annotationArray.length,n=0;n<e;++n)t.annotatedValueMap[t.annotationArray[n].value]=n},e.mapScalars=function(t,n,r){var a=t.getNumberOfComponents(),o=null;if(n===c.DEFAULT&&t.getDataType()===l.UNSIGNED_CHAR||n===c.DIRECT_SCALARS&&t)o=e.convertToRGBA(t,a,t.getNumberOfTuples());else{var u={type:"vtkDataArray",name:"temp",numberOfComponents:4,dataType:l.UNSIGNED_CHAR},f=new window[u.dataType](4*t.getNumberOfTuples());u.values=f,u.size=f.length,o=i.a.newInstance(u);var d=r;d<0&&a>1?e.mapVectorsThroughTable(t,o,s.RGBA,-1,-1):(d<0&&(d=0),d>=a&&(d=a-1),e.mapScalarsThroughTable(t,o,s.RGBA,d))}return o},e.mapVectorsToMagnitude=function(e,t,n){for(var r=e.getNumberOfTuples(),i=e.getNumberOfComponents(),a=t.getData(),o=e.getData(),s=0;s<r;s++){for(var u=0,l=0;l<n;l++)u+=o[s*i+l]*o[s*i+l];a[s]=Math.sqrt(u)}},e.mapVectorsThroughTable=function(t,n,r,a,o){var s=e.getVectorMode(),l=o,c=a,f=t.getNumberOfComponents();s===u.COMPONENT?(-1===c&&(c=e.getVectorComponent()),c<0&&(c=0),c>=f&&(c=f-1)):(-1===l&&(l=e.getVectorSize()),l<=0?(c=0,l=f):(c<0&&(c=0),c>=f&&(c=f-1),c+l>f&&(l=f-c)),s!==u.MAGNITUDE||1!==f&&1!==l||(s=u.COMPONENT));var d=0;switch(c>0&&(d=c),s){case u.COMPONENT:e.mapScalarsThroughTable(t,n,r,d);break;default:case u.MAGNITUDE:var p=i.a.newInstance({numberOfComponents:1,values:new Float32Array(t.getNumberOfTuples())});e.mapVectorsToMagnitude(t,p,l),e.mapScalarsThroughTable(p,n,r,0);break;case u.RGBCOLORS:}},e.luminanceToRGBA=function(e,t,n,r){for(var i=r(n),a=t.getData(),o=e.getData(),s=a.length,u=0,l=0;l<s;l+=1){var c=r(a[l]);o[4*u]=c,o[4*u+1]=c,o[4*u+2]=c,o[4*u+3]=i,u++}},e.luminanceAlphaToRGBA=function(e,t,n,r){for(var i=t.getData(),a=e.getData(),o=i.length,s=0,u=0;u<o;u+=2){var l=r(i[u]);a[s]=l,a[s+1]=l,a[s+2]=l,a[s+3]=r(i[u+1])*n,s+=4}},e.rGBToRGBA=function(e,t,n,r){for(var i=p(n),a=t.getData(),o=e.getData(),s=a.length,u=0,l=0;l<s;l+=3)o[4*u]=r(a[l]),o[4*u+1]=r(a[l+1]),o[4*u+2]=r(a[l+2]),o[4*u+3]=i,u++},e.rGBAToRGBA=function(e,t,n,r){for(var i=t.getData(),a=e.getData(),o=i.length,s=0,u=0;u<o;u+=4)a[4*s]=r(i[u]),a[4*s+1]=r(i[u+1]),a[4*s+2]=r(i[u+2]),a[4*s+3]=r(i[u+3])*n,s++},e.convertToRGBA=function(n,r,a){var o=t.alpha;if(4===r&&o>=1&&n.getDataType()===l.UNSIGNED_CHAR)return n;var s=i.a.newInstance({numberOfComponents:4,empty:!0,size:4*a,dataType:l.UNSIGNED_CHAR});if(a<=0)return s;o=(o=o>0?o:0)<1?o:1;var u=d;switch(n.getDataType()!==l.FLOAT&&n.getDataType()!==l.DOUBLE||(u=p),r){case 1:e.luminanceToRGBA(s,n,o,u);break;case 2:e.luminanceAlphaToRGBA(s,n,u);break;case 3:e.rGBToRGBA(s,n,o,u);break;case 4:e.rGBAToRGBA(s,n,o,u);break;default:return f("Cannot convert colors"),null}return s},e.usingLogScale=function(){return!1},e.getNumberOfAvailableColors=function(){return 16777216},e.setRange=function(t,n){return e.setMappingRange(t,n)},e.getRange=function(t,n){return e.getMappingRange()}}(e,t)}var m=r.a.newInstance(g,"vtkScalarsToColors");t.a=Object.assign({newInstance:m,extend:g},a.b)},function(e,t,n){"use strict";var r=n(0),i=n(2),a=n(36),o=n(38),s=0,u=1,l=2;var c={numberOfColors:256,hueRange:[0,.66667],saturationRange:[1,1],valueRange:[1,1],alphaRange:[1,1],nanColor:[.5,0,0,1],belowRangeColor:[0,0,0,1],aboveRangeColor:[1,1,1,1],useAboveRangeColor:!1,useBelowRangeColor:!1,alpha:1};function f(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,c,n),a.a.extend(e,t,n),t.table||(t.table=[]),t.buildTime={},r.a.obj(t.buildTime),t.opaqueFlagBuildTime={},r.a.obj(t.opaqueFlagBuildTime,{mtime:0}),r.a.get(e,t,["buildTime"]),r.a.setGet(e,t,["numberOfColors","useAboveRangeColor","useBelowRangeColor"]),r.a.setArray(e,t,["alphaRange","hueRange","saturationRange","valueRange"],2),r.a.setArray(e,t,["nanColor","belowRangeColor","aboveRangeColor"],4),r.a.getArray(e,t,["hueRange","saturationRange","valueRange","alphaRange","nanColor","belowRangeColor","aboveRangeColor"]),function(e,t){t.classHierarchy.push("vtkLookupTable"),e.isOpaque=function(){if(t.opaqueFlagBuildTime.getMTime()<e.getMTime()){var n=!0;t.nanColor[3]<1&&(n=0),t.useBelowRangeColor&&t.belowRangeColor[3]<1&&(n=0),t.useAboveRangeColor&&t.aboveRangeColor[3]<1&&(n=0);for(var r=3;r<t.table.length&&n;r+=4)t.table[r]<255&&(n=!1);t.opaqueFlag=n,t.opaqueFlagBuildTime.modified()}return t.opaqueFlag},e.usingLogScale=function(){return!1},e.getNumberOfAvailableColors=function(){return t.table.length},e.linearIndexLookup=function(e,t){var n=0;return n=e<t.range[0]?t.maxIndex+s+1.5:e>t.range[1]?t.maxIndex+u+1.5:(n=(e+t.shift)*t.scale)<t.maxIndex?n:t.maxIndex,Math.floor(n)},e.linearLookup=function(t,n,r){var a=0;return[n[4*(a=i.isNan(t)?Math.floor(r.maxIndex+1.5+l):e.linearIndexLookup(t,r))],n[4*a+1],n[4*a+2],n[4*a+3]]},e.indexedLookupFunction=function(t,n,r){var i=e.getAnnotatedValueIndexInternal(t);return[n[4*i],n[4*i+1],n[4*i+2],n[4*i+3]]},e.lookupShiftAndScale=function(e,t){t.shift=-e[0],t.scale=Number.MAX_VALUE,e[1]>e[0]&&(t.scale=(t.maxIndex+1)/(e[1]-e[0]))},e.mapScalarsThroughTable=function(n,r,i,a){var s=e.linearLookup;t.indexedLookup&&(s=e.indexedLookupFunction);var u=e.getMappingRange(),l={maxIndex:e.getNumberOfColors()-1,range:u,shift:0,scale:0};e.lookupShiftAndScale(u,l);var c=e.getAlpha(),f=n.getNumberOfTuples(),d=n.getNumberOfComponents(),p=r.getData(),h=n.getData();if(c>=1){if(i===o.a.RGBA)for(var g=0;g<f;g++){var m=s(h[g*d+a],t.table,l);p[4*g]=m[0],p[4*g+1]=m[1],p[4*g+2]=m[2],p[4*g+3]=m[3]}}else if(i===o.a.RGBA)for(var v=0;v<f;v++){var y=s(h[v*d+a],t.table,l);p[4*v]=y[0],p[4*v+1]=y[1],p[4*v+2]=y[2],p[4*v+3]=Math.floor(y[3]*c+.5)}},e.forceBuild=function(){var n=0,r=0,a=0,o=0,s=t.numberOfColors-1;s&&(n=(t.hueRange[1]-t.hueRange[0])/s,r=(t.saturationRange[1]-t.saturationRange[0])/s,a=(t.valueRange[1]-t.valueRange[0])/s,o=(t.alphaRange[1]-t.alphaRange[0])/s);for(var u=[],l=[],c=0;c<=s;c++)u[0]=t.hueRange[0]+c*n,u[1]=t.saturationRange[0]+c*r,u[2]=t.valueRange[0]+c*a,i.hsv2rgb(u,l),l[3]=t.alphaRange[0]+c*o,t.table[4*c]=255*l[0]+.5,t.table[4*c+1]=255*l[1]+.5,t.table[4*c+2]=255*l[2]+.5,t.table[4*c+3]=255*l[3]+.5;e.buildSpecialColors(),t.buildTime.modified()},e.buildSpecialColors=function(){var e=t.numberOfColors,n=t.table,r=4*(t.numberOfColors+s);t.useBelowRangeColor||0===e?(n[r]=255*t.belowRangeColor[0]+.5,n[r+1]=255*t.belowRangeColor[1]+.5,n[r+2]=255*t.belowRangeColor[2]+.5,n[r+3]=255*t.belowRangeColor[3]+.5):(n[r]=n[0],n[r+1]=n[1],n[r+2]=n[2],n[r+3]=n[3]),r=4*(t.numberOfColors+u),t.useAboveRangeColor||0===e?(n[r]=255*t.aboveRangeColor[0]+.5,n[r+1]=255*t.aboveRangeColor[1]+.5,n[r+2]=255*t.aboveRangeColor[2]+.5,n[r+3]=255*t.aboveRangeColor[3]+.5):(n[r]=n[4*(e-1)+0],n[r+1]=n[4*(e-1)+1],n[r+2]=n[4*(e-1)+2],n[r+3]=n[4*(e-1)+3]),n[r=4*(t.numberOfColors+l)]=255*t.nanColor[0]+.5,n[r+1]=255*t.nanColor[1]+.5,n[r+2]=255*t.nanColor[2]+.5,n[r+3]=255*t.nanColor[3]+.5},e.build=function(){(t.table.length<1||e.getMTime()>t.buildTime.getMTime())&&e.forceBuild()}}(e,t)}var d=r.a.newInstance(f,"vtkLookupTable");t.a=Object.assign({newInstance:d,extend:f})},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={LUMINANCE:1,LUMINANCE_ALPHA:2,RGB:3,RGBA:4};t.b={VectorMode:{MAGNITUDE:0,COMPONENT:1,RGBCOLORS:2},ScalarMappingTarget:r}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function a(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!==r(n))throw new TypeError(n+"must be non-object");for(var i in n)a(n,i)&&(e[i]=n[i])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var o={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var a=0;a<r;a++)e[i+a]=t[n+a]},flattenChunks:function(e){var t,n,r,i,a,o;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(o=new Uint8Array(r),i=0,t=0,n=e.length;t<n;t++)a=e[t],o.set(a,i),i+=a.length;return o}},s={arraySet:function(e,t,n,r,i){for(var a=0;a<r;a++)e[i+a]=t[n+a]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,o)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,s))},t.setTyped(i)},function(e,t,n){"use strict";(function(e){if(t.base64=!0,t.array=!0,t.string=!0,t.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,t.nodebuffer=void 0!==e,t.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)t.blob=!1;else{var r=new ArrayBuffer(0);try{t.blob=0===new Blob([r],{type:"application/zip"}).size}catch(e){try{var i=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);i.append(r),t.blob=0===i.getBlob("application/zip").size}catch(e){t.blob=!1}}}try{t.nodestream=!!n(104).Readable}catch(e){t.nodestream=!1}}).call(this,n(35).Buffer)},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}(function(){var t,r,i,a,o,s,u=[].slice,l={}.hasOwnProperty;t=function(){var e,t,n,r,i,o;if(o=arguments[0],i=2<=arguments.length?u.call(arguments,1):[],a(Object.assign))Object.assign.apply(null,arguments);else for(e=0,n=i.length;e<n;e++)if(null!=(r=i[e]))for(t in r)l.call(r,t)&&(o[t]=r[t]);return o},a=function(e){return!!e&&"[object Function]"===Object.prototype.toString.call(e)},o=function(e){var t;return!!e&&("function"===(t=n(e))||"object"===t)},r=function(e){return a(Array.isArray)?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},i=function(e){var t;if(r(e))return!e.length;for(t in e)if(l.call(e,t))return!1;return!0},s=function(e){var t,n;return o(e)&&(n=Object.getPrototypeOf(e))&&(t=n.constructor)&&"function"==typeof t&&t instanceof t&&Function.prototype.toString.call(t)===Function.prototype.toString.call(Object)},e.exports.assign=t,e.exports.isFunction=a,e.exports.isObject=o,e.exports.isArray=r,e.exports.isEmpty=i,e.exports.isPlainObject=s}).call(this)},function(e,t,n){"use strict";var r=n(0),i=n(8),a=n(58),o=n(12),s=["pointData","cellData","fieldData"];var u={};function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,u,n),r.a.obj(e,t),r.a.setGet(e,t,s),function(e,t){t.classHierarchy.push("vtkDataSet"),s.forEach(function(e){t[e]?t[e]=Object(i.a)(t[e]):t[e]=a.a.newInstance()});var n=e.shallowCopy;e.shallowCopy=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n(e,r),s.forEach(function(n){t[n]=a.a.newInstance(),t[n].shallowCopy(e.getReferenceByName(n))})}}(e,t)}var c=r.a.newInstance(l,"vtkDataSet");t.a=Object.assign({newInstance:c,extend:l},o.c)},function(e,t,n){"use strict";var r=n(1),i=n(0),a=n(11),o=n(2),s=n(29);var u={origin:[0,0,0],position:[0,0,0],rotation:null,scale:[1,1,1],bounds:[1,-1,1,-1,1,-1],userMatrix:null,userMatrixMTime:null,cachedProp3D:null,isIdentity:!0,matrixMTime:null};function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,u,n),s.a.extend(e,t,n),t.matrixMTime={},i.a.obj(t.matrixMTime),i.a.get(e,t,["bounds","isIdentity"]),i.a.setGetArray(e,t,["origin","position","orientation","scale"],3),t.matrix=r.c.create(),t.rotation=r.c.create(),t.userMatrix=r.c.create(),t.transform=null,function(e,t){t.classHierarchy.push("vtkProp3D"),e.addPosition=function(n){t.position=t.position.map(function(e,t){return e+n[t]}),e.modified()},e.getOrientationWXYZ=function(){var e=r.d.create();r.c.getRotation(e,t.rotation);var n=r.e.create(),i=r.d.getAxisAngle(n,e);return[o.degreesFromRadians(i),n[0],n[1],n[2]]},e.rotateX=function(n){0!==n&&(r.c.rotateX(t.rotation,t.rotation,o.radiansFromDegrees(n)),e.modified())},e.rotateY=function(n){0!==n&&(r.c.rotateY(t.rotation,t.rotation,o.radiansFromDegrees(n)),e.modified())},e.rotateZ=function(n){0!==n&&(r.c.rotateZ(t.rotation,t.rotation,o.radiansFromDegrees(n)),e.modified())},e.rotateWXYZ=function(n,i,a,s){if(0!==n&&(0!==i||0!==a||0!==s)){var u=o.radiansFromDegrees(n),l=r.d.create();r.d.setAxisAngle(l,[i,a,s],u);var c=r.c.create();r.c.fromQuat(c,l),r.c.multiply(t.rotation,t.rotation,c),e.modified()}},e.setUserMatrix=function(n){r.c.copy(t.userMatrix,n),e.modified()},e.getMatrix=function(){return e.computeMatrix(),t.matrix},e.computeMatrix=function(){if(e.getMTime()>t.matrixMTime.getMTime()){r.c.identity(t.matrix),t.userMatrix&&r.c.multiply(t.matrix,t.matrix,t.userMatrix),r.c.translate(t.matrix,t.matrix,t.origin),r.c.translate(t.matrix,t.matrix,t.position),r.c.multiply(t.matrix,t.matrix,t.rotation),r.c.scale(t.matrix,t.matrix,t.scale),r.c.translate(t.matrix,t.matrix,[-t.origin[0],-t.origin[1],-t.origin[2]]),r.c.transpose(t.matrix,t.matrix),t.isIdentity=!0;for(var n=0;n<4;++n)for(var i=0;i<4;++i)(n===i?1:0)!==t.matrix[n+4*i]&&(t.isIdentity=!1);t.matrixMTime.modified()}},e.getCenter=function(){return a.a.getCenter(t.bounds)},e.getLength=function(){return a.a.getLength(t.bounds)},e.getXRange=function(){return a.a.getXRange(t.bounds)},e.getYRange=function(){return a.a.getYRange(t.bounds)},e.getZRange=function(){return a.a.getZRange(t.bounds)},e.getUserMatrix=function(){return t.userMatrix},e.onModified(function(){e.computeMatrix()})}(e,t)}var c=i.a.newInstance(l,"vtkProp3D");t.a={newInstance:c,extend:l}},function(e,t){e.exports="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkPolyDataFS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n// Template for the polydata mappers fragment shader\n\nuniform int PrimitiveIDOffset;\n\n// VC position of this fragment\n//VTK::PositionVC::Dec\n\n// optional color passed in from the vertex shader, vertexColor\n//VTK::Color::Dec\n\n// optional surface normal declaration\n//VTK::Normal::Dec\n\n// extra lighting parameters\n//VTK::Light::Dec\n\n// Texture coordinates\n//VTK::TCoord::Dec\n\n// picking support\n//VTK::Picking::Dec\n\n// Depth Peeling Support\n//VTK::DepthPeeling::Dec\n\n// clipping plane vars\n//VTK::Clip::Dec\n\n// the output of this shader\n//VTK::Output::Dec\n\n// Apple Bug\n//VTK::PrimID::Dec\n\n// handle coincident offsets\n//VTK::Coincident::Dec\n\n//VTK::ZBuffer::Dec\n\nvoid main()\n{\n  // VC position of this fragment. This should not branch/return/discard.\n  //VTK::PositionVC::Impl\n\n  // Place any calls that require uniform flow (e.g. dFdx) here.\n  //VTK::UniformFlow::Impl\n\n  // Set gl_FragDepth here (gl_FragCoord.z by default)\n  //VTK::Depth::Impl\n\n  // Early depth peeling abort:\n  //VTK::DepthPeeling::PreColor\n\n  // Apple Bug\n  //VTK::PrimID::Impl\n\n  //VTK::Clip::Impl\n\n  //VTK::Color::Impl\n\n  // Generate the normal if we are not passed in one\n  //VTK::Normal::Impl\n\n  //VTK::Light::Impl\n\n  //VTK::TCoord::Impl\n\n  if (gl_FragData[0].a <= 0.0)\n    {\n    discard;\n    }\n\n  //VTK::DepthPeeling::Impl\n\n  //VTK::Picking::Impl\n\n  // handle coincident offsets\n  //VTK::Coincident::Impl\n\n  //VTK::ZBuffer::Impl\n}\n"},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";var r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=f;var i=n(88),a=n(55);a.inherits=n(50);var o=n(105),s=n(89);a.inherits(f,o);for(var u=r(s.prototype),l=0;l<u.length;l++){var c=u[l];f.prototype[c]||(f.prototype[c]=s.prototype[c])}function f(e){if(!(this instanceof f))return new f(e);o.call(this,e),s.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",d)}function d(){this.allowHalfOpen||this._writableState.ended||i(p,this)}function p(e){e.end()}},function(e,t,n){"use strict";function r(e){if("TextDecoder"in window)return new TextDecoder("latin1").decode(e);for(var t=new Uint8Array(e),n=[],r=0;r<t.length;++r)n[r]=String.fromCharCode(t[r]);return n.join("")}t.a={arrayBufferToString:r,extractBinary:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=r(e),a=t.exec(i);if(!a)return{text:i};var o=a.index+a[0].length,s=i.substring(0,o),u=n?n.exec(i):null;return u?{text:s+i.substr(u.index),binaryBuffer:e.slice(o,u.index)}:{text:s,binaryBuffer:e.slice(o)}}}},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,n){"use strict";for(var r=n(13),i=n(40),a=n(63),o=n(28),s=new Array(256),u=0;u<256;u++)s[u]=u>=252?6:u>=248?5:u>=240?4:u>=224?3:u>=192?2:1;s[254]=s[254]=1;function l(){o.call(this,"utf-8 decode"),this.leftOver=null}function c(){o.call(this,"utf-8 encode")}t.utf8encode=function(e){return i.nodebuffer?a.newBuffer(e,"utf-8"):function(e){var t,n,r,a,o,s=e.length,u=0;for(a=0;a<s;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(r=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(r-56320),a++),u+=n<128?1:n<2048?2:n<65536?3:4;for(t=i.uint8array?new Uint8Array(u):new Array(u),o=0,a=0;o<u;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(r=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(r-56320),a++),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|63&n):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|63&n):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|63&n);return t}(e)},t.utf8decode=function(e){return i.nodebuffer?r.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,n,i,a,o=e.length,u=new Array(2*o);for(n=0,t=0;t<o;)if((i=e[t++])<128)u[n++]=i;else if((a=s[i])>4)u[n++]=65533,t+=a-1;else{for(i&=2===a?31:3===a?15:7;a>1&&t<o;)i=i<<6|63&e[t++],a--;a>1?u[n++]=65533:i<65536?u[n++]=i:(i-=65536,u[n++]=55296|i>>10&1023,u[n++]=56320|1023&i)}return u.length!==n&&(u.subarray?u=u.subarray(0,n):u.length=n),r.applyFromCharCode(u)}(e=r.transformTo(i.uint8array?"uint8array":"array",e))},r.inherits(l,o),l.prototype.processChunk=function(e){var n=r.transformTo(i.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var a=n;(n=new Uint8Array(a.length+this.leftOver.length)).set(this.leftOver,0),n.set(a,this.leftOver.length)}else n=this.leftOver.concat(n);this.leftOver=null}var o=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0?t:0===n?t:n+s[e[n]]>t?n:t}(n),u=n;o!==n.length&&(i.uint8array?(u=n.subarray(0,o),this.leftOver=n.subarray(o,n.length)):(u=n.slice(0,o),this.leftOver=n.slice(o,n.length))),this.push({data:t.utf8decode(u),meta:e.meta})},l.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:t.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},t.Utf8DecodeWorker=l,r.inherits(c,o),c.prototype.processChunk=function(e){this.push({data:t.utf8encode(e.data),meta:e.meta})},t.Utf8EncodeWorker=c},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){"use strict";var r=n(0);var i={clippingPlanes:[]};t.a={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,i,n),r.a.obj(e,t),r.a.algo(e,t,1,0),t.clippingPlanes||(t.clippingPlanes=[]),function(e,t){e.update=function(){e.getInputData()},e.addClippingPlane=function(e){"vtkPlane"===e.getClassName()&&t.clippingPlanes.push(e)},e.getNumberOfClippingPlanes=function(){return t.clippingPlanes.length},e.removeAllClippingPlanes=function(){t.clippingPlanes.length=0},e.removeClippingPlane=function(e){e<0||e>=6||t.clippingPlanes.splice(e,1)},e.getClippingPlanes=function(){return t.clippingPlanes},e.setClippingPlanes=function(t){if(t)if(Array.isArray(t))for(var n=t.length,r=0;r<n&&r<6;r++)e.addClippingPlane(t[r]);else e.addClippingPlane(t)}}(e,t)}}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=["verts","lines","polys","strips"]},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=(o=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),a=r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"});return[n].concat(a).concat([i]).join("\n")}var o;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var a=this[i][0];"number"==typeof a&&(r[a]=!0)}for(i=0;i<e.length;i++){var o=e[i];"number"==typeof o[0]&&r[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),t.push(o))}},t}},function(e,t,n){var r,i,a={},o=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=r.apply(this,arguments)),i}),s=function(e){var t={};return function(e,n){if("function"==typeof e)return e();if(void 0===t[e]){var r=function(e,t){return t?t.querySelector(e):document.querySelector(e)}.call(this,e,n);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}}(),u=null,l=0,c=[],f=n(158);function d(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=a[r.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](r.parts[o]);for(;o<r.parts.length;o++)i.parts.push(y(r.parts[o],t))}else{var s=[];for(o=0;o<r.parts.length;o++)s.push(y(r.parts[o],t));a[r.id]={id:r.id,refs:1,parts:s}}}}function p(e,t){for(var n=[],r={},i=0;i<e.length;i++){var a=e[i],o=t.base?a[0]+t.base:a[0],s={css:a[1],media:a[2],sourceMap:a[3]};r[o]?r[o].parts.push(s):n.push(r[o]={id:o,parts:[s]})}return n}function h(e,t){var n=s(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=c[c.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),c.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=s(e.insertAt.before,n);n.insertBefore(t,i)}}function g(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=c.indexOf(e);t>=0&&c.splice(t,1)}function m(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var r=function(){0;return n.nc}();r&&(e.attrs.nonce=r)}return v(t,e.attrs),h(e,t),t}function v(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function y(e,t){var n,r,i,a;if(t.transform&&e.css){if(!(a="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=a}if(t.singleton){var o=l++;n=u||(u=m(t)),r=x.bind(null,n,o,!1),i=x.bind(null,n,o,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",v(t,e.attrs),h(e,t),t}(t),r=function(e,t,n){var r=n.css,i=n.sourceMap,a=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||a)&&(r=f(r));i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var o=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(o),s&&URL.revokeObjectURL(s)}.bind(null,n,t),i=function(){g(n),n.href&&URL.revokeObjectURL(n.href)}):(n=m(t),r=function(e,t){var n=t.css,r=t.media;r&&e.setAttribute("media",r);if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){g(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=o()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=p(e,t);return d(n,t),function(e){for(var r=[],i=0;i<n.length;i++){var o=n[i];(s=a[o.id]).refs--,r.push(s)}e&&d(p(e,t),t);for(i=0;i<r.length;i++){var s;if(0===(s=r[i]).refs){for(var u=0;u<s.parts.length;u++)s.parts[u]();delete a[s.id]}}}};var b,M=(b=[],function(e,t){return b[e]=t,b.filter(Boolean).join("\n")});function x(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=M(t,i);else{var a=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}},function(e,t,n){(function(e){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===r(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"===n(e)},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===r(e)},t.isObject=function(e){return"object"===n(e)&&null!==e},t.isDate=function(e){return"[object Date]"===r(e)},t.isError=function(e){return"[object Error]"===r(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"===n(e)||void 0===e},t.isBuffer=e.isBuffer}).call(this,n(35).Buffer)},function(e,t,n){"use strict";var r=null;r="undefined"!=typeof Promise?Promise:n(196),e.exports={Promise:r}},function(e,t,n){"use strict";n(10),n(4);var r=n(8),i=n(0),a=n(15),o=n(3),s=n(78),u=["pointData","cellData","fieldData"],l=a.a.get("http"),c={vtkDataArray:o.a,vtkStringArray:s.a},f={vtkPolyData:function(e){var t=[];return t.push(e.points),["verts","lines","polys","strips"].forEach(function(n){e[n]&&t.push(e[n])}),t},vtkImageData:function(e){return[]},vtkUnstructuredGrid:function(e){var t=[];return t.push(e.points),t.push(e.cells),t.push(e.cellTypes),t},vtkRectilinearGrid:function(e){var t=[];return t.push(e.xCoordinates),t.push(e.yCoordinates),t.push(e.zCoordinates),t}};function d(e,t,n,i,a,o,s){var l=t.enableArray;t.arrays=[],u.forEach(function(e){n[e]&&(n[e].arrays.map(function(e){return e.data}).forEach(function(n){t.arrays.push({name:n.name,enable:l,location:e,array:n,registration:n.ref.registration||"addArray"})}),n[e].arrays=[])});var c=[],d=t.progressCallback,p=t.fetchGzip?"gz":null;function h(){t.dataset=Object(r.a)(n),s?e.loadData().then(function(){t.output[0]=t.dataset,a(e,t.output[0])}):(t.output[0]=t.dataset,a(e,t.output[0]))}f[n.vtkClass](n).forEach(function(e){c.push(i(e,{compression:p,progressCallback:d}))}),c.length?Promise.all(c).then(h,function(e){o(e)}):h()}var p={enableArray:!0,fetchGzip:!1,arrays:[],url:null,baseURL:null,requestCount:0};function h(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,p,n),i.a.obj(e,t),i.a.get(e,t,["enableArray","fetchGzip","url","baseURL","dataAccessHelper"]),i.a.set(e,t,["dataAccessHelper","progressCallback"]),i.a.getArray(e,t,["arrays"]),i.a.algo(e,t,0,1),i.a.event(e,t,"busy"),function(e,t){function n(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.dataAccessHelper.fetchArray(e,t.baseURL,n,r)}t.classHierarchy.push("vtkHttpDataSetReader"),t.output[0]=Object(r.a)({vtkClass:"vtkPolyData"}),t.dataAccessHelper||(t.dataAccessHelper=l),e.updateMetadata=function(){var r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return"zip"===t.compression?new Promise(function(i,o){l.fetchBinary(t.url).then(function(s){t.dataAccessHelper=a.a.get("zip",{zipContent:s,callback:function(a){t.baseURL="",t.dataAccessHelper.fetchJSON(e,"index.json").then(function(a){d(e,t,a,n,i,o,r)},function(e){o(e)})}})},function(e){o(e)})}):new Promise(function(i,a){t.dataAccessHelper.fetchJSON(e,t.url).then(function(o){d(e,t,o,n,i,a,r)},function(e){a(e)})})},e.setUrl=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(-1!==n.indexOf("index.json")||r.fullpath){t.url=n;var i=n.split("/");i.pop(),t.baseURL=i.join("/")}else t.baseURL=n,t.url="".concat(n,"/index.json");return t.compression=r.compression,e.updateMetadata(!!r.loadData)},e.loadData=function(){var r=t.dataset,a=t.arrays.filter(function(e){return e.enable}).filter(function(e){return e.array.ref}).map(function(e){return e.array});return new Promise(function(o,s){var u=function(e){s(e)};!function s(){if(a.length){var l=t.progressCallback,f=t.fetchGzip?"gz":null;n(a.pop(),{compression:f,progressCallback:l}).then(s,u)}else r&&(t.arrays.filter(function(e){return e.registration}).forEach(function(e){var t=c[e.array.vtkClass].newInstance(e.array);r["get".concat(i.a.capitalize(e.location))]()[e.registration](t),delete e.registration}),r.modified(),o(e,r))}()})},e.requestData=function(e,t){},e.enableArray=function(e,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=t.arrays.filter(function(t){return t.name===n&&t.location===e});1===i.length&&(i[0].enable=r)},e.isBusy=function(){return!!t.requestCount}}(e,t),void 0===t.progressCallback&&(t.progressCallback=null)}var g=i.a.newInstance(h,"vtkHttpDataSetReader");t.a={newInstance:g,extend:h}},function(e,t,n){"use strict";var r=n(0),i=n(8),a=n(3);var o={arrays:[],copyFieldFlags:[],doCopyAllOn:!0,doCopyAllOff:!1};function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,o,n),r.a.obj(e,t),function(e,t){t.classHierarchy.push("vtkFieldData");var n=e.getState;t.arrays&&(t.arrays=t.arrays.map(function(e){return{data:Object(i.a)(e.data)}})),e.initialize=function(){e.initializeFields(),e.copyAllOn(),e.clearFieldFlags()},e.initializeFields=function(){t.arrays=[],t.copyFieldFlags={},e.modified()},e.copyStructure=function(n){e.initializeFields(),t.copyFieldFlags=n.getCopyFieldFlags().map(function(e){return e}),t.arrays=n.arrays().map(function(e){return{array:e}})},e.getNumberOfArrays=function(){return t.arrays.length},e.getNumberOfActiveArrays=function(){return t.arrays.length},e.addArray=function(e){return t.arrays=[].concat(t.arrays,{data:e}),t.arrays.length-1},e.removeAllArrays=function(){t.arrays=[]},e.removeArray=function(e){t.arrays=t.arrays.filter(function(t){return e!==t.data.getName()})},e.removeArrayByIndex=function(e){t.arrays=t.arrays.filter(function(t,n){return n!==e})},e.getArrays=function(){return t.arrays.map(function(e){return e.data})},e.getArray=function(t){return"number"==typeof t?e.getArrayByIndex(t):e.getArrayByName(t)},e.getArrayByName=function(e){return t.arrays.reduce(function(t,n,r){return n.data.getName()===e?n.data:t},null)},e.getArrayWithIndex=function(e){return t.arrays.reduce(function(t,n,r){return n.data&&n.data.getName()===e?{array:n.data,index:r}:t},{array:null,index:-1})},e.getArrayByIndex=function(e){return e>=0&&e<t.arrays.length?t.arrays[e].data:null},e.hasArray=function(t){return e.getArrayWithIndex(t).index>=0},e.getArrayName=function(e){var n=t.arrays[e];return n?n.data.getName():""},e.getCopyFieldFlags=function(){return t.copyFieldFlags},e.getFlag=function(e){return t.copyFieldFlags[e]},e.passData=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;n.getArrays().forEach(function(n){var o=e.getFlag(n.getName());if(!1!==o&&(!t.doCopyAllOff||!0===o)&&n){var s=e.getArrayByName(n.getName());if(s){if(n.getNumberOfComponents()===s.getNumberOfComponents())if(r>-1&&r<n.getNumberOfTuples()){var u=i>-1?i:r;s.setTuple(u,n.getTuple(r))}else for(var l=0;l<n.getNumberOfTuples();++l)s.setTuple(l,n.getTuple(l))}else if(r<0||r>n.getNumberOfTuples())e.addArray(n);else{var c=n.getNumberOfComponents(),f=n.getNumberOfValues(),d=i>-1?i:r;f<d*c&&(f=(d+1)*c),(s=a.a.newInstance({name:n.getName(),dataType:n.getDataType(),numberOfComponents:n.getNumberOfComponents(),size:f})).setTuple(d,n.getTuple(r)),e.addArray(s)}}})},e.copyFieldOn=function(e){t.copyFieldFlags[e]=!0},e.copyFieldOff=function(e){t.copyFieldFlags[e]=!1},e.copyAllOn=function(){t.doCopyAllOn&&!t.doCopyAllOff||(t.doCopyAllOn=!0,t.doCopyAllOff=!1,e.modified())},e.copyAllOff=function(){!t.doCopyAllOn&&t.doCopyAllOff||(t.doCopyAllOn=!1,t.doCopyAllOff=!0,e.modified())},e.clearFieldFlags=function(){t.copyFieldFlags={}},e.deepCopy=function(e){t.arrays=e.getArrays().map(function(e){var t=e.newClone();return t.deepCopy(e),{data:t}})},e.copyFlags=function(e){return e.getCopyFieldFlags().map(function(e){return e})},e.reset=function(){return t.arrays.forEach(function(e){return e.data.reset()})},e.getMTime=function(){return t.arrays.reduce(function(e,t){return t.data.getMTime()>e?t.data.getMTime():e},t.mtime)},e.getNumberOfComponents=function(){return t.arrays.reduce(function(e,t){return e+t.data.getNumberOfComponents()},0)},e.getNumberOfTuples=function(){return t.arrays.length>0?t.arrays[0].getNumberOfTuples():0},e.getState=function(){var e=n();return e.arrays=t.arrays.map(function(e){return{data:e.data.getState()}}),e}}(e,t)}var u={newInstance:r.a.newInstance(s,"vtkFieldData"),extend:s},l=n(21),c=l.c.AttributeTypes,f=l.c.AttributeCopyOperations,d=r.a.vtkWarningMacro;var p={activeScalars:-1,activeVectors:-1,activeTensors:-1,activeNormals:-1,activeTCoords:-1,activeGlobalIds:-1,activePedigreeIds:-1};function h(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,p,n),u.extend(e,t,n),r.a.setGet(e,t,["activeScalars","activeNormals","activeTCoords","activeVectors","activeTensors","activeGlobalIds","activePedigreeIds"]),t.arrays||(t.arrays={}),function(e,t){var n=["Scalars","Vectors","Normals","TCoords","Tensors","GlobalIds","PedigreeIds"];function i(e){var t=n.find(function(t){return c[t.toUpperCase()]===e||"number"!=typeof e&&t.toLowerCase()===e.toLowerCase()});return void 0===t&&(t=null),t}t.classHierarchy.push("vtkDataSetAttributes"),e.checkNumberOfComponents=function(e){return!0},e.setAttribute=function(n,r){var a=i(r);if(n&&"PEDIGREEIDS"===a.toUpperCase()&&!n.isA("vtkDataArray"))return d("Cannot set attribute ".concat(a,". The attribute must be a vtkDataArray.")),-1;if(n&&!e.checkNumberOfComponents(n,a))return d("Cannot set attribute ".concat(a,". Incorrect number of components.")),-1;var o=t["active".concat(a)];if(o>=0&&o<t.arrays.length){if(t.arrays[o]===n)return o;e.removeArrayByIndex(o)}return n?(o=e.addArray(n),t["active".concat(a)]=o):t["active".concat(a)]=-1,e.modified(),t["active".concat(a)]},e.setActiveAttributeByName=function(t,n){return e.setActiveAttributeByIndex(e.getArrayWithIndex(t).index,n)},e.setActiveAttributeByIndex=function(n,r){var a=i(r);if(n>=0&&n<t.arrays.length){if("PEDIGREEIDS"!==a.toUpperCase()){var o=e.getArrayByIndex(n);if(!o.isA("vtkDataArray"))return d("Cannot set attribute ".concat(a,". Only vtkDataArray subclasses can be set as active attributes.")),-1;if(!e.checkNumberOfComponents(o,a))return d("Cannot set attribute ".concat(a,". Incorrect number of components.")),-1}return t["active".concat(a)]=n,e.modified(),n}return-1===n&&(t["active".concat(a)]=n,e.modified()),-1},e.getActiveAttribute=function(t){var n=i(t);return e["get".concat(n)]()},e.removeAllArrays=function(){t.arrays=[],n.forEach(function(e){t["active".concat(e)]=-1})},e.removeArray=function(e){t.arrays=t.arrays.filter(function(r,i){return e!==r.data.getName()||(n.forEach(function(e){i===t["active".concat(e)]&&(t["active".concat(e)]=-1)}),!1)})},e.removeArrayByIndex=function(e){t.arrays=t.arrays.filter(function(t,n){return n!==e}),n.forEach(function(n){e===t["active".concat(n)]&&(t["active".concat(n)]=-1)})},n.forEach(function(n){var r="active".concat(n);e["get".concat(n)]=function(){return e.getArrayByIndex(t[r])},e["set".concat(n)]=function(t){return e.setAttribute(t,n)},e["setActive".concat(n)]=function(t){return e.setActiveAttributeByIndex(e.getArrayWithIndex(t).index,n)},e["copy".concat(n,"Off")]=function(){e.initialize();var r=n.toUpperCase();t.copyAttributeFlags[f.PASSDATA][c[r]]=!1}}),e.initialize=r.a.chain(e.initialize,function(){t.copyAttributeFlags=[],Object.keys(f).filter(function(e){return"ALLCOPY"!==e}).forEach(function(e){t.copyAttributeFlags[f[e]]=Object.keys(c).filter(function(e){return"NUM_ATTRIBUTES"!==e}).reduce(function(e,t){return e[c[t]]=!0,e},[])}),t.copyAttributeFlags[f.COPYTUPLE][c.GLOBALIDS]=!1,t.copyAttributeFlags[f.INTERPOLATE][c.GLOBALIDS]=!1,t.copyAttributeFlags[f.COPYTUPLE][c.PEDIGREEIDS]=!1}),t.dataArrays&&Object.keys(t.dataArrays).length&&Object.keys(t.dataArrays).forEach(function(n){t.dataArrays[n].ref||"vtkDataArray"!==t.dataArrays[n].type||e.addArray(a.a.newInstance(t.dataArrays[n]))});var o=e.shallowCopy;e.shallowCopy=function(e,n){o(e,n),t.arrays=e.getArrays().map(function(e){var t=e.newClone();return t.shallowCopy(e,n),{data:t}})}}(e,t)}var g=r.a.newInstance(h,"vtkDataSetAttributes");t.a=Object.assign({newInstance:g,extend:h},l.c)},function(e,t,n){var r=n(213);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(54)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){e.exports=i;var r=n(61).EventEmitter;function i(){r.call(this)}n(50)(i,r),i.Readable=n(172),i.Writable=n(178),i.Duplex=n(179),i.Transform=n(180),i.PassThrough=n(181),i.Stream=i,i.prototype.pipe=function(e,t){var n=this;function i(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function a(){n.readable&&n.resume&&n.resume()}n.on("data",i),e.on("drain",a),e._isStdio||t&&!1===t.end||(n.on("end",s),n.on("close",u));var o=!1;function s(){o||(o=!0,e.end())}function u(){o||(o=!0,"function"==typeof e.destroy&&e.destroy())}function l(e){if(c(),0===r.listenerCount(this,"error"))throw e}function c(){n.removeListener("data",i),e.removeListener("drain",a),n.removeListener("end",s),n.removeListener("close",u),n.removeListener("error",l),e.removeListener("error",l),n.removeListener("end",c),n.removeListener("close",c),e.removeListener("close",c)}return n.on("error",l),e.on("error",l),n.on("end",c),n.on("close",c),e.on("close",c),e.emit("pipe",n),e}},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function a(e){return"object"===n(e)&&null!==e}function o(e){return void 0===e}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,s,u,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(o(n=this._events[e]))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(a(n))for(s=Array.prototype.slice.call(arguments,1),r=(l=n.slice()).length,u=0;u<r;u++)l[u].apply(this,s);return!0},r.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,a(this._events[e])&&!this._events[e].warned&&(n=o(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){if(!i(t))throw TypeError("listener must be a function");var n=!1;function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var n,r,o,s;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(o=(n=this._events[e]).length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(a(n)){for(s=o;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){r=s;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(i(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t){var n,r,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var u,l=[],c=!1,f=-1;function d(){c&&u&&(c=!1,u.length?l=u.concat(l):f=-1,l.length&&p())}function p(){if(!c){var e=s(d);c=!0;for(var t=l.length;t;){for(u=l,l=[];++f<t;)u&&u[f].run();f=-1,t=l.length}u=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new h(e,t)),1!==l.length||c||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";(function(t){e.exports={isNode:void 0!==t,newBuffer:function(e,n){return new t(e,n)},isBuffer:function(e){return t.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}}).call(this,n(35).Buffer)},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){(function(){var t,r,i,a,o,s={}.hasOwnProperty;o=n(41),a=o.isObject,i=o.isFunction,r=n(23),t=n(124),e.exports=function(e){function n(e,t,r){if(n.__super__.constructor.call(this,e),null==t)throw new Error("Missing element name");this.name=this.stringify.eleName(t),this.attributes={},null!=r&&this.attribute(r),e.isDocument&&(this.isRoot=!0,this.documentObject=e,e.rootObject=this)}return function(e,t){for(var n in t)s.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,r),n.prototype.clone=function(){var e,t,n,r;for(t in(n=Object.create(this)).isRoot&&(n.documentObject=null),n.attributes={},r=this.attributes)s.call(r,t)&&(e=r[t],n.attributes[t]=e.clone());return n.children=[],this.children.forEach(function(e){var t;return(t=e.clone()).parent=n,n.children.push(t)}),n},n.prototype.attribute=function(e,n){var r,o;if(null!=e&&(e=e.valueOf()),a(e))for(r in e)s.call(e,r)&&(o=e[r],this.attribute(r,o));else i(n)&&(n=n.apply()),this.options.skipNullAttributes&&null==n||(this.attributes[e]=new t(this,e,n));return this},n.prototype.removeAttribute=function(e){var t,n,r;if(null==e)throw new Error("Missing attribute name");if(e=e.valueOf(),Array.isArray(e))for(n=0,r=e.length;n<r;n++)t=e[n],delete this.attributes[t];else delete this.attributes[e];return this},n.prototype.toString=function(e){return this.options.writer.set(e).element(this)},n.prototype.att=function(e,t){return this.attribute(e,t)},n.prototype.a=function(e,t){return this.attribute(e,t)},n}()}).call(this)},function(e,t,n){(function(){var t,r={}.hasOwnProperty;t=n(23),e.exports=function(e){function n(e,t){if(n.__super__.constructor.call(this,e),null==t)throw new Error("Missing CDATA text");this.text=this.stringify.cdata(t)}return function(e,t){for(var n in t)r.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(n,t),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(e){return this.options.writer.set(e).cdata(this)},n}()}).call(this)},function(e,t,n){(function(){var t,r={}.hasOwnProperty;t=n(23),e.exports=function(e){function n(e,t){if(n.__super__.constructor.call(this,e),null==t)throw new Error("Missing comment text");this.text=this.stringify.comment(t)}return function(e,t){for(var n in t)r.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(n,t),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(e){return this.options.writer.set(e).comment(this)},n}()}).call(this)},function(e,t,n){(function(){var t,r,i={}.hasOwnProperty;r=n(41).isObject,t=n(23),e.exports=function(e){function n(e,t,i,a){var o;n.__super__.constructor.call(this,e),r(t)&&(t=(o=t).version,i=o.encoding,a=o.standalone),t||(t="1.0"),this.version=this.stringify.xmlVersion(t),null!=i&&(this.encoding=this.stringify.xmlEncoding(i)),null!=a&&(this.standalone=this.stringify.xmlStandalone(a))}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,t),n.prototype.toString=function(e){return this.options.writer.set(e).declaration(this)},n}()}).call(this)},function(e,t,n){(function(){var t,r,i,a,o,s,u={}.hasOwnProperty;s=n(41).isObject,o=n(23),t=n(70),i=n(71),r=n(72),a=n(73),e.exports=function(e){function n(e,t,r){var i,a;n.__super__.constructor.call(this,e),this.documentObject=e,s(t)&&(t=(i=t).pubID,r=i.sysID),null==r&&(r=(a=[t,r])[0],t=a[1]),null!=t&&(this.pubID=this.stringify.dtdPubID(t)),null!=r&&(this.sysID=this.stringify.dtdSysID(r))}return function(e,t){for(var n in t)u.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,o),n.prototype.element=function(e,t){var n;return n=new r(this,e,t),this.children.push(n),this},n.prototype.attList=function(e,n,r,i,a){var o;return o=new t(this,e,n,r,i,a),this.children.push(o),this},n.prototype.entity=function(e,t){var n;return n=new i(this,!1,e,t),this.children.push(n),this},n.prototype.pEntity=function(e,t){var n;return n=new i(this,!0,e,t),this.children.push(n),this},n.prototype.notation=function(e,t){var n;return n=new a(this,e,t),this.children.push(n),this},n.prototype.toString=function(e){return this.options.writer.set(e).docType(this)},n.prototype.ele=function(e,t){return this.element(e,t)},n.prototype.att=function(e,t,n,r,i){return this.attList(e,t,n,r,i)},n.prototype.ent=function(e,t){return this.entity(e,t)},n.prototype.pent=function(e,t){return this.pEntity(e,t)},n.prototype.not=function(e,t){return this.notation(e,t)},n.prototype.up=function(){return this.root()||this.documentObject},n}()}).call(this)},function(e,t,n){(function(){var t,r={}.hasOwnProperty;t=n(23),e.exports=function(e){function n(e,t,r,i,a,o){if(n.__super__.constructor.call(this,e),null==t)throw new Error("Missing DTD element name");if(null==r)throw new Error("Missing DTD attribute name");if(!i)throw new Error("Missing DTD attribute type");if(!a)throw new Error("Missing DTD attribute default");if(0!==a.indexOf("#")&&(a="#"+a),!a.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT");if(o&&!a.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT");this.elementName=this.stringify.eleName(t),this.attributeName=this.stringify.attName(r),this.attributeType=this.stringify.dtdAttType(i),this.defaultValue=this.stringify.dtdAttDefault(o),this.defaultValueType=a}return function(e,t){for(var n in t)r.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(n,t),n.prototype.toString=function(e){return this.options.writer.set(e).dtdAttList(this)},n}()}).call(this)},function(e,t,n){(function(){var t,r,i={}.hasOwnProperty;r=n(41).isObject,t=n(23),e.exports=function(e){function n(e,t,i,a){if(n.__super__.constructor.call(this,e),null==i)throw new Error("Missing entity name");if(null==a)throw new Error("Missing entity value");if(this.pe=!!t,this.name=this.stringify.eleName(i),r(a)){if(!a.pubID&&!a.sysID)throw new Error("Public and/or system identifiers are required for an external entity");if(a.pubID&&!a.sysID)throw new Error("System identifier is required for a public external entity");if(null!=a.pubID&&(this.pubID=this.stringify.dtdPubID(a.pubID)),null!=a.sysID&&(this.sysID=this.stringify.dtdSysID(a.sysID)),null!=a.nData&&(this.nData=this.stringify.dtdNData(a.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity")}else this.value=this.stringify.dtdEntityValue(a)}return function(e,t){for(var n in t)i.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,t),n.prototype.toString=function(e){return this.options.writer.set(e).dtdEntity(this)},n}()}).call(this)},function(e,t,n){(function(){var t,r={}.hasOwnProperty;t=n(23),e.exports=function(e){function n(e,t,r){if(n.__super__.constructor.call(this,e),null==t)throw new Error("Missing DTD element name");r||(r="(#PCDATA)"),Array.isArray(r)&&(r="("+r.join(",")+")"),this.name=this.stringify.eleName(t),this.value=this.stringify.dtdElementValue(r)}return function(e,t){for(var n in t)r.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(n,t),n.prototype.toString=function(e){return this.options.writer.set(e).dtdElement(this)},n}()}).call(this)},function(e,t,n){(function(){var t,r={}.hasOwnProperty;t=n(23),e.exports=function(e){function n(e,t,r){if(n.__super__.constructor.call(this,e),null==t)throw new Error("Missing notation name");if(!r.pubID&&!r.sysID)throw new Error("Public or system identifiers are required for an external entity");this.name=this.stringify.eleName(t),null!=r.pubID&&(this.pubID=this.stringify.dtdPubID(r.pubID)),null!=r.sysID&&(this.sysID=this.stringify.dtdSysID(r.sysID))}return function(e,t){for(var n in t)r.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(n,t),n.prototype.toString=function(e){return this.options.writer.set(e).dtdNotation(this)},n}()}).call(this)},function(e,t,n){(function(){var t,r={}.hasOwnProperty;t=n(23),e.exports=function(e){function n(e,t){if(n.__super__.constructor.call(this,e),null==t)throw new Error("Missing raw text");this.value=this.stringify.raw(t)}return function(e,t){for(var n in t)r.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(n,t),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(e){return this.options.writer.set(e).raw(this)},n}()}).call(this)},function(e,t,n){(function(){var t,r={}.hasOwnProperty;t=n(23),e.exports=function(e){function n(e,t){if(n.__super__.constructor.call(this,e),null==t)throw new Error("Missing element text");this.value=this.stringify.eleText(t)}return function(e,t){for(var n in t)r.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(n,t),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(e){return this.options.writer.set(e).text(this)},n}()}).call(this)},function(e,t,n){(function(){var t,r={}.hasOwnProperty;t=n(23),e.exports=function(e){function n(e,t,r){if(n.__super__.constructor.call(this,e),null==t)throw new Error("Missing instruction target");this.target=this.stringify.insTarget(t),r&&(this.value=this.stringify.insValue(r))}return function(e,t){for(var n in t)r.call(t,n)&&(e[n]=t[n]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(n,t),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(e){return this.options.writer.set(e).processingInstruction(this)},n}()}).call(this)},function(e,t,n){"use strict";var r=n(22),i=r.b.StructuredType;t.a=Object.assign({getDataDescriptionFromExtent:function(e){for(var t=0,n=0;n<3;++n)e[2*n]<e[2*n+1]&&t++;return e[0]>e[1]||e[2]>e[3]||e[4]>e[5]?i.EMPTY:3===t?i.XYZ_GRID:2===t?e[0]===e[1]?i.YZ_PLANE:e[2]===e[3]?i.XZ_PLANE:i.XY_PLANE:1===t?e[0]<e[1]?i.X_LINE:e[2]<e[3]?i.Y_LINE:i.Z_LINE:i.SINGLE_POINT}},r.b)},function(e,t,n){"use strict";var r=n(0),i=[];var a={name:"",numberOfComponents:1,size:0,dataType:"string"};function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Object.assign(t,a,n),!t.empty&&!t.values&&!t.size)throw new TypeError("Cannot create vtkStringArray object without: size > 0, values");t.values?Array.isArray(t.values)&&(t.values=t.values):t.values=[],t.values&&(t.size=t.values.length),r.a.obj(e,t),r.a.set(e,t,["name"]),function(e,t){t.classHierarchy.push("vtkStringArray"),e.getComponent=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.values[e*t.numberOfComponents+n]},e.setComponent=function(n,r,i){i!==t.values[n*t.numberOfComponents+r]&&(t.values[n*t.numberOfComponents+r]=i,e.modified())},e.getData=function(){return t.values},e.getTuple=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,r=t.numberOfComponents||1;n.length&&(n.length=r);for(var a=e*r,o=0;o<r;o++)n[o]=t.values[a+o];return n},e.getTupleLocation=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1)*t.numberOfComponents},e.getNumberOfComponents=function(){return t.numberOfComponents},e.getNumberOfValues=function(){return t.values.length},e.getNumberOfTuples=function(){return t.values.length/t.numberOfComponents},e.getDataType=function(){return t.dataType},e.newClone=function(){return s({name:t.name,numberOfComponents:t.numberOfComponents})},e.getName=function(){return t.name||(e.modified(),t.name="vtkStringArray".concat(e.getMTime())),t.name},e.setData=function(n,r){t.values=n,t.size=n.length,r&&(t.numberOfComponents=r),t.size%t.numberOfComponents!=0&&(t.numberOfComponents=1),e.modified()}}(e,t)}var s=r.a.newInstance(o,"vtkStringArray");t.a={newInstance:s,extend:o}},function(e,t,n){"use strict";var r=n(8),i=n(0),a=n(42),o=n(14);var s={};function u(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,s,n),a.a.extend(e,t,n),i.a.setGet(e,t,["points"]),function(e,t){t.classHierarchy.push("vtkPointSet"),t.points?t.points=Object(r.a)(t.points):t.points=o.a.newInstance(),e.getBounds=function(){return t.points.getBounds()},e.computeBounds=function(){e.getBounds()};var n=e.shallowCopy;e.shallowCopy=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n(e,r),t.points=o.a.newInstance(),t.points.shallowCopy(e.getPoints())}}(e,t)}var l=i.a.newInstance(u,"vtkPointSet");t.a={newInstance:l,extend:u}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var s=n(156),u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==r(t)&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._messageId=1,n._messages=new Map,n._worker=e,n._worker.onmessage=n._onMessage.bind(n),n._id=Math.ceil(1e7*Math.random()),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+r(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s),a(t,[{key:"terminate",value:function(){this._worker.terminate()}},{key:"isFree",value:function(){return 0===this._messages.size}},{key:"jobsLength",value:function(){return this._messages.size}},{key:"exec",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments[3];return new Promise(function(a,o){var s=n._messageId++;n._messages.set(s,[a,o,i]),n._worker.postMessage([s,t,e],r||[])})}},{key:"postMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments[2];return new Promise(function(i,a){var o=t._messageId++;t._messages.set(o,[i,a,r]),t._worker.postMessage([o,e],n||[])})}},{key:"emit",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this._worker.postMessage({eventName:e,args:n})}},{key:"_onMessage",value:function(e){var n;if(!Array.isArray(e.data)&&e.data.eventName)return(n=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emit",this)).call.apply(n,[this,e.data.eventName].concat(o(e.data.args)));var r,i=(r=e.data,Array.isArray(r)?r:Array.from(r)),a=i[0],s=i.slice(1);if(1===a)this._onEvent.apply(this,o(s));else{if(0!==a)throw new Error("Wrong message type '"+a+"'");this._onResult.apply(this,o(s))}}},{key:"_onResult",value:function(e,t,n){var r=this._messages.get(e),a=i(r,2),o=a[0],s=a[1];return this._messages.delete(e),1===t?o(n):s(n)}},{key:"_onEvent",value:function(e,t,n){var r=this._messages.get(e),a=i(r,3)[2];a&&a(t,n)}}]),t}();e.exports=u},function(e,t){e.exports='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="180px" height="180px" viewBox="0 0 180 180" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 43.1 (39012) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>Contrast</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <linearGradient x1="100%" y1="50%" x2="0%" y2="50%" id="linearGradient-1">\n            <stop stop-color="#FFFFFF" offset="0%"></stop>\n            <stop stop-color="#FFFFFF" offset="49.4160555%"></stop>\n            <stop stop-color="#000000" offset="49.6771365%"></stop>\n            <stop stop-color="#000000" offset="100%"></stop>\n        </linearGradient>\n    </defs>\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="Contrast" stroke-width="10" stroke="#000000" fill="url(#linearGradient-1)">\n            <circle id="Oval" cx="90" cy="90" r="80"></circle>\n        </g>\n    </g>\n</svg>'},function(e,t){e.exports='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="196px" height="196px" viewBox="0 0 196 196" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 43.1 (39012) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>VTK-js favicon-logo</title>\n    <desc>Created with Sketch.</desc>\n    <defs></defs>\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="VTK-js-favicon">\n            <path d="M67.769437,157.024129 C67.2117935,160.021463 66.4450451,163.123308 65.4691689,166.329759 C64.4932927,169.536209 63.0295004,172.446368 61.077748,175.060322 C59.1259956,177.674276 56.5469329,179.817686 53.3404826,181.490617 C50.1340322,183.163547 46.056325,184 41.1072386,184 C34.7640434,184 29.605918,182.449077 25.6327078,179.347185 C21.6594976,176.245293 19.1152871,172.045603 18,166.747989 L34.1018767,161.520107 C34.3806984,163.402154 35.1125946,165.005355 36.2975871,166.329759 C37.4825797,167.654162 39.0509286,168.316354 41.002681,168.316354 C44.0697204,168.316354 46.2654089,167.235936 47.5898123,165.075067 C48.9142157,162.914198 49.8552251,160.195727 50.4128686,156.919571 L58.9865952,107.986595 L76.5522788,107.986595 L67.769437,157.024129 Z M125.798928,125.970509 C124.404819,124.088462 122.662209,122.659522 120.571046,121.683646 C118.479882,120.70777 116.144785,120.219839 113.565684,120.219839 C112.380691,120.219839 111.126012,120.376674 109.801609,120.690349 C108.477205,121.004023 107.274804,121.526806 106.19437,122.258713 C105.113936,122.99062 104.207778,123.914204 103.475871,125.029491 C102.743964,126.144778 102.378016,127.504013 102.378016,129.107239 C102.378016,131.198402 103.197043,132.853881 104.835121,134.073727 C106.473199,135.293572 108.756018,136.426268 111.683646,137.47185 C114.890096,138.587137 117.747977,139.82439 120.257373,141.183646 C122.766769,142.542902 124.892753,144.093825 126.635389,145.836461 C128.378025,147.579097 129.702408,149.548246 130.608579,151.743968 C131.51475,153.939689 131.967828,156.431621 131.967828,159.219839 C131.967828,163.680987 131.044245,167.479877 129.197051,170.616622 C127.349857,173.753367 124.962481,176.315003 122.034853,178.301609 C119.107224,180.288214 115.831117,181.73458 112.206434,182.640751 C108.581751,183.546921 104.991975,184 101.436997,184 C98.7881905,184 96.1394234,183.756035 93.4906166,183.268097 C90.8418098,182.780158 88.2975993,182.065688 85.8579088,181.124665 C83.4182184,180.183641 81.1528255,178.981241 79.0616622,177.517426 C76.9704989,176.053612 75.1930368,174.380706 73.7292225,172.49866 L86.5898123,162.042895 C88.0536266,164.27347 90.2144629,166.085784 93.0723861,167.479893 C95.9303092,168.874002 98.8230417,169.571046 101.75067,169.571046 C103.28419,169.571046 104.765408,169.414211 106.19437,169.100536 C107.623332,168.786862 108.895437,168.264079 110.010724,167.532172 C111.126011,166.800264 112.014742,165.859255 112.676944,164.709115 C113.339145,163.558975 113.670241,162.182314 113.670241,160.579088 C113.670241,157.999987 112.624675,155.961133 110.533512,154.462466 C108.442349,152.963799 105.654173,151.62199 102.168901,150.436997 C99.7292103,149.600532 97.4463913,148.659523 95.3203753,147.613941 C93.1943593,146.568359 91.3471928,145.278828 89.7788204,143.745308 C88.2104479,142.211789 86.9557688,140.382048 86.0147453,138.256032 C85.0737218,136.130016 84.6032172,133.56838 84.6032172,130.571046 C84.6032172,126.806952 85.3873916,123.408862 86.9557641,120.376676 C88.5241365,117.344489 90.6675467,114.765426 93.386059,112.63941 C96.1045712,110.513394 99.2761213,108.875341 102.900804,107.725201 C106.525487,106.575061 110.394081,106 114.506702,106 C116.667571,106 118.86326,106.209113 121.093834,106.627346 C123.324408,107.045578 125.467818,107.655492 127.524129,108.457105 C129.580439,109.258717 131.479884,110.252005 133.22252,111.436997 C134.965156,112.62199 136.428948,113.981226 137.613941,115.514745 L125.798928,125.970509 Z" id="JS" fill="#8A8B8A"></path>\n            <rect id="Rectangle-134" fill="#1C4678" transform="translate(169.748737, 159.748737) rotate(-315.000000) translate(-169.748737, -159.748737) " x="152.248737" y="142.248737" width="35" height="35" rx="17.5"></rect>\n            <g id="Group" transform="translate(3.000000, 11.000000)">\n                <polygon id="Path-94" fill="#1C4678" points="4.775 2.08166817e-17 25.2581621 86.0686648 47.787502 86.0686648 82.02727 14.6613142 60.8423667 14.6613142 39.9088237 59.0295346 25.2581621 2.08166817e-17"></polygon>\n                <polygon id="Path-95" fill="#1C4678" points="85.6632012 14.34375 136.139081 14.34375 128.046342 30.9059381 110.800052 30.8572018 101.147921 85.4767478 82.6093142 85.476745 92.1809484 30.9415527 77.9916667 30.941553"></polygon>\n                <polygon id="Path-96" fill="#1C4678" points="138.366196 14.34375 154.438082 14.4095874 150.024108 39.3972074 152.411743 39.3972071 169.267998 14.34375 190.243337 14.34375 167.800877 47.7472529 181.003613 101.809731 160.064138 101.809731 149.412421 57.3801274 147.116438 57.3801274 141.991155 85.515305 120.966667 85.5153071 130.730408 30.4719174"></polygon>\n                <polygon id="Path-99" fill="#8A8B8A" points="0 0 3.18219711 0 24.0460481 85.9443963 20.8593586 85.9443963"></polygon>\n                <polygon id="Path-100" fill="#8A8B8A" points="55.1015241 14.34375 57.8898582 14.34375 40.7465157 50.155281 39.7916667 46.2891617"></polygon>\n                <polygon id="Path-101" fill="#8A8B8A" points="85.6083812 33.46875 88.4914675 33.46875 79.3341428 85.5648665 76.4 85.5648665"></polygon>\n                <polygon id="Path-102" fill="#8A8B8A" points="123.785174 33.46875 126.709319 33.46875 117.522718 85.5149889 114.6 85.5149889"></polygon>\n                <polygon id="Path-103" fill="#8A8B8A" points="163.380379 14.34375 166.974353 14.34375 154.391667 33.1982334 155.708346 25.6525344"></polygon>\n                <polygon id="Path-104" fill="#8A8B8A" points="147.901937 63.75 156.818933 101.362589 153.508047 101.36259 146.433333 72.2903275"></polygon>\n            </g>\n        </g>\n    </g>\n</svg>'},function(e,t){e.exports='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="180px" height="180px" viewBox="0 0 180 180" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 43.1 (39012) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>Spacing</title>\n    <desc>Created with Sketch.</desc>\n    <defs></defs>\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="square">\n        <g id="Spacing" stroke="#000000" stroke-width="10">\n            <path d="M10,90 L170,90" id="Line"></path>\n            <path d="M10,133.488074 L10,47" id="Line"></path>\n            <path d="M170,133.488074 L170,47" id="Line"></path>\n            <path d="M90,133.488074 L90,47" id="Line"></path>\n        </g>\n    </g>\n</svg>'},function(e,t,n){"use strict";var r=n(0),i=n(51),a=n(2);var o={bounds:[1,-1,1,-1,1,-1],center:[0,0,0]};t.a={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,o,n),i.a.extend(e,t,n),t.bounds||a.uninitializeBounds(t.bounds),t.center||(t.center=[0,0,0]),function(e,t){e.getBounds=function(){return 0},e.getBounds=function(n){e.getBounds();for(var r=0;r<6;r++)n[r]=t.bounds[r]},e.getCenter=function(){e.getBounds();for(var n=0;n<3;n++)t.center[n]=(t.bounds[2*n+1]+t.bounds[2*n])/2;return t.center.slice()},e.getLength=function(){var n=0,r=0;e.getBounds();for(var i=0;i<3;i++)r+=(n=t.bounds[2*i+1]-t.bounds[2*i])*n;return Math.sqrt(r)},e.getClippingPlaneInDataCoords=function(e,n,i){var a=t.clippingPlanes,o=e;if(a){var s=a.length;if(n>=0&&n<s){var u=a[n],l=u.getNormal(),c=u.getOrigin(),f=l[0],d=l[1],p=l[2],h=-(f*c[0]+d*c[1]+p*c[2]);return i[0]=f*o[0]+d*o[4]+p*o[8]+h*o[12],i[1]=f*o[1]+d*o[5]+p*o[9]+h*o[13],i[2]=f*o[2]+d*o[6]+p*o[10]+h*o[14],void(i[3]=f*o[3]+d*o[7]+p*o[11]+h*o[15])}}r.a.vtkErrorMacro("Clipping plane index ".concat(n," is out of range."))}}(e,t)}}},function(e,t,n){"use strict";function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var e=new r;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}r.prototype=n(170),r.prototype.loadAsync=n(205),r.support=n(40),r.defaults=n(114),r.version="3.1.4",r.loadAsync=function(e,t){return(new r).loadAsync(e,t)},r.external=n(56),e.exports=r},function(e,t){e.exports="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkPolyDataVS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n\nattribute vec4 vertexMC;\n\n// frag position in VC\n//VTK::PositionVC::Dec\n\n// optional normal declaration\n//VTK::Normal::Dec\n\n// extra lighting parameters\n//VTK::Light::Dec\n\n// Texture coordinates\n//VTK::TCoord::Dec\n\n// material property values\n//VTK::Color::Dec\n\n// clipping plane vars\n//VTK::Clip::Dec\n\n// camera and actor matrix values\n//VTK::Camera::Dec\n\n// Apple Bug\n//VTK::PrimID::Dec\n\n// picking support\n//VTK::Picking::Dec\n\nvoid main()\n{\n  //VTK::Color::Impl\n\n  //VTK::Normal::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Clip::Impl\n\n  //VTK::PrimID::Impl\n\n  //VTK::PositionVC::Impl\n\n  //VTK::Light::Impl\n\n  //VTK::Picking::Impl\n}\n"},function(e,t,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(e,t,n){"use strict";(function(t){!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports=function(e,n,r,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var a,o,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,n)});case 3:return t.nextTick(function(){e.call(null,n,r)});case 4:return t.nextTick(function(){e.call(null,n,r,i)});default:for(a=new Array(s-1),o=0;o<a.length;)a[o++]=arguments[o];return t.nextTick(function(){e.apply(null,a)})}}:e.exports=t.nextTick}).call(this,n(62))},function(e,t,n){"use strict";(function(t,r){e.exports=h;var i=n(88),a=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?r:i,o=n(35).Buffer;h.WritableState=p;var s=n(55);s.inherits=n(50);var u,l={deprecate:n(176)};!function(){try{u=n(60)}catch(e){}finally{u||(u=n(61).EventEmitter)}}();var c;o=n(35).Buffer;function f(){}function d(e,t,n){this.chunk=e,this.encoding=t,this.callback=n,this.next=null}function p(e,t){c=c||n(46),e=e||{},this.objectMode=!!e.objectMode,t instanceof c&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,o=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:o,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var s=!1===e.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,o=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,a){--t.pendingcb,n?i(a,r):a(r);e._writableState.errorEmitted=!0,e.emit("error",r)}(e,n,r,t,o);else{var s=y(n);s||n.corked||n.bufferProcessing||!n.bufferedRequest||v(e,n),r?a(m,e,n,s,o):m(e,n,s,o)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new x(this),this.corkedRequestsFree.next=new x(this)}function h(e){if(c=c||n(46),!(this instanceof h||this instanceof c))return new h(e);this._writableState=new p(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev)),u.call(this)}function g(e,t,n,r,i,a,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,a,t.onwrite),t.sync=!1}function m(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),M(e,t)}function v(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),a=t.corkedRequestsFree;a.entry=n;for(var o=0;n;)i[o]=n,n=n.next,o+=1;g(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,t.corkedRequestsFree=a.next,a.next=null}else{for(;n;){var s=n.chunk,u=n.encoding,l=n.callback;if(g(e,t,!1,t.objectMode?1:s.length,s,u,l),n=n.next,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=n,t.bufferProcessing=!1}function y(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function b(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function M(e,t){var n=y(t);return n&&(0===t.pendingcb?(b(e,t),t.finished=!0,e.emit("finish")):b(e,t)),n}function x(e){var t=this;this.next=null,this.entry=null,this.finish=function(n){var r=t.entry;for(t.entry=null;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}s.inherits(h,u),p.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(p.prototype,"buffer",{get:l.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(e){}}(),h.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},h.prototype.write=function(e,t,n){var r=this._writableState,a=!1;return"function"==typeof t&&(n=t,t=null),o.isBuffer(e)?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=f),r.ended?function(e,t){var n=new Error("write after end");e.emit("error",n),i(t,n)}(this,n):function(e,t,n,r){var a=!0;if(!o.isBuffer(n)&&"string"!=typeof n&&null!=n&&!t.objectMode){var s=new TypeError("Invalid non-string/buffer chunk");e.emit("error",s),i(r,s),a=!1}return a}(this,r,e,n)&&(r.pendingcb++,a=function(e,t,n,r,i){n=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=new o(t,n)),t}(t,n,r),o.isBuffer(n)&&(r="buffer");var a=t.objectMode?1:n.length;t.length+=a;var s=t.length<t.highWaterMark;s||(t.needDrain=!0);if(t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest=new d(n,r,i),u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else g(e,t,!1,a,n,r,i);return s}(this,r,e,t,n)),a},h.prototype.cork=function(){this._writableState.corked++},h.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||v(this,e))},h.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);this._writableState.defaultEncoding=e},h.prototype._write=function(e,t,n){n(new Error("not implemented"))},h.prototype._writev=null,h.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(e,t,n){t.ending=!0,M(e,t),n&&(t.finished?i(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,r,n)}}).call(this,n(62),n(174).setImmediate)},function(e,t,n){"use strict";e.exports=o;var r=n(46),i=n(55);function a(e){this.afterTransform=function(t,n){return function(e,t,n){var r=e._transformState;r.transforming=!1;var i=r.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,null!=n&&e.push(n);i(t);var a=e._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&e._read(a.highWaterMark)}(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function o(e){if(!(this instanceof o))return new o(e);r.call(this,e),this._transformState=new a(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e){s(t,e)}):s(t)})}function s(e,t){if(t)return e.emit("error",t);var n=e._writableState,r=e._transformState;if(n.length)throw new Error("calling transform done when ws.length != 0");if(r.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}i.inherits=n(50),i.inherits(o,r),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,n){throw new Error("not implemented")},o.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0}},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e){return"object"===n(e)?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(111)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){"use strict";var r=n(56),i=n(115),a=n(116),o=n(117);a=n(116);function s(e,t,n,r,i){this.compressedSize=e,this.uncompressedSize=t,this.crc32=n,this.compression=r,this.compressedContent=i}s.prototype={getContentWorker:function(){var e=new i(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")),t=this;return e.on("end",function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),e},getCompressedWorker:function(){return new i(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},s.createWorkerFrom=function(e,t,n){return e.pipe(new o).pipe(new a("uncompressedSize")).pipe(t.compressWorker(n)).pipe(new a("compressedSize")).withStreamInfo("compression",t)},e.exports=s},function(e,t,n){"use strict";var r=n(13);var i=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();e.exports=function(e,t){return void 0!==e&&e.length?"string"!==r.getTypeOf(e)?function(e,t,n,r){var a=i,o=r+n;e^=-1;for(var s=r;s<o;s++)e=e>>>8^a[255&(e^t[s])];return-1^e}(0|t,e,e.length,0):function(e,t,n,r){var a=i,o=r+n;e^=-1;for(var s=r;s<o;s++)e=e>>>8^a[255&(e^t.charCodeAt(s))];return-1^e}(0|t,e,e.length,0):0}},function(e,t,n){(function(){var t,r,i,a,o,s,u,l,c,f,d,p,h,g={}.hasOwnProperty;u=n(68),l=n(69),t=n(66),r=n(67),c=n(65),d=n(74),p=n(75),f=n(76),i=n(70),a=n(72),o=n(71),s=n(73),h=n(126),e.exports=function(e){function n(e){n.__super__.constructor.call(this,e)}return function(e,t){for(var n in t)g.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,h),n.prototype.document=function(e){var t,n,i,a,o;for(this.textispresent=!1,a="",n=0,i=(o=e.children).length;n<i;n++)t=o[n],a+=function(){switch(!1){case!(t instanceof u):return this.declaration(t);case!(t instanceof l):return this.docType(t);case!(t instanceof r):return this.comment(t);case!(t instanceof f):return this.processingInstruction(t);default:return this.element(t,0)}}.call(this);return this.pretty&&a.slice(-this.newline.length)===this.newline&&(a=a.slice(0,-this.newline.length)),a},n.prototype.attribute=function(e){return" "+e.name+'="'+e.value+'"'},n.prototype.cdata=function(e,t){return this.space(t)+"<![CDATA["+e.text+"]]>"+this.newline},n.prototype.comment=function(e,t){return this.space(t)+"\x3c!-- "+e.text+" --\x3e"+this.newline},n.prototype.declaration=function(e,t){var n;return n=this.space(t),n+='<?xml version="'+e.version+'"',null!=e.encoding&&(n+=' encoding="'+e.encoding+'"'),null!=e.standalone&&(n+=' standalone="'+e.standalone+'"'),n+=this.spacebeforeslash+"?>",n+=this.newline},n.prototype.docType=function(e,n){var u,l,c,d,p;if(n||(n=0),d=this.space(n),d+="<!DOCTYPE "+e.root().name,e.pubID&&e.sysID?d+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(d+=' SYSTEM "'+e.sysID+'"'),e.children.length>0){for(d+=" [",d+=this.newline,l=0,c=(p=e.children).length;l<c;l++)u=p[l],d+=function(){switch(!1){case!(u instanceof i):return this.dtdAttList(u,n+1);case!(u instanceof a):return this.dtdElement(u,n+1);case!(u instanceof o):return this.dtdEntity(u,n+1);case!(u instanceof s):return this.dtdNotation(u,n+1);case!(u instanceof t):return this.cdata(u,n+1);case!(u instanceof r):return this.comment(u,n+1);case!(u instanceof f):return this.processingInstruction(u,n+1);default:throw new Error("Unknown DTD node type: "+u.constructor.name)}}.call(this);d+="]"}return d+=this.spacebeforeslash+">",d+=this.newline},n.prototype.element=function(e,n){var i,a,o,s,u,l,h,m,v,y,b,M,x;for(h in n||(n=0),x=!1,this.textispresent?(this.newline="",this.pretty=!1):(this.newline=this.newlinedefault,this.pretty=this.prettydefault),m="",m+=(M=this.space(n))+"<"+e.name,v=e.attributes)g.call(v,h)&&(i=v[h],m+=this.attribute(i));if(0===e.children.length||e.children.every(function(e){return""===e.value}))this.allowEmpty?m+="></"+e.name+">"+this.newline:m+=this.spacebeforeslash+"/>"+this.newline;else if(this.pretty&&1===e.children.length&&null!=e.children[0].value)m+=">",m+=e.children[0].value,m+="</"+e.name+">"+this.newline;else{if(this.dontprettytextnodes)for(o=0,u=(y=e.children).length;o<u;o++)if(null!=(a=y[o]).value){this.textispresent++,x=!0;break}for(this.textispresent&&(this.newline="",this.pretty=!1,M=this.space(n)),m+=">"+this.newline,s=0,l=(b=e.children).length;s<l;s++)a=b[s],m+=function(){switch(!1){case!(a instanceof t):return this.cdata(a,n+1);case!(a instanceof r):return this.comment(a,n+1);case!(a instanceof c):return this.element(a,n+1);case!(a instanceof d):return this.raw(a,n+1);case!(a instanceof p):return this.text(a,n+1);case!(a instanceof f):return this.processingInstruction(a,n+1);default:throw new Error("Unknown XML node type: "+a.constructor.name)}}.call(this);x&&this.textispresent--,this.textispresent||(this.newline=this.newlinedefault,this.pretty=this.prettydefault),m+=M+"</"+e.name+">"+this.newline}return m},n.prototype.processingInstruction=function(e,t){var n;return n=this.space(t)+"<?"+e.target,e.value&&(n+=" "+e.value),n+=this.spacebeforeslash+"?>"+this.newline},n.prototype.raw=function(e,t){return this.space(t)+e.value+this.newline},n.prototype.text=function(e,t){return this.space(t)+e.value+this.newline},n.prototype.dtdAttList=function(e,t){var n;return n=this.space(t)+"<!ATTLIST "+e.elementName+" "+e.attributeName+" "+e.attributeType,"#DEFAULT"!==e.defaultValueType&&(n+=" "+e.defaultValueType),e.defaultValue&&(n+=' "'+e.defaultValue+'"'),n+=this.spacebeforeslash+">"+this.newline},n.prototype.dtdElement=function(e,t){return this.space(t)+"<!ELEMENT "+e.name+" "+e.value+this.spacebeforeslash+">"+this.newline},n.prototype.dtdEntity=function(e,t){var n;return n=this.space(t)+"<!ENTITY",e.pe&&(n+=" %"),n+=" "+e.name,e.value?n+=' "'+e.value+'"':(e.pubID&&e.sysID?n+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(n+=' SYSTEM "'+e.sysID+'"'),e.nData&&(n+=" NDATA "+e.nData)),n+=this.spacebeforeslash+">"+this.newline},n.prototype.dtdNotation=function(e,t){var n;return n=this.space(t)+"<!NOTATION "+e.name,e.pubID&&e.sysID?n+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.pubID?n+=' PUBLIC "'+e.pubID+'"':e.sysID&&(n+=' SYSTEM "'+e.sysID+'"'),n+=this.spacebeforeslash+">"+this.newline},n.prototype.openNode=function(e,t){var n,r,i,a;if(t||(t=0),e instanceof c){for(r in i=this.space(t)+"<"+e.name,a=e.attributes)g.call(a,r)&&(n=a[r],i+=this.attribute(n));return i+=(e.children?">":"/>")+this.newline}return i=this.space(t)+"<!DOCTYPE "+e.rootNodeName,e.pubID&&e.sysID?i+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(i+=' SYSTEM "'+e.sysID+'"'),i+=(e.children?" [":">")+this.newline},n.prototype.closeNode=function(e,t){switch(t||(t=0),!1){case!(e instanceof c):return this.space(t)+"</"+e.name+">"+this.newline;case!(e instanceof l):return this.space(t)+"]>"+this.newline}},n}()}).call(this)},function(e){e.exports={format:1,last_updated:"2018-02-20T22:55:10Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel XL/*"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel/*"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LENOVO/*/Lenovo PB2-690Y/*"},{ua:"Lenovo PB2-690Y"}],dpi:[457.2,454.713],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/G5/*"},{ua:"Moto G (5) Plus"}],dpi:[403.4,403],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A5000/*"},{ua:"ONEPLUS A5000 "}],dpi:[403.411,399.737],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A5010/*"},{ua:"ONEPLUS A5010"}],dpi:[403,400],bw:2,ac:1e3},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SGH-M919/*"},{ua:"SGH-M919"}],dpi:[440.8,437.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920P/*"},{ua:"SM-N920P"}],dpi:[386.3655,390.144],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G930F/*"},{ua:"SM-G930F"}],dpi:576.6,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:533,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G950F/*"},{ua:"SM-G950F"}],dpi:[562.707,565.293],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955U/*"},{ua:"SM-G955U"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Fly/*/IQ4412/*"},{ua:"IQ4412"}],dpi:307.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"BENEVE/*/VR518/*"},{ua:"VR518"}],dpi:480,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2436]}],dpi:458,bw:4,ac:1e3}]}},function(e,t,n){"use strict";var r=window.URL||window.webkitURL;e.exports=function(e,t){try{try{var n;try{(n=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(e),n=n.getBlob()}catch(t){n=new Blob([e])}return new Worker(r.createObjectURL(n))}catch(t){return new Worker("data:application/javascript,"+encodeURIComponent(e))}}catch(e){if(!t)throw Error("Inline worker is not supported");return new Worker(t)}}},function(e,t,n){"use strict";e.exports=function(e,t,n,r){for(var i=65535&e|0,a=e>>>16&65535|0,o=0;0!==n;){n-=o=n>2e3?2e3:n;do{a=a+(i=i+t[r++]|0)|0}while(--o);i%=65521,a%=65521}return i|a<<16|0}},function(e,t,n){"use strict";var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();e.exports=function(e,t,n,i){var a=r,o=i+n;e^=-1;for(var s=i;s<o;s++)e=e>>>8^a[255&(e^t[s])];return-1^e}},function(e,t,n){"use strict";var r=n(39),i=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){a=!1}for(var o=new r.Buf8(256),s=0;s<256;s++)o[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;function u(e,t){if(t<65537&&(e.subarray&&a||!e.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));for(var n="",o=0;o<t;o++)n+=String.fromCharCode(e[o]);return n}o[254]=o[254]=1,t.string2buf=function(e){var t,n,i,a,o,s=e.length,u=0;for(a=0;a<s;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(i=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(i-56320),a++),u+=n<128?1:n<2048?2:n<65536?3:4;for(t=new r.Buf8(u),o=0,a=0;o<u;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(i=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(i-56320),a++),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|63&n):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|63&n):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|63&n);return t},t.buf2binstring=function(e){return u(e,e.length)},t.binstring2buf=function(e){for(var t=new r.Buf8(e.length),n=0,i=t.length;n<i;n++)t[n]=e.charCodeAt(n);return t},t.buf2string=function(e,t){var n,r,i,a,s=t||e.length,l=new Array(2*s);for(r=0,n=0;n<s;)if((i=e[n++])<128)l[r++]=i;else if((a=o[i])>4)l[r++]=65533,n+=a-1;else{for(i&=2===a?31:3===a?15:7;a>1&&n<s;)i=i<<6|63&e[n++],a--;a>1?l[r++]=65533:i<65536?l[r++]=i:(i-=65536,l[r++]=55296|i>>10&1023,l[r++]=56320|1023&i)}return u(l,r)},t.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0?t:0===n?t:n+o[e[n]]>t?n:t}},function(e,t,n){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(e,t,n){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){e.exports=n(60)},function(e,t,n){"use strict";(function(t){e.exports=h;var r=n(88),i=n(103),a=n(35).Buffer;h.ReadableState=p;n(61);var o,s=function(e,t){return e.listeners(t).length};!function(){try{o=n(60)}catch(e){}finally{o||(o=n(61).EventEmitter)}}();a=n(35).Buffer;var u=n(55);u.inherits=n(50);var l,c,f=n(173),d=void 0;function p(e,t){c=c||n(46),e=e||{},this.objectMode=!!e.objectMode,t instanceof c&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(l||(l=n(106).StringDecoder),this.decoder=new l(e.encoding),this.encoding=e.encoding)}function h(e){if(c=c||n(46),!(this instanceof h))return new h(e);this._readableState=new p(e,this),this.readable=!0,e&&"function"==typeof e.read&&(this._read=e.read),o.call(this)}function g(e,t,n,i,o){var s=function(e,t){var n=null;a.isBuffer(t)||"string"==typeof t||null==t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));return n}(t,n);if(s)e.emit("error",s);else if(null===n)t.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,y(e)}(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!o){var u=new Error("stream.push() after EOF");e.emit("error",u)}else if(t.endEmitted&&o){u=new Error("stream.unshift() after end event");e.emit("error",u)}else{var l;!t.decoder||o||i||(n=t.decoder.write(n),l=!t.objectMode&&0===n.length),o||(t.reading=!1),l||(t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,o?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&y(e))),function(e,t){t.readingMore||(t.readingMore=!0,r(M,e,t))}(e,t)}else o||(t.reading=!1);return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(t)}d=f&&f.debuglog?f.debuglog("stream"):function(){},u.inherits(h,o),h.prototype.push=function(e,t){var n=this._readableState;return n.objectMode||"string"!=typeof e||(t=t||n.defaultEncoding)!==n.encoding&&(e=new a(e,t),t=""),g(this,n,e,t,!1)},h.prototype.unshift=function(e){return g(this,this._readableState,e,"",!0)},h.prototype.isPaused=function(){return!1===this._readableState.flowing},h.prototype.setEncoding=function(e){return l||(l=n(106).StringDecoder),this._readableState.decoder=new l(e),this._readableState.encoding=e,this};var m=8388608;function v(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:null===e||isNaN(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:e<=0?0:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=m?e=m:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function y(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(d("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?r(b,e):b(e))}function b(e){d("emit readable"),e.emit("readable"),A(e)}function M(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(d("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function x(e){d("readable nexttick read 0"),e.read(0)}function w(e,t){t.reading||(d("resume read 0"),e.read(0)),t.resumeScheduled=!1,e.emit("resume"),A(e),t.flowing&&!t.reading&&e.read(0)}function A(e){var t=e._readableState;if(d("flow",t.flowing),t.flowing)do{var n=e.read()}while(null!==n&&t.flowing)}function T(e,t){var n,r=t.buffer,i=t.length,o=!!t.decoder,s=!!t.objectMode;if(0===r.length)return null;if(0===i)n=null;else if(s)n=r.shift();else if(!e||e>=i)n=o?r.join(""):1===r.length?r[0]:a.concat(r,i),r.length=0;else{if(e<r[0].length)n=(f=r[0]).slice(0,e),r[0]=f.slice(e);else if(e===r[0].length)n=r.shift();else{n=o?"":new a(e);for(var u=0,l=0,c=r.length;l<c&&u<e;l++){var f=r[0],d=Math.min(e-u,f.length);o?n+=f.slice(0,d):f.copy(n,u,0,d),d<f.length?r[0]=f.slice(d):r.shift(),u+=d}}}return n}function C(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");t.endEmitted||(t.ended=!0,r(S,t,e))}function S(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}h.prototype.read=function(e){d("read",e);var t=this._readableState,n=e;if(("number"!=typeof e||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return d("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?C(this):y(this),null;if(0===(e=v(e,t))&&t.ended)return 0===t.length&&C(this),null;var r,i=t.needReadable;return d("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&d("length less than watermark",i=!0),(t.ended||t.reading)&&d("reading or ended",i=!1),i&&(d("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),i&&!t.reading&&(e=v(n,t)),null===(r=e>0?T(e,t):null)&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),n!==e&&t.ended&&0===t.length&&C(this),null!==r&&this.emit("data",r),r},h.prototype._read=function(e){this.emit("error",new Error("not implemented"))},h.prototype.pipe=function(e,n){var a=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}o.pipesCount+=1,d("pipe count=%d opts=%j",o.pipesCount,n);var u=(!n||!1!==n.end)&&e!==t.stdout&&e!==t.stderr?c:h;function l(e){d("onunpipe"),e===a&&h()}function c(){d("onend"),e.end()}o.endEmitted?r(u):a.once("end",u),e.on("unpipe",l);var f=function(e){return function(){var t=e._readableState;d("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,A(e))}}(a);e.on("drain",f);var p=!1;function h(){d("cleanup"),e.removeListener("close",v),e.removeListener("finish",y),e.removeListener("drain",f),e.removeListener("error",m),e.removeListener("unpipe",l),a.removeListener("end",c),a.removeListener("end",h),a.removeListener("data",g),p=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||f()}function g(t){d("ondata"),!1===e.write(t)&&(1!==o.pipesCount||o.pipes[0]!==e||1!==a.listenerCount("data")||p||(d("false write response, pause",a._readableState.awaitDrain),a._readableState.awaitDrain++),a.pause())}function m(t){d("onerror",t),b(),e.removeListener("error",m),0===s(e,"error")&&e.emit("error",t)}function v(){e.removeListener("finish",y),b()}function y(){d("onfinish"),e.removeListener("close",v),b()}function b(){d("unpipe"),a.unpipe(e)}return a.on("data",g),e._events&&e._events.error?i(e._events.error)?e._events.error.unshift(m):e._events.error=[m,e._events.error]:e.on("error",m),e.once("close",v),e.once("finish",y),e.emit("pipe",a),o.flowing||(d("pipe resume"),a.resume()),e},h.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<r;i++)n[i].emit("unpipe",this);return this}var a=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}(t.pipes,e);return-1===a?this:(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},h.prototype.on=function(e,t){var n=o.prototype.on.call(this,e,t);if("data"===e&&!1!==this._readableState.flowing&&this.resume(),"readable"===e&&!this._readableState.endEmitted){var i=this._readableState;i.readableListening||(i.readableListening=!0,i.emittedReadable=!1,i.needReadable=!0,i.reading?i.length&&y(this):r(x,this))}return n},h.prototype.addListener=h.prototype.on,h.prototype.resume=function(){var e=this._readableState;return e.flowing||(d("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r(w,e,t))}(this,e)),this},h.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this},h.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;for(var i in e.on("end",function(){if(d("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(i){(d("wrapped data"),t.decoder&&(i=t.decoder.write(i)),t.objectMode&&null==i)||(t.objectMode||i&&i.length)&&(r.push(i)||(n=!0,e.pause()))}),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));return function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}(["error","close","destroy","pause","resume"],function(t){e.on(t,r.emit.bind(r,t))}),r._read=function(t){d("wrapped _read",t),n&&(n=!1,e.resume())},r},h._fromList=T}).call(this,n(62))},function(e,t,n){"use strict";var r=n(177).Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=u,this.end=l,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=c,this.end=f,t=3;break;default:return this.write=d,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function o(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function u(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function c(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function f(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function d(e){return e.toString(this.encoding)}function p(e){return e&&e.length?this.write(e):""}t.StringDecoder=a,a.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},a.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},a.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=o(t[r]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if((i=o(t[r]))>=0)return i>0&&(e.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if((i=o(t[r]))>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},a.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,n){"use strict";e.exports=a;var r=n(90),i=n(55);function a(e){if(!(this instanceof a))return new a(e);r.call(this,e)}i.inherits=n(50),i.inherits(a,r),a.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){"use strict";var r=n(13),i=n(40),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.encode=function(e){for(var t,n,i,o,s,u,l,c=[],f=0,d=e.length,p=d,h="string"!==r.getTypeOf(e);f<e.length;)p=d-f,h?(t=e[f++],n=f<d?e[f++]:0,i=f<d?e[f++]:0):(t=e.charCodeAt(f++),n=f<d?e.charCodeAt(f++):0,i=f<d?e.charCodeAt(f++):0),o=t>>2,s=(3&t)<<4|n>>4,u=p>1?(15&n)<<2|i>>6:64,l=p>2?63&i:64,c.push(a.charAt(o)+a.charAt(s)+a.charAt(u)+a.charAt(l));return c.join("")},t.decode=function(e){var t,n,r,o,s,u,l=0,c=0;if("data:"===e.substr(0,"data:".length))throw new Error("Invalid base64 input, it looks like a data url.");var f,d=3*(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(e.charAt(e.length-1)===a.charAt(64)&&d--,e.charAt(e.length-2)===a.charAt(64)&&d--,d%1!=0)throw new Error("Invalid base64 input, bad content length.");for(f=i.uint8array?new Uint8Array(0|d):new Array(0|d);l<e.length;)t=a.indexOf(e.charAt(l++))<<2|(o=a.indexOf(e.charAt(l++)))>>4,n=(15&o)<<4|(s=a.indexOf(e.charAt(l++)))>>2,r=(3&s)<<6|(u=a.indexOf(e.charAt(l++))),f[c++]=t,64!==s&&(f[c++]=n),64!==u&&(f[c++]=r);return f}},function(e,t){var n=e.exports={version:"2.3.0"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(185);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var r=n(91),i=n(64).document,a=r(i)&&r(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},function(e,t,n){"use strict";(function(t){var r=n(13),i=n(198),a=n(28),o=n(108),s=n(40),u=n(56),l=null;if(s.nodestream)try{l=n(199)}catch(e){}function c(e,n){var r,i=0,a=null,o=0;for(r=0;r<n.length;r++)o+=n[r].length;switch(e){case"string":return n.join("");case"array":return Array.prototype.concat.apply([],n);case"uint8array":for(a=new Uint8Array(o),r=0;r<n.length;r++)a.set(n[r],i),i+=n[r].length;return a;case"nodebuffer":return t.concat(n);default:throw new Error("concat : unsupported type '"+e+"'")}}function f(e,t){return new u.Promise(function(n,i){var a=[],s=e._internalType,u=e._outputType,l=e._mimeType;e.on("data",function(e,n){a.push(e),t&&t(n)}).on("error",function(e){a=[],i(e)}).on("end",function(){try{var e=function(e,t,n,i){var a=null;switch(e){case"blob":return r.newBlob(n,i);case"base64":return a=c(t,n),o.encode(a);default:return a=c(t,n),r.transformTo(e,a)}}(u,s,a,l);n(e)}catch(e){i(e)}a=[]}).resume()})}function d(e,t,n){var o=t;switch(t){case"blob":o="arraybuffer";break;case"arraybuffer":o="uint8array";break;case"base64":o="string"}try{this._internalType=o,this._outputType=t,this._mimeType=n,r.checkSupport(o),this._worker=e.pipe(new i(o)),e.lock()}catch(e){this._worker=new a("error"),this._worker.error(e)}}d.prototype={accumulate:function(e){return f(this,e)},on:function(e,t){var n=this;return"data"===e?this._worker.on(e,function(e){t.call(n,e.data,e.meta)}):this._worker.on(e,function(){r.delay(t,arguments,n)}),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(r.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new l(this,{objectMode:"nodebuffer"!==this._outputType},e)}},e.exports=d}).call(this,n(35).Buffer)},function(e,t,n){"use strict";t.base64=!1,t.binary=!1,t.dir=!1,t.createFolders=!0,t.date=null,t.compression=null,t.compressionOptions=null,t.comment=null,t.unixPermissions=null,t.dosPermissions=null},function(e,t,n){"use strict";var r=n(13),i=n(28);function a(e){i.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then(function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=r.getTypeOf(e),t.isPaused||t._tickAndRepeat()},function(e){t.error(e)})}r.inherits(a,i),a.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=a},function(e,t,n){"use strict";var r=n(13),i=n(28);function a(e){i.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}r.inherits(a,i),a.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}i.prototype.processChunk.call(this,e)},e.exports=a},function(e,t,n){"use strict";var r=n(28),i=n(94);function a(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n(13).inherits(a,r),a.prototype.processChunk=function(e){this.streamInfo.crc32=i(e.data,this.streamInfo.crc32||0),this.push(e)},e.exports=a},function(e,t,n){"use strict";var r=n(28);t.STORE={magic:"\0\0",compressWorker:function(e){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},t.DEFLATE=n(202)},function(e,t,n){"use strict";t.LOCAL_FILE_HEADER="PK",t.CENTRAL_FILE_HEADER="PK",t.CENTRAL_DIRECTORY_END="PK",t.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",t.ZIP64_CENTRAL_DIRECTORY_END="PK",t.DATA_DESCRIPTOR="PK\b"},function(e,t,n){"use strict";var r=n(13),i=n(40),a=n(121),o=n(207),s=n(208),u=n(123);e.exports=function(e){var t=r.getTypeOf(e);return r.checkSupport(t),"string"!==t||i.uint8array?"nodebuffer"===t?new s(e):i.uint8array?new u(r.transformTo("uint8array",e)):new a(r.transformTo("array",e)):new o(e)}},function(e,t,n){"use strict";var r=n(122);function i(e){r.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}n(13).inherits(i,r),i.prototype.byteAt=function(e){return this.data[this.zero+e]},i.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),a=this.length-4;a>=0;--a)if(this.data[a]===t&&this.data[a+1]===n&&this.data[a+2]===r&&this.data[a+3]===i)return a-this.zero;return-1},i.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),a=this.readData(4);return t===a[0]&&n===a[1]&&r===a[2]&&i===a[3]},i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},e.exports=i},function(e,t,n){"use strict";var r=n(13);function i(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(e){},readInt:function(e){var t,n=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)n=(n<<8)+this.byteAt(t);return this.index+=e,n},readString:function(e){return r.transformTo("string",this.readData(e))},readData:function(e){},lastIndexOfSignature:function(e){},readAndCheckSignature:function(e){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},e.exports=i},function(e,t,n){"use strict";var r=n(121);function i(e){r.call(this,e)}n(13).inherits(i,r),i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},e.exports=i},function(e,t){(function(){e.exports=function(){function e(e,t,n){if(this.options=e.options,this.stringify=e.stringify,null==t)throw new Error("Missing attribute name of element "+e.name);if(null==n)throw new Error("Missing attribute value for attribute "+t+" of element "+e.name);this.name=this.stringify.attName(t),this.value=this.stringify.attValue(n)}return e.prototype.clone=function(){return Object.create(this)},e.prototype.toString=function(e){return this.options.writer.set(e).attribute(this)},e}()}).call(this)},function(e,t){(function(){var t=function(e,t){return function(){return e.apply(t,arguments)}},n={}.hasOwnProperty;e.exports=function(){function e(e){var r,i,a;for(r in this.assertLegalChar=t(this.assertLegalChar,this),e||(e={}),this.noDoubleEncoding=e.noDoubleEncoding,i=e.stringify||{})n.call(i,r)&&(a=i[r],this[r]=a)}return e.prototype.eleName=function(e){return e=""+e||"",this.assertLegalChar(e)},e.prototype.eleText=function(e){return e=""+e||"",this.assertLegalChar(this.elEscape(e))},e.prototype.cdata=function(e){return e=(e=""+e||"").replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(e)},e.prototype.comment=function(e){if((e=""+e||"").match(/--/))throw new Error("Comment text cannot contain double-hypen: "+e);return this.assertLegalChar(e)},e.prototype.raw=function(e){return""+e||""},e.prototype.attName=function(e){return""+e||""},e.prototype.attValue=function(e){return e=""+e||"",this.attEscape(e)},e.prototype.insTarget=function(e){return""+e||""},e.prototype.insValue=function(e){if((e=""+e||"").match(/\?>/))throw new Error("Invalid processing instruction value: "+e);return e},e.prototype.xmlVersion=function(e){if(!(e=""+e||"").match(/1\.[0-9]+/))throw new Error("Invalid version number: "+e);return e},e.prototype.xmlEncoding=function(e){if(!(e=""+e||"").match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+e);return e},e.prototype.xmlStandalone=function(e){return e?"yes":"no"},e.prototype.dtdPubID=function(e){return""+e||""},e.prototype.dtdSysID=function(e){return""+e||""},e.prototype.dtdElementValue=function(e){return""+e||""},e.prototype.dtdAttType=function(e){return""+e||""},e.prototype.dtdAttDefault=function(e){return null!=e?""+e||"":e},e.prototype.dtdEntityValue=function(e){return""+e||""},e.prototype.dtdNData=function(e){return""+e||""},e.prototype.convertAttKey="@",e.prototype.convertPIKey="?",e.prototype.convertTextKey="#text",e.prototype.convertCDataKey="#cdata",e.prototype.convertCommentKey="#comment",e.prototype.convertRawKey="#raw",e.prototype.assertLegalChar=function(e){var t;if(t=e.match(/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/))throw new Error("Invalid character in string: "+e+" at index "+t.index);return e},e.prototype.elEscape=function(e){var t;return t=this.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,e.replace(t,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;")},e.prototype.attEscape=function(e){var t;return t=this.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,e.replace(t,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")},e}()}).call(this)},function(e,t){(function(){var t={}.hasOwnProperty;e.exports=function(){function e(e){var n,r,i,a,o,s,u,l,c;for(n in e||(e={}),this.pretty=e.pretty||!1,this.allowEmpty=null!=(r=e.allowEmpty)&&r,this.pretty?(this.indent=null!=(i=e.indent)?i:"  ",this.newline=null!=(a=e.newline)?a:"\n",this.offset=null!=(o=e.offset)?o:0,this.dontprettytextnodes=null!=(s=e.dontprettytextnodes)?s:0):(this.indent="",this.newline="",this.offset=0,this.dontprettytextnodes=0),this.spacebeforeslash=null!=(u=e.spacebeforeslash)?u:"",!0===this.spacebeforeslash&&(this.spacebeforeslash=" "),this.newlinedefault=this.newline,this.prettydefault=this.pretty,l=e.writer||{})t.call(l,n)&&(c=l[n],this[n]=c)}return e.prototype.set=function(e){var n,r,i;for(n in e||(e={}),"pretty"in e&&(this.pretty=e.pretty),"allowEmpty"in e&&(this.allowEmpty=e.allowEmpty),this.pretty?(this.indent="indent"in e?e.indent:"  ",this.newline="newline"in e?e.newline:"\n",this.offset="offset"in e?e.offset:0,this.dontprettytextnodes="dontprettytextnodes"in e?e.dontprettytextnodes:0):(this.indent="",this.newline="",this.offset=0,this.dontprettytextnodes=0),this.spacebeforeslash="spacebeforeslash"in e?e.spacebeforeslash:"",!0===this.spacebeforeslash&&(this.spacebeforeslash=" "),this.newlinedefault=this.newline,this.prettydefault=this.pretty,r=e.writer||{})t.call(r,n)&&(i=r[n],this[n]=i);return this},e.prototype.space=function(e){var t;return this.pretty&&(t=(e||0)+this.offset+1)>0?new Array(t).join(this.indent):""},e}()}).call(this)},function(e,t,n){var r=n(148),i=n(149),a=n(150),o=n(151),s=n(152),u=n(153),l=n(154);l.alea=r,l.xor128=i,l.xorwow=a,l.xorshift7=o,l.xor4096=s,l.tychei=u,e.exports=l},function(e){e.exports={atoms:[{id:"Xx",atomicNumber:0,mass:0,exactMass:0,radiusCovalent:0,radiusVDW:0,symbol:"Xx",name:"Dummy",elementColor:[.07,.5,.7]},{id:"H",atomicNumber:1,mass:1.00794,exactMass:1.007825032,ionization:13.5984,electronAffinity:.75420375,electronegativityPauling:2.2,nameOrigin:"Greek 'hydro' and 'gennao' for 'forms water'",radiusCovalent:.37,radiusVDW:1.2,boilingpoint:20.28,meltingpoint:14.01,periodTableBlock:"s",discoveryDate:"1766",period:"1",group:"1",electronicConfiguration:"1s1",family:"Non-Metal",symbol:"H",name:"Hydrogen",elementColor:[1,1,1],discoveryCountry:["uk"],discoverers:["C.","Cavendish"]},{id:"He",atomicNumber:2,mass:4.002602,exactMass:4.002603254,ionization:24.5874,electronAffinity:0,nameOrigin:"The Greek word for the sun was 'helios'",radiusCovalent:.32,radiusVDW:1.4,boilingpoint:4.216,meltingpoint:.95,periodTableBlock:"p",discoveryDate:"1895",period:"1",group:"8",electronicConfiguration:"1s2",family:"Noblegas",symbol:"He",name:"Helium",elementColor:[.85,1,1],discoveryCountry:["se","uk"],discoverers:["P. J. Janssen","J. N. Lockyer"]},{id:"Li",atomicNumber:3,mass:6.941,exactMass:7.01600455,ionization:5.3917,electronAffinity:.618049,electronegativityPauling:.98,nameOrigin:"Greek 'lithos' means 'stone'",radiusCovalent:1.34,radiusVDW:2.2,boilingpoint:1615,meltingpoint:453.7,periodTableBlock:"s",discoveryDate:"1817",period:"2",group:"1",electronicConfiguration:"He 2s1",family:"Alkali_Earth",symbol:"Li",name:"Lithium",elementColor:[.8,.5,1],discoveryCountry:["se"],discoverers:["A.","Arfvedson"]},{id:"Be",atomicNumber:4,mass:9.012182,exactMass:9.0121822,ionization:9.3227,electronAffinity:0,electronegativityPauling:1.57,nameOrigin:"Greek 'beryllos' for 'light-green stone'",radiusCovalent:.9,radiusVDW:1.9,boilingpoint:3243,meltingpoint:1560,periodTableBlock:"s",discoveryDate:"1797",period:"2",group:"2",electronicConfiguration:"He 2s2",family:"Alkaline_Earth",symbol:"Be",name:"Beryllium",elementColor:[.76,1,0],discoveryCountry:["fr"],discoverers:["Nicholas","Louis","Vauquelin"]},{id:"B",atomicNumber:5,mass:10.811,exactMass:11.0093054,ionization:8.298,electronAffinity:.279723,electronegativityPauling:2.04,nameOrigin:"Boron means 'Bor(ax) + (carb)on'. It is found in borax and behaves a lot like carbon",radiusCovalent:.82,radiusVDW:1.8,boilingpoint:4275,meltingpoint:2365,periodTableBlock:"p",discoveryDate:"1808",period:"2",group:"3",electronicConfiguration:"He 2s2 2p1",family:"Metalloids",symbol:"B",name:"Boron",elementColor:[1,.71,.71],discoveryCountry:["uk","fr"],discoverers:["Louis Joseph Gay-Lussac","Louis Jacques Thenard"]},{id:"C",atomicNumber:6,mass:12.0107,exactMass:12,ionization:11.2603,electronAffinity:1.262118,electronegativityPauling:2.55,nameOrigin:"Latin 'carboneum' for carbon",radiusCovalent:.77,radiusVDW:1.7,boilingpoint:5100,meltingpoint:3825,periodTableBlock:"p",discoveryDate:"0",period:"2",group:"4",electronicConfiguration:"He 2s2 2p2",family:"Non-Metal",symbol:"C",name:"Carbon",elementColor:[.5,.5,.5],discoveryCountry:["ancient"]},{id:"N",atomicNumber:7,mass:14.0067,exactMass:14.003074,ionization:14.5341,electronAffinity:-.07,electronegativityPauling:3.04,nameOrigin:"Latin 'nitrogenium' ('forms saltpeter')",radiusCovalent:.75,radiusVDW:1.6,boilingpoint:77.344,meltingpoint:63.15,periodTableBlock:"p",discoveryDate:"1772",period:"2",group:"5",electronicConfiguration:"He 2s2 2p3",family:"Non-Metal",symbol:"N",name:"Nitrogen",elementColor:[.05,.05,1],discoveryCountry:["uk"],discoverers:["D.","Rutherford"]},{id:"O",atomicNumber:8,mass:15.9994,exactMass:15.99491462,ionization:13.6181,electronAffinity:1.461112,electronegativityPauling:3.44,nameOrigin:"Latin 'oxygenium' (forms acids)",radiusCovalent:.73,radiusVDW:1.55,boilingpoint:90.188,meltingpoint:54.8,periodTableBlock:"p",discoveryDate:"1774",period:"2",group:"6",electronicConfiguration:"He 2s2 2p4",family:"Non-Metal",symbol:"O",name:"Oxygen",elementColor:[1,.05,.05],discoveryCountry:["se","uk"],discoverers:["J.","Priestley"]},{id:"F",atomicNumber:9,mass:18.9984032,exactMass:18.99840322,ionization:17.4228,electronAffinity:3.4011887,electronegativityPauling:3.98,nameOrigin:"Latin 'fluere' ('floats')",radiusCovalent:.71,radiusVDW:1.5,boilingpoint:85,meltingpoint:53.55,periodTableBlock:"p",discoveryDate:"1886",period:"2",group:"7",electronicConfiguration:"He 2s2 2p5",family:"Halogen",symbol:"F",name:"Fluorine",elementColor:[.7,1,1],discoveryCountry:["fr"],discoverers:["H.","F.","Moissan"]},{id:"Ne",atomicNumber:10,mass:20.1797,exactMass:19.99244018,ionization:21.5645,electronAffinity:0,nameOrigin:"Greek 'neo'. meaning 'new'",radiusCovalent:.69,radiusVDW:1.54,boilingpoint:27.1,meltingpoint:24.55,periodTableBlock:"p",discoveryDate:"1898",period:"2",group:"8",electronicConfiguration:"He 2s2 2p6",family:"Noblegas",symbol:"Ne",name:"Neon",elementColor:[.7,.89,.96],discoveryCountry:["uk"],discoverers:["W. Ramsay","M.W. Travers"]},{id:"Na",atomicNumber:11,mass:22.98976928,exactMass:22.98976928,ionization:5.1391,electronAffinity:.547926,electronegativityPauling:.93,nameOrigin:"Arabic 'natrun' for 'soda'",radiusCovalent:1.54,radiusVDW:2.4,boilingpoint:1156,meltingpoint:371,periodTableBlock:"s",discoveryDate:"1807",period:"3",group:"1",electronicConfiguration:"Ne 3s1",family:"Alkali_Earth",symbol:"Na",name:"Sodium",elementColor:[.67,.36,.95],discoveryCountry:["uk"],discoverers:["Sir","Humphrey","Davy"]},{id:"Mg",atomicNumber:12,mass:24.305,exactMass:23.9850417,ionization:7.6462,electronAffinity:0,electronegativityPauling:1.31,nameOrigin:"Named after the city of Magnesia",radiusCovalent:1.3,radiusVDW:2.2,boilingpoint:1380,meltingpoint:922,periodTableBlock:"s",discoveryDate:"1808",period:"3",group:"2",electronicConfiguration:"Ne 3s2",family:"Alkaline_Earth",symbol:"Mg",name:"Magnesium",elementColor:[.54,1,0],discoveryCountry:["uk"],discoverers:["H.","B.","Davy"]},{id:"Al",atomicNumber:13,mass:26.9815386,exactMass:26.98153863,ionization:5.9858,electronAffinity:.43283,electronegativityPauling:1.61,nameOrigin:"Latin 'alumen'",radiusCovalent:1.18,radiusVDW:2.1,boilingpoint:2740,meltingpoint:933.5,periodTableBlock:"p",discoveryDate:"1825",period:"3",group:"3",electronicConfiguration:"Ne 3s2 3p1",family:"Other_Metal",symbol:"Al",name:"Aluminium",elementColor:[.75,.65,.65],discoveryCountry:["dk"],discoverers:["H.","Ch.","Oersted"]},{id:"Si",atomicNumber:14,mass:28.0855,exactMass:27.97692653,ionization:8.1517,electronAffinity:1.389521,electronegativityPauling:1.9,nameOrigin:"Latin 'silex'",radiusCovalent:1.11,radiusVDW:2.1,boilingpoint:2630,meltingpoint:1683,periodTableBlock:"p",discoveryDate:"1823",period:"3",group:"4",electronicConfiguration:"Ne 3s2 3p2",family:"Metalloids",symbol:"Si",name:"Silicon",elementColor:[.5,.6,.6],discoveryCountry:["se"],discoverers:["J.","J.","Berzelius"]},{id:"P",atomicNumber:15,mass:30.973762,exactMass:30.97376163,ionization:10.4867,electronAffinity:.7465,electronegativityPauling:2.19,nameOrigin:"Greek 'phosphoros' for 'carries light'",radiusCovalent:1.06,radiusVDW:1.95,boilingpoint:553,meltingpoint:317.3,periodTableBlock:"p",discoveryDate:"1669",period:"3",group:"5",electronicConfiguration:"Ne 3s2 3p3",family:"Non-Metal",symbol:"P",name:"Phosphorus",elementColor:[1,.5,0],discoveryCountry:["de"],discoverers:["H.","Brandt"]},{id:"S",atomicNumber:16,mass:32.065,exactMass:31.972071,ionization:10.36,electronAffinity:2.0771029,electronegativityPauling:2.58,nameOrigin:"In sanskrit 'sweb' means 'to sleep'",radiusCovalent:1.02,radiusVDW:1.8,boilingpoint:717.82,meltingpoint:392.2,periodTableBlock:"p",discoveryDate:"0",period:"3",group:"6",electronicConfiguration:"Ne 3s2 3p4",family:"Non-Metal",symbol:"S",name:"Sulfur",elementColor:[1,1,.19],discoveryCountry:["ancient"]},{id:"Cl",atomicNumber:17,mass:35.453,exactMass:34.96885268,ionization:12.9676,electronAffinity:3.612724,electronegativityPauling:3.16,nameOrigin:"Greek 'chloros' for 'yellow-green'",radiusCovalent:.99,radiusVDW:1.8,boilingpoint:239.18,meltingpoint:172.17,periodTableBlock:"p",discoveryDate:"1774",period:"3",group:"7",electronicConfiguration:"Ne 3s2 3p5",family:"Halogen",symbol:"Cl",name:"Chlorine",elementColor:[.12,.94,.12],discoveryCountry:["se"],discoverers:["C.","W.","Scheele"]},{id:"Ar",atomicNumber:18,mass:39.948,exactMass:39.96238312,ionization:15.7596,electronAffinity:0,nameOrigin:"Greek 'aergon' for 'inactive'",radiusCovalent:.97,radiusVDW:1.88,boilingpoint:87.45,meltingpoint:83.95,periodTableBlock:"p",discoveryDate:"1894",period:"3",group:"8",electronicConfiguration:"Ne 3s2 3p6",family:"Noblegas",symbol:"Ar",name:"Argon",elementColor:[.5,.82,.89],discoveryCountry:["uk"],discoverers:["W. Ramsay","J. Rayleigh"]},{id:"K",atomicNumber:19,mass:39.0983,exactMass:38.96370668,ionization:4.3407,electronAffinity:.501459,electronegativityPauling:.82,nameOrigin:"Arabic 'al qaliy' for potash",radiusCovalent:1.96,radiusVDW:2.8,boilingpoint:1033,meltingpoint:336.8,periodTableBlock:"s",discoveryDate:"1807",period:"4",group:"1",electronicConfiguration:"Ar 4s1",family:"Alkali_Earth",symbol:"K",name:"Potassium",elementColor:[.56,.25,.83],discoveryCountry:["uk"],discoverers:["H.","B.","Davy"]},{id:"Ca",atomicNumber:20,mass:40.078,exactMass:39.96259098,ionization:6.1132,electronAffinity:.02455,electronegativityPauling:1,nameOrigin:"Latin 'calx' for 'lime'",radiusCovalent:1.74,radiusVDW:2.4,boilingpoint:1757,meltingpoint:1112,periodTableBlock:"s",discoveryDate:"1808",period:"4",group:"2",electronicConfiguration:"Ar 4s2",family:"Alkaline_Earth",symbol:"Ca",name:"Calcium",elementColor:[.24,1,0],discoveryCountry:["uk"],discoverers:["H.","B.","Davy"]},{id:"Sc",atomicNumber:21,mass:44.955912,exactMass:44.9559119,ionization:6.5615,electronAffinity:.188,electronegativityPauling:1.36,nameOrigin:"Named because it was found in Scandinavia",radiusCovalent:1.44,radiusVDW:2.3,boilingpoint:3109,meltingpoint:1814,periodTableBlock:"d",discoveryDate:"1879",period:"4",group:"3",electronicConfiguration:"Ar 3d1 4s2",family:"Transition",symbol:"Sc",name:"Scandium",elementColor:[.9,.9,.9],discoveryCountry:["se"],discoverers:["L.","Nilson"]},{id:"Ti",atomicNumber:22,mass:47.867,exactMass:47.9479463,ionization:6.8281,electronAffinity:.084,electronegativityPauling:1.54,nameOrigin:"The Titans were giants in Greek mythology",radiusCovalent:1.36,radiusVDW:2.15,boilingpoint:3560,meltingpoint:1935,periodTableBlock:"d",discoveryDate:"1791",period:"4",group:"4",electronicConfiguration:"Ar 3d2 4s2",family:"Transition",symbol:"Ti",name:"Titanium",elementColor:[.75,.76,.78],discoveryCountry:["uk"],discoverers:["W.","Gregor"]},{id:"V",atomicNumber:23,mass:50.9415,exactMass:50.9439595,ionization:6.7462,electronAffinity:.525,electronegativityPauling:1.63,nameOrigin:"'Vanadis' is another name for the Nordic goddess Freyja",radiusCovalent:1.25,radiusVDW:2.05,boilingpoint:3650,meltingpoint:2163,periodTableBlock:"d",discoveryDate:"1830",period:"4",group:"5",electronicConfiguration:"Ar 3d3 4s2",family:"Transition",symbol:"V",name:"Vanadium",elementColor:[.65,.65,.67],discoveryCountry:["se"],discoverers:["N.","Sefström"]},{id:"Cr",atomicNumber:24,mass:51.9961,exactMass:51.9405075,ionization:6.7665,electronAffinity:.67584,electronegativityPauling:1.66,nameOrigin:"Greek 'chroma' means 'color'",radiusCovalent:1.27,radiusVDW:2.05,boilingpoint:2945,meltingpoint:2130,periodTableBlock:"d",discoveryDate:"1797",period:"4",group:"6",electronicConfiguration:"Ar 3d5 4s1",family:"Transition",symbol:"Cr",name:"Chromium",elementColor:[.54,.6,.78],discoveryCountry:["fr"],discoverers:["Nicholas","Louis","Vauquelin"]},{id:"Mn",atomicNumber:25,mass:54.938045,exactMass:54.9380451,ionization:7.434,electronAffinity:0,electronegativityPauling:1.55,nameOrigin:"It was discovered near a town named Magnesia in black earth. Thus, it was named 'magnesia nigra', or for short, Manganese.",radiusCovalent:1.39,radiusVDW:2.05,boilingpoint:2235,meltingpoint:1518,periodTableBlock:"d",discoveryDate:"1774",period:"4",group:"7",electronicConfiguration:"Ar 3d5 4s2",family:"Transition",symbol:"Mn",name:"Manganese",elementColor:[.61,.48,.78],discoveryCountry:["se"],discoverers:["C.","W.","Scheele"]},{id:"Fe",atomicNumber:26,mass:55.845,exactMass:55.9349375,ionization:7.9024,electronAffinity:.151,electronegativityPauling:1.83,nameOrigin:"Latin 'ferrum'",radiusCovalent:1.25,radiusVDW:2.05,boilingpoint:3023,meltingpoint:1808,periodTableBlock:"d",discoveryDate:"0",period:"4",group:"8",electronicConfiguration:"Ar 3d6 4s2",family:"Transition",symbol:"Fe",name:"Iron",elementColor:[.5,.48,.78],discoveryCountry:["ancient"]},{id:"Co",atomicNumber:27,mass:58.933195,exactMass:58.933195,ionization:7.881,electronAffinity:.6633,electronegativityPauling:1.88,nameOrigin:"Named after the German word 'Kobold' for 'goblin'",radiusCovalent:1.26,radiusVDW:2,boilingpoint:3143,meltingpoint:1768,periodTableBlock:"d",discoveryDate:"1737",period:"4",group:"8",electronicConfiguration:"Ar 3d7 4s2",family:"Transition",symbol:"Co",name:"Cobalt",elementColor:[.44,.48,.78],discoveryCountry:["se"],discoverers:["G.","Brandt"]},{id:"Ni",atomicNumber:28,mass:58.6934,exactMass:57.9353429,ionization:7.6398,electronAffinity:1.15716,electronegativityPauling:1.91,nameOrigin:"'Nickel' was the name of a mountain goblin",radiusCovalent:1.21,radiusVDW:2,boilingpoint:3005,meltingpoint:1726,periodTableBlock:"d",discoveryDate:"1751",period:"4",group:"8",electronicConfiguration:"Ar 3d8 4s2",family:"Transition",symbol:"Ni",name:"Nickel",elementColor:[.36,.48,.76],discoveryCountry:["se"],discoverers:["A.","F.","Cronstedt"]},{id:"Cu",atomicNumber:29,mass:63.546,exactMass:62.9295975,ionization:7.7264,electronAffinity:1.23578,electronegativityPauling:1.9,nameOrigin:"Greek 'cuprum' for Cypres",radiusCovalent:1.38,radiusVDW:2,boilingpoint:2840,meltingpoint:1356.6,periodTableBlock:"d",discoveryDate:"0",period:"4",group:"1",electronicConfiguration:"Ar 3d10 4s1",family:"Transition",symbol:"Cu",name:"Copper",elementColor:[1,.48,.38],discoveryCountry:["ancient"]},{id:"Zn",atomicNumber:30,mass:65.38,exactMass:63.9291422,ionization:9.3942,electronAffinity:0,electronegativityPauling:1.65,nameOrigin:"German 'zinking' for 'rough', because zinc ore is very rough",radiusCovalent:1.31,radiusVDW:2.1,boilingpoint:1180,meltingpoint:692.73,periodTableBlock:"d",discoveryDate:"1746",period:"4",group:"2",electronicConfiguration:"Ar 3d10 4s2",family:"Transition",symbol:"Zn",name:"Zinc",elementColor:[.49,.5,.69],discoveryCountry:["de"],discoverers:["Andreas","Marggraf"]},{id:"Ga",atomicNumber:31,mass:69.723,exactMass:68.9255736,ionization:5.9993,electronAffinity:.41,electronegativityPauling:1.81,nameOrigin:"'Gallia' is an old name for France",radiusCovalent:1.26,radiusVDW:2.1,boilingpoint:2478,meltingpoint:302.92,periodTableBlock:"p",discoveryDate:"1875",period:"4",group:"3",electronicConfiguration:"Ar 3d10 4s2 4p1",family:"Other_Metal",symbol:"Ga",name:"Gallium",elementColor:[.76,.56,.56],discoveryCountry:["fr"],discoverers:["P.","E.","Lecoq","de","Boisbaudran"]},{id:"Ge",atomicNumber:32,mass:72.64,exactMass:73.9211778,ionization:7.8994,electronAffinity:1.232712,electronegativityPauling:2.01,nameOrigin:"Latin 'germania' is an old name for Germany",radiusCovalent:1.22,radiusVDW:2.1,boilingpoint:3107,meltingpoint:1211.5,periodTableBlock:"p",discoveryDate:"1886",period:"4",group:"4",electronicConfiguration:"Ar 3d10 4s2 4p2",family:"Metalloids",symbol:"Ge",name:"Germanium",elementColor:[.4,.56,.56],discoveryCountry:["de"],discoverers:["C.","A.","Winkler"]},{id:"As",atomicNumber:33,mass:74.9216,exactMass:74.9215965,ionization:9.7886,electronAffinity:.814,electronegativityPauling:2.18,nameOrigin:"Greek 'arsenikos' for 'male' or 'bold'",radiusCovalent:1.19,radiusVDW:2.05,boilingpoint:876,meltingpoint:1090,periodTableBlock:"p",discoveryDate:"0",period:"4",group:"5",electronicConfiguration:"Ar 3d10 4s2 4p3",family:"Metalloids",symbol:"As",name:"Arsenic",elementColor:[.74,.5,.89],discoveryCountry:["ancient"]},{id:"Se",atomicNumber:34,mass:78.96,exactMass:79.9165213,ionization:9.7524,electronAffinity:2.02067,electronegativityPauling:2.55,nameOrigin:"Greek 'selena' for 'moon'",radiusCovalent:1.16,radiusVDW:1.9,boilingpoint:958,meltingpoint:494,periodTableBlock:"p",discoveryDate:"1817",period:"4",group:"6",electronicConfiguration:"Ar 3d10 4s2 4p4",family:"Non-Metal",symbol:"Se",name:"Selenium",elementColor:[1,.63,0],discoveryCountry:["se"],discoverers:["J.","J.","Berzelius"]},{id:"Br",atomicNumber:35,mass:79.904,exactMass:78.9183371,ionization:11.8138,electronAffinity:3.363588,electronegativityPauling:2.96,nameOrigin:"Greek 'bromos' for 'smells badly'",radiusCovalent:1.14,radiusVDW:1.9,boilingpoint:331.85,meltingpoint:265.95,periodTableBlock:"p",discoveryDate:"1826",period:"4",group:"7",electronicConfiguration:"Ar 3d10 4s2 4p5",family:"Halogen",symbol:"Br",name:"Bromine",elementColor:[.65,.16,.16],discoveryCountry:["fr"],discoverers:["A.","J.","Balard"]},{id:"Kr",atomicNumber:36,mass:83.798,exactMass:83.911507,ionization:13.9996,electronAffinity:0,electronegativityPauling:3,nameOrigin:"Greek 'kryptos' for 'hidden'",radiusCovalent:1.1,radiusVDW:2.02,boilingpoint:120.85,meltingpoint:116,periodTableBlock:"p",discoveryDate:"1898",period:"4",group:"8",electronicConfiguration:"Ar 3d10 4s2 4p6",family:"Noblegas",symbol:"Kr",name:"Krypton",elementColor:[.36,.72,.82],discoveryCountry:["uk"],discoverers:["W. Ramsay","M. W. Travers"]},{id:"Rb",atomicNumber:37,mass:85.4678,exactMass:84.91178974,ionization:4.1771,electronAffinity:.485916,electronegativityPauling:.82,nameOrigin:"Latin 'rubidus' for 'dark red'",radiusCovalent:2.11,radiusVDW:2.9,boilingpoint:961,meltingpoint:312.63,periodTableBlock:"s",discoveryDate:"1861",period:"5",group:"1",electronicConfiguration:"Kr 5s1",family:"Alkali_Earth",symbol:"Rb",name:"Rubidium",elementColor:[.44,.18,.69],discoveryCountry:["de"],discoverers:["Robert W. Bunsen","Gustav R. Kirchhoff"]},{id:"Sr",atomicNumber:38,mass:87.62,exactMass:87.9056121,ionization:5.6949,electronAffinity:.05206,electronegativityPauling:.95,nameOrigin:"Named after the mineral Strontianit",radiusCovalent:1.92,radiusVDW:2.55,boilingpoint:1655,meltingpoint:1042,periodTableBlock:"s",discoveryDate:"1790",period:"5",group:"2",electronicConfiguration:"Kr 5s2",family:"Alkaline_Earth",symbol:"Sr",name:"Strontium",elementColor:[0,1,0],discoveryCountry:["uk"],discoverers:["H.","B.","Davy"]},{id:"Y",atomicNumber:39,mass:88.90585,exactMass:88.9058483,ionization:6.2173,electronAffinity:.307,electronegativityPauling:1.22,nameOrigin:"Named after the small town of Ytterby near Stockholm in Sweden. Terbium. Ytterbium and Gadolinium are also named after this town.",radiusCovalent:1.62,radiusVDW:2.4,boilingpoint:3611,meltingpoint:1795,periodTableBlock:"d",discoveryDate:"1794",period:"5",group:"3",electronicConfiguration:"Kr 4d1 5s2",family:"Transition",symbol:"Y",name:"Yttrium",elementColor:[.58,1,1],discoveryCountry:["fi"],discoverers:["Johann","Gadolin"]},{id:"Zr",atomicNumber:40,mass:91.224,exactMass:89.9047044,ionization:6.6339,electronAffinity:.426,electronegativityPauling:1.33,nameOrigin:"Named after the mineral zircon",radiusCovalent:1.48,radiusVDW:2.3,boilingpoint:4682,meltingpoint:2128,periodTableBlock:"d",discoveryDate:"1789",period:"5",group:"4",electronicConfiguration:"Kr 4d2 5s2",family:"Transition",symbol:"Zr",name:"Zirconium",elementColor:[.58,.88,.88],discoveryCountry:["de"],discoverers:["Martin","Heinrich","Klaproth"]},{id:"Nb",atomicNumber:41,mass:92.90638,exactMass:92.9063781,ionization:6.7589,electronAffinity:.893,electronegativityPauling:1.6,nameOrigin:"Named after Niobe, the daughter of the Greek god Tantalus.",radiusCovalent:1.37,radiusVDW:2.15,boilingpoint:5015,meltingpoint:2742,periodTableBlock:"d",discoveryDate:"1801",period:"5",group:"5",electronicConfiguration:"Kr 4d4",family:"Transition",symbol:"Nb",name:"Niobium",elementColor:[.45,.76,.79],discoveryCountry:["uk"],discoverers:["Ch.","Hatchett"]},{id:"Mo",atomicNumber:42,mass:95.96,exactMass:97.9054082,ionization:7.0924,electronAffinity:.7472,electronegativityPauling:2.16,nameOrigin:"This name has Greek roots. It means 'like Platinum' - it was difficult to distinguish Molybdenum from Platinum.",radiusCovalent:1.45,radiusVDW:2.1,boilingpoint:4912,meltingpoint:2896,periodTableBlock:"d",discoveryDate:"1778",period:"5",group:"6",electronicConfiguration:"Kr 4d5 5s1",family:"Transition",symbol:"Mo",name:"Molybdenum",elementColor:[.33,.71,.71],discoveryCountry:["se"],discoverers:["C.","W.","Scheele"]},{id:"Tc",atomicNumber:43,mass:98,exactMass:97.907216,ionization:7.28,electronAffinity:.55,electronegativityPauling:1.9,nameOrigin:"Greek 'technetos' for artificial",radiusCovalent:1.56,radiusVDW:2.05,boilingpoint:4538,meltingpoint:2477,periodTableBlock:"d",discoveryDate:"1937",period:"5",group:"7",electronicConfiguration:"Kr 4d6 5s1",family:"Transition",symbol:"Tc",name:"Technetium",elementColor:[.23,.62,.62],discoveryCountry:["it"],discoverers:["C. Perrier","E. G. Segre"]},{id:"Ru",atomicNumber:44,mass:101.07,exactMass:101.9043493,ionization:7.3605,electronAffinity:1.04638,electronegativityPauling:2.2,nameOrigin:"Ruthenia is the old name of Russia",radiusCovalent:1.26,radiusVDW:2.05,boilingpoint:4425,meltingpoint:2610,periodTableBlock:"d",discoveryDate:"1844",period:"5",group:"8",electronicConfiguration:"Kr 4d7 5s1",family:"Transition",symbol:"Ru",name:"Ruthenium",elementColor:[.14,.56,.56],discoveryCountry:["ru"],discoverers:["K.","Klaus"]},{id:"Rh",atomicNumber:45,mass:102.9055,exactMass:102.905504,ionization:7.4589,electronAffinity:1.14289,electronegativityPauling:2.28,nameOrigin:"Greek 'rhodeos' means 'red like a rose'",radiusCovalent:1.35,radiusVDW:2,boilingpoint:3970,meltingpoint:2236,periodTableBlock:"d",discoveryDate:"1803",period:"5",group:"8",electronicConfiguration:"Kr 4d8 5s1",family:"Transition",symbol:"Rh",name:"Rhodium",elementColor:[.04,.49,.55],discoveryCountry:["uk"],discoverers:["W.","Wollaston"]},{id:"Pd",atomicNumber:46,mass:106.42,exactMass:105.903486,ionization:8.3369,electronAffinity:.56214,electronegativityPauling:2.2,nameOrigin:"Named after the asteroid Pallas",radiusCovalent:1.31,radiusVDW:2.05,boilingpoint:3240,meltingpoint:1825,periodTableBlock:"d",discoveryDate:"1803",period:"5",group:"8",electronicConfiguration:"Kr 4d10",family:"Transition",symbol:"Pd",name:"Palladium",elementColor:[0,.41,.52],discoveryCountry:["uk"]},{id:"Ag",atomicNumber:47,mass:107.8682,exactMass:106.905097,ionization:7.5762,electronAffinity:1.30447,electronegativityPauling:1.93,nameOrigin:"Latin 'argentum' for silver",radiusCovalent:1.53,radiusVDW:2.1,boilingpoint:2436,meltingpoint:1235.1,periodTableBlock:"d",discoveryDate:"0",period:"5",group:"1",electronicConfiguration:"Kr 4d10 5s1",family:"Transition",symbol:"Ag",name:"Silver",elementColor:[.88,.88,1],discoveryCountry:["ancient"]},{id:"Cd",atomicNumber:48,mass:112.411,exactMass:113.9033585,ionization:8.9938,electronAffinity:0,electronegativityPauling:1.69,nameOrigin:"Greek 'kadmia' ('Galmei' = Zinc carbonate)",radiusCovalent:1.48,radiusVDW:2.2,boilingpoint:1040,meltingpoint:594.26,periodTableBlock:"d",discoveryDate:"1817",period:"5",group:"2",electronicConfiguration:"Kr 4d10 5s2",family:"Transition",symbol:"Cd",name:"Cadmium",elementColor:[1,.85,.56],discoveryCountry:["de"],discoverers:["F.","Stromeyer"]},{id:"In",atomicNumber:49,mass:114.818,exactMass:114.903878,ionization:5.7864,electronAffinity:.404,electronegativityPauling:1.78,nameOrigin:"Named after 'Indigo' because of its blue spectrum",radiusCovalent:1.44,radiusVDW:2.2,boilingpoint:2350,meltingpoint:429.78,periodTableBlock:"p",discoveryDate:"1863",period:"5",group:"3",electronicConfiguration:"Kr 4d10 5s2 5p1",family:"Other_Metal",symbol:"In",name:"Indium",elementColor:[.65,.46,.45],discoveryCountry:["de"],discoverers:["F. Reich","H.T. Richter"]},{id:"Sn",atomicNumber:50,mass:118.71,exactMass:119.9021947,ionization:7.3439,electronAffinity:1.112066,electronegativityPauling:1.96,nameOrigin:"Latin 'stannum' for tin",radiusCovalent:1.41,radiusVDW:2.25,boilingpoint:2876,meltingpoint:505.12,periodTableBlock:"p",discoveryDate:"0",period:"5",group:"4",electronicConfiguration:"Kr 4d10 5s2 5p2",family:"Other_Metal",symbol:"Sn",name:"Tin",elementColor:[.4,.5,.5],discoveryCountry:["ancient"]},{id:"Sb",atomicNumber:51,mass:121.76,exactMass:120.9038157,ionization:8.6084,electronAffinity:1.047401,electronegativityPauling:2.05,nameOrigin:"Arabic 'anthos ammonos' for 'blossom of the god Ammon'",radiusCovalent:1.38,radiusVDW:2.2,boilingpoint:1860,meltingpoint:903.91,periodTableBlock:"p",discoveryDate:"0",period:"5",group:"5",electronicConfiguration:"Kr 4d10 5s2 5p3",family:"Metalloids",symbol:"Sb",name:"Antimony",elementColor:[.62,.39,.71],discoveryCountry:["ancient"]},{id:"Te",atomicNumber:52,mass:127.6,exactMass:129.9062244,ionization:9.0096,electronAffinity:1.970875,electronegativityPauling:2.1,nameOrigin:"Latin 'tellus' or 'telluris' for 'Planet Earth'",radiusCovalent:1.35,radiusVDW:2.1,boilingpoint:1261,meltingpoint:722.72,periodTableBlock:"p",discoveryDate:"1782",period:"5",group:"6",electronicConfiguration:"Kr 4d10 5s2 5p4",family:"Metalloids",symbol:"Te",name:"Tellurium",elementColor:[.83,.48,0],discoveryCountry:["de"],discoverers:["Franz","Joseph","Muller","von","Reichstein"]},{id:"I",atomicNumber:53,mass:126.90447,exactMass:126.904473,ionization:10.4513,electronAffinity:3.059038,electronegativityPauling:2.66,nameOrigin:"Greek 'ioeides' for 'violet'.",radiusCovalent:1.33,radiusVDW:2.1,boilingpoint:457.5,meltingpoint:386.7,periodTableBlock:"p",discoveryDate:"1811",period:"5",group:"7",electronicConfiguration:"Kr 4d10 5s2 5p5",family:"Halogen",symbol:"I",name:"Iodine",elementColor:[.58,0,.58],discoveryCountry:["fr"],discoverers:["Bernard","Courtois"]},{id:"Xe",atomicNumber:54,mass:131.293,exactMass:131.9041535,ionization:12.1298,electronAffinity:0,electronegativityPauling:2.6,nameOrigin:"Greek 'xenos' for 'foreigner'",radiusCovalent:1.3,radiusVDW:2.16,boilingpoint:165.1,meltingpoint:161.39,periodTableBlock:"p",discoveryDate:"1898",period:"5",group:"8",electronicConfiguration:"Kr 4d10 5s2 5p6",family:"Noblegas",symbol:"Xe",name:"Xenon",elementColor:[.26,.62,.69],discoveryCountry:["uk"],discoverers:["W. Ramsay","M. W. Travers"]},{id:"Cs",atomicNumber:55,mass:132.9054519,exactMass:132.9054519,ionization:3.8939,electronAffinity:.471626,electronegativityPauling:.79,nameOrigin:"Latin 'caesius' for 'heaven blue'.",radiusCovalent:2.25,radiusVDW:3,boilingpoint:944,meltingpoint:301.54,periodTableBlock:"s",discoveryDate:"1860",period:"6",group:"1",electronicConfiguration:"Xe 6s1",family:"Alkali_Earth",symbol:"Cs",name:"Caesium",elementColor:[.34,.09,.56],discoveryCountry:["de"],discoverers:["Robert Wilhelm Bunsen","Gustav Robert Kirchhoff"]},{id:"Ba",atomicNumber:56,mass:137.327,exactMass:137.9052472,ionization:5.2117,electronAffinity:.14462,electronegativityPauling:.89,nameOrigin:"Greek 'barys' for 'heavy'",radiusCovalent:1.98,radiusVDW:2.7,boilingpoint:2078,meltingpoint:1002,periodTableBlock:"s",discoveryDate:"1808",period:"6",group:"2",electronicConfiguration:"Xe 6s2",family:"Alkaline_Earth",symbol:"Ba",name:"Barium",elementColor:[0,.79,0],discoveryCountry:["uk"],discoverers:["Humphry","Bartholomew","Davy"]},{id:"La",atomicNumber:57,mass:138.90547,exactMass:138.9063533,ionization:5.5769,electronAffinity:.47,electronegativityPauling:1.1,nameOrigin:"Greek 'lanthanein' for 'hidden'. The Lanthanoids are also called the 'rare earth' elements.",radiusCovalent:1.69,radiusVDW:2.5,boilingpoint:3737,meltingpoint:1191,periodTableBlock:"f",discoveryDate:"1839",period:"6",group:"3",electronicConfiguration:"Xe 5d1 6s2",family:"Rare_Earth",symbol:"La",name:"Lanthanum",elementColor:[.44,.83,1],discoveryCountry:["se"],discoverers:["K.","G.","Mosander"]},{id:"Ce",atomicNumber:58,mass:140.116,exactMass:139.9054387,ionization:5.5387,electronAffinity:.5,electronegativityPauling:1.12,nameOrigin:"Named after the planetoid Ceres",radiusVDW:2.48,boilingpoint:3715,meltingpoint:1071,periodTableBlock:"f",discoveryDate:"1803",period:"6",group:"4",electronicConfiguration:"Xe 4f1 5d1 6s2",family:"Rare_Earth",symbol:"Ce",name:"Cerium",elementColor:[1,1,.78],discoverers:["Jöns Jacob Berzelius","W. Hisinger","M. Klaproth"]},{id:"Pr",atomicNumber:59,mass:140.90765,exactMass:140.9076528,ionization:5.473,electronAffinity:.5,electronegativityPauling:1.13,nameOrigin:"Greek 'prasinos didymos' for 'green twin'",radiusVDW:2.47,boilingpoint:3785,meltingpoint:1204,periodTableBlock:"f",discoveryDate:"1885",period:"6",group:"5",electronicConfiguration:"Xe 4f3 6s2",family:"Rare_Earth",symbol:"Pr",name:"Praseodymium",elementColor:[.85,1,.78],discoverers:["Carl","F.","Auer","von","Welsbach"]},{id:"Nd",atomicNumber:60,mass:144.242,exactMass:141.9077233,ionization:5.525,electronAffinity:.5,electronegativityPauling:1.14,nameOrigin:"Greek 'neos didymos' for 'new twin'",radiusVDW:2.45,boilingpoint:3347,meltingpoint:1294,periodTableBlock:"f",discoveryDate:"1885",period:"6",group:"6",electronicConfiguration:"Xe 4f4 6s2",family:"Rare_Earth",symbol:"Nd",name:"Neodymium",elementColor:[.78,1,.78],discoverers:["Carl","F.","Auer","von","Welsbach"]},{id:"Pm",atomicNumber:61,mass:145,exactMass:144.912749,ionization:5.582,electronAffinity:.5,nameOrigin:"Named after the Greek Prometheus. Prometheus stole the fire from the gods and gave it to mankind.",radiusVDW:2.43,boilingpoint:3273,meltingpoint:1315,periodTableBlock:"f",discoveryDate:"1945",period:"6",group:"7",electronicConfiguration:"Xe 4f5 6s2",family:"Rare_Earth",symbol:"Pm",name:"Promethium",elementColor:[.64,1,.78],discoverers:["J. A. Marinsky","C. D. Coryell","L. E. Glendenin"]},{id:"Sm",atomicNumber:62,mass:150.36,exactMass:151.9197324,ionization:5.6437,electronAffinity:.5,electronegativityPauling:1.17,nameOrigin:"Named after the mineral Samarskit",radiusVDW:2.42,boilingpoint:2067,meltingpoint:1347,periodTableBlock:"f",discoveryDate:"1879",period:"6",group:"8",electronicConfiguration:"Xe 4f6 6s2",family:"Rare_Earth",symbol:"Sm",name:"Samarium",elementColor:[.56,1,.78],discoverers:["P.","Lecoq","de","Boisbaudran"]},{id:"Eu",atomicNumber:63,mass:151.964,exactMass:152.9212303,ionization:5.6704,electronAffinity:.5,nameOrigin:"Named after Europe",radiusVDW:2.4,boilingpoint:1800,meltingpoint:1095,periodTableBlock:"f",discoveryDate:"1901",period:"6",group:"8",electronicConfiguration:"Xe 4f7 6s2",family:"Rare_Earth",symbol:"Eu",name:"Europium",elementColor:[.38,1,.78],discoverers:["E.","A.","Demarcay"]},{id:"Gd",atomicNumber:64,mass:157.25,exactMass:157.9241039,ionization:6.1498,electronAffinity:.5,electronegativityPauling:1.2,nameOrigin:"Named after the Finnish chemist Johan Gadolin",radiusVDW:2.38,boilingpoint:3545,meltingpoint:1585,periodTableBlock:"f",discoveryDate:"1880",period:"6",group:"8",electronicConfiguration:"Xe 4f7 5d1 6s2",family:"Rare_Earth",symbol:"Gd",name:"Gadolinium",elementColor:[.27,1,.78],discoverers:["Jean","de","Marignac"]},{id:"Tb",atomicNumber:65,mass:158.92535,exactMass:158.9253468,ionization:5.8638,electronAffinity:.5,nameOrigin:"Named after the Swedish town of Ytterby",radiusVDW:2.37,boilingpoint:3500,meltingpoint:1629,periodTableBlock:"f",discoveryDate:"1843",period:"6",group:"1",electronicConfiguration:"Xe 4f9 6s2",family:"Rare_Earth",symbol:"Tb",name:"Terbium",elementColor:[.19,1,.78],discoverers:["K.","G.","Mosander"]},{id:"Dy",atomicNumber:66,mass:162.5,exactMass:163.9291748,ionization:5.9389,electronAffinity:.5,electronegativityPauling:1.22,nameOrigin:"Greek 'dysprositor' for 'difficult to reach'",radiusVDW:2.35,boilingpoint:2840,meltingpoint:1685,periodTableBlock:"f",discoveryDate:"1886",period:"6",group:"2",electronicConfiguration:"Xe 4f10 6s2",family:"Rare_Earth",symbol:"Dy",name:"Dysprosium",elementColor:[.12,1,.78],discoverers:["F.","E.","Lecoq","de","Boisbaudran"]},{id:"Ho",atomicNumber:67,mass:164.93032,exactMass:164.9303221,ionization:6.0215,electronAffinity:.5,electronegativityPauling:1.23,nameOrigin:"Latin 'holmia' for the old name of Stockholm",radiusVDW:2.33,boilingpoint:2968,meltingpoint:1747,periodTableBlock:"f",discoveryDate:"1878",period:"6",group:"3",electronicConfiguration:"Xe 4f11 6s2",family:"Rare_Earth",symbol:"Ho",name:"Holmium",elementColor:[0,1,.61],discoverers:["J. L. Soret","P.T. Cleve"]},{id:"Er",atomicNumber:68,mass:167.259,exactMass:165.9302931,ionization:6.1077,electronAffinity:.5,electronegativityPauling:1.24,nameOrigin:"Named ofter the Swedish town of Ytterby. Terbium and Ytterbium are also named after this town.",radiusVDW:2.32,boilingpoint:3140,meltingpoint:1802,periodTableBlock:"f",discoveryDate:"1843",period:"6",group:"4",electronicConfiguration:"Xe 4f12 6s2",family:"Rare_Earth",symbol:"Er",name:"Erbium",elementColor:[0,.9,.46],discoverers:["K.","G.","Mosander"]},{id:"Tm",atomicNumber:69,mass:168.93421,exactMass:168.9342133,ionization:6.1843,electronAffinity:.5,electronegativityPauling:1.25,nameOrigin:"Named after the old name of Scandinavia, 'Thule'.",radiusVDW:2.3,boilingpoint:2223,meltingpoint:1818,periodTableBlock:"f",discoveryDate:"1879",period:"6",group:"5",electronicConfiguration:"Xe 4f13 6s2",family:"Rare_Earth",symbol:"Tm",name:"Thulium",elementColor:[0,.83,.32],discoverers:["P.","T.","Cleve"]},{id:"Yb",atomicNumber:70,mass:173.054,exactMass:173.9388621,ionization:6.2542,electronAffinity:.5,nameOrigin:"Like Terbium and Gadolinium, this is named after the Swedish town of Ytterby.",radiusVDW:2.28,boilingpoint:1469,meltingpoint:1092,periodTableBlock:"f",discoveryDate:"1878",period:"6",group:"6",electronicConfiguration:"Xe 4f14 6s2",family:"Rare_Earth",symbol:"Yb",name:"Ytterbium",elementColor:[0,.75,.22],discoverers:["J.","Ch.","Marignac"]},{id:"Lu",atomicNumber:71,mass:174.9668,exactMass:174.9407718,ionization:5.4259,electronAffinity:.5,electronegativityPauling:1.27,nameOrigin:"Named after the Roman name 'Lutetia' for Paris",radiusCovalent:1.6,radiusVDW:2.27,boilingpoint:3668,meltingpoint:1936,periodTableBlock:"f",discoveryDate:"1907",period:"6",group:"7",electronicConfiguration:"Xe 4f14 5d1 6s2",family:"Rare_Earth",symbol:"Lu",name:"Lutetium",elementColor:[0,.67,.14],discoverers:["Carl F. Auer von Welsbach","G. Urbain"]},{id:"Hf",atomicNumber:72,mass:178.49,exactMass:179.94655,ionization:6.8251,electronAffinity:0,electronegativityPauling:1.3,nameOrigin:"'Hafnia' is the old name of Kopenhagen (Denmark)",radiusCovalent:1.5,radiusVDW:2.25,boilingpoint:4875,meltingpoint:2504,periodTableBlock:"d",discoveryDate:"1923",period:"6",group:"4",electronicConfiguration:"Xe 4f14 5d2 6s2",family:"Transition",symbol:"Hf",name:"Hafnium",elementColor:[.3,.76,1],discoveryCountry:["dk"],discoverers:["D. Coster","G. Hevesy"]},{id:"Ta",atomicNumber:73,mass:180.94788,exactMass:180.9479958,ionization:7.5496,electronAffinity:.322,electronegativityPauling:1.5,nameOrigin:"Named after the Greek myth of Tantalos",radiusCovalent:1.38,radiusVDW:2.2,boilingpoint:5730,meltingpoint:3293,periodTableBlock:"d",discoveryDate:"1802",period:"6",group:"5",electronicConfiguration:"Xe 4f14 5d3 6s2",family:"Transition",symbol:"Ta",name:"Tantalum",elementColor:[.3,.65,1],discoveryCountry:["se"],discoverers:["A.","Ekeberg"]},{id:"W",atomicNumber:74,mass:183.84,exactMass:183.9509312,ionization:7.864,electronAffinity:.815,electronegativityPauling:2.36,nameOrigin:"'tung sten' means 'heavy stone' in Swedish. The old name (and thus the symbol 'W') was Wolfram, named after a mineral.",radiusCovalent:1.46,radiusVDW:2.1,boilingpoint:5825,meltingpoint:3695,periodTableBlock:"d",discoveryDate:"1783",period:"6",group:"6",electronicConfiguration:"Xe 4f14 5d4 6s2",family:"Transition",symbol:"W",name:"Tungsten",elementColor:[.13,.58,.84],discoveryCountry:["es"],discoverers:["C.","W.","Scheele"]},{id:"Re",atomicNumber:75,mass:186.207,exactMass:186.9557531,ionization:7.8335,electronAffinity:.15,electronegativityPauling:1.9,nameOrigin:"Named after the German river Rhine (latin 'Rhenium').",radiusCovalent:1.59,radiusVDW:2.05,boilingpoint:5870,meltingpoint:3455,periodTableBlock:"d",discoveryDate:"1925",period:"6",group:"7",electronicConfiguration:"Xe 4f14 5d5 6s2",family:"Transition",symbol:"Re",name:"Rhenium",elementColor:[.15,.49,.67],discoveryCountry:["de"],discoverers:["Walter Noddack","Ida Tacke-Noddack","Otto Berg"]},{id:"Os",atomicNumber:76,mass:190.23,exactMass:191.9614807,ionization:8.4382,electronAffinity:1.0778,electronegativityPauling:2.2,nameOrigin:"Greek for 'smell'. Its oxides smell strongly like radishes.",radiusCovalent:1.28,radiusVDW:2,boilingpoint:5300,meltingpoint:3300,periodTableBlock:"d",discoveryDate:"1804",period:"6",group:"8",electronicConfiguration:"Xe 4f14 5d6 6s2",family:"Transition",symbol:"Os",name:"Osmium",elementColor:[.15,.4,.59],discoveryCountry:["uk"],discoverers:["S.","Tennant"]},{id:"Ir",atomicNumber:77,mass:192.217,exactMass:192.9629264,ionization:8.967,electronAffinity:1.56436,electronegativityPauling:2.2,nameOrigin:"Greek 'iris' for 'rainbow'",radiusCovalent:1.37,radiusVDW:2,boilingpoint:4700,meltingpoint:2720,periodTableBlock:"d",discoveryDate:"1804",period:"6",group:"8",electronicConfiguration:"Xe 4f14 5d7 6s2",family:"Transition",symbol:"Ir",name:"Iridium",elementColor:[.09,.33,.53],discoveryCountry:["uk"],discoverers:["S.","Tennant"]},{id:"Pt",atomicNumber:78,mass:195.084,exactMass:194.9647911,ionization:8.9588,electronAffinity:2.1251,electronegativityPauling:2.28,nameOrigin:"Spanish 'platina' means 'small silver'",radiusCovalent:1.28,radiusVDW:2.05,boilingpoint:4100,meltingpoint:2042.1,periodTableBlock:"d",discoveryDate:"1735",period:"6",group:"8",electronicConfiguration:"Xe 4f14 5d9 6s1",family:"Transition",symbol:"Pt",name:"Platinum",elementColor:[.96,.93,.82],discoveryCountry:["uk"],discoverers:["A.","de","Ulloa"]},{id:"Au",atomicNumber:79,mass:196.966569,exactMass:196.9665687,ionization:9.2255,electronAffinity:2.30861,electronegativityPauling:2.54,nameOrigin:"Latin 'aurum'. Named after Aurora, the goddess of sunrise",radiusCovalent:1.44,radiusVDW:2.1,boilingpoint:3130,meltingpoint:1337.58,periodTableBlock:"d",discoveryDate:"0",period:"6",group:"1",electronicConfiguration:"Xe 4f14 5d10 6s1",family:"Transition",symbol:"Au",name:"Gold",elementColor:[.8,.82,.12],discoveryCountry:["ancient"]},{id:"Hg",atomicNumber:80,mass:200.59,exactMass:201.970643,ionization:10.4375,electronAffinity:0,electronegativityPauling:2,nameOrigin:"Graeco-Latin 'hydrargyrum' for 'liquid silver'",radiusCovalent:1.49,radiusVDW:2.05,boilingpoint:629.88,meltingpoint:234.31,periodTableBlock:"d",discoveryDate:"0",period:"6",group:"2",electronicConfiguration:"Xe 4f14 5d10 6s2",family:"Transition",symbol:"Hg",name:"Mercury",elementColor:[.71,.71,.76],discoveryCountry:["ancient"]},{id:"Tl",atomicNumber:81,mass:204.3833,exactMass:204.9744275,ionization:6.1082,electronAffinity:.377,electronegativityPauling:1.62,nameOrigin:"Greek 'tallos' for 'young twig'",radiusCovalent:1.48,radiusVDW:2.2,boilingpoint:1746,meltingpoint:577,periodTableBlock:"p",discoveryDate:"1861",period:"6",group:"3",electronicConfiguration:"Xe 4f14 5d10 6s2 6p1",family:"Other_Metal",symbol:"Tl",name:"Thallium",elementColor:[.65,.33,.3],discoveryCountry:["uk"],discoverers:["W.","Crookes"]},{id:"Pb",atomicNumber:82,mass:207.2,exactMass:207.9766521,ionization:7.4167,electronAffinity:.364,electronegativityPauling:2.33,nameOrigin:"Latin 'plumbum' for Lead",radiusCovalent:1.47,radiusVDW:2.3,boilingpoint:2023,meltingpoint:600.65,periodTableBlock:"p",discoveryDate:"0",period:"6",group:"4",electronicConfiguration:"Xe 4f14 5d10 6s2 6p2",family:"Other_Metal",symbol:"Pb",name:"Lead",elementColor:[.34,.35,.38],discoveryCountry:["ancient"]},{id:"Bi",atomicNumber:83,mass:208.9804,exactMass:208.9803987,ionization:7.2855,electronAffinity:.942363,electronegativityPauling:2.02,nameOrigin:"The old name of Bismuth is 'Wismut', which stood for 'white mass'.",radiusCovalent:1.46,radiusVDW:2.3,boilingpoint:1837,meltingpoint:544.59,periodTableBlock:"p",discoveryDate:"0",period:"6",group:"5",electronicConfiguration:"Xe 4f14 5d10 6s2 6p3",family:"Other_Metal",symbol:"Bi",name:"Bismuth",elementColor:[.62,.31,.71],discoveryCountry:["ancient"]},{id:"Po",atomicNumber:84,mass:209,exactMass:208.9824304,ionization:8.414,electronAffinity:1.9,electronegativityPauling:2,nameOrigin:"Named after Poland to honor Marie Curie",radiusVDW:2,meltingpoint:527,periodTableBlock:"p",discoveryDate:"1898",period:"6",group:"6",electronicConfiguration:"Xe 4f14 5d10 6s2 6p4",family:"Metalloids",symbol:"Po",name:"Polonium",elementColor:[.67,.36,0],discoveryCountry:["fr"],discoverers:["M. Sklodowska-Curie","P. Curie"]},{id:"At",atomicNumber:85,mass:210,exactMass:209.987148,ionization:0,electronAffinity:2.8,electronegativityPauling:2.2,nameOrigin:"Greek 'astator' for 'changing'",radiusVDW:2,boilingpoint:610,meltingpoint:575,periodTableBlock:"p",discoveryDate:"1940",period:"6",group:"7",electronicConfiguration:"Xe 4f14 5d10 6s2 6p5",family:"Halogen",symbol:"At",name:"Astatine",elementColor:[.46,.31,.27],discoveryCountry:["us"],discoverers:["D. R. Corson","K. R. McKenzie","E. Segre"]},{id:"Rn",atomicNumber:86,mass:222,exactMass:222.0175777,ionization:10.7485,electronAffinity:0,nameOrigin:"Named after Radium. It ends with 'on' to make it clear that it is a noble gas.",radiusCovalent:1.45,radiusVDW:2,boilingpoint:211.4,meltingpoint:202,periodTableBlock:"p",discoveryDate:"1898",period:"6",group:"8",electronicConfiguration:"Xe 4f14 5d10 6s2 6p6",family:"Noblegas",symbol:"Rn",name:"Radon",elementColor:[.26,.51,.59],discoveryCountry:["de"],discoverers:["E.","Dorn"]},{id:"Fr",atomicNumber:87,mass:223,exactMass:223.0197359,ionization:4.0727,electronegativityPauling:.7,nameOrigin:"Named after France to honor Marguerite Perey",radiusVDW:2,boilingpoint:950,meltingpoint:300,periodTableBlock:"s",discoveryDate:"1939",period:"7",group:"1",electronicConfiguration:"Rn 7s1",family:"Alkali_Earth",symbol:"Fr",name:"Francium",elementColor:[.26,0,.4],discoveryCountry:["fr"],discoverers:["M.","Perey"]},{id:"Ra",atomicNumber:88,mass:226,exactMass:226.0254098,ionization:5.2784,electronegativityPauling:.9,nameOrigin:"Latin 'radius' for 'beam', as it is radioactive",radiusVDW:2,boilingpoint:1413,meltingpoint:973,periodTableBlock:"s",discoveryDate:"1898",period:"7",group:"2",electronicConfiguration:"Rn 7s2",family:"Alkaline_Earth",symbol:"Ra",name:"Radium",elementColor:[0,.49,0],discoveryCountry:["fr"],discoverers:["M. Sklodowska-Curie","P. Curie"]},{id:"Ac",atomicNumber:89,mass:227,exactMass:227.0277521,ionization:5.17,electronegativityPauling:1.1,nameOrigin:"Greek 'aktis' for 'beam' - actinium is radioactive",radiusVDW:2,boilingpoint:3470,meltingpoint:1324,periodTableBlock:"f",discoveryDate:"1899",period:"7",group:"3",electronicConfiguration:"Rn 6d1 7s2",family:"Other_Metal",symbol:"Ac",name:"Actinium",elementColor:[.44,.67,.98],discoveryCountry:["fr"],discoverers:["A.","L.","Debierne"]},{id:"Th",atomicNumber:90,mass:232.03806,exactMass:232.0380553,ionization:6.3067,electronegativityPauling:1.3,nameOrigin:"Named after the German god of thunder: Thor",radiusVDW:2.4,boilingpoint:5060,meltingpoint:2028,periodTableBlock:"f",discoveryDate:"1828",period:"7",group:"4",electronicConfiguration:"Rn 6d2 7s2",family:"Other_Metal",symbol:"Th",name:"Thorium",elementColor:[0,.73,1],discoverers:["J.","J.","Berzelius"]},{id:"Pa",atomicNumber:91,mass:231.03588,exactMass:231.035884,ionization:5.89,electronegativityPauling:1.5,nameOrigin:"Greek 'protos' for 'ancester'. Protactinium is before Actinium in the periodic table.",radiusVDW:2,boilingpoint:4300,meltingpoint:1845,periodTableBlock:"f",discoveryDate:"1917",period:"7",group:"5",electronicConfiguration:"Rn 5f2 6d1 7s2",family:"Other_Metal",symbol:"Pa",name:"Protactinium",elementColor:[0,.63,1],discoverers:["O. Hahn","L. Meitern","W. Wollaston"]},{id:"U",atomicNumber:92,mass:238.02891,exactMass:238.0507882,ionization:6.1941,electronegativityPauling:1.38,nameOrigin:"Greek 'ouranos' for 'heaven'. Named after the planet Uranus.",radiusVDW:2.3,boilingpoint:4407,meltingpoint:1408,periodTableBlock:"f",discoveryDate:"1789",period:"7",group:"6",electronicConfiguration:"Rn 5f3 6d1 7s2",family:"Other_Metal",symbol:"U",name:"Uranium",elementColor:[0,.56,1],discoverers:["M.","M.","Klaproth"]},{id:"Np",atomicNumber:93,mass:237,exactMass:237.0481734,ionization:6.2657,electronegativityPauling:1.36,nameOrigin:"Named after the planet Neptune.",radiusVDW:2,boilingpoint:4175,meltingpoint:912,periodTableBlock:"f",discoveryDate:"1940",period:"7",group:"7",electronicConfiguration:"Rn 5f4 6d1 7s2",family:"Other_Metal",symbol:"Np",name:"Neptunium",elementColor:[0,.5,1],discoverers:["E. M. McMillan","P. Aberson"]},{id:"Pu",atomicNumber:94,mass:244,exactMass:244.064204,ionization:6.026,electronegativityPauling:1.28,nameOrigin:"Named after the planet Pluto.",radiusVDW:2,boilingpoint:3505,meltingpoint:913,periodTableBlock:"f",discoveryDate:"1940",period:"7",group:"8",electronicConfiguration:"Rn 5f6 7s2",family:"Other_Metal",symbol:"Pu",name:"Plutonium",elementColor:[0,.42,1],discoverers:["Glenn T. Seaborg","E. M. McMillan","J. W. Kennedy","A.C. Wahl"]},{id:"Am",atomicNumber:95,mass:243,exactMass:243.0613811,ionization:5.9738,electronegativityPauling:1.3,nameOrigin:"Named after America.",radiusVDW:2,boilingpoint:2880,meltingpoint:1449,periodTableBlock:"f",discoveryDate:"1945",period:"7",group:"8",electronicConfiguration:"Rn 5f7 7s2",family:"Other_Metal",symbol:"Am",name:"Americium",elementColor:[.33,.36,.95],discoverers:["Glenn T. Seaborg","L. O. Morgan","R. A. James","A. Ghiors"]},{id:"Cm",atomicNumber:96,mass:247,exactMass:247.070354,ionization:5.9914,electronegativityPauling:1.3,nameOrigin:"Named after Marie Curie.",radiusVDW:2,boilingpoint:3383,meltingpoint:1620,periodTableBlock:"f",discoveryDate:"1944",period:"7",group:"8",electronicConfiguration:"Rn 5f7 6d1 7s2",family:"Other_Metal",symbol:"Cm",name:"Curium",elementColor:[.47,.36,.89],discoverers:["Glenn T. Seaborg","R. A. James","A. Ghiors"]},{id:"Bk",atomicNumber:97,mass:247,exactMass:247.070307,ionization:6.1979,electronegativityPauling:1.3,nameOrigin:"Named after the town Berkeley where it was discovered.",radiusVDW:2,boilingpoint:983,meltingpoint:1258,periodTableBlock:"f",discoveryDate:"1949",period:"7",group:"1",electronicConfiguration:"Rn 5f9 7s2",family:"Other_Metal",symbol:"Bk",name:"Berkelium",elementColor:[.54,.31,.89],discoverers:["Glenn T. Seaborg","A. Ghiors","S. G. Thompson"]},{id:"Cf",atomicNumber:98,mass:251,exactMass:251.079587,ionization:6.2817,electronegativityPauling:1.3,nameOrigin:"Named after the US-State of California.",radiusVDW:2,boilingpoint:1173,meltingpoint:1172,periodTableBlock:"f",discoveryDate:"1950",period:"7",group:"2",electronicConfiguration:"Rn 5f10 7s2",family:"Other_Metal",symbol:"Cf",name:"Californium",elementColor:[.63,.21,.83],discoverers:["Glenn T. Seaborg","A. Ghiors","S. G. Thompson"]},{id:"Es",atomicNumber:99,mass:252,exactMass:252.08298,ionization:6.42,electronegativityPauling:1.3,nameOrigin:"Named after the scientist Albert Einstein.",radiusVDW:2,meltingpoint:1130,periodTableBlock:"f",discoveryDate:"1952",period:"7",group:"3",electronicConfiguration:"Rn 5f11 7s2",family:"Other_Metal",symbol:"Es",name:"Einsteinium",elementColor:[.7,.12,.83],discoverers:["Glenn T. Seaborg","et al."]},{id:"Fm",atomicNumber:100,mass:257,exactMass:257.095105,ionization:6.5,electronegativityPauling:1.3,nameOrigin:"Named after the scientist Enrico Fermi.",radiusVDW:2,meltingpoint:1800,periodTableBlock:"f",discoveryDate:"1953",period:"7",group:"4",electronicConfiguration:"Rn 5f12 7s2",family:"Other_Metal",symbol:"Fm",name:"Fermium",elementColor:[.7,.12,.73],discoverers:["Glenn T. Seaborg","et al."]},{id:"Md",atomicNumber:101,mass:258,exactMass:258.098431,ionization:6.58,electronegativityPauling:1.3,nameOrigin:"Named after the scientist D.I. Mendeleev.",radiusVDW:2,meltingpoint:1100,periodTableBlock:"f",discoveryDate:"1955",period:"7",group:"5",electronicConfiguration:"Rn 5f13 7s2",family:"Other_Metal",symbol:"Md",name:"Mendelevium",elementColor:[.7,.05,.65],discoverers:["Glenn T. Seaborg","Albert Ghiorso","Bernard Harvey","Gregory Choppin","Stanley G. Thompson"]},{id:"No",atomicNumber:102,mass:259,exactMass:259.10103,ionization:6.65,electronegativityPauling:1.3,nameOrigin:"Named after the scientist Alfred Nobel.",radiusVDW:2,meltingpoint:1100,periodTableBlock:"f",discoveryDate:"1958",period:"7",group:"6",electronicConfiguration:"Rn 5f14 7s2",family:"Other_Metal",symbol:"No",name:"Nobelium",elementColor:[.74,.05,.53]},{id:"Lr",atomicNumber:103,mass:262,exactMass:262.10963,ionization:4.9,nameOrigin:"Named after the scientist Ernest Orlando Lawrence.",radiusVDW:2,meltingpoint:1900,periodTableBlock:"f",discoveryDate:"1961",period:"7",group:"7",electronicConfiguration:"Rn 5f14 7s2 7p1",family:"Other_Metal",symbol:"Lr",name:"Lawrencium",elementColor:[.78,0,.4],discoverers:["Albert Ghiorso","Torbjorn Sikkeland","Almon Larsh","Robert M. Latimer"]},{id:"Rf",atomicNumber:104,mass:267,exactMass:261.10877,ionization:6,nameOrigin:"Named after the scientist Ernest Rutherford",radiusVDW:2,periodTableBlock:"d",discoveryDate:"1964",period:"7",group:"4",electronicConfiguration:"Rn 5f14 6d2 7s2",family:"Transition",symbol:"Rf",name:"Rutherfordium",elementColor:[.8,0,.35],discoveryCountry:["ru","us"]},{id:"Db",atomicNumber:105,mass:268,exactMass:262.11408,nameOrigin:"Named after the science-town Dubna in Russia",radiusVDW:2,periodTableBlock:"d",discoveryDate:"1967",period:"7",group:"5",electronicConfiguration:"Rn 5f14 6d3 7s2",family:"Transition",symbol:"Db",name:"Dubnium",elementColor:[.82,0,.31],discoveryCountry:["ru","us"]},{id:"Sg",atomicNumber:106,mass:271,exactMass:263.11832,nameOrigin:"Named after the scientist G. Theodore Seaborg.",radiusVDW:2,periodTableBlock:"d",discoveryDate:"1974",period:"7",group:"6",family:"Transition",symbol:"Sg",name:"Seaborgium",elementColor:[.85,0,.27],discoveryCountry:["ru","us"],discoverers:["Albert Ghiorso","et al."]},{id:"Bh",atomicNumber:107,mass:272,exactMass:264.1246,nameOrigin:"Named after the scientist Niels Bohr.",radiusVDW:2,periodTableBlock:"d",discoveryDate:"1981",period:"7",group:"7",family:"Transition",symbol:"Bh",name:"Bohrium",elementColor:[.88,0,.22],discoveryCountry:["ru"],discoverers:["Peter Armbruster","Gottfried Münzenber","et al."]},{id:"Hs",atomicNumber:108,mass:270,exactMass:265.13009,nameOrigin:"Latin 'hassia' for the German county Hessen. In Hessen a lot elements have been discovered.",radiusVDW:2,periodTableBlock:"d",discoveryDate:"1984",period:"7",group:"8",family:"Transition",symbol:"Hs",name:"Hassium",elementColor:[.9,0,.18],discoveryCountry:["de"],discoverers:["Peter Armbruster","Gottfried Münzenber","et al."]},{id:"Mt",atomicNumber:109,mass:276,exactMass:268.13873,nameOrigin:"Named after the scientist Lise Meitner.",radiusVDW:2,periodTableBlock:"d",discoveryDate:"1982",period:"7",group:"8",family:"Transition",symbol:"Mt",name:"Meitnerium",elementColor:[.91,0,.15],discoveryCountry:["de"],discoverers:["Peter Armbruster","Gottfried Münzenber","et al."]},{id:"Ds",atomicNumber:110,mass:281,exactMass:271.14606,nameOrigin:"Named after the German city Darmstadt where many elements have been discovered.",periodTableBlock:"d",discoveryDate:"1994",period:"7",group:"8",family:"Transition",symbol:"Ds",name:"Darmstadtium",elementColor:[.92,0,.14],discoveryCountry:["de"],discoverers:["S. Hofmann","V. Ninov","F. P. Hessberger","P. Armbruster","H. Folger","G. Münzenberg","H. J. Schött","et al."]},{id:"Rg",atomicNumber:111,mass:280,exactMass:272.15362,nameOrigin:"Named after Wilhelm Conrad Röntgen.",periodTableBlock:"d",discoveryDate:"1994",period:"7",group:"1",family:"Transition",symbol:"Rg",name:"Roentgenium",elementColor:[.93,0,.13],discoveryCountry:["de"],discoverers:["S. Hofmann","V. Ninov","F. P. Hessberger","P. Armbruster","H. Folger","G. Münzenberg","et al."]},{id:"Cn",atomicNumber:112,mass:285,exactMass:285.17411,nameOrigin:"Historically known as eka-mercury. Ununbium is a temporary IUPAC systematic element name.",periodTableBlock:"d",discoveryDate:"1996",period:"7",family:"Transition",symbol:"Cn",name:"Copernicium",elementColor:[.94,0,.12],discoveryCountry:["de"],discoverers:["First","created","at","the","Gesellschaft","für","Schwerionenforschung"]},{id:"Uut",atomicNumber:113,mass:284,exactMass:284.17808,nameOrigin:"Historically known as eka-thallium. Ununtrium is a temporary IUPAC systematic element name.",periodTableBlock:"p",discoveryDate:"2003",period:"7",family:"Other_Metal",symbol:"Uut",name:"Ununtrium",elementColor:[.95,0,.11],discoveryCountry:["ru","us"],discoverers:["Russian scientists at Dubna (JINR)","American scientists at the Lawrence Livermore National Laboratory."]},{id:"Uuq",atomicNumber:114,mass:289,exactMass:289.18728,nameOrigin:"Historically known as eka-lead. Ununquadium is a temporary IUPAC systematic element name.",periodTableBlock:"p",discoveryDate:"1998",period:"7",family:"Other_Metal",symbol:"Uuq",name:"Ununquadium",elementColor:[.96,0,.1],discoveryCountry:["ru","us"],discoverers:["Joint","Institute","for","Nuclear","Research"]},{id:"Uup",atomicNumber:115,mass:288,exactMass:288.19249,nameOrigin:"Historically known as eka-bismuth. Ununpentium is a temporary IUPAC systematic element name.",periodTableBlock:"p",discoveryDate:"2004",period:"7",family:"Other_Metal",symbol:"Uup",name:"Ununpentium",elementColor:[.97,0,.09],discoveryCountry:["ru","us"],discoverers:["Russian scientists at Dubna (JINR)","American scientists at the Lawrence Livermore National Laboratory."]},{id:"Uuh",atomicNumber:116,mass:293,exactMass:292.19979,nameOrigin:"Historically known as eka-polonium. Ununhexium is a temporary IUPAC systematic element name.",periodTableBlock:"p",discoveryDate:"2000",period:"7",family:"Other_Metal",symbol:"Uuh",name:"Ununhexium",elementColor:[.98,0,.08],discoveryCountry:["ru"],discoverers:["Joint","Institute","for","Nuclear","Research"]},{id:"Uus",atomicNumber:117,nameOrigin:"Temporary symbol and name. Can also be referred to as eka-astatine.",periodTableBlock:"p",discoveryDate:"0",period:"7",family:"Halogen",symbol:"Uus",name:"Ununseptium",elementColor:[.99,0,.07]},{id:"Uuo",atomicNumber:118,mass:294,nameOrigin:"Historically known as eka-radon, eka-emanation before 1960. Ununoctium is a temporary IUPAC systematic element name.",periodTableBlock:"p",discoveryDate:"2002",period:"7",family:"Noblegas",symbol:"Uuo",name:"Ununoctium",elementColor:[1,0,.06],discoveryCountry:["ru","us"],discoverers:["Russian scientists at Dubna (JINR)","American scientists at the Lawrence Livermore National Laboratory."]}]}},function(e,t,n){e.exports=function(){return n(97)('/*!\n * @project        vtk.js\n * @build          Tue, Jul 9, 2019 6:02 PM ET\n * @copyright      Copyright (c) 2019 Kitware, Inc.\n *\n */!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=2)}([function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function t(e,n,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,n,r)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(r):void 0},a="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)};function u(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=n(1),l=0,c=1,p=0,y=1,h="main",d=function(t){return"object"===(void 0===t?"undefined":a(t))&&"function"==typeof t.then&&"function"==typeof t.catch};var b=function t(e,n){f(this,t),this.payload=e,this.transferable=n};t.exports=function(t){var e,n,a,m=(a=t,(n=h)in(e={})?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e),v=self.postMessage.bind(self),g=new(function(t){function e(){return f(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!e||"object"!==r(e)&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+r(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s),o(e,[{key:"emit",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return v({eventName:t,args:n}),this}},{key:"emitLocally",value:function(t){for(var n,r=arguments.length,o=Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];(n=i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"emit",this)).call.apply(n,[this,t].concat(o))}},{key:"operation",value:function(t,e){return m[t]=e,this}}]),e}()),M=function(t,e,n){var r=m[n||h];if(!r)throw new Error("Not found handler for this request");return r(e,w.bind(null,t))},_=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];v([l,t,e,n],r)},w=function(t,e,n){if(!e)throw new Error("eventName is required");if("string"!=typeof e)throw new Error("eventName should be string");v([c,t,e,n])};return self.addEventListener("message",function(t){var e=t.data;Array.isArray(e)?function(t,e,n){var r=function(e){e&&e instanceof b?_(t,y,e.payload,e.transferable):_(t,y,e)},o=function(e){_(t,p,{message:e.message,stack:e.stack})};try{var i=M(t,e,n);d(i)?i.then(r).catch(o):r(i)}catch(t){o(t)}}.apply(void 0,u(e)):e&&e.eventName&&g.emitLocally.apply(g,[e.eventName].concat(u(e.args)))}),g},t.exports.TransferableResponse=b},function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Object.defineProperty(this,"__listeners",{value:{},enumerable:!1,writable:!1})}return r(t,[{key:"emit",value:function(t){if(!this.__listeners[t])return this;for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var o=!0,i=!1,a=void 0;try{for(var u,f=this.__listeners[t][Symbol.iterator]();!(o=(u=f.next()).done);o=!0){u.value.apply(void 0,n)}}catch(t){i=!0,a=t}finally{try{!o&&f.return&&f.return()}finally{if(i)throw a}}return this}},{key:"once",value:function(t,e){var n=this,r=function r(){n.off(t,r),e.apply(void 0,arguments)};return this.on(t,r)}},{key:"on",value:function(t,e){return this.__listeners[t]||(this.__listeners[t]=[]),this.__listeners[t].push(e),this}},{key:"off",value:function(t,e){return this.__listeners[t]=e?this.__listeners[t].filter(function(t){return t!==e}):[],this}}]),t}();t.exports=o},function(t,e,n){"use strict";n.r(e);var r=n(0),o=n.n(r),i={NONE:-1,I:0,J:1,K:2,X:3,Y:4,Z:5};const a={buffer:null,dimensions:[0,0,0],prevPoint:null,slicingMode:null};function u({center:t,scale3:e}){const n=a.dimensions[0],r=a.dimensions[0]*a.dimensions[1],o=Math.round(Math.max(t[2]-e[2],0)),i=Math.round(Math.min(t[2]+e[2],a.dimensions[2]-1));for(let u=o;u<=i;u++){const o=(t[2]-u)/e[2],i=e[1]*Math.sqrt(1-o*o),f=Math.round(Math.max(t[1]-i,0)),s=Math.round(Math.min(t[1]+i,a.dimensions[1]-1));for(let i=f;i<=s;i++){const f=(t[1]-i)/e[1],s=e[0]*Math.sqrt(1-f*f-o*o),l=Math.round(Math.max(t[0]-s,0)),c=Math.round(Math.min(t[0]+s,a.dimensions[0]-1));if(l<=c){const t=i*n+u*r;a.buffer.fill(1,t+l,t+c+1)}}}}o()().operation("start",({bufferType:t,dimensions:e,slicingMode:n})=>{if(!a.buffer){const r=e[0]*e[1]*e[2];a.buffer=new self[t](r),a.dimensions=e,a.prevPoint=null,a.slicingMode=n}}).operation("paint",function({point:t,radius:e}){a.prevPoint||(a.prevPoint=t),a.slicingMode===i.X||a.slicingMode===i.I?e[0]=.25:a.slicingMode===i.Y||a.slicingMode===i.J?e[1]=.25:a.slicingMode!==i.Z&&a.slicingMode!==i.K||(e[2]=.25);const n=[t[0]-a.prevPoint[0],t[1]-a.prevPoint[1],t[2]-a.prevPoint[2]],r=[1,1,1];for(let t=0;t<3;t++)n[t]<0&&(n[t]=-n[t],r[t]=-1);const o=Math.max(...n),f=[o,o,o],s=[...a.prevPoint];for(let t=0;t<=o;t++){u({center:s,scale3:e});for(let t=0;t<3;t++)f[t]-=n[t],f[t]<=0&&(f[t]=o,s[t]+=r[t])}a.prevPoint=t}).operation("paintRectangle",function({point1:t,point2:e}){const[n,r,o]=t,[i,u,f]=e,s=Math.max(Math.min(n,i),0),l=Math.min(Math.max(n,i),a.dimensions[0]-1);if(s<=l){const t=Math.max(Math.min(r,u),0),e=Math.min(Math.max(r,u),a.dimensions[1]-1),n=Math.max(Math.min(o,f),0),i=Math.min(Math.max(o,f),a.dimensions[2]-1),c=a.dimensions[0],p=a.dimensions[0]*a.dimensions[1];for(let r=n;r<=i;r++)for(let n=t;n<=e;n++){const t=n*c+r*p;a.buffer.fill(1,t+s,t+l+1)}}}).operation("paintEllipse",u).operation("end",()=>{const t=new o.a.TransferableResponse(a.buffer.buffer,[a.buffer.buffer]);return a.buffer=null,t})}]);\n//# sourceMappingURL=7eb3200cd81bf3144f59.worker.js.map',null)}},function(e,t){e.exports='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="180px" height="180px" viewBox="0 0 180 180" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 43.1 (39012) - http://www.bohemiancoding.com/sketch --\x3e\n    <title>Tint</title>\n    <desc>Created with Sketch.</desc>\n    <defs></defs>\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="Tint" stroke="#000000" stroke-width="10" fill="#000000">\n            <path d="M90,24 C110,53.4848089 135,82.5 135,110 C135,137.5 117.5,156.484809 90,156.484809 C62.5,156.484809 45,137.5 45,110 C45,82.5 70,53.4848089 90,24 Z" id="Path-2"></path>\n        </g>\n    </g>\n</svg>'},function(e,t,n){var r=n(160);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(54)(r,i);r.locals&&(e.exports=r.locals)},function(e){e.exports=[{Name:"KAAMS",IndexedColors:[1,1,1,1,0,0,0,1,0,0,0,1,1,1,0,1,0,1,0,1,1,.63,.63,1,.67,.5,.33,1,.5,.75,.53,.35,.7,1,.75,.5],Annotations:[0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11]},{ColorSpace:"Diverging",Name:"Cool to Warm",NanColor:[1,1,0],RGBPoints:[0,.23137254902,.298039215686,.752941176471,.5,.865,.865,.865,1,.705882352941,.0156862745098,.149019607843]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Cool to Warm (Extended)",NanColor:[.25,0,0],RGBPoints:[0,0,0,.34902,.03125,.039216,.062745,.380392,.0625,.062745,.117647,.411765,.09375,.090196,.184314,.45098,.125,.12549,.262745,.501961,.15625,.160784,.337255,.541176,.1875,.2,.396078,.568627,.21875,.239216,.454902,.6,.25,.286275,.521569,.65098,.28125,.337255,.592157,.701961,.3125,.388235,.654902,.74902,.34375,.466667,.737255,.819608,.375,.572549,.819608,.878431,.40625,.654902,.866667,.909804,.4375,.752941,.917647,.941176,.46875,.823529,.956863,.968627,.5,.988235,.960784,.901961,.5,.941176,.984314,.988235,.52,.988235,.945098,.85098,.54,.980392,.898039,.784314,.5625,.968627,.835294,.698039,.59375,.94902,.733333,.588235,.625,.929412,.65098,.509804,.65625,.909804,.564706,.435294,.6875,.878431,.458824,.352941,.71875,.839216,.388235,.286275,.75,.760784,.294118,.211765,.78125,.701961,.211765,.168627,.8125,.65098,.156863,.129412,.84375,.6,.094118,.094118,.875,.54902,.066667,.098039,.90625,.501961,.05098,.12549,.9375,.45098,.054902,.172549,.96875,.4,.054902,.192157,1,.34902,.070588,.211765]},{ColorSpace:"Diverging",Name:"Warm to Cool",NanColor:[1,1,0],RGBPoints:[0,.705882352941,.0156862745098,.149019607843,.5,.865,.865,.865,1,.23137254902,.298039215686,.752941176471]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Warm to Cool (Extended)",NanColor:[.250004,0,0],RGBPoints:[0,.34902,0,.129412,.025,.4,.00392157,.101961,.05,.470588,.0156863,.0901961,.075,.54902,.027451,.0705882,.1,.619608,.0627451,.0431373,.125,.690196,.12549,.0627451,.15,.741176,.184314,.0745098,.175,.788235,.266667,.0941176,.2,.811765,.345098,.113725,.225,.831373,.411765,.133333,.25,.85098,.47451,.145098,.275,.870588,.54902,.156863,.3,.878431,.619608,.168627,.325,.890196,.658824,.196078,.35,.909804,.717647,.235294,.375,.929412,.776471,.278431,.395522,.94902,.823529,.321569,.418905,.968627,.87451,.407843,.444278,.980392,.917647,.509804,.470149,.988235,.956863,.643137,.483582,.992157,.964706,.713725,.499,.988235,.980392,.870588,.5,1,1,1,.501,.913725,.988235,.937255,.516418,.827451,.980392,.886275,.531343,.764706,.980392,.866667,.546766,.658824,.980392,.843137,.564179,.572549,.964706,.835294,.587562,.423529,.941176,.87451,.60597,.262745,.901961,.862745,.629851,.0705882,.854902,.870588,.651741,.0509804,.8,.85098,.681592,.0235294,.709804,.831373,.712935,.0313725,.615686,.811765,.75,.0313725,.537255,.788235,.775,.0392157,.466667,.768627,.8,.0509804,.396078,.741176,.825,.054902,.317647,.709804,.85,.054902,.243137,.678431,.875,.0431373,.164706,.639216,.9,.0313725,.0980392,.6,.925,.0392157,.0392157,.560784,.95,.105882,.0509804,.509804,.975,.113725,.0235294,.45098,1,.12549,0,.380392]},{ColorSpace:"RGB",Name:"Rainbow Desaturated",NanColor:[1,1,0],RGBPoints:[0,.278431372549,.278431372549,.858823529412,.143,0,0,.360784313725,.285,0,1,1,.429,0,.501960784314,0,.571,1,1,0,.714,1,.380392156863,0,.857,.419607843137,0,0,1,.878431372549,.301960784314,.301960784314]},{ColorSpace:"RGB",Name:"Cold and Hot",NanColor:[1,1,0],RGBPoints:[0,0,1,1,.45,0,0,1,.5,0,0,.501960784314,.55,1,0,0,1,1,1,0]},{ColorSpace:"RGB",Name:"Black-Body Radiation",NanColor:[0,.498039215686,1],RGBPoints:[0,0,0,0,.4,.901960784314,0,0,.8,.901960784314,.901960784314,0,1,1,1,1]},{ColorSpace:"RGB",Name:"X Ray",NanColor:[1,0,0],RGBPoints:[0,1,1,1,1,0,0,0]},{ColorSpace:"RGB",Name:"Grayscale",NanColor:[1,0,0],RGBPoints:[0,0,0,0,1,1,1,1]},{ColorSpace:"RGB",Name:"Black, Blue and White",NanColor:[1,1,0],RGBPoints:[0,0,0,0,.333,0,0,.501960784314,.666,0,.501960784314,1,1,1,1,1]},{ColorSpace:"RGB",Name:"Black, Orange and White",NanColor:[1,1,0],RGBPoints:[0,0,0,0,.333,.501960784314,0,0,.666,1,.501960784314,0,1,1,1,1]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Linear YGB 1211g",NanColor:[.25,0,0],RGBPoints:[0,1,.988235,.968627,.02,1,.952941,.878431,.05,.968627,.905882,.776471,.1,.94902,.898039,.647059,.15,.901961,.878431,.556863,.2,.847059,.858824,.482353,.25,.690196,.819608,.435294,.3,.513725,.768627,.384314,.35,.337255,.721569,.337255,.4,.278431,.658824,.392157,.45,.231373,.639216,.435294,.5,.203922,.6,.486275,.55,.172549,.568627,.537255,.6,.141176,.517647,.54902,.65,.133333,.458824,.541176,.7,.12549,.396078,.529412,.75,.117647,.321569,.521569,.8,.121569,.258824,.509804,.85,.133333,.227451,.501961,.9,.145098,.192157,.490196,.95,.188235,.164706,.470588,1,.258824,.196078,.439216]},{ColorSpace:"CIELAB",Creator:"Francesca Samsel",Name:"Linear Green (Gr4L)",NanColor:[.25,0,0],RGBPoints:[0,.054902,.109804,.121569,.05,.07451,.172549,.180392,.1,.086275,.231373,.219608,.15,.094118,.278431,.25098,.2,.109804,.34902,.278431,.25,.113725,.4,.278431,.3,.117647,.45098,.270588,.35,.117647,.490196,.243137,.4,.113725,.521569,.203922,.45,.109804,.54902,.152941,.5,.082353,.588235,.082353,.55,.109804,.631373,.05098,.6,.211765,.678431,.082353,.65,.317647,.721569,.113725,.7,.431373,.760784,.160784,.75,.556863,.8,.239216,.8,.666667,.839216,.294118,.85,.784314,.878431,.396078,.9,.886275,.921569,.533333,.95,.960784,.94902,.670588,1,1,.984314,.901961]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Linear Blue (8_31f)",NanColor:[.25,0,0],RGBPoints:[0,.960784,1,.980392,.05,.815686,.960784,.913725,.1,.670588,.929412,.870588,.15,.556863,.901961,.843137,.2,.478431,.870588,.823529,.25,.439216,.831373,.803922,.3,.4,.8,.788235,.35,.376471,.768627,.768627,.4,.34902,.709804,.729412,.45,.32549,.654902,.690196,.5,.301961,.607843,.658824,.55,.247059,.545098,.619608,.6,.239216,.494118,.580392,.65,.227451,.439216,.541176,.7,.227451,.403922,.521569,.75,.231373,.368627,.501961,.8,.227451,.321569,.470588,.85,.219608,.282353,.439216,.9,.192157,.235294,.4,.95,.160784,.184314,.34902,1,.133333,.12549,.301961]},{ColorSpace:"HSV",Name:"Blue to Red Rainbow",NanColor:[.498039215686,.498039215686,.498039215686],RGBPoints:[0,0,0,1,1,1,0,0]},{ColorSpace:"HSV",Name:"Red to Blue Rainbow",NanColor:[.498039215686,.498039215686,.498039215686],RGBPoints:[0,1,0,0,1,0,0,1]},{ColorSpace:"RGB",Name:"Rainbow Blended White",NanColor:[1,1,0],RGBPoints:[0,1,1,1,.17,0,0,1,.34,0,1,1,.5,0,1,0,.67,1,1,0,.84,1,0,0,1,.878431372549,0,1]},{ColorSpace:"RGB",Name:"Rainbow Blended Grey",NanColor:[1,1,0],RGBPoints:[0,.317647058824,.341176470588,.43137254902,.17,0,0,1,.34,0,1,1,.5,0,1,0,.67,1,1,0,.84,1,0,0,1,.878431372549,0,1]},{ColorSpace:"RGB",Name:"Rainbow Blended Black",NanColor:[1,1,0],RGBPoints:[0,0,0,0,.17,0,0,1,.34,0,1,1,.5,0,1,0,.67,1,1,0,.84,1,0,0,1,.878431372549,0,1]},{ColorSpace:"RGB",Name:"Blue to Yellow",NanColor:[1,0,0],RGBPoints:[0,.0392156862745,.0392156862745,.949019607843,1,.949019607843,.949019607843,.0392156862745]},{ColorSpace:"HSV",Name:"blot",RGBPoints:[0,0,0,1,.166,0,0,1,.167,1,0,1,.332,1,0,1,.333,0,1,1,.5,0,1,1,.501,0,1,0,.666,0,1,0,.667,1,1,0,.832,1,1,0,.833,1,0,0,1,1,0,0]},{ColorSpace:"Lab",Name:"CIELab Blue to Red",NanColor:[1,1,0],RGBPoints:[0,0,.6,.749019607843,1,.76862745098,.466666666667,.341176470588]},{ColorSpace:"RGB",Name:"jet",RGBPoints:[-1,0,0,.5625,-.777778,0,0,1,-.269841,0,1,1,-.015873,.5,1,.5,.238095,1,1,0,.746032,1,0,0,1,.5,0,0]},{ColorSpace:"RGB",Name:"rainbow",RGBPoints:[-1,0,0,1,-.5,0,1,1,0,0,1,0,.5,1,1,0,1,1,0,0]},{ColorSpace:"Lab",Name:"erdc_rainbow_bright",RGBPoints:[-1,.32549,.14902,.960784,-.866221,.297047,.375586,.963836,-.732441,.180302,.536818,.964627,-.598662,.1302,.649207,.929647,-.464883,.0445143,.749654,.855998,-.331104,.0271325,.830713,.721527,-.197324,.259504,.866145,.543555,-.0635452,.428364,.890725,.329819,.0702341,.568503,.898508,.187623,.204013,.738259,.890317,.0825461,.337793,.84546,.86136,.0147555,.471572,.912191,.808018,0,.605351,.962848,.710445,0,.73913,.999469,.600258,.0176284,.87291,.994156,.445975,.193912,1,.980407,.247105,.262699]},{ColorSpace:"Lab",Name:"erdc_rainbow_dark",RGBPoints:[-1,0,0,.423499,-.866221,0,.119346,.529237,-.732441,0,.238691,.634976,-.598662,0,.346852,.68788,-.464883,0,.45022,.718141,-.331104,0,.553554,.664839,-.197324,0,.651082,.519303,-.0635452,.115841,.72479,.352857,.0702341,.326771,.781195,.140187,.204013,.522765,.798524,.0284624,.337793,.703162,.788685,.00885756,.471572,.845118,.751133,0,.605351,.955734,.690825,0,.73913,.995402,.567916,.0618524,.87291,.987712,.403398,.164851,1,.980407,.247105,.262699]},{ColorSpace:"Lab",Name:"nic_CubicL",RGBPoints:[-1,.479965,.0118108,.5307,-.87451,.522213,.0551282,.706919,-.74902,.50839,.237278,.867764,-.623529,.451617,.373834,.987255,-.498039,.39365,.497255,.97506,-.372549,.328631,.599639,.891843,-.247059,.250043,.690286,.778553,-.121569,.249656,.764905,.645857,.00392157,.297954,.821466,.50449,.129412,.337509,.872595,.358447,.254902,.430011,.913789,.297079,.380392,.587191,.931381,.333353,.505882,.727937,.93591,.353742,.631373,.826403,.921081,.365066,.756863,.893201,.846317,.372662,.882353,.965347,.73884,.378506,1,.983235,.597451,.366856]},{ColorSpace:"Lab",Name:"nic_CubicYF",RGBPoints:[-1,.5151,.0482,.6697,-.87451,.520711,.168955,.800574,-.74902,.493694,.278596,.911824,-.623529,.440026,.369475,.984978,-.498039,.398932,.457593,.987053,-.372549,.350651,.540644,.929608,-.247059,.298827,.615625,.857729,-.121569,.239928,.685061,.769531,.00392157,.228832,.739349,.673287,.129412,.263297,.78608,.569988,.254902,.298107,.828337,.460214,.380392,.33092,.864071,.352674,.505882,.38306,.898169,.287309,.631373,.49023,.917481,.307961,.756863,.62372,.926026,.332309,.882353,.717458,.92527,.342476,1,.8,.9255,.3529]},{ColorSpace:"Lab",Name:"gist_earth",RGBPoints:[-1,0,0,0,-.87451,.239216,.027451,.415686,-.74902,.0901961,.254902,.556863,-.623529,.0941176,.352941,.54902,-.498039,.105882,.435294,.533333,-.372549,.12549,.52549,.501961,-.247059,.156863,.596078,.443137,-.121569,.196078,.65098,.380392,.00392157,.282353,.717647,.301961,.129412,.466667,.772549,.27451,.254902,.678431,.784314,.309804,.380392,.901961,.756863,.376471,.505882,.992157,.705882,.521569,.631373,1,.721569,.701961,.756863,1,.784314,.784314,.882353,1,.866667,.866667,1,1,1,1]},{ColorSpace:"Lab",Name:"2hot",RGBPoints:[-1,.0416667,0,0,-.873016,.208333,0,0,-.746032,.375,0,0,-.619048,.541667,0,0,-.492063,.708333,0,0,-.365079,.854137,0,0,-.238095,.937488,.039062,0,-.111111,1,.208333,0,.015873,1,.375,0,.142857,1,.541667,0,.269841,1,.708333,0,.396825,1,.858805,.03125,.52381,1,.947392,.15625,.650794,1,1,.3125,.777778,1,1,.5625,.904762,1,1,.8125,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_red2yellow_BW",RGBPoints:[-1,7.54296e-7,0,109827e-10,-.87451,.18285,.0264094,0,-.74902,.3066,0,0,-.623529,.422841,0,0,-.498039,.522945,0,0,-.372549,.605721,0,0,-.247059,.672502,.14168,0,-.121569,.728167,.244025,0,.00392157,.781215,.333454,0,.129412,.825,.423586,0,.254902,.855893,.516793,0,.380392,.880491,.608846,0,.505882,.910305,.695505,0,.631373,.94109,.779067,.223528,.756863,.967873,.858572,.473521,.882353,.986815,.933211,.751583,1,1,1,.999997]},{ColorSpace:"Lab",Name:"erdc_marine2gold_BW",RGBPoints:[-1,1.11641e-7,0,162551e-11,-.87451,.0413146,.0619808,.209857,-.74902,.0185557,.101341,.350684,-.623529,.00486405,.149847,.461054,-.498039,.0836345,.210845,.517906,-.372549,.173222,.276134,.541793,-.247059,.259857,.343877,.535869,-.121569,.362299,.408124,.504293,.00392157,.468266,.468276,.468257,.129412,.582781,.527545,.374914,.254902,.691591,.585251,.274266,.380392,.784454,.645091,.247332,.505882,.862299,.710383,.27518,.631373,.920863,.782923,.351563,.756863,.955792,.859699,.533541,.882353,.976162,.93433,.780671,1,1,1,.999983]},{ColorSpace:"Lab",Name:"erdc_blue2gold_BW",RGBPoints:[-1,0,0,0,-.87451,.0742735,.0440331,.230013,-.74902,.125276,.0258685,.415826,-.623529,.143879,.0163031,.591346,-.498039,.212261,.0627855,.705239,-.372549,.306048,.141178,.763636,-.247059,.391537,.232286,.773263,-.121569,.461734,.336633,.708321,.00392157,.54209,.427581,.590007,.129412,.61704,.508623,.460978,.254902,.702703,.579586,.309117,.380392,.790336,.644811,.170397,.505882,.870173,.710733,.117134,.631373,.93656,.781991,.157144,.756863,.965672,.862068,.409836,.882353,.985751,.936296,.714162,1,1,1,.999999]},{ColorSpace:"Lab",Name:"erdc_sapphire2gold_BW",RGBPoints:[-1,.107704,.107708,.107694,-.87451,.1851,.112354,.308554,-.74902,.236782,.114233,.48788,-.623529,.28296,.126187,.639464,-.498039,.344787,.171643,.739713,-.372549,.413325,.242371,.76913,-.247059,.481863,.3131,.719841,-.121569,.550402,.383829,.612222,.00392157,.61894,.454558,.51126,.129412,.687478,.525287,.39993,.254902,.756017,.596016,.289923,.380392,.824555,.666745,.255498,.505882,.892979,.736822,.27696,.631373,.938851,.804966,.351734,.756863,.966491,.874853,.53572,.882353,.982105,.94153,.782579,1,1,1,.999986]},{ColorSpace:"Lab",Name:"erdc_red2purple_BW",RGBPoints:[-1,0,0,0,-.87451,.167793,.0166271,.0431278,-.74902,.262608,.0107595,.0791181,-.623529,.351902,.0101858,.100926,-.498039,.441257,.0160835,.131919,-.372549,.5221,.0555972,.195625,-.247059,.593852,.104294,.310234,-.121569,.654628,.158115,.448486,.00392157,.707443,.220914,.570253,.129412,.749504,.293268,.67897,.254902,.781587,.370517,.779269,.380392,.809951,.451099,.855831,.505882,.84424,.531462,.900451,.631373,.865174,.620901,.91606,.756863,.875041,.714054,.910284,.882353,.880764,.80554,.896276,1,.887572,.887591,.887556]},{ColorSpace:"Lab",Name:"erdc_purple2pink_BW",RGBPoints:[-1,0,0,0,-.87451,.117562,.0291202,.175876,-.74902,.178368,.0458476,.285454,-.623529,.237731,.0680173,.387717,-.498039,.300877,.0956291,.484802,-.372549,.370929,.136858,.554985,-.247059,.449033,.189273,.58863,-.121569,.529971,.245796,.598587,.00392157,.609914,.300643,.610244,.129412,.697079,.351286,.616371,.254902,.785858,.401991,.617376,.380392,.862517,.45745,.64463,.505882,.91359,.525462,.705336,.631373,.932583,.61064,.767412,.756863,.922478,.706966,.817522,.882353,.901302,.803071,.856311,1,.887571,.887591,.887549]},{ColorSpace:"Lab",Name:"erdc_pbj_lin",RGBPoints:[-1,0,0,0,-.87451,.091821,.0611476,.10617,-.74902,.160311,.0900022,.192713,-.623529,.22484,.12126,.272128,-.498039,.291263,.157469,.340828,-.372549,.360015,.200388,.388903,-.247059,.437497,.250058,.387201,-.121569,.512636,.304969,.355955,.00392157,.582603,.360874,.33488,.129412,.655126,.416374,.306351,.254902,.725889,.473329,.279051,.380392,.778125,.537928,.302697,.505882,.815894,.606931,.382431,.631373,.839159,.679308,.497608,.756863,.854748,.751666,.631792,.882353,.869483,.822508,.768592,1,.887572,.887589,.887565]},{ColorSpace:"Lab",Name:"erdc_blue2green_muted",RGBPoints:[-1,.107704,.107708,.107695,-.87451,.141522,.13066,.270741,-.74902,.180123,.146119,.42308,-.623529,.210161,.169674,.551795,-.498039,.239701,.212939,.634969,-.372549,.253916,.282947,.653641,-.247059,.242791,.366933,.608521,-.121569,.226302,.446776,.52693,.00392157,.236237,.514689,.458798,.129412,.274641,.577589,.376069,.254902,.349625,.633993,.288131,.380392,.4437,.683677,.260497,.505882,.536247,.731214,.285424,.631373,.628472,.777128,.349151,.756863,.718259,.819287,.496825,.882353,.804768,.856164,.703299,1,.887571,.887591,.887548]},{ColorSpace:"Lab",Name:"erdc_blue2green_BW",RGBPoints:[-1,3.63578e-7,0,529374e-11,-.87451,.0539915,.0577948,.212806,-.74902,.0620393,.0758942,.388959,-.623529,.0697499,.102032,.54177,-.498039,.113295,.156156,.64334,-.372549,.152047,.243196,.670283,-.247059,.158096,.344084,.622864,-.121569,.151142,.43922,.532767,.00392157,.17155,.521588,.457719,.129412,.225861,.599141,.363997,.254902,.32328,.67007,.259083,.380392,.442344,.733697,.223754,.505882,.558409,.794941,.257411,.631373,.673875,.854344,.340822,.756863,.787244,.909326,.524717,.882353,.896483,.958063,.775914,1,1,1,.999982]},{ColorSpace:"Lab",Name:"GREEN-WHITE_LINEAR",RGBPoints:[-1,0,0,0,-.87451,0,.062745,0,-.74902,0,.12549,0,-.623529,0,.188235,0,-.498039,0,.25098,0,-.372549,0,.313725,0,-.247059,0,.376471,0,-.121569,.094118,.439216,0,.00392157,.196078,.501961,0,.129412,.294118,.564706,0,.254902,.396078,.627451,0,.380392,.498039,.690196,0,.505882,.6,.752941,.145098,.631373,.701961,.815686,.364706,.756863,.8,.878431,.580392,.882353,.901961,.941176,.796078,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_green2yellow_BW",RGBPoints:[-1,0,0,0,-.87451,0,.105542,.0603919,-.74902,0,.159454,.104148,-.623529,0,.219502,.15542,-.498039,0,.282276,.203811,-.372549,0,.346331,.235652,-.247059,0,.411765,.235428,-.121569,0,.477177,.217977,.00392157,.0593644,.541635,.21361,.129412,.233081,.604722,.210591,.254902,.369803,.664942,.226536,.380392,.498446,.722367,.288237,.505882,.601929,.782244,.380815,.631373,.703207,.840497,.512134,.756863,.803186,.896433,.674462,.882353,.903834,.950266,.846715,1,1,1,.999981]},{ColorSpace:"Lab",Name:"blue2cyan",RGBPoints:[-1,0,0,0,-.87451,0,.152941,.364706,-.74902,0,.254902,.470588,-.623529,0,.34902,.572549,-.498039,0,.443137,.670588,-.372549,0,.537255,.772549,-.247059,0,.627451,.870588,-.121569,0,.717647,.964706,.00392157,.0784314,.772549,1,.129412,.207843,.858824,1,.254902,.32549,.941176,1,.380392,.45098,1,1,.505882,.560784,1,1,.631373,.662745,1,1,.756863,.760784,1,1,.882353,.870588,1,1,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_blue2cyan_BW",RGBPoints:[-1,4.05298e-7,0,59012e-10,-.87451,.0207526,.0740933,.18093,-.74902,0,.121033,.30343,-.623529,0,.166892,.416095,-.498039,0,.216768,.524796,-.372549,.0164769,.275471,.608585,-.247059,.0544527,.344824,.659267,-.121569,.0880643,.419118,.688675,.00392157,.127938,.492556,.720256,.129412,.149476,.566946,.756918,.254902,.188961,.641333,.792122,.380392,.245482,.715336,.827609,.505882,.329216,.786235,.874761,.631373,.453558,.852803,.918466,.756863,.626281,.910493,.954,.882353,.82257,.958709,.980146,1,1,1,.999989]},{ColorSpace:"Lab",Name:"erdc_blue_BW",RGBPoints:[-1,0,0,0,-.87451,.0425591,.0763529,.150682,-.74902,.0569472,.119154,.275403,-.623529,.0635978,.164772,.395427,-.498039,.0774342,.213851,.510014,-.372549,.106815,.267034,.615102,-.247059,.122093,.324649,.720068,-.121569,.160851,.387068,.806956,.00392157,.213754,.453516,.878012,.129412,.26722,.524656,.932436,.254902,.326844,.599279,.968038,.380392,.403403,.674712,.984784,.505882,.499703,.745519,1,.631373,.615055,.813983,1,.756863,.74405,.879228,1,.882353,.877909,.941913,1,1,1,1,.999996]},{ColorSpace:"Lab",Name:"BLUE-WHITE",RGBPoints:[-1,0,0,0,-.87451,0,0,.082353,-.74902,0,0,.168627,-.623529,0,0,.254902,-.498039,0,0,.337255,-.372549,0,0,.423529,-.247059,0,0,.509804,-.121569,0,.101961,.592157,.00392157,0,.203922,.678431,.129412,0,.301961,.764706,.254902,0,.403922,.85098,.380392,0,.505882,.933333,.505882,0,.603922,1,.631373,.254902,.705882,1,.756863,.509804,.807843,1,.882353,.764706,.905882,1,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_purple_BW",RGBPoints:[-1,4.264e-8,0,6.20844e-7,-.87451,.100579,.0593111,.145666,-.74902,.167794,.0889224,.254953,-.623529,.231446,.123339,.360511,-.498039,.296699,.163027,.461278,-.372549,.363211,.209286,.55306,-.247059,.431136,.260776,.637195,-.121569,.498202,.320012,.705799,.00392157,.567456,.380459,.778091,.129412,.629381,.445284,.8448,.254902,.688373,.517374,.895694,.380392,.74891,.590906,.93976,.505882,.805017,.667956,.977626,.631373,.850914,.752618,.992396,.756863,.89724,.838454,.994093,.882353,.948461,.922603,.994449,1,1,1,.999967]},{ColorSpace:"Lab",Name:"erdc_magenta_BW",RGBPoints:[-1,0,0,254023e-10,-.87451,.128696,.0456782,.11635,-.74902,.228133,.0476299,.201452,-.623529,.327273,.0374065,.282107,-.498039,.420953,.0408166,.35709,-.372549,.511562,.0642203,.430511,-.247059,.599552,.102686,.504257,-.121569,.684646,.150536,.579429,.00392157,.765817,.205978,.656062,.129412,.839176,.27229,.731807,.254902,.89536,.357594,.797309,.380392,.930238,.457825,.846984,.505882,.945921,.564536,.880571,.631373,.948995,.670753,.902279,.756863,.947124,.772819,.918171,.882353,.947265,.869424,.934352,1,.954719,.95475,.954726]},{ColorSpace:"Lab",Name:"magenta",RGBPoints:[-1,0,0,0,-.87451,.364706,0,.152941,-.74902,.470588,0,.254902,-.623529,.572549,0,.34902,-.498039,.670588,0,.443137,-.372549,.772549,0,.537255,-.247059,.870588,0,.627451,-.121569,.964706,0,.717647,.00392157,1,.0784314,.772549,.129412,1,.207843,.858824,.254902,1,.32549,.941176,.380392,1,.45098,1,.505882,1,.560784,1,.631373,1,.662745,1,.756863,1,.760784,1,.882353,1,.870588,1,1,1,1,1]},{ColorSpace:"Lab",Name:"RED-PURPLE",RGBPoints:[-1,0,0,0,-.87451,.188235,0,.007843,-.74902,.345098,0,.035294,-.623529,.439216,0,.098039,-.498039,.533333,0,.152941,-.372549,.627451,.015686,.211765,-.247059,.721569,.031373,.266667,-.121569,.8,.047059,.329412,.00392157,.862745,.047059,.403922,.129412,.941176,.062745,.466667,.254902,.988235,.078431,.54902,.380392,.988235,.141176,.643137,.505882,.988235,.25098,.729412,.631373,.988235,.376471,.811765,.756863,.988235,.54902,.886275,.882353,.988235,.752941,.952941,1,.996078,.996078,.996078]},{ColorSpace:"Lab",Name:"erdc_red_BW",RGBPoints:[-1,0,0,0,-.87451,.147204,.0480135,.0401815,-.74902,.253411,.0617478,.0301333,-.623529,.356059,.0746331,.0446897,-.498039,.457731,.0934935,.0636931,-.372549,.557199,.122714,.0860013,-.247059,.665179,.144238,.105585,-.121569,.763833,.187056,.138326,.00392157,.847035,.254558,.189407,.129412,.905663,.345937,.258215,.254902,.941431,.447111,.346277,.380392,.962608,.546927,.457571,.505882,.987833,.637276,.569944,.631373,.994202,.732176,.687958,.756863,.993304,.826268,.800567,.882353,.994413,.917205,.906393,1,1,1,.999979]},{ColorSpace:"Lab",Name:"RED_TEMPERATURE",RGBPoints:[-1,0,0,0,-.87451,.090196,0,0,-.74902,.180392,0,0,-.623529,.270588,0,0,-.498039,.360784,0,0,-.372549,.45098,0,0,-.247059,.545098,0,0,-.121569,.635294,0,0,.00392157,.72549,.058824,0,.129412,.815686,.176471,0,.254902,.905882,.294118,0,.380392,1,.411765,0,.505882,1,.533333,.027451,.631373,1,.65098,.27451,.756863,1,.768627,.521569,.882353,1,.886275,.768627,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_orange_BW",RGBPoints:[-1,0,0,253806e-10,-.87451,.135871,.0593824,0,-.74902,.224328,.0907216,0,-.623529,.318083,.119647,0,-.498039,.414443,.150246,0,-.372549,.511077,.184884,0,-.247059,.605501,.226033,0,-.121569,.695274,.275491,0,.00392157,.777826,.334445,0,.129412,.851498,.402441,0,.254902,.915899,.47759,602975e-9,.380392,.971984,.557882,.0361443,.505882,1,.641287,.135967,.631373,1,.725198,.27997,.756863,1,.808205,.438135,.882353,1,.89306,.587036,1,1,.977928,.721599]},{ColorSpace:"Lab",Name:"heated_object",RGBPoints:[-1,0,0,0,-.87451,.34902,.0862745,0,-.74902,.45098,.172549,0,-.623529,.52549,.231373,0,-.498039,.580392,.278431,0,-.372549,.623529,.313725,0,-.247059,.670588,.352941,0,-.121569,.717647,.392157,0,.00392157,.772549,.439216,0,.129412,.839216,.494118,0,.254902,.901961,.541176,0,.380392,.968627,.6,0,.505882,1,.658824,0,.631373,1,.721569,0,.756863,1,.827451,.298039,.882353,1,.976471,.72549,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_gold_BW",RGBPoints:[-1,0,0,190933e-10,-.87451,.128363,.0636265,0,-.74902,.193795,.111057,0,-.623529,.25976,.15987,0,-.498039,.328546,.210589,0,-.372549,.399726,.26332,0,-.247059,.472969,.318261,0,-.121569,.546245,.375827,0,.00392157,.61745,.436719,0,.129412,.685545,.501113,0,.254902,.749578,.568799,0,.380392,.80962,.6394,0,.505882,.865572,.712699,.10257,.631373,.917709,.787569,.233665,.756863,.966914,.863138,.369608,.882353,1,.939405,.496104,1,.999225,1,.612275]},{ColorSpace:"Lab",Name:"erdc_brown_BW",RGBPoints:[-1,3.3216e-7,0,483629e-11,-.87451,.14693,.0518172,0,-.74902,.225806,.0814996,0,-.623529,.301681,.111452,0,-.498039,.370487,.150664,0,-.372549,.43108,.199477,0,-.247059,.4849,.255107,0,-.121569,.536798,.313486,0,.00392157,.59286,.371167,0,.129412,.653119,.428135,0,.254902,.714589,.485917,.0379541,.380392,.774667,.54565,.116634,.505882,.831222,.608047,.183895,.631373,.880305,.674199,.260298,.756863,.922314,.742472,.367086,.882353,.959408,.811222,.497258,1,.993548,.875183,.622093]},{ColorSpace:"Lab",Name:"copper_Matlab",RGBPoints:[-1,0,0,0,-.87451,.0784314,.0501961,.0313725,-.74902,.156863,.100392,.0627451,-.623529,.235294,.150588,.0941176,-.498039,.313725,.200784,.12549,-.372549,.392157,.25098,.156863,-.247059,.470588,.301176,.188235,-.121569,.54902,.351373,.219608,.00392157,.627451,.401569,.25098,.129412,.705882,.451765,.282353,.254902,.784314,.501961,.313725,.380392,.862745,.552157,.345098,.505882,.941176,.602353,.376471,.631373,1,.652549,.407843,.756863,1,.702745,.439216,.882353,1,.752941,.470588,1,1,.8,.5]},{ColorSpace:"Lab",Name:"pink_Matlab",RGBPoints:[-1,0,0,0,-.87451,.312416,.204524,.204524,-.74902,.441822,.289241,.289241,-.623529,.54112,.354246,.354246,-.498039,.624831,.409048,.409048,-.372549,.698582,.45733,.45733,-.247059,.764404,.502282,.500979,-.121569,.791292,.591516,.54112,.00392157,.817297,.66895,.578481,.129412,.842499,.738308,.613572,.254902,.866968,.801687,.646762,.380392,.890766,.86041,.678329,.505882,.913944,.913944,.711254,.631373,.936549,.936549,.79459,.756863,.958621,.958621,.869979,.882353,.980196,.980196,.939336,1,1,1,1]},{ColorSpace:"Lab",Name:"bone_Matlab",RGBPoints:[-1,0,0,0,-.87451,.054902,.054902,.075817,-.74902,.109804,.109804,.151634,-.623529,.164706,.164706,.227451,-.498039,.219608,.219608,.303268,-.372549,.27451,.27451,.379085,-.247059,.329412,.329902,.454412,-.121569,.384314,.405719,.509314,.00392157,.439216,.481536,.564216,.129412,.494118,.557353,.619118,.254902,.54902,.63317,.67402,.380392,.603922,.708987,.728922,.505882,.660294,.783824,.783824,.631373,.746569,.838725,.838725,.756863,.832843,.893627,.893627,.882353,.919118,.948529,.948529,1,1,1,1]},{ColorSpace:"Lab",Name:"gray_Matlab",RGBPoints:[-1,0,0,0,-.87451,.0627451,.0627451,.0627451,-.74902,.12549,.12549,.12549,-.623529,.188235,.188235,.188235,-.498039,.25098,.25098,.25098,-.372549,.313725,.313725,.313725,-.247059,.376471,.376471,.376471,-.121569,.439216,.439216,.439216,.00392157,.501961,.501961,.501961,.129412,.564706,.564706,.564706,.254902,.627451,.627451,.627451,.380392,.690196,.690196,.690196,.505882,.752941,.752941,.752941,.631373,.815686,.815686,.815686,.756863,.878431,.878431,.878431,.882353,.941176,.941176,.941176,1,1,1,1]},{ColorSpace:"Lab",Name:"Purples",RGBPoints:[-1,.247059,0,.490196,-.87451,.288397,.07677,.525629,-.74902,.32975,.153587,.561092,-.623529,.373057,.236263,.600461,-.498039,.416363,.319,.639923,-.372549,.459669,.405613,.685198,-.247059,.503345,.491534,.730058,-.121569,.562399,.54862,.757616,.00392157,.621453,.606075,.785544,.129412,.680508,.674971,.824914,.254902,.739562,.743406,.863899,.380392,.798616,.800492,.893426,.505882,.85684,.856655,.922491,.631373,.898178,.894056,.942176,.756863,.938654,.930919,.961646,.882353,.964245,.958478,.977393,1,.988235,.984314,.992157]},{ColorSpace:"Lab",Name:"Blues",RGBPoints:[-1,.031373,.188235,.419608,-.87451,.031373,.253195,.516063,-.74902,.031757,.318139,.612149,-.623529,.080969,.38113,.661361,-.498039,.130427,.444152,.710327,-.372549,.195386,.509112,.743791,-.247059,.260715,.573841,.777209,-.121569,.341423,.628958,.808704,.00392157,.422745,.684075,.839892,.129412,.523137,.739193,.861546,.254902,.622684,.793464,.883429,.380392,.701423,.826928,.910988,.505882,.778685,.8603,.937993,.631373,.825928,.891795,.953741,.756863,.87328,.923291,.969489,.882353,.922491,.954787,.985236,1,.968627,.984314,1]},{ColorSpace:"Lab",Name:"Greens",RGBPoints:[-1,0,.266667,.105882,-.87451,0,.347374,.139346,-.74902,538e-6,.427912,.172933,-.623529,.069435,.486967,.222145,-.498039,.138178,.546082,.271326,-.372549,.197232,.609073,.31857,-.247059,.257255,.671742,.365859,-.121569,.357647,.720953,.415071,.00392157,.45767,.769919,.465021,.129412,.546251,.811257,.537855,.254902,.634295,.852211,.610688,.380392,.709097,.883706,.683522,.505882,.78316,.914833,.755894,.631373,.842215,.938454,.818885,.756863,.899977,.961538,.880692,.882353,.935409,.975317,.92203,1,.968627,.988235,.960784]},{ColorSpace:"Lab",Name:"PuBu",RGBPoints:[-1,.301961,0,.294118,-.87451,.404321,.029527,.390573,-.74902,.50599,.059592,.486782,-.623529,.519769,.158016,.551742,-.498039,.533456,.256194,.616301,-.372549,.54133,.33887,.655671,-.247059,.54902,.421592,.695087,-.121569,.54902,.506236,.736424,.00392157,.550127,.590573,.777701,.129412,.585559,.665375,.81707,.254902,.622145,.739023,.855825,.380392,.687105,.784298,.879446,.505882,.752065,.829758,.903253,.631373,.817024,.87897,.930811,.756863,.880907,.927213,.957832,.882353,.926182,.958708,.975548,1,.968627,.988235,.992157]},{ColorSpace:"Lab",Name:"BuPu",RGBPoints:[-1,.007843,.219608,.345098,-.87451,.01178,.286536,.449427,-.74902,.015702,.35328,.553479,-.623529,.01767,.396586,.622376,-.498039,.021115,.4402,.690688,-.372549,.11757,.503191,.722184,-.247059,.214625,.565859,.753633,-.121569,.336671,.615071,.78316,.00392157,.457978,.663975,.812503,.129412,.556401,.703345,.836125,.254902,.65421,.742714,.859669,.380392,.736886,.782084,.881323,.505882,.81827,.821638,.903068,.631373,.873387,.864944,.92669,.756863,.927536,.907605,.949988,.882353,.964937,.9391,.967705,1,1,.968627,.984314]},{ColorSpace:"Lab",Name:"BuGn",RGBPoints:[-1,.031373,.25098,.505882,-.87451,.031373,.329719,.590527,-.74902,.031911,.408397,.674787,-.623529,.100807,.479262,.710219,-.498039,.169704,.550219,.745744,-.372549,.238601,.62699,.787082,-.247059,.307958,.703114,.826759,-.121569,.39654,.752326,.797232,.00392157,.485121,.801046,.767705,.129412,.573702,.83451,.738178,.254902,.661592,.867743,.711034,.380392,.732457,.895302,.74253,.505882,.801845,.922307,.774579,.631373,.841215,.938055,.817885,.756863,.880907,.95391,.861084,.882353,.926182,.971626,.902422,1,.968627,.988235,.941176]},{ColorSpace:"Lab",Name:"GnBu",RGBPoints:[-1,0,.266667,.105882,-.87451,0,.347374,.139346,-.74902,538e-6,.427912,.172933,-.623529,.069435,.486967,.222145,-.498039,.138178,.546175,.272095,-.372549,.197232,.615071,.368551,-.247059,.256609,.683276,.464867,-.121569,.329443,.722645,.555417,.00392157,.403137,.762138,.645413,.129412,.503529,.805444,.718247,.254902,.603922,.848597,.790465,.380392,.704314,.887966,.847551,.505882,.802307,.926321,.903714,.631373,.851519,.944037,.941115,.756863,.899977,.961538,.976901,.882353,.935409,.975317,.984775,1,.968627,.988235,.992157]},{ColorSpace:"Lab",Name:"GnBuPu",RGBPoints:[-1,.003922,.27451,.211765,-.87451,.003922,.349312,.280661,-.74902,.003937,.423852,.349773,-.623529,.005905,.46519,.446228,-.498039,.009443,.506344,.542837,-.372549,.111803,.535871,.649135,-.247059,.214025,.565859,.753633,-.121569,.310481,.615071,.78316,.00392157,.407797,.663975,.812503,.129412,.531811,.703345,.836125,.254902,.65421,.742714,.859669,.380392,.736886,.782084,.881323,.505882,.81827,.821176,.902884,.631373,.873387,.854641,.922568,.756863,.927536,.888535,.942361,.882353,.964937,.929873,.964014,1,1,.968627,.984314]},{ColorSpace:"Lab",Name:"BuGnYl",RGBPoints:[-1,.031373,.113725,.345098,-.87451,.088458,.159,.463206,-.74902,.145052,.204567,.5807,-.623529,.139146,.287243,.620069,-.498039,.13318,.370196,.659562,-.372549,.123337,.470588,.706805,-.247059,.115386,.570335,.753126,-.121569,.186251,.643168,.761,.00392157,.258716,.71514,.768074,.129412,.380761,.760415,.750358,.254902,.503576,.806075,.732795,.380392,.645306,.861192,.719016,.505882,.783899,.91511,.705606,.631373,.858701,.944637,.6997,.756863,.931349,.973303,.698424,.882353,.966782,.987082,.777163,1,1,1,.85098]},{ColorSpace:"Lab",Name:"PuRd",RGBPoints:[-1,.286275,0,.415686,-.87451,.38273,.001968,.441276,-.74902,.479231,.003922,.466774,-.623529,.581592,.003922,.480554,-.498039,.683799,.00549,.494887,-.372549,.776317,.105882,.544098,-.247059,.867866,.206321,.592618,-.121569,.919047,.308681,.612303,.00392157,.968812,.411226,.632603,.129412,.974717,.519493,.671972,.254902,.980546,.626451,.71065,.380392,.984483,.701253,.732303,.505882,.988328,.77504,.755617,.631373,.990296,.828189,.812703,.756863,.992372,.880907,.869035,.882353,.996309,.926182,.912341,1,1,.968627,.952941]},{ColorSpace:"Lab",Name:"RdPu",RGBPoints:[-1,.403922,0,.121569,-.87451,.500377,0,.192434,-.74902,.596909,277e-6,.263037,-.623529,.703206,.035709,.300438,-.498039,.808612,.071296,.338854,-.372549,.857824,.116571,.441215,-.247059,.905513,.163552,.54293,-.121569,.889765,.281661,.617732,.00392157,.873156,.39897,.691611,.129412,.82985,.491488,.736886,.254902,.789081,.583237,.781853,.380392,.810734,.656071,.819254,.505882,.833126,.729181,.85684,.631373,.870527,.80792,.898178,.756863,.907605,.884398,.938331,.882353,.9391,.921799,.958016,1,.968627,.956863,.976471]},{ColorSpace:"Lab",Name:"Oranges",RGBPoints:[-1,.498039,.152941,.015686,-.87451,.57481,.182468,.013718,-.74902,.651765,.212042,.011734,-.623529,.752157,.247474,.007797,-.498039,.851719,.283368,.004475,-.372549,.898962,.348328,.039908,-.247059,.945652,.413426,.076401,-.121569,.969273,.484291,.157109,.00392157,.992157,.554971,.238185,.129412,.992157,.619931,.330704,.254902,.992157,.684967,.423837,.380392,.992157,.751895,.532103,.505882,.992249,.817716,.639354,.631373,.994218,.861023,.725967,.756863,.996186,.903576,.810965,.882353,.998155,.933103,.868051,1,1,.960784,.921569]},{ColorSpace:"Lab",Name:"Reds",RGBPoints:[-1,.403922,0,.05098,-.87451,.525967,.029527,.066728,-.74902,.647643,.058962,.082476,-.623529,.722445,.076678,.098224,-.498039,.797186,.095194,.114187,-.372549,.868051,.164091,.143714,-.247059,.937809,.233541,.173933,-.121569,.96143,.326059,.232987,.00392157,.984375,.418147,.292657,.129412,.986344,.496886,.371396,.254902,.988235,.575702,.450673,.380392,.988235,.656409,.543191,.505882,.98842,.736747,.635894,.631373,.992357,.809581,.732349,.756863,.996186,.880692,.826759,.882353,.998155,.92203,.885813,1,1,.960784,.941176]},{ColorSpace:"Lab",Name:"RdOr",RGBPoints:[-1,.498039,0,0,-.87451,.6004,0,0,-.74902,.702514,738e-6,477e-6,-.623529,.773379,.095225,.061499,-.498039,.843875,.189865,.12283,-.372549,.891119,.294195,.203537,-.247059,.937855,.397924,.283137,-.121569,.963445,.476663,.316601,.00392157,.988297,.555771,.351665,.129412,.990265,.646321,.436309,.254902,.992157,.735256,.519646,.380392,.992157,.784468,.570827,.505882,.992249,.833218,.623483,.631373,.994218,.872587,.706159,.756863,.996186,.911419,.788189,.882353,.998155,.940946,.859054,1,1,.968627,.92549]},{ColorSpace:"Lab",Name:"BrOrYl",RGBPoints:[-1,.4,.145098,.023529,-.87451,.500392,.174625,.019592,-.74902,.600784,.204291,.015656,-.623529,.701176,.251534,.011719,-.498039,.800984,.299146,.008397,-.372549,.863975,.370012,.043829,-.247059,.926321,.441107,.0794,-.121569,.961753,.521815,.120738,.00392157,.996078,.602645,.163122,.129412,.996078,.68729,.237924,.254902,.996078,.771011,.314879,.380392,.996078,.832034,.444798,.505882,.996171,.892042,.572595,.631373,.998139,.931411,.65724,.756863,1,.969489,.741669,.882353,1,.985236,.822376,1,1,1,.898039]},{ColorSpace:"Lab",Name:"RdOrYl",RGBPoints:[-1,.501961,0,.14902,-.87451,.622038,0,.14902,-.74902,.741761,4e-4,.148866,-.623529,.816563,.05158,.129181,-.498039,.890965,.10356,.110235,-.372549,.940177,.205921,.137793,-.247059,.988281,.308789,.165536,-.121569,.99025,.432803,.200969,.00392157,.992218,.555217,.236278,.129412,.994187,.628051,.267774,.254902,.996078,.701038,.301269,.380392,.996078,.777809,.383945,.505882,.996171,.852826,.466621,.631373,.998139,.892195,.549296,.756863,1,.931349,.632188,.882353,1,.966782,.7188,1,1,1,.8]},{ColorSpace:"Lab",Name:"CIELab_blue2red",RGBPoints:[-1,0,.6,.74902,1,.76863,.46667,.34118]},{ColorSpace:"Lab",Name:"blue2yellow",RGBPoints:[-1,0,0,1,0,.5,.5,.5,1,1,1,0]},{ColorSpace:"Lab",Name:"erdc_blue2gold",RGBPoints:[-1,.175119,.0438468,1,-.874016,.22383,.159771,.94557,-.748031,.27254,.233611,.891216,-.622047,.321251,.296526,.836857,-.496063,.369962,.354296,.782359,-.370079,.418672,.409139,.72754,-.244094,.467383,.462152,.672148,-.11811,.51609,.51396,.615825,.00787402,.572863,.55452,.559172,.133858,.630269,.593822,.517729,.259843,.689588,.624668,.47446,.385827,.745394,.656113,.428638,.511811,.798624,.688104,.379105,.637795,.849926,.720593,.323834,.76378,.899765,.753543,.258657,.889764,.948487,.78692,.171778,1,.990413,.816451,.00729848]},{ColorSpace:"Lab",Name:"erdc_blue2yellow",RGBPoints:[-1,.0830122,0,.495617,-.87451,.141973,.0551288,.57363,-.74902,.193048,.110258,.604561,-.623529,.234231,.165386,.57643,-.498039,.275413,.220515,.548299,-.372549,.316596,.275644,.520169,-.247059,.357778,.330773,.492038,-.121569,.398961,.385901,.463908,.00392157,.449929,.438487,.426815,.129412,.511572,.488299,.379944,.254902,.581222,.53603,.325741,.380392,.650871,.583761,.271538,.505882,.720521,.631493,.217335,.631373,.79017,.679224,.163132,.756863,.85982,.726955,.108929,.882353,.910254,.774159,.14112,1,.927513,.81759,.306289]},{ColorSpace:"Lab",Name:"erdc_cyan2orange",RGBPoints:[-1,.0471513,.213874,.414329,-.87451,.0674702,.256648,.439027,-.74902,.0959957,.299331,.462089,-.623529,.132428,.341872,.483212,-.498039,.188743,.38277,.500597,-.372549,.268511,.420229,.512179,-.247059,.352945,.455602,.519101,-.121569,.43893,.489368,.521538,.00392157,.522445,.522495,.522436,.129412,.600089,.555682,.53205,.254902,.67988,.587981,.539163,.380392,.761011,.619586,.544439,.505882,.84278,.650741,.548567,.631373,.910713,.687347,.557822,.756863,.952232,.734972,.577775,.882353,.975642,.789858,.604868,1,.990752,.843643,.632857]},{ColorSpace:"Lab",Name:"erdc_purple2green",RGBPoints:[-1,.235006,.0483128,.530899,-.87451,.302968,.108419,.552391,-.74902,.360241,.166059,.569502,-.623529,.406746,.226782,.579373,-.498039,.444073,.28964,.582094,-.372549,.473648,.353774,.577947,-.247059,.497636,.418154,.567911,-.121569,.519086,.481741,.553968,.00392157,.542884,.542914,.542875,.129412,.566303,.603989,.527499,.254902,.595218,.662965,.516857,.380392,.628641,.720701,.510673,.505882,.665373,.777849,.508165,.631373,.704182,.834921,.508303,.756863,.743846,.892328,.50999,.882353,.783158,.950422,.512181,1,.818617,1,.513888]},{ColorSpace:"Lab",Name:"erdc_purple2green_dark",RGBPoints:[-1,.107656,0,.428682,-.87451,.1924,0,.449799,-.74902,.255118,.0648939,.466726,-.623529,.304256,.133066,.476703,-.498039,.343202,.19716,.479793,-.372549,.373876,.260353,.476241,-.247059,.398497,.322872,.466953,-.121569,.420016,.384252,.453785,.00392157,.44319,.443216,.443186,.129412,.465553,.502139,.428233,.254902,.492959,.559151,.417591,.380392,.524654,.615092,.411016,.505882,.55959,.670583,.40779,.631373,.596614,.726102,.406948,.756863,.634544,.782032,.407439,.882353,.672183,.838703,.408237,1,.706131,.892759,.408452]},{ColorSpace:"Lab",Name:"coolwarm",RGBPoints:[-1,.229806,.298718,.753683,-.875,.303869,.406535,.844959,-.75,.383013,.509419,.917388,-.625,.466667,.604563,.968155,-.5,.552953,.688929,.995376,-.375,.639176,.7596,.998151,-.25,.722193,.813953,.976575,-.125,.798692,.849786,.931689,0,.865395,.86541,.865396,.125,.924128,.827385,.774508,.25,.958853,.769768,.678008,.375,.969954,.694267,.579375,.5,.958003,.602842,.481776,.625,.923945,.497309,.38797,.75,.869187,.378313,.300267,.875,.795632,.241284,.220526,1,.705673,.0155562,.150233]},{ColorSpace:"Lab",Name:"BuRd",RGBPoints:[-1,.019608,.188235,.380392,-.87451,.088504,.321107,.564937,-.74902,.163399,.444983,.697501,-.623529,.247059,.555709,.754095,-.498039,.420684,.676432,.818685,-.372549,.606459,.789773,.880277,-.247059,.761476,.868512,.924567,-.121569,.878047,.925721,.951942,.00392157,.969089,.966474,.964937,.129412,.983852,.897578,.846828,.254902,.982468,.800692,.706113,.380392,.960323,.66782,.536332,.505882,.894579,.503806,.399769,.631373,.81707,.33218,.281046,.756863,.728489,.155017,.197386,.882353,.576932,.055363,.14925,1,.403922,0,.121569]},{ColorSpace:"Lab",Name:"Spectral_lowBlue",RGBPoints:[-1,.368627,.309804,.635294,-.87451,.260361,.450058,.70173,-.74902,.248058,.591311,.717186,-.623529,.376009,.734025,.658132,-.498039,.537947,.814764,.64506,-.372549,.702345,.879585,.636678,-.247059,.84752,.938639,.607151,-.121569,.940408,.976163,.656055,.00392157,.999923,.997616,.745021,.129412,.997463,.921338,.61707,.254902,.995002,.824606,.499885,.380392,.992541,.701576,.39654,.505882,.973472,.547405,.318108,.631373,.937793,.398539,.270127,.756863,.861515,.282891,.299654,.882353,.746482,.144637,.288812,1,.619608,.003922,.258824]},{ColorSpace:"Lab",Name:"GnRP",RGBPoints:[-1,0,.266667,.105882,-.87451,.066436,.394617,.174779,-.74902,.168858,.524567,.25767,-.623529,.323875,.657439,.361015,-.498039,.504883,.772318,.506344,-.372549,.678431,.870127,.654902,-.247059,.803922,.921799,.780392,-.121569,.897116,.951942,.882814,.00392157,.967397,.965936,.967474,.129412,.928028,.879815,.930565,.254902,.866052,.780777,.882891,.380392,.77501,.665129,.821376,.505882,.675663,.537024,.737024,.631373,.57847,.396155,.645982,.756863,.492349,.223914,.547559,.882353,.375548,.096886,.423299,1,.25098,0,.294118]},{ColorSpace:"Lab",Name:"GYPi",RGBPoints:[-1,.152941,.392157,.098039,-.87451,.246444,.505344,.117724,-.74902,.351942,.614533,.161399,-.623529,.474971,.717878,.240138,-.498039,.611995,.811226,.392849,-.372549,.746328,.893118,.565321,-.247059,.859516,.94233,.747405,-.121569,.928105,.96386,.875663,.00392157,.969089,.966859,.968012,.129412,.983852,.910265,.948328,.254902,.979239,.833218,.914648,.380392,.949712,.729873,.862976,.505882,.905652,.58293,.763552,.631373,.85521,.410073,.652211,.756863,.793695,.183699,.531642,.882353,.683737,.063899,.420761,1,.556863,.003922,.321569]},{ColorSpace:"Lab",Name:"GnYlRd",RGBPoints:[-1,0,.407843,.215686,-.87451,.063975,.525952,.277201,-.74902,.177932,.633064,.332718,-.623529,.364937,.724106,.379469,-.498039,.527951,.797155,.40223,-.372549,.678431,.862822,.433449,-.247059,.803922,.916955,.514648,-.121569,.909419,.961861,.625067,.00392157,.999923,.997616,.745021,.129412,.997463,.921338,.61707,.254902,.995002,.824606,.499885,.380392,.992541,.701576,.39654,.505882,.973472,.547405,.318108,.631373,.939023,.389927,.245521,.756863,.867666,.239831,.176624,.882353,.762399,.110727,.151326,1,.647059,0,.14902]},{ColorSpace:"Lab",Name:"GBBr",RGBPoints:[-1,0,.235294,.188235,-.87451,.002461,.338639,.301423,-.74902,.055902,.448981,.417609,-.623529,.183852,.56955,.538178,-.498039,.357785,.700115,.660746,-.372549,.540177,.819531,.77624,-.247059,.714879,.890888,.864821,-.121569,.851134,.934564,.922645,.00392157,.960861,.959785,.95694,.129412,.963322,.927797,.83391,.254902,.939946,.868897,.68935,.380392,.883353,.775394,.517109,.505882,.808074,.625836,.324106,.631373,.717647,.476355,.15494,.756863,.592157,.358247,.06882,.882353,.458593,.26436,.031142,1,.329412,.188235,.019608]},{ColorSpace:"Lab",Name:"PuOr",RGBPoints:[-1,.498039,.231373,.031373,-.87451,.62599,.30273,.026451,-.74902,.746943,.387082,.037524,-.623529,.85767,.490427,.071972,-.498039,.936409,.617762,.236371,-.372549,.992695,.743099,.43291,-.247059,.995156,.841523,.63714,-.121569,.985313,.913802,.813687,.00392157,.966244,.966398,.967705,.129412,.889965,.89504,.938178,.254902,.806151,.804306,.894656,.380392,.712649,.688658,.833141,.505882,.594233,.554325,.744637,.631373,.474894,.404229,.652364,.756863,.366628,.217224,.563783,.882353,.266436,.089965,.434833,1,.176471,0,.294118]},{ColorSpace:"Lab",Name:"PRGn",RGBPoints:[-1,.25098,0,.294118,-.87451,.383852,.103345,.431911,-.74902,.497732,.234679,.55371,-.623529,.583852,.40692,.652134,-.498039,.681968,.545175,.742561,-.372549,.7807,.672357,.825221,-.247059,.871742,.788005,.886736,-.121569,.930488,.885198,.932872,.00392157,.966321,.968089,.965859,.129412,.892503,.950865,.877278,.254902,.796078,.91857,.772549,.380392,.670588,.866897,.647059,.505882,.493195,.765398,.496655,.631373,.314187,.649135,.354556,.756863,.15917,.516263,.251211,.882353,.062284,.386621,.170473,1,0,.266667,.105882]},{ColorSpace:"Lab",Name:"PiYG",RGBPoints:[-1,.556863,.003922,.321569,-.87451,.692195,.067897,.427374,-.74902,.797539,.197847,.539177,-.623529,.859054,.424221,.659746,-.498039,.908574,.592618,.770319,-.372549,.951557,.736332,.866205,-.247059,.981084,.839677,.917878,-.121569,.98293,.913802,.949558,.00392157,.96732,.968474,.965629,.129412,.92549,.963552,.869666,.254902,.852441,.939254,.736025,.380392,.739254,.890042,.553941,.505882,.60323,.805536,.382238,.631373,.467282,.711419,.235217,.756863,.344252,.608074,.156478,.882353,.2406,.49827,.116494,1,.152941,.392157,.098039]},{ColorSpace:"Lab",Name:"OrPu",RGBPoints:[-1,.176471,0,.294118,-.87451,.272434,.095963,.444214,-.74902,.373395,.228912,.56932,-.623529,.481661,.415917,.657901,-.498039,.601922,.562937,.750481,-.372549,.718493,.695886,.836986,-.247059,.811995,.811534,.898501,-.121569,.894733,.8995,.940023,.00392157,.969166,.966859,.963629,.129412,.98639,.910265,.803691,.254902,.995002,.835371,.624375,.380392,.992541,.736947,.420146,.505882,.931949,.609458,.224221,.631373,.85075,.483968,.069819,.756863,.740023,.380623,.035371,.882353,.617993,.29827,.026759,1,.498039,.231373,.031373]},{ColorSpace:"Lab",Name:"BrBG",RGBPoints:[-1,.329412,.188235,.019608,-.87451,.467205,.269435,.031911,-.74902,.6,.365629,.074202,-.623529,.72549,.483737,.160323,-.498039,.812995,.635832,.336409,-.372549,.88689,.781238,.527874,-.247059,.943483,.87474,.700115,-.121569,.963168,.929796,.841599,.00392157,.957247,.959938,.959554,.129412,.84406,.932872,.920185,.254902,.70396,.886428,.859285,.380392,.529258,.815071,.770704,.505882,.346251,.691811,.653057,.631373,.175855,.562015,.530642,.756863,.047905,.441446,.410073,.882353,.002307,.33218,.294348,1,0,.235294,.188235]},{ColorSpace:"Lab",Name:"GyRd",RGBPoints:[-1,.101961,.101961,.101961,-.87451,.227451,.227451,.227451,-.74902,.359939,.359939,.359939,-.623529,.502653,.502653,.502653,-.498039,.631373,.631373,.631373,-.372549,.749865,.749865,.749865,-.247059,.843368,.843368,.843368,-.121569,.926105,.926105,.926105,.00392157,.999846,.997232,.995694,.129412,.994925,.908651,.857901,.254902,.982468,.800692,.706113,.380392,.960323,.66782,.536332,.505882,.894579,.503806,.399769,.631373,.81707,.33218,.281046,.756863,.728489,.155017,.197386,.882353,.576932,.055363,.14925,1,.403922,0,.121569]},{ColorSpace:"Lab",Name:"erdc_divHi_purpleGreen",RGBPoints:[-1,.297553,0,.489074,-.87451,.40259,.151146,.567754,-.74902,.516038,.284843,.658231,-.623529,.629783,.423646,.750938,-.498039,.735198,.563697,.835956,-.372549,.82408,.695541,.903582,-.247059,.889091,.807454,.944862,-.121569,.92334,.886917,.951839,.00392157,.921045,.921084,.921003,.129412,.877324,.907455,.845381,.254902,.797649,.849713,.734695,.380392,.691646,.75964,.600532,.505882,.568981,.649159,.453807,.631373,.438945,.529756,.304259,.756863,.30973,.412001,.158303,.882353,.187078,.305111,.00251458,1,.101655,.220836,0]},{ColorSpace:"Lab",Name:"erdc_divHi_purpleGreen_dim",RGBPoints:[-1,.404088,.131038,.592767,-.87451,.486469,.230957,.651243,-.74902,.575165,.339335,.717723,-.623529,.662741,.454332,.784263,-.498039,.742071,.570213,.842918,-.372549,.806935,.678992,.886227,-.247059,.852219,.771315,.90763,-.121569,.873345,.837327,.901572,.00392157,.866783,.86682,.866745,.129412,.82839,.858225,.796812,.254902,.762578,.814287,.700202,.380392,.676429,.744229,.585735,.505882,.577033,.65732,.461526,.631373,.47128,.562476,.33476,.756863,.365461,.467957,.21076,.882353,.264758,.381138,.0878313,1,.182591,.312249,0]},{ColorSpace:"Lab",Name:"erdc_divLow_icePeach",RGBPoints:[-1,.480048,.817441,.998056,-.87451,.425898,.726921,.883187,-.74902,.366682,.629445,.761936,-.623529,.308756,.531002,.640217,-.498039,.258021,.43705,.523433,-.372549,.219244,.352381,.416348,-.247059,.195127,.281032,.322979,-.121569,.186286,.22627,.246525,.00392157,.192352,.19236,.192364,.129412,.255927,.214469,.191756,.254902,.340459,.254426,.206666,.380392,.444655,.309315,.234029,.505882,.565353,.376004,.270969,.631373,.697917,.450748,.314293,.756863,.836657,.529064,.360227,.882353,.972695,.614884,.413123,1,1,.705904,.472699]},{ColorSpace:"Lab",Name:"erdc_divLow_purpleGreen",RGBPoints:[-1,.956034,.666487,.952663,-.87451,.874457,.572698,.936352,-.74902,.753465,.488253,.909063,-.623529,.63309,.413507,.763833,-.498039,.514491,.345878,.620015,-.372549,.405008,.288141,.484376,-.247059,.311388,.241986,.363556,-.121569,.238722,.209044,.263449,.00392157,.192352,.192366,.192362,.129412,.200379,.233201,.168618,.254902,.230151,.291737,.165227,.380392,.279481,.366076,.178607,.505882,.344927,.453267,.205703,.631373,.421554,.549449,.242643,.756863,.503334,.649999,.284377,.882353,.583497,.749672,.324969,1,.650705,.837228,.356264]},{ColorSpace:"Lab",Name:"Haze_green",RGBPoints:[-1,1,.835294,.886275,-.87451,.937255,.756863,.870443,-.74902,.875817,.666376,.857807,-.623529,.778359,.583007,.808134,-.498039,.676253,.494118,.745098,-.372549,.561365,.390123,.682353,-.247059,.438344,.262745,.621496,-.121569,.321133,.141031,.558751,.00392157,.203922,.0217865,.495861,.129412,.265505,.129412,.433261,.254902,.311692,.255338,.37008,.380392,.356282,.377342,.310821,.505882,.39971,.488889,.258243,.631373,.442556,.604357,.205519,.756863,.48671,.71968,.152941,.882353,.529847,.830356,.100944,1,.572549,.933333,.054902]},{ColorSpace:"Lab",Name:"Haze_lime",RGBPoints:[-1,.704034,.784196,1,-.87451,.633111,.691418,.956078,-.74902,.564021,.600606,.912157,-.623529,.496827,.51189,.868235,-.498039,.43157,.425416,.824314,-.372549,.368248,.341347,.780392,-.247059,.306767,.259855,.736471,-.121569,.246862,.181069,.692549,.00392157,.191619,.109542,.648627,.129412,.257404,.194031,.604706,.254902,.321794,.278775,.560784,.380392,.387909,.364617,.516863,.505882,.456569,.451881,.472941,.631373,.527424,.540773,.42902,.756863,.599759,.631427,.385098,.882353,.673065,.723898,.341176,1,.742751,.812252,.3]},{ColorSpace:"RGB",Name:"Haze",RGBPoints:[-1,1,.835294,.996078,-.00392157,.023529,.141176,.498039,.00392157,.015686,.137255,.494118,1,.984314,.764706,0]},{ColorSpace:"Lab",Name:"Haze_cyan",RGBPoints:[-1,.956863,1,.835294,-.87451,.933188,.921714,.760784,-.74902,.870588,.803486,.671605,-.623529,.807843,.684096,.583297,-.498039,.745098,.569208,.494118,-.372549,.682353,.437763,.390123,-.247059,.621496,.288163,.262745,-.121569,.558751,.144517,.141031,.00392157,.495861,.0217865,.0413943,.129412,.433261,.137255,.129412,.254902,.37008,.263181,.255338,.380392,.306318,.381845,.372694,.505882,.243137,.503994,.494263,.631373,.180392,.629484,.619753,.756863,.117647,.754975,.747131,.882353,.054902,.876398,.866812,1,0,.988235,.976471]},{ColorSpace:"Lab",Name:"nic_Edge",RGBPoints:[-1,.191208,.191208,.191208,-.87451,.239484,.00545035,.614821,-.74902,.220593,.0617459,.863547,-.623529,.17509,.278988,.97794,-.498039,.143526,.576069,.998553,-.372549,.166456,.871883,.96594,-.247059,.376202,.993555,.981833,-.121569,.681996,.991297,.999239,.00392157,.954172,.952734,.94374,.129412,.999735,.99301,.662896,.254902,.979399,.991466,.357973,.380392,.968771,.854967,.162659,.505882,.999245,.556697,.144323,.631373,.973959,.26223,.177946,.756863,.852358,.0526707,.222974,.882353,.593889,.00912724,.238855,1,.191208,.191208,.191208]},{ColorSpace:"Lab",Name:"erdc_iceFire_H",RGBPoints:[-1,4.05432e-7,0,590122e-11,-.87451,0,.120401,.302675,-.74902,0,.216583,.524574,-.623529,.0552475,.345025,.6595,-.498039,.128047,.492588,.720288,-.372549,.188955,.641309,.792092,-.247059,.327673,.784935,.873434,-.121569,.60824,.892164,.935547,.00392157,.881371,.912178,.818099,.129412,.951407,.835621,.449279,.254902,.904481,.690489,0,.380392,.85407,.510864,0,.505882,.777093,.33018,88199e-8,.631373,.672862,.139087,.00269398,.756863,.508815,0,0,.882353,.299417,366289e-9,547829e-9,1,.0157519,.00332021,4.55569e-8]},{ColorSpace:"Lab",Name:"erdc_iceFire_L",RGBPoints:[-1,.870485,.913768,.832905,-.87451,.586919,.887865,.934003,-.74902,.31583,.776442,.867858,-.623529,.18302,.632034,.787722,-.498039,.117909,.484134,.713825,-.372549,.0507239,.335979,.654741,-.247059,0,.209874,.511832,-.121569,0,.114689,.28935,.00392157,.0157519,.00332021,4.55569e-8,.129412,.312914,0,0,.254902,.520865,0,0,.380392,.680105,.15255,.0025996,.505882,.785109,.339479,797922e-9,.631373,.857354,.522494,0,.756863,.910974,.699774,0,.882353,.951921,.842817,.478545,1,.881371,.912178,.818099]},{ColorSpace:"RGB",Name:"hsv",RGBPoints:[-1,1,0,0,-.666666,1,0,1,-.333333,0,0,1,0,0,1,1,.33333,0,1,0,.66666,1,1,0,1,1,0,0]},{ColorSpace:"Lab",Name:"hue_L60",RGBPoints:[-1,.964784,.400592,.349549,-.87451,.964915,.372498,.53785,-.74902,.892353,.401039,.759569,-.623529,.79263,.446956,.903017,-.498039,.682208,.49954,.966673,-.372549,.56392,.553082,.968836,-.247059,.442031,.606396,.901601,-.121569,.305499,.65701,.765784,.00392157,.197251,.687914,.620914,.129412,.193882,.701887,.472654,.254902,.249866,.706123,.320005,.380392,.35132,.697417,.202919,.505882,.498097,.669467,.125232,.631373,.637477,.626239,.107431,.756863,.762115,.56872,.155812,.882353,.889434,.481116,.240445,1,.964784,.400592,.349549]},{ColorSpace:"Lab",Name:"erdc_rainbow_bright",RGBPoints:[-1,.32549,.14902,.960784,-.866221,.297047,.375586,.963836,-.732441,.180302,.536818,.964627,-.598662,.1302,.649207,.929647,-.464883,.0445143,.749654,.855998,-.331104,.0271325,.830713,.721527,-.197324,.259504,.866145,.543555,-.0635452,.428364,.890725,.329819,.0702341,.568503,.898508,.187623,.204013,.738259,.890317,.0825461,.337793,.84546,.86136,.0147555,.471572,.912191,.808018,0,.605351,.962848,.710445,0,.73913,.999469,.600258,.0176284,.87291,.994156,.445975,.193912,1,.980407,.247105,.262699]},{ColorSpace:"Lab",Name:"erdc_rainbow_dark",RGBPoints:[-1,0,0,.423499,-.866221,0,.119346,.529237,-.732441,0,.238691,.634976,-.598662,0,.346852,.68788,-.464883,0,.45022,.718141,-.331104,0,.553554,.664839,-.197324,0,.651082,.519303,-.0635452,.115841,.72479,.352857,.0702341,.326771,.781195,.140187,.204013,.522765,.798524,.0284624,.337793,.703162,.788685,.00885756,.471572,.845118,.751133,0,.605351,.955734,.690825,0,.73913,.995402,.567916,.0618524,.87291,.987712,.403398,.164851,1,.980407,.247105,.262699]},{ColorSpace:"Lab",Name:"nic_CubicL",RGBPoints:[-1,.479965,.0118108,.5307,-.87451,.522213,.0551282,.706919,-.74902,.50839,.237278,.867764,-.623529,.451617,.373834,.987255,-.498039,.39365,.497255,.97506,-.372549,.328631,.599639,.891843,-.247059,.250043,.690286,.778553,-.121569,.249656,.764905,.645857,.00392157,.297954,.821466,.50449,.129412,.337509,.872595,.358447,.254902,.430011,.913789,.297079,.380392,.587191,.931381,.333353,.505882,.727937,.93591,.353742,.631373,.826403,.921081,.365066,.756863,.893201,.846317,.372662,.882353,.965347,.73884,.378506,1,.983235,.597451,.366856]},{ColorSpace:"Lab",Name:"gray_Matlab",RGBPoints:[-1,0,0,0,-.87451,.0627451,.0627451,.0627451,-.74902,.12549,.12549,.12549,-.623529,.188235,.188235,.188235,-.498039,.25098,.25098,.25098,-.372549,.313725,.313725,.313725,-.247059,.376471,.376471,.376471,-.121569,.439216,.439216,.439216,.00392157,.501961,.501961,.501961,.129412,.564706,.564706,.564706,.254902,.627451,.627451,.627451,.380392,.690196,.690196,.690196,.505882,.752941,.752941,.752941,.631373,.815686,.815686,.815686,.756863,.878431,.878431,.878431,.882353,.941176,.941176,.941176,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_red2yellow_BW",RGBPoints:[-1,7.54296e-7,0,109827e-10,-.87451,.18285,.0264094,0,-.74902,.3066,0,0,-.623529,.422841,0,0,-.498039,.522945,0,0,-.372549,.605721,0,0,-.247059,.672502,.14168,0,-.121569,.728167,.244025,0,.00392157,.781215,.333454,0,.129412,.825,.423586,0,.254902,.855893,.516793,0,.380392,.880491,.608846,0,.505882,.910305,.695505,0,.631373,.94109,.779067,.223528,.756863,.967873,.858572,.473521,.882353,.986815,.933211,.751583,1,1,1,.999997]},{ColorSpace:"Lab",Name:"erdc_blue2cyan_BW",RGBPoints:[-1,4.05298e-7,0,59012e-10,-.87451,.0207526,.0740933,.18093,-.74902,0,.121033,.30343,-.623529,0,.166892,.416095,-.498039,0,.216768,.524796,-.372549,.0164769,.275471,.608585,-.247059,.0544527,.344824,.659267,-.121569,.0880643,.419118,.688675,.00392157,.127938,.492556,.720256,.129412,.149476,.566946,.756918,.254902,.188961,.641333,.792122,.380392,.245482,.715336,.827609,.505882,.329216,.786235,.874761,.631373,.453558,.852803,.918466,.756863,.626281,.910493,.954,.882353,.82257,.958709,.980146,1,1,1,.999989]},{ColorSpace:"Lab",Name:"erdc_gold_BW",RGBPoints:[-1,0,0,190933e-10,-.87451,.128363,.0636265,0,-.74902,.193795,.111057,0,-.623529,.25976,.15987,0,-.498039,.328546,.210589,0,-.372549,.399726,.26332,0,-.247059,.472969,.318261,0,-.121569,.546245,.375827,0,.00392157,.61745,.436719,0,.129412,.685545,.501113,0,.254902,.749578,.568799,0,.380392,.80962,.6394,0,.505882,.865572,.712699,.10257,.631373,.917709,.787569,.233665,.756863,.966914,.863138,.369608,.882353,1,.939405,.496104,1,.999225,1,.612275]},{ColorSpace:"Lab",Name:"GREEN-WHITE_LINEAR",RGBPoints:[-1,0,0,0,-.87451,0,.062745,0,-.74902,0,.12549,0,-.623529,0,.188235,0,-.498039,0,.25098,0,-.372549,0,.313725,0,-.247059,0,.376471,0,-.121569,.094118,.439216,0,.00392157,.196078,.501961,0,.129412,.294118,.564706,0,.254902,.396078,.627451,0,.380392,.498039,.690196,0,.505882,.6,.752941,.145098,.631373,.701961,.815686,.364706,.756863,.8,.878431,.580392,.882353,.901961,.941176,.796078,1,1,1,1]},{ColorSpace:"Lab",Name:"Blues",RGBPoints:[-1,.031373,.188235,.419608,-.87451,.031373,.253195,.516063,-.74902,.031757,.318139,.612149,-.623529,.080969,.38113,.661361,-.498039,.130427,.444152,.710327,-.372549,.195386,.509112,.743791,-.247059,.260715,.573841,.777209,-.121569,.341423,.628958,.808704,.00392157,.422745,.684075,.839892,.129412,.523137,.739193,.861546,.254902,.622684,.793464,.883429,.380392,.701423,.826928,.910988,.505882,.778685,.8603,.937993,.631373,.825928,.891795,.953741,.756863,.87328,.923291,.969489,.882353,.922491,.954787,.985236,1,.968627,.984314,1]},{ColorSpace:"Lab",Name:"Greens",RGBPoints:[-1,0,.266667,.105882,-.87451,0,.347374,.139346,-.74902,538e-6,.427912,.172933,-.623529,.069435,.486967,.222145,-.498039,.138178,.546082,.271326,-.372549,.197232,.609073,.31857,-.247059,.257255,.671742,.365859,-.121569,.357647,.720953,.415071,.00392157,.45767,.769919,.465021,.129412,.546251,.811257,.537855,.254902,.634295,.852211,.610688,.380392,.709097,.883706,.683522,.505882,.78316,.914833,.755894,.631373,.842215,.938454,.818885,.756863,.899977,.961538,.880692,.882353,.935409,.975317,.92203,1,.968627,.988235,.960784]},{ColorSpace:"Lab",Name:"Reds",RGBPoints:[-1,.403922,0,.05098,-.87451,.525967,.029527,.066728,-.74902,.647643,.058962,.082476,-.623529,.722445,.076678,.098224,-.498039,.797186,.095194,.114187,-.372549,.868051,.164091,.143714,-.247059,.937809,.233541,.173933,-.121569,.96143,.326059,.232987,.00392157,.984375,.418147,.292657,.129412,.986344,.496886,.371396,.254902,.988235,.575702,.450673,.380392,.988235,.656409,.543191,.505882,.98842,.736747,.635894,.631373,.992357,.809581,.732349,.756863,.996186,.880692,.826759,.882353,.998155,.92203,.885813,1,1,.960784,.941176]},{ColorSpace:"Lab",Name:"BrOrYl",RGBPoints:[-1,.4,.145098,.023529,-.87451,.500392,.174625,.019592,-.74902,.600784,.204291,.015656,-.623529,.701176,.251534,.011719,-.498039,.800984,.299146,.008397,-.372549,.863975,.370012,.043829,-.247059,.926321,.441107,.0794,-.121569,.961753,.521815,.120738,.00392157,.996078,.602645,.163122,.129412,.996078,.68729,.237924,.254902,.996078,.771011,.314879,.380392,.996078,.832034,.444798,.505882,.996171,.892042,.572595,.631373,.998139,.931411,.65724,.756863,1,.969489,.741669,.882353,1,.985236,.822376,1,1,1,.898039]},{ColorSpace:"Lab",Name:"blue2yellow",RGBPoints:[-1,0,0,1,0,.5,.5,.5,1,1,1,0]},{ColorSpace:"Lab",Name:"erdc_cyan2orange",RGBPoints:[-1,.0471513,.213874,.414329,-.87451,.0674702,.256648,.439027,-.74902,.0959957,.299331,.462089,-.623529,.132428,.341872,.483212,-.498039,.188743,.38277,.500597,-.372549,.268511,.420229,.512179,-.247059,.352945,.455602,.519101,-.121569,.43893,.489368,.521538,.00392157,.522445,.522495,.522436,.129412,.600089,.555682,.53205,.254902,.67988,.587981,.539163,.380392,.761011,.619586,.544439,.505882,.84278,.650741,.548567,.631373,.910713,.687347,.557822,.756863,.952232,.734972,.577775,.882353,.975642,.789858,.604868,1,.990752,.843643,.632857]},{ColorSpace:"Lab",Name:"coolwarm",RGBPoints:[-1,.229806,.298718,.753683,-.875,.303869,.406535,.844959,-.75,.383013,.509419,.917388,-.625,.466667,.604563,.968155,-.5,.552953,.688929,.995376,-.375,.639176,.7596,.998151,-.25,.722193,.813953,.976575,-.125,.798692,.849786,.931689,0,.865395,.86541,.865396,.125,.924128,.827385,.774508,.25,.958853,.769768,.678008,.375,.969954,.694267,.579375,.5,.958003,.602842,.481776,.625,.923945,.497309,.38797,.75,.869187,.378313,.300267,.875,.795632,.241284,.220526,1,.705673,.0155562,.150233]},{ColorSpace:"Lab",Name:"BuRd",RGBPoints:[-1,.019608,.188235,.380392,-.87451,.088504,.321107,.564937,-.74902,.163399,.444983,.697501,-.623529,.247059,.555709,.754095,-.498039,.420684,.676432,.818685,-.372549,.606459,.789773,.880277,-.247059,.761476,.868512,.924567,-.121569,.878047,.925721,.951942,.00392157,.969089,.966474,.964937,.129412,.983852,.897578,.846828,.254902,.982468,.800692,.706113,.380392,.960323,.66782,.536332,.505882,.894579,.503806,.399769,.631373,.81707,.33218,.281046,.756863,.728489,.155017,.197386,.882353,.576932,.055363,.14925,1,.403922,0,.121569]},{ColorSpace:"Lab",Name:"GyRd",RGBPoints:[-1,.101961,.101961,.101961,-.87451,.227451,.227451,.227451,-.74902,.359939,.359939,.359939,-.623529,.502653,.502653,.502653,-.498039,.631373,.631373,.631373,-.372549,.749865,.749865,.749865,-.247059,.843368,.843368,.843368,-.121569,.926105,.926105,.926105,.00392157,.999846,.997232,.995694,.129412,.994925,.908651,.857901,.254902,.982468,.800692,.706113,.380392,.960323,.66782,.536332,.505882,.894579,.503806,.399769,.631373,.81707,.33218,.281046,.756863,.728489,.155017,.197386,.882353,.576932,.055363,.14925,1,.403922,0,.121569]},{ColorSpace:"Lab",Name:"GBBr",RGBPoints:[-1,0,.235294,.188235,-.87451,.002461,.338639,.301423,-.74902,.055902,.448981,.417609,-.623529,.183852,.56955,.538178,-.498039,.357785,.700115,.660746,-.372549,.540177,.819531,.77624,-.247059,.714879,.890888,.864821,-.121569,.851134,.934564,.922645,.00392157,.960861,.959785,.95694,.129412,.963322,.927797,.83391,.254902,.939946,.868897,.68935,.380392,.883353,.775394,.517109,.505882,.808074,.625836,.324106,.631373,.717647,.476355,.15494,.756863,.592157,.358247,.06882,.882353,.458593,.26436,.031142,1,.329412,.188235,.019608]},{ColorSpace:"Lab",Name:"erdc_divLow_icePeach",RGBPoints:[-1,.480048,.817441,.998056,-.87451,.425898,.726921,.883187,-.74902,.366682,.629445,.761936,-.623529,.308756,.531002,.640217,-.498039,.258021,.43705,.523433,-.372549,.219244,.352381,.416348,-.247059,.195127,.281032,.322979,-.121569,.186286,.22627,.246525,.00392157,.192352,.19236,.192364,.129412,.255927,.214469,.191756,.254902,.340459,.254426,.206666,.380392,.444655,.309315,.234029,.505882,.565353,.376004,.270969,.631373,.697917,.450748,.314293,.756863,.836657,.529064,.360227,.882353,.972695,.614884,.413123,1,1,.705904,.472699]},{ColorSpace:"RGB",Name:"Haze",RGBPoints:[-1,1,.835294,.996078,-.00392157,.023529,.141176,.498039,.00392157,.015686,.137255,.494118,1,.984314,.764706,0]},{ColorSpace:"Lab",Name:"erdc_iceFire_L",RGBPoints:[-1,.870485,.913768,.832905,-.87451,.586919,.887865,.934003,-.74902,.31583,.776442,.867858,-.623529,.18302,.632034,.787722,-.498039,.117909,.484134,.713825,-.372549,.0507239,.335979,.654741,-.247059,0,.209874,.511832,-.121569,0,.114689,.28935,.00392157,.0157519,.00332021,4.55569e-8,.129412,.312914,0,0,.254902,.520865,0,0,.380392,.680105,.15255,.0025996,.505882,.785109,.339479,797922e-9,.631373,.857354,.522494,0,.756863,.910974,.699774,0,.882353,.951921,.842817,.478545,1,.881371,.912178,.818099]},{IndexedColors:[0,0,0,.8941176470588236,.1019607843137255,.1098039215686274,.2156862745098039,.4941176470588236,.7215686274509804,.3019607843137255,.6862745098039216,.2901960784313726,.596078431372549,.3058823529411765,.6392156862745098,1,.4980392156862745,0,.6509803921568628,.3372549019607843,.1568627450980392],Name:"Spectrum",NanColor:[.6509803921568628,.3372549019607843,.1568627450980392]},{IndexedColors:[.4745098039215686,.09019607843137255,.09019607843137255,.7098039215686275,.00392156862745098,.00392156862745098,.9372549019607843,.2784313725490196,.09803921568627451,.9764705882352941,.5137254901960784,.1411764705882353,1,.7058823529411765,0,1,.8980392156862745,.02352941176470588],Name:"Warm",NanColor:[1,.8980392156862745,.02352941176470588]},{IndexedColors:[.4588235294117647,.6941176470588235,.00392156862745098,.3450980392156863,.5019607843137255,.1607843137254902,.3137254901960784,.8431372549019608,.7490196078431373,.1098039215686274,.5843137254901961,.803921568627451,.2313725490196079,.407843137254902,.6705882352941176,.6039215686274509,.407843137254902,1,.3725490196078431,.2,.5019607843137255],Name:"Cool",NanColor:[.3725490196078431,.2,.5019607843137255]},{IndexedColors:[.2313725490196079,.407843137254902,.6705882352941176,.1098039215686274,.5843137254901961,.803921568627451,.3058823529411765,.8509803921568627,.9176470588235294,.4509803921568628,.6039215686274509,.8352941176470589,.2588235294117647,.2392156862745098,.6627450980392157,.3137254901960784,.3294117647058823,.5294117647058824,.06274509803921569,.1647058823529412,.3215686274509804],Name:"Blues",NanColor:[.06274509803921569,.1647058823529412,.3215686274509804]},{IndexedColors:[.1098039215686274,.5843137254901961,.803921568627451,.2313725490196079,.407843137254902,.6705882352941176,.4,.2431372549019608,.7176470588235294,.6352941176470588,.3294117647058823,.8117647058823529,.8705882352941177,.3803921568627451,.807843137254902,.8627450980392157,.3803921568627451,.5843137254901961,.2392156862745098,.06274509803921569,.3215686274509804],Name:"Wild Flower",NanColor:[.2392156862745098,.06274509803921569,.3215686274509804]},{IndexedColors:[.396078431372549,.4862745098039216,.2156862745098039,.4588235294117647,.6941176470588235,.00392156862745098,.6980392156862745,.7294117647058823,.1882352941176471,1,.8980392156862745,.02352941176470588,1,.7058823529411765,0,.9764705882352941,.5137254901960784,.1411764705882353],Name:"Citrus",NanColor:[.9764705882352941,.5137254901960784,.1411764705882353]},{IndexedColors:[.4980392156862745,.2313725490196079,.03137254901960784,.7019607843137254,.3450980392156863,.02352941176470588,.8784313725490196,.5098039215686274,.0784313725490196,.9921568627450981,.7215686274509804,.3882352941176471,.996078431372549,.8784313725490196,.7137254901960784,.9686274509803922,.9686274509803922,.9686274509803922,.8470588235294118,.8549019607843137,.9215686274509803,.6980392156862745,.6705882352941176,.8235294117647058,.5019607843137255,.4509803921568628,.6745098039215687,.3294117647058823,.1529411764705882,.5333333333333333,.1764705882352941,0,.2941176470588235],Name:"Brewer Diverging Purple-Orange (11)",NanColor:[.1764705882352941,0,.2941176470588235]},{IndexedColors:[.4980392156862745,.2313725490196079,.03137254901960784,.7019607843137254,.3450980392156863,.02352941176470588,.8784313725490196,.5098039215686274,.0784313725490196,.9921568627450981,.7215686274509804,.3882352941176471,.996078431372549,.8784313725490196,.7137254901960784,.8470588235294118,.8549019607843137,.9215686274509803,.6980392156862745,.6705882352941176,.8235294117647058,.5019607843137255,.4509803921568628,.6745098039215687,.3294117647058823,.1529411764705882,.5333333333333333,.1764705882352941,0,.2941176470588235],Name:"Brewer Diverging Purple-Orange (10)",NanColor:[.1764705882352941,0,.2941176470588235]},{IndexedColors:[.7019607843137254,.3450980392156863,.02352941176470588,.8784313725490196,.5098039215686274,.0784313725490196,.9921568627450981,.7215686274509804,.3882352941176471,.996078431372549,.8784313725490196,.7137254901960784,.9686274509803922,.9686274509803922,.9686274509803922,.8470588235294118,.8549019607843137,.9215686274509803,.6980392156862745,.6705882352941176,.8235294117647058,.5019607843137255,.4509803921568628,.6745098039215687,.3294117647058823,.1529411764705882,.5333333333333333],Name:"Brewer Diverging Purple-Orange (9)",NanColor:[.3294117647058823,.1529411764705882,.5333333333333333]},{IndexedColors:[.7019607843137254,.3450980392156863,.02352941176470588,.8784313725490196,.5098039215686274,.0784313725490196,.9921568627450981,.7215686274509804,.3882352941176471,.996078431372549,.8784313725490196,.7137254901960784,.8470588235294118,.8549019607843137,.9215686274509803,.6980392156862745,.6705882352941176,.8235294117647058,.5019607843137255,.4509803921568628,.6745098039215687,.3294117647058823,.1529411764705882,.5333333333333333],Name:"Brewer Diverging Purple-Orange (8)",NanColor:[.3294117647058823,.1529411764705882,.5333333333333333]},{IndexedColors:[.7019607843137254,.3450980392156863,.02352941176470588,.9450980392156862,.6392156862745098,.2509803921568627,.996078431372549,.8784313725490196,.7137254901960784,.9686274509803922,.9686274509803922,.9686274509803922,.8470588235294118,.8549019607843137,.9215686274509803,.6,.5568627450980392,.7647058823529411,.3294117647058823,.1529411764705882,.5333333333333333],Name:"Brewer Diverging Purple-Orange (7)",NanColor:[.3294117647058823,.1529411764705882,.5333333333333333]},{IndexedColors:[.7019607843137254,.3450980392156863,.02352941176470588,.9450980392156862,.6392156862745098,.2509803921568627,.996078431372549,.8784313725490196,.7137254901960784,.8470588235294118,.8549019607843137,.9215686274509803,.6,.5568627450980392,.7647058823529411,.3294117647058823,.1529411764705882,.5333333333333333],Name:"Brewer Diverging Purple-Orange (6)",NanColor:[.3294117647058823,.1529411764705882,.5333333333333333]},{IndexedColors:[.9019607843137255,.3803921568627451,.00392156862745098,.9921568627450981,.7215686274509804,.3882352941176471,.9686274509803922,.9686274509803922,.9686274509803922,.6980392156862745,.6705882352941176,.8235294117647058,.3686274509803922,.2352941176470588,.6],Name:"Brewer Diverging Purple-Orange (5)",NanColor:[.3686274509803922,.2352941176470588,.6]},{IndexedColors:[.9019607843137255,.3803921568627451,.00392156862745098,.9921568627450981,.7215686274509804,.3882352941176471,.6980392156862745,.6705882352941176,.8235294117647058,.3686274509803922,.2352941176470588,.6],Name:"Brewer Diverging Purple-Orange (4)",NanColor:[.3686274509803922,.2352941176470588,.6]},{IndexedColors:[.9450980392156862,.6392156862745098,.2509803921568627,.9686274509803922,.9686274509803922,.9686274509803922,.6,.5568627450980392,.7647058823529411],Name:"Brewer Diverging Purple-Orange (3)",NanColor:[.6,.5568627450980392,.7647058823529411]},{IndexedColors:[.6196078431372549,.00392156862745098,.2588235294117647,.8352941176470589,.2431372549019608,.3098039215686275,.9568627450980393,.4274509803921568,.2627450980392157,.9921568627450981,.6823529411764706,.3803921568627451,.996078431372549,.8784313725490196,.5450980392156862,1,1,.7490196078431373,.9019607843137255,.9607843137254902,.596078431372549,.6705882352941176,.8666666666666667,.6431372549019608,.4,.7607843137254902,.6470588235294118,.196078431372549,.5333333333333333,.7411764705882353,.3686274509803922,.3098039215686275,.6352941176470588],Name:"Brewer Diverging Spectral (11)",NanColor:[.3686274509803922,.3098039215686275,.6352941176470588]},{IndexedColors:[.6196078431372549,.00392156862745098,.2588235294117647,.8352941176470589,.2431372549019608,.3098039215686275,.9568627450980393,.4274509803921568,.2627450980392157,.9921568627450981,.6823529411764706,.3803921568627451,.996078431372549,.8784313725490196,.5450980392156862,.9019607843137255,.9607843137254902,.596078431372549,.6705882352941176,.8666666666666667,.6431372549019608,.4,.7607843137254902,.6470588235294118,.196078431372549,.5333333333333333,.7411764705882353,.3686274509803922,.3098039215686275,.6352941176470588],Name:"Brewer Diverging Spectral (10)",NanColor:[.3686274509803922,.3098039215686275,.6352941176470588]},{IndexedColors:[.8352941176470589,.2431372549019608,.3098039215686275,.9568627450980393,.4274509803921568,.2627450980392157,.9921568627450981,.6823529411764706,.3803921568627451,.996078431372549,.8784313725490196,.5450980392156862,1,1,.7490196078431373,.9019607843137255,.9607843137254902,.596078431372549,.6705882352941176,.8666666666666667,.6431372549019608,.4,.7607843137254902,.6470588235294118,.196078431372549,.5333333333333333,.7411764705882353],Name:"Brewer Diverging Spectral (9)",NanColor:[.196078431372549,.5333333333333333,.7411764705882353]},{IndexedColors:[.8352941176470589,.2431372549019608,.3098039215686275,.9568627450980393,.4274509803921568,.2627450980392157,.9921568627450981,.6823529411764706,.3803921568627451,.996078431372549,.8784313725490196,.5450980392156862,.9019607843137255,.9607843137254902,.596078431372549,.6705882352941176,.8666666666666667,.6431372549019608,.4,.7607843137254902,.6470588235294118,.196078431372549,.5333333333333333,.7411764705882353],Name:"Brewer Diverging Spectral (8)",NanColor:[.196078431372549,.5333333333333333,.7411764705882353]},{IndexedColors:[.8352941176470589,.2431372549019608,.3098039215686275,.9882352941176471,.5529411764705883,.3490196078431372,.996078431372549,.8784313725490196,.5450980392156862,1,1,.7490196078431373,.9019607843137255,.9607843137254902,.596078431372549,.6,.8352941176470589,.5803921568627451,.196078431372549,.5333333333333333,.7411764705882353],Name:"Brewer Diverging Spectral (7)",NanColor:[.196078431372549,.5333333333333333,.7411764705882353]},{IndexedColors:[.8352941176470589,.2431372549019608,.3098039215686275,.9882352941176471,.5529411764705883,.3490196078431372,.996078431372549,.8784313725490196,.5450980392156862,.9019607843137255,.9607843137254902,.596078431372549,.6,.8352941176470589,.5803921568627451,.196078431372549,.5333333333333333,.7411764705882353],Name:"Brewer Diverging Spectral (6)",NanColor:[.196078431372549,.5333333333333333,.7411764705882353]},{IndexedColors:[.8431372549019608,.09803921568627451,.1098039215686274,.9921568627450981,.6823529411764706,.3803921568627451,1,1,.7490196078431373,.6705882352941176,.8666666666666667,.6431372549019608,.1686274509803922,.5137254901960784,.7294117647058823],Name:"Brewer Diverging Spectral (5)",NanColor:[.1686274509803922,.5137254901960784,.7294117647058823]},{IndexedColors:[.8431372549019608,.09803921568627451,.1098039215686274,.9921568627450981,.6823529411764706,.3803921568627451,.6705882352941176,.8666666666666667,.6431372549019608,.1686274509803922,.5137254901960784,.7294117647058823],Name:"Brewer Diverging Spectral (4)",NanColor:[.1686274509803922,.5137254901960784,.7294117647058823]},{IndexedColors:[.9882352941176471,.5529411764705883,.3490196078431372,1,1,.7490196078431373,.6,.8352941176470589,.5803921568627451],Name:"Brewer Diverging Spectral (3)",NanColor:[.6,.8352941176470589,.5803921568627451]},{IndexedColors:[.3294117647058823,.1882352941176471,.0196078431372549,.5490196078431373,.3176470588235294,.0392156862745098,.7490196078431373,.5058823529411764,.1764705882352941,.8745098039215686,.7607843137254902,.4901960784313725,.9647058823529412,.9098039215686274,.7647058823529411,.9607843137254902,.9607843137254902,.9607843137254902,.7803921568627451,.9176470588235294,.8980392156862745,.5019607843137255,.803921568627451,.7568627450980392,.207843137254902,.592156862745098,.5607843137254902,.00392156862745098,.4,.3686274509803922,0,.2352941176470588,.1882352941176471],Name:"Brewer Diverging Brown-Blue-Green (11)",NanColor:[0,.2352941176470588,.1882352941176471]},{IndexedColors:[.3294117647058823,.1882352941176471,.0196078431372549,.5490196078431373,.3176470588235294,.0392156862745098,.7490196078431373,.5058823529411764,.1764705882352941,.8745098039215686,.7607843137254902,.4901960784313725,.9647058823529412,.9098039215686274,.7647058823529411,.7803921568627451,.9176470588235294,.8980392156862745,.5019607843137255,.803921568627451,.7568627450980392,.207843137254902,.592156862745098,.5607843137254902,.00392156862745098,.4,.3686274509803922,0,.2352941176470588,.1882352941176471],Name:"Brewer Diverging Brown-Blue-Green (10)",NanColor:[0,.2352941176470588,.1882352941176471]},{IndexedColors:[.5490196078431373,.3176470588235294,.0392156862745098,.7490196078431373,.5058823529411764,.1764705882352941,.8745098039215686,.7607843137254902,.4901960784313725,.9647058823529412,.9098039215686274,.7647058823529411,.9607843137254902,.9607843137254902,.9607843137254902,.7803921568627451,.9176470588235294,.8980392156862745,.5019607843137255,.803921568627451,.7568627450980392,.207843137254902,.592156862745098,.5607843137254902,.00392156862745098,.4,.3686274509803922],Name:"Brewer Diverging Brown-Blue-Green (9)",NanColor:[.00392156862745098,.4,.3686274509803922]},{IndexedColors:[.5490196078431373,.3176470588235294,.0392156862745098,.7490196078431373,.5058823529411764,.1764705882352941,.8745098039215686,.7607843137254902,.4901960784313725,.9647058823529412,.9098039215686274,.7647058823529411,.7803921568627451,.9176470588235294,.8980392156862745,.5019607843137255,.803921568627451,.7568627450980392,.207843137254902,.592156862745098,.5607843137254902,.00392156862745098,.4,.3686274509803922],Name:"Brewer Diverging Brown-Blue-Green (8)",NanColor:[.00392156862745098,.4,.3686274509803922]},{IndexedColors:[.5490196078431373,.3176470588235294,.0392156862745098,.8470588235294118,.7019607843137254,.396078431372549,.9647058823529412,.9098039215686274,.7647058823529411,.9607843137254902,.9607843137254902,.9607843137254902,.7803921568627451,.9176470588235294,.8980392156862745,.3529411764705883,.7058823529411765,.6745098039215687,.00392156862745098,.4,.3686274509803922],Name:"Brewer Diverging Brown-Blue-Green (7)",NanColor:[.00392156862745098,.4,.3686274509803922]},{IndexedColors:[.5490196078431373,.3176470588235294,.0392156862745098,.8470588235294118,.7019607843137254,.396078431372549,.9647058823529412,.9098039215686274,.7647058823529411,.7803921568627451,.9176470588235294,.8980392156862745,.3529411764705883,.7058823529411765,.6745098039215687,.00392156862745098,.4,.3686274509803922],Name:"Brewer Diverging Brown-Blue-Green (6)",NanColor:[.00392156862745098,.4,.3686274509803922]},{IndexedColors:[.6509803921568628,.3803921568627451,.1019607843137255,.8745098039215686,.7607843137254902,.4901960784313725,.9607843137254902,.9607843137254902,.9607843137254902,.5019607843137255,.803921568627451,.7568627450980392,.00392156862745098,.5215686274509804,.4431372549019608],Name:"Brewer Diverging Brown-Blue-Green (5)",NanColor:[.00392156862745098,.5215686274509804,.4431372549019608]},{IndexedColors:[.6509803921568628,.3803921568627451,.1019607843137255,.8745098039215686,.7607843137254902,.4901960784313725,.5019607843137255,.803921568627451,.7568627450980392,.00392156862745098,.5215686274509804,.4431372549019608],Name:"Brewer Diverging Brown-Blue-Green (4)",NanColor:[.00392156862745098,.5215686274509804,.4431372549019608]},{IndexedColors:[.8470588235294118,.7019607843137254,.396078431372549,.9607843137254902,.9607843137254902,.9607843137254902,.3529411764705883,.7058823529411765,.6745098039215687],Name:"Brewer Diverging Brown-Blue-Green (3)",NanColor:[.3529411764705883,.7058823529411765,.6745098039215687]},{IndexedColors:[.9686274509803922,.9882352941176471,.9921568627450981,.8980392156862745,.9607843137254902,.9764705882352941,.8,.9254901960784314,.9019607843137255,.6,.8470588235294118,.788235294117647,.4,.7607843137254902,.6431372549019608,.2549019607843137,.6823529411764706,.4627450980392157,.1372549019607843,.5450980392156862,.2705882352941176,0,.4274509803921568,.1725490196078431,0,.2666666666666667,.1058823529411765],Name:"Brewer Sequential Blue-Green (9)",NanColor:[0,.2666666666666667,.1058823529411765]},{IndexedColors:[.9686274509803922,.9882352941176471,.9921568627450981,.8980392156862745,.9607843137254902,.9764705882352941,.8,.9254901960784314,.9019607843137255,.6,.8470588235294118,.788235294117647,.4,.7607843137254902,.6431372549019608,.2549019607843137,.6823529411764706,.4627450980392157,.1372549019607843,.5450980392156862,.2705882352941176,0,.3450980392156863,.1411764705882353],Name:"Brewer Sequential Blue-Green (8)",NanColor:[0,.3450980392156863,.1411764705882353]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.8,.9254901960784314,.9019607843137255,.8,.9254901960784314,.9019607843137255,.4,.7607843137254902,.6431372549019608,.2549019607843137,.6823529411764706,.4627450980392157,.1372549019607843,.5450980392156862,.2705882352941176,0,.3450980392156863,.1411764705882353],Name:"Brewer Sequential Blue-Green (7)",NanColor:[0,.3450980392156863,.1411764705882353]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.8,.9254901960784314,.9019607843137255,.6,.8470588235294118,.788235294117647,.4,.7607843137254902,.6431372549019608,.1725490196078431,.6352941176470588,.3725490196078431,0,.4274509803921568,.1725490196078431],Name:"Brewer Sequential Blue-Green (6)",NanColor:[0,.4274509803921568,.1725490196078431]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.6980392156862745,.8862745098039215,.8862745098039215,.4,.7607843137254902,.6431372549019608,.1725490196078431,.6352941176470588,.3725490196078431,0,.4274509803921568,.1725490196078431],Name:"Brewer Sequential Blue-Green (5)",NanColor:[0,.4274509803921568,.1725490196078431]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.6980392156862745,.8862745098039215,.8862745098039215,.4,.7607843137254902,.6431372549019608,.1372549019607843,.5450980392156862,.2705882352941176],Name:"Brewer Sequential Blue-Green (4)",NanColor:[.1372549019607843,.5450980392156862,.2705882352941176]},{IndexedColors:[.8980392156862745,.9607843137254902,.9764705882352941,.6,.8470588235294118,.788235294117647,.1725490196078431,.6352941176470588,.3725490196078431],Name:"Brewer Sequential Blue-Green (3)",NanColor:[.1725490196078431,.6352941176470588,.3725490196078431]},{IndexedColors:[1,1,.8980392156862745,1,.9686274509803922,.7372549019607844,.996078431372549,.8901960784313725,.5686274509803921,.996078431372549,.7686274509803922,.3098039215686275,.996078431372549,.6,.1607843137254902,.9254901960784314,.4392156862745098,.0784313725490196,.8,.2980392156862745,.00784313725490196,.6,.203921568627451,.01568627450980392,.4,.1450980392156863,.02352941176470588],Name:"Brewer Sequential Yellow-Orange-Brown (9)",NanColor:[.4,.1450980392156863,.02352941176470588]},{IndexedColors:[1,1,.8980392156862745,1,.9686274509803922,.7372549019607844,.996078431372549,.8901960784313725,.5686274509803921,.996078431372549,.7686274509803922,.3098039215686275,.996078431372549,.6,.1607843137254902,.9254901960784314,.4392156862745098,.0784313725490196,.8,.2980392156862745,.00784313725490196,.5490196078431373,.1764705882352941,.01568627450980392],Name:"Brewer Sequential Yellow-Orange-Brown (8)",NanColor:[.5490196078431373,.1764705882352941,.01568627450980392]},{IndexedColors:[1,1,.8313725490196079,.996078431372549,.8901960784313725,.5686274509803921,.996078431372549,.7686274509803922,.3098039215686275,.996078431372549,.6,.1607843137254902,.9254901960784314,.4392156862745098,.0784313725490196,.8,.2980392156862745,.00784313725490196,.5490196078431373,.1764705882352941,.01568627450980392],Name:"Brewer Sequential Yellow-Orange-Brown (7)",NanColor:[.5490196078431373,.1764705882352941,.01568627450980392]},{IndexedColors:[1,1,.8313725490196079,.996078431372549,.8901960784313725,.5686274509803921,.996078431372549,.7686274509803922,.3098039215686275,.996078431372549,.6,.1607843137254902,.8509803921568627,.3725490196078431,.05490196078431372,.6,.203921568627451,.01568627450980392],Name:"Brewer Sequential Yellow-Orange-Brown (6)",NanColor:[.6,.203921568627451,.01568627450980392]},{IndexedColors:[1,1,.8313725490196079,.996078431372549,.8509803921568627,.5568627450980392,.996078431372549,.6,.1607843137254902,.8509803921568627,.3725490196078431,.05490196078431372,.6,.203921568627451,.01568627450980392],Name:"Brewer Sequential Yellow-Orange-Brown (5)",NanColor:[.6,.203921568627451,.01568627450980392]},{IndexedColors:[1,1,.8313725490196079,.996078431372549,.8509803921568627,.5568627450980392,.996078431372549,.6,.1607843137254902,.8,.2980392156862745,.00784313725490196],Name:"Brewer Sequential Yellow-Orange-Brown (4)",NanColor:[.8,.2980392156862745,.00784313725490196]},{IndexedColors:[1,.9686274509803922,.7372549019607844,.996078431372549,.7686274509803922,.3098039215686275,.8509803921568627,.3725490196078431,.05490196078431372],Name:"Brewer Sequential Yellow-Orange-Brown (3)",NanColor:[.8509803921568627,.3725490196078431,.05490196078431372]},{IndexedColors:[.9686274509803922,.9882352941176471,.9921568627450981,.8784313725490196,.9254901960784314,.9568627450980393,.7490196078431373,.8274509803921568,.9019607843137255,.6196078431372549,.7372549019607844,.8549019607843137,.5490196078431373,.5882352941176471,.7764705882352941,.5490196078431373,.4196078431372549,.6941176470588235,.5333333333333333,.2549019607843137,.615686274509804,.5058823529411764,.05882352941176471,.4862745098039216,.3019607843137255,0,.2941176470588235],Name:"Brewer Sequential Blue-Purple (9)",NanColor:[.3019607843137255,0,.2941176470588235]},{IndexedColors:[.9686274509803922,.9882352941176471,.9921568627450981,.8784313725490196,.9254901960784314,.9568627450980393,.7490196078431373,.8274509803921568,.9019607843137255,.6196078431372549,.7372549019607844,.8549019607843137,.5490196078431373,.5882352941176471,.7764705882352941,.5490196078431373,.4196078431372549,.6941176470588235,.5333333333333333,.2549019607843137,.615686274509804,.4313725490196079,.00392156862745098,.4196078431372549],Name:"Brewer Sequential Blue-Purple (8)",NanColor:[.4313725490196079,.00392156862745098,.4196078431372549]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.7490196078431373,.8274509803921568,.9019607843137255,.6196078431372549,.7372549019607844,.8549019607843137,.5490196078431373,.5882352941176471,.7764705882352941,.5490196078431373,.4196078431372549,.6941176470588235,.5333333333333333,.2549019607843137,.615686274509804,.4313725490196079,.00392156862745098,.4196078431372549],Name:"Brewer Sequential Blue-Purple (7)",NanColor:[.4313725490196079,.00392156862745098,.4196078431372549]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.7490196078431373,.8274509803921568,.9019607843137255,.6196078431372549,.7372549019607844,.8549019607843137,.5490196078431373,.5882352941176471,.7764705882352941,.5333333333333333,.3372549019607843,.6549019607843137,.5058823529411764,.05882352941176471,.4862745098039216],Name:"Brewer Sequential Blue-Purple (6)",NanColor:[.5058823529411764,.05882352941176471,.4862745098039216]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.7019607843137254,.803921568627451,.8901960784313725,.5490196078431373,.5882352941176471,.7764705882352941,.5333333333333333,.3372549019607843,.6549019607843137,.5058823529411764,.05882352941176471,.4862745098039216],Name:"Brewer Sequential Blue-Purple (5)",NanColor:[.5058823529411764,.05882352941176471,.4862745098039216]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.7019607843137254,.803921568627451,.8901960784313725,.5490196078431373,.5882352941176471,.7764705882352941,.5333333333333333,.2549019607843137,.615686274509804],Name:"Brewer Sequential Blue-Purple (4)",NanColor:[.5333333333333333,.2549019607843137,.615686274509804]},{IndexedColors:[.8784313725490196,.9254901960784314,.9568627450980393,.6196078431372549,.7372549019607844,.8549019607843137,.5333333333333333,.3372549019607843,.6549019607843137],Name:"Brewer Sequential Blue-Purple (3)",NanColor:[.5333333333333333,.3372549019607843,.6549019607843137]},{IndexedColors:[.4980392156862745,.788235294117647,.4980392156862745,.7450980392156863,.6823529411764706,.8313725490196079,.9921568627450981,.7529411764705882,.5254901960784314,1,1,.6,.2196078431372549,.4235294117647059,.6901960784313725,.9411764705882353,.00784313725490196,.4980392156862745,.7490196078431373,.3568627450980392,.09019607843137255,.4,.4,.4],Name:"Brewer Qualitative Accent",NanColor:[.4,.4,.4]},{IndexedColors:[.1058823529411765,.6196078431372549,.4666666666666667,.8509803921568627,.3725490196078431,.00784313725490196,.4588235294117647,.4392156862745098,.7019607843137254,.9058823529411765,.1607843137254902,.5411764705882353,.4,.6509803921568628,.1176470588235294,.9019607843137255,.6705882352941176,.00784313725490196,.6509803921568628,.4627450980392157,.1137254901960784,.4,.4,.4],Name:"Brewer Qualitative Dark2",NanColor:[.4,.4,.4]},{IndexedColors:[.4,.7607843137254902,.6470588235294118,.9882352941176471,.5529411764705883,.3843137254901961,.5529411764705883,.6274509803921569,.796078431372549,.9058823529411765,.5411764705882353,.7647058823529411,.6509803921568628,.8470588235294118,.3294117647058823,1,.8509803921568627,.1843137254901961,.8980392156862745,.7686274509803922,.5803921568627451,.7019607843137254,.7019607843137254,.7019607843137254],Name:"Brewer Qualitative Set2",NanColor:[.7019607843137254,.7019607843137254,.7019607843137254]},{IndexedColors:[.7019607843137254,.8862745098039215,.803921568627451,.9921568627450981,.803921568627451,.6745098039215687,.796078431372549,.8352941176470589,.9098039215686274,.9568627450980393,.792156862745098,.8941176470588236,.9019607843137255,.9607843137254902,.788235294117647,1,.9490196078431372,.6823529411764706,.9450980392156862,.8862745098039215,.8,.8,.8,.8],Name:"Brewer Qualitative Pastel2",NanColor:[.8,.8,.8]},{IndexedColors:[.984313725490196,.7058823529411765,.6823529411764706,.7019607843137254,.803921568627451,.8901960784313725,.8,.9215686274509803,.7725490196078432,.8705882352941177,.796078431372549,.8941176470588236,.996078431372549,.8509803921568627,.6509803921568628,1,1,.8,.8980392156862745,.8470588235294118,.7411764705882353,.9921568627450981,.8549019607843137,.9254901960784314,.9490196078431372,.9490196078431372,.9490196078431372],Name:"Brewer Qualitative Pastel1",NanColor:[.9490196078431372,.9490196078431372,.9490196078431372]},{IndexedColors:[.8941176470588236,.1019607843137255,.1098039215686274,.2156862745098039,.4941176470588236,.7215686274509804,.3019607843137255,.6862745098039216,.2901960784313726,.596078431372549,.3058823529411765,.6392156862745098,1,.4980392156862745,0,1,1,.2,.6509803921568628,.3372549019607843,.1568627450980392,.9686274509803922,.5058823529411764,.7490196078431373,.6,.6,.6],Name:"Brewer Qualitative Set1",NanColor:[.6,.6,.6]},{IndexedColors:[.6509803921568628,.807843137254902,.8901960784313725,.1215686274509804,.4705882352941176,.7058823529411765,.6980392156862745,.8745098039215686,.5411764705882353,.2,.6274509803921569,.1725490196078431,.984313725490196,.6039215686274509,.6,.8901960784313725,.1019607843137255,.1098039215686274,.9921568627450981,.7490196078431373,.4352941176470588,1,.4980392156862745,0,.792156862745098,.6980392156862745,.8392156862745098,.4156862745098039,.2392156862745098,.6039215686274509,1,1,.6],Name:"Brewer Qualitative Paired",NanColor:[1,1,.6]},{IndexedColors:[.5529411764705883,.8274509803921568,.7803921568627451,1,1,.7019607843137254,.7450980392156863,.7294117647058823,.8549019607843137,.984313725490196,.5019607843137255,.4470588235294118,.5019607843137255,.6941176470588235,.8274509803921568,.9921568627450981,.7058823529411765,.3843137254901961,.7019607843137254,.8705882352941177,.4117647058823529,.9882352941176471,.803921568627451,.8980392156862745,.8509803921568627,.8509803921568627,.8509803921568627,.7372549019607844,.5019607843137255,.7411764705882353,.8,.9215686274509803,.7725490196078432,1,.9294117647058824,.4352941176470588],Name:"Brewer Qualitative Set3",NanColor:[1,.9294117647058824,.4352941176470588]},{IndexedColors:[1,0,0,1,.862745,0,0,.695201,0],Name:"Traffic Lights",NanColor:[.803922,0,.803922]},{IndexedColors:[.908659,.604013,.581857,1,.862745,0,0,.695201,0],Name:"Traffic Lights For Deuteranopes",NanColor:[.803922,0,.803922]},{IndexedColors:[.4196078431372549,0,.07058823529411765,.9019607843137255,.9411764705882353,.0196078431372549,.01568627450980392,.6196078431372549,.00784313725490196],Name:"Traffic Lights For Deuteranopes 2",NanColor:[.803922,0,.803922]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Muted Blue-Green",NanColor:[.25,0,0],RGBPoints:[0,.109804,.27451,.301961,.02,.129412,.309804,.341176,.05,.14902,.341176,.380392,.1,.188235,.403922,.458824,.15,.227451,.447059,.521569,.2,.290196,.494118,.588235,.25,.368627,.552941,.670588,.3,.458824,.619608,.74902,.35,.588235,.713725,.85098,.4,.72549,.815686,.941176,.45,.831373,.882353,.980392,.475,.909804,.933333,1,.5,.980392,.984314,1,.5,.996078,1,.94902,.5,1,1,.980392,.5,.980392,.984314,1,.525,.972549,.988235,.890196,.55,.917647,.960784,.835294,.6,.835294,.921569,.772549,.65,.768627,.901961,.737255,.7,.670588,.831373,.654902,.75,.576471,.760784,.584314,.8,.498039,.678431,.521569,.85,.392157,.560784,.427451,.9,.294118,.45098,.333333,.95,.211765,.34902,.254902,1,.152941,.278431,.196078]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Green-Blue Asymmetric Divergent (62Blbc)",NanColor:[.25,0,0],RGBPoints:[0,.121569,.2,.145098,.05,.196078,.301961,.223529,.1,.258824,.4,.278431,.2,.341176,.54902,.341176,.25,.419608,.619608,.376471,.3,.545098,.701961,.392157,.35,.643137,.780392,.403922,.4,.729412,.819608,.45098,.45,.811765,.870588,.521569,.5,.898039,.909804,.564706,.55,.941176,.92549,.686275,.6,.960784,.94902,.776471,.64,1,1,1,.65,.890196,.988235,.972549,.7,.721569,.894118,.901961,.75,.631373,.823529,.839216,.8,.517647,.662745,.701961,.85,.384314,.494118,.54902,.9,.298039,.360784,.45098,.95,.223529,.25098,.34902,.99,.156863,.172549,.25098,1,.137255,.137255,.188235]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Asymmtrical Earth Tones (6_21b)",NanColor:[.25,0,0],RGBPoints:[0,.141176,.14902,.2,.05,.215686,.258824,.321569,.1,.243137,.368627,.380392,.15,.27451,.439216,.4,.2,.32549,.501961,.384314,.25,.403922,.6,.419608,.3,.486275,.701961,.454902,.35,.556863,.74902,.494118,.4,.670588,.8,.545098,.5,.854902,.901961,.631373,.55,.92549,.941176,.694118,.6,.960784,.94902,.776471,.65,.988235,.968627,.909804,.7,.839216,.815686,.772549,.75,.701961,.662745,.615686,.8,.6,.529412,.478431,.85,.501961,.403922,.360784,.9,.439216,.313725,.290196,1,.301961,.164706,.176471]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Yellow 15",NanColor:[.25,0,0],RGBPoints:[0,1,1,.988235,.002,1,1,.988235,.05,.984314,.988235,.843137,.1,.988235,.988235,.741176,.15,.980392,.968627,.654902,.2,.980392,.945098,.576471,.25,.968627,.905882,.486275,.3,.968627,.862745,.388235,.35,.960784,.803922,.286275,.4,.94902,.741176,.219608,.45,.941176,.678431,.14902,.5,.929412,.607843,.094118,.55,.921569,.545098,.054902,.6,.909804,.486275,.035294,.65,.890196,.411765,.019608,.7,.8,.305882,0,.75,.760784,.239216,0,.8,.678431,.180392,.011765,.85,.6,.121569,.023529,.9,.501961,.054902,.031373,.95,.4,.039216,.058824,1,.301961,.047059,.090196]},{ColorSpace:"Diverging",Name:"Magma (matplotlib)",NanColor:[0,1,0],Source:"https://github.com/BIDS/colormap/blob/master/colormaps.py",License:"CC0",Creator:"Nathaniel J. Smith & Stefan van der Walt",RGBPoints:[0,.001462,466e-6,.013866,.003922,.002258,.001295,.018331,.007843,.003279,.002305,.023708,.011765,.004512,.00349,.029965,.015686,.00595,.004843,.03713,.019608,.007588,.006356,.044973,.023529,.009426,.008022,.052844,.027451,.011465,.009828,.06075,.031373,.013708,.011771,.068667,.035294,.016156,.01384,.076603,.039216,.018815,.016026,.084584,.043137,.021692,.01832,.09261,.047059,.024792,.020715,.100676,.05098,.028123,.023201,.108787,.054902,.031696,.025765,.116965,.058824,.03552,.028397,.125209,.062745,.039608,.03109,.133515,.066667,.04383,.03383,.141886,.070588,.048062,.036607,.150327,.07451,.05232,.039407,.158841,.078431,.056615,.04216,.167446,.082353,.060949,.044794,.176129,.086275,.06533,.047318,.184892,.090196,.069764,.049726,.193735,.094118,.074257,.052017,.20266,.098039,.078815,.054184,.211667,.101961,.083446,.056225,.220755,.105882,.088155,.058133,.229922,.109804,.092949,.059904,.239164,.113725,.097833,.061531,.248477,.117647,.102815,.06301,.257854,.121569,.107899,.064335,.267289,.12549,.113094,.065492,.276784,.129412,.118405,.066479,.286321,.133333,.123833,.067295,.295879,.137255,.12938,.067935,.305443,.141176,.135053,.068391,.315,.145098,.140858,.068654,.324538,.14902,.146785,.068738,.334011,.152941,.152839,.068637,.343404,.156863,.159018,.068354,.352688,.160784,.165308,.067911,.361816,.164706,.171713,.067305,.370771,.168627,.178212,.066576,.379497,.172549,.184801,.065732,.387973,.176471,.19146,.064818,.396152,.180392,.198177,.063862,.404009,.184314,.204935,.062907,.411514,.188235,.211718,.061992,.418647,.192157,.218512,.061158,.425392,.196078,.225302,.060445,.431742,.2,.232077,.059889,.437695,.203922,.238826,.059517,.443256,.207843,.245543,.059352,.448436,.211765,.25222,.059415,.453248,.215686,.258857,.059706,.45771,.219608,.265447,.060237,.46184,.223529,.271994,.060994,.46566,.227451,.278493,.061978,.46919,.231373,.284951,.063168,.472451,.235294,.291366,.064553,.475462,.239216,.29774,.066117,.478243,.243137,.304081,.067835,.480812,.247059,.310382,.069702,.483186,.25098,.316654,.07169,.48538,.254902,.322899,.073782,.487408,.258824,.329114,.075972,.489287,.262745,.335308,.078236,.491024,.266667,.341482,.080564,.492631,.270588,.347636,.082946,.494121,.27451,.353773,.085373,.495501,.278431,.359898,.087831,.496778,.282353,.366012,.090314,.49796,.286275,.372116,.092816,.499053,.290196,.378211,.095332,.500067,.294118,.384299,.097855,.501002,.298039,.390384,.100379,.501864,.301961,.396467,.102902,.502658,.305882,.402548,.10542,.503386,.309804,.408629,.10793,.504052,.313725,.414709,.110431,.504662,.317647,.420791,.11292,.505215,.321569,.426877,.115395,.505714,.32549,.432967,.117855,.50616,.329412,.439062,.120298,.506555,.333333,.445163,.122724,.506901,.337255,.451271,.125132,.507198,.341176,.457386,.127522,.507448,.345098,.463508,.129893,.507652,.34902,.46964,.132245,.507809,.352941,.47578,.134577,.507921,.356863,.481929,.136891,.507989,.360784,.488088,.139186,.508011,.364706,.494258,.141462,.507988,.368627,.500438,.143719,.50792,.372549,.506629,.145958,.507806,.376471,.512831,.148179,.507648,.380392,.519045,.150383,.507443,.384314,.52527,.152569,.507192,.388235,.531507,.154739,.506895,.392157,.537755,.156894,.506551,.396078,.544015,.159033,.506159,.4,.550287,.161158,.505719,.403922,.556571,.163269,.50523,.407843,.562866,.165368,.504692,.411765,.569172,.167454,.504105,.415686,.57549,.16953,.503466,.419608,.581819,.171596,.502777,.423529,.588158,.173652,.502035,.427451,.594508,.175701,.501241,.431373,.600868,.177743,.500394,.435294,.607238,.179779,.499492,.439216,.613617,.181811,.498536,.443137,.620005,.18384,.497524,.447059,.626401,.185867,.496456,.45098,.632805,.187893,.495332,.454902,.639216,.189921,.49415,.458824,.645633,.191952,.49291,.462745,.652056,.193986,.491611,.466667,.658483,.196027,.490253,.470588,.664915,.198075,.488836,.47451,.671349,.200133,.487358,.478431,.677786,.202203,.485819,.482353,.684224,.204286,.484219,.486275,.690661,.206384,.482558,.490196,.697098,.208501,.480835,.494118,.703532,.210638,.479049,.498039,.709962,.212797,.477201,.501961,.716387,.214982,.47529,.505882,.722805,.217194,.473316,.509804,.729216,.219437,.471279,.513725,.735616,.221713,.46918,.517647,.742004,.224025,.467018,.521569,.748378,.226377,.464794,.52549,.754737,.228772,.462509,.529412,.761077,.231214,.460162,.533333,.767398,.233705,.457755,.537255,.773695,.236249,.455289,.541176,.779968,.238851,.452765,.545098,.786212,.241514,.450184,.54902,.792427,.244242,.447543,.552941,.798608,.24704,.444848,.556863,.804752,.249911,.442102,.560784,.810855,.252861,.439305,.564706,.816914,.255895,.436461,.568627,.822926,.259016,.433573,.572549,.828886,.262229,.430644,.576471,.834791,.26554,.427671,.580392,.840636,.268953,.424666,.584314,.846416,.272473,.421631,.588235,.852126,.276106,.418573,.592157,.857763,.279857,.415496,.596078,.86332,.283729,.412403,.6,.868793,.287728,.409303,.603922,.874176,.291859,.406205,.607843,.879464,.296125,.403118,.611765,.884651,.30053,.400047,.615686,.889731,.305079,.397002,.619608,.8947,.309773,.393995,.623529,.899552,.314616,.391037,.627451,.904281,.31961,.388137,.631373,.908884,.324755,.385308,.635294,.913354,.330052,.382563,.639216,.917689,.3355,.379915,.643137,.921884,.341098,.377376,.647059,.925937,.346844,.374959,.65098,.929845,.352734,.372677,.654902,.933606,.358764,.370541,.658824,.937221,.364929,.368567,.662745,.940687,.371224,.366762,.666667,.944006,.377643,.365136,.670588,.94718,.384178,.363701,.67451,.95021,.39082,.362468,.678431,.953099,.397563,.361438,.682353,.955849,.4044,.360619,.686275,.958464,.411324,.360014,.690196,.960949,.418323,.35963,.694118,.96331,.42539,.359469,.698039,.965549,.432519,.359529,.701961,.967671,.439703,.35981,.705882,.96968,.446936,.360311,.709804,.971582,.45421,.36103,.713725,.973381,.46152,.361965,.717647,.975082,.468861,.363111,.721569,.97669,.476226,.364466,.72549,.97821,.483612,.366025,.729412,.979645,.491014,.367783,.733333,.981,.498428,.369734,.737255,.982279,.505851,.371874,.741176,.983485,.51328,.374198,.745098,.984622,.520713,.376698,.74902,.985693,.528148,.379371,.752941,.9867,.535582,.38221,.756863,.987646,.543015,.38521,.760784,.988533,.550446,.388365,.764706,.989363,.557873,.391671,.768627,.990138,.565296,.395122,.772549,.990871,.572706,.398714,.776471,.991558,.580107,.402441,.780392,.992196,.587502,.406299,.784314,.992785,.594891,.410283,.788235,.993326,.602275,.41439,.792157,.993834,.609644,.418613,.796078,.994309,.616999,.42295,.8,.994738,.62435,.427397,.803922,.995122,.631696,.431951,.807843,.99548,.639027,.436607,.811765,.99581,.646344,.441361,.815686,.996096,.653659,.446213,.819608,.996341,.660969,.45116,.823529,.99658,.668256,.456192,.827451,.996775,.675541,.461314,.831373,.996925,.682828,.466526,.835294,.997077,.690088,.471811,.839216,.997186,.697349,.477182,.843137,.997254,.704611,.482635,.847059,.997325,.711848,.488154,.85098,.997351,.719089,.493755,.854902,.997351,.726324,.499428,.858824,.997341,.733545,.505167,.862745,.997285,.740772,.510983,.866667,.997228,.747981,.516859,.870588,.997138,.75519,.522806,.87451,.997019,.762398,.528821,.878431,.996898,.769591,.534892,.882353,.996727,.776795,.541039,.886275,.996571,.783977,.547233,.890196,.996369,.791167,.553499,.894118,.996162,.798348,.55982,.898039,.995932,.805527,.566202,.901961,.99568,.812706,.572645,.905882,.995424,.819875,.57914,.909804,.995131,.827052,.585701,.913725,.994851,.834213,.592307,.917647,.994524,.841387,.598983,.921569,.994222,.84854,.605696,.92549,.993866,.855711,.612482,.929412,.993545,.862859,.619299,.933333,.99317,.870024,.626189,.937255,.992831,.877168,.633109,.941176,.99244,.88433,.640099,.945098,.992089,.89147,.647116,.94902,.991688,.898627,.654202,.952941,.991332,.905763,.661309,.956863,.99093,.912915,.668481,.960784,.99057,.920049,.675675,.964706,.990175,.927196,.682926,.968627,.989815,.934329,.690198,.972549,.989434,.94147,.697519,.976471,.989077,.948604,.704863,.980392,.988717,.955742,.712242,.984314,.988367,.962878,.719649,.988235,.988033,.970012,.727077,.992157,.987691,.977154,.734536,.996078,.987387,.984288,.742002,1,.987053,.991438,.749504]},{ColorSpace:"Diverging",Name:"Inferno (matplotlib)",NanColor:[0,1,0],Source:"https://github.com/BIDS/colormap/blob/master/colormaps.py",License:"CC0",Creator:"Nathaniel J. Smith & Stefan van der Walt",RGBPoints:[0,.001462,466e-6,.013866,.003922,.002267,.00127,.01857,.007843,.003299,.002249,.024239,.011765,.004547,.003392,.030909,.015686,.006006,.004692,.038558,.019608,.007676,.006136,.046836,.023529,.009561,.007713,.055143,.027451,.011663,.009417,.06346,.031373,.013995,.011225,.071862,.035294,.016561,.013136,.080282,.039216,.019373,.015133,.088767,.043137,.022447,.017199,.097327,.047059,.025793,.019331,.10593,.05098,.029432,.021503,.114621,.054902,.033385,.023702,.123397,.058824,.037668,.025921,.132232,.062745,.042253,.028139,.141141,.066667,.046915,.030324,.150164,.070588,.051644,.032474,.159254,.07451,.056449,.034569,.168414,.078431,.06134,.03659,.177642,.082353,.066331,.038504,.186962,.086275,.071429,.040294,.196354,.090196,.076637,.041905,.205799,.094118,.081962,.043328,.215289,.098039,.087411,.044556,.224813,.101961,.09299,.045583,.234358,.105882,.098702,.046402,.243904,.109804,.104551,.047008,.25343,.113725,.110536,.047399,.262912,.117647,.116656,.047574,.272321,.121569,.122908,.047536,.281624,.12549,.129285,.047293,.290788,.129412,.135778,.046856,.299776,.133333,.142378,.046242,.308553,.137255,.149073,.045468,.317085,.141176,.15585,.044559,.325338,.145098,.162689,.043554,.333277,.14902,.169575,.042489,.340874,.152941,.176493,.041402,.348111,.156863,.183429,.040329,.354971,.160784,.190367,.039309,.361447,.164706,.197297,.0384,.367535,.168627,.204209,.037632,.373238,.172549,.211095,.03703,.378563,.176471,.217949,.036615,.383522,.180392,.224763,.036405,.388129,.184314,.231538,.036405,.3924,.188235,.238273,.036621,.396353,.192157,.244967,.037055,.400007,.196078,.25162,.037705,.403378,.2,.258234,.038571,.406485,.203922,.26481,.039647,.409345,.207843,.271347,.040922,.411976,.211765,.27785,.042353,.414392,.215686,.284321,.043933,.416608,.219608,.290763,.045644,.418637,.223529,.297178,.04747,.420491,.227451,.303568,.049396,.422182,.231373,.309935,.051407,.423721,.235294,.316282,.05349,.425116,.239216,.32261,.055634,.426377,.243137,.328921,.057827,.427511,.247059,.335217,.06006,.428524,.25098,.3415,.062325,.429425,.254902,.347771,.064616,.430217,.258824,.354032,.066925,.430906,.262745,.360284,.069247,.431497,.266667,.366529,.071579,.431994,.270588,.372768,.073915,.4324,.27451,.379001,.076253,.432719,.278431,.385228,.078591,.432955,.282353,.391453,.080927,.433109,.286275,.397674,.083257,.433183,.290196,.403894,.08558,.433179,.294118,.410113,.087896,.433098,.298039,.416331,.090203,.432943,.301961,.422549,.092501,.432714,.305882,.428768,.09479,.432412,.309804,.434987,.097069,.432039,.313725,.441207,.099338,.431594,.317647,.447428,.101597,.43108,.321569,.453651,.103848,.430498,.32549,.459875,.106089,.429846,.329412,.4661,.108322,.429125,.333333,.472328,.110547,.428334,.337255,.478558,.112764,.427475,.341176,.484789,.114974,.426548,.345098,.491022,.117179,.425552,.34902,.497257,.119379,.424488,.352941,.503493,.121575,.423356,.356863,.50973,.123769,.422156,.360784,.515967,.12596,.420887,.364706,.522206,.12815,.419549,.368627,.528444,.130341,.418142,.372549,.534683,.132534,.416667,.376471,.54092,.134729,.415123,.380392,.547157,.136929,.413511,.384314,.553392,.139134,.411829,.388235,.559624,.141346,.410078,.392157,.565854,.143567,.408258,.396078,.572081,.145797,.406369,.4,.578304,.148039,.404411,.403922,.584521,.150294,.402385,.407843,.590734,.152563,.40029,.411765,.59694,.154848,.398125,.415686,.603139,.157151,.395891,.419608,.60933,.159474,.393589,.423529,.615513,.161817,.391219,.427451,.621685,.164184,.388781,.431373,.627847,.166575,.386276,.435294,.633998,.168992,.383704,.439216,.640135,.171438,.381065,.443137,.64626,.173914,.378359,.447059,.652369,.176421,.375586,.45098,.658463,.178962,.372748,.454902,.66454,.181539,.369846,.458824,.670599,.184153,.366879,.462745,.676638,.186807,.363849,.466667,.682656,.189501,.360757,.470588,.688653,.192239,.357603,.47451,.694627,.195021,.354388,.478431,.700576,.197851,.351113,.482353,.7065,.200728,.347777,.486275,.712396,.203656,.344383,.490196,.718264,.206636,.340931,.494118,.724103,.20967,.337424,.498039,.729909,.212759,.333861,.501961,.735683,.215906,.330245,.505882,.741423,.219112,.326576,.509804,.747127,.222378,.322856,.513725,.752794,.225706,.319085,.517647,.758422,.229097,.315266,.521569,.76401,.232554,.311399,.52549,.769556,.236077,.307485,.529412,.775059,.239667,.303526,.533333,.780517,.243327,.299523,.537255,.785929,.247056,.295477,.541176,.791293,.250856,.29139,.545098,.796607,.254728,.287264,.54902,.801871,.258674,.283099,.552941,.807082,.262692,.278898,.556863,.812239,.266786,.274661,.560784,.817341,.270954,.27039,.564706,.822386,.275197,.266085,.568627,.827372,.279517,.26175,.572549,.832299,.283913,.257383,.576471,.837165,.288385,.252988,.580392,.841969,.292933,.248564,.584314,.846709,.297559,.244113,.588235,.851384,.30226,.239636,.592157,.855992,.307038,.235133,.596078,.860533,.311892,.230606,.6,.865006,.316822,.226055,.603922,.869409,.321827,.221482,.607843,.873741,.326906,.216886,.611765,.878001,.33206,.212268,.615686,.882188,.337287,.207628,.619608,.886302,.342586,.202968,.623529,.890341,.347957,.198286,.627451,.894305,.353399,.193584,.631373,.898192,.358911,.18886,.635294,.902003,.364492,.184116,.639216,.905735,.37014,.17935,.643137,.90939,.375856,.174563,.647059,.912966,.381636,.169755,.65098,.916462,.387481,.164924,.654902,.919879,.393389,.16007,.658824,.923215,.399359,.155193,.662745,.92647,.405389,.150292,.666667,.929644,.411479,.145367,.670588,.932737,.417627,.140417,.67451,.935747,.423831,.13544,.678431,.938675,.430091,.130438,.682353,.941521,.436405,.125409,.686275,.944285,.442772,.120354,.690196,.946965,.449191,.115272,.694118,.949562,.45566,.110164,.698039,.952075,.462178,.105031,.701961,.954506,.468744,.099874,.705882,.956852,.475356,.094695,.709804,.959114,.482014,.089499,.713725,.961293,.488716,.084289,.717647,.963387,.495462,.079073,.721569,.965397,.502249,.073859,.72549,.967322,.509078,.068659,.729412,.969163,.515946,.063488,.733333,.970919,.522853,.058367,.737255,.97259,.529798,.053324,.741176,.974176,.53678,.048392,.745098,.975677,.543798,.043618,.74902,.977092,.55085,.03905,.752941,.978422,.557937,.034931,.756863,.979666,.565057,.031409,.760784,.980824,.572209,.028508,.764706,.981895,.579392,.02625,.768627,.982881,.586606,.024661,.772549,.983779,.593849,.02377,.776471,.984591,.601122,.023606,.780392,.985315,.608422,.024202,.784314,.985952,.61575,.025592,.788235,.986502,.623105,.027814,.792157,.986964,.630485,.030908,.796078,.987337,.63789,.034916,.8,.987622,.64532,.039886,.803922,.987819,.652773,.045581,.807843,.987926,.66025,.05175,.811765,.987945,.667748,.058329,.815686,.987874,.675267,.065257,.819608,.987714,.682807,.072489,.823529,.987464,.690366,.07999,.827451,.987124,.697944,.087731,.831373,.986694,.70554,.095694,.835294,.986175,.713153,.103863,.839216,.985566,.720782,.112229,.843137,.984865,.728427,.120785,.847059,.984075,.736087,.129527,.85098,.983196,.743758,.138453,.854902,.982228,.751442,.147565,.858824,.981173,.759135,.156863,.862745,.980032,.766837,.166353,.866667,.978806,.774545,.176037,.870588,.977497,.782258,.185923,.87451,.976108,.789974,.196018,.878431,.974638,.797692,.206332,.882353,.973088,.805409,.216877,.886275,.971468,.813122,.227658,.890196,.969783,.820825,.238686,.894118,.968041,.828515,.249972,.898039,.966243,.836191,.261534,.901961,.964394,.843848,.273391,.905882,.962517,.851476,.285546,.909804,.960626,.859069,.29801,.913725,.95872,.866624,.31082,.917647,.956834,.874129,.323974,.921569,.954997,.881569,.337475,.92549,.953215,.888942,.351369,.929412,.951546,.896226,.365627,.933333,.950018,.903409,.380271,.937255,.948683,.910473,.395289,.941176,.947594,.917399,.410665,.945098,.946809,.924168,.426373,.94902,.946392,.930761,.442367,.952941,.946403,.937159,.458592,.956863,.946903,.943348,.47497,.960784,.947937,.949318,.491426,.964706,.949545,.955063,.50786,.968627,.95174,.960587,.524203,.972549,.954529,.965896,.540361,.976471,.957896,.971003,.556275,.980392,.961812,.975924,.571925,.984314,.966249,.980678,.587206,.988235,.971162,.985282,.602154,.992157,.976511,.989753,.61676,.996078,.982257,.994109,.631017,1,.988362,.998364,.644924]},{ColorSpace:"Diverging",Name:"Plasma (matplotlib)",NanColor:[0,1,0],Source:"https://github.com/BIDS/colormap/blob/master/colormaps.py",License:"CC0",Creator:"Nathaniel J. Smith & Stefan van der Walt",RGBPoints:[0,.050383,.029803,.527975,.003922,.063536,.028426,.533124,.007843,.075353,.027206,.538007,.011765,.086222,.026125,.542658,.015686,.096379,.025165,.547103,.019608,.10598,.024309,.551368,.023529,.115124,.023556,.555468,.027451,.123903,.022878,.559423,.031373,.132381,.022258,.56325,.035294,.140603,.021687,.566959,.039216,.148607,.021154,.570562,.043137,.156421,.020651,.574065,.047059,.16407,.020171,.577478,.05098,.171574,.019706,.580806,.054902,.17895,.019252,.584054,.058824,.186213,.018803,.587228,.062745,.193374,.018354,.59033,.066667,.200445,.017902,.593364,.070588,.207435,.017442,.596333,.07451,.21435,.016973,.599239,.078431,.221197,.016497,.602083,.082353,.227983,.016007,.604867,.086275,.234715,.015502,.607592,.090196,.241396,.014979,.610259,.094118,.248032,.014439,.612868,.098039,.254627,.013882,.615419,.101961,.261183,.013308,.617911,.105882,.267703,.012716,.620346,.109804,.274191,.012109,.622722,.113725,.280648,.011488,.625038,.117647,.287076,.010855,.627295,.121569,.293478,.010213,.62949,.12549,.299855,.009561,.631624,.129412,.30621,.008902,.633694,.133333,.312543,.008239,.6357,.137255,.318856,.007576,.63764,.141176,.32515,.006915,.639512,.145098,.331426,.006261,.641316,.14902,.337683,.005618,.643049,.152941,.343925,.004991,.64471,.156863,.35015,.004382,.646298,.160784,.356359,.003798,.64781,.164706,.362553,.003243,.649245,.168627,.368733,.002724,.650601,.172549,.374897,.002245,.651876,.176471,.381047,.001814,.653068,.180392,.387183,.001434,.654177,.184314,.393304,.001114,.655199,.188235,.399411,859e-6,.656133,.192157,.405503,678e-6,.656977,.196078,.41158,577e-6,.65773,.2,.417642,564e-6,.65839,.203922,.423689,646e-6,.658956,.207843,.429719,831e-6,.659425,.211765,.435734,.001127,.659797,.215686,.441732,.00154,.660069,.219608,.447714,.00208,.66024,.223529,.453677,.002755,.66031,.227451,.459623,.003574,.660277,.231373,.46555,.004545,.660139,.235294,.471457,.005678,.659897,.239216,.477344,.00698,.659549,.243137,.48321,.00846,.659095,.247059,.489055,.010127,.658534,.25098,.494877,.01199,.657865,.254902,.500678,.014055,.657088,.258824,.506454,.016333,.656202,.262745,.512206,.018833,.655209,.266667,.517933,.021563,.654109,.270588,.523633,.024532,.652901,.27451,.529306,.027747,.651586,.278431,.534952,.031217,.650165,.282353,.54057,.03495,.64864,.286275,.546157,.038954,.64701,.290196,.551715,.043136,.645277,.294118,.557243,.047331,.643443,.298039,.562738,.051545,.641509,.301961,.568201,.055778,.639477,.305882,.573632,.060028,.637349,.309804,.579029,.064296,.635126,.313725,.584391,.068579,.632812,.317647,.589719,.072878,.630408,.321569,.595011,.07719,.627917,.32549,.600266,.081516,.625342,.329412,.605485,.085854,.622686,.333333,.610667,.090204,.619951,.337255,.615812,.094564,.61714,.341176,.620919,.098934,.614257,.345098,.625987,.103312,.611305,.34902,.631017,.107699,.608287,.352941,.636008,.112092,.605205,.356863,.640959,.116492,.602065,.360784,.645872,.120898,.598867,.364706,.650746,.125309,.595617,.368627,.65558,.129725,.592317,.372549,.660374,.134144,.588971,.376471,.665129,.138566,.585582,.380392,.669845,.142992,.582154,.384314,.674522,.147419,.578688,.388235,.67916,.151848,.575189,.392157,.683758,.156278,.57166,.396078,.688318,.160709,.568103,.4,.69284,.165141,.564522,.403922,.697324,.169573,.560919,.407843,.701769,.174005,.557296,.411765,.706178,.178437,.553657,.415686,.710549,.182868,.550004,.419608,.714883,.187299,.546338,.423529,.719181,.191729,.542663,.427451,.723444,.196158,.538981,.431373,.72767,.200586,.535293,.435294,.731862,.205013,.531601,.439216,.736019,.209439,.527908,.443137,.740143,.213864,.524216,.447059,.744232,.218288,.520524,.45098,.748289,.222711,.516834,.454902,.752312,.227133,.513149,.458824,.756304,.231555,.509468,.462745,.760264,.235976,.505794,.466667,.764193,.240396,.502126,.470588,.76809,.244817,.498465,.47451,.771958,.249237,.494813,.478431,.775796,.253658,.491171,.482353,.779604,.258078,.487539,.486275,.783383,.2625,.483918,.490196,.787133,.266922,.480307,.494118,.790855,.271345,.476706,.498039,.794549,.27577,.473117,.501961,.798216,.280197,.469538,.505882,.801855,.284626,.465971,.509804,.805467,.289057,.462415,.513725,.809052,.293491,.45887,.517647,.812612,.297928,.455338,.521569,.816144,.302368,.451816,.52549,.819651,.306812,.448306,.529412,.823132,.311261,.444806,.533333,.826588,.315714,.441316,.537255,.830018,.320172,.437836,.541176,.833422,.324635,.434366,.545098,.836801,.329105,.430905,.54902,.840155,.33358,.427455,.552941,.843484,.338062,.424013,.556863,.846788,.342551,.420579,.560784,.850066,.347048,.417153,.564706,.853319,.351553,.413734,.568627,.856547,.356066,.410322,.572549,.85975,.360588,.406917,.576471,.862927,.365119,.403519,.580392,.866078,.36966,.400126,.584314,.869203,.374212,.396738,.588235,.872303,.378774,.393355,.592157,.875376,.383347,.389976,.596078,.878423,.387932,.3866,.6,.881443,.392529,.383229,.603922,.884436,.397139,.37986,.607843,.887402,.401762,.376494,.611765,.89034,.406398,.37313,.615686,.89325,.411048,.369768,.619608,.896131,.415712,.366407,.623529,.898984,.420392,.363047,.627451,.901807,.425087,.359688,.631373,.904601,.429797,.356329,.635294,.907365,.434524,.35297,.639216,.910098,.439268,.34961,.643137,.9128,.444029,.346251,.647059,.915471,.448807,.34289,.65098,.918109,.453603,.339529,.654902,.920714,.458417,.336166,.658824,.923287,.463251,.332801,.662745,.925825,.468103,.329435,.666667,.928329,.472975,.326067,.670588,.930798,.477867,.322697,.67451,.933232,.48278,.319325,.678431,.93563,.487712,.315952,.682353,.93799,.492667,.312575,.686275,.940313,.497642,.309197,.690196,.942598,.502639,.305816,.694118,.944844,.507658,.302433,.698039,.947051,.512699,.299049,.701961,.949217,.517763,.295662,.705882,.951344,.52285,.292275,.709804,.953428,.52796,.288883,.713725,.95547,.533093,.28549,.717647,.957469,.53825,.282096,.721569,.959424,.543431,.278701,.72549,.961336,.548636,.275305,.729412,.963203,.553865,.271909,.733333,.965024,.559118,.268513,.737255,.966798,.564396,.265118,.741176,.968526,.5697,.261721,.745098,.970205,.575028,.258325,.74902,.971835,.580382,.254931,.752941,.973416,.585761,.25154,.756863,.974947,.591165,.248151,.760784,.976428,.596595,.244767,.764706,.977856,.602051,.241387,.768627,.979233,.607532,.238013,.772549,.980556,.613039,.234646,.776471,.981826,.618572,.231287,.780392,.983041,.624131,.227937,.784314,.984199,.629718,.224595,.788235,.985301,.63533,.221265,.792157,.986345,.640969,.217948,.796078,.987332,.646633,.214648,.8,.98826,.652325,.211364,.803922,.989128,.658043,.2081,.807843,.989935,.663787,.204859,.811765,.990681,.669558,.201642,.815686,.991365,.675355,.198453,.819608,.991985,.681179,.195295,.823529,.992541,.68703,.19217,.827451,.993032,.692907,.189084,.831373,.993456,.69881,.186041,.835294,.993814,.704741,.183043,.839216,.994103,.710698,.180097,.843137,.994324,.716681,.177208,.847059,.994474,.722691,.174381,.85098,.994553,.728728,.171622,.854902,.994561,.734791,.168938,.858824,.994495,.74088,.166335,.862745,.994355,.746995,.163821,.866667,.994141,.753137,.161404,.870588,.993851,.759304,.159092,.87451,.993482,.765499,.156891,.878431,.993033,.77172,.154808,.882353,.992505,.777967,.152855,.886275,.991897,.784239,.151042,.890196,.991209,.790537,.149377,.894118,.990439,.796859,.14787,.898039,.989587,.803205,.146529,.901961,.988648,.809579,.145357,.905882,.987621,.815978,.144363,.909804,.986509,.822401,.143557,.913725,.985314,.828846,.142945,.917647,.984031,.835315,.142528,.921569,.982653,.841812,.142303,.92549,.98119,.848329,.142279,.929412,.979644,.854866,.142453,.933333,.977995,.861432,.142808,.937255,.976265,.868016,.143351,.941176,.974443,.874622,.144061,.945098,.97253,.88125,.144923,.94902,.970533,.887896,.145919,.952941,.968443,.894564,.147014,.956863,.966271,.901249,.14818,.960784,.964021,.90795,.14937,.964706,.961681,.914672,.15052,.968627,.959276,.921407,.151566,.972549,.956808,.928152,.152409,.976471,.954287,.934908,.152921,.980392,.951726,.941671,.152925,.984314,.949151,.948435,.152178,.988235,.946602,.95519,.150328,.992157,.944152,.961916,.146861,.996078,.941896,.96859,.140956,1,.940015,.975158,.131326]},{ColorSpace:"Diverging",Name:"Viridis (matplotlib)",NanColor:[1,0,0],Source:"https://github.com/BIDS/colormap/blob/master/colormaps.py",License:"CC0",Creator:"Eric Firing",RGBPoints:[0,.267004,.004874,.329415,.003922,.26851,.009605,.335427,.007843,.269944,.014625,.341379,.011765,.271305,.019942,.347269,.015686,.272594,.025563,.353093,.019608,.273809,.031497,.358853,.023529,.274952,.037752,.364543,.027451,.276022,.044167,.370164,.031373,.277018,.050344,.375715,.035294,.277941,.056324,.381191,.039216,.278791,.062145,.386592,.043137,.279566,.067836,.391917,.047059,.280267,.073417,.397163,.05098,.280894,.078907,.402329,.054902,.281446,.08432,.407414,.058824,.281924,.089666,.412415,.062745,.282327,.094955,.417331,.066667,.282656,.100196,.42216,.070588,.28291,.105393,.426902,.07451,.283091,.110553,.431554,.078431,.283197,.11568,.436115,.082353,.283229,.120777,.440584,.086275,.283187,.125848,.44496,.090196,.283072,.130895,.449241,.094118,.282884,.13592,.453427,.098039,.282623,.140926,.457517,.101961,.28229,.145912,.46151,.105882,.281887,.150881,.465405,.109804,.281412,.155834,.469201,.113725,.280868,.160771,.472899,.117647,.280255,.165693,.476498,.121569,.279574,.170599,.479997,.12549,.278826,.17549,.483397,.129412,.278012,.180367,.486697,.133333,.277134,.185228,.489898,.137255,.276194,.190074,.493001,.141176,.275191,.194905,.496005,.145098,.274128,.199721,.498911,.14902,.273006,.20452,.501721,.152941,.271828,.209303,.504434,.156863,.270595,.214069,.507052,.160784,.269308,.218818,.509577,.164706,.267968,.223549,.512008,.168627,.26658,.228262,.514349,.172549,.265145,.232956,.516599,.176471,.263663,.237631,.518762,.180392,.262138,.242286,.520837,.184314,.260571,.246922,.522828,.188235,.258965,.251537,.524736,.192157,.257322,.25613,.526563,.196078,.255645,.260703,.528312,.2,.253935,.265254,.529983,.203922,.252194,.269783,.531579,.207843,.250425,.27429,.533103,.211765,.248629,.278775,.534556,.215686,.246811,.283237,.535941,.219608,.244972,.287675,.53726,.223529,.243113,.292092,.538516,.227451,.241237,.296485,.539709,.231373,.239346,.300855,.540844,.235294,.237441,.305202,.541921,.239216,.235526,.309527,.542944,.243137,.233603,.313828,.543914,.247059,.231674,.318106,.544834,.25098,.229739,.322361,.545706,.254902,.227802,.326594,.546532,.258824,.225863,.330805,.547314,.262745,.223925,.334994,.548053,.266667,.221989,.339161,.548752,.270588,.220057,.343307,.549413,.27451,.21813,.347432,.550038,.278431,.21621,.351535,.550627,.282353,.214298,.355619,.551184,.286275,.212395,.359683,.55171,.290196,.210503,.363727,.552206,.294118,.208623,.367752,.552675,.298039,.206756,.371758,.553117,.301961,.204903,.375746,.553533,.305882,.203063,.379716,.553925,.309804,.201239,.38367,.554294,.313725,.19943,.387607,.554642,.317647,.197636,.391528,.554969,.321569,.19586,.395433,.555276,.32549,.1941,.399323,.555565,.329412,.192357,.403199,.555836,.333333,.190631,.407061,.556089,.337255,.188923,.41091,.556326,.341176,.187231,.414746,.556547,.345098,.185556,.41857,.556753,.34902,.183898,.422383,.556944,.352941,.182256,.426184,.55712,.356863,.180629,.429975,.557282,.360784,.179019,.433756,.55743,.364706,.177423,.437527,.557565,.368627,.175841,.44129,.557685,.372549,.174274,.445044,.557792,.376471,.172719,.448791,.557885,.380392,.171176,.45253,.557965,.384314,.169646,.456262,.55803,.388235,.168126,.459988,.558082,.392157,.166617,.463708,.558119,.396078,.165117,.467423,.558141,.4,.163625,.471133,.558148,.403922,.162142,.474838,.55814,.407843,.160665,.47854,.558115,.411765,.159194,.482237,.558073,.415686,.157729,.485932,.558013,.419608,.15627,.489624,.557936,.423529,.154815,.493313,.55784,.427451,.153364,.497,.557724,.431373,.151918,.500685,.557587,.435294,.150476,.504369,.55743,.439216,.149039,.508051,.55725,.443137,.147607,.511733,.557049,.447059,.14618,.515413,.556823,.45098,.144759,.519093,.556572,.454902,.143343,.522773,.556295,.458824,.141935,.526453,.555991,.462745,.140536,.530132,.555659,.466667,.139147,.533812,.555298,.470588,.13777,.537492,.554906,.47451,.136408,.541173,.554483,.478431,.135066,.544853,.554029,.482353,.133743,.548535,.553541,.486275,.132444,.552216,.553018,.490196,.131172,.555899,.552459,.494118,.129933,.559582,.551864,.498039,.128729,.563265,.551229,.501961,.127568,.566949,.550556,.505882,.126453,.570633,.549841,.509804,.125394,.574318,.549086,.513725,.124395,.578002,.548287,.517647,.123463,.581687,.547445,.521569,.122606,.585371,.546557,.52549,.121831,.589055,.545623,.529412,.121148,.592739,.544641,.533333,.120565,.596422,.543611,.537255,.120092,.600104,.54253,.541176,.119738,.603785,.5414,.545098,.119512,.607464,.540218,.54902,.119423,.611141,.538982,.552941,.119483,.614817,.537692,.556863,.119699,.61849,.536347,.560784,.120081,.622161,.534946,.564706,.120638,.625828,.533488,.568627,.12138,.629492,.531973,.572549,.122312,.633153,.530398,.576471,.123444,.636809,.528763,.580392,.12478,.640461,.527068,.584314,.126326,.644107,.525311,.588235,.128087,.647749,.523491,.592157,.130067,.651384,.521608,.596078,.132268,.655014,.519661,.6,.134692,.658636,.517649,.603922,.137339,.662252,.515571,.607843,.14021,.665859,.513427,.611765,.143303,.669459,.511215,.615686,.146616,.67305,.508936,.619608,.150148,.676631,.506589,.623529,.153894,.680203,.504172,.627451,.157851,.683765,.501686,.631373,.162016,.687316,.499129,.635294,.166383,.690856,.496502,.639216,.170948,.694384,.493803,.643137,.175707,.6979,.491033,.647059,.180653,.701402,.488189,.65098,.185783,.704891,.485273,.654902,.19109,.708366,.482284,.658824,.196571,.711827,.479221,.662745,.202219,.715272,.476084,.666667,.20803,.718701,.472873,.670588,.214,.722114,.469588,.67451,.220124,.725509,.466226,.678431,.226397,.728888,.462789,.682353,.232815,.732247,.459277,.686275,.239374,.735588,.455688,.690196,.24607,.73891,.452024,.694118,.252899,.742211,.448284,.698039,.259857,.745492,.444467,.701961,.266941,.748751,.440573,.705882,.274149,.751988,.436601,.709804,.281477,.755203,.432552,.713725,.288921,.758394,.428426,.717647,.296479,.761561,.424223,.721569,.304148,.764704,.419943,.72549,.311925,.767822,.415586,.729412,.319809,.770914,.411152,.733333,.327796,.77398,.40664,.737255,.335885,.777018,.402049,.741176,.344074,.780029,.397381,.745098,.35236,.783011,.392636,.74902,.360741,.785964,.387814,.752941,.369214,.788888,.382914,.756863,.377779,.791781,.377939,.760784,.386433,.794644,.372886,.764706,.395174,.797475,.367757,.768627,.404001,.800275,.362552,.772549,.412913,.803041,.357269,.776471,.421908,.805774,.35191,.780392,.430983,.808473,.346476,.784314,.440137,.811138,.340967,.788235,.449368,.813768,.335384,.792157,.458674,.816363,.329727,.796078,.468053,.818921,.323998,.8,.477504,.821444,.318195,.803922,.487026,.823929,.312321,.807843,.496615,.826376,.306377,.811765,.506271,.828786,.300362,.815686,.515992,.831158,.294279,.819608,.525776,.833491,.288127,.823529,.535621,.835785,.281908,.827451,.545524,.838039,.275626,.831373,.555484,.840254,.269281,.835294,.565498,.84243,.262877,.839216,.575563,.844566,.256415,.843137,.585678,.846661,.249897,.847059,.595839,.848717,.243329,.85098,.606045,.850733,.236712,.854902,.616293,.852709,.230052,.858824,.626579,.854645,.223353,.862745,.636902,.856542,.21662,.866667,.647257,.8584,.209861,.870588,.657642,.860219,.203082,.87451,.668054,.861999,.196293,.878431,.678489,.863742,.189503,.882353,.688944,.865448,.182725,.886275,.699415,.867117,.175971,.890196,.709898,.868751,.169257,.894118,.720391,.87035,.162603,.898039,.730889,.871916,.156029,.901961,.741388,.873449,.149561,.905882,.751884,.874951,.143228,.909804,.762373,.876424,.137064,.913725,.772852,.877868,.131109,.917647,.783315,.879285,.125405,.921569,.79376,.880678,.120005,.92549,.804182,.882046,.114965,.929412,.814576,.883393,.110347,.933333,.82494,.88472,.106217,.937255,.83527,.886029,.102646,.941176,.845561,.887322,.099702,.945098,.85581,.888601,.097452,.94902,.866013,.889868,.095953,.952941,.876168,.891125,.09525,.956863,.886271,.892374,.095374,.960784,.89632,.893616,.096335,.964706,.906311,.894855,.098125,.968627,.916242,.896091,.100717,.972549,.926106,.89733,.104071,.976471,.935904,.89857,.108131,.980392,.945636,.899815,.112838,.984314,.9553,.901065,.118128,.988235,.964894,.902323,.123941,.992157,.974417,.90359,.130215,.996078,.983868,.904867,.136897,1,.993248,.906157,.143936]},{ShowIndexedColorActiveValues:1,IndexedColors:[.07,.5,.7,1,1,1,.85,1,1,.8,.5,1,.76,1,0,1,.71,.71,.5,.5,.5,.05,.05,1,1,.05,.05,.7,1,1,.7,.89,.96,.67,.36,.95,.54,1,0,.75,.65,.65,.5,.6,.6,1,.5,0,1,1,.19,.12,.94,.12,.5,.82,.89,.56,.25,.83,.24,1,0,.9,.9,.9,.75,.76,.78,.65,.65,.67,.54,.6,.78,.61,.48,.78,.5,.48,.78,.44,.48,.78,.36,.48,.76,1,.48,.38,.49,.5,.69,.76,.56,.56,.4,.56,.56,.74,.5,.89,1,.63,0,.65,.16,.16,.36,.72,.82,.44,.18,.69,0,1,0,.58,1,1,.58,.88,.88,.45,.76,.79,.33,.71,.71,.23,.62,.62,.14,.56,.56,.04,.49,.55,0,.41,.52,.88,.88,1,1,.85,.56,.65,.46,.45,.4,.5,.5,.62,.39,.71,.83,.48,0,.58,0,.58,.26,.62,.69,.34,.09,.56,0,.79,0,.44,.83,1,1,1,.78,.85,1,.78,.78,1,.78,.64,1,.78,.56,1,.78,.38,1,.78,.27,1,.78,.19,1,.78,.12,1,.78,0,1,.61,0,.9,.46,0,.83,.32,0,.75,.22,0,.67,.14,.3,.76,1,.3,.65,1,.13,.58,.84,.15,.49,.67,.15,.4,.59,.09,.33,.53,.96,.93,.82,.8,.82,.12,.71,.71,.76,.65,.33,.3,.34,.35,.38,.62,.31,.71,.67,.36,0,.46,.31,.27,.26,.51,.59,.26,0,.4,0,.49,0,.44,.67,.98,0,.73,1,0,.63,1,0,.56,1,0,.5,1,0,.42,1,.33,.36,.95,.47,.36,.89,.54,.31,.89,.63,.21,.83,.7,.12,.83,.7,.12,.73,.7,.05,.65,.74,.05,.53,.78,0,.4,.8,0,.35,.82,0,.31,.85,0,.27,.88,0,.22,.9,0,.18,.91,0,.15,.92,0,.14,.93,0,.13,.94,0,.12,.95,0,.11,.96,0,.1,.97,0,.09,.98,0,.08,.99,0,.07,1,0,.06],Annotations:[0,"Xx",1,"H",2,"He",3,"Li",4,"Be",5,"B",6,"C",7,"N",8,"O",9,"F",10,"Ne",11,"Na",12,"Mg",13,"Al",14,"Si",15,"P",16,"S",17,"Cl",18,"Ar",19,"K",20,"Ca",21,"Sc",22,"Ti",23,"V",24,"Cr",25,"Mn",26,"Fe",27,"Co",28,"Ni",29,"Cu",30,"Zn",31,"Ga",32,"Ge",33,"As",34,"Se",35,"Br",36,"Kr",37,"Rb",38,"Sr",39,"Y",40,"Zr",41,"Nb",42,"Mo",43,"Tc",44,"Ru",45,"Rh",46,"Pd",47,"Ag",48,"Cd",49,"In",50,"Sn",51,"Sb",52,"Te",53,"I",54,"Xe",55,"Cs",56,"Ba",57,"La",58,"Ce",59,"Pr",60,"Nd",61,"Pm",62,"Sm",63,"Eu",64,"Gd",65,"Tb",66,"Dy",67,"Ho",68,"Er",69,"Tm",70,"Yb",71,"Lu",72,"Hf",73,"Ta",74,"W",75,"Re",76,"Os",77,"Ir",78,"Pt",79,"Au",80,"Hg",81,"Tl",82,"Pb",83,"Bi",84,"Po",85,"At",86,"Rn",87,"Fr",88,"Ra",89,"Ac",90,"Th",91,"Pa",92,"U",93,"Np",94,"Pu",95,"Am",96,"Cm",97,"Bk",98,"Cf",99,"Es",100,"Fm",101,"Md",102,"No",103,"Lr",104,"Rf",105,"Db",106,"Sg",107,"Bh",108,"Hs",109,"Mt",110,"Ds",111,"Rg",112,"Cn",113,"Uut",114,"Uuq",115,"Uup",116,"Uuh",117,"Uus",118,"Uuo"],Name:"BlueObeliskElements"}]},function(e,t,n){e.exports=function(){return n(97)('/*!\n * @project        vtk.js\n * @build          Tue, Jul 9, 2019 6:02 PM ET\n * @copyright      Copyright (c) 2019 Kitware, Inc.\n *\n */!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dist/",r(r.s=1)}([function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var u=o.get;return void 0!==u?u.call(n):void 0},u="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(e){return n(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)};function a(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=r(2),c=0,s=1,y=0,p=1,b="main",v=function(e){return"object"===(void 0===e?"undefined":u(e))&&"function"==typeof e.then&&"function"==typeof e.catch};var h=function e(t,r){f(this,e),this.payload=t,this.transferable=r};e.exports=function(e){var t,r,u,m=(u=e,(r=b)in(t={})?Object.defineProperty(t,r,{value:u,enumerable:!0,configurable:!0,writable:!0}):t[r]=u,t),d=self.postMessage.bind(self),_=new(function(e){function t(){return f(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return!t||"object"!==n(t)&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+n(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l),o(t,[{key:"emit",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return d({eventName:e,args:r}),this}},{key:"emitLocally",value:function(e){for(var r,n=arguments.length,o=Array(n>1?n-1:0),u=1;u<n;u++)o[u-1]=arguments[u];(r=i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emit",this)).call.apply(r,[this,e].concat(o))}},{key:"operation",value:function(e,t){return m[e]=t,this}}]),t}()),g=function(e,t,r){var n=m[r||b];if(!n)throw new Error("Not found handler for this request");return n(t,O.bind(null,e))},w=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];d([c,e,t,r],n)},O=function(e,t,r){if(!t)throw new Error("eventName is required");if("string"!=typeof t)throw new Error("eventName should be string");d([s,e,t,r])};return self.addEventListener("message",function(e){var t=e.data;Array.isArray(t)?function(e,t,r){var n=function(t){t&&t instanceof h?w(e,p,t.payload,t.transferable):w(e,p,t)},o=function(t){w(e,y,{message:t.message,stack:t.stack})};try{var i=g(e,t,r);v(i)?i.then(n).catch(o):n(i)}catch(e){o(e)}}.apply(void 0,a(t)):t&&t.eventName&&_.emitLocally.apply(_,[t.eventName].concat(a(t.args)))}),_},e.exports.TransferableResponse=h},function(e,t,r){"use strict";r.r(t);var n=r(0),o=r.n(n);o()(function(e,t){var r=e.array,n=e.min,i=e.max,u=e.numberOfBins,a=i-n,f=new Float32Array(u);f.fill(0);for(var l=r.length,c=0;c<l;c++){f[Math.floor((u-1)*(Number(r[c])-n)/a)]+=1}return Promise.resolve(new o.a.TransferableResponse(f,[f.buffer]))})},function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,"__listeners",{value:{},enumerable:!1,writable:!1})}return n(e,[{key:"emit",value:function(e){if(!this.__listeners[e])return this;for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=!0,i=!1,u=void 0;try{for(var a,f=this.__listeners[e][Symbol.iterator]();!(o=(a=f.next()).done);o=!0){a.value.apply(void 0,r)}}catch(e){i=!0,u=e}finally{try{!o&&f.return&&f.return()}finally{if(i)throw u}}return this}},{key:"once",value:function(e,t){var r=this,n=function n(){r.off(e,n),t.apply(void 0,arguments)};return this.on(e,n)}},{key:"on",value:function(e,t){return this.__listeners[e]||(this.__listeners[e]=[]),this.__listeners[e].push(t),this}},{key:"off",value:function(e,t){return this.__listeners[e]=t?this.__listeners[e].filter(function(e){return e!==t}):[],this}}]),e}();e.exports=o}]);\n//# sourceMappingURL=76beac82c4e894f1ba2d.worker.js.map',null)}},function(e,t,n){"use strict";(function(e){var r=n(0),i=n(5),a=n(57),o=n(6),s=n(34),u=n(15);function l(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var c=r.a.vtkErrorMacro,f=1;function d(e,t){t.actor&&e.actor.set(t.actor),t.actorRotation&&e.actor.rotateWXYZ(t.actorRotation[0],t.actorRotation[1],t.actorRotation[2],t.actorRotation[3]),t.property&&e.actor.getProperty().set(t.property),t.mapper&&(t.mapper.colorByArrayName&&(e.source.enableArray(t.mapper.colorByArrayName,t.mapper.colorByArrayName),e.source.loadData()),e.mapper.set(t.mapper)),t.lookupTable&&(e.mapper.getLookupTable().set(t.lookupTable),e.mapper.getLookupTable().build())}var p={httpDataSetReader:function(e,t,n){var r=a.a.newInstance({fetchGzip:t.fetchGzip,dataAccessHelper:t.dataAccessHelper}),u=i.a.newInstance(),l=o.a.newInstance(),c={name:e.name||"Item ".concat(f++),source:r,mapper:l,actor:u,defaultSettings:e};if(e.texture){var p=a.a.newInstance({fetchGzip:t.fetchGzip,dataAccessHelper:t.dataAccessHelper});p.setUrl([t.baseURL,e.texture].join("/"),{loadData:!0}).then(function(){var e=s.a.newInstance();e.setInterpolate(!0),e.setRepeat(!0),e.setInputData(p.getOutputData()),u.addTexture(e),c.texture=e})}return t.renderer&&t.renderer.addActor(u),u.setMapper(l),l.setInputConnection(r.getOutputPort()),r.setUrl([t.baseURL,e.httpDataSetReader.url].join("/"),{loadData:!0}).then(function(){n.invokeReady()}),d(c,e),t.scene.push(c),c}};var h={fetchGzip:!1,url:null,baseURL:null};function g(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(n,h,i),r.a.obj(t,n),r.a.get(t,n,["fetchGzip","url","baseURL","scene","metadata"]),r.a.setGet(t,n,["renderer"]),r.a.event(t,n,"ready"),function(t,n){var r={};function i(e){if(n.renderer){var t=n.renderer.getActiveCamera();t?t.set(e):c("No active camera to update")}}n.classHierarchy.push("vtkHttpSceneLoader"),n.scene||(n.scene=[]),n.dataAccessHelper||(n.dataAccessHelper=u.a.get("http")),t.update=function(){n.dataAccessHelper.fetchJSON(t,n.url).then(function(a){var o;void 0!==a.fetchGzip&&(n.fetchGzip=a.fetchGzip),a.background&&n.renderer&&(o=n.renderer).setBackground.apply(o,l(a.background)),a.camera&&(r.camera=a.camera,i(a.camera)),a.scene&&(a.scene.forEach(function(e){var r=p[e.type];r&&r(e,n,t)}),e.scene=n.scene),n.metadata=a},function(e){c("Error fetching scene ".concat(e))})},t.resetScene=function(){r.camera&&i(r.camera)},t.setUrl=function(e){if(-1===e.indexOf("index.json"))n.baseURL=e,n.url="".concat(e,"/index.json");else{n.url=e;var r=e.split("/");r.pop(),n.baseURL=r.join("/")}return t.update()}}(t,n)}var m=r.a.newInstance(g,"vtkHttpSceneLoader");t.a={newInstance:m,extend:g,applySettings:d,updateDatasetTypeMapping:function(e,t){p[e]=t}}}).call(this,n(33))},function(e,t,n){"use strict";(function(e){var r=n(47),i=n(15),a=n(0),o=n(3),s=n(9),u=n(4),l=a.a.vtkErrorMacro;function c(e,t){for(var n=0;n<e.length;n++)t.push(e[n])}function f(e,t,n,r,i){var a=e[t];if(void 0===a)return-1;if(-1!==a.indexOf("endfacet"))return t+1;if(-1===a.indexOf("facet"))return t+1;var o=0,s=2,u=n.length/3;for(c(a.split(/[ \t]+/).filter(function(e){return e}).slice(-3).map(Number),i);-1!==e[t+s].indexOf("vertex");){c(e[t+s].split(/[ \t]+/).filter(function(e){return e}).slice(-3).map(Number),n),o++,s++}r.push(o);for(var l=0;l<o;l++)r.push(u+l);for(;e[t+s]&&-1!==e[t+s].indexOf("endfacet");)s++;return t+s+2}function d(t,n){n.classHierarchy.push("vtkSTLReader"),n.dataAccessHelper||(n.dataAccessHelper=i.a.get("http")),t.setUrl=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{binary:!0};n.url=e;var i=e.split("/");return i.pop(),n.baseURL=i.join("/"),n.compression=r.compression,t.loadData({progressCallback:r.progressCallback,binary:!!r.binary})},t.loadData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.compression,a=n.progressCallback;return r.binary?n.dataAccessHelper.fetchBinary(e,{compression:i,progressCallback:a}):n.dataAccessHelper.fetchText(t,e,{compression:i,progressCallback:a})}(n.url,e);return r.then(t.parse),r},t.parse=function(e){"string"==typeof e?t.parseAsText(e):t.parseAsArrayBuffer(e)},t.parseAsArrayBuffer=function(i){if(i&&i!==n.parseData){t.modified(),n.parseData=i;var a=i.slice(0,80),c=r.a.arrayBufferToString(a),f=function(e){for(var t=e.split(" ").filter(function(e){return e.indexOf("=")>-1}),n={},r=0;r<t.length;++r){var i=t[r].split("=");2===i.length&&(n[i[0]]=i[1])}return n}(c),d=c.indexOf("solid ");if(-1!==d&&d<10)t.parseAsText(r.a.arrayBufferToString(i));else{var p=new DataView(i,84);e.dataview=p;for(var h=(i.byteLength-84)/50,g=new Float32Array(9*h),m=new Float32Array(3*h),v=new Uint32Array(4*h),y=new Uint16Array(h),b=0,M=0;M<h;M++){var x=50*M;m[3*M+0]=p.getFloat32(x+0,!0),m[3*M+1]=p.getFloat32(x+4,!0),m[3*M+2]=p.getFloat32(x+8,!0),g[9*M+0]=p.getFloat32(x+12,!0),g[9*M+1]=p.getFloat32(x+16,!0),g[9*M+2]=p.getFloat32(x+20,!0),g[9*M+3]=p.getFloat32(x+24,!0),g[9*M+4]=p.getFloat32(x+28,!0),g[9*M+5]=p.getFloat32(x+32,!0),g[9*M+6]=p.getFloat32(x+36,!0),g[9*M+7]=p.getFloat32(x+40,!0),g[9*M+8]=p.getFloat32(x+44,!0),v[b++]=3,v[b++]=3*M+0,v[b++]=3*M+1,v[b++]=3*M+2,y[M]=p.getUint16(x+48,!0)}if("SPACE"in f&&"LPS"!==f.SPACE){var w=f.SPACE,A=new Float32Array(16);switch(A[15]=1,w[0]){case"L":A[0]=1;break;case"R":A[0]=-1;break;default:return void l("Can not convert STL file from ".concat(w," to LPS space: ")+"permutations not supported. Use itk.js STL reader instead.")}switch(w[1]){case"P":A[5]=1;break;case"A":A[5]=-1;break;default:return void l("Can not convert STL file from ".concat(w," to LPS space: ")+"permutations not supported. Use itk.js STL reader instead.")}switch(w[2]){case"S":A[10]=1;break;case"I":A[10]=-1;break;default:return void l("Can not convert STL file from ".concat(w," to LPS space: ")+"permutations not supported. Use itk.js STL reader instead.")}s.a.buildFromDegree().setMatrix(A).apply(g).apply(m)}var T=u.a.newInstance();T.getPoints().setData(g,3),T.getPolys().setData(v),T.getCellData().setScalars(o.a.newInstance({name:"Attribute",values:y})),T.getCellData().setNormals(o.a.newInstance({name:"Normals",values:m,numberOfComponents:3})),n.output[0]=T}}},t.parseAsText=function(e){if(e&&e!==n.parseData){t.modified(),n.parseData=e;for(var r=e.split("\n"),i=1,a=[],s=[],l=[];-1!==i;)i=f(r,i,a,s,l);var c=u.a.newInstance();c.getPoints().setData(Float32Array.from(a),3),c.getPolys().setData(Uint32Array.from(s)),c.getCellData().setNormals(o.a.newInstance({name:"Normals",values:Float32Array.from(l),numberOfComponents:3})),n.output[0]=c}},t.requestData=function(e,r){t.parse(n.parseData)}}var p={};function h(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,p,n),a.a.obj(e,t),a.a.get(e,t,["url","baseURL"]),a.a.setGet(e,t,["dataAccessHelper"]),a.a.algo(e,t,0,1),d(e,t),t.compression||(t.compression=null),t.progressCallback||(t.progressCallback=null)}var g=a.a.newInstance(h,"vtkSTLReader");t.a={extend:h,newInstance:g}}).call(this,n(33))},function(e){e.exports={H:[1],He:[2],Li:[3],Be:[4],B:[5],C:[6],N:[7],O:[8],F:[9],Ne:[10],Na:[11],Mg:[12],Al:[13],Si:[14],P:[15],S:[16],Cl:[17],Ar:[18],K:[19],Ca:[20],Sc:[21],Ti:[22],V:[23],Cr:[24],Mn:[25],Fe:[26],Co:[27],Ni:[28],Cu:[29],Zn:[30],Ga:[31],Ge:[32],As:[33],Se:[34],Br:[35],Kr:[36],Rb:[37],Sr:[38],Y:[39],Zr:[40],Nb:[41],Mo:[42],Tc:[43],Ru:[44],Rh:[45],Pd:[46],Ag:[47],Cd:[48],In:[49],Sn:[50],Sb:[51],Te:[52],I:[53],Xe:[54],Cs:[55],Ba:[56],La:[57],Ce:[58],Pr:[59],Nd:[60],Pm:[61],Sm:[62],Eu:[63],Gd:[64],Tb:[65],Dy:[66],Ho:[67],Er:[68],Tm:[69],Yb:[70],Lu:[71],Hf:[72],Ta:[73],W:[74],Re:[75],Os:[76],Ir:[77],Pt:[78],Au:[79],Hg:[80],Tl:[81],Pb:[82],Bi:[83],Po:[84],At:[85],Rn:[86],Fr:[87],Ra:[88],Ac:[89],Th:[90],Pa:[91],U:[92],Np:[93],Pu:[94],Am:[95],Cm:[96],Bk:[97],Cf:[98],Es:[99],Fm:[100],Md:[101],No:[102],Lr:[103],Rf:[104],Db:[105],Sg:[106],Bh:[107],Hs:[108],Mt:[109],Ds:[110],Rg:[111],Cn:[112],Uut:[113],Uuq:[114],Uup:[115],Uuh:[116],Uus:[117],Uuo:[118]}},function(e,t,n){(function(){var t,r,i,a,o,s,u;u=n(41),o=u.assign,s=u.isFunction,t=n(210),r=n(211),a=n(95),i=n(212),e.exports.create=function(e,n,r,i){var a,s;if(null==e)throw new Error("Root element needs a name");return i=o({},n,r,i),s=(a=new t(i)).element(e),i.headless||(a.declaration(i),null==i.pubID&&null==i.sysID||a.doctype(i)),s},e.exports.begin=function(e,n,i){var a;return s(e)&&(n=(a=[e,n])[0],i=a[1],e={}),n?new r(e,n,i):new t(e)},e.exports.stringWriter=function(e){return new a(e)},e.exports.streamWriter=function(e,t){return new i(e,t)}}).call(this)},function(e,t){e.exports="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkSphereMapperVS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n// this shader implements imposters in OpenGL for Spheres\n\nattribute vec4 vertexMC;\nattribute vec2 offsetMC;\n\n// optional normal declaration\n//VTK::Normal::Dec\n\n// Texture coordinates\n//VTK::TCoord::Dec\n\nuniform mat3 normalMatrix; // transform model coordinate directions to view coordinates\n\n// material property values\n//VTK::Color::Dec\n\n// clipping plane vars\n//VTK::Clip::Dec\n\n// camera and actor matrix values\n//VTK::Camera::Dec\n\nvarying vec4 vertexVCVSOutput;\nvarying float radiusVCVSOutput;\nvarying vec3 centerVCVSOutput;\n\nuniform int cameraParallel;\n\nvoid main()\n{\n  //VTK::Color::Impl\n\n  //VTK::Normal::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Clip::Impl\n\n  // compute the projected vertex position\n  vertexVCVSOutput = MCVCMatrix * vertexMC;\n  centerVCVSOutput = vertexVCVSOutput.xyz;\n  radiusVCVSOutput = length(offsetMC)*0.5;\n\n  // make the triangle face the camera\n  if (cameraParallel == 0)\n    {\n    vec3 dir = normalize(-vertexVCVSOutput.xyz);\n    vec3 base2 = normalize(cross(dir,vec3(1.0,0.0,0.0)));\n    vec3 base1 = cross(base2,dir);\n    vertexVCVSOutput.xyz = vertexVCVSOutput.xyz + offsetMC.x*base1 + offsetMC.y*base2;\n    }\n  else\n    {\n    // add in the offset\n    vertexVCVSOutput.xy = vertexVCVSOutput.xy + offsetMC;\n    }\n\n  gl_Position = VCDCMatrix * vertexVCVSOutput;\n}\n"},function(e,t){e.exports="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkStickMapperVS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n// this shader implements imposters in OpenGL for Sticks\n\nattribute vec4 vertexMC;\nattribute vec3 orientMC;\nattribute vec4 offsetMC;\nattribute float radiusMC;\n\n// optional normal declaration\n//VTK::Normal::Dec\n\n//VTK::Picking::Dec\n\n// Texture coordinates\n//VTK::TCoord::Dec\n\nuniform mat3 normalMatrix; // transform model coordinate directions to view coordinates\n\n// material property values\n//VTK::Color::Dec\n\n// clipping plane vars\n//VTK::Clip::Dec\n\n// camera and actor matrix values\n//VTK::Camera::Dec\n\nvarying vec4 vertexVCVSOutput;\nvarying float radiusVCVSOutput;\nvarying float lengthVCVSOutput;\nvarying vec3 centerVCVSOutput;\nvarying vec3 orientVCVSOutput;\n\nuniform int cameraParallel;\n\nvoid main()\n{\n  //VTK::Picking::Impl\n\n  //VTK::Color::Impl\n\n  //VTK::Normal::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Clip::Impl\n\n  vertexVCVSOutput = MCVCMatrix * vertexMC;\n  centerVCVSOutput = vertexVCVSOutput.xyz;\n  radiusVCVSOutput = radiusMC;\n  lengthVCVSOutput = length(orientMC);\n  orientVCVSOutput = normalMatrix * normalize(orientMC);\n\n  // make sure it is pointing out of the screen\n  if (orientVCVSOutput.z < 0.0)\n    {\n    orientVCVSOutput = -orientVCVSOutput;\n    }\n\n  // make the basis\n  vec3 xbase;\n  vec3 ybase;\n  vec3 dir = vec3(0.0,0.0,1.0);\n  if (cameraParallel == 0)\n    {\n    dir = normalize(-vertexVCVSOutput.xyz);\n    }\n  if (abs(dot(dir,orientVCVSOutput)) == 1.0)\n    {\n    xbase = normalize(cross(vec3(0.0,1.0,0.0),orientVCVSOutput));\n    ybase = cross(xbase,orientVCVSOutput);\n    }\n  else\n    {\n    xbase = normalize(cross(orientVCVSOutput,dir));\n    ybase = cross(orientVCVSOutput,xbase);\n    }\n\n  vec3 offsets = offsetMC.xyz*2.0-1.0;\n  vertexVCVSOutput.xyz = vertexVCVSOutput.xyz +\n    radiusVCVSOutput*offsets.x*xbase +\n    radiusVCVSOutput*offsets.y*ybase +\n    0.5*lengthVCVSOutput*offsets.z*orientVCVSOutput;\n\n  gl_Position = VCDCMatrix * vertexVCVSOutput;\n}\n"},function(e,t){e.exports="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkPolyDataVS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n\nattribute vec4 vertexDC;\n\nvarying vec3 vertexVCVSOutput;\nuniform mat4 DCVCMatrix;\n\nuniform float dcxmin;\nuniform float dcxmax;\nuniform float dcymin;\nuniform float dcymax;\n\nvoid main()\n{\n  // dcsmall is the device coords reduced to the\n  // x y area covered by the volume\n  vec4 dcsmall = vec4(\n    dcxmin + 0.5 * (vertexDC.x + 1.0) * (dcxmax - dcxmin),\n    dcymin + 0.5 * (vertexDC.y + 1.0) * (dcymax - dcymin),\n    vertexDC.z,\n    vertexDC.w);\n  vec4 vcpos = DCVCMatrix * dcsmall;\n  vertexVCVSOutput = vcpos.xyz/vcpos.w;\n  gl_Position = dcsmall;\n}\n"},function(e,t){e.exports="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkPolyDataFS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n// Template for the polydata mappers fragment shader\n\n// the output of this shader\n//VTK::Output::Dec\n\nvarying vec3 vertexVCVSOutput;\n\n// first declare the settings from the mapper\n// that impact the code paths in here\n\n// always set vtkNumComponents 1,2,3,4\n//VTK::NumComponents\n\n// possibly define vtkUseTriliear\n//VTK::TrilinearOn\n\n// possibly define vtkIndependentComponents\n//VTK::IndependentComponentsOn\n\n// Define the blend mode to use\n#define vtkBlendMode //VTK::BlendMode\n\n// define vtkLightComplexity\n//VTK::LightComplexity\n#if vtkLightComplexity > 0\nuniform float vSpecularPower;\nuniform float vAmbient;\nuniform float vDiffuse;\nuniform float vSpecular;\n//VTK::Light::Dec\n#endif\n\n// possibly define vtkGradientOpacityOn\n//VTK::GradientOpacityOn\n#ifdef vtkGradientOpacityOn\nuniform float goscale0;\nuniform float goshift0;\nuniform float gomin0;\nuniform float gomax0;\n#if defined(vtkIndependentComponentsOn) && (vtkNumComponents > 1)\nuniform float goscale1;\nuniform float goshift1;\nuniform float gomin1;\nuniform float gomax1;\n#if vtkNumComponents >= 3\nuniform float goscale2;\nuniform float goshift2;\nuniform float gomin2;\nuniform float gomax2;\n#endif\n#if vtkNumComponents >= 4\nuniform float goscale3;\nuniform float goshift3;\nuniform float gomin3;\nuniform float gomax3;\n#endif\n#endif\n#endif\n\n// camera values\nuniform float camThick;\nuniform float camNear;\nuniform float camFar;\n\n// values describing the volume geometry\nuniform vec3 vOriginVC;\nuniform vec3 vSpacing;\nuniform ivec3 volumeDimensions; // 3d texture dimensions\nuniform vec3 vPlaneNormal0;\nuniform float vPlaneDistance0;\nuniform vec3 vPlaneNormal1;\nuniform float vPlaneDistance1;\nuniform vec3 vPlaneNormal2;\nuniform float vPlaneDistance2;\nuniform vec3 vPlaneNormal3;\nuniform float vPlaneDistance3;\nuniform vec3 vPlaneNormal4;\nuniform float vPlaneDistance4;\nuniform vec3 vPlaneNormal5;\nuniform float vPlaneDistance5;\n\n// opacity and color textures\nuniform sampler2D otexture;\nuniform float oshift0;\nuniform float oscale0;\nuniform sampler2D ctexture;\nuniform float cshift0;\nuniform float cscale0;\n\n// jitter texture\nuniform sampler2D jtexture;\n\n// some 3D texture values\nuniform float sampleDistance;\nuniform vec3 vVCToIJK;\n\n// the heights defined below are the locations\n// for the up to four components of the tfuns\n// the tfuns have a height of 2XnumComps pixels so the\n// values are computed to hit the middle of the two rows\n// for that component\n#ifdef vtkIndependentComponentsOn\n#if vtkNumComponents == 2\nuniform float mix0;\nuniform float mix1;\n#define height0 0.25\n#define height1 0.75\n#endif\n#if vtkNumComponents == 3\nuniform float mix0;\nuniform float mix1;\nuniform float mix2;\n#define height0 0.17\n#define height1 0.5\n#define height2 0.83\n#endif\n#if vtkNumComponents == 4\nuniform float mix0;\nuniform float mix1;\nuniform float mix2;\nuniform float mix3;\n#define height0 0.125\n#define height1 0.375\n#define height2 0.625\n#define height3 0.875\n#endif\n#endif\n\n#if vtkNumComponents >= 2\nuniform float oshift1;\nuniform float oscale1;\nuniform float cshift1;\nuniform float cscale1;\n#endif\n#if vtkNumComponents >= 3\nuniform float oshift2;\nuniform float oscale2;\nuniform float cshift2;\nuniform float cscale2;\n#endif\n#if vtkNumComponents >= 4\nuniform float oshift3;\nuniform float oscale3;\nuniform float cshift3;\nuniform float cscale3;\n#endif\n\n// declaration for intermixed geometry\n//VTK::ZBuffer::Dec\n\n// Lighting values\n//VTK::Light::Dec\n\n//=======================================================================\n// Webgl2 specific version of functions\n#if __VERSION__ == 300\n\nuniform highp sampler3D texture1;\n\nvec4 getTextureValue(vec3 pos)\n{\n  vec4 tmp = texture(texture1, pos);\n#if vtkNumComponents == 1\n  tmp.a = tmp.r;\n#endif\n#if vtkNumComponents == 2\n  tmp.a = tmp.g;\n#endif\n#if vtkNumComponents == 3\n  tmp.a = length(tmp.rgb);\n#endif\n  return tmp;\n}\n\n//=======================================================================\n// WebGL1 specific version of functions\n#else\n\nuniform sampler2D texture1;\n\nuniform float texWidth;\nuniform float texHeight;\nuniform int xreps;\nuniform float xstride;\nuniform float ystride;\n\n// if computime triliear values from multiple z slices\n#ifdef vtkTriliearOn\nvec4 getTextureValue(vec3 ijk)\n{\n  float zoff = 1.0/float(volumeDimensions.z);\n  vec4 val1 = getOneTextureValue(ijk);\n  vec4 val2 = getOneTextureValue(vec3(ijk.xy, ijk.z + zoff));\n  float zmix = ijk.z - floor(ijk.z);\n  return mix(val1, val2, zmix);\n}\n\nvec4 getOneTextureValue(vec3 ijk)\n#else // nearest or fast linear\nvec4 getTextureValue(vec3 ijk)\n#endif\n{\n  vec3 tdims = vec3(volumeDimensions);\n\n  int z = int(ijk.z * tdims.z);\n  int yz = z / xreps;\n  int xz = z - yz*xreps;\n\n  float ni = (ijk.x + float(xz)) * tdims.x/xstride;\n  float nj = (ijk.y + float(yz)) * tdims.y/ystride;\n\n  vec2 tpos = vec2(ni/texWidth, nj/texHeight);\n\n  vec4 tmp = texture2D(texture1, tpos);\n\n#if vtkNumComponents == 1\n  tmp.a = tmp.r;\n#endif\n#if vtkNumComponents == 2\n  tmp.g = tmp.a;\n#endif\n#if vtkNumComponents == 3\n  tmp.a = length(tmp.rgb);\n#endif\n  return tmp;\n}\n\n// End of Webgl1 specific code\n//=======================================================================\n#endif\n\n//=======================================================================\n// compute the normal and gradient magnitude for a position\nvec4 computeNormal(vec3 pos, float scalar, vec3 tstep)\n{\n  vec4 result;\n  result.x = getTextureValue(pos + vec3(tstep.x, 0.0, 0.0)).a - scalar;\n  result.y = getTextureValue(pos + vec3(0.0, tstep.y, 0.0)).a - scalar;\n  result.z = getTextureValue(pos + vec3(0.0, 0.0, tstep.z)).a - scalar;\n\n  // divide by spacing\n  result.xyz /= vSpacing;\n\n  result.w = length(result.xyz);\n\n  // rotate to View Coords\n  result.xyz =\n    result.x * vPlaneNormal0 +\n    result.y * vPlaneNormal2 +\n    result.z * vPlaneNormal4;\n\n  if (result.w > 0.0)\n  {\n    result.xyz /= result.w;\n  }\n  return result;\n}\n\n//=======================================================================\n// compute the normals and gradient magnitudes for a position\n// for independent components\nmat4 computeMat4Normal(vec3 pos, vec4 tValue, vec3 tstep)\n{\n  mat4 result;\n  vec4 distX = getTextureValue(pos + vec3(tstep.x, 0.0, 0.0)) - tValue;\n  vec4 distY = getTextureValue(pos + vec3(0.0, tstep.y, 0.0)) - tValue;\n  vec4 distZ = getTextureValue(pos + vec3(0.0, 0.0, tstep.z)) - tValue;\n\n  // divide by spacing\n  distX /= vSpacing.x;\n  distY /= vSpacing.y;\n  distZ /= vSpacing.z;\n\n  mat3 rot;\n  rot[0] = vPlaneNormal0;\n  rot[1] = vPlaneNormal2;\n  rot[2] = vPlaneNormal4;\n\n  result[0].xyz = vec3(distX.r, distY.r, distZ.r);\n  result[0].a = length(result[0].xyz);\n  result[0].xyz *= rot;\n  if (result[0].w > 0.0)\n  {\n    result[0].xyz /= result[0].w;\n  }\n\n  result[1].xyz = vec3(distX.g, distY.g, distZ.g);\n  result[1].a = length(result[1].xyz);\n  result[1].xyz *= rot;\n  if (result[1].w > 0.0)\n  {\n    result[1].xyz /= result[1].w;\n  }\n\n// optionally compute the 3rd component\n#if vtkNumComponents >= 3\n  result[2].xyz = vec3(distX.b, distY.b, distZ.b);\n  result[2].a = length(result[2].xyz);\n  result[2].xyz *= rot;\n  if (result[2].w > 0.0)\n  {\n    result[2].xyz /= result[2].w;\n  }\n#endif\n\n// optionally compute the 4th component\n#if vtkNumComponents >= 4\n  result[3].xyz = vec3(distX.a, distY.a, distZ.a);\n  result[3].a = length(result[3].xyz);\n  result[3].xyz *= rot;\n  if (result[3].w > 0.0)\n  {\n    result[3].xyz /= result[3].w;\n  }\n#endif\n\n  return result;\n}\n\n//=======================================================================\n// Given a normal compute the gradient opacity factors\n//\nfloat computeGradientOpacityFactor(\n  vec4 normal, float goscale, float goshift, float gomin, float gomax)\n{\n#if defined(vtkGradientOpacityOn)\n  return clamp(normal.a*goscale + goshift, gomin, gomax);\n#else\n  return 1.0;\n#endif\n}\n\n#if vtkLightComplexity > 0\nvoid applyLighting(inout vec3 tColor, vec4 normal)\n{\n  vec3 diffuse = vec3(0.0, 0.0, 0.0);\n  vec3 specular = vec3(0.0, 0.0, 0.0);\n  //VTK::Light::Impl\n  tColor.rgb = tColor.rgb*(diffuse*vDiffuse + vAmbient) + specular*vSpecular;\n}\n#endif\n\n//=======================================================================\n// Given a texture value compute the color and opacity\n//\nvec4 getColorForValue(vec4 tValue, vec3 posIS, vec3 tstep)\n{\n  // compute the normal and gradient magnitude if needed\n  // We compute it as a vec4 if possible otherwise a mat4\n  //\n  vec4 goFactor = vec4(1.0,1.0,1.0,1.0);\n\n  // compute the normal vectors as needed\n#if (vtkLightComplexity > 0) || defined(vtkGradientOpacityOn)\n#if defined(vtkIndependentComponentsOn) && (vtkNumComponents > 1)\n  mat4 normalMat = computeMat4Normal(posIS, tValue, tstep);\n  vec4 normal0 = normalMat[0];\n  vec4 normal1 = normalMat[1];\n#if vtkNumComponents > 2\n  vec4 normal2 = normalMat[2];\n#endif\n#if vtkNumComponents > 3\n  vec4 normal3 = normalMat[3];\n#endif\n#else\n  vec4 normal0 = computeNormal(posIS, tValue.a, tstep);\n#endif\n#endif\n\n// compute gradient opacity factors as needed\n#if defined(vtkGradientOpacityOn)\n  goFactor.x =\n    computeGradientOpacityFactor(normal0, goscale0, goshift0, gomin0, gomax0);\n#if defined(vtkIndependentComponentsOn) && (vtkNumComponents > 1)\n  goFactor.y =\n    computeGradientOpacityFactor(normal1, goscale1, goshift1, gomin1, gomax1);\n#if vtkNumComponents > 2\n  goFactor.z =\n    computeGradientOpacityFactor(normal2, goscale2, goshift2, gomin2, gomax2);\n#if vtkNumComponents > 3\n  goFactor.w =\n    computeGradientOpacityFactor(normal3, goscale3, goshift3, gomin3, gomax3);\n#endif\n#endif\n#endif\n#endif\n\n// single component is always independent\n#if vtkNumComponents == 1\n  vec4 tColor = texture2D(ctexture, vec2(tValue.r * cscale0 + cshift0, 0.5));\n  tColor.a = goFactor.x*texture2D(otexture, vec2(tValue.r * oscale0 + oshift0, 0.5)).r;\n#endif\n\n#if defined(vtkIndependentComponentsOn) && vtkNumComponents >= 2\n  vec4 tColor = mix0*texture2D(ctexture, vec2(tValue.r * cscale0 + cshift0, height0));\n  tColor.a = goFactor.x*mix0*texture2D(otexture, vec2(tValue.r * oscale0 + oshift0, height0)).r;\n  vec3 tColor1 = mix1*texture2D(ctexture, vec2(tValue.g * cscale1 + cshift1, height1)).rgb;\n  tColor.a += goFactor.y*mix1*texture2D(otexture, vec2(tValue.g * oscale1 + oshift1, height1)).r;\n#if vtkNumComponents >= 3\n  vec3 tColor2 = mix2*texture2D(ctexture, vec2(tValue.b * cscale2 + cshift2, height2)).rgb;\n  tColor.a += goFactor.z*mix2*texture2D(otexture, vec2(tValue.b * oscale2 + oshift2, height2)).r;\n#if vtkNumComponents >= 4\n  vec3 tColor3 = mix3*texture2D(ctexture, vec2(tValue.a * cscale3 + cshift3, height3)).rgb;\n  tColor.a += goFactor.w*mix3*texture2D(otexture, vec2(tValue.a * oscale3 + oshift3, height3)).r;\n#endif\n#endif\n\n#else // then not independent\n\n#if vtkNumComponents == 2\n  float lum = tValue.r * cscale0 + cshift0;\n  float alpha = goFactor.x*texture2D(otexture, vec2(tValue.a * oscale1 + oshift1, 0.5)).r;\n  vec4 tColor = vec4(lum, lum, lum, alpha);\n#endif\n#if vtkNumComponents == 3\n  vec4 tColor;\n  tColor.r = tValue.r * cscale0 + cshift0;\n  tColor.g = tValue.g * cscale1 + cshift1;\n  tColor.b = tValue.b * cscale2 + cshift2;\n  tColor.a = goFactor.x*texture2D(otexture, vec2(tValue.a * oscale0 + oshift0, 0.5)).r;\n#endif\n#if vtkNumComponents == 4\n  vec4 tColor;\n  tColor.r = tValue.r * cscale0 + cshift0;\n  tColor.g = tValue.g * cscale1 + cshift1;\n  tColor.b = tValue.b * cscale2 + cshift2;\n  tColor.a = goFactor.x*texture2D(otexture, vec2(tValue.a * oscale3 + oshift3, 0.5)).r;\n#endif\n#endif // dependent\n\n// apply lighting if requested as appropriate\n#if vtkLightComplexity > 0\n  applyLighting(tColor.rgb, normal0);\n#if defined(vtkIndependentComponentsOn) && vtkNumComponents >= 2\n  applyLighting(tColor1, normal1);\n#if vtkNumComponents >= 3\n  applyLighting(tColor2, normal2);\n#if vtkNumComponents >= 4\n  applyLighting(tColor3, normal3);\n#endif\n#endif\n#endif\n#endif\n\n// perform final independent blend as needed\n#if defined(vtkIndependentComponentsOn) && vtkNumComponents >= 2\n  tColor.rgb += tColor1;\n#if vtkNumComponents >= 3\n  tColor.rgb += tColor2;\n#if vtkNumComponents >= 4\n  tColor.rgb += tColor3;\n#endif\n#endif\n#endif\n\n  return tColor;\n}\n\n//=======================================================================\n// Compute a new start and end point for a given ray based\n// on the provided bounded clipping plane (aka a rectangle)\nvoid getRayPointIntersectionBounds(\n  vec3 rayPos, vec3 rayDir,\n  vec3 planeDir, float planeDist,\n  inout vec2 tbounds, vec3 vPlaneX, vec3 vPlaneY,\n  float vSize1, float vSize2)\n{\n  float result = dot(rayDir, planeDir);\n  if (result == 0.0)\n  {\n    return;\n  }\n  result = -1.0 * (dot(rayPos, planeDir) + planeDist) / result;\n  vec3 xposVC = rayPos + rayDir*result;\n  vec3 vxpos = xposVC - vOriginVC;\n  vec2 vpos = vec2(\n    dot(vxpos, vPlaneX),\n    dot(vxpos, vPlaneY));\n\n  // on some apple nvidia systems this does not work\n  // if (vpos.x < 0.0 || vpos.x > vSize1 ||\n  //     vpos.y < 0.0 || vpos.y > vSize2)\n  // even just\n  // if (vpos.x < 0.0 || vpos.y < 0.0)\n  // fails\n  // so instead we compute a value that represents in and out\n  //and then compute the return using this value\n  float xcheck = max(0.0, vpos.x * (vpos.x - vSize1)); //  0 means in bounds\n  float check = sign(max(xcheck, vpos.y * (vpos.y - vSize2))); //  0 means in bounds, 1 = out\n\n  tbounds = mix(\n   vec2(min(tbounds.x, result), max(tbounds.y, result)), // in value\n   tbounds, // out value\n   check);  // 0 in 1 out\n}\n\n//=======================================================================\n// Apply the specified blend mode operation along the ray's path.\n//\nvoid applyBlend(vec3 posIS, vec3 stepIS, vec3 tdims, float numSteps)\n{\n  vec3 tstep = 1.0/tdims;\n\n  // integer number of steps to take and residual step size\n  int count = int(numSteps - 0.05); // end slightly inside\n  float residual = numSteps - float(count);\n\n  // local vars for the loop\n  vec4 color = vec4(0.0, 0.0, 0.0, 0.0);\n  vec4 tValue;\n  vec4 tColor;\n\n  int blendMode = //VTK::BlendMode;\n  #if vtkBlendMode == 0 // COMPOSITE_BLEND\n    for (int i = 0; i < //VTK::MaximumSamplesValue ; ++i)\n      {\n        // compute the scalar\n        tValue = getTextureValue(posIS);\n\n        // now map through opacity and color\n        tColor = getColorForValue(tValue, posIS, tstep);\n\n        float mix = (1.0 - color.a);\n\n        // this line should not be needed but nvidia seems to not handle\n        // the break correctly on windows/chrome 58 angle\n        mix = mix * sign(max(float(count - i + 1), 0.0));\n\n        color = color + vec4(tColor.rgb*tColor.a, tColor.a)*mix;\n        if (i >= count) { break; }\n        if (color.a > 0.99) { color.a = 1.0; break; }\n        posIS += stepIS;\n      }\n\n      if (color.a < 0.99)\n      {\n        posIS += (residual - 1.0)*stepIS;\n\n        // compute the scalar\n        tValue = getTextureValue(posIS);\n\n        // now map through opacity and color\n        tColor = getColorForValue(tValue, posIS, tstep);\n\n        float mix = (1.0 - color.a);\n        color = color + vec4(tColor.rgb*tColor.a, tColor.a)*mix;\n      }\n\n      gl_FragData[0] = vec4(color.rgb/color.a, color.a);\n  #endif\n  #if vtkBlendMode == 1 || vtkBlendMode == 2\n    // MAXIMUM_INTENSITY_BLEND || MINIMUM_INTENSITY_BLEND\n    // Find maximum/minimum intensity along the ray.\n    vec4 value = getTextureValue(posIS);\n\n    // Define the operation we will use (min or max)\n    #if vtkBlendMode == 1\n    #define OP max\n    #else\n    #define OP min\n    #endif\n\n    // Sample along the ray until MaximumSamplesValue,\n    // ending slightly inside the total distance\n    for (int i = 0; i < //VTK::MaximumSamplesValue ; ++i)\n    {\n      // compute the scalar\n      tValue = getTextureValue(posIS);\n\n      // Update the maximum value if necessary\n      value = OP(tValue, value);\n\n      // If we have reached the last step, break\n      if (i >= count) { break; }\n\n      // Otherwise, continue along the ray\n      posIS += stepIS;\n    }\n\n    // Perform the last step along the ray using the\n    // residual distance\n    posIS += (residual - 1.0) * stepIS;\n\n    // Obtain the value at this position (scalar or vector, depending on the number of components)\n    tValue = getTextureValue(posIS);\n\n    // Update the minimum/maximum value if necessary\n    value = OP(tValue, value);\n\n    // Now map through opacity and color\n    gl_FragData[0] = getColorForValue(value, posIS, tstep);\n  #endif\n  #if vtkBlendMode == 3 //AVERAGE_INTENSITY_BLEND\n    vec4 averageIPScalarRangeMin = vec4 (\n      //VTK::AverageIPScalarRangeMin,\n      //VTK::AverageIPScalarRangeMin,\n      //VTK::AverageIPScalarRangeMin,\n      1.0);\n    vec4 averageIPScalarRangeMax = vec4(\n      //VTK::AverageIPScalarRangeMax,\n      //VTK::AverageIPScalarRangeMax,\n      //VTK::AverageIPScalarRangeMax,\n      1.0);\n\n    vec4 sum = vec4(0.);\n\n    // Declare i outside of the loop\n    int i = 0;\n\n    // Sample along the ray until MaximumSamplesValue,\n    // ending slightly inside the total distance\n    for (i = 0; i < //VTK::MaximumSamplesValue ; ++i)\n    {\n      // compute the scalar\n      tValue = getTextureValue(posIS);\n\n      // One can control the scalar range by setting the AverageIPScalarRange to disregard scalar values, not in the range of interest, from the average computation.\n      // Notes:\n      // - We are comparing all values in the texture to see if any of them\n      //   are outside of the scalar range. In the future we might want to allow\n      //   scalar ranges for each component.\n      // - We are setting the alpha channel for averageIPScalarRangeMin and\n      //   averageIPScalarRangeMax so that we do not trigger this 'continue'\n      //   based on the alpha channel comparison.\n      // - There might be a better way to do this. I'm not sure if there is an\n      //   equivalent of 'any' which only operates on RGB, though I suppose\n      //   we could write an 'anyRGB' function and see if that is faster.\n      averageIPScalarRangeMin.a = tValue.a;\n      averageIPScalarRangeMax.a = tValue.a;\n      if (any(lessThan(tValue, averageIPScalarRangeMin)) ||\n          any(greaterThan(tValue, averageIPScalarRangeMax))) {\n        continue;\n      }\n\n      // Sum the values across each step in the path\n      sum += tValue;\n\n      // If we have reached the last step, break\n      if (i >= count) { break; }\n\n      // Otherwise, continue along the ray\n      posIS += stepIS;\n    }\n\n    // Perform the last step along the ray using the\n    // residual distance\n    posIS += (residual - 1.0) * stepIS;\n\n    // compute the scalar\n    tValue = getTextureValue(posIS);\n\n    // Ensure i is never zero so we don't get divide-by-zero issues\n    i = max(1, i);\n\n    // Divide by the total number of samples that were taken\n    float i_float = float(i);\n\n    // One can control the scalar range by setting the AverageIPScalarRange to disregard scalar values, not in the range of interest, from the average computation\n    if (any(lessThan(tValue, averageIPScalarRangeMin)) ||\n      any(greaterThan(tValue, averageIPScalarRangeMax))) {\n      sum /= vec4(i_float, i_float, i_float, 1.0);\n    } else {\n      sum += tValue;\n\n      sum /= vec4(i_float + 1.0, i_float + 1.0, i_float + 1.0, 1.0);\n    }\n\n    gl_FragData[0] = getColorForValue(sum, posIS, tstep);\n  #endif\n}\n\n//=======================================================================\n// given a\n// - ray direction (rayDir)\n// - starting point (vertexVCVSOutput)\n// - bounding planes of the volume\n// - optionally depth buffer values\n// - far clipping plane\n// compute the start/end distances of the ray we need to cast\nvec2 computeRayDistances(vec3 rayDir, vec3 tdims)\n{\n  vec2 dists = vec2(100.0*camFar, -1.0);\n\n  vec3 vSize = vSpacing*(tdims - 1.0);\n\n  // all this is in View Coordinates\n  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,\n    vPlaneNormal0, vPlaneDistance0, dists, vPlaneNormal2, vPlaneNormal4,\n    vSize.y, vSize.z);\n  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,\n    vPlaneNormal1, vPlaneDistance1, dists, vPlaneNormal2, vPlaneNormal4,\n    vSize.y, vSize.z);\n  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,\n    vPlaneNormal2, vPlaneDistance2, dists, vPlaneNormal0, vPlaneNormal4,\n    vSize.x, vSize.z);\n  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,\n    vPlaneNormal3, vPlaneDistance3, dists, vPlaneNormal0, vPlaneNormal4,\n    vSize.x, vSize.z);\n  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,\n    vPlaneNormal4, vPlaneDistance4, dists, vPlaneNormal0, vPlaneNormal2,\n    vSize.x, vSize.y);\n  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,\n    vPlaneNormal5, vPlaneDistance5, dists, vPlaneNormal0, vPlaneNormal2,\n    vSize.x, vSize.y);\n\n  // do not go behind front clipping plane\n  dists.x = max(0.0,dists.x);\n\n  // do not go PAST far clipping plane\n  float farDist = -camThick/rayDir.z;\n  dists.y = min(farDist,dists.y);\n\n  // Do not go past the zbuffer value if set\n  // This is used for intermixing opaque geometry\n  //VTK::ZBuffer::Impl\n\n  return dists;\n}\n\n//=======================================================================\n// Compute the index space starting position (pos) and step\n// Also return the float number fo steps to take numSteps\n//\nvoid computeIndexSpaceValues(out vec3 pos, out vec3 step, out float numSteps, vec3 rayDir, vec2 dists)\n{\n  // compute starting and ending values in volume space\n  pos = vertexVCVSOutput + dists.x*rayDir;\n  pos = pos - vOriginVC;\n\n  // convert to volume basis and origin\n  pos = vec3(\n    dot(pos, vPlaneNormal0),\n    dot(pos, vPlaneNormal2),\n    dot(pos, vPlaneNormal4));\n  vec3 endPos = vertexVCVSOutput + dists.y*rayDir;\n  endPos = endPos - vOriginVC;\n  endPos = vec3(\n    dot(endPos, vPlaneNormal0),\n    dot(endPos, vPlaneNormal2),\n    dot(endPos, vPlaneNormal4));\n\n  // start slightly inside and apply some jitter\n  float jitter = texture2D(jtexture, gl_FragCoord.xy/32.0).r;\n  vec3 delta = endPos - pos;\n  pos = pos + normalize(delta)*(0.01 + 0.98*jitter)*sampleDistance;\n\n  // update vdelta post jitter\n  delta = endPos - pos;\n\n  numSteps = length(delta) / sampleDistance;\n  step = delta / numSteps;\n\n  // vVCToIJK handles spacing going from world distances to tcoord distances\n  pos *= vVCToIJK;\n  step *= vVCToIJK;\n}\n\nvoid main()\n{\n  // camera is at 0,0,0 so rayDir for perspective is just the vc coord\n  vec3 rayDirVC = normalize(vertexVCVSOutput);\n\n  vec3 tdims = vec3(volumeDimensions);\n\n  // compute the start and end points for the ray\n  vec2 rayStartEndDistancesVC = computeRayDistances(rayDirVC, tdims);\n\n  // do we need to composite? aka does the ray have any length\n  // If not, bail out early\n  if (rayStartEndDistancesVC.y <= rayStartEndDistancesVC.x)\n  {\n    discard;\n  }\n\n  // IS = Index Space\n  vec3 posIS;\n  vec3 stepIS;\n  float numSteps;\n  computeIndexSpaceValues(posIS, stepIS, numSteps, rayDirVC, rayStartEndDistancesVC);\n\n  // Perform the blending operation along the ray\n  applyBlend(posIS, stepIS, tdims, numSteps);\n}\n"},function(e,t,n){var r;!function(i){"use strict";function a(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function o(e,t,n,r,i,o){return a((s=a(a(t,e),a(r,o)))<<(u=i)|s>>>32-u,n);var s,u}function s(e,t,n,r,i,a,s){return o(t&n|~t&r,e,t,i,a,s)}function u(e,t,n,r,i,a,s){return o(t&r|n&~r,e,t,i,a,s)}function l(e,t,n,r,i,a,s){return o(t^n^r,e,t,i,a,s)}function c(e,t,n,r,i,a,s){return o(n^(t|~r),e,t,i,a,s)}function f(e,t){var n,r,i,o,f;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var d=1732584193,p=-271733879,h=-1732584194,g=271733878;for(n=0;n<e.length;n+=16)r=d,i=p,o=h,f=g,d=s(d,p,h,g,e[n],7,-680876936),g=s(g,d,p,h,e[n+1],12,-389564586),h=s(h,g,d,p,e[n+2],17,606105819),p=s(p,h,g,d,e[n+3],22,-1044525330),d=s(d,p,h,g,e[n+4],7,-176418897),g=s(g,d,p,h,e[n+5],12,1200080426),h=s(h,g,d,p,e[n+6],17,-1473231341),p=s(p,h,g,d,e[n+7],22,-45705983),d=s(d,p,h,g,e[n+8],7,1770035416),g=s(g,d,p,h,e[n+9],12,-1958414417),h=s(h,g,d,p,e[n+10],17,-42063),p=s(p,h,g,d,e[n+11],22,-1990404162),d=s(d,p,h,g,e[n+12],7,1804603682),g=s(g,d,p,h,e[n+13],12,-40341101),h=s(h,g,d,p,e[n+14],17,-1502002290),d=u(d,p=s(p,h,g,d,e[n+15],22,1236535329),h,g,e[n+1],5,-165796510),g=u(g,d,p,h,e[n+6],9,-1069501632),h=u(h,g,d,p,e[n+11],14,643717713),p=u(p,h,g,d,e[n],20,-373897302),d=u(d,p,h,g,e[n+5],5,-701558691),g=u(g,d,p,h,e[n+10],9,38016083),h=u(h,g,d,p,e[n+15],14,-660478335),p=u(p,h,g,d,e[n+4],20,-405537848),d=u(d,p,h,g,e[n+9],5,568446438),g=u(g,d,p,h,e[n+14],9,-1019803690),h=u(h,g,d,p,e[n+3],14,-187363961),p=u(p,h,g,d,e[n+8],20,1163531501),d=u(d,p,h,g,e[n+13],5,-1444681467),g=u(g,d,p,h,e[n+2],9,-51403784),h=u(h,g,d,p,e[n+7],14,1735328473),d=l(d,p=u(p,h,g,d,e[n+12],20,-1926607734),h,g,e[n+5],4,-378558),g=l(g,d,p,h,e[n+8],11,-2022574463),h=l(h,g,d,p,e[n+11],16,1839030562),p=l(p,h,g,d,e[n+14],23,-35309556),d=l(d,p,h,g,e[n+1],4,-1530992060),g=l(g,d,p,h,e[n+4],11,1272893353),h=l(h,g,d,p,e[n+7],16,-155497632),p=l(p,h,g,d,e[n+10],23,-1094730640),d=l(d,p,h,g,e[n+13],4,681279174),g=l(g,d,p,h,e[n],11,-358537222),h=l(h,g,d,p,e[n+3],16,-722521979),p=l(p,h,g,d,e[n+6],23,76029189),d=l(d,p,h,g,e[n+9],4,-640364487),g=l(g,d,p,h,e[n+12],11,-421815835),h=l(h,g,d,p,e[n+15],16,530742520),d=c(d,p=l(p,h,g,d,e[n+2],23,-995338651),h,g,e[n],6,-198630844),g=c(g,d,p,h,e[n+7],10,1126891415),h=c(h,g,d,p,e[n+14],15,-1416354905),p=c(p,h,g,d,e[n+5],21,-57434055),d=c(d,p,h,g,e[n+12],6,1700485571),g=c(g,d,p,h,e[n+3],10,-1894986606),h=c(h,g,d,p,e[n+10],15,-1051523),p=c(p,h,g,d,e[n+1],21,-2054922799),d=c(d,p,h,g,e[n+8],6,1873313359),g=c(g,d,p,h,e[n+15],10,-30611744),h=c(h,g,d,p,e[n+6],15,-1560198380),p=c(p,h,g,d,e[n+13],21,1309151649),d=c(d,p,h,g,e[n+4],6,-145523070),g=c(g,d,p,h,e[n+11],10,-1120210379),h=c(h,g,d,p,e[n+2],15,718787259),p=c(p,h,g,d,e[n+9],21,-343485551),d=a(d,r),p=a(p,i),h=a(h,o),g=a(g,f);return[d,p,h,g]}function d(e){var t,n="",r=32*e.length;for(t=0;t<r;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function p(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var r=8*e.length;for(t=0;t<r;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function h(e){var t,n,r="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),r+="0123456789abcdef".charAt(t>>>4&15)+"0123456789abcdef".charAt(15&t);return r}function g(e){return unescape(encodeURIComponent(e))}function m(e){return function(e){return d(f(p(e),8*e.length))}(g(e))}function v(e,t){return function(e,t){var n,r,i=p(e),a=[],o=[];for(a[15]=o[15]=void 0,i.length>16&&(i=f(i,8*e.length)),n=0;n<16;n+=1)a[n]=909522486^i[n],o[n]=1549556828^i[n];return r=f(a.concat(p(t)),512+8*t.length),d(f(o.concat(r),640))}(g(e),g(t))}function y(e,t,n){return t?n?v(t,e):h(v(t,e)):n?m(e):h(m(e))}void 0===(r=function(){return y}.call(t,n,t,e))||(e.exports=r)}()},function(e,t,n){(function(r){var i,a,o;function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/**
 * @license
 * webvr-polyfill
 * Copyright (c) 2015-2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * cardboard-vr-display
 * Copyright (c) 2015-2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * webvr-polyfill-dpdb
 * Copyright (c) 2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * wglu-preserve-state
 * Copyright (c) 2016, Brandon Jones.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
/**
 * @license
 * nosleep.js
 * Copyright (c) 2017, Rich Tibbett
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
/**
 * @license
 * webvr-polyfill
 * Copyright (c) 2015-2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * cardboard-vr-display
 * Copyright (c) 2015-2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * webvr-polyfill-dpdb
 * Copyright (c) 2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * wglu-preserve-state
 * Copyright (c) 2016, Brandon Jones.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
/**
 * @license
 * nosleep.js
 * Copyright (c) 2017, Rich Tibbett
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */o=function(){"use strict";var e="undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:{};var t,n,i=function(){return/Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent)},a=function(e,t){for(var n=0,r=e.length;n<r;n++)t[n]=e[n]},o=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},s=(function(t,n){
/**
     * @license
     * cardboard-vr-display
     * Copyright (c) 2015-2017 Google
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     * http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * gl-preserve-state
     * Copyright (c) 2016, Brandon Jones.
     *
     * Permission is hereby granted, free of charge, to any person obtaining a copy
     * of this software and associated documentation files (the "Software"), to deal
     * in the Software without restriction, including without limitation the rights
     * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
     * copies of the Software, and to permit persons to whom the Software is
     * furnished to do so, subject to the following conditions:
     *
     * The above copyright notice and this permission notice shall be included in
     * all copies or substantial portions of the Software.
     *
     * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
     * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
     * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
     * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
     * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
     * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
     * THE SOFTWARE.
     */
/**
     * @license
     * webvr-polyfill-dpdb
     * Copyright (c) 2015-2017 Google
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     * http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * nosleep.js
     * Copyright (c) 2017, Rich Tibbett
     *
     * Permission is hereby granted, free of charge, to any person obtaining a copy
     * of this software and associated documentation files (the "Software"), to deal
     * in the Software without restriction, including without limitation the rights
     * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
     * copies of the Software, and to permit persons to whom the Software is
     * furnished to do so, subject to the following conditions:
     *
     * The above copyright notice and this permission notice shall be included in
     * all copies or substantial portions of the Software.
     *
     * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
     * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
     * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
     * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
     * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
     * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
     * THE SOFTWARE.
     */
t.exports=function(){var t,n,r,i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=function(e,t,n){return e+(t-e)*n},u=function(){var e=/iPad|iPhone|iPod/.test(navigator.platform);return function(){return e}}(),l=function(){var e=-1!==navigator.userAgent.indexOf("Version")&&-1!==navigator.userAgent.indexOf("Android")&&-1!==navigator.userAgent.indexOf("Chrome");return function(){return e}}(),c=(/^((?!chrome|android).)*safari/i.test(navigator.userAgent),function(){var e=-1!==navigator.userAgent.indexOf("Firefox")&&-1!==navigator.userAgent.indexOf("Android");return function(){return e}}()),f=(n=navigator.userAgent.match(/.*Chrome\/([0-9]+)/),r=n?parseInt(n[1],10):null,function(){return r}),d=function(){var e=!1;if(65===f()){var t=navigator.userAgent.match(/.*Chrome\/([0-9\.]*)/);if(t){var n=t[1].split("."),r=o(n,4),i=(r[0],r[1],r[2]),a=r[3];e=3325===parseInt(i,10)&&parseInt(a,10)<148}}return function(){return e}}(),p=function(){var e=-1!==navigator.userAgent.indexOf("R7 Build");return function(){return e}}(),h=function(){var e=90==window.orientation||-90==window.orientation;return p()?!e:e},g=function(){return Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio},m=function(){return Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio},v=function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else{if(!document.msExitFullscreen)return!1;document.msExitFullscreen()}return!0},y=function(e,t,n,r){var i=e.createShader(e.VERTEX_SHADER);e.shaderSource(i,t),e.compileShader(i);var a=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(a,n),e.compileShader(a);var o=e.createProgram();for(var s in e.attachShader(o,i),e.attachShader(o,a),r)e.bindAttribLocation(o,r[s],s);return e.linkProgram(o),e.deleteShader(i),e.deleteShader(a),o},b=function(e,t){for(var n={},r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i="",a=0;a<r;a++){var o=e.getActiveUniform(t,a);i=o.name.replace("[0]",""),n[i]=e.getUniformLocation(t,i)}return n},M=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t},x=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},w=function(e){if(u()){var t=e.style.width,n=e.style.height;e.style.width=parseInt(t)+1+"px",e.style.height=parseInt(n)+"px",setTimeout(function(){e.style.width=t,e.style.height=n},100)}window.canvas=e},A=function(){var e=Math.PI/180,t=.25*Math.PI,n=new Float32Array([0,0,0,1]),r=new Float32Array([0,0,0]);function i(i,a,o,s,u,l){!function(n,r,i,a){var o=Math.tan(r?r.upDegrees*e:t),s=Math.tan(r?r.downDegrees*e:t),u=Math.tan(r?r.leftDegrees*e:t),l=Math.tan(r?r.rightDegrees*e:t),c=2/(u+l),f=2/(o+s);n[0]=c,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=f,n[6]=0,n[7]=0,n[8]=-(u-l)*c*.5,n[9]=(o-s)*f*.5,n[10]=a/(i-a),n[11]=-1,n[12]=0,n[13]=0,n[14]=a*i/(i-a),n[15]=0}(i,s||null,l.depthNear,l.depthFar);var c,f,d,p,h,g,m,v,y,b,M,x,w,A,T,C,S,D,I,E=o.orientation||n,N=o.position||r;c=a,d=N,p=(f=E)[0],h=f[1],g=f[2],m=f[3],M=p*(v=p+p),x=p*(y=h+h),w=p*(b=g+g),A=h*y,T=h*b,C=g*b,S=m*v,D=m*y,I=m*b,c[0]=1-(A+C),c[1]=x+I,c[2]=w-D,c[3]=0,c[4]=x-I,c[5]=1-(M+C),c[6]=T+S,c[7]=0,c[8]=w+D,c[9]=T-S,c[10]=1-(M+A),c[11]=0,c[12]=d[0],c[13]=d[1],c[14]=d[2],c[15]=1,u&&function(e,t,n){var r,i,a,o,s,u,l,c,f,d,p,h,g=n[0],m=n[1],v=n[2];t===e?(e[12]=t[0]*g+t[4]*m+t[8]*v+t[12],e[13]=t[1]*g+t[5]*m+t[9]*v+t[13],e[14]=t[2]*g+t[6]*m+t[10]*v+t[14],e[15]=t[3]*g+t[7]*m+t[11]*v+t[15]):(r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],f=t[8],d=t[9],p=t[10],h=t[11],e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=u,e[6]=l,e[7]=c,e[8]=f,e[9]=d,e[10]=p,e[11]=h,e[12]=r*g+s*m+f*v+t[12],e[13]=i*g+u*m+d*v+t[13],e[14]=a*g+l*m+p*v+t[14],e[15]=o*g+c*m+h*v+t[15])}(a,a,u),function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=t[8],f=t[9],d=t[10],p=t[11],h=t[12],g=t[13],m=t[14],v=t[15],y=n*s-r*o,b=n*u-i*o,M=n*l-a*o,x=r*u-i*s,w=r*l-a*s,A=i*l-a*u,T=c*g-f*h,C=c*m-d*h,S=c*v-p*h,D=f*m-d*g,I=f*v-p*g,E=d*v-p*m,N=y*E-b*I+M*D+x*S-w*C+A*T;if(!N)return null;N=1/N,e[0]=(s*E-u*I+l*D)*N,e[1]=(i*I-r*E-a*D)*N,e[2]=(g*A-m*w+v*x)*N,e[3]=(d*w-f*A-p*x)*N,e[4]=(u*S-o*E-l*C)*N,e[5]=(n*E-i*S+a*C)*N,e[6]=(m*M-h*A-v*b)*N,e[7]=(c*A-d*M+p*b)*N,e[8]=(o*I-s*S+l*T)*N,e[9]=(r*S-n*I-a*T)*N,e[10]=(h*w-g*M+v*y)*N,e[11]=(f*M-c*w-p*y)*N,e[12]=(s*C-o*D-u*T)*N,e[13]=(n*D-r*C+i*T)*N,e[14]=(g*b-h*x-m*y)*N,e[15]=(c*x-f*b+d*y)*N}(a,a)}return function(e,t,n){return!(!e||!t||(e.pose=t,e.timestamp=t.timestamp,i(e.leftProjectionMatrix,e.leftViewMatrix,t,n._getFieldOfView("left"),n._getEyeOffset("left"),n),i(e.rightProjectionMatrix,e.rightViewMatrix,t,n._getFieldOfView("right"),n._getEyeOffset("right"),n),0))}}(),T=function(e){var t,n=e.indexOf("://");t=-1!==n?n+3:0;var r=e.indexOf("/",t);return-1===r&&(r=e.length),e.substring(0,r)},C=(t={},function(e,n){void 0===t[e]&&(console.warn("webvr-polyfill: "+n),t[e]=!0)}),S=function(e,t){var n=t?"Please use "+t+" instead.":"";C(e,e+" has been deprecated. This may not work on native WebVR displays. "+n)},D=function(e,t,n){if(t){for(var r=[],i=null,a=0;a<t.length;++a){var o=t[a];switch(o){case e.TEXTURE_BINDING_2D:case e.TEXTURE_BINDING_CUBE_MAP:var s=t[++a];if(s<e.TEXTURE0||s>e.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),r.push(null,null);break}i||(i=e.getParameter(e.ACTIVE_TEXTURE)),e.activeTexture(s),r.push(e.getParameter(o),null);break;case e.ACTIVE_TEXTURE:i=e.getParameter(e.ACTIVE_TEXTURE),r.push(null);break;default:r.push(e.getParameter(o))}}n(e);for(var a=0;a<t.length;++a){var o=t[a],u=r[a];switch(o){case e.ACTIVE_TEXTURE:break;case e.ARRAY_BUFFER_BINDING:e.bindBuffer(e.ARRAY_BUFFER,u);break;case e.COLOR_CLEAR_VALUE:e.clearColor(u[0],u[1],u[2],u[3]);break;case e.COLOR_WRITEMASK:e.colorMask(u[0],u[1],u[2],u[3]);break;case e.CURRENT_PROGRAM:e.useProgram(u);break;case e.ELEMENT_ARRAY_BUFFER_BINDING:e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,u);break;case e.FRAMEBUFFER_BINDING:e.bindFramebuffer(e.FRAMEBUFFER,u);break;case e.RENDERBUFFER_BINDING:e.bindRenderbuffer(e.RENDERBUFFER,u);break;case e.TEXTURE_BINDING_2D:var s=t[++a];if(s<e.TEXTURE0||s>e.TEXTURE31)break;e.activeTexture(s),e.bindTexture(e.TEXTURE_2D,u);break;case e.TEXTURE_BINDING_CUBE_MAP:var s=t[++a];if(s<e.TEXTURE0||s>e.TEXTURE31)break;e.activeTexture(s),e.bindTexture(e.TEXTURE_CUBE_MAP,u);break;case e.VIEWPORT:e.viewport(u[0],u[1],u[2],u[3]);break;case e.BLEND:case e.CULL_FACE:case e.DEPTH_TEST:case e.SCISSOR_TEST:case e.STENCIL_TEST:u?e.enable(o):e.disable(o);break;default:console.log("No GL restore behavior for 0x"+o.toString(16))}i&&e.activeTexture(i)}}else n(e)},I=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join("\n"),E=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join("\n");function N(e,t,n,r){this.gl=e,this.cardboardUI=t,this.bufferScale=n,this.dirtySubmitFrameBindings=r,this.ctxAttribs=e.getContextAttributes(),this.meshWidth=20,this.meshHeight=20,this.bufferWidth=e.drawingBufferWidth,this.bufferHeight=e.drawingBufferHeight,this.realBindFramebuffer=e.bindFramebuffer,this.realEnable=e.enable,this.realDisable=e.disable,this.realColorMask=e.colorMask,this.realClearColor=e.clearColor,this.realViewport=e.viewport,u()||(this.realCanvasWidth=Object.getOwnPropertyDescriptor(e.canvas.__proto__,"width"),this.realCanvasHeight=Object.getOwnPropertyDescriptor(e.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=y(e,I,E,this.attribs),this.uniforms=b(e,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),this.indexCount=0,this.renderTarget=e.createTexture(),this.framebuffer=e.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=e.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=e.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=e.createRenderbuffer()),this.patch(),this.onResize()}N.prototype.destroy=function(){var e=this.gl;this.unpatch(),e.deleteProgram(this.program),e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.indexBuffer),e.deleteTexture(this.renderTarget),e.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&e.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&e.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&e.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},N.prototype.onResize=function(){var e=this.gl,t=this,n=[e.RENDERBUFFER_BINDING,e.TEXTURE_BINDING_2D,e.TEXTURE0];D(e,n,function(e){t.realBindFramebuffer.call(e,e.FRAMEBUFFER,null),t.scissorTest&&t.realDisable.call(e,e.SCISSOR_TEST),t.realColorMask.call(e,!0,!0,!0,!0),t.realViewport.call(e,0,0,e.drawingBufferWidth,e.drawingBufferHeight),t.realClearColor.call(e,0,0,0,1),e.clear(e.COLOR_BUFFER_BIT),t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.framebuffer),e.bindTexture(e.TEXTURE_2D,t.renderTarget),e.texImage2D(e.TEXTURE_2D,0,t.ctxAttribs.alpha?e.RGBA:e.RGB,t.bufferWidth,t.bufferHeight,0,t.ctxAttribs.alpha?e.RGBA:e.RGB,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t.renderTarget,0),t.ctxAttribs.depth&&t.ctxAttribs.stencil?(e.bindRenderbuffer(e.RENDERBUFFER,t.depthStencilBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t.depthStencilBuffer)):t.ctxAttribs.depth?(e.bindRenderbuffer(e.RENDERBUFFER,t.depthBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t.depthBuffer)):t.ctxAttribs.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,t.stencilBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.STENCIL_INDEX8,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.STENCIL_ATTACHMENT,e.RENDERBUFFER,t.stencilBuffer)),!e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.lastBoundFramebuffer),t.scissorTest&&t.realEnable.call(e,e.SCISSOR_TEST),t.realColorMask.apply(e,t.colorMask),t.realViewport.apply(e,t.viewport),t.realClearColor.apply(e,t.clearColor)}),this.cardboardUI&&this.cardboardUI.onResize()},N.prototype.patch=function(){if(!this.isPatched){var e=this,t=this.gl.canvas,n=this.gl;u()||(t.width=g()*this.bufferScale,t.height=m()*this.bufferScale,Object.defineProperty(t,"width",{configurable:!0,enumerable:!0,get:function(){return e.bufferWidth},set:function(n){e.bufferWidth=n,e.realCanvasWidth.set.call(t,n),e.onResize()}}),Object.defineProperty(t,"height",{configurable:!0,enumerable:!0,get:function(){return e.bufferHeight},set:function(n){e.bufferHeight=n,e.realCanvasHeight.set.call(t,n),e.onResize()}})),this.lastBoundFramebuffer=n.getParameter(n.FRAMEBUFFER_BINDING),null==this.lastBoundFramebuffer&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(t,r){e.lastBoundFramebuffer=r||e.framebuffer,e.realBindFramebuffer.call(n,t,e.lastBoundFramebuffer)},this.cullFace=n.getParameter(n.CULL_FACE),this.depthTest=n.getParameter(n.DEPTH_TEST),this.blend=n.getParameter(n.BLEND),this.scissorTest=n.getParameter(n.SCISSOR_TEST),this.stencilTest=n.getParameter(n.STENCIL_TEST),n.enable=function(t){switch(t){case n.CULL_FACE:e.cullFace=!0;break;case n.DEPTH_TEST:e.depthTest=!0;break;case n.BLEND:e.blend=!0;break;case n.SCISSOR_TEST:e.scissorTest=!0;break;case n.STENCIL_TEST:e.stencilTest=!0}e.realEnable.call(n,t)},n.disable=function(t){switch(t){case n.CULL_FACE:e.cullFace=!1;break;case n.DEPTH_TEST:e.depthTest=!1;break;case n.BLEND:e.blend=!1;break;case n.SCISSOR_TEST:e.scissorTest=!1;break;case n.STENCIL_TEST:e.stencilTest=!1}e.realDisable.call(n,t)},this.colorMask=n.getParameter(n.COLOR_WRITEMASK),n.colorMask=function(t,r,i,a){e.colorMask[0]=t,e.colorMask[1]=r,e.colorMask[2]=i,e.colorMask[3]=a,e.realColorMask.call(n,t,r,i,a)},this.clearColor=n.getParameter(n.COLOR_CLEAR_VALUE),n.clearColor=function(t,r,i,a){e.clearColor[0]=t,e.clearColor[1]=r,e.clearColor[2]=i,e.clearColor[3]=a,e.realClearColor.call(n,t,r,i,a)},this.viewport=n.getParameter(n.VIEWPORT),n.viewport=function(t,r,i,a){e.viewport[0]=t,e.viewport[1]=r,e.viewport[2]=i,e.viewport[3]=a,e.realViewport.call(n,t,r,i,a)},this.isPatched=!0,w(t)}},N.prototype.unpatch=function(){if(this.isPatched){var e=this.gl,t=this.gl.canvas;u()||(Object.defineProperty(t,"width",this.realCanvasWidth),Object.defineProperty(t,"height",this.realCanvasHeight)),t.width=this.bufferWidth,t.height=this.bufferHeight,e.bindFramebuffer=this.realBindFramebuffer,e.enable=this.realEnable,e.disable=this.realDisable,e.colorMask=this.realColorMask,e.clearColor=this.realClearColor,e.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&e.bindFramebuffer(e.FRAMEBUFFER,null),this.isPatched=!1,setTimeout(function(){w(t)},1)}},N.prototype.setTextureBounds=function(e,t){e||(e=[0,0,.5,1]),t||(t=[.5,0,.5,1]),this.viewportOffsetScale[0]=e[0],this.viewportOffsetScale[1]=e[1],this.viewportOffsetScale[2]=e[2],this.viewportOffsetScale[3]=e[3],this.viewportOffsetScale[4]=t[0],this.viewportOffsetScale[5]=t[1],this.viewportOffsetScale[6]=t[2],this.viewportOffsetScale[7]=t[3]},N.prototype.submitFrame=function(){var e=this.gl,t=this,n=[];if(this.dirtySubmitFrameBindings||n.push(e.CURRENT_PROGRAM,e.ARRAY_BUFFER_BINDING,e.ELEMENT_ARRAY_BUFFER_BINDING,e.TEXTURE_BINDING_2D,e.TEXTURE0),D(e,n,function(e){t.realBindFramebuffer.call(e,e.FRAMEBUFFER,null),t.cullFace&&t.realDisable.call(e,e.CULL_FACE),t.depthTest&&t.realDisable.call(e,e.DEPTH_TEST),t.blend&&t.realDisable.call(e,e.BLEND),t.scissorTest&&t.realDisable.call(e,e.SCISSOR_TEST),t.stencilTest&&t.realDisable.call(e,e.STENCIL_TEST),t.realColorMask.call(e,!0,!0,!0,!0),t.realViewport.call(e,0,0,e.drawingBufferWidth,e.drawingBufferHeight),(t.ctxAttribs.alpha||u())&&(t.realClearColor.call(e,0,0,0,1),e.clear(e.COLOR_BUFFER_BIT)),e.useProgram(t.program),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.indexBuffer),e.bindBuffer(e.ARRAY_BUFFER,t.vertexBuffer),e.enableVertexAttribArray(t.attribs.position),e.enableVertexAttribArray(t.attribs.texCoord),e.vertexAttribPointer(t.attribs.position,2,e.FLOAT,!1,20,0),e.vertexAttribPointer(t.attribs.texCoord,3,e.FLOAT,!1,20,8),e.activeTexture(e.TEXTURE0),e.uniform1i(t.uniforms.diffuse,0),e.bindTexture(e.TEXTURE_2D,t.renderTarget),e.uniform4fv(t.uniforms.viewportOffsetScale,t.viewportOffsetScale),e.drawElements(e.TRIANGLES,t.indexCount,e.UNSIGNED_SHORT,0),t.cardboardUI&&t.cardboardUI.renderNoState(),t.realBindFramebuffer.call(t.gl,e.FRAMEBUFFER,t.framebuffer),t.ctxAttribs.preserveDrawingBuffer||(t.realClearColor.call(e,0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)),t.dirtySubmitFrameBindings||t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.lastBoundFramebuffer),t.cullFace&&t.realEnable.call(e,e.CULL_FACE),t.depthTest&&t.realEnable.call(e,e.DEPTH_TEST),t.blend&&t.realEnable.call(e,e.BLEND),t.scissorTest&&t.realEnable.call(e,e.SCISSOR_TEST),t.stencilTest&&t.realEnable.call(e,e.STENCIL_TEST),t.realColorMask.apply(e,t.colorMask),t.realViewport.apply(e,t.viewport),!t.ctxAttribs.alpha&&t.ctxAttribs.preserveDrawingBuffer||t.realClearColor.apply(e,t.clearColor)}),u()){var r=e.canvas;r.width==t.bufferWidth&&r.height==t.bufferHeight||(t.bufferWidth=r.width,t.bufferHeight=r.height,t.onResize())}},N.prototype.updateDeviceInfo=function(e){var t=this.gl,n=this,r=[t.ARRAY_BUFFER_BINDING,t.ELEMENT_ARRAY_BUFFER_BINDING];D(t,r,function(t){var r=n.computeMeshVertices_(n.meshWidth,n.meshHeight,e);if(t.bindBuffer(t.ARRAY_BUFFER,n.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,r,t.STATIC_DRAW),!n.indexCount){var i=n.computeMeshIndices_(n.meshWidth,n.meshHeight);t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,i,t.STATIC_DRAW),n.indexCount=i.length}})},N.prototype.computeMeshVertices_=function(e,t,n){for(var r=new Float32Array(2*e*t*5),i=n.getLeftEyeVisibleTanAngles(),a=n.getLeftEyeNoLensTanAngles(),o=n.getLeftEyeVisibleScreenRect(a),u=0,l=0;l<2;l++){for(var c=0;c<t;c++)for(var f=0;f<e;f++,u++){var d=f/(e-1),p=c/(t-1),h=d,g=p,m=s(i[0],i[2],d),v=s(i[3],i[1],p),y=Math.sqrt(m*m+v*v),b=n.distortion.distortInverse(y),M=m*b/y,x=v*b/y;d=(M-a[0])/(a[2]-a[0]),p=(x-a[3])/(a[1]-a[3]),d=2*(o.x+d*o.width-.5),p=2*(o.y+p*o.height-.5),r[5*u+0]=d,r[5*u+1]=p,r[5*u+2]=h,r[5*u+3]=g,r[5*u+4]=l}var w=i[2]-i[0];i[0]=-(w+i[0]),i[2]=w-i[2],w=a[2]-a[0],a[0]=-(w+a[0]),a[2]=w-a[2],o.x=1-(o.x+o.width)}return r},N.prototype.computeMeshIndices_=function(e,t){for(var n=new Uint16Array(2*(e-1)*(t-1)*6),r=e/2,i=t/2,a=0,o=0,s=0;s<2;s++)for(var u=0;u<t;u++)for(var l=0;l<e;l++,a++)0!=l&&0!=u&&(l<=r==u<=i?(n[o++]=a,n[o++]=a-e-1,n[o++]=a-e,n[o++]=a-e-1,n[o++]=a,n[o++]=a-1):(n[o++]=a-1,n[o++]=a-e,n[o++]=a,n[o++]=a-e,n[o++]=a-1,n[o++]=a-e-1));return n},N.prototype.getOwnPropertyDescriptor_=function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return void 0!==n.get&&void 0!==n.set||(n.configurable=!0,n.enumerable=!0,n.get=function(){return this.getAttribute(t)},n.set=function(e){this.setAttribute(t,e)}),n};var O=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join("\n"),_=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join("\n"),L=Math.PI/180,P=.3125;function k(e){this.gl=e,this.attribs={position:0},this.program=y(e,O,_,this.attribs),this.uniforms=b(e,this.program),this.vertexBuffer=e.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}function R(e){this.coefficients=e}k.prototype.destroy=function(){var e=this.gl;this.listener&&e.canvas.removeEventListener("click",this.listener,!1),e.deleteProgram(this.program),e.deleteBuffer(this.vertexBuffer)},k.prototype.listen=function(e,t){var n=this.gl.canvas;this.listener=function(r){var i=n.clientWidth/2;r.clientX>i-42&&r.clientX<i+42&&r.clientY>n.clientHeight-42?e(r):r.clientX<42&&r.clientY<42&&t(r)},n.addEventListener("click",this.listener,!1)},k.prototype.onResize=function(){var e=this.gl,t=this,n=[e.ARRAY_BUFFER_BINDING];D(e,n,function(e){var n=[],r=e.drawingBufferWidth/2,i=Math.max(screen.width,screen.height)*window.devicePixelRatio,a=e.drawingBufferWidth/i,o=a*window.devicePixelRatio,s=4*o/2,u=42*o,l=28*o/2,c=14*o;function f(e,t){var i=(90-e)*L,a=Math.cos(i),o=Math.sin(i);n.push(P*a*l+r,P*o*l+l),n.push(t*a*l+r,t*o*l+l)}n.push(r-s,u),n.push(r-s,e.drawingBufferHeight),n.push(r+s,u),n.push(r+s,e.drawingBufferHeight),t.gearOffset=n.length/2;for(var d=0;d<=6;d++){var p=60*d;f(p,1),f(p+12,1),f(p+20,.75),f(p+40,.75),f(p+48,1)}function h(t,r){n.push(c+t,e.drawingBufferHeight-c-r)}t.gearVertexCount=n.length/2-t.gearOffset,t.arrowOffset=n.length/2;var g=s/Math.sin(45*L);h(0,l),h(l,0),h(l+g,g),h(g,l+g),h(g,l-g),h(0,l),h(l,2*l),h(l+g,2*l-g),h(g,l-g),h(0,l),h(g,l-s),h(28*o,l-s),h(g,l+s),h(28*o,l+s),t.arrowVertexCount=n.length/2-t.arrowOffset,e.bindBuffer(e.ARRAY_BUFFER,t.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,new Float32Array(n),e.STATIC_DRAW)})},k.prototype.render=function(){var e=this.gl,t=this,n=[e.CULL_FACE,e.DEPTH_TEST,e.BLEND,e.SCISSOR_TEST,e.STENCIL_TEST,e.COLOR_WRITEMASK,e.VIEWPORT,e.CURRENT_PROGRAM,e.ARRAY_BUFFER_BINDING];D(e,n,function(e){e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.BLEND),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.colorMask(!0,!0,!0,!0),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),t.renderNoState()})},k.prototype.renderNoState=function(){var e,t,n,r,i,a,o,s,u,l,c=this.gl;c.useProgram(this.program),c.bindBuffer(c.ARRAY_BUFFER,this.vertexBuffer),c.enableVertexAttribArray(this.attribs.position),c.vertexAttribPointer(this.attribs.position,2,c.FLOAT,!1,8,0),c.uniform4f(this.uniforms.color,1,1,1,1),e=this.projMat,t=0,n=c.drawingBufferWidth,r=0,i=c.drawingBufferHeight,s=1/(t-n),u=1/(r-i),l=1/((a=.1)-(o=1024)),e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*u,e[14]=(o+a)*l,e[15]=1,c.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),c.drawArrays(c.TRIANGLE_STRIP,0,4),c.drawArrays(c.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),c.drawArrays(c.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)},R.prototype.distortInverse=function(e){for(var t=0,n=1,r=e-this.distort(t);Math.abs(n-t)>1e-4;){var i=e-this.distort(n),a=n-i*((n-t)/(i-r));t=n,n=a,r=i}return n},R.prototype.distort=function(e){for(var t=e*e,n=0,r=0;r<this.coefficients.length;r++)n=t*(n+this.coefficients[r]);return(n+1)*e};var j=Math.PI/180,B=180/Math.PI,z=function(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0};z.prototype={constructor:z,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var e=this.length();if(0!==e){var t=1/e;this.multiplyScalar(t)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(e){this.x*=e,this.y*=e,this.z*=e},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,a=e.y,o=e.z,s=e.w,u=s*t+a*r-o*n,l=s*n+o*t-i*r,c=s*r+i*n-a*t,f=-i*t-a*n-o*r;return this.x=u*s+f*-i+l*-o-c*-a,this.y=l*s+f*-a+c*-i-u*-o,this.z=c*s+f*-o+u*-a-l*-i,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},crossVectors:function(e,t){var n=e.x,r=e.y,i=e.z,a=t.x,o=t.y,s=t.z;return this.x=r*s-i*o,this.y=i*a-n*s,this.z=n*o-r*a,this}};var F,V,U=function(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==r?r:1};function G(e){this.width=e.width||g(),this.height=e.height||m(),this.widthMeters=e.widthMeters,this.heightMeters=e.heightMeters,this.bevelMeters=e.bevelMeters}U.prototype={constructor:U,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this},setFromEulerXYZ:function(e,t,n){var r=Math.cos(e/2),i=Math.cos(t/2),a=Math.cos(n/2),o=Math.sin(e/2),s=Math.sin(t/2),u=Math.sin(n/2);return this.x=o*i*a+r*s*u,this.y=r*s*a-o*i*u,this.z=r*i*u+o*s*a,this.w=r*i*a-o*s*u,this},setFromEulerYXZ:function(e,t,n){var r=Math.cos(e/2),i=Math.cos(t/2),a=Math.cos(n/2),o=Math.sin(e/2),s=Math.sin(t/2),u=Math.sin(n/2);return this.x=o*i*a+r*s*u,this.y=r*s*a-o*i*u,this.z=r*i*u-o*s*a,this.w=r*i*a+o*s*u,this},setFromAxisAngle:function(e,t){var n=t/2,r=Math.sin(n);return this.x=e.x*r,this.y=e.y*r,this.z=e.z*r,this.w=Math.cos(n),this},multiply:function(e){return this.multiplyQuaternions(this,e)},multiplyQuaternions:function(e,t){var n=e.x,r=e.y,i=e.z,a=e.w,o=t.x,s=t.y,u=t.z,l=t.w;return this.x=n*l+a*o+r*u-i*s,this.y=r*l+a*s+i*o-n*u,this.z=i*l+a*u+n*s-r*o,this.w=a*l-n*o-r*s-i*u,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=1):(e=1/e,this.x=this.x*e,this.y=this.y*e,this.z=this.z*e,this.w=this.w*e),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this.x,r=this.y,i=this.z,a=this.w,o=a*e.w+n*e.x+r*e.y+i*e.z;if(o<0?(this.w=-e.w,this.x=-e.x,this.y=-e.y,this.z=-e.z,o=-o):this.copy(e),o>=1)return this.w=a,this.x=n,this.y=r,this.z=i,this;var s=Math.acos(o),u=Math.sqrt(1-o*o);if(Math.abs(u)<.001)return this.w=.5*(a+this.w),this.x=.5*(n+this.x),this.y=.5*(r+this.y),this.z=.5*(i+this.z),this;var l=Math.sin((1-t)*s)/u,c=Math.sin(t*s)/u;return this.w=a*l+this.w*c,this.x=n*l+this.x*c,this.y=r*l+this.y*c,this.z=i*l+this.z*c,this},setFromUnitVectors:function(e,t){return void 0===F&&(F=new z),(V=e.dot(t)+1)<1e-6?(V=0,Math.abs(e.x)>Math.abs(e.z)?F.set(-e.y,e.x,0):F.set(0,-e.z,e.y)):F.crossVectors(e,t),this.x=F.x,this.y=F.y,this.z=F.z,this.w=V,this.normalize(),this}};var W=new G({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),H=new G({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),Y={CardboardV1:new q({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new q({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};function Q(e,t){this.viewer=Y.CardboardV2,this.updateDeviceParams(e),this.distortion=new R(this.viewer.distortionCoefficients);for(var n=0;n<t.length;n++){var r=t[n];Y[r.id]=new q(r)}}function q(e){this.id=e.id,this.label=e.label,this.fov=e.fov,this.interLensDistance=e.interLensDistance,this.baselineLensDistance=e.baselineLensDistance,this.screenLensDistance=e.screenLensDistance,this.distortionCoefficients=e.distortionCoefficients,this.inverseCoefficients=e.inverseCoefficients}Q.prototype.updateDeviceParams=function(e){this.device=this.determineDevice_(e)||this.device},Q.prototype.getDevice=function(){return this.device},Q.prototype.setViewer=function(e){this.viewer=e,this.distortion=new R(this.viewer.distortionCoefficients)},Q.prototype.determineDevice_=function(e){if(!e)return u()?(console.warn("Using fallback iOS device measurements."),H):(console.warn("Using fallback Android device measurements."),W);var t=.0254/e.xdpi,n=.0254/e.ydpi,r=g(),i=m();return new G({widthMeters:t*r,heightMeters:n*i,bevelMeters:.001*e.bevelMm})},Q.prototype.getDistortedFieldOfViewLeftEye=function(){var e=this.viewer,t=this.device,n=this.distortion,r=e.screenLensDistance,i=(t.widthMeters-e.interLensDistance)/2,a=e.interLensDistance/2,o=e.baselineLensDistance-t.bevelMeters,s=t.heightMeters-o,u=B*Math.atan(n.distort(i/r)),l=B*Math.atan(n.distort(a/r)),c=B*Math.atan(n.distort(o/r)),f=B*Math.atan(n.distort(s/r));return{leftDegrees:Math.min(u,e.fov),rightDegrees:Math.min(l,e.fov),downDegrees:Math.min(c,e.fov),upDegrees:Math.min(f,e.fov)}},Q.prototype.getLeftEyeVisibleTanAngles=function(){var e=this.viewer,t=this.device,n=this.distortion,r=Math.tan(-j*e.fov),i=Math.tan(j*e.fov),a=Math.tan(j*e.fov),o=Math.tan(-j*e.fov),s=t.widthMeters/4,u=t.heightMeters/2,l=e.baselineLensDistance-t.bevelMeters-u,c=e.interLensDistance/2-s,f=-l,d=e.screenLensDistance,p=n.distort((c-s)/d),h=n.distort((f+u)/d),g=n.distort((c+s)/d),m=n.distort((f-u)/d),v=new Float32Array(4);return v[0]=Math.max(r,p),v[1]=Math.min(i,h),v[2]=Math.min(a,g),v[3]=Math.max(o,m),v},Q.prototype.getLeftEyeNoLensTanAngles=function(){var e=this.viewer,t=this.device,n=this.distortion,r=new Float32Array(4),i=n.distortInverse(Math.tan(-j*e.fov)),a=n.distortInverse(Math.tan(j*e.fov)),o=n.distortInverse(Math.tan(j*e.fov)),s=n.distortInverse(Math.tan(-j*e.fov)),u=t.widthMeters/4,l=t.heightMeters/2,c=e.baselineLensDistance-t.bevelMeters-l,f=e.interLensDistance/2-u,d=-c,p=e.screenLensDistance,h=(f-u)/p,g=(d+l)/p,m=(f+u)/p,v=(d-l)/p;return r[0]=Math.max(i,h),r[1]=Math.min(a,g),r[2]=Math.min(o,m),r[3]=Math.max(s,v),r},Q.prototype.getLeftEyeVisibleScreenRect=function(e){var t=this.viewer,n=this.device,r=t.screenLensDistance,i=(n.widthMeters-t.interLensDistance)/2,a=t.baselineLensDistance-n.bevelMeters,o=(e[0]*r+i)/n.widthMeters,s=(e[1]*r+a)/n.heightMeters,u=(e[2]*r+i)/n.widthMeters,l=(e[3]*r+a)/n.heightMeters;return{x:o,y:l,width:u-o,height:s-l}},Q.prototype.getFieldOfViewLeftEye=function(e){return e?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},Q.prototype.getFieldOfViewRightEye=function(e){var t=this.getFieldOfViewLeftEye(e);return{leftDegrees:t.rightDegrees,rightDegrees:t.leftDegrees,upDegrees:t.upDegrees,downDegrees:t.downDegrees}},Q.prototype.getUndistortedFieldOfViewLeftEye=function(){var e=this.getUndistortedParams_();return{leftDegrees:B*Math.atan(e.outerDist),rightDegrees:B*Math.atan(e.innerDist),downDegrees:B*Math.atan(e.bottomDist),upDegrees:B*Math.atan(e.topDist)}},Q.prototype.getUndistortedViewportLeftEye=function(){var e=this.getUndistortedParams_(),t=this.viewer,n=this.device,r=t.screenLensDistance,i=n.widthMeters/r,a=n.heightMeters/r,o=n.width/i,s=n.height/a,u=Math.round((e.eyePosX-e.outerDist)*o),l=Math.round((e.eyePosY-e.bottomDist)*s);return{x:u,y:l,width:Math.round((e.eyePosX+e.innerDist)*o)-u,height:Math.round((e.eyePosY+e.topDist)*s)-l}},Q.prototype.getUndistortedParams_=function(){var e=this.viewer,t=this.device,n=this.distortion,r=e.screenLensDistance,i=e.interLensDistance/2/r,a=t.widthMeters/r,o=t.heightMeters/r,s=a/2-i,u=(e.baselineLensDistance-t.bevelMeters)/r,l=e.fov,c=n.distortInverse(Math.tan(j*l)),f=Math.min(s,c),d=Math.min(i,c),p=Math.min(u,c),h=Math.min(o-u,c);return{outerDist:f,innerDist:d,topDist:h,bottomDist:p,eyePosX:s,eyePosY:u}},Q.Viewers=Y;var X={format:1,last_updated:"2018-10-17T15:31:16Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel XL/*"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel/*"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/BLN-L24/*"},{ua:"HONORBLN-L24"}],dpi:480,bw:4,ac:500},{type:"android",rules:[{mdmh:"Huawei/*/BKL-L09/*"},{ua:"BKL-L09"}],dpi:403,bw:3.47,ac:500},{type:"android",rules:[{mdmh:"LENOVO/*/Lenovo PB2-690Y/*"},{ua:"Lenovo PB2-690Y"}],dpi:[457.2,454.713],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/G5/*"},{ua:"Moto G (5) Plus"}],dpi:[403.4,403],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A5000/*"},{ua:"ONEPLUS A5000 "}],dpi:[403.411,399.737],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A5010/*"},{ua:"ONEPLUS A5010"}],dpi:[403,400],bw:2,ac:1e3},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SGH-M919/*"},{ua:"SGH-M919"}],dpi:[440.8,437.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920P/*"},{ua:"SM-N920P"}],dpi:[386.3655,390.144],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G930F/*"},{ua:"SM-G930F"}],dpi:576.6,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:533,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G950F/*"},{ua:"SM-G950F"}],dpi:[562.707,565.293],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955U/*"},{ua:"SM-G955U"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955F/*"},{ua:"SM-G955F"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Fly/*/IQ4412/*"},{ua:"IQ4412"}],dpi:307.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"BENEVE/*/VR518/*"},{ua:"VR518"}],dpi:480,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2436]}],dpi:458,bw:4,ac:1e3}]};function K(e,t){if(this.dpdb=X,this.recalculateDeviceParams_(),e){this.onDeviceParamsUpdated=t;var n=new XMLHttpRequest,r=this;n.open("GET",e,!0),n.addEventListener("load",function(){r.loading=!1,n.status>=200&&n.status<=299?(r.dpdb=JSON.parse(n.response),r.recalculateDeviceParams_()):console.error("Error loading online DPDB!")}),n.send()}}function Z(e){this.xdpi=e.xdpi,this.ydpi=e.ydpi,this.bevelMm=e.bevelMm}function J(e,t){this.set(e,t)}function $(e,t){this.kFilter=e,this.isDebug=t,this.currentAccelMeasurement=new J,this.currentGyroMeasurement=new J,this.previousGyroMeasurement=new J,u()?this.filterQ=new U(-1,0,0,1):this.filterQ=new U(1,0,0,1),this.previousFilterQ=new U,this.previousFilterQ.copy(this.filterQ),this.accelQ=new U,this.isOrientationInitialized=!1,this.estimatedGravity=new z,this.measuredGravity=new z,this.gyroIntegralQ=new U}function ee(e,t){this.predictionTimeS=e,this.isDebug=t,this.previousQ=new U,this.previousTimestampS=null,this.deltaQ=new U,this.outQ=new U}function te(e,t,n,r){this.yawOnly=n,this.accelerometer=new z,this.gyroscope=new z,this.filter=new $(e,r),this.posePredictor=new ee(t,r),this.isFirefoxAndroid=c(),this.isIOS=u();var i=f();this.isDeviceMotionInRadians=!this.isIOS&&i&&i<66,this.isWithoutDeviceMotion=d(),this.filterToWorldQ=new U,u()?this.filterToWorldQ.setFromAxisAngle(new z(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new z(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new U,this.worldToScreenQ=new U,this.originalPoseAdjustQ=new U,this.originalPoseAdjustQ.setFromAxisAngle(new z(0,0,1),-window.orientation*Math.PI/180),this.setScreenTransform_(),h()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new U,this.orientationOut_=new Float32Array(4),this.start()}K.prototype.getDeviceParams=function(){return this.deviceParams},K.prototype.recalculateDeviceParams_=function(){var e=this.calcDeviceParams_();e?(this.deviceParams=e,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},K.prototype.calcDeviceParams_=function(){var e=this.dpdb;if(!e)return console.error("DPDB not available."),null;if(1!=e.format)return console.error("DPDB has unexpected format version."),null;if(!e.devices||!e.devices.length)return console.error("DPDB does not have a devices section."),null;var t=navigator.userAgent||navigator.vendor||window.opera,n=g(),r=m();if(!e.devices)return console.error("DPDB has no devices section."),null;for(var i=0;i<e.devices.length;i++){var a=e.devices[i];if(a.rules)if("ios"==a.type||"android"==a.type){if(u()==("ios"==a.type)){for(var o=!1,s=0;s<a.rules.length;s++){var l=a.rules[s];if(this.matchRule_(l,t,n,r)){o=!0;break}}if(o){var c=a.dpi[0]||a.dpi,f=a.dpi[1]||a.dpi;return new Z({xdpi:c,ydpi:f,bevelMm:a.bw})}}}else console.warn("Device["+i+"] has invalid type.");else console.warn("Device["+i+"] has no rules section.")}return console.warn("No DPDB device match."),null},K.prototype.matchRule_=function(e,t,n,r){if(!e.ua&&!e.res)return!1;if(e.ua&&"SM"===e.ua.substring(0,2)&&(e.ua=e.ua.substring(0,7)),e.ua&&t.indexOf(e.ua)<0)return!1;if(e.res){if(!e.res[0]||!e.res[1])return!1;var i=e.res[0],a=e.res[1];if(Math.min(n,r)!=Math.min(i,a)||Math.max(n,r)!=Math.max(i,a))return!1}return!0},J.prototype.set=function(e,t){this.sample=e,this.timestampS=t},J.prototype.copy=function(e){this.set(e.sample,e.timestampS)},$.prototype.addAccelMeasurement=function(e,t){this.currentAccelMeasurement.set(e,t)},$.prototype.addGyroMeasurement=function(e,t){this.currentGyroMeasurement.set(e,t);var n,r=t-this.previousGyroMeasurement.timestampS;n=r,!(isNaN(n)||n<=.001||n>1)&&this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},$.prototype.run_=function(){if(!this.isOrientationInitialized)return this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var e=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,t=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,e);this.gyroIntegralQ.multiply(t),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(t);var n=new U;n.copy(this.filterQ),n.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(n),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var r,i=new U;i.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),i.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",B*((r=i).w>1?(console.warn("getQuaternionAngle: w > 1"),0):2*Math.acos(r.w)),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var a=new U;a.copy(this.filterQ),a.multiply(i),this.filterQ.slerp(a,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},$.prototype.getOrientation=function(){return this.filterQ},$.prototype.accelToQuaternion_=function(e){var t=new z;t.copy(e),t.normalize();var n=new U;return n.setFromUnitVectors(new z(0,0,-1),t),n.inverse(),n},$.prototype.gyroToQuaternionDelta_=function(e,t){var n=new U,r=new z;return r.copy(e),r.normalize(),n.setFromAxisAngle(r,e.length()*t),n},ee.prototype.getPrediction=function(e,t,n){if(!this.previousTimestampS)return this.previousQ.copy(e),this.previousTimestampS=n,e;var r=new z;r.copy(t),r.normalize();var i=t.length();if(i<20*j)return this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",(B*i).toFixed(1)),this.outQ.copy(e),this.previousQ.copy(e),this.outQ;var a=i*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(r,a),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(e),this.previousTimestampS=n,this.outQ},te.prototype.getPosition=function(){return null},te.prototype.getOrientation=function(){var e=void 0;if(this.isWithoutDeviceMotion&&this._deviceOrientationQ){this.deviceOrientationFixQ=this.deviceOrientationFixQ||(r=(new U).setFromAxisAngle(new z(0,0,-1),0),i=new U,-90===window.orientation?i.setFromAxisAngle(new z(0,1,0),Math.PI/-2):i.setFromAxisAngle(new z(0,1,0),Math.PI/2),r.multiply(i)),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||((n=new U).setFromAxisAngle(new z(1,0,0),-Math.PI/2),n),e=this._deviceOrientationQ;var t=new U;return t.copy(e),t.multiply(this.deviceOrientationFilterToWorldQ),t.multiply(this.resetQ),t.multiply(this.worldToScreenQ),t.multiplyQuaternions(this.deviceOrientationFixQ,t),this.yawOnly&&(t.x=0,t.z=0,t.normalize()),this.orientationOut_[0]=t.x,this.orientationOut_[1]=t.y,this.orientationOut_[2]=t.z,this.orientationOut_[3]=t.w,this.orientationOut_}var n,r,i,a=this.filter.getOrientation();e=this.posePredictor.getPrediction(a,this.gyroscope,this.previousTimestampS);var t=new U;return t.copy(this.filterToWorldQ),t.multiply(this.resetQ),t.multiply(e),t.multiply(this.worldToScreenQ),this.yawOnly&&(t.x=0,t.z=0,t.normalize()),this.orientationOut_[0]=t.x,this.orientationOut_[1]=t.y,this.orientationOut_[2]=t.z,this.orientationOut_[3]=t.w,this.orientationOut_},te.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),h()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},te.prototype.onDeviceOrientation_=function(e){this._deviceOrientationQ=this._deviceOrientationQ||new U;var t=e.alpha,n=e.beta,r=e.gamma;t=(t||0)*Math.PI/180,n=(n||0)*Math.PI/180,r=(r||0)*Math.PI/180,this._deviceOrientationQ.setFromEulerYXZ(n,t,-r)},te.prototype.onDeviceMotion_=function(e){this.updateDeviceMotion_(e)},te.prototype.updateDeviceMotion_=function(e){var t=e.accelerationIncludingGravity,n=e.rotationRate,r=e.timeStamp/1e3,i=r-this.previousTimestampS;return i<0?(C("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),void(this.previousTimestampS=r)):i<=.001||i>1?(C("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),void(this.previousTimestampS=r)):(this.accelerometer.set(-t.x,-t.y,-t.z),p()?this.gyroscope.set(-n.beta,n.alpha,n.gamma):this.gyroscope.set(n.alpha,n.beta,n.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addAccelMeasurement(this.accelerometer,r),this.filter.addGyroMeasurement(this.gyroscope,r),void(this.previousTimestampS=r))},te.prototype.onOrientationChange_=function(e){this.setScreenTransform_()},te.prototype.onMessage_=function(e){var t=e.data;if(t&&t.type){var n=t.type.toLowerCase();"devicemotion"===n&&this.updateDeviceMotion_(t.deviceMotionEvent)}},te.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),window.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new z(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new z(0,0,1),Math.PI/2)}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},te.prototype.start=function(){var e,t,n;this.onDeviceMotionCallback_=this.onDeviceMotion_.bind(this),this.onOrientationChangeCallback_=this.onOrientationChange_.bind(this),this.onMessageCallback_=this.onMessage_.bind(this),this.onDeviceOrientationCallback_=this.onDeviceOrientation_.bind(this),u()&&(e=window.self!==window.top,t=T(document.referrer),n=T(window.location.href),e&&t!==n)&&window.addEventListener("message",this.onMessageCallback_),window.addEventListener("orientationchange",this.onOrientationChangeCallback_),this.isWithoutDeviceMotion?window.addEventListener("deviceorientation",this.onDeviceOrientationCallback_):window.addEventListener("devicemotion",this.onDeviceMotionCallback_)},te.prototype.stop=function(){window.removeEventListener("devicemotion",this.onDeviceMotionCallback_),window.removeEventListener("deviceorientation",this.onDeviceOrientationCallback_),window.removeEventListener("orientationchange",this.onOrientationChangeCallback_),window.removeEventListener("message",this.onMessageCallback_)};var ne=new z(1,0,0),re=new z(0,0,1),ie=new U;ie.setFromAxisAngle(ne,-Math.PI/2),ie.multiply((new U).setFromAxisAngle(re,Math.PI/2));var ae=function(){function e(t){i(this,e),this.config=t,this.sensor=null,this.fusionSensor=null,this._out=new Float32Array(4),this.api=null,this.errors=[],this._sensorQ=new U,this._outQ=new U,this._onSensorRead=this._onSensorRead.bind(this),this._onSensorError=this._onSensorError.bind(this),this.init()}return a(e,[{key:"init",value:function(){var e=null;try{(e=new RelativeOrientationSensor({frequency:60,referenceFrame:"screen"})).addEventListener("error",this._onSensorError)}catch(e){this.errors.push(e),"SecurityError"===e.name?(console.error("Cannot construct sensors due to the Feature Policy"),console.warn('Attempting to fall back using "devicemotion"; however this will fail in the future without correct permissions.'),this.useDeviceMotion()):"ReferenceError"===e.name?this.useDeviceMotion():console.error(e)}e&&(this.api="sensor",this.sensor=e,this.sensor.addEventListener("reading",this._onSensorRead),this.sensor.start())}},{key:"useDeviceMotion",value:function(){this.api="devicemotion",this.fusionSensor=new te(this.config.K_FILTER,this.config.PREDICTION_TIME_S,this.config.YAW_ONLY,this.config.DEBUG),this.sensor&&(this.sensor.removeEventListener("reading",this._onSensorRead),this.sensor.removeEventListener("error",this._onSensorError),this.sensor=null)}},{key:"getOrientation",value:function(){if(this.fusionSensor)return this.fusionSensor.getOrientation();if(!this.sensor||!this.sensor.quaternion)return this._out[0]=this._out[1]=this._out[2]=0,this._out[3]=1,this._out;var e=this.sensor.quaternion;this._sensorQ.set(e[0],e[1],e[2],e[3]);var t=this._outQ;return t.copy(ie),t.multiply(this._sensorQ),this.config.YAW_ONLY&&(t.x=t.z=0,t.normalize()),this._out[0]=t.x,this._out[1]=t.y,this._out[2]=t.z,this._out[3]=t.w,this._out}},{key:"_onSensorError",value:function(e){this.errors.push(e.error),"NotAllowedError"===e.error.name?console.error("Permission to access sensor was denied"):"NotReadableError"===e.error.name?console.error("Sensor could not be read"):console.error(e.error),this.useDeviceMotion()}},{key:"_onSensorRead",value:function(){}}]),e}();function oe(){this.loadIcon_();var e=document.createElement("div"),t=e.style;t.position="fixed",t.top=0,t.right=0,t.bottom=0,t.left=0,t.backgroundColor="gray",t.fontFamily="sans-serif",t.zIndex=1e6;var n=document.createElement("img");n.src=this.icon;var t=n.style;t.marginLeft="25%",t.marginTop="25%",t.width="50%",e.appendChild(n);var r=document.createElement("div"),t=r.style;t.textAlign="center",t.fontSize="16px",t.lineHeight="24px",t.margin="24px 25%",t.width="50%",r.innerHTML="Place your phone into your Cardboard viewer.",e.appendChild(r);var i=document.createElement("div"),t=i.style;t.backgroundColor="#CFD8DC",t.position="fixed",t.bottom=0,t.width="100%",t.height="48px",t.padding="14px 24px",t.boxSizing="border-box",t.color="#656A6B",e.appendChild(i);var a=document.createElement("div");a.style.float="left",a.innerHTML="No Cardboard viewer?";var o=document.createElement("a");o.href="https://www.google.com/get/cardboard/get-cardboard/",o.innerHTML="get one",o.target="_blank";var t=o.style;t.float="right",t.fontWeight=600,t.textTransform="uppercase",t.borderLeft="1px solid gray",t.paddingLeft="24px",t.textDecoration="none",t.color="#656A6B",i.appendChild(a),i.appendChild(o),this.overlay=e,this.text=r,this.hide()}oe.prototype.show=function(e){e||this.overlay.parentElement?e&&(this.overlay.parentElement&&this.overlay.parentElement!=e&&this.overlay.parentElement.removeChild(this.overlay),e.appendChild(this.overlay)):document.body.appendChild(this.overlay),this.overlay.style.display="block";var t=this.overlay.querySelector("img"),n=t.style;h()?(n.width="20%",n.marginLeft="40%",n.marginTop="3%"):(n.width="50%",n.marginLeft="25%",n.marginTop="25%")},oe.prototype.hide=function(){this.overlay.style.display="none"},oe.prototype.showTemporarily=function(e,t){this.show(t),this.timer=setTimeout(this.hide.bind(this),e)},oe.prototype.disableShowTemporarily=function(){clearTimeout(this.timer)},oe.prototype.update=function(){this.disableShowTemporarily(),!h()&&M()?this.show():this.hide()},oe.prototype.loadIcon_=function(){this.icon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE5OHB4IiBoZWlnaHQ9IjI0MHB4IiB2aWV3Qm94PSIwIDAgMTk4IDI0MCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDMuMy4zICgxMjA4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+dHJhbnNpdGlvbjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHNrZXRjaDp0eXBlPSJNU1BhZ2UiPgogICAgICAgIDxnIGlkPSJ0cmFuc2l0aW9uIiBza2V0Y2g6dHlwZT0iTVNBcnRib2FyZEdyb3VwIj4KICAgICAgICAgICAgPGcgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTQtKy1JbXBvcnRlZC1MYXllcnMtQ29weS0rLUltcG9ydGVkLUxheWVycy1Db3B5LTItQ29weSIgc2tldGNoOnR5cGU9Ik1TTGF5ZXJHcm91cCI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHktNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDEwNy4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjYyNSwyLjUyNyBDMTQ5LjYyNSwyLjUyNyAxNTUuODA1LDYuMDk2IDE1Ni4zNjIsNi40MTggTDE1Ni4zNjIsNy4zMDQgQzE1Ni4zNjIsNy40ODEgMTU2LjM3NSw3LjY2NCAxNTYuNCw3Ljg1MyBDMTU2LjQxLDcuOTM0IDE1Ni40Miw4LjAxNSAxNTYuNDI3LDguMDk1IEMxNTYuNTY3LDkuNTEgMTU3LjQwMSwxMS4wOTMgMTU4LjUzMiwxMi4wOTQgTDE2NC4yNTIsMTcuMTU2IEwxNjQuMzMzLDE3LjA2NiBDMTY0LjMzMywxNy4wNjYgMTY4LjcxNSwxNC41MzYgMTY5LjU2OCwxNC4wNDIgQzE3MS4wMjUsMTQuODgzIDE5NS41MzgsMjkuMDM1IDE5NS41MzgsMjkuMDM1IEwxOTUuNTM4LDgzLjAzNiBDMTk1LjUzOCw4My44MDcgMTk1LjE1Miw4NC4yNTMgMTk0LjU5LDg0LjI1MyBDMTk0LjM1Nyw4NC4yNTMgMTk0LjA5NSw4NC4xNzcgMTkzLjgxOCw4NC4wMTcgTDE2OS44NTEsNzAuMTc5IEwxNjkuODM3LDcwLjIwMyBMMTQyLjUxNSw4NS45NzggTDE0MS42NjUsODQuNjU1IEMxMzYuOTM0LDgzLjEyNiAxMzEuOTE3LDgxLjkxNSAxMjYuNzE0LDgxLjA0NSBDMTI2LjcwOSw4MS4wNiAxMjYuNzA3LDgxLjA2OSAxMjYuNzA3LDgxLjA2OSBMMTIxLjY0LDk4LjAzIEwxMTMuNzQ5LDEwMi41ODYgTDExMy43MTIsMTAyLjUyMyBMMTEzLjcxMiwxMzAuMTEzIEMxMTMuNzEyLDEzMC44ODUgMTEzLjMyNiwxMzEuMzMgMTEyLjc2NCwxMzEuMzMgQzExMi41MzIsMTMxLjMzIDExMi4yNjksMTMxLjI1NCAxMTEuOTkyLDEzMS4wOTQgTDY5LjUxOSwxMDYuNTcyIEM2OC41NjksMTA2LjAyMyA2Ny43OTksMTA0LjY5NSA2Ny43OTksMTAzLjYwNSBMNjcuNzk5LDEwMi41NyBMNjcuNzc4LDEwMi42MTcgQzY3LjI3LDEwMi4zOTMgNjYuNjQ4LDEwMi4yNDkgNjUuOTYyLDEwMi4yMTggQzY1Ljg3NSwxMDIuMjE0IDY1Ljc4OCwxMDIuMjEyIDY1LjcwMSwxMDIuMjEyIEM2NS42MDYsMTAyLjIxMiA2NS41MTEsMTAyLjIxNSA2NS40MTYsMTAyLjIxOSBDNjUuMTk1LDEwMi4yMjkgNjQuOTc0LDEwMi4yMzUgNjQuNzU0LDEwMi4yMzUgQzY0LjMzMSwxMDIuMjM1IDYzLjkxMSwxMDIuMjE2IDYzLjQ5OCwxMDIuMTc4IEM2MS44NDMsMTAyLjAyNSA2MC4yOTgsMTAxLjU3OCA1OS4wOTQsMTAwLjg4MiBMMTIuNTE4LDczLjk5MiBMMTIuNTIzLDc0LjAwNCBMMi4yNDUsNTUuMjU0IEMxLjI0NCw1My40MjcgMi4wMDQsNTEuMDM4IDMuOTQzLDQ5LjkxOCBMNTkuOTU0LDE3LjU3MyBDNjAuNjI2LDE3LjE4NSA2MS4zNSwxNy4wMDEgNjIuMDUzLDE3LjAwMSBDNjMuMzc5LDE3LjAwMSA2NC42MjUsMTcuNjYgNjUuMjgsMTguODU0IEw2NS4yODUsMTguODUxIEw2NS41MTIsMTkuMjY0IEw2NS41MDYsMTkuMjY4IEM2NS45MDksMjAuMDAzIDY2LjQwNSwyMC42OCA2Ni45ODMsMjEuMjg2IEw2Ny4yNiwyMS41NTYgQzY5LjE3NCwyMy40MDYgNzEuNzI4LDI0LjM1NyA3NC4zNzMsMjQuMzU3IEM3Ni4zMjIsMjQuMzU3IDc4LjMyMSwyMy44NCA4MC4xNDgsMjIuNzg1IEM4MC4xNjEsMjIuNzg1IDg3LjQ2NywxOC41NjYgODcuNDY3LDE4LjU2NiBDODguMTM5LDE4LjE3OCA4OC44NjMsMTcuOTk0IDg5LjU2NiwxNy45OTQgQzkwLjg5MiwxNy45OTQgOTIuMTM4LDE4LjY1MiA5Mi43OTIsMTkuODQ3IEw5Ni4wNDIsMjUuNzc1IEw5Ni4wNjQsMjUuNzU3IEwxMDIuODQ5LDI5LjY3NCBMMTAyLjc0NCwyOS40OTIgTDE0OS42MjUsMi41MjcgTTE0OS42MjUsMC44OTIgQzE0OS4zNDMsMC44OTIgMTQ5LjA2MiwwLjk2NSAxNDguODEsMS4xMSBMMTAyLjY0MSwyNy42NjYgTDk3LjIzMSwyNC41NDIgTDk0LjIyNiwxOS4wNjEgQzkzLjMxMywxNy4zOTQgOTEuNTI3LDE2LjM1OSA4OS41NjYsMTYuMzU4IEM4OC41NTUsMTYuMzU4IDg3LjU0NiwxNi42MzIgODYuNjQ5LDE3LjE1IEM4My44NzgsMTguNzUgNzkuNjg3LDIxLjE2OSA3OS4zNzQsMjEuMzQ1IEM3OS4zNTksMjEuMzUzIDc5LjM0NSwyMS4zNjEgNzkuMzMsMjEuMzY5IEM3Ny43OTgsMjIuMjU0IDc2LjA4NCwyMi43MjIgNzQuMzczLDIyLjcyMiBDNzIuMDgxLDIyLjcyMiA2OS45NTksMjEuODkgNjguMzk3LDIwLjM4IEw2OC4xNDUsMjAuMTM1IEM2Ny43MDYsMTkuNjcyIDY3LjMyMywxOS4xNTYgNjcuMDA2LDE4LjYwMSBDNjYuOTg4LDE4LjU1OSA2Ni45NjgsMTguNTE5IDY2Ljk0NiwxOC40NzkgTDY2LjcxOSwxOC4wNjUgQzY2LjY5LDE4LjAxMiA2Ni42NTgsMTcuOTYgNjYuNjI0LDE3LjkxMSBDNjUuNjg2LDE2LjMzNyA2My45NTEsMTUuMzY2IDYyLjA1MywxNS4zNjYgQzYxLjA0MiwxNS4zNjYgNjAuMDMzLDE1LjY0IDU5LjEzNiwxNi4xNTggTDMuMTI1LDQ4LjUwMiBDMC40MjYsNTAuMDYxIC0wLjYxMyw1My40NDIgMC44MTEsNTYuMDQgTDExLjA4OSw3NC43OSBDMTEuMjY2LDc1LjExMyAxMS41MzcsNzUuMzUzIDExLjg1LDc1LjQ5NCBMNTguMjc2LDEwMi4yOTggQzU5LjY3OSwxMDMuMTA4IDYxLjQzMywxMDMuNjMgNjMuMzQ4LDEwMy44MDYgQzYzLjgxMiwxMDMuODQ4IDY0LjI4NSwxMDMuODcgNjQuNzU0LDEwMy44NyBDNjUsMTAzLjg3IDY1LjI0OSwxMDMuODY0IDY1LjQ5NCwxMDMuODUyIEM2NS41NjMsMTAzLjg0OSA2NS42MzIsMTAzLjg0NyA2NS43MDEsMTAzLjg0NyBDNjUuNzY0LDEwMy44NDcgNjUuODI4LDEwMy44NDkgNjUuODksMTAzLjg1MiBDNjUuOTg2LDEwMy44NTYgNjYuMDgsMTAzLjg2MyA2Ni4xNzMsMTAzLjg3NCBDNjYuMjgyLDEwNS40NjcgNjcuMzMyLDEwNy4xOTcgNjguNzAyLDEwNy45ODggTDExMS4xNzQsMTMyLjUxIEMxMTEuNjk4LDEzMi44MTIgMTEyLjIzMiwxMzIuOTY1IDExMi43NjQsMTMyLjk2NSBDMTE0LjI2MSwxMzIuOTY1IDExNS4zNDcsMTMxLjc2NSAxMTUuMzQ3LDEzMC4xMTMgTDExNS4zNDcsMTAzLjU1MSBMMTIyLjQ1OCw5OS40NDYgQzEyMi44MTksOTkuMjM3IDEyMy4wODcsOTguODk4IDEyMy4yMDcsOTguNDk4IEwxMjcuODY1LDgyLjkwNSBDMTMyLjI3OSw4My43MDIgMTM2LjU1Nyw4NC43NTMgMTQwLjYwNyw4Ni4wMzMgTDE0MS4xNCw4Ni44NjIgQzE0MS40NTEsODcuMzQ2IDE0MS45NzcsODcuNjEzIDE0Mi41MTYsODcuNjEzIEMxNDIuNzk0LDg3LjYxMyAxNDMuMDc2LDg3LjU0MiAxNDMuMzMzLDg3LjM5MyBMMTY5Ljg2NSw3Mi4wNzYgTDE5Myw4NS40MzMgQzE5My41MjMsODUuNzM1IDE5NC4wNTgsODUuODg4IDE5NC41OSw4NS44ODggQzE5Ni4wODcsODUuODg4IDE5Ny4xNzMsODQuNjg5IDE5Ny4xNzMsODMuMDM2IEwxOTcuMTczLDI5LjAzNSBDMTk3LjE3MywyOC40NTEgMTk2Ljg2MSwyNy45MTEgMTk2LjM1NSwyNy42MTkgQzE5Ni4zNTUsMjcuNjE5IDE3MS44NDMsMTMuNDY3IDE3MC4zODUsMTIuNjI2IEMxNzAuMTMyLDEyLjQ4IDE2OS44NSwxMi40MDcgMTY5LjU2OCwxMi40MDcgQzE2OS4yODUsMTIuNDA3IDE2OS4wMDIsMTIuNDgxIDE2OC43NDksMTIuNjI3IEMxNjguMTQzLDEyLjk3OCAxNjUuNzU2LDE0LjM1NyAxNjQuNDI0LDE1LjEyNSBMMTU5LjYxNSwxMC44NyBDMTU4Ljc5NiwxMC4xNDUgMTU4LjE1NCw4LjkzNyAxNTguMDU0LDcuOTM0IEMxNTguMDQ1LDcuODM3IDE1OC4wMzQsNy43MzkgMTU4LjAyMSw3LjY0IEMxNTguMDA1LDcuNTIzIDE1Ny45OTgsNy40MSAxNTcuOTk4LDcuMzA0IEwxNTcuOTk4LDYuNDE4IEMxNTcuOTk4LDUuODM0IDE1Ny42ODYsNS4yOTUgMTU3LjE4MSw1LjAwMiBDMTU2LjYyNCw0LjY4IDE1MC40NDIsMS4xMTEgMTUwLjQ0MiwxLjExMSBDMTUwLjE4OSwwLjk2NSAxNDkuOTA3LDAuODkyIDE0OS42MjUsMC44OTIiIGlkPSJGaWxsLTEiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTYuMDI3LDI1LjYzNiBMMTQyLjYwMyw1Mi41MjcgQzE0My44MDcsNTMuMjIyIDE0NC41ODIsNTQuMTE0IDE0NC44NDUsNTUuMDY4IEwxNDQuODM1LDU1LjA3NSBMNjMuNDYxLDEwMi4wNTcgTDYzLjQ2LDEwMi4wNTcgQzYxLjgwNiwxMDEuOTA1IDYwLjI2MSwxMDEuNDU3IDU5LjA1NywxMDAuNzYyIEwxMi40ODEsNzMuODcxIEw5Ni4wMjcsMjUuNjM2IiBpZD0iRmlsbC0yIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYzLjQ2MSwxMDIuMTc0IEM2My40NTMsMTAyLjE3NCA2My40NDYsMTAyLjE3NCA2My40MzksMTAyLjE3MiBDNjEuNzQ2LDEwMi4wMTYgNjAuMjExLDEwMS41NjMgNTguOTk4LDEwMC44NjMgTDEyLjQyMiw3My45NzMgQzEyLjM4Niw3My45NTIgMTIuMzY0LDczLjkxNCAxMi4zNjQsNzMuODcxIEMxMi4zNjQsNzMuODMgMTIuMzg2LDczLjc5MSAxMi40MjIsNzMuNzcgTDk1Ljk2OCwyNS41MzUgQzk2LjAwNCwyNS41MTQgOTYuMDQ5LDI1LjUxNCA5Ni4wODUsMjUuNTM1IEwxNDIuNjYxLDUyLjQyNiBDMTQzLjg4OCw1My4xMzQgMTQ0LjY4Miw1NC4wMzggMTQ0Ljk1Nyw1NS4wMzcgQzE0NC45Nyw1NS4wODMgMTQ0Ljk1Myw1NS4xMzMgMTQ0LjkxNSw1NS4xNjEgQzE0NC45MTEsNTUuMTY1IDE0NC44OTgsNTUuMTc0IDE0NC44OTQsNTUuMTc3IEw2My41MTksMTAyLjE1OCBDNjMuNTAxLDEwMi4xNjkgNjMuNDgxLDEwMi4xNzQgNjMuNDYxLDEwMi4xNzQgTDYzLjQ2MSwxMDIuMTc0IFogTTEyLjcxNCw3My44NzEgTDU5LjExNSwxMDAuNjYxIEM2MC4yOTMsMTAxLjM0MSA2MS43ODYsMTAxLjc4MiA2My40MzUsMTAxLjkzNyBMMTQ0LjcwNyw1NS4wMTUgQzE0NC40MjgsNTQuMTA4IDE0My42ODIsNTMuMjg1IDE0Mi41NDQsNTIuNjI4IEw5Ni4wMjcsMjUuNzcxIEwxMi43MTQsNzMuODcxIEwxMi43MTQsNzMuODcxIFoiIGlkPSJGaWxsLTMiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ4LjMyNyw1OC40NzEgQzE0OC4xNDUsNTguNDggMTQ3Ljk2Miw1OC40OCAxNDcuNzgxLDU4LjQ3MiBDMTQ1Ljg4Nyw1OC4zODkgMTQ0LjQ3OSw1Ny40MzQgMTQ0LjYzNiw1Ni4zNCBDMTQ0LjY4OSw1NS45NjcgMTQ0LjY2NCw1NS41OTcgMTQ0LjU2NCw1NS4yMzUgTDYzLjQ2MSwxMDIuMDU3IEM2NC4wODksMTAyLjExNSA2NC43MzMsMTAyLjEzIDY1LjM3OSwxMDIuMDk5IEM2NS41NjEsMTAyLjA5IDY1Ljc0MywxMDIuMDkgNjUuOTI1LDEwMi4wOTggQzY3LjgxOSwxMDIuMTgxIDY5LjIyNywxMDMuMTM2IDY5LjA3LDEwNC4yMyBMMTQ4LjMyNyw1OC40NzEiIGlkPSJGaWxsLTQiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNjkuMDcsMTA0LjM0NyBDNjkuMDQ4LDEwNC4zNDcgNjkuMDI1LDEwNC4zNCA2OS4wMDUsMTA0LjMyNyBDNjguOTY4LDEwNC4zMDEgNjguOTQ4LDEwNC4yNTcgNjguOTU1LDEwNC4yMTMgQzY5LDEwMy44OTYgNjguODk4LDEwMy41NzYgNjguNjU4LDEwMy4yODggQzY4LjE1MywxMDIuNjc4IDY3LjEwMywxMDIuMjY2IDY1LjkyLDEwMi4yMTQgQzY1Ljc0MiwxMDIuMjA2IDY1LjU2MywxMDIuMjA3IDY1LjM4NSwxMDIuMjE1IEM2NC43NDIsMTAyLjI0NiA2NC4wODcsMTAyLjIzMiA2My40NSwxMDIuMTc0IEM2My4zOTksMTAyLjE2OSA2My4zNTgsMTAyLjEzMiA2My4zNDcsMTAyLjA4MiBDNjMuMzM2LDEwMi4wMzMgNjMuMzU4LDEwMS45ODEgNjMuNDAyLDEwMS45NTYgTDE0NC41MDYsNTUuMTM0IEMxNDQuNTM3LDU1LjExNiAxNDQuNTc1LDU1LjExMyAxNDQuNjA5LDU1LjEyNyBDMTQ0LjY0Miw1NS4xNDEgMTQ0LjY2OCw1NS4xNyAxNDQuNjc3LDU1LjIwNCBDMTQ0Ljc4MSw1NS41ODUgMTQ0LjgwNiw1NS45NzIgMTQ0Ljc1MSw1Ni4zNTcgQzE0NC43MDYsNTYuNjczIDE0NC44MDgsNTYuOTk0IDE0NS4wNDcsNTcuMjgyIEMxNDUuNTUzLDU3Ljg5MiAxNDYuNjAyLDU4LjMwMyAxNDcuNzg2LDU4LjM1NSBDMTQ3Ljk2NCw1OC4zNjMgMTQ4LjE0Myw1OC4zNjMgMTQ4LjMyMSw1OC4zNTQgQzE0OC4zNzcsNTguMzUyIDE0OC40MjQsNTguMzg3IDE0OC40MzksNTguNDM4IEMxNDguNDU0LDU4LjQ5IDE0OC40MzIsNTguNTQ1IDE0OC4zODUsNTguNTcyIEw2OS4xMjksMTA0LjMzMSBDNjkuMTExLDEwNC4zNDIgNjkuMDksMTA0LjM0NyA2OS4wNywxMDQuMzQ3IEw2OS4wNywxMDQuMzQ3IFogTTY1LjY2NSwxMDEuOTc1IEM2NS43NTQsMTAxLjk3NSA2NS44NDIsMTAxLjk3NyA2NS45MywxMDEuOTgxIEM2Ny4xOTYsMTAyLjAzNyA2OC4yODMsMTAyLjQ2OSA2OC44MzgsMTAzLjEzOSBDNjkuMDY1LDEwMy40MTMgNjkuMTg4LDEwMy43MTQgNjkuMTk4LDEwNC4wMjEgTDE0Ny44ODMsNTguNTkyIEMxNDcuODQ3LDU4LjU5MiAxNDcuODExLDU4LjU5MSAxNDcuNzc2LDU4LjU4OSBDMTQ2LjUwOSw1OC41MzMgMTQ1LjQyMiw1OC4xIDE0NC44NjcsNTcuNDMxIEMxNDQuNTg1LDU3LjA5MSAxNDQuNDY1LDU2LjcwNyAxNDQuNTIsNTYuMzI0IEMxNDQuNTYzLDU2LjAyMSAxNDQuNTUyLDU1LjcxNiAxNDQuNDg4LDU1LjQxNCBMNjMuODQ2LDEwMS45NyBDNjQuMzUzLDEwMi4wMDIgNjQuODY3LDEwMi4wMDYgNjUuMzc0LDEwMS45ODIgQzY1LjQ3MSwxMDEuOTc3IDY1LjU2OCwxMDEuOTc1IDY1LjY2NSwxMDEuOTc1IEw2NS42NjUsMTAxLjk3NSBaIiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTIuMjA4LDU1LjEzNCBDMS4yMDcsNTMuMzA3IDEuOTY3LDUwLjkxNyAzLjkwNiw0OS43OTcgTDU5LjkxNywxNy40NTMgQzYxLjg1NiwxNi4zMzMgNjQuMjQxLDE2LjkwNyA2NS4yNDMsMTguNzM0IEw2NS40NzUsMTkuMTQ0IEM2NS44NzIsMTkuODgyIDY2LjM2OCwyMC41NiA2Ni45NDUsMjEuMTY1IEw2Ny4yMjMsMjEuNDM1IEM3MC41NDgsMjQuNjQ5IDc1LjgwNiwyNS4xNTEgODAuMTExLDIyLjY2NSBMODcuNDMsMTguNDQ1IEM4OS4zNywxNy4zMjYgOTEuNzU0LDE3Ljg5OSA5Mi43NTUsMTkuNzI3IEw5Ni4wMDUsMjUuNjU1IEwxMi40ODYsNzMuODg0IEwyLjIwOCw1NS4xMzQgWiIgaWQ9IkZpbGwtNiIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMi40ODYsNzQuMDAxIEMxMi40NzYsNzQuMDAxIDEyLjQ2NSw3My45OTkgMTIuNDU1LDczLjk5NiBDMTIuNDI0LDczLjk4OCAxMi4zOTksNzMuOTY3IDEyLjM4NCw3My45NCBMMi4xMDYsNTUuMTkgQzEuMDc1LDUzLjMxIDEuODU3LDUwLjg0NSAzLjg0OCw0OS42OTYgTDU5Ljg1OCwxNy4zNTIgQzYwLjUyNSwxNi45NjcgNjEuMjcxLDE2Ljc2NCA2Mi4wMTYsMTYuNzY0IEM2My40MzEsMTYuNzY0IDY0LjY2NiwxNy40NjYgNjUuMzI3LDE4LjY0NiBDNjUuMzM3LDE4LjY1NCA2NS4zNDUsMTguNjYzIDY1LjM1MSwxOC42NzQgTDY1LjU3OCwxOS4wODggQzY1LjU4NCwxOS4xIDY1LjU4OSwxOS4xMTIgNjUuNTkxLDE5LjEyNiBDNjUuOTg1LDE5LjgzOCA2Ni40NjksMjAuNDk3IDY3LjAzLDIxLjA4NSBMNjcuMzA1LDIxLjM1MSBDNjkuMTUxLDIzLjEzNyA3MS42NDksMjQuMTIgNzQuMzM2LDI0LjEyIEM3Ni4zMTMsMjQuMTIgNzguMjksMjMuNTgyIDgwLjA1MywyMi41NjMgQzgwLjA2NCwyMi41NTcgODAuMDc2LDIyLjU1MyA4MC4wODgsMjIuNTUgTDg3LjM3MiwxOC4zNDQgQzg4LjAzOCwxNy45NTkgODguNzg0LDE3Ljc1NiA4OS41MjksMTcuNzU2IEM5MC45NTYsMTcuNzU2IDkyLjIwMSwxOC40NzIgOTIuODU4LDE5LjY3IEw5Ni4xMDcsMjUuNTk5IEM5Ni4xMzgsMjUuNjU0IDk2LjExOCwyNS43MjQgOTYuMDYzLDI1Ljc1NiBMMTIuNTQ1LDczLjk4NSBDMTIuNTI2LDczLjk5NiAxMi41MDYsNzQuMDAxIDEyLjQ4Niw3NC4wMDEgTDEyLjQ4Niw3NC4wMDEgWiBNNjIuMDE2LDE2Ljk5NyBDNjEuMzEyLDE2Ljk5NyA2MC42MDYsMTcuMTkgNTkuOTc1LDE3LjU1NCBMMy45NjUsNDkuODk5IEMyLjA4Myw1MC45ODUgMS4zNDEsNTMuMzA4IDIuMzEsNTUuMDc4IEwxMi41MzEsNzMuNzIzIEw5NS44NDgsMjUuNjExIEw5Mi42NTMsMTkuNzgyIEM5Mi4wMzgsMTguNjYgOTAuODcsMTcuOTkgODkuNTI5LDE3Ljk5IEM4OC44MjUsMTcuOTkgODguMTE5LDE4LjE4MiA4Ny40ODksMTguNTQ3IEw4MC4xNzIsMjIuNzcyIEM4MC4xNjEsMjIuNzc4IDgwLjE0OSwyMi43ODIgODAuMTM3LDIyLjc4NSBDNzguMzQ2LDIzLjgxMSA3Ni4zNDEsMjQuMzU0IDc0LjMzNiwyNC4zNTQgQzcxLjU4OCwyNC4zNTQgNjkuMDMzLDIzLjM0NyA2Ny4xNDIsMjEuNTE5IEw2Ni44NjQsMjEuMjQ5IEM2Ni4yNzcsMjAuNjM0IDY1Ljc3NCwxOS45NDcgNjUuMzY3LDE5LjIwMyBDNjUuMzYsMTkuMTkyIDY1LjM1NiwxOS4xNzkgNjUuMzU0LDE5LjE2NiBMNjUuMTYzLDE4LjgxOSBDNjUuMTU0LDE4LjgxMSA2NS4xNDYsMTguODAxIDY1LjE0LDE4Ljc5IEM2NC41MjUsMTcuNjY3IDYzLjM1NywxNi45OTcgNjIuMDE2LDE2Ljk5NyBMNjIuMDE2LDE2Ljk5NyBaIiBpZD0iRmlsbC03IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTQyLjQzNCw0OC44MDggTDQyLjQzNCw0OC44MDggQzM5LjkyNCw0OC44MDcgMzcuNzM3LDQ3LjU1IDM2LjU4Miw0NS40NDMgQzM0Ljc3MSw0Mi4xMzkgMzYuMTQ0LDM3LjgwOSAzOS42NDEsMzUuNzg5IEw1MS45MzIsMjguNjkxIEM1My4xMDMsMjguMDE1IDU0LjQxMywyNy42NTggNTUuNzIxLDI3LjY1OCBDNTguMjMxLDI3LjY1OCA2MC40MTgsMjguOTE2IDYxLjU3MywzMS4wMjMgQzYzLjM4NCwzNC4zMjcgNjIuMDEyLDM4LjY1NyA1OC41MTQsNDAuNjc3IEw0Ni4yMjMsNDcuNzc1IEM0NS4wNTMsNDguNDUgNDMuNzQyLDQ4LjgwOCA0Mi40MzQsNDguODA4IEw0Mi40MzQsNDguODA4IFogTTU1LjcyMSwyOC4xMjUgQzU0LjQ5NSwyOC4xMjUgNTMuMjY1LDI4LjQ2MSA1Mi4xNjYsMjkuMDk2IEwzOS44NzUsMzYuMTk0IEMzNi41OTYsMzguMDg3IDM1LjMwMiw0Mi4xMzYgMzYuOTkyLDQ1LjIxOCBDMzguMDYzLDQ3LjE3MyA0MC4wOTgsNDguMzQgNDIuNDM0LDQ4LjM0IEM0My42NjEsNDguMzQgNDQuODksNDguMDA1IDQ1Ljk5LDQ3LjM3IEw1OC4yODEsNDAuMjcyIEM2MS41NiwzOC4zNzkgNjIuODUzLDM0LjMzIDYxLjE2NCwzMS4yNDggQzYwLjA5MiwyOS4yOTMgNTguMDU4LDI4LjEyNSA1NS43MjEsMjguMTI1IEw1NS43MjEsMjguMTI1IFoiIGlkPSJGaWxsLTgiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjU4OCwyLjQwNyBDMTQ5LjU4OCwyLjQwNyAxNTUuNzY4LDUuOTc1IDE1Ni4zMjUsNi4yOTcgTDE1Ni4zMjUsNy4xODQgQzE1Ni4zMjUsNy4zNiAxNTYuMzM4LDcuNTQ0IDE1Ni4zNjIsNy43MzMgQzE1Ni4zNzMsNy44MTQgMTU2LjM4Miw3Ljg5NCAxNTYuMzksNy45NzUgQzE1Ni41Myw5LjM5IDE1Ny4zNjMsMTAuOTczIDE1OC40OTUsMTEuOTc0IEwxNjUuODkxLDE4LjUxOSBDMTY2LjA2OCwxOC42NzUgMTY2LjI0OSwxOC44MTQgMTY2LjQzMiwxOC45MzQgQzE2OC4wMTEsMTkuOTc0IDE2OS4zODIsMTkuNCAxNjkuNDk0LDE3LjY1MiBDMTY5LjU0MywxNi44NjggMTY5LjU1MSwxNi4wNTcgMTY5LjUxNywxNS4yMjMgTDE2OS41MTQsMTUuMDYzIEwxNjkuNTE0LDEzLjkxMiBDMTcwLjc4LDE0LjY0MiAxOTUuNTAxLDI4LjkxNSAxOTUuNTAxLDI4LjkxNSBMMTk1LjUwMSw4Mi45MTUgQzE5NS41MDEsODQuMDA1IDE5NC43MzEsODQuNDQ1IDE5My43ODEsODMuODk3IEwxNTEuMzA4LDU5LjM3NCBDMTUwLjM1OCw1OC44MjYgMTQ5LjU4OCw1Ny40OTcgMTQ5LjU4OCw1Ni40MDggTDE0OS41ODgsMjIuMzc1IiBpZD0iRmlsbC05IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE5NC41NTMsODQuMjUgQzE5NC4yOTYsODQuMjUgMTk0LjAxMyw4NC4xNjUgMTkzLjcyMiw4My45OTcgTDE1MS4yNSw1OS40NzYgQzE1MC4yNjksNTguOTA5IDE0OS40NzEsNTcuNTMzIDE0OS40NzEsNTYuNDA4IEwxNDkuNDcxLDIyLjM3NSBMMTQ5LjcwNSwyMi4zNzUgTDE0OS43MDUsNTYuNDA4IEMxNDkuNzA1LDU3LjQ1OSAxNTAuNDUsNTguNzQ0IDE1MS4zNjYsNTkuMjc0IEwxOTMuODM5LDgzLjc5NSBDMTk0LjI2Myw4NC4wNCAxOTQuNjU1LDg0LjA4MyAxOTQuOTQyLDgzLjkxNyBDMTk1LjIyNyw4My43NTMgMTk1LjM4NCw4My4zOTcgMTk1LjM4NCw4Mi45MTUgTDE5NS4zODQsMjguOTgyIEMxOTQuMTAyLDI4LjI0MiAxNzIuMTA0LDE1LjU0MiAxNjkuNjMxLDE0LjExNCBMMTY5LjYzNCwxNS4yMiBDMTY5LjY2OCwxNi4wNTIgMTY5LjY2LDE2Ljg3NCAxNjkuNjEsMTcuNjU5IEMxNjkuNTU2LDE4LjUwMyAxNjkuMjE0LDE5LjEyMyAxNjguNjQ3LDE5LjQwNSBDMTY4LjAyOCwxOS43MTQgMTY3LjE5NywxOS41NzggMTY2LjM2NywxOS4wMzIgQzE2Ni4xODEsMTguOTA5IDE2NS45OTUsMTguNzY2IDE2NS44MTQsMTguNjA2IEwxNTguNDE3LDEyLjA2MiBDMTU3LjI1OSwxMS4wMzYgMTU2LjQxOCw5LjQzNyAxNTYuMjc0LDcuOTg2IEMxNTYuMjY2LDcuOTA3IDE1Ni4yNTcsNy44MjcgMTU2LjI0Nyw3Ljc0OCBDMTU2LjIyMSw3LjU1NSAxNTYuMjA5LDcuMzY1IDE1Ni4yMDksNy4xODQgTDE1Ni4yMDksNi4zNjQgQzE1NS4zNzUsNS44ODMgMTQ5LjUyOSwyLjUwOCAxNDkuNTI5LDIuNTA4IEwxNDkuNjQ2LDIuMzA2IEMxNDkuNjQ2LDIuMzA2IDE1NS44MjcsNS44NzQgMTU2LjM4NCw2LjE5NiBMMTU2LjQ0Miw2LjIzIEwxNTYuNDQyLDcuMTg0IEMxNTYuNDQyLDcuMzU1IDE1Ni40NTQsNy41MzUgMTU2LjQ3OCw3LjcxNyBDMTU2LjQ4OSw3LjggMTU2LjQ5OSw3Ljg4MiAxNTYuNTA3LDcuOTYzIEMxNTYuNjQ1LDkuMzU4IDE1Ny40NTUsMTAuODk4IDE1OC41NzIsMTEuODg2IEwxNjUuOTY5LDE4LjQzMSBDMTY2LjE0MiwxOC41ODQgMTY2LjMxOSwxOC43MiAxNjYuNDk2LDE4LjgzNyBDMTY3LjI1NCwxOS4zMzYgMTY4LDE5LjQ2NyAxNjguNTQzLDE5LjE5NiBDMTY5LjAzMywxOC45NTMgMTY5LjMyOSwxOC40MDEgMTY5LjM3NywxNy42NDUgQzE2OS40MjcsMTYuODY3IDE2OS40MzQsMTYuMDU0IDE2OS40MDEsMTUuMjI4IEwxNjkuMzk3LDE1LjA2NSBMMTY5LjM5NywxMy43MSBMMTY5LjU3MiwxMy44MSBDMTcwLjgzOSwxNC41NDEgMTk1LjU1OSwyOC44MTQgMTk1LjU1OSwyOC44MTQgTDE5NS42MTgsMjguODQ3IEwxOTUuNjE4LDgyLjkxNSBDMTk1LjYxOCw4My40ODQgMTk1LjQyLDgzLjkxMSAxOTUuMDU5LDg0LjExOSBDMTk0LjkwOCw4NC4yMDYgMTk0LjczNyw4NC4yNSAxOTQuNTUzLDg0LjI1IiBpZD0iRmlsbC0xMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDUuNjg1LDU2LjE2MSBMMTY5LjgsNzAuMDgzIEwxNDMuODIyLDg1LjA4MSBMMTQyLjM2LDg0Ljc3NCBDMTM1LjgyNiw4Mi42MDQgMTI4LjczMiw4MS4wNDYgMTIxLjM0MSw4MC4xNTggQzExNi45NzYsNzkuNjM0IDExMi42NzgsODEuMjU0IDExMS43NDMsODMuNzc4IEMxMTEuNTA2LDg0LjQxNCAxMTEuNTAzLDg1LjA3MSAxMTEuNzMyLDg1LjcwNiBDMTEzLjI3LDg5Ljk3MyAxMTUuOTY4LDk0LjA2OSAxMTkuNzI3LDk3Ljg0MSBMMTIwLjI1OSw5OC42ODYgQzEyMC4yNiw5OC42ODUgOTQuMjgyLDExMy42ODMgOTQuMjgyLDExMy42ODMgTDcwLjE2Nyw5OS43NjEgTDE0NS42ODUsNTYuMTYxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik05NC4yODIsMTEzLjgxOCBMOTQuMjIzLDExMy43ODUgTDY5LjkzMyw5OS43NjEgTDcwLjEwOCw5OS42NiBMMTQ1LjY4NSw1Ni4wMjYgTDE0NS43NDMsNTYuMDU5IEwxNzAuMDMzLDcwLjA4MyBMMTQzLjg0Miw4NS4yMDUgTDE0My43OTcsODUuMTk1IEMxNDMuNzcyLDg1LjE5IDE0Mi4zMzYsODQuODg4IDE0Mi4zMzYsODQuODg4IEMxMzUuNzg3LDgyLjcxNCAxMjguNzIzLDgxLjE2MyAxMjEuMzI3LDgwLjI3NCBDMTIwLjc4OCw4MC4yMDkgMTIwLjIzNiw4MC4xNzcgMTE5LjY4OSw4MC4xNzcgQzExNS45MzEsODAuMTc3IDExMi42MzUsODEuNzA4IDExMS44NTIsODMuODE5IEMxMTEuNjI0LDg0LjQzMiAxMTEuNjIxLDg1LjA1MyAxMTEuODQyLDg1LjY2NyBDMTEzLjM3Nyw4OS45MjUgMTE2LjA1OCw5My45OTMgMTE5LjgxLDk3Ljc1OCBMMTE5LjgyNiw5Ny43NzkgTDEyMC4zNTIsOTguNjE0IEMxMjAuMzU0LDk4LjYxNyAxMjAuMzU2LDk4LjYyIDEyMC4zNTgsOTguNjI0IEwxMjAuNDIyLDk4LjcyNiBMMTIwLjMxNyw5OC43ODcgQzEyMC4yNjQsOTguODE4IDk0LjU5OSwxMTMuNjM1IDk0LjM0LDExMy43ODUgTDk0LjI4MiwxMTMuODE4IEw5NC4yODIsMTEzLjgxOCBaIE03MC40MDEsOTkuNzYxIEw5NC4yODIsMTEzLjU0OSBMMTE5LjA4NCw5OS4yMjkgQzExOS42Myw5OC45MTQgMTE5LjkzLDk4Ljc0IDEyMC4xMDEsOTguNjU0IEwxMTkuNjM1LDk3LjkxNCBDMTE1Ljg2NCw5NC4xMjcgMTEzLjE2OCw5MC4wMzMgMTExLjYyMiw4NS43NDYgQzExMS4zODIsODUuMDc5IDExMS4zODYsODQuNDA0IDExMS42MzMsODMuNzM4IEMxMTIuNDQ4LDgxLjUzOSAxMTUuODM2LDc5Ljk0MyAxMTkuNjg5LDc5Ljk0MyBDMTIwLjI0Niw3OS45NDMgMTIwLjgwNiw3OS45NzYgMTIxLjM1NSw4MC4wNDIgQzEyOC43NjcsODAuOTMzIDEzNS44NDYsODIuNDg3IDE0Mi4zOTYsODQuNjYzIEMxNDMuMjMyLDg0LjgzOCAxNDMuNjExLDg0LjkxNyAxNDMuNzg2LDg0Ljk2NyBMMTY5LjU2Niw3MC4wODMgTDE0NS42ODUsNTYuMjk1IEw3MC40MDEsOTkuNzYxIEw3MC40MDEsOTkuNzYxIFoiIGlkPSJGaWxsLTEyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2Ny4yMywxOC45NzkgTDE2Ny4yMyw2OS44NSBMMTM5LjkwOSw4NS42MjMgTDEzMy40NDgsNzEuNDU2IEMxMzIuNTM4LDY5LjQ2IDEzMC4wMiw2OS43MTggMTI3LjgyNCw3Mi4wMyBDMTI2Ljc2OSw3My4xNCAxMjUuOTMxLDc0LjU4NSAxMjUuNDk0LDc2LjA0OCBMMTE5LjAzNCw5Ny42NzYgTDkxLjcxMiwxMTMuNDUgTDkxLjcxMiw2Mi41NzkgTDE2Ny4yMywxOC45NzkiIGlkPSJGaWxsLTEzIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTkxLjcxMiwxMTMuNTY3IEM5MS42OTIsMTEzLjU2NyA5MS42NzIsMTEzLjU2MSA5MS42NTMsMTEzLjU1MSBDOTEuNjE4LDExMy41MyA5MS41OTUsMTEzLjQ5MiA5MS41OTUsMTEzLjQ1IEw5MS41OTUsNjIuNTc5IEM5MS41OTUsNjIuNTM3IDkxLjYxOCw2Mi40OTkgOTEuNjUzLDYyLjQ3OCBMMTY3LjE3MiwxOC44NzggQzE2Ny4yMDgsMTguODU3IDE2Ny4yNTIsMTguODU3IDE2Ny4yODgsMTguODc4IEMxNjcuMzI0LDE4Ljg5OSAxNjcuMzQ3LDE4LjkzNyAxNjcuMzQ3LDE4Ljk3OSBMMTY3LjM0Nyw2OS44NSBDMTY3LjM0Nyw2OS44OTEgMTY3LjMyNCw2OS45MyAxNjcuMjg4LDY5Ljk1IEwxMzkuOTY3LDg1LjcyNSBDMTM5LjkzOSw4NS43NDEgMTM5LjkwNSw4NS43NDUgMTM5Ljg3Myw4NS43MzUgQzEzOS44NDIsODUuNzI1IDEzOS44MTYsODUuNzAyIDEzOS44MDIsODUuNjcyIEwxMzMuMzQyLDcxLjUwNCBDMTMyLjk2Nyw3MC42ODIgMTMyLjI4LDcwLjIyOSAxMzEuNDA4LDcwLjIyOSBDMTMwLjMxOSw3MC4yMjkgMTI5LjA0NCw3MC45MTUgMTI3LjkwOCw3Mi4xMSBDMTI2Ljg3NCw3My4yIDEyNi4wMzQsNzQuNjQ3IDEyNS42MDYsNzYuMDgyIEwxMTkuMTQ2LDk3LjcwOSBDMTE5LjEzNyw5Ny43MzggMTE5LjExOCw5Ny43NjIgMTE5LjA5Miw5Ny43NzcgTDkxLjc3LDExMy41NTEgQzkxLjc1MiwxMTMuNTYxIDkxLjczMiwxMTMuNTY3IDkxLjcxMiwxMTMuNTY3IEw5MS43MTIsMTEzLjU2NyBaIE05MS44MjksNjIuNjQ3IEw5MS44MjksMTEzLjI0OCBMMTE4LjkzNSw5Ny41OTggTDEyNS4zODIsNzYuMDE1IEMxMjUuODI3LDc0LjUyNSAxMjYuNjY0LDczLjA4MSAxMjcuNzM5LDcxLjk1IEMxMjguOTE5LDcwLjcwOCAxMzAuMjU2LDY5Ljk5NiAxMzEuNDA4LDY5Ljk5NiBDMTMyLjM3Nyw2OS45OTYgMTMzLjEzOSw3MC40OTcgMTMzLjU1NCw3MS40MDcgTDEzOS45NjEsODUuNDU4IEwxNjcuMTEzLDY5Ljc4MiBMMTY3LjExMywxOS4xODEgTDkxLjgyOSw2Mi42NDcgTDkxLjgyOSw2Mi42NDcgWiIgaWQ9IkZpbGwtMTQiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTY4LjU0MywxOS4yMTMgTDE2OC41NDMsNzAuMDgzIEwxNDEuMjIxLDg1Ljg1NyBMMTM0Ljc2MSw3MS42ODkgQzEzMy44NTEsNjkuNjk0IDEzMS4zMzMsNjkuOTUxIDEyOS4xMzcsNzIuMjYzIEMxMjguMDgyLDczLjM3NCAxMjcuMjQ0LDc0LjgxOSAxMjYuODA3LDc2LjI4MiBMMTIwLjM0Niw5Ny45MDkgTDkzLjAyNSwxMTMuNjgzIEw5My4wMjUsNjIuODEzIEwxNjguNTQzLDE5LjIxMyIgaWQ9IkZpbGwtMTUiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTMuMDI1LDExMy44IEM5My4wMDUsMTEzLjggOTIuOTg0LDExMy43OTUgOTIuOTY2LDExMy43ODUgQzkyLjkzMSwxMTMuNzY0IDkyLjkwOCwxMTMuNzI1IDkyLjkwOCwxMTMuNjg0IEw5Mi45MDgsNjIuODEzIEM5Mi45MDgsNjIuNzcxIDkyLjkzMSw2Mi43MzMgOTIuOTY2LDYyLjcxMiBMMTY4LjQ4NCwxOS4xMTIgQzE2OC41MiwxOS4wOSAxNjguNTY1LDE5LjA5IDE2OC42MDEsMTkuMTEyIEMxNjguNjM3LDE5LjEzMiAxNjguNjYsMTkuMTcxIDE2OC42NiwxOS4yMTIgTDE2OC42Niw3MC4wODMgQzE2OC42Niw3MC4xMjUgMTY4LjYzNyw3MC4xNjQgMTY4LjYwMSw3MC4xODQgTDE0MS4yOCw4NS45NTggQzE0MS4yNTEsODUuOTc1IDE0MS4yMTcsODUuOTc5IDE0MS4xODYsODUuOTY4IEMxNDEuMTU0LDg1Ljk1OCAxNDEuMTI5LDg1LjkzNiAxNDEuMTE1LDg1LjkwNiBMMTM0LjY1NSw3MS43MzggQzEzNC4yOCw3MC45MTUgMTMzLjU5Myw3MC40NjMgMTMyLjcyLDcwLjQ2MyBDMTMxLjYzMiw3MC40NjMgMTMwLjM1Nyw3MS4xNDggMTI5LjIyMSw3Mi4zNDQgQzEyOC4xODYsNzMuNDMzIDEyNy4zNDcsNzQuODgxIDEyNi45MTksNzYuMzE1IEwxMjAuNDU4LDk3Ljk0MyBDMTIwLjQ1LDk3Ljk3MiAxMjAuNDMxLDk3Ljk5NiAxMjAuNDA1LDk4LjAxIEw5My4wODMsMTEzLjc4NSBDOTMuMDY1LDExMy43OTUgOTMuMDQ1LDExMy44IDkzLjAyNSwxMTMuOCBMOTMuMDI1LDExMy44IFogTTkzLjE0Miw2Mi44ODEgTDkzLjE0MiwxMTMuNDgxIEwxMjAuMjQ4LDk3LjgzMiBMMTI2LjY5NSw3Ni4yNDggQzEyNy4xNCw3NC43NTggMTI3Ljk3Nyw3My4zMTUgMTI5LjA1Miw3Mi4xODMgQzEzMC4yMzEsNzAuOTQyIDEzMS41NjgsNzAuMjI5IDEzMi43Miw3MC4yMjkgQzEzMy42ODksNzAuMjI5IDEzNC40NTIsNzAuNzMxIDEzNC44NjcsNzEuNjQxIEwxNDEuMjc0LDg1LjY5MiBMMTY4LjQyNiw3MC4wMTYgTDE2OC40MjYsMTkuNDE1IEw5My4xNDIsNjIuODgxIEw5My4xNDIsNjIuODgxIFoiIGlkPSJGaWxsLTE2IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS44LDcwLjA4MyBMMTQyLjQ3OCw4NS44NTcgTDEzNi4wMTgsNzEuNjg5IEMxMzUuMTA4LDY5LjY5NCAxMzIuNTksNjkuOTUxIDEzMC4zOTMsNzIuMjYzIEMxMjkuMzM5LDczLjM3NCAxMjguNSw3NC44MTkgMTI4LjA2NCw3Ni4yODIgTDEyMS42MDMsOTcuOTA5IEw5NC4yODIsMTEzLjY4MyBMOTQuMjgyLDYyLjgxMyBMMTY5LjgsMTkuMjEzIEwxNjkuOCw3MC4wODMgWiIgaWQ9IkZpbGwtMTciIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTQuMjgyLDExMy45MTcgQzk0LjI0MSwxMTMuOTE3IDk0LjIwMSwxMTMuOTA3IDk0LjE2NSwxMTMuODg2IEM5NC4wOTMsMTEzLjg0NSA5NC4wNDgsMTEzLjc2NyA5NC4wNDgsMTEzLjY4NCBMOTQuMDQ4LDYyLjgxMyBDOTQuMDQ4LDYyLjczIDk0LjA5Myw2Mi42NTIgOTQuMTY1LDYyLjYxMSBMMTY5LjY4MywxOS4wMSBDMTY5Ljc1NSwxOC45NjkgMTY5Ljg0NCwxOC45NjkgMTY5LjkxNywxOS4wMSBDMTY5Ljk4OSwxOS4wNTIgMTcwLjAzMywxOS4xMjkgMTcwLjAzMywxOS4yMTIgTDE3MC4wMzMsNzAuMDgzIEMxNzAuMDMzLDcwLjE2NiAxNjkuOTg5LDcwLjI0NCAxNjkuOTE3LDcwLjI4NSBMMTQyLjU5NSw4Ni4wNiBDMTQyLjUzOCw4Ni4wOTIgMTQyLjQ2OSw4Ni4xIDE0Mi40MDcsODYuMDggQzE0Mi4zNDQsODYuMDYgMTQyLjI5Myw4Ni4wMTQgMTQyLjI2Niw4NS45NTQgTDEzNS44MDUsNzEuNzg2IEMxMzUuNDQ1LDcwLjk5NyAxMzQuODEzLDcwLjU4IDEzMy45NzcsNzAuNTggQzEzMi45MjEsNzAuNTggMTMxLjY3Niw3MS4yNTIgMTMwLjU2Miw3Mi40MjQgQzEyOS41NCw3My41MDEgMTI4LjcxMSw3NC45MzEgMTI4LjI4Nyw3Ni4zNDggTDEyMS44MjcsOTcuOTc2IEMxMjEuODEsOTguMDM0IDEyMS43NzEsOTguMDgyIDEyMS43Miw5OC4xMTIgTDk0LjM5OCwxMTMuODg2IEM5NC4zNjIsMTEzLjkwNyA5NC4zMjIsMTEzLjkxNyA5NC4yODIsMTEzLjkxNyBMOTQuMjgyLDExMy45MTcgWiBNOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDExMy4yNzkgTDEyMS40MDYsOTcuNzU0IEwxMjcuODQsNzYuMjE1IEMxMjguMjksNzQuNzA4IDEyOS4xMzcsNzMuMjQ3IDEzMC4yMjQsNzIuMTAzIEMxMzEuNDI1LDcwLjgzOCAxMzIuNzkzLDcwLjExMiAxMzMuOTc3LDcwLjExMiBDMTM0Ljk5NSw3MC4xMTIgMTM1Ljc5NSw3MC42MzggMTM2LjIzLDcxLjU5MiBMMTQyLjU4NCw4NS41MjYgTDE2OS41NjYsNjkuOTQ4IEwxNjkuNTY2LDE5LjYxNyBMOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDYyLjk0OCBaIiBpZD0iRmlsbC0xOCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMDkuODk0LDkyLjk0MyBMMTA5Ljg5NCw5Mi45NDMgQzEwOC4xMiw5Mi45NDMgMTA2LjY1Myw5Mi4yMTggMTA1LjY1LDkwLjgyMyBDMTA1LjU4Myw5MC43MzEgMTA1LjU5Myw5MC42MSAxMDUuNjczLDkwLjUyOSBDMTA1Ljc1Myw5MC40NDggMTA1Ljg4LDkwLjQ0IDEwNS45NzQsOTAuNTA2IEMxMDYuNzU0LDkxLjA1MyAxMDcuNjc5LDkxLjMzMyAxMDguNzI0LDkxLjMzMyBDMTEwLjA0Nyw5MS4zMzMgMTExLjQ3OCw5MC44OTQgMTEyLjk4LDkwLjAyNyBDMTE4LjI5MSw4Ni45NiAxMjIuNjExLDc5LjUwOSAxMjIuNjExLDczLjQxNiBDMTIyLjYxMSw3MS40ODkgMTIyLjE2OSw2OS44NTYgMTIxLjMzMyw2OC42OTIgQzEyMS4yNjYsNjguNiAxMjEuMjc2LDY4LjQ3MyAxMjEuMzU2LDY4LjM5MiBDMTIxLjQzNiw2OC4zMTEgMTIxLjU2Myw2OC4yOTkgMTIxLjY1Niw2OC4zNjUgQzEyMy4zMjcsNjkuNTM3IDEyNC4yNDcsNzEuNzQ2IDEyNC4yNDcsNzQuNTg0IEMxMjQuMjQ3LDgwLjgyNiAxMTkuODIxLDg4LjQ0NyAxMTQuMzgyLDkxLjU4NyBDMTEyLjgwOCw5Mi40OTUgMTExLjI5OCw5Mi45NDMgMTA5Ljg5NCw5Mi45NDMgTDEwOS44OTQsOTIuOTQzIFogTTEwNi45MjUsOTEuNDAxIEMxMDcuNzM4LDkyLjA1MiAxMDguNzQ1LDkyLjI3OCAxMDkuODkzLDkyLjI3OCBMMTA5Ljg5NCw5Mi4yNzggQzExMS4yMTUsOTIuMjc4IDExMi42NDcsOTEuOTUxIDExNC4xNDgsOTEuMDg0IEMxMTkuNDU5LDg4LjAxNyAxMjMuNzgsODAuNjIxIDEyMy43OCw3NC41MjggQzEyMy43OCw3Mi41NDkgMTIzLjMxNyw3MC45MjkgMTIyLjQ1NCw2OS43NjcgQzEyMi44NjUsNzAuODAyIDEyMy4wNzksNzIuMDQyIDEyMy4wNzksNzMuNDAyIEMxMjMuMDc5LDc5LjY0NSAxMTguNjUzLDg3LjI4NSAxMTMuMjE0LDkwLjQyNSBDMTExLjY0LDkxLjMzNCAxMTAuMTMsOTEuNzQyIDEwOC43MjQsOTEuNzQyIEMxMDguMDgzLDkxLjc0MiAxMDcuNDgxLDkxLjU5MyAxMDYuOTI1LDkxLjQwMSBMMTA2LjkyNSw5MS40MDEgWiIgaWQ9IkZpbGwtMTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjA5Nyw5MC4yMyBDMTE4LjQ4MSw4Ny4xMjIgMTIyLjg0NSw3OS41OTQgMTIyLjg0NSw3My40MTYgQzEyMi44NDUsNzEuMzY1IDEyMi4zNjIsNjkuNzI0IDEyMS41MjIsNjguNTU2IEMxMTkuNzM4LDY3LjMwNCAxMTcuMTQ4LDY3LjM2MiAxMTQuMjY1LDY5LjAyNiBDMTA4Ljg4MSw3Mi4xMzQgMTA0LjUxNyw3OS42NjIgMTA0LjUxNyw4NS44NCBDMTA0LjUxNyw4Ny44OTEgMTA1LDg5LjUzMiAxMDUuODQsOTAuNyBDMTA3LjYyNCw5MS45NTIgMTEwLjIxNCw5MS44OTQgMTEzLjA5Nyw5MC4yMyIgaWQ9IkZpbGwtMjAiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTA4LjcyNCw5MS42MTQgTDEwOC43MjQsOTEuNjE0IEMxMDcuNTgyLDkxLjYxNCAxMDYuNTY2LDkxLjQwMSAxMDUuNzA1LDkwLjc5NyBDMTA1LjY4NCw5MC43ODMgMTA1LjY2NSw5MC44MTEgMTA1LjY1LDkwLjc5IEMxMDQuNzU2LDg5LjU0NiAxMDQuMjgzLDg3Ljg0MiAxMDQuMjgzLDg1LjgxNyBDMTA0LjI4Myw3OS41NzUgMTA4LjcwOSw3MS45NTMgMTE0LjE0OCw2OC44MTIgQzExNS43MjIsNjcuOTA0IDExNy4yMzIsNjcuNDQ5IDExOC42MzgsNjcuNDQ5IEMxMTkuNzgsNjcuNDQ5IDEyMC43OTYsNjcuNzU4IDEyMS42NTYsNjguMzYyIEMxMjEuNjc4LDY4LjM3NyAxMjEuNjk3LDY4LjM5NyAxMjEuNzEyLDY4LjQxOCBDMTIyLjYwNiw2OS42NjIgMTIzLjA3OSw3MS4zOSAxMjMuMDc5LDczLjQxNSBDMTIzLjA3OSw3OS42NTggMTE4LjY1Myw4Ny4xOTggMTEzLjIxNCw5MC4zMzggQzExMS42NCw5MS4yNDcgMTEwLjEzLDkxLjYxNCAxMDguNzI0LDkxLjYxNCBMMTA4LjcyNCw5MS42MTQgWiBNMTA2LjAwNiw5MC41MDUgQzEwNi43OCw5MS4wMzcgMTA3LjY5NCw5MS4yODEgMTA4LjcyNCw5MS4yODEgQzExMC4wNDcsOTEuMjgxIDExMS40NzgsOTAuODY4IDExMi45OCw5MC4wMDEgQzExOC4yOTEsODYuOTM1IDEyMi42MTEsNzkuNDk2IDEyMi42MTEsNzMuNDAzIEMxMjIuNjExLDcxLjQ5NCAxMjIuMTc3LDY5Ljg4IDEyMS4zNTYsNjguNzE4IEMxMjAuNTgyLDY4LjE4NSAxMTkuNjY4LDY3LjkxOSAxMTguNjM4LDY3LjkxOSBDMTE3LjMxNSw2Ny45MTkgMTE1Ljg4Myw2OC4zNiAxMTQuMzgyLDY5LjIyNyBDMTA5LjA3MSw3Mi4yOTMgMTA0Ljc1MSw3OS43MzMgMTA0Ljc1MSw4NS44MjYgQzEwNC43NTEsODcuNzM1IDEwNS4xODUsODkuMzQzIDEwNi4wMDYsOTAuNTA1IEwxMDYuMDA2LDkwLjUwNSBaIiBpZD0iRmlsbC0yMSIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDkuMzE4LDcuMjYyIEwxMzkuMzM0LDE2LjE0IEwxNTUuMjI3LDI3LjE3MSBMMTYwLjgxNiwyMS4wNTkgTDE0OS4zMTgsNy4yNjIiIGlkPSJGaWxsLTIyIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS42NzYsMTMuODQgTDE1OS45MjgsMTkuNDY3IEMxNTYuMjg2LDIxLjU3IDE1MC40LDIxLjU4IDE0Ni43ODEsMTkuNDkxIEMxNDMuMTYxLDE3LjQwMiAxNDMuMTgsMTQuMDAzIDE0Ni44MjIsMTEuOSBMMTU2LjMxNyw2LjI5MiBMMTQ5LjU4OCwyLjQwNyBMNjcuNzUyLDQ5LjQ3OCBMMTEzLjY3NSw3NS45OTIgTDExNi43NTYsNzQuMjEzIEMxMTcuMzg3LDczLjg0OCAxMTcuNjI1LDczLjMxNSAxMTcuMzc0LDcyLjgyMyBDMTE1LjAxNyw2OC4xOTEgMTE0Ljc4MSw2My4yNzcgMTE2LjY5MSw1OC41NjEgQzEyMi4zMjksNDQuNjQxIDE0MS4yLDMzLjc0NiAxNjUuMzA5LDMwLjQ5MSBDMTczLjQ3OCwyOS4zODggMTgxLjk4OSwyOS41MjQgMTkwLjAxMywzMC44ODUgQzE5MC44NjUsMzEuMDMgMTkxLjc4OSwzMC44OTMgMTkyLjQyLDMwLjUyOCBMMTk1LjUwMSwyOC43NSBMMTY5LjY3NiwxMy44NCIgaWQ9IkZpbGwtMjMiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3Ni40NTkgQzExMy41OTQsNzYuNDU5IDExMy41MTQsNzYuNDM4IDExMy40NDIsNzYuMzk3IEw2Ny41MTgsNDkuODgyIEM2Ny4zNzQsNDkuNzk5IDY3LjI4NCw0OS42NDUgNjcuMjg1LDQ5LjQ3OCBDNjcuMjg1LDQ5LjMxMSA2Ny4zNzQsNDkuMTU3IDY3LjUxOSw0OS4wNzMgTDE0OS4zNTUsMi4wMDIgQzE0OS40OTksMS45MTkgMTQ5LjY3NywxLjkxOSAxNDkuODIxLDIuMDAyIEwxNTYuNTUsNS44ODcgQzE1Ni43NzQsNi4wMTcgMTU2Ljg1LDYuMzAyIDE1Ni43MjIsNi41MjYgQzE1Ni41OTIsNi43NDkgMTU2LjMwNyw2LjgyNiAxNTYuMDgzLDYuNjk2IEwxNDkuNTg3LDIuOTQ2IEw2OC42ODcsNDkuNDc5IEwxMTMuNjc1LDc1LjQ1MiBMMTE2LjUyMyw3My44MDggQzExNi43MTUsNzMuNjk3IDExNy4xNDMsNzMuMzk5IDExNi45NTgsNzMuMDM1IEMxMTQuNTQyLDY4LjI4NyAxMTQuMyw2My4yMjEgMTE2LjI1OCw1OC4zODUgQzExOS4wNjQsNTEuNDU4IDEyNS4xNDMsNDUuMTQzIDEzMy44NCw0MC4xMjIgQzE0Mi40OTcsMzUuMTI0IDE1My4zNTgsMzEuNjMzIDE2NS4yNDcsMzAuMDI4IEMxNzMuNDQ1LDI4LjkyMSAxODIuMDM3LDI5LjA1OCAxOTAuMDkxLDMwLjQyNSBDMTkwLjgzLDMwLjU1IDE5MS42NTIsMzAuNDMyIDE5Mi4xODYsMzAuMTI0IEwxOTQuNTY3LDI4Ljc1IEwxNjkuNDQyLDE0LjI0NCBDMTY5LjIxOSwxNC4xMTUgMTY5LjE0MiwxMy44MjkgMTY5LjI3MSwxMy42MDYgQzE2OS40LDEzLjM4MiAxNjkuNjg1LDEzLjMwNiAxNjkuOTA5LDEzLjQzNSBMMTk1LjczNCwyOC4zNDUgQzE5NS44NzksMjguNDI4IDE5NS45NjgsMjguNTgzIDE5NS45NjgsMjguNzUgQzE5NS45NjgsMjguOTE2IDE5NS44NzksMjkuMDcxIDE5NS43MzQsMjkuMTU0IEwxOTIuNjUzLDMwLjkzMyBDMTkxLjkzMiwzMS4zNSAxOTAuODksMzEuNTA4IDE4OS45MzUsMzEuMzQ2IEMxODEuOTcyLDI5Ljk5NSAxNzMuNDc4LDI5Ljg2IDE2NS4zNzIsMzAuOTU0IEMxNTMuNjAyLDMyLjU0MyAxNDIuODYsMzUuOTkzIDEzNC4zMDcsNDAuOTMxIEMxMjUuNzkzLDQ1Ljg0NyAxMTkuODUxLDUyLjAwNCAxMTcuMTI0LDU4LjczNiBDMTE1LjI3LDYzLjMxNCAxMTUuNTAxLDY4LjExMiAxMTcuNzksNzIuNjExIEMxMTguMTYsNzMuMzM2IDExNy44NDUsNzQuMTI0IDExNi45OSw3NC42MTcgTDExMy45MDksNzYuMzk3IEMxMTMuODM2LDc2LjQzOCAxMTMuNzU2LDc2LjQ1OSAxMTMuNjc1LDc2LjQ1OSIgaWQ9IkZpbGwtMjQiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUzLjMxNiwyMS4yNzkgQzE1MC45MDMsMjEuMjc5IDE0OC40OTUsMjAuNzUxIDE0Ni42NjQsMTkuNjkzIEMxNDQuODQ2LDE4LjY0NCAxNDMuODQ0LDE3LjIzMiAxNDMuODQ0LDE1LjcxOCBDMTQzLjg0NCwxNC4xOTEgMTQ0Ljg2LDEyLjc2MyAxNDYuNzA1LDExLjY5OCBMMTU2LjE5OCw2LjA5MSBDMTU2LjMwOSw2LjAyNSAxNTYuNDUyLDYuMDYyIDE1Ni41MTgsNi4xNzMgQzE1Ni41ODMsNi4yODQgMTU2LjU0Nyw2LjQyNyAxNTYuNDM2LDYuNDkzIEwxNDYuOTQsMTIuMTAyIEMxNDUuMjQ0LDEzLjA4MSAxNDQuMzEyLDE0LjM2NSAxNDQuMzEyLDE1LjcxOCBDMTQ0LjMxMiwxNy4wNTggMTQ1LjIzLDE4LjMyNiAxNDYuODk3LDE5LjI4OSBDMTUwLjQ0NiwyMS4zMzggMTU2LjI0LDIxLjMyNyAxNTkuODExLDE5LjI2NSBMMTY5LjU1OSwxMy42MzcgQzE2OS42NywxMy41NzMgMTY5LjgxMywxMy42MTEgMTY5Ljg3OCwxMy43MjMgQzE2OS45NDMsMTMuODM0IDE2OS45MDQsMTMuOTc3IDE2OS43OTMsMTQuMDQyIEwxNjAuMDQ1LDE5LjY3IEMxNTguMTg3LDIwLjc0MiAxNTUuNzQ5LDIxLjI3OSAxNTMuMzE2LDIxLjI3OSIgaWQ9IkZpbGwtMjUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3NS45OTIgTDY3Ljc2Miw0OS40ODQiIGlkPSJGaWxsLTI2IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMy42NzUsNzYuMzQyIEMxMTMuNjE1LDc2LjM0MiAxMTMuNTU1LDc2LjMyNyAxMTMuNSw3Ni4yOTUgTDY3LjU4Nyw0OS43ODcgQzY3LjQxOSw0OS42OSA2Ny4zNjIsNDkuNDc2IDY3LjQ1OSw0OS4zMDkgQzY3LjU1Niw0OS4xNDEgNjcuNzcsNDkuMDgzIDY3LjkzNyw0OS4xOCBMMTEzLjg1LDc1LjY4OCBDMTE0LjAxOCw3NS43ODUgMTE0LjA3NSw3NiAxMTMuOTc4LDc2LjE2NyBDMTEzLjkxNCw3Ni4yNzkgMTEzLjc5Niw3Ni4zNDIgMTEzLjY3NSw3Ni4zNDIiIGlkPSJGaWxsLTI3IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY3Ljc2Miw0OS40ODQgTDY3Ljc2MiwxMDMuNDg1IEM2Ny43NjIsMTA0LjU3NSA2OC41MzIsMTA1LjkwMyA2OS40ODIsMTA2LjQ1MiBMMTExLjk1NSwxMzAuOTczIEMxMTIuOTA1LDEzMS41MjIgMTEzLjY3NSwxMzEuMDgzIDExMy42NzUsMTI5Ljk5MyBMMTEzLjY3NSw3NS45OTIiIGlkPSJGaWxsLTI4IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMi43MjcsMTMxLjU2MSBDMTEyLjQzLDEzMS41NjEgMTEyLjEwNywxMzEuNDY2IDExMS43OCwxMzEuMjc2IEw2OS4zMDcsMTA2Ljc1NSBDNjguMjQ0LDEwNi4xNDIgNjcuNDEyLDEwNC43MDUgNjcuNDEyLDEwMy40ODUgTDY3LjQxMiw0OS40ODQgQzY3LjQxMiw0OS4yOSA2Ny41NjksNDkuMTM0IDY3Ljc2Miw0OS4xMzQgQzY3Ljk1Niw0OS4xMzQgNjguMTEzLDQ5LjI5IDY4LjExMyw0OS40ODQgTDY4LjExMywxMDMuNDg1IEM2OC4xMTMsMTA0LjQ0NSA2OC44MiwxMDUuNjY1IDY5LjY1NywxMDYuMTQ4IEwxMTIuMTMsMTMwLjY3IEMxMTIuNDc0LDEzMC44NjggMTEyLjc5MSwxMzAuOTEzIDExMywxMzAuNzkyIEMxMTMuMjA2LDEzMC42NzMgMTEzLjMyNSwxMzAuMzgxIDExMy4zMjUsMTI5Ljk5MyBMMTEzLjMyNSw3NS45OTIgQzExMy4zMjUsNzUuNzk4IDExMy40ODIsNzUuNjQxIDExMy42NzUsNzUuNjQxIEMxMTMuODY5LDc1LjY0MSAxMTQuMDI1LDc1Ljc5OCAxMTQuMDI1LDc1Ljk5MiBMMTE0LjAyNSwxMjkuOTkzIEMxMTQuMDI1LDEzMC42NDggMTEzLjc4NiwxMzEuMTQ3IDExMy4zNSwxMzEuMzk5IEMxMTMuMTYyLDEzMS41MDcgMTEyLjk1MiwxMzEuNTYxIDExMi43MjcsMTMxLjU2MSIgaWQ9IkZpbGwtMjkiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEyLjg2LDQwLjUxMiBDMTEyLjg2LDQwLjUxMiAxMTIuODYsNDAuNTEyIDExMi44NTksNDAuNTEyIEMxMTAuNTQxLDQwLjUxMiAxMDguMzYsMzkuOTkgMTA2LjcxNywzOS4wNDEgQzEwNS4wMTIsMzguMDU3IDEwNC4wNzQsMzYuNzI2IDEwNC4wNzQsMzUuMjkyIEMxMDQuMDc0LDMzLjg0NyAxMDUuMDI2LDMyLjUwMSAxMDYuNzU0LDMxLjUwNCBMMTE4Ljc5NSwyNC41NTEgQzEyMC40NjMsMjMuNTg5IDEyMi42NjksMjMuMDU4IDEyNS4wMDcsMjMuMDU4IEMxMjcuMzI1LDIzLjA1OCAxMjkuNTA2LDIzLjU4MSAxMzEuMTUsMjQuNTMgQzEzMi44NTQsMjUuNTE0IDEzMy43OTMsMjYuODQ1IDEzMy43OTMsMjguMjc4IEMxMzMuNzkzLDI5LjcyNCAxMzIuODQxLDMxLjA2OSAxMzEuMTEzLDMyLjA2NyBMMTE5LjA3MSwzOS4wMTkgQzExNy40MDMsMzkuOTgyIDExNS4xOTcsNDAuNTEyIDExMi44Niw0MC41MTIgTDExMi44Niw0MC41MTIgWiBNMTI1LjAwNywyMy43NTkgQzEyMi43OSwyMy43NTkgMTIwLjcwOSwyNC4yNTYgMTE5LjE0NiwyNS4xNTggTDEwNy4xMDQsMzIuMTEgQzEwNS42MDIsMzIuOTc4IDEwNC43NzQsMzQuMTA4IDEwNC43NzQsMzUuMjkyIEMxMDQuNzc0LDM2LjQ2NSAxMDUuNTg5LDM3LjU4MSAxMDcuMDY3LDM4LjQzNCBDMTA4LjYwNSwzOS4zMjMgMTEwLjY2MywzOS44MTIgMTEyLjg1OSwzOS44MTIgTDExMi44NiwzOS44MTIgQzExNS4wNzYsMzkuODEyIDExNy4xNTgsMzkuMzE1IDExOC43MjEsMzguNDEzIEwxMzAuNzYyLDMxLjQ2IEMxMzIuMjY0LDMwLjU5MyAxMzMuMDkyLDI5LjQ2MyAxMzMuMDkyLDI4LjI3OCBDMTMzLjA5MiwyNy4xMDYgMTMyLjI3OCwyNS45OSAxMzAuOCwyNS4xMzYgQzEyOS4yNjEsMjQuMjQ4IDEyNy4yMDQsMjMuNzU5IDEyNS4wMDcsMjMuNzU5IEwxMjUuMDA3LDIzLjc1OSBaIiBpZD0iRmlsbC0zMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNjUuNjMsMTYuMjE5IEwxNTkuODk2LDE5LjUzIEMxNTYuNzI5LDIxLjM1OCAxNTEuNjEsMjEuMzY3IDE0OC40NjMsMTkuNTUgQzE0NS4zMTYsMTcuNzMzIDE0NS4zMzIsMTQuNzc4IDE0OC40OTksMTIuOTQ5IEwxNTQuMjMzLDkuNjM5IEwxNjUuNjMsMTYuMjE5IiBpZD0iRmlsbC0zMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNTQuMjMzLDEwLjQ0OCBMMTY0LjIyOCwxNi4yMTkgTDE1OS41NDYsMTguOTIzIEMxNTguMTEyLDE5Ljc1IDE1Ni4xOTQsMjAuMjA2IDE1NC4xNDcsMjAuMjA2IEMxNTIuMTE4LDIwLjIwNiAxNTAuMjI0LDE5Ljc1NyAxNDguODE0LDE4Ljk0MyBDMTQ3LjUyNCwxOC4xOTkgMTQ2LjgxNCwxNy4yNDkgMTQ2LjgxNCwxNi4yNjkgQzE0Ni44MTQsMTUuMjc4IDE0Ny41MzcsMTQuMzE0IDE0OC44NSwxMy41NTYgTDE1NC4yMzMsMTAuNDQ4IE0xNTQuMjMzLDkuNjM5IEwxNDguNDk5LDEyLjk0OSBDMTQ1LjMzMiwxNC43NzggMTQ1LjMxNiwxNy43MzMgMTQ4LjQ2MywxOS41NSBDMTUwLjAzMSwyMC40NTUgMTUyLjA4NiwyMC45MDcgMTU0LjE0NywyMC45MDcgQzE1Ni4yMjQsMjAuOTA3IDE1OC4zMDYsMjAuNDQ3IDE1OS44OTYsMTkuNTMgTDE2NS42MywxNi4yMTkgTDE1NC4yMzMsOS42MzkiIGlkPSJGaWxsLTMyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NS40NDUsNzIuNjY3IEwxNDUuNDQ1LDcyLjY2NyBDMTQzLjY3Miw3Mi42NjcgMTQyLjIwNCw3MS44MTcgMTQxLjIwMiw3MC40MjIgQzE0MS4xMzUsNzAuMzMgMTQxLjE0NSw3MC4xNDcgMTQxLjIyNSw3MC4wNjYgQzE0MS4zMDUsNjkuOTg1IDE0MS40MzIsNjkuOTQ2IDE0MS41MjUsNzAuMDExIEMxNDIuMzA2LDcwLjU1OSAxNDMuMjMxLDcwLjgyMyAxNDQuMjc2LDcwLjgyMiBDMTQ1LjU5OCw3MC44MjIgMTQ3LjAzLDcwLjM3NiAxNDguNTMyLDY5LjUwOSBDMTUzLjg0Miw2Ni40NDMgMTU4LjE2Myw1OC45ODcgMTU4LjE2Myw1Mi44OTQgQzE1OC4xNjMsNTAuOTY3IDE1Ny43MjEsNDkuMzMyIDE1Ni44ODQsNDguMTY4IEMxNTYuODE4LDQ4LjA3NiAxNTYuODI4LDQ3Ljk0OCAxNTYuOTA4LDQ3Ljg2NyBDMTU2Ljk4OCw0Ny43ODYgMTU3LjExNCw0Ny43NzQgMTU3LjIwOCw0Ny44NCBDMTU4Ljg3OCw0OS4wMTIgMTU5Ljc5OCw1MS4yMiAxNTkuNzk4LDU0LjA1OSBDMTU5Ljc5OCw2MC4zMDEgMTU1LjM3Myw2OC4wNDYgMTQ5LjkzMyw3MS4xODYgQzE0OC4zNiw3Mi4wOTQgMTQ2Ljg1LDcyLjY2NyAxNDUuNDQ1LDcyLjY2NyBMMTQ1LjQ0NSw3Mi42NjcgWiBNMTQyLjQ3Niw3MSBDMTQzLjI5LDcxLjY1MSAxNDQuMjk2LDcyLjAwMiAxNDUuNDQ1LDcyLjAwMiBDMTQ2Ljc2Nyw3Mi4wMDIgMTQ4LjE5OCw3MS41NSAxNDkuNyw3MC42ODIgQzE1NS4wMSw2Ny42MTcgMTU5LjMzMSw2MC4xNTkgMTU5LjMzMSw1NC4wNjUgQzE1OS4zMzEsNTIuMDg1IDE1OC44NjgsNTAuNDM1IDE1OC4wMDYsNDkuMjcyIEMxNTguNDE3LDUwLjMwNyAxNTguNjMsNTEuNTMyIDE1OC42Myw1Mi44OTIgQzE1OC42Myw1OS4xMzQgMTU0LjIwNSw2Ni43NjcgMTQ4Ljc2NSw2OS45MDcgQzE0Ny4xOTIsNzAuODE2IDE0NS42ODEsNzEuMjgzIDE0NC4yNzYsNzEuMjgzIEMxNDMuNjM0LDcxLjI4MyAxNDMuMDMzLDcxLjE5MiAxNDIuNDc2LDcxIEwxNDIuNDc2LDcxIFoiIGlkPSJGaWxsLTMzIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0OC42NDgsNjkuNzA0IEMxNTQuMDMyLDY2LjU5NiAxNTguMzk2LDU5LjA2OCAxNTguMzk2LDUyLjg5MSBDMTU4LjM5Niw1MC44MzkgMTU3LjkxMyw0OS4xOTggMTU3LjA3NCw0OC4wMyBDMTU1LjI4OSw0Ni43NzggMTUyLjY5OSw0Ni44MzYgMTQ5LjgxNiw0OC41MDEgQzE0NC40MzMsNTEuNjA5IDE0MC4wNjgsNTkuMTM3IDE0MC4wNjgsNjUuMzE0IEMxNDAuMDY4LDY3LjM2NSAxNDAuNTUyLDY5LjAwNiAxNDEuMzkxLDcwLjE3NCBDMTQzLjE3Niw3MS40MjcgMTQ1Ljc2NSw3MS4zNjkgMTQ4LjY0OCw2OS43MDQiIGlkPSJGaWxsLTM0IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NC4yNzYsNzEuMjc2IEwxNDQuMjc2LDcxLjI3NiBDMTQzLjEzMyw3MS4yNzYgMTQyLjExOCw3MC45NjkgMTQxLjI1Nyw3MC4zNjUgQzE0MS4yMzYsNzAuMzUxIDE0MS4yMTcsNzAuMzMyIDE0MS4yMDIsNzAuMzExIEMxNDAuMzA3LDY5LjA2NyAxMzkuODM1LDY3LjMzOSAxMzkuODM1LDY1LjMxNCBDMTM5LjgzNSw1OS4wNzMgMTQ0LjI2LDUxLjQzOSAxNDkuNyw0OC4yOTggQzE1MS4yNzMsNDcuMzkgMTUyLjc4NCw0Ni45MjkgMTU0LjE4OSw0Ni45MjkgQzE1NS4zMzIsNDYuOTI5IDE1Ni4zNDcsNDcuMjM2IDE1Ny4yMDgsNDcuODM5IEMxNTcuMjI5LDQ3Ljg1NCAxNTcuMjQ4LDQ3Ljg3MyAxNTcuMjYzLDQ3Ljg5NCBDMTU4LjE1Nyw0OS4xMzggMTU4LjYzLDUwLjg2NSAxNTguNjMsNTIuODkxIEMxNTguNjMsNTkuMTMyIDE1NC4yMDUsNjYuNzY2IDE0OC43NjUsNjkuOTA3IEMxNDcuMTkyLDcwLjgxNSAxNDUuNjgxLDcxLjI3NiAxNDQuMjc2LDcxLjI3NiBMMTQ0LjI3Niw3MS4yNzYgWiBNMTQxLjU1OCw3MC4xMDQgQzE0Mi4zMzEsNzAuNjM3IDE0My4yNDUsNzEuMDA1IDE0NC4yNzYsNzEuMDA1IEMxNDUuNTk4LDcxLjAwNSAxNDcuMDMsNzAuNDY3IDE0OC41MzIsNjkuNiBDMTUzLjg0Miw2Ni41MzQgMTU4LjE2Myw1OS4wMzMgMTU4LjE2Myw1Mi45MzkgQzE1OC4xNjMsNTEuMDMxIDE1Ny43MjksNDkuMzg1IDE1Ni45MDcsNDguMjIzIEMxNTYuMTMzLDQ3LjY5MSAxNTUuMjE5LDQ3LjQwOSAxNTQuMTg5LDQ3LjQwOSBDMTUyLjg2Nyw0Ny40MDkgMTUxLjQzNSw0Ny44NDIgMTQ5LjkzMyw0OC43MDkgQzE0NC42MjMsNTEuNzc1IDE0MC4zMDIsNTkuMjczIDE0MC4zMDIsNjUuMzY2IEMxNDAuMzAyLDY3LjI3NiAxNDAuNzM2LDY4Ljk0MiAxNDEuNTU4LDcwLjEwNCBMMTQxLjU1OCw3MC4xMDQgWiIgaWQ9IkZpbGwtMzUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUwLjcyLDY1LjM2MSBMMTUwLjM1Nyw2NS4wNjYgQzE1MS4xNDcsNjQuMDkyIDE1MS44NjksNjMuMDQgMTUyLjUwNSw2MS45MzggQzE1My4zMTMsNjAuNTM5IDE1My45NzgsNTkuMDY3IDE1NC40ODIsNTcuNTYzIEwxNTQuOTI1LDU3LjcxMiBDMTU0LjQxMiw1OS4yNDUgMTUzLjczMyw2MC43NDUgMTUyLjkxLDYyLjE3MiBDMTUyLjI2Miw2My4yOTUgMTUxLjUyNSw2NC4zNjggMTUwLjcyLDY1LjM2MSIgaWQ9IkZpbGwtMzYiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE1LjkxNyw4NC41MTQgTDExNS41NTQsODQuMjIgQzExNi4zNDQsODMuMjQ1IDExNy4wNjYsODIuMTk0IDExNy43MDIsODEuMDkyIEMxMTguNTEsNzkuNjkyIDExOS4xNzUsNzguMjIgMTE5LjY3OCw3Ni43MTcgTDEyMC4xMjEsNzYuODY1IEMxMTkuNjA4LDc4LjM5OCAxMTguOTMsNzkuODk5IDExOC4xMDYsODEuMzI2IEMxMTcuNDU4LDgyLjQ0OCAxMTYuNzIyLDgzLjUyMSAxMTUuOTE3LDg0LjUxNCIgaWQ9IkZpbGwtMzciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE0LDEzMC40NzYgTDExNCwxMzAuMDA4IEwxMTQsNzYuMDUyIEwxMTQsNzUuNTg0IEwxMTQsNzYuMDUyIEwxMTQsMTMwLjAwOCBMMTE0LDEzMC40NzYiIGlkPSJGaWxsLTM4IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYyLjAwMDAwMCwgMC4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTkuODIyLDM3LjQ3NCBDMTkuODM5LDM3LjMzOSAxOS43NDcsMzcuMTk0IDE5LjU1NSwzNy4wODIgQzE5LjIyOCwzNi44OTQgMTguNzI5LDM2Ljg3MiAxOC40NDYsMzcuMDM3IEwxMi40MzQsNDAuNTA4IEMxMi4zMDMsNDAuNTg0IDEyLjI0LDQwLjY4NiAxMi4yNDMsNDAuNzkzIEMxMi4yNDUsNDAuOTI1IDEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQxLjM3MSBMMTIuMjQ1LDQxLjQxNCBMMTIuMjM4LDQxLjU0MiBDOC4xNDgsNDMuODg3IDUuNjQ3LDQ1LjMyMSA1LjY0Nyw0NS4zMjEgQzUuNjQ2LDQ1LjMyMSAzLjU3LDQ2LjM2NyAyLjg2LDUwLjUxMyBDMi44Niw1MC41MTMgMS45NDgsNTcuNDc0IDEuOTYyLDcwLjI1OCBDMS45NzcsODIuODI4IDIuNTY4LDg3LjMyOCAzLjEyOSw5MS42MDkgQzMuMzQ5LDkzLjI5MyA2LjEzLDkzLjczNCA2LjEzLDkzLjczNCBDNi40NjEsOTMuNzc0IDYuODI4LDkzLjcwNyA3LjIxLDkzLjQ4NiBMODIuNDgzLDQ5LjkzNSBDODQuMjkxLDQ4Ljg2NiA4NS4xNSw0Ni4yMTYgODUuNTM5LDQzLjY1MSBDODYuNzUyLDM1LjY2MSA4Ny4yMTQsMTAuNjczIDg1LjI2NCwzLjc3MyBDODUuMDY4LDMuMDggODQuNzU0LDIuNjkgODQuMzk2LDIuNDkxIEw4Mi4zMSwxLjcwMSBDODEuNTgzLDEuNzI5IDgwLjg5NCwyLjE2OCA4MC43NzYsMi4yMzYgQzgwLjYzNiwyLjMxNyA0MS44MDcsMjQuNTg1IDIwLjAzMiwzNy4wNzIgTDE5LjgyMiwzNy40NzQiIGlkPSJGaWxsLTEiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNODIuMzExLDEuNzAxIEw4NC4zOTYsMi40OTEgQzg0Ljc1NCwyLjY5IDg1LjA2OCwzLjA4IDg1LjI2NCwzLjc3MyBDODcuMjEzLDEwLjY3MyA4Ni43NTEsMzUuNjYgODUuNTM5LDQzLjY1MSBDODUuMTQ5LDQ2LjIxNiA4NC4yOSw0OC44NjYgODIuNDgzLDQ5LjkzNSBMNy4yMSw5My40ODYgQzYuODk3LDkzLjY2NyA2LjU5NSw5My43NDQgNi4zMTQsOTMuNzQ0IEw2LjEzMSw5My43MzMgQzYuMTMxLDkzLjczNCAzLjM0OSw5My4yOTMgMy4xMjgsOTEuNjA5IEMyLjU2OCw4Ny4zMjcgMS45NzcsODIuODI4IDEuOTYzLDcwLjI1OCBDMS45NDgsNTcuNDc0IDIuODYsNTAuNTEzIDIuODYsNTAuNTEzIEMzLjU3LDQ2LjM2NyA1LjY0Nyw0NS4zMjEgNS42NDcsNDUuMzIxIEM1LjY0Nyw0NS4zMjEgOC4xNDgsNDMuODg3IDEyLjIzOCw0MS41NDIgTDEyLjI0NSw0MS40MTQgTDEyLjI0NSw0MS4zNzEgQzEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQwLjkyNSAxMi4yNDMsNDAuNzkzIEMxMi4yNCw0MC42ODYgMTIuMzAyLDQwLjU4MyAxMi40MzQsNDAuNTA4IEwxOC40NDYsMzcuMDM2IEMxOC41NzQsMzYuOTYyIDE4Ljc0NiwzNi45MjYgMTguOTI3LDM2LjkyNiBDMTkuMTQ1LDM2LjkyNiAxOS4zNzYsMzYuOTc5IDE5LjU1NCwzNy4wODIgQzE5Ljc0NywzNy4xOTQgMTkuODM5LDM3LjM0IDE5LjgyMiwzNy40NzQgTDIwLjAzMywzNy4wNzIgQzQxLjgwNiwyNC41ODUgODAuNjM2LDIuMzE4IDgwLjc3NywyLjIzNiBDODAuODk0LDIuMTY4IDgxLjU4MywxLjcyOSA4Mi4zMTEsMS43MDEgTTgyLjMxMSwwLjcwNCBMODIuMjcyLDAuNzA1IEM4MS42NTQsMC43MjggODAuOTg5LDAuOTQ5IDgwLjI5OCwxLjM2MSBMODAuMjc3LDEuMzczIEM4MC4xMjksMS40NTggNTkuNzY4LDEzLjEzNSAxOS43NTgsMzYuMDc5IEMxOS41LDM1Ljk4MSAxOS4yMTQsMzUuOTI5IDE4LjkyNywzNS45MjkgQzE4LjU2MiwzNS45MjkgMTguMjIzLDM2LjAxMyAxNy45NDcsMzYuMTczIEwxMS45MzUsMzkuNjQ0IEMxMS40OTMsMzkuODk5IDExLjIzNiw0MC4zMzQgMTEuMjQ2LDQwLjgxIEwxMS4yNDcsNDAuOTYgTDUuMTY3LDQ0LjQ0NyBDNC43OTQsNDQuNjQ2IDIuNjI1LDQ1Ljk3OCAxLjg3Nyw1MC4zNDUgTDEuODcxLDUwLjM4NCBDMS44NjIsNTAuNDU0IDAuOTUxLDU3LjU1NyAwLjk2NSw3MC4yNTkgQzAuOTc5LDgyLjg3OSAxLjU2OCw4Ny4zNzUgMi4xMzcsOTEuNzI0IEwyLjEzOSw5MS43MzkgQzIuNDQ3LDk0LjA5NCA1LjYxNCw5NC42NjIgNS45NzUsOTQuNzE5IEw2LjAwOSw5NC43MjMgQzYuMTEsOTQuNzM2IDYuMjEzLDk0Ljc0MiA2LjMxNCw5NC43NDIgQzYuNzksOTQuNzQyIDcuMjYsOTQuNjEgNy43MSw5NC4zNSBMODIuOTgzLDUwLjc5OCBDODQuNzk0LDQ5LjcyNyA4NS45ODIsNDcuMzc1IDg2LjUyNSw0My44MDEgQzg3LjcxMSwzNS45ODcgODguMjU5LDEwLjcwNSA4Ni4yMjQsMy41MDIgQzg1Ljk3MSwyLjYwOSA4NS41MiwxLjk3NSA4NC44ODEsMS42MiBMODQuNzQ5LDEuNTU4IEw4Mi42NjQsMC43NjkgQzgyLjU1MSwwLjcyNSA4Mi40MzEsMC43MDQgODIuMzExLDAuNzA0IiBpZD0iRmlsbC0yIiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY2LjI2NywxMS41NjUgTDY3Ljc2MiwxMS45OTkgTDExLjQyMyw0NC4zMjUiIGlkPSJGaWxsLTMiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMjAyLDkwLjU0NSBDMTIuMDI5LDkwLjU0NSAxMS44NjIsOTAuNDU1IDExLjc2OSw5MC4yOTUgQzExLjYzMiw5MC4wNTcgMTEuNzEzLDg5Ljc1MiAxMS45NTIsODkuNjE0IEwzMC4zODksNzguOTY5IEMzMC42MjgsNzguODMxIDMwLjkzMyw3OC45MTMgMzEuMDcxLDc5LjE1MiBDMzEuMjA4LDc5LjM5IDMxLjEyNyw3OS42OTYgMzAuODg4LDc5LjgzMyBMMTIuNDUxLDkwLjQ3OCBMMTIuMjAyLDkwLjU0NSIgaWQ9IkZpbGwtNCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMy43NjQsNDIuNjU0IEwxMy42NTYsNDIuNTkyIEwxMy43MDIsNDIuNDIxIEwxOC44MzcsMzkuNDU3IEwxOS4wMDcsMzkuNTAyIEwxOC45NjIsMzkuNjczIEwxMy44MjcsNDIuNjM3IEwxMy43NjQsNDIuNjU0IiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTguNTIsOTAuMzc1IEw4LjUyLDQ2LjQyMSBMOC41ODMsNDYuMzg1IEw3NS44NCw3LjU1NCBMNzUuODQsNTEuNTA4IEw3NS43NzgsNTEuNTQ0IEw4LjUyLDkwLjM3NSBMOC41Miw5MC4zNzUgWiBNOC43Nyw0Ni41NjQgTDguNzcsODkuOTQ0IEw3NS41OTEsNTEuMzY1IEw3NS41OTEsNy45ODUgTDguNzcsNDYuNTY0IEw4Ljc3LDQ2LjU2NCBaIiBpZD0iRmlsbC02IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTI0Ljk4Niw4My4xODIgQzI0Ljc1Niw4My4zMzEgMjQuMzc0LDgzLjU2NiAyNC4xMzcsODMuNzA1IEwxMi42MzIsOTAuNDA2IEMxMi4zOTUsOTAuNTQ1IDEyLjQyNiw5MC42NTggMTIuNyw5MC42NTggTDEzLjI2NSw5MC42NTggQzEzLjU0LDkwLjY1OCAxMy45NTgsOTAuNTQ1IDE0LjE5NSw5MC40MDYgTDI1LjcsODMuNzA1IEMyNS45MzcsODMuNTY2IDI2LjEyOCw4My40NTIgMjYuMTI1LDgzLjQ0OSBDMjYuMTIyLDgzLjQ0NyAyNi4xMTksODMuMjIgMjYuMTE5LDgyLjk0NiBDMjYuMTE5LDgyLjY3MiAyNS45MzEsODIuNTY5IDI1LjcwMSw4Mi43MTkgTDI0Ljk4Niw4My4xODIiIGlkPSJGaWxsLTciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTMuMjY2LDkwLjc4MiBMMTIuNyw5MC43ODIgQzEyLjUsOTAuNzgyIDEyLjM4NCw5MC43MjYgMTIuMzU0LDkwLjYxNiBDMTIuMzI0LDkwLjUwNiAxMi4zOTcsOTAuMzk5IDEyLjU2OSw5MC4yOTkgTDI0LjA3NCw4My41OTcgQzI0LjMxLDgzLjQ1OSAyNC42ODksODMuMjI2IDI0LjkxOCw4My4wNzggTDI1LjYzMyw4Mi42MTQgQzI1LjcyMyw4Mi41NTUgMjUuODEzLDgyLjUyNSAyNS44OTksODIuNTI1IEMyNi4wNzEsODIuNTI1IDI2LjI0NCw4Mi42NTUgMjYuMjQ0LDgyLjk0NiBDMjYuMjQ0LDgzLjE2IDI2LjI0NSw4My4zMDkgMjYuMjQ3LDgzLjM4MyBMMjYuMjUzLDgzLjM4NyBMMjYuMjQ5LDgzLjQ1NiBDMjYuMjQ2LDgzLjUzMSAyNi4yNDYsODMuNTMxIDI1Ljc2Myw4My44MTIgTDE0LjI1OCw5MC41MTQgQzE0LDkwLjY2NSAxMy41NjQsOTAuNzgyIDEzLjI2Niw5MC43ODIgTDEzLjI2Niw5MC43ODIgWiBNMTIuNjY2LDkwLjUzMiBMMTIuNyw5MC41MzMgTDEzLjI2Niw5MC41MzMgQzEzLjUxOCw5MC41MzMgMTMuOTE1LDkwLjQyNSAxNC4xMzIsOTAuMjk5IEwyNS42MzcsODMuNTk3IEMyNS44MDUsODMuNDk5IDI1LjkzMSw4My40MjQgMjUuOTk4LDgzLjM4MyBDMjUuOTk0LDgzLjI5OSAyNS45OTQsODMuMTY1IDI1Ljk5NCw4Mi45NDYgTDI1Ljg5OSw4Mi43NzUgTDI1Ljc2OCw4Mi44MjQgTDI1LjA1NCw4My4yODcgQzI0LjgyMiw4My40MzcgMjQuNDM4LDgzLjY3MyAyNC4yLDgzLjgxMiBMMTIuNjk1LDkwLjUxNCBMMTIuNjY2LDkwLjUzMiBMMTIuNjY2LDkwLjUzMiBaIiBpZD0iRmlsbC04IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEzLjI2Niw4OS44NzEgTDEyLjcsODkuODcxIEMxMi41LDg5Ljg3MSAxMi4zODQsODkuODE1IDEyLjM1NCw4OS43MDUgQzEyLjMyNCw4OS41OTUgMTIuMzk3LDg5LjQ4OCAxMi41NjksODkuMzg4IEwyNC4wNzQsODIuNjg2IEMyNC4zMzIsODIuNTM1IDI0Ljc2OCw4Mi40MTggMjUuMDY3LDgyLjQxOCBMMjUuNjMyLDgyLjQxOCBDMjUuODMyLDgyLjQxOCAyNS45NDgsODIuNDc0IDI1Ljk3OCw4Mi41ODQgQzI2LjAwOCw4Mi42OTQgMjUuOTM1LDgyLjgwMSAyNS43NjMsODIuOTAxIEwxNC4yNTgsODkuNjAzIEMxNCw4OS43NTQgMTMuNTY0LDg5Ljg3MSAxMy4yNjYsODkuODcxIEwxMy4yNjYsODkuODcxIFogTTEyLjY2Niw4OS42MjEgTDEyLjcsODkuNjIyIEwxMy4yNjYsODkuNjIyIEMxMy41MTgsODkuNjIyIDEzLjkxNSw4OS41MTUgMTQuMTMyLDg5LjM4OCBMMjUuNjM3LDgyLjY4NiBMMjUuNjY3LDgyLjY2OCBMMjUuNjMyLDgyLjY2NyBMMjUuMDY3LDgyLjY2NyBDMjQuODE1LDgyLjY2NyAyNC40MTgsODIuNzc1IDI0LjIsODIuOTAxIEwxMi42OTUsODkuNjAzIEwxMi42NjYsODkuNjIxIEwxMi42NjYsODkuNjIxIFoiIGlkPSJGaWxsLTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMzcsOTAuODAxIEwxMi4zNyw4OS41NTQgTDEyLjM3LDkwLjgwMSIgaWQ9IkZpbGwtMTAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNi4xMyw5My45MDEgQzUuMzc5LDkzLjgwOCA0LjgxNiw5My4xNjQgNC42OTEsOTIuNTI1IEMzLjg2LDg4LjI4NyAzLjU0LDgzLjc0MyAzLjUyNiw3MS4xNzMgQzMuNTExLDU4LjM4OSA0LjQyMyw1MS40MjggNC40MjMsNTEuNDI4IEM1LjEzNCw0Ny4yODIgNy4yMSw0Ni4yMzYgNy4yMSw0Ni4yMzYgQzcuMjEsNDYuMjM2IDgxLjY2NywzLjI1IDgyLjA2OSwzLjAxNyBDODIuMjkyLDIuODg4IDg0LjU1NiwxLjQzMyA4NS4yNjQsMy45NCBDODcuMjE0LDEwLjg0IDg2Ljc1MiwzNS44MjcgODUuNTM5LDQzLjgxOCBDODUuMTUsNDYuMzgzIDg0LjI5MSw0OS4wMzMgODIuNDgzLDUwLjEwMSBMNy4yMSw5My42NTMgQzYuODI4LDkzLjg3NCA2LjQ2MSw5My45NDEgNi4xMyw5My45MDEgQzYuMTMsOTMuOTAxIDMuMzQ5LDkzLjQ2IDMuMTI5LDkxLjc3NiBDMi41NjgsODcuNDk1IDEuOTc3LDgyLjk5NSAxLjk2Miw3MC40MjUgQzEuOTQ4LDU3LjY0MSAyLjg2LDUwLjY4IDIuODYsNTAuNjggQzMuNTcsNDYuNTM0IDUuNjQ3LDQ1LjQ4OSA1LjY0Nyw0NS40ODkgQzUuNjQ2LDQ1LjQ4OSA4LjA2NSw0NC4wOTIgMTIuMjQ1LDQxLjY3OSBMMTMuMTE2LDQxLjU2IEwxOS43MTUsMzcuNzMgTDE5Ljc2MSwzNy4yNjkgTDYuMTMsOTMuOTAxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjMxNyw5NC4xNjEgTDYuMTAyLDk0LjE0OCBMNi4xMDEsOTQuMTQ4IEw1Ljg1Nyw5NC4xMDEgQzUuMTM4LDkzLjk0NSAzLjA4NSw5My4zNjUgMi44ODEsOTEuODA5IEMyLjMxMyw4Ny40NjkgMS43MjcsODIuOTk2IDEuNzEzLDcwLjQyNSBDMS42OTksNTcuNzcxIDIuNjA0LDUwLjcxOCAyLjYxMyw1MC42NDggQzMuMzM4LDQ2LjQxNyA1LjQ0NSw0NS4zMSA1LjUzNSw0NS4yNjYgTDEyLjE2Myw0MS40MzkgTDEzLjAzMyw0MS4zMiBMMTkuNDc5LDM3LjU3OCBMMTkuNTEzLDM3LjI0NCBDMTkuNTI2LDM3LjEwNyAxOS42NDcsMzcuMDA4IDE5Ljc4NiwzNy4wMjEgQzE5LjkyMiwzNy4wMzQgMjAuMDIzLDM3LjE1NiAyMC4wMDksMzcuMjkzIEwxOS45NSwzNy44ODIgTDEzLjE5OCw0MS44MDEgTDEyLjMyOCw0MS45MTkgTDUuNzcyLDQ1LjcwNCBDNS43NDEsNDUuNzIgMy43ODIsNDYuNzcyIDMuMTA2LDUwLjcyMiBDMy4wOTksNTAuNzgyIDIuMTk4LDU3LjgwOCAyLjIxMiw3MC40MjQgQzIuMjI2LDgyLjk2MyAyLjgwOSw4Ny40MiAzLjM3Myw5MS43MjkgQzMuNDY0LDkyLjQyIDQuMDYyLDkyLjg4MyA0LjY4Miw5My4xODEgQzQuNTY2LDkyLjk4NCA0LjQ4Niw5Mi43NzYgNC40NDYsOTIuNTcyIEMzLjY2NSw4OC41ODggMy4yOTEsODQuMzcgMy4yNzYsNzEuMTczIEMzLjI2Miw1OC41MiA0LjE2Nyw1MS40NjYgNC4xNzYsNTEuMzk2IEM0LjkwMSw0Ny4xNjUgNy4wMDgsNDYuMDU5IDcuMDk4LDQ2LjAxNCBDNy4wOTQsNDYuMDE1IDgxLjU0MiwzLjAzNCA4MS45NDQsMi44MDIgTDgxLjk3MiwyLjc4NSBDODIuODc2LDIuMjQ3IDgzLjY5MiwyLjA5NyA4NC4zMzIsMi4zNTIgQzg0Ljg4NywyLjU3MyA4NS4yODEsMy4wODUgODUuNTA0LDMuODcyIEM4Ny41MTgsMTEgODYuOTY0LDM2LjA5MSA4NS43ODUsNDMuODU1IEM4NS4yNzgsNDcuMTk2IDg0LjIxLDQ5LjM3IDgyLjYxLDUwLjMxNyBMNy4zMzUsOTMuODY5IEM2Ljk5OSw5NC4wNjMgNi42NTgsOTQuMTYxIDYuMzE3LDk0LjE2MSBMNi4zMTcsOTQuMTYxIFogTTYuMTcsOTMuNjU0IEM2LjQ2Myw5My42OSA2Ljc3NCw5My42MTcgNy4wODUsOTMuNDM3IEw4Mi4zNTgsNDkuODg2IEM4NC4xODEsNDguODA4IDg0Ljk2LDQ1Ljk3MSA4NS4yOTIsNDMuNzggQzg2LjQ2NiwzNi4wNDkgODcuMDIzLDExLjA4NSA4NS4wMjQsNC4wMDggQzg0Ljg0NiwzLjM3NyA4NC41NTEsMi45NzYgODQuMTQ4LDIuODE2IEM4My42NjQsMi42MjMgODIuOTgyLDIuNzY0IDgyLjIyNywzLjIxMyBMODIuMTkzLDMuMjM0IEM4MS43OTEsMy40NjYgNy4zMzUsNDYuNDUyIDcuMzM1LDQ2LjQ1MiBDNy4zMDQsNDYuNDY5IDUuMzQ2LDQ3LjUyMSA0LjY2OSw1MS40NzEgQzQuNjYyLDUxLjUzIDMuNzYxLDU4LjU1NiAzLjc3NSw3MS4xNzMgQzMuNzksODQuMzI4IDQuMTYxLDg4LjUyNCA0LjkzNiw5Mi40NzYgQzUuMDI2LDkyLjkzNyA1LjQxMiw5My40NTkgNS45NzMsOTMuNjE1IEM2LjA4Nyw5My42NCA2LjE1OCw5My42NTIgNi4xNjksOTMuNjU0IEw2LjE3LDkzLjY1NCBMNi4xNyw5My42NTQgWiIgaWQ9IkZpbGwtMTIiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4zMTcsNjguOTgyIEM3LjgwNiw2OC43MDEgOC4yMDIsNjguOTI2IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNi44MjksNzEuMjk0IDYuNDMzLDcxLjA2OSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIiBpZD0iRmlsbC0xMyIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjkyLDcxLjEzMyBDNi42MzEsNzEuMTMzIDYuNDMzLDcwLjkwNSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIEM3LjQ2LDY4LjkgNy41OTUsNjguODYxIDcuNzE0LDY4Ljg2MSBDOC4wMDMsNjguODYxIDguMjAyLDY5LjA5IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNy4xNzQsNzEuMDk0IDcuMDM5LDcxLjEzMyA2LjkyLDcxLjEzMyBNNy43MTQsNjguNjc0IEM3LjU1Nyw2OC42NzQgNy4zOTIsNjguNzIzIDcuMjI0LDY4LjgyMSBDNi42NzYsNjkuMTM4IDYuMjQ2LDY5Ljg3OSA2LjI0Niw3MC41MDggQzYuMjQ2LDcwLjk5NCA2LjUxNyw3MS4zMiA2LjkyLDcxLjMyIEM3LjA3OCw3MS4zMiA3LjI0Myw3MS4yNzEgNy40MTEsNzEuMTc0IEM3Ljk1OSw3MC44NTcgOC4zODksNzAuMTE3IDguMzg5LDY5LjQ4NyBDOC4zODksNjkuMDAxIDguMTE3LDY4LjY3NCA3LjcxNCw2OC42NzQiIGlkPSJGaWxsLTE0IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYuOTIsNzAuOTQ3IEM2LjY0OSw3MC45NDcgNi42MjEsNzAuNjQgNi42MjEsNzAuNTA4IEM2LjYyMSw3MC4wMTcgNi45ODIsNjkuMzkyIDcuNDExLDY5LjE0NSBDNy41MjEsNjkuMDgyIDcuNjI1LDY5LjA0OSA3LjcxNCw2OS4wNDkgQzcuOTg2LDY5LjA0OSA4LjAxNSw2OS4zNTUgOC4wMTUsNjkuNDg3IEM4LjAxNSw2OS45NzggNy42NTIsNzAuNjAzIDcuMjI0LDcwLjg1MSBDNy4xMTUsNzAuOTE0IDcuMDEsNzAuOTQ3IDYuOTIsNzAuOTQ3IE03LjcxNCw2OC44NjEgQzcuNTk1LDY4Ljg2MSA3LjQ2LDY4LjkgNy4zMTcsNjguOTgyIEM2LjgyOSw2OS4yNjUgNi40MzMsNjkuOTQ4IDYuNDMzLDcwLjUwOCBDNi40MzMsNzAuOTA1IDYuNjMxLDcxLjEzMyA2LjkyLDcxLjEzMyBDNy4wMzksNzEuMTMzIDcuMTc0LDcxLjA5NCA3LjMxNyw3MS4wMTIgQzcuODA2LDcwLjczIDguMjAyLDcwLjA0NyA4LjIwMiw2OS40ODcgQzguMjAyLDY5LjA5IDguMDAzLDY4Ljg2MSA3LjcxNCw2OC44NjEiIGlkPSJGaWxsLTE1IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTcuNDQ0LDg1LjM1IEM3LjcwOCw4NS4xOTggNy45MjEsODUuMzE5IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuOTI1IDcuNzA4LDg2LjI5MiA3LjQ0NCw4Ni40NDQgQzcuMTgxLDg2LjU5NyA2Ljk2Nyw4Ni40NzUgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IiBpZD0iRmlsbC0xNiIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03LjIzLDg2LjUxIEM3LjA3NCw4Ni41MSA2Ljk2Nyw4Ni4zODcgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IEM3LjUyMSw4NS4zMDUgNy41OTQsODUuMjg0IDcuNjU4LDg1LjI4NCBDNy44MTQsODUuMjg0IDcuOTIxLDg1LjQwOCA3LjkyMSw4NS42MjIgQzcuOTIxLDg1LjkyNSA3LjcwOCw4Ni4yOTIgNy40NDQsODYuNDQ0IEM3LjM2Nyw4Ni40ODkgNy4yOTQsODYuNTEgNy4yMyw4Ni41MSBNNy42NTgsODUuMDk4IEM3LjU1OCw4NS4wOTggNy40NTUsODUuMTI3IDcuMzUxLDg1LjE4OCBDNy4wMzEsODUuMzczIDYuNzgxLDg1LjgwNiA2Ljc4MSw4Ni4xNzMgQzYuNzgxLDg2LjQ4MiA2Ljk2Niw4Ni42OTcgNy4yMyw4Ni42OTcgQzcuMzMsODYuNjk3IDcuNDMzLDg2LjY2NiA3LjUzOCw4Ni42MDcgQzcuODU4LDg2LjQyMiA4LjEwOCw4NS45ODkgOC4xMDgsODUuNjIyIEM4LjEwOCw4NS4zMTMgNy45MjMsODUuMDk4IDcuNjU4LDg1LjA5OCIgaWQ9IkZpbGwtMTciIGZpbGw9IiM4MDk3QTIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4yMyw4Ni4zMjIgTDcuMTU0LDg2LjE3MyBDNy4xNTQsODUuOTM4IDcuMzMzLDg1LjYyOSA3LjUzOCw4NS41MTIgTDcuNjU4LDg1LjQ3MSBMNy43MzQsODUuNjIyIEM3LjczNCw4NS44NTYgNy41NTUsODYuMTY0IDcuMzUxLDg2LjI4MiBMNy4yMyw4Ni4zMjIgTTcuNjU4LDg1LjI4NCBDNy41OTQsODUuMjg0IDcuNTIxLDg1LjMwNSA3LjQ0NCw4NS4zNSBDNy4xODEsODUuNTAyIDYuOTY3LDg1Ljg3MSA2Ljk2Nyw4Ni4xNzMgQzYuOTY3LDg2LjM4NyA3LjA3NCw4Ni41MSA3LjIzLDg2LjUxIEM3LjI5NCw4Ni41MSA3LjM2Nyw4Ni40ODkgNy40NDQsODYuNDQ0IEM3LjcwOCw4Ni4yOTIgNy45MjEsODUuOTI1IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuNDA4IDcuODE0LDg1LjI4NCA3LjY1OCw4NS4yODQiIGlkPSJGaWxsLTE4IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTc3LjI3OCw3Ljc2OSBMNzcuMjc4LDUxLjQzNiBMMTAuMjA4LDkwLjE2IEwxMC4yMDgsNDYuNDkzIEw3Ny4yNzgsNy43NjkiIGlkPSJGaWxsLTE5IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEwLjA4Myw5MC4zNzUgTDEwLjA4Myw0Ni40MjEgTDEwLjE0Niw0Ni4zODUgTDc3LjQwMyw3LjU1NCBMNzcuNDAzLDUxLjUwOCBMNzcuMzQxLDUxLjU0NCBMMTAuMDgzLDkwLjM3NSBMMTAuMDgzLDkwLjM3NSBaIE0xMC4zMzMsNDYuNTY0IEwxMC4zMzMsODkuOTQ0IEw3Ny4xNTQsNTEuMzY1IEw3Ny4xNTQsNy45ODUgTDEwLjMzMyw0Ni41NjQgTDEwLjMzMyw0Ni41NjQgWiIgaWQ9IkZpbGwtMjAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMjUuNzM3LDg4LjY0NyBMMTE4LjA5OCw5MS45ODEgTDExOC4wOTgsODQgTDEwNi42MzksODguNzEzIEwxMDYuNjM5LDk2Ljk4MiBMOTksMTAwLjMxNSBMMTEyLjM2OSwxMDMuOTYxIEwxMjUuNzM3LDg4LjY0NyIgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTIiIGZpbGw9IiM0NTVBNjQiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"};var se="CardboardV1",ue="WEBVR_CARDBOARD_VIEWER";function le(e){try{this.selectedKey=localStorage.getItem(ue)}catch(e){console.error("Failed to load viewer profile: %s",e)}this.selectedKey||(this.selectedKey=e||se),this.dialog=this.createDialog_(Q.Viewers),this.root=null,this.onChangeCallbacks_=[]}le.prototype.show=function(e){this.root=e,e.appendChild(this.dialog);var t=this.dialog.querySelector("#"+this.selectedKey);t.checked=!0,this.dialog.style.display="block"},le.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},le.prototype.getCurrentViewer=function(){return Q.Viewers[this.selectedKey]},le.prototype.getSelectedKey_=function(){var e=this.dialog.querySelector("input[name=field]:checked");return e?e.id:null},le.prototype.onChange=function(e){this.onChangeCallbacks_.push(e)},le.prototype.fireOnChange_=function(e){for(var t=0;t<this.onChangeCallbacks_.length;t++)this.onChangeCallbacks_[t](e)},le.prototype.onSave_=function(){if(this.selectedKey=this.getSelectedKey_(),this.selectedKey&&Q.Viewers[this.selectedKey]){this.fireOnChange_(Q.Viewers[this.selectedKey]);try{localStorage.setItem(ue,this.selectedKey)}catch(e){console.error("Failed to save viewer profile: %s",e)}this.hide()}else console.error("ViewerSelector.onSave_: this should never happen!")},le.prototype.createDialog_=function(e){var t=document.createElement("div");t.classList.add("webvr-polyfill-viewer-selector"),t.style.display="none";var n=document.createElement("div"),r=n.style;r.position="fixed",r.left=0,r.top=0,r.width="100%",r.height="100%",r.background="rgba(0, 0, 0, 0.3)",n.addEventListener("click",this.hide.bind(this));var i=document.createElement("div"),r=i.style;for(var a in r.boxSizing="border-box",r.position="fixed",r.top="24px",r.left="50%",r.marginLeft="-140px",r.width="280px",r.padding="24px",r.overflow="hidden",r.background="#fafafa",r.fontFamily="'Roboto', sans-serif",r.boxShadow="0px 5px 20px #666",i.appendChild(this.createH1_("Select your viewer")),e)i.appendChild(this.createChoice_(a,e[a].label));return i.appendChild(this.createButton_("Save",this.onSave_.bind(this))),t.appendChild(n),t.appendChild(i),t},le.prototype.createH1_=function(e){var t=document.createElement("h1"),n=t.style;return n.color="black",n.fontSize="20px",n.fontWeight="bold",n.marginTop=0,n.marginBottom="24px",t.innerHTML=e,t},le.prototype.createChoice_=function(e,t){var n=document.createElement("div");n.style.marginTop="8px",n.style.color="black";var r=document.createElement("input");r.style.fontSize="30px",r.setAttribute("id",e),r.setAttribute("type","radio"),r.setAttribute("value",e),r.setAttribute("name","field");var i=document.createElement("label");return i.style.marginLeft="4px",i.setAttribute("for",e),i.innerHTML=t,n.appendChild(r),n.appendChild(i),n},le.prototype.createButton_=function(e,t){var n=document.createElement("button");n.innerHTML=e;var r=n.style;return r.float="right",r.textTransform="uppercase",r.color="#1094f7",r.fontSize="14px",r.letterSpacing=0,r.border=0,r.background="none",r.marginTop="16px",n.addEventListener("click",t),n},"undefined"!=typeof window?window:void 0!==e||"undefined"!=typeof self&&self;var ce,fe,de=(function(e,t){var n;n=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),a="undefined"!=typeof navigator&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream,o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("playsinline",""),this.noSleepVideo.setAttribute("src",i),this.noSleepVideo.addEventListener("timeupdate",function(e){this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=Math.random())}.bind(this)))}return r(e,[{key:"enable",value:function(){a?(this.disable(),this.noSleepTimer=window.setInterval(function(){window.location.href="/",window.setTimeout(window.stop,0)},15e3)):this.noSleepVideo.play()}},{key:"disable",value:function(){a?this.noSleepTimer&&(window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause()}}]),e}();e.exports=o},function(e,t,n){e.exports="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQADQGgcIQADQGgcAAAACQGeYUQn/wALKCEAA0BoHAAAAAkBnmNEJ/8ACykhAANAaBwhAANAaBwAAAANQZpoNExDP/6plgAMuSEAA0BoHAAAAAtBnoZFESwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBnqVEJ/8ACykhAANAaBwAAAAJAZ6nRCf/AAsoIQADQGgcIQADQGgcAAAADUGarDRMQz/+qZYADLghAANAaBwAAAALQZ7KRRUsK/8ACPkhAANAaBwAAAAJAZ7pRCf/AAsoIQADQGgcIQADQGgcAAAACQGe60Qn/wALKCEAA0BoHAAAAA1BmvA0TEM//qmWAAy5IQADQGgcIQADQGgcAAAAC0GfDkUVLCv/AAj5IQADQGgcAAAACQGfLUQn/wALKSEAA0BoHCEAA0BoHAAAAAkBny9EJ/8ACyghAANAaBwAAAANQZs0NExDP/6plgAMuCEAA0BoHAAAAAtBn1JFFSwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBn3FEJ/8ACyghAANAaBwAAAAJAZ9zRCf/AAsoIQADQGgcIQADQGgcAAAADUGbeDRMQz/+qZYADLkhAANAaBwAAAALQZ+WRRUsK/8ACPghAANAaBwhAANAaBwAAAAJAZ+1RCf/AAspIQADQGgcAAAACQGft0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bm7w0TEM//qmWAAy4IQADQGgcAAAAC0Gf2kUVLCv/AAj5IQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHAAAAAkBn/tEJ/8ACykhAANAaBwAAAANQZvgNExDP/6plgAMuSEAA0BoHCEAA0BoHAAAAAtBnh5FFSwr/wAI+CEAA0BoHAAAAAkBnj1EJ/8ACyghAANAaBwhAANAaBwAAAAJAZ4/RCf/AAspIQADQGgcAAAADUGaJDRMQz/+qZYADLghAANAaBwAAAALQZ5CRRUsK/8ACPkhAANAaBwhAANAaBwAAAAJAZ5hRCf/AAsoIQADQGgcAAAACQGeY0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bmmg0TEM//qmWAAy5IQADQGgcAAAAC0GehkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGepUQn/wALKSEAA0BoHAAAAAkBnqdEJ/8ACyghAANAaBwAAAANQZqsNExDP/6plgAMuCEAA0BoHCEAA0BoHAAAAAtBnspFFSwr/wAI+SEAA0BoHAAAAAkBnulEJ/8ACyghAANAaBwhAANAaBwAAAAJAZ7rRCf/AAsoIQADQGgcAAAADUGa8DRMQz/+qZYADLkhAANAaBwhAANAaBwAAAALQZ8ORRUsK/8ACPkhAANAaBwAAAAJAZ8tRCf/AAspIQADQGgcIQADQGgcAAAACQGfL0Qn/wALKCEAA0BoHAAAAA1BmzQ0TEM//qmWAAy4IQADQGgcAAAAC0GfUkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGfcUQn/wALKCEAA0BoHAAAAAkBn3NEJ/8ACyghAANAaBwhAANAaBwAAAANQZt4NExC//6plgAMuSEAA0BoHAAAAAtBn5ZFFSwr/wAI+CEAA0BoHCEAA0BoHAAAAAkBn7VEJ/8ACykhAANAaBwAAAAJAZ+3RCf/AAspIQADQGgcAAAADUGbuzRMQn/+nhAAYsAhAANAaBwhAANAaBwAAAAJQZ/aQhP/AAspIQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHAAACiFtb292AAAAbG12aGQAAAAA1YCCX9WAgl8AAAPoAAAH/AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAGGlvZHMAAAAAEICAgAcAT////v7/AAAF+XRyYWsAAABcdGtoZAAAAAPVgIJf1YCCXwAAAAEAAAAAAAAH0AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAygAAAMoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAB9AAABdwAAEAAAAABXFtZGlhAAAAIG1kaGQAAAAA1YCCX9WAgl8AAV+QAAK/IFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAUcbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAE3HN0YmwAAACYc3RzZAAAAAAAAAABAAAAiGF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAygDKAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAyYXZjQwFNQCj/4QAbZ01AKOyho3ySTUBAQFAAAAMAEAAr8gDxgxlgAQAEaO+G8gAAABhzdHRzAAAAAAAAAAEAAAA8AAALuAAAABRzdHNzAAAAAAAAAAEAAAABAAAB8GN0dHMAAAAAAAAAPAAAAAEAABdwAAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAAC7gAAAAAQAAF3AAAAABAAAAAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAEEc3RzegAAAAAAAAAAAAAAPAAAAzQAAAAQAAAADQAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAANAAAADQAAAQBzdGNvAAAAAAAAADwAAAAwAAADZAAAA3QAAAONAAADoAAAA7kAAAPQAAAD6wAAA/4AAAQXAAAELgAABEMAAARcAAAEbwAABIwAAAShAAAEugAABM0AAATkAAAE/wAABRIAAAUrAAAFQgAABV0AAAVwAAAFiQAABaAAAAW1AAAFzgAABeEAAAX+AAAGEwAABiwAAAY/AAAGVgAABnEAAAaEAAAGnQAABrQAAAbPAAAG4gAABvUAAAcSAAAHJwAAB0AAAAdTAAAHcAAAB4UAAAeeAAAHsQAAB8gAAAfjAAAH9gAACA8AAAgmAAAIQQAACFQAAAhnAAAIhAAACJcAAAMsdHJhawAAAFx0a2hkAAAAA9WAgl/VgIJfAAAAAgAAAAAAAAf8AAAAAAAAAAAAAAABAQAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAACsm1kaWEAAAAgbWRoZAAAAADVgIJf1YCCXwAArEQAAWAAVcQAAAAAACdoZGxyAAAAAAAAAABzb3VuAAAAAAAAAAAAAAAAU3RlcmVvAAAAAmNtaW5mAAAAEHNtaGQAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAidzdGJsAAAAZ3N0c2QAAAAAAAAAAQAAAFdtcDRhAAAAAAAAAAEAAAAAAAAAAAACABAAAAAArEQAAAAAADNlc2RzAAAAAAOAgIAiAAIABICAgBRAFQAAAAADDUAAAAAABYCAgAISEAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAABYAAAEAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAAAGAAAAWAAAAXBzdGNvAAAAAAAAAFgAAAOBAAADhwAAA5oAAAOtAAADswAAA8oAAAPfAAAD5QAAA/gAAAQLAAAEEQAABCgAAAQ9AAAEUAAABFYAAARpAAAEgAAABIYAAASbAAAErgAABLQAAATHAAAE3gAABPMAAAT5AAAFDAAABR8AAAUlAAAFPAAABVEAAAVXAAAFagAABX0AAAWDAAAFmgAABa8AAAXCAAAFyAAABdsAAAXyAAAF+AAABg0AAAYgAAAGJgAABjkAAAZQAAAGZQAABmsAAAZ+AAAGkQAABpcAAAauAAAGwwAABskAAAbcAAAG7wAABwYAAAcMAAAHIQAABzQAAAc6AAAHTQAAB2QAAAdqAAAHfwAAB5IAAAeYAAAHqwAAB8IAAAfXAAAH3QAAB/AAAAgDAAAICQAACCAAAAg1AAAIOwAACE4AAAhhAAAIeAAACH4AAAiRAAAIpAAACKoAAAiwAAAItgAACLwAAAjCAAAAFnVkdGEAAAAObmFtZVN0ZXJlbwAAAHB1ZHRhAAAAaG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAO2lsc3QAAAAzqXRvbwAAACtkYXRhAAAAAQAAAABIYW5kQnJha2UgMC4xMC4yIDIwMTUwNjExMDA="}])},e.exports=n()}(fe={exports:{}},fe.exports),(ce=fe.exports)&&ce.__esModule&&Object.prototype.hasOwnProperty.call(ce,"default")?ce.default:ce),pe=1e3,he=[0,0,.5,1],ge=[.5,0,.5,1],me=window.requestAnimationFrame,ve=window.cancelAnimationFrame;function ye(e){Object.defineProperties(this,{hasPosition:{writable:!1,enumerable:!0,value:e.hasPosition},hasExternalDisplay:{writable:!1,enumerable:!0,value:e.hasExternalDisplay},canPresent:{writable:!1,enumerable:!0,value:e.canPresent},maxLayers:{writable:!1,enumerable:!0,value:e.maxLayers},hasOrientation:{enumerable:!0,get:function(){return S("VRDisplayCapabilities.prototype.hasOrientation","VRDisplay.prototype.getFrameData"),e.hasOrientation}}})}function be(e){var t=!("wakelock"in(e=e||{}))||e.wakelock;this.isPolyfilled=!0,this.displayId=pe++,this.displayName="",this.depthNear=.01,this.depthFar=1e4,this.isPresenting=!1,Object.defineProperty(this,"isConnected",{get:function(){return S("VRDisplay.prototype.isConnected","VRDisplayCapabilities.prototype.hasExternalDisplay"),!1}}),this.capabilities=new ye({hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1}),this.stageParameters=null,this.waitingForPresent_=!1,this.layer_=null,this.originalParent_=null,this.fullscreenElement_=null,this.fullscreenWrapper_=null,this.fullscreenElementCachedStyle_=null,this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null,t&&M()&&(this.wakelock_=new de)}be.prototype.getFrameData=function(e){return A(e,this._getPose(),this)},be.prototype.getPose=function(){return S("VRDisplay.prototype.getPose","VRDisplay.prototype.getFrameData"),this._getPose()},be.prototype.resetPose=function(){return S("VRDisplay.prototype.resetPose"),this._resetPose()},be.prototype.getImmediatePose=function(){return S("VRDisplay.prototype.getImmediatePose","VRDisplay.prototype.getFrameData"),this._getPose()},be.prototype.requestAnimationFrame=function(e){return me(e)},be.prototype.cancelAnimationFrame=function(e){return ve(e)},be.prototype.wrapForFullscreen=function(e){if(u())return e;if(!this.fullscreenWrapper_){this.fullscreenWrapper_=document.createElement("div");var t=["height: "+Math.min(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.fullscreenWrapper_.setAttribute("style",t.join("; ")+";"),this.fullscreenWrapper_.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.fullscreenElement_==e)return this.fullscreenWrapper_;if(this.fullscreenElement_&&(this.originalParent_?this.originalParent_.appendChild(this.fullscreenElement_):this.fullscreenElement_.parentElement.removeChild(this.fullscreenElement_)),this.fullscreenElement_=e,this.originalParent_=e.parentElement,this.originalParent_||document.body.appendChild(e),!this.fullscreenWrapper_.parentElement){var n=this.fullscreenElement_.parentElement;n.insertBefore(this.fullscreenWrapper_,this.fullscreenElement_),n.removeChild(this.fullscreenElement_)}this.fullscreenWrapper_.insertBefore(this.fullscreenElement_,this.fullscreenWrapper_.firstChild),this.fullscreenElementCachedStyle_=this.fullscreenElement_.getAttribute("style");var r=this;return function(){if(r.fullscreenElement_){var e=["position: absolute","top: 0","left: 0","width: "+Math.max(screen.width,screen.height)+"px","height: "+Math.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];r.fullscreenElement_.setAttribute("style",e.join("; ")+";")}}(),this.fullscreenWrapper_},be.prototype.removeFullscreenWrapper=function(){if(this.fullscreenElement_){var e=this.fullscreenElement_;this.fullscreenElementCachedStyle_?e.setAttribute("style",this.fullscreenElementCachedStyle_):e.removeAttribute("style"),this.fullscreenElement_=null,this.fullscreenElementCachedStyle_=null;var t=this.fullscreenWrapper_.parentElement;return this.fullscreenWrapper_.removeChild(e),this.originalParent_===t?t.insertBefore(e,this.fullscreenWrapper_):this.originalParent_&&this.originalParent_.appendChild(e),t.removeChild(this.fullscreenWrapper_),e}},be.prototype.requestPresent=function(e){var t=this.isPresenting,n=this;return e instanceof Array||(S("VRDisplay.prototype.requestPresent with non-array argument","an array of VRLayers as the first argument"),e=[e]),new Promise(function(r,i){if(n.capabilities.canPresent)if(0==e.length||e.length>n.capabilities.maxLayers)i(new Error("Invalid number of layers."));else{var a=e[0];if(a.source){var o=a.leftBounds||he,s=a.rightBounds||ge;if(t){var c=n.layer_;c.source!==a.source&&(c.source=a.source);for(var f=0;f<4;f++)c.leftBounds[f]=o[f],c.rightBounds[f]=s[f];return n.wrapForFullscreen(n.layer_.source),n.updatePresent_(),void r()}if(n.layer_={predistorted:a.predistorted,source:a.source,leftBounds:o.slice(0),rightBounds:s.slice(0)},n.waitingForPresent_=!1,n.layer_&&n.layer_.source){var d=n.wrapForFullscreen(n.layer_.source);n.addFullscreenListeners_(d,function(){var e=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;n.isPresenting=d===e,n.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch(function(e){console.error("screen.orientation.lock() failed due to",e.message)}),n.waitingForPresent_=!1,n.beginPresent_(),r()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),n.removeFullscreenWrapper(),n.disableWakeLock(),n.endPresent_(),n.removeFullscreenListeners_()),n.fireVRDisplayPresentChange_()},function(){n.waitingForPresent_&&(n.removeFullscreenWrapper(),n.removeFullscreenListeners_(),n.disableWakeLock(),n.waitingForPresent_=!1,n.isPresenting=!1,i(new Error("Unable to present.")))}),function(e){if(l())return!1;if(e.requestFullscreen)e.requestFullscreen();else if(e.webkitRequestFullscreen)e.webkitRequestFullscreen();else if(e.mozRequestFullScreen)e.mozRequestFullScreen();else{if(!e.msRequestFullscreen)return!1;e.msRequestFullscreen()}return!0}(d)?(n.enableWakeLock(),n.waitingForPresent_=!0):(u()||l())&&(n.enableWakeLock(),n.isPresenting=!0,n.beginPresent_(),n.fireVRDisplayPresentChange_(),r())}n.waitingForPresent_||u()||(v(),i(new Error("Unable to present.")))}else r()}else i(new Error("VRDisplay is not capable of presenting."))})},be.prototype.exitPresent=function(){var e=this.isPresenting,t=this;return this.isPresenting=!1,this.layer_=null,this.disableWakeLock(),new Promise(function(n,r){e?(!v()&&u()&&(t.endPresent_(),t.fireVRDisplayPresentChange_()),l()&&(t.removeFullscreenWrapper(),t.removeFullscreenListeners_(),t.endPresent_(),t.fireVRDisplayPresentChange_()),n()):r(new Error("Was not presenting to VRDisplay."))})},be.prototype.getLayers=function(){return this.layer_?[this.layer_]:[]},be.prototype.fireVRDisplayPresentChange_=function(){var e=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});window.dispatchEvent(e)},be.prototype.fireVRDisplayConnect_=function(){var e=new CustomEvent("vrdisplayconnect",{detail:{display:this}});window.dispatchEvent(e)},be.prototype.addFullscreenListeners_=function(e,t,n){this.removeFullscreenListeners_(),this.fullscreenEventTarget_=e,this.fullscreenChangeHandler_=t,this.fullscreenErrorHandler_=n,t&&(document.fullscreenEnabled?e.addEventListener("fullscreenchange",t,!1):document.webkitFullscreenEnabled?e.addEventListener("webkitfullscreenchange",t,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenchange",t,!1):document.msFullscreenEnabled&&e.addEventListener("msfullscreenchange",t,!1)),n&&(document.fullscreenEnabled?e.addEventListener("fullscreenerror",n,!1):document.webkitFullscreenEnabled?e.addEventListener("webkitfullscreenerror",n,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenerror",n,!1):document.msFullscreenEnabled&&e.addEventListener("msfullscreenerror",n,!1))},be.prototype.removeFullscreenListeners_=function(){if(this.fullscreenEventTarget_){var e=this.fullscreenEventTarget_;if(this.fullscreenChangeHandler_){var t=this.fullscreenChangeHandler_;e.removeEventListener("fullscreenchange",t,!1),e.removeEventListener("webkitfullscreenchange",t,!1),document.removeEventListener("mozfullscreenchange",t,!1),e.removeEventListener("msfullscreenchange",t,!1)}if(this.fullscreenErrorHandler_){var n=this.fullscreenErrorHandler_;e.removeEventListener("fullscreenerror",n,!1),e.removeEventListener("webkitfullscreenerror",n,!1),document.removeEventListener("mozfullscreenerror",n,!1),e.removeEventListener("msfullscreenerror",n,!1)}this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null}},be.prototype.enableWakeLock=function(){this.wakelock_&&this.wakelock_.enable()},be.prototype.disableWakeLock=function(){this.wakelock_&&this.wakelock_.disable()},be.prototype.beginPresent_=function(){},be.prototype.endPresent_=function(){},be.prototype.submitFrame=function(e){},be.prototype.getEyeParameters=function(e){return null};var Me={ADDITIONAL_VIEWERS:[],DEFAULT_VIEWER:"",MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1},xe={LEFT:"left",RIGHT:"right"};function we(e){var t=x({},Me);e=x(t,e||{}),be.call(this,{wakelock:e.MOBILE_WAKE_LOCK}),this.config=e,this.displayName="Cardboard VRDisplay",this.capabilities=new ye({hasPosition:!1,hasOrientation:!0,hasExternalDisplay:!1,canPresent:!0,maxLayers:1}),this.stageParameters=null,this.bufferScale_=this.config.BUFFER_SCALE,this.poseSensor_=new ae(this.config),this.distorter_=null,this.cardboardUI_=null,this.dpdb_=new K(this.config.DPDB_URL,this.onDeviceParamsUpdated_.bind(this)),this.deviceInfo_=new Q(this.dpdb_.getDeviceParams(),e.ADDITIONAL_VIEWERS),this.viewerSelector_=new le(e.DEFAULT_VIEWER),this.viewerSelector_.onChange(this.onViewerChanged_.bind(this)),this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer()),this.config.ROTATE_INSTRUCTIONS_DISABLED||(this.rotateInstructions_=new oe),u()&&window.addEventListener("resize",this.onResize_.bind(this))}return we.prototype=Object.create(be.prototype),we.prototype._getPose=function(){return{position:null,orientation:this.poseSensor_.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},we.prototype._resetPose=function(){this.poseSensor_.resetPose&&this.poseSensor_.resetPose()},we.prototype._getFieldOfView=function(e){var t;if(e==xe.LEFT)t=this.deviceInfo_.getFieldOfViewLeftEye();else{if(e!=xe.RIGHT)return console.error("Invalid eye provided: %s",e),null;t=this.deviceInfo_.getFieldOfViewRightEye()}return t},we.prototype._getEyeOffset=function(e){var t;if(e==xe.LEFT)t=[.5*-this.deviceInfo_.viewer.interLensDistance,0,0];else{if(e!=xe.RIGHT)return console.error("Invalid eye provided: %s",e),null;t=[.5*this.deviceInfo_.viewer.interLensDistance,0,0]}return t},we.prototype.getEyeParameters=function(e){var t=this._getEyeOffset(e),n=this._getFieldOfView(e),r={offset:t,renderWidth:.5*this.deviceInfo_.device.width*this.bufferScale_,renderHeight:this.deviceInfo_.device.height*this.bufferScale_};return Object.defineProperty(r,"fieldOfView",{enumerable:!0,get:function(){return S("VRFieldOfView","VRFrameData's projection matrices"),n}}),r},we.prototype.onDeviceParamsUpdated_=function(e){this.config.DEBUG&&console.log("DPDB reported that device params were updated."),this.deviceInfo_.updateDeviceParams(e),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_)},we.prototype.updateBounds_=function(){this.layer_&&this.distorter_&&(this.layer_.leftBounds||this.layer_.rightBounds)&&this.distorter_.setTextureBounds(this.layer_.leftBounds,this.layer_.rightBounds)},we.prototype.beginPresent_=function(){var e=this.layer_.source.getContext("webgl");e||(e=this.layer_.source.getContext("experimental-webgl")),e||(e=this.layer_.source.getContext("webgl2")),e&&(this.layer_.predistorted?this.config.CARDBOARD_UI_DISABLED||(e.canvas.width=g()*this.bufferScale_,e.canvas.height=m()*this.bufferScale_,this.cardboardUI_=new k(e)):(this.config.CARDBOARD_UI_DISABLED||(this.cardboardUI_=new k(e)),this.distorter_=new N(e,this.cardboardUI_,this.config.BUFFER_SCALE,this.config.DIRTY_SUBMIT_FRAME_BINDINGS),this.distorter_.updateDeviceInfo(this.deviceInfo_)),this.cardboardUI_&&this.cardboardUI_.listen(function(e){this.viewerSelector_.show(this.layer_.source.parentElement),e.stopPropagation(),e.preventDefault()}.bind(this),function(e){this.exitPresent(),e.stopPropagation(),e.preventDefault()}.bind(this)),this.rotateInstructions_&&(h()&&M()?this.rotateInstructions_.showTemporarily(3e3,this.layer_.source.parentElement):this.rotateInstructions_.update()),this.orientationHandler=this.onOrientationChange_.bind(this),window.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.updateBounds_.bind(this),window.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.fireVRDisplayDeviceParamsChange_())},we.prototype.endPresent_=function(){this.distorter_&&(this.distorter_.destroy(),this.distorter_=null),this.cardboardUI_&&(this.cardboardUI_.destroy(),this.cardboardUI_=null),this.rotateInstructions_&&this.rotateInstructions_.hide(),this.viewerSelector_.hide(),window.removeEventListener("orientationchange",this.orientationHandler),window.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},we.prototype.updatePresent_=function(){this.endPresent_(),this.beginPresent_()},we.prototype.submitFrame=function(e){if(this.distorter_)this.updateBounds_(),this.distorter_.submitFrame();else if(this.cardboardUI_&&this.layer_){var t=this.layer_.source.getContext("webgl").canvas;t.width==this.lastWidth&&t.height==this.lastHeight||this.cardboardUI_.onResize(),this.lastWidth=t.width,this.lastHeight=t.height,this.cardboardUI_.render()}},we.prototype.onOrientationChange_=function(e){this.viewerSelector_.hide(),this.rotateInstructions_&&this.rotateInstructions_.update(),this.onResize_()},we.prototype.onResize_=function(e){if(this.layer_){var t=this.layer_.source.getContext("webgl");t.canvas.setAttribute("style",["position: absolute","top: 0","left: 0","width: 100vw","height: 100vh","border: 0","margin: 0","padding: 0px","box-sizing: content-box"].join("; ")+";"),w(t.canvas)}},we.prototype.onViewerChanged_=function(e){this.deviceInfo_.setViewer(e),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_),this.fireVRDisplayDeviceParamsChange_()},we.prototype.fireVRDisplayDeviceParamsChange_=function(){var e=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.deviceInfo_}});window.dispatchEvent(e)},we.VRFrameData=function(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null},we.VRDisplay=be,we}()}(t={exports:{}},t.exports),t.exports),u=(n=s)&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,l={ADDITIONAL_VIEWERS:[],DEFAULT_VIEWER:"",PROVIDE_MOBILE_VRDISPLAY:!0,GET_VR_DISPLAYS_TIMEOUT:1e3,MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1};function c(e){this.config=o(o({},l),e),this.polyfillDisplays=[],this.enabled=!1,this.hasNative="getVRDisplays"in navigator,this.native={},this.native.getVRDisplays=navigator.getVRDisplays,this.native.VRFrameData=window.VRFrameData,this.native.VRDisplay=window.VRDisplay,(!this.hasNative||this.config.PROVIDE_MOBILE_VRDISPLAY&&i())&&(this.enable(),this.getVRDisplays().then(function(e){e&&e[0]&&e[0].fireVRDisplayConnect_&&e[0].fireVRDisplayConnect_()}))}c.prototype.getPolyfillDisplays=function(){if(this._polyfillDisplaysPopulated)return this.polyfillDisplays;if(i()){var e=new u({ADDITIONAL_VIEWERS:this.config.ADDITIONAL_VIEWERS,DEFAULT_VIEWER:this.config.DEFAULT_VIEWER,MOBILE_WAKE_LOCK:this.config.MOBILE_WAKE_LOCK,DEBUG:this.config.DEBUG,DPDB_URL:this.config.DPDB_URL,CARDBOARD_UI_DISABLED:this.config.CARDBOARD_UI_DISABLED,K_FILTER:this.config.K_FILTER,PREDICTION_TIME_S:this.config.PREDICTION_TIME_S,ROTATE_INSTRUCTIONS_DISABLED:this.config.ROTATE_INSTRUCTIONS_DISABLED,YAW_ONLY:this.config.YAW_ONLY,BUFFER_SCALE:this.config.BUFFER_SCALE,DIRTY_SUBMIT_FRAME_BINDINGS:this.config.DIRTY_SUBMIT_FRAME_BINDINGS});this.polyfillDisplays.push(e)}return this._polyfillDisplaysPopulated=!0,this.polyfillDisplays},c.prototype.enable=function(){if(this.enabled=!0,this.hasNative&&this.native.VRFrameData){var e=this.native.VRFrameData,t=new this.native.VRFrameData,n=this.native.VRDisplay.prototype.getFrameData;window.VRDisplay.prototype.getFrameData=function(r){r instanceof e?n.call(this,r):(n.call(this,t),r.pose=t.pose,a(t.leftProjectionMatrix,r.leftProjectionMatrix),a(t.rightProjectionMatrix,r.rightProjectionMatrix),a(t.leftViewMatrix,r.leftViewMatrix),a(t.rightViewMatrix,r.rightViewMatrix))}}navigator.getVRDisplays=this.getVRDisplays.bind(this),window.VRDisplay=u.VRDisplay,window.VRFrameData=u.VRFrameData},c.prototype.getVRDisplays=function(){var e,t=this,n=this.config;if(!this.hasNative)return Promise.resolve(this.getPolyfillDisplays());var r,i=this.native.getVRDisplays.call(navigator),a=new Promise(function(t){e=setTimeout(function(){console.warn("Native WebVR implementation detected, but `getVRDisplays()` failed to resolve. Falling back to polyfill."),t([])},n.GET_VR_DISPLAYS_TIMEOUT)});return(r=[i,a],Promise.race?Promise.race(r):new Promise(function(e,t){for(var n=0;n<r.length;n++)r[n].then(e,t)})).then(function(n){return clearTimeout(e),n.length>0?n:t.getPolyfillDisplays()})},c.version="0.10.8",c.VRFrameData=u.VRFrameData,c.VRDisplay=u.VRDisplay;var f=Object.freeze({default:c}),d=f&&c||f;return void 0!==e&&e.window&&(e.document||(e.document=e.window.document),e.navigator||(e.navigator=e.window.navigator)),d},"object"===s(t)&&void 0!==e?e.exports=o():void 0===(a="function"==typeof(i=o)?i.call(t,n,t,e):i)||(e.exports=a)}).call(this,n(33))},,,,,function(e,t,n){(function(e){var r;function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,a,o){function s(e){var t,n=this,r=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function u(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function l(e,t){var n=new s(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+1.1102230246251565e-16*(2097152*a()|0)},a.quick=a,r&&("object"==i(r)&&u(r,n),a.state=function(){return u(n,{})}),a}a&&a.exports?a.exports=l:n(27)&&n(48)?void 0===(r=function(){return l}.call(t,n,t,a))||(a.exports=r):this.alea=l}(0,"object"==i(e)&&e,n(27))}).call(this,n(45)(e))},function(e,t,n){(function(e){var r;function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,a,o){function s(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function u(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function l(e,t){var n=new s(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==i(r)&&u(r,n),a.state=function(){return u(n,{})}),a}a&&a.exports?a.exports=l:n(27)&&n(48)?void 0===(r=function(){return l}.call(t,n,t,a))||(a.exports=r):this.xor128=l}(0,"object"==i(e)&&e,n(27))}).call(this,n(45)(e))},function(e,t,n){(function(e){var r;function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,a,o){function s(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function u(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function l(e,t){var n=new s(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==i(r)&&u(r,n),a.state=function(){return u(n,{})}),a}a&&a.exports?a.exports=l:n(27)&&n(48)?void 0===(r=function(){return l}.call(t,n,t,a))||(a.exports=r):this.xorwow=l}(0,"object"==i(e)&&e,n(27))}).call(this,n(45)(e))},function(e,t,n){(function(e){var r;function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,i,a){function o(e){var t=this;t.next=function(){var e,n,r=t.x,i=t.i;return e=r[i],n=(e^=e>>>7)^e<<24,n^=(e=r[i+1&7])^e>>>10,n^=(e=r[i+3&7])^e>>>3,n^=(e=r[i+4&7])^e<<7,e=r[i+7&7],n^=(e^=e<<13)^e<<9,r[i]=n,t.i=i+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function u(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&(r.x&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=u:n(27)&&n(48)?void 0===(r=function(){return u}.call(t,n,t,i))||(i.exports=r):this.xorshift7=u}(0,"object"==i(e)&&e,n(27))}).call(this,n(45)(e))},function(e,t,n){(function(e){var r;function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,i,a){function o(e){var t=this;t.next=function(){var e,n,r=t.w,i=t.X,a=t.i;return t.w=r=r+1640531527|0,n=i[a+34&127],e=i[a=a+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=i[a]=n^e,t.i=a,n+(r^r>>>16)|0},function(e,t){var n,r,i,a,o,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),i=0,a=-32;a<u;++a)t&&(r^=t.charCodeAt((a+32)%t.length)),0===a&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,a>=0&&(o=o+1640531527|0,i=0==(n=s[127&a]^=r+o)?i+1:0);for(i>=128&&(s[127&(t&&t.length||0)]=-1),i=127,a=512;a>0;--a)r=s[i+34&127],n=s[i=i+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[i]=r^n;e.w=o,e.X=s,e.i=i}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function u(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&(r.X&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=u:n(27)&&n(48)?void 0===(r=function(){return u}.call(t,n,t,i))||(i.exports=r):this.xor4096=u}(0,"object"==i(e)&&e,n(27))}).call(this,n(45)(e))},function(e,t,n){(function(e){var r;function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,a,o){function s(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,i=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^i,t.a=i-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function u(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function l(e,t){var n=new s(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==i(r)&&u(r,n),a.state=function(){return u(n,{})}),a}a&&a.exports?a.exports=l:n(27)&&n(48)?void 0===(r=function(){return l}.call(t,n,t,a))||(a.exports=r):this.tychei=l}(0,"object"==i(e)&&e,n(27))}).call(this,n(45)(e))},function(e,t,n){(function(e){var r;function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(a,o){var s,u=this,l=256,c=6,f="random",d=o.pow(l,c),p=o.pow(2,52),h=2*p,g=l-1;function m(e,t,n){var r=[],g=b(function e(t,n){var r,a=[],o=i(t);if(n&&"object"==o)for(r in t)try{a.push(e(t[r],n-1))}catch(e){}return a.length?a:"string"==o?t:t+"\0"}((t=1==t?{entropy:!0}:t||{}).entropy?[e,M(a)]:null==e?function(){try{var e;return s&&(e=s.randomBytes)?e=e(l):(e=new Uint8Array(l),(u.crypto||u.msCrypto).getRandomValues(e)),M(e)}catch(e){var t=u.navigator,n=t&&t.plugins;return[+new Date,u,n,u.screen,M(a)]}}():e,3),r),m=new v(r),x=function(){for(var e=m.g(c),t=d,n=0;e<p;)e=(e+n)*l,t*=l,n=m.g(1);for(;e>=h;)e/=2,t/=2,n>>>=1;return(e+n)/t};return x.int32=function(){return 0|m.g(4)},x.quick=function(){return m.g(4)/4294967296},x.double=x,b(M(m.S),a),(t.pass||n||function(e,t,n,r){return r&&(r.S&&y(r,m),e.state=function(){return y(m,{})}),n?(o[f]=e,t):e})(x,g,"global"in t?t.global:this==o,t.state)}function v(e){var t,n=e.length,r=this,i=0,a=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);i<l;)o[i]=i++;for(i=0;i<l;i++)o[i]=o[a=g&a+e[i%n]+(t=o[i])],o[a]=t;(r.g=function(e){for(var t,n=0,i=r.i,a=r.j,o=r.S;e--;)t=o[i=g&i+1],n=n*l+o[g&(o[i]=o[a=g&a+t])+(o[a]=t)];return r.i=i,r.j=a,n})(l)}function y(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function b(e,t){for(var n,r=e+"",i=0;i<r.length;)t[g&i]=g&(n^=19*t[g&i])+r.charCodeAt(i++);return M(t)}function M(e){return String.fromCharCode.apply(0,e)}if(o["seed"+f]=m,b(o.random(),a),"object"==i(e)&&e.exports){e.exports=m;try{s=n(155)}catch(e){}}else void 0===(r=function(){return m}.call(t,n,t,e))||(e.exports=r)}([],Math)}).call(this,n(45)(e))},function(e,t){},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,"__listeners",{value:{},enumerable:!1,writable:!1})}return r(e,[{key:"emit",value:function(e){if(!this.__listeners[e])return this;for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=!0,a=!1,o=void 0;try{for(var s,u=this.__listeners[e][Symbol.iterator]();!(i=(s=u.next()).done);i=!0){s.value.apply(void 0,n)}}catch(e){a=!0,o=e}finally{try{!i&&u.return&&u.return()}finally{if(a)throw o}}return this}},{key:"once",value:function(e,t){var n=this,r=function r(){n.off(e,r),t.apply(void 0,arguments)};return this.on(e,r)}},{key:"on",value:function(e,t){return this.__listeners[e]||(this.__listeners[e]=[]),this.__listeners[e].push(t),this}},{key:"off",value:function(e,t){return this.__listeners[e]=t?this.__listeners[e].filter(function(e){return e!==t}):[],this}}]),e}();e.exports=i},function(e,t,n){(t=e.exports=n(53)(!1)).push([e.i,".CornerAnnotation-module-container_kpViB {\n  display: flex;\n  align-items: stretch;\n  justify-content: space-between;\n  flex-direction: column;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  z-index: 100;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n\n.CornerAnnotation-module-row_nWtUc {\n  flex: 1;\n  display: flex;\n  justify-content: space-between;\n  flex-direction: row;\n}\n\n.CornerAnnotation-module-topRow_Bl3Yk {\n  align-items: flex-start;\n}\n\n.CornerAnnotation-module-middleRow_17aXO {\n  align-items: center;\n}\n\n.CornerAnnotation-module-bottomRow_23eFY {\n  align-items: flex-end;\n}\n\n.CornerAnnotation-module-item_3a4j2 {\n  flex: 1;\n  padding: 5px;\n}\n\n.CornerAnnotation-module-east_symrz {\n  text-align: right;\n}\n\n.CornerAnnotation-module-west_1UDv9 {\n  text-align: left;\n}\n\n.CornerAnnotation-module-north_FnFzY {\n  text-align: center;\n}\n\n.CornerAnnotation-module-south_2Yedl {\n  text-align: center;\n}\n\n.CornerAnnotation-module-northEast_teubZ {\n}\n\n.CornerAnnotation-module-northWest_3jz2J {\n}\n\n.CornerAnnotation-module-southEast_2VhvQ {\n}\n\n.CornerAnnotation-module-southWest_1HXje {\n}\n\n",""]),t.locals={container:"CornerAnnotation-module-container_kpViB",row:"CornerAnnotation-module-row_nWtUc",topRow:"CornerAnnotation-module-topRow_Bl3Yk CornerAnnotation-module-row_nWtUc",middleRow:"CornerAnnotation-module-middleRow_17aXO CornerAnnotation-module-row_nWtUc",bottomRow:"CornerAnnotation-module-bottomRow_23eFY CornerAnnotation-module-row_nWtUc",item:"CornerAnnotation-module-item_3a4j2",east:"CornerAnnotation-module-east_symrz CornerAnnotation-module-item_3a4j2",west:"CornerAnnotation-module-west_1UDv9 CornerAnnotation-module-item_3a4j2",north:"CornerAnnotation-module-north_FnFzY CornerAnnotation-module-item_3a4j2",south:"CornerAnnotation-module-south_2Yedl CornerAnnotation-module-item_3a4j2",northEast:"CornerAnnotation-module-northEast_teubZ CornerAnnotation-module-east_symrz CornerAnnotation-module-item_3a4j2",northWest:"CornerAnnotation-module-northWest_3jz2J CornerAnnotation-module-west_1UDv9 CornerAnnotation-module-item_3a4j2",southEast:"CornerAnnotation-module-southEast_2VhvQ CornerAnnotation-module-east_symrz CornerAnnotation-module-item_3a4j2",southWest:"CornerAnnotation-module-southWest_1HXje CornerAnnotation-module-west_1UDv9 CornerAnnotation-module-item_3a4j2"}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var i,a=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(a)?e:(i=0===a.indexOf("//")?a:0===a.indexOf("/")?n+a:r+a.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},function(e,t,n){(t=e.exports=n(53)(!1)).push([e.i,".FPSMonitor-module-verticalContainer_3rIaH {\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: stretch;\n}\n\n.FPSMonitor-module-horizontalContainer_2amLm {\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n}\n\n.FPSMonitor-module-leftPane_3WdS0 {\n  flex: none;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: stretch;\n}\n\n.FPSMonitor-module-rightPane_SL07L {\n  flex: 1;\n  display: grid;\n  grid-template-columns: auto auto;\n  grid-auto-rows: 1.5em;\n  grid-column-gap: 5px;\n  grid-row-gap: 2px;\n  padding: 10px;\n}\n\n.FPSMonitor-module-title_k0826 {\n  flex: 1;\n  font-weight: bold;\n  padding: 5px 10px 0 10px;\n}\n\n.FPSMonitor-module-graph_1VXYB {\n  flex: none;\n  border: solid 1px black;\n  margin: 10px ;\n  border-radius: 2px;\n  overflow: hidden;\n}\n\n.FPSMonitor-module-label_1ehje {\n  font-weight: bold;\n  text-transform: capitalize;\n  text-align: right;\n  align-self: center;\n}\n\n.FPSMonitor-module-value_nNv5Y {\n  font-style: italic;\n  text-align: center;\n  align-self: center;\n}\n",""]),t.locals={verticalContainer:"FPSMonitor-module-verticalContainer_3rIaH",horizontalContainer:"FPSMonitor-module-horizontalContainer_2amLm",leftPane:"FPSMonitor-module-leftPane_3WdS0",rightPane:"FPSMonitor-module-rightPane_SL07L",title:"FPSMonitor-module-title_k0826",graph:"FPSMonitor-module-graph_1VXYB",label:"FPSMonitor-module-label_1ehje",value:"FPSMonitor-module-value_nNv5Y"}},function(e,t,n){(t=e.exports=n(53)(!1)).push([e.i,".Slider-module-cursor_54qNM {\n  position: absolute;\n  border-radius: 50%;\n  box-sizing: border-box;\n  cursor: move;\n}\n",""]),t.locals={cursor:"Slider-module-cursor_54qNM"}},function(e,t,n){(t=e.exports=n(53)(!1)).push([e.i,".VolumeController-module-container_3uJ69 {\n  display: flex;\n  align-items: stretch;\n  flex-direction: column;\n  justify-content: space-between;\n  position: absolute;\n  top: 5px;\n  left: 5px;\n  background: rgba(128, 128, 128, 0.5);\n  border-radius: 5px;\n  padding: 2px;\n  border: 0.5px solid black;\n  box-sizing: border-box;\n}\n\n.VolumeController-module-line_26tlf {\n  display: flex;\n  flex-direction: row;\n  flex: 1;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.VolumeController-module-button_1ynjw {\n  cursor: pointer;\n  width: 1rem;\n  margin-left: 5px;\n  margin-right: 5px;\n}\n\n.VolumeController-module-button_1ynjw svg {\n  width: 1rem;\n  height: 1rem;\n}\n\n.VolumeController-module-sliderEntry_3WTPI {\n  flex: 1;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n}\n\n.VolumeController-module-sliderIcon_3mJC3 {\n  height: 1rem;\n}\n\n.VolumeController-module-slider_1mu14 {\n  flex: 1;\n  min-height: 1rem;\n  width: 5px;\n}\n\n.VolumeController-module-piecewiseEditor_2d6RP {\n  flex: 1;\n}\n\n.VolumeController-module-select_3O7oC {\n  flex: 1;\n  border: none;\n  background: transparent;\n  color: white;\n  border: none;\n  -moz-appearance: none;\n  width: 5px;\n}\n\n.VolumeController-module-select_3O7oC select:focus {\n  outline: none;\n  border: none;\n}\n\n.VolumeController-module-presets_2-ej6 {\n}\n\n.VolumeController-module-shadow_3op55 {\n}\n\n.VolumeController-module-buttonDarkBG_2nq3H {\n}\n\n.VolumeController-module-presetsDarkBG_1ZUrU {\n  color: white;\n}\n\n.VolumeController-module-presetsDarkBG_1ZUrU option {\n  color: black;\n}\n\n.VolumeController-module-shadowDarkBG_29RYa {\n  color: white;\n}\n\n.VolumeController-module-shadowDarkBG_29RYa option {\n  color: black;\n}\n\n.VolumeController-module-buttonBrightBG_2ueb5 {\n}\n\n.VolumeController-module-presetsBrightBG_3cW23 {\n  color: black;\n}\n\n.VolumeController-module-presetsBrightBG_3cW23 option {\n  color: white;\n}\n\n.VolumeController-module-shadowBrightBG_3FGBk {\n  color: black;\n}\n\n.VolumeController-module-shadowBrightBG_3FGBk option {\n  color: white;\n}\n",""]),t.locals={container:"VolumeController-module-container_3uJ69",line:"VolumeController-module-line_26tlf",button:"VolumeController-module-button_1ynjw",sliderEntry:"VolumeController-module-sliderEntry_3WTPI",sliderIcon:"VolumeController-module-sliderIcon_3mJC3 VolumeController-module-button_1ynjw",slider:"VolumeController-module-slider_1mu14",piecewiseEditor:"VolumeController-module-piecewiseEditor_2d6RP",select:"VolumeController-module-select_3O7oC",presets:"VolumeController-module-presets_2-ej6 VolumeController-module-select_3O7oC",shadow:"VolumeController-module-shadow_3op55 VolumeController-module-select_3O7oC",buttonDarkBG:"VolumeController-module-buttonDarkBG_2nq3H VolumeController-module-button_1ynjw",presetsDarkBG:"VolumeController-module-presetsDarkBG_1ZUrU VolumeController-module-presets_2-ej6 VolumeController-module-select_3O7oC",shadowDarkBG:"VolumeController-module-shadowDarkBG_29RYa VolumeController-module-shadow_3op55 VolumeController-module-select_3O7oC",buttonBrightBG:"VolumeController-module-buttonBrightBG_2ueb5 VolumeController-module-button_1ynjw",presetsBrightBG:"VolumeController-module-presetsBrightBG_3cW23 VolumeController-module-presets_2-ej6 VolumeController-module-select_3O7oC",shadowBrightBG:"VolumeController-module-shadowBrightBG_3FGBk VolumeController-module-shadow_3op55 VolumeController-module-select_3O7oC"}},function(e,t,n){"use strict";var r=n(163),i=n(39),a=n(100),o=n(87),s=n(101),u=Object.prototype.toString,l=0,c=-1,f=0,d=8;function p(e){if(!(this instanceof p))return new p(e);this.options=i.assign({level:c,method:d,chunkSize:16384,windowBits:15,memLevel:8,strategy:f,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==l)throw new Error(o[n]);if(t.header&&r.deflateSetHeader(this.strm,t.header),t.dictionary){var h;if(h="string"==typeof t.dictionary?a.string2buf(t.dictionary):"[object ArrayBuffer]"===u.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=r.deflateSetDictionary(this.strm,h))!==l)throw new Error(o[n]);this._dict_set=!0}}function h(e,t){var n=new p(t);if(n.push(e,!0),n.err)throw n.msg||o[n.err];return n.result}p.prototype.push=function(e,t){var n,o,s=this.strm,c=this.options.chunkSize;if(this.ended)return!1;o=t===~~t?t:!0===t?4:0,"string"==typeof e?s.input=a.string2buf(e):"[object ArrayBuffer]"===u.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new i.Buf8(c),s.next_out=0,s.avail_out=c),1!==(n=r.deflate(s,o))&&n!==l)return this.onEnd(n),this.ended=!0,!1;0!==s.avail_out&&(0!==s.avail_in||4!==o&&2!==o)||("string"===this.options.to?this.onData(a.buf2binstring(i.shrinkBuf(s.output,s.next_out))):this.onData(i.shrinkBuf(s.output,s.next_out)))}while((s.avail_in>0||0===s.avail_out)&&1!==n);return 4===o?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===l):2!==o||(this.onEnd(l),s.avail_out=0,!0)},p.prototype.onData=function(e){this.chunks.push(e)},p.prototype.onEnd=function(e){e===l&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Deflate=p,t.deflate=h,t.deflateRaw=function(e,t){return(t=t||{}).raw=!0,h(e,t)},t.gzip=function(e,t){return(t=t||{}).gzip=!0,h(e,t)}},function(e,t,n){"use strict";var r,i=n(39),a=n(164),o=n(98),s=n(99),u=n(87),l=0,c=1,f=3,d=4,p=5,h=0,g=1,m=-2,v=-3,y=-5,b=-1,M=1,x=2,w=3,A=4,T=0,C=2,S=8,D=9,I=15,E=8,N=286,O=30,_=19,L=2*N+1,P=15,k=3,R=258,j=R+k+1,B=32,z=42,F=69,V=73,U=91,G=103,W=113,H=666,Y=1,Q=2,q=3,X=4,K=3;function Z(e,t){return e.msg=u[t],t}function J(e){return(e<<1)-(e>4?9:0)}function $(e){for(var t=e.length;--t>=0;)e[t]=0}function ee(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(i.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function te(e,t){a._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,ee(e.strm)}function ne(e,t){e.pending_buf[e.pending++]=t}function re(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function ie(e,t){var n,r,i=e.max_chain_length,a=e.strstart,o=e.prev_length,s=e.nice_match,u=e.strstart>e.w_size-j?e.strstart-(e.w_size-j):0,l=e.window,c=e.w_mask,f=e.prev,d=e.strstart+R,p=l[a+o-1],h=l[a+o];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(l[(n=t)+o]===h&&l[n+o-1]===p&&l[n]===l[a]&&l[++n]===l[a+1]){a+=2,n++;do{}while(l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&l[++a]===l[++n]&&a<d);if(r=R-(d-a),a=d-R,r>o){if(e.match_start=t,o=r,r>=s)break;p=l[a+o-1],h=l[a+o]}}}while((t=f[t&c])>u&&0!=--i);return o<=e.lookahead?o:e.lookahead}function ae(e){var t,n,r,a,u,l,c,f,d,p,h=e.w_size;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=h+(h-j)){i.arraySet(e.window,e.window,h,h,0),e.match_start-=h,e.strstart-=h,e.block_start-=h,t=n=e.hash_size;do{r=e.head[--t],e.head[t]=r>=h?r-h:0}while(--n);t=n=h;do{r=e.prev[--t],e.prev[t]=r>=h?r-h:0}while(--n);a+=h}if(0===e.strm.avail_in)break;if(l=e.strm,c=e.window,f=e.strstart+e.lookahead,d=a,p=void 0,(p=l.avail_in)>d&&(p=d),n=0===p?0:(l.avail_in-=p,i.arraySet(c,l.input,l.next_in,p,f),1===l.state.wrap?l.adler=o(l.adler,c,p,f):2===l.state.wrap&&(l.adler=s(l.adler,c,p,f)),l.next_in+=p,l.total_in+=p,p),e.lookahead+=n,e.lookahead+e.insert>=k)for(u=e.strstart-e.insert,e.ins_h=e.window[u],e.ins_h=(e.ins_h<<e.hash_shift^e.window[u+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[u+k-1])&e.hash_mask,e.prev[u&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=u,u++,e.insert--,!(e.lookahead+e.insert<k)););}while(e.lookahead<j&&0!==e.strm.avail_in)}function oe(e,t){for(var n,r;;){if(e.lookahead<j){if(ae(e),e.lookahead<j&&t===l)return Y;if(0===e.lookahead)break}if(n=0,e.lookahead>=k&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+k-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-j&&(e.match_length=ie(e,n)),e.match_length>=k)if(r=a._tr_tally(e,e.strstart-e.match_start,e.match_length-k),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=k){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+k-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(te(e,!1),0===e.strm.avail_out))return Y}return e.insert=e.strstart<k-1?e.strstart:k-1,t===d?(te(e,!0),0===e.strm.avail_out?q:X):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?Y:Q}function se(e,t){for(var n,r,i;;){if(e.lookahead<j){if(ae(e),e.lookahead<j&&t===l)return Y;if(0===e.lookahead)break}if(n=0,e.lookahead>=k&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+k-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=k-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-j&&(e.match_length=ie(e,n),e.match_length<=5&&(e.strategy===M||e.match_length===k&&e.strstart-e.match_start>4096)&&(e.match_length=k-1)),e.prev_length>=k&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-k,r=a._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-k),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+k-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=k-1,e.strstart++,r&&(te(e,!1),0===e.strm.avail_out))return Y}else if(e.match_available){if((r=a._tr_tally(e,0,e.window[e.strstart-1]))&&te(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return Y}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=a._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<k-1?e.strstart:k-1,t===d?(te(e,!0),0===e.strm.avail_out?q:X):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?Y:Q}function ue(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function le(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=S,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*L),this.dyn_dtree=new i.Buf16(2*(2*O+1)),this.bl_tree=new i.Buf16(2*(2*_+1)),$(this.dyn_ltree),$(this.dyn_dtree),$(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(P+1),this.heap=new i.Buf16(2*N+1),$(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*N+1),$(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ce(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=C,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?z:W,e.adler=2===t.wrap?0:1,t.last_flush=l,a._tr_init(t),h):Z(e,m)}function fe(e){var t,n=ce(e);return n===h&&((t=e.state).window_size=2*t.w_size,$(t.head),t.max_lazy_match=r[t.level].max_lazy,t.good_match=r[t.level].good_length,t.nice_match=r[t.level].nice_length,t.max_chain_length=r[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=k-1,t.match_available=0,t.ins_h=0),n}function de(e,t,n,r,a,o){if(!e)return m;var s=1;if(t===b&&(t=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),a<1||a>D||n!==S||r<8||r>15||t<0||t>9||o<0||o>A)return Z(e,m);8===r&&(r=9);var u=new le;return e.state=u,u.strm=e,u.wrap=s,u.gzhead=null,u.w_bits=r,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=a+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+k-1)/k),u.window=new i.Buf8(2*u.w_size),u.head=new i.Buf16(u.hash_size),u.prev=new i.Buf16(u.w_size),u.lit_bufsize=1<<a+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new i.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=t,u.strategy=o,u.method=n,fe(e)}r=[new ue(0,0,0,0,function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(ae(e),0===e.lookahead&&t===l)return Y;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,te(e,!1),0===e.strm.avail_out))return Y;if(e.strstart-e.block_start>=e.w_size-j&&(te(e,!1),0===e.strm.avail_out))return Y}return e.insert=0,t===d?(te(e,!0),0===e.strm.avail_out?q:X):(e.strstart>e.block_start&&(te(e,!1),e.strm.avail_out),Y)}),new ue(4,4,8,4,oe),new ue(4,5,16,8,oe),new ue(4,6,32,32,oe),new ue(4,4,16,16,se),new ue(8,16,32,32,se),new ue(8,16,128,128,se),new ue(8,32,128,256,se),new ue(32,128,258,1024,se),new ue(32,258,258,4096,se)],t.deflateInit=function(e,t){return de(e,t,S,I,E,T)},t.deflateInit2=de,t.deflateReset=fe,t.deflateResetKeep=ce,t.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?m:(e.state.gzhead=t,h):m},t.deflate=function(e,t){var n,i,o,u;if(!e||!e.state||t>p||t<0)return e?Z(e,m):m;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||i.status===H&&t!==d)return Z(e,0===e.avail_out?y:m);if(i.strm=e,n=i.last_flush,i.last_flush=t,i.status===z)if(2===i.wrap)e.adler=0,ne(i,31),ne(i,139),ne(i,8),i.gzhead?(ne(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),ne(i,255&i.gzhead.time),ne(i,i.gzhead.time>>8&255),ne(i,i.gzhead.time>>16&255),ne(i,i.gzhead.time>>24&255),ne(i,9===i.level?2:i.strategy>=x||i.level<2?4:0),ne(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(ne(i,255&i.gzhead.extra.length),ne(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=s(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=F):(ne(i,0),ne(i,0),ne(i,0),ne(i,0),ne(i,0),ne(i,9===i.level?2:i.strategy>=x||i.level<2?4:0),ne(i,K),i.status=W);else{var v=S+(i.w_bits-8<<4)<<8;v|=(i.strategy>=x||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(v|=B),v+=31-v%31,i.status=W,re(i,v),0!==i.strstart&&(re(i,e.adler>>>16),re(i,65535&e.adler)),e.adler=1}if(i.status===F)if(i.gzhead.extra){for(o=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),ee(e),o=i.pending,i.pending!==i.pending_buf_size));)ne(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=V)}else i.status=V;if(i.status===V)if(i.gzhead.name){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),ee(e),o=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,ne(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),0===u&&(i.gzindex=0,i.status=U)}else i.status=U;if(i.status===U)if(i.gzhead.comment){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),ee(e),o=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,ne(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>o&&(e.adler=s(e.adler,i.pending_buf,i.pending-o,o)),0===u&&(i.status=G)}else i.status=G;if(i.status===G&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&ee(e),i.pending+2<=i.pending_buf_size&&(ne(i,255&e.adler),ne(i,e.adler>>8&255),e.adler=0,i.status=W)):i.status=W),0!==i.pending){if(ee(e),0===e.avail_out)return i.last_flush=-1,h}else if(0===e.avail_in&&J(t)<=J(n)&&t!==d)return Z(e,y);if(i.status===H&&0!==e.avail_in)return Z(e,y);if(0!==e.avail_in||0!==i.lookahead||t!==l&&i.status!==H){var b=i.strategy===x?function(e,t){for(var n;;){if(0===e.lookahead&&(ae(e),0===e.lookahead)){if(t===l)return Y;break}if(e.match_length=0,n=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(te(e,!1),0===e.strm.avail_out))return Y}return e.insert=0,t===d?(te(e,!0),0===e.strm.avail_out?q:X):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?Y:Q}(i,t):i.strategy===w?function(e,t){for(var n,r,i,o,s=e.window;;){if(e.lookahead<=R){if(ae(e),e.lookahead<=R&&t===l)return Y;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=k&&e.strstart>0&&(r=s[i=e.strstart-1])===s[++i]&&r===s[++i]&&r===s[++i]){o=e.strstart+R;do{}while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<o);e.match_length=R-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=k?(n=a._tr_tally(e,1,e.match_length-k),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(te(e,!1),0===e.strm.avail_out))return Y}return e.insert=0,t===d?(te(e,!0),0===e.strm.avail_out?q:X):e.last_lit&&(te(e,!1),0===e.strm.avail_out)?Y:Q}(i,t):r[i.level].func(i,t);if(b!==q&&b!==X||(i.status=H),b===Y||b===q)return 0===e.avail_out&&(i.last_flush=-1),h;if(b===Q&&(t===c?a._tr_align(i):t!==p&&(a._tr_stored_block(i,0,0,!1),t===f&&($(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),ee(e),0===e.avail_out))return i.last_flush=-1,h}return t!==d?h:i.wrap<=0?g:(2===i.wrap?(ne(i,255&e.adler),ne(i,e.adler>>8&255),ne(i,e.adler>>16&255),ne(i,e.adler>>24&255),ne(i,255&e.total_in),ne(i,e.total_in>>8&255),ne(i,e.total_in>>16&255),ne(i,e.total_in>>24&255)):(re(i,e.adler>>>16),re(i,65535&e.adler)),ee(e),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?h:g)},t.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==z&&t!==F&&t!==V&&t!==U&&t!==G&&t!==W&&t!==H?Z(e,m):(e.state=null,t===W?Z(e,v):h):m},t.deflateSetDictionary=function(e,t){var n,r,a,s,u,l,c,f,d=t.length;if(!e||!e.state)return m;if(2===(s=(n=e.state).wrap)||1===s&&n.status!==z||n.lookahead)return m;for(1===s&&(e.adler=o(e.adler,t,d,0)),n.wrap=0,d>=n.w_size&&(0===s&&($(n.head),n.strstart=0,n.block_start=0,n.insert=0),f=new i.Buf8(n.w_size),i.arraySet(f,t,d-n.w_size,n.w_size,0),t=f,d=n.w_size),u=e.avail_in,l=e.next_in,c=e.input,e.avail_in=d,e.next_in=0,e.input=t,ae(n);n.lookahead>=k;){r=n.strstart,a=n.lookahead-(k-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+k-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--a);n.strstart=r,n.lookahead=k-1,ae(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=k-1,n.match_available=0,e.next_in=l,e.input=c,e.avail_in=u,n.wrap=s,h},t.deflateInfo="pako deflate (from Nodeca project)"},function(e,t,n){"use strict";var r=n(39),i=4,a=0,o=1,s=2;function u(e){for(var t=e.length;--t>=0;)e[t]=0}var l=0,c=1,f=2,d=29,p=256,h=p+1+d,g=30,m=19,v=2*h+1,y=15,b=16,M=7,x=256,w=16,A=17,T=18,C=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],S=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],I=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],E=new Array(2*(h+2));u(E);var N=new Array(2*g);u(N);var O=new Array(512);u(O);var _=new Array(256);u(_);var L=new Array(d);u(L);var P,k,R,j=new Array(g);function B(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function z(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function F(e){return e<256?O[e]:O[256+(e>>>7)]}function V(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function U(e,t,n){e.bi_valid>b-n?(e.bi_buf|=t<<e.bi_valid&65535,V(e,e.bi_buf),e.bi_buf=t>>b-e.bi_valid,e.bi_valid+=n-b):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function G(e,t,n){U(e,n[2*t],n[2*t+1])}function W(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function H(e,t,n){var r,i,a=new Array(y+1),o=0;for(r=1;r<=y;r++)a[r]=o=o+n[r-1]<<1;for(i=0;i<=t;i++){var s=e[2*i+1];0!==s&&(e[2*i]=W(a[s]++,s))}}function Y(e){var t;for(t=0;t<h;t++)e.dyn_ltree[2*t]=0;for(t=0;t<g;t++)e.dyn_dtree[2*t]=0;for(t=0;t<m;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*x]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function Q(e){e.bi_valid>8?V(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function q(e,t,n,r){var i=2*t,a=2*n;return e[i]<e[a]||e[i]===e[a]&&r[t]<=r[n]}function X(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&q(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!q(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function K(e,t,n){var r,i,a,o,s=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*s]<<8|e.pending_buf[e.d_buf+2*s+1],i=e.pending_buf[e.l_buf+s],s++,0===r?G(e,i,t):(G(e,(a=_[i])+p+1,t),0!==(o=C[a])&&U(e,i-=L[a],o),G(e,a=F(--r),n),0!==(o=S[a])&&U(e,r-=j[a],o))}while(s<e.last_lit);G(e,x,t)}function Z(e,t){var n,r,i,a=t.dyn_tree,o=t.stat_desc.static_tree,s=t.stat_desc.has_stree,u=t.stat_desc.elems,l=-1;for(e.heap_len=0,e.heap_max=v,n=0;n<u;n++)0!==a[2*n]?(e.heap[++e.heap_len]=l=n,e.depth[n]=0):a[2*n+1]=0;for(;e.heap_len<2;)a[2*(i=e.heap[++e.heap_len]=l<2?++l:0)]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=o[2*i+1]);for(t.max_code=l,n=e.heap_len>>1;n>=1;n--)X(e,a,n);i=u;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],X(e,a,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,a[2*i]=a[2*n]+a[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,a[2*n+1]=a[2*r+1]=i,e.heap[1]=i++,X(e,a,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,i,a,o,s,u=t.dyn_tree,l=t.max_code,c=t.stat_desc.static_tree,f=t.stat_desc.has_stree,d=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,h=t.stat_desc.max_length,g=0;for(a=0;a<=y;a++)e.bl_count[a]=0;for(u[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<v;n++)(a=u[2*u[2*(r=e.heap[n])+1]+1]+1)>h&&(a=h,g++),u[2*r+1]=a,r>l||(e.bl_count[a]++,o=0,r>=p&&(o=d[r-p]),s=u[2*r],e.opt_len+=s*(a+o),f&&(e.static_len+=s*(c[2*r+1]+o)));if(0!==g){do{for(a=h-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[h]--,g-=2}while(g>0);for(a=h;0!==a;a--)for(r=e.bl_count[a];0!==r;)(i=e.heap[--n])>l||(u[2*i+1]!==a&&(e.opt_len+=(a-u[2*i+1])*u[2*i],u[2*i+1]=a),r--)}}(e,t),H(a,l,e.bl_count)}function J(e,t,n){var r,i,a=-1,o=t[1],s=0,u=7,l=4;for(0===o&&(u=138,l=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=o,o=t[2*(r+1)+1],++s<u&&i===o||(s<l?e.bl_tree[2*i]+=s:0!==i?(i!==a&&e.bl_tree[2*i]++,e.bl_tree[2*w]++):s<=10?e.bl_tree[2*A]++:e.bl_tree[2*T]++,s=0,a=i,0===o?(u=138,l=3):i===o?(u=6,l=3):(u=7,l=4))}function $(e,t,n){var r,i,a=-1,o=t[1],s=0,u=7,l=4;for(0===o&&(u=138,l=3),r=0;r<=n;r++)if(i=o,o=t[2*(r+1)+1],!(++s<u&&i===o)){if(s<l)do{G(e,i,e.bl_tree)}while(0!=--s);else 0!==i?(i!==a&&(G(e,i,e.bl_tree),s--),G(e,w,e.bl_tree),U(e,s-3,2)):s<=10?(G(e,A,e.bl_tree),U(e,s-3,3)):(G(e,T,e.bl_tree),U(e,s-11,7));s=0,a=i,0===o?(u=138,l=3):i===o?(u=6,l=3):(u=7,l=4)}}u(j);var ee=!1;function te(e,t,n,i){U(e,(l<<1)+(i?1:0),3),function(e,t,n,i){Q(e),i&&(V(e,n),V(e,~n)),r.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n,!0)}t._tr_init=function(e){ee||(function(){var e,t,n,r,i,a=new Array(y+1);for(n=0,r=0;r<d-1;r++)for(L[r]=n,e=0;e<1<<C[r];e++)_[n++]=r;for(_[n-1]=r,i=0,r=0;r<16;r++)for(j[r]=i,e=0;e<1<<S[r];e++)O[i++]=r;for(i>>=7;r<g;r++)for(j[r]=i<<7,e=0;e<1<<S[r]-7;e++)O[256+i++]=r;for(t=0;t<=y;t++)a[t]=0;for(e=0;e<=143;)E[2*e+1]=8,e++,a[8]++;for(;e<=255;)E[2*e+1]=9,e++,a[9]++;for(;e<=279;)E[2*e+1]=7,e++,a[7]++;for(;e<=287;)E[2*e+1]=8,e++,a[8]++;for(H(E,h+1,a),e=0;e<g;e++)N[2*e+1]=5,N[2*e]=W(e,5);P=new B(E,C,p+1,h,y),k=new B(N,S,0,g,y),R=new B(new Array(0),D,0,m,M)}(),ee=!0),e.l_desc=new z(e.dyn_ltree,P),e.d_desc=new z(e.dyn_dtree,k),e.bl_desc=new z(e.bl_tree,R),e.bi_buf=0,e.bi_valid=0,Y(e)},t._tr_stored_block=te,t._tr_flush_block=function(e,t,n,r){var u,l,d=0;e.level>0?(e.strm.data_type===s&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return a;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return o;for(t=32;t<p;t++)if(0!==e.dyn_ltree[2*t])return o;return a}(e)),Z(e,e.l_desc),Z(e,e.d_desc),d=function(e){var t;for(J(e,e.dyn_ltree,e.l_desc.max_code),J(e,e.dyn_dtree,e.d_desc.max_code),Z(e,e.bl_desc),t=m-1;t>=3&&0===e.bl_tree[2*I[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),u=e.opt_len+3+7>>>3,(l=e.static_len+3+7>>>3)<=u&&(u=l)):u=l=n+5,n+4<=u&&-1!==t?te(e,t,n,r):e.strategy===i||l===u?(U(e,(c<<1)+(r?1:0),3),K(e,E,N)):(U(e,(f<<1)+(r?1:0),3),function(e,t,n,r){var i;for(U(e,t-257,5),U(e,n-1,5),U(e,r-4,4),i=0;i<r;i++)U(e,e.bl_tree[2*I[i]+1],3);$(e,e.dyn_ltree,t-1),$(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,d+1),K(e,e.dyn_ltree,e.dyn_dtree)),Y(e),r&&Q(e)},t._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(_[n]+p+1)]++,e.dyn_dtree[2*F(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){U(e,c<<1,3),G(e,x,E),function(e){16===e.bi_valid?(V(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},function(e,t,n){"use strict";var r=n(166),i=n(39),a=n(100),o=n(102),s=n(87),u=n(101),l=n(169),c=Object.prototype.toString;function f(e){if(!(this instanceof f))return new f(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,t.windowBits);if(n!==o.Z_OK)throw new Error(s[n]);this.header=new l,r.inflateGetHeader(this.strm,this.header)}function d(e,t){var n=new f(t);if(n.push(e,!0),n.err)throw n.msg||s[n.err];return n.result}f.prototype.push=function(e,t){var n,s,u,l,f,d,p=this.strm,h=this.options.chunkSize,g=this.options.dictionary,m=!1;if(this.ended)return!1;s=t===~~t?t:!0===t?o.Z_FINISH:o.Z_NO_FLUSH,"string"==typeof e?p.input=a.binstring2buf(e):"[object ArrayBuffer]"===c.call(e)?p.input=new Uint8Array(e):p.input=e,p.next_in=0,p.avail_in=p.input.length;do{if(0===p.avail_out&&(p.output=new i.Buf8(h),p.next_out=0,p.avail_out=h),(n=r.inflate(p,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&g&&(d="string"==typeof g?a.string2buf(g):"[object ArrayBuffer]"===c.call(g)?new Uint8Array(g):g,n=r.inflateSetDictionary(this.strm,d)),n===o.Z_BUF_ERROR&&!0===m&&(n=o.Z_OK,m=!1),n!==o.Z_STREAM_END&&n!==o.Z_OK)return this.onEnd(n),this.ended=!0,!1;p.next_out&&(0!==p.avail_out&&n!==o.Z_STREAM_END&&(0!==p.avail_in||s!==o.Z_FINISH&&s!==o.Z_SYNC_FLUSH)||("string"===this.options.to?(u=a.utf8border(p.output,p.next_out),l=p.next_out-u,f=a.buf2string(p.output,u),p.next_out=l,p.avail_out=h-l,l&&i.arraySet(p.output,p.output,u,l,0),this.onData(f)):this.onData(i.shrinkBuf(p.output,p.next_out)))),0===p.avail_in&&0===p.avail_out&&(m=!0)}while((p.avail_in>0||0===p.avail_out)&&n!==o.Z_STREAM_END);return n===o.Z_STREAM_END&&(s=o.Z_FINISH),s===o.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===o.Z_OK):s!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),p.avail_out=0,!0)},f.prototype.onData=function(e){this.chunks.push(e)},f.prototype.onEnd=function(e){e===o.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=f,t.inflate=d,t.inflateRaw=function(e,t){return(t=t||{}).raw=!0,d(e,t)},t.ungzip=d},function(e,t,n){"use strict";var r=n(39),i=n(98),a=n(99),o=n(167),s=n(168),u=0,l=1,c=2,f=4,d=5,p=6,h=0,g=1,m=2,v=-2,y=-3,b=-4,M=-5,x=8,w=1,A=2,T=3,C=4,S=5,D=6,I=7,E=8,N=9,O=10,_=11,L=12,P=13,k=14,R=15,j=16,B=17,z=18,F=19,V=20,U=21,G=22,W=23,H=24,Y=25,Q=26,q=27,X=28,K=29,Z=30,J=31,$=32,ee=852,te=592,ne=15;function re(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function ie(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function ae(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=w,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(ee),t.distcode=t.distdyn=new r.Buf32(te),t.sane=1,t.back=-1,h):v}function oe(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,ae(e)):v}function se(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?v:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,oe(e))):v}function ue(e,t){var n,r;return e?(r=new ie,e.state=r,r.window=null,(n=se(e,t))!==h&&(e.state=null),n):v}var le,ce,fe=!0;function de(e){if(fe){var t;for(le=new r.Buf32(512),ce=new r.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(l,e.lens,0,288,le,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(c,e.lens,0,32,ce,0,e.work,{bits:5}),fe=!1}e.lencode=le,e.lenbits=9,e.distcode=ce,e.distbits=5}function pe(e,t,n,i){var a,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new r.Buf8(o.wsize)),i>=o.wsize?(r.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((a=o.wsize-o.wnext)>i&&(a=i),r.arraySet(o.window,t,n-i,a,o.wnext),(i-=a)?(r.arraySet(o.window,t,n-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0}t.inflateReset=oe,t.inflateReset2=se,t.inflateResetKeep=ae,t.inflateInit=function(e){return ue(e,ne)},t.inflateInit2=ue,t.inflate=function(e,t){var n,ee,te,ne,ie,ae,oe,se,ue,le,ce,fe,he,ge,me,ve,ye,be,Me,xe,we,Ae,Te,Ce,Se=0,De=new r.Buf8(4),Ie=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return v;(n=e.state).mode===L&&(n.mode=P),ie=e.next_out,te=e.output,oe=e.avail_out,ne=e.next_in,ee=e.input,ae=e.avail_in,se=n.hold,ue=n.bits,le=ae,ce=oe,Ae=h;e:for(;;)switch(n.mode){case w:if(0===n.wrap){n.mode=P;break}for(;ue<16;){if(0===ae)break e;ae--,se+=ee[ne++]<<ue,ue+=8}if(2&n.wrap&&35615===se){n.check=0,De[0]=255&se,De[1]=se>>>8&255,n.check=a(n.check,De,2,0),se=0,ue=0,n.mode=A;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&se)<<8)+(se>>8))%31){e.msg="incorrect header check",n.mode=Z;break}if((15&se)!==x){e.msg="unknown compression method",n.mode=Z;break}if(ue-=4,we=8+(15&(se>>>=4)),0===n.wbits)n.wbits=we;else if(we>n.wbits){e.msg="invalid window size",n.mode=Z;break}n.dmax=1<<we,e.adler=n.check=1,n.mode=512&se?O:L,se=0,ue=0;break;case A:for(;ue<16;){if(0===ae)break e;ae--,se+=ee[ne++]<<ue,ue+=8}if(n.flags=se,(255&n.flags)!==x){e.msg="unknown compression method",n.mode=Z;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=Z;break}n.head&&(n.head.text=se>>8&1),512&n.flags&&(De[0]=255&se,De[1]=se>>>8&255,n.check=a(n.check,De,2,0)),se=0,ue=0,n.mode=T;case T:for(;ue<32;){if(0===ae)break e;ae--,se+=ee[ne++]<<ue,ue+=8}n.head&&(n.head.time=se),512&n.flags&&(De[0]=255&se,De[1]=se>>>8&255,De[2]=se>>>16&255,De[3]=se>>>24&255,n.check=a(n.check,De,4,0)),se=0,ue=0,n.mode=C;case C:for(;ue<16;){if(0===ae)break e;ae--,se+=ee[ne++]<<ue,ue+=8}n.head&&(n.head.xflags=255&se,n.head.os=se>>8),512&n.flags&&(De[0]=255&se,De[1]=se>>>8&255,n.check=a(n.check,De,2,0)),se=0,ue=0,n.mode=S;case S:if(1024&n.flags){for(;ue<16;){if(0===ae)break e;ae--,se+=ee[ne++]<<ue,ue+=8}n.length=se,n.head&&(n.head.extra_len=se),512&n.flags&&(De[0]=255&se,De[1]=se>>>8&255,n.check=a(n.check,De,2,0)),se=0,ue=0}else n.head&&(n.head.extra=null);n.mode=D;case D:if(1024&n.flags&&((fe=n.length)>ae&&(fe=ae),fe&&(n.head&&(we=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,ee,ne,fe,we)),512&n.flags&&(n.check=a(n.check,ee,fe,ne)),ae-=fe,ne+=fe,n.length-=fe),n.length))break e;n.length=0,n.mode=I;case I:if(2048&n.flags){if(0===ae)break e;fe=0;do{we=ee[ne+fe++],n.head&&we&&n.length<65536&&(n.head.name+=String.fromCharCode(we))}while(we&&fe<ae);if(512&n.flags&&(n.check=a(n.check,ee,fe,ne)),ae-=fe,ne+=fe,we)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=E;case E:if(4096&n.flags){if(0===ae)break e;fe=0;do{we=ee[ne+fe++],n.head&&we&&n.length<65536&&(n.head.comment+=String.fromCharCode(we))}while(we&&fe<ae);if(512&n.flags&&(n.check=a(n.check,ee,fe,ne)),ae-=fe,ne+=fe,we)break e}else n.head&&(n.head.comment=null);n.mode=N;case N:if(512&n.flags){for(;ue<16;){if(0===ae)break e;ae--,se+=ee[ne++]<<ue,ue+=8}if(se!==(65535&n.check)){e.msg="header crc mismatch",n.mode=Z;break}se=0,ue=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=L;break;case O:for(;ue<32;){if(0===ae)break e;ae--,se+=ee[ne++]<<ue,ue+=8}e.adler=n.check=re(se),se=0,ue=0,n.mode=_;case _:if(0===n.havedict)return e.next_out=ie,e.avail_out=oe,e.next_in=ne,e.avail_in=ae,n.hold=se,n.bits=ue,m;e.adler=n.check=1,n.mode=L;case L:if(t===d||t===p)break e;case P:if(n.last){se>>>=7&ue,ue-=7&ue,n.mode=q;break}for(;ue<3;){if(0===ae)break e;ae--,se+=ee[ne++]<<ue,ue+=8}switch(n.last=1&se,ue-=1,3&(se>>>=1)){case 0:n.mode=k;break;case 1:if(de(n),n.mode=V,t===p){se>>>=2,ue-=2;break e}break;case 2:n.mode=B;break;case 3:e.msg="invalid block type",n.mode=Z}se>>>=2,ue-=2;break;case k:for(se>>>=7&ue,ue-=7&ue;ue<32;){if(0===ae)break e;ae--,se+=ee[ne++]<<ue,ue+=8}if((65535&se)!=(se>>>16^65535)){e.msg="invalid stored block lengths",n.mode=Z;break}if(n.length=65535&se,se=0,ue=0,n.mode=R,t===p)break e;case R:n.mode=j;case j:if(fe=n.length){if(fe>ae&&(fe=ae),fe>oe&&(fe=oe),0===fe)break e;r.arraySet(te,ee,ne,fe,ie),ae-=fe,ne+=fe,oe-=fe,ie+=fe,n.length-=fe;break}n.mode=L;break;case B:for(;ue<14;){if(0===ae)break e;ae--,se+=ee[ne++]<<ue,ue+=8}if(n.nlen=257+(31&se),se>>>=5,ue-=5,n.ndist=1+(31&se),se>>>=5,ue-=5,n.ncode=4+(15&se),se>>>=4,ue-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=Z;break}n.have=0,n.mode=z;case z:for(;n.have<n.ncode;){for(;ue<3;){if(0===ae)break e;ae--,se+=ee[ne++]<<ue,ue+=8}n.lens[Ie[n.have++]]=7&se,se>>>=3,ue-=3}for(;n.have<19;)n.lens[Ie[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,Te={bits:n.lenbits},Ae=s(u,n.lens,0,19,n.lencode,0,n.work,Te),n.lenbits=Te.bits,Ae){e.msg="invalid code lengths set",n.mode=Z;break}n.have=0,n.mode=F;case F:for(;n.have<n.nlen+n.ndist;){for(;ve=(Se=n.lencode[se&(1<<n.lenbits)-1])>>>16&255,ye=65535&Se,!((me=Se>>>24)<=ue);){if(0===ae)break e;ae--,se+=ee[ne++]<<ue,ue+=8}if(ye<16)se>>>=me,ue-=me,n.lens[n.have++]=ye;else{if(16===ye){for(Ce=me+2;ue<Ce;){if(0===ae)break e;ae--,se+=ee[ne++]<<ue,ue+=8}if(se>>>=me,ue-=me,0===n.have){e.msg="invalid bit length repeat",n.mode=Z;break}we=n.lens[n.have-1],fe=3+(3&se),se>>>=2,ue-=2}else if(17===ye){for(Ce=me+3;ue<Ce;){if(0===ae)break e;ae--,se+=ee[ne++]<<ue,ue+=8}ue-=me,we=0,fe=3+(7&(se>>>=me)),se>>>=3,ue-=3}else{for(Ce=me+7;ue<Ce;){if(0===ae)break e;ae--,se+=ee[ne++]<<ue,ue+=8}ue-=me,we=0,fe=11+(127&(se>>>=me)),se>>>=7,ue-=7}if(n.have+fe>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=Z;break}for(;fe--;)n.lens[n.have++]=we}}if(n.mode===Z)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=Z;break}if(n.lenbits=9,Te={bits:n.lenbits},Ae=s(l,n.lens,0,n.nlen,n.lencode,0,n.work,Te),n.lenbits=Te.bits,Ae){e.msg="invalid literal/lengths set",n.mode=Z;break}if(n.distbits=6,n.distcode=n.distdyn,Te={bits:n.distbits},Ae=s(c,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,Te),n.distbits=Te.bits,Ae){e.msg="invalid distances set",n.mode=Z;break}if(n.mode=V,t===p)break e;case V:n.mode=U;case U:if(ae>=6&&oe>=258){e.next_out=ie,e.avail_out=oe,e.next_in=ne,e.avail_in=ae,n.hold=se,n.bits=ue,o(e,ce),ie=e.next_out,te=e.output,oe=e.avail_out,ne=e.next_in,ee=e.input,ae=e.avail_in,se=n.hold,ue=n.bits,n.mode===L&&(n.back=-1);break}for(n.back=0;ve=(Se=n.lencode[se&(1<<n.lenbits)-1])>>>16&255,ye=65535&Se,!((me=Se>>>24)<=ue);){if(0===ae)break e;ae--,se+=ee[ne++]<<ue,ue+=8}if(ve&&0==(240&ve)){for(be=me,Me=ve,xe=ye;ve=(Se=n.lencode[xe+((se&(1<<be+Me)-1)>>be)])>>>16&255,ye=65535&Se,!(be+(me=Se>>>24)<=ue);){if(0===ae)break e;ae--,se+=ee[ne++]<<ue,ue+=8}se>>>=be,ue-=be,n.back+=be}if(se>>>=me,ue-=me,n.back+=me,n.length=ye,0===ve){n.mode=Q;break}if(32&ve){n.back=-1,n.mode=L;break}if(64&ve){e.msg="invalid literal/length code",n.mode=Z;break}n.extra=15&ve,n.mode=G;case G:if(n.extra){for(Ce=n.extra;ue<Ce;){if(0===ae)break e;ae--,se+=ee[ne++]<<ue,ue+=8}n.length+=se&(1<<n.extra)-1,se>>>=n.extra,ue-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=W;case W:for(;ve=(Se=n.distcode[se&(1<<n.distbits)-1])>>>16&255,ye=65535&Se,!((me=Se>>>24)<=ue);){if(0===ae)break e;ae--,se+=ee[ne++]<<ue,ue+=8}if(0==(240&ve)){for(be=me,Me=ve,xe=ye;ve=(Se=n.distcode[xe+((se&(1<<be+Me)-1)>>be)])>>>16&255,ye=65535&Se,!(be+(me=Se>>>24)<=ue);){if(0===ae)break e;ae--,se+=ee[ne++]<<ue,ue+=8}se>>>=be,ue-=be,n.back+=be}if(se>>>=me,ue-=me,n.back+=me,64&ve){e.msg="invalid distance code",n.mode=Z;break}n.offset=ye,n.extra=15&ve,n.mode=H;case H:if(n.extra){for(Ce=n.extra;ue<Ce;){if(0===ae)break e;ae--,se+=ee[ne++]<<ue,ue+=8}n.offset+=se&(1<<n.extra)-1,se>>>=n.extra,ue-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=Z;break}n.mode=Y;case Y:if(0===oe)break e;if(fe=ce-oe,n.offset>fe){if((fe=n.offset-fe)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=Z;break}fe>n.wnext?(fe-=n.wnext,he=n.wsize-fe):he=n.wnext-fe,fe>n.length&&(fe=n.length),ge=n.window}else ge=te,he=ie-n.offset,fe=n.length;fe>oe&&(fe=oe),oe-=fe,n.length-=fe;do{te[ie++]=ge[he++]}while(--fe);0===n.length&&(n.mode=U);break;case Q:if(0===oe)break e;te[ie++]=n.length,oe--,n.mode=U;break;case q:if(n.wrap){for(;ue<32;){if(0===ae)break e;ae--,se|=ee[ne++]<<ue,ue+=8}if(ce-=oe,e.total_out+=ce,n.total+=ce,ce&&(e.adler=n.check=n.flags?a(n.check,te,ce,ie-ce):i(n.check,te,ce,ie-ce)),ce=oe,(n.flags?se:re(se))!==n.check){e.msg="incorrect data check",n.mode=Z;break}se=0,ue=0}n.mode=X;case X:if(n.wrap&&n.flags){for(;ue<32;){if(0===ae)break e;ae--,se+=ee[ne++]<<ue,ue+=8}if(se!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=Z;break}se=0,ue=0}n.mode=K;case K:Ae=g;break e;case Z:Ae=y;break e;case J:return b;case $:default:return v}return e.next_out=ie,e.avail_out=oe,e.next_in=ne,e.avail_in=ae,n.hold=se,n.bits=ue,(n.wsize||ce!==e.avail_out&&n.mode<Z&&(n.mode<q||t!==f))&&pe(e,e.output,e.next_out,ce-e.avail_out)?(n.mode=J,b):(le-=e.avail_in,ce-=e.avail_out,e.total_in+=le,e.total_out+=ce,n.total+=ce,n.wrap&&ce&&(e.adler=n.check=n.flags?a(n.check,te,ce,e.next_out-ce):i(n.check,te,ce,e.next_out-ce)),e.data_type=n.bits+(n.last?64:0)+(n.mode===L?128:0)+(n.mode===V||n.mode===R?256:0),(0===le&&0===ce||t===f)&&Ae===h&&(Ae=M),Ae)},t.inflateEnd=function(e){if(!e||!e.state)return v;var t=e.state;return t.window&&(t.window=null),e.state=null,h},t.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?v:(n.head=t,t.done=!1,h):v},t.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&n.mode!==_?v:n.mode===_&&i(1,t,r,0)!==n.check?y:pe(e,t,r,r)?(n.mode=J,b):(n.havedict=1,h):v},t.inflateInfo="pako inflate (from Nodeca project)"},function(e,t,n){"use strict";e.exports=function(e,t){var n,r,i,a,o,s,u,l,c,f,d,p,h,g,m,v,y,b,M,x,w,A,T,C,S;n=e.state,r=e.next_in,C=e.input,i=r+(e.avail_in-5),a=e.next_out,S=e.output,o=a-(t-e.avail_out),s=a+(e.avail_out-257),u=n.dmax,l=n.wsize,c=n.whave,f=n.wnext,d=n.window,p=n.hold,h=n.bits,g=n.lencode,m=n.distcode,v=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;e:do{h<15&&(p+=C[r++]<<h,h+=8,p+=C[r++]<<h,h+=8),b=g[p&v];t:for(;;){if(p>>>=M=b>>>24,h-=M,0===(M=b>>>16&255))S[a++]=65535&b;else{if(!(16&M)){if(0==(64&M)){b=g[(65535&b)+(p&(1<<M)-1)];continue t}if(32&M){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}x=65535&b,(M&=15)&&(h<M&&(p+=C[r++]<<h,h+=8),x+=p&(1<<M)-1,p>>>=M,h-=M),h<15&&(p+=C[r++]<<h,h+=8,p+=C[r++]<<h,h+=8),b=m[p&y];n:for(;;){if(p>>>=M=b>>>24,h-=M,!(16&(M=b>>>16&255))){if(0==(64&M)){b=m[(65535&b)+(p&(1<<M)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(w=65535&b,h<(M&=15)&&(p+=C[r++]<<h,(h+=8)<M&&(p+=C[r++]<<h,h+=8)),(w+=p&(1<<M)-1)>u){e.msg="invalid distance too far back",n.mode=30;break e}if(p>>>=M,h-=M,w>(M=a-o)){if((M=w-M)>c&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(A=0,T=d,0===f){if(A+=l-M,M<x){x-=M;do{S[a++]=d[A++]}while(--M);A=a-w,T=S}}else if(f<M){if(A+=l+f-M,(M-=f)<x){x-=M;do{S[a++]=d[A++]}while(--M);if(A=0,f<x){x-=M=f;do{S[a++]=d[A++]}while(--M);A=a-w,T=S}}}else if(A+=f-M,M<x){x-=M;do{S[a++]=d[A++]}while(--M);A=a-w,T=S}for(;x>2;)S[a++]=T[A++],S[a++]=T[A++],S[a++]=T[A++],x-=3;x&&(S[a++]=T[A++],x>1&&(S[a++]=T[A++]))}else{A=a-w;do{S[a++]=S[A++],S[a++]=S[A++],S[a++]=S[A++],x-=3}while(x>2);x&&(S[a++]=S[A++],x>1&&(S[a++]=S[A++]))}break}}break}}while(r<i&&a<s);r-=x=h>>3,p&=(1<<(h-=x<<3))-1,e.next_in=r,e.next_out=a,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=a<s?s-a+257:257-(a-s),n.hold=p,n.bits=h}},function(e,t,n){"use strict";var r=n(39),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,n,u,l,c,f,d){var p,h,g,m,v,y,b,M,x,w=d.bits,A=0,T=0,C=0,S=0,D=0,I=0,E=0,N=0,O=0,_=0,L=null,P=0,k=new r.Buf16(16),R=new r.Buf16(16),j=null,B=0;for(A=0;A<=15;A++)k[A]=0;for(T=0;T<u;T++)k[t[n+T]]++;for(D=w,S=15;S>=1&&0===k[S];S--);if(D>S&&(D=S),0===S)return l[c++]=20971520,l[c++]=20971520,d.bits=1,0;for(C=1;C<S&&0===k[C];C++);for(D<C&&(D=C),N=1,A=1;A<=15;A++)if(N<<=1,(N-=k[A])<0)return-1;if(N>0&&(0===e||1!==S))return-1;for(R[1]=0,A=1;A<15;A++)R[A+1]=R[A]+k[A];for(T=0;T<u;T++)0!==t[n+T]&&(f[R[t[n+T]]++]=T);if(0===e?(L=j=f,y=19):1===e?(L=i,P-=257,j=a,B-=257,y=256):(L=o,j=s,y=-1),_=0,T=0,A=C,v=c,I=D,E=0,g=-1,m=(O=1<<D)-1,1===e&&O>852||2===e&&O>592)return 1;for(;;){b=A-E,f[T]<y?(M=0,x=f[T]):f[T]>y?(M=j[B+f[T]],x=L[P+f[T]]):(M=96,x=0),p=1<<A-E,C=h=1<<I;do{l[v+(_>>E)+(h-=p)]=b<<24|M<<16|x|0}while(0!==h);for(p=1<<A-1;_&p;)p>>=1;if(0!==p?(_&=p-1,_+=p):_=0,T++,0==--k[A]){if(A===S)break;A=t[n+f[T]]}if(A>D&&(_&m)!==g){for(0===E&&(E=D),v+=C,N=1<<(I=A-E);I+E<S&&!((N-=k[I+E])<=0);)I++,N<<=1;if(O+=1<<I,1===e&&O>852||2===e&&O>592)return 1;l[g=_&m]=D<<24|I<<16|v-c|0}}return 0!==_&&(l[v+_]=A-E<<24|64<<16|0),d.bits=D,0}},function(e,t,n){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},function(e,t,n){"use strict";var r=n(49),i=n(13),a=n(28),o=n(113),s=n(114),u=n(93),l=n(200),c=n(201),f=n(63),d=n(204),p=function(e,t,n){var r,o=i.getTypeOf(t),c=i.extend(n||{},s);c.date=c.date||new Date,null!==c.compression&&(c.compression=c.compression.toUpperCase()),"string"==typeof c.unixPermissions&&(c.unixPermissions=parseInt(c.unixPermissions,8)),c.unixPermissions&&16384&c.unixPermissions&&(c.dir=!0),c.dosPermissions&&16&c.dosPermissions&&(c.dir=!0),c.dir&&(e=g(e)),c.createFolders&&(r=h(e))&&m.call(this,r,!0);var p="string"===o&&!1===c.binary&&!1===c.base64;n&&void 0!==n.binary||(c.binary=!p),(t instanceof u&&0===t.uncompressedSize||c.dir||!t||0===t.length)&&(c.base64=!1,c.binary=!0,t="",c.compression="STORE",o="string");var v=null;v=t instanceof u||t instanceof a?t:f.isNode&&f.isStream(t)?new d(e,t):i.prepareContent(e,t,c.binary,c.optimizedBinaryString,c.base64);var y=new l(e,v,c);this.files[e]=y},h=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return t>0?e.substring(0,t):""},g=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},m=function(e,t){return t=void 0!==t?t:s.createFolders,e=g(e),this.files[e]||p.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function v(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var y={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,n,r;for(t in this.files)this.files.hasOwnProperty(t)&&(r=this.files[t],(n=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(n,r))},filter:function(e){var t=[];return this.forEach(function(n,r){e(n,r)&&t.push(r)}),t},file:function(e,t,n){if(1===arguments.length){if(v(e)){var r=e;return this.filter(function(e,t){return!t.dir&&r.test(e)})}var i=this.files[this.root+e];return i&&!i.dir?i:null}return e=this.root+e,p.call(this,e,t,n),this},folder:function(e){if(!e)return this;if(v(e))return this.filter(function(t,n){return n.dir&&e.test(t)});var t=this.root+e,n=m.call(this,t),r=this.clone();return r.root=n.name,r},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var n=this.filter(function(t,n){return n.name.slice(0,e.length)===e}),r=0;r<n.length;r++)delete this.files[n[r].name];return this},generate:function(e){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,n={};try{if((n=i.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:r.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");i.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var s=n.comment||this.comment||"";t=c.generateWorker(this,n,s)}catch(e){(t=new a("error")).error(e)}return new o(t,n.type||"string",n.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};e.exports=y},function(e,t){t.read=function(e,t,n,r,i){var a,o,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,f=n?i-1:0,d=n?-1:1,p=e[t+f];for(f+=d,a=p&(1<<-c)-1,p>>=-c,c+=s;c>0;a=256*a+e[t+f],f+=d,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=r;c>0;o=256*o+e[t+f],f+=d,c-=8);if(0===a)a=1-l;else{if(a===u)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,r),a-=l}return(p?-1:1)*o*Math.pow(2,a-r)},t.write=function(e,t,n,r,i,a){var o,s,u,l=8*a-i-1,c=(1<<l)-1,f=c>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:a-1,h=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+f>=1?d/u:d*Math.pow(2,1-f))*u>=2&&(o++,u/=2),o+f>=c?(s=0,o=c):o+f>=1?(s=(t*u-1)*Math.pow(2,i),o+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;e[n+p]=255&s,p+=h,s/=256,i-=8);for(o=o<<i|s,l+=i;l>0;e[n+p]=255&o,p+=h,o/=256,l-=8);e[n+p-h]|=128*g}},function(e,t,n){var r=function(){try{return n(60)}catch(e){}}();(t=e.exports=n(105)).Stream=r||t,t.Readable=t,t.Writable=n(89),t.Duplex=n(46),t.Transform=n(90),t.PassThrough=n(107)},function(e,t){},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new a(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new a(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(175),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(33))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i,a,o,s,u=1,l={},c=!1,f=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick(function(){h(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((a=new MessageChannel).port1.onmessage=function(e){h(e.data)},r=function(e){a.port2.postMessage(e)}):f&&"onreadystatechange"in f.createElement("script")?(i=f.documentElement,r=function(e){var t=f.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):r=function(e){setTimeout(h,0,e)}:(o="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(o)&&h(+t.data.slice(o.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),r=function(t){e.postMessage(o+t,"*")}),d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return l[u]=i,r(u),u++},d.clearImmediate=p}function p(e){delete l[e]}function h(e){if(c)setTimeout(h,0,e);else{var t=l[e];if(t){c=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{p(e),c=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(33),n(62))},function(e,t,n){(function(t){function n(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}}).call(this,n(33))},function(e,t,n){var r=n(35),i=r.Buffer;function a(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(a(r,t),t.Buffer=o),a(i,o),o.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},function(e,t,n){e.exports=n(89)},function(e,t,n){e.exports=n(46)},function(e,t,n){e.exports=n(90)},function(e,t,n){e.exports=n(107)},function(e,t,n){n(183),e.exports=n(109).setImmediate},function(e,t,n){var r=n(184),i=n(192);r(r.G+r.B,{setImmediate:i.set,clearImmediate:i.clear})},function(e,t,n){var r=n(64),i=n(109),a=n(110),o=n(186),s=function e(t,n,s){var u,l,c,f=t&e.F,d=t&e.G,p=t&e.S,h=t&e.P,g=t&e.B,m=t&e.W,v=d?i:i[n]||(i[n]={}),y=v.prototype,b=d?r:p?r[n]:(r[n]||{}).prototype;for(u in d&&(s=n),s)(l=!f&&b&&void 0!==b[u])&&u in v||(c=l?b[u]:s[u],v[u]=d&&"function"!=typeof b[u]?s[u]:g&&l?a(c,r):m&&b[u]==c?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(c):h&&"function"==typeof c?a(Function.call,c):c,h&&((v.virtual||(v.virtual={}))[u]=c,t&e.R&&y&&!y[u]&&o(y,u,c)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(187),i=n(191);e.exports=n(92)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(188),i=n(189),a=n(190),o=Object.defineProperty;t.f=n(92)?Object.defineProperty:function(e,t,n){if(r(e),t=a(t,!0),r(n),i)try{return o(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(91);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){e.exports=!n(92)&&!n(111)(function(){return 7!=Object.defineProperty(n(112)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(91);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r,i,a,o=n(110),s=n(193),u=n(194),l=n(112),c=n(64),f=c.process,d=c.setImmediate,p=c.clearImmediate,h=c.MessageChannel,g=0,m={},v=function(){var e=+this;if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},y=function(e){v.call(e.data)};d&&p||(d=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return m[++g]=function(){s("function"==typeof e?e:Function(e),t)},r(g),g},p=function(e){delete m[e]},"process"==n(195)(f)?r=function(e){f.nextTick(o(v,e,1))}:h?(a=(i=new h).port2,i.port1.onmessage=y,r=o(a.postMessage,a,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(r=function(e){c.postMessage(e+"","*")},c.addEventListener("message",y,!1)):r="onreadystatechange"in l("script")?function(e){u.appendChild(l("script")).onreadystatechange=function(){u.removeChild(this),v.call(e)}}:function(e){setTimeout(o(v,e,1),0)}),e.exports={set:d,clear:p}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){e.exports=n(64).document&&document.documentElement},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(197);function a(){}var o={},s=["REJECTED"],u=["FULFILLED"],l=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==a&&h(this,e)}function f(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function d(e,t,n){i(function(){var r;try{r=t(n)}catch(t){return o.reject(e,t)}r===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,r)})}function p(e){var t=e&&e.then;if(e&&("object"===r(e)||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function h(e,t){var n=!1;function r(t){n||(n=!0,o.reject(e,t))}function i(t){n||(n=!0,o.resolve(e,t))}var a=g(function(){t(i,r)});"error"===a.status&&r(a.value)}function g(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}e.exports=c,c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===u||"function"!=typeof t&&this.state===s)return this;var n=new this.constructor(a);this.state!==l?d(n,this.state===u?e:t,this.outcome):this.queue.push(new f(n,e,t));return n},f.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},f.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},f.prototype.callRejected=function(e){o.reject(this.promise,e)},f.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},o.resolve=function(e,t){var n=g(p,t);if("error"===n.status)return o.reject(e,n.value);var r=n.value;if(r)h(e,r);else{e.state=u,e.outcome=t;for(var i=-1,a=e.queue.length;++i<a;)e.queue[i].callFulfilled(t)}return e},o.reject=function(e,t){e.state=s,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},c.resolve=function(e){if(e instanceof this)return e;return o.resolve(new this(a),e)},c.reject=function(e){var t=new this(a);return o.reject(t,e)},c.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);var i=new Array(n),s=0,u=-1,l=new this(a);for(;++u<n;)c(e[u],u);return l;function c(e,a){t.resolve(e).then(function(e){i[a]=e,++s!==n||r||(r=!0,o.resolve(l,i))},function(e){r||(r=!0,o.reject(l,e))})}},c.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);var i=-1,s=new this(a);for(;++i<n;)u=e[i],t.resolve(u).then(function(e){r||(r=!0,o.resolve(s,e))},function(e){r||(r=!0,o.reject(s,e))});var u;return s}},function(e,t,n){"use strict";(function(t){var n,r,i=t.MutationObserver||t.WebKitMutationObserver;if(i){var a=0,o=new i(c),s=t.document.createTextNode("");o.observe(s,{characterData:!0}),n=function(){s.data=a=++a%2}}else if(t.setImmediate||void 0===t.MessageChannel)n="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){c(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(c,0)};else{var u=new t.MessageChannel;u.port1.onmessage=c,n=function(){u.port2.postMessage(0)}}var l=[];function c(){var e,t;r=!0;for(var n=l.length;n;){for(t=l,l=[],e=-1;++e<n;)t[e]();n=l.length}r=!1}e.exports=function(e){1!==l.push(e)||r||n()}}).call(this,n(33))},function(e,t,n){"use strict";var r=n(28),i=n(13);function a(e){r.call(this,"ConvertWorker to "+e),this.destType=e}i.inherits(a,r),a.prototype.processChunk=function(e){this.push({data:i.transformTo(this.destType,e.data),meta:e.meta})},e.exports=a},function(e,t,n){"use strict";var r=n(104).Readable;function i(e,t,n){r.call(this,t),this._helper=e;var i=this;e.on("data",function(e,t){i.push(e)||i._helper.pause(),n&&n(t)}).on("error",function(e){i.emit("error",e)}).on("end",function(){i.push(null)})}n(13).inherits(i,r),i.prototype._read=function(){this._helper.resume()},e.exports=i},function(e,t,n){"use strict";var r=n(113),i=n(115),a=n(49),o=n(93),s=n(28),u=function(e,t,n){this.name=e,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=t,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}};u.prototype={internalStream:function(e){var t=e.toLowerCase(),n="string"===t||"text"===t;"binarystring"!==t&&"text"!==t||(t="string");var i=this._decompressWorker(),o=!this._dataBinary;return o&&!n&&(i=i.pipe(new a.Utf8EncodeWorker)),!o&&n&&(i=i.pipe(new a.Utf8DecodeWorker)),new r(i,t,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof o&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new a.Utf8EncodeWorker)),o.createWorkerFrom(n,e,t)},_decompressWorker:function(){return this._data instanceof o?this._data.getContentWorker():this._data instanceof s?this._data:new i(this._data)}};for(var l=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],c=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},f=0;f<l.length;f++)u.prototype[l[f]]=c;e.exports=u},function(e,t,n){"use strict";var r=n(118),i=n(203);t.generateWorker=function(e,t,n){var a=new i(t.streamFiles,n,t.platform,t.encodeFileName),o=0;try{e.forEach(function(e,n){o++;var i=function(e,t){var n=e||t,i=r[n];if(!i)throw new Error(n+" is not a valid compression method !");return i}(n.options.compression,t.compression),s=n.options.compressionOptions||t.compressionOptions||{},u=n.dir,l=n.date;n._compressWorker(i,s).withStreamInfo("file",{name:e,dir:u,date:l,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(a)}),a.entriesCount=o}catch(e){a.error(e)}return a}},function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=n(17),a=n(13),o=n(28),s=r?"uint8array":"array";function u(e,t){o.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}t.magic="\b\0",a.inherits(u,o),u.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(a.transformTo(s,e.data),!1)},u.prototype.flush=function(){o.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},t.compressWorker=function(e){return new u("Deflate",e)},t.uncompressWorker=function(){return new u("Inflate",{})}},function(e,t,n){"use strict";var r=n(13),i=n(28),a=n(49),o=n(94),s=n(119),u=function(e,t){var n,r="";for(n=0;n<t;n++)r+=String.fromCharCode(255&e),e>>>=8;return r},l=function(e,t,n,i,l,c){var f,d,p=e.file,h=e.compression,g=c!==a.utf8encode,m=r.transformTo("string",c(p.name)),v=r.transformTo("string",a.utf8encode(p.name)),y=p.comment,b=r.transformTo("string",c(y)),M=r.transformTo("string",a.utf8encode(y)),x=v.length!==p.name.length,w=M.length!==y.length,A="",T="",C="",S=p.dir,D=p.date,I={crc32:0,compressedSize:0,uncompressedSize:0};t&&!n||(I.crc32=e.crc32,I.compressedSize=e.compressedSize,I.uncompressedSize=e.uncompressedSize);var E=0;t&&(E|=8),g||!x&&!w||(E|=2048);var N,O,_,L=0,P=0;S&&(L|=16),"UNIX"===l?(P=798,L|=(N=p.unixPermissions,O=S,_=N,N||(_=O?16893:33204),(65535&_)<<16)):(P=20,L|=63&(p.dosPermissions||0)),f=D.getUTCHours(),f<<=6,f|=D.getUTCMinutes(),f<<=5,f|=D.getUTCSeconds()/2,d=D.getUTCFullYear()-1980,d<<=4,d|=D.getUTCMonth()+1,d<<=5,d|=D.getUTCDate(),x&&(T=u(1,1)+u(o(m),4)+v,A+="up"+u(T.length,2)+T),w&&(C=u(1,1)+u(o(b),4)+M,A+="uc"+u(C.length,2)+C);var k="";return k+="\n\0",k+=u(E,2),k+=h.magic,k+=u(f,2),k+=u(d,2),k+=u(I.crc32,4),k+=u(I.compressedSize,4),k+=u(I.uncompressedSize,4),k+=u(m.length,2),k+=u(A.length,2),{fileRecord:s.LOCAL_FILE_HEADER+k+m+A,dirRecord:s.CENTRAL_FILE_HEADER+u(P,2)+k+u(b.length,2)+"\0\0\0\0"+u(L,4)+u(i,4)+m+A+b}};function c(e,t,n,r){i.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=n,this.encodeFileName=r,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}r.inherits(c,i),c.prototype.push=function(e){var t=e.meta.percent||0,n=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,i.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:n?(t+100*(n-r-1))/n:100}}))},c.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var n=l(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},c.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,n=l(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),t)this.push({data:function(e){return s.DATA_DESCRIPTOR+u(e.crc32,4)+u(e.compressedSize,4)+u(e.uncompressedSize,4)}(e),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},c.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var n=this.bytesWritten-e,i=function(e,t,n,i,a){var o=r.transformTo("string",a(i));return s.CENTRAL_DIRECTORY_END+"\0\0\0\0"+u(e,2)+u(e,2)+u(t,4)+u(n,4)+u(o.length,2)+o}(this.dirRecords.length,n,e,this.zipComment,this.encodeFileName);this.push({data:i,meta:{percent:100}})},c.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},c.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()}),e.on("error",function(e){t.error(e)}),this},c.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},c.prototype.error=function(e){var t=this._sources;if(!i.prototype.error.call(this,e))return!1;for(var n=0;n<t.length;n++)try{t[n].error(e)}catch(e){}return!0},c.prototype.lock=function(){i.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},e.exports=c},function(e,t,n){"use strict";var r=n(13),i=n(28);function a(e,t){i.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}r.inherits(a,i),a.prototype._bindStream=function(e){var t=this;this._stream=e,e.pause(),e.on("data",function(e){t.push({data:e,meta:{percent:0}})}).on("error",function(e){t.isPaused?this.generatedError=e:t.error(e)}).on("end",function(){t.isPaused?t._upstreamEnded=!0:t.end()})},a.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=a},function(e,t,n){"use strict";var r=n(13),i=n(56),a=n(49),o=(r=n(13),n(206)),s=n(117),u=n(63);function l(e){return new i.Promise(function(t,n){var r=e.decompressed.getContentWorker().pipe(new s);r.on("error",function(e){n(e)}).on("end",function(){r.streamInfo.crc32!==e.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):t()}).resume()})}e.exports=function(e,t){var n=this;return t=r.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),u.isNode&&u.isStream(e)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then(function(e){var n=new o(t);return n.load(e),n}).then(function(e){var n=[i.Promise.resolve(e)],r=e.files;if(t.checkCRC32)for(var a=0;a<r.length;a++)n.push(l(r[a]));return i.Promise.all(n)}).then(function(e){for(var r=e.shift(),i=r.files,a=0;a<i.length;a++){var o=i[a];n.file(o.fileNameStr,o.decompressed,{binary:!0,optimizedBinaryString:!0,date:o.date,dir:o.dir,comment:o.fileCommentStr.length?o.fileCommentStr:null,unixPermissions:o.unixPermissions,dosPermissions:o.dosPermissions,createFolders:t.createFolders})}return r.zipComment.length&&(n.comment=r.zipComment),n})}},function(e,t,n){"use strict";var r=n(120),i=n(13),a=n(119),o=n(209),s=(n(49),n(40));function u(e){this.files=[],this.loadOptions=e}u.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(t)+", expected "+i.pretty(e)+")")}},isSignature:function(e,t){var n=this.reader.index;this.reader.setIndex(e);var r=this.reader.readString(4)===t;return this.reader.setIndex(n),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=s.uint8array?"uint8array":"array",n=i.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,n,r=this.zip64EndOfCentralSize-44;0<r;)e=this.reader.readInt(2),t=this.reader.readInt(4),n=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(e=new o({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(e<0)throw!this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip: can't find end of central directory");this.reader.setIndex(e);var t=e;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var r=t-n;if(r>0)this.isSignature(t,a.CENTRAL_FILE_HEADER)||(this.reader.zero=r);else if(r<0)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(e){this.reader=r(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=u},function(e,t,n){"use strict";var r=n(122);function i(e){r.call(this,e)}n(13).inherits(i,r),i.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},i.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},i.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},e.exports=i},function(e,t,n){"use strict";var r=n(123);function i(e){r.call(this,e)}n(13).inherits(i,r),i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},e.exports=i},function(e,t,n){"use strict";var r=n(120),i=n(13),a=n(93),o=n(94),s=n(49),u=n(118),l=n(40);function c(e,t){this.options=e,this.loadOptions=t}c.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,n;if(e.skip(22),this.fileNameLength=e.readInt(2),n=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in u)if(u.hasOwnProperty(t)&&u[t].magic===e)return u[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0===e&&(this.dosPermissions=63&this.externalFileAttributes),3===e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(e){if(this.extraFields[1]){var t=r(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(e){var t,n,r,i=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index<i;)t=e.readInt(2),n=e.readInt(2),r=e.readData(n),this.extraFields[t]={id:t,length:n,value:r}},handleUTF8:function(){var e=l.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=s.utf8decode(this.fileName),this.fileCommentStr=s.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var n=i.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var a=i.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(a)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=r(e.value);return 1!==t.readInt(1)?null:o(this.fileName)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=r(e.value);return 1!==t.readInt(1)?null:o(this.fileComment)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null}},e.exports=c},function(e,t,n){(function(){var t,r,i,a,o={}.hasOwnProperty;a=n(41).isPlainObject,t=n(23),i=n(125),r=n(95),e.exports=function(e){function n(e){n.__super__.constructor.call(this,null),e||(e={}),e.writer||(e.writer=new r),this.options=e,this.stringify=new i(e),this.isDocument=!0}return function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,t),n.prototype.end=function(e){var t;return e?a(e)&&(t=e,e=this.options.writer.set(t)):e=this.options.writer,e.document(this)},n.prototype.toString=function(e){return this.options.writer.set(e).document(this)},n}()}).call(this)},function(e,t,n){(function(){var t,r,i,a,o,s,u,l,c,f,d,p,h,g,m,v,y,b,M,x={}.hasOwnProperty;M=n(41),y=M.isObject,v=M.isFunction,b=M.isPlainObject,f=n(65),r=n(66),i=n(67),p=n(74),m=n(75),d=n(76),l=n(68),c=n(69),a=n(70),s=n(71),o=n(72),u=n(73),t=n(124),g=n(125),h=n(95),e.exports=function(){function e(e,t,n){var r;e||(e={}),e.writer?b(e.writer)&&(r=e.writer,e.writer=new h(r)):e.writer=new h(e),this.options=e,this.writer=e.writer,this.stringify=new g(e),this.onDataCallback=t||function(){},this.onEndCallback=n||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return e.prototype.node=function(e,t,n){var r;if(null==e)throw new Error("Missing node name");if(this.root&&-1===this.currentLevel)throw new Error("Document can only have one root node");return this.openCurrent(),e=e.valueOf(),null==t&&(t={}),t=t.valueOf(),y(t)||(n=(r=[t,n])[0],t=r[1]),this.currentNode=new f(this,e,t),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,null!=n&&this.text(n),this},e.prototype.element=function(e,t,n){return this.currentNode&&this.currentNode instanceof c?this.dtdElement.apply(this,arguments):this.node(e,t,n)},e.prototype.attribute=function(e,n){var r,i;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode");if(null!=e&&(e=e.valueOf()),y(e))for(r in e)x.call(e,r)&&(i=e[r],this.attribute(r,i));else v(n)&&(n=n.apply()),this.options.skipNullAttributes&&null==n||(this.currentNode.attributes[e]=new t(this,e,n));return this},e.prototype.text=function(e){var t;return this.openCurrent(),t=new m(this,e),this.onData(this.writer.text(t,this.currentLevel+1)),this},e.prototype.cdata=function(e){var t;return this.openCurrent(),t=new r(this,e),this.onData(this.writer.cdata(t,this.currentLevel+1)),this},e.prototype.comment=function(e){var t;return this.openCurrent(),t=new i(this,e),this.onData(this.writer.comment(t,this.currentLevel+1)),this},e.prototype.raw=function(e){var t;return this.openCurrent(),t=new p(this,e),this.onData(this.writer.raw(t,this.currentLevel+1)),this},e.prototype.instruction=function(e,t){var n,r,i,a,o;if(this.openCurrent(),null!=e&&(e=e.valueOf()),null!=t&&(t=t.valueOf()),Array.isArray(e))for(n=0,a=e.length;n<a;n++)r=e[n],this.instruction(r);else if(y(e))for(r in e)x.call(e,r)&&(i=e[r],this.instruction(r,i));else v(t)&&(t=t.apply()),o=new d(this,e,t),this.onData(this.writer.processingInstruction(o,this.currentLevel+1));return this},e.prototype.declaration=function(e,t,n){var r;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node");return r=new l(this,e,t,n),this.onData(this.writer.declaration(r,this.currentLevel+1)),this},e.prototype.doctype=function(e,t,n){if(this.openCurrent(),null==e)throw new Error("Missing root node name");if(this.root)throw new Error("dtd() must come before the root node");return this.currentNode=new c(this,t,n),this.currentNode.rootNodeName=e,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},e.prototype.dtdElement=function(e,t){var n;return this.openCurrent(),n=new o(this,e,t),this.onData(this.writer.dtdElement(n,this.currentLevel+1)),this},e.prototype.attList=function(e,t,n,r,i){var o;return this.openCurrent(),o=new a(this,e,t,n,r,i),this.onData(this.writer.dtdAttList(o,this.currentLevel+1)),this},e.prototype.entity=function(e,t){var n;return this.openCurrent(),n=new s(this,!1,e,t),this.onData(this.writer.dtdEntity(n,this.currentLevel+1)),this},e.prototype.pEntity=function(e,t){var n;return this.openCurrent(),n=new s(this,!0,e,t),this.onData(this.writer.dtdEntity(n,this.currentLevel+1)),this},e.prototype.notation=function(e,t){var n;return this.openCurrent(),n=new u(this,e,t),this.onData(this.writer.dtdNotation(n,this.currentLevel+1)),this},e.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},e.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},e.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},e.prototype.openNode=function(e){if(!e.isOpen)return!this.root&&0===this.currentLevel&&e instanceof f&&(this.root=e),this.onData(this.writer.openNode(e,this.currentLevel)),e.isOpen=!0},e.prototype.closeNode=function(e){if(!e.isClosed)return this.onData(this.writer.closeNode(e,this.currentLevel)),e.isClosed=!0},e.prototype.onData=function(e){return this.documentStarted=!0,this.onDataCallback(e)},e.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},e.prototype.ele=function(){return this.element.apply(this,arguments)},e.prototype.nod=function(e,t,n){return this.node(e,t,n)},e.prototype.txt=function(e){return this.text(e)},e.prototype.dat=function(e){return this.cdata(e)},e.prototype.com=function(e){return this.comment(e)},e.prototype.ins=function(e,t){return this.instruction(e,t)},e.prototype.dec=function(e,t,n){return this.declaration(e,t,n)},e.prototype.dtd=function(e,t,n){return this.doctype(e,t,n)},e.prototype.e=function(e,t,n){return this.element(e,t,n)},e.prototype.n=function(e,t,n){return this.node(e,t,n)},e.prototype.t=function(e){return this.text(e)},e.prototype.d=function(e){return this.cdata(e)},e.prototype.c=function(e){return this.comment(e)},e.prototype.r=function(e){return this.raw(e)},e.prototype.i=function(e,t){return this.instruction(e,t)},e.prototype.att=function(){return this.currentNode&&this.currentNode instanceof c?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},e.prototype.a=function(){return this.currentNode&&this.currentNode instanceof c?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},e.prototype.ent=function(e,t){return this.entity(e,t)},e.prototype.pent=function(e,t){return this.pEntity(e,t)},e.prototype.not=function(e,t){return this.notation(e,t)},e}()}).call(this)},function(e,t,n){(function(){var t,r,i,a,o,s,u,l,c,f,d,p,h,g={}.hasOwnProperty;u=n(68),l=n(69),t=n(66),r=n(67),c=n(65),d=n(74),p=n(75),f=n(76),i=n(70),a=n(72),o=n(71),s=n(73),h=n(126),e.exports=function(e){function n(e,t){n.__super__.constructor.call(this,t),this.stream=e}return function(e,t){for(var n in t)g.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,h),n.prototype.document=function(e){var t,n,i,a,o,s,c,d;for(n=0,a=(s=e.children).length;n<a;n++)(t=s[n]).isLastRootNode=!1;for(e.children[e.children.length-1].isLastRootNode=!0,d=[],i=0,o=(c=e.children).length;i<o;i++)switch(t=c[i],!1){case!(t instanceof u):d.push(this.declaration(t));break;case!(t instanceof l):d.push(this.docType(t));break;case!(t instanceof r):d.push(this.comment(t));break;case!(t instanceof f):d.push(this.processingInstruction(t));break;default:d.push(this.element(t))}return d},n.prototype.attribute=function(e){return this.stream.write(" "+e.name+'="'+e.value+'"')},n.prototype.cdata=function(e,t){return this.stream.write(this.space(t)+"<![CDATA["+e.text+"]]>"+this.endline(e))},n.prototype.comment=function(e,t){return this.stream.write(this.space(t)+"\x3c!-- "+e.text+" --\x3e"+this.endline(e))},n.prototype.declaration=function(e,t){return this.stream.write(this.space(t)),this.stream.write('<?xml version="'+e.version+'"'),null!=e.encoding&&this.stream.write(' encoding="'+e.encoding+'"'),null!=e.standalone&&this.stream.write(' standalone="'+e.standalone+'"'),this.stream.write(this.spacebeforeslash+"?>"),this.stream.write(this.endline(e))},n.prototype.docType=function(e,n){var u,l,c,d;if(n||(n=0),this.stream.write(this.space(n)),this.stream.write("<!DOCTYPE "+e.root().name),e.pubID&&e.sysID?this.stream.write(' PUBLIC "'+e.pubID+'" "'+e.sysID+'"'):e.sysID&&this.stream.write(' SYSTEM "'+e.sysID+'"'),e.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(e)),l=0,c=(d=e.children).length;l<c;l++)switch(u=d[l],!1){case!(u instanceof i):this.dtdAttList(u,n+1);break;case!(u instanceof a):this.dtdElement(u,n+1);break;case!(u instanceof o):this.dtdEntity(u,n+1);break;case!(u instanceof s):this.dtdNotation(u,n+1);break;case!(u instanceof t):this.cdata(u,n+1);break;case!(u instanceof r):this.comment(u,n+1);break;case!(u instanceof f):this.processingInstruction(u,n+1);break;default:throw new Error("Unknown DTD node type: "+u.constructor.name)}this.stream.write("]")}return this.stream.write(this.spacebeforeslash+">"),this.stream.write(this.endline(e))},n.prototype.element=function(e,n){var i,a,o,s,u,l,h,m;for(u in n||(n=0),m=this.space(n),this.stream.write(m+"<"+e.name),l=e.attributes)g.call(l,u)&&(i=l[u],this.attribute(i));if(0===e.children.length||e.children.every(function(e){return""===e.value}))this.allowEmpty?this.stream.write("></"+e.name+">"):this.stream.write(this.spacebeforeslash+"/>");else if(this.pretty&&1===e.children.length&&null!=e.children[0].value)this.stream.write(">"),this.stream.write(e.children[0].value),this.stream.write("</"+e.name+">");else{for(this.stream.write(">"+this.newline),o=0,s=(h=e.children).length;o<s;o++)switch(a=h[o],!1){case!(a instanceof t):this.cdata(a,n+1);break;case!(a instanceof r):this.comment(a,n+1);break;case!(a instanceof c):this.element(a,n+1);break;case!(a instanceof d):this.raw(a,n+1);break;case!(a instanceof p):this.text(a,n+1);break;case!(a instanceof f):this.processingInstruction(a,n+1);break;default:throw new Error("Unknown XML node type: "+a.constructor.name)}this.stream.write(m+"</"+e.name+">")}return this.stream.write(this.endline(e))},n.prototype.processingInstruction=function(e,t){return this.stream.write(this.space(t)+"<?"+e.target),e.value&&this.stream.write(" "+e.value),this.stream.write(this.spacebeforeslash+"?>"+this.endline(e))},n.prototype.raw=function(e,t){return this.stream.write(this.space(t)+e.value+this.endline(e))},n.prototype.text=function(e,t){return this.stream.write(this.space(t)+e.value+this.endline(e))},n.prototype.dtdAttList=function(e,t){return this.stream.write(this.space(t)+"<!ATTLIST "+e.elementName+" "+e.attributeName+" "+e.attributeType),"#DEFAULT"!==e.defaultValueType&&this.stream.write(" "+e.defaultValueType),e.defaultValue&&this.stream.write(' "'+e.defaultValue+'"'),this.stream.write(this.spacebeforeslash+">"+this.endline(e))},n.prototype.dtdElement=function(e,t){return this.stream.write(this.space(t)+"<!ELEMENT "+e.name+" "+e.value),this.stream.write(this.spacebeforeslash+">"+this.endline(e))},n.prototype.dtdEntity=function(e,t){return this.stream.write(this.space(t)+"<!ENTITY"),e.pe&&this.stream.write(" %"),this.stream.write(" "+e.name),e.value?this.stream.write(' "'+e.value+'"'):(e.pubID&&e.sysID?this.stream.write(' PUBLIC "'+e.pubID+'" "'+e.sysID+'"'):e.sysID&&this.stream.write(' SYSTEM "'+e.sysID+'"'),e.nData&&this.stream.write(" NDATA "+e.nData)),this.stream.write(this.spacebeforeslash+">"+this.endline(e))},n.prototype.dtdNotation=function(e,t){return this.stream.write(this.space(t)+"<!NOTATION "+e.name),e.pubID&&e.sysID?this.stream.write(' PUBLIC "'+e.pubID+'" "'+e.sysID+'"'):e.pubID?this.stream.write(' PUBLIC "'+e.pubID+'"'):e.sysID&&this.stream.write(' SYSTEM "'+e.sysID+'"'),this.stream.write(this.spacebeforeslash+">"+this.endline(e))},n.prototype.endline=function(e){return e.isLastRootNode?"":this.newline},n}()}).call(this)},function(e,t,n){(t=e.exports=n(53)(!1)).push([e.i,".RenderWindowWithControlBar-module-rootContainer_1lck8 {\n  position: relative;\n}\n\n.RenderWindowWithControlBar-module-renderWindow_FOOWk {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n}\n\n.RenderWindowWithControlBar-module-control_1muSX {\n  z-index: 1;\n  position: absolute;\n}\n",""]),t.locals={rootContainer:"RenderWindowWithControlBar-module-rootContainer_1lck8",renderWindow:"RenderWindowWithControlBar-module-renderWindow_FOOWk",control:"RenderWindowWithControlBar-module-control_1muSX"}},function(e,t,n){"use strict";n.r(t);var r=n(24),i=n(3),a=n(20),o=n(10);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function u(e){var t=s(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0,0],4),n=t[0],r=t[1],a=t[2],u=t[3],l=e.getContext("2d").getImageData(n,r,a||e.width,u||e.height),c=o.a.newInstance({type:"vtkImageData"});c.setOrigin(0,0,0),c.setSpacing(1,1,1),c.setExtent(0,(a||e.width)-1,0,(u||e.height)-1,0,0);var f=i.a.newInstance({numberOfComponents:4,values:new Uint8Array(l.data.buffer)});return f.setName("scalars"),c.getPointData().setScalars(f),c}var l={canvasToImageData:u,imageToImageData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{flipX:!1,flipY:!1,rotate:0},n=document.createElement("canvas");n.width=e.width,n.height=e.height;var r=n.getContext("2d"),i=t.flipX,a=t.flipY,o=t.rotate;return r.translate(n.width/2,n.height/2),r.scale(i?-1:1,a?-1:1),r.rotate(o*Math.PI/180),r.drawImage(e,-e.width/2,-e.width/2),u(n)}},c=n(37),f=n(2),d=n(9),p=n(14),h=n(0);var g={workCount:0};function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,g,n),h.a.obj(e,t),h.a.event(e,t,"change"),h.a.get(e,t,["workCount"]),function(e,t){t.classHierarchy.push("vtkProgressHandler"),e.startWork=function(){t.workCount+=1,1===t.workCount&&e.invokeChange(!0)},e.stopWork=function(){t.workCount-=1,0===t.workCount&&e.invokeChange(!1)},e.isWorking=function(){return!!t.workCount},e.wrapPromise=function(t){return e.startWork(),new Promise(function(n,r){t.then(function(){e.stopWork(),n.apply(void 0,arguments)},function(t){e.stopWork(),r(t)})})},e.wrapPromiseFunction=function(t){return function(){return e.wrapPromise(t.apply(void 0,arguments))}}}(e,t)}var v={newInstance:h.a.newInstance(m,"vtkProgressHandler"),extend:m},y=n(36),b=n(78);function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function x(e){return e}function w(e){return null===e||"null"===e?null:"true"===e||"false"!==e&&(void 0!==e&&"undefined"!==e?"["===e[0]&&"]"===e[e.length-1]?e.substring(1,e.length-1).split(",").map(function(e){return w(e.trim())}):""===e||Number.isNaN(Number(e))?e:Number(e):void 0)}var A={toNativeType:w,extractURLParameters:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.search,n={},r=e?w:x;return(t||"").replace(/#.*/,"").replace("?","").split("&").forEach(function(e){var t=M(e.split("=").map(function(e){return decodeURIComponent(e)}),2),i=t[0],a=t[1];i&&(n[i]=!a||r(a))}),n}},T=[];var C={name:"",numberOfComponents:1,size:0,dataType:"JSON"};function S(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Object.assign(t,C,n),!t.empty&&!t.values&&!t.size)throw new TypeError("Cannot create vtkVariantArray object without: size > 0, values");t.values?Array.isArray(t.values)&&(t.values=t.values):t.values=[],t.values&&(t.size=t.values.length),h.a.obj(e,t),h.a.set(e,t,["name"]),function(e,t){t.classHierarchy.push("vtkVariantArray"),e.getComponent=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.values[e*t.numberOfComponents+n]},e.setComponent=function(n,r,i){i!==t.values[n*t.numberOfComponents+r]&&(t.values[n*t.numberOfComponents+r]=i,e.modified())},e.getData=function(){return t.values},e.getTuple=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T,r=t.numberOfComponents||1;n.length&&(n.length=r);for(var i=e*r,a=0;a<r;a++)n[a]=t.values[i+a];return n},e.getTupleLocation=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1)*t.numberOfComponents},e.getNumberOfComponents=function(){return t.numberOfComponents},e.getNumberOfValues=function(){return t.values.length},e.getNumberOfTuples=function(){return t.values.length/t.numberOfComponents},e.getDataType=function(){return t.dataType},e.newClone=function(){return D({name:t.name,numberOfComponents:t.numberOfComponents})},e.getName=function(){return t.name||(e.modified(),t.name="vtkVariantArray".concat(e.getMTime())),t.name},e.setData=function(n,r){t.values=n,t.size=n.length,r&&(t.numberOfComponents=r),t.size%t.numberOfComponents!=0&&(t.numberOfComponents=1),e.modified()}}(e,t)}var D=h.a.newInstance(S,"vtkVariantArray"),I={newInstance:D,extend:S},E={vtkCellArray:r.a,vtkDataArray:i.a,vtkEndian:a.a,vtkImageHelper:l,vtkLookupTable:c.a,vtkMath:f,vtkMatrixBuilder:d.a,vtkPoints:p.a,vtkProgressHandler:v,vtkScalarsToColors:y.a,vtkStringArray:b.a,vtkURLExtract:A,vtkVariantArray:I},N=n(11);function O(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var _={intersectBox:function(e,t,n,r,i){for(var a=!0,o=[],s=0,u=[],l=[0,0,0],c=0;c<3;c++)t[c]<e[2*c]?(o[c]=1,l[c]=e[2*c],a=!1):t[c]>e[2*c+1]?(o[c]=0,l[c]=e[2*c+1],a=!1):o[c]=2;if(a)return r[0]=t[0],r[1]=t[1],r[2]=t[2],i[0]=0,1;for(var f=0;f<3;f++)2!==o[f]&&0!==n[f]?u[f]=(l[f]-t[f])/n[f]:u[f]=-1;for(var d=0;d<3;d++)u[s]<u[d]&&(s=d);if(u[s]>1||u[s]<0)return 0;i[0]=u[s];for(var p=0;p<3;p++)if(s!==p){if(r[p]=t[p]+u[s]*n[p],r[p]<e[2*p]||r[p]>e[2*p+1])return 0}else r[p]=l[p];return 1}};var L={};function P(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,L,n),h.a.obj(e,t),t.bbox||(t.bbox=N.a.newInstance()),function(e,t){t.classHierarchy.push("vtkBox"),e.setBounds=function(){var e=[];if(Array.isArray(arguments.length<=0?void 0:arguments[0]))e=arguments.length<=0?void 0:arguments[0];else for(var n=0;n<arguments.length;n++)e.push(n<0||arguments.length<=n?void 0:arguments[n]);6===e.length&&t.bbox.setBounds(e)},e.getBounds=function(){return t.bbox.getBounds()},e.evaluateFunction=function(e,n,r){for(var i,a,o,s=Array.isArray(e)?e:[e,n,r],u=-Number.MAX_VALUE,l=0,c=t.bbox.getMinPoint(),f=t.bbox.getMaxPoint(),d=1,p=0;p<3;p++)0!==(i=t.bbox.getLength(p))?(o=(s[p]-c[p])/i)<0?(d=0,a=c[p]-s[p]):o>1?(d=0,a=s[p]-f[p]):(a=o<=.5?c[p]-s[p]:s[p]-f[p])>u&&(u=a):(a=Math.abs(s[p]-c[p]))>0&&(d=0),a>0&&(l+=a*a);return l=Math.sqrt(l),d?u:l},e.addBounds=function(){var e,n=[];if(Array.isArray(arguments.length<=0?void 0:arguments[0]))n=arguments.length<=0?void 0:arguments[0];else for(var r=0;r<arguments.length;r++)n.push(r<0||arguments.length<=r?void 0:arguments[r]);6===n.length&&((e=t.bbox).addBounds.apply(e,O(n)),t.bbox.modified())}}(e,t)}var k=h.a.newInstance(P,"vtkBox"),R=Object.assign({newInstance:k,extend:P},_);var j={bounds:[-1,-1,-1,-1,-1,-1],pointsIds:[]};function B(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,j,n),h.a.obj(e,t),t.points=p.a.newInstance(),h.a.get(e,t,["points","pointsIds"]),function(e,t){t.classHierarchy.push("vtkCell"),e.initialize=function(e,n,r){t.pointsIds=n,t.points.setNumberOfPoints(e),t.points.setData(r.getData())},e.getBounds=function(){var e=t.points.getNumberOfPoints(),n=[];if(e){t.points.getPoint(0,n),t.bounds[0]=n[0],t.bounds[1]=n[0],t.bounds[2]=n[1],t.bounds[3]=n[1],t.bounds[4]=n[2],t.bounds[5]=n[2];for(var r=1;r<e;r++)t.points.getPoint(r,n),t.bounds[0]=n[0]<t.bounds[0]?n[0]:t.bounds[0],t.bounds[1]=n[0]>t.bounds[1]?n[0]:t.bounds[1],t.bounds[2]=n[1]<t.bounds[2]?n[1]:t.bounds[2],t.bounds[3]=n[1]>t.bounds[3]?n[1]:t.bounds[3],t.bounds[4]=n[2]<t.bounds[4]?n[2]:t.bounds[4],t.bounds[5]=n[2]>t.bounds[5]?n[2]:t.bounds[5]}else f.uninitializeBounds(t.bounds);return t.bounds},e.getLength2=function(){e.getBounds();for(var n=0,r=0,i=0;i<3;i++)n+=(r=t.bounds[2*i+1]-t.bounds[2*i])*r;return n},e.getParametricDistance=function(e){for(var t,n=0,r=0;r<3;r++)(t=e[r]<0?-e[r]:e[r]>1?e[r]-1:0)>n&&(n=t);return n},e.getNumberOfPoints=function(){return t.points.getNumberOfPoints()},e.deepCopy=function(e){e.initialize(t.points.getNumberOfPoints(),t.pointsIds,t.points)},e.getCellDimension=function(){},e.intersectWithLine=function(e,t,n,r,i,a,o){},e.evaluatePosition=function(e,t,n,r,i,a){}}(e,t)}var z=h.a.newInstance(B,"vtkCell"),F=Object.assign({newInstance:z,extend:B});var V={angle:15};function U(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,V,n),h.a.obj(e,t),h.a.setGet(e,t,["angle"]),function(e,t){t.classHierarchy.push("vtkCone"),e.evaluateFunction=function(e){var n=Math.tan(f.radiansFromDegrees(t.angle));return e[1]*e[1]+e[2]*e[2]-e[0]*e[0]*n*n},e.evaluateGradient=function(e){var n=Math.tan(f.radiansFromDegrees(t.angle));return[-2*e[0]*n*n,2*e[1],2*e[2]]}}(e,t)}var G=h.a.newInstance(U,"vtkCone"),W=Object.assign({newInstance:G,extend:U});var H={evaluate:function(e,t,n,r){var i=new Float32Array(3);i[0]=r[0]-t[0],i[1]=r[1]-t[1],i[2]=r[2]-t[2];var a=f.dot(n,i);return f.dot(i,i)-a*a-e*e}};var Y={radius:.5,center:[0,0,0],axis:[0,1,0]};function Q(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Y,n),h.a.obj(e,t),h.a.setGet(e,t,["radius"]),h.a.setGetArray(e,t,["center","axis"],3),function(e,t){t.classHierarchy.push("vtkCylinder"),e.evaluateFunction=function(e){var n=[e[0]-t.center[0],e[1]-t.center[1],e[2]-t.center[2]],r=f.dot(t.axis,n);return f.dot(n,n)-r*r-t.radius*t.radius},e.evaluateGradient=function(e){var n=t.axis[0]*(e[0]-t.center[0])+t.axis[1]*(e[1]-t.center[1])+t.axis[2]*(e[2]-t.center[2]),r=[t.center[0]+n*t.axis[0],t.center[1]+n*t.axis[1],t.center[2]+n*t.axis[2]];return[2*(e[0]-r[0]),2*(e[1]-r[1]),2*(e[2]-r[2])]}}(e,t)}var q=h.a.newInstance(Q,"vtkCylinder"),X=Object.assign({newInstance:q,extend:Q},H),K=n(42),Z=n(58),J=h.a.vtkErrorMacro;var $={convertItkToVtkImage:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={origin:[0,0,0],spacing:[1,1,1]},r=[1,1,1],a=[1,0,0,0,1,0,0,0,1],s=0;s<e.imageType.dimension;++s){n.origin[s]=e.origin[s],n.spacing[s]=e.spacing[s],r[s]=e.size[s];for(var u=0;u<e.imageType.dimension;++u)a[u+3*s]=e.direction.data[s+u*e.imageType.dimension]}var l=o.a.newInstance(n),c=i.a.newInstance({name:t.scalarArrayName||"Scalars",values:e.data,numberOfComponents:e.imageType.components});switch(l.setDirection(a),l.setDimensions.apply(l,r),l.getPointData().setScalars(c),e.imageType.pixelType){case 1:case 2:case 3:case 4:break;case 5:3===e.imageType.dimension&&3===e.imageType.components&&l.getPointData().setVectors(c);break;case 6:break;case 7:3===e.imageType.dimension&&3===e.imageType.components&&l.getPointData().setVectors(c);break;case 8:case 9:3===e.imageType.dimension&&6===e.imageType.components&&l.getPointData().setTensors(c);break;case 10:case 11:case 12:case 13:case 14:case 15:break;default:return J("Cannot handle unexpected ITK.js pixel type ".concat(e.imageType.pixelType)),null}return l}},ee={Operation:{UNION:0,INTERSECTION:1,DIFFERENCE:2}},te=ee.Operation;var ne={operation:0,functions:[]};function re(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ne,n),h.a.obj(e,t),h.a.setGet(e,t,["operation"]),function(e,t){t.classHierarchy.push("vtkImplicitBoolean");var n=Object.assign({},e);e.getMTime=function(){var e=n.getMTime();if(!t.functions||t.functions.length<=0)return e;for(var r=0;r<t.functions.length;++r)e=Math.max(e,t.functions[r].getMTime());return e},e.getOperationAsString=function(){return h.a.enumToString(te,t.operation)},e.setOperationToUnion=function(){return e.setOperation(0)},e.setOperationToIntersection=function(){return e.setOperation(1)},e.setOperationToDifference=function(){return e.setOperation(2)},e.getFunctions=function(){return t.functions},e.hasFunction=function(e){return!!t.functions.filter(function(t){return t===e}).length},e.addFunction=function(n){n&&!e.hasFunction(n)&&(t.functions=t.functions.concat(n))},e.removeFunction=function(e){var n=t.functions.filter(function(t){return t!==e});t.functions.length!==n.length&&(t.functions=n)},e.removeAllFunctions=function(){t.functions=[]},e.evaluateFunction=function(e){var n=0;if(t.functions.length<=0)return n;if(t.operation===te.UNION){n=Number.MAX_VALUE;for(var r=0;r<t.functions.length;++r){var i=t.functions[r].evaluateFunction(e);i<n&&(n=i)}}else if(t.operation===te.INTERSECTION){n=-Number.MAX_VALUE;for(var a=0;a<t.functions.length;++a){var o=t.functions[a].evaluateFunction(e);o>n&&(n=o)}}else{n=t.functions[0].evaluateFunction(e);for(var s=1;s<t.functions.length;++s){var u=-1*t.functions[s].evaluateFunction(e);u>n&&(n=u)}}return n},e.evaluateGradient=function(e){var n=t.axis[0]*(e[0]-t.center[0])+t.axis[1]*(e[1]-t.center[1])+t.axis[2]*(e[2]-t.center[2]),r=new Float32Array(3);return r[0]=t.center[0]+n*t.axis[0],r[1]=t.center[1]+n*t.axis[1],r[2]=t.center[2]+n*t.axis[2],[2*(e[0]-r[0]),2*(e[1]-r[1]),2*(e[2]-r[2])]}}(e,t)}var ie=h.a.newInstance(re,"vtkImplicitBoolean"),ae=Object.assign({newInstance:ie,extend:re},ee),oe={IntersectionState:{NO_INTERSECTION:0,YES_INTERSECTION:1,ON_LINE:2}},se=oe.IntersectionState;function ue(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a={t:Number.MIN_VALUE,distance:0},o=[];o[0]=n[0]-t[0],o[1]=n[1]-t[1],o[2]=n[2]-t[2];var s=o[0]*(e[0]-t[0])+o[1]*(e[1]-t[1])+o[2]*(e[2]-t[2]),u=f.dot(o,o),l=1e-5*s;return 0!==u&&(a.t=s/u),l<0&&(l=-l),-l<u&&u<l?r=t:u<=0||a.t<0?r=t:a.t>1?r=n:(r=o,o[0]=t[0]+a.t*o[0],o[1]=t[1]+a.t*o[1],o[2]=t[2]+a.t*o[2]),i&&(i[0]=r[0],i[1]=r[1],i[2]=r[2]),a.distance=f.distance2BetweenPoints(r,e),a}function le(e,t,n,r,i,a){var o=[],s=[],u=[];i[0]=0,a[0]=0,o[0]=t[0]-e[0],o[1]=t[1]-e[1],o[2]=t[2]-e[2],s[0]=r[0]-n[0],s[1]=r[1]-n[1],s[2]=r[2]-n[2],u[0]=n[0]-e[0],u[1]=n[1]-e[1],u[2]=n[2]-e[2];var l=[];l[0]=[f.dot(o,o),-f.dot(o,s)],l[1]=[l[0][1],f.dot(s,s)];var c=[];if(c[0]=f.dot(o,u),c[1]=-f.dot(s,u),0===f.solveLinearSystem(l,c,2)){for(var d,p=Number.MAX_VALUE,h=[e,t,n,r],g=[n,n,e,e],m=[r,r,t,t],v=[a[0],a[0],i[0],i[0]],y=[i[0],i[0],a[0],a[0]],b=0;b<4;b++)(d=ue(h[b],g[b],m[b])).distance<p&&(p=d.distance,v[b]=d.t,y[b]=b%2);return se.ON_LINE}return i[0]=c[0],a[0]=c[1],i[0]>=0&&i[0]<=1&&a[0]>=0&&a[0]<=1?se.YES_INTERSECTION:se.NO_INTERSECTION}var ce={distanceToLine:ue,intersection:le};var fe={};function de(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,fe,n),F.extend(e,t,n),function(e,t){t.classHierarchy.push("vtkLine"),e.getCellDimension=function(){},e.intersectWithLine=function(e,n,r,i,a){var o={intersect:0,t:Number.MIN_VALUE,subId:0};a[1]=0,a[2]=0;var s=[],u=[],l=[];t.points.getPoint(0,u),t.points.getPoint(1,l);var c=[],d=[],p=le(e,n,u,l,c,d);if(o.t=c[0],a[0]=d[0],p===se.YES_INTERSECTION){for(var h=0;h<3;h++)i[h]=u[h]+a[0]*(l[h]-u[h]),s[h]=e[h]+o.t*(n[h]-e[h]);if(f.distance2BetweenPoints(i,s)<=r*r)return o.intersect=1,o}else{var g;if(o.t<0)return o.t=0,g=ue(e,u,l,i),a[0]=g.t,g.distance<=r*r?(o.intersect=1,o):o;if(o.t>1)return o.t=1,g=ue(n,u,l,i),a[0]=g.t,g.distance<=r*r?(o.intersect=1,o):o;if(a[0]<0)return a[0]=0,g=ue(u,e,n,i),o.t=g.t,g.distance<=r*r?(o.intersect=1,o):o;if(a[1]>1)return a[1]=1,g=ue(l,e,n,i),o.t=g.t,g.distance<=r*r?(o.intersect=1,o):o}return o},e.evaluatePosition=function(e,t,n,r,i,a){}}(e,t)}var pe=h.a.newInstance(de,"vtkLine"),he=Object.assign({newInstance:pe,extend:de},ce,oe),ge=["chemical json","name","inchi","formula","atoms","bonds","properties"];var me={"chemical json":0,name:"",inchi:"",formula:"",atoms:null,bonds:null,properties:null};function ve(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,me,n),h.a.obj(e,t),t.atoms||(t.atoms={}),t.bonds||(t.bonds={}),t.properties||(t.properties={}),h.a.setGet(e,t,ge),function(e,t){t.classHierarchy.push("vtkMolecule")}(0,t)}var ye={newInstance:h.a.newInstance(ve,"vtkMolecule"),extend:ve},be=h.a.vtkErrorMacro;var Me={range:[0,0],clamping:!0,allowDuplicateScalars:!1};function xe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Me,n),h.a.obj(e,t),t.nodes=[],h.a.setGet(e,t,["allowDuplicateScalars","clamping"]),h.a.setArray(e,t,["range"],2),h.a.getArray(e,t,["range"]),function(e,t){t.classHierarchy.push("vtkPiecewiseFunction"),e.getSize=function(){return t.nodes.length},e.getType=function(){var e,n=0,r=0;t.nodes.length>0&&(n=t.nodes[0].y);for(var i=1;i<t.nodes.length;i++){if((e=t.nodes[i].y)!==n)if(e>n)switch(r){case 0:case 1:r=1;break;default:case 2:r=3}else switch(r){case 0:case 2:r=2;break;default:case 1:r=3}if(n=e,3===r)break}switch(r){case 0:return"Constant";case 1:return"NonDecreasing";case 2:return"NonIncreasing";default:case 3:return"Varied"}},e.getDataPointer=function(){var e=t.nodes.length;if(t.function=null,e>0){t.function=[];for(var n=0;n<e;n++)t.function[2*n]=t.nodes[n].x,t.function[2*n+1]=t.nodes[n].y}return t.function},e.getFirstNonZeroValue=function(){if(0===t.nodes.length)return 0;for(var e=1,n=0;n<t.nodes.length;n++)if(0!==t.nodes[n].y){e=0;break}return e?Number.MAX_VALUE:n>0?t.nodes[n-1].x:t.clamping?-Number.MAX_VALUE:t.nodes[0].x},e.getNodeValue=function(e,n){var r=t.nodes.length;return e<0||e>=r?(be("Index out of range!"),-1):(n[0]=t.nodes[e].x,n[1]=t.nodes[e].y,n[2]=t.nodes[e].midpoint,n[3]=t.nodes[e].sharpness,1)},e.setNodeValue=function(n,r){var i=t.nodes.length;if(n<0||n>=i)return be("Index out of range!"),-1;var a=t.nodes[n].x;return t.nodes[n].x=r[0],t.nodes[n].y=r[1],t.nodes[n].midpoint=r[2],t.nodes[n].sharpness=r[3],a!==r[0]?e.sortAndUpdateRange():e.modified(),1},e.addPoint=function(t,n){return e.addPointLong(t,n,.5,0)},e.addPointLong=function(n,r,i,a){if(i<0||i>1)return be("Midpoint outside range [0.0, 1.0]"),-1;if(a<0||a>1)return be("Sharpness outside range [0.0, 1.0]"),-1;t.allowDuplicateScalars||e.removePoint(n);var o,s={x:n,y:r,midpoint:i,sharpness:a};for(t.nodes.push(s),e.sortAndUpdateRange(),o=0;o<t.nodes.length&&t.nodes[o].x!==n;o++);return o<t.nodes.length?o:-1},e.setNodes=function(n){t.nodes!==n&&(t.nodes=n,e.sortAndUpdateRange())},e.sortAndUpdateRange=function(){t.nodes.sort(function(e,t){return e.x-t.x}),e.updateRange()||e.modified()},e.updateRange=function(){var n=t.range.slice(),r=t.nodes.length;return r?(t.range[0]=t.nodes[0].x,t.range[1]=t.nodes[r-1].x):(t.range[0]=0,t.range[1]=0),(n[0]!==t.range[0]||n[1]!==t.range[1])&&(e.modified(),!0)},e.removePoint=function(n){var r;for(r=0;r<t.nodes.length&&t.nodes[r].x!==n;r++);if(r>=t.nodes.length)return-1;var i=r,a=!1;return t.nodes.splice(r,1),0!==r&&r!==t.nodes.length||(a=e.updateRange()),a||e.modified(),i},e.removeAllPoints=function(){t.nodes=[],e.sortAndUpdateRange()},e.addSegment=function(n,r,i,a){e.sortAndUpdateRange();for(var o=0;o<t.nodes.length;)t.nodes[o].x>=n&&t.nodes[o].x<=i?t.nodes.splice(o,1):o++;e.addPoint(n,r,.5,0),e.addPoint(i,a,.5,0)},e.getValue=function(t){var n=[];return e.getTable(t,t,1,n),n[0]},e.adjustRange=function(n){if(n.length<2)return 0;var r=e.getRange();r[0]<n[0]?e.addPoint(n[0],e.getValue(n[0])):e.addPoint(n[0],e.getValue(r[0])),r[1]>n[1]?e.addPoint(n[1],e.getValue(n[1])):e.addPoint(n[1],e.getValue(r[1])),e.sortAndUpdateRange();for(var i=0;i<t.nodes.length;)t.nodes[i].x>=n[0]&&t.nodes[i].x<=n[1]?t.nodes.splice(i,1):++i;return e.sortAndUpdateRange(),1},e.estimateMinNumberOfSamples=function(t,n){var r=e.findMinimumXDistance();return Math.ceil((n-t)/r)},e.findMinimumXDistance=function(){var e=t.nodes.length;if(e<2)return-1;for(var n=t.nodes[1].x-t.nodes[0].x,r=0;r<e-1;r++){var i=t.nodes[r+1].x-t.nodes[r].x;i<n&&(n=i)}return n},e.getTable=function(e,n,r,i){var a,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=0,u=t.nodes.length,l=0;0!==u&&(l=t.nodes[u-1].y);var c=0,f=0,d=0,p=0,h=0,g=0,m=0;for(a=0;a<r;a++){var v=o*a;for(c=r>1?e+a/(r-1)*(n-e):.5*(e+n);s<u&&c>t.nodes[s].x;)++s<u&&(f=t.nodes[s-1].x,d=t.nodes[s].x,p=t.nodes[s-1].y,h=t.nodes[s].y,g=t.nodes[s-1].midpoint,m=t.nodes[s-1].sharpness,g<1e-5&&(g=1e-5),g>.99999&&(g=.99999));if(s>=u)i[v]=t.clamping?l:0;else if(0===s)i[v]=t.clamping?t.nodes[0].y:0;else{var y=(c-f)/(d-f);if(y=y<g?.5*y/g:.5+.5*(y-g)/(1-g),m>.99){if(y<.5){i[v]=p;continue}i[v]=h;continue}if(m<.01){i[v]=(1-y)*p+y*h;continue}y<.5?y=.5*Math.pow(2*y,1+10*m):y>.5&&(y=1-.5*Math.pow(2*(1-y),1+10*m));var b=y*y,M=b*y,x=2*M-3*b+1,w=-2*M+3*b,A=M-2*b+y,T=M-b,C=(1-m)*(h-p);i[v]=x*p+w*h+A*C+T*C;var S=p<h?p:h,D=p>h?p:h;i[v]=i[v]<S?S:i[v],i[v]=i[v]>D?D:i[v]}}}}(e,t)}var we=h.a.newInstance(xe,"vtkPiecewiseFunction"),Ae=Object.assign({newInstance:we,extend:xe}),Te=n(18),Ce=n(79),Se=n(4),De={SelectionContent:{GLOBALIDS:0,PEDIGREEIDS:1,VALUES:2,INDICES:3,FRUSTUM:4,LOCATIONS:5,THRESHOLDS:6,BLOCKS:7,QUERY:8},SelectionField:{CELL:0,POINT:1,FIELD:2,VERTEX:3,EDGE:4,ROW:5}};var Ie={contentType:-1,fieldType:-1,properties:null,selectionList:[]};function Ee(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ie,n),h.a.obj(e,t),t.properties={},h.a.setGet(e,t,["contentType","fieldType","properties","selectionList"]),function(e,t){t.classHierarchy.push("vtkSelectionNode"),e.getBounds=function(){return t.points.getBounds()}}(e,t)}var Ne=h.a.newInstance(Ee,"vtkSelectionNode"),Oe=Object.assign({newInstance:Ne,extend:Ee},De);var _e={evaluate:function(e,t,n){return(n[0]-t[0])*(n[0]-t[0])+(n[1]-t[1])*(n[1]-t[1])+(n[2]-t[2])*(n[2]-t[2])-e*e}};var Le={radius:.5,center:[0,0,0]};function Pe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Le,n),h.a.obj(e,t),h.a.setGet(e,t,["radius"]),h.a.setGetArray(e,t,["center"],3),function(e,t){t.classHierarchy.push("vtkSphere"),e.evaluateFunction=function(e){return(e[0]-t.center[0])*(e[0]-t.center[0])+(e[1]-t.center[1])*(e[1]-t.center[1])+(e[2]-t.center[2])*(e[2]-t.center[2])-t.radius*t.radius},e.evaluateGradient=function(e){return[2-(e[0]-t.center[0]),2-(e[1]-t.center[1]),2-(e[2]-t.center[2])]}}(e,t)}var ke=h.a.newInstance(Pe,"vtkSphere"),Re=Object.assign({newInstance:ke,extend:Pe},_e),je=n(77);function Be(e,t,n,r){var i=n[0]-t[0],a=n[1]-t[1],o=n[2]-t[2],s=e[0]-t[0],u=e[1]-t[1],l=e[2]-t[2];r[0]=a*l-o*u,r[1]=o*s-i*l,r[2]=i*u-a*s}function ze(e,t,n,r){Be(e,t,n,r);var i=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);0!==i&&(r[0]/=i,r[1]/=i,r[2]/=i)}var Fe={computeNormalDirection:Be,computeNormal:ze};var Ve={};function Ue(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ve,n),F.extend(e,t,n),t.line=he.newInstance(),function(e,t){t.classHierarchy.push("vtkTriangle"),e.getCellDimension=function(){},e.intersectWithLine=function(n,r,i,a,o){var s={subId:0,t:0,intersect:-1};o[2]=0;var u=i*i,l=[],c=[],d=[];t.points.getPoint(0,l),t.points.getPoint(1,c),t.points.getPoint(2,d);var p=[];if(ze(l,c,d,p),0!==p[0]||0!==p[1]||0!==p[2]){var h=Te.a.intersectWithLine(n,r,l,p);if(s.t=h.t,a[0]=h.x[0],a[1]=h.x[1],a[2]=h.x[2],!h.intersection)return o[0]=0,o[1]=0,s.intersect=0,s;var g=e.evaluatePosition(a,[],o,[]);if(g.evaluation>=0)return g.dist2<=u?(s.intersect=1,s):(s.intersect=g.evaluation,s)}var m=f.distance2BetweenPoints(l,c),v=f.distance2BetweenPoints(c,d),y=f.distance2BetweenPoints(d,l);if(m>v&&m>y?(t.line.getPoints().setPoint(0,l),t.line.getPoints().setPoint(1,c)):v>y&&v>m?(t.line.getPoints().setPoint(0,c),t.line.getPoints().setPoint(1,d)):(t.line.getPoints().setPoint(0,d),t.line.getPoints().setPoint(1,l)),t.line.intersectWithLine(n,r,i,a,o).intersect){for(var b=[],M=[],x=[],w=0;w<3;w++)b[w]=l[w]-d[w],M[w]=c[w]-d[w],x[w]=a[w]-d[w];return o[0]=f.dot(x,b)/y,o[1]=f.dot(x,M)/v,s.evaluation=1,s}return o[0]=0,o[1]=0,s.evaluation=0,s},e.evaluatePosition=function(e,n,r,i){var a,o,s,u,l,c,d,p={subId:0,dist2:0,evaluation:-1},h=[],g=[],m=[],v=[],y=[],b=[],M=[],x=0,w=[],A=[],T=[],C=[],S=[];p.subId=0,r[2]=0,t.points.getPoint(1,h),t.points.getPoint(2,g),t.points.getPoint(0,m),Be(h,g,m,v),Te.a.generalizedProjectPoint(e,h,v,S);var D=0;for(a=0;a<3;a++)(s=v[a]<0?-v[a]:v[a])>D&&(D=s,x=a);for(o=0,a=0;a<3;a++)a!==x&&(w[o++]=a);for(a=0;a<2;a++)y[a]=S[w[a]]-m[w[a]],b[a]=h[w[a]]-m[w[a]],M[a]=g[w[a]]-m[w[a]];if(0===(u=f.determinant2x2(b,M)))return r[0]=0,r[1]=0,p.evaluation=-1,p;if(r[0]=f.determinant2x2(y,M)/u,r[1]=f.determinant2x2(b,y)/u,i[0]=1-(r[0]+r[1]),i[1]=r[0],i[2]=r[1],i[0]>=0&&i[0]<=1&&i[1]>=0&&i[1]<=1&&i[2]>=0&&i[2]<=1)n&&(p.dist2=f.distance2BetweenPoints(S,e),n[0]=S[0],n[1]=S[1],n[2]=S[2]),p.evaluation=1;else{var I;if(n)if(i[1]<0&&i[2]<0)for(l=f.distance2BetweenPoints(e,m),c=he.distanceToLine(e,h,m,I,T),d=he.distanceToLine(e,m,g,I,C),l<c?(p.dist2=l,A=m):(p.dist2=c,A=T),d<p.dist2&&(p.dist2=d,A=C),a=0;a<3;a++)n[a]=A[a];else if(i[2]<0&&i[0]<0)for(l=f.distance2BetweenPoints(e,h),c=he.distanceToLine(e,h,m,I,T),d=he.distanceToLine(e,h,g,I,C),l<c?(p.dist2=l,A=h):(p.dist2=c,A=T),d<p.dist2&&(p.dist2=d,A=C),a=0;a<3;a++)n[a]=A[a];else if(i[1]<0&&i[0]<0)for(l=f.distance2BetweenPoints(e,g),c=he.distanceToLine(e,g,m,I,T),d=he.distanceToLine(e,h,g,I,C),l<c?(p.dist2=l,A=g):(p.dist2=c,A=T),d<p.dist2&&(p.dist2=d,A=C),a=0;a<3;a++)n[a]=A[a];else if(i[0]<0){var E=he.distanceToLine(e,h,g,n);p.dist2=E.distance}else if(i[1]<0){var N=he.distanceToLine(e,g,m,n);p.dist2=N.distance}else if(i[2]<0){var O=he.distanceToLine(e,h,m,n);p.dist2=O.distance}p.evaluation=0}return p},e.evaluateLocation=function(e,n,r){var i=[],a=[],o=[];t.points.getPoint(0,i),t.points.getPoint(1,a),t.points.getPoint(2,o);for(var s=1-e[0]-e[1],u=0;u<3;u++)n[u]=i[u]*s+a[u]*e[0]+o[u]*e[1];r[0]=s,r[1]=e[0],r[2]=e[1]},e.getParametricDistance=function(e){var t,n=0,r=[];r[0]=e[0],r[1]=e[1],r[2]=1-e[0]-e[1];for(var i=0;i<3;i++)(t=r[i]<0?-r[i]:r[i]>1?r[i]-1:0)>n&&(n=t);return n}}(e,t)}var Ge=h.a.newInstance(Ue,"vtkTriangle"),We=Object.assign({newInstance:Ge,extend:Ue},Fe),He={vtkBoundingBox:N.a,vtkBox:R,vtkCell:F,vtkCone:W,vtkCylinder:X,vtkDataSet:K.a,vtkDataSetAttributes:Z.a,vtkITKHelper:$,vtkImageData:o.a,vtkImplicitBoolean:ae,vtkLine:he,vtkMolecule:ye,vtkPiecewiseFunction:Ae,vtkPlane:Te.a,vtkPointSet:Ce.a,vtkPolyData:Se.a,vtkSelectionNode:Oe,vtkSphere:Re,vtkStructuredData:je.a,vtkTriangle:We},Ye=n(1),Qe={Mode:{RIGID_BODY:0,SIMILARITY:1,AFFINE:2}},qe=Qe.Mode;var Xe={mode:qe.SIMILARITY};function Ke(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Xe,n),h.a.obj(e,t),t.matrix=Ye.c.create(),h.a.setGet(e,t,["sourceLandmark","targetLandmark","mode"]),h.a.get(e,t,["matrix"]),function(e,t){t.classHierarchy.push("vtkLandmarkTransform"),e.update=function(){Ye.c.identity(t.matrix);var e=t.sourceLandmark.getNumberOfPoints();if(t.targetLandmark.getNumberOfPoints()!==e||null===t.sourceLandmark||null===t.targetLandmark||0===e)return console.error("Error : Bad inputs of vtkLandmarkTransform"),t.matrix;for(var n=[0,0,0],r=[0,0,0],i=[0,0,0],a=0;a<e;a++)t.sourceLandmark.getPoint(a,i),n[0]+=i[0],n[1]+=i[1],n[2]+=i[2],t.targetLandmark.getPoint(a,i),r[0]+=i[0],r[1]+=i[1],r[2]+=i[2];if(n[0]/=e,n[1]/=e,n[2]/=e,r[0]/=e,r[1]/=e,r[2]/=e,1===e)return Ye.c.identity(t.matrix),t.matrix.elem[12]=r[0]-n[0],t.matrix.elem[13]=r[1]-n[1],t.matrix.elem[14]=r[2]-n[2],t.matrix;var o=Ye.b.create();o[0]=0,o[4]=0,o[8]=0;var s=Ye.b.create();s[0]=0,s[4]=0,s[8]=0;for(var u=[0,0,0],l=[0,0,0],c=0,d=0,p=0;p<e;p++){t.sourceLandmark.getPoint(p,u),u[0]-=n[0],u[1]-=n[1],u[2]-=n[2],t.targetLandmark.getPoint(p,l),l[0]-=r[0],l[1]-=r[1],l[2]-=r[2];for(var h=0;h<3;h++)o[0+h]+=u[h]*l[0],o[3+h]+=u[h]*l[1],o[6+h]+=u[h]*l[2],t.mode===qe.AFFINE&&(s[0+h]+=u[h]*u[0],s[3+h]+=u[h]*u[1],s[6+h]+=u[h]*u[2]);c+=u[0]*u[0]+u[1]*u[1]+u[2]*u[2],d+=l[0]*l[0]+l[1]*l[1]+l[2]*l[2]}if(t.mode===qe.AFFINE){Ye.b.invert(s,s),Ye.b.multiply(o,s,o);for(var g=0;g<3;++g)for(var m=0;m<3;++m)t.matrix[4*m+g]=o[4*g+m]}else{var v=Math.sqrt(d/c),y=Ye.c.create();y[0]=0,y[5]=0,y[10]=0,y[15]=0,y[0]=o[0]+o[4]+o[8],y[5]=o[0]-o[4]-o[8],y[10]=-o[0]+o[4]-o[8],y[15]=-o[0]-o[4]+o[8],y[4]=y[1]=o[7]-o[5],y[8]=y[2]=o[2]-o[6],y[12]=y[3]=o[3]-o[1],y[9]=y[6]=o[3]+o[1],y[13]=y[7]=o[2]+o[6],y[14]=y[11]=o[7]+o[5];var b,M,x,w,A=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],T=[0,0,0,0],C=function(e){for(var t=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],n=0,r=0;r<4;r++)for(var i=0;i<4;i++)t[i][r]=e[n++];return t}(y);if(f.jacobiN(C,4,T,A),T[0]===T[1]||2===e){var S,D,I=[0,0,0],E=[0,0,0],N=[0,0,0],O=[0,0,0];t.sourceLandmark.getPoint(0,I),t.targetLandmark.getPoint(0,E),t.sourceLandmark.getPoint(1,N),t.targetLandmark.getPoint(1,O);for(var _=0,L=0,P=0;P<3;P++)S[P]=N[P]-I[P],_=S[P]*S[P]+_,D[P]=O[P]-E[P],L=D[P]*D[P]+L;_=Math.sqrt(_),S[0]/=_,S[1]/=_,S[2]/=_,L=Math.sqrt(L),D[0]/=L,D[1]/=L,D[2]/=L,b=S[0]*D[0]+S[1]*D[1]+S[2]*D[2],M=S[1]*D[2]-S[2]*D[1],x=S[2]*D[0]-S[0]*D[2],w=S[0]*D[1]-S[1]*D[0];var k=Math.sqrt(M*M+x*x+w*w),R=Math.atan2(k,b);b=Math.cos(R/2),0!==k?(M*=k=Math.sin(R/2)/k,x*=k,w*=k):(f.perpendiculars(S,D,0,0),k=Math.sin(R/2),M=D[0]*k,x=D[1]*k,w=D[2]*k)}else b=A[0][0],M=A[1][0],x=A[2][0],w=A[3][0];var j=b*b,B=b*M,z=b*x,F=b*w,V=M*M,U=x*x,G=w*w,W=M*x,H=M*w,Y=x*w;if(t.matrix[0]=j+V-U-G,t.matrix[1]=2*(F+W),t.matrix[2]=2*(-z+H),t.matrix[4]=2*(-F+W),t.matrix[5]=j-V+U-G,t.matrix[6]=2*(B+Y),t.matrix[8]=2*(z+H),t.matrix[9]=2*(-B+Y),t.matrix[10]=j-V-U+G,t.mode!==qe.RIGID_BODY)for(var Q=0;Q<3;Q++)t.matrix[0+Q]=t.matrix[0+Q]*v,t.matrix[4+Q]=t.matrix[4+Q]*v,t.matrix[8+Q]=t.matrix[8+Q]*v}var q=t.matrix[0]*n[0]+t.matrix[4]*n[1]+t.matrix[8]*n[2],X=t.matrix[1]*n[0]+t.matrix[5]*n[1]+t.matrix[9]*n[2],K=t.matrix[2]*n[0]+t.matrix[6]*n[1]+t.matrix[10]*n[2];return t.matrix[12]=r[0]-q,t.matrix[13]=r[1]-X,t.matrix[14]=r[2]-K,t.matrix[3]=0,t.matrix[7]=0,t.matrix[11]=0,t.matrix[15]=1,t.matrix}}(e,t)}var Ze=h.a.newInstance(Ke,"vtkLandmarkTransform"),Je={vtkLandmarkTransform:Object.assign({newInstance:Ze,extend:Ke},Qe)},$e=n(96),et=[{label:"Choose a headset"},{id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]},{id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]}];function tt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var nt=navigator.userAgent||navigator.vendor||window.opera,rt=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(nt)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(nt.substr(0,4)),it=/iPad|iPhone|iPod/.test(navigator.platform),at=-1!==nt.indexOf("Version")&&-1!==nt.indexOf("Android")&&-1!==nt.indexOf("Chrome"),ot=/^((?!chrome|android).)*safari/i.test(nt),st=-1!==nt.indexOf("Firefox")&&-1!==nt.indexOf("Android"),ut=Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio,lt=Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio,ct={width:ut,height:lt};function ft(e,t,n,r){if(!e.ua&&!e.res)return!1;if(e.ua&&t.indexOf(e.ua)<0)return!1;if(e.res){if(!e.res[0]||!e.res[1])return!1;var i=tt(e.res,2),a=i[0],o=i[1];if(Math.min(n,r)!==Math.min(a,o)||Math.max(n,r)!==Math.max(a,o))return!1}return!0}!function(){for(var e=0;e<$e.devices.length;e++){var t=$e.devices[e];if(t.rules)if("ios"===t.type||"android"===t.type){if(it===("ios"===t.type)){for(var n=!1,r=0;r<t.rules.length;r++)if(ft(t.rules[r],nt,ut,lt)){n=!0;break}n&&(ct.xdpi=t.dpi[0]||t.dpi,ct.ydpi=t.dpi[1]||t.dpi,ct.bevelMm=t.bw)}}else console.warn("Device[".concat(e,"] has invalid type."));else console.warn("Device[".concat(e,"] has no rules section."))}}();var dt={Core:E,DataModel:He,Transform:Je,System:{vtkMobileVR:{isMobile:rt,isIOS:it,isWebViewAndroid:at,isSafari:ot,isFirefoxAndroid:st,hardware:ct,getVRHeadset:function(){return new Promise(function(e,t){var n=document.querySelector("body"),r=document.createElement("select");r.innerHTML=et.map(function(e,t){return'<option value="'.concat(t,'">').concat(e.label,"</option>")}).join(""),r.style.zIndex=1e3,r.style.position="absolute",r.style.left="50%",r.style.top="50%",r.style.transform="translate(-50%, -50%)",r.addEventListener("change",function(t){n.removeChild(r),e(et[Number(t.target.value)])}),n.appendChild(r)})}},vtkTimerLog:{getUniversalTime:function(){return+new Date}}}},pt=h.a.vtkErrorMacro;var ht={imageId:"default-image-id",sliceIndex:0};function gt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ht,n),h.a.obj(e,t),h.a.algo(e,t,1,1),h.a.setGet(e,t,["imageId","sliceIndex"]),h.a.algo(e,t,1,1),function(e,t){t.classHierarchy.push("vtkImageDataToCornerstoneImage"),e.requestData=function(e,n){var r=e[0];if(r){var i=r.getSpacing(),a=r.getDimensions(),o=r.getPointData().getScalars(),s=o.getRange(0),u=o.getData(),l=null;if(1===a[2])l=o.data;else{var c=t.sliceIndex*a[0]*a[1]*u.BYTES_PER_ELEMENT;l=new(h.a.TYPED_ARRAYS[o.getDataType()])(u.buffer,c,a[0]*a[1])}var f={imageId:t.imageId,color:o.getNumberOfComponents()>1,columnPixelSpacing:i[1],columns:a[1],width:a[1],rowPixelSpacing:i[0],rows:a[0],height:a[0],intercept:0,invert:!1,minPixelValue:s[0],maxPixelValue:s[1],sizeInBytes:l.length*l.BYTES_PER_ELEMENT,slope:1,windowCenter:Math.round((s[0]+s[1])/2),windowWidth:s[1]-s[0],decodeTimeInMS:0,getPixelData:function(){return l}};n[0]=f}else pt("Invalid or missing input")}}(e,t)}var mt={vtkImageDataToCornerstoneImage:{newInstance:h.a.newInstance(gt,"vtkImageDataToCornerstoneImage"),extend:gt}},vt=h.a.vtkErrorMacro;function yt(e,t){t.classHierarchy.push("vtkCutter");var n=Object.assign({},e);e.getMTime=function(){var e=n.getMTime();return t.cutFunction?e=Math.max(e,t.cutFunction.getMTime()):e},e.requestData=function(e,n){var r=e[0];if(r)if(t.cutFunction){var i=Se.a.newInstance();!function(e,n){var r=e.getNumberOfCells(),i=e.getPoints(),a=i.getData(),o=i.getNumberOfPoints(),s=[],u=[],l=[];(!t.cutScalars||t.cutScalars.length<o)&&(t.cutScalars=new Float32Array(o));for(var c=0,f=0;c<a.length;)t.cutScalars[f++]=t.cutFunction.evaluateFunction(a[c++],a[c++],a[c++]);for(var d=e.getPolys().getData(),p=[],h=new Array(3),g=new Array(3),m=0;m<r;m++){var v=d[0];if(!(v<=2)){for(var y=[],b=v+1,M=void 0,x=b*m+1;x<b*(m+1);x++)M=d[x],y.push(t.cutScalars[M]);for(var w=y[0]>0,A=!0,T=1;T<y.length;T++)if(y[T]>0!==w){A=!1;break}if(!A){for(var C=[],S=b*m+1;S<b*(m+1);S++)C.push(d[S]);for(var D=[],I=0;I<C.length;I++){var E=I+1===C.length?0:I+1,N=y[I]>0;if(y[E]>0!==N){var O=I,_=E,L=y[_]-y[O];L<=0&&(O=E,_=I,L*=-1);var P=0;0!==L&&(P=(t.cutValue-y[O])/L);var k=C[O],R=C[_];h[0]=a[3*k],h[1]=a[3*k+1],h[2]=a[3*k+2],g[0]=a[3*R],g[1]=a[3*R+1],g[2]=a[3*R+2];var j=[h[0]+P*(g[0]-h[0]),h[1]+P*(g[1]-h[1]),h[2]+P*(g[2]-h[2])];D.push({pointEdge1:k,pointEdge2:R,intersectedPoint:j,newPointID:-1})}}for(var B=0;B<D.length;B++){for(var z=D[B],F=!1,V=0;V<p.length;V++){var U=p[V],G=z.pointEdge1===U.pointEdge1&&z.pointEdge2===U.pointEdge2,W=z.intersectedPoint[0]===U.intersectedPoint[0]&&z.intersectedPoint[1]===U.intersectedPoint[1]&&z.intersectedPoint[2]===U.intersectedPoint[2];if(G||W){F=!0,D[B].newPointID=p[V].newPointID;break}}F||(s.push(z.intersectedPoint[0]),s.push(z.intersectedPoint[1]),s.push(z.intersectedPoint[2]),D[B].newPointID=s.length/3-1,p.push(D[B]))}var H=D.length;2===H?u.push(H,D[0].newPointID,D[1].newPointID):H>2&&(l.push(H),D.forEach(function(e){l.push(e.newPointID)}))}}}var Y=n.getPoints();Y.setData(s),3!==Y.getNumberOfComponents&&Y.setNumberOfComponents(3),0!==u.length&&n.getLines().setData(u),0!==l.length&&n.getPolys().setData(l)}(r,i),n[0]=i}else vt("Missing cut function");else vt("Invalid or missing input")}}var bt={cutFunction:null,cutScalars:null,cutValue:0};function Mt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,bt,n),h.a.obj(e,t),h.a.algo(e,t,1,1),h.a.setGet(e,t,["cutFunction","cutValue"]),yt(e,t)}var xt={newInstance:h.a.newInstance(Mt,"vtkCutter"),extend:Mt},wt={vtkCutter:xt},At=n(21),Tt=n(7),Ct=h.a.vtkErrorMacro;function St(e,t,n,r){var i,a;e.set((i=n,a=0,t.map(function(e,t){return t===a?(a+=e+1,e):e+i})),r)}var Dt={outputPointsPrecision:At.b.DEFAULT};function It(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Dt,n),h.a.setGet(e,t,["outputPointsPrecision"]),h.a.obj(e,t),h.a.algo(e,t,1,1),function(e,t){t.classHierarchy.push("vtkAppendPolyData"),e.requestData=function(n,r){var a=e.getNumberOfInputPorts();if(a)if(1!==a){for(var o=Se.a.newInstance(),s=0,u=0,l=1,c=1,f=0,d=0,h=0,g=0,m=!0,v=!0,y=!0,b=0;b<a;b++){var M=n[b];if(!M)return void Ct("Invalid or missing input");var x=M.getPoints().getNumberOfPoints();s+=x,f+=M.getVerts().getNumberOfValues(),d+=M.getLines().getNumberOfValues(),h+=M.getStrips().getNumberOfValues(),g+=M.getPolys().getNumberOfValues(),x&&(c&&(c=0,u=M.getPoints().getDataType()),u=u>(l=M.getPoints().getDataType())?u:l);var w=M.getPointData();w?(m=m&&null!==w.getNormals(),v=v&&null!==w.getTCoords(),y=y&&null!==w.getScalars()):(m=!1,v=!1,y=!1)}t.outputPointsPrecision===At.b.SINGLE?u=Tt.b.FLOAT:t.outputPointsPrecision===At.b.DOUBLE&&(u=Tt.b.DOUBLE);var A=p.a.newInstance({dataType:u});A.setNumberOfPoints(s);var T=A.getData(),C=new Uint32Array(f),S=new Uint32Array(d),D=new Uint32Array(h),I=new Uint32Array(g),E=null,N=null,O=null,_=n[a-1];if(m){var L=_.getPointData().getNormals();E=i.a.newInstance({numberOfComponents:3,numberOfTuples:s,size:3*s,dataType:L.getDataType(),name:L.getName()})}if(v){var P=_.getPointData().getTCoords();N=i.a.newInstance({numberOfComponents:2,numberOfTuples:s,size:2*s,dataType:P.getDataType(),name:P.getName()})}if(y){var k=_.getPointData().getScalars();O=i.a.newInstance({numberOfComponents:k.getNumberOfComponents(),numberOfTuples:s,size:s*k.getNumberOfComponents(),dataType:k.getDataType(),name:k.getName()})}s=0,f=0,d=0,h=0,g=0;for(var R=0;R<a;R++){var j=n[R];T.set(j.getPoints().getData(),3*s),St(C,j.getVerts().getData(),s,f),f+=j.getVerts().getNumberOfValues(),St(S,j.getLines().getData(),s,d),d+=j.getLines().getNumberOfValues(),St(D,j.getStrips().getData(),s,h),h+=j.getStrips().getNumberOfValues(),St(I,j.getPolys().getData(),s,g),g+=j.getPolys().getNumberOfValues();var B=j.getPointData();if(m){var z=B.getNormals();E.getData().set(z.getData(),3*s)}if(v){var F=B.getTCoords();N.getData().set(F.getData(),2*s)}if(y){var V=B.getScalars();O.getData().set(V.getData(),s*O.getNumberOfComponents())}s+=j.getPoints().getNumberOfPoints()}o.setPoints(A),o.getVerts().setData(C),o.getLines().setData(S),o.getStrips().setData(D),o.getPolys().setData(I),E&&o.getPointData().setNormals(E),N&&o.getPointData().setTCoords(N),O&&o.getPointData().setScalars(O),r[0]=o}else r[0]=n[0];else Ct("No input specified.")}}(e,t)}var Et=h.a.newInstance(It,"vtkAppendPolyData"),Nt=Object.assign({newInstance:Et,extend:It}),Ot=n(8),_t=n(12);function Lt(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Pt=h.a.vtkWarningMacro;var kt={formula:{getArrays:function(){return{input:[],output:[]}},evaluate:function(){return null}}};function Rt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,kt,n),h.a.obj(e,t),h.a.algo(e,t,1,1),function(e,t){t.classHierarchy.push("vtkCalculator"),e.setFormula=function(n){return n!==t.formula&&(t.formula=n,e.modified(),!0)},e.getFormula=function(){return t.formula},e.augmentInputArrays=function(e,t){var n=t.slice(0);return e!==_t.b.POINT&&e!==_t.b.VERTEX||n.push({location:_t.b.COORDINATE}),n},e.createSimpleFormulaObject=function(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return{getArrays:function(){return{input:e.augmentInputArrays(t,n.map(function(e){return{location:t,name:e}})),output:[{location:t,name:r,attribute:"outputAttributeType"in a?a.outputAttributeType:At.a.SCALARS,numberOfComponents:"numberOfOutputComponents"in a?a.numberOfOutputComponents:1}]}},evaluate:function(e,t){var n=new Array(e.length),r=e.map(function(e,t){var r=e.getNumberOfComponents(),i=e.getData();return 1===r?function(e){return i[e]}:function(r){return e.getTuple(r,n[t])}}),a=t[0],o=a.getData(),s=a.getNumberOfComponents(),u=new Array(s);if(1===s)o.forEach(function(e,t){o[t]=i.apply(void 0,Lt(r.map(function(e){return e(t)})).concat([t,u]))});else for(var l=a.getNumberOfTuples(),c=function(e){u=i.apply(void 0,Lt(r.map(function(t){return t(e)})).concat([e,u])),a.setTuple(e,u)},f=0;f<l;++f)c(f)}}},e.setFormulaSimple=function(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return e.setFormula(e.createSimpleFormulaObject(t,n,r,i,a))},e.prepareArrays=function(e,t,n){var r=[],a=[];return e.input.forEach(function(e){if(e.location===_t.b.COORDINATE)r.push(t.getPoints());else{var n=[[_t.b.UNIFORM,function(e){return e.getFieldData()}],[_t.b.POINT,function(e){return e.getPointData()}],[_t.b.CELL,function(e){return e.getCellData()}],[_t.b.VERTEX,function(e){return e.getVertexData()}],[_t.b.EDGE,function(e){return e.getEdgeData()}],[_t.b.ROW,function(e){return e.getRowData()}]].reduce(function(e,t){return e[t[0]]=t[1],e},{}),i="location"in e&&e.location in n?n[e.location](t):null;i?e.name?r.push(i.getArrayByName(e.name)):"index"in e?r.push(i.getArrayByIndex(e.index)):"attribute"in e&&e.location!==_t.b.UNIFORM?r.push(i.getActiveAttribute(e.attribute)):(Pt('No matching array for specifier "'.concat(JSON.stringify(e),'".')),r.push(null)):(Pt('Specifier "'.concat(JSON.stringify(e),'" did not provide a usable location.')),r.push(null))}}),e.output.forEach(function(e){var r=Object.assign({},e),o="numberOfComponents"in r?r.numberOfComponents:1;if(e.location===_t.b.UNIFORM&&"tuples"in r&&(r.size=o*r.tuples),e.location===_t.b.COORDINATE){var s=t.getPoints(),u=p.a.newInstance({dataType:s.getDataType()});u.setNumberOfPoints(s.getNumberOfPoints(),s.getNumberOfComponents()),n.setPoints(u),a.push(u)}else{var l=[[_t.b.UNIFORM,function(e){return e.getFieldData()},function(e,t){return"tuples"in t?t.tuples:0}],[_t.b.POINT,function(e){return e.getPointData()},function(e){return e.getPoints().getNumberOfPoints()}],[_t.b.CELL,function(e){return e.getCellData()},function(e){return e.getNumberOfCells()}],[_t.b.VERTEX,function(e){return e.getVertexData()},function(e){return e.getNumberOfVertices()}],[_t.b.EDGE,function(e){return e.getEdgeData()},function(e){return e.getNumberOfEdges()}],[_t.b.ROW,function(e){return e.getRowData()},function(e){return e.getNumberOfRows()}]].reduce(function(e,t){return e[t[0]]={getData:t[1],getSize:t[2]},e},{}),c=null,f=0;if("location"in e&&e.location in l&&(c=l[e.location].getData(n),f=l[e.location].getSize(t,r)),f<=0)Pt("Output array size could not be determined for ".concat(JSON.stringify(e),".")),a.push(null);else if(c){r.size=o*f;var d=i.a.newInstance(r),h=c.addArray(d);"attribute"in r&&e.location!==_t.b.UNIFORM&&c.setActiveAttributeByIndex(h,r.attribute),a.push(d)}else Pt('Specifier "'.concat(JSON.stringify(e),'" did not provide a usable location.')),a.push(null)}}),{arraysIn:r,arraysOut:a}},e.requestData=function(n,r){if(!t.formula)return 0;var i=t.formula.getArrays(n),a=Object(Ot.a)({vtkClass:n[0].getClassName()});a.shallowCopy(n[0]),r[0]=a;var o=e.prepareArrays(i,n[0],r[0]);return t.formula.evaluate(o.arraysIn,o.arraysOut),1}}(e,t)}var jt={newInstance:h.a.newInstance(Rt,"vtkCalculator"),extend:Rt};function Bt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var zt=h.a.vtkErrorMacro,Ft=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.segmentMapping={},this.segments=[null],this.faces=[]}var t,n,r;return t=e,(n=[{key:"addSegment",value:function(e){var t=e[0],n=e[e.length-1];if(!(t===n||e.length<2)){var r=this.segmentMapping[t],i=this.segmentMapping[n];if(void 0!==r&&void 0!==i)if(Math.abs(r)===Math.abs(i)){var a=r<i?i:r,o=this.segments[a];if(r>0)for(var s=1;s<e.length-1;s++)o.push(e[s]);else for(var u=1;u<e.length-1;u++)o.push(e[e.length-1-u]);this.faces.push(o),this.segments[a]=null,this.segmentMapping[t]=void 0,this.segmentMapping[n]=void 0}else{var l=Math.abs(r),c=Math.abs(i),f=this.segments[l],d=this.segments[c];this.segments[l]=null,this.segments[c]=null,this.segmentMapping[f[0]]=void 0,this.segmentMapping[d[0]]=void 0,this.segmentMapping[f[f.length-1]]=void 0,this.segmentMapping[d[d.length-1]]=void 0,this.addSegment(e),this.addSegment(f),this.addSegment(d)}else if(void 0!==r){if(r>0){for(var p=this.segments[r],h=1;h<e.length;h++)p.push(e[h]);this.segmentMapping[n]=r}else{var g=this.segments[-r];this.segmentMapping[n]=-r;for(var m=1;m<e.length;m++)g.unshift(e[m])}this.segmentMapping[t]=void 0}else if(void 0!==i){if(i>0){for(var v=this.segments[i],y=1;y<e.length;y++)v.push(e[e.length-1-y]);this.segmentMapping[t]=i}else{var b=this.segments[-i];this.segmentMapping[t]=-i;for(var M=1;M<e.length;M++)b.unshift(e[e.length-M-1])}this.segmentMapping[n]=void 0}else{var x=this.segments.length;this.segments.push(e),this.segmentMapping[t]=-x,this.segmentMapping[n]=x}}}}])&&Bt(t.prototype,n),r&&Bt(t,r),e}();var Vt={};function Ut(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Vt,n),h.a.obj(e,t),h.a.algo(e,t,1,1),function(e,t){t.classHierarchy.push("vtkClosedPolyLineToSurfaceFilter"),e.requestData=function(e,t){var n=e[0],i=Se.a.newInstance();if(i.shallowCopy(n),n){for(var a=new Ft,o=n.getLines().getData(),s=0;s<o.length;){for(var u=o[s++],l=[],c=0;c<u;c++)l.push(o[s+c]);a.addSegment(l),s+=u}for(var f=a.faces,d=f.length,p=0;p<f.length;p++)d+=f[p].length;var h=new Uint16Array(d);s=0;for(var g=0;g<f.length;g++){var m=f[g];h[s++]=m.length;for(var v=0;v<m.length;v++)h[s++]=m[v]}i.setPolys(r.a.newInstance({values:h,name:"faces"})),t[0]=i}else zt("Invalid or missing input")}}(e,t)}var Gt={newInstance:h.a.newInstance(Ut,"vtkClosedPolyLineToSurfaceFilter"),extend:Ut};function Wt(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Ht=h.a.vtkErrorMacro;var Yt={croppingPlanes:[]};function Qt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Yt,n),h.a.obj(e,t),h.a.algo(e,t,1,1),h.a.setGetArray(e,t,["croppingPlanes"],6),function(e,t){t.classHierarchy.push("vtkImageCropFilter"),e.reset=function(){var t=e.getInputData();t&&e.setCroppingPlanes.apply(e,Wt(t.getExtent()))},e.requestData=function(e,n){var r=e[0];if(r){var a=r.getPointData().getScalars();if(a){var s=r.getExtent(),u=6===t.croppingPlanes.length?s.map(function(e,n){return n%2==0?Math.max(e,Math.round(t.croppingPlanes[n])):Math.min(e,Math.round(t.croppingPlanes[n]))}):s.slice();if(u[0]===s[0]&&u[1]===s[1]&&u[2]===s[2]&&u[3]===s[3]&&u[4]===s[4]&&u[5]===s[5]){var l=o.a.newInstance();return l.shallowCopy(r),void(n[0]=l)}for(var c=0;c<3;++c)if(u[2*c]>u[2*c+1]){var f=[u[2*c+1],u[2*c]];u[2*c]=f[0],u[2*c+1]=f[1]}for(var d=0;d<6;d+=2)u[d]=Math.max(u[d],s[d]),u[d+1]=Math.min(u[d+1],s[d+1]);for(var p=a.getNumberOfComponents(),h=(u[1]-u[0]+1)*(u[3]-u[2]+1)*(u[5]-u[4]+1)*p,g=a.getData(),m=r.getDimensions(),v=p*m[0],y=p*m[0]*m[1],b=(u[0]-s[0])*p,M=(u[1]-u[0]+1)*p,x=new g.constructor(h),w=0,A=u[4];A<=u[5];++A)for(var T=u[2];T<=u[3];++T){var C=b+(T-s[2])*v+(A-s[4])*y,S=C+M,D=g.subarray(C,S);x.set(D,w),w+=D.length}var I=o.a.newInstance({extent:u,origin:r.getOrigin(),direction:r.getDirection(),spacing:r.getSpacing()}),E=i.a.newInstance({name:a.getName(),numberOfComponents:p,values:x});I.getPointData().setScalars(E),n[0]=I}else Ht("No scalars from input")}else Ht("Invalid or missing input")},e.isResetAvailable=function(){if(0===t.croppingPlanes.length)return!1;var n=e.getInputData();return!!n&&void 0!==n.getExtent().find(function(e,n){return Math.abs(t.croppingPlanes[n]-e)>Number.EPSILON})}}(e,t)}var qt={newInstance:h.a.newInstance(Qt,"vtkImageCropFilter"),extend:Qt},Xt=[[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,3,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,9,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,3,8,9,1,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,3,8,1,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[9,11,2,0,9,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[2,3,8,2,8,11,11,8,9,-1,-1,-1,-1,-1,-1,-1],[3,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,2,10,8,0,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,0,9,2,10,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,2,10,1,10,9,9,10,8,-1,-1,-1,-1,-1,-1,-1],[3,1,11,10,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,1,11,0,11,8,8,11,10,-1,-1,-1,-1,-1,-1,-1],[3,0,9,3,9,10,10,9,11,-1,-1,-1,-1,-1,-1,-1],[9,11,8,11,10,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[4,8,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[4,0,3,7,4,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,9,1,8,7,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[4,9,1,4,1,7,7,1,3,-1,-1,-1,-1,-1,-1,-1],[1,11,2,8,7,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[3,7,4,3,4,0,1,11,2,-1,-1,-1,-1,-1,-1,-1],[9,11,2,9,2,0,8,7,4,-1,-1,-1,-1,-1,-1,-1],[2,9,11,2,7,9,2,3,7,7,4,9,-1,-1,-1,-1],[8,7,4,3,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[10,7,4,10,4,2,2,4,0,-1,-1,-1,-1,-1,-1,-1],[9,1,0,8,7,4,2,10,3,-1,-1,-1,-1,-1,-1,-1],[4,10,7,9,10,4,9,2,10,9,1,2,-1,-1,-1,-1],[3,1,11,3,11,10,7,4,8,-1,-1,-1,-1,-1,-1,-1],[1,11,10,1,10,4,1,4,0,7,4,10,-1,-1,-1,-1],[4,8,7,9,10,0,9,11,10,10,3,0,-1,-1,-1,-1],[4,10,7,4,9,10,9,11,10,-1,-1,-1,-1,-1,-1,-1],[9,4,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[9,4,5,0,3,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,4,5,1,0,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[8,4,5,8,5,3,3,5,1,-1,-1,-1,-1,-1,-1,-1],[1,11,2,9,4,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[3,8,0,1,11,2,4,5,9,-1,-1,-1,-1,-1,-1,-1],[5,11,2,5,2,4,4,2,0,-1,-1,-1,-1,-1,-1,-1],[2,5,11,3,5,2,3,4,5,3,8,4,-1,-1,-1,-1],[9,4,5,2,10,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,2,10,0,10,8,4,5,9,-1,-1,-1,-1,-1,-1,-1],[0,4,5,0,5,1,2,10,3,-1,-1,-1,-1,-1,-1,-1],[2,5,1,2,8,5,2,10,8,4,5,8,-1,-1,-1,-1],[11,10,3,11,3,1,9,4,5,-1,-1,-1,-1,-1,-1,-1],[4,5,9,0,1,8,8,1,11,8,11,10,-1,-1,-1,-1],[5,0,4,5,10,0,5,11,10,10,3,0,-1,-1,-1,-1],[5,8,4,5,11,8,11,10,8,-1,-1,-1,-1,-1,-1,-1],[9,8,7,5,9,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[9,0,3,9,3,5,5,3,7,-1,-1,-1,-1,-1,-1,-1],[0,8,7,0,7,1,1,7,5,-1,-1,-1,-1,-1,-1,-1],[1,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[9,8,7,9,7,5,11,2,1,-1,-1,-1,-1,-1,-1,-1],[11,2,1,9,0,5,5,0,3,5,3,7,-1,-1,-1,-1],[8,2,0,8,5,2,8,7,5,11,2,5,-1,-1,-1,-1],[2,5,11,2,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1],[7,5,9,7,9,8,3,2,10,-1,-1,-1,-1,-1,-1,-1],[9,7,5,9,2,7,9,0,2,2,10,7,-1,-1,-1,-1],[2,10,3,0,8,1,1,8,7,1,7,5,-1,-1,-1,-1],[10,1,2,10,7,1,7,5,1,-1,-1,-1,-1,-1,-1,-1],[9,8,5,8,7,5,11,3,1,11,10,3,-1,-1,-1,-1],[5,0,7,5,9,0,7,0,10,1,11,0,10,0,11,-1],[10,0,11,10,3,0,11,0,5,8,7,0,5,0,7,-1],[10,5,11,7,5,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[11,5,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,3,8,5,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[9,1,0,5,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,3,8,1,8,9,5,6,11,-1,-1,-1,-1,-1,-1,-1],[1,5,6,2,1,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,5,6,1,6,2,3,8,0,-1,-1,-1,-1,-1,-1,-1],[9,5,6,9,6,0,0,6,2,-1,-1,-1,-1,-1,-1,-1],[5,8,9,5,2,8,5,6,2,3,8,2,-1,-1,-1,-1],[2,10,3,11,5,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[10,8,0,10,0,2,11,5,6,-1,-1,-1,-1,-1,-1,-1],[0,9,1,2,10,3,5,6,11,-1,-1,-1,-1,-1,-1,-1],[5,6,11,1,2,9,9,2,10,9,10,8,-1,-1,-1,-1],[6,10,3,6,3,5,5,3,1,-1,-1,-1,-1,-1,-1,-1],[0,10,8,0,5,10,0,1,5,5,6,10,-1,-1,-1,-1],[3,6,10,0,6,3,0,5,6,0,9,5,-1,-1,-1,-1],[6,9,5,6,10,9,10,8,9,-1,-1,-1,-1,-1,-1,-1],[5,6,11,4,8,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[4,0,3,4,3,7,6,11,5,-1,-1,-1,-1,-1,-1,-1],[1,0,9,5,6,11,8,7,4,-1,-1,-1,-1,-1,-1,-1],[11,5,6,1,7,9,1,3,7,7,4,9,-1,-1,-1,-1],[6,2,1,6,1,5,4,8,7,-1,-1,-1,-1,-1,-1,-1],[1,5,2,5,6,2,3,4,0,3,7,4,-1,-1,-1,-1],[8,7,4,9,5,0,0,5,6,0,6,2,-1,-1,-1,-1],[7,9,3,7,4,9,3,9,2,5,6,9,2,9,6,-1],[3,2,10,7,4,8,11,5,6,-1,-1,-1,-1,-1,-1,-1],[5,6,11,4,2,7,4,0,2,2,10,7,-1,-1,-1,-1],[0,9,1,4,8,7,2,10,3,5,6,11,-1,-1,-1,-1],[9,1,2,9,2,10,9,10,4,7,4,10,5,6,11,-1],[8,7,4,3,5,10,3,1,5,5,6,10,-1,-1,-1,-1],[5,10,1,5,6,10,1,10,0,7,4,10,0,10,4,-1],[0,9,5,0,5,6,0,6,3,10,3,6,8,7,4,-1],[6,9,5,6,10,9,4,9,7,7,9,10,-1,-1,-1,-1],[11,9,4,6,11,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[4,6,11,4,11,9,0,3,8,-1,-1,-1,-1,-1,-1,-1],[11,1,0,11,0,6,6,0,4,-1,-1,-1,-1,-1,-1,-1],[8,1,3,8,6,1,8,4,6,6,11,1,-1,-1,-1,-1],[1,9,4,1,4,2,2,4,6,-1,-1,-1,-1,-1,-1,-1],[3,8,0,1,9,2,2,9,4,2,4,6,-1,-1,-1,-1],[0,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[8,2,3,8,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1],[11,9,4,11,4,6,10,3,2,-1,-1,-1,-1,-1,-1,-1],[0,2,8,2,10,8,4,11,9,4,6,11,-1,-1,-1,-1],[3,2,10,0,6,1,0,4,6,6,11,1,-1,-1,-1,-1],[6,1,4,6,11,1,4,1,8,2,10,1,8,1,10,-1],[9,4,6,9,6,3,9,3,1,10,3,6,-1,-1,-1,-1],[8,1,10,8,0,1,10,1,6,9,4,1,6,1,4,-1],[3,6,10,3,0,6,0,4,6,-1,-1,-1,-1,-1,-1,-1],[6,8,4,10,8,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[7,6,11,7,11,8,8,11,9,-1,-1,-1,-1,-1,-1,-1],[0,3,7,0,7,11,0,11,9,6,11,7,-1,-1,-1,-1],[11,7,6,1,7,11,1,8,7,1,0,8,-1,-1,-1,-1],[11,7,6,11,1,7,1,3,7,-1,-1,-1,-1,-1,-1,-1],[1,6,2,1,8,6,1,9,8,8,7,6,-1,-1,-1,-1],[2,9,6,2,1,9,6,9,7,0,3,9,7,9,3,-1],[7,0,8,7,6,0,6,2,0,-1,-1,-1,-1,-1,-1,-1],[7,2,3,6,2,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[2,10,3,11,8,6,11,9,8,8,7,6,-1,-1,-1,-1],[2,7,0,2,10,7,0,7,9,6,11,7,9,7,11,-1],[1,0,8,1,8,7,1,7,11,6,11,7,2,10,3,-1],[10,1,2,10,7,1,11,1,6,6,1,7,-1,-1,-1,-1],[8,6,9,8,7,6,9,6,1,10,3,6,1,6,3,-1],[0,1,9,10,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[7,0,8,7,6,0,3,0,10,10,0,6,-1,-1,-1,-1],[7,6,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[7,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[3,8,0,10,6,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,9,1,10,6,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[8,9,1,8,1,3,10,6,7,-1,-1,-1,-1,-1,-1,-1],[11,2,1,6,7,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,11,2,3,8,0,6,7,10,-1,-1,-1,-1,-1,-1,-1],[2,0,9,2,9,11,6,7,10,-1,-1,-1,-1,-1,-1,-1],[6,7,10,2,3,11,11,3,8,11,8,9,-1,-1,-1,-1],[7,3,2,6,7,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[7,8,0,7,0,6,6,0,2,-1,-1,-1,-1,-1,-1,-1],[2,6,7,2,7,3,0,9,1,-1,-1,-1,-1,-1,-1,-1],[1,2,6,1,6,8,1,8,9,8,6,7,-1,-1,-1,-1],[11,6,7,11,7,1,1,7,3,-1,-1,-1,-1,-1,-1,-1],[11,6,7,1,11,7,1,7,8,1,8,0,-1,-1,-1,-1],[0,7,3,0,11,7,0,9,11,6,7,11,-1,-1,-1,-1],[7,11,6,7,8,11,8,9,11,-1,-1,-1,-1,-1,-1,-1],[6,4,8,10,6,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[3,10,6,3,6,0,0,6,4,-1,-1,-1,-1,-1,-1,-1],[8,10,6,8,6,4,9,1,0,-1,-1,-1,-1,-1,-1,-1],[9,6,4,9,3,6,9,1,3,10,6,3,-1,-1,-1,-1],[6,4,8,6,8,10,2,1,11,-1,-1,-1,-1,-1,-1,-1],[1,11,2,3,10,0,0,10,6,0,6,4,-1,-1,-1,-1],[4,8,10,4,10,6,0,9,2,2,9,11,-1,-1,-1,-1],[11,3,9,11,2,3,9,3,4,10,6,3,4,3,6,-1],[8,3,2,8,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1],[0,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,0,9,2,4,3,2,6,4,4,8,3,-1,-1,-1,-1],[1,4,9,1,2,4,2,6,4,-1,-1,-1,-1,-1,-1,-1],[8,3,1,8,1,6,8,6,4,6,1,11,-1,-1,-1,-1],[11,0,1,11,6,0,6,4,0,-1,-1,-1,-1,-1,-1,-1],[4,3,6,4,8,3,6,3,11,0,9,3,11,3,9,-1],[11,4,9,6,4,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[4,5,9,7,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,3,8,4,5,9,10,6,7,-1,-1,-1,-1,-1,-1,-1],[5,1,0,5,0,4,7,10,6,-1,-1,-1,-1,-1,-1,-1],[10,6,7,8,4,3,3,4,5,3,5,1,-1,-1,-1,-1],[9,4,5,11,2,1,7,10,6,-1,-1,-1,-1,-1,-1,-1],[6,7,10,1,11,2,0,3,8,4,5,9,-1,-1,-1,-1],[7,10,6,5,11,4,4,11,2,4,2,0,-1,-1,-1,-1],[3,8,4,3,4,5,3,5,2,11,2,5,10,6,7,-1],[7,3,2,7,2,6,5,9,4,-1,-1,-1,-1,-1,-1,-1],[9,4,5,0,6,8,0,2,6,6,7,8,-1,-1,-1,-1],[3,2,6,3,6,7,1,0,5,5,0,4,-1,-1,-1,-1],[6,8,2,6,7,8,2,8,1,4,5,8,1,8,5,-1],[9,4,5,11,6,1,1,6,7,1,7,3,-1,-1,-1,-1],[1,11,6,1,6,7,1,7,0,8,0,7,9,4,5,-1],[4,11,0,4,5,11,0,11,3,6,7,11,3,11,7,-1],[7,11,6,7,8,11,5,11,4,4,11,8,-1,-1,-1,-1],[6,5,9,6,9,10,10,9,8,-1,-1,-1,-1,-1,-1,-1],[3,10,6,0,3,6,0,6,5,0,5,9,-1,-1,-1,-1],[0,8,10,0,10,5,0,5,1,5,10,6,-1,-1,-1,-1],[6,3,10,6,5,3,5,1,3,-1,-1,-1,-1,-1,-1,-1],[1,11,2,9,10,5,9,8,10,10,6,5,-1,-1,-1,-1],[0,3,10,0,10,6,0,6,9,5,9,6,1,11,2,-1],[10,5,8,10,6,5,8,5,0,11,2,5,0,5,2,-1],[6,3,10,6,5,3,2,3,11,11,3,5,-1,-1,-1,-1],[5,9,8,5,8,2,5,2,6,3,2,8,-1,-1,-1,-1],[9,6,5,9,0,6,0,2,6,-1,-1,-1,-1,-1,-1,-1],[1,8,5,1,0,8,5,8,6,3,2,8,6,8,2,-1],[1,6,5,2,6,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,6,3,1,11,6,3,6,8,5,9,6,8,6,9,-1],[11,0,1,11,6,0,9,0,5,5,0,6,-1,-1,-1,-1],[0,8,3,5,11,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[11,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[10,11,5,7,10,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[10,11,5,10,5,7,8,0,3,-1,-1,-1,-1,-1,-1,-1],[5,7,10,5,10,11,1,0,9,-1,-1,-1,-1,-1,-1,-1],[11,5,7,11,7,10,9,1,8,8,1,3,-1,-1,-1,-1],[10,2,1,10,1,7,7,1,5,-1,-1,-1,-1,-1,-1,-1],[0,3,8,1,7,2,1,5,7,7,10,2,-1,-1,-1,-1],[9,5,7,9,7,2,9,2,0,2,7,10,-1,-1,-1,-1],[7,2,5,7,10,2,5,2,9,3,8,2,9,2,8,-1],[2,11,5,2,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1],[8,0,2,8,2,5,8,5,7,11,5,2,-1,-1,-1,-1],[9,1,0,5,3,11,5,7,3,3,2,11,-1,-1,-1,-1],[9,2,8,9,1,2,8,2,7,11,5,2,7,2,5,-1],[1,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,7,8,0,1,7,1,5,7,-1,-1,-1,-1,-1,-1,-1],[9,3,0,9,5,3,5,7,3,-1,-1,-1,-1,-1,-1,-1],[9,7,8,5,7,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[5,4,8,5,8,11,11,8,10,-1,-1,-1,-1,-1,-1,-1],[5,4,0,5,0,10,5,10,11,10,0,3,-1,-1,-1,-1],[0,9,1,8,11,4,8,10,11,11,5,4,-1,-1,-1,-1],[11,4,10,11,5,4,10,4,3,9,1,4,3,4,1,-1],[2,1,5,2,5,8,2,8,10,4,8,5,-1,-1,-1,-1],[0,10,4,0,3,10,4,10,5,2,1,10,5,10,1,-1],[0,5,2,0,9,5,2,5,10,4,8,5,10,5,8,-1],[9,5,4,2,3,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[2,11,5,3,2,5,3,5,4,3,4,8,-1,-1,-1,-1],[5,2,11,5,4,2,4,0,2,-1,-1,-1,-1,-1,-1,-1],[3,2,11,3,11,5,3,5,8,4,8,5,0,9,1,-1],[5,2,11,5,4,2,1,2,9,9,2,4,-1,-1,-1,-1],[8,5,4,8,3,5,3,1,5,-1,-1,-1,-1,-1,-1,-1],[0,5,4,1,5,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[8,5,4,8,3,5,9,5,0,0,5,3,-1,-1,-1,-1],[9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[4,7,10,4,10,9,9,10,11,-1,-1,-1,-1,-1,-1,-1],[0,3,8,4,7,9,9,7,10,9,10,11,-1,-1,-1,-1],[1,10,11,1,4,10,1,0,4,7,10,4,-1,-1,-1,-1],[3,4,1,3,8,4,1,4,11,7,10,4,11,4,10,-1],[4,7,10,9,4,10,9,10,2,9,2,1,-1,-1,-1,-1],[9,4,7,9,7,10,9,10,1,2,1,10,0,3,8,-1],[10,4,7,10,2,4,2,0,4,-1,-1,-1,-1,-1,-1,-1],[10,4,7,10,2,4,8,4,3,3,4,2,-1,-1,-1,-1],[2,11,9,2,9,7,2,7,3,7,9,4,-1,-1,-1,-1],[9,7,11,9,4,7,11,7,2,8,0,7,2,7,0,-1],[3,11,7,3,2,11,7,11,4,1,0,11,4,11,0,-1],[1,2,11,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[4,1,9,4,7,1,7,3,1,-1,-1,-1,-1,-1,-1,-1],[4,1,9,4,7,1,0,1,8,8,1,7,-1,-1,-1,-1],[4,3,0,7,3,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[9,8,11,11,8,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[3,9,0,3,10,9,10,11,9,-1,-1,-1,-1,-1,-1,-1],[0,11,1,0,8,11,8,10,11,-1,-1,-1,-1,-1,-1,-1],[3,11,1,10,11,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,10,2,1,9,10,9,8,10,-1,-1,-1,-1,-1,-1,-1],[3,9,0,3,10,9,1,9,2,2,9,10,-1,-1,-1,-1],[0,10,2,8,10,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[3,10,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[2,8,3,2,11,8,11,9,8,-1,-1,-1,-1,-1,-1,-1],[9,2,11,0,2,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[2,8,3,2,11,8,0,8,1,1,8,11,-1,-1,-1,-1],[1,2,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,8,3,9,8,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,1,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]],Kt=[[0,1],[1,3],[2,3],[0,2],[4,5],[5,7],[6,7],[4,6],[0,4],[1,5],[2,6],[3,7]];var Zt={getCase:function(e){return Xt[e]},getEdge:function(e){return Kt[e]}},Jt=h.a.vtkErrorMacro,$t=h.a.vtkDebugMacro;var en={contourValue:0,computeNormals:!1,mergePoints:!1};function tn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,en,n),h.a.obj(e,t),h.a.algo(e,t,1,1),h.a.setGet(e,t,["contourValue","computeNormals","mergePoints"]),h.a.algo(e,t,1,1),function(e,t){t.classHierarchy.push("vtkImageMarchingCubes");var n=[],r=[],a=[],o=[],s=new Map;e.getVoxelScalars=function(e,t,i,a,o,s,u,l){n[0]=i*a+t*o[0]+e,n[1]=n[0]+1,n[2]=n[0]+o[0],n[3]=n[2]+1,n[4]=n[0]+a,n[5]=n[4]+1,n[6]=n[4]+o[0],n[7]=n[6]+1;for(var c=0;c<8;++c)r[c]=l[n[c]]},e.getVoxelPoints=function(e,t,n,r,i,a){o[0]=i[0]+e*a[0],o[1]=i[1]+t*a[1],o[2]=i[2]+n*a[2],o[3]=o[0]+a[0],o[4]=o[1],o[5]=o[2],o[6]=o[0],o[7]=o[1]+a[1],o[8]=o[2],o[9]=o[3],o[10]=o[7],o[11]=o[2],o[12]=o[0],o[13]=o[1],o[14]=o[2]+a[2],o[15]=o[3],o[16]=o[1],o[17]=o[14],o[18]=o[0],o[19]=o[7],o[20]=o[14],o[21]=o[3],o[22]=o[7],o[23]=o[14]},e.getPointGradient=function(e,t,n,r,i,a,o,s){var u,l;0===e?(u=o[e+1+t*r[0]+n*i],l=o[e+t*r[0]+n*i],s[0]=(l-u)/a[0]):e===r[0]-1?(u=o[e+t*r[0]+n*i],l=o[e-1+t*r[0]+n*i],s[0]=(l-u)/a[0]):(u=o[e+1+t*r[0]+n*i],l=o[e-1+t*r[0]+n*i],s[0]=.5*(l-u)/a[0]),0===t?(u=o[e+(t+1)*r[0]+n*i],l=o[e+t*r[0]+n*i],s[1]=(l-u)/a[1]):t===r[1]-1?(u=o[e+t*r[0]+n*i],l=o[e+(t-1)*r[0]+n*i],s[1]=(l-u)/a[1]):(u=o[e+(t+1)*r[0]+n*i],l=o[e+(t-1)*r[0]+n*i],s[1]=.5*(l-u)/a[1]),0===n?(u=o[e+t*r[0]+(n+1)*i],l=o[e+t*r[0]+n*i],s[2]=(l-u)/a[2]):n===r[2]-1?(u=o[e+t*r[0]+n*i],l=o[e+t*r[0]+(n-1)*i],s[2]=(l-u)/a[2]):(u=o[e+t*r[0]+(n+1)*i],l=o[e+t*r[0]+(n-1)*i],s[2]=.5*(l-u)/a[2])},e.getVoxelGradients=function(t,n,r,i,o,s,u){var l=[];e.getPointGradient(t,n,r,i,o,s,u,l),a[0]=l[0],a[1]=l[1],a[2]=l[2],e.getPointGradient(t+1,n,r,i,o,s,u,l),a[3]=l[0],a[4]=l[1],a[5]=l[2],e.getPointGradient(t,n+1,r,i,o,s,u,l),a[6]=l[0],a[7]=l[1],a[8]=l[2],e.getPointGradient(t+1,n+1,r,i,o,s,u,l),a[9]=l[0],a[10]=l[1],a[11]=l[2],e.getPointGradient(t,n,r+1,i,o,s,u,l),a[12]=l[0],a[13]=l[1],a[14]=l[2],e.getPointGradient(t+1,n,r+1,i,o,s,u,l),a[15]=l[0],a[16]=l[1],a[17]=l[2],e.getPointGradient(t,n+1,r+1,i,o,s,u,l),a[18]=l[0],a[19]=l[1],a[20]=l[2],e.getPointGradient(t+1,n+1,r+1,i,o,s,u,l),a[21]=l[0],a[22]=l[1],a[23]=l[2]},e.produceTriangles=function(i,u,l,c,d,p,h,g,m,v,y,b){var M,x,w=[1,2,4,8,16,32,64,128],A=[0,1,3,2,4,5,7,6],T=[],C=[],S=[];e.getVoxelScalars(u,l,c,d,p,h,g,m);for(var D=0,I=0;I<8;I++)r[A[I]]>=i&&(D|=w[I]);var E=Zt.getCase(D);if(!(E[0]<0)){e.getVoxelPoints(u,l,c,p,h,g),t.computeNormals&&e.getVoxelGradients(u,l,c,p,d,g,m);for(var N=0;E[N]>=0;N+=3){y.push(3);for(var O=0;O<3;O++){var _=Zt.getEdge(E[N+O]);if(M=void 0,t.mergePoints&&(S[0]=n[_[0]],S[1]=n[_[1]],S[0]>S[1]&&(x=S[0],S[0]=S[1],S[1]=x),M=s.get(S)),void 0===M){var L=(i-r[_[0]])/(r[_[1]]-r[_[0]]),P=o.slice(3*_[0],3*(_[0]+1)),k=o.slice(3*_[1],3*(_[1]+1));if(T[0]=P[0]+L*(k[0]-P[0]),T[1]=P[1]+L*(k[1]-P[1]),T[2]=P[2]+L*(k[2]-P[2]),M=v.length/3,v.push(T[0],T[1],T[2]),t.computeNormals){var R=a.slice(3*_[0],3*(_[0]+1)),j=a.slice(3*_[1],3*(_[1]+1));C[0]=R[0]+L*(j[0]-R[0]),C[1]=R[1]+L*(j[1]-R[1]),C[2]=R[2]+L*(j[2]-R[2]),f.normalize(C),b.push(C[0],C[1],C[2])}t.mergePoints&&(S[0]=n[_[0]],S[1]=n[_[1]],S[0]>S[1]&&(x=S[0],S[0]=S[1],S[1]=x),s[S]=M)}y.push(M)}}}},e.requestData=function(n,r){var a=n[0];if(a){console.time("mcubes");for(var o=a.getOrigin(),s=a.getSpacing(),u=a.getDimensions(),l=a.getPointData().getScalars().getData(),c=[],f=[],d=[],p=u[0]*u[1],h=0;h<u[2]-1;++h)for(var g=0;g<u[1]-1;++g)for(var m=0;m<u[0]-1;++m)e.produceTriangles(t.contourValue,m,g,h,p,u,o,s,l,c,f,d);var v=Se.a.newInstance();if(v.getPoints().setData(new Float32Array(c),3),v.getPolys().setData(new Uint32Array(f)),t.computeNormals){var y=new Float32Array(d),b=i.a.newInstance({numberOfComponents:3,values:y,name:"Normals"});v.getPointData().setNormals(b)}r[0]=v,$t("Produced output"),console.timeEnd("mcubes")}else Jt("Invalid or missing input")}}(e,t)}var nn={newInstance:h.a.newInstance(tn,"vtkImageMarchingCubes"),extend:tn},rn=[[-1,-1,-1,-1,-1],[0,3,-1,-1,-1],[1,0,-1,-1,-1],[1,3,-1,-1,-1],[2,1,-1,-1,-1],[0,3,2,1,-1],[2,0,-1,-1,-1],[2,3,-1,-1,-1],[3,2,-1,-1,-1],[0,2,-1,-1,-1],[1,0,3,2,-1],[1,2,-1,-1,-1],[3,1,-1,-1,-1],[0,1,-1,-1,-1],[3,0,-1,-1,-1],[-1,-1,-1,-1,-1]],an=[[0,1],[1,3],[2,3],[0,2]];var on={getCase:function(e){return rn[e]},getEdge:function(e){return an[e]}},sn=h.a.vtkErrorMacro,un=h.a.vtkDebugMacro;var ln={contourValues:[],slice:0,mergePoints:!1};function cn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ln,n),h.a.obj(e,t),h.a.algo(e,t,1,1),h.a.setGet(e,t,["slice","mergePoints"]),h.a.algo(e,t,1,1),function(e,t){t.classHierarchy.push("vtkImageMarchingSquares"),e.getContourValues=function(){return t.contourValues},e.setContourValues=function(n){t.contourValues=n,e.modified()};var n=[],r=[],i=[],a=new Map;e.getPixelScalars=function(e,t,i,a,o,s,u,l){n[0]=i*a+t*o[0]+e,n[1]=n[0]+1,n[2]=n[0]+o[0],n[3]=n[2]+1;for(var c=0;c<4;++c)r[c]=l[n[c]]},e.getPixelPoints=function(e,t,n,r,a,o){i[0]=a[0]+e*o[0],i[1]=a[1]+t*o[1],i[2]=i[0]+o[0],i[3]=i[1],i[4]=i[0],i[5]=i[1]+o[1],i[6]=i[2],i[7]=i[5]},e.produceLines=function(o,s,u,l,c,f,d,p,h,g,m){var v,y,b=[1,2,8,4],M=[],x=[];e.getPixelScalars(s,u,l,c,f,d,p,h);for(var w=0,A=0;A<4;A++)r[A]>=o&&(w|=b[A]);var T=on.getCase(w);if(!(T[0]<0)){e.getPixelPoints(s,u,l,f,d,p);for(var C=d[2]+l*p[2],S=0;T[S]>=0;S+=3){m.push(2);for(var D=0;D<2;D++){var I=on.getEdge(T[S+D]);if(v=void 0,t.mergePoints&&(x[0]=n[I[0]],x[1]=n[I[1]],x[0]>x[1]&&(y=x[0],x[0]=x[1],x[1]=y),v=a.get(x)),void 0===v){var E=(o-r[I[0]])/(r[I[1]]-r[I[0]]),N=i.slice(2*I[0],2*(I[0]+1)),O=i.slice(2*I[1],2*(I[1]+1));M[0]=N[0]+E*(O[0]-N[0]),M[1]=N[1]+E*(O[1]-N[1]),v=g.length/3,g.push(M[0],M[1],C),t.mergePoints&&(x[0]=n[I[0]],x[1]=n[I[1]],x[0]>x[1]&&(y=x[0],x[0]=x[1],x[1]=y),a[x]=v)}m.push(v)}}}},e.requestData=function(n,r){var i=n[0];if(i){console.time("msquares");var o=i.getOrigin(),s=i.getSpacing(),u=i.getDimensions(),l=i.getPointData().getScalars().getData(),c=[],f=[],d=u[0]*u[1],p=Math.round(t.slice);p>=u[2]&&(p=0);for(var h=0;h<t.contourValues.length;++h){for(var g=0;g<u[1]-1;++g)for(var m=0;m<u[0]-1;++m)e.produceLines(t.contourValues[h],m,g,p,d,u,o,s,l,c,f);a.clear()}var v=Se.a.newInstance();v.getPoints().setData(new Float32Array(c),3),v.getLines().setData(new Uint32Array(f)),r[0]=v,un("Produced output"),console.timeEnd("msquares")}else sn("Invalid or missing input")}}(e,t)}var fn={newInstance:h.a.newInstance(cn,"vtkImageMarchingSquares"),extend:cn},dn=h.a.vtkErrorMacro;var pn={sliceIndex:0};function hn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,pn,n),h.a.obj(e,t),h.a.algo(e,t,1,1),h.a.setGet(e,t,["sliceIndex","orientation"]),function(e,t){t.classHierarchy.push("vtkImageSliceFilter"),e.requestData=function(e,n){var r=e[0];if(r){var a=r.getPointData().getScalars();if(a){var s=r.get("extent","spacing","origin");s.extent[4]=t.sliceIndex,s.extent[5]=s.extent[4];var u=a.getNumberOfComponents(),l=(s.extent[1]-s.extent[0]+1)*(s.extent[3]-s.extent[2]+1)*u,c=l*t.sliceIndex,f=a.getData().slice(c,c+l),d=i.a.newInstance({name:a.getName(),numberOfComponents:u,values:f}),p=o.a.newInstance(s);p.getPointData().setScalars(d),n[0]=p}else dn("No scalars from input")}else dn("Invalid or missing input")}}(e,t)}var gn={newInstance:h.a.newInstance(hn,"vtkImageSliceFilter"),extend:hn},mn=h.a.vtkErrorMacro;var vn={integrationStep:1,maximumNumberOfSteps:1e3};function yn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,vn,n),h.a.obj(e,t),h.a.algo(e,t,2,1),h.a.setGet(e,t,["integrationStep","maximumNumberOfSteps"]),function(e,t){t.classHierarchy.push("vtkImageStreamline");var n=new Int32Array(3),r=new Float32Array(3),i=new Float32Array(8),a=new Uint32Array(8),o=new Uint32Array(3),s=new Float32Array(3),u=new Float32Array(3);e.interpolationFunctions=function(e,t){var n=e[0],r=e[1],i=e[2],a=1-n,o=1-r,s=1-i;t[0]=a*o*s,t[1]=n*o*s,t[2]=a*r*s,t[3]=n*r*s,t[4]=a*o*i,t[5]=n*o*i,t[6]=a*r*i,t[7]=n*r*i},e.computeStructuredCoordinates=function(e,t,n,r,i,a,o){for(var s=!0,u=0;u<3;u++){var l=(e[u]-a[u])/i[u];t[u]=Math.floor(l),n[u]=l-t[u];var c=!1,f=r[2*u],d=r[2*u+1];if(f===d){var p=e[u]-o[2*u];p*p<=i[u]*i[u]*1e-12&&(n[u]=0,t[u]=f,c=!0)}else t[u]<f?(i[u]>=0&&e[u]>=o[2*u]||i[u]<0&&e[u]<=o[2*u+1])&&(n[u]=0,t[u]=f,c=!0):t[u]>=d?(i[u]>=0&&e[u]<=o[2*u+1]||i[u]<0&&e[u]>=o[2*u])&&(n[u]=1,t[u]=d-1,c=!0):c=!0;s=s&&c}return s},e.getVoxelIndices=function(e,t,n){n[0]=e[2]*t[0]*t[1]+e[1]*t[0]+e[0],n[1]=n[0]+1,n[2]=n[0]+t[0],n[3]=n[2]+1,n[4]=n[0]+t[0]*t[1],n[5]=n[4]+1,n[6]=n[4]+t[0],n[7]=n[6]+1},e.vectorAt=function(t,s,u,l){if(!e.computeStructuredCoordinates(t,n,r,u.getExtent(),u.getSpacing(),u.getOrigin(),u.getBounds()))return!1;e.interpolationFunctions(r,i);var c=u.getExtent();o[0]=c[1]-c[0]+1,o[1]=c[3]-c[2]+1,o[2]=c[5]-c[4]+1,e.getVoxelIndices(n,o,a),l[0]=0,l[1]=0,l[2]=0;for(var f=0;f<8;f++)for(var d=s.getTuple(a[f]),p=0;p<3;p++)l[p]+=i[f]*d[p];return!0},e.computeNextStep=function(t,n,r,i){if(!e.vectorAt(i,t,n,s))return!1;for(var a=0;a<3;a++)u[a]=i[a]+r/2*s[a];if(!e.vectorAt(u,t,n,s))return!1;for(var o=0;o<3;o++)i[o]+=r*s[o];return!!e.vectorAt(i,t,n,s)},e.streamIntegrate=function(n,r,i,a){var o=[],s=t.maximumNumberOfSteps,u=t.integrationStep,l=new Float32Array(3);l[0]=i[0],l[1]=i[1],l[2]=i[2];var c=[],f=0;for(f=0;f<s&&e.computeNextStep(n,r,u,l);f++)for(var d=0;d<3;d++)c[3*f+d]=l[d];var p=Se.a.newInstance(),h=new Float32Array(c);o[0]=h,p.getPoints().setData(h,3);var g=h.length/3,m=new Uint32Array(g+1);m[0]=g;for(var v=0;v<g;v++)m[v+1]=v+a;return o[1]=m,p.getLines().setData(m),o},e.requestData=function(t,n){var r=t[0],i=t[1];if(r)if(i){for(var a=i.getPoints(),o=a.getNumberOfPoints(),s=0,u=[],l=r.getPointData().getVectors(),c=0;c<o;c++){var f=e.streamIntegrate(l,r,a.getTuple(c),s);s+=f[0].length/3,u.push(f)}var d=0,p=0;u.forEach(function(e){d+=e[1].length,p+=e[0].length}),s=0;var h=0,g=new Uint32Array(d),m=new Float32Array(p);u.forEach(function(e){g.set(e[1],s),s+=e[1].length,m.set(e[0],h),h+=e[0].length});var v=Se.a.newInstance();v.getPoints().setData(m,3),v.getLines().setData(g),n[0]=v}else mn("Invalid or missing seeds");else mn("Invalid or missing input")}}(e,t)}var bn={newInstance:h.a.newInstance(yn,"vtkImageStreamline"),extend:yn},Mn=n(128),xn=h.a.vtkErrorMacro,wn=h.a.vtkDebugMacro,An={};Mn.atoms.forEach(function(e){An[e.atomicNumber]=e});var Tn={sphereScaleArrayName:"radius",tolerance:.45,atomicRadiusScaleFactor:.3,bondRadius:.075,deltaBondFactor:.6,radiusType:"radiusVDW",hideElements:""};function Cn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Tn,n),h.a.obj(e,t),h.a.setGet(e,t,["atomicRadiusScaleFactor","bondRadius","deltaBondFactor","hideElements","radiusType","sphereScaleArrayName","tolerance"]),h.a.algo(e,t,1,2),function(e,t){var n=[],r=[],a=[],o=[];function s(e,i,s){var u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:t.bondRadius;r.push(s),r.push(l),a.push(i[0]),a.push(i[1]),a.push(i[2]),n.push(e[0]),n.push(e[1]),n.push(e[2]);for(var c=0;c<u.length;++c)o.push(255*u[c])}t.classHierarchy.push("vtkMoleculeToRepresentation"),e.requestData=function(u,l){var c=u[0];if(!c)return xn("Invalid or missing input"),1;var d=Se.a.newInstance(),p=Se.a.newInstance(),h=0,g=0,m=null,v=null,y=null,b=null;n.length=0,r.length=0,a.length=0,o.length=0,c.getAtoms()&&(void 0!==c.getAtoms().coords&&void 0!==c.getAtoms().coords["3d"]&&(h=(m=c.getAtoms().coords["3d"]).length/3),void 0!==c.getAtoms().elements&&void 0!==c.getAtoms().elements.number&&(v=c.getAtoms().elements.number)),c.getBonds()&&(void 0!==c.getBonds().connections&&void 0!==c.getBonds().connections.index&&(g=(y=c.getBonds().connections.index).length/2),void 0!==c.getBonds().order&&(b=c.getBonds().order));var M=[],x=[],w=[],A=[],T=[],C=[];wn("Checking for bonds with tolerance ",t.tolerance);for(var S=0,D=0;D<h;D++)v&&(A.push(An[v[D]][t.radiusType]),T.push(An[v[D]].radiusCovalent),C.push(An[v[D]].elementColor[0]),C.push(An[v[D]].elementColor[1]),C.push(An[v[D]].elementColor[2])),-1===t.hideElements.indexOf(An[v[D]].id)&&(S=3*D,M.push(m[S]),M.push(m[S+1]),M.push(m[S+2]),A.length>0&&x.push(A[D]*t.atomicRadiusScaleFactor),C.length>0&&(S=3*D,w.push(255*C[S]),w.push(255*C[S+1]),w.push(255*C[S+2])));if(!y){y=[],b=[];for(var I=0;I<h;I++)for(var E=I+1;E<h;E++){var N=T[I]+T[E]+t.tolerance,O=3*E,_=3*I,L=[m[O],m[O+1],m[O+2]];if(L[0]-=m[_],L[1]-=m[_+1],L[2]-=m[_+2],!(Math.abs(L[0])>N||Math.abs(L[1])>N||Math.abs(L[2])>N)){var P=N*N,k=L[0]*L[0]+L[1]*L[1]+L[2]*L[2];k<P&&k>.1&&(y.push(I),y.push(E),b.push(1))}}g=y.length/2}for(var R=0;R<g;R++){var j=y[2*R],B=y[2*R+1];if(-1===t.hideElements.indexOf(An[v[j]].id)&&-1===t.hideElements.indexOf(An[v[B]].id)){var z=3*B,F=3*j,V=[m[z],m[z+1],m[z+2]];V[0]-=m[F],V[1]-=m[F+1],V[2]-=m[F+2];var U=V[0]*V[0]+V[1]*V[1]+V[2]*V[2],G=(2+t.deltaBondFactor)*t.bondRadius,W=Math.min(A[j]*t.atomicRadiusScaleFactor,A[B]*t.atomicRadiusScaleFactor),H=(b[R]-1)*G+2*t.bondRadius;H>2*W*.6&&(t.bondRadius*=2*W*.6/H,G=(2+t.deltaBondFactor)*t.bondRadius);for(var Y=b[R]%2,Q=Y;Q<b[R]+Y;Q++){for(var q=(2*Math.floor(Q/2)+1-Y)*G/2,X=[V[0]/Math.sqrt(U),V[1]/Math.sqrt(U),V[2]/Math.sqrt(U)],K=[0,0,0],Z=0;Z<3;Z++)if(!(Math.abs(X[Z])<1e-6)){K[Z]=-(X[(Z+2)%3]*X[(Z+2)%3]+X[(Z+1)%3]*X[(Z+1)%3])/X[Z],K[(Z+1)%3]=X[(Z+1)%3],K[(Z+2)%3]=X[(Z+2)%3],f.normalize(K);break}q*=Math.pow(-1,Q%2);var J=void 0;if(v&&v[j]!==v[B]&&C.length>0){var $=Math.sqrt(U)/2;s(J=[m[z]-$*X[0]/2+q*K[0],m[z+1]-$*X[1]/2+q*K[1],m[z+2]-$*X[2]/2+q*K[2]],X,$,C.slice(z,z+3)),s(J=[m[F]+$*X[0]/2+q*K[0],m[F+1]+$*X[1]/2+q*K[1],m[F+2]+$*X[2]/2+q*K[2]],X,$,C.slice(F,F+3))}else{var ee=Math.sqrt(U);J=[m[z]-V[0]/2+q*K[0],m[z+1]-V[1]/2+q*K[1],m[z+2]-V[2]/2+q*K[2]],C.length>0?s(J,X,ee,C.slice(F,F+3)):s(J,X,ee)}}}}if(d.getPoints().setData(M,3),A){var te=i.a.newInstance({numberOfComponents:1,values:x,name:e.getSphereScaleArrayName()});d.getPointData().addArray(te)}if(C.length>0){var ne=i.a.newInstance({numberOfComponents:3,values:Uint8Array.from(w),name:"colors"});d.getPointData().setScalars(ne)}p.getPoints().setData(n,3);var re=i.a.newInstance({numberOfComponents:2,values:r,name:"stickScales"});p.getPointData().addArray(re);var ie=i.a.newInstance({numberOfComponents:3,values:a,name:"orientation"});if(p.getPointData().addArray(ie),C.length>0){var ae=i.a.newInstance({numberOfComponents:3,values:Uint8Array.from(o),name:"colors"});p.getPointData().setScalars(ae)}return l[0]=d,l[1]=p,1}}(e,t)}var Sn={newInstance:h.a.newInstance(Cn,"vtkMoleculeToRepresentation"),extend:Cn},Dn=h.a.vtkErrorMacro,In=[0,2,4,1,2,4,0,3,4,1,3,4,0,2,5,1,2,5,0,3,5,1,3,5],En=[2,0,1,2,2,3,2,4,5,2,6,7,2,0,2,2,1,3,2,4,6,2,5,7,2,0,4,2,1,5,2,2,6,2,3,7];var Nn={};function On(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Nn,n),h.a.obj(e,t),h.a.algo(e,t,1,1),function(e,t){t.classHierarchy.push("vtkOutlineFilter"),e.requestData=function(e,t){var n=e[0];if(n){var r=n.getBounds(),i=Se.a.newInstance();i.getPoints().setData(Float32Array.from(In.map(function(e){return r[e]})),3),i.getLines().setData(Uint16Array.from(En)),t[0]=i}else Dn("Invalid or missing input")}}(e,t)}var _n={newInstance:h.a.newInstance(On,"vtkOutlineFilter"),extend:On},Ln=n(80),Pn=n.n(Ln),kn=n(129),Rn=n.n(kn);function jn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Bn=h.a.vtkErrorMacro;var zn={backgroundImage:null,labelMap:null,maskWorldToIndex:null,voxelFunc:null,radius:1,label:0,slicingMode:null};function Fn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,zn,n),h.a.obj(e,t),h.a.algo(e,t,0,1),h.a.setGet(e,t,["backgroundImage","labelMap","labelWorldToIndex","voxelFunc","label","radius","slicingMode"]),function(e,t){t.classHierarchy.push("vtkPaintFilter");var n=null,r=null,a={};function s(){a.index=-1,a.snapshots=[],a.labels=[]}e.startStroke=function(){t.labelMap&&(r||(n=new Rn.a,r=new Pn.a(n)),r.exec("start",{bufferType:"Uint8Array",dimensions:t.labelMap.getDimensions(),slicingMode:t.slicingMode}))},e.endStroke=function(){r&&r.exec("end").then(function(i){for(var o=t.labelMap.getPointData().getScalars(),s=o.getData(),u=new Uint8Array(i),l=0,c=0;c<u.length;c++)l+=u[c];var f=new Array(l),d=t.label,p=0;if(t.voxelFunc){for(var h=t.backgroundImage.getPointData().getScalars(),g=0;g<u.length;g++)if(u[g]){var m=h.getTuple(g);t.voxelFunc(m,g,d)&&(f[p++]=[g,s[g]],s[g]=d)}}else for(var v=0;v<u.length;v++)u[v]&&s[v]!==d&&(f[p++]=[v,s[v]],s[v]=d);var y=a.index+1,b=a.snapshots.length-a.index;a.snapshots.splice(y,b),a.labels.splice(y,b),a.snapshots.push(f),a.labels.push(d),a.index++,n.terminate(),n=null,r=null,o.setData(s),o.modified(),t.labelMap.modified(),e.modified()})},e.addPoint=function(e){if(r){var n=[e[0],e[1],e[2]],i=[0,0,0];Ye.e.transformMat4(i,n,t.maskWorldToIndex),i[0]=Math.round(i[0]),i[1]=Math.round(i[1]),i[2]=Math.round(i[2]);var a=t.labelMap.getSpacing().map(function(e){return t.radius/e});r.exec("paint",{point:i,radius:a})}},e.paintRectangle=function(e,n){if(r){var i=[0,0,0],a=[0,0,0];Ye.e.transformMat4(i,e,t.maskWorldToIndex),Ye.e.transformMat4(a,n,t.maskWorldToIndex),i[0]=Math.round(i[0]),i[1]=Math.round(i[1]),i[2]=Math.round(i[2]),a[0]=Math.round(a[0]),a[1]=Math.round(a[1]),a[2]=Math.round(a[2]),r.exec("paintRectangle",{point1:i,point2:a})}},e.paintEllipse=function(e,n){if(r){var i=[0,0,0],a=[0,0,0];Ye.e.transformMat4(i,e,t.maskWorldToIndex),Ye.e.transformMat4(a,n,t.maskWorldToIndex),a=a.map(function(e){return 0===e?1:e}),r.exec("paintEllipse",{center:i,scale3:a})}},e.undo=function(){if(a.index>-1){for(var n=t.labelMap.getPointData().getScalars(),r=n.getData(),i=a.snapshots[a.index],o=0;o<i.length&&i[o];o++){var s=jn(i[o],2),u=s[0],l=s[1];r[u]=l}a.index--,n.setData(r),n.modified(),t.labelMap.modified(),e.modified()}},e.redo=function(){if(a.index<a.labels.length-1){for(var n=t.labelMap.getPointData().getScalars(),r=n.getData(),i=a.labels[a.index+1],o=a.snapshots[a.index+1],s=0;s<o.length&&o[s];s++)r[jn(o[s],1)[0]]=i;a.index++,n.setData(r),n.modified(),t.labelMap.modified(),e.modified()}};var u=e.setLabelMap;e.setLabelMap=function(e){return!!u(e)&&(s(),!0)},e.requestData=function(n,r){if(t.backgroundImage)if(t.backgroundImage.getPointData().getScalars()){if(!t.labelMap){var a=o.a.newInstance(t.backgroundImage.get("spacing","origin","direction"));a.setDimensions(t.backgroundImage.getDimensions()),a.computeTransforms();var s=new Uint8Array(t.backgroundImage.getNumberOfPoints()),u=i.a.newInstance({numberOfComponents:1,values:s});a.getPointData().setScalars(u),e.setLabelMap(a)}t.maskWorldToIndex||(t.maskWorldToIndex=t.labelMap.getWorldToIndex()),t.labelMap.getPointData().getScalars()?(t.labelMap.modified(),r[0]=t.labelMap):Bn("Mask image has no scalars")}else Bn("Background image has no scalars");else Bn("No background image")},s()}(e,t)}var Vn={newInstance:h.a.newInstance(Fn,"vtkPaintFilter"),extend:Fn},Un=h.a.vtkErrorMacro;var Gn={};function Wn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Gn,n),h.a.obj(e,t),h.a.algo(e,t,1,1),h.a.setGet(e,t,["lookupTable","piecewiseFunction"]),function(e,t){t.classHierarchy.push("vtkScalarToRGBA"),e.requestData=function(e,n){var r=e[0];if(r){var a=r.getPointData().getScalars();if(a)if(t.lookupTable)if(t.piecewiseFunction){for(var s=[0,0,0,0],u=a.getData(),l=new Uint8Array(4*u.length),c=0,f=0;f<u.length;f++){var d=u[f];t.lookupTable.getColor(d,s),s[3]=t.piecewiseFunction.getValue(d),l[c++]=255*s[0],l[c++]=255*s[1],l[c++]=255*s[2],l[c++]=255*s[3]}var p=i.a.newInstance({name:"rgba",numberOfComponents:4,values:l}),h=r.get("extent","spacing","origin","direction"),g=o.a.newInstance(h);g.getPointData().setScalars(p),n[0]=g}else Un("No piecewiseFunction available");else Un("No lookupTable available");else Un("No scalars from input")}else Un("Invalid or missing input")}}(e,t)}var Hn={newInstance:h.a.newInstance(Wn,"vtkScalarToRGBA"),extend:Wn},Yn={VARY_RADIUS_OFF:0,VARY_RADIUS_BY_SCALAR:1,VARY_RADIUS_BY_VECTOR:2,VARY_RADIUS_BY_ABSOLUTE_SCALAR:3},Qn={TCOORDS_OFF:0,TCOORDS_FROM_NORMALIZED_LENGTH:1,TCOORDS_FROM_LENGTH:2,TCOORDS_FROM_SCALARS:3},qn=h.a.vtkDebugMacro,Xn=h.a.vtkErrorMacro,Kn=h.a.vtkWarningMacro;var Zn={outputPointsPrecision:At.b.DEFAULT,radius:.5,varyRadius:Yn.VARY_RADIUS_OFF,numberOfSides:3,radiusFactor:10,defaultNormal:[0,0,1],useDefaultNormal:!1,sidesShareVertices:!0,capping:!1,onRatio:1,offset:0,generateTCoords:Qn.TCOORDS_OFF,textureLength:1};function Jn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Zn,n),h.a.setGet(e,t,["outputPointsPrecision","radius","varyRadius","numberOfSides","radiusFactor","defaultNormal","useDefaultNormal","sidesShareVertices","capping","onRatio","offset","generateTCoords","textureLength"]),h.a.obj(e,t),h.a.algo(e,t,1,1),function(e,t){function n(e,n){var r=e;return t.sidesShareVertices?r+=t.numberOfSides*n:r+=2*t.numberOfSides*n,t.capping&&(r+=2*t.numberOfSides),r}function a(e,t,n){for(var r=t[n],i=e.slice(3*r,3*(r+1)),a=n+1;a<t.length;){var o=t[a];if(i!==e.slice(3*o,3*(o+1)))return a-1;++a}return t.length}function o(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=[0,0,1],o=t,s=o[0],u=0;u<o.length;u+=s+1)if(1===(s=o[u]))n.setTuple(o[u+1],i);else if(s>1){var l=0,c=[0,0,0],d=[0,0,0],p=o.slice(u+1,u+1+s);if((l=a(e,p,0))!==s)!function(){var t=p[l],o=e.slice(3*t,3*(t+1)),u=p[l+1],h=e.slice(3*u,3*(u+1));if(c=h.map(function(e,t){return e-o[t]}),f.normalize(c),r)i=r;else{for(;++l<s;)if((l=a(e,p,l))!==s){t=p[l],o=e.slice(3*t,3*(t+1)),u=p[l+1],h=e.slice(3*u,3*(u+1));for(var g=0;g<3;++g)d[g]=h[g]-o[g];f.normalize(d);var m=[0,0,0];if(f.cross(c,d,m),f.norm(m)>.001){i=m,c=d;break}}if(l>=s)for(var v=0;v<3;++v)if(0!==c[v]){i[(v+2)%3]=0,i[(v+1)%3]=1,i[v]=-c[(v+1)%3]/c[v];break}}f.normalize(i);for(var y=0;++l<s&&(l=a(e,p,l))!==s;){t=p[l],o=e.slice(3*t,3*(t+1)),u=p[l+1],h=e.slice(3*u,3*(u+1));for(var b=0;b<3;++b)d[b]=h[b]-o[b];f.normalize(d);var M=[0,0,0];if(f.cross(c,i,M),0!==f.normalize(M)){var x=[0,0,0];if(f.cross(d,c,x),0!==f.normalize(x)){var w=f.dot(x,i),A=1-w*w;A=A>0?Math.sqrt(A):0;for(var T=[0,0,0],C=0;C<3;++C)T[C]=d[C]+c[C];f.normalize(T),f.cross(T,x,M),f.cross(c,x,T),f.dot(i,T)*f.dot(M,T)<0&&(A*=-1);for(var S=y;S<l;++S)n.setTuple(p[S],i);y=l,c=d,i=w*x+A*M}}}for(var D=y;D<s;++D)n.setTuple(p[D],i)}();else for(var h=0;h<s;++h)n.setTuple(p[h],i)}return 1}function s(e,n,r,i,a,o,s,u,l,c,d,p,h,g){for(var m=[0,0,0],v=[0,0,0],y=[0,0,0],b=[0,0,0],M=[0,0,0],x=[0,0,0],w=[0,0,0],A=[0,0,0],T=[0,0,0],C=[0,0,0],S=[0,0,0],D=1,I=e,E=0;E<n;++E){if(0===E){M=i.slice(3*r[0],3*(r[0]+1)),x=i.slice(3*r[1],3*(r[1]+1));for(var N=0;N<3;++N)m[N]=x[N]-M[N],v[N]=m[N],y[N]=-v[N];f.normalize(y)}else if(E===n-1){for(var O=0;O<3;++O)v[O]=m[O],M[O]=x[O],b[O]=m[O];f.normalize(b)}else{for(var _=0;_<3;++_)M[_]=x[_];x=i.slice(3*r[E+1],3*(r[E+1]+1));for(var L=0;L<3;++L)v[L]=m[L],m[L]=x[L]-M[L]}if(0===f.normalize(m))return Kn("Coincident points!"),0;for(var P=0;P<3;++P)w[P]=(v[P]+m[P])/2;if(A=h.slice(3*r[E],3*(r[E]+1)),0===f.normalize(w)&&(f.cross(v,A,w),0===f.normalize(w)&&qn("Using alternate bevel vector")),f.cross(w,A,T),0===f.normalize(T)){var k="Bad normal: s = ";return k+="".concat(w[0],",  ").concat(w[1],", ").concat(w[2]),k+=" n = ".concat(A[0],",  ").concat(A[1],", ").concat(A[2]),Kn(k),0}if(f.cross(T,w,C),f.normalize(C),l&&t.varyRadius===Yn.VARY_RADIUS_BY_SCALAR)D=1+(t.radiusFactor-1)*(l.getComponent(r[E],0)-c[0])/(c[1]-c[0]);else if(d&&t.varyRadius===Yn.VARY_RADIUS_BY_VECTOR)(D=Math.sqrt(p/f.norm(d.getTuple(r[E]))))>t.radiusFactor&&(D=t.radiusFactor);else if(l&&t.varyRadius===Yn.VARY_RADIUS_BY_ABSOLUTE_SCALAR&&(D=l.getComponent(r[E],0))<0)return Kn("Scalar value less than zero, skipping line"),0;if(t.sidesShareVertices)for(var R=0;R<t.numberOfSides;++R){for(var j=0;j<3;++j)S[j]=T[j]*Math.cos(R*g)+C[j]*Math.sin(R*g),w[j]=M[j]+t.radius*D*S[j],a[3*I+j]=w[j],u[3*I+j]=S[j];s.passData(o,r[E],I),I++}else for(var B=[0,0,0],z=[0,0,0],F=0;F<t.numberOfSides;++F){for(var V=0;V<3;++V)S[V]=T[V]*Math.cos(F*g)+C[V]*Math.sin(F*g),B[V]=T[V]*Math.cos((F-.5)*g)+C[V]*Math.sin((F-.5)*g),z[V]=T[V]*Math.cos((F+.5)*g)+C[V]*Math.sin((F+.5)*g),w[V]=M[V]+t.radius*D*S[V],a[3*I+V]=w[V],u[3*I+V]=B[V],a[3*(I+1)+V]=w[V],u[3*(I+1)+V]=z[V];s.passData(o,r[E],I+1),I+=2}}if(t.capping){var U=t.numberOfSides,G=1;t.sidesShareVertices||(U=2*t.numberOfSides,G=2);for(var W=0;W<U;W+=G){w=a.slice(3*(e+W),3*(e+W+1));for(var H=0;H<3;++H)a[3*I+H]=w[H],u[3*I+H]=y[H];s.passData(o,r[0],I),I++}var Y=e+(n-1)*t.numberOfSides;t.sidesShareVertices||(Y=e+2*(n-1)*t.numberOfSides);for(var Q=0;Q<U;Q+=G){w=a.slice(3*(Y+Q),3*(Y+Q+1));for(var q=0;q<3;++q)a[3*I+q]=w[q],u[3*I+q]=b[q];s.passData(o,r[n-1],I),I++}}return 1}function u(e,n,r,i,a,o,s){for(var u=0,l=0,c=0,f=i,d=0,p=s.getData(),h=0;d<p.length&&h!==i;)d+=p[d]+1,h++;if(t.sidesShareVertices)for(var g=e;g<t.numberOfSides+e;g+=t.onRatio){u=g%t.numberOfSides,l=(g+1)%t.numberOfSides,p[d++]=2*n;for(var m=0;m<n;++m)c=m*t.numberOfSides,p[d++]=e+l+c,p[d++]=e+u+c;o.passData(a,r,f++)}else for(var v=e;v<t.numberOfSides+e;v+=t.onRatio){u=v%t.numberOfSides*2+1,l=(v+1)%t.numberOfSides*2,p[d]=2*n,d++;for(var y=0;y<n;++y)c=2*y*t.numberOfSides,p[d++]=e+l+c,p[d++]=e+u+c;o.passData(a,r,f++)}if(t.capping){var b=e+n*t.numberOfSides,M=0;t.sidesShareVertices||(b=e+2*n*t.numberOfSides),p[d++]=t.numberOfSides,p[d++]=b,p[d++]=b+1;var x=0;for(u=t.numberOfSides-1,l=2,x=0;x<t.numberOfSides-2;++x)x%2?(M=b+l,p[d++]=M,l++):(M=b+u,p[d++]=M,u--);for(o.passData(a,r,f++),b+=t.numberOfSides,p[d++]=t.numberOfSides,p[d++]=b,p[d++]=b+t.numberOfSides-1,u=t.numberOfSides-2,l=1,x=0;x<t.numberOfSides-2;++x)x%2?(M=b+u,p[d++]=M,u--):(M=b+l,p[d++]=M,l++);o.passData(a,r,f++)}return f}function l(e,n,r,i,a,o){var s=t.numberOfSides;t.sidesShareVertices||(s=2*t.numberOfSides);var u=0,l=0,c=a.getData();if(t.generateTCoords===Qn.TCOORDS_FROM_SCALARS){l=c[r[0]];for(var d=0;d<n;++d){u=(c[r[d]]-l)/t.textureLength;for(var p=0;p<s;++p){var h=p/(s-1),g=2*(e+d*s+p);o[g]=u,o[g+1]=h}}}else if(t.generateTCoords===Qn.TCOORDS_FROM_LENGTH)for(var m=0,v=i.slice(3*r[0],3*(r[0]+1)),y=0;y<n;++y){var b=i.slice(3*r[y],3*(r[y]+1));u=(m+=Math.sqrt(f.distance2BetweenPoints(b,v)))/t.textureLength;for(var M=0;M<s;++M){var x=M/(s-1),w=2*(e+y*s+M);o[w]=u,o[w+1]=x}for(var A=0;A<3;++A)v[A]=b[A]}else if(t.generateTCoords===Qn.TCOORDS_FROM_NORMALIZED_LENGTH){for(var T=0,C=0,S=i.slice(3*r[0],3*(r[0]+1)),D=0;D<n;++D){var I=i.slice(3*r[D],3*(r[D]+1));C+=Math.sqrt(f.distance2BetweenPoints(I,S));for(var E=0;E<3;++E)S[E]=I[E]}S=i.slice(3*r[0],3*(r[0]+1));for(var N=0;N<n;++N){var O=i.slice(3*r[N],3*(r[N]+1));u=(T+=Math.sqrt(f.distance2BetweenPoints(O,S)))/C;for(var _=0;_<s;++_){var L=_/(s-1),P=2*(e+N*s+_);o[P]=u,o[P+1]=L}for(var k=0;k<3;++k)S[k]=O[k]}}if(t.capping){for(var R=e+n*s,j=0;j<t.numberOfSides;++j){var B=2*(R+j);o[B]=0,o[B+1]=0}for(var z=0;z<t.numberOfSides;++z){var F=2*(R+t.numberOfSides+z);o[F]=0,o[F+1]=0}}}t.classHierarchy.push("vtkTubeFilter"),e.requestData=function(a,c){var f=Se.a.newInstance();f.shallowCopy(a[0]),c[0]=f;var d=a[0];if(d){var h=d.getPoints();if(h){var g=h.getNumberOfPoints();if(!(g<1)){var m=d.getLines();if(m){var v=m.getNumberOfCells();if(!(v<1)){var y=g*t.numberOfSides;t.capping&&(y=(g+2*v)*t.numberOfSides);var b=h.getDataType();t.outputPointsPrecision===At.b.SINGLE?b=Tt.b.FLOAT:t.outputPointsPrecision===At.b.DOUBLE&&(b=Tt.b.DOUBLE);var M=p.a.newInstance({dataType:b,size:3*y,numberOfComponents:3}),x=3*y;t.capping&&(x=3*(y+2*t.numberOfSides));for(var w=new Float32Array(x),A=i.a.newInstance({numberOfComponents:3,values:w,name:"TubeNormals"}),T=0,C=m.getData(),S=C[0],D=0;D<C.length;D+=S+1)T+=(2*(S=C[D])+1)*Math.ceil(t.numberOfSides/t.onRatio),t.capping&&(T+=2*(t.numberOfSides+1));var I=new Uint32Array(T),E=r.a.newInstance({values:I}),N=0,O=d.getPointData().getNormals(),_=null,L=!1;O&&!t.useDefaultNormal||(_=new Float32Array(3*g),O=i.a.newInstance({numberOfComponents:3,values:_,name:"Normals"}),t.useDefaultNormal?_=_.map(function(e,n){var r=n%3;return t.defaultNormal[r]}):L=!0);for(var P=d.getPointData().getNumberOfArrays(),k=null,R=null,j=0;j<P;j++)k=d.getPointData().getArrayByIndex(j),R=i.a.newInstance({name:k.getName(),dataType:k.getDataType(),numberOfComponents:k.getNumberOfComponents(),size:y*k.getNumberOfComponents()}),f.getPointData().removeArrayByIndex(0),f.getPointData().addArray(R);var B=e.getInputArrayToProcess(0),z=null,F=[];B&&(z=i.a.newInstance({name:B.getName(),dataType:B.getDataType(),numberOfComponents:B.getNumberOfComponents(),size:y*B.getNumberOfComponents()}),(F=B.getRange())[1]-F[0]==0&&(t.varyRadius===Yn.VARY_RADIUS_BY_SCALAR&&Kn("Scalar range is zero!"),F[1]=F[0]+1));var V=e.getInputArrayToProcess(1),U=0;V&&(U=V.getMaxNorm());var G=f.getCellData();G.copyNormalsOff(),G.passData(d.getCellData());var W=f.getPointData();null!==W.getNormals()&&W.copyNormalsOff(),B&&z&&W.setScalars(z);var H=null;if(t.generateTCoords===Qn.TCOORDS_FROM_SCALARS&&B||t.generateTCoords===Qn.TCOORDS_FROM_LENGTH||t.generateTCoords===Qn.TCOORDS_FROM_NORMALIZED_LENGTH){var Y=new Float32Array(2*y);H=i.a.newInstance({numberOfComponents:2,values:Y,name:"TCoords"}),W.copyTCoordsOff()}W.passData(d.getPointData());var Q=2*Math.PI/t.numberOfSides;S=C[0];for(var q=0,X=d.getVerts().getNumberOfCells(),K=0;K<C.length;K+=S+1){S=C[K];var Z=C.slice(K+1,K+1+S);if(S>1&&L){var J=C.slice(K,K+S+1);o(h.getData(),J,O)}s(q,S,Z,h.getData(),M.getData(),d.getPointData(),W,w,B,F,V,U,_,Q)?(N=u(q,S,X,N,d.getCellData(),G,E),H&&l(q,S,Z,h.getData(),B,H.getData())):Kn("Could not generate points"),q=n(q,S),X++}f.setPoints(M),f.setStrips(E),f.setPointData(W),W.setNormals(A),c[0]=f}}}}}else Xn("Invalid or missing input")}}(e,t)}var $n=h.a.newInstance(Jn,"vtkTubeFilter"),er=Object.assign({newInstance:$n,extend:Jn}),tr=h.a.vtkDebugMacro,nr=h.a.vtkErrorMacro;var rr={scaleFactor:1,useNormal:!1,normal:[0,0,1],xyPlane:!1};function ir(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,rr,n),h.a.obj(e,t),h.a.algo(e,t,1,1),h.a.setGet(e,t,["scaleFactor","useNormal","xyPlane"]),h.a.setGetArray(e,t,["normal"],3),function(e,t){t.classHierarchy.push("vtkWarpScalar"),e.requestData=function(n,r){var i=n[0];if(!i)return nr("Invalid or missing input"),1;var a=i.getPoints(),o=i.getPointData().getNormals(),s=e.getInputArrayToProcess(0);if(!a||!s)return tr("No data to warp",!!a,!!s),r[0]=n[0],1;var u=a.getNumberOfPoints(),l=null,c=[0,0,1];o&&!t.useNormal?(l=function(e,t){return[t.getData()[3*e],t.getData()[3*e+1],t.getData()[3*e+2]]},tr("Using data normals")):e.getXyPlane()?(l=function(e,t){return c},tr("Using x-y plane normal")):(l=function(e,n){return t.normal},tr("Using Normal instance variable"));for(var f=new Float32Array(3*u),d=a.getData(),h=0,g=[0,0,1],m=1,v=s.getData(),y=s.getNumberOfComponents(),b=0;b<u;++b)h=3*b,g=l(b,o),m=t.xyPlane?d[h+2]:v[b*y],f[h]=d[h]+t.scaleFactor*m*g[0],f[h+1]=d[h+1]+t.scaleFactor*m*g[1],f[h+2]=d[h+2]+t.scaleFactor*m*g[2];var M=Object(Ot.a)({vtkClass:i.getClassName()});M.shallowCopy(i);var x=p.a.newInstance();return x.setData(f,3),M.setPoints(x),r[0]=M,1}}(e,t)}var ar=h.a.newInstance(ir,"vtkWarpScalar"),or={vtkAppendPolyData:Nt,vtkCalculator:jt,vtkClosedPolyLineToSurfaceFilter:Gt,vtkImageCropFilter:qt,vtkImageMarchingCubes:nn,vtkImageMarchingSquares:fn,vtkImageSliceFilter:gn,vtkImageStreamline:bn,vtkMoleculeToRepresentation:Sn,vtkOutlineFilter:_n,vtkPaintFilter:Vn,vtkScalarToRGBA:Hn,vtkTubeFilter:er,vtkWarpScalar:{newInstance:ar,extend:ir}};function sr(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var ur={height:1,radius:.5,resolution:6,center:[0,0,0],direction:[1,0,0],capping:!0,pointType:"Float32Array"};function lr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ur,n),h.a.obj(e,t),h.a.setGet(e,t,["height","radius","resolution","capping"]),h.a.setGetArray(e,t,["center","direction"],3),h.a.algo(e,t,0,1),function(e,t){t.classHierarchy.push("vtkConeSource"),e.requestData=function(e,n){var r;if(!t.deleted){var i=n[0],a=2*Math.PI/t.resolution,o=-t.height/2,s=t.resolution+1,u=4*t.resolution+1+t.resolution,l=0,c=new window[t.pointType](3*s),f=0,p=new Uint32Array(u);c[0]=t.height/2,c[1]=0,c[2]=0,t.capping&&(p[f++]=t.resolution);for(var h=0;h<t.resolution;h++)c[3*++l+0]=o,c[3*l+1]=t.radius*Math.cos(h*a),c[3*l+2]=t.radius*Math.sin(h*a),t.capping&&(p[t.resolution-f+++1]=l);for(var g=0;g<t.resolution;g++)p[f++]=3,p[f++]=0,p[f++]=g+1,p[f++]=g+2>t.resolution?1:g+2;(r=d.a.buildFromRadian()).translate.apply(r,sr(t.center)).rotateFromDirections([1,0,0],t.direction).apply(c),(i=Se.a.newInstance()).getPoints().setData(c,3),i.getPolys().setData(p,1),n[0]=i}}}(e,t)}var cr={newInstance:h.a.newInstance(lr,"vtkConeSource"),extend:lr};function fr(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var dr={height:1,radius:1,resolution:6,center:[0,0,0],direction:[0,1,0],capping:!0,pointType:"Float32Array"};function pr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,dr,n),h.a.obj(e,t),h.a.setGet(e,t,["height","radius","resolution","capping"]),h.a.setGetArray(e,t,["center","direction"],3),h.a.algo(e,t,0,1),function(e,t){t.classHierarchy.push("vtkCylinderSource"),e.requestData=function(e,n){var r;if(!t.deleted){var a=n[0],o=2*Math.PI/t.resolution,s=2*t.resolution,u=5*t.resolution;t.capping&&(s=4*t.resolution,u=7*t.resolution+2);for(var l=new window[t.pointType](3*s),c=0,f=new Uint32Array(u),p=new Float32Array(3*s),h=i.a.newInstance({numberOfComponents:3,values:p,name:"Normals"}),g=new Float32Array(2*s),m=i.a.newInstance({numberOfComponents:2,values:g,name:"TCoords"}),v=[0,0,0],y=[0,0,0],b=[0,0,0],M=[0,0,0],x=[0,0],w=[0,0],A=0;A<t.resolution;A++){v[0]=Math.cos(A*o),y[0]=v[0],b[0]=t.radius*v[0]+t.center[0],M[0]=b[0],x[0]=Math.abs(2*A/t.resolution-1),w[0]=x[0],b[1]=.5*t.height+t.center[1],M[1]=-.5*t.height+t.center[1],x[1]=0,w[1]=1,v[2]=-Math.sin(A*o),y[2]=v[2],b[2]=t.radius*v[2]+t.center[2],M[2]=b[2];for(var T=2*A,C=0;C<3;C++)p[3*T+C]=v[C],p[3*(T+1)+C]=y[C],l[3*T+C]=b[C],l[3*(T+1)+C]=M[C],C<2&&(g[2*T+C]=x[C],g[2*(T+1)+C]=w[C])}for(var S=0;S<t.resolution;S++){f[c++]=4,f[c++]=2*S,f[c++]=2*S+1;var D=(2*S+3)%(2*t.resolution);f[c++]=D,f[c++]=D-1}if(t.capping){for(var I=0;I<t.resolution;I++){b[0]=t.radius*Math.cos(I*o),M[0]=b[0],x[0]=b[0],w[0]=b[0],b[0]+=t.center[0],M[0]+=t.center[0],v[1]=1,y[1]=-1,b[1]=.5*t.height+t.center[1],M[1]=-.5*t.height+t.center[1],b[2]=-t.radius*Math.sin(I*o),M[2]=b[2],x[1]=b[2],w[1]=b[2],b[2]+=t.center[2],M[2]+=t.center[2];for(var E=2*t.resolution+I,N=3*t.resolution+t.resolution-I-1,O=0;O<3;O++)p[3*E+O]=v[O],p[3*N+O]=y[O],l[3*E+O]=b[O],l[3*N+O]=M[O],O<2&&(g[2*E+O]=x[O],g[2*N+O]=w[O])}f[c++]=t.resolution;for(var _=0;_<t.resolution;_++)f[c++]=2*t.resolution+_;f[c++]=t.resolution;for(var L=0;L<t.resolution;L++)f[c++]=3*t.resolution+L}(r=d.a.buildFromRadian()).translate.apply(r,fr(t.center)).rotateFromDirections([0,1,0],t.direction).apply(l),(a=Se.a.newInstance()).getPoints().setData(l,3),a.getPolys().setData(f,1),a.getPointData().setNormals(h),a.getPointData().setTCoords(m),n[0]=a}}}(e,t)}var hr={newInstance:h.a.newInstance(pr,"vtkCylinderSource"),extend:pr};var gr={tipResolution:6,tipRadius:.1,tipLength:.35,shaftResolution:6,shaftRadius:.03,invert:!1,direction:[1,0,0],pointType:"Float32Array"};function mr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,gr,n),h.a.obj(e,t),h.a.setGet(e,t,["tipResolution","tipRadius","tipLength","shaftResolution","shaftRadius","invert"]),h.a.setGetArray(e,t,["direction"],3),h.a.algo(e,t,0,1),function(e,t){t.classHierarchy.push("vtkArrowSource"),e.requestData=function(e,n){if(!t.deleted){var r=hr.newInstance({capping:!0});r.setResolution(t.shaftResolution),r.setRadius(t.shaftRadius),r.setHeight(1-t.tipLength),r.setCenter(0,.5*(1-t.tipLength),0);var i=r.getOutputData(),a=i.getPoints().getData(),o=i.getPointData().getNormals().getData();d.a.buildFromDegree().rotateZ(-90).apply(a).apply(o);var s=cr.newInstance();s.setResolution(t.tipResolution),s.setHeight(t.tipLength),s.setRadius(t.tipRadius);var u=s.getOutputData(),l=u.getPoints().getData();d.a.buildFromRadian().translate(1-.5*t.tipLength,0,0).apply(l);var c=Nt.newInstance();c.setInputData(i),c.addInputData(u);var f=c.getOutputData(),p=f.getPoints().getData();d.a.buildFromRadian().translate(.5*t.tipLength-.5,0,0).apply(p),t.invert?(d.a.buildFromRadian().rotateFromDirections([1,0,0],t.direction).scale(-1,-1,-1).apply(p),n[0]=f):(d.a.buildFromRadian().rotateFromDirections([1,0,0],t.direction).scale(1,1,1).apply(p),n[0]=c.getOutputData())}}}(e,t)}var vr={newInstance:h.a.newInstance(mr,"vtkArrowSource"),extend:mr};var yr={radius:1,resolution:6,center:[0,0,0],pointType:"Float32Array",lines:!1,face:!0};function br(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,yr,n),h.a.obj(e,t),h.a.setGet(e,t,["radius","resolution","lines","face"]),h.a.setGetArray(e,t,["center"],3),h.a.algo(e,t,0,1),function(e,t){t.classHierarchy.push("vtkCircleSource"),e.requestData=function(e,n){if(!t.deleted){var r=n[0],i=new window[t.pointType](3*t.resolution),a=new Uint32Array(t.resolution+2);a[0]=t.resolution+1;for(var o=2*Math.PI/t.resolution,s=0;s<t.resolution;s++){var u=t.center[0],l=t.radius*Math.cos(s*o)+t.center[1],c=t.radius*Math.sin(s*o)+t.center[2];i.set([u,l,c],3*s),a[s+1]=s}a[a.length-1]=a[1],(r=Se.a.newInstance()).getPoints().setData(i,3),t.lines&&r.getLines().setData(a,1),t.face&&r.getPolys().setData(a,1),n[0]=r}}}(e,t)}var Mr={newInstance:h.a.newInstance(br,"vtkCircleSource"),extend:br};function xr(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var wr={height:1,radius:[.5],cellFields:[1],resolution:6,startTheta:0,endTheta:360,center:[0,0,0],direction:[0,0,1],skipInnerFaces:!0,mask:null,pointType:"Float32Array"};function Ar(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,wr,n),h.a.obj(e,t),h.a.setGet(e,t,["height","resolution","startTheta","endTheta","skipInnerFaces"]),h.a.setGetArray(e,t,["center","direction"],3),h.a.getArray(e,t,["cellFields"]),h.a.algo(e,t,0,1),function(e,t){function n(){for(;t.cellFields.length<t.radius.length;)t.cellFields.push(t.cellFields.length)}t.classHierarchy.push("vtkConcentricCylinderSource"),e.clearRadius=function(){t.radius=[],t.cellFields=[],e.modified()},e.addRadius=function(r,i){t.radius.push(r),void 0!==i&&t.cellFields.push(i),n(),e.modified()},e.getNumberOfRadius=function(){return t.radius.length},e.getRadius=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t.radius[e]},e.setRadius=function(n,r){t.radius[n]=r,e.modified()},e.setCellField=function(n,r){t.cellFields[n]=r,e.modified()},e.removeMask=function(){t.mask=null,e.modified()},e.setMaskLayer=function(n,r){var i=!1;!t.mask&&r&&(i=!0,t.mask=[]),t.mask&&(!t.mask[n]!=!r&&(i=!0),t.mask[n]=r),i&&e.modified()},e.getMaskLayer=function(e){return void 0===e?t.mask:t.mask[e]},e.requestData=function(e,r){var a;if(!t.deleted&&t.radius.length){n();var o=r[0],s=t.radius.length,u=t.height/2,l=0,c=0,f=t.startTheta<t.endTheta?t.startTheta:t.endTheta;f*=Math.PI/180;var p=t.endTheta>t.startTheta?t.endTheta:t.startTheta;p*=Math.PI/180;var h=t.resolution,g=!1;p>=f+2*Math.PI?p=f+2*Math.PI:(++h,g=!0);var m=(p-f)/t.resolution,v=h*s*2+2;if(t.skipInnerFaces||t.mask)if(!t.skipInnerFaces&&t.mask){t.mask[0]||(l+=2*(h+1)+5*h+(g?10:0),c+=2+h+(g?2:0));for(var y=1;y<s;y++)t.mask[y]||(l+=20*h+(g?10:0),c+=4*h+(g?2:0))}else{t.skipInnerFaces&&t.mask&&t.mask[0]||(l+=2*(h+1)+(g?10:0),c+=2+(g?2:0),(1===t.radius.length||!t.skipInnerFaces||t.mask&&t.mask[1])&&(l+=5*h,c+=h));for(var b=1;b<s;b++)if(!t.skipInnerFaces||!t.mask||!t.mask[b]){var M=s-1===b;l+=10*h+(g?10:0),c+=2*h+(g?2:0),(!t.skipInnerFaces||t.mask&&t.mask[b-1])&&(l+=5*h,c+=h),(M||!t.skipInnerFaces||t.mask&&t.mask[b+1])&&(l+=5*h,c+=h)}}else l=2*(h+1)+5*h+(s-1)*h*20+(g?10*s:0),c=2+h+4*(s-1)*h+(g?2*s:0);var x=0,w=new window[t.pointType](3*v),A=0,T=new Uint32Array(l),C=0,S=new Float32Array(c);w[3*x+0]=0,w[3*x+1]=0,w[3*x+2]=u,w[3*++x+0]=0,w[3*x+1]=0,w[3*x+2]=-u,x++;for(var D=0;D<s;D++){for(var I=t.radius[D],E=0;E<h;E++){var N=f+E*m;w[3*x+0]=I*Math.cos(N),w[3*x+1]=I*Math.sin(N),w[3*x+2]=u,x++}for(var O=0;O<h;O++){var _=f+O*m;w[3*x+0]=I*Math.cos(_),w[3*x+1]=I*Math.sin(_),w[3*x+2]=-u,x++}}var L=t.cellFields[0];if(!t.mask||!t.mask[0]){S[C++]=L,T[A++]=h+(g?1:0),g&&(T[A++]=0);for(var P=0;P<h;P++)T[A++]=P+2;S[C++]=L,T[A++]=h+(g?1:0),g&&(T[A++]=1);for(var k=0;k<h;k++)T[A++]=2*h-k-1+2;if(!t.skipInnerFaces||t.mask&&t.mask[1]||1===s)for(var R=0;R<t.resolution;R++)T[A++]=4,T[A++]=(R+1)%h+2,T[A++]=R+2,T[A++]=R+h+2,T[A++]=(R+1)%h+h+2,S[C++]=L;g&&(T[A++]=4,T[A++]=2,T[A++]=0,T[A++]=1,T[A++]=h+2,S[C++]=L,T[A++]=4,T[A++]=0,T[A++]=h+1,T[A++]=2*h+1,T[A++]=1,S[C++]=L)}for(var j=1;j<s;j++)if(!t.mask||!t.mask[j]){var B=2*h*(j-1)+2,z=B+2*h,F=s-1===j;L=t.cellFields[j];for(var V=0;V<t.resolution;V++)T[A++]=4,T[A++]=V+B,T[A++]=(V+1)%h+B,T[A++]=(V+1)%h+z,T[A++]=V+z,S[C++]=L;for(var U=0;U<t.resolution;U++)T[A++]=4,T[A++]=(U+1)%h+B+h,T[A++]=U+B+h,T[A++]=U+z+h,T[A++]=(U+1)%h+z+h,S[C++]=L;if(!t.skipInnerFaces||t.mask&&t.mask[j-1])for(var G=0;G<t.resolution;G++)T[A++]=4,T[A++]=G+B,T[A++]=(G+1)%h+B,T[A++]=(G+1)%h+h+B,T[A++]=G+h+B,S[C++]=L;if(!t.skipInnerFaces||F||t.mask&&(t.mask[j+1]||F))for(var W=0;W<t.resolution;W++)T[A++]=4,T[A++]=(W+1)%h+z,T[A++]=W+z,T[A++]=W+h+z,T[A++]=(W+1)%h+h+z,S[C++]=L;g&&(T[A++]=4,T[A++]=z,T[A++]=B,T[A++]=h+B,T[A++]=h+z,S[C++]=L,T[A++]=4,T[A++]=t.resolution+z,T[A++]=t.resolution+B,T[A++]=t.resolution+h+B,T[A++]=t.resolution+h+z,S[C++]=L)}(a=d.a.buildFromRadian()).translate.apply(a,xr(t.center)).rotateFromDirections([0,0,1],t.direction).apply(w),(o=Se.a.newInstance()).getPoints().setData(w,3),o.getPolys().setData(T,1),o.getCellData().setScalars(i.a.newInstance({name:"layer",values:S})),r[0]=o}}}(e,t)}var Tr={newInstance:h.a.newInstance(Ar,"vtkConcentricCylinderSource"),extend:Ar};function Cr(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Sr={xLength:1,yLength:1,zLength:1,center:[0,0,0],rotations:[0,0,0],pointType:"Float32Array",generate3DTextureCoordinates:!1};function Dr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Sr,n),h.a.obj(e,t),h.a.setGet(e,t,["xLength","yLength","zLength","generate3DTextureCoordinates"]),h.a.setGetArray(e,t,["center","rotations"],3),h.a.algo(e,t,0,1),function(e,t){t.classHierarchy.push("vtkCubeSource"),e.setBounds=function(){var e=[];if(Array.isArray(arguments.length<=0?void 0:arguments[0]))e=arguments.length<=0?void 0:arguments[0];else for(var n=0;n<arguments.length;n++)e.push(n<0||arguments.length<=n?void 0:arguments[n]);6===e.length&&(t.xLength=e[1]-e[0],t.yLength=e[3]-e[2],t.zLength=e[5]-e[4],t.center=[(e[0]+e[1])/2,(e[2]+e[3])/2,(e[4]+e[5])/2])},e.requestData=function(e,n){var r;if(!t.deleted){var a=Se.a.newInstance();n[0]=a;var o=new window[t.pointType](72);a.getPoints().setData(o,3);var s=new window[t.pointType](72),u=i.a.newInstance({name:"Normals",values:s,numberOfComponents:3});a.getPointData().setNormals(u);var l=2;!0===t.generate3DTextureCoordinates&&(l=3);var c=new window[t.pointType](24*l),f=i.a.newInstance({name:"TextureCoordinates",values:c,numberOfComponents:l});a.getPointData().setTCoords(f);var p=[0,0,0],h=[0,0,0],g=[0,0],m=0;p[0]=-t.xLength/2,h[0]=-1,h[1]=0,h[2]=0;for(var v=0;v<2;v++){p[1]=-t.yLength/2;for(var y=0;y<2;y++){g[1]=p[1]+.5,p[2]=-t.zLength/2;for(var b=0;b<2;b++)g[0]=(p[2]+.5)*(1-2*v),o[3*m]=p[0],o[3*m+1]=p[1],o[3*m+2]=p[2],s[3*m]=h[0],s[3*m+1]=h[1],s[3*m+2]=h[2],2===l?(c[m*l]=g[0],c[m*l+1]=g[1]):(c[m*l]=2*v-1,c[m*l+1]=2*y-1,c[m*l+2]=2*b-1),m++,p[2]+=t.zLength;p[1]+=t.yLength}p[0]+=t.xLength,h[0]+=2}p[1]=-t.yLength/2,h[1]=-1,h[0]=0,h[2]=0;for(var M=0;M<2;M++){p[0]=-t.xLength/2;for(var x=0;x<2;x++){g[0]=(p[0]+.5)*(2*M-1),p[2]=-t.zLength/2;for(var w=0;w<2;w++)g[1]=-1*(p[2]+.5),o[3*m]=p[0],o[3*m+1]=p[1],o[3*m+2]=p[2],s[3*m]=h[0],s[3*m+1]=h[1],s[3*m+2]=h[2],2===l?(c[m*l]=g[0],c[m*l+1]=g[1]):(c[m*l]=2*x-1,c[m*l+1]=2*M-1,c[m*l+2]=2*w-1),m++,p[2]+=t.zLength;p[0]+=t.xLength}p[1]+=t.yLength,h[1]+=2}p[2]=-t.zLength/2,h[2]=-1,h[0]=0,h[1]=0;for(var A=0;A<2;A++){p[1]=-t.yLength/2;for(var T=0;T<2;T++){g[1]=p[1]+.5,p[0]=-t.xLength/2;for(var C=0;C<2;C++)g[0]=(p[0]+.5)*(2*A-1),o[3*m]=p[0],o[3*m+1]=p[1],o[3*m+2]=p[2],s[3*m]=h[0],s[3*m+1]=h[1],s[3*m+2]=h[2],2===l?(c[m*l]=g[0],c[m*l+1]=g[1]):(c[m*l]=2*C-1,c[m*l+1]=2*T-1,c[m*l+2]=2*A-1),m++,p[0]+=t.xLength;p[1]+=t.yLength}p[2]+=t.zLength,h[2]+=2}d.a.buildFromDegree().rotateX(t.rotations[0]).rotateY(t.rotations[1]).rotateZ(t.rotations[2]).apply(o).apply(s),(r=d.a.buildFromRadian()).translate.apply(r,Cr(t.center)).apply(o);var S=new window[t.pointType](30);a.getPolys().setData(S,1);var D=0;S[D++]=4,S[D++]=0,S[D++]=1,S[D++]=3,S[D++]=2,S[D++]=4,S[D++]=4,S[D++]=6,S[D++]=7,S[D++]=5,S[D++]=4,S[D++]=8,S[D++]=10,S[D++]=11,S[D++]=9,S[D++]=4,S[D++]=12,S[D++]=13,S[D++]=15,S[D++]=14,S[D++]=4,S[D++]=16,S[D++]=18,S[D++]=19,S[D++]=17,S[D++]=4,S[D++]=20,S[D++]=21,S[D++]=23,S[29]=22}}}(e,t)}var Ir={newInstance:h.a.newInstance(Dr,"vtkCubeSource"),extend:Dr};var Er={focus:null,modelBounds:[-1,1,-1,1,-1,1],focalPoint:[0,0,0],outline:!0,axes:!0,xShadows:!0,yShadows:!0,zShadows:!0,wrap:!1,translationMode:!1};function Nr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Er,n),h.a.obj(e,t),h.a.get(e,t,["focus"]),h.a.getArray(e,t,["modelBounds"],6),h.a.getArray(e,t,["focalPoint"],3),h.a.setGet(e,t,["outline"]),h.a.setGet(e,t,["axes"]),h.a.setGet(e,t,["xShadows"]),h.a.setGet(e,t,["yShadows"]),h.a.setGet(e,t,["zShadows"]),h.a.setGet(e,t,["wrap"]),h.a.setGet(e,t,["translationMode"]),h.a.algo(e,t,0,1),function(e,t){t.classHierarchy.push("vtkCursor3D"),e.setModelBounds=function(n){if(Array.isArray(n)&&!(n.length<6)&&(t.modelBounds[0]!==n[0]||t.modelBounds[1]!==n[1]||t.modelBounds[2]!==n[2]||t.modelBounds[3]!==n[3]||t.modelBounds[4]!==n[4]||t.modelBounds[5]!==n[5])){e.modified(),t.modelBounds=n.map(function(e){return Number(e)});for(var r=0;r<3;++r)t.modelBounds[2*r]=Math.min(t.modelBounds[2*r],t.modelBounds[2*r+1])}},e.setFocalPoint=function(n){if(Array.isArray(n)&&!(n.length<3)&&(n[0]!==t.focalPoint[0]||n[1]!==t.focalPoint[1]||n[2]!==t.focalPoint[2])){e.modified();for(var r=[],i=0;i<3;i++)r[i]=n[i]-t.focalPoint[i],t.focalPoint[i]=Number(n[i]),t.translationMode?(t.modelBounds[2*i]+=r[i],t.modelBounds[2*i+1]+=r[i]):t.wrap?t.focalPoint[i]=t.modelBounds[2*i]+1*(t.focalPoint[i]-t.modelBounds[2*i])%(1*(t.modelBounds[2*i+1]-t.modelBounds[2*i])):(n[i]<t.modelBounds[2*i]&&(t.focalPoint[i]=t.modelBounds[2*i]),n[i]>t.modelBounds[2*i+1]&&(t.focalPoint[i]=t.modelBounds[2*i+1]))}},e.setAll=function(t){e.setOutline(t),e.setAxes(t),e.setXShadows(t),e.setYShadows(t),e.setZShadows(t)},e.allOn=function(){e.setAll(!0)},e.allOff=function(){e.setAll(!1)},e.requestData=function(e,n){if(!t.deleted){var i=0,a=0;if(t.wrap)for(var o=0;o<t.focalPoint.length;++o)t.focalPoint[o]=t.modelBounds[2*o]+1*(t.focalPoint[o]-t.modelBounds[2*o])%(t.modelBounds[2*o+1]-t.modelBounds[2*o]);else for(var s=0;s<t.focalPoint.length;++s)t.focalPoint[s]=Math.max(t.focalPoint[s],t.modelBounds[2*s]),t.focalPoint[s]=Math.min(t.focalPoint[s],t.modelBounds[2*s+1]);if(t.axes&&(i+=6,a+=3),t.outline&&(i+=8,a+=12),t.xShadows&&(i+=8,a+=4),t.yShadows&&(i+=8,a+=4),t.zShadows&&(i+=8,a+=4),0!==i){var u=Se.a.newInstance(),l=p.a.newInstance({size:3*i}),c=r.a.newInstance({size:3*a}),f=0,d=0;if(t.axes&&(l.getData()[3*f+0]=t.modelBounds[0],l.getData()[3*f+1]=t.focalPoint[1],l.getData()[3*f+2]=t.focalPoint[2],++f,l.getData()[3*f+0]=t.modelBounds[1],l.getData()[3*f+1]=t.focalPoint[1],l.getData()[3*f+2]=t.focalPoint[2],++f,c.getData()[3*d+0]=2,c.getData()[3*d+1]=f-2,c.getData()[3*d+2]=f-1,++d,l.getData()[3*f+0]=t.focalPoint[0],l.getData()[3*f+1]=t.modelBounds[2],l.getData()[3*f+2]=t.focalPoint[2],++f,l.getData()[3*f+0]=t.focalPoint[0],l.getData()[3*f+1]=t.modelBounds[3],l.getData()[3*f+2]=t.focalPoint[2],++f,c.getData()[3*d+0]=2,c.getData()[3*d+1]=f-2,c.getData()[3*d+2]=f-1,++d,l.getData()[3*f+0]=t.focalPoint[0],l.getData()[3*f+1]=t.focalPoint[1],l.getData()[3*f+2]=t.modelBounds[4],++f,l.getData()[3*f+0]=t.focalPoint[0],l.getData()[3*f+1]=t.focalPoint[1],l.getData()[3*f+2]=t.modelBounds[5],++f,c.getData()[3*d+0]=2,c.getData()[3*d+1]=f-2,c.getData()[3*d+2]=f-1,++d),t.outline){l.getData()[3*f+0]=t.modelBounds[0],l.getData()[3*f+1]=t.modelBounds[2],l.getData()[3*f+2]=t.modelBounds[4];var h=f;++f,l.getData()[3*f+0]=t.modelBounds[1],l.getData()[3*f+1]=t.modelBounds[2],l.getData()[3*f+2]=t.modelBounds[4];var g=f;++f,l.getData()[3*f+0]=t.modelBounds[0],l.getData()[3*f+1]=t.modelBounds[3],l.getData()[3*f+2]=t.modelBounds[4];var m=f;++f,l.getData()[3*f+0]=t.modelBounds[0],l.getData()[3*f+1]=t.modelBounds[2],l.getData()[3*f+2]=t.modelBounds[5];var v=f;++f,c.getData()[3*(d+0)+0]=2,c.getData()[3*(d+0)+1]=h,c.getData()[3*(d+0)+2]=g,c.getData()[3*(d+1)+0]=2,c.getData()[3*(d+1)+1]=h,c.getData()[3*(d+1)+2]=m,c.getData()[3*(d+2)+0]=2,c.getData()[3*(d+2)+1]=h,c.getData()[3*(d+2)+2]=v,d+=3,l.getData()[3*f+0]=t.modelBounds[1],l.getData()[3*f+1]=t.modelBounds[3],l.getData()[3*f+2]=t.modelBounds[5];var y=f;++f,l.getData()[3*f+0]=t.modelBounds[0],l.getData()[3*f+1]=t.modelBounds[3],l.getData()[3*f+2]=t.modelBounds[5];var b=f;++f,l.getData()[3*f+0]=t.modelBounds[1],l.getData()[3*f+1]=t.modelBounds[2],l.getData()[3*f+2]=t.modelBounds[5];var M=f;++f,l.getData()[3*f+0]=t.modelBounds[1],l.getData()[3*f+1]=t.modelBounds[3],l.getData()[3*f+2]=t.modelBounds[4];var x=f;++f,c.getData()[3*(d+0)+0]=2,c.getData()[3*(d+0)+1]=y,c.getData()[3*(d+0)+2]=b,c.getData()[3*(d+1)+0]=2,c.getData()[3*(d+1)+1]=y,c.getData()[3*(d+1)+2]=M,c.getData()[3*(d+2)+0]=2,c.getData()[3*(d+2)+1]=y,c.getData()[3*(d+2)+2]=x,d+=3,c.getData()[3*(d+0)+0]=2,c.getData()[3*(d+0)+1]=g,c.getData()[3*(d+0)+2]=x,c.getData()[3*(d+1)+0]=2,c.getData()[3*(d+1)+1]=g,c.getData()[3*(d+1)+2]=M,d+=2,c.getData()[3*(d+0)+0]=2,c.getData()[3*(d+0)+1]=m,c.getData()[3*(d+0)+2]=x,c.getData()[3*(d+1)+0]=2,c.getData()[3*(d+1)+1]=m,c.getData()[3*(d+1)+2]=b,d+=2,c.getData()[3*(d+0)+0]=2,c.getData()[3*(d+0)+1]=v,c.getData()[3*(d+0)+2]=M,c.getData()[3*(d+1)+0]=2,c.getData()[3*(d+1)+1]=v,c.getData()[3*(d+1)+2]=b,d+=2}if(t.xShadows)for(var w=0;w<2;++w)l.getData()[3*f+0]=t.modelBounds[w],l.getData()[3*f+1]=t.modelBounds[2],l.getData()[3*f+2]=t.focalPoint[2],++f,l.getData()[3*f+0]=t.modelBounds[w],l.getData()[3*f+1]=t.modelBounds[3],l.getData()[3*f+2]=t.focalPoint[2],++f,c.getData()[3*d+0]=2,c.getData()[3*d+1]=f-2,c.getData()[3*d+2]=f-1,++d,l.getData()[3*f+0]=t.modelBounds[w],l.getData()[3*f+1]=t.focalPoint[1],l.getData()[3*f+2]=t.modelBounds[4],++f,l.getData()[3*f+0]=t.modelBounds[w],l.getData()[3*f+1]=t.focalPoint[1],l.getData()[3*f+2]=t.modelBounds[5],++f,c.getData()[3*d+0]=2,c.getData()[3*d+1]=f-2,c.getData()[3*d+2]=f-1,++d;if(t.yShadows)for(var A=0;A<2;++A)l.getData()[3*f+0]=t.modelBounds[0],l.getData()[3*f+1]=t.modelBounds[A+2],l.getData()[3*f+2]=t.focalPoint[2],++f,l.getData()[3*f+0]=t.modelBounds[1],l.getData()[3*f+1]=t.modelBounds[A+2],l.getData()[3*f+2]=t.focalPoint[2],++f,c.getData()[3*d+0]=2,c.getData()[3*d+1]=f-2,c.getData()[3*d+2]=f-1,++d,l.getData()[3*f+0]=t.focalPoint[0],l.getData()[3*f+1]=t.modelBounds[A+2],l.getData()[3*f+2]=t.modelBounds[4],++f,l.getData()[3*f+0]=t.focalPoint[0],l.getData()[3*f+1]=t.modelBounds[A+2],l.getData()[3*f+2]=t.modelBounds[5],++f,c.getData()[3*d+0]=2,c.getData()[3*d+1]=f-2,c.getData()[3*d+2]=f-1,++d;if(t.zShadows)for(var T=0;T<2;++T)l.getData()[3*f+0]=t.modelBounds[0],l.getData()[3*f+1]=t.focalPoint[1],l.getData()[3*f+2]=t.modelBounds[T+4],++f,l.getData()[3*f+0]=t.modelBounds[1],l.getData()[3*f+1]=t.focalPoint[1],l.getData()[3*f+2]=t.modelBounds[T+4],++f,c.getData()[3*d+0]=2,c.getData()[3*d+1]=f-2,c.getData()[3*d+2]=f-1,++d,l.getData()[3*f+0]=t.focalPoint[0],l.getData()[3*f+1]=t.modelBounds[2],l.getData()[3*f+2]=t.modelBounds[T+4],++f,l.getData()[3*f+0]=t.focalPoint[0],l.getData()[3*f+1]=t.modelBounds[3],l.getData()[3*f+2]=t.modelBounds[T+4],++f,c.getData()[3*d+0]=2,c.getData()[3*d+1]=f-2,c.getData()[3*d+2]=f-1,++d;var C=p.a.newInstance({size:3});C.getData()[0]=t.focalPoint[0],C.getData()[1]=t.focalPoint[1],C.getData()[2]=t.focalPoint[2],t.focus=Se.a.newInstance(),t.focus.setPoints(C),u.setPoints(l),u.setLines(c),n[0]=u}}}}(e,t)}var Or={newInstance:h.a.newInstance(Nr,"vtkCursor3D"),extend:Nr};var _r={lineValue:0,fillValue:255,gridSpacing:[10,10,0],gridOrigin:[0,0,0],dataSpacing:[1,1,1],dataOrigin:[0,0,0],dataExtent:[0,255,0,255,0,0],dataDirection:[1,0,0,0,1,0,0,0,1]};function Lr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,_r,n),h.a.obj(e,t),h.a.setGet(e,t,["lineValue","fillValue"]),h.a.setGetArray(e,t,["gridOrigin","gridSpacing","dataOrigin","dataSpacing"],3),h.a.setGetArray(e,t,["dataExtent"],6),h.a.setGetArray(e,t,["dataDirection"],9),h.a.algo(e,t,0,1),function(e,t){var n=this;t.classHierarchy.push("vtkImageGridSource"),e.requestData=function(e,r){if(!t.deleted){var a={},s={type:"vtkImageData",mtime:t.mtime,metadata:{source:"vtkImageGridSource",state:a}};["gridSpacing","gridOrigin","dataSpacing","dataOrigin"].forEach(function(e){a[e]=[].concat(t[e])});var u=o.a.newInstance(s);u.setOrigin(t.dataOrigin[0],t.dataOrigin[1],t.dataOrigin[2]),u.setSpacing(t.dataSpacing[0],t.dataSpacing[1],t.dataSpacing[2]),u.setExtent.apply(n,t.dataExtent),u.setDirection(t.dataDirection);var l=[0,0,0];l=l.map(function(e,n){return t.dataExtent[2*n+1]-t.dataExtent[2*n]+1});for(var c=new Uint8Array(l[0]*l[1]*l[2]),f=0,d=0,p=0,h=0,g=t.dataExtent[4];g<=t.dataExtent[5];g++){p=t.gridSpacing[2]?g%t.gridSpacing[2]===t.gridOrigin[2]:0;for(var m=t.dataExtent[2];m<=t.dataExtent[3];m++){d=t.gridSpacing[1]?m%t.gridSpacing[1]===t.gridOrigin[1]:0;for(var v=t.dataExtent[0];v<=t.dataExtent[1];v++)f=t.gridSpacing[0]?v%t.gridSpacing[0]===t.gridOrigin[0]:0,c[h]=p||d||f?t.lineValue:t.fillValue,h++}}var y=i.a.newInstance({numberOfComponents:1,values:c});y.setName("scalars"),u.getPointData().setScalars(y),r[0]=u}}}(e,t)}var Pr={newInstance:h.a.newInstance(Lr,"vtkImageGridSource"),extend:Lr},kr=h.a.vtkWarningMacro;var Rr={resolution:10,point1:[-1,0,0],point2:[1,0,0],pointType:"Float32Array"};function jr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Rr,n),h.a.obj(e,t),h.a.setGet(e,t,["resolution"]),h.a.setGetArray(e,t,["point1","point2"],3),h.a.algo(e,t,0,1),function(e,t){t.classHierarchy.push("vtkLineSource"),e.requestData=function(e,n){if(!t.deleted){var r=n[0],i=r?r.getPoints().getDataType():"Float32Array",a=Se.a.newInstance(),o=new Float32Array(3);if(f.subtract(t.point2,t.point1,o),f.norm(o)<=0)kr("Zero-length line definition");else{var s=t.resolution,u=s+1,l=new window[i](3*u);a.getPoints().setData(l,3);var c=new Uint32Array(u+1);a.getLines().setData(c,1);for(var d=0,p=0,h=0;h<s+1;h++)p=h/s,l[3*d]=t.point1[0]+p*o[0],l[3*d+1]=t.point1[1]+p*o[1],l[3*d+2]=t.point1[2]+p*o[2],d++;d=0,c[0]=u;for(var g=0;g<u;g++)c[g+1]=g;n[0]=a}}}}(e,t)}var Br={newInstance:h.a.newInstance(jr,"vtkLineSource"),extend:jr};function zr(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Fr=h.a.vtkWarningMacro;var Vr={xResolution:10,yResolution:10,origin:[0,0,0],point1:[1,0,0],point2:[0,1,0],pointType:"Float32Array"};function Ur(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Vr,n),t.normal=[0,0,1],t.center=[0,0,0],h.a.obj(e,t),h.a.setGet(e,t,["xResolution","yResolution"]),h.a.setGetArray(e,t,["origin"],3),h.a.getArray(e,t,["point1","point2","normal","center"],3),h.a.algo(e,t,0,1),function(e,t){t.classHierarchy.push("vtkPlaneSource"),e.requestData=function(n,r){if(!t.deleted){var a=r[0],o=a?a.getPoints().getDataType():"Float32Array",s=Se.a.newInstance(),u=new Float32Array(3),l=new Float32Array(3);if(f.subtract(t.point1,t.origin,u),f.subtract(t.point2,t.origin,l),e.updatePlane(u,l)){var c=t.xResolution,d=t.yResolution,p=(c+1)*(d+1),h=c*d,g=new window[o](3*p);s.getPoints().setData(g,3);var m=new Uint32Array(5*h);s.getPolys().setData(m,1);var v=new Float32Array(3*p),y=i.a.newInstance({numberOfComponents:3,values:v,name:"Normals"});s.getPointData().setNormals(y);var b=new Float32Array(2*p),M=i.a.newInstance({numberOfComponents:2,values:b,name:"TextureCoordinates"});s.getPointData().setTCoords(M);for(var x=new Float32Array(2),w=0,A=0;A<d+1;A++){x[1]=A/d;for(var T=0;T<c+1;T++)x[0]=T/c,g[3*w]=t.origin[0]+x[0]*u[0]+x[1]*l[0],g[3*w+1]=t.origin[1]+x[0]*u[1]+x[1]*l[1],g[3*w+2]=t.origin[2]+x[0]*u[2]+x[1]*l[2],b[2*w]=x[0],b[2*w+1]=x[1],v[3*w]=t.normal[0],v[3*w+1]=t.normal[1],v[3*w+2]=t.normal[2],w++}w=0;for(var C=0;C<d;C++)for(var S=0;S<c;S++)m[5*w+0]=4,m[5*w+1]=S+C*(c+1),m[5*w+2]=m[5*w+1]+1,m[5*w+3]=m[5*w+1]+c+2,m[5*w+4]=m[5*w+1]+c+1,w++;r[0]=s}else Fr("Bad plane definition")}},e.setNormal=function(){for(var n=[],r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];if(1===i.length||Array.isArray(i[0])?n=zr(i[0]):3===i.length&&(n=[i[0],i[1],i[2]]),0!==f.normalize(n)){var o=f.dot(t.normal,n),s=0,u=[];if(o<1){o<=-1?(s=180,f.subtract(t.point1,t.origin,u)):(f.cross(t.normal,i,u),s=f.degreesFromRadians(Math.acos(o)));var l=Ye.c.create(),c=[];Ye.e.negate(c,t.center),Ye.c.translate(l,l,c),Ye.c.rotate(l,l,f.radiansFromDegrees(s),u),Ye.c.translate(l,l,t.center),Ye.e.transformMat4(t.origin,t.origin,l),Ye.e.transformMat4(t.point1,t.point1,l),Ye.e.transformMat4(t.point2,t.point2,l),t.normal=zr(n),e.modified()}}},e.setCenter=function(){var n=[];if(1===arguments.length||Array.isArray(arguments.length<=0?void 0:arguments[0])?n=zr(arguments.length<=0?void 0:arguments[0]):3===arguments.length&&(n=[arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]]),!Ye.e.exactEquals(n,t.center)){var r=[];f.subtract(t.point1,t.origin,r);var i=[];f.subtract(t.point2,t.origin,i);for(var a=0;a<3;a++)t.center[a]=a<0||arguments.length<=a?void 0:arguments[a],t.origin[a]=t.center[a]-.5*(r[a]+i[a]),t.point1[a]=t.origin[a]+r[a],t.point2[a]=t.origin[a]+i[a];e.modified()}},e.setPoint1=function(){var n=[];if(1===arguments.length||Array.isArray(arguments.length<=0?void 0:arguments[0])?n=zr(arguments.length<=0?void 0:arguments[0]):3===arguments.length&&(n=[arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]]),!Ye.e.exactEquals(n,t.point1)){var r=[],i=[];t.point1=zr(n),f.subtract(t.point1,t.origin,r),f.subtract(t.point2,t.origin,i),e.updatePlane(r,i),e.modified()}},e.setPoint2=function(){var n=[];if(1===arguments.length||Array.isArray(arguments.length<=0?void 0:arguments[0])?n=zr(arguments.length<=0?void 0:arguments[0]):3===arguments.length&&(n=[arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]]),!Ye.e.exactEquals(n,t.point2)){var r=[],i=[];t.point2=zr(n),f.subtract(t.point1,t.origin,r),f.subtract(t.point2,t.origin,i),e.updatePlane(r,i),e.modified()}},e.updatePlane=function(e,n){for(var r=0;r<3;r++)t.center[r]=t.origin[r]+.5*(e[r]+n[r]);return f.cross(e,n,t.normal),0!==f.normalize(t.normal)}}(e,t),e.setPoint1(t.point1),e.setPoint2(t.point2)}var Gr={newInstance:h.a.newInstance(Ur,"vtkPlaneSource"),extend:Ur};var Wr={numberOfPoints:10,center:[0,0,0],radius:.5,pointType:"Float32Array"};function Hr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Wr,n),h.a.obj(e,t),h.a.setGet(e,t,["numberOfPoints","radius"]),h.a.setGetArray(e,t,["center"],3),h.a.algo(e,t,0,1),function(e,t){t.classHierarchy.push("vtkPointSource"),e.requestData=function(e,n){if(!t.deleted){var r=n[0],i=r?r.getPoints().getDataType():"Float32Array",a=Se.a.newInstance(),o=t.numberOfPoints,s=new window[i](3*o);a.getPoints().setData(s,3);var u,l,c,d,p,h=new Uint32Array(o+1);a.getVerts().setData(h,1);for(var g=0;g<o;g++)u=1-2*f.random(),l=Math.sqrt(1-u*u),d=(c=t.radius*Math.pow(f.random(),.33333333))*l,p=2*Math.PI*f.random(),s[3*g]=t.center[0]+d*Math.cos(p),s[3*g+1]=t.center[1]+d*Math.sin(p),s[3*g+2]=t.center[2]+c*u;h[0]=o;for(var m=0;m<o;m++)h[m+1]=m;n[0]=a}}}(e,t)}var Yr={newInstance:h.a.newInstance(Hr,"vtkPointSource"),extend:Hr};var Qr={offset:40,maximum:120,center:[0,0,0],frequency:[60,30,40],magnitude:[10,18,5],standardDeviation:.5,wholeExtent:[-10,10,-10,10,-10,10],dataDirection:[1,0,0,0,1,0,0,0,1]};function qr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Qr,n),h.a.obj(e,t),h.a.setGet(e,t,["offset","maximum","standardDeviation"]),h.a.setGetArray(e,t,["center","frequency","magnitude"],3),h.a.setGetArray(e,t,["wholeExtent"],6),h.a.setGetArray(e,t,["dataDirection"],9),h.a.algo(e,t,0,1),function(e,t){var n=this;t.classHierarchy.push("vtkRTAnalyticSource"),e.requestData=function(e,r){if(!t.deleted){var a={},s={type:"vtkImageData",mtime:t.mtime,metadata:{source:"vtkRTAnalyticSource",state:a}};["standardDeviation","center","frequency","magnitude","maximum"].forEach(function(e){a[e]=[].concat(t[e])});var u=o.a.newInstance(s);u.setSpacing(1,1,1),u.setExtent.apply(n,t.wholeExtent),u.setOrigin(0,0,0),u.setDirection(t.dataDirection);var l=[0,0,0];l=l.map(function(e,n){return t.wholeExtent[2*n+1]-t.wholeExtent[2*n]+1});for(var c=new Uint8Array(l[0]*l[1]*l[2]),f=1/(2*t.standardDeviation*t.standardDeviation),d=0,p=0,h=0,g=[1/(t.wholeExtent[1]-t.wholeExtent[0]),1/(t.wholeExtent[3]-t.wholeExtent[2]),1/(t.wholeExtent[5]-t.wholeExtent[4])],m=0,v=t.wholeExtent[4];v<=t.wholeExtent[5];v++){h=(t.center[2]-v)*g[2];var y=t.magnitude[2]*Math.cos(t.frequency[2]*h);h*=h;for(var b=t.wholeExtent[2];b<=t.wholeExtent[3];b++){p=(t.center[1]-b)*g[1];var M=t.magnitude[1]*Math.sin(t.frequency[1]*p);p*=p;for(var x=t.wholeExtent[0];x<=t.wholeExtent[1];x++){var w=h+p+(d=(t.center[0]-x)*g[0])*d,A=t.magnitude[0]*Math.sin(t.frequency[0]*d);c[m]=t.maximum*Math.exp(-w*f)+A+M+y+t.offset,m++}}}var T=i.a.newInstance({numberOfComponents:1,values:c});T.setName("scalars"),u.getPointData().setScalars(T),r[0]=u}}}(e,t)}var Xr={newInstance:h.a.newInstance(qr,"vtkRTAnalyticSource"),extend:qr};function Kr(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Zr(e,t){t.classHierarchy.push("vtkSLICSource"),e.addCluster=function(n,r,i,a,o,s,u){var l=t.clusters.length;return t.clusters.push(new Float32Array([n,r,i,a,o,s,u])),e.modified(),l},e.removeCluster=function(n){t.clusters.splice(n,1),e.modified()},e.removeAllClusters=function(){t.clusters=[],e.modified()},e.updateCluster=function(n,r,i,a,o,s,u,l){t.clusters[n]||(t.clusters[n]=new Float32Array(7)),t.clusters[n][0]=r,t.clusters[n][1]=i,t.clusters[n][2]=a,t.clusters[n][3]=o,t.clusters[n][4]=s,t.clusters[n][5]=u,t.clusters[n][6]=l,e.modified()},e.getNumberOfClusters=function(){return t.clusters.length},e.requestData=function(e,n){if(!t.deleted){var r=t.dimensions[0]*t.dimensions[1]*t.dimensions[2],a=o.a.newInstance();a.setSpacing.apply(a,Kr(t.spacing)),a.setExtent(0,t.dimensions[0]-1,0,t.dimensions[1]-1,0,t.dimensions[2]-1),a.setOrigin.apply(a,Kr(t.origin));for(var s=function(e,t,n){for(var r=new Float32Array(t[0]*t[1]*t[2]*3),i=0,a=0;a<t[2];a++)for(var o=e[2]+n[2]*a,s=0;s<t[1];s++)for(var u=e[1]+n[1]*s,l=0;l<t[0];l++){var c=e[0]+n[0]*l;r[i++]=c,r[i++]=u,r[i++]=o}return r}(t.origin,t.dimensions,t.spacing),u=(t.clusters.length<256?8:0)||(t.clusters.length<65536?16:32),l=new(window["Uint".concat(u,"Array")])(r),c=function(e){var n=Number.MAX_VALUE;t.clusters.forEach(function(t,r){var i=(t[0]-s[3*e])*(t[0]-s[3*e])+(t[1]-s[3*e+1])*(t[1]-s[3*e+1])+(t[2]-s[3*e+2])*(t[2]-s[3*e+2]);i<n&&(n=i,l[e]=r)})},f=0;f<r;f++)c(f);var d=i.a.newInstance({name:t.clusterArrayName,numberOfComponents:1,values:l});a.getPointData().addArray(d);var p=new Float32Array(r);for(f=0;f<r;f++){var h=t.clusters[l[f]];p[f]=h[3]+h[4]*(s[3*f+0]-h[0])+h[5]*(s[3*f+1]-h[1])+h[6]*(s[3*f+2]-h[2])}var g=i.a.newInstance({name:t.scalarArrayName,numberOfComponents:1,values:p});a.getPointData().addArray(g),n[0]=a}}}var Jr={clusters:[],spacing:[1,1,1],origin:[0,0,0],dimensions:[10,10,10],clusterArrayName:"cluster",scalarArrayName:"field"};function $r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Jr,n),h.a.obj(e,t),h.a.setGet(e,t,["clusterArrayName","scalarArrayName"]),h.a.setGetArray(e,t,["origin","spacing","dimensions"],3),h.a.algo(e,t,0,1),Zr(e,t)}var ei={newInstance:h.a.newInstance($r,"vtkSLICSource"),extend:$r};var ti={radius:.5,latLongTessellation:!1,thetaResolution:8,startTheta:0,endTheta:360,phiResolution:8,startPhi:0,endPhi:180,center:[0,0,0],pointType:"Float32Array"};function ni(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ti,n),h.a.obj(e,t),h.a.setGet(e,t,["radius","latLongTessellation","thetaResolution","startTheta","endTheta","phiResolution","startPhi","endPhi"]),h.a.setGetArray(e,t,["center"],3),h.a.algo(e,t,0,1),function(e,t){t.classHierarchy.push("vtkSphereSource"),e.requestData=function(e,n){if(!t.deleted){var r=n[0],a=r?r.getPoints().getDataType():"Float32Array";r=Se.a.newInstance();var o=0,s=t.thetaResolution,u=t.startTheta<t.endTheta?t.startTheta:t.endTheta;u*=Math.PI/180;var l=t.endTheta>t.startTheta?t.endTheta:t.startTheta;l*=Math.PI/180;var c=t.startPhi<t.endPhi?t.startPhi:t.endPhi;c*=Math.PI/180;var f=t.endPhi>t.startPhi?t.endPhi:t.startPhi;f*=Math.PI/180,Math.abs(u-l)<2*Math.PI&&++s;var d=(l-u)/t.thetaResolution,p=t.startPhi<=0?1:0,h=t.phiResolution+(t.endPhi>=180?-1:0),g=t.phiResolution*s+2,m=2*t.phiResolution*t.thetaResolution,v=0,y=new window[a](3*g),b=new Float32Array(3*g),M=0,x=new Uint32Array(5*m);t.startPhi<=0&&(y[3*v+0]=t.center[0],y[3*v+1]=t.center[1],y[3*v+2]=t.center[2]+t.radius,b[3*v+0]=0,b[3*v+1]=0,b[3*v+2]=1,v++,o++),t.endPhi>=180&&(y[3*v+0]=t.center[0],y[3*v+1]=t.center[1],y[3*v+2]=t.center[2]-t.radius,b[3*v+0]=0,b[3*v+1]=0,b[3*v+2]=-1,v++,o++);for(var w=t.phiResolution-o,A=(f-c)/(t.phiResolution-1),T=0;T<s;T++)for(var C=u+T*d,S=p;S<h;S++){var D=c+S*A,I=t.radius*Math.sin(D);b[3*v+0]=I*Math.cos(C),b[3*v+1]=I*Math.sin(C),b[3*v+2]=t.radius*Math.cos(D),y[3*v+0]=b[3*v+0]+t.center[0],y[3*v+1]=b[3*v+1]+t.center[1],y[3*v+2]=b[3*v+2]+t.center[2];var E=Math.sqrt(b[3*v+0]*b[3*v+0]+b[3*v+1]*b[3*v+1]+b[3*v+2]*b[3*v+2]);E=0===E?1:E,b[3*v+0]/=E,b[3*v+1]/=E,b[3*v+2]/=E,v++}var N=w*s;if(Math.abs(u-l)<2*Math.PI&&--s,t.startPhi<=0)for(var O=0;O<s;O++)x[M++]=3,x[M++]=w*O+o,x[M++]=w*(O+1)%N+o,x[M++]=0;if(t.endPhi>=180)for(var _=w-1+o,L=0;L<s;L++)x[M++]=3,x[M++]=w*L+_,x[M++]=o-1,x[M++]=w*(L+1)%N+_;for(var P=0;P<s;P++)for(var k=0;k<w-1;k++){var R=w*P+k+o,j=R+1,B=(w*(P+1)+k)%N+o+1;t.latLongTessellation?(x[M++]=4,x[M++]=R,x[M++]=j,x[M++]=B,x[M++]=B-1):(x[M++]=3,x[M++]=R,x[M++]=j,x[M++]=B,x[M++]=3,x[M++]=R,x[M++]=B,x[M++]=B-1)}y=y.subarray(0,3*v),r.getPoints().setData(y,3),b=b.subarray(0,3*v);var z=i.a.newInstance({name:"Normals",values:b,numberOfComponents:3});r.getPointData().setNormals(z),x=x.subarray(0,M),r.getPolys().setData(x,1),n[0]=r}}}(e,t)}var ri={newInstance:h.a.newInstance(ni,"vtkSphereSource"),extend:ni},ii={vtkArrowSource:vr,vtkCircleSource:Mr,vtkConcentricCylinderSource:Tr,vtkConeSource:cr,vtkCubeSource:Ir,vtkCursor3D:Or,vtkCylinderSource:hr,vtkImageGridSource:Pr,vtkLineSource:Br,vtkPlaneSource:Gr,vtkPointSource:Yr,vtkRTAnalyticSource:Xr,vtkSLICSource:ei,vtkSphereSource:ri},ai=h.a.vtkErrorMacro;var oi={center:[0,0,0],automaticSphereGeneration:1,preventSeam:1};function si(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,oi,n),h.a.obj(e,t),h.a.setGetArray(e,t,["center"]),h.a.setGet(e,t,["automaticSphereGeneration","preventSeam"]),h.a.algo(e,t,1,1),function(e,t){t.classHierarchy.push("vtkTextureMapToSphere"),e.requestData=function(e,n){if(!t.deleted){var r=e[0],a=r.getPoints().getNumberOfPoints();if(a<=1)ai("Can't generate texture coordinates without points");else{var o=Math.PI/2,s=[],u=r.getPoints();if(t.automaticSphereGeneration){t.center=[0,0,0];for(var l=0;l<a;l++)u.getPoint(l,s),t.center[0]+=s[0],t.center[1]+=s[1],t.center[2]+=s[2];t.center[0]/=a,t.center[1]/=a,t.center[2]/=a}for(var c=0,d=0,p=0,h=[0,0],g=0,m=0,v=0,y=[],b=0;b<a;b++)u.getPoint(b,s),0!==(c=Math.sqrt(f.distance2BetweenPoints(s,t.center)))?(d=s[2]-t.center[2],Math.abs(d)>c?(p=0,h[1]=d>0?0:1):(p=Math.acos(d/c),h[1]=p/Math.PI)):h[1]=0,0!=(g=c*Math.sin(p))?(d=s[0]-t.center[0],m=Math.abs(d)>g?d>0?0:Math.PI:Math.acos(d/g),d=s[1]-t.center[1],v=Math.abs(d)>g?d>0?o:-o:Math.asin(d/g)):(m=0,v=0),t.preventSeam?h[0]=m/Math.PI:(h[0]=m/(2*Math.PI),v<0&&(h[0]=1-h[0])),y.push.apply(y,h);var M=i.a.newInstance({name:"Texture Coordinates",numberOfComponents:2,size:a,values:y}),x=Se.a.newInstance();x.getPoints().setData(new Float32Array(r.getPoints().getData()),3),x.getPolys().setData(new Uint32Array(r.getPolys().getData())),x.getPointData().setTCoords(M),n[0]=x}}}}(e,t)}var ui={newInstance:h.a.newInstance(si,"vtkTextureMapToSphere"),extend:si},li=h.a.vtkErrorMacro;function ci(e,t){t.classHierarchy.push("vtkTextureMapToPlane"),e.requestData=function(e,n){if(!t.deleted){var r=e[0],a=r.getPoints().getNumberOfPoints();if(a<3&&t.automaticPlaneGeneration)li("Can't generate texture coordinates without points");else{var o=Se.a.newInstance();o.getPoints().setData(new Float32Array(r.getPoints().getData()),3),o.getPolys().setData(new Uint32Array(r.getPolys().getData()));var s=[],u=0,l=0,c=0,d=0,p=[0,0,0],h=0,g=[0,0,0],m=[0,0,0],v=0,y=0,b=0,M=0,x=[0,0,0];if(t.automaticPlaneGeneration&&0===t.origin[0]&&0===t.origin[1]&&0===t.origin[2]&&0===t.point1[0]&&0===t.point1[1]&&0===t.point2[0]&&0===t.point2[1]){for(t.automaticPlaneGeneration&&function(e){for(var n=e.getPoints().getNumberOfPoints(),r=0,i=[0,0,0,0,0,0,0,0,0],a=[0,0,0],o=[0,0,0],s=e.getBounds(),u=[s[0],s[2],s[4]],l=[s[1],s[3],s[5]],c=Math.sqrt(f.distance2BetweenPoints(u,l)),d=c,p=0;p<3;p++)t.normal[p]=0,s[2*p+1]-s[2*p]<d&&(r=p,d=s[2*p+1]-s[2*p]);if(t.normal[r]=1,!(d<=.001*c)){for(o[0]=0,o[1]=0,o[2]=0,p=0;p<9;p++)i[p]=0;for(var h=0;h<n;h++)e.getPoints().getPoint(h,a),o[0]+=a[0]*a[2],o[1]+=a[1]*a[2],o[2]+=a[2],i[0]+=a[0]*a[0],i[1]+=a[0]*a[1],i[2]+=a[0],i[3]+=a[0]*a[1],i[4]+=a[1]*a[1],i[5]+=a[1],i[6]+=a[0],i[7]+=a[1];i[8]=n;var g=[i[0],i[1],i[2]],m=[i[3],i[4],i[5]],v=[i[6],i[7],i[8]],y=[g,m,v],b=f.determinant3x3(y);b<=.001||(y[0]=o,y[1]=m,y[2]=v,t.normal[0]=f.determinant3x3(y)/b,y[0]=g,y[1]=o,y[2]=v,t.normal[1]=f.determinant3x3(y)/b,t.normal[2]=-1)}}(o),f.normalize(t.normal),u=1,l=0;l<3;l++)p[0]=0,p[1]=0,p[2]=0,p[l]=1,(d=Math.abs(f.dot(t.normal,p)))<u&&(u=d,h=l);p[0]=0,p[1]=0,p[2]=0,p[h]=1,f.cross(t.normal,p,g),f.normalize(g),f.cross(g,t.normal,m);var w=o.getBounds();for(l=0;l<3;l++)p[l]=w[2*l+1]-w[2*l];for(v=f.dot(m,p),y=f.dot(g,p),b=(t.sRange[1]-t.sRange[0])/v,M=(t.tRange[1]-t.tRange[0])/y,l=0;l<a;l++){for(o.getPoints().getPoint(l,x),c=0;c<3;c++)p[c]=x[c]-w[2*c];s.push(t.sRange[0]+f.dot(m,p)*b),s.push(t.tRange[0]+f.dot(g,p)*M)}}else{var A=0;for(l=0;l<3;l++)m[l]=t.point1[l]-t.origin[l],g[l]=t.point2[l]-t.origin[l];var T=f.dot(m,m),C=f.dot(g,g);for(0!==T&&0!==C||(li("Bad plane definition"),T=1,C=1),l=0;l<a;l++){for(o.getPoints().getPoint(l,x),c=0;c<3;c++)p[c]=x[c]-t.origin[c];A=m[0]*p[0]+m[1]*p[1]+m[2]*p[2],s.push(A/T),A=g[0]*p[0]+g[1]*p[1]+g[2]*p[2],s.push(A/C)}}var S=i.a.newInstance({name:"Texture Coordinates",numberOfComponents:2,size:a,values:s});o.getPointData().setTCoords(S),n[0]=o}}}}var fi={origin:[0,0,0],point1:[0,0,0],point2:[0,0,0],normal:[0,0,0],sRange:[0,1],tRange:[0,1],automaticPlaneGeneration:1};function di(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,fi,n),h.a.obj(e,t),h.a.setGetArray(e,t,["origin","point1","point2","normal","sRange","tRange"],3),h.a.setGet(e,t,["automaticPlaneGeneration"]),h.a.algo(e,t,1,1),ci(e,t)}var pi={Cornerstone:mt,Core:wt,General:or,Sources:ii,Texture:{vtkTextureMapToPlane:{newInstance:h.a.newInstance(di,"vtkTextureMapToPlane"),extend:di},vtkTextureMapToSphere:ui}},hi={CLAMP:0,REPEAT:1,MIRROR:2},gi={NEAREST:0,LINEAR:1,CUBIC:2},mi={pointer:null,extent:[0,-1,0,-1,0,-1],increments:[0,0,0],scalarType:null,dataTypeSize:1,numberOfComponents:1,borderMode:hi.CLAMP,interpolationMode:gi.LINEAR,extraInfo:null},vi=Object.assign({},mi,{positions:[0,0,0],weights:null,weightExtent:[0,-1,0,-1,0,-1],kernelSize:[1,1,1],workspace:null,lastY:null,lastZ:null});function yi(e){var t=Math.floor(e);return{floored:t,error:e-t}}function bi(e){return Math.round(e)}function Mi(e,t,n){var r=e<=n?e:n;return r=(r-=t)>=0?r:0}function xi(e,t,n){var r=n-t+1,i=e-t;return i=(i%=r)>=0?i:i+r}function wi(e,t,n){var r=n-t,i=2*r+(0===r?1:0),a=e-t;return a=a>=0?a:-a,a=(a%=i)<=r?a:i-a}var Ai={outValue:0,tolerance:Number.EPSILON,componentOffset:0,componentCount:-1,borderMode:hi.CLAMP,slidingWindow:!1,scalars:null,interpolationInfo:Object.assign({},mi),interpolationFunc:null,rowInterpolationFunc:null,structuredBounds:[0,-1,0,-1,0,-1],spacing:null,origin:null,extent:null};function Ti(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ai,n),h.a.obj(e,t),h.a.setGet(e,t,["outValue","tolerance","componentOffset","componentCount","borderMode","slidingWindow"]),h.a.get(e,t,["origin","spacing"]),function(e,t){t.classHierarchy.push("vtkAbstractImageInterpolator"),e.initialize=function(n){e.releaseData(),t.scalars=n.getPointData().getScalars(),t.spacing=n.getSpacing(),t.origin=n.getOrigin(),t.extent=n.getExtent(),e.update()},e.releaseData=function(){t.scalars=null},e.update=function(){if(!t.scalars)return t.interpolationInfo.pointer=null,void(t.interpolationInfo.numberOfComponents=1);t.interpolationInfo.extent=t.extent.slice();for(var n=e.computeSupportSize(null),r=Math.max(Math.max(n[0],n[1]),n[2]),i=Number.MIN_SAFE_INTEGER+r/2,a=Number.MAX_SAFE_INTEGER-r/2,o=0;o<3;++o){var s=Math.max(.5*(t.extent[2*o]===t.extent[2*o+1]),t.tolerance);t.structuredBounds[2*o]=Math.max(t.extent[2*o]-s,i),t.structuredBounds[2*o+1]=Math.min(t.extent[2*o+1]+s,a)}var u=t.extent[1]-t.extent[0]+1,l=t.extent[3]-t.extent[2]+1,c=t.scalars.getNumberOfComponents();t.interpolationInfo.increments[0]=c,t.interpolationInfo.increments[1]=t.interpolationInfo.increments[0]*u,t.interpolationInfo.increments[2]=t.interpolationInfo.increments[1]*l;var f=t.componentOffset;f=(f=f>0?f:0)<c?f:c-1;var d=t.scalars.getData();t.interpolationInfo.pointer=d.subarray(1*f),t.interpolationInfo.scalarType=t.scalars.dataType,t.interpolationInfo.dataTypeSize=1,t.interpolationInfo.numberOfComponents=e.computeNumberOfComponents(c),t.interpolationInfo.borderMode=t.borderMode,e.internalUpdate()},e.internalUpdate=function(){},e.interpolateXYZ=function(n,r,i,a){var o=t.outValue,s=[n,r,i],u=[(s[0]-t.origin[0])/t.spacing[0],(s[1]-t.origin[1])/t.spacing[1],(s[2]-t.origin[2])/t.spacing[2]];if(e.checkBoundsIJK(u)){var l=Object.assign({},t.interpolationInfo),c=l.increments[0]-t.componentOffset,f=a>0?a:0;f=f<c?f:c-1,l.pointer=t.interpolationInfo.pointer.subarray(1*f),l.numberOfComponents=1;var d=[o];e.interpolatePoint(l,u,d),o=d[0]}return o},e.interpolate=function(n,r){var i=[(n[0]-t.origin[0])/t.spacing[0],(n[1]-t.origin[1])/t.spacing[1],(n[2]-t.origin[2])/t.spacing[2]];if(e.checkBoundsIJK(i))return e.interpolatePoint(t.interpolationInfo,i,r),!0;for(var a=0;a<t.interpolationInfo.numberOfComponents;++a)r[a]=t.outValue;return!1},e.computeNumberOfComponents=function(e){var n=Math.min(Math.max(t.componentOffset,0),e-1),r=t.componentCount<e-n?t.componentCount:e-n;return r>0?r:e-n},e.getNumberOfComponents=function(){return t.interpolationInfo.numberOfComponents},e.interpolateIJK=function(n,r){e.interpolatePoint(t.interpolationInfo,n,r)},e.checkBoundsIJK=function(e){return!(e[0]<t.structuredBounds[0]||e[0]>t.structuredBounds[1]||e[1]<t.structuredBounds[2]||e[1]>t.structuredBounds[3]||e[2]<t.structuredBounds[4]||e[2]>t.structuredBounds[5])},e.computeSupportSize=null,e.isSeparable=null,e.precomputeWeightsForExtent=function(e,t,n){},e.FreePrecomputedWeights=function(e){},e.interpolatePoint=function(e,t,n){},e.interpolateRow=function(e,t,n,r,i,a){}}(e,t)}var Ci={newInstance:h.a.newInstance(Ti,"vtkAbstractImageInterpolator"),extend:Ti,ImageBorderMode:hi,InterpolationMode:gi};var Si={interpolationMode:gi.NEAREST};function Di(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Si,n),Ci.extend(e,t,n),h.a.setGet(e,t,["interpolationMode"]),function(e,t){t.classHierarchy.push("vtkImageInterpolator"),e.computeSupportSize=function(e){var n=1;t.interpolationMode===gi.LINEAR?n=2:t.interpolationMode===gi.CUBIC&&(n=4);var r=[n,n,n];if(null==e)return r;if(0!==e[12]||0!==e[13]||0!==e[14]||1!==e[15])return r;for(var i=0;i<3;++i){for(var a=!0,o=0;o<3;++o)a=a&&Number.isInteger(e[4*i+o]);a&&(r[i]=1)}return r},e.internalUpdate=function(){t.interpolationInfo.interpolationMode=t.interpolationMode},e.isSeparable=function(){return!0},e.interpolateNearest=function(e,t,n){var r=e.extent,i=e.increments,a=e.numberOfComponents,o=bi(t[0]),s=bi(t[1]),u=bi(t[2]);switch(e.borderMode){case hi.REPEAT:o=xi(o,r[0],r[1]),s=xi(s,r[2],r[3]),u=xi(u,r[4],r[5]);break;case hi.MIRROR:o=wi(o,r[0],r[1]),s=wi(s,r[2],r[3]),u=wi(u,r[4],r[5]);break;default:o=Mi(o,r[0],r[1]),s=Mi(s,r[2],r[3]),u=Mi(u,r[4],r[5])}var l=o*i[0]+s*i[1]+u*i[2],c=e.pointer.subarray(l,l+a);n.set(c,0)},e.interpolatePoint=function(n,r,i){switch(t.interpolationMode){case gi.NEAREST:default:e.interpolateNearest(n,r,i);break;case gi.LINEAR:console.log("LINEAR not implemented");break;case gi.CUBIC:console.log("CUBIC not implemented")}},e.interpolateRowNearest=function(e,t,n,r,i,a){for(var o=e.positions[0].subarray(t),s=e.positions[1].subarray(n),u=e.positions[2].subarray(r),l=e.pointer.subarray(s[0]+u[0]),c=e.numberOfComponents,f=0;f<a;++f)i.set(l.subarray(o[f],c),f*c)},e.interpolateRow=function(n,r,i,a,o,s){switch(t.interpolationMode){case gi.NEAREST:default:e.interpolateRowNearest(n,r,i,a,o,s);break;case gi.LINEAR:console.log("LINEAR not implemented");break;case gi.CUBIC:console.log("CUBIC not implemented")}},e.vtkTricubicInterpWeights=function(e){var t=e-1,n=.5*e,r=3*e;return[-n*t*t,((r-2)*n-1)*t,-((r-4)*e-1)*n,e*n*t]},e.precomputeWeightsForExtent=function(n,r,i){var a=Object.assign({},vi.newInstance(),t.interpolationInfo);a.weightType="Float32Array";for(var o=a.interpolationMode,s=!0,u=0;u<3;++u){var l=void 0;for(l=0;l<3&&0===n[4*u+l];++l);i[2*u]=r[2*u],i[2*u+1]=r[2*u+1];var c=a.extent[2*l],f=a.extent[2*l+1],d=t.structuredBounds[2*l],p=t.structuredBounds[2*l+1],h=1;h=o<gi.LINEAR?h:2;var g=f-c+1;h=(h=o<gi.CUBIC?h:4)<g?h:g,Number.isInteger(n[4*u+l])&&Number.isInteger(n[4*l+l])&&(h=1);var m=h*(r[2*u+1]-r[2*u]+1),v=new Int16Array(m),y=h*r[2*u],b=null;o!==gi.NEAREST&&(b=new Int16Array(m)),a.kernelSize[u]=h,a.weightExtent[2*u]=r[2*u],a.weightExtent[2*u+1]=r[2*u+1],a.positions[u]=v,a.weights[u]=b;for(var M=0,x=r[2*u];x<=r[2*u+1];++x){var w=n[12+l]+x*n[4*u+l],A=h,T=0,C=0;if(o===gi.NEAREST)T=Math.round(w);else{var S=yi(w);T=S.integer,C=S.error,o===gi.CUBIC&&1!==h&&(T--,A=4)}var D=[0,0,0,0],I=0;switch(a.borderMode){case hi.REPEAT:do{D[I]=xi(T,c,f),T++}while(++I<A);break;case hi.MIRROR:do{D[I]=wi(T,c,f),T++}while(++I<A);break;default:do{D[I]=Mi(T,c,f),T++}while(++I<A)}var E=a.increments[l];if(v[h*x-y]=D[0]*E,o!==gi.NEAREST&&(b[h*x-y]=1),h>1)if(o===gi.LINEAR)v[h*x+1-y]=D[1]*E,b[h*x-y]=1-C,b[h*x+1-y]=C;else if(o===gi.CUBIC){var N=e.vtkTricubicInterpWeights(C);if(4===h)for(var O=0;O<4;O++)v[h*x+O-y]=D[O]*E,b[h*x+O-y]=N[O];else{for(var _=[0,0,0,0],L=0;L<4;L++)_[D[L]-c]+=N[L];for(var P=0;P<h;P++)v[h*x+P-y]=c+P,b[h*x+P-y]=_[P]}}w>=d&&w<=p?0===M&&(M=1,i[2*u]=x):1===M&&(M=2,i[2*u+1]=x-1)}(0===M||i[2*u]>i[2*u+1])&&(s=!1)}if(!s)for(var k=0;k<3;k++)i[2*k]=r[2*k],i[2*k+1]=r[2*k]-1}}(e,t)}var Ii={newInstance:h.a.newInstance(Di,"vtkImageInterpolator"),extend:Di};var Ei={spanState:0,extent:[0,-1,0,-1,0,-1],end:0,spanEnd:0,rowEnd:0,sliceEnd:0,rowIncrement:0,rowEndIncrement:0,sliceIncrement:0,sliceEndIncrement:0,id:0,index:[0,0,0],startY:0,hasStencil:!1,inStencil:!0,spanIndex:0,spanSliceIncrement:0,spanSliceEndIncrement:0,spanCountPointer:null,spanListPointer:null,algorithm:null,target:0,count:0};function Ni(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ei,n),h.a.obj(e,t),h.a.get(e,t,["id","index"]),function(e,t){t.classHierarchy.push("vtkImagePointDataIterator"),e.initialize=function(e,n,r,i){var a=e.getExtent(),o=n;null==o&&(o=a);for(var s,u,l,c=!1,f=0;f<6;f+=2)t.extent[f]=Math.max(o[f],a[f]),t.extent[f+1]=Math.min(o[f+1],a[f+1]),t.extent[f]>t.extent[f+1]&&(c=!0);if(t.rowIncrement=a[1]-a[0]+1,t.sliceIncrement=t.rowIncrement*(a[3]-a[2]+1),c){s=0,u=0,l=0,t.id=0,t.rowEndIncrement=0,t.sliceEndIncrement=0;for(var d=0;d<6;d+=2)t.extent[d]=a[d],t.extent[d+1]=a[d]-1}else s=t.extent[1]-t.extent[0]+1,u=t.extent[3]-t.extent[2]+1,l=t.extent[5]-t.extent[4]+1,t.id=t.extent[0]-a[0]+(t.extent[2]-a[2])*t.rowIncrement+(t.extent[4]-a[4])*t.sliceIncrement,t.rowEndIncrement=t.rowIncrement-s,t.sliceEndIncrement=t.rowEndIncrement+t.sliceIncrement-t.rowIncrement*u;if(t.spanEnd=t.id+s,t.rowEnd=t.id+s,t.sliceEnd=t.id+(t.rowIncrement*u-t.rowEndIncrement),t.end=t.id+(t.sliceIncrement*l-t.sliceEndIncrement),t.index[0]=t.extent[0],t.index[1]=t.extent[2],t.index[2]=t.extent[4],t.startY=t.index[1],r){t.hasStencil=!0,t.inStencil=!1,t.spanIndex=0;var p=r.getExtent();if(t.spanSliceIncrement=0,t.spanSliceEndIncrement=0,p[3]>=p[2]&&p[5]>=p[4]){t.spanSliceIncrement=p[3]-p[2]+1;var h=t.extent[2]-p[2];h>=0&&(t.spanSliceEndIncrement+=h);var g=p[3]-t.extent[3];g>=0&&(t.spanSliceEndIncrement+=g)}var m=0,v=t.extent[2]-p[2];v<0?(t.extent[2]=p[2],m-=1):m+=v,p[3]<=t.extent[3]&&(t.extent[3]=p[3]);var y=t.extent[4]-p[4];y<0?(t.extent[4]=p[4],v>=0&&(m-=1+t.spanSliceEndIncrement)):m+=y*t.spanSliceIncrement,p[5]<=t.extent[5]&&(t.extent[5]=p[5]),t.extent[2]<=t.extent[3]&&t.extent[4]<=t.extent[5]?(t.spanCountPointer=r.extentListLengths.subarray(m),t.spanListPointer=r.extentLists.subarray(m),v>=0&&y>=0&&(t.inStencil=!0,t.setSpanState(t.extent[0]))):(t.spanCountPointer=null,t.spanListPointer=null,t.inStencil=!1)}else t.hasStencil=!1,t.inStencil=!0,t.spanSliceEndIncrement=0,t.spanSliceIncrement=0,t.spanIndex=0,t.spanCountPointer=null,t.spanListPointer=null;if(i){t.algorithm=i;var b=u*l;t.target=b/50+1,t.count=50*t.target-b/t.target*t.target+1}else t.algorithm=null,t.target=0,t.count=0},e.setSpanState=function(e){var n,r=!1,i=t.spanListPointer,a=t.spanCountPointer[0];for(n=0;n<a&&!(i[n]>e);++n)r=!r;t.spanIndex=n,t.inStencil=r;var o=t.extent[1]+1;n<a&&i[n]<=t.extent[1]&&(o=i[n]);var s=t.rowEnd-(t.rowIncrement-t.rowEndIncrement);t.id=s+(e-t.extent[0]),t.spanEnd=s+(o-t.extent[0])},e.nextSpan=function(){if(t.spanEnd===t.rowEnd){var n=1;if(t.spanEnd!==t.sliceEnd)t.id=t.rowEnd+t.rowEndIncrement,t.rowEnd+=t.rowIncrement,t.spanEnd=t.rowEnd,t.index[1]++;else{if(t.spanEnd===t.end)return void(t.id=t.end);t.id=t.sliceEnd+t.sliceEndIncrement,t.sliceEnd+=t.sliceIncrement,t.rowEnd=t.id+(t.rowIncrement-t.rowEndIncrement),t.spanEnd=t.rowEnd,t.index[1]=t.startY,t.index[2]++,n+=t.spanSliceEndIncrement}t.index[0]=t.extent[0],t.hasStencil&&(t.index[1]>=t.extent[2]&&t.index[1]<=t.extent[3]&&t.index[2]>=t.extent[4]&&t.index[2]<=t.extent[5]?(t.spanCountPointer=t.spanCountPointer.subarray(n),t.spanListPointer=t.spanListPointer.subarray(n),e.setSpanState(t.extent[0])):t.inStencil=!1),t.algorithm&&e.reportProgress()}else{t.id=t.spanEnd;var r=t.spanCountPointer[0],i=t.extent[1]+1;if(t.index[0]=i,t.spanIndex<r){var a=t.spanListPointer[t.spanIndex];a<i&&(t.index[0]=a)}if(t.spanIndex++,t.spanIndex<r){var o=t.spanListPointer[t.spanIndex];o<i&&(i=o)}t.spanEnd=t.rowEnd-(t.rowIncrement-t.rowEndIncrement)+(i-t.extent[0]),t.inStencil=!t.inStencil}},e.isAtEnd=function(){return t.id===t.end},e.isInStencil=function(){return t.inStencil},e.spanEndId=function(){return t.spanEnd},e.reportProgress=function(){},e.getArray=function(e,t){return e.getData().subarray(t*e.getNumberOfComponents())},e.getScalars=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.getArray(t.getPointData().getScalars(),n)}}(e,t)}var Oi=h.a.newInstance(Ni,"vtkImagePointDataIterator"),_i=Object.assign({newInstance:Oi,extend:Ni}),Li={SlabMode:{MIN:0,MAX:1,MEAN:2,SUM:3}},Pi=h.a.vtkErrorMacro,ki=h.a.vtkDebugMacro;var Ri={transformInputSampling:!0,autoCropOutput:!1,outputDimensionality:3,outputSpacing:null,outputOrigin:null,outputExtent:null,outputScalarType:null,wrap:!1,mirror:!1,border:!0,interpolationMode:gi.NEAREST,slabMode:Li.MIN,slabTrapezoidIntegration:!1,slabNumberOfSlices:1,slabSliceSpacingFraction:1,optimization:!1,scalarShift:0,scalarScale:1,backgroundColor:[0,0,0,0],resliceAxes:null,resliceTransform:null,interpolator:Ii.newInstance(),usePermuteExecute:!1};function ji(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ri,n),h.a.obj(e,t),h.a.algo(e,t,1,1),h.a.setGet(e,t,["outputDimensionality","outputOrigin","outputSpacing","outputExtent","outputScalarType","scalarShift","scalarScale","transformInputSampling","autoCropOutput","wrap","mirror","border","backgroundColor"]),h.a.get(e,t,["resliceAxes"]),h.a.algo(e,t,1,1),function(e,t){t.classHierarchy.push("vtkImageReslice");var n=null,r=null;e.setResliceAxes=function(n){t.resliceAxes||(t.resliceAxes=Ye.c.create()),Ye.c.exactEquals(t.resliceAxes,n)||(Ye.c.copy(t.resliceAxes,n),e.modified())},e.requestData=function(a,s){var u=a[0];if(u){var l=u.getOrigin(),c=u.getSpacing(),f=u.getDimensions(),d=u.getPointData().getScalars(),p=[0,f[0]-1,0,f[1]-1,0,f[2]-1],h=[0,0,0],g=[1,1,1],m=[0,0,0,0,0,0],v=[0,0,0],y=Ye.c.create();t.resliceAxes&&(y=t.resliceAxes);var b=Ye.c.create();Ye.c.invert(b,y);var M=[l[0]+.5*(p[0]+p[1])*c[0],l[1]+.5*(p[2]+p[3])*c[1],l[2]+.5*(p[4]+p[5])*c[2]],x=null;t.autoCropOutput&&(x=e.getAutoCroppedOutputBounds(u));for(var w=0;w<3;w++){var A=0,T=0,C=0,S=0;if(t.transformInputSampling){for(var D=0,I=0;I<3;I++){S+=b[4*I+w]*(M[I]-y[12+I]);var E=y[4*w+I]*y[4*w+I];A+=E*Math.abs(c[I]),T+=E*(p[2*I+1]-p[2*I])*Math.abs(c[I]),C+=E*p[2*I],D+=E}A/=D,T/=D*Math.sqrt(D),C/=D}else S=M[w],A=c[w],T=(p[2*w+1]-p[2*w])*A,C=p[2*w];null==t.outputSpacing?g[w]=A:g[w]=t.outputSpacing[w],w>=t.outputDimensionality?(m[2*w]=0,m[2*w+1]=0):null==t.outputExtent?(t.autoCropOutput&&(T=x[2*w+1]-x[2*w]),m[2*w]=Math.round(C),m[2*w+1]=Math.round(m[2*w]+Math.abs(T/g[w]))):(m[2*w]=t.outputExtent[2*w],m[2*w+1]=t.outputExtent[2*w+1]),w>=t.outputDimensionality?h[w]=0:null==t.outputOrigin?t.autoCropOutput?h[w]=x[2*w]-m[2*w]*g[w]:h[w]=S-.5*(m[2*w]+m[2*w+1])*g[w]:h[w]=t.outputOrigin[w],v[w]=m[2*w+1]-m[2*w]+1}var N=d.getDataType();t.outputScalarType&&(N=t.outputScalarType);var O=u.getPointData().getScalars().getNumberOfComponents(),_=new window[N](v[0]*v[1]*v[2]*O),L=i.a.newInstance({name:"Scalars",values:_,numberOfComponents:O}),P=o.a.newInstance();P.setDimensions(v),P.setOrigin(h),P.setSpacing(g),P.getPointData().setScalars(L),e.getIndexMatrix(u,P);var k=t.interpolationMode;t.usePermuteExecute=!1,t.optimization&&null==r&&1===t.slabSliceSpacingFraction&&t.interpolator.isSeparable()&&e.isPermutationMatrix(n)&&(t.usePermuteExecute=!0,e.canUseNearestNeighbor(n,m)&&(k=gi.NEAREST)),t.interpolator.setInterpolationMode(k);var R=hi.CLAMP;R=t.wrap?hi.REPEAT:R,R=t.mirror?hi.MIRROR:R,t.interpolator.setBorderMode(R);var j=.5*t.border;j=(j=R===hi.CLAMP?j:4294967294)>762939453125e-17?j:762939453125e-17,t.interpolator.setTolerance(j),t.interpolator.initialize(u),e.vtkImageResliceExecute(u,P),t.interpolator.releaseData(),s[0]=P,ki("Produced output")}else Pi("Invalid or missing input")},e.vtkImageResliceExecute=function(i,a){var o=i.getPointData().getScalars(),s=a.getPointData().getScalars(),u=s.getData(),l=a.getExtent(),c=n,f=Math.min(t.slabNumberOfSlices,1),d=t.slabSliceSpacingFraction,p=e.isPerspectiveMatrix(c),h=o.getData(),g=o.getDataType(),m=o.getNumberOfComponents(),v=t.interpolator.getComponentOffset(),y=t.interpolator.getBorderMode(),b=i.getDimensions(),M=[0,b[0]-1,0,b[1]-1,0,b[2]-1],x=[0,0,0];x[0]=o.getNumberOfComponents(),x[1]=x[0]*b[0],x[2]=x[1]*b[1];var w=b[0]*b[1]*b[2];v>0&&v+m<x[0]&&(h=h.subarray(1*v));var A=gi.NEAREST;t.interpolator.isA("vtkImageInterpolator")&&(A=t.interpolator.getInterpolationMode());for(var T=0!==t.scalarShift||1!==t.scalarScale,C=A===gi.NEAREST&&y===hi.CLAMP&&!(null!=r||p||T)&&g===s.getDataType()&&w===o.getNumberOfTuples()&&!0===t.border&&f<=1,S=s.getDataType(),D=s.getNumberOfComponents(),I=[0,0,0,0],E=[0,0,0,0],N=[0,0,0,0],O=[0,0,0,0],_=0;_<4;++_)I[_]=c[0+_],E[_]=c[4+_],N[_]=c[8+_],O[_]=c[12+_];var L=t.interpolator.getOrigin(),P=t.interpolator.getSpacing(),k=[1/P[0],1/P[1],1/P[2]],R=null;C||(R=new Float64Array(m*(l[1]-l[0]+f)));var j=window[g].from(t.backgroundColor),B=A>gi.LINEAR||f>1&&t.slabMode===Li.SUM,z=e.getConversionFunc(g,S,t.scalarShift,t.scalarScale,B),F=e.getSetPixelsFunc(S,1,D,u),V=e.getCompositeFunc(t.slabMode,t.slabTrapezoidIntegration),U=l[2]-1,G=l[4]-1,W=[0,0,0,0],H=[0,0,0,0],Y=_i.newInstance();Y.initialize(a,l,t.stencil,null);for(var Q=Y.getScalars(a,0);!Y.isAtEnd();Y.nextSpan()){var q=Y.spanEndId()-Y.getId();if(u=Q.subarray(1*Y.getId()*D),Y.isInStencil()){var X=Y.getIndex();X[2]>G&&(G=X[2],W[0]=O[0]+G*N[0],W[1]=O[1]+G*N[1],W[2]=O[2]+G*N[2],W[3]=O[3]+G*N[3],U=l[2]-1),X[1]>U&&(U=X[1],H[0]=W[0]+U*E[0],H[1]=W[1]+U*E[1],H[2]=W[2]+U*E[2],H[3]=W[3]+U*E[3]);var K=X[0],Z=K+q-1;if(C){for(var J=h,$=u,ee=1*x[0],te=1*x[1],ne=1*x[2],re=M[1]-M[0]+1,ie=M[3]-M[2]+1,ae=M[5]-M[4]+1,oe=K-1,se=!1,ue=1*m,le=K;le<=Z;le++){var ce=[H[0]+le*I[0],H[1]+le*I[1],H[2]+le*I[2]],fe=bi(ce[0])-M[0],de=bi(ce[1])-M[2],pe=bi(ce[2])-M[4];if(fe>=0&&fe<re&&de>=0&&de<ie&&pe>=0&&pe<ae){se||(se=!0,$=u=F(u,j,D,le-K)),oe=le;var he=fe*ee+de*te+pe*ne;switch(ue){case 1:$[0]=J[he];break;case 2:case 3:case 4:case 8:case 12:case 16:$.set(J.subarray(he,he+ue));break;default:var ge=0;do{$[ge]=J[he++]}while(++ge!==ue)}$=$.subarray(ue)}else if(se)break}u=F(u=$,j,D,Z-oe)}else for(var me=1,ve=1,ye=K,be=K,Me=R;ye<=Z;){for(;be<=Z&&ve===me;be++){var xe=[H[0]+be*I[0],H[1]+be*I[1],H[2]+be*I[2],H[3]+be*I[3]],we=[0,0,0,0],Ae=xe;ve=!1;for(var Te=0,Ce=Me,Se=0;Se<f;++Se){if(f>1){var De=Se-.5*(f-1);De*=d,we[0]=xe[0]+De*N[0],we[1]=xe[1]+De*N[1],we[2]=xe[2]+De*N[2],we[3]=xe[3]+De*N[3],Ae=we}if(p){var Ie=1/Ae[3];Ae[0]*=Ie,Ae[1]*=Ie,Ae[2]*=Ie}null!==r&&e.applyTransform(r,Ae,L,k),t.interpolator.checkBoundsIJK(Ae)&&(Te++,ve=1,t.interpolator.interpolateIJK(Ae,Ce),Ce=Ce.subarray(m))}Te>1&&V(Me,m,Te),Me=Me.subarray(m),me=be>K?me:ve}var Ee=be-1-(ve!==me),Ne=Ee-ye+1;me?(T&&e.rescaleScalars(R,m,Z-K+1,t.scalarShift,t.scalarScale),u=z(u,R.subarray(ye*m),D,Ne)):u=F(u,j,D,Ne),ye+=Ne,me=ve}}else u=F(u,j,D,q)}},e.getIndexMatrix=function(i,a){null===n&&(n=Ye.c.create());var o=i.getOrigin(),s=i.getSpacing(),u=a.getOrigin(),l=a.getSpacing(),c=Ye.c.create(),f=Ye.c.create(),d=Ye.c.create();r&&(r=null),t.resliceAxes&&Ye.c.copy(c,t.resliceAxes),t.resliceTransform;for(var p=e.isIdentityMatrix(c),h=0;h<3;h++)(null!==r||s[h]===l[h]&&o[h]===u[h])&&(null===r||1===l[h]&&0===u[h])||(p=!1),f[4*h+h]=1/s[h],f[12+h]=-o[h]/s[h],d[4*h+h]=l[h],d[12+h]=u[h];return p||(Ye.c.multiply(c,c,d),null==r&&Ye.c.multiply(c,f,c)),Ye.c.copy(n,c),n},e.getAutoCroppedOutputBounds=function(e){var n=e.getOrigin(),r=e.getSpacing(),i=e.getDimensions(),a=[0,i[0]-1,0,i[1]-1,0,i[2]-1],o=Ye.c.create();t.resliceAxes&&Ye.c.invert(o,t.resliceAxes);for(var s=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE],u=[0,0,0,0],l=0;l<8;++l){u[0]=n[0]+a[l%2]*r[0],u[1]=n[1]+a[2+Math.floor(l/2)%2]*r[1],u[2]=n[2]+a[4+Math.floor(l/4)%2]*r[2],u[3]=1,t.resliceTransform,Ye.f.transformMat4(u,u,o);var c=1/u[3];u[0]*=c,u[1]*=c,u[2]*=c;for(var f=0;f<3;++f)u[f]>s[2*f+1]&&(s[2*f+1]=u[f]),u[f]<s[2*f]&&(s[2*f]=u[f])}return s},e.getDataTypeMinMax=function(e){switch(e){case"Int8Array":return{min:-128,max:127};case"Uint8Array":case"Uint8ClampedArray":default:return{min:0,max:255};case"Int16Array":return{min:-32768,max:32767};case"Uint16Array":return{min:0,max:65535};case"Int32Array":return{min:-2147483648,max:2147483647};case"Uint32Array":return{min:0,max:4294967295};case"Float32Array":case"Float64Array":return{min:-1.2e38,max:1.2e38}}},e.clamp=function(e,t,n,r,i,a){for(var o=r*n,s=0;s<o;++s)e[s]=Mi(t[s],i,a);return e.subarray(r*n)},e.convert=function(e,t,n,r){for(var i=r*n,a=0;a<i;++a)e[a]=Math.round(t[a]);return e.subarray(r*n)},e.getConversionFunc=function(t,n,r,i,a){var o=a;if(n!==Tt.b.FLOAT&&n!==Tt.b.DOUBLE&&!a){var s=e.getDataTypeMinMax(t),u=(s.min+r)*i,l=(s.max+r)*i,c=e.getDataTypeMinMax(n),f=c.min,d=c.max;if(u>l){var p=l;l=u,u=p}o=u<f||l>d}if(o&&n!==Tt.b.FLOAT&&n!==Tt.b.DOUBLE){var h=e.getDataTypeMinMax(n);return function(t,n,r,i){return e.clamp(t,n,r,i,h.min,h.max)}}return e.convert},e.set=function(e,t,n,r){for(var i=t.subarray(0,n),a=0;a<r;++a)e.set(i,a*n);return e.subarray(n*r)},e.set1=function(e,t,n,r){return e.fill(t[0],0,r),e.subarray(r)},e.getSetPixelsFunc=function(t,n,r,i){return 1===r?e.set1:e.set},e.getCompositeFunc=function(e,t){return null},e.applyTransform=function(e,t,n,r){t[3]=1,Ye.f.transformMat4(t,t,e),t[0]-=n[0],t[1]-=n[1],t[2]-=n[2],t[0]*=r[0],t[1]*=r[1],t[2]*=r[2]},e.rescaleScalars=function(e,t,n,r,i){for(var a=n*t,o=0;o<a;++o)e[o]=(e[o]+r)*i},e.isPermutationMatrix=function(e){for(var t=0;t<3;t++)if(0!==e[4*t+3])return!1;if(1!==e[15])return!1;for(var n=0;n<3;n++){for(var r=0,i=0;i<3;i++)0!==e[4*n+i]&&r++;if(1!==r)return 0}return 1},e.isIdentityMatrix=function(e){for(var t=0;t<4;++t)for(var n=0;n<4;++n)if((t===n?1:0)!==e[4*n+t])return!1;return!0},e.isPerspectiveMatrix=function(e){return 0!==e[3]||0!==e[7]||0!==e[11]||1!==e[15]},e.canUseNearestNeighbor=function(e,t){for(var n=0;n<3;n++){var r=void 0;for(r=0;r<3&&0===e[4*r+n];r++);if(r>=3)return 0;var i=e[4*r+n],a=e[12+n];t[2*r]===t[2*r+1]&&(a+=i*t[2*n],i=0);var o=yi(i).error,s=yi(a).error;if(0!==o||0!==s)return 0}return 1}}(e,t)}var Bi=h.a.newInstance(ji,"vtkImageReslice"),zi={vtkAbstractImageInterpolator:Ci,vtkImageInterpolator:Ii,vtkImagePointDataIterator:_i,vtkImageReslice:{newInstance:Bi,extend:ji}},Fi=h.a.vtkErrorMacro;var Vi={implicitFunction:void 0,sampleDimensions:[50,50,50],modelBounds:[-1,1,-1,1,-1,1],pointType:"Float32Array"};function Ui(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Vi,n),h.a.obj(e,t),h.a.algo(e,t,1,1),h.a.setGetArray(e,t,["sampleDimensions"],3),h.a.setGetArray(e,t,["modelBounds"],6),function(e,t){t.classHierarchy.push("vtkSampleFunction");var n=Object.assign({},e);e.getMTime=function(){return t.implicitFunction&&t.implicitFunction.getMTime?Math.max(n.getMTime(),t.implicitFunction.getMTime()):n.getMTime()},e.requestData=function(e,n){var r=t.implicitFunction;if(r){var a=[t.sampleDimensions[0],t.sampleDimensions[1],t.sampleDimensions[2]],s=a[0]*a[1]*a[2];if(s<1||a[1]<2||a[1]<2||a[2]<2)Fi("Bad volume dimensions");else{var u=o.a.newInstance(),l=[t.modelBounds[0],t.modelBounds[2],t.modelBounds[4]],c=[(t.modelBounds[1]-t.modelBounds[0])/(a[0]-1),(t.modelBounds[3]-t.modelBounds[2])/(a[1]-1),(t.modelBounds[5]-t.modelBounds[4])/(a[2]-1)],f=a[0]*a[1];u.setDimensions(a),u.setOrigin(l),u.setSpacing(c);var d=new window[t.pointType](s),p=i.a.newInstance({name:"Scalars",values:d,numberOfComponents:1});u.getPointData().setScalars(p);for(var h=0,g=[0,0,0],m=0;m<a[2];m++){g[2]=l[2]+m*c[2];for(var v=0;v<a[1];v++){g[1]=l[1]+v*c[1];for(var y=0;y<a[0];y++)g[0]=l[0]+y*c[0],h=r.evaluateFunction(g),d[y+v*a[0]+m*f]=h}}n[0]=u}}else Fi("An implicit function must be defined")}}(e,t)}var Gi={Core:zi,Hybrid:{vtkSampleFunction:{newInstance:h.a.newInstance(Ui,"vtkSampleFunction"),extend:Ui}}};var Wi={center:[0,0,0],rotationFactor:1,displayCenter:[0,0]};var Hi={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Wi,n),h.a.setGet(e,t,["rotationFactor"]),h.a.setGetArray(e,t,["displayCenter"],2),h.a.setGetArray(e,t,["center"],3),function(e,t){t.classHierarchy.push("vtkCompositeCameraManipulator"),e.computeDisplayCenter=function(e,n){var r=e.computeWorldToDisplay(n,t.center[0],t.center[1],t.center[2]);t.displayCenter[0]=r[0],t.displayCenter[1]=r[1]}}(e,t)}};var Yi={pinchEnabled:!0,panEnabled:!0,rotateEnabled:!0};var Qi={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Yi,n),h.a.set(e,t,["pinchEnabled","panEnabled","rotateEnabled"]),h.a.setGet(e,t,["interactorStyle"]),function(e,t){t.classHierarchy.push("vtkCompositeGestureManipulator"),e.startInteraction=function(){},e.endInteraction=function(){},e.onStartPinch=function(e,t){},e.onStartRotate=function(e,t){},e.onStartPan=function(e,t){},e.onPinch=function(e,t,n){},e.onRotate=function(e,t,n){},e.onPan=function(e,t,n){},e.onEndPinch=function(e){},e.onEndRotate=function(e){},e.onEndPan=function(e){},e.isPinchEnabled=function(){return t.pinchEnabled},e.isPanEnabled=function(){return t.panEnabled},e.isRotateEnabled=function(){return t.rotateEnabled}}(e,t)}};var qi={button:1,shift:!1,control:!1,alt:!1,dragEnabled:!0,scrollEnabled:!1};var Xi={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,qi,n),h.a.setGet(e,t,["button","shift","control","alt"]),h.a.set(e,t,["dragEnabled","scrollEnabled"]),function(e,t){t.classHierarchy.push("vtkCompositeMouseManipulator"),e.startInteraction=function(){},e.endInteraction=function(){},e.onButtonDown=function(e,t,n){},e.onButtonUp=function(e){},e.onMouseMove=function(e,t,n){},e.onKeyUp=function(e,t){},e.onKeyDown=function(e,t){},e.onStartScroll=function(e,t,n){},e.onScroll=function(e,t,n){},e.onEndScroll=function(e){},e.isDragEnabled=function(){return t.dragEnabled},e.isScrollEnabled=function(){return t.scrollEnabled}}(e,t)}},Ki={Unknown:0,LeftController:1,RightController:2},Zi={Unknown:0,Trigger:1,TrackPad:2,Grip:3,ApplicationMenu:4},Ji={Device:Ki,Input:Zi};var $i={};var ea={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,$i,n),h.a.setGet(e,t,["device","input"]),function(e,t){t.classHierarchy.push("vtkCompositeVRManipulator"),e.onButton3D=function(e,t,n,r,i,a){},e.onMove3D=function(e,t,n,r,i,a){}}(e,t)},Device:Ki,Input:Zi},ta=Ji.Device,na=Ji.Input,ra=h.a.vtkWarningMacro,ia=h.a.vtkErrorMacro,aa=h.a.normalizeWheel,oa=h.a.vtkOnceErrorMacro,sa={"OpenVR Gamepad":[na.TrackPad,na.Trigger,na.Grip,na.ApplicationMenu]},ua=["StartAnimation","Animation","EndAnimation","StartMouseMove","MouseMove","EndMouseMove","LeftButtonPress","LeftButtonRelease","MiddleButtonPress","MiddleButtonRelease","RightButtonPress","RightButtonRelease","KeyPress","KeyDown","KeyUp","StartMouseWheel","MouseWheel","EndMouseWheel","StartPinch","Pinch","EndPinch","StartPan","Pan","EndPan","StartRotate","Rotate","EndRotate","Button3D","Move3D","StartInteractionEvent","InteractionEvent","EndInteractionEvent"];function la(e){return e.stopPropagation(),e.preventDefault(),!1}var ca={renderWindow:null,interactorStyle:null,picker:null,pickingManager:null,initialized:!1,enabled:!1,enableRender:!0,currentRenderer:null,lightFollowCamera:!0,desiredUpdateRate:30,stillUpdateRate:2,container:null,view:null,recognizeGestures:!0,currentGesture:"Start",animationRequest:null,lastFrameTime:.1,wheelTimeoutID:0,moveTimeoutID:0,lastGamepadValues:{}};function fa(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ca,n),h.a.obj(e,t),h.a.event(e,t,"RenderEvent"),ua.forEach(function(n){return h.a.event(e,t,n)}),h.a.get(e,t,["initialized","container","enabled","enableRender","interactorStyle","lastFrameTime","view"]),h.a.setGet(e,t,["lightFollowCamera","enabled","recognizeGestures","desiredUpdateRate","stillUpdateRate","picker"]),function(e,t){t.classHierarchy.push("vtkRenderWindowInteractor");var n=new Set;function r(n,r){t.currentRenderer=e.findPokedRenderer(n,r)}function i(e){var n=t.container.getBoundingClientRect(),i=t.view.getCanvas(),a=i.width/n.width,o=i.height/n.height,s={x:a*(e.clientX-n.left),y:o*(n.height-e.clientY+n.top),z:0};return r(s.x,s.y),s}function a(e){for(var t={},n=0;n<e.length;n++){var r=e[n];t[r.identifier]=i(r)}return t}function o(e){return{controlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey}}function s(e){var t=o(e),n={key:e.key,keyCode:e.charCode};return Object.assign(n,t),n}function u(n){var r=document.querySelector("body"),i=n?"addEventListener":"removeEventListener",a=n?"removeEventListener":"addEventListener";t.container&&t.container[a]("mousemove",e.handleMouseMove),r[i]("mouseup",e.handleMouseUp),r[i]("mouseleave",e.handleMouseUp),r[i]("mousemove",e.handleMouseMove),r[i]("touchend",e.handleTouchEnd,!1),r[i]("touchcancel",e.handleTouchEnd,!1),r[i]("touchmove",e.handleTouchMove,!1)}function l(){t.view&&t.enabled&&t.enableRender&&(t.inRender=!0,t.view.traverseAllPasses(),t.inRender=!1),e.invokeRenderEvent()}e.start=function(){(t.initialized||(e.initialize(),t.initialized))&&e.startEventLoop()},e.setRenderWindow=function(e){ia("you want to call setView(view) instead of setRenderWindow on a vtk.js interactor")},e.setInteractorStyle=function(n){t.interactorStyle!==n&&(null!=t.interactorStyle&&t.interactorStyle.setInteractor(null),t.interactorStyle=n,null!=t.interactorStyle&&t.interactorStyle.getInteractor()!==e&&t.interactorStyle.setInteractor(e))},e.initialize=function(){t.initialized=!0,e.enable(),e.render()},e.enable=function(){return e.setEnabled(!0)},e.disable=function(){return e.setEnabled(!1)},e.startEventLoop=function(){return ra("empty event loop")},e.getCurrentRenderer=function(){return t.currentRenderer?t.currentRenderer:(r(0,0),t.currentRenderer)},e.bindEvents=function(n){t.container=n,n.addEventListener("contextmenu",la),n.addEventListener("wheel",e.handleWheel),n.addEventListener("DOMMouseScroll",e.handleWheel),n.addEventListener("mousemove",e.handleMouseMove),n.addEventListener("mousedown",e.handleMouseDown),document.querySelector("body").addEventListener("keypress",e.handleKeyPress),document.querySelector("body").addEventListener("keydown",e.handleKeyDown),document.querySelector("body").addEventListener("keyup",e.handleKeyUp),n.addEventListener("touchstart",e.handleTouchStart,!1)},e.unbindEvents=function(){u(!1),t.container.removeEventListener("contextmenu",la),t.container.removeEventListener("wheel",e.handleWheel),t.container.removeEventListener("DOMMouseScroll",e.handleWheel),t.container.removeEventListener("mousemove",e.handleMouseMove),t.container.removeEventListener("mousedown",e.handleMouseDown),document.querySelector("body").removeEventListener("keypress",e.handleKeyPress),document.querySelector("body").removeEventListener("keydown",e.handleKeyDown),document.querySelector("body").removeEventListener("keyup",e.handleKeyUp),t.container.removeEventListener("touchstart",e.handleTouchStart),t.container=null},e.handleKeyPress=function(t){var n=s(t);e.keyPressEvent(n)},e.handleKeyDown=function(t){var n=s(t);e.keyDownEvent(n)},e.handleKeyUp=function(t){var n=s(t);e.keyUpEvent(n)},e.handleMouseDown=function(t){u(!0),t.stopPropagation(),t.preventDefault();var n={position:i(t)},r=o(t);switch(Object.assign(n,r),t.which){case 1:e.leftButtonPressEvent(n);break;case 2:e.middleButtonPressEvent(n);break;case 3:e.rightButtonPressEvent(n);break;default:ia("Unknown mouse button pressed: ".concat(t.which))}},e.requestAnimation=function(r){void 0!==r?n.has(r)?ra("requester is already registered for animating"):(n.add(r),1===n.size&&(t.lastFrameTime=.1,t.lastFrameStart=Date.now(),t.animationRequest=requestAnimationFrame(e.handleAnimation),e.startAnimationEvent())):ia("undefined requester, can not start animating")},e.isAnimating=function(){return t.vrAnimation||null!==t.animationRequest},e.cancelAnimation=function(r){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n.has(r))n.delete(r),t.animationRequest&&0===n.size&&(cancelAnimationFrame(t.animationRequest),t.animationRequest=null,e.endAnimationEvent(),e.render());else if(!i){var a=r&&r.getClassName?r.getClassName():r;ra("".concat(a," did not request an animation"))}},e.switchToVRAnimation=function(){t.animationRequest&&(cancelAnimationFrame(t.animationRequest),t.animationRequest=null),t.vrAnimation=!0},e.returnFromVRAnimation=function(){t.vrAnimation=!1},e.updateGamepads=function(n){for(var r=navigator.getGamepads(),i=0;i<r.length;++i){var a=r[i];if(a&&a.displayId===n){a.index in t.lastGamepadValues||(t.lastGamepadValues[a.index]={buttons:{}});for(var o=0;o<a.buttons.length;++o)o in t.lastGamepadValues[a.index].buttons||(t.lastGamepadValues[a.index].buttons[o]=!1),t.lastGamepadValues[a.index].buttons[o]!==a.buttons[o].pressed&&(e.button3DEvent({gamepad:a,position:a.pose.position,orientation:a.pose.orientation,pressed:a.buttons[o].pressed,device:"left"===a.hand?ta.LeftController:ta.RightController,input:sa[a.id]&&sa[a.id][o]?sa[a.id][o]:na.Trigger}),t.lastGamepadValues[a.index].buttons[o]=a.buttons[o].pressed),t.lastGamepadValues[a.index].buttons[o]&&e.move3DEvent({gamepad:a,position:a.pose.position,orientation:a.pose.orientation,device:"left"===a.hand?ta.LeftController:ta.RightController})}}},e.handleMouseMove=function(n){var r={position:i(n)},a=o(n);Object.assign(r,a),0===t.moveTimeoutID?e.startMouseMoveEvent(r):(e.mouseMoveEvent(r),clearTimeout(t.moveTimeoutID)),t.moveTimeoutID=setTimeout(function(){e.endMouseMoveEvent(),t.moveTimeoutID=0},200)},e.handleAnimation=function(){var n=Date.now();-1===t.FrameTime?t.lastFrameTime=.1:t.lastFrameTime=(n-t.lastFrameStart)/1e3,t.lastFrameTime=Math.max(.01,t.lastFrameTime),t.lastFrameStart=n,e.animationEvent(),l(),t.animationRequest=requestAnimationFrame(e.handleAnimation)},e.handleWheel=function(n){n.stopPropagation(),n.preventDefault();var r=aa(n),i=o(n);Object.assign(r,i),0===t.wheelTimeoutID?e.startMouseWheelEvent(r):(e.mouseWheelEvent(r),clearTimeout(t.wheelTimeoutID)),t.wheelTimeoutID=setTimeout(function(){e.endMouseWheelEvent(),t.wheelTimeoutID=0},200)},e.handleMouseUp=function(t){u(!1),t.stopPropagation(),t.preventDefault();var n={position:i(t)},r=o(t);switch(Object.assign(n,r),t.which){case 1:e.leftButtonReleaseEvent(n);break;case 2:e.middleButtonReleaseEvent(n);break;case 3:e.rightButtonReleaseEvent(n);break;default:ia("Unknown mouse button released: ".concat(t.which))}},e.handleTouchStart=function(n){if(u(!0),n.stopPropagation(),n.preventDefault(),t.recognizeGestures&&n.touches.length>1){var r=a(n.touches);if(2===n.touches.length){var o={position:i(n.touches[0]),shiftKey:!1,altKey:!1,controlKey:!1};e.leftButtonReleaseEvent(o)}e.recognizeGesture("TouchStart",r)}else{var s={position:i(n.touches[0]),shiftKey:!1,altKey:!1,controlKey:!1};e.leftButtonPressEvent(s)}},e.handleTouchMove=function(n){if(n.stopPropagation(),n.preventDefault(),t.recognizeGestures&&n.touches.length>1){var r=a(n.touches);e.recognizeGesture("TouchMove",r)}else{var o={position:i(n.touches[0]),shiftKey:!1,altKey:!1,controlKey:!1};e.mouseMoveEvent(o)}},e.handleTouchEnd=function(n){if(n.stopPropagation(),n.preventDefault(),t.recognizeGestures)if(0===n.touches.length)if(1===n.changedTouches.length){var r={position:i(n.changedTouches[0]),shiftKey:!1,altKey:!1,controlKey:!1};e.leftButtonReleaseEvent(r),u(!1)}else{var o=a(n.changedTouches);e.recognizeGesture("TouchEnd",o),u(!1)}else if(1===n.touches.length){var s=a(n.changedTouches);e.recognizeGesture("TouchEnd",s);var l={position:i(n.touches[0]),shiftKey:!1,altKey:!1,controlKey:!1};e.leftButtonPressEvent(l)}else{var c=a(n.touches);e.recognizeGesture("TouchMove",c)}else{var f={position:i(n.changedTouches[0]),shiftKey:!1,altKey:!1,controlKey:!1};e.leftButtonReleaseEvent(f),u(!1)}},e.setView=function(n){t.view!==n&&(t.view=n,t.view.getRenderable().setInteractor(e),e.modified())},e.findPokedRenderer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!t.view)return null;for(var r=t.view.getRenderable().getRenderersByReference(),i=null,a=null,o=null,s=r.length;s--;){var u=r[s];t.view.isInViewport(e,n,u)&&u.getInteractive()&&(o=u),null===i&&u.getInteractive()&&(i=u),null===a&&t.view.isInViewport(e,n,u)&&(a=u)}return null===o&&(o=i),null===o&&(o=a),null==o&&(o=r[0]),o},e.render=function(){null!==t.animationRequest||t.inRender||l()},ua.forEach(function(n){var r=n.charAt(0).toLowerCase()+n.slice(1);e["".concat(r,"Event")]=function(r){if(t.enabled)if(e.getCurrentRenderer()){var i={type:n,pokedRenderer:t.currentRenderer};Object.assign(i,r),e["invoke".concat(n)](i)}else oa("\n          Can not forward events without a current renderer on the interactor.\n        ")}}),e.recognizeGesture=function(n,r){if(!(Object.keys(r).length>2)){if(t.startingEventPositions||(t.startingEventPositions={}),"TouchStart"===n)return Object.keys(r).forEach(function(e){t.startingEventPositions[e]=r[e]}),void(t.currentGesture="Start");if("TouchEnd"===n)return"Pinch"===t.currentGesture&&(e.render(),e.endPinchEvent()),"Rotate"===t.currentGesture&&(e.render(),e.endRotateEvent()),"Pan"===t.currentGesture&&(e.render(),e.endPanEvent()),t.currentGesture="Start",void(t.startingEventPositions={});var i=0,a=[],o=[];Object.keys(r).forEach(function(e){a[i]=r[e],o[i]=t.startingEventPositions[e],i++});var s=Math.sqrt((o[0].x-o[1].x)*(o[0].x-o[1].x)+(o[0].y-o[1].y)*(o[0].y-o[1].y)),u=Math.sqrt((a[0].x-a[1].x)*(a[0].x-a[1].x)+(a[0].y-a[1].y)*(a[0].y-a[1].y)),l=f.degreesFromRadians(Math.atan2(o[1].y-o[0].y,o[1].x-o[0].x)),c=f.degreesFromRadians(Math.atan2(a[1].y-a[0].y,a[1].x-a[0].x)),d=c-l;c=c+180>=360?c-180:c+180,l=l+180>=360?l-180:l+180,Math.abs(c-l)<Math.abs(d)&&(d=c-l);var p=[];if(p[0]=(a[0].x-o[0].x+a[1].x-o[1].x)/2,p[1]=(a[0].y-o[0].y+a[1].y-o[1].y)/2,"TouchMove"===n)if("Start"===t.currentGesture){var h=.01*Math.sqrt(t.container.clientWidth*t.container.clientWidth+t.container.clientHeight*t.container.clientHeight);h<15&&(h=15);var g=Math.abs(u-s),m=3.1415926*u*Math.abs(d)/360,v=Math.sqrt(p[0]*p[0]+p[1]*p[1]);if(g>h&&g>m&&g>v){t.currentGesture="Pinch";var y={scale:1,touches:r};e.startPinchEvent(y)}else if(m>h&&m>v){t.currentGesture="Rotate";var b={rotation:0,touches:r};e.startRotateEvent(b)}else if(v>h){t.currentGesture="Pan";var M={translation:[0,0],touches:r};e.startPanEvent(M)}}else{if("Rotate"===t.currentGesture){var x={rotation:d,touches:r};e.rotateEvent(x)}if("Pinch"===t.currentGesture){var w={scale:u/s,touches:r};e.pinchEvent(w)}if("Pan"===t.currentGesture){var A={translation:p,touches:r};e.panEvent(A)}}}}}(e,t)}var da=h.a.newInstance(fa,"vtkRenderWindowInteractor"),pa=Object.assign({newInstance:da,extend:fa,handledEvents:ua},Ji),ha=h.a.vtkErrorMacro,ga=h.a.VOID;var ma={computeWorldToDisplay:function(e,t,n,r){return e.getRenderWindow().getViews()[0].worldToDisplay(t,n,r,e)},computeDisplayToWorld:function(e,t,n,r){return e.getRenderWindow().getViews()[0].displayToWorld(t,n,r,e)}};var va={enabled:!0,interactor:null,priority:0,processEvents:!0,subscribedEvents:[]};function ya(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,va,n),h.a.obj(e,t),h.a.event(e,t,"InteractionEvent"),h.a.event(e,t,"StartInteractionEvent"),h.a.event(e,t,"EndInteractionEvent"),h.a.get(e,t,["interactor","enabled"]),h.a.setGet(e,t,["priority","processEvents"]),function(e,t){t.classHierarchy.push("vtkInteractorObserver");var n=Object.assign({},e);function r(){for(;t.subscribedEvents.length;)t.subscribedEvents.pop().unsubscribe()}function i(){pa.handledEvents.forEach(function(n){e["handle".concat(n)]&&t.subscribedEvents.push(t.interactor["on".concat(n)](function(r){return t.processEvents?e["handle".concat(n)](r):ga},t.priority))})}e.setInteractor=function(n){n!==t.interactor&&(r(),t.interactor=n,n&&t.enabled&&i(),e.modified())},e.setEnabled=function(n){n!==t.enabled&&(r(),n&&(t.interactor?i():ha("\n          The interactor must be set before subscribing to events\n        ")),t.enabled=n,e.modified())},e.computeDisplayToWorld=function(e,n,r,i){return e?t.interactor.getView().displayToWorld(n,r,i,e):null},e.computeWorldToDisplay=function(e,n,r,i){return e?t.interactor.getView().worldToDisplay(n,r,i,e):null},e.setPriority=function(e){n.setPriority(e)&&t.interactor&&(r(),i())}}(e,t)}var ba=h.a.newInstance(ya,"vtkInteractorObserver"),Ma=Object.assign({newInstance:ba,extend:ya},ma),xa={IS_START:0,IS_NONE:0,IS_ROTATE:1,IS_PAN:2,IS_SPIN:3,IS_DOLLY:4,IS_CAMERA_POSE:11,IS_WINDOW_LEVEL:1024,IS_SLICE:1025},wa={States:xa},Aa=wa.States,Ta={Rotate:Aa.IS_ROTATE,Pan:Aa.IS_PAN,Spin:Aa.IS_SPIN,Dolly:Aa.IS_DOLLY,CameraPose:Aa.IS_CAMERA_POSE,WindowLevel:Aa.IS_WINDOW_LEVEL,Slice:Aa.IS_SLICE};var Ca={state:Aa.IS_NONE,handleObservers:1,autoAdjustCameraClippingRange:1};function Sa(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ca,n),Ma.extend(e,t,n),function(e,t){t.classHierarchy.push("vtkInteractorStyle"),Object.keys(Ta).forEach(function(n){h.a.event(e,t,"Start".concat(n,"Event")),e["start".concat(n)]=function(){t.state===Aa.IS_NONE&&(t.state=Ta[n],t.interactor.requestAnimation(e),e.invokeStartInteractionEvent({type:"StartInteractionEvent"}),e["invokeStart".concat(n,"Event")]({type:"Start".concat(n,"Event")}))},h.a.event(e,t,"End".concat(n,"Event")),e["end".concat(n)]=function(){t.state===Ta[n]&&(t.state=Aa.IS_NONE,t.interactor.cancelAnimation(e),e.invokeEndInteractionEvent({type:"EndInteractionEvent"}),e["invokeEnd".concat(n,"Event")]({type:"End".concat(n,"Event")}),t.interactor.render())}}),e.handleKeyPress=function(e){var n=t.interactor;switch(e.key){case"r":case"R":e.pokedRenderer.resetCamera(),n.render();break;case"w":case"W":e.pokedRenderer.getActors().forEach(function(e){e.getProperty().setRepresentationToWireframe()}),n.render();break;case"s":case"S":e.pokedRenderer.getActors().forEach(function(e){e.getProperty().setRepresentationToSurface()}),n.render();break;case"v":case"V":e.pokedRenderer.getActors().forEach(function(e){e.getProperty().setRepresentationToPoints()}),n.render()}}}(e,t)}var Da=h.a.newInstance(Sa,"vtkInteractorStyle"),Ia=Object.assign({newInstance:Da,extend:Sa},wa),Ea=h.a.vtkDebugMacro,Na=Ia.States,Oa={type:"StartInteractionEvent"},_a={type:"InteractionEvent"},La={type:"EndInteractionEvent"};function Pa(e,t,n,r,i,a){var o=e.getActiveCamera(),s=o.getFocalPoint(),u=(s=t.getInteractorStyle().computeWorldToDisplay(e,s[0],s[1],s[2]))[2],l=t.getInteractorStyle().computeDisplayToWorld(e,n,r,u),c=t.getInteractorStyle().computeDisplayToWorld(e,i,a,u),f=[c[0]-l[0],c[1]-l[1],c[2]-l[2]];s=o.getFocalPoint();var d=o.getPosition();o.setFocalPoint(f[0]+s[0],f[1]+s[1],f[2]+s[2]),o.setPosition(f[0]+d[0],f[1]+d[1],f[2]+d[2])}var ka={dollyToPosition:function(e,t,n,r){var i=n.getActiveCamera();if(i.getParallelProjection()){var a=r.getView().getSize(),o=a[0]/2,s=a[1]/2,u=t.x,l=t.y;Pa(n,r,o,s,u,l),i.setParallelScale(i.getParallelScale()/e),Pa(n,r,u,l,o,s)}else{var c=i.getFocalPoint(),f=i.getViewPlaneNormal();c=r.getInteractorStyle().computeWorldToDisplay(n,c[0],c[1],c[2]);var d=r.getInteractorStyle().computeDisplayToWorld(n,t.x,t.y,c[2]);i.setFocalPoint(d[0],d[1],d[2]),i.dolly(e),n.resetCameraClippingRange();var p=i.getPosition();c=i.getFocalPoint();var h=[0,0,0],g=f[0]*(c[0]-p[0])+f[1]*(c[1]-p[1])+f[2]*(c[2]-p[2]);g/=Math.pow(f[0],2)+Math.pow(f[1],2)+Math.pow(f[2],2),h[0]=p[0]+f[0]*g,h[1]=p[1]+f[1]*g,h[2]=p[2]+f[2]*g,i.setFocalPoint(h[0],h[1],h[2]),n.resetCameraClippingRange()}},translateCamera:Pa,dollyByFactor:function(e,t,n){if(!Number.isNaN(n)){var r=t.getActiveCamera();r.getParallelProjection()?r.setParallelScale(r.getParallelScale()/n):(r.dolly(n),t.resetCameraClippingRange()),e.getLightFollowCamera()&&t.updateLightsGeometryToFollowCamera()}}};var Ra={currentManipulator:null,currentWheelManipulator:null,centerOfRotation:[0,0,0],rotationFactor:1};function ja(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ra,n),Ia.extend(e,t,n),h.a.setGet(e,t,["rotationFactor"]),h.a.setGetArray(e,t,["centerOfRotation"],3),function(e,t){t.classHierarchy.push("vtkInteractorStyleManipulator"),t.mouseManipulators=[],t.vrManipulators=[],t.gestureManipulators=[],t.currentManipulator=null,t.currentWheelManipulator=null,t.centerOfRotation=[0,0,0],t.rotationFactor=1,e.removeAllManipulators=function(){e.removeAllMouseManipulators(),e.removeAllVRManipulators(),e.removeAllGestureManipulators()},e.removeAllMouseManipulators=function(){t.mouseManipulators=[]},e.removeAllVRManipulators=function(){t.vrManipulators=[]},e.removeAllGestureManipulators=function(){t.gestureManipulators=[]},e.removeMouseManipulator=function(e){t.mouseManipulators.length>e&&(t.mouseManipulators[e]=null)},e.removeVRManipulator=function(e){t.vrManipulators.length>e&&(t.vrManipulators[e]=null)},e.removeGestureManipulator=function(e){t.gestureManipulators.length>e&&(t.gestureManipulators[e]=null)},e.getMouseManipulator=function(e){var n=null;return t.mouseManipulators.length>e&&(n=t.mouseManipulators[e]),n},e.getVRManipulator=function(e){var n=null;return t.vrManipulators.length>e&&(n=t.vrManipulators[e]),n},e.getGestureManipulator=function(e){var n=null;return t.gestureManipulators.length>e&&(n=t.gestureManipulators[e]),n},e.addMouseManipulator=function(e){var n=t.mouseManipulators.length;return t.mouseManipulators.push(e),n},e.addVRManipulator=function(e){var n=t.vrManipulators.length;return t.vrManipulators.push(e),n},e.addGestureManipulator=function(n){var r=t.gestureManipulators.length;return t.gestureManipulators.push(n),n.setInteractorStyle(e),r},e.getNumberOfMouseManipulators=function(){return t.mouseManipulators.length},e.getNumberOfVRManipulators=function(){return t.vrManipulators.length},e.getNumberOfGestureManipulators=function(){return t.gestureManipulators.length},e.resetCurrentManipulator=function(){t.currentManipulator=null,t.currentWheelManipulator=null},e.handleLeftButtonPress=function(n){t.previousPosition=n.position,e.onButtonDown(1,n)},e.handleMiddleButtonPress=function(n){t.previousPosition=n.position,e.onButtonDown(2,n)},e.handleRightButtonPress=function(n){t.previousPosition=n.position,e.onButtonDown(3,n)},e.handleButton3D=function(n){n&&(t.currentManipulator=e.findVRManipulator(n.device,n.input,n.pressed),t.currentManipulator?(t.currentManipulator.onButton3D(e,n.pokedRenderer,t.state,n.device,n.input,n.pressed),n.pressed?e.startCameraPose():e.endCameraPose()):Ea("No manipulator found"))},e.handleMove3D=function(n){t.currentManipulator&&t.state===Na.IS_CAMERA_POSE&&t.currentManipulator.onMove3D(e,n.pokedRenderer,t.state,n)},e.onButtonDown=function(n,r){t.currentManipulator||(t.currentManipulator=e.findMouseManipulator(n,r.shiftKey,r.controlKey,r.altKey),t.currentManipulator?(t.currentManipulator.setCenter&&t.currentManipulator.setCenter(t.centerOfRotation),t.currentManipulator.setRotationFactor&&t.currentManipulator.setRotationFactor(t.rotationFactor),t.currentManipulator.startInteraction(),t.currentManipulator.onButtonDown(t.interactor,r.pokedRenderer,r.position),t.interactor.requestAnimation(e.onButtonDown),e.invokeStartInteractionEvent(Oa)):Ea("No manipulator found"))},e.findMouseManipulator=function(e,n,r,i){for(var a=null,o=t.mouseManipulators.length;o--;){var s=t.mouseManipulators[o];s&&s.getButton()===e&&s.getShift()===n&&s.getControl()===r&&s.getAlt()===i&&s.isDragEnabled()&&(a=s)}return a},e.findVRManipulator=function(e,n){for(var r=null,i=t.vrManipulators.length;i--;){var a=t.vrManipulators[i];a&&a.getDevice()===e&&a.getInput()===n&&(r=a)}return r},e.handleLeftButtonRelease=function(){e.onButtonUp(1)},e.handleMiddleButtonRelease=function(){e.onButtonUp(2)},e.handleRightButtonRelease=function(){e.onButtonUp(3)},e.onButtonUp=function(n){t.currentManipulator&&t.currentManipulator.getButton&&t.currentManipulator.getButton()===n&&(t.currentManipulator.onButtonUp(t.interactor),t.currentManipulator.endInteraction(),t.currentManipulator=null,t.interactor.cancelAnimation(e.onButtonDown),e.invokeEndInteractionEvent(La))},e.handleStartMouseWheel=function(n){if(!t.currentWheelManipulator){for(var r=null,i=t.mouseManipulators.length;i--;){var a=t.mouseManipulators[i];a.isScrollEnabled()&&a.getShift()===n.shiftKey&&a.getControl()===n.controlKey&&a.getAlt()===n.altKey&&(r=a)}r?(t.currentWheelManipulator=r,t.currentWheelManipulator.onStartScroll(t.interactor,n.pokedRenderer,n.spinY),t.currentWheelManipulator.startInteraction(),t.interactor.requestAnimation(e.handleStartMouseWheel),e.invokeStartInteractionEvent(Oa)):Ea("No manipulator found")}},e.handleEndMouseWheel=function(){t.currentWheelManipulator&&t.currentWheelManipulator.onEndScroll&&(t.currentWheelManipulator.onEndScroll(t.interactor),t.currentWheelManipulator.endInteraction(),t.currentWheelManipulator=null,t.interactor.cancelAnimation(e.handleStartMouseWheel),e.invokeEndInteractionEvent(La))},e.handleMouseWheel=function(n){t.currentWheelManipulator&&t.currentWheelManipulator.onScroll&&(t.currentWheelManipulator.onScroll(t.interactor,n.pokedRenderer,n.spinY),e.invokeInteractionEvent(_a))},e.handleMouseMove=function(n){t.currentManipulator&&t.currentManipulator.onMouseMove&&(t.currentManipulator.onMouseMove(t.interactor,n.pokedRenderer,n.position),e.invokeInteractionEvent(_a))},e.handleKeyPress=function(n){t.mouseManipulators.filter(function(e){return e.onKeyDown}).forEach(function(r){r.onKeyDown(t.interactor,n.key),e.invokeInteractionEvent(_a)})},e.handleKeyUp=function(n){t.mouseManipulators.filter(function(e){return e.onKeyUp}).forEach(function(r){r.onKeyUp(t.interactor,n.key),e.invokeInteractionEvent(_a)})},e.handleStartPinch=function(n){e.startDolly();for(var r=t.gestureManipulators.length;r--;){var i=t.gestureManipulators[r];i.isPinchEnabled()&&(i.onStartPinch(t.interactor,n.scale),i.startInteraction())}t.interactor.requestAnimation(e.handleStartPinch),e.invokeStartInteractionEvent(Oa)},e.handleEndPinch=function(){e.endDolly();for(var n=t.gestureManipulators.length;n--;){var r=t.gestureManipulators[n];r.isPinchEnabled()&&(r.onEndPinch(t.interactor),r.endInteraction())}t.interactor.cancelAnimation(e.handleStartPinch),e.invokeEndInteractionEvent(La)},e.handleStartRotate=function(n){e.startRotate();for(var r=t.gestureManipulators.length;r--;){var i=t.gestureManipulators[r];i.isRotateEnabled()&&(i.onStartRotate(t.interactor,n.rotation),i.startInteraction())}t.interactor.requestAnimation(e.handleStartRotate),e.invokeStartInteractionEvent(Oa)},e.handleEndRotate=function(){e.endRotate();for(var n=t.gestureManipulators.length;n--;){var r=t.gestureManipulators[n];r.isRotateEnabled()&&(r.onEndRotate(t.interactor),r.endInteraction())}t.interactor.cancelAnimation(e.handleStartRotate),e.invokeEndInteractionEvent(La)},e.handleStartPan=function(n){e.startPan();for(var r=t.gestureManipulators.length;r--;){var i=t.gestureManipulators[r];i.isPanEnabled()&&(i.onStartPan(t.interactor,n.translation),i.startInteraction())}t.interactor.requestAnimation(e.handleStartPan),e.invokeStartInteractionEvent(Oa)},e.handleEndPan=function(){e.endPan();for(var n=t.gestureManipulators.length;n--;){var r=t.gestureManipulators[n];r.isPanEnabled()&&(r.onEndPan(t.interactor),r.endInteraction())}t.interactor.cancelAnimation(e.handleStartPan),e.invokeEndInteractionEvent(La)},e.handlePinch=function(n){for(var r=t.gestureManipulators.length,i=0;r--;){var a=t.gestureManipulators[r];a.isPinchEnabled()&&(a.onPinch(t.interactor,n.pokedRenderer,n.scale),i++)}i&&e.invokeInteractionEvent(_a)},e.handlePan=function(n){for(var r=t.gestureManipulators.length,i=0;r--;){var a=t.gestureManipulators[r];a.isPanEnabled()&&(a.onPan(t.interactor,n.pokedRenderer,n.translation),i++)}i&&e.invokeInteractionEvent(_a)},e.handleRotate=function(n){for(var r=t.gestureManipulators.length,i=0;r--;){var a=t.gestureManipulators[r];a.isRotateEnabled()&&(a.onRotate(t.interactor,n.pokedRenderer,n.rotation),i++)}i&&e.invokeInteractionEvent(_a)}}(e,t)}var Ba=h.a.newInstance(ja,"vtkInteractorStyleManipulator"),za=Object.assign({newInstance:Ba,extend:ja},ka);var Fa={};function Va(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Fa,n),h.a.obj(e,t),Qi.extend(e,t,n),Hi.extend(e,t,n),function(e,t){t.classHierarchy.push("vtkGestureCameraManipulator"),e.onStartPinch=function(e,n){t.previousScale=n},e.onStartRotate=function(e,n){t.previousRotation=n},e.onStartPan=function(e,n){t.previousTranslation=n},e.onPinch=function(e,n,r){za.dollyByFactor(e,n,r/t.previousScale),t.previousScale=r},e.onPan=function(e,n,r){var i=n.getActiveCamera(),a=i.getFocalPoint(),o=(a=t.interactorStyle.computeWorldToDisplay(n,a[0],a[1],a[2]))[2],s=r,u=t.previousTranslation,l=t.interactorStyle.computeDisplayToWorld(n,a[0]+s[0]-u[0],a[1]+s[1]-u[1],o),c=t.interactorStyle.computeDisplayToWorld(n,a[0],a[1],o),f=[];f[0]=c[0]-l[0],f[1]=c[1]-l[1],f[2]=c[2]-l[2],a=i.getFocalPoint();var d=i.getPosition();i.setFocalPoint(f[0]+a[0],f[1]+a[1],f[2]+a[2]),i.setPosition(f[0]+d[0],f[1]+d[1],f[2]+d[2]),e.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera(),i.orthogonalizeViewUp(),t.previousTranslation=r},e.onRotate=function(e,n,r){var i=n.getActiveCamera();i.roll(r-t.previousRotation),i.orthogonalizeViewUp(),t.previousRotation=r}}(e,t)}var Ua={newInstance:h.a.newInstance(Va,"vtkGestureCameraManipulator"),extend:Va};var Ga={};function Wa(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ga,n),h.a.obj(e,t),Hi.extend(e,t,n),Xi.extend(e,t,n),function(e,t){t.classHierarchy.push("vtkMouseCameraSliceManipulator"),e.onButtonDown=function(e,n,r){t.previousPosition=r},e.onMouseMove=function(e,n,r){if(r){var i=r.y-t.previousPosition.y,a=n.getActiveCamera(),o=a.getClippingRange(),s=a.getDistance(),u=0;if(a.getParallelProjection())u=a.getParallelScale();else{var l=f.radiansFromDegrees(a.getViewAngle());u=2*s*Math.tan(.5*l)}(s+=i*u/e.getView().getViewportSize(n)[1])<o[0]&&(s=o[0]+.001*u),s>o[1]&&(s=o[1]-.001*u),a.setDistance(s),t.previousPosition=r}},e.onScroll=function(e,t,n){if(n){var r=1-n;r*=25;var i=t.getActiveCamera(),a=i.getClippingRange(),o=i.getDistance();(o+=r)<a[0]&&(o=a[0]),o>a[1]&&(o=a[1]),i.setDistance(o)}}}(e,t)}var Ha={newInstance:h.a.newInstance(Wa,"vtkMouseCameraSliceManipulator"),extend:Wa};var Ya={};function Qa(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ya,n),h.a.obj(e,t),Xi.extend(e,t,n),Hi.extend(e,t,n),function(e,t){t.classHierarchy.push("vtkMouseCameraTrackballRotateManipulator");var n=new Float64Array(3),r=new Float64Array(3),i=new Float64Array(3),a=new Float64Array(16),o=new Float64Array(3),s=new Float64Array(3),u=new Float64Array(3);e.onButtonDown=function(e,n,r){t.previousPosition=r},e.onMouseMove=function(e,l,c){if(c){var d=l.getActiveCamera(),p=d.getPosition(),h=d.getFocalPoint();Ye.c.identity(a);var g=t.center,m=t.rotationFactor;Ye.c.translate(a,a,g);var v=t.previousPosition.x-c.x,y=t.previousPosition.y-c.y,b=e.getView().getSize(),M=d.getViewUp();Ye.c.rotate(a,a,f.radiansFromDegrees(360*v/b[0]*m),M),f.cross(d.getDirectionOfProjection(),M,o),Ye.c.rotate(a,a,f.radiansFromDegrees(-360*y/b[1]*m),o),s[0]=-g[0],s[1]=-g[1],s[2]=-g[2],Ye.c.translate(a,a,s),Ye.e.transformMat4(n,p,a),Ye.e.transformMat4(r,h,a),u[0]=M[0]+p[0],u[1]=M[1]+p[1],u[2]=M[2]+p[2],Ye.e.transformMat4(i,u,a),d.setPosition(n[0],n[1],n[2]),d.setFocalPoint(r[0],r[1],r[2]),d.setViewUp(i[0]-n[0],i[1]-n[1],i[2]-n[2]),d.orthogonalizeViewUp(),l.resetCameraClippingRange(),e.getLightFollowCamera()&&l.updateLightsGeometryToFollowCamera(),t.previousPosition=c}}}(e,t)}var qa={newInstance:h.a.newInstance(Qa,"vtkMouseCameraTrackballRotateManipulator"),extend:Qa};var Xa={};function Ka(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Xa,n),h.a.obj(e,t),Hi.extend(e,t,n),Xi.extend(e,t,n),function(e,t){t.classHierarchy.push("vtkMouseCameraTrackballRollManipulator");var n=new Float64Array(3),r=new Float64Array(3),i=new Float64Array(3),a=new Float64Array(16),o=new Float64Array(3),s=new Float64Array(3),u=new Float64Array(3);e.onButtonDown=function(e,n,r){t.previousPosition=r},e.onMouseMove=function(l,c,d){if(d){var p=c.getActiveCamera(),h=p.getPosition(),g=p.getFocalPoint(),m=p.getViewUp();n[0]=g[0]-h[0],n[1]=g[1]-h[1],n[2]=g[2]-h[2],e.computeDisplayCenter(l.getInteractorStyle(),c);var v=t.previousPosition.x-t.displayCenter[0],y=d.x-t.displayCenter[0],b=t.previousPosition.y-t.displayCenter[1],M=d.y-t.displayCenter[1];if(!(0===y&&0===M||0===v&&0===b)){var x=f.degreesFromRadians((v*M-b*y)/(Math.sqrt(v*v+b*b)*Math.sqrt(y*y+M*M))),w=t.center;Ye.c.identity(a),i[0]=-w[0],i[1]=-w[1],i[2]=-w[2],Ye.c.translate(a,a,w),Ye.c.rotate(a,a,f.radiansFromDegrees(x),n),Ye.c.translate(a,a,i),Ye.e.transformMat4(o,h,a),Ye.e.transformMat4(s,g,a),r[0]=m[0]+h[0],r[1]=m[1]+h[1],r[2]=m[2]+h[2],Ye.e.transformMat4(u,r,a),p.setPosition(o[0],o[1],o[2]),p.setFocalPoint(s[0],s[1],s[2]),p.setViewUp(u[0]-o[0],u[1]-o[1],u[2]-o[2]),p.orthogonalizeViewUp(),c.resetCameraClippingRange(),l.getLightFollowCamera()&&c.updateLightsGeometryToFollowCamera(),t.previousPosition=d}}}}(e,t)}var Za={newInstance:h.a.newInstance(Ka,"vtkMouseCameraTrackballRollManipulator"),extend:Ka};function Ja(e){return e*e}var $a={};function eo(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,$a,n),h.a.obj(e,t),Xi.extend(e,t,n),Hi.extend(e,t,n),function(e,t){t.classHierarchy.push("vtkMouseCameraTrackballMultiRotateManipulator");var n=qa.newInstance(),r=Za.newInstance(),i=null;e.onButtonDown=function(t,a,o){var s,u,l=t.getView().getSize(),c=[.5*l[0],.5*l[1]],f=.9*((s=c[0])<(u=c[1])?u:s),d=Ja(c[0]-o.x)+Ja(c[1]-o.y);(i=f*f>d?n:r).setButton(e.getButton()),i.setShift(e.getShift()),i.setControl(e.getControl()),i.setCenter(e.getCenter()),i.onButtonDown(t,o)},e.onButtonUp=function(e){i&&i.onButtonUp(e)},e.onMouseMove=function(e,t,n){i&&i.onMouseMove(e,t,n)}}(e,t)}var to={newInstance:h.a.newInstance(eo,"vtkMouseCameraTrackballMultiRotateManipulator"),extend:eo};var no={};function ro(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,no,n),h.a.obj(e,t),Hi.extend(e,t,n),Xi.extend(e,t,n),function(e,t){t.classHierarchy.push("vtkMouseCameraTrackballPanManipulator"),e.onButtonDown=function(e,n,r){t.previousPosition=r},e.onMouseMove=function(e,n,r){if(r){var i=r,a=t.previousPosition;t.previousPosition=r;var o=n.getActiveCamera(),s=o.getPosition(),u=o.getFocalPoint();if(o.getParallelProjection()){o.orthogonalizeViewUp();var l=o.getViewUp(),c=o.getViewPlaneNormal(),d=[0,0,0];f.cross(c,l,d);var p=e.getView().getSize()[1],h=(i.x-a.x)/p,g=(a.y-i.y)/p,m=o.getParallelScale();g*=2*m;var v=d[0]*(h*=2*m)+l[0]*g;s[0]+=v,u[0]+=v,v=d[1]*h+l[1]*g,s[1]+=v,u[1]+=v,v=d[2]*h+l[2]*g,s[2]+=v,u[2]+=v,o.setPosition(s[0],s[1],s[2]),o.setFocalPoint(u[0],u[1],u[2])}else{var y=t.center,b=e.getInteractorStyle(),M=b.computeWorldToDisplay(n,y[0],y[1],y[2])[2],x=b.computeDisplayToWorld(n,i.x,i.y,M),w=b.computeDisplayToWorld(n,a.x,a.y,M),A=[s[0]+(w[0]-x[0]),s[1]+(w[1]-x[1]),s[2]+(w[2]-x[2])],T=[u[0]+(w[0]-x[0]),u[1]+(w[1]-x[1]),u[2]+(w[2]-x[2])];o.setPosition(A[0],A[1],A[2]),o.setFocalPoint(T[0],T[1],T[2])}n.resetCameraClippingRange(),e.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera()}}}(e,t)}var io={newInstance:h.a.newInstance(ro,"vtkMouseCameraTrackballPanManipulator"),extend:ro};var ao={zoomScale:0};function oo(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ao,n),h.a.obj(e,t),Xi.extend(e,t,n),Hi.extend(e,t,n),function(e,t){t.classHierarchy.push("vtkMouseCameraTrackballZoomManipulator"),e.onButtonDown=function(e,n,r){t.previousPosition=r;var i=e.getView().getSize(),a=n.getActiveCamera();if(a.getParallelProjection())t.zoomScale=1.5/i[1];else{var o=a.getClippingRange();t.zoomScale=o[1]/i[1]*1.5}},e.onMouseMove=function(e,n,r){if(r){var i=t.previousPosition.y-r.y,a=n.getActiveCamera();if(a.getParallelProjection()){var o=i*t.zoomScale;a.setParallelScale((1-o)*a.getParallelScale())}else{var s=a.getPosition(),u=a.getFocalPoint(),l=a.getDirectionOfProjection(),c=i*t.zoomScale,f=c*l[0];s[0]+=f,u[0]+=f,f=c*l[1],s[1]+=f,u[1]+=f,f=c*l[2],s[2]+=f,u[2]+=f,a.getFreezeFocalPoint()||a.setFocalPoint(u[0],u[1],u[2]),a.setPosition(s[0],s[1],s[2]),n.resetCameraClippingRange()}e.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera(),t.previousPosition=r}},e.onScroll=function(e,t,n){if(n){var r=t.getActiveCamera(),i=1-n/10;r.getParallelProjection()?r.setParallelScale(r.getParallelScale()/i):(r.dolly(i),t.resetCameraClippingRange()),e.getLightFollowCamera()&&t.updateLightsGeometryToFollowCamera()}}}(e,t)}var so={newInstance:h.a.newInstance(oo,"vtkMouseCameraTrackballZoomManipulator"),extend:oo};var uo={zoomPosition:null};function lo(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,uo,n),so.extend(e,t,n),function(e,t){t.classHierarchy.push("vtkMouseCameraTrackballZoomToMouseManipulator");var n=e.onButtonDown;e.onButtonDown=function(e,r,i){n(e,r,i),t.zoomPosition=i},e.onMouseMove=function(e,n,r){if(r){var i=(t.previousPosition.y-r.y)*t.zoomScale;za.dollyToPosition(1-i,t.zoomPosition,n,e),e.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera(),t.previousPosition=r}}}(e,t)}var co={newInstance:h.a.newInstance(lo,"vtkMouseCameraTrackballZoomToMouseManipulator"),extend:lo};var fo={horizontalListener:null,verticalListener:null,scrollListener:null};function po(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,fo,n),h.a.obj(e,t),Xi.extend(e,t,n),function(e,t){t.classHierarchy.push("vtkMouseRangeManipulator");var n=new Map;function r(e,t){return t*((e.max-e.min)/(e.step+1))}function i(e,t){var r=e.getValue(),i=r+t+n.get(e),a=i-e.min,o=Math.round(a/e.step);if(i=e.min+e.step*o,i=Math.max(i,e.min),(i=Math.min(i,e.max))!==r)e.setValue(i),n.set(e,0);else{var s=n.get(e);n.set(e,s+t),(i===e.min&&n.get(e)<0||i===e.max&&n.get(e)>0)&&n.set(e,0)}}e.setHorizontalListener=function(r,i,a,o,s){var u=Number.isFinite(o)?function(){return o}:o;t.horizontalListener={min:r,max:i,step:a,getValue:u,setValue:s},n.set(t.horizontalListener,0),e.modified()},e.setVerticalListener=function(r,i,a,o,s){var u=Number.isFinite(o)?function(){return o}:o;t.verticalListener={min:r,max:i,step:a,getValue:u,setValue:s},n.set(t.verticalListener,0),e.modified()},e.setScrollListener=function(r,i,a,o,s){var u=Number.isFinite(o)?function(){return o}:o;t.scrollListener={min:r,max:i,step:a,getValue:u,setValue:s},n.set(t.scrollListener,0),e.modified()},e.removeHorizontalListener=function(){t.verticalListener&&(n.delete(t.verticalListener),delete t.verticalListener,e.modified())},e.removeVerticalListener=function(){t.horizontalListener&&(n.delete(t.horizontalListener),delete t.horizontalListener,e.modified())},e.removeScrollListener=function(){t.scrollListener&&(n.delete(t.scrollListener),delete t.scrollListener,e.modified())},e.removeAllListeners=function(){e.removeHorizontalListener(),e.removeVerticalListener(),e.removeScrollListener()},e.onButtonDown=function(e,n,r){t.previousPosition=r},e.onMouseMove=function(e,n,a){if((t.verticalListener||t.horizontalListener)&&a){var o=e.getView().getViewportSize(n);if(t.horizontalListener){var s=(a.x-t.previousPosition.x)/o[0],u=r(t.horizontalListener,s);i(t.horizontalListener,u)}if(t.verticalListener){var l=(a.y-t.previousPosition.y)/o[1],c=r(t.verticalListener,l);i(t.verticalListener,c)}t.previousPosition=a}},e.onScroll=function(e,n,r){t.scrollListener&&r&&i(t.scrollListener,r*t.scrollListener.step)},e.onStartScroll=e.onScroll}(e,t)}var ho={newInstance:h.a.newInstance(po,"vtkMouseRangeManipulator"),extend:po};var go={device:Ki.RightController,input:Zi.TrackPad};function mo(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,go,n),h.a.obj(e,t),ea.extend(e,t,n),function(e,t){t.classHierarchy.push("vtkVRButtonPanManipulator"),e.onButton3D=function(e,t,n,r,i,a){a?e.startCameraPose():n===xa.IS_CAMERA_POSE&&e.endCameraPose()},e.onMove3D=function(e,t,n,r){if(n===xa.IS_CAMERA_POSE){var i=t.getActiveCamera(),a=i.getPhysicalTranslation(),o=.05*r.gamepad.axes[1]/i.getPhysicalScale(),s=i.physicalOrientationToWorldDirection(r.orientation);i.setPhysicalTranslation(a[0]+s[0]*o,a[1]+s[1]*o,a[2]+s[2]*o)}}}(e,t)}var vo=h.a.newInstance(mo,"vtkVRButtonPanManipulator"),yo=Object.assign({newInstance:vo,extend:mo}),bo={vtkCompositeCameraManipulator:Hi,vtkCompositeGestureManipulator:Qi,vtkCompositeMouseManipulator:Xi,vtkCompositeVRManipulator:ea,vtkGestureCameraManipulator:Ua,vtkMouseCameraSliceManipulator:Ha,vtkMouseCameraTrackballMultiRotateManipulator:to,vtkMouseCameraTrackballPanManipulator:io,vtkMouseCameraTrackballRollManipulator:Za,vtkMouseCameraTrackballRotateManipulator:qa,vtkMouseCameraTrackballZoomManipulator:so,vtkMouseCameraTrackballZoomToMouseManipulator:co,vtkMouseRangeManipulator:ho,vtkVRButtonPanManipulator:yo},Mo=[],xo={device:{},screen:window.orientation||0,supported:!!window.DeviceMotionEvent,update:!1},wo={"landscape-primary":90,"landscape-secondary":-90,"portrait-secondary":180,"portrait-primary":0};function Ao(e){xo.device=e,Number.isFinite(e.alpha)||(xo.supported=!1)}function To(){xo.screen=wo[window.screen.orientation||window.screen.mozOrientation]||window.orientation||0}var Co={vtkDeviceOrientationToCamera:{addCameraToSynchronize:function(e,t,n){var r={subscription:e.onAnimation(function(){if(xo.update&&(s=xo.device,Number.isFinite(s.alpha))){var e=xo.device,r=e.alpha,i=e.beta,a=e.gamma,o=xo.screen;t.setDeviceAngles(r,i,a,o),n&&n()}var s}),renderWindowInteractor:e},i=Mo.length;return Mo.push(r),xo.update&&r.renderWindowInteractor.requestAnimation(),i},addWindowListeners:function(){window.addEventListener("orientationchange",To,!1),window.addEventListener("deviceorientation",Ao,!1),xo.update=!0,Mo.filter(function(e){return!!e}).forEach(function(e){return e.renderWindowInteractor.requestAnimation(e)})},isDeviceOrientationSupported:function(){return xo.supported},removeCameraToSynchronize:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Mo[e];n&&(n.subscription.unsubscribe(),t&&n.renderWindowInteractor.cancelAnimation()),Mo[e]=null},removeWindowListeners:function(){window.removeEventListener("orientationchange",To,!1),window.removeEventListener("deviceorientation",Ao,!1),xo.update=!1,Mo.filter(function(e){return!!e}).forEach(function(e){return e.renderWindowInteractor.cancelAnimation(e)})}}},So=wa.States;var Do={motionFactor:10};function Io(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Do,n),Ia.extend(e,t,n),h.a.setGet(e,t,["motionFactor"]),function(e,t){t.classHierarchy.push("vtkInteractorStyleTrackballCamera"),e.handleMouseMove=function(n){var r=n.position,i=n.pokedRenderer;switch(t.state){case So.IS_ROTATE:e.handleMouseRotate(i,r),e.invokeInteractionEvent({type:"InteractionEvent"});break;case So.IS_PAN:e.handleMousePan(i,r),e.invokeInteractionEvent({type:"InteractionEvent"});break;case So.IS_DOLLY:e.handleMouseDolly(i,r),e.invokeInteractionEvent({type:"InteractionEvent"});break;case So.IS_SPIN:e.handleMouseSpin(i,r),e.invokeInteractionEvent({type:"InteractionEvent"})}t.previousPosition=r},e.handleButton3D=function(n){n&&n.pressed&&n.device===Ki.RightController&&n.input===Zi.TrackPad?e.startCameraPose():n&&!n.pressed&&n.device===Ki.RightController&&n.input===Zi.TrackPad&&t.state===So.IS_CAMERA_POSE&&e.endCameraPose()},e.handleMove3D=function(n){switch(t.state){case So.IS_CAMERA_POSE:e.updateCameraPose(n)}},e.updateCameraPose=function(e){var t=e.pokedRenderer.getActiveCamera(),n=t.getPhysicalTranslation(),r=.05*e.gamepad.axes[1]/t.getPhysicalScale(),i=t.physicalOrientationToWorldDirection(e.orientation);t.setPhysicalTranslation(n[0]+i[0]*r,n[1]+i[1]*r,n[2]+i[2]*r)},e.handleLeftButtonPress=function(n){var r=n.position;t.previousPosition=r,n.shiftKey?n.controlKey||n.altKey?e.startDolly():e.startPan():n.controlKey||n.altKey?e.startSpin():e.startRotate()},e.handleLeftButtonRelease=function(){switch(t.state){case So.IS_DOLLY:e.endDolly();break;case So.IS_PAN:e.endPan();break;case So.IS_SPIN:e.endSpin();break;case So.IS_ROTATE:e.endRotate()}},e.handleStartMouseWheel=function(t){e.startDolly(),e.handleMouseWheel(t)},e.handleEndMouseWheel=function(){e.endDolly()},e.handleStartPinch=function(n){t.previousScale=n.scale,e.startDolly()},e.handleEndPinch=function(){e.endDolly()},e.handleStartRotate=function(n){t.previousRotation=n.rotation,e.startRotate()},e.handleEndRotate=function(){e.endRotate()},e.handleStartPan=function(n){t.previousTranslation=n.translation,e.startPan()},e.handleEndPan=function(){e.endPan()},e.handlePinch=function(n){e.dollyByFactor(n.pokedRenderer,n.scale/t.previousScale),t.previousScale=n.scale},e.handlePan=function(n){var r=n.pokedRenderer.getActiveCamera(),i=r.getFocalPoint(),a=(i=e.computeWorldToDisplay(n.pokedRenderer,i[0],i[1],i[2]))[2],o=n.translation,s=t.previousTranslation,u=e.computeDisplayToWorld(n.pokedRenderer,i[0]+o[0]-s[0],i[1]+o[1]-s[1],a),l=e.computeDisplayToWorld(n.pokedRenderer,i[0],i[1],a),c=[];c[0]=l[0]-u[0],c[1]=l[1]-u[1],c[2]=l[2]-u[2],i=r.getFocalPoint();var f=r.getPosition();r.setFocalPoint(c[0]+i[0],c[1]+i[1],c[2]+i[2]),r.setPosition(c[0]+f[0],c[1]+f[1],c[2]+f[2]),t.interactor.getLightFollowCamera()&&n.pokedRenderer.updateLightsGeometryToFollowCamera(),r.orthogonalizeViewUp(),t.previousTranslation=n.translation},e.handleRotate=function(e){var n=e.pokedRenderer.getActiveCamera();n.roll(e.rotation-t.previousRotation),n.orthogonalizeViewUp(),t.previousRotation=e.rotation},e.handleMouseRotate=function(e,n){var r=t.interactor,i=n.x-t.previousPosition.x,a=n.y-t.previousPosition.y,o=r.getView().getViewportSize(e),s=-.1,u=-.1;o[0]&&o[1]&&(s=-20/o[1],u=-20/o[0]);var l=i*u*t.motionFactor,c=a*s*t.motionFactor,f=e.getActiveCamera();Number.isNaN(l)||Number.isNaN(c)||(f.azimuth(l),f.elevation(c),f.orthogonalizeViewUp()),t.autoAdjustCameraClippingRange&&e.resetCameraClippingRange(),r.getLightFollowCamera()&&e.updateLightsGeometryToFollowCamera()},e.handleMouseSpin=function(e,n){var r=t.interactor,i=e.getActiveCamera(),a=r.getView().getViewportCenter(e),o=f.degreesFromRadians(Math.atan2(t.previousPosition.y-a[1],t.previousPosition.x-a[0])),s=f.degreesFromRadians(Math.atan2(n.y-a[1],n.x-a[0]))-o;Number.isNaN(s)||(i.roll(s),i.orthogonalizeViewUp())},e.handleMousePan=function(n,r){var i=n.getActiveCamera(),a=i.getFocalPoint(),o=(a=e.computeWorldToDisplay(n,a[0],a[1],a[2]))[2],s=e.computeDisplayToWorld(n,r.x,r.y,o),u=e.computeDisplayToWorld(n,t.previousPosition.x,t.previousPosition.y,o),l=[];l[0]=u[0]-s[0],l[1]=u[1]-s[1],l[2]=u[2]-s[2],a=i.getFocalPoint();var c=i.getPosition();i.setFocalPoint(l[0]+a[0],l[1]+a[1],l[2]+a[2]),i.setPosition(l[0]+c[0],l[1]+c[1],l[2]+c[2]),t.interactor.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera()},e.handleMouseDolly=function(n,r){var i=r.y-t.previousPosition.y,a=t.interactor.getView().getViewportCenter(n),o=t.motionFactor*i/a[1];e.dollyByFactor(n,Math.pow(1.1,o))},e.handleMouseWheel=function(t){var n=1-t.spinY/10;e.dollyByFactor(t.pokedRenderer,n)},e.dollyByFactor=function(e,n){if(!Number.isNaN(n)){var r=e.getActiveCamera();r.getParallelProjection()?r.setParallelScale(r.getParallelScale()/n):(r.dolly(n),t.autoAdjustCameraClippingRange&&e.resetCameraClippingRange()),t.interactor.getLightFollowCamera()&&e.updateLightsGeometryToFollowCamera()}}}(e,t)}var Eo=h.a.newInstance(Io,"vtkInteractorStyleTrackballCamera"),No=Object.assign({newInstance:Eo,extend:Io});var Oo={windowLevelStartPosition:[0,0],windowLevelCurrentPosition:[0,0],lastSlicePosition:0,windowLevelInitial:[1,.5],currentImageProperty:0,currentImageNumber:-1,interactionMode:"IMAGE2D",xViewRightVector:[0,1,0],xViewUpVector:[0,0,-1],yViewRightVector:[1,0,0],yViewUpVector:[0,0,-1],zViewRightVector:[1,0,0],zViewUpVector:[0,1,0]};function _o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Oo,n),No.extend(e,t,n),h.a.setGet(e,t,["interactionMode"]),function(e,t){t.classHierarchy.push("vtkInteractorStyleImage"),e.superHandleMouseMove=e.handleMouseMove,e.handleMouseMove=function(n){var r=n.position,i=n.pokedRenderer;switch(t.state){case xa.IS_WINDOW_LEVEL:e.windowLevel(i,r),e.invokeInteractionEvent({type:"InteractionEvent"});break;case xa.IS_SLICE:e.slice(i,r),e.invokeInteractionEvent({type:"InteractionEvent"})}e.superHandleMouseMove(n)},e.superHandleLeftButtonPress=e.handleLeftButtonPress,e.handleLeftButtonPress=function(n){var r=n.position;if(n.shiftKey||n.controlKey)"IMAGE3D"===t.interactionMode&&n.shiftKey?e.startRotate():"IMAGE_SLICING"===t.interactionMode&&n.controlKey?(t.lastSlicePosition=r.y,e.startSlice()):e.superHandleLeftButtonPress(n);else{t.windowLevelStartPosition[0]=r.x,t.windowLevelStartPosition[1]=r.y,e.setCurrentImageNumber(t.currentImageNumber);var i=t.currentImageProperty;i&&(t.windowLevelInitial[0]=i.getColorWindow(),t.windowLevelInitial[1]=i.getColorLevel()),e.startWindowLevel()}},e.superHandleLeftButtonRelease=e.handleLeftButtonRelease,e.handleLeftButtonRelease=function(){switch(t.state){case xa.IS_WINDOW_LEVEL:e.endWindowLevel();break;case xa.IS_SLICE:e.endSlice();break;default:e.superHandleLeftButtonRelease()}},e.handleStartMouseWheel=function(t){e.startSlice(),e.handleMouseWheel(t)},e.handleEndMouseWheel=function(){e.endSlice()},e.handleMouseWheel=function(e){var t=e.pokedRenderer.getActiveCamera(),n=t.getDistance();n+=e.spinY;var r=t.getClippingRange();n<r[0]&&(n=r[0]),n>r[1]&&(n=r[1]),t.setDistance(n)},e.windowLevel=function(e,n){t.windowLevelCurrentPosition[0]=n.x,t.windowLevelCurrentPosition[1]=n.y;var r=t.interactor;if(t.currentImageProperty){var i=r.getView().getViewportSize(e),a=t.windowLevelInitial[0],o=t.windowLevelInitial[1],s=4*(t.windowLevelCurrentPosition[0]-t.windowLevelStartPosition[0])/i[0],u=4*(t.windowLevelStartPosition[1]-t.windowLevelCurrentPosition[1])/i[1];Math.abs(a)>.01?s*=a:s*=a<0?-.01:.01,Math.abs(o)>.01?u*=o:u*=o<0?-.01:.01,a<0&&(s*=-1),o<0&&(u*=-1);var l=s+a,c=o-u;l<.01&&(l=.01),t.currentImageProperty.setColorWindow(l),t.currentImageProperty.setColorLevel(c)}},e.slice=function(e,n){var r=t.interactor,i=n.y-t.lastSlicePosition,a=e.getActiveCamera(),o=a.getClippingRange(),s=a.getDistance(),u=0;if(a.getParallelProjection())u=a.getParallelScale();else{var l=f.radiansFromDegrees(a.getViewAngle());u=2*s*Math.tan(.5*l)}(s+=i*u/r.getView().getViewportSize(e)[1])<o[0]&&(s=o[0]+.001*u),s>o[1]&&(s=o[1]-.001*u),a.setDistance(s),t.lastSlicePosition=n.y},e.setCurrentImageNumber=function(n){if(null!==n){var r=t.interactor.getCurrentRenderer();if(r){t.currentImageNumber=n;var i=r.getViewProps(),a=n;n<0&&(a+=i.length);for(var o=null,s=!1,u=0;u<i.length&&!s;u++)l(u,i[u],a)&&(s=!0,o=i[u]);o&&e.setCurrentImageProperty(o.getProperty())}}function l(e,t,n){return!(!t.isA("vtkImageSlice")||e!==n||!t.getPickable())}},e.setCurrentImageProperty=function(e){t.currentImageProperty=e}}(e,t)}var Lo=h.a.newInstance(_o,"vtkInteractorStyleImage"),Po=Object.assign({newInstance:Lo,extend:_o});function ko(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Ro={};function jo(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ro,n),za.extend(e,t,n),h.a.setGet(e,t,["volumeMapper"]),function(e,t){t.classHierarchy.push("vtkInteractorStyleMPRSlice"),t.trackballManipulator=qa.newInstance({button:1}),t.panManipulator=io.newInstance({button:1,shift:!0}),t.zoomManipulator=so.newInstance({button:3}),t.scrollManipulator=ho.newInstance({scrollEnabled:!0,dragEnabled:!1});var n={sliceNormal:[0,0,0],sliceRange:[0,0]},r=null;function i(){var n=e.getSliceRange();t.scrollManipulator.removeScrollListener(),t.scrollManipulator.setScrollListener(n[0],n[1],1,e.getSlice,e.setSlice)}var a=e.setInteractor;e.setInteractor=function(t){if(a(t),r&&(r.unsubscribe(),r=null),t){var n=t.getCurrentRenderer().getActiveCamera();r=n.onModified(function(){i(),e.modified()})}},e.handleMouseMove=h.a.chain(e.handleMouseMove,function(){var e=t.interactor.getCurrentRenderer().getActiveCamera(),n=e.getDistance();e.setClippingRange(n,n+1)});var o=e.setVolumeMapper;e.setVolumeMapper=function(n){if(o(n)){var r=t.interactor.getCurrentRenderer().getActiveCamera();n?(r.setFreezeFocalPoint(!0),e.setSliceNormal.apply(e,ko(e.getSliceNormal()))):r.setFreezeFocalPoint(!1)}},e.getSlice=function(){var n=t.interactor.getCurrentRenderer().getActiveCamera(),r=e.getSliceNormal(),i=d.a.buildFromDegree().identity().rotateFromDirections(r,[1,0,0]),a=n.getFocalPoint();return i.apply(a),a[0]},e.setSlice=function(n){var r=t.interactor.getCurrentRenderer().getActiveCamera();if(t.volumeMapper){var i=e.getSliceRange(),a=t.volumeMapper.getBounds(),o=function(e,t,n){return e<t?t:e>n?n:e}.apply(void 0,[n].concat(ko(i))),s=[(a[0]+a[1])/2,(a[2]+a[3])/2,(a[4]+a[5])/2],u=r.getDistance(),l=r.getDirectionOfProjection();f.normalize(l);var c=(i[1]+i[0])/2,d=[s[0]-l[0]*c,s[1]-l[1]*c,s[2]-l[2]*c],p=[d[0]+l[0]*o,d[1]+l[1]*o,d[2]+l[2]*o],h=[p[0]-l[0]*u,p[1]-l[1]*u,p[2]-l[2]*u];r.setPosition.apply(r,h),r.setFocalPoint.apply(r,p)}},e.getSliceRange=function(){if(t.volumeMapper){var r=e.getSliceNormal();if(r[0]===n.sliceNormal[0]&&r[1]===n.sliceNormal[1]&&r[2]===n.sliceNormal[2])return n.sliceRange;var i=function(e){return[[e[0],e[2],e[4]],[e[0],e[2],e[5]],[e[0],e[3],e[4]],[e[0],e[3],e[5]],[e[1],e[2],e[4]],[e[1],e[2],e[5]],[e[1],e[3],e[4]],[e[1],e[3],e[5]]]}(t.volumeMapper.getBounds()),a=d.a.buildFromDegree().identity().rotateFromDirections(r,[1,0,0]);i.forEach(function(e){return a.apply(e)});for(var o=1/0,s=-1/0,u=0;u<8;u++){var l=i[u][0];l>s&&(s=l),l<o&&(o=l)}return n.sliceNormal=r,n.sliceRange=[o,s],n.sliceRange}return[0,0]},e.getSliceNormal=function(){return t.volumeMapper?t.interactor.getCurrentRenderer().getActiveCamera().getDirectionOfProjection():[0,0,0]},e.setSliceNormal=function(){for(var n=t.interactor.getCurrentRenderer().getActiveCamera(),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];if(f.normalize(i),t.volumeMapper){var o=t.volumeMapper.getBounds(),s=Math.sqrt(f.distance2BetweenPoints([o[0],o[2],o[4]],[o[1],o[3],o[5]])),u=[(o[0]+o[1])/2,(o[2]+o[3])/2,(o[4]+o[5])/2],l=s/(2*Math.tan(.25*Math.PI)),c=[u[0]-i[0]*l,u[1]-i[1]*l,u[2]-i[2]*l],p=n.getDirectionOfProjection(),h=[0,1,0];d.a.buildFromDegree().identity().rotateFromDirections(p,i).apply(h),n.setPosition.apply(n,c),n.setDistance(l),n.setDirectionOfProjection.apply(n,i),n.setViewUp.apply(n,h),n.setViewAngle(90),n.setClippingRange(l,l+.1),e.setCenterOfRotation(u)}},e.removeAllMouseManipulators(),e.addMouseManipulator(t.trackballManipulator),e.addMouseManipulator(t.panManipulator),e.addMouseManipulator(t.zoomManipulator),e.addMouseManipulator(t.scrollManipulator),i()}(e,t)}var Bo=h.a.newInstance(jo,"vtkInteractorStyleMPRSlice"),zo=Object.assign({newInstance:Bo,extend:jo});function Fo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Vo={type:"StartInteractionEvent"},Uo={type:"InteractionEvent"},Go={type:"EndInteractionEvent"};var Wo={buttonLeft:0,buttonMiddle:0,buttonRight:0,sendMouseMove:!1,throttleDelay:33.3,lastThrottleTime:0};function Ho(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Wo,n),Ia.extend(e,t,n),h.a.setGet(e,t,["sendMouseMove","remoteEventAddOn","throttleDelay"]),h.a.event(e,t,"RemoteMouseEvent"),h.a.event(e,t,"RemoteWheelEvent"),h.a.event(e,t,"RemoteGestureEvent"),function(e,t){function n(e){var n=t.buttonLeft,r=t.buttonMiddle,i=t.buttonRight,a=e.shiftKey?1:0,o=e.controlKey?1:0,s=e.altKey?1:0,u=e.metaKey?1:0,l=n||r||i?"down":"up",c=Fo(t.interactor.getView().getSizeByReference(),2),f=c[0],d=c[1],p=e.position,h=p.x,g=p.y;return h/=f,g/=d,Object.assign({action:l,x:h,y:g,buttonLeft:n,buttonMiddle:r,buttonRight:i,shiftKey:a,altKey:s,ctrlKey:o,metaKey:u},t.remoteEventAddOn)}t.classHierarchy.push("vtkInteractorStyleRemoteMouse"),e.handleLeftButtonPress=function(n){t.previousPosition=n.position,t.buttonLeft=1,e.onButtonDown(1,n)},e.handleMiddleButtonPress=function(n){t.previousPosition=n.position,t.buttonMiddle=1,e.onButtonDown(2,n)},e.handleRightButtonPress=function(n){t.previousPosition=n.position,t.buttonRight=1,e.onButtonDown(3,n)},e.handleLeftButtonRelease=function(n){t.buttonLeft=0,e.onButtonUp(1,n)},e.handleMiddleButtonRelease=function(n){t.buttonMiddle=0,e.onButtonUp(2,n)},e.handleRightButtonRelease=function(n){t.buttonRight=0,e.onButtonUp(3,n)},e.onButtonDown=function(r,i){t.interactor.requestAnimation(e.onButtonDown),e.invokeStartInteractionEvent(Vo),e.invokeRemoteMouseEvent(n(i))},e.onButtonUp=function(r,i){e.invokeRemoteMouseEvent(n(i)),e.invokeEndInteractionEvent(Go),t.interactor.cancelAnimation(e.onButtonDown)},e.handleStartMouseWheel=function(n){var r=n.spinY;t.interactor.requestAnimation(e.handleStartMouseWheel),e.invokeStartInteractionEvent(Vo),e.invokeRemoteWheelEvent(Object.assign({type:"StartMouseWheel",spinY:r},t.remoteEventAddOn))},e.handleMouseWheel=function(n){var r=n.spinY;e.invokeRemoteWheelEvent(Object.assign({type:"MouseWheel",spinY:r},t.remoteEventAddOn)),e.invokeInteractionEvent(Uo)},e.handleEndMouseWheel=function(){e.invokeRemoteWheelEvent(Object.assign({type:"EndMouseWheel"},t.remoteEventAddOn)),t.interactor.cancelAnimation(e.handleStartMouseWheel),e.invokeEndInteractionEvent(Go)},e.handleMouseMove=function(r){var i=Date.now();t.throttleDelay<i-t.lastThrottleTime&&(t.sendMouseMove||t.buttonLeft||t.buttonMiddle||t.buttonRight)&&(t.lastThrottleTime=i,e.invokeRemoteMouseEvent(n(r))),e.invokeInteractionEvent(Uo)},e.handleKeyPress=function(){},e.handleStartPinch=function(n){e.startDolly();var r=n.scale;t.interactor.requestAnimation(e.handleStartPinch),e.invokeStartInteractionEvent(Vo),e.invokeRemoteGestureEvent(Object.assign({type:"StartPinch",scale:r},t.remoteEventAddOn))},e.handlePinch=function(n){var r=n.scale;e.invokeRemoteGestureEvent(Object.assign({type:"Pinch",scale:r},t.remoteEventAddOn))},e.handleEndPinch=function(){e.endDolly(),e.invokeRemoteGestureEvent(Object.assign({type:"EndPinch"},t.remoteEventAddOn)),t.interactor.cancelAnimation(e.handleStartPinch),e.invokeEndInteractionEvent(Go)},e.handleStartRotate=function(n){e.startRotate();var r=n.rotation;t.interactor.requestAnimation(e.handleStartRotate),e.invokeStartInteractionEvent(Vo),e.invokeRemoteGestureEvent(Object.assign({type:"StartRotate",rotation:r},t.remoteEventAddOn))},e.handleRotate=function(n){var r=n.rotation;e.invokeRemoteGestureEvent(Object.assign({type:"Rotate",rotation:r},t.remoteEventAddOn))},e.handleEndRotate=function(){e.endRotate(),e.invokeRemoteGestureEvent(Object.assign({type:"EndRotate"},t.remoteEventAddOn)),t.interactor.cancelAnimation(e.handleStartRotate),e.invokeEndInteractionEvent(Go)},e.handleStartPan=function(n){e.startPan();var r=n.translation;t.interactor.requestAnimation(e.handleStartPan),e.invokeStartInteractionEvent(Vo),e.invokeRemoteGestureEvent(Object.assign({type:"StartPan",translation:r},t.remoteEventAddOn))},e.handlePan=function(n){var r=n.translation;e.invokeRemoteGestureEvent(Object.assign({type:"Pan",translation:r},t.remoteEventAddOn))},e.handleEndPan=function(){e.endPan(),e.invokeRemoteGestureEvent(Object.assign({type:"EndPan"},t.remoteEventAddOn)),t.interactor.cancelAnimation(e.handleStartPan),e.invokeEndInteractionEvent(Go)}}(e,t)}var Yo={newInstance:h.a.newInstance(Ho,"vtkInteractorStyleRemoteMouse"),extend:Ho},Qo={vtkInteractorStyleImage:Po,vtkInteractorStyleManipulator:za,vtkInteractorStyleMPRSlice:zo,vtkInteractorStyleRemoteMouse:Yo,vtkInteractorStyleTrackballCamera:No},qo=n(26),Xo=n.n(qo);function Ko(){}var Zo={nw:"northWestContainer",n:"northContainer",ne:"northEastContainer",w:"westContainer",e:"eastContainer",sw:"southWestContainer",s:"southContainer",se:"southEastContainer"};var Jo={templates:null,metadata:null};function $o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Jo,n),h.a.obj(e,t),h.a.get(e,t,["annotationContainer","northWestContainer","northContainer","northEastContainer","westContainer","eastContainer","southWestContainer","southContainer","southEastContainer","metadata"]),function(e,t){function n(){for(var e=Object.keys(t.templates),n=e.length;n--;){var r=t[Zo[e[n]]],i=t.templates[e[n]];r&&i&&(r.innerHTML=i(t.metadata))}}t.classHierarchy.push("vtkCornerAnnotation"),t.templates||(t.templates={}),t.metadata||(t.metadata={}),t.annotationContainer=document.createElement("div"),t.annotationContainer.setAttribute("class",Xo.a.container),t.annotationContainer.innerHTML='\n    <div class="'.concat(Xo.a.topRow,'">\n      <div class="js-nw ').concat(Xo.a.northWest,'"></div>\n      <div class="js-n ').concat(Xo.a.north,'"></div>\n      <div class="js-ne ').concat(Xo.a.northEast,'"></div>\n    </div>\n    <div class="').concat(Xo.a.middleRow,'">\n      <div class="js-w ').concat(Xo.a.west,'"></div>\n      <div class="js-e ').concat(Xo.a.east,'"></div>\n    </div>\n    <div class="').concat(Xo.a.bottomRow,'">\n      <div class="js-sw ').concat(Xo.a.southWest,'"></div>\n      <div class="js-s ').concat(Xo.a.south,'"></div>\n      <div class="js-se ').concat(Xo.a.southEast,'"></div>\n    </div>'),t.northWestContainer=t.annotationContainer.querySelector(".js-nw"),t.northContainer=t.annotationContainer.querySelector(".js-n"),t.northEastContainer=t.annotationContainer.querySelector(".js-ne"),t.westContainer=t.annotationContainer.querySelector(".js-w"),t.eastContainer=t.annotationContainer.querySelector(".js-e"),t.southWestContainer=t.annotationContainer.querySelector(".js-sw"),t.southContainer=t.annotationContainer.querySelector(".js-s"),t.southEastContainer=t.annotationContainer.querySelector(".js-se"),e.setContainer=function(n){t.container&&t.container!==n&&t.container.removeChild(t.annotationContainer),t.container!==n&&(t.container=n,t.container&&(t.container.appendChild(t.annotationContainer),e.resize()),e.modified())},e.resize=Ko,e.updateTemplates=function(r){t.templates=Object.assign(t.templates,r),n(),e.modified()},e.updateMetadata=function(r){t.metadata=Object.assign(t.metadata,r),n(),e.modified()}}(e,t)}var es={newInstance:h.a.newInstance($o,"vtkCornerAnnotation"),extend:$o,applyTemplate:function(e,t,n){return e.replace(/\${([^{]+)}/g,function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"${".concat(e,"}");return e.split(".").reduce(function(e,t){return void 0!==e[t]?e[t]:n},t)}(e.substr(2,e.length-3).trim(),t,n)})}},ts=n(30),ns=n.n(ts),rs=Function.prototype;function is(e){for(var t=[],n=e;n>1e3;)t.push("000".concat(n%1e3).slice(-3)),n=Math.floor(n/1e3);return n>0&&t.push(n),t.reverse(),t.join("'")}var as={bufferSize:200,graphHeight:120,buffer:[60],subscriptions:[],fpsSum:0,orientationClass:ns.a.horizontalContainer,canvasVisibility:!0,titleVisibility:!0,infoVisibility:!0};function os(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,as,n),h.a.obj(e,t),h.a.get(e,t,["fpsMonitorContainer","renderWindow","addOnStats"]),h.a.setGet(e,t,["bufferSize","canvasVisibility","infoVisibility","titleVisibility"]),function(e,t){function n(){if(t.title.style.display=t.titleVisibility?"block":"none",t.titleVisibility){var e=t.buffer[t.buffer.length-1],n="Mean: ".concat(Math.round(t.fpsSum/t.buffer.length)," - Current: ").concat(Math.round(e));n!==t.lastText&&(t.lastText=n,t.title.innerHTML=n)}}function r(){if(t.info.style.display=t.infoVisibility?"grid":"none",t.infoVisibility){var e=[];if(t.renderWindow){var n=t.renderWindow.getViews()[0];n&&n.getSize&&e.push('<label class="'.concat(ns.a.label,'">Resolution</label><span class="').concat(ns.a.value,'">').concat(n.getSize().join("x"),"</span>"));var r=Object.assign({},t.renderWindow.getStatistics(),t.addOnStats),i=Object.keys(r);i.sort();for(var a=0;a<i.length;a++)"str"!==i[a]&&r[i[a]]&&e.push('<label class="'.concat(ns.a.label,'">').concat(i[a],'</label><span class="').concat(ns.a.value,'">').concat(is(r[i[a]]),"</span>"))}t.info.innerHTML=e.join("")}}function i(){if(t.canvas.style.display=t.canvasVisibility?"block":"none",t.canvasVisibility){t.canvas.setAttribute("width",t.bufferSize),t.canvas.setAttribute("height",t.graphHeight);var e=t.canvas.getContext("2d"),n=t.canvas,r=n.width,i=n.height;e.clearRect(0,0,r,i),e.strokeStyle="green",e.beginPath(),e.moveTo(0,i-t.buffer[0]);for(var a=1;a<t.buffer.length;a++)e.lineTo(a,i-t.buffer[a]);e.stroke(),e.strokeStyle="black",e.beginPath(),e.moveTo(0,i-60),e.lineTo(r,i-60),e.stroke()}}function a(){if(t.interactor){var e=1/t.interactor.getLastFrameTime();for(t.buffer.push(e),t.fpsSum+=e;t.buffer.length>t.bufferSize;)t.fpsSum-=t.buffer.shift();n(),i()}}t.classHierarchy.push("vtkFPSMonitor"),t.fpsMonitorContainer=document.createElement("div"),t.fpsMonitorContainer.setAttribute("class",t.orientationClass),t.fpsMonitorContainer.innerHTML='\n    <div class="'.concat(ns.a.leftPane,'">\n      <div class="js-title ').concat(ns.a.title,'">Mean N/A - Current N/A</div>\n      <canvas class="js-graph ').concat(ns.a.graph,'"></canvas>\n    </div>\n    <div class="js-info ').concat(ns.a.rightPane,'">\n    </div>'),t.canvas=t.fpsMonitorContainer.querySelector(".js-graph"),t.title=t.fpsMonitorContainer.querySelector(".js-title"),t.info=t.fpsMonitorContainer.querySelector(".js-info"),e.update=function(){e.render()},e.setRenderWindow=function(e){for(;t.subscriptions.length;)t.subscriptions.pop().unsubscribe();t.renderWindow=e,t.interactor=e?e.getInteractor():null,t.interactor&&t.subscriptions.push(t.interactor.onAnimation(a))},e.setContainer=function(n){t.container&&t.container!==n&&t.container.removeChild(t.fpsMonitorContainer),t.container!==n&&(t.container=n,t.container&&(t.container.appendChild(t.fpsMonitorContainer),e.resize()),e.modified())},e.render=function(){n(),r(),i()},e.resize=rs,e.setOrientationToHorizontal=function(){t.fpsMonitorContainer.classList.remove(t.orientationClass),t.orientationClass=ns.a.horizontalContainer,t.fpsMonitorContainer.classList.add(t.orientationClass)},e.setOrientationToVertical=function(){t.fpsMonitorContainer.classList.remove(t.orientationClass),t.orientationClass=ns.a.verticalContainer,t.fpsMonitorContainer.classList.add(t.orientationClass)},e.setOrientation=function(){"horizontal"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"horizontal")?e.setOrientationToHorizontal():e.setOrientationToVertical()},e.setAddOnStats=function(e){t.addOnStats||(t.addOnStats={}),Object.assign(t.addOnStats,e),r()},e.setMonitorVisibility=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e.setCanvasVisibility(n),e.setInfoVisibility(r),e.setTitleVisibility(t)};var o=e.delete;e.delete=function(){e.setRenderWindow(null),e.setContainer(null),o()},t.subscriptions.push(e.onModified(e.update))}(e,t)}var ss={newInstance:h.a.newInstance(os,"vtkFPSMonitor"),extend:os},us=n(81),ls=n.n(us),cs=n(82),fs=n.n(cs),ds=n(83),ps=n.n(ds),hs=n(130),gs=n.n(hs),ms={Contrast:ls.a,Logo:fs.a,Spacing:ps.a,Tint:gs.a},vs={SliderOrientation:{VERTICAL:0,HORIZONTAL:1}},ys=n(131),bs=n.n(ys);function Ms(e,t){for(var n=Number.MAX_VALUE,r=-1,i=t.length;i--;){var a=Math.abs(t[i]-e);a<n&&(n=a,r=i)}return-1!==r?t[r]:void 0}function xs(e,t){function n(){if(t.container){var e=t.containerSizes[0],n=(t.containerSizes[1]-t.containerSizes[0])*(t.value-t.values[0])/(t.values[t.values.length-1]-t.values[0]);Number.isNaN(n)||Number.isNaN(e)||(t.el.style.width="".concat(e,"px"),t.el.style.height="".concat(e,"px"),t.orientation===vs.SliderOrientation.VERTICAL?(t.el.style.left="0",t.el.style.top="".concat(n,"px"),t.el.style.cursor="row-resize"):(t.el.style.top="0",t.el.style.left="".concat(n,"px"),t.el.style.cursor="col-resize"))}}t.classHierarchy.push("vtkSlider"),t.el=document.createElement("div"),t.el.setAttribute("class",bs.a.cursor);var r=!1,i=0,a=0;function o(e){var t=document.querySelector("body"),n=e?"addEventListener":"removeEventListener";t[n]("mousemove",s),t[n]("mouseleave",u),t[n]("mouseup",l)}function s(n){if(n.preventDefault(),r){var o=Ms((a+((t.orientation?n.clientX:n.clientY)-i)/(t.containerSizes[1]-t.containerSizes[0]))*t.range+t.values[0],t.values);void 0!==o&&e.setValue(o)}}function u(e){r=!1}function l(n){if((o(!1),!r)&&!((t.orientation?n.clientX:n.clientY)-i)){var a=Ms(t.values[0]+t.range*(i-t.container.getBoundingClientRect()[t.orientation?"left":"top"]-.5*t.containerSizes[0])/(t.containerSizes[1]-t.containerSizes[0]),t.values);void 0!==a&&e.setValue(a)}r=!1}function c(e){o(!0),e.preventDefault(),r=e.target===t.el,i=t.orientation?e.clientX:e.clientY,a=(t.value-t.values[0])/t.range}e.setContainer=function(n){t.container&&t.container!==n&&(t.container.removeChild(t.el),o(!1),t.container.removeEventListener("mousedown",c)),t.container!==n&&(t.container=n,t.container&&(t.container.appendChild(t.el),e.resize(),t.container.addEventListener("mousedown",c)),e.modified())},e.resize=function(){if(t.container){var r=t.container.getBoundingClientRect(),i=Math.floor(r.width),a=Math.floor(r.height),o=Math.min(i,a),s=Math.max(i,a);e.setOrientation(a===s?vs.SliderOrientation.VERTICAL:vs.SliderOrientation.HORIZONTAL),t.containerSizes=[o,s],n()}},e.setValue=function(r){return t.value!==r&&t.values[0]<=r&&r<=t.values.slice(-1)[0]&&(t.value=r,n(),e.modified(),e.invokeValueChange(r),!0)},e.setValues=function(r){t.values!==r&&(t.values=r,t.range=r[r.length-1]-r[0],n(),e.modified())},e.generateValues=function(r,i,a){var o=(i-r)/(a-1);t.values=[];for(var s=0;s<a;s++)t.values.push(r+s*o);t.range=i-r,n(),e.modified()},e.updateCursorStyle=function(e){t.cursorStyle=Object.assign({},t.cursorStyle,e);for(var n=Object.keys(t.cursorStyle),r=n.length;r--;)t.el.style[n[r]]=t.cursorStyle[n[r]]},e.updateCursorStyle()}var ws={orientation:vs.SliderOrientation.VERTICAL,value:.5,values:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],range:1,containerSizes:[10,100],cursorStyle:{border:"solid 4px #aaa",backgroundColor:"#ccc",transform:"scale(0.7)"}};function As(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ws,n),h.a.obj(e,t),h.a.get(e,t,["orientation","value","values"]),h.a.set(e,t,["orientation"]),h.a.event(e,t,"ValueChange"),xs(e,t)}var Ts=h.a.newInstance(As,"vtkSlider"),Cs=Object.assign({newInstance:Ts,extend:As},vs),Ss=n(132),Ds=Object.create(null);Ss.filter(function(e){return e.RGBPoints}).filter(function(e){return"CIELAB"!==e.ColorSpace}).forEach(function(e){Ds[e.Name]=e});var Is=Object.keys(Ds);Is.sort();var Es={addPreset:function(e){e.RGBPoints&&"CIELAB"!==e.ColorSpace&&(Ds[e.Name]||(Is.push(e.Name),Is.sort()),Ds[e.Name]=e)},removePresetByName:function(e){var t=Is.indexOf(e);t>-1&&Is.splice(t,1),delete Ds[e]},getPresetByName:function(e){return Ds[e]},rgbPresetNames:Is},Ns=n(133),Os=n.n(Ns);function _s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Ls(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Ps=.001,ks={adjustPosition:"-webkit-grab",adjustHeight:"row-resize",adjustBias:"crosshair",adjustWidth:"col-resize"},Rs=[],js={adjustPosition:function(e,t,n,r,i){var a=i.position-n[0];r.position=e+a},adjustHeight:function(e,t,n,r,i){r.height=1-t,r.height=Math.min(1,Math.max(0,r.height))},adjustBias:function(e,t,n,r,i){r.xBias=i.xBias-(n[0]-e)/r.height,r.yBias=i.yBias+4*(n[1]-t)/r.height,r.xBias=Math.max(-1,Math.min(1,r.xBias)),r.yBias=Math.max(0,Math.min(2,r.yBias))},adjustWidth:function(e,t,n,r,i,a){r.width=a<0?i.width-(n[0]-e):i.width+(n[0]-e),r.width<Ps&&(r.width=Ps)}};function Bs(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256,n=[];n.length<t;)n.push(0);for(var r=e.length;r--;)for(var i=e[r],a=i.position,o=i.height,s=i.width,u=i.xBias,l=i.yBias,c=0;c<t;c++){var f=c/(t-1);if(f>a+s||f<a-s)n[c]<0&&(n[c]=0);else{var d=s<Ps?Ps:s,p=((0===u||f===a+u?f:f>a+u?d===u?a:a+d/(d-u)*(f-a-u):-d===u?a:a-d/(d+u)*(f-a-u))-a)/d,h=Math.exp(-4*p*p),g=1-p*p,m=o*(l<1?l*g+(1-l)*h:(2-l)*g+1*(l-1));m>n[c]&&(n[c]=m)}}return n}function zs(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{lineWidth:1,strokeStyle:"#000"},i=t[3],a=t[2]/(n.length-1),o=e.canvas.height,s=!!r.fillStyle;e.lineWidth=r.lineWidth,e.strokeStyle=r.strokeStyle,e.beginPath(),e.moveTo(t[0],o-t[1]);for(var u=0;u<n.length;u++)e.lineTo(t[0]+u*a,Math.max(t[1],o-(t[1]+n[u]*i)));if(s){if(e.fillStyle=r.fillStyle,e.lineTo(t[0]+t[2],t[1]+t[3]),r.clip)return void e.clip();e.fill()}e.stroke()}function Fs(e,t,n){return[(e-n[0])/n[2],(t-n[1])/n[3]]}function Vs(e,t){var n=t.map(function(t){return Math.abs(t.position-e)}),r=Math.min.apply(Math,Ls(n));return n.indexOf(r)}function Us(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(n){var r=n.offsetX,i=n.offsetY;t&&n.preventDefault(),e(r,i)}}function Gs(){Rs.filter(function(e){return e.ready}).forEach(function(e){e.callbacks.forEach(function(t){t.touches===e.touches&&t.clicks===e.count&&t.action.apply(t,Ls(e.singleTouche))}),e.ts=0,e.count=0,e.touches=0,e.ready=!1})}function Ws(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return function(i){var a=i.target.getBoundingClientRect(),o=Array.prototype.map.call(i.touches,function(e){return[e.pageX-a.left,e.pageY-a.top]}).reduce(function(e,t){return[e[0]+t[0],e[1]+t[1]]},[0,0]).map(function(e){return e/i.touches.length});"touchstart"===i.type?(clearTimeout(Rs[e].timeout),Rs[e].ts=i.timeStamp,Rs[e].singleTouche=o,Rs[e].touches=i.touches.length):"touchmove"===i.type?(Rs[e].ts=0,Rs[e].count=0,Rs[e].ready=!1):"touchend"===i.type&&(i.timeStamp-Rs[e].ts<Rs[e].deltaT?(Rs[e].count+=1,Rs[e].ready=!0,r&&i.preventDefault(),Rs[e].timeout=setTimeout(Gs,Rs[e].deltaT)):Rs[e].ready=!1),i.touches.length===n&&(t.apply(void 0,Ls(o)),r&&i.preventDefault())}}function Hs(e,t,n){return function(r){return e()?t(r):n(r)}}var Ys={applyGaussianToPiecewiseFunction:function(e,t,n,r){for(var i=Bs(e,t),a=[],o=(n[1]-n[0])/(i.length-1),s=0;s<i.length;s++){var u=n[0]+o*s,l=i[s];a.push({x:u,y:l,midpoint:.5,sharpness:0})}r.setNodes(a)},computeOpacities:Bs,createListener:Us,drawChart:zs,findGaussian:Vs,listenerSelector:Hs,normalizeCoordinates:Fs};function Qs(e,t){t.classHierarchy.push("vtkPiecewiseGaussianWidget"),t.canvas||(t.canvas=document.createElement("canvas")),e.setContainer=function(n){t.container&&t.container!==n&&t.container.removeChild(t.canvas),t.container!==n&&(t.container=n,t.container&&t.container.appendChild(t.canvas),e.modified())},e.setGaussians=function(n){t.gaussians!==n&&(t.gaussians=n,t.opacities=Bs(t.gaussians,t.piecewiseSize),e.invokeOpacityChange(e),e.modified())},e.addGaussian=function(n,r,i,a,o){var s=t.gaussians.length;return t.gaussians.push({position:n,height:r,width:i,xBias:a,yBias:o}),t.opacities=Bs(t.gaussians,t.piecewiseSize),e.invokeOpacityChange(e),e.modified(),s},e.removeGaussian=function(n){t.gaussians.splice(n,1),t.opacities=Bs(t.gaussians,t.piecewiseSize),e.invokeOpacityChange(e),e.modified()},e.setSize=function(n,r){t.canvas.setAttribute("width",n),t.canvas.setAttribute("height",r),t.size[0]===n&&t.size[1]===r||(t.size=[n,r],t.colorCanvasMTime=0,e.modified())},e.updateStyle=function(n){t.style=Object.assign({},t.style,n),e.modified()},e.setDataArray=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;t.histogram=null,t.histogramArray=n;var a=f.arrayMax(n),o=f.arrayMin(n);t.dataRange=[o,a];for(var s=Math.floor(n.length/4)||1,u=0,l=[];u<n.length;){var c=new Os.a,d=new Pn.a(c),p=u,h=Math.min(u+s,n.length-1),g=new n.constructor(n.slice(p,h+1));l.push(d.postMessage({array:g,min:o,max:a,numberOfBins:t.numberOfBins},[g.buffer])),u+=s}Promise.all(l).then(function(n){t.histogram=new Float32Array(t.numberOfBins),t.histogram.fill(0),n.forEach(function(e){for(var n=0,r=e.length;n<r;++n)t.histogram[n]+=e[n]});var a=Math.min(r,t.histogram.length-i),o=Array.from(t.histogram);o.sort(function(e,t){return Number(e)-Number(t)});for(var s=0;s<i;s++)o.pop();for(;o.length>a;)o.shift();for(var u=o.reduce(function(e,t){return e+t},0)/a,l=0,c=t.histogram.length;l<c;++l)t.histogram[l]/=u;e.modified(),setTimeout(e.render,0)}),e.modified()},e.onClick=function(n,r){var i=_s(Fs(n,r,t.graphArea),2),a=i[0],o=i[1];if(a<0&&t.style.iconSize>1){for(var s=t.style.iconSize+t.style.padding,u=s,l=0;r>u;)l+=1,u+=s;switch(l){case 0:var c=e.addGaussian(0,1,.1,0,0),f=t.gaussians[c],d=Object.assign({},f),p=js.adjustPosition;t.activeGaussian=c,t.selectedGaussian=c,h.a.setImmediate(function(){e.onDown(n,r),t.dragAction={position:[0,0],action:p,gaussian:f,originalGaussian:d}});break;case 1:-1!==t.selectedGaussian&&e.removeGaussian(t.selectedGaussian);break;default:t.selectedGaussian=-1,t.dragAction=null}}else if(a<0||a>1||o<0||o>1)t.selectedGaussian=-1,t.dragAction=null;else{var g=Vs(a,t.gaussians);g!==t.selectedGaussian&&(t.selectedGaussian=g,e.modified())}return!0},e.onHover=function(n,r){var i=_s(Fs(n,r,t.graphArea),2),a=i[0],o=i[1],s=a<0?t.selectedGaussian:Vs(a,t.gaussians);t.canvas.style.cursor="default";var u=t.gaussians[s];if(u&&a>=0){var l=1-o,c=10/t.canvas.height,f=null;f=l>u.height+c?"adjustPosition":l>u.height-c?Math.abs(a-u.position)<c?"adjustHeight":"adjustPosition":l>.5*u.height+c?"adjustPosition":l>.5*u.height-c?Math.abs(a-u.position)<c?"adjustBias":"adjustPosition":l>c?"adjustPosition":"adjustWidth",t.canvas.style.cursor=ks[f];var d=js[f],p=Object.assign({},u);t.dragAction={position:[a,o],action:d,gaussian:u,originalGaussian:p}}return s!==t.activeGaussian&&(t.activeGaussian=s,e.modified()),!0},e.onDown=function(n,r){t.mouseIsDown||e.invokeAnimation(!0),t.mouseIsDown=!0;var i=Fs(n,r,t.graphArea)[0],a=Vs(i,t.gaussians);t.gaussianSide=0;var o=t.gaussians[a];return o&&(t.gaussianSide=o.position-i),a!==t.selectedGaussian&&i>0&&(t.selectedGaussian=a,e.modified()),!0},e.onDrag=function(n,r){if(t.dragAction){var i=_s(Fs(n,r,t.graphArea),2),a=i[0],o=i[1],s=t.dragAction,u=s.position,l=s.gaussian,c=s.originalGaussian;(0,s.action)(a,o,u,l,c,t.gaussianSide),t.opacities=Bs(t.gaussians,t.piecewiseSize),e.invokeOpacityChange(e,!0),e.modified()}return!0},e.onUp=function(n,r){return t.mouseIsDown&&e.invokeAnimation(!1),t.mouseIsDown=!1,!0},e.onLeave=function(n,r){return e.onUp(n,r),t.canvas.style.cursor="default",t.activeGaussian=-1,e.modified(),!0},e.onAddGaussian=function(n,r){var i=_s(Fs(n,r,t.graphArea),2),a=i[0],o=i[1];return a>=0&&e.addGaussian(a,1-o,.1,0,0),!0},e.onRemoveGaussian=function(n,r){var i=Fs(n,r,t.graphArea)[0],a=Vs(i,t.gaussians);return i>=0&&-1!==a&&e.removeGaussian(a),!0},e.bindMouseListeners=function(){if(!t.listeners){var n=function(){return!!t.mouseIsDown},r=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Rs.length;return Rs.push({callbacks:t,timeout:0,deltaT:200,count:0,ready:!1}),r}({clicks:1,touches:1,action:e.onClick},{clicks:2,touches:1,action:e.onAddGaussian},{clicks:2,touches:2,action:e.onRemoveGaussian});t.listeners={mousemove:Hs(n,Us(e.onDrag),Us(e.onHover)),dblclick:Us(e.onAddGaussian),contextmenu:Us(e.onRemoveGaussian),click:Us(e.onClick),mouseup:Us(e.onUp),mousedown:Us(e.onDown),mouseout:Us(e.onLeave),touchstart:Ws(r,h.a.chain(e.onHover,e.onDown)),touchmove:Hs(n,Ws(r,e.onDrag),Ws(r,e.onHover)),touchend:Ws(r,e.onUp,0)},Object.keys(t.listeners).forEach(function(e){t.canvas.addEventListener(e,t.listeners[e],!1)})}},e.unbindMouseListeners=function(){t.listeners&&(Object.keys(t.listeners).forEach(function(e){t.canvas.removeEventListener(e,t.listeners[e])}),delete t.listeners)},e.render=function(){var e=t.canvas.getContext("2d");e.imageSmoothingEnabled=!0;var n=_s(t.size,2),r=n[0],i=n[1],a=t.style.padding,o=[Math.floor(t.style.iconSize+a),Math.floor(a),Math.ceil(r-2*a-t.style.iconSize),Math.ceil(i-2*a)];if(t.graphArea=o,e.clearRect(0,0,r,i),e.lineJoin="round",e.fillStyle=t.style.backgroundColor,e.fillRect.apply(e,o),t.style.iconSize>1){var s=Math.round(t.style.iconSize/2-t.style.strokeWidth),u=Math.round(s+a+t.style.strokeWidth);e.beginPath(),e.lineWidth=t.style.buttonStrokeWidth,e.strokeStyle=t.style.buttonStrokeColor,e.arc(u-a/2,u,s,0,2*Math.PI,!1),e.fillStyle=t.style.buttonFillColor,e.fill(),e.stroke(),e.moveTo(u-s+t.style.strokeWidth+2-a/2,u),e.lineTo(u+s-t.style.strokeWidth-2-a/2,u),e.stroke(),e.moveTo(u-a/2,u-s+t.style.strokeWidth+2),e.lineTo(u-a/2,u+s-t.style.strokeWidth-2),e.stroke(),-1===t.selectedGaussian?(e.fillStyle=t.style.buttonDisableFillColor,e.lineWidth=t.style.buttonDisableStrokeWidth,e.strokeStyle=t.style.buttonDisableStrokeColor):(e.fillStyle=t.style.buttonFillColor,e.lineWidth=t.style.buttonStrokeWidth,e.strokeStyle=t.style.buttonStrokeColor),e.beginPath(),e.arc(u-a/2,u+a/2+t.style.iconSize,s,0,2*Math.PI,!1),e.fill(),e.stroke(),e.moveTo(u-s+t.style.strokeWidth+2-a/2,u+a/2+t.style.iconSize),e.lineTo(u+s-t.style.strokeWidth-2-a/2,u+a/2+t.style.iconSize),e.stroke()}if(t.histogram&&zs(e,o,t.histogram,{lineWidth:1,strokeStyle:t.style.histogramColor,fillStyle:t.style.histogramColor}),zs(e,o,t.opacities,{lineWidth:t.style.strokeWidth,strokeStyle:t.style.strokeColor}),t.colorTransferFunction&&t.colorTransferFunction.getSize()){var l=t.dataRange||t.colorTransferFunction.getMappingRange();t.colorCanvas&&t.colorCanvasMTime===t.colorTransferFunction.getMTime()||(t.colorCanvasMTime=t.colorTransferFunction.getMTime(),t.colorCanvas=function(e,t,n,r){var i=r||document.createElement("canvas");i.setAttribute("width",t),i.setAttribute("height",256);for(var a=i.getContext("2d"),o=e.getUint8Table(n[0],n[1],t,4),s=a.getImageData(0,0,t,256),u=0;u<256;u++)s.data.set(o,4*u*t);for(var l=256*t*4,c=4*t,f=3;f<l;f+=4)s.data[f]=255-Math.floor(f/c);return a.putImageData(s,0,0),i}(t.colorTransferFunction,o[2],l,t.colorCanvas)),e.save(),zs(e,o,t.opacities,{lineWidth:1,strokeStyle:"rgba(0,0,0,0)",fillStyle:"rgba(0,0,0,1)",clip:!0}),e.drawImage(t.colorCanvas,o[0],o[1]),e.restore()}else t.backgroundImage&&(t.colorCanvas=function(e,t,n){var r=n||document.createElement("canvas");return r.setAttribute("width",t),r.setAttribute("height",256),r.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,t,256),r}(t.backgroundImage,o[2],t.colorCanvas),e.save(),zs(e,o,t.opacities,{lineWidth:1,strokeStyle:"rgba(0,0,0,0)",fillStyle:"rgba(0,0,0,1)",clip:!0}),e.drawImage(t.colorCanvas,o[0],o[1]),e.restore());var c=t.gaussians[t.activeGaussian]||t.gaussians[t.selectedGaussian];if(c){zs(e,o,Bs([c],o[2]),{lineWidth:t.style.activeStrokeWidth,strokeStyle:t.style.activeColor});var f=o[0]+c.position*o[2],d=o[1]+(1-c.height)*o[3],p=o[1]+(1-.5*c.height)*o[3],h=o[1]+o[3],g=c.width*o[2];e.lineWidth=t.style.handleWidth,e.strokeStyle=t.style.handleColor,e.fillStyle=t.style.backgroundColor,e.beginPath(),e.moveTo(f,o[1]+(1-c.height)*o[3]),e.lineTo(f,o[1]+o[3]),e.stroke(),e.beginPath(),e.arc(f,d,6,0,2*Math.PI),e.fill(),e.stroke();var m=Math.min(.1*g,c.height*o[3]*.2);e.beginPath(),e.rect(f-m,p-m,2*m,2*m),e.fill(),e.stroke(),e.beginPath();var v=.8*g;e.rect(f-v,h-5,2*v,10),e.fill(),e.stroke()}},e.getOpacityNodes=function(e){for(var n=e||t.dataRange,r=(n[1]-n[0])/(t.opacities.length-1),i=[],a=0;a<t.opacities.length;a++){var o=n[0]+r*a,s=t.opacities[a];i.push({x:o,y:s,midpoint:.5,sharpness:0})}return i},e.applyOpacity=function(t,n){var r=e.getOpacityNodes(n);t.setNodes(r)},e.getOpacityRange=function(e){for(var n=e||t.dataRange,r=(n[1]-n[0])/(t.opacities.length-1),i=t.opacities.length-1,a=0,o=0;o<t.opacities.length;o++)t.opacities[o]>0&&(i=Math.min(i,o)),t.opacities[o]>0&&(a=Math.max(a,o));return[n[0]+i*r,n[0]+a*r]},e.onModified(e.render),e.setSize.apply(e,Ls(t.size))}var qs={histogram:[],numberOfBins:256,histogramArray:null,dataRange:[0,1],gaussians:[],opacities:[],size:[600,300],piecewiseSize:256,colorCanvasMTime:0,style:{backgroundColor:"rgba(255, 255, 255, 1)",histogramColor:"rgba(200, 200, 200, 0.5)",strokeColor:"rgb(0, 0, 0)",activeColor:"rgb(0, 0, 150)",buttonDisableFillColor:"rgba(255, 255, 255, 0.5)",buttonDisableStrokeColor:"rgba(0, 0, 0, 0.5)",buttonStrokeColor:"rgba(0, 0, 0, 1)",buttonFillColor:"rgba(255, 255, 255, 1)",handleColor:"rgb(0, 150, 0)",strokeWidth:2,activeStrokeWidth:3,buttonStrokeWidth:1.5,handleWidth:3,iconSize:20,padding:10},activeGaussian:-1,selectedGaussian:-1};function Xs(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,qs,n),h.a.obj(e,t),h.a.setGet(e,t,["piecewiseSize","numberOfBins","colorTransferFunction","backgroundImage"]),h.a.get(e,t,["size","canvas","gaussians"]),h.a.event(e,t,"opacityChange"),h.a.event(e,t,"animation"),Qs(e,t)}var Ks=h.a.newInstance(Xs,"vtkPiecewiseGaussianWidget"),Zs=Object.assign({newInstance:Ks,extend:Xs},Ys),Js=n(31),$s=n.n(Js);function eu(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var tu=Es.rgbPresetNames.map(function(e){return'<option value="'.concat(e,'">').concat(e,"</option>")});var nu={size:[600,300],expanded:!0,rescaleColorMap:!1};function ru(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,nu,n),h.a.obj(e,t),h.a.setGet(e,t,["actor","renderWindow","rescaleColorMap"]),h.a.get(e,t,["widget"]),function(e,t){function n(){var e=!!Number(t.el.querySelector(".js-shadow").value);t.actor.getProperty().setShade(e),t.renderWindow.render()}function r(){var e=t.actor.getMapper().getInputData(),n=e.getPointData().getScalars()||e.getPointData().getArrays()[0],r=t.rescaleColorMap?t.colorDataRange:n.getRange(),i=Es.getPresetByName(t.el.querySelector(".js-color-preset").value),a=t.actor.getProperty().getRGBTransferFunction(0);a.applyColorMap(i),a.setMappingRange.apply(a,eu(r)),a.updateRange(),t.renderWindow.render()}function i(){var e=Number(t.el.querySelector(".js-spacing").value),n=t.actor.getMapper().getInputData(),r=.7*Math.sqrt(n.getSpacing().map(function(e){return e*e}).reduce(function(e,t){return e+t},0));t.actor.getMapper().setSampleDistance(r*Math.pow(2,3*e-1.5)),t.renderWindow.render()}function a(){var e=Number(t.el.querySelector(".js-edge").value);if(0===e)t.actor.getProperty().setUseGradientOpacity(0,!1);else{var n=t.actor.getMapper().getInputData(),r=(n.getPointData().getScalars()||n.getPointData().getArrays()[0]).getRange();t.actor.getProperty().setUseGradientOpacity(0,!0);var i=Math.max(0,e-.3)/.7;t.actor.getProperty().setGradientOpacityMinimumValue(0,.2*(r[1]-r[0])*i*i),t.actor.getProperty().setGradientOpacityMaximumValue(0,1*(r[1]-r[0])*e*e)}t.renderWindow.render()}t.classHierarchy.push("vtkVolumeController"),t.el=document.createElement("div"),t.el.setAttribute("class",$s.a.container),t.widget=Zs.newInstance({numberOfBins:256,size:t.size}),e.setupContent=function(o,s,u){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"1",c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"erdc_rainbow_bright";e.setActor(s),e.setRenderWindow(o);var f=t.actor.getMapper().getInputData(),d=f.getPointData().getScalars()||f.getPointData().getArrays()[0],p=t.actor.getProperty().getRGBTransferFunction(0),h=t.actor.getProperty().getScalarOpacity(0),g=u?"DarkBG":"BrightBG",m={};["button","presets","shadow"].forEach(function(e){m[e]=$s.a["".concat(e).concat(g)]}),t.el.innerHTML='\n      <div class="'.concat($s.a.line,'">\n        <div class="').concat(m.button,' js-button">').concat(fs.a,'</div>\n        <select class="').concat(m.shadow,' js-shadow js-toggle">\n          <option value="1">Use Shadow</option>\n          <option value="0">No Shadow</option>\n        </select>\n        <select class="').concat(m.presets,' js-color-preset js-toggle">\n          ').concat(tu,'\n        </select>\n      </div>\n      <div class="').concat($s.a.line,' js-toggle">\n        <div class="').concat($s.a.sliderEntry,'">\n          <div class="').concat($s.a.sliderIcon,'">').concat(ps.a,'</div>\n          <input type="range" min="0" max="1" value="0.4" step="0.01" class="').concat($s.a.slider,' js-spacing" />\n        </div>\n        <div class="').concat($s.a.sliderEntry,'">\n          <div class="').concat($s.a.sliderIcon,'">').concat(ls.a,'</div>\n          <input type="range" min="0" max="1" value="0.2" step="0.01" class="').concat($s.a.slider,' js-edge" />\n        </div>\n      </div>\n      <div class="').concat($s.a.piecewiseEditor,' js-pwf js-toggle"></div>\n    ');var v=t.el.querySelector(".js-button"),y=t.el.querySelector(".js-shadow"),b=t.el.querySelector(".js-color-preset"),M=t.el.querySelector(".js-spacing"),x=t.el.querySelector(".js-edge"),w=t.el.querySelector(".js-pwf");t.widget.updateStyle({backgroundColor:"rgba(255, 255, 255, 0.6)",histogramColor:"rgba(100, 100, 100, 0.5)",strokeColor:"rgb(0, 0, 0)",activeColor:"rgb(255, 255, 255)",handleColor:"rgb(50, 150, 50)",buttonDisableFillColor:"rgba(255, 255, 255, 0.5)",buttonDisableStrokeColor:"rgba(0, 0, 0, 0.5)",buttonStrokeColor:"rgba(0, 0, 0, 1)",buttonFillColor:"rgba(255, 255, 255, 1)",strokeWidth:2,activeStrokeWidth:3,buttonStrokeWidth:1.5,handleWidth:3,iconSize:0,padding:10}),t.widget.addGaussian(.5,1,.5,.5,.4),t.widget.setDataArray(d.getData()),t.widget.setColorTransferFunction(p),t.widget.applyOpacity(h),t.widget.setContainer(w),t.widget.bindMouseListeners(),t.colorDataRange=t.widget.getOpacityRange(),v.addEventListener("click",e.toggleVisibility),y.addEventListener("change",n),b.addEventListener("change",r),M.addEventListener("input",i),x.addEventListener("input",a),t.widget.onOpacityChange(function(){t.widget.applyOpacity(h),t.colorDataRange=t.widget.getOpacityRange(),t.rescaleColorMap&&r(),t.renderWindow.getInteractor().isAnimating()||t.renderWindow.render()}),t.widget.onAnimation(function(e){e?t.renderWindow.getInteractor().requestAnimation(t.widget):(t.renderWindow.getInteractor().cancelAnimation(t.widget),t.renderWindow.render())}),p.onModified(function(){t.widget.render(),t.renderWindow.getInteractor().isAnimating()||t.renderWindow.render()}),y.value=Number(l)?"1":"0",b.value=c,n(),r(),i(),a()},e.setContainer=function(n){t.container&&t.container!==n&&t.container.removeChild(t.el),t.container!==n&&(t.container=n,t.container&&t.container.appendChild(t.el),e.modified())};var o=e.setRescaleColorMap;e.setRescaleColorMap=function(e){return!!o(e)&&(r(),!0)},e.toggleVisibility=function(){e.setExpanded(!e.getExpanded())},e.setExpanded=function(e){var n=t.el.querySelectorAll(".js-toggle"),r=n.length;if(t.expanded=e,t.expanded)for(;r--;)n[r].style.display="flex";else for(;r--;)n[r].style.display="none"},e.getExpanded=function(){return t.expanded},e.setSize=t.widget.setSize,e.render=t.widget.render,e.onAnimation=t.widget.onAnimation,e.onModified(e.render),e.setSize.apply(e,eu(t.size))}(e,t)}var iu=h.a.newInstance(ru,"vtkVolumeController"),au={vtkCornerAnnotation:es,vtkFPSMonitor:ss,vtkIcons:ms,vtkSlider:Cs,vtkVolumeController:{newInstance:iu,extend:ru}};var ou={widgetRep:null,parent:null};function su(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ou,n),Ma.extend(e,t,n),e.setEnabled(!1),e.setPriority(.5),h.a.setGet(e,t,["widgetRep","parent"]),function(e,t){t.classHierarchy.push("vtkAbstractWidget");var n=Object.assign({},e);e.createDefaultRepresentation=function(){},e.setEnabled=function(r){if(r!==t.enabled){if(t.interactor){var i=t.interactor.getCurrentRenderer();i&&t.widgetRep&&i.removeViewProp(t.widgetRep)}if(n.setEnabled(r),r){if(!t.interactor)return;var a=t.interactor.getCurrentRenderer();if(!a)return;e.createDefaultRepresentation(),t.widgetRep.setRenderer(a),t.widgetRep.buildRepresentation(),a.addViewProp(t.widgetRep)}}},e.render=function(){!t.parent&&t.interactor&&t.interactor.render()}}(e,t)}var uu={newInstance:h.a.newInstance(su,"vtkAbstractWidget"),extend:su},lu=n(5),cu=n(6);var fu={callback:null,useZValues:!1};function du(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,fu,n),cu.a.extend(e,t,n),h.a.setGet(e,t,["callback","useZValues"]),function(e,t){t.classHierarchy.push("vtkPixelSpaceCallbackMapper"),t.callback||(t.callback=function(){}),e.invokeCallback=function(e,n,r,i,a){if(t.callback){var o=n.getCompositeProjectionMatrix(r,-1,1);Ye.c.transpose(o,o);for(var s=e.getPoints(),u=Ye.e.fromValues(0,0,0),l=i.usize,c=l/2,f=i.vsize/2,d=[],p=0;p<s.getNumberOfPoints();p+=1){var h=s.getPoint(p);u[0]=h[0],u[1]=h[1],u[2]=h[2],Ye.e.transformMat4(u,u,o);var g=[u[0]*c+c,u[1]*f+f,u[2],0];if(a){var m=4*(Math.floor(g[1])*l+Math.floor(g[0])),v=(a[m]/255*256+a[m+1]/255)/257;g[3]=2*v-1}d.push(g)}t.callback(d,n,r,a)}}}(e,t)}var pu={newInstance:h.a.newInstance(du,"vtkPixelSpaceCallbackMapper"),extend:du},hu={OUTSIDE:0,NEARBY:1,SELECTING:2,TRANSLATING:3,SCALING:4},gu={InteractionState:hu},mu={DISPLAY:0,NORMALIZED_DISPLAY:1,VIEWPORT:2,NORMALIZED_VIEWPORT:3,VIEW:4,WORLD:5,USERDEFINED:6},vu={Coordinate:mu},yu=vu.Coordinate,bu=h.a.vtkErrorMacro;var Mu={coordinateSystem:yu.WORLD,value:[0,0,0],renderer:null,referenceCoordinate:null,computing:0,computedWorldValue:[0,0,0],computedDoubleDisplayValue:[0,0]};function xu(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Mu,n),h.a.obj(e,t),h.a.set(e,t,["property"]),h.a.get(e,t,["value"]),h.a.setGet(e,t,["coordinateSystem","referenceCoordinate","renderer"]),h.a.getArray(e,t,["value"],3),function(e,t){t.classHierarchy.push("vtkCoordinate"),e.setValue=function(){if(t.deleted)return bu("instance deleted - cannot call any method"),!1;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=r;if(1===a.length&&Array.isArray(a[0])&&(a=a[0]),2===a.length)return e.setValue(a[0],a[1],0),!0;if(3!==a.length)throw new RangeError("Invalid number of values for array setter");var o=!1;return t.value.forEach(function(e,t){if(e!==a[t]){if(o)return;o=!0}}),o&&(t.value=[].concat(a),e.modified()),!0},e.setCoordinateSystemToDisplay=function(){e.setCoordinateSystem(yu.DISPLAY)},e.setCoordinateSystemToNormalizedDisplay=function(){e.setCoordinateSystem(yu.NORMALIZED_DISPLAY)},e.setCoordinateSystemToViewport=function(){e.setCoordinateSystem(yu.VIEWPORT)},e.setCoordinateSystemToNormalizedViewport=function(){e.setCoordinateSystem(yu.NORMALIZED_VIEWPORT)},e.setCoordinateSystemToView=function(){e.setCoordinateSystem(yu.VIEW)},e.setCoordinateSystemToWorld=function(){e.setCoordinateSystem(yu.WORLD)},e.getCoordinateSystemAsString=function(){return h.a.enumToString(yu,t.coordinateSystem)},e.getComputedWorldValue=function(n){var r=t.computedWorldValue;if(t.computing)return r;t.computing=1,r[0]=t.value[0],r[1]=t.value[1],r[2]=t.value[2];var i=n;if(t.renderer&&(i=t.renderer),!i){if(t.coordinateSystem===yu.WORLD){if(t.referenceCoordinate){var a=t.referenceCoordinate.getComputedWorldValue(i);r[0]+=a[0],r[1]+=a[1],r[2]+=a[2]}t.computing=0}else bu("Attempt to compute world coordinates from another coordinate system without a renderer");return r}var o=null;if(!i||!i.getRenderWindow().getViews())return t.computedWorldValue;if(o=i.getRenderWindow().getViews()[0],t.referenceCoordinate&&t.coordinateSystem!==yu.WORLD){var s=t.referenceCoordinate.getComputedDoubleDisplayValue(i),u=[s[0],s[1],0];switch(t.coordinateSystem){case yu.NORMALIZED_DISPLAY:u=o.displayToNormalizedDisplay(u[0],u[1],u[2]);break;case yu.VIEWPORT:u=o.displayToNormalizedDisplay(u[0],u[1],u[2]),u=o.normalizedDisplayToViewport(u[0],u[1],u[2],i);break;case yu.NORMALIZED_VIEWPORT:u=o.displayToNormalizedDisplay(u[0],u[1],u[2]),u=o.normalizedDisplayToViewport(u[0],u[1],u[2],i),u=o.viewportToNormalizedViewport(u[0],u[1],u[2],i);break;case yu.VIEW:u=o.displayToNormalizedDisplay(u[0],u[1],u[2]),u=o.normalizedDisplayToViewport(u[0],u[1],u[2],i),u=o.viewportToNormalizedViewport(u[0],u[1],u[2],i),u=i.normalizedViewportToView(u[0],u[1],u[2])}r[0]+=u[0],r[1]+=u[1],r[2]+=u[2]}var l=o.getViewportSize(i),c=l[0]/l[1];switch(t.coordinateSystem){case yu.DISPLAY:r=o.displayToNormalizedDisplay(r[0],r[1],r[2]),r=o.normalizedDisplayToViewport(r[0],r[1],r[2],i),r=o.viewportToNormalizedViewport(r[0],r[1],r[2],i),r=i.normalizedViewportToView(r[0],r[1],r[2]),r=i.viewToWorld(r[0],r[1],r[2],c);break;case yu.NORMALIZED_DISPLAY:r=o.normalizedDisplayToViewport(r[0],r[1],r[2],i),r=o.viewportToNormalizedViewport(r[0],r[1],r[2],i),r=i.normalizedViewportToView(r[0],r[1],r[2]),r=i.viewToWorld(r[0],r[1],r[2],c);break;case yu.VIEWPORT:r=o.viewportToNormalizedViewport(r[0],r[1],r[2],i),r=i.normalizedViewportToView(r[0],r[1],r[2]),r=i.viewToWorld(r[0],r[1],r[2],c);break;case yu.NORMALIZED_VIEWPORT:r=i.normalizedViewportToView(r[0],r[1],r[2]),r=i.viewToWorld(r[0],r[1],r[2],c);break;case yu.VIEW:r=i.viewToWorld(r[0],r[1],r[2],c)}if(t.referenceCoordinate&&t.coordinateSystem===yu.WORLD){var f=e.getComputedWorldValue(i);r[0]+=f[0],r[1]+=f[1],r[2]+=f[2]}return t.computing=0,t.computedWorldValue=r.slice(0),r},e.getComputedViewportValue=function(t){var n=e.getComputedDoubleViewportValue(t);return[f.round(n[0]),f.round(n[1])]},e.getComputedDisplayValue=function(t){var n=e.getComputedDoubleDisplayValue(t);return[f.floor(n[0]),f.floor(n[1])]},e.getComputedLocalDisplayValue=function(n){var r=n;t.renderer&&(r=t.renderer);var i=e.getComputedDisplayValue(r);return r?r&&r.getRenderWindow().getViews()?(i=r.getRenderWindow().getViews()[0].displayToLocalDisplay(i[0],i[1],i[2]),[f.round(i[0]),f.round(i[1])]):i:(bu("Attempt to convert to local display coordinates without a renderer"),i)},e.getComputedDoubleViewportValue=function(n){var r=n;t.renderer&&(r=t.renderer);var i=e.getComputedDoubleDisplayValue(r);if(!r)return i;var a=null;return r&&r.getRenderWindow().getViews()?(i=(a=r.getRenderWindow().getViews()[0]).displayToNormalizedDisplay(i[0],i[1],i[2]),[(i=a.normalizedDisplayToViewport(i[0],i[1],i[2],r))[0],i[1]]):i},e.getComputedDoubleDisplayValue=function(e){if(t.computing)return t.computedDoubleDisplayValue;t.computing=1;var n=t.value.slice(0),r=e;if(t.renderer&&(r=t.renderer),!r){if(t.coordinateSystem===yu.DISPLAY){if(t.computedDoubleDisplayValue[0]=n[0],t.computedDoubleDisplayValue[1]=n[1],t.referenceCoordinate){var i=t.referenceCoordinate.getComputedDoubleDisplayValue();t.computedDoubleDisplayValue[0]+=i[0],t.computedDoubleDisplayValue[1]+=i[1]}}else t.computedDoubleDisplayValue[0]=Number.MAX_VALUE,t.computedDoubleDisplayValue[1]=Number.MAX_VALUE,bu("Request for coordinate transformation without required viewport");return t.computedDoubleDisplayValue}var a=null;if(!r||!r.getRenderWindow().getViews())return n;var o=(a=r.getRenderWindow().getViews()[0]).getViewportSize(r),s=o[0]/o[1];switch(t.coordinateSystem){case yu.WORLD:if(t.referenceCoordinate){var u=t.referenceCoordinate.getComputedWorldValue(r);n[0]+=u[0],n[1]+=u[1],n[2]+=u[2]}n=r.worldToView(n[0],n[1],n[2],s),n=r.viewToNormalizedViewport(n[0],n[1],n[2]),n=a.normalizedViewportToViewport(n[0],n[1],n[2]),n=a.viewportToNormalizedDisplay(n[0],n[1],n[2],r),n=a.normalizedDisplayToDisplay(n[0],n[1],n[2]);break;case yu.VIEW:n=r.viewToNormalizedViewport(n[0],n[1],n[2]),n=a.normalizedViewportToViewport(n[0],n[1],n[2]),n=a.viewportToNormalizedDisplay(n[0],n[1],n[2],r),n=a.normalizedDisplayToDisplay(n[0],n[1],n[2]);break;case yu.NORMALIZED_VIEWPORT:if(n=a.normalizedViewportToViewport(n[0],n[1],n[2]),t.referenceCoordinate){var l=t.referenceCoordinate.getComputedDoubleViewportValue(r);n[0]+=l[0],n[1]+=l[1]}n=a.viewportToNormalizedDisplay(n[0],n[1],n[2],r),n=a.normalizedDisplayToDisplay(n[0],n[1],n[2]);break;case yu.VIEWPORT:if(t.referenceCoordinate){var c=t.referenceCoordinate.getComputedDoubleViewportValue(r);n[0]+=c[0],n[1]+=c[1]}n=a.viewportToNormalizedDisplay(n[0],n[1],n[2],r),n=a.normalizedDisplayToDisplay(n[0],n[1],n[2]);break;case yu.NORMALIZED_DISPLAY:n=a.normalizedDisplayToDisplay(n[0],n[1],n[2]);break;case yu.USERDEFINED:n=t.value.slice(0)}if(t.referenceCoordinate&&(t.coordinateSystem===yu.DISPLAY||t.coordinateSystem===yu.NORMALIZED_DISPLAY)){var f=t.referenceCoordinate.getComputedDoubleDisplayValue(r);n[0]+=f[0],n[1]+=f[1]}return t.computedDoubleDisplayValue[0]=n[0],t.computedDoubleDisplayValue[1]=n[1],t.computing=0,t.computedDoubleDisplayValue},e.getComputedValue=function(n){var r=n;switch(t.renderer&&(r=t.renderer),t.coordinateSystem){case yu.WORLD:return e.getComputedWorldValue(r);case yu.VIEW:case yu.NORMALIZED_VIEWPORT:case yu.VIEWPORT:var i=e.getComputedViewportValue(r);t.computedWorldValue[0]=i[0],t.computedWorldValue[1]=i[1];break;case yu.NORMALIZED_DISPLAY:case yu.DISPLAY:var a=t.getComputedDisplayValue(r);t.computedWorldValue[0]=a[0],t.computedWorldValue[1]=a[1]}return t.computedWorldValue}}(e,t)}var wu=h.a.newInstance(xu,"vtkCoordinate"),Au=Object.assign({newInstance:wu,extend:xu},vu);var Tu={pixelTolerance:5,worldTolerance:.001};function Cu(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Tu,n),h.a.obj(e,t),h.a.setGet(e,t,["pixelTolerance","worldTolerance"]),function(e,t){t.classHierarchy.push("vtkPointPlacer"),e.computeWorldPosition=function(e,t,n){if(e){var r=Au.newInstance();return r.setCoordinateSystemToDisplay(),r.setValue(t[0],t[1]),n[0]=r.getComputedWorldValue(e)[0],n[1]=r.getComputedWorldValue(e)[1],n[2]=r.getComputedWorldValue(e)[2],1}return 0}}(e,t)}var Su={newInstance:h.a.newInstance(Cu,"vtkPointPlacer"),extend:Cu},Du=n(29),Iu=h.a.vtkErrorMacro;var Eu={renderer:null,interactionState:0,startEventPosition:[0,0,0],lastEventPosition:[0,0,0],placeFactor:.5,placed:0,handleSize:.05,validPick:0,initialBounds:[0,1,0,1,0,1],initialLength:0,needToRender:0};function Nu(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Eu,n),Du.a.extend(e,t,n),h.a.setGet(e,t,["renderer","handleSize","placeFactor","needToRender","interactionState"]),function(e,t){t.classHierarchy.push("vtkWidgetRepresentation"),e.getPickedActor=function(e,n,r,i){return i.pick(e,n,r,t.renderer),i.getActors[0]},e.adjustBounds=function(e,n,r){6===e.length?(r[0]=(e[0]+e[1])/2,r[1]=(e[2]+e[3])/2,r[2]=(e[4]+e[5])/2,n[0]=r[0]+t.placeFactor*(e[0]-r[0]),n[1]=r[0]+t.placeFactor*(e[1]-r[0]),n[2]=r[1]+t.placeFactor*(e[2]-r[1]),n[3]=r[1]+t.placeFactor*(e[3]-r[1]),n[4]=r[2]+t.placeFactor*(e[4]-r[2]),n[5]=r[2]+t.placeFactor*(e[5]-r[2])):Iu("vtkWidgetRepresentation::adjustBounds Can't process bounds, not enough values...")},e.sizeHandlesInPixels=function(e,n){var r=t.renderer;if(!t.validPick||!r||!r.getActiveCamera())return t.handleSize*e*t.initialLength;var i=Ma.computeWorldToDisplay(r,n[0],n[1],n[2]),a=i[2],o=i[0]-t.handleSize/2,s=i[1]-t.handleSize/2,u=Ma.computeDisplayToWorld(r,o,s,a);o=i[0]+t.handleSize/2,s=i[1]+t.handleSize/2;for(var l=Ma.computeDisplayToWorld(r,o,s,a),c=0,f=0;f<3;f++)c+=(l[f]-u[f])*(l[f]-u[f]);return e*(Math.sqrt(c)/2)},e.sizeHandlesRelativeToViewport=function(e,n){var r=t.renderer;if(!t.validPick||!r||!r.getActiveCamera())return t.handleSize*e*t.initialLength;var i=r.getViewport(),a=r.getRenderWindow().getViews()[0].getViewportSize(r),o=Ma.computeWorldToDisplay(r,n[0],n[1],n[2])[2],s=a[0]*i[0],u=a[1]*i[1],l=Ma.computeDisplayToWorld(r,s,u,o);s=a[0]*i[2],u=a[1]*i[3];for(var c=Ma.computeDisplayToWorld(r,s,u,o),f=0,d=0;d<3;d++)f+=(c[d]-l[d])*(c[d]-l[d]);return e*(Math.sqrt(f)/2)}}(e,t)}var Ou={newInstance:h.a.newInstance(Nu,"vtkWidgetRepresentation"),extend:Nu},_u=gu.InteractionState;var Lu={displayPosition:null,worldPosition:null,tolerance:15,activeRepresentation:0,constrained:0,pointPlacer:null};function Pu(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Lu,n),Ou.extend(e,t,n),t.displayPosition=Au.newInstance(),t.displayPosition.setCoordinateSystemToDisplay(),t.worldPosition=Au.newInstance(),t.worldPosition.setCoordinateSystemToWorld(),t.pointPlacer=Su.newInstance(),t.interactionState=_u.OUTSIDE,h.a.setGet(e,t,["activeRepresentation","tolerance"]),function(e,t){t.classHierarchy.push("vtkHandleRepresentation"),e.setDisplayPosition=function(e){if(t.renderer&&t.pointPlacer){var n=[];t.pointPlacer.computeWorldPosition(t.renderer,e,n)&&(t.displayPosition.setValue(e),t.worldPosition.setValue(n))}else t.displayPosition.setValue(e)},e.getDisplayPosition=function(e){if(t.renderer){var n=t.worldPosition.getComputedDisplayValue(t.renderer);t.displayPosition.setValue(n[0],n[1],0)}e[0]=t.displayPosition.getValue()[0],e[1]=t.displayPosition.getValue()[1],e[2]=t.displayPosition.getValue()[2]},e.getDisplayPosition=function(){if(t.renderer){var e=t.worldPosition.getComputedDisplayValue(t.renderer);t.displayPosition.setValue(e[0],e[1],0)}return t.displayPosition.getValue()},e.setWorldPosition=function(e){t.worldPosition.setValue(e)},e.getWorldPosition=function(e){t.worldPosition.getValue(e)},e.getWorldPosition=function(){return t.worldPosition.getValue()}}(e,t)}var ku=h.a.newInstance(Pu,"vtkHandleRepresentation"),Ru=Object.assign({newInstance:ku,extend:Pu},gu);function ju(e,t){t.classHierarchy.push("vtkLabelRepresentation");var n=Object.assign({},e);e.buildRepresentation=function(){null!==t.labelText&&e.setLabelText(t.labelText),e.modified()},e.getActors=function(){return[t.actor]},e.getNestedProps=function(){return e.getActors()},e.computeInteractionState=function(e){if(t.canvas){var n=t.canvas.height,r=t.canvas.width,i=t.canvas?{left:Number(t.canvas.style.left.split("px")[0]),bottom:Number(t.canvas.style.bottom.split("px")[0])}:null;e[0]>=i.left&&e[0]<=i.left+r&&e[1]>=i.bottom&&e[1]<=i.bottom+n?t.interactionState=hu.SELECTING:t.interactionState=hu.OUTSIDE}return t.interactionState},e.startComplexWidgetInteraction=function(e){t.startEventPosition[0]=e[0],t.startEventPosition[1]=e[1],t.startEventPosition[2]=0,t.lastEventPosition[0]=e[0],t.lastEventPosition[1]=e[1]},e.complexWidgetInteraction=function(n){if(t.interactionState===hu.SELECTING){var r=t.point.getCenter(),i=Ma.computeWorldToDisplay(t.renderer,r[0],r[1],r[2])[2],a=Ma.computeDisplayToWorld(t.renderer,t.lastEventPosition[0],t.lastEventPosition[1],i),o=Ma.computeDisplayToWorld(t.renderer,n[0],n[1],i);e.moveFocus(a,o),t.lastEventPosition[0]=n[0],t.lastEventPosition[1]=n[1],e.modified()}},e.setWorldPosition=function(r){t.point.setCenter(r),n.setWorldPosition(t.point.getCenter()),e.modified()},e.setDisplayPosition=function(r){n.setDisplayPosition(r),e.setWorldPosition(t.worldPosition.getValue())},e.moveFocus=function(n,r){var i=[];f.subtract(r,n,i);var a=t.point.getCenter();f.add(a,i,a),e.setWorldPosition(a)},e.getBounds=function(){var e=t.point.getCenter(),n=[];return n[0]=t.placeFactor*(e[0]-1),n[1]=t.placeFactor*(e[0]+1),n[2]=t.placeFactor*(e[1]-1),n[3]=t.placeFactor*(e[1]+1),n[4]=t.placeFactor*(e[2]-1),n[5]=t.placeFactor*(e[2]+1),n},e.setContainer=function(n){t.container&&t.container!==n&&t.container.removeChild(t.canvas),t.container!==n&&(t.container=n,t.container&&t.container.appendChild(t.canvas),e.modified())},e.setLabelStyle=function(n){t.labelStyle=Object.assign({},t.labelStyle,n),e.modified()},e.setSelectLabelStyle=function(n){t.selectLabelStyle=Object.assign({},t.selectLabelStyle,n),e.modified()},e.updateLabel=function(){if(t.context&&t.canvas&&(t.context.clearRect(0,0,t.canvas.width,t.canvas.height),t.actor.getVisibility())){var e=t.highlight?t.selectLabelStyle:t.labelStyle,n=/\r?\n/.exec(t.labelText),r=null!==n?n[0]:null,i=t.labelText.split(r),a=e.fontSize*(1+e.lineSpace),o=e.fontSize/4,s=2*o+e.fontSize+(i.length-1)*a,u=0;i.forEach(function(e){var n=Math.round(t.context.measureText(e).width);n>u&&(u=n)}),t.canvas.height=Math.round(s),t.canvas.width=u+2*o,t.context.strokeStyle=e.strokeColor,t.context.lineWidth=e.strokeSize,t.context.fillStyle=e.fontColor,t.context.font="".concat(e.fontStyle," ").concat(e.fontSize,"px ").concat(e.fontFamily);var l=o,c=e.fontSize;i.forEach(function(e){t.context.strokeText(e,l,c),t.context.fillText(e,l,c),c+=a})}},e.highlight=function(n){t.highlight=n,e.modified()},e.getCanvasSize=function(){return t.canvas?{height:t.canvas.height,width:t.canvas.width}:null}}var Bu={container:null,labelStyle:{fontColor:"white",fontStyle:"normal",fontSize:15,fontFamily:"Arial",strokeColor:"black",strokeSize:1,lineSpace:.2},labelText:"",selectLabelStyle:{fontColor:"rgb(0, 255, 0)",fontStyle:"normal",fontSize:15,fontFamily:"Arial",strokeColor:"black",strokeSize:1,lineSpace:.2}};function zu(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Bu,n),Ru.extend(e,t,n),e.setPlaceFactor(1),t.canvas=document.createElement("canvas"),t.canvas.style.position="absolute",t.context=t.canvas.getContext("2d"),t.point=Yr.newInstance(),t.point.setNumberOfPoints(1),t.point.setRadius(0),t.mapper=pu.newInstance(),t.mapper.setInputConnection(t.point.getOutputPort()),t.mapper.setCallback(function(n){t.canvas&&(t.canvas.style.left="".concat(Math.round(n[0][0]),"px"),t.canvas.style.bottom="".concat(Math.round(n[0][1]),"px"),e.modified())}),t.actor=lu.a.newInstance(),t.actor.setMapper(t.mapper),t.actorVisibility=!0,t.highlight=!1,t.actor.onModified(function(){t.actorVisibility!==t.actor.getVisibility()&&(t.actorVisibility=t.actor.getVisibility(),e.modified())}),e.onModified(function(){e.updateLabel()}),h.a.setGet(e,t,["labelText"]),h.a.get(e,t,["container","labelText","labelStyle"]),ju(e,t)}var Fu={newInstance:h.a.newInstance(zu,"vtkLabelRepresentation"),extend:zu},Vu={OUTSIDE:0,ONP1:1,ONP2:2,TRANSLATINGP1:3,TRANSLATINGP2:4,ONLINE:5,SCALING:6},Uu=Vu,Gu={NONE:0,X:1,Y:2,Z:3},Wu=n(16);var Hu={renderer:null,selectionPoint:[0,0,0],pickPosition:[0,0,0],pickFromList:0,pickList:[]};function Yu(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Hu,n),h.a.obj(e,t),h.a.get(e,t,["renderer"]),h.a.getArray(e,t,["selectionPoint","pickPosition"]),h.a.setGet(e,t,["pickFromList","pickList"]),function(e,t){t.classHierarchy.push("vtkAbstractPicker"),e.initialize=function(){t.renderer=null,t.selectionPoint[0]=0,t.selectionPoint[1]=0,t.selectionPoint[2]=0,t.pickPosition[0]=0,t.pickPosition[1]=0,t.pickPosition[2]=0},e.initializePickList=function(){t.pickList=[]},e.addPickList=function(e){t.pickList.push(e)},e.deletePickList=function(e){var n=t.pickList.indexOf(e);-1!==n&&t.pickList.splice(n,1)}}(e,t)}var Qu={newInstance:h.a.newInstance(Yu,"vtkAbstractPicker"),extend:Yu},qu=h.a.vtkErrorMacro,Xu=h.a.vtkWarningMacro;function Ku(e,t){t.classHierarchy.push("vtkPicker");var n=Object.assign({},e);e.intersectWithLine=function(e,t,n,r){if(!r)return Number.MAX_VALUE;for(var i=r.getCenter(),a=[],o=0;o<3;o++)a[o]=t[o]-e[o];var s=f.dot(a,a);return 0===s?2:(a[0]*(i[0]-e[0])+a[1]*(i[1]-e[1])+a[2]*(i[2]-e[2]))/s},e.pick=function(r,i){3!==r.length&&Xu("vtkPicker::pick: selectionPt needs three components");var a,o,s,u,l,c,d,p,h,g,m,v=r[0],y=r[1],b=r[2],M=[],x=[],w=[],A=[],T=[],C=[],S=0,D=[],I=!1,E=Ye.f.create(),N=Ye.f.create(),O=[0,0,0,0,0,0],_=[],L=[],P=i.getRenderWindow().getViews()[0];if(n.initialize(),t.actors=[],t.pickedPositions=[],t.mapperPosition[0]=0,t.mapperPosition[1]=0,t.mapperPosition[2]=0,t.mapper=null,t.dataSet=null,t.globalTMin=Number.MAX_VALUE,t.renderer=i,t.selectionPoint[0]=v,t.selectionPoint[1]=y,t.selectionPoint[2]=b,i){var k=i.getActiveCamera();a=k.getPosition(),o=k.getFocalPoint(),M=i.worldToNormalizedDisplay(o[0],o[1],o[2]),b=(M=P.normalizedDisplayToDisplay(M[0],M[1],M[2]))[2];var j=P.displayToNormalizedDisplay(v,y,b),B=P.getViewportSize(i),z=B[0]/B[1];s=i.normalizedDisplayToWorld(j[0],j[1],j[2],z);for(var F=0;F<3;F++)t.pickPosition[F]=s[F];for(var V=0;V<3;V++)x[V]=t.pickPosition[V]-a[V];for(var U=0;U<3;U++)w[U]=o[U]-a[U];f.normalize(w);var G=f.dot(w,x);if(0!==G){if(u=k.getClippingRange(),k.getParallelProjection()){l=u[0]-G,c=u[1]-G;for(var W=0;W<3;W++)A[W]=t.pickPosition[W]+l*w[W],T[W]=t.pickPosition[W]+c*w[W]}else{l=u[0]/G,c=u[1]/G;for(var H=0;H<3;H++)A[H]=a[H]+l*x[H],T[H]=a[H]+c*x[H]}A[3]=1,T[3]=1,d=i.getViewport(),i.getRenderWindow()&&(C=i.getRenderWindow().getViews()[0].getSize()),p=C[0]*d[0],h=C[1]*d[1];var Y=P.displayToNormalizedDisplay(p,h,b);g=i.normalizedDisplayToWorld(Y[0],Y[1],Y[2],z),p=C[0]*d[2],h=C[1]*d[3];var Q=P.displayToNormalizedDisplay(p,h,b);m=i.normalizedDisplayToWorld(Q[0],Q[1],Q[2],z);for(var q=0;q<3;q++)S+=(m[q]-g[q])*(m[q]-g[q]);S=Math.sqrt(S)*t.tolerance,D=t.pickFromList?t.pickList:i.getActors();var X=[];D.forEach(function(n){var r=n.getMapper();if(I=n.getPickable()&&n.getVisibility(),n.getProperty().getOpacity()<=0&&(I=!1),I){t.transformMatrix=n.getMatrix().slice(0),Ye.c.transpose(t.transformMatrix,t.transformMatrix),Ye.c.invert(t.transformMatrix,t.transformMatrix);var i=[t.transformMatrix[0],t.transformMatrix[1],t.transformMatrix[2]],a=[t.transformMatrix[4],t.transformMatrix[5],t.transformMatrix[6]],o=[t.transformMatrix[8],t.transformMatrix[9],t.transformMatrix[10]];X[0]=f.norm(i),X[1]=f.norm(a),X[2]=f.norm(o),Ye.f.transformMat4(E,A,t.transformMatrix),Ye.f.transformMat4(N,T,t.transformMatrix),E[0]/=E[3],E[1]/=E[3],E[2]/=E[3],N[0]/=N[3],N[1]/=N[3],N[2]/=N[3];for(var s=0;s<3;s++)x[s]=N[s]-E[s];if(r&&(O=r.getBounds()),R.intersectBox(O,E,x,L,_)&&(_[0]=e.intersectWithLine(E,N,.333*S*(X[0]+X[1]+X[2]),r),_[0]<Number.MAX_VALUE)){var u=[];u[0]=(1-_[0])*A[0]+_[0]*T[0],u[1]=(1-_[0])*A[1]+_[0]*T[1],u[2]=(1-_[0])*A[2]+_[0]*T[2];for(var l=-1,c=0;c<t.actors.length;c++)if(t.actors[c]===n){l=c;break}if(-1===l)t.actors.push(n),t.pickedPositions.push(u);else{var d=t.pickedPositions[l],p=f.distance2BetweenPoints(A,d);f.distance2BetweenPoints(A,u)<p&&(t.pickedPositions[l]=u)}}}return e.invokePickChange(t.pickedPositions),1})}else Xu("Picker::Pick Cannot process points")}else qu("Picker::Pick Must specify renderer")}}var Zu={tolerance:.025,mapperPosition:[0,0,0],mapper:null,dataSet:null,actors:[],pickedPositions:[],transformMatrix:null,globalTMin:Number.MAX_VALUE};function Ju(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Zu,n),Qu.extend(e,t,n),h.a.setGet(e,t,["tolerance"]),h.a.setGetArray(e,t,["mapperPosition"],3),h.a.get(e,t,["mapper","dataSet","actors","pickedPositions"]),h.a.event(e,t,"pickChange"),Ku(e,t)}var $u={newInstance:h.a.newInstance(Ju,"vtkPicker"),extend:Ju};function el(e,t,n,r){for(var i={planeId:-1,t1:0,t2:1,intersect:0},a=e.getNumberOfClippingPlanes(),o=[],s=0;s<a;s++){e.getClippingPlaneInDataCoords(t,s,o);var u=o[0]*n[0]+o[1]*n[1]+o[2]*n[2]+o[3],l=o[0]*r[0]+o[1]*r[1]+o[2]*r[2]+o[3];if(u<0&&l<0)return 0;if(u<0||l<0){var c=0;if(0!==u&&(c=u/(u-l)),u<0?c>=i.t1&&(i.t1=c,i.planeId=s):c<=i.t2&&(i.t2=c),i.t1>i.t2)return i.intersect=0,i}}return i.intersect=1,i}var tl={clipLineWithPlane:el};function nl(e,t){t.classHierarchy.push("vtkCellPicker");var n=Object.assign({},e);function r(){t.dataSet=null,t.mapper=null,t.cellId=-1,t.pCoords[0]=0,t.pCoords[1]=0,t.pCoords[2]=0,t.cellIJK[0]=0,t.cellIJK[1]=0,t.cellIJK[2]=0,t.mapperNormal[0]=0,t.mapperNormal[1]=0,t.mapperNormal[2]=1,t.pickNormal[0]=0,t.pickNormal[1]=0,t.pickNormal[2]=1}e.initialize=function(){r(),n.initialize()},e.computeSurfaceNormal=function(e,t,n,r){var i=e.getPointData().getNormals();if(!i)return 0;r[0]=0,r[1]=0,r[2]=0;for(var a=[],o=0;o<3;o++)i.getTuple(t.getPointsIds()[o],a),r[0]+=a[0]*n[o],r[1]+=a[1]*n[o],r[2]+=a[2]*n[o];return f.normalize(r),1},e.pick=function(r,i){e.initialize();var a=n.pick(r,i);if(a){var o=i.getActiveCamera(),s=[];if(o.getPosition(s),o.getParallelProjection()){var u=[];o.getFocalPoint(u),t.pickNormal[0]=s[0]-u[0],t.pickNormal[1]=s[1]-u[1],t.pickNormal[2]=s[2]-u[2]}else t.pickNormal[0]=s[0]-t.pickPosition[0],t.pickNormal[1]=s[1]-t.pickPosition[1],t.pickNormal[2]=s[2]-t.pickPosition[2];f.normalize(t.pickNormal)}return a},e.intersectWithLine=function(n,r,i,a){var o=Number.MAX_VALUE,s=el(a,t.transformMatrix,n,r);if(a&&!s.intersect)return Number.MAX_VALUE;if(a.isA("vtkImageMapper")){var u=a.intersectWithLineForCellPicking(n,r);u&&(o=u.t,t.cellIJK=u.ijk,t.pCoords=u.pCoords)}else a.isA("vtkMapper")&&(o=e.intersectActorWithLine(n,r,0,1,i,a));if(o<t.globalTMin){if(t.globalTMin=o,Math.abs(o-0)<1e-14&&s.clippingPlaneId>=0){t.mapperPosition[0]=1*n[0]+0*r[0],t.mapperPosition[1]=1*n[1]+0*r[1],t.mapperPosition[2]=1*n[2]+0*r[2];var l=[];a.getClippingPlaneInDataCoords(t.transformMatrix,s.clippingPlaneId,l),f.normalize(l),t.mapperNormal[0]=-l[0],t.mapperNormal[1]=-l[1],t.mapperNormal[2]=-l[2]}Ye.e.transformMat4(t.pickPosition,t.mapperPosition,t.transformMatrix);var c=t.transformMatrix;t.mapperNormal[0]=c[0]*t.pickNormal[0]+c[4]*t.pickNormal[1]+c[8]*t.pickNormal[2],t.mapperNormal[1]=c[1]*t.pickNormal[0]+c[5]*t.pickNormal[1]+c[9]*t.pickNormal[2],t.mapperNormal[2]=c[2]*t.pickNormal[0]+c[6]*t.pickNormal[1]+c[10]*t.pickNormal[2]}return o},e.intersectActorWithLine=function(n,i,a,o,s,u){var l=Number.MAX_VALUE,c=[0,0,0],d=Number.MAX_VALUE,h=[0,0,0],g=-1,m=We.newInstance(),v=[],y=u.getInputData(),b=[0,0,0],M=[0,0,0];if(b[0]=n[0],b[1]=n[1],b[2]=n[2],M[0]=i[0],M[1]=i[1],M[2]=i[2],0!==a||1!==o)for(var x=0;x<3;x++)b[x]=n[x]*(1-a)+i[x]*a,M[x]=n[x]*(1-o)+i[x]*o;if(y.getPolys)for(var w=y.getPolys(),A=y.getPoints().getData(),T=w.getData(),C=0,S=[-1,-1,-1],D=We.newInstance(),I=p.a.newInstance(),E=0;E<T.length;C++){var N=[0,0,0],O=T[E++];I.setNumberOfPoints(O),I.setNumberOfComponents(3);for(var _=new Array(3*O),L=0,P=0;P<O;P++)S[P]=T[E++],_[L++]=A[3*S[P]],_[L++]=A[3*S[P]+1],_[L++]=A[3*S[P]+2];I.setData(_),D.initialize(I.getNumberOfPoints(),S,I);var k=void 0;if(1===(k=D.intersectWithLine(n,i,s,v,N)).intersect&&k.t<=l+t.tolerance&&k.t>=a&&k.t<=o){var R=D.getParametricDistance(N);if(R<d||R===d&&k.t<l){l=k.t,d=R,g=C,D.deepCopy(m);for(var j=0;j<3;j++)c[j]=v[j],h[j]=N[j]}}}if(g>=0&&l<t.globalTMin){r();for(var B=m.getNumberOfPoints(),z=new Array(B),F=0;F<B;F++)z[F]=0;m.evaluateLocation(h,[],z),t.dataSet=y,t.cellId=g,t.pCoords[0]=h[0],t.pCoords[1]=h[1],t.pCoords[2]=h[2];for(var V=0,U=-1,G=0;G<B;G++)z[G]>V&&(U=G,V=z[G]);-1!==U&&(t.pointId=m.getPointsIds()[U]),t.mapperPosition[0]=c[0],t.mapperPosition[1]=c[1],t.mapperPosition[2]=c[2],e.computeSurfaceNormal(y,m,z,t.mapperNormal)||(t.mapperNormal[0]=n[0]-i[0],t.mapperNormal[1]=n[1]-i[1],t.mapperNormal[2]=n[2]-i[2],f.normalize(t.mapperNormal))}return l}}var rl={cellId:-1,pCoords:[],cellIJK:[],pickNormal:[],mapperNormal:[]};function il(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,rl,n),$u.extend(e,t,n),h.a.getArray(e,t,["pickNormal","mapperNormal","pCoords","cellIJK"]),h.a.get(e,t,["cellId"]),nl(e,t)}var al=h.a.newInstance(il,"vtkCellPicker"),ol=Object.assign({newInstance:al,extend:il},tl);var sl={actor:null,mapper:null,sphere:null,cursorPicker:null,lastPickPosition:[0,0,0],lastEventPosition:[0,0],constraintAxis:-1,translationMode:1,property:null,selectProperty:null,placeFactor:1,waitingForMotion:0,hotSpotSize:.05};function ul(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,sl,n),Ru.extend(e,t,n),h.a.setGet(e,t,["translationMode","property","selectProperty"]),h.a.get(e,t,["actor"]),t.sphere=ri.newInstance(),t.sphere.setThetaResolution(16),t.sphere.setPhiResolution(8),t.mapper=cu.a.newInstance(),t.mapper.setInputConnection(t.sphere.getOutputPort()),t.actor=lu.a.newInstance(),t.actor.setMapper(t.mapper),e.setHandleSize(15),t.currentHandleSize=t.handleSize,t.cursorPicker=ol.newInstance(),t.cursorPicker.setPickFromList(1),t.cursorPicker.initializePickList(),t.cursorPicker.addPickList(t.actor),t.property=Wu.a.newInstance(),t.property.setColor(1,1,1),t.selectProperty=Wu.a.newInstance(),t.selectProperty.setColor(0,1,0),t.actor.setProperty(t.property),function(e,t){t.classHierarchy.push("vtkSphereHandleRepresentation");var n=Object.assign({},e);e.getActors=function(){return[t.actor]},e.getNestedProps=function(){return e.getActors()},e.placeWidget=function(){var n=[];if(Array.isArray(arguments.length<=0?void 0:arguments[0]))n=arguments.length<=0?void 0:arguments[0];else for(var r=0;r<arguments.length;r++)n.push(r<0||arguments.length<=r?void 0:arguments[r]);if(6===n.length){var i=[],a=[];e.adjustBounds(n,i,a),e.setWorldPosition(a);for(var o=0;o<6;o++)t.initialBounds[o]=i[o];t.initialLength=Math.sqrt((i[1]-i[0])*(i[1]-i[0])+(i[3]-i[2])*(i[3]-i[2])+(i[5]-i[4])*(i[5]-i[4]))}},e.setSphereRadius=function(n){t.sphere.setRadius(n),e.modified()},e.getSphereRadius=function(){return t.sphere.getRadius()},e.getBounds=function(){var e=t.sphere.getRadius(),n=t.sphere.getCenter(),r=[];return r[0]=t.placeFactor*(n[0]-e),r[1]=t.placeFactor*(n[0]+e),r[2]=t.placeFactor*(n[1]-e),r[3]=t.placeFactor*(n[1]+e),r[4]=t.placeFactor*(n[2]-e),r[5]=t.placeFactor*(n[2]+e),r},e.setWorldPosition=function(e){t.sphere.setCenter(e),n.setWorldPosition(t.sphere.getCenter())},e.setDisplayPosition=function(r){n.setDisplayPosition(r),e.setWorldPosition(t.worldPosition.getValue())},e.setHandleSize=function(e){n.setHandleSize(e),t.currentHandleSize=t.handleSize},e.computeInteractionState=function(e){t.visibility=1;var n=[e[0],e[1],0];return t.cursorPicker.pick(n,t.renderer),t.cursorPicker.getDataSet()?t.interactionState=hu.SELECTING:(t.interactionState=hu.OUTSIDE,t.activeRepresentation&&(t.visibility=0)),t.interactionState},e.determineConstraintAxis=function(e,n){if(!t.constrained)return-1;if(e>=0&&e<3)return e;if(!t.waitingForMotion){var r=t.cursorPicker.getPickPosition(),i=f.distance2BetweenPoints(r,t.startEventPosition),a=t.hotSpotSize*t.initialLength;return i>a*a?(t.waitingForMotion=0,t.cursorPicker.getCellId()):(t.waitingForMotion=1,t.waitCount=0,-1)}if(t.waitingForMotion&&n){t.waitingForMotion=0;var o=[];return o[0]=Math.abs(n[0]-t.startEventPosition[0]),o[1]=Math.abs(n[1]-t.startEventPosition[1]),o[2]=Math.abs(n[2]-t.startEventPosition[2]),o[0]>o[1]?o[0]>o[2]?0:2:o[1]>o[2]?1:2}return-1},e.startComplexWidgetInteraction=function(n){t.startEventPosition[0]=n[0],t.startEventPosition[1]=n[1],t.startEventPosition[2]=0,t.lastEventPosition[0]=n[0],t.lastEventPosition[1]=n[1];var r=[n[0],n[1],0];t.cursorPicker.pick(r,t.renderer),t.cursorPicker.getDataSet()?(t.interactionState=hu.SELECTING,t.constraintAxis=e.determineConstraintAxis(-1,null),t.lastPickPosition=t.cursorPicker.getPickPosition()):(t.interactionState=hu.OUTSIDE,t.constraintAxis=-1)},e.displayToWorld=function(e,n){return Ma.computeDisplayToWorld(t.renderer,e[0],e[1],n)},e.complexWidgetInteraction=function(n){var r=Ma.computeWorldToDisplay(t.renderer,t.lastPickPosition[0],t.lastPickPosition[1],t.lastPickPosition[2])[2],i=e.displayToWorld(t.lastEventPosition,r),a=e.displayToWorld(n,r);t.interactionState===hu.SELECTING||t.interactionState===hu.TRANSLATING?(!t.waitingForMotion||t.waitCount++>3)&&(t.constraintAxis=e.determineConstraintAxis(t.constraintAxis,a),t.interactionState!==hu.SELECTING||t.translationMode?e.translate(i,a):e.moveFocus(i,a)):t.interactionState===hu.SCALING&&e.scale(i,a,n),t.lastEventPosition[0]=n[0],t.lastEventPosition[1]=n[1],e.modified()},e.moveFocus=function(n,r){var i=[];i[0]=r[0]-n[0],i[1]=r[1]-n[1],i[2]=r[2]-n[2];var a=t.sphere.getCenter();t.constraintAxis>=0?a[t.constraintAxis]+=i[t.constraintAxis]:(a[0]+=i[0],a[1]+=i[1],a[2]+=i[2]),e.setWorldPosition(a)},e.translate=function(n,r){var i=[];i[0]=r[0]-n[0],i[1]=r[1]-n[1],i[2]=r[2]-n[2];var a=t.sphere.getCenter();if(t.constraintAxis>=0)for(var o=0;o<3;o++)o!==t.constraintAxis&&(i[o]=0);for(var s=[],u=0;u<3;u++)s[u]=a[u]+i[u];e.setWorldPosition(s);var l=e.sizeHandlesInPixels(1,s);l*=t.currentHandleSize/t.handleSize,t.sphere.setRadius(l)},e.sizeBounds=function(){var n=t.sphere.getCenter(),r=e.sizeHandlesInPixels(1,n);r*=t.currentHandleSize/t.handleSize,t.sphere.setRadius(r)},e.scale=function(n,r,i){var a=[];a[0]=r[0]-n[0],a[1]=r[1]-n[1],a[2]=r[2]-n[2];var o=e.getBounds(),s=f.norm(a)/Math.sqrt((o[1]-o[0])*(o[1]-o[0])+(o[3]-o[2])*(o[3]-o[2])+(o[5]-o[4])*(o[5]-o[4]));i[1]>t.lastEventPosition[1]?s+=1:s=1-s,t.currentHandleSize*=s,t.currentHandleSize=t.currentHandleSize<.001?.001:t.currentHandleSize,e.sizeBounds()},e.highlight=function(n){n?e.applyProperty(t.selectProperty):e.applyProperty(t.property)},e.buildRepresentation=function(){t.renderer&&(t.placed||(t.validPick=1,t.placed=1),e.sizeBounds(),t.sphere.update(),e.modified())},e.applyProperty=function(e){t.actor.setProperty(e)}}(e,t)}var ll={newInstance:h.a.newInstance(ul,"vtkSphereHandleRepresentation"),extend:ul};function cl(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var fl=Uu,dl=Gu;var pl={point1Representation:null,point2Representation:null,lineSource:null,lineMapper:null,lineActor:null,endPointProperty:null,selectedEndPointProperty:null,endPoint2Property:null,selectedEndPoint2Property:null,lineProperty:null,selectedLineProperty:null,tolerance:5,placed:0,representationState:fl.OUTSIDE,startP1:[0,0,0],startP2:[0,0,0],length:0,restrictFlag:dl.NONE,initializeDisplayPosition:0,boundingBox:null};function hl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,pl,n),Ou.extend(e,t,n),h.a.get(e,t,["point1Representation","point2Representation","endPointProperty","selectedEndPointProperty","endPoint2Property","selectedEndPoint2Property","lineProperty","selectedLineProperty"]),e.setHandleSize(5),t.boundingBox=R.newInstance(),t.point1Representation=ll.newInstance(),t.point2Representation=ll.newInstance();t.point1Representation.setHandleSize(10),t.point2Representation.setHandleSize(10),t.lineSource=Br.newInstance({point1:[-.5,0,0],point2:[.5,0,0],resolution:5}),t.lineSource.setResolution(5),t.lineMapper=cu.a.newInstance(),t.lineMapper.setInputConnection(t.lineSource.getOutputPort()),t.lineActor=lu.a.newInstance(),t.lineActor.setMapper(t.lineMapper),t.endPointProperty=Wu.a.newInstance(),t.endPointProperty.setColor(1,1,1),t.selectedEndPointProperty=Wu.a.newInstance(),t.selectedEndPointProperty.setColor(0,1,0),t.endPoint2Property=Wu.a.newInstance(),t.endPoint2Property.setColor(1,1,1),t.selectedEndPoint2Property=Wu.a.newInstance(),t.selectedEndPoint2Property.setColor(0,1,0),t.lineProperty=Wu.a.newInstance(),t.lineProperty.setAmbient(1),t.lineProperty.setAmbientColor(1,1,1),t.lineProperty.setLineWidth(2),t.selectedLineProperty=Wu.a.newInstance(),t.selectedLineProperty.setAmbient(1),t.selectedLineProperty.setColor(0,1,0),t.selectedLineProperty.setLineWidth(2),t.point1Representation.applyProperty(t.endPointProperty),t.point2Representation.applyProperty(t.endPoint2Property),t.point1Representation.setWorldPosition(t.lineSource.getPoint1()),t.point2Representation.setWorldPosition(t.lineSource.getPoint2()),t.lineActor.setProperty(t.lineProperty),function(e,t){t.classHierarchy.push("vtkLineRepresentation");var n=Object.assign({},e);e.setResolution=function(e){t.lineSource.setResolution(e)},e.setLineVisibility=function(e){t.lineActor.setVisibility(e)},e.setPoint1Visibility=function(e){t.point1Representation.getActors()[0].setVisibility(e)},e.setPoint2Visibility=function(e){t.point2Representation.getActors()[0].setVisibility(e)},e.getResolution=function(){return t.lineSource.getResolution()},e.getPoint1WorldPosition=function(){return t.point1Representation.getWorldPosition()},e.getPoint2WorldPosition=function(){return t.point2Representation.getWorldPosition()},e.getPoint1DisplayPosition=function(){return t.point1Representation.getDisplayPosition()},e.getPoint2DisplayPosition=function(){return t.point2Representation.getDisplayPosition()},e.setPoint1WorldPosition=function(e){var n;t.point1Representation.setWorldPosition(e),(n=t.lineSource).setPoint1.apply(n,cl(e))},e.setPoint2WorldPosition=function(e){var n;t.point2Representation.setWorldPosition(e),(n=t.lineSource).setPoint2.apply(n,cl(e))},e.setPoint1DisplayPosition=function(e){t.point1Representation.setDisplayPosition(e);var n=t.point1Representation.getWorldPosition();t.point1Representation.setWorldPosition(n)},e.setPoint2DisplayPosition=function(e){t.point2Representation.setDisplayPosition(e);var n=t.point2Representation.getWorldPosition();t.point2Representation.setWorldPosition(n)},e.setRenderer=function(e){t.point1Representation.setRenderer(e),t.point2Representation.setRenderer(e),n.setRenderer(e)},e.startComplexWidgetInteraction=function(e){if(t.startEventPosition[0]=e[0],t.startEventPosition[1]=e[1],t.startEventPosition[2]=0,t.lastEventPosition[0]=e[0],t.lastEventPosition[1]=e[1],t.lastEventPosition[2]=0,t.startP1=t.point1Representation.getWorldPosition(),t.startP2=t.point2Representation.getWorldPosition(),t.interactionState===fl.SCALING){var n=t.point1Representation.getDisplayPosition(),r=t.point2Representation.getDisplayPosition();t.length=Math.sqrt((n[0]-r[0])*(n[0]-r[0])+(n[1]-r[1])*(n[1]-r[1]))}},e.complexWidgetInteraction=function(n){if(t.interactionState===fl.ONP1){if(0!==t.restrictFlag){for(var r=t.point1Representation.getWorldPosition(),i=0;i<3;i++)r[i]=t.restrictFlag===i+1?r[i]:t.startP1[i];t.point1Representation.setWorldPosition(r)}}else if(t.interactionState===fl.ONP2){if(0!==t.restrictFlag){for(var a=t.point2Representation.getWorldPosition(),o=0;o<3;o++)a[o]=t.restrictFlag===o+1?a[o]:t.startP2[o];t.point2Representation.setWorldPosition(a)}}else if(t.interactionState===fl.ONLINE);else if(t.interactionState===fl.SCALING);else if(t.interactionState===fl.TRANSLATINGP1){for(var s=t.point1Representation.getWorldPosition(),u=[],l=0;l<3;l++)u[l]=t.startP2[l]+(s[l]-t.startP1[l]);t.point1Representation.setWorldPosition(u)}else if(t.interactionState===fl.TRANSLATINGP2){for(var c=t.point2Representation.getWorldPosition(),f=[],d=0;d<3;d++)f[d]=t.startP1[d]+(c[d]-t.startP2[d]);t.point2Representation.setWorldPosition(f)}t.lastEventPosition[0]=n[0],t.lastEventPosition[1]=n[1],t.lastEventPosition[2]=0,e.modified()},e.placeWidget=function(){var n=[];if(Array.isArray(arguments.length<=0?void 0:arguments[0]))n=arguments.length<=0?void 0:arguments[0];else for(var r=0;r<arguments.length;r++)n.push(r<0||arguments.length<=r?void 0:arguments[r]);if(6===n.length){var i=t.placeFactor;t.placeFactor=1;var a=[],o=[];e.adjustBounds(n,a,o),t.placeFactor=i;for(var s=0;s<6;s++)t.initialBounds[s]=a[s];t.initialLength=Math.sqrt((a[1]-a[0])*(a[1]-a[0])+(a[3]-a[2])*(a[3]-a[2])+(a[5]-a[4])*(a[5]-a[4]));var u=t.lineSource.getPoint1(),l=t.lineSource.getPoint2(),c=[t.initialLength*(u[0]-l[0]),t.initialLength*(u[1]-l[1]),t.initialLength*(u[2]-l[2])],f=[o[0]-c[0],o[1]-c[1],o[2]-c[2]],d=[],p=[];R.intersectBox(n,f,c,d,p),e.setPoint1WorldPosition(d),c[0]=t.initialLength*(l[0]-u[0]),c[1]=t.initialLength*(l[1]-u[1]),c[2]=t.initialLength*(l[2]-u[2]),f[0]=o[0]-c[0],f[1]=o[1]-c[1],f[2]=o[2]-c[2];var h=[];R.intersectBox(n,f,c,h,p),e.setPoint2WorldPosition(h),t.placed=1,t.validPick=1,e.buildRepresentation()}},e.computeInteractionState=function(n){var r=t.point1Representation.computeInteractionState(n),i=t.point2Representation.computeInteractionState(n);if(r===hu.SELECTING?(t.interactionState=fl.ONP1,e.setRepresentationState(fl.ONP1)):i===hu.SELECTING?(t.interactionState=fl.ONP2,e.setRepresentationState(fl.ONP2)):t.interactionState=fl.OUTSIDE,t.interactionState!==fl.OUTSIDE)return t.interactionState;var a=e.getPoint1DisplayPosition(),o=e.getPoint2DisplayPosition(),s=[n[0],n[1],0],u=[a[0],a[1],0],l=[o[0],o[1],0],c=t.tolerance*t.tolerance,f=he.distanceToLine(s,u,l);return f.distance<=c&&f.t<1&&f.t>0?(t.interactionState=fl.ONLINE,e.setRepresentationState(fl.ONLINE),a=e.getPoint1WorldPosition(),o=e.getPoint2WorldPosition()):(t.interactionState=fl.OUTSIDE,e.setRepresentationState(fl.OUTSIDE)),t.interactionState},e.setRepresentationState=function(n){t.representationState!==n&&(t.representationState=n,e.modified(),n===fl.OUTSIDE?(e.highlightPoint(0,0),e.highlightPoint(1,0),e.highlightLine(0)):n===fl.ONP1?(e.highlightPoint(0,1),e.highlightPoint(1,0),e.highlightLine(0)):n===fl.ONP2?(e.highlightPoint(0,0),e.highlightPoint(1,1),e.highlightLine(0)):n===fl.ONLINE?(e.highlightPoint(0,0),e.highlightPoint(1,0),e.highlightLine(1)):(e.highlightPoint(0,1),e.highlightPoint(1,1),e.highlightLine(1)))},e.sizeHandles=function(){},e.buildRepresentation=function(){var n,r;t.point1Representation.buildRepresentation(),t.point2Representation.buildRepresentation(),0===t.initializeDisplayPosition&&t.renderer&&(e.setPoint1WorldPosition(t.lineSource.getPoint1()),e.setPoint2WorldPosition(t.lineSource.getPoint2()),t.validPick=1,t.initializeDisplayPosition=1),t.point1Representation.setTolerance(t.tolerance),t.point2Representation.setTolerance(t.tolerance);var i=e.getPoint1WorldPosition();(n=t.lineSource).setPoint1.apply(n,cl(i)),t.point1Representation.setWorldPosition(i);var a=e.getPoint2WorldPosition();(r=t.lineSource).setPoint2.apply(r,cl(a)),t.point2Representation.setWorldPosition(a),e.sizeHandles(),e.modified()},e.highlightPoint=function(e,n){0===e?n?t.point1Representation.applyProperty(t.selectedEndPointProperty):t.point1Representation.applyProperty(t.endPointProperty):1===e&&(n?t.point2Representation.applyProperty(t.selectedEndPoint2Property):t.point2Representation.applyProperty(t.endPoint2Property))},e.highlightLine=function(e){e?t.lineActor.setProperty(t.selectedLineProperty):t.lineActor.setProperty(t.lineProperty)},e.setLineColor=function(){var e=[];if(Array.isArray(arguments.length<=0?void 0:arguments[0]))e=arguments.length<=0?void 0:arguments[0];else for(var n=0;n<arguments.length;n++)e.push(n<0||arguments.length<=n?void 0:arguments[n]);3===e.length&&t.lineActor.getProperty()&&t.lineActor.getProperty().setColor(e[0],e[1],e[2])},e.clampPosition=function(e){for(var n=0;n<3;n++)e[n]<t.initialBounds[2*n]&&(e[n]=t.initialBounds[2*n]),e[n]>t.initialBounds[2*n+1]&&(e[n]=t.initialBounds[2*n+1])},e.getBounds=function(){return t.boundingBox.setBounds(t.lineActor.getBounds()),t.boundingBox.addBounds(t.point1Representation.getBounds()),t.boundingBox.addBounds(t.point2Representation.getBounds()),t.boundingBox.getBounds()},e.getActors=function(){var e=[];return e.push.apply(e,cl(t.point1Representation.getActors())),e.push.apply(e,cl(t.point2Representation.getActors())),e.push(t.lineActor),e},e.getNestedProps=function(){return e.getActors()}}(e,t)}var gl={newInstance:h.a.newInstance(hl,"vtkLineRepresentation"),extend:hl};function ml(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var vl={labelStyle:{fontColor:"white",fontStyle:"normal",fontSize:"15",fontFamily:"Arial",strokeColor:"black",strokeSize:"1"},numberOfDecimals:2,labelPositionInLine:.5,container:null};function yl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,vl,n),gl.extend(e,t,n),t.labelRepresentation=Fu.newInstance(),h.a.setGet(e,t,["numberOfDecimals","labelPosition"]),h.a.get(e,t,["labelRepresentation"]),function(e,t){t.classHierarchy.push("vtkDistanceRepresentation");var n=Object.assign({},e);e.setRenderer=function(r){t.labelRepresentation.setRenderer(r),n.setRenderer(r),e.modified()},e.getContainer=function(){return t.labelRepresentation.getContainer()},e.setContainer=function(n){t.labelRepresentation.setContainer(n),e.modified()},e.getLabelStyle=function(){return t.labelRepresentation.getLabelStyle()},e.setLabelStyle=function(n){t.labelRepresentation.setLabelStyle(n),e.modified()},e.getActors=function(){var e=n.getActors();return e=ml(e).concat(ml(t.labelRepresentation.getActors()))},e.getDistance=function(){return Math.sqrt(f.distance2BetweenPoints(e.getPoint1WorldPosition(),e.getPoint2WorldPosition())).toFixed(t.numberOfDecimals)},e.setPoint1WorldPosition=function(t){n.setPoint1WorldPosition(t),e.updateLabelRepresentation(),e.modified()},e.setPoint2WorldPosition=function(t){n.setPoint2WorldPosition(t),e.updateLabelRepresentation(),e.modified()},e.updateLabelRepresentation=function(){t.labelRepresentation.setLabelText(e.getDistance());for(var n=t.point1Representation.getWorldPosition(),r=t.point2Representation.getWorldPosition(),i=[],a=0;a<3;a++)i[a]=n[a]+(r[a]-n[a])*t.labelPositionInLine;t.labelRepresentation.setWorldPosition(i)}}(e,t)}var bl={newInstance:h.a.newInstance(yl,"vtkDistanceRepresentation"),extend:yl},Ml={WidgetState:{START:0,ACTIVE:1}},xl=h.a.VOID,wl=h.a.EVENT_ABORT,Al=Ru.InteractionState,Tl=Ml.WidgetState;var Cl={allowHandleResize:1,widgetState:Tl.START};function Sl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Cl,n),uu.extend(e,t,n),h.a.setGet(e,t,["allowHandleResize"]),function(e,t){function n(e){switch(e){case Al.OUTSIDE:t.interactor.getView().setCursor("default");break;default:t.interactor.getView().setCursor("pointer")}}function r(){n(t.widgetRep.getInteractionState()),t.widgetRep.highlight(1),e.invokeStartInteractionEvent(),e.render()}t.classHierarchy.push("vtkHandleWidget"),e.createDefaultRepresentation=function(){t.widgetRep||(t.widgetRep=ll.newInstance())},e.handleMouseMove=function(t){return e.moveAction(t)},e.handleLeftButtonPress=function(t){return e.selectAction(t)},e.handleLeftButtonRelease=function(t){return e.endSelectAction(t)},e.handleMiddleButtonPress=function(t){return e.translateAction(t)},e.handleMiddleButtonRelease=function(t){return e.endSelectAction(t)},e.handleRightButtonPress=function(t){return e.scaleAction(t)},e.handleRightButtonRelease=function(t){return e.endSelectAction(t)},e.selectAction=function(e){var n=[e.position.x,e.position.y];return t.widgetRep.computeInteractionState(n),t.widgetRep.getInteractionState()===Al.OUTSIDE?xl:(t.widgetRep.startComplexWidgetInteraction(n),t.widgetState=Tl.ACTIVE,t.widgetRep.setInteractionState(Al.SELECTING),r(),wl)},e.translateAction=function(e){var n=[e.position.x,e.position.y];return t.widgetRep.computeInteractionState(n),t.widgetRep.getInteractionState()===Al.OUTSIDE?xl:(t.widgetRep.startComplexWidgetInteraction(n),t.widgetState=Tl.ACTIVE,t.widgetRep.setInteractionState(Al.TRANSLATING),r(),wl)},e.scaleAction=function(e){if(!t.allowHandleResize)return xl;var n=[e.position.x,e.position.y];return t.widgetRep.computeInteractionState(n),t.widgetRep.getInteractionState()===Al.OUTSIDE?xl:(t.widgetRep.startComplexWidgetInteraction(n),t.widgetState=Tl.ACTIVE,t.widgetRep.setInteractionState(Al.SCALING),r(),wl)},e.endSelectAction=function(){return t.widgetState!==Tl.ACTIVE?xl:(t.widgetState=Tl.START,t.widgetRep.highlight(0),e.invokeEndInteractionEvent(),e.render(),wl)},e.moveAction=function(r){var i=[r.position.x,r.position.y],a=t.widgetRep.getInteractionState();return t.widgetState===Tl.START?(t.widgetRep.computeInteractionState(i),n(a=t.widgetRep.getInteractionState()),t.widgetRep.getActiveRepresentation()&&a!==t.widgetRep.getInteractionState()&&e.render(),a===Al.OUTSIDE?xl:wl):(n(a),t.widgetRep.complexWidgetInteraction(i),e.invokeInteractionEvent(),e.render(),wl)}}(e,t)}var Dl=h.a.newInstance(Sl,"vtkHandleWidget"),Il=Object.assign({newInstance:Dl,extend:Sl},Ml),El=h.a.VOID;var Nl={};function Ol(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Nl,n),Il.extend(e,t,n),function(e,t){t.classHierarchy.push("vtkLabelWidget");var n=Object.assign({},e);e.createDefaultRepresentation=function(){t.widgetRep||(t.widgetRep=Fu.newInstance())},e.setEnabled=function(e){if(!e&&t.widgetRep&&t.widgetRep.setContainer(null),n.setEnabled(e),e){var r=t.interactor?t.interactor.getContainer():null;t.widgetRep.setContainer(r)}},e.scaleAction=function(e){return El}}(e,t)}var _l={newInstance:h.a.newInstance(Ol,"vtkLabelWidget"),extend:Ol},Ll={START:0,DEFINE:1,MANIPULATE:2,ACTIVE:3},Pl=gu.InteractionState;function kl(e,t){t.classHierarchy.push("vtkLineWidget");var n=Object.assign({},e);e.setCurrentHandle=function(e){t.currentHandle=e},e.setInteractor=function(r){n.setInteractor(r),t.point1Widget.setInteractor(t.interactor),t.point2Widget.setInteractor(t.interactor),e.modified()},e.setEnabled=function(e){n.setEnabled(e),t.widgetRep&&(t.point1Widget.setWidgetRep(t.widgetRep.getPoint1Representation()),t.point2Widget.setWidgetRep(t.widgetRep.getPoint2Representation()),t.widgetState===Ll.START?(t.point1Widget.setEnabled(0),t.point2Widget.setEnabled(0),t.widgetRep.setLineVisibility(0),t.widgetRep.setPoint1Visibility(1),t.widgetRep.setPoint2Visibility(0)):(t.point1Widget.setEnabled(e),t.point2Widget.setEnabled(e),t.widgetRep.setLineVisibility(1),t.widgetRep.setPoint1Visibility(1),t.widgetRep.setPoint2Visibility(1)))},e.setWidgetStateToStart=function(){t.widgetState=Ll.START,e.setCurrentHandle(0),e.setEnabled(t.enabled)},e.setWidgetStateToManipulate=function(){t.widgetState=Ll.MANIPULATE,e.setCurrentHandle(-1),e.setEnabled(t.enabled)},e.handleMouseMove=function(t){return e.moveAction(t)},e.handleLeftButtonPress=function(t){return e.selectAction(t)},e.handleLeftButtonRelease=function(t){return e.endSelectAction(t)},e.handleMiddleButtonPress=function(t){return e.translateAction(t)},e.handleMiddleButtonRelease=function(t){return e.endSelectAction(t)},e.handleRightButtonPress=function(t){return e.scaleAction(t)},e.handleRightButtonRelease=function(t){return e.endSelectAction(t)},e.selectAction=function(n){var r=[n.position.x,n.position.y];if(t.widgetState===Ll.START){var i=t.point1Widget.getWidgetRep().displayToWorld(r,0);t.currentHandle<1?(t.widgetRep.setLineVisibility(1),t.widgetRep.setPoint1WorldPosition(i),i[0]+=1e-9,t.widgetRep.setPoint2WorldPosition(i),e.setCurrentHandle(t.currentHandle+1)):(t.widgetRep.setPoint2Visibility(1),t.widgetRep.setPoint2WorldPosition(i),t.widgetState=Ll.MANIPULATE,e.setCurrentHandle(-1))}else{var a=t.widgetRep.computeInteractionState(r);if(a===Pl.OUTSIDE)return;t.widgetState=Ll.ACTIVE,e.updateHandleWidgets(a),e.invokeStartInteractionEvent()}t.widgetRep.startComplexWidgetInteraction(r),e.render()},e.translateAction=function(n){var r=[n.position.x,n.position.y];t.widgetRep.computeInteractionState(r)!==Pl.OUTSIDE&&(t.widgetState=Ll.ACTIVE,t.widgetRep.startComplexWidgetInteraction(r),e.invokeStartInteractionEvent())},e.scaleAction=function(n){var r=[n.position.x,n.position.y];t.widgetRep.computeInteractionState(r)!==Pl.OUTSIDE&&(t.widgetState=Ll.ACTIVE,t.widgetRep.startComplexWidgetInteraction(r),e.invokeStartInteractionEvent())},e.moveAction=function(n){var r=[n.position.x,n.position.y],i=!1;if(t.widgetState===Ll.MANIPULATE){var a=t.widgetRep.computeInteractionState(r);i=e.updateHandleWidgets(a)}else if(t.widgetState===Ll.START){t.widgetRep.complexWidgetInteraction(r);var o=t.point1Widget.getWidgetRep().displayToWorld(r,0);0===t.currentHandle?t.widgetRep.setPoint1WorldPosition(o):t.widgetRep.setPoint2WorldPosition(o),i=!0}else t.widgetState===Ll.ACTIVE&&(t.widgetRep.setPoint1WorldPosition(t.point1Widget.getWidgetRep().getWorldPosition()),t.widgetRep.setPoint2WorldPosition(t.point2Widget.getWidgetRep().getWorldPosition()),i=!0);i&&(e.invokeInteractionEvent(),e.render())},e.endSelectAction=function(n){if(t.widgetState!==Ll.START){var r=[n.position.x,n.position.y];t.widgetRep.complexWidgetInteraction(r),t.widgetRep.setPoint1WorldPosition(t.point1Widget.getWidgetRep().getWorldPosition()),t.widgetRep.setPoint2WorldPosition(t.point2Widget.getWidgetRep().getWorldPosition()),t.widgetState=Ll.MANIPULATE,e.invokeEndInteractionEvent(),e.render()}},e.createDefaultRepresentation=function(){t.widgetRep||(t.widgetRep=gl.newInstance())},e.updateHandleWidgets=function(e){var n=!1;!function(e){switch(e){case Vu.OUTSIDE:t.interactor.getView().setCursor("default");break;default:t.interactor.getView().setCursor("pointer")}}(e);var r=e===Vu.ONP1,i=e===Vu.ONP2;return r!==t.point1Widget.getEnabled()&&(t.point1Widget.setEnabled(r),n=!0),i!==t.point2Widget.getEnabled()&&(t.point2Widget.setEnabled(i),n=!0),n}}var Rl={widgetState:Ll.START,managesCursor:1,currentHandle:0,point1Widget:null,point2Widget:null};function jl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Rl,n),uu.extend(e,t,n),t.point1Widget=Il.newInstance(),t.point1Widget.setParent(e),t.point1Widget.createDefaultRepresentation(),t.point2Widget=Il.newInstance(),t.point2Widget.setParent(e),t.point2Widget.createDefaultRepresentation(),kl(e,t)}var Bl={newInstance:h.a.newInstance(jl,"vtkLineWidget"),extend:jl};var zl={};function Fl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,zl,n),Bl.extend(e,t,n),t.labelWidget=_l.newInstance(),t.labelWidget.setProcessEvents(!1),function(e,t){t.classHierarchy.push("vtkDistanceWidget");var n=Object.assign({},e);e.setInteractor=function(r){n.setInteractor(r),t.labelWidget.setInteractor(t.interactor),e.modified()},e.setEnabled=function(r){n.setEnabled(r),t.labelWidget.setEnabled(e.computeLabelWidgetVisibility())},e.createDefaultRepresentation=function(){t.widgetRep||e.setWidgetRep(bl.newInstance())},e.setWidgetRep=function(e){n.setWidgetRep(e),t.widgetRep&&t.labelWidget.setWidgetRep(t.widgetRep.getLabelRepresentation())},e.computeLabelWidgetVisibility=function(){return 0!==t.currentHandle&&t.enabled},e.setCurrentHandle=function(r){n.setCurrentHandle(r),t.labelWidget.setEnabled(e.computeLabelWidgetVisibility())}}(e,t)}var Vl={newInstance:h.a.newInstance(Fl,"vtkDistanceWidget"),extend:Fl},Ul=26,Gl={IDLE:0,CROPPING:1},Wl=["CroppingPlanesChanged"];function Hl(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Yl=Ul,Ql=[2,0,1,2,2,3,2,4,5,2,6,7,2,0,2,2,1,3,2,4,6,2,5,7,2,0,4,2,1,5,2,2,6,2,3,7];var ql={activeHandleIndex:-1,handlePositions:Array(Yl).fill(null),handleSizes:Array(Yl).fill(0),bboxCorners:Array(8).fill([0,0,0]),edgeColor:[1,1,1]};function Xl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ql,n),Ou.extend(e,t,n),h.a.setGet(e,t,["activeHandleIndex"]),h.a.setGetArray(e,t,["edgeColor"],3),h.a.setGetArray(e,t,["handlePositions"],Yl),h.a.setGetArray(e,t,["handleSizes"],Yl),h.a.setGetArray(e,t,["bboxCorners"],8),function(e,t){t.classHierarchy.push("vtkImageCroppingRegionsRepresentation"),t.placeFactor=1,t.picker=ol.newInstance(),t.picker.setPickFromList(1),t.picker.initializePickList(),t.handles=Array(Yl).fill(null).map(function(){var e=ri.newInstance(),n=cu.a.newInstance(),r=lu.a.newInstance();return n.setInputConnection(e.getOutputPort()),r.setMapper(n),t.picker.addPickList(r),{source:e,mapper:n,actor:r}}),t.outline={polydata:Se.a.newInstance(),mapper:cu.a.newInstance(),actor:lu.a.newInstance()},t.outline.polydata.getPoints().setData(new Float32Array(24),3),t.outline.polydata.getLines().setData(Uint16Array.from(Ql)),t.outline.mapper.setInputData(t.outline.polydata),t.outline.actor.setMapper(t.outline.mapper),e.getActors=function(){for(var e=[t.outline.actor],n=0;n<t.handlePositions.length;++n)t.handlePositions[n]&&e.push(t.handles[n].actor);return e},e.getNestedProps=function(){return e.getActors()},e.getMapper=function(){return t.outline.mapper},e.getEventIntersection=function(e){var n=e.position,r=n.x,i=n.y,a=n.z;t.picker.pick([r,i,a],e.pokedRenderer);var o=t.picker.getActors();if(o.length){var s=0;if(o.length>1){var u=t.picker.getPickedPositions().map(function(t){var n=e.pokedRenderer.getActiveCamera().getPosition();return f.distance2BetweenPoints(n,t)}),l=1/0;u.forEach(function(e,t){l>e&&(s=t,l=e)})}var c=o[s];return t.handles.findIndex(function(e){return e.actor===c})}return-1},e.placeWidget=function(){for(var n=[],r=0;r<arguments.length;r++)n.push(r<0||arguments.length<=r?void 0:arguments[r]);if(6===n.length){!function(e){for(var t=0;t<6;t+=2)if(e[t]>e[t+1]){var n=e[t+1];e[t+1]=e[t],e[t]=n}}(n);var i=[];e.adjustBounds(n,i,[]);for(var a=0;a<6;a++)t.initialBounds[a]=i[a];t.initialLength=Math.sqrt((i[1]-i[0])*(i[1]-i[0])+(i[3]-i[2])*(i[3]-i[2])+(i[5]-i[4])*(i[5]-i[4])),e.modified()}},e.updateGeometry=function(){for(var e,n=t.outline.polydata.getPoints().getData(),r=0;r<t.handles.length;++r)if(t.handlePositions[r]){var i=t.handles[r],a=i.actor,o=i.source;o.setRadius(t.handleSizes[r]),o.setCenter(t.handlePositions[r]),t.activeHandleIndex===r?a.getProperty().setColor(0,1,0):a.getProperty().setColor(1,1,1)}for(var s=0;s<t.bboxCorners.length;++s)n.set(t.bboxCorners[s],3*s);(e=t.outline.actor.getProperty()).setEdgeColor.apply(e,Hl(t.edgeColor)),t.outline.polydata.getPoints().modified(),t.outline.polydata.modified()},e.getBounds=function(){return t.initialBounds},e.buildRepresentation=function(){t.renderer&&(t.placed||(t.validPick=1,t.placed=1),e.updateGeometry())},e.setProperty=function(e){t.actor.setProperty(e)},e.onModified(e.updateGeometry)}(e,t)}var Kl={newInstance:h.a.newInstance(Xl,"vtkImageCroppingRegionsRepresentation"),extend:Xl};function Zl(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Jl=h.a.vtkErrorMacro,$l=h.a.VOID,ec=h.a.EVENT_ABORT,tc=Ul,nc=Gl,rc=Wl,ic=[[0,0],[0,1],[1,0],[1,1]];var ac={handleSize:5,faceHandlesEnabled:!1,edgeHandlesEnabled:!1,cornerHandlesEnabled:!0};function oc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ac,n),uu.extend(e,t,ac,n),rc.forEach(function(n){return h.a.event(e,t,n)}),h.a.get(e,t,["volumeMapper","handleSize","faceHandlesEnabled","edgeHandlesEnabled","cornerHandlesEnabled"]),function(e,t){t.classHierarchy.push("vtkImageCroppingRegionsWidget");var n=null;t.indexToWorld=Ye.c.create(),t.worldToIndex=Ye.c.create();var r=null;function i(e){var n=Ye.e.fromValues(e[0],e[1],e[2]),r=Ye.e.create();return Ye.e.transformMat4(r,n,t.worldToIndex),[r[0],r[1],r[2]]}function a(e){var n=Ye.e.fromValues(e[0],e[1],e[2]),r=Ye.e.create();return Ye.e.transformMat4(r,n,t.indexToWorld),[r[0],r[1],r[2]]}t.widgetState={activeHandleIndex:-1,planes:Array(6).fill(0),controlState:nc.IDLE},e.createDefaultRepresentation=function(){t.widgetRep||(t.widgetRep=Kl.newInstance(),e.updateRepresentation())},e.getWidgetState=function(){return Object.assign({},t.widgetState)},e.updateWidgetState=function(n){if(Object.keys(n).reduce(function(e,r){return e||t.widgetState[r]!==n[r]},!1)){var i=t.widgetState;t.widgetState=Object.assign({},i,n),function(e,t){if(e.length===t.length){for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}return!1}(i.planes,t.widgetState.planes)||(r=null,e.invokeCroppingPlanesChanged(t.widgetState.planes)),e.updateRepresentation(),e.modified()}},e.setVolumeMapper=function(n){n!==t.volumeMapper&&(t.volumeMapper=n,e.resetWidgetState(),t.enabled&&e.updateRepresentation())},e.planesToHandles=function(e){if(!t.volumeMapper||!t.volumeMapper.getInputData())return null;if(r)return r;var n=Array(tc).fill(null);if(t.faceHandlesEnabled)for(var i=function(t){var r=[0,0,0].map(function(n,r){return r===Math.floor(t/2)?e[t]:(e[2*r]+e[2*r+1])/2});n[t]=[r[0],r[1],r[2]]},o=0;o<6;++o)i(o);if(t.edgeHandlesEnabled)for(o=0;o<12;++o){for(var s=Math.floor(o/4),u=ic[o%4].slice(),l=[],c=0;c<3;++c)c!==s&&l.push(e[2*c+u.shift()]);l.splice(s,0,(e[2*s]+e[2*s+1])/2),n[o+6]=[l[0],l[1],l[2]]}if(t.cornerHandlesEnabled)for(var f=0;f<8;++f)n[f+18]=[e[0+(f>>2&1)],e[2+(f>>1&1)],e[4+(f>>0&1)]];for(var d=0;d<n.length;++d)n[d]&&(n[d]=a(n[d]));return r=n,n},e.planesToBBoxCorners=function(e){return t.volumeMapper&&t.volumeMapper.getInputData()?[[e[0],e[2],e[4]],[e[0],e[2],e[5]],[e[0],e[3],e[4]],[e[0],e[3],e[5]],[e[1],e[2],e[4]],[e[1],e[2],e[5]],[e[1],e[3],e[4]],[e[1],e[3],e[5]]].map(function(e){return a(e)}):null},e.resetWidgetState=function(){if(t.volumeMapper)if(t.volumeMapper.getInputData()){var n=t.volumeMapper.getInputData();t.indexToWorld=n.getIndexToWorld(),t.worldToIndex=n.getWorldToIndex();var r=n.getExtent();e.setCroppingPlanes.apply(e,Zl(r))}else Jl("Volume mapper has no input data");else Jl("Volume mapper must be set to update representation")},e.setEnabled=h.a.chain(e.setEnabled,function(t){if(n&&n.unsubscribe(),t){var r=e.getInteractor().getCurrentRenderer().getActiveCamera();n=r.onModified(e.updateRepresentation),e.updateRepresentation()}}),e.setFaceHandlesEnabled=function(n){t.faceHandlesEnabled!==n&&(t.faceHandlesEnabled=n,e.updateRepresentation(),e.modified())},e.setEdgeHandlesEnabled=function(n){t.edgeHandlesEnabled!==n&&(t.edgeHandlesEnabled=n,e.updateRepresentation(),e.modified())},e.setCornerHandlesEnabled=function(n){t.cornerHandlesEnabled!==n&&(t.cornerHandlesEnabled=n,e.updateRepresentation(),e.modified())},e.setHandleSize=function(n){t.handleSize!==n&&(t.handleSize=n,e.updateRepresentation(),e.modified())},e.getCroppingPlanes=function(){return t.widgetState.planes.slice()},e.setCroppingPlanes=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.updateWidgetState({planes:n})},e.updateRepresentation=function(){if(t.widgetRep){var n,r=t.volumeMapper.getBounds();(n=t.widgetRep).placeWidget.apply(n,Zl(r));var i=t.widgetState,a=i.activeHandleIndex,o=i.planes,s=e.planesToBBoxCorners(o),u=e.planesToHandles(o),l=u.map(function(n){return n?e.adjustHandleSize(n,t.handleSize):t.handleSize});t.widgetRep.set({activeHandleIndex:a,handlePositions:u,bboxCorners:s,handleSizes:l}),e.render()}},e.adjustHandleSize=function(t,n){var r=e.getInteractor();if(!r&&!r.getCurrentRenderer())return null;var i=r.getCurrentRenderer();if(!i.getActiveCamera())return null;for(var a=e.computeWorldToDisplay(i,t[0],t[1],t[2]),o=e.computeDisplayToWorld(i,a[0]-n/2,a[1]-n/2,a[2]),s=e.computeDisplayToWorld(i,a[0]+n/2,a[1]+n/2,a[2]),u=0,l=0;l<3;l++)u+=(s[l]-o[l])*(s[l]-o[l]);return Math.sqrt(u)/2},e.displayToPlane=function(t,n,r){for(var i=e.getInteractor().getView(),a=e.getInteractor().getCurrentRenderer(),o=a.getActiveCamera(),s=o.getFocalPoint(),u=o.getPosition(),l=i.worldToDisplay.apply(i,Zl(s).concat([a])),c=i.displayToWorld(t[0],t[1],l[2],a),d=[0,0,0],p=0;p<3;++p)d[p]=c[p]-u[p];var h=o.getDirectionOfProjection();f.normalize(h);var g=f.dot(h,d),m=o.getClippingRange(),v=[0,0,0],y=[0,0,0];if(o.getParallelProjection())for(var b=m[0]-g,M=m[1]-g,x=0;x<3;x++)v[x]=c[x]+b*h[x],y[x]=c[x]+M*h[x];else for(var w=m[0]/g,A=m[1]/g,T=0;T<3;T++)v[T]=u[T]+w*d[T],y[T]=u[T]+A*d[T];var C=Te.a.intersectWithLine(v,y,n,r);return C.intersection?C.x:null},e.handleLeftButtonPress=function(t){return e.pressAction(t)},e.handleLeftButtonRelease=function(t){return e.endMoveAction(t)},e.handleMiddleButtonPress=function(t){return e.pressAction(t)},e.handleMiddleButtonRelease=function(t){return e.endMoveAction(t)},e.handleRightButtonPress=function(t){return e.pressAction(t)},e.handleRightButtonRelease=function(t){return e.endMoveAction(t)},e.handleMouseMove=function(t){return e.moveAction(t)},e.pressAction=function(n){if(t.widgetState.controlState===nc.IDLE){var r=t.widgetRep.getEventIntersection(n);if(r>-1)return t.activeHandleIndex=r,e.updateWidgetState({activeHandleIndex:r,controlState:nc.CROPPING}),ec}return $l},e.moveAction=function(n){var r=t.widgetState,a=r.controlState,o=r.planes,s=r.activeHandleIndex;if(a===nc.IDLE||-1===s)return $l;var u=e.planesToHandles(o),l=[n.position.x,n.position.y],c=u[s],d=e.getInteractor().getCurrentRenderer().getActiveCamera().getDirectionOfProjection(),p=e.displayToPlane(l,c,d);if(!p)return ec;var h=o.slice();if(s<6){var g=Math.floor(s/2),m=3*g,v=t.volumeMapper.getInputData().getDirection().slice(m,m+3),y=[0,0,0],b=[0,0,0],M=[0,0,0];f.subtract(p,c,b),f.projectVector(b,v,M),f.add(c,M,y);var x=i(y);h[s]=x[g]}else if(s<18){var w=s-6,A=Math.floor(w/4),T=3*A,C=t.volumeMapper.getInputData().getDirection().slice(T,T+3),S=[0,0,0],D=[0,0,0],I=[0,0,0];f.subtract(p,c,D),Te.a.projectVector(D,C,I),f.add(c,I,S);for(var E=i(S),N=ic[w%4].slice(),O=[],_=0;_<3;++_)_!==A&&O.push(2*_+N.shift());O.forEach(function(e){h[e]=E[Math.floor(e/2)]})}else{var L=s-18,P=i(p);[0+(L>>2&1),2+(L>>1&1),4+(L>>0&1)].forEach(function(e){h[e]=P[Math.floor(e/2)]})}return e.setCroppingPlanes.apply(e,Zl(h)),ec},e.endMoveAction=function(){t.widgetState.activeHandleIndex>-1&&e.updateWidgetState({activeHandleIndex:-1,controlState:nc.IDLE})}}(e,t)}var sc={newInstance:h.a.newInstance(oc,"vtkImageCroppingRegionsWidget"),extend:oc};function uc(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var lc=h.a.vtkDebugMacro;var cc={position:[0,0,1],focalPoint:[0,0,0],viewUp:[0,1,0],directionOfProjection:[0,0,-1],parallelProjection:!1,useHorizontalViewAngle:!1,viewAngle:30,parallelScale:1,clippingRange:[.01,1000.01],thickness:1e3,windowCenter:[0,0],viewPlaneNormal:[0,0,1],useOffAxisProjection:!1,screenBottomLeft:[-.5,-.5,-.5],screenBottomRight:[.5,-.5,-.5],screenTopRight:[.5,.5,-.5],freezeFocalPoint:!1,projectionMatrix:null,viewMatrix:null,physicalTranslation:[0,0,0],physicalScale:1,physicalViewUp:[0,1,0],physicalViewNorth:[0,0,-1]};function fc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,cc,n),h.a.obj(e,t),h.a.get(e,t,["distance","thickness"]),h.a.setGet(e,t,["parallelProjection","useHorizontalViewAngle","viewAngle","parallelScale","useOffAxisProjection","freezeFocalPoint","physicalScale"]),h.a.getArray(e,t,["directionOfProjection","viewPlaneNormal","position","focalPoint"]),h.a.setGetArray(e,t,["clippingRange","windowCenter"],2),h.a.setGetArray(e,t,["viewUp","screenBottomLeft","screenBottomRight","screenTopRight","physicalTranslation","physicalViewUp","physicalViewNorth"],3),function(e,t){t.classHierarchy.push("vtkCamera");var n=Ye.e.create(),r=Ye.e.fromValues(0,0,-1),i=Ye.e.fromValues(0,1,0),a=Ye.c.create(),o=Ye.e.create(),s=Ye.e.create(),u=Ye.e.create(),l=Ye.c.create(),c=Ye.c.create(),d=Ye.e.create(),p=Ye.e.create();function h(){t.viewPlaneNormal[0]=-t.directionOfProjection[0],t.viewPlaneNormal[1]=-t.directionOfProjection[1],t.viewPlaneNormal[2]=-t.directionOfProjection[2]}e.orthogonalizeViewUp=function(){var n=e.getViewMatrix();t.viewUp[0]=n[4],t.viewUp[1]=n[5],t.viewUp[2]=n[6],e.modified()},e.setPosition=function(n,r,i){n===t.position[0]&&r===t.position[1]&&i===t.position[2]||(t.position[0]=n,t.position[1]=r,t.position[2]=i,e.computeDistance(),e.modified())},e.setFocalPoint=function(n,r,i){n===t.focalPoint[0]&&r===t.focalPoint[1]&&i===t.focalPoint[2]||(t.focalPoint[0]=n,t.focalPoint[1]=r,t.focalPoint[2]=i,e.computeDistance(),e.modified())},e.setDistance=function(n){if(t.distance!==n){t.distance=n,t.distance<1e-20&&(t.distance=1e-20,lc("Distance is set to minimum."));var r=t.directionOfProjection;t.focalPoint[0]=t.position[0]+r[0]*t.distance,t.focalPoint[1]=t.position[1]+r[1]*t.distance,t.focalPoint[2]=t.position[2]+r[2]*t.distance,e.modified()}},e.computeDistance=function(){var e=t.focalPoint[0]-t.position[0],n=t.focalPoint[1]-t.position[1],r=t.focalPoint[2]-t.position[2];if(t.distance=Math.sqrt(e*e+n*n+r*r),t.distance<1e-20){t.distance=1e-20,lc("Distance is set to minimum.");var i=t.directionOfProjection;t.focalPoint[0]=t.position[0]+i[0]*t.distance,t.focalPoint[1]=t.position[1]+i[1]*t.distance,t.focalPoint[2]=t.position[2]+i[2]*t.distance}t.directionOfProjection[0]=e/t.distance,t.directionOfProjection[1]=n/t.distance,t.directionOfProjection[2]=r/t.distance,h()},e.dolly=function(n){if(!(n<=0)){var r=t.distance/n;e.setPosition(t.focalPoint[0]-r*t.directionOfProjection[0],t.focalPoint[1]-r*t.directionOfProjection[1],t.focalPoint[2]-r*t.directionOfProjection[2])}},e.roll=function(n){var r=t.position,i=t.focalPoint,a=t.viewUp,o=Ye.f.fromValues(a[0],a[1],a[2],0);Ye.c.identity(l);var s=Ye.e.fromValues(i[0]-r[0],i[1]-r[1],i[2]-r[2]);Ye.c.rotate(l,l,f.radiansFromDegrees(n),s),Ye.f.transformMat4(o,o,l),t.viewUp[0]=o[0],t.viewUp[1]=o[1],t.viewUp[2]=o[2],e.modified()},e.azimuth=function(n){var r=t.focalPoint;Ye.c.identity(c),Ye.c.translate(c,c,Ye.e.fromValues(r[0],r[1],r[2])),Ye.c.rotate(c,c,f.radiansFromDegrees(n),Ye.e.fromValues(t.viewUp[0],t.viewUp[1],t.viewUp[2])),Ye.c.translate(c,c,Ye.e.fromValues(-r[0],-r[1],-r[2])),Ye.e.transformMat4(d,Ye.e.fromValues(t.position[0],t.position[1],t.position[2]),c),e.setPosition(d[0],d[1],d[2])},e.yaw=function(n){var r=t.position;Ye.c.identity(c),Ye.c.translate(c,c,Ye.e.fromValues(r[0],r[1],r[2])),Ye.c.rotate(c,c,f.radiansFromDegrees(n),Ye.e.fromValues(t.viewUp[0],t.viewUp[1],t.viewUp[2])),Ye.c.translate(c,c,Ye.e.fromValues(-r[0],-r[1],-r[2])),Ye.e.transformMat4(p,Ye.e.fromValues(t.focalPoint[0],t.focalPoint[1],t.focalPoint[2]),c),e.setFocalPoint(p[0],p[1],p[2])},e.elevation=function(n){var r=t.focalPoint,i=e.getViewMatrix(),a=[-i[0],-i[1],-i[2]];Ye.c.identity(c),Ye.c.translate(c,c,Ye.e.fromValues(r[0],r[1],r[2])),Ye.c.rotate(c,c,f.radiansFromDegrees(n),Ye.e.fromValues(a[0],a[1],a[2])),Ye.c.translate(c,c,Ye.e.fromValues(-r[0],-r[1],-r[2])),Ye.e.transformMat4(d,Ye.e.fromValues(t.position[0],t.position[1],t.position[2]),c),e.setPosition(d[0],d[1],d[2])},e.pitch=function(n){var r=t.position,i=e.getViewMatrix(),a=[i[0],i[1],i[2]];Ye.c.identity(c),Ye.c.translate(c,c,Ye.e.fromValues(r[0],r[1],r[2])),Ye.c.rotate(c,c,f.radiansFromDegrees(n),Ye.e.fromValues(a[0],a[1],a[2])),Ye.c.translate(c,c,Ye.e.fromValues(-r[0],-r[1],-r[2])),Ye.e.transformMat4(p,Ye.e.fromValues.apply(Ye.e,uc(t.focalPoint)),c),e.setFocalPoint.apply(e,uc(p))},e.zoom=function(n){n<=0||(t.parallelProjection?t.parallelScale/=n:t.viewAngle/=n,e.modified())},e.applyTransform=function(n){var r=uc(t.viewUp).concat([1]),i=[],a=[],o=[];r[0]+=t.position[0],r[1]+=t.position[1],r[2]+=t.position[2],Ye.f.transformMat4(i,uc(t.position).concat([1]),n),Ye.f.transformMat4(a,uc(t.focalPoint).concat([1]),n),Ye.f.transformMat4(o,r,n),o[0]-=i[0],o[1]-=i[1],o[2]-=i[2],e.setPosition.apply(e,uc(i.slice(0,3))),e.setFocalPoint.apply(e,uc(a.slice(0,3))),e.setViewUp.apply(e,uc(o.slice(0,3)))},e.setRoll=function(e){},e.getRoll=function(){},e.setThickness=function(e){},e.setObliqueAngles=function(e,t){},e.getOrientation=function(){},e.getOrientationWXYZ=function(){},e.getFrustumPlanes=function(e){},e.getCameraLightTransformMatrix=function(){},e.deepCopy=function(e){},e.physicalOrientationToWorldDirection=function(e){var t=Ye.d.fromValues(e[0],e[1],e[2],e[3]),n=Ye.d.create(),r=Ye.d.fromValues(0,0,1,0);return Ye.d.conjugate(n,t),Ye.d.multiply(r,t,r),Ye.d.multiply(r,r,n),[r[0],r[1],r[2]]},e.getPhysicalToWorldMatrix=function(t){e.getWorldToPhysicalMatrix(t),Ye.c.invert(t,t)},e.getWorldToPhysicalMatrix=function(e){Ye.c.identity(e);var n=[3];f.cross(t.physicalViewNorth,t.physicalViewUp,n),e[0]=n[0],e[1]=n[1],e[2]=n[2],e[4]=t.physicalViewUp[0],e[5]=t.physicalViewUp[1],e[6]=t.physicalViewUp[2],e[8]=-t.physicalViewNorth[0],e[9]=-t.physicalViewNorth[1],e[10]=-t.physicalViewNorth[2],Ye.c.transpose(e,e),Ye.e.set(o,1/t.physicalScale,1/t.physicalScale,1/t.physicalScale),Ye.c.scale(e,e,o),Ye.c.translate(e,e,t.physicalTranslation)},e.computeViewParametersFromViewMatrix=function(l){Ye.c.invert(a,l),Ye.e.transformMat4(o,n,a),e.computeDistance();var c=t.distance;e.setPosition(o[0],o[1],o[2]),Ye.e.transformMat4(s,r,a),Ye.e.subtract(s,s,o),Ye.e.normalize(s,s),e.setDirectionOfProjection(s[0],s[1],s[2]),Ye.e.transformMat4(u,i,a),Ye.e.subtract(u,u,o),Ye.e.normalize(u,u),e.setViewUp(u[0],u[1],u[2]),e.setDistance(c)},e.computeViewParametersFromPhysicalMatrix=function(t){e.getWorldToPhysicalMatrix(a),Ye.c.multiply(a,t,a),e.computeViewParametersFromViewMatrix(a)},e.setViewMatrix=function(n){t.viewMatrix=n,t.viewMatrix&&(Ye.c.copy(a,t.viewMatrix),e.computeViewParametersFromViewMatrix(a),Ye.c.transpose(t.viewMatrix,t.viewMatrix))},e.getViewMatrix=function(){if(t.viewMatrix)return t.viewMatrix;var e=Ye.c.create();return Ye.c.lookAt(a,Ye.e.fromValues.apply(Ye.e,uc(t.position)),Ye.e.fromValues.apply(Ye.e,uc(t.focalPoint)),Ye.e.fromValues.apply(Ye.e,uc(t.viewUp))),Ye.c.transpose(a,a),Ye.c.copy(e,a),e},e.setProjectionMatrix=function(e){t.projectionMatrix=e},e.getProjectionMatrix=function(e,n,r){var i=Ye.c.create();if(t.projectionMatrix){var s=1/t.physicalScale;return Ye.e.set(o,s,s,s),Ye.c.copy(i,t.projectionMatrix),Ye.c.scale(i,i,o),Ye.c.transpose(i,i),i}Ye.c.identity(a);var u=t.clippingRange[1]-t.clippingRange[0],l=[t.clippingRange[0]+(n+1)*u/2,t.clippingRange[0]+(r+1)*u/2];if(t.parallelProjection){var c=t.parallelScale*e,d=t.parallelScale,p=(t.windowCenter[0]-1)*c,h=(t.windowCenter[0]+1)*c,g=(t.windowCenter[1]-1)*d,m=(t.windowCenter[1]+1)*d;Ye.c.ortho(a,p,h,g,m,l[0],l[1]),Ye.c.transpose(a,a)}else{if(t.useOffAxisProjection)throw new Error("Off-Axis projection is not supported at this time");var v,y,b=Math.tan(f.radiansFromDegrees(t.viewAngle)/2);!0===t.useHorizontalViewAngle?(v=t.clippingRange[0]*b,y=t.clippingRange[0]*b/e):(v=t.clippingRange[0]*b*e,y=t.clippingRange[0]*b);var M=(t.windowCenter[0]-1)*v,x=(t.windowCenter[0]+1)*v,w=(t.windowCenter[1]-1)*y,A=(t.windowCenter[1]+1)*y,T=l[0],C=l[1];a[0]=2*T/(x-M),a[5]=2*T/(A-w),a[2]=(M+x)/(x-M),a[6]=(w+A)/(A-w),a[10]=-(T+C)/(C-T),a[14]=-1,a[11]=-2*T*C/(C-T),a[15]=0}return Ye.c.copy(i,a),i},e.getCompositeProjectionMatrix=function(t,n,r){var i=e.getViewMatrix(),a=e.getProjectionMatrix(t,n,r),o=Ye.c.create();return Ye.c.multiply(o,i,a),o},e.setDirectionOfProjection=function(e,n,r){if(t.directionOfProjection[0]!==e||t.directionOfProjection[1]!==n||t.directionOfProjection[2]!==r){t.directionOfProjection[0]=e,t.directionOfProjection[1]=n,t.directionOfProjection[2]=r;var i=t.directionOfProjection;t.focalPoint[0]=t.position[0]+i[0]*t.distance,t.focalPoint[1]=t.position[1]+i[1]*t.distance,t.focalPoint[2]=t.position[2]+i[2]*t.distance,h()}},e.setDeviceAngles=function(n,r,i,a){var o=[3];f.cross(t.physicalViewNorth,t.physicalViewUp,o);var s=Ye.c.create();Ye.c.rotate(s,s,f.radiansFromDegrees(n),t.physicalViewUp),Ye.c.rotate(s,s,f.radiansFromDegrees(r),o),Ye.c.rotate(s,s,f.radiansFromDegrees(i),t.physicalViewNorth),Ye.c.rotate(s,s,f.radiansFromDegrees(-a),t.physicalViewUp);var u=Ye.e.fromValues(-t.physicalViewUp[0],-t.physicalViewUp[1],-t.physicalViewUp[2]),l=Ye.e.fromValues(t.physicalViewNorth[0],t.physicalViewNorth[1],t.physicalViewNorth[2]);Ye.e.transformMat4(u,u,s),Ye.e.transformMat4(l,l,s),e.setDirectionOfProjection(u[0],u[1],u[2]),e.setViewUp(l[0],l[1],l[2]),e.modified()},e.setOrientationWXYZ=function(t,n,r,i){var a=Ye.c.create();if(0!==t&&(0!==n||0!==r||0!==i)){var o=f.radiansFromDegrees(t),s=Ye.d.create();Ye.d.setAxisAngle(s,[n,r,i],o),Ye.d.toMat4(s,a)}var u=Ye.e.fromValues(0,0,-1),l=Ye.e.create();Ye.e.transformMat4(l,u,a);var c=Ye.e.fromValues(0,1,0),d=Ye.e.create();Ye.e.transformMat4(d,c,a),e.setDirectionOfProjection.apply(e,uc(l)),e.setViewUp.apply(e,uc(d)),e.modified()},e.computeClippingRange=function(e){var n,r;n=t.viewPlaneNormal,r=t.position;for(var i=-n[0],a=-n[1],o=-n[2],s=-(i*r[0]+a*r[1]+o*r[2]),u=[i*e[0]+a*e[2]+o*e[4]+s,1e-18],l=0;l<2;l++)for(var c=0;c<2;c++)for(var f=0;f<2;f++){var d=i*e[f]+a*e[2+c]+o*e[4+l]+s;u[0]=d<u[0]?d:u[0],u[1]=d>u[1]?d:u[1]}return u}}(e,t)}var dc={newInstance:h.a.newInstance(fc,"vtkCamera"),extend:fc};var pc={switch:!0,intensity:1,color:[1,1,1],position:[0,0,1],focalPoint:[0,0,0],positional:!1,exponent:1,coneAngle:30,attenuationValues:[1,0,0],transformMatrix:null,lightType:"SceneLight",shadowAttenuation:1,direction:[0,0,0],directionMTime:0};function hc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,pc,n),h.a.obj(e,t),h.a.setGet(e,t,["intensity","switch","positional","exponent","coneAngle","transformMatrix","lightType","shadowAttenuation"]),h.a.setGetArray(e,t,["color","position","focalPoint","attenuationValues"],3),function(e,t){t.classHierarchy.push("vtkLight"),e.getTransformedPosition=function(){return t.transformMatrix?[]:[].concat(t.position)},e.getTransformedFocalPoint=function(){return t.transformMatrix?[]:[].concat(t.focalPoint)},e.getDirection=function(){return t.directionMTime<t.mtime&&(t.direction[0]=t.focalPoint[0]-t.position[0],t.direction[1]=t.focalPoint[1]-t.position[1],t.direction[2]=t.focalPoint[2]-t.position[2],f.normalize(t.direction),t.directionMTime=t.mtime),t.direction},e.setDirectionAngle=function(t,n){var r=f.radiansFromDegrees(t),i=f.radiansFromDegrees(n);e.setPosition(Math.cos(r)*Math.sin(i),Math.sin(r),Math.cos(r)*Math.cos(i)),e.setFocalPoint(0,0,0),e.setPositional(0)},e.setLightTypeToHeadLight=function(){e.setLightType("HeadLight")},e.setLightTypeToCameraLight=function(){e.setLightType("CameraLight")},e.setLightTypeToSceneLight=function(){e.setTransformMatrix(null),e.setLightType("SceneLight")},e.lightTypeIsHeadLight=function(){return"HeadLight"===t.lightType},e.lightTypeIsSceneLight=function(){return"SceneLight"===t.lightType},e.lightTypeIsCameraLight=function(){return"CameraLight"===t.lightType}}(e,t)}var gc={newInstance:h.a.newInstance(hc,"vtkLight"),extend:hc,LIGHT_TYPES:["HeadLight","CameraLight","SceneLight"]},mc=h.a.vtkErrorMacro;function vc(e,t){function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t.push(e);var r=e.getNestedProps();if(r&&r.length)for(var i=0;i<r.length;i++)n(r[i],t);return t}var r;t.classHierarchy.push("vtkViewport"),e.getViewProps=function(){return t.props},e.hasViewProp=function(e){return!!t.props.filter(function(t){return t===e}).length},e.addViewProp=function(n){n&&!e.hasViewProp(n)&&(t.props=t.props.concat(n))},e.removeViewProp=function(e){var n=t.props.filter(function(t){return t!==e});t.props.length!==n.length&&(t.props=n)},e.removeAllViewProps=function(){t.props=[]},e.getViewPropsWithNestedProps=function(){for(var e=[],r=0;r<t.props.length;r++)n(t.props[r],e);return e},e.addActor2D=e.addViewProp,e.removeActor2D=function(t){e.removeViewProp(t)},e.getActors2D=function(){return t.actors2D=[],t.props.forEach(function(e){t.actors2D=t.actors2D.concat(e.getActors2D())}),t.actors2D},e.displayToView=function(){return mc("call displayToView on your view instead")},e.viewToDisplay=function(){return mc("callviewtodisplay on your view instead")},e.getSize=function(){return mc("call getSize on your View instead")},e.normalizedDisplayToView=function(t,n,r){var i=e.normalizedDisplayToNormalizedViewport(t,n,r);return e.normalizedViewportToView(i[0],i[1],i[2])},e.normalizedDisplayToNormalizedViewport=function(e,n,r){var i=[t.viewport[2]-t.viewport[0],t.viewport[3]-t.viewport[1]];return[(e-t.viewport[0])/i[0],(n-t.viewport[1])/i[1],r]},e.normalizedViewportToView=function(e,t,n){return[2*e-1,2*t-1,2*n-1]},e.viewToNormalizedDisplay=function(t,n,r){var i=e.viewToNormalizedViewport(t,n,r);return e.normalizedViewportToNormalizedDisplay(i[0],i[1],i[2])},e.normalizedViewportToNormalizedDisplay=function(e,n,r){var i=[t.viewport[2]-t.viewport[0],t.viewport[3]-t.viewport[1]];return[e*i[0]+t.viewport[0],n*i[1]+t.viewport[1],r]},e.viewToNormalizedViewport=function(e,t,n){return[.5*(e+1),.5*(t+1),.5*(n+1)]},e.PickPropFrom=(r="PickPropFrom",function(){return mc("vtkViewport::".concat(r," - NOT IMPLEMENTED"))})}var yc={vtkWindow:null,background:[0,0,0],background2:[.2,.2,.2],gradientBackground:!1,viewport:[0,0,1,1],aspect:[1,1],pixelAspect:[1,1],props:[],actors2D:[]};function bc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,yc,n),h.a.obj(e,t),h.a.event(e,t,"event"),h.a.setGetArray(e,t,["viewport"],4),h.a.setGetArray(e,t,["background","background2"],3),vc(e,t)}var Mc={newInstance:h.a.newInstance(bc,"vtkViewport"),extend:bc},xc=h.a.vtkDebugMacro,wc=h.a.vtkErrorMacro,Ac=h.a.vtkWarningMacro;function Tc(e){return function(){return wc("vtkRenderer::".concat(e," - NOT IMPLEMENTED"))}}var Cc={pickedProp:null,activeCamera:null,allBounds:[],ambient:[1,1,1],allocatedRenderTime:100,timeFactor:1,createdLight:null,automaticLightCreation:!0,twoSidedLighting:!0,lastRenderTimeInSeconds:-1,renderWindow:null,lights:[],actors:[],volumes:[],lightFollowCamera:!0,numberOfPropsRendered:0,propArray:null,pathArray:null,layer:0,preserveColorBuffer:!1,preserveDepthBuffer:!1,computeVisiblePropBounds:f.createUninitializedBounds(),interactive:!0,nearClippingPlaneTolerance:0,clippingRangeExpansion:.05,erase:!0,draw:!0,useShadows:!1,useDepthPeeling:!1,occlusionRatio:0,maximumNumberOfPeels:4,selector:null,delegate:null,texturedBackground:!1,backgroundTexture:null,pass:0};function Sc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Cc,n),Mc.extend(e,t,n),h.a.get(e,t,["renderWindow","allocatedRenderTime","timeFactor","lastRenderTimeInSeconds","numberOfPropsRendered","lastRenderingUsedDepthPeeling","selector"]),h.a.setGet(e,t,["twoSidedLighting","lightFollowCamera","automaticLightCreation","erase","draw","nearClippingPlaneTolerance","clippingRangeExpansion","backingStore","interactive","layer","preserveColorBuffer","preserveDepthBuffer","useDepthPeeling","occlusionRatio","maximumNumberOfPeels","delegate","backgroundTexture","texturedBackground","useShadows","pass"]),h.a.getArray(e,t,["actors","volumes","lights"]),h.a.setGetArray(e,t,["background"],4,1),function(e,t){for(t.classHierarchy.push("vtkRenderer"),t.background||(t.background=[0,0,0,1]);t.background.length<3;)t.background.push(0);3===t.background.length&&t.background.push(1);var n={type:"ComputeVisiblePropBoundsEvent",renderer:e},r={type:"ResetCameraClippingRangeEvent",renderer:e},i={type:"ResetCameraEvent",renderer:e};e.updateCamera=function(){return t.activeCamera||(xc("No cameras are on, creating one."),e.getActiveCameraAndResetIfCreated()),t.activeCamera.render(e),!0},e.updateLightsGeometryToFollowCamera=function(){var n=e.getActiveCameraAndResetIfCreated();t.lights.forEach(function(e){e.lightTypeIsSceneLight()||e.lightTypeIsCameraLight()||(e.lightTypeIsHeadLight()?(e.setPositionFrom(n.getPositionByReference()),e.setFocalPointFrom(n.getFocalPointByReference()),e.modified(n.getMTime())):wc("light has unknown light type",e.get()))})},e.updateLightGeometry=function(){return!t.lightFollowCamera||e.updateLightsGeometryToFollowCamera()},e.allocateTime=Tc("allocateTime"),e.updateGeometry=Tc("updateGeometry"),e.getVTKWindow=function(){return t.renderWindow},e.setLayer=function(n){xc(e.getClassName(),e,"setting Layer to ",n),t.layer!==n&&(t.layer=n,e.modified()),e.setPreserveColorBuffer(!!n)},e.setActiveCamera=function(n){return t.activeCamera!==n&&(t.activeCamera=n,e.modified(),e.invokeEvent({type:"ActiveCameraEvent",camera:n}),!0)},e.makeCamera=function(){var t=dc.newInstance();return e.invokeEvent({type:"CreateCameraEvent",camera:t}),t},e.getActiveCamera=function(){return t.activeCamera||(t.activeCamera=e.makeCamera()),t.activeCamera},e.getActiveCameraAndResetIfCreated=function(){return t.activeCamera||(e.getActiveCamera(),e.resetCamera()),t.activeCamera},e.addActor=e.addViewProp,e.addVolume=e.addViewProp,e.removeActor=function(n){t.actors=t.actors.filter(function(e){return e!==n}),e.removeViewProp(n)},e.removeVolume=function(n){t.volumes=t.volumes.filter(function(e){return e!==n}),e.removeViewProp(n)},e.addLight=function(n){t.lights=[].concat(t.lights,n),e.modified()},e.getActors=function(){return t.actors=[],t.props.forEach(function(e){t.actors=t.actors.concat(e.getActors())}),t.actors},e.getVolumes=function(){return t.volumes=[],t.props.forEach(function(e){t.volumes=t.volumes.concat(e.getVolumes())}),t.volumes},e.removeLight=function(n){t.lights=t.lights.filter(function(e){return e!==n}),e.modified()},e.removeAllLights=function(){t.lights=[]},e.setLightCollection=function(n){t.lights=n,e.modified()},e.makeLight=gc.newInstance,e.createLight=function(){t.automaticLightCreation&&(t.createdLight&&(e.removeLight(t.createdLight),t.createdLight.delete(),t.createdLight=null),t.createdLight=e.makeLight(),e.addLight(t.createdLight),t.createdLight.setLightTypeToHeadLight(),t.createdLight.setPosition(e.getActiveCamera().getPosition()),t.createdLight.setFocalPoint(e.getActiveCamera().getFocalPoint()))},e.normalizedDisplayToWorld=function(t,n,r,i){var a=e.normalizedDisplayToView(t,n,r);return e.viewToWorld(a[0],a[1],a[2],i)},e.worldToNormalizedDisplay=function(t,n,r,i){var a=e.worldToView(t,n,r);return e.viewToNormalizedDisplay(a[0],a[1],a[2],i)},e.viewToWorld=function(e,n,r,i){if(null===t.activeCamera)return wc("ViewToWorld: no active camera, cannot compute view to world, returning 0,0,0"),[0,0,0];var a=t.activeCamera.getCompositeProjectionMatrix(i,-1,1);Ye.c.invert(a,a),Ye.c.transpose(a,a);var o=Ye.e.fromValues(e,n,r);return Ye.e.transformMat4(o,o,a),[o[0],o[1],o[2]]},e.worldToView=function(e,n,r,i){if(null===t.activeCamera)return wc("ViewToWorld: no active camera, cannot compute view to world, returning 0,0,0"),[0,0,0];var a=t.activeCamera.getCompositeProjectionMatrix(i,-1,1);Ye.c.transpose(a,a);var o=Ye.e.fromValues(e,n,r);return Ye.e.transformMat4(o,o,a),[o[0],o[1],o[2]]},e.computeVisiblePropBounds=function(){t.allBounds[0]=N.a.INIT_BOUNDS[0],t.allBounds[1]=N.a.INIT_BOUNDS[1],t.allBounds[2]=N.a.INIT_BOUNDS[2],t.allBounds[3]=N.a.INIT_BOUNDS[3],t.allBounds[4]=N.a.INIT_BOUNDS[4],t.allBounds[5]=N.a.INIT_BOUNDS[5];var r=!0;e.invokeEvent(n);for(var i=0;i<t.props.length;++i){var a=t.props[i];if(a.getVisibility()&&a.getUseBounds()){var o=a.getBounds();o&&f.areBoundsInitialized(o)&&(r=!1,o[0]<t.allBounds[0]&&(t.allBounds[0]=o[0]),o[1]>t.allBounds[1]&&(t.allBounds[1]=o[1]),o[2]<t.allBounds[2]&&(t.allBounds[2]=o[2]),o[3]>t.allBounds[3]&&(t.allBounds[3]=o[3]),o[4]<t.allBounds[4]&&(t.allBounds[4]=o[4]),o[5]>t.allBounds[5]&&(t.allBounds[5]=o[5]))}}return r&&(f.uninitializeBounds(t.allBounds),xc("Can't compute bounds, no 3D props are visible")),t.allBounds},e.resetCamera=function(){var n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||e.computeVisiblePropBounds(),r=[0,0,0];if(!f.areBoundsInitialized(n))return xc("Cannot reset camera!"),!1;var a=null;if(!e.getActiveCamera())return wc("Trying to reset non-existant camera"),!1;a=t.activeCamera.getViewPlaneNormal(),t.activeCamera.setViewAngle(30),r[0]=(n[0]+n[1])/2,r[1]=(n[2]+n[3])/2,r[2]=(n[4]+n[5])/2;var o=n[1]-n[0],s=n[3]-n[2],u=n[5]-n[4],l=(o*=o)+(s*=s)+(u*=u);l=0===l?1:l,l=.5*Math.sqrt(l);var c=f.radiansFromDegrees(t.activeCamera.getViewAngle()),d=l,p=l/Math.sin(.5*c),h=t.activeCamera.getViewUp();return Math.abs(f.dot(h,a))>.999&&(Ac("Resetting view-up since view plane normal is parallel"),t.activeCamera.setViewUp(-h[2],h[0],h[1])),t.activeCamera.setFocalPoint(r[0],r[1],r[2]),t.activeCamera.setPosition(r[0]+p*a[0],r[1]+p*a[1],r[2]+p*a[2]),e.resetCameraClippingRange(n),t.activeCamera.setParallelScale(d),t.activeCamera.setPhysicalScale(l),t.activeCamera.setPhysicalTranslation(-r[0],-r[1],-r[2]),e.invokeEvent(i),!0},e.resetCameraClippingRange=function(){var n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||e.computeVisiblePropBounds();if(!f.areBoundsInitialized(n))return xc("Cannot reset camera clipping range!"),!1;if(e.getActiveCameraAndResetIfCreated(),!t.activeCamera)return wc("Trying to reset clipping range of non-existant camera"),!1;var i=t.activeCamera.computeClippingRange(n),a=0;if(t.activeCamera.getParallelProjection())a=.1*t.activeCamera.getParallelScale();else{var o=f.radiansFromDegrees(t.activeCamera.getViewAngle());a=.2*Math.tan(o/2)*i[1]}return i[1]-i[0]<a&&(a=a-i[1]+i[0],i[1]+=a/2,i[0]-=a/2),i[0]<0&&(i[0]=0),i[0]=.99*i[0]-(i[1]-i[0])*t.clippingRangeExpansion,i[1]=1.01*i[1]+(i[1]-i[0])*t.clippingRangeExpansion,i[0]=i[0]>=i[1]?.01*i[1]:i[0],t.nearClippingPlaneTolerance||(t.nearClippingPlaneTolerance=.01),i[0]<t.nearClippingPlaneTolerance*i[1]&&(i[0]=t.nearClippingPlaneTolerance*i[1]),t.activeCamera.setClippingRange(i[0],i[1]),e.invokeEvent(r),!1},e.setRenderWindow=function(e){e!==t.renderWindow&&(t.vtkWindow=e,t.renderWindow=e)},e.visibleActorCount=function(){return t.props.filter(function(e){return e.getVisibility()}).length},e.visibleVolumeCount=e.visibleActorCount,e.getMTime=function(){var e=t.mtime,n=t.activeCamera?t.activeCamera.getMTime():0;n>e&&(e=n);var r=t.createdLight?t.createdLight.getMTime():0;return r>e&&(e=r),e},e.getTransparent=function(){return!!t.preserveColorBuffer},e.isActiveCameraCreated=function(){return!!t.activeCamera}}(e,t)}var Dc={newInstance:h.a.newInstance(Sc,"vtkRenderer"),extend:Sc},Ic={Corners:{TOP_LEFT:"TOP_LEFT",TOP_RIGHT:"TOP_RIGHT",BOTTOM_LEFT:"BOTTOM_LEFT",BOTTOM_RIGHT:"BOTTOM_RIGHT"}};function Ec(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Nc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Oc=h.a.vtkErrorMacro,_c=Ic.Corners;var Lc={viewportCorner:Ic.Corners.BOTTOM_LEFT,viewportSize:.2,minPixelSize:50,maxPixelSize:200};function Pc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Lc,n),h.a.obj(e,t),h.a.get(e,t,["enabled","viewportCorner","viewportSize"]),h.a.setGet(e,t,["interactor","minPixelSize","maxPixelSize"]),h.a.get(e,t,["actor"]),function(e,t){t.classHierarchy.push("vtkOrientationMarkerWidget");var n=[],r=Dc.newInstance(),i=null,a=null;e.computeViewport=function(){var e=Nc(t.interactor.getView().getSize(),2),n=e[0],r=e[1],i=Math.min(n,r),a=t.viewportSize*i,o=(a=Math.max(Math.min(t.minPixelSize,i),Math.min(t.maxPixelSize,a)))/n,s=a/r;switch(t.viewportCorner){case _c.TOP_LEFT:return[0,1-s,o,1];case _c.TOP_RIGHT:return[1-o,1-s,1,1];case _c.BOTTOM_LEFT:return[0,0,o,s];case _c.BOTTOM_RIGHT:return[1-o,0,1,s];default:return Oc("Invalid widget corner"),null}},e.updateViewport=function(){r.setViewport.apply(r,Ec(e.computeViewport())),t.interactor.render()},e.updateMarkerOrientation=function(){var e=t.interactor.findPokedRenderer().getActiveCamera();if(e){var i=e.getReferenceByName("position"),a=e.getReferenceByName("focalPoint"),o=e.getReferenceByName("viewUp");if(n[0]!==i[0]||n[1]!==i[1]||n[2]!==i[2]||n[3]!==a[0]||n[4]!==a[1]||n[5]!==a[2]||n[6]!==o[0]||n[7]!==o[1]||n[8]!==o[2]){n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=a[0],n[4]=a[1],n[5]=a[2],n[6]=o[0],n[7]=o[1],n[8]=o[2];var s=r.getActiveCamera();s.setPosition(i[0],i[1],i[2]),s.setFocalPoint(a[0],a[1],a[2]),s.setViewUp(o[0],o[1],o[2]),r.resetCamera()}}},e.setEnabled=function(n){if(n){if(t.enabled)return;if(!t.actor)return void Oc("Must set actor before enabling orientation marker.");if(!t.interactor)return void Oc("Must set interactor before enabling orientation marker.");var o=t.interactor.findPokedRenderer().getRenderWindow();o.addRenderer(r),o.getNumberOfLayers()<2&&o.setNumberOfLayers(2),r.setLayer(o.getNumberOfLayers()-1),r.setInteractive(!1),r.addViewProp(t.actor),t.actor.setVisibility(!0);var s=t.interactor.onAnimation(e.updateMarkerOrientation);i=s.unsubscribe;var u=t.interactor.getView().onModified(e.updateViewport);a=u.unsubscribe,e.updateViewport(),e.updateMarkerOrientation(),t.enabled=!0}else{if(!t.enabled)return;t.enabled=!1,a(),a=null,i(),i=null,t.actor.setVisibility(!1),r.removeViewProp(t.actor);var l=t.interactor.findPokedRenderer().getRenderWindow();l&&l.removeRenderer(r)}e.modified()},e.setViewportCorner=function(n){n!==t.viewportCorner&&(t.viewportCorner=n,t.enabled&&e.updateViewport())},e.setViewportSize=function(n){var r=Math.min(1,Math.max(0,n));r!==t.viewportSize&&(t.viewportSize=r,t.enabled&&e.updateViewport())},e.setActor=function(n){var r=t.enabled;e.setEnabled(!1),t.actor=n,e.setEnabled(r)},e.getRenderer=function(){return r}}(e,t)}var kc=h.a.newInstance(Pc,"vtkOrientationMarkerWidget"),Rc=Object.assign({newInstance:kc,extend:Pc},Ic),jc={Manipulators:bo,Misc:Co,Style:Qo,UI:au,Widgets:{vtkAbstractWidget:uu,vtkDistanceRepresentation:bl,vtkDistanceWidget:Vl,vtkHandleRepresentation:Ru,vtkHandleWidget:Il,vtkImageCroppingRegionsRepresentation:Kl,vtkImageCroppingRegionsWidget:sc,vtkLabelRepresentation:Fu,vtkLabelWidget:_l,vtkLineRepresentation:gl,vtkLineWidget:Bl,vtkOrientationMarkerWidget:Rc,vtkPiecewiseGaussianWidget:Zs,vtkPointPlacer:Su,vtkSphereHandleRepresentation:ll,vtkWidgetRepresentation:Ou}},Bc=n(47),zc=n(15),Fc=n(57),Vc=n(134);function Uc(e){return{subscribeToImageStream:function(t){return e.subscribe("viewport.image.push.subscription",t)},unsubscribeToImageStream:function(t){return e.unsubscribe(t)},registerView:function(t){return e.call("viewport.image.push.observer.add",[t])},unregisterView:function(t){return e.call("viewport.image.push.observer.remove",[t])},enableView:function(t,n){return e.call("viewport.image.push.enabled",[t,n])},render:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{size:[400,400],view:-1};return e.call("viewport.image.push",[t])},invalidateCache:function(t){return e.call("viewport.image.push.invalidate.cache",[t])},setQuality:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e.call("viewport.image.push.quality",[t,n,r])},setSize:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:400,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:400;return e.call("viewport.image.push.original.size",[t,n,r])},setServerAnimationFPS:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;return e.call("viewport.image.animation.fps.max",[t])},getServerAnimationFPS:function(){return e.call("viewport.image.animation.fps.get",[])},startAnimation:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return e.call("viewport.image.animation.start",[t])},stopAnimation:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return e.call("viewport.image.animation.stop",[t])},updateCamera:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return e.call("viewport.camera.update",[t,n,r,i,a])},updateCameraParameters:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e.call("viewport.camera.update.params",[t,n,r])}}}function Gc(e,t){function n(n){var r=Number(this.dataset.id);e.invokeImageReady(t.eventPool[r])}t.classHierarchy.push("vtkViewStream"),t.imageDecodingPool=[new Image,new Image],t.eventPool=[],t.nextPoolImageIndex=0,t.urlToRevoke=[],t.activeURL=null,t.fps=[],t.lastTime=Date.now(),t.lastImageEvent=null,e.pushCamera=function(){var n=t.camera.getReferenceByName("focalPoint"),r=t.camera.getReferenceByName("viewUp"),i=t.camera.getReferenceByName("position"),a=t.camera.getParallelProjection(),o=t.camera.getViewAngle(),s=t.camera.getParallelScale(),u=null;return u=t.useCameraParameters?t.protocol.updateCameraParameters(t.viewId,{focalPoint:n,viewUp:r,position:i,parallelProjection:a,viewAngle:o,parallelScale:s},!1):t.protocol.updateCamera(t.viewId,n,r,i,!1),t.isAnimating&&setTimeout(e.pushCamera,1e3/t.cameraUpdateRate),u},e.invalidateCache=function(){return t.protocol.invalidateCache(t.viewId)},e.render=function(){return t.protocol.render({view:t.viewId,size:t.size})},e.startAnimation=function(){return t.protocol.startAnimation(t.viewId)},e.stopAnimation=function(){return t.protocol.stopAnimation(t.viewId)},e.setSize=function(n,r){var i=!1;return t.size[0]===n&&t.size[1]===r||(t.size=[n,r],i=!0),i?(e.modified(),t.protocol.setSize(t.viewId,n,r)):Promise.resolve(!1)},e.startInteraction=function(){var n=[t.protocol.setQuality(t.viewId,t.interactiveQuality,t.interactiveRatio)];return t.camera&&(n.push(e.startAnimation()),t.isAnimating=!0,n.push(e.pushCamera())),Promise.all(n)},e.endInteraction=function(){var n=[];return n.push(t.protocol.setQuality(t.viewId,t.stillQuality,t.stillRatio)),t.camera?(n.push(e.stopAnimation()),t.isAnimating=!1,n.push(e.pushCamera())):n.push(e.render()),Promise.all(n)},e.setViewId=function(e){return!(t.viewId===e||!t.protocol)&&(t.viewId&&t.protocol.unregisterView(t.viewId),t.viewId=e,t.viewId&&t.protocol.registerView(t.viewId).then(function(e){var n=e.viewId;t.viewId=n}),!0)},e.processMessage=function(n){if(n.id==t.viewId){var r=new Blob([n.image],{type:t.mimeType});if(t.activeURL)for(t.urlToRevoke.push(t.activeURL),t.activeURL=null;t.urlToRevoke.length>60;){var i=t.urlToRevoke.shift();window.URL.revokeObjectURL(i)}t.activeURL=URL.createObjectURL(r);var a,o=Date.now(),s=Math.floor(1e4/(o-t.lastTime))/10;for(t.fps.push(s),t.lastTime=o,t.lastImageEvent={url:t.activeURL,fps:s,metadata:{size:n.size,id:n.id,memory:n.memsize,workTime:n.workTime}},t.decodeImage?(a=t.lastImageEvent,t.eventPool[t.nextPoolImageIndex]=a,a.image=t.imageDecodingPool[t.nextPoolImageIndex++],t.nextPoolImageIndex%=t.imageDecodingPool.length,a.image.src=a.url):e.invokeImageReady(t.lastImageEvent);t.fps.length>t.fpsWindowSize;)t.fps.shift()}},e.delete=h.a.chain(function(){for(t.unregisterViewStream(e),e.setViewId(null);t.urlToRevoke.length;)window.URL.revokeObjectURL(t.urlToRevoke.pop())},e.delete),function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;t.imageDecodingPool.length<e;)t.imageDecodingPool.push(new Image);for(var r=0;r<t.imageDecodingPool.length;r++)t.imageDecodingPool[r].dataset.id=r,t.imageDecodingPool[r].onload=n}()}var Wc={cameraUpdateRate:30,decodeImage:!0,fpsWindowSize:250,interactiveQuality:80,interactiveRatio:1,isAnimating:!1,mimeType:"image/jpeg",size:[-1,-1],stillQuality:100,stillRatio:1,useCameraParameters:!1,viewId:null};function Hc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Wc,n),h.a.obj(e,t),h.a.event(e,t,"ImageReady"),h.a.get(e,t,["viewId","size","fps","lastImageEvent"]),h.a.setGet(e,t,["camera","cameraUpdateRate","decodeImage","fpsWindowSize","interactiveQuality","interactiveRatio","stillQuality","stillRatio","useCameraParameters"]),Gc(e,t),Object.assign(e,t.sharedAPI)}var Yc={newInstance:h.a.newInstance(Hc,"vtkViewStream"),extend:Hc};var Qc={viewStreams:[],serverAnimationFPS:-1};function qc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Qc,n),h.a.obj(e,t),h.a.get(e,t,["serverAnimationFPS","protocol"]),function(e,t){function n(e){var n=e[0];if(n&&n.image)for(var r=0;r<t.viewStreams.length;r++)t.viewStreams[r].processMessage(n)}t.classHierarchy.push("vtkImageStream"),e.setServerAnimationFPS=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,r=!1;return t.serverAnimationFPS!==n&&(t.serverAnimationFPS=n,r=!0),t.protocol?(r&&e.modified(),t.protocol.setServerAnimationFPS(n)):Promise.resolve(!0)},e.connect=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Uc;!t.connected&&e&&r&&(t.protocol=r(e),t.protocol.subscribeToImageStream(n).then(function(e){t.renderTopicSubscription=e,t.connected=!0}).catch(function(e){t.connected=!1,console.error(e)}))},e.disconnect=function(){t.protocol&&t.connected&&t.renderTopicSubscription&&(t.protocol.unsubscribeToImageStream(t.renderTopicSubscription),t.renderTopicSubscription=null),t.connected=!1},e.registerViewStream=function(e){t.viewStreams.push(e)},e.unregisterViewStream=function(e){t.viewStreams=t.viewStreams.filter(function(t){return t!==e})},e.createViewStream=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"-1",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[400,400],i=e.setServerAnimationFPS,a=e.getServerAnimationFPS,o=e.unregisterViewStream,s=Yc.newInstance({protocol:t.protocol,unregisterViewStream:o,sharedAPI:{setServerAnimationFPS:i,getServerAnimationFPS:a}});return s.setViewId(n),s.setSize(r[0],r[1]),e.registerViewStream(s),s},e.delete=h.a.chain(function(){for(;t.viewStreams.length;)t.viewStreams.pop().delete();e.disconnect()},e.delete)}(e,t)}var Xc={newInstance:h.a.newInstance(qc,"vtkImageStream"),extend:qc},Kc=null;function Zc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r={};return Object.keys(e).forEach(function(i){-1===n.indexOf(i)?r[i]=function(e,t){return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return new Promise(function(n,i){t(1),e.apply(void 0,r).then(function(e){t(-1),n(e)},function(e){t(-1),i(e)})})}}(e[i],t):r[i]=e[i]}),r}var Jc={notBusyList:[],busyCount:0,timeoutId:0,notificationTimeout:50,createImageStream:!0};function $c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Jc,n),h.a.obj(e,t),h.a.setGet(e,t,["protocols","notBusyList","createImageStream"]),h.a.get(e,t,["connection","config","remote","imageStream"]),h.a.event(e,t,"BusyChange"),h.a.event(e,t,"ConnectionReady"),h.a.event(e,t,"ConnectionError"),h.a.event(e,t,"ConnectionClose"),function(e,t){function n(){e.invokeBusyChange(t.busyCount)}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;t.busyCount+=e,t.timeoutId&&(clearTimeout(t.timeoutId),t.timeoutId=0),t.busyCount?n():t.timeoutId=setTimeout(n,t.notificationTimeout)}t.classHierarchy.push("vtkWSLinkClient"),e.beginBusy=function(){return r(1)},e.endBusy=function(){return r(-1)},e.isBusy=function(){return!!t.busyCount},e.isConnected=function(){return!!t.connection},e.connect=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Kc?t.connection?Promise.reject(new Error("Need to disconnect first")):(t.config=n,new Promise(function(i,a){t.smartConnect=Kc.newInstance({config:n}),t.smartConnect.onConnectionReady(function(n){t.connection=n,t.remote={},t.config=t.smartConnect.getConfig();var a=n.getSession();t.protocols=t.protocols||{},Object.keys(t.protocols).forEach(function(e){t.remote[e]=Zc(t.protocols[e](a),r,t.notBusyList)}),t.createImageStream&&(t.imageStream=Xc.newInstance(),t.imageStream.connect(a)),e.invokeConnectionReady(e),i(e)}),t.smartConnect.onConnectionError(function(t){e.invokeConnectionError(t),a(t)}),t.smartConnect.onConnectionClose(function(t){e.invokeConnectionClose(t),a(t)}),t.smartConnect.connect()})):Promise.reject(new Error("Need to provide SmartConnect"))},e.disconnect=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:60;t.connection&&(t.connection.destroy(e),t.connection=null)}}(e,t)}var ef={newInstance:h.a.newInstance($c,"vtkWSLinkClient"),extend:$c,setSmartConnectClass:function(e){Kc=e}},tf={BinaryHelper:Bc.a,DataAccessHelper:zc.a,vtkHttpDataSetReader:Fc.a,vtkHttpSceneLoader:Vc.a,vtkImageStream:Xc,vtkWSLinkClient:ef},nf={vtkSTLReader:n(135).a};function rf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var af={POINTS:"getPoints",VERTICES:"getVerts",LINES:"getLines",TRIANGLE_STRIPS:"getStrips",POLYGONS:"getPolys",POINT_DATA:"getPointData",CELL_DATA:"getCellData",FIELD:"getFieldData"},of={bit:Uint8Array,unsigned_char:Uint8Array,char:Int8Array,unsigned_short:Uint16Array,short:Int16Array,unsigned_int:Uint32Array,int:Int32Array,unsigned_long:Uint32Array,long:Int32Array,float:Float32Array,double:Float64Array},sf={SCALARS:"addArray",COLOR_SCALARS:"addArray",VECTORS:"setVectors",NORMALS:"setNormals",TEXTURE_COORDINATES:"setTCoords",TENSORS:"setTensors",FIELD:"addArray"};function uf(e,t,n){var r=0;return function(i){return i.split(" ").forEach(function(t){t.length&&(e[r++]=Number(t))}),r<e.length||(t(e,n),!1)}}var lf={init:function(e,t){var n=rf(e.split(" "),3),r=n[0],i=n[1],a=n[2],o=t.dataset[af[r]]();return o.set({numberOfCells:Number(i)},!0),t.arrayHandler=uf(new Uint32Array(Number(a)),o.setData,1),!0},parse:function(e,t){return t.arrayHandler(e)}},cf={DATASET:{init:function(e,t){var n=e.split(" ")[1];switch(n){case"POLYDATA":t.dataset=Se.a.newInstance();break;default:console.error("Dataset of type ".concat(n," not supported"))}return!1},parse:function(e,t){return!1}},POINTS:{init:function(e,t){var n=rf(e.split(" "),3),r=n[0],i=n[1],a="float"===n[2]?new Float32Array(3*Number(i)):new Float64Array(3*Number(i)),o=t.dataset.getPoints();return o.setName(r),t.arrayHandler=uf(a,o.setData,3),!0},parse:function(e,t){return t.arrayHandler(e)}},METADATA:{init:function(e,t){return!0},parse:function(e,t){return!!e.length}},VERTICES:lf,LINES:lf,TRIANGLE_STRIPS:lf,POLYGONS:lf,POINT_DATA:{init:function(e,t){return t.POINT_DATA=Number(e.split(" ")[1]),t.activeFieldLocation="POINT_DATA",!1},parse:function(e,t){return!1}},CELL_DATA:{init:function(e,t){return t.CELL_DATA=Number(e.split(" ")[1]),t.activeFieldLocation="CELL_DATA",!1},parse:function(e,t){return!1}},SCALARS:{init:function(e,t){var n=rf(e.split(" "),4),r=n[0],a=n[1],o=n[2],s=n[3],u=t[t.activeFieldLocation]*Number(s),l=new of[o](u),c=i.a.newInstance({name:a,empty:!0});return t.dataset[af[t.activeFieldLocation]]()[sf[r]](c),t.arrayHandler=uf(l,c.setData,Number(s)),!0},parse:function(e,t){return"LOOKUP_TABLE"===e.split(" ")[0]||t.arrayHandler(e)}},COLOR_SCALARS:{init:function(e,t){var n=rf(e.split(" "),3),r=n[0],a=n[1],o=n[2],s=t[t.activeFieldLocation]*Number(o),u=new Uint8Array(s),l=i.a.newInstance({name:a,empty:!0});return t.dataset[af[t.activeFieldLocation]]()[sf[r]](l),t.arrayHandler=uf(u,l.setData,Number(o)),!0},parse:function(e,t){return"LOOKUP_TABLE"===e.split(" ")[0]||t.arrayHandler(e)}},VECTORS:{init:function(e,t){var n=rf(e.split(" "),3),r=n[0],a=n[1],o=n[2],s=3*t[t.activeFieldLocation],u=new of[o](s),l=i.a.newInstance({name:a,empty:!0});return t.dataset[af[t.activeFieldLocation]]()[sf[r]](l),t.arrayHandler=uf(u,l.setData,3),!0},parse:function(e,t){return t.arrayHandler(e)}},NORMALS:{init:function(e,t){var n=rf(e.split(" "),2),r=n[0],a=n[1],o=3*t[t.activeFieldLocation],s=new Float32Array(o),u=i.a.newInstance({name:a,empty:!0});return t.dataset[af[t.activeFieldLocation]]()[sf[r]](u),t.arrayHandler=uf(s,u.setData,3),!0},parse:function(e,t){return t.arrayHandler(e)}},TEXTURE_COORDINATES:{init:function(e,t){var n=rf(e.split(" "),4),r=n[0],a=n[1],o=n[2],s=n[3],u=t[t.activeFieldLocation]*Number(o),l=new of[s](u),c=i.a.newInstance({name:a,empty:!0});return t.dataset[af[t.activeFieldLocation]]()[sf[r]](c),t.arrayHandler=uf(l,c.setData,3),!0},parse:function(e,t){return t.arrayHandler(e)}},TENSORS:{init:function(e,t){var n=rf(e.split(" "),3),r=n[0],a=n[1],o=n[2],s=9*t[t.activeFieldLocation],u=new of[o](s),l=i.a.newInstance({name:a,empty:!0});return t.dataset[af[t.activeFieldLocation]]()[sf[r]](l),t.arrayHandler=uf(u,l.setData,9),!0},parse:function(e,t){return t.arrayHandler(e)}}};var ff={parseLegacyASCII:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,r=/\r?\n/.exec(e),i=null!==r?r[0]:null;return e.split(i).forEach(function(e,r){if(!(r<2))if(n)n&&!n.parse(e,t)&&(n=null);else{if(!(n=function(e,t){var n=e.split(" ");return cf[n[0]]}(e)))return;n=n.init(e,t)?n:null}}),t}};function df(e,t){t.classHierarchy.push("vtkPolyDataReader"),t.dataAccessHelper||(t.dataAccessHelper=zc.a.get("http")),e.setUrl=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.url=n;var i=n.split("/");return i.pop(),t.baseURL=i.join("/"),t.compression=r.compression,e.loadData({progressCallback:r.progressCallback})},e.loadData=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=function(n){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var r=t.compression,i=t.progressCallback;return t.dataAccessHelper.fetchText(e,n,{compression:r,progressCallback:i})}(t.url,n);return r.then(e.parseAsText),r},e.parseAsText=function(n){n&&n!==t.parseData&&(e.modified(),t.parseData=n,t.output[0]=ff.parseLegacyASCII(t.parseData).dataset)},e.requestData=function(n,r){e.parseAsText(t.parseData)}}var pf={};function hf(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,pf,n),h.a.obj(e,t),h.a.get(e,t,["url","baseURL"]),h.a.setGet(e,t,["dataAccessHelper"]),h.a.algo(e,t,0,1),df(e,t),t.compression||(t.compression=null),t.progressCallback||(t.progressCallback=null)}var gf=h.a.newInstance(hf,"vtkPolyDataReader"),mf={vtkLegacyAsciiParser:ff,vtkPolyDataReader:{newInstance:gf,extend:hf}};function vf(e,t){t.classHierarchy.push("vtkElevationReader"),t.dataAccessHelper||(t.dataAccessHelper=zc.a.get("http")),e.setUrl=function(n,r){return t.url=n,e.loadData(r)},e.loadData=function(n){return function(n,r){return t.dataAccessHelper.fetchText(e,n,r)}(t.url,n).then(function(t){return e.parseAsText(t),!0})},e.parseAsText=function(n){t.csv=n,t.elevation=[],t.csv.split("\n").forEach(function(e,n){t.elevation.push(e.split(",").map(function(e){return Number(e)}))}),e.modified()},e.requestData=function(e,n){var a=Se.a.newInstance();if(a.getPoints().setData(new Float32Array(0,0,0,1,1,1),3),t.elevation){var o=t.elevation.length,s=t.elevation[0].length,u=a.getPoints();u.setNumberOfPoints(s*o,3);var l=u.getData(),c=r.a.newInstance({size:5*(s-1)*(o-1)});a.setPolys(c);var f=c.getData(),d=0,p=new Float32Array(s*o*2),h=i.a.newInstance({numberOfComponents:2,values:p,name:"TextureCoordinates"});a.getPointData().setTCoords(h);for(var g=0;g<o;g++)for(var m=0;m<s;m++){var v=g*s+m,y=3*v;l[y+0]=t.origin[0]+m*t.xSpacing*t.xDirection,l[y+1]=t.origin[1]+g*t.ySpacing*t.yDirection,l[y+2]=t.origin[2]+t.elevation[g][m]*t.zScaling,p[2*v]=m/(s-1),p[2*v+1]=1-g/(o-1),m>0&&g>0&&(f[d++]=4,f[d++]=v,f[d++]=v-1,f[d++]=v-1-s,f[d++]=v-s)}}t.output[0]=a},e.isBusy=function(){return!!t.requestCount}}var yf={origin:[0,0,0],xSpacing:1,ySpacing:1,zScaling:1,xDirection:1,yDirection:-1,requestCount:0};function bf(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,yf,n),h.a.obj(e,t),h.a.get(e,t,["url"]),h.a.setGet(e,t,["dataAccessHelper","xSpacing","ySpacing","zScaling","xDirection","yDirection"]),h.a.algo(e,t,0,1),h.a.event(e,t,"busy"),vf(e,t)}var Mf={newInstance:h.a.newInstance(bf,"vtkElevationReader"),extend:bf},xf=$.convertItkToVtkImage,wf=null,Af=function(e){return e};var Tf={fileName:"",arrayName:null};function Cf(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Tf,n),h.a.obj(e,t),h.a.algo(e,t,0,1),h.a.setGet(e,t,["fileName","arrayName"]),function(e,t){t.classHierarchy.push("vtkITKImageReader"),e.parseAsArrayBuffer=function(n){return n&&n!==t.rawDataBuffer?(t.rawDataBuffer=n,wf(n,t.fileName).then(Af).then(function(n){var r,i,a,o=xf(n,{scalarArrayName:t.arrayName||(r=t.fileName,i=r.lastIndexOf("."),a=i>-1?r.substring(0,i):r,"Scalars ".concat(a))});t.output[0]=o,e.modified()})):Promise.resolve()},e.requestData=function(n,r){e.parseAsArrayBuffer(t.rawDataBuffer,t.fileName)}}(e,t),wf||console.error("\n      // Dependency needs to be added inside your project\n      import readImageArrayBuffer from 'itk/readImageArrayBuffer';\n      vtkITKImageReader.setReadImageArrayBufferFromITK(readImageArrayBuffer);\n      ")}var Sf={newInstance:h.a.newInstance(Cf,"vtkITKImageReader"),extend:Cf,setReadImageArrayBufferFromITK:function(e){4===(wf=e).length&&(wf=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(void 0,[null].concat(n))},Af=function(e){var t=e.webWorker,n=e.image;return t.terminate(),n})}};function Df(e,t){t.classHierarchy.push("vtkJSONNucleoReader"),t.dataAccessHelper||(t.dataAccessHelper=zc.a.get("http")),e.setUrl=function(n,r){return t.url=n,e.loadData(r)},e.loadData=function(n){return function(n,r){return t.dataAccessHelper.fetchText(e,n,r)}(t.url,n).then(function(t){return e.parseAsText(t),!0})},e.parseAsText=function(n){var r=JSON.parse(n),i=r.vertices,a=r.indices,o=a.length,s=o/3+o;t.points=Float32Array.from(i),t.polys=s<65535?new Uint16Array(s):new Uint32Array(s);for(var u=0,l=0;l<t.polys.length;)t.polys[l++]=3,t.polys[l++]=a[u++],t.polys[l++]=a[u++],t.polys[l++]=a[u++];e.modified()},e.requestData=function(e,n){var r=Se.a.newInstance();r.getPoints().setData(t.points,3),r.getPolys().setData(t.polys),t.output[0]=r}}var If={};function Ef(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,If,n),h.a.obj(e,t),h.a.get(e,t,["url"]),h.a.setGet(e,t,["dataAccessHelper"]),h.a.algo(e,t,0,1),Df(e,t)}var Nf={newInstance:h.a.newInstance(Ef,"vtkJSONNucleoReader"),extend:Ef};function Of(e,t){t.classHierarchy.push("vtkJSONReader"),e.setUrl=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.url=n,e.loadData(r)},e.loadData=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.dataAccessHelper.fetchText(e,n,r)}(t.url,n).then(e.parseAsText)},e.parseAsText=function(n){return!!n&&(t.data=JSON.parse(n),e.modified(),!0)},e.requestData=function(e,n){n[0]=t.data},e.isBusy=function(){return!1},e.getNumberOfOutputPorts=function(){return t.numberOfOutputs}}var _f={};function Lf(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,_f,n),h.a.obj(e,t),h.a.get(e,t,["url"]),h.a.algo(e,t,0,1),h.a.event(e,t,"busy"),Of(e,t)}var Pf={newInstance:h.a.newInstance(Lf,"vtkJSONReader"),extend:Lf},kf=n(34);function Rf(e,t){function n(){t.requestCount--,0===t.requestCount&&e.invokeBusy(!1)}function r(e){if("#"!==e[0]&&0!==e.length){var r=e.split(/[ \t]+/).map(function(e){return e.trim()}).filter(function(e){return e.length});if("newmtl"===r[0])r.shift(),t.currentMaterial=r.join(" ").trim();else if(t.currentMaterial){if(r.length<2)return;if(t.materials[t.currentMaterial]||(t.materials[t.currentMaterial]={}),t.materials[t.currentMaterial][r[0]]=r.slice(1),"map_Kd"===r[0]){var i=new Image;i.onload=function(){return setTimeout(n,0)},i.src=[t.baseURL,r[1]].join("/"),t.materials[t.currentMaterial].image=i,t.requestCount++}}}}t.classHierarchy.push("vtkMTLReader"),t.dataAccessHelper||(t.dataAccessHelper=zc.a.get("http")),e.setUrl=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(-1!==n.indexOf(".mtl")||r.fullpath){t.url=n;var i=n.split("/");i.pop(),t.baseURL=i.join("/")}else t.baseURL=n,t.url="".concat(n,"/index.mtl");return e.loadData(r)},e.loadData=function(n){return new Promise(function(r,i){var a,o;(a=t.url,o=n,t.dataAccessHelper.fetchText(e,a,o)).then(function(t){e.parseAsText(t),r()},function(e){i()})})},e.parseAsText=function(n){e.modified(),t.materials={},n.split("\n").forEach(r)},e.isBusy=function(){return!!t.requestCount},e.getMaterialNames=function(){return Object.keys(t.materials)},e.getMaterial=function(e){return t.materials[e]},e.listImages=function(){return Object.keys(t.materials).map(function(e){return t.materials[e].map_Kd}).filter(function(e){return!!e}).map(function(e){return e[0].trim()})},e.setImageSrc=function(e,n){return new Promise(function(r,i){var a=Object.keys(t.materials).find(function(n){return t.materials[n].map_Kd&&t.materials[n].map_Kd[0].trim()===e.trim()}),o=t.materials[a];o&&o.image?(o.image.src=n,o.image.onload=function(){return setTimeout(r,0)}):r()})},e.applyMaterialToActor=function(e,n){var r=t.materials[e];if(r&&n){var i=[1,1,1],a={ambientColor:r.Ka?r.Ka.map(function(e){return Number(e)}):i,specularColor:r.Ks?r.Ks.map(function(e){return Number(e)}):i,diffuseColor:r.Kd?r.Kd.map(function(e){return Number(e)}):i,opacity:r.d?Number(r.d):1,specularPower:r.Ns?Number(r.Ns):1},o=Number(r.illum||2);if(["ambient","diffuse","specular"].forEach(function(e,t){a[e]=t<=o?1:0}),r.image){var s=kf.a.newInstance({interpolate:t.interpolateTextures});s.setImage(r.image),n.addTexture(s)}n.getProperty().set(a)}}}var jf={numberOfOutputs:1,requestCount:0,materials:{},interpolateTextures:!0};function Bf(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,jf,n),h.e(e,t),h.c(e,t,["url","baseURL"]),h.f(e,t,["dataAccessHelper","interpolateTextures","splitGroup"]),h.b(e,t,"busy"),Rf(e,t)}var zf={newInstance:h.d(Bf,"vtkMTLReader"),extend:Bf};function Ff(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Vf={};function Uf(e,t,n,r){for(var i=0;i<r;i++)n.push(e[t+i])}function Gf(e){if("#"!==e[0]){var t,n,r,i=e.split(/[ \t]+/);if(i[0]===Vf.splitOn)i.shift(),Vf.pieces.push(i.join(" ").trim()),Vf.f.push([]),Vf.size++;else if("v"===i[0])Vf.v.push(Number(i[1])),Vf.v.push(Number(i[2])),Vf.v.push(Number(i[3]));else if("vt"===i[0])Vf.vt.push(Number(i[1])),Vf.vt.push(Number(i[2]));else if("vn"===i[0])Vf.vn.push(Number(i[1])),Vf.vn.push(Number(i[2])),Vf.vn.push(Number(i[3]));else if("f"===i[0]){0===Vf.size&&Vf.size++;var a=Vf.f[Vf.size-1];i.shift();var o=i.filter(function(e){return e.length>0&&"\r"!==e}),s=o.length;a.push(s);for(var u=0;u<s;u++)a.push((t=o[u],void 0,void 0,n=t.split("/").map(function(e){return Number(e)}),[r=n[0]-1,n[1]?n[1]-1:r,n[2]?n[2]-1:r]))}}}function Wf(e,t){t.classHierarchy.push("vtkOBJReader"),t.dataAccessHelper||(t.dataAccessHelper=zc.a.get("http")),e.setUrl=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(-1!==n.indexOf(".obj")||r.fullpath){t.url=n;var i=n.split("/");i.pop(),t.baseURL=i.join("/")}else t.baseURL=n,t.url="".concat(n,"/index.obj");return e.loadData(r)},e.loadData=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.dataAccessHelper.fetchText(e,n,r)}(t.url,n).then(e.parseAsText)},e.parseAsText=function(n){return!n||(n!==t.parseData&&e.modified(),t.parseData=n,t.numberOfOutputs=0,r=t.splitMode,Vf.splitOn=r,Vf.pieces=[],Vf.v=[],Vf.vt=[],Vf.vn=[],Vf.f=[[]],Vf.size=0,n.split("\n").forEach(Gf),function(e){var t=!!Vf.vt.length,n=!!Vf.vn.length;if(e.splitMode){e.numberOfOutputs=Vf.size;for(var r=0;r<Vf.size;r++){for(var a={},o=Se.a.newInstance({name:Vf.pieces[r]}),s=[],u=[],l=[],c=[],f=Vf.f[r],d=f.length,p=0;p<d;){var h=f[p];c.push(h);for(var g=0;g<h;g++){var m=Ff(f[p+g+1],3),v=m[0],y=m[1],b=m[2],M="".concat(v,"/").concat(y,"/").concat(b);void 0===a[M]&&(a[M]=s.length/3,Uf(Vf.v,3*v,s,3),t&&Uf(Vf.vt,2*y,u,2),n&&Uf(Vf.vn,3*b,l,3)),c.push(a[M])}p+=h+1}if(o.getPoints().setData(Float32Array.from(s),3),o.getPolys().setData(Uint32Array.from(c)),t){var x=i.a.newInstance({numberOfComponents:2,values:Float32Array.from(u),name:"TextureCoordinates"});o.getPointData().setTCoords(x)}if(n){var w=i.a.newInstance({numberOfComponents:3,values:Float32Array.from(l),name:"Normals"});o.getPointData().setNormals(w)}e.output[r]=o}}else{e.numberOfOutputs=1;var A=Se.a.newInstance();if(A.getPoints().setData(Float32Array.from(Vf.v),3),t&&Vf.v.length/3==Vf.vt.length/2){var T=i.a.newInstance({numberOfComponents:2,values:Float32Array.from(Vf.vt),name:"TextureCoordinates"});A.getPointData().setTCoords(T)}if(n&&Vf.v.length===Vf.vn.length){var C=i.a.newInstance({numberOfComponents:3,values:Float32Array.from(Vf.vn),name:"Normals"});A.getPointData().setNormals(C)}for(var S=[],D=Vf.f[0],I=D.length,E=0;E<I;){var N=D[E];S.push(N);for(var O=0;O<N;O++)v=Ff(D[E+O+1],1)[0],S.push(v);E+=N+1}A.getPolys().setData(Uint32Array.from(S)),e.output[0]=A}}(t),!0);var r},e.requestData=function(n,r){e.parseAsText(t.parseData)},e.isBusy=function(){return!!t.requestCount},e.getNumberOfOutputPorts=function(){return t.numberOfOutputs}}var Hf={numberOfOutputs:1,requestCount:0,splitMode:null};function Yf(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Hf,n),h.a.obj(e,t),h.a.get(e,t,["url","baseURL"]),h.a.setGet(e,t,["dataAccessHelper","splitMode"]),h.a.algo(e,t,0,1),h.a.event(e,t,"busy"),Wf(e,t)}var Qf={newInstance:h.a.newInstance(Yf,"vtkOBJReader"),extend:Yf},qf=n(136);function Xf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Kf(e,t){t.classHierarchy.push("vtkPDBReader"),t.dataAccessHelper||(t.dataAccessHelper=zc.a.get("http")),e.setUrl=function(n,r){if(-1===n.indexOf(".pdb"))t.baseURL=n,t.url="".concat(n);else{t.url=n;var i=n.split("/");i.pop(),t.baseURL=i.join("/")}return e.loadData(r)},e.loadData=function(n){return function(n,r){return t.dataAccessHelper.fetchText(e,n,r)}(t.url,n).then(e.parseAsText)},e.parseAsText=function(n){return t.pdb=n,t.molecule=[],t.molecule=t.pdb.split("\n"),e.modified(),!0},e.requestData=function(e,n){var r=ye.newInstance();if(t.molecule){var i=t.molecule.length,a=[],o=[];t.numberOfAtoms=0;for(var s=0;s<i&&"END"!==t.molecule[s];){var u=t.molecule[s].length,l=t.molecule[s],c=l.substr(0,6).replace(/\s+/g,"");if(c.toUpperCase(),"ATOM"===c||"HETATM"===c){var f=l.substr(12,4).replace(/\s+/g,""),d=l.substr(30,8).replace(/\s+/g,""),p=l.substr(38,8).replace(/\s+/g,""),h=l.substr(46,8).replace(/\s+/g,""),g="";u>=78&&(g=l.substr(76,2).replace(/\s+/g,"")),""===g&&(g=f.substr(0,2).replace(/\d/g,"")),a.push(d),a.push(p),a.push(h);var m=Xf(qf[g],1)[0];o.push(m),t.numberOfAtoms++}s++}r.getAtoms().elements={},r.getAtoms().elements.number=Int8Array.from(o),r.getAtoms().coords={},r.getAtoms().coords["3d"]=Float32Array.from(a)}t.output[0]=r},e.isBusy=function(){return!!t.requestCount}}var Zf={numberOfAtoms:0,requestCount:0};function Jf(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Zf,n),h.a.obj(e,t),h.a.get(e,t,["url","baseURL","numberOfAtoms","requestCount"]),h.a.setGet(e,t,["dataAccessHelper"]),h.a.algo(e,t,0,1),h.a.event(e,t,"busy"),Kf(e,t)}var $f={newInstance:h.a.newInstance(Jf,"vtkPDBReader"),extend:Jf},ed=n(85),td=n.n(ed);function nd(e,t){t.classHierarchy.push("vtkSkyboxReader"),e.setUrl=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.url=n,e.loadData(r)},e.loadData=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var n=t.compression,r=t.progressCallback;return t.dataAccessHelper.fetchBinary(e,{compression:n,progressCallback:r})}(t.url,n).then(e.parseAsArrayBuffer)},e.parseAsArrayBuffer=function(n){if(!n)return!1;t.textures={},t.busy=!0,e.invokeBusy(t.busy),t.dataMapping={};var r=0,i=!1,a=[];function o(){if(0===--r||i){for(var n=0;n<t.positions.length;n++){var o=t.positions[n],s=t.dataMapping[o];if(t.textures[o]||(t.textures[o]=kf.a.newInstance({interpolate:!0})),s)for(var u=t.textures[o],c=0;c<6;c++){var f=t.faceMapping[c],d=f.fileName,p=f.transform,h=a.indexOf("".concat(o,"/").concat(d));-1!==h&&(u.setInputData(l.imageToImageData(s[d],p),c),URL.revokeObjectURL(s[d].src),delete s[d],a.splice(h,1))}}0===r&&(t.busy=!1,e.modified(),e.invokeBusy(t.busy))}}var s=new td.a;return s.loadAsync(n).then(function(){s.forEach(function(e,n){if(e.match(/index.json$/)&&(r++,n.async("text").then(function(e){var n=JSON.parse(e);n.skybox&&n.skybox.faceMapping&&(t.faceMapping=n.skybox.faceMapping),n.metadata&&n.metadata.skybox&&n.metadata.skybox.faceMapping&&(t.faceMapping=n.metadata.skybox.faceMapping),i=!0,o()})),e.match(/\.jpg$/)){r++;var s=e.split("/"),u=s.pop(),l=s.pop();t.dataMapping[l]||(t.dataMapping[l]={}),n.async("blob").then(function(e){var n=new Image,r="".concat(l,"/").concat(u);t.dataMapping[l][u]=n,n.onload=function(){a.push(r),o()},n.src=URL.createObjectURL(e)})}}),t.positions=Object.keys(t.dataMapping),t.position=t.positions[0]}),e.getReadyPromise()},e.requestData=function(e,n){n[0]=t.textures[t.position]},e.setPosition=function(n){-1!==t.positions.indexOf(n)&&n!==t.position&&(t.position=n,e.modified())},e.getReadyPromise=function(){return t.busy?new Promise(function(t,n){var r=e.onBusy(function(n){n||(r.unsubscribe(),t(e))})}):Promise.resolve(e)},e.isBusy=function(){return t.busy}}var rd={busy:!1,faceMapping:[{fileName:"right.jpg",transform:{flipY:!0}},{fileName:"left.jpg",transform:{flipY:!0}},{fileName:"up.jpg",transform:{flipY:!0}},{fileName:"down.jpg",transform:{flipY:!0}},{fileName:"back.jpg",transform:{flipY:!0}},{fileName:"front.jpg",transform:{flipY:!0}}]};function id(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,rd,n),h.a.obj(e,t),h.a.get(e,t,["url","positions","position"]),h.a.setGet(e,t,["faceMapping"]),h.a.event(e,t,"busy"),h.a.algo(e,t,0,6),nd(e,t)}var ad={vtkElevationReader:Mf,vtkITKImageReader:Sf,vtkJSONNucleoReader:Nf,vtkJSONReader:Pf,vtkMTLReader:zf,vtkOBJReader:Qf,vtkPDBReader:$f,vtkSkyboxReader:{newInstance:h.a.newInstance(id,"vtkSkyboxReader"),extend:id}},od=n(17),sd=n.n(od),ud=n(32);var ld={Int8:Int8Array,UInt8:Uint8Array,Int16:Int16Array,UInt16:Uint16Array,Int32:Int32Array,UInt32:Uint32Array,Int64:Int32Array,UInt64:Uint32Array,Float32:Float32Array,Float64:Float64Array},cd={Int8:1,UInt8:1,Int16:2,UInt16:2,Int32:4,UInt32:4,Int64:8,UInt64:8,Float32:4,Float64:8};function fd(e){var t=e.length-1;return e.filter(function(e,n){return n<t&&n%2==0})}function dd(e,t){if("UInt64"===t){var n=new Uint32Array(e.buffer,0,6),r=n[0],i=[8,r,n[2],n[4]];n=new Uint32Array(e.buffer,24,2*r);for(var a=0;a<r;a++)i.push(n[2*a]);return i}var o=new Uint32Array(e.buffer,0,3),s=o[0],u=[4,s,o[1],o[2]];o=new Uint32Array(e.buffer,12,s);for(var l=0;l<s;l++)u.push(o[l]);return u}function pd(e,t){var n=sd.a.inflate(e);t.uint8.set(n,t.offset),t.offset+=n.length}function hd(e,t,n,r,i,a){var o=t.getAttribute("type"),s=t.getAttribute("Name"),u=t.getAttribute("format"),l=Number(t.getAttribute("NumberOfComponents")||"1"),c=null;if("ascii"===u){c=new ld[o](e*l);var f=0;t.firstChild.nodeValue.split(/[\\t \\n]+/).forEach(function(e){e.trim().length&&(c[f++]=Number(e))})}else if("binary"===u){var d=Object(ud.toByteArray)(t.firstChild.nodeValue.trim());if("vtkZLibDataCompressor"===n){var p=new ArrayBuffer(cd[o]*e*l);c=new ld[o](p);for(var h={offset:0,uint8:new Uint8Array(p)},g=dd(d,i),m=g[1],v=d.length-(g.reduce(function(e,t){return e+t},0)-(g[0]+g[1]+g[2]+g[3])),y=0;y<m;y++){var b=g[4+y];pd(new Uint8Array(d.buffer,v,b),h),v+=b}-1!==o.indexOf("Int64")&&(c=fd(c))}else c=new ld[o](d.buffer,cd[i]),-1!==o.indexOf("Int64")&&(c=fd(c))}else if("appended"===u){var M=Number(t.getAttribute("offset")),x=new ld[i](a,M,1),w=x[0]/cd[o];-1!==o.indexOf("Int64")&&(w*=2),M+=cd[i],c=M%cd[o]==0?new ld[o](a,M,w):new ld[o](a.slice(M,M+x[0])),-1!==o.indexOf("Int64")&&(c=fd(c))}else console.error("Format not supported",u);return{name:s,values:c,numberOfComponents:l}}function gd(e,t){t.classHierarchy.push("vtkXMLReader"),t.dataAccessHelper||(t.dataAccessHelper=zc.a.get("http")),e.setUrl=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.url=n;var i=n.split("/");return i.pop(),t.baseURL=i.join("/"),e.loadData(r)},e.loadData=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.dataAccessHelper.fetchBinary(e,n)}(t.url,n).then(e.parseAsArrayBuffer)},e.parseAsArrayBuffer=function(n){if(!n)return!1;if(n===t.rawDataBuffer)return!0;e.modified();var r=function(e){return Bc.a.extractBinary(e,/^\s*<AppendedData\s+encoding="raw">\s*_/m,/\n\s*<\/AppendedData>/m)}(n),i=r.text,a=r.binaryBuffer;t.rawDataBuffer=n,t.binaryBuffer=a;var o=function(e){if(window.ActiveXObject){var t=new window.ActiveXObject("Microsoft.XMLDOM");return t.loadXML(e),t}return(new DOMParser).parseFromString(e,"application/xml")}(i).firstChild,s=o.getAttribute("type"),u=o.getAttribute("compressor"),l=o.getAttribute("byte_order"),c=o.getAttribute("header_type")||"UInt32";if(u&&"vtkZLibDataCompressor"!==u)return console.error("Invalid compressor",u),!1;if(l&&"LittleEndian"!==l)return console.error("Only LittleEndian encoding is supported"),!1;if(s!==t.dataType)return console.error("Invalid data type",s,"expecting",t.dataType),!1;if(o.querySelector("AppendedData")){var f=o.querySelector("AppendedData"),d=f.getAttribute("encoding"),p=o.querySelectorAll("Piece DataArray"),h=t.binaryBuffer;"base64"===d&&(h=f.textContent.trim().substr(1));for(var g=[],m=0;m<p.length;++m){var v=Number(p[m].getAttribute("offset")),y=0;y=m===p.length-1?h.length||h.byteLength:Number(p[m+1].getAttribute("offset")),"base64"===d?g.push(Object(ud.toByteArray)(h.substring(v,y))):g.push(new Uint8Array(h.slice(v,y)))}if("vtkZLibDataCompressor"===u)for(var b=0;b<g.length;++b){var M=g[b],x=dd(M,c),w=x[1],A=M.length-(x.reduce(function(e,t){return e+t},0)-(x[0]+x[1]+x[2]+x[3])),T=null;T=w>0?0===x[3]?new ArrayBuffer(x[2]*w):new ArrayBuffer(x[2]*(w-1)+x[3]):new ArrayBuffer(0);for(var C=new Uint8Array(T),S={offset:0,uint8:C},D=0;D<w;D++){var I=x[4+D];pd(new Uint8Array(M.buffer,A,I),S),A+=I}var E=new Uint8Array(C.length+cd[c]);new ld[c](E.buffer,0,1)[0]=C.length,E.set(C,cd[c]),g[b]=E}for(var N=g.reduce(function(e,t){return e+t.length},0),O=new ArrayBuffer(N),_=new Uint8Array(O),L=0,P=0;L<g.length;++L)p[L].setAttribute("offset",P),_.set(g[L],P),P+=g[L].length;if(t.binaryBuffer=O,!t.binaryBuffer)return console.error("Processing appended data format: requires binaryBuffer to parse"),!1}return e.parseXML(o,s,u,l,c),!0},e.requestData=function(n,r){e.parseAsArrayBuffer(t.rawDataBuffer)}}var md={};var vd={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,md,n),h.a.obj(e,t),h.a.get(e,t,["url","baseURL"]),h.a.setGet(e,t,["dataAccessHelper"]),h.a.algo(e,t,0,1),gd(e,t)},processDataArray:hd,processFieldData:function(e,t,n,r,a,o,s){if(t){var u={};["Scalars","Vectors","Normals","Tensors","TCoords"].forEach(function(e){var r=t.getAttribute(e);r&&(u[r]=n["set".concat(e)])});for(var l=t.getElementsByTagName("DataArray"),c=l.length,f=0;f<c;f++){var d=l[f],p=i.a.newInstance(hd(e,d,r,0,o,s)),h=p.getName();(u[h]||n.addArray)(p)}}},processCells:function(e,t,n,r,i,a){for(var o={},s=t.getElementsByTagName("DataArray"),u=0;u<s.length;u++){var l=s[u];o[l.getAttribute("Name")]=l}var c=hd(e,o.offsets,n,0,i,a).values,f=c[c.length-1],d=hd(f,o.connectivity,n,0,i,a).values,p=new Uint32Array(e+f),h=0,g=0;return c.forEach(function(e){var t=e-g;p[h++]=t;for(var n=0;n<t;n++)p[h++]=d[g+n];g=e}),p}};var yd={dataType:"ImageData"};function bd(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,yd,n),vd.extend(e,t,n),function(e,t){t.classHierarchy.push("vtkXMLImageDataReader"),e.parseXML=function(e,n,r,i,a){for(var s=e.getElementsByTagName(t.dataType)[0],u=s.getAttribute("Origin").split(" ").map(function(e){return Number(e)}),l=s.getAttribute("Spacing").split(" ").map(function(e){return Number(e)}),c=s.getElementsByTagName("Piece"),f=c.length,d=0;d<f;d++){var p=c[d],h=p.getAttribute("Extent").split(" ").map(function(e){return Number(e)}),g=o.a.newInstance({origin:u,spacing:l,extent:h});vd.processFieldData(g.getNumberOfPoints(),p.getElementsByTagName("PointData")[0],g.getPointData(),r,i,a,t.binaryBuffer),vd.processFieldData(g.getNumberOfCells(),p.getElementsByTagName("CellData")[0],g.getCellData(),r,i,a,t.binaryBuffer),t.output[d]=g}}}(e,t)}var Md={newInstance:h.a.newInstance(bd,"vtkXMLImageDataReader"),extend:bd},xd=n(137),wd=n.n(xd),Ad={ASCII:"ascii",BINARY:"binary",APPENDED:"appended"},Td={Int8Array:"Int8",Uint8Array:"UInt8",Int16Array:"Int16",Uint16Array:"UInt16",Int32Array:"Int32",Uint32Array:"UInt32",Float32Array:"Float32",Float64Array:"Float64"};function Cd(e){return sd.a.deflate(e)}function Sd(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"vtkZLibDataCompressor";if(t===Ad.ASCII)return e.getData().join(" ");if(t===Ad.BINARY){if("vtkZLibDataCompressor"===r){var i=e.getElementComponentSize(),a=e.getNumberOfValues()*i,o=n,s=a%o,u=Math.trunc(a/o)+(s?1:0),l=new Uint32Array(3+u);l[0]=u,l[1]=o,l[2]=s;for(var c=0,f=[],d=0,p=u-1,h=0;h<u;++h){var g=0===s||h<p?o:l[2],m=new Uint8Array(e.getData().buffer,d,g);d+=o;var v=Cd(m);f.push(v),l[3+h]=v.length,c+=v.length}for(var y=new Uint8Array(c),b=0,M=new Uint8Array(l.buffer),x=0;x<u;++x)y.set(f[x],b),b+=l[3+x];return Object(ud.fromByteArray)(M)+Object(ud.fromByteArray)(y)}throw new Error("Only vtkZLibDataCompressor is supported")}if(t===Ad.APPENDED)throw new Error("Appended format is not supported");throw new Error("Format is not supported")}var Dd={blockSize:1024,format:Ad.BINARY};var Id={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Dd,n),h.a.obj(e,t),h.a.setGet(e,t,["blockSize","format"]),h.a.get(e,t,["file"]),h.a.algo(e,t,1,0),function(e,t){t.classHierarchy.push("vtkXMLWriter"),e.create=function(e){return wd.a.create("VTKFile").att("type",t.dataType).att("version","0.1").att("byte_order","LittleEndian").att("header_type","UInt32").att("compressor",t.format===Ad.ASCII?"":"vtkZLibDataCompressor")},e.write=function(t){return e.create(t).end({pretty:!0})},e.processDataSetAttributes=function(t,n,r){var i={};["Scalars","Vectors","Normals","TCoords","Tensors","GlobalIds","PedigreeIds"].forEach(function(e){var t=r.getActiveAttribute(e);t&&(i[e]=t.getName())});for(var a=t.ele(n,i),o=0;o<r.getNumberOfArrays();++o)e.processDataArray(a,r.getArrayByIndex(o));return a},e.processDataArray=function(t,n){return t.ele("DataArray",{type:Td[n.getDataType()],Name:n.getName(),format:e.getFormat(),RangeMin:n.getRange()[0],RangeMax:n.getRange()[1],NumberOfComponents:n.getNumberOfComponents()},Sd(n,e.getFormat(),e.getBlockSize()))},e.requestData=function(n,r){t.file=e.write(n)}}(e,t)},compressBlock:Cd,processDataArray:Sd,FormatTypes:Ad};var Ed={dataType:"ImageData"};function Nd(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ed,n),Id.extend(e,t,n),function(e,t){t.classHierarchy.push("vtkXMLImageDataWriter");var n=Object.assign({},e);e.create=function(t){var r=n.create(t),i=r.ele("ImageData",{WholeExtent:t.getExtent().join(" "),Origin:t.getOrigin().join(" "),Spacing:t.getSpacing().join(" ")}).ele("Piece",{Extent:t.getExtent().join(" ")});return e.processDataSetAttributes(i,"PointData",t.getPointData()),e.processDataSetAttributes(i,"CellData",t.getCellData()),r}}(e,t)}var Od={newInstance:h.a.newInstance(Nd,"vtkXMLImageDataWriter"),extend:Nd};function _d(e,t){t.classHierarchy.push("vtkXMLPolyDataReader"),e.parseXML=function(e,n,r,i,a){for(var o=e.getElementsByTagName(t.dataType)[0].getElementsByTagName("Piece"),s=o.length,u=function(e){var n=Se.a.newInstance(),s=o[e],u=function(e,t,n,r,i,a,o){var s=Number(n.getAttribute("NumberOf".concat(t)));if(s>0){var u=n.getElementsByTagName(t)[0].getElementsByTagName("DataArray")[0],l=vd.processDataArray(s,u,r,i,a,o),c=l.values,f=l.numberOfComponents;e["get".concat(t)]().setData(c,f)}return s}(n,"Points",s,r,i,a,t.binaryBuffer),l=0;["Verts","Lines","Strips","Polys"].forEach(function(e){l+=function(e,t,n,r,i,a,o){var s=Number(n.getAttribute("NumberOf".concat(t)));if(s>0){var u=vd.processCells(s,n.getElementsByTagName(t)[0],r,i,a,o);e["get".concat(t)]().setData(u)}return s}(n,e,s,r,i,a,t.binaryBuffer)}),vd.processFieldData(u,s.getElementsByTagName("PointData")[0],n.getPointData(),r,i,a,t.binaryBuffer),vd.processFieldData(l,s.getElementsByTagName("CellData")[0],n.getCellData(),r,i,a,t.binaryBuffer),t.output[e]=n},l=0;l<s;l++)u(l)}}var Ld={dataType:"PolyData"};function Pd(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ld,n),vd.extend(e,t,n),_d(e,t)}var kd={newInstance:h.a.newInstance(Pd,"vtkXMLPolyDataReader"),extend:Pd},Rd=n(52);var jd={dataType:"PolyData"};function Bd(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,jd,n),Id.extend(e,t,n),function(e,t){t.classHierarchy.push("vtkXMLPolyDataWriter");var n=Object.assign({},e);e.create=function(t){var r=n.create(t),a=r.ele("PolyData",{}).ele("Piece",{NumberOfPoints:t.getPoints().getNumberOfPoints(),NumberOfVerts:t.getNumberOfVerts(),NumberOfLines:t.getNumberOfLines(),NumberOfStrips:t.getNumberOfStrips(),NumberOfPolys:t.getNumberOfPolys()});return e.processDataSetAttributes(a,"PointData",t.getPointData()),e.processDataSetAttributes(a,"CellData",t.getCellData()),e.processDataArray(a.ele("Points"),t.getPoints()),Rd.a.forEach(function(n){for(var r=n.replace(/(?:^\w|[A-Z]|\b\w)/g,function(e){return e.toUpperCase()}).replace(/\s+/g,""),o=[],s=[],u=t["get".concat(r)]().getData(),l=u[0],c=0,f=0;f<u.length;){l=u[f++];for(var d=0;d<l;++d)o.push(u[f++]);c+=l,s.push(c)}var p=i.a.newInstance({numberOfComponents:1,name:"connectivity",values:Int32Array.from(o)}),h=i.a.newInstance({numberOfComponents:1,name:"offsets",values:Int32Array.from(s)}),g=a.ele(r);e.processDataArray(g,p),e.processDataArray(g,h)}),r}}(e,t)}var zd={Core:tf,Geometry:nf,Legacy:mf,Misc:ad,XML:{vtkXMLImageDataReader:Md,vtkXMLImageDataWriter:Od,vtkXMLPolyDataReader:kd,vtkXMLPolyDataWriter:{newInstance:h.a.newInstance(Bd,"vtkXMLPolyDataWriter"),extend:Bd},vtkXMLReader:vd,vtkXMLWriter:Id}},Fd=n(51),Vd=n(84);var Ud={color:[1,1,1],opacity:1,pointSize:1,lineWidth:1,displayLocation:"Foreground"};function Gd(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ud,n),h.a.obj(e,t),h.a.setGet(e,t,["opacity","lineWidth","pointSize","displayLocation"]),h.a.setGetArray(e,t,["color"],3),function(e,t){t.classHierarchy.push("vtkProperty2D")}(0,t)}var Wd={newInstance:h.a.newInstance(Gd,"vtkProperty2D"),extend:Gd};var Hd={mapper:null,property:null,layerNumber:0,positionCoordinate:null,positionCoordinate2:null};function Yd(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Hd,n),Du.a.extend(e,t,n),t.positionCoordinate=Au.newInstance(),t.positionCoordinate.setCoordinateSystemToViewport(),t.positionCoordinate2=Au.newInstance(),t.positionCoordinate2.setCoordinateSystemToNormalizedViewport(),t.positionCoordinate2.setValue(.5,.5),t.positionCoordinate2.setReferenceCoordinate(t.positionCoordinate),h.a.set(e,t,["property"]),h.a.setGet(e,t,["mapper"]),function(e,t){t.classHierarchy.push("vtkActor2D"),e.getActors2D=function(){return e},e.getIsOpaque=function(){t.property||e.getProperty();var n=t.property.getOpacity()>=1;return n=(n=n&&(!t.texture||!t.texture.isTranslucent()))&&(!t.mapper||t.mapper.getIsOpaque())},e.hasTranslucentPolygonalGeometry=function(){return null!==t.mapper&&(null===t.property&&e.setProperty(e.makeProperty()),!e.getIsOpaque())},e.makeProperty=Wd.newInstance,e.getProperty=function(){return null===t.property&&(t.property=e.makeProperty()),t.property},e.setDisplayPosition=function(e,n){t.positionCoordinate.setCoordinateSystem(mu.DISPLAY),t.positionCoordinate.setValue(e,n,0)},e.setWidth=function(e){var n=t.position2Coordinate.getValue();t.position2Coordinate.setCoordinateSystemToNormalizedViewport(),t.position2Coordinate.setValue(e,n[1])},e.setHeight=function(e){var n=t.position2Coordinate.getValue();t.position2Coordinate.setCoordinateSystemToNormalizedViewport(),t.position2Coordinate.setValue(n[0],e)},e.getWidth=function(){return t.position2Coordinate.getValue()[0]},e.getHeight=function(){return t.position2Coordinate.getValue()[1]},e.getMTime=function(){var e=t.mtime;if(null!==t.property){var n=t.property.getMTime();e=n>e?n:e}return e=t.positionCoordinate.getMTime()>e?t.positionCoordinate.getMTime():e,e=t.positionCoordinate2.getMTime()>e?t.positionCoordinate2.getMTime():e},e.getRedrawMTime=function(){var e=t.mtime;if(null!==t.mapper){var n=t.mapper.getMTime();e=n>e?n:e,null!==t.mapper.getInput()&&(t.mapper.getInputAlgorithm().update(),e=(n=t.mapper.getInput().getMTime())>e?n:e)}return e},e.getBounds=function(){return"function"==typeof e.getMapper().getBounds?(t.useBounds=!0,e.getMapper().getBounds()):(t.useBounds=!1,[])},e.getActualPositionCoordinate=function(){return t.positionCoordinate},e.getActualPositionCoordinate2=function(){return t.positionCoordinate2}}(e,t)}var Qd={newInstance:h.a.newInstance(Yd,"vtkActor2D"),extend:Yd},qd={default:{defaultStyle:{fontStyle:"bold",fontFamily:"Arial",fontColor:"black",fontSizeScale:function(e){return e/2},faceColor:"white",edgeThickness:.1,edgeColor:"black",resolution:400},xMinusFaceProperty:{text:"X-",faceColor:"yellow"},xPlusFaceProperty:{text:"X+",faceColor:"yellow"},yMinusFaceProperty:{text:"Y-",faceColor:"red"},yPlusFaceProperty:{text:"Y+",faceColor:"red"},zMinusFaceProperty:{text:"Z-",faceColor:"#008000"},zPlusFaceProperty:{text:"Z+",faceColor:"#008000"}},lps:{xMinusFaceProperty:{text:"R",faceRotation:-90},xPlusFaceProperty:{text:"L",faceRotation:90},yMinusFaceProperty:{text:"A",faceRotation:0},yPlusFaceProperty:{text:"P",faceRotation:180},zMinusFaceProperty:{text:"I",faceRotation:180},zPlusFaceProperty:{text:"S",faceRotation:0}}};function Xd(e,t){t.set(e)}var Kd={applyDefinitions:Xd,applyPreset:function(e,t){return Xd(qd[e],t)},registerStylePreset:function(e,t){qd[e]=t}},Zd={xPlus:0,xMinus:1,yPlus:2,yMinus:3,zPlus:4,zMinus:5};var Jd={defaultStyle:{text:"",faceColor:"white",faceRotation:0,fontFamily:"Arial",fontColor:"black",fontStyle:"normal",fontSizeScale:function(e){return e/1.8},edgeThickness:.1,edgeColor:"black",resolution:200}};function $d(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Jd,n),lu.a.extend(e,t,n),h.a.get(e,t,["defaultStyle","xPlusFaceProperty","xMinusFaceProperty","yPlusFaceProperty","yMinusFaceProperty","zPlusFaceProperty","zMinusFaceProperty"]),function(e,t){t.classHierarchy.push("vtkAnnotatedCubeActor"),t.xPlusFaceProperty=Object.assign({},t.xPlusFaceProperty),t.xMinusFaceProperty=Object.assign({},t.xMinusFaceProperty),t.yPlusFaceProperty=Object.assign({},t.yPlusFaceProperty),t.yMinusFaceProperty=Object.assign({},t.yMinusFaceProperty),t.zPlusFaceProperty=Object.assign({},t.zPlusFaceProperty),t.zMinusFaceProperty=Object.assign({},t.zMinusFaceProperty);var n=null,r=document.createElement("canvas"),i=cu.a.newInstance(),a=kf.a.newInstance();function o(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;i&&Object.assign(t["".concat(n,"FaceProperty")],i);var o=Object.assign({},t.defaultStyle,t["".concat(n,"FaceProperty")]);r.width=o.resolution,r.height=o.resolution;var s=r.getContext("2d");s.fillStyle=o.faceColor,s.fillRect(0,0,r.width,r.height),o.edgeThickness>0&&(s.strokeStyle=o.edgeColor,s.lineWidth=o.edgeThickness*r.width,s.strokeRect(0,0,r.width,r.height)),s.save(),s.translate(0,r.height),s.scale(1,-1),s.translate(r.width/2,r.height/2),s.rotate(-Math.PI*(o.faceRotation/180));var u=o.fontSizeScale(o.resolution);s.fillStyle=o.fontColor,s.textAlign="center",s.textBaseline="middle",s.font="".concat(o.fontStyle," ").concat(u,'px "').concat(o.fontFamily,'"'),s.fillText(o.text,0,0),s.restore();var c=l.canvasToImageData(r);a.setInputData(c,Zd[n]),e.modified()}function s(){n=Ir.newInstance({generate3DTextureCoordinates:!0}),i.setInputConnection(n.getOutputPort()),o("xPlus"),o("xMinus"),o("yPlus"),o("yMinus"),o("zPlus"),o("zMinus")}a.setInterpolate(!0),e.setDefaultStyle=function(e){t.defaultStyle=Object.assign({},t.defaultStyle,e),s()},e.setXPlusFaceProperty=function(e){return o("xPlus",e)},e.setXMinusFaceProperty=function(e){return o("xMinus",e)},e.setYPlusFaceProperty=function(e){return o("yPlus",e)},e.setYMinusFaceProperty=function(e){return o("yMinus",e)},e.setZPlusFaceProperty=function(e){return o("zPlus",e)},e.setZMinusFaceProperty=function(e){return o("zMinus",e)},s(),i.setInputConnection(n.getOutputPort()),e.setMapper(i),e.addTexture(a)}(e,t)}var ep={newInstance:h.a.newInstance($d,"vtkAnnotatedCubeActor"),extend:$d,Presets:Kd};function tp(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function np(e){var t,n=e.getPoints().getBounds(),r=[.5*-(n[0]+n[1]),.5*-(n[2]+n[3]),.5*-(n[4]+n[5])];(t=d.a.buildFromDegree()).translate.apply(t,r).apply(e.getPoints().getData())}function rp(e,t,n,r){for(var a=e.getPoints().getData().length,o=new Uint8Array(a),s=0;s<a;)o[s++]=t,o[s++]=n,o[s++]=r;e.getPointData().setScalars(i.a.newInstance({name:"color",numberOfComponents:3,values:o}))}var ip={config:{tipResolution:60,tipRadius:.1,tipLength:.2,shaftResolution:60,shaftRadius:.03,invert:!1},xAxisColor:[255,0,0],yAxisColor:[255,255,0],zAxisColor:[0,128,0]};function ap(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ip,n),lu.a.extend(e,t,n),h.a.setGet(e,t,["config"]),h.a.setGetArray(e,t,["xAxisColor","yAxisColor","zAxisColor"],3,255),function(e,t){t.classHierarchy.push("vtkAxesActor"),e.update=function(){var n=vr.newInstance(Object.assign({direction:[1,0,0]},t.config)).getOutputData();np(n),rp.apply(void 0,[n].concat(tp(t.xAxisColor)));var r=vr.newInstance(Object.assign({direction:[0,1,0]},t.config)).getOutputData();np(r),rp.apply(void 0,[r].concat(tp(t.yAxisColor)));var i=vr.newInstance(Object.assign({direction:[0,0,1]},t.config)).getOutputData();np(i),rp.apply(void 0,[i].concat(tp(t.zAxisColor)));var a=Nt.newInstance();a.setInputData(n),a.addInputData(r),a.addInputData(i);var o=cu.a.newInstance();o.setInputConnection(a.getOutputPort()),e.setMapper(o)},e.update()}(e,t)}var op={newInstance:h.a.newInstance(ap,"vtkAxesActor"),extend:ap},sp={ColorSpace:{RGB:0,HSV:1,LAB:2,DIVERGING:3},Scale:{LINEAR:0,LOG10:1}},up=sp.ColorSpace,lp=sp.Scale,cp=y.a.ScalarMappingTarget,fp=h.a.vtkDebugMacro,dp=h.a.vtkErrorMacro,pp=h.a.vtkWarningMacro;function hp(e,t){var n=e[0],r=e[1],i=e[2],a=Math.sqrt(n*n+r*r+i*i),o=a>.001?Math.acos(n/a):0,s=o>.001?Math.atan2(i,r):0;t[0]=a,t[1]=o,t[2]=s}function gp(e,t){if(e[0]>=t-.1)return e[2];var n=e[1]*Math.sqrt(t*t-e[0]*e[0])/(e[0]*Math.sin(e[1]));return e[2]>-.3*Math.PI?e[2]+n:e[2]-n}function mp(e,t,n,r){var i=[],a=[];f.rgb2lab(t,i),f.rgb2lab(n,a);var o=[],s=[];hp(i,o),hp(a,s);var u=e;if(o[1]>.05&&s[1]>.05&&function(e,t){var n=e-t;for(n<0&&(n=-n);n>=2*Math.PI;)n-=2*Math.PI;return n>Math.PI&&(n=2*Math.PI-n),n}(o[2],s[2])>.33*Math.PI){var l=Math.max(o[0],s[0]);l=Math.max(88,l),e<.5?(s[0]=l,s[1]=0,s[2]=0,u*=2):(o[0]=l,o[1]=0,o[2]=0,u=2*u-1)}o[1]<.05&&s[1]>.05?o[2]=gp(s,o[0]):s[1]<.05&&o[1]>.05&&(s[2]=gp(o,s[0]));var c=[];c[0]=(1-u)*o[0]+u*s[0],c[1]=(1-u)*o[1]+u*s[1],c[2]=(1-u)*o[2]+u*s[2];var d=[];!function(e,t){var n=e[0],r=e[1],i=e[2];t[0]=n*Math.cos(r),t[1]=n*Math.sin(r)*Math.cos(i),t[2]=n*Math.sin(r)*Math.sin(i)}(c,d),f.lab2rgb(d,r)}var vp={clamping:!0,colorSpace:up.RGB,hSVWrap:!0,scale:lp.LINEAR,nanColor:null,belowRangeColor:null,aboveRangeColor:null,useAboveRangeColor:!1,useBelowRangeColor:!1,allowDuplicateScalars:!1,table:null,tableSize:0,buildTime:null,nodes:null};function yp(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,vp,n),y.a.extend(e,t,n),t.table=[],t.nodes=[],t.nanColor=[.5,0,0,1],t.belowRangeColor=[0,0,0,1],t.aboveRangeColor=[1,1,1,1],t.buildTime={},h.a.obj(t.buildTime),h.a.get(e,t,["buildTime","mappingRange"]),h.a.setGet(e,t,["useAboveRangeColor","useBelowRangeColor","colorSpace"]),h.a.setArray(e,t,["nanColor","belowRangeColor","aboveRangeColor"],4),h.a.getArray(e,t,["nanColor","belowRangeColor","aboveRangeColor"]),function(e,t){t.classHierarchy.push("vtkColorTransferFunction"),e.getSize=function(){return t.nodes.length},e.addRGBPoint=function(t,n,r,i){return e.addRGBPointLong(t,n,r,i,.5,0)},e.addRGBPointLong=function(n,r,i,a,o,s){if(o<0||o>1)return dp("Midpoint outside range [0.0, 1.0]"),-1;if(s<0||s>1)return dp("Sharpness outside range [0.0, 1.0]"),-1;t.allowDuplicateScalars||e.removePoint(n);var u={x:n,r:r,g:i,b:a,midpoint:o,sharpness:s};t.nodes.push(u),e.sortAndUpdateRange();for(var l=0;l<t.nodes.length&&t.nodes[l].x!==n;l++);return l<t.nodes.length?l:-1},e.addHSVPoint=function(t,n,r,i){return e.addHSVPointLong(t,n,r,i,.5,0)},e.addHSVPointLong=function(t,n,r,i,a,o){var s=[],u=[n,r,i];return f.hsv2rgb(u,s),e.addRGBPoint(t,s[0],s[1],s[2],a,o)},e.setNodes=function(n){t.nodes!==n&&(t.nodes=n,e.sortAndUpdateRange())},e.sortAndUpdateRange=function(){t.nodes.sort(function(e,t){return e.x-t.x}),e.updateRange()||e.modified()},e.updateRange=function(){var n=[2];n[0]=t.mappingRange[0],n[1]=t.mappingRange[1];var r=t.nodes.length;return r?(t.mappingRange[0]=t.nodes[0].x,t.mappingRange[1]=t.nodes[r-1].x):(t.mappingRange[0]=0,t.mappingRange[1]=0),(n[0]!==t.mappingRange[0]||n[1]!==t.mappingRange[1])&&(e.modified(),!0)},e.removePoint=function(n){for(var r=0;r<t.nodes.length&&t.nodes[r].x!==n;r++);var i=r;if(r>=t.nodes.length)return-1;var a=!1;return t.nodes.splice(r,1),0!==r&&r!==t.nodes.length||(a=e.updateRange()),a||e.modified(),i},e.movePoint=function(n,r){if(n!==r){e.removePoint(r);for(var i=0;i<t.nodes.length;i++)if(t.nodes[i].x===n){t.nodes[i].x=r,e.sortAndUpdateRange();break}}},e.removeAllPoints=function(){t.nodes=[],e.sortAndUpdateRange()},e.addRGBSegment=function(n,r,i,a,o,s,u,l){e.sortAndUpdateRange();for(var c=0;c<t.nodes.length;)t.nodes[c].x>=n&&t.nodes[c].x<=o?t.nodes.splice(c,1):c++;e.addRGBPointLong(n,r,i,a,.5,0),e.addRGBPointLong(o,s,u,l,.5,0),e.modified()},e.addHSVSegment=function(t,n,r,i,a,o,s,u){var l=[n,r,i],c=[o,s,u],d=[],p=[];f.hsv2rgb(l,d),f.hsv2rgb(c,p),e.addRGBSegment(t,d[0],d[1],d[2],a,p[0],p[1],p[2])},e.mapValue=function(t){var n=[];return e.getColor(t,n),[Math.floor(255*n[0]+.5),Math.floor(255*n[1]+.5),Math.floor(255*n[2]+.5),255]},e.getColor=function(n,r){if(t.indexedLookup){var i=e.getSize(),a=e.getAnnotatedValueIndexInternal(n);if(a<0||0===i)e.getNanColor(r);else{var o=[];e.getNodeValue(a%i,o),r[0]=o.r,r[1]=o.g,r[2]=o.b}}else e.getTable(n,n,1,r)},e.getRedValue=function(t){var n=[];return e.getColor(t,n),n[0]},e.getGreenValue=function(t){var n=[];return e.getColor(t,n),n[1]},e.getBlueValue=function(t){var n=[];return e.getColor(t,n),n[2]},e.getTable=function(n,r,i,a){if(f.isNan(n)||f.isNan(r))for(var o=0;o<i;o++)a[3*o+0]=t.nanColor[0],a[3*o+1]=t.nanColor[1],a[3*o+2]=t.nanColor[2];else{var s=0,u=t.nodes.length,l=0,c=0,d=0;0!==u&&(l=t.nodes[u-1].r,c=t.nodes[u-1].g,d=t.nodes[u-1].b);var p=0,h=0,g=0,m=[0,0,0],v=[0,0,0],y=0,b=0,M=[],x=t.scale===lp.LOG10;x&&(x=t.mappingRange[0]>0);var w=0,A=0,T=0;x&&(w=Math.log10(n),A=Math.log10(r));for(var C=0;C<i;C++){var S=3*C;for(i>1?x?(T=w+C/(i-1)*(A-w),p=Math.pow(10,T)):p=n+C/(i-1)*(r-n):x?(T=.5*(w+A),p=Math.pow(10,T)):p=.5*(n+r);s<u&&p>t.nodes[s].x;)++s<u&&(h=t.nodes[s-1].x,g=t.nodes[s].x,x&&(h=Math.log10(h),g=Math.log10(g)),m[0]=t.nodes[s-1].r,v[0]=t.nodes[s].r,m[1]=t.nodes[s-1].g,v[1]=t.nodes[s].g,m[2]=t.nodes[s-1].b,v[2]=t.nodes[s].b,y=t.nodes[s-1].midpoint,b=t.nodes[s-1].sharpness,y<1e-5&&(y=1e-5),y>.99999&&(y=.99999));if(p>t.mappingRange[1])a[S]=0,a[S+1]=0,a[S+2]=0,t.clamping&&(e.getUseAboveRangeColor()?(a[S]=t.aboveRangeColor[0],a[S+1]=t.aboveRangeColor[1],a[S+2]=t.aboveRangeColor[2]):(a[S]=l,a[S+1]=c,a[S+2]=d));else if(p<t.mappingRange[0]||f.isInf(p)&&p<0)a[S]=0,a[S+1]=0,a[S+2]=0,t.clamping&&(e.getUseBelowRangeColor()?(a[S]=t.belowRangeColor[0],a[S+1]=t.belowRangeColor[1],a[S+2]=t.belowRangeColor[2]):u>0&&(a[S]=t.nodes[0].r,a[S+1]=t.nodes[0].g,a[S+2]=t.nodes[0].b));else if(0===s&&Math.abs(p-n)<1e-6)u>0?(a[S]=t.nodes[0].r,a[S+1]=t.nodes[0].g,a[S+2]=t.nodes[0].b):(a[S]=0,a[S+1]=0,a[S+2]=0);else{var D=0;if(D=(D=x?(T-h)/(g-h):(p-h)/(g-h))<y?.5*D/y:.5+.5*(D-y)/(1-y),b>.99){if(D<.5){a[S]=m[0],a[S+1]=m[1],a[S+2]=m[2];continue}a[S]=v[0],a[S+1]=v[1],a[S+2]=v[2];continue}if(b<.01){if(t.colorSpace===up.RGB)a[S]=(1-D)*m[0]+D*v[0],a[S+1]=(1-D)*m[1]+D*v[1],a[S+2]=(1-D)*m[2]+D*v[2];else if(t.colorSpace===up.HSV){var I=[],E=[];f.rgb2hsv(m,I),f.rgb2hsv(v,E),t.hSVWrap&&(I[0]-E[0]>.5||E[0]-I[0]>.5)&&(I[0]>E[0]?I[0]-=1:E[0]-=1);var N=[];N[0]=(1-D)*I[0]+D*E[0],N[0]<0&&(N[0]+=1),N[1]=(1-D)*I[1]+D*E[1],N[2]=(1-D)*I[2]+D*E[2],f.hsv2rgb(N,M),a[S]=M[0],a[S+1]=M[1],a[S+2]=M[2]}else if(t.colorSpace===up.LAB){var O=[],_=[];f.rgb2lab(m,O),f.rgb2lab(v,_);var L=[];L[0]=(1-D)*O[0]+D*_[0],L[1]=(1-D)*O[1]+D*_[1],L[2]=(1-D)*O[2]+D*_[2],f.lab2rgb(L,M),a[S]=M[0],a[S+1]=M[1],a[S+2]=M[2]}else t.colorSpace===up.DIVERGING?(mp(D,m,v,M),a[S]=M[0],a[S+1]=M[1],a[S+2]=M[2]):dp("ColorSpace set to invalid value.",t.colorSpace);continue}D<.5?D=.5*Math.pow(2*D,1+10*b):D>.5&&(D=1-.5*Math.pow(2*(1-D),1+10*b));var P=D*D,k=P*D,R=2*k-3*P+1,j=-2*k+3*P,B=k-2*P+D,z=k-P,F=void 0;if(t.colorSpace===up.RGB)for(var V=0;V<3;V++)F=(1-b)*(v[V]-m[V]),a[S+V]=R*m[V]+j*v[V]+B*F+z*F;else if(t.colorSpace===up.HSV){var U=[],G=[];f.rgb2hsv(m,U),f.rgb2hsv(v,G),t.hSVWrap&&(U[0]-G[0]>.5||G[0]-U[0]>.5)&&(U[0]>G[0]?U[0]-=1:G[0]-=1);for(var W=[],H=0;H<3;H++)F=(1-b)*(G[H]-U[H]),W[H]=R*U[H]+j*G[H]+B*F+z*F,0===H&&W[H]<0&&(W[H]+=1);f.hsv2rgb=M,a[S]=M[0],a[S+1]=M[1],a[S+2]=M[2]}else if(t.colorSpace===up.LAB){var Y=[],Q=[];f.rgb2lab(m,Y),f.rgb2lab(v,Q);for(var q=[],X=0;X<3;X++)F=(1-b)*(Q[X]-Y[X]),q[X]=R*Y[X]+j*Q[X]+B*F+z*F;f.lab2rgb(q,M),a[S]=M[0],a[S+1]=M[1],a[S+2]=M[2]}else t.colorSpace===up.DIVERGING?(mp(D,m,v,M),a[S]=M[0],a[S+1]=M[1],a[S+2]=M[2]):dp("ColorSpace set to invalid value.");for(var K=0;K<3;K++)a[S+K]=a[S+K]<0?0:a[S+K],a[S+K]=a[S+K]>1?1:a[S+K]}}}},e.getUint8Table=function(n,r,i){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e.getMTime()<=t.buildTime&&t.tableSize===i&&t.tableWithAlpha!==a)return t.table;if(0===t.nodes.length)return dp("Attempting to lookup a value with no points in the function"),t.table;var o=a?4:3;t.tableSize===i&&t.tableWithAlpha===a||(t.table=new Uint8Array(i*o),t.tableSize=i,t.tableWithAlpha=a);var s=[];e.getTable(n,r,i,s);for(var u=0;u<i;u++)t.table[u*o+0]=Math.floor(255*s[3*u+0]+.5),t.table[u*o+1]=Math.floor(255*s[3*u+1]+.5),t.table[u*o+2]=Math.floor(255*s[3*u+2]+.5),a&&(t.table[u*o+3]=255);return t.buildTime.modified(),t.table},e.buildFunctionFromTable=function(n,r,i,a){var o=0;e.removeAllPoints(),i>1&&(o=(r-n)/(i-1));for(var s=0;s<i;s++){var u={x:n+o*s,r:a[3*s],g:a[3*s+1],b:a[3*s+2],sharpness:0,midpoint:.5};t.nodes.push(u)}e.sortAndUpdateRange()},e.getNodeValue=function(e,n){return e<0||e>=t.nodes.length?(dp("Index out of range!"),-1):(n[0]=t.nodes[e].x,n[1]=t.nodes[e].r,n[2]=t.nodes[e].g,n[3]=t.nodes[e].b,n[4]=t.nodes[e].midpoint,n[5]=t.nodes[e].sharpness,1)},e.setNodeValue=function(n,r){if(n<0||n>=t.nodes.length)return dp("Index out of range!"),-1;var i=t.nodes[n].x;return t.nodes[n].x=r[0],t.nodes[n].r=r[1],t.nodes[n].g=r[2],t.nodes[n].b=r[3],t.nodes[n].midpoint=r[4],t.nodes[n].sharpness=r[5],i!==r[0]?e.sortAndUpdateRange():e.modified(),1},e.getNumberOfAvailableColors=function(){return t.indexedLookup&&e.getSize()?e.getSize():t.tableSize?t.tableSize:16777216},e.getIndexedColor=function(t,n){var r=e.getSize();if(r>0&&t>=0){var i=[];e.getNodeValue(t%r,i);for(var a=0;a<3;++a)n[a]=i[a+1];n[3]=1}else e.getNanColor(n),n[3]=1},e.fillFromDataPointer=function(t,n){if(!(t<=0)&&n){e.removeAllPoints();for(var r=0;r<t;r++)e.addRGBPoint(n[4*r],n[4*r+1],n[4*r+2],n[4*r+3])}},e.setMappingRange=function(n,r){var i=[n,r],a=e.getRange();if(a[1]!==i[1]||a[0]!==i[0])if(i[1]!==i[0]){for(var o=(i[1]-i[0])/(a[1]-a[0]),s=i[0]-a[0]*o,u=0;u<t.nodes.length;++u)t.nodes[u].x=t.nodes[u].x*o+s;t.mappingRange[0]=i[0],t.mappingRange[1]=i[1],e.modified()}else dp("attempt to set zero width color range")},e.adjustRange=function(n){var r=e.getRange(),i=[];r[0]<n[0]?(e.getColor(n[0],i),e.addRGBPoint(n[0],i[0],i[1],i[2])):(e.getColor(r[0],i),e.addRGBPoint(n[0],i[0],i[1],i[2])),r[1]>n[1]?(e.getColor(n[1],i),e.addRGBPoint(n[1],i[0],i[1],i[2])):(e.getColor(r[1],i),e.addRGBPoint(n[1],i[0],i[1],i[2])),e.sortAndUpdateRange();for(var a=0;a<t.nodes.length;)t.nodes[a].x>=n[0]&&t.nodes[a].x<=n[1]?t.nodes.splice(a,1):++a;return 1},e.estimateMinNumberOfSamples=function(t,n){var r=e.findMinimumXDistance();return Math.ceil((n-t)/r)},e.findMinimumXDistance=function(){if(t.nodes.length<2)return-1;for(var e=Number.MAX_VALUE,n=0;n<t.nodes.length-1;n++){var r=t.nodes[n+1].x-t.nodes[n].x;r<e&&(e=r)}return e},e.mapScalarsThroughTable=function(n,r,i,a){0!==e.getSize()?t.indexedLookup?e.mapDataIndexed(n,r,i,a):e.mapData(n,r,i,a):fp("Transfer Function Has No Points!")},e.mapData=function(t,n,r,i){if(0!==e.getSize()){var a=Math.floor(255*e.getAlpha()+.5),o=t.getNumberOfTuples(),s=t.getNumberOfComponents(),u=n.getData(),l=t.getData(),c=[];if(r===cp.RGBA)for(var f=0;f<o;f++){var d=l[f*s+i];e.getColor(d,c),u[4*f]=Math.floor(255*c[0]+.5),u[4*f+1]=Math.floor(255*c[1]+.5),u[4*f+2]=Math.floor(255*c[2]+.5),u[4*f+3]=a}if(r===cp.RGB)for(var p=0;p<o;p++){var h=l[p*s+i];e.getColor(h,c),u[3*p]=Math.floor(255*c[0]+.5),u[3*p+1]=Math.floor(255*c[1]+.5),u[3*p+2]=Math.floor(255*c[2]+.5)}if(r===cp.LUMINANCE)for(var g=0;g<o;g++){var m=l[g*s+i];e.getColor(m,c),u[g]=Math.floor(76.5*c[0]+150.45*c[1]+28.05*c[2]+.5)}if(r===cp.LUMINANCE_ALPHA)for(var v=0;v<o;v++){var y=l[v*s+i];e.getColor(y,c),u[2*v]=Math.floor(76.5*c[0]+150.45*c[1]+28.05*c[2]+.5),u[2*v+1]=a}}else pp("Transfer Function Has No Points!")},e.applyColorMap=function(n){if(n.ColorSpace&&(t.colorSpace=up[n.ColorSpace.toUpperCase()],void 0===t.colorSpace&&(dp("ColorSpace ".concat(n.ColorSpace," not supported, using RGB instead")),t.colorSpace=up.RGB)),n.NanColor)for(t.nanColor=[].concat(n.NanColor);t.nanColor.length<4;)t.nanColor.push(1);if(n.RGBPoints){var r=n.RGBPoints.length;t.nodes=[];for(var i=0;i<r;i+=4)t.nodes.push({x:n.RGBPoints[i],r:n.RGBPoints[i+1],g:n.RGBPoints[i+2],b:n.RGBPoints[i+3],midpoint:.5,sharpness:0})}e.sortAndUpdateRange()}}(e,t)}var bp=h.a.newInstance(yp,"vtkColorTransferFunction"),Mp=Object.assign({newInstance:bp,extend:yp,vtkColorMaps:Es},sp),xp={OrientationModes:{DIRECTION:0,ROTATION:1},ScaleModes:{SCALE_BY_CONSTANT:0,SCALE_BY_MAGNITUDE:1,SCALE_BY_COMPONENTS:2}},wp=xp.OrientationModes,Ap=xp.ScaleModes,Tp=h.a.vtkErrorMacro;var Cp={orient:!0,orientationMode:wp.DIRECTION,orientationArray:null,scaling:!0,scaleFactor:1,scaleMode:Ap.SCALE_BY_MAGNITUDE,scaleArray:null,matrixArray:null,normalArray:null,colorArray:null};function Sp(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Cp,n),cu.a.extend(e,t,n),h.a.algo(e,t,2,0),t.buildTime={},h.a.obj(t.buildTime,{mtime:0}),t.boundsTime={},h.a.obj(t.boundsTime,{mtime:0}),h.a.setGet(e,t,["orient","orientationMode","orientationArray","scaleArray","scaleFactor","scaleMode","scaling"]),h.a.get(e,t,["colorArray","matrixArray","normalArray","buildTime"]),function(e,t){t.classHierarchy.push("vtkGlyph3DMapper"),e.getOrientationModeAsString=function(){return h.a.enumToString(wp,t.orientationMode)},e.setOrientationModeToDirection=function(){return e.setOrientationMode(wp.DIRECTION)},e.setOrientationModeToRotation=function(){return e.setOrientationMode(wp.ROTATION)},e.getOrientationArrayData=function(){var n=e.getInputData(0);return n&&n.getPointData()?t.orientationArray?n.getPointData().getArray(t.orientationArray):n.getPointData().getVectors():null},e.getScaleModeAsString=function(){return h.a.enumToString(Ap,t.scaleMode)},e.setScaleModeToScaleByMagnitude=function(){return e.setScaleMode(Ap.SCALE_BY_MAGNITUDE)},e.setScaleModeToScaleByComponents=function(){return e.setScaleMode(Ap.SCALE_BY_COMPONENTS)},e.setScaleModeToScaleByConstant=function(){return e.setScaleMode(Ap.SCALE_BY_CONSTANT)},e.getScaleArrayData=function(){var n=e.getInputData(0);return n&&n.getPointData()?t.scaleArray?n.getPointData().getArray(t.scaleArray):n.getPointData().getScalars():null},e.getBounds=function(){var n=e.getInputData(0),r=e.getInputData(1);return n&&r?(e.buildArrays(),t.bounds):f.createUninitializedBounds()},e.buildArrays=function(){var n=e.getInputData(0),r=e.getInputData(1);if(t.buildTime.getMTime()<r.getMTime()||t.buildTime.getMTime()<n.getMTime()||t.buildTime.getMTime()<e.getMTime()){var i=n.getPoints().getData(),a=e.getScaleArrayData(),o=null,s=0;a&&(o=a.getData(),s=a.getNumberOfComponents()),t.scaling&&a&&t.scaleMode===Ap.SCALE_BY_COMPONENTS&&3!==a.getNumberOfComponents()&&(Tp("Cannot scale by components since scale array does not have 3 components."),a=null);var u=r.getBounds(),l=[];N.a.getCorners(u,l),t.bounds[0]=N.a.INIT_BOUNDS[0],t.bounds[1]=N.a.INIT_BOUNDS[1],t.bounds[2]=N.a.INIT_BOUNDS[2],t.bounds[3]=N.a.INIT_BOUNDS[3],t.bounds[4]=N.a.INIT_BOUNDS[4],t.bounds[5]=N.a.INIT_BOUNDS[5];var c=Ye.e.create(),d=e.getOrientationArrayData(),p=Ye.c.create(),h=[],g=[],m=i.length/3;t.matrixArray=new Float32Array(16*m);var v=t.matrixArray.buffer;t.normalArray=new Float32Array(9*m);for(var y=t.normalArray.buffer,b=[],M=0;M<m;++M){var x=new Float32Array(v,64*M,16);if(h[0]=i[3*M],h[1]=i[3*M+1],h[2]=i[3*M+2],Ye.c.translate(x,p,h),d){var w=[];switch(d.getTuple(M,w),t.orientationMode){case wp.ROTATION:Ye.c.rotateZ(x,x,w[2]),Ye.c.rotateX(x,x,w[0]),Ye.c.rotateY(x,x,w[1]);break;case wp.DIRECTION:if(0===w[1]&&0===w[2])w[0]<0&&Ye.c.rotateY(x,x,3.1415926);else{var A=f.norm(w),T=[];T[0]=(w[0]+A)/2,T[1]=w[1]/2,T[2]=w[2]/2,Ye.c.rotate(x,x,3.1415926,T)}}}if(t.scaling){if(g[0]=t.scaleFactor,g[1]=t.scaleFactor,g[2]=t.scaleFactor,a)switch(t.scaleMode){case Ap.SCALE_BY_MAGNITUDE:for(var C=0;C<s;++C)b[C]=o[M*s+C];g[0]*=f.norm(b,s),g[1]=g[0],g[2]=g[0];break;case Ap.SCALE_BY_COMPONENTS:for(var S=0;S<s;++S)b[S]=o[M*s+S];g[0]*=b[0],g[1]*=b[1],g[2]*=b[2];break;case Ap.SCALE_BY_CONSTANT:}0===g[0]&&(g[0]=1e-10),0===g[1]&&(g[1]=1e-10),0===g[2]&&(g[2]=1e-10),Ye.c.scale(x,x,g)}for(var D=0;D<8;++D)Ye.e.transformMat4(c,l[D],x),c[0]<t.bounds[0]&&(t.bounds[0]=c[0]),c[1]<t.bounds[2]&&(t.bounds[2]=c[1]),c[2]<t.bounds[4]&&(t.bounds[4]=c[2]),c[0]>t.bounds[1]&&(t.bounds[1]=c[0]),c[1]>t.bounds[3]&&(t.bounds[3]=c[1]),c[2]>t.bounds[5]&&(t.bounds[5]=c[2]);var I=new Float32Array(y,36*M,9);Ye.b.fromMat4(I,x),Ye.b.invert(I,I),Ye.b.transpose(I,I)}var E=e.getAbstractScalars(n,t.scalarMode,t.arrayAccessMode,t.arrayId,t.colorByArrayName).scalars;t.useLookupTableScalarRange||e.getLookupTable().setRange(t.scalarRange[0],t.scalarRange[1]),t.colorArray=null;var O=e.getLookupTable();O&&E&&(O.build(),t.colorArray=O.mapScalars(E,t.colorMode,0)),t.buildTime.modified()}},e.getPrimitiveCount=function(){var t=e.getInputData(1),n=e.getInputData().getPoints().getNumberOfValues()/3;return{points:n*t.getPoints().getNumberOfValues()/3,verts:n*(t.getVerts().getNumberOfValues()-t.getVerts().getNumberOfCells()),lines:n*(t.getLines().getNumberOfValues()-2*t.getLines().getNumberOfCells()),triangles:n*(t.getPolys().getNumberOfValues()-3*t.getLines().getNumberOfCells())}}}(e,t)}var Dp=h.a.newInstance(Sp,"vtkGlyph3DMapper"),Ip=Object.assign({newInstance:Dp,extend:Sp},xp),Ep={SlicingMode:{NONE:-1,I:0,J:1,K:2,X:3,Y:4,Z:5}},Np=h.a.vtkWarningMacro,Op=Ep.SlicingMode;var _p={displayExtent:[0,0,0,0,0,0],customDisplayExtent:[0,0,0,0],useCustomExtents:!1,slice:0,slicingMode:Op.NONE,closestIJKAxis:{ijkMode:Op.NONE,flip:!1},renderToRectangle:!1,sliceAtFocalPoint:!1};function Lp(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,_p,n),Fd.a.extend(e,t,n),h.a.get(e,t,["slicingMode"]),h.a.setGet(e,t,["slice","closestIJKAxis","useCustomExtents","renderToRectangle","sliceAtFocalPoint"]),h.a.setGetArray(e,t,["customDisplayExtent"],4),function(e,t){function n(){var n;switch(t.slicingMode){case Op.X:n=[1,0,0];break;case Op.Y:n=[0,1,0];break;case Op.Z:n=[0,0,1];break;default:return void(t.closestIJKAxis={ijkMode:t.slicingMode,flip:!1})}var r=[0,0,0],i=e.getInputData().getDirection(),a=[[i[0],i[1],i[2]],[i[3],i[4],i[5]],[i[6],i[7],i[8]]];f.multiply3x3_vect3(a,n,r);for(var o=0,s=-1,u=!1,l=0;l<r.length;++l){var c=Math.abs(r[l]);c>o&&(o=c,u=r[l]<0,s=l)}if(1!==o){var d="IJKXYZ"[t.slicingMode],p="IJKXYZ"[s];Np("Unaccurate slicing along ".concat(d," axis which ")+"is not aligned with any IJK axis of the image data. "+"Using ".concat(p," axis  as a fallback (").concat(o,"% aligned). ")+"Necessitates slice reformat that is not yet implemented.  You can switch the slicing mode on your mapper to do IJK slicing instead.")}t.closestIJKAxis={ijkMode:s,flip:u}}function r(n,r){var i=e.getInputData(),a=i.getExtent(),o=[a[0],a[2],a[4]],s=e.getClosestIJKAxis().ijkMode,u=t.slice;s!==t.slicingMode&&(u=e.getSliceAtPosition(u)),o[s]+=u;var l=[0,0,0];i.indexToWorld(o,l),o[s]+=1;var c=[0,0,0];i.indexToWorld(o,c),c[0]-=l[0],c[1]-=l[1],c[2]-=l[2],Ye.e.normalize(c,c);var f=Te.a.intersectWithLine(n,r,l,c);if(f.intersection){var d=f.x,p=[0,0,0];return i.worldToIndex(d,p),{t:f.t,absoluteIJK:p}}return null}t.classHierarchy.push("vtkImageMapper"),e.getSliceAtPosition=function(n){var r,i=e.getInputData();if(3===n.length)r=n;else if(Number.isFinite(n)){var a=i.getBounds();switch(t.slicingMode){case Op.X:r=[n,(a[3]+a[2])/2,(a[5]+a[4])/2];break;case Op.Y:r=[(a[1]+a[0])/2,n,(a[5]+a[4])/2];break;case Op.Z:r=[(a[1]+a[0])/2,(a[3]+a[2])/2,n]}}var o=[0,0,0];i.worldToIndex(r,o);var s=i.getExtent(),u=0;switch(e.getClosestIJKAxis().ijkMode){case Op.I:u=f.clampValue(o[0],s[0],s[1]),u=Math.round(u);break;case Op.J:u=f.clampValue(o[1],s[2],s[3]),u=Math.round(u);break;case Op.K:u=f.clampValue(o[2],s[4],s[5]),u=Math.round(u);break;default:return 0}return u},e.setSliceFromCamera=function(n){var r=n.getFocalPoint();switch(t.slicingMode){case Op.I:case Op.J:case Op.K:var i=e.getSliceAtPosition(r);e.setSlice(i);break;case Op.X:e.setSlice(r[0]);break;case Op.Y:e.setSlice(r[1]);break;case Op.Z:e.setSlice(r[2])}},e.setXSlice=function(t){e.setSlicingMode(Op.X),e.setSlice(t)},e.setYSlice=function(t){e.setSlicingMode(Op.Y),e.setSlice(t)},e.setZSlice=function(t){e.setSlicingMode(Op.Z),e.setSlice(t)},e.setISlice=function(t){e.setSlicingMode(Op.I),e.setSlice(t)},e.setJSlice=function(t){e.setSlicingMode(Op.J),e.setSlice(t)},e.setKSlice=function(t){e.setSlicingMode(Op.K),e.setSlice(t)},e.getSlicingModeNormal=function(){var n=[0,0,0],r=e.getInputData().getDirection(),i=[[r[0],r[1],r[2]],[r[3],r[4],r[5]],[r[6],r[7],r[8]]];switch(t.slicingMode){case Op.X:n[0]=1;break;case Op.Y:n[1]=1;break;case Op.Z:n[2]=1;break;case Op.I:f.multiply3x3_vect3(i,[1,0,0],n);break;case Op.J:f.multiply3x3_vect3(i,[0,1,0],n);break;case Op.K:f.multiply3x3_vect3(i,[0,0,1],n)}return n},e.setSlicingMode=function(r){t.slicingMode!==r&&(t.slicingMode=r,e.getInputData()&&n(),e.modified())},e.getClosestIJKAxis=function(){return void 0!==t.closestIJKAxis&&t.closestIJKAxis.ijkMode!==Op.NONE||!e.getInputData()||n(),t.closestIJKAxis},e.getBounds=function(){var n=e.getInputData();if(!n)return f.createUninitializedBounds();if(!t.useCustomExtents)return n.getBounds();var r=t.customDisplayExtent.slice(),i=e.getClosestIJKAxis().ijkMode,a=t.slice;switch(i!==t.slicingMode&&(a=e.getSliceAtPosition(t.slice)),i){case Op.I:r[0]=a,r[1]=a;break;case Op.J:r[2]=a,r[3]=a;break;case Op.K:r[4]=a,r[5]=a}return n.extentToBounds(r)},e.getBoundsForSlice=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.slice,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=e.getInputData();if(!i)return f.createUninitializedBounds();var a=i.getExtent(),o=e.getClosestIJKAxis().ijkMode,s=n;switch(o!==t.slicingMode&&(s=e.getSliceAtPosition(n)),o){case Op.I:a[0]=s-r,a[1]=s+r;break;case Op.J:a[2]=s-r,a[3]=s+r;break;case Op.K:a[4]=s-r,a[5]=s+r}return i.extentToBounds(a)},e.getIsOpaque=function(){return!0},e.intersectWithLineForPointPicking=function(t,n){var i=r(t,n);if(i){var a=e.getInputData().getExtent(),o=[Math.round(i.absoluteIJK[0]),Math.round(i.absoluteIJK[1]),Math.round(i.absoluteIJK[2])];return o[0]<a[0]||o[0]>a[1]||o[1]<a[2]||o[1]>a[3]||o[2]<a[4]||o[2]>a[5]?null:{t:i.t,ijk:o}}return null},e.intersectWithLineForCellPicking=function(t,n){var i=r(t,n);if(i){var a=e.getInputData().getExtent(),o=i.absoluteIJK,s=[Math.floor(o[0]),Math.floor(o[1]),Math.floor(o[2])];if(s[0]<a[0]||s[0]>a[1]-1||s[1]<a[2]||s[1]>a[3]-1||s[2]<a[4]||s[2]>a[5]-1)return null;var u=[o[0]-s[0],o[1]-s[1],o[2]-s[2]];return{t:i.t,ijk:s,pCoords:u}}return null}}(e,t)}var Pp=h.a.newInstance(Lp,"vtkImageMapper"),kp=Object.assign({newInstance:Pp,extend:Lp},Ep),Rp={NEAREST:0,LINEAR:1},jp=Rp;var Bp={interpolationType:jp.LINEAR,colorWindow:255,colorLevel:127.5,ambient:1,diffuse:0,opacity:1,rGBTransferFunction:null,scalarOpacity:null};function zp(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Bp,n),h.a.obj(e,t),h.a.setGet(e,t,["interpolationType","colorWindow","colorLevel","ambient","diffuse","opacity","rGBTransferFunction","scalarOpacity"]),e.getMTime=function(){var e=t.mtime;if(t.rGBTransferFunction){var n=t.rGBTransferFunction.getMTime();e=n>e?n:e}return e},function(e,t){t.classHierarchy.push("vtkImageProperty"),e.setInterpolationTypeToNearest=function(){e.setInterpolationType(jp.NEAREST)},e.setInterpolationTypeToLinear=function(){e.setInterpolationType(jp.LINEAR)},e.getInterpolationTypeAsString=function(){return h.a.enumToString(jp,t.interpolationType)}}(e,t)}var Fp={newInstance:h.a.newInstance(zp,"vtkImageProperty"),extend:zp},Vp=n(43),Up=h.a.vtkDebugMacro;var Gp={mapper:null,property:null,bounds:[1,-1,1,-1,1,-1]};function Wp(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Gp,n),Vp.a.extend(e,t,n),t.boundsMTime={},h.a.obj(t.boundsMTime),h.a.set(e,t,["property"]),h.a.setGet(e,t,["mapper"]),h.a.getArray(e,t,["bounds"],6),function(e,t){t.classHierarchy.push("vtkImageSlice"),e.getActors=function(){return e},e.getImages=function(){return e},e.getIsOpaque=function(){if(t.forceOpaque)return!0;if(t.forceTranslucent)return!1;t.property||e.getProperty();var n=t.property.getOpacity()>=1;return n=n&&(!t.mapper||t.mapper.getIsOpaque())},e.hasTranslucentPolygonalGeometry=function(){return!1},e.makeProperty=Fp.newInstance,e.getProperty=function(){return null===t.property&&(t.property=e.makeProperty()),t.property},e.getBounds=function(){if(null===t.mapper)return t.bounds;var n,r=t.mapper.getBounds();if(!r||6!==r.length)return r;if(r[0]>r[1])return t.mapperBounds=r.concat(),t.bounds=[1,-1,1,-1,1,-1],t.boundsMTime.modified(),r;if(!t.mapperBounds||!(n=[r,t.mapperBounds],n[0].map(function(e,t){return n.map(function(e){return e[t]})})).reduce(function(e,t){return e&&t[0]===t[1]},!0)||e.getMTime()>t.boundsMTime.getMTime()){Up("Recomputing bounds..."),t.mapperBounds=r.map(function(e){return e});var i=[Ye.e.fromValues(r[1],r[3],r[5]),Ye.e.fromValues(r[1],r[2],r[5]),Ye.e.fromValues(r[0],r[2],r[5]),Ye.e.fromValues(r[0],r[3],r[5]),Ye.e.fromValues(r[1],r[3],r[4]),Ye.e.fromValues(r[1],r[2],r[4]),Ye.e.fromValues(r[0],r[2],r[4]),Ye.e.fromValues(r[0],r[3],r[4])];e.computeMatrix();var a=Ye.c.create();Ye.c.transpose(a,t.matrix),i.forEach(function(e){return Ye.e.transformMat4(e,e,a)}),t.bounds[0]=t.bounds[2]=t.bounds[4]=Number.MAX_VALUE,t.bounds[1]=t.bounds[3]=t.bounds[5]=-Number.MAX_VALUE,t.bounds=t.bounds.map(function(e,t){return t%2==0?i.reduce(function(e,n){return e>n[t/2]?n[t/2]:e},e):i.reduce(function(e,n){return e<n[(t-1)/2]?n[(t-1)/2]:e},e)}),t.boundsMTime.modified()}return t.bounds},e.getBoundsForSlice=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=t.mapper.getBoundsForSlice(n,r);if(!i||6!==i.length)return i;if(i[0]>i[1])return i;var a=[Ye.e.fromValues(i[1],i[3],i[5]),Ye.e.fromValues(i[1],i[2],i[5]),Ye.e.fromValues(i[0],i[2],i[5]),Ye.e.fromValues(i[0],i[3],i[5]),Ye.e.fromValues(i[1],i[3],i[4]),Ye.e.fromValues(i[1],i[2],i[4]),Ye.e.fromValues(i[0],i[2],i[4]),Ye.e.fromValues(i[0],i[3],i[4])];e.computeMatrix();var o=Ye.c.create();Ye.c.transpose(o,t.matrix),a.forEach(function(e){return Ye.e.transformMat4(e,e,o)});var s=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE];return s=s.map(function(e,t){return t%2==0?a.reduce(function(e,n){return e>n[t/2]?n[t/2]:e},e):a.reduce(function(e,n){return e<n[(t-1)/2]?n[(t-1)/2]:e},e)})},e.getMinXBound=function(){return e.getBounds(),t.bounds[0]},e.getMaxXBound=function(){return e.getBounds(),t.bounds[1]},e.getMinYBound=function(){return e.getBounds(),t.bounds[2]},e.getMaxYBound=function(){return e.getBounds(),t.bounds[3]},e.getMinZBound=function(){return e.getBounds(),t.bounds[4]},e.getMaxZBound=function(){return e.getBounds(),t.bounds[5]},e.getMTime=function(){var e=t.mtime;if(null!==t.property){var n=t.property.getMTime();e=n>e?n:e}return e},e.getRedrawMTime=function(){var e=t.mtime;if(null!==t.mapper){var n=t.mapper.getMTime();e=n>e?n:e,null!==t.mapper.getInput()&&(t.mapper.getInputAlgorithm().update(),e=(n=t.mapper.getInput().getMTime())>e?n:e)}if(null!==t.property){var r=t.property.getMTime();e=r>e?r:e,null!==t.property.getRGBTransferFunction()&&(e=(r=t.property.getRGBTransferFunction().getMTime())>e?r:e)}return e},e.getSupportsSelection=function(){return!!t.mapper&&t.mapper.getSupportsSelection()}}(e,t)}var Hp={newInstance:h.a.newInstance(Wp,"vtkImageSlice"),extend:Wp},Yp=h.a.vtkErrorMacro;var Qp={pointId:-1,pointIJK:[],useCells:!1};function qp(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Qp,n),$u.extend(e,t,n),h.a.getArray(e,t,["pointIJK"]),h.a.get(e,t,["pointId"]),h.a.setGet(e,t,["useCells"]),function(e,t){t.classHierarchy.push("vtkPointPicker"),e.intersectWithLine=function(n,r,i,a){var o=Number.MAX_VALUE;if(a.isA("vtkImageMapper")){var s=a.intersectWithLineForPointPicking(n,r);s&&(o=s.t,t.pointIJK=s.ijk)}else a.isA("vtkMapper")&&(o=e.intersectActorWithLine(n,r,i,a));return o},e.intersectActorWithLine=function(e,n,r,i){var a=i.getInputData(),o=0,s=a.getPoints().getNumberOfPoints();if(s<=o)return 2;for(var u=[],l=0;l<3;l++)u[l]=n[l]-e[l];var c,d=f.dot(u,u);if(0===d)return Yp("Cannot process points"),2;var p=-1,h=Number.MAX_VALUE,g=Number.MAX_VALUE,m=[],v=[],y=[],b=a.getPoints();if(t.useCells)for(var M=a.getPolys().getData(),x=M[0],w=a.getPolys().getNumberOfCells(),A=0;A<w;A++)for(var T=A*x+1,C=T+x,S=T;S<C;S++){var D=M[S];if(b.getPoint(D,y),(c=(u[0]*(y[0]-e[0])+u[1]*(y[1]-e[1])+u[2]*(y[2]-e[2]))/d)>=0&&c<=1&&c<=h+t.tolerance){for(var I=0,E=0;E<3;E++){m[E]=e[E]+c*u[E];var N=Math.abs(y[E]-m[E]);N>I&&(I=N)}I<=r&&I<g&&(p=o,v[0]=y[0],v[1]=y[1],v[2]=y[2],g=I,h=c)}}else for(o=0;o<s;o++)if(b.getPoint(o,y),(c=(u[0]*(y[0]-e[0])+u[1]*(y[1]-e[1])+u[2]*(y[2]-e[2]))/d)>=0&&c<=1&&c<=h+t.tolerance){for(var O=0,_=0;_<3;_++){m[_]=e[_]+c*u[_];var L=Math.abs(y[_]-m[_]);L>O&&(O=L)}O<=r&&O<g&&(p=o,v[0]=y[0],v[1]=y[1],v[2]=y[2],g=O,h=c)}return t.pointId=p,h}}(e,t)}var Xp={newInstance:h.a.newInstance(qp,"vtkPointPicker"),extend:qp};var Kp={renderers:[],views:[],interactor:null,neverRendered:!0,numberOfLayers:1};function Zp(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Kp,n),h.a.obj(e,t),h.a.setGet(e,t,["interactor","numberOfLayers","views"]),h.a.get(e,t,["neverRendered"]),h.a.getArray(e,t,["renderers"]),h.a.event(e,t,"completion"),function(e,t){t.classHierarchy.push("vtkRenderWindow"),e.addRenderer=function(n){e.hasRenderer(n)||(n.setRenderWindow(e),t.renderers.push(n),e.modified())},e.removeRenderer=function(n){t.renderers=t.renderers.filter(function(e){return e!==n}),e.modified()},e.hasRenderer=function(e){return-1!==t.renderers.indexOf(e)},e.addView=function(n){e.hasView(n)||(n.setRenderable(e),t.views.push(n),e.modified())},e.removeView=function(n){t.views=t.views.filter(function(e){return e!==n}),e.modified()},e.hasView=function(e){return-1!==t.views.indexOf(e)},e.render=function(){t.interactor?t.interactor.render():t.views.forEach(function(e){return e.traverseAllPasses()})},e.getStatistics=function(){var e={propCount:0,invisiblePropCount:0};return t.renderers.forEach(function(t){t.getViewProps().forEach(function(t){if(t.getVisibility()){e.propCount+=1;var n=t.getMapper&&t.getMapper();if(n&&n.getPrimitiveCount){var r=n.getPrimitiveCount();Object.keys(r).forEach(function(t){e[t]||(e[t]=0),e[t]+=r[t]})}}else e.invisiblePropCount+=1})}),e.str=Object.keys(e).map(function(t){return"".concat(t,": ").concat(e[t])}).join("\n"),e},e.captureImages=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image/png";return h.a.setImmediate(e.render),t.views.map(function(e){return e.captureNextImage?e.captureNextImage(n):void 0}).filter(function(e){return!!e})}}(e,t)}var Jp={newInstance:h.a.newInstance(Zp,"vtkRenderWindow"),extend:Zp};var $p={};function eh(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,$p,n),h.e(e,t),h.c(e,t,["actors"]),h.f(e,t,["input"]),function(e,t){t.classHierarchy.push("vtkRepresentation"),t.actors||(t.actors=[]),e.addActor=function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];r.length&&(t.actors=t.actors.concat(r),e.modified())},e.removeActor=function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=t.actors.length;t.actors=t.actors.filter(function(e){return-1===r.indexOf(e)}),t.actors.length<a&&e.modified()}}(e,t)}var th={newInstance:h.d(eh,"vtkRepresentation"),extend:eh};var nh={format:"box"};function rh(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,nh,n),lu.a.extend(e,t,n),h.a.setGet(e,t,["format"]),function(e,t){t.classHierarchy.push("vtkSkybox"),e.getIsOpaque=function(){return!0},e.hasTranslucentPolygonalGeometry=function(){return!1},e.getSupportsSelection=function(){return!1}}(e,t)}var ih={newInstance:h.a.newInstance(rh,"vtkSkybox"),extend:rh};var ah={scaleArray:null,radius:.05};function oh(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ah,n),cu.a.extend(e,t,n),h.a.setGet(e,t,["radius","scaleArray"]),function(e,t){t.classHierarchy.push("vtkSphereMapper")}(0,t)}var sh={newInstance:h.a.newInstance(oh,"vtkSphereMapper"),extend:oh};var uh={scaleArray:null,orientationArray:null,radius:.025,length:.1};function lh(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,uh,n),cu.a.extend(e,t,n),h.a.setGet(e,t,["scaleArray","orientationArray","radius","length"]),function(e,t){t.classHierarchy.push("vtkStickMapper")}(0,t)}var ch={newInstance:h.a.newInstance(lh,"vtkStickMapper"),extend:lh},fh={NEAREST:0,LINEAR:1,FAST_LINEAR:2},dh={InterpolationType:fh},ph=dh.InterpolationType,hh=h.a.vtkErrorMacro,gh=4;var mh={independentComponents:1,interpolationType:ph.FAST_LINEAR,shade:0,ambient:.1,diffuse:.7,specular:.2,specularPower:10};function vh(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Object.assign(t,mh,n),h.a.obj(e,t),!t.componentData){t.componentData=[];for(var r=0;r<gh;++r)t.componentData.push({colorChannels:1,grayTransferFunction:null,rGBTransferFunction:null,scalarOpacity:null,scalarOpacityUnitDistance:1,gradientOpacityMinimumValue:0,gradientOpacityMinimumOpacity:0,gradientOpacityMaximumValue:1,gradientOpacityMaximumOpacity:1,useGradientOpacity:!1,componentWeight:1})}h.a.setGet(e,t,["independentComponents","interpolationType","shade","ambient","diffuse","specular","specularPower"]),function(e,t){t.classHierarchy.push("vtkVolumeProperty"),e.getMTime=function(){for(var e,n=t.mtime,r=0;r<gh;r++)1===t.componentData[r].colorChannels?t.componentData[r].grayTransferFunction&&(n=n>(e=t.componentData[r].grayTransferFunction.getMTime())?n:e):3===t.componentData[r].colorChannels&&t.componentData[r].rGBTransferFunction&&(n=n>(e=t.componentData[r].rGBTransferFunction.getMTime())?n:e),t.componentData[r].scalarOpacity&&(n=n>(e=t.componentData[r].scalarOpacity.getMTime())?n:e),t.componentData[r].gradientOpacity&&(t.componentData[r].disableGradientOpacity||(n=n>(e=t.componentData[r].gradientOpacity.getMTime())?n:e));return n},e.getColorChannels=function(e){return e<0||e>3?(hh("Bad index - must be between 0 and 3"),0):t.componentData[e].colorChannels},e.setGrayTransferFunction=function(n,r){t.componentData[n].grayTransferFunction!==r&&(t.componentData[n].grayTransferFunction=r,e.modified()),1!==t.componentData[n].colorChannels&&(t.componentData[n].colorChannels=1,e.modified())},e.getGrayTransferFunction=function(n){return null===t.componentData[n].grayTransferFunction&&(t.componentData[n].grayTransferFunction=Ae.newInstance(),t.componentData[n].grayTransferFunction.addPoint(0,0),t.componentData[n].grayTransferFunction.addPoint(1024,1),1!==t.componentData[n].colorChannels&&(t.componentData[n].colorChannels=1),e.modified()),t.componentData[n].grayTransferFunction},e.setRGBTransferFunction=function(n,r){t.componentData[n].rGBTransferFunction!==r&&(t.componentData[n].rGBTransferFunction=r,e.modified()),3!==t.componentData[n].colorChannels&&(t.componentData[n].colorChannels=3,e.modified())},e.getRGBTransferFunction=function(n){return null===t.componentData[n].rGBTransferFunction&&(t.componentData[n].rGBTransferFunction=Mp.newInstance(),t.componentData[n].rGBTransferFunction.addRGBPoint(0,0,0,0),t.componentData[n].rGBTransferFunction.addRGBPoint(1024,1,1,1),3!==t.componentData[n].colorChannels&&(t.componentData[n].colorChannels=3),e.modified()),t.componentData[n].rGBTransferFunction},e.setScalarOpacity=function(n,r){t.componentData[n].scalarOpacity!==r&&(t.componentData[n].scalarOpacity=r,e.modified())},e.getScalarOpacity=function(n){return null===t.componentData[n].scalarOpacity&&(t.componentData[n].scalarOpacity=Ae.newInstance(),t.componentData[n].scalarOpacity.addPoint(0,1),t.componentData[n].scalarOpacity.addPoint(1024,1),e.modified()),t.componentData[n].scalarOpacity},e.setComponentWeight=function(n,r){if(n<0||n>=gh)hh("Invalid index");else{var i=Math.min(1,Math.max(0,r));t.componentData[n].componentWeight!==i&&(t.componentData[n].componentWeight=i,e.modified())}},e.getComponentWeight=function(e){return e<0||e>=gh?(hh("Invalid index"),0):t.componentData[e].componentWeight},e.setInterpolationTypeToNearest=function(){e.setInterpolationType(ph.NEAREST)},e.setInterpolationTypeToLinear=function(){e.setInterpolationType(ph.LINEAR)},e.setInterpolationTypeToFastLinear=function(){e.setInterpolationType(ph.FAST_LINEAR)},e.getInterpolationTypeAsString=function(){return h.a.enumToString(ph,t.interpolationType)},["useGradientOpacity","scalarOpacityUnitDistance","gradientOpacityMinimumValue","gradientOpacityMinimumOpacity","gradientOpacityMaximumValue","gradientOpacityMaximumOpacity"].forEach(function(n){var r=h.a.capitalize(n);e["set".concat(r)]=function(r,i){t.componentData[r]["".concat(n)]!==i&&(t.componentData[r]["".concat(n)]=i,e.modified())}}),["useGradientOpacity","scalarOpacityUnitDistance","gradientOpacityMinimumValue","gradientOpacityMinimumOpacity","gradientOpacityMaximumValue","gradientOpacityMaximumOpacity"].forEach(function(n){var r=h.a.capitalize(n);e["get".concat(r)]=function(e){return t.componentData[e]["".concat(n)]}})}(e,t)}var yh=h.a.newInstance(vh,"vtkVolumeProperty"),bh=Object.assign({newInstance:yh,extend:vh},dh),Mh=h.a.vtkDebugMacro;var xh={mapper:null,property:null,bounds:[1,-1,1,-1,1,-1]};function wh(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,xh,n),Vp.a.extend(e,t,n),t.boundsMTime={},h.a.obj(t.boundsMTime),h.a.set(e,t,["property"]),h.a.setGet(e,t,["mapper"]),h.a.getArray(e,t,["bounds"],6),function(e,t){t.classHierarchy.push("vtkVolume"),e.getVolumes=function(){return e},e.makeProperty=bh.newInstance,e.getProperty=function(){return null===t.property&&(t.property=e.makeProperty()),t.property},e.getBounds=function(){if(null===t.mapper)return t.bounds;var n,r=t.mapper.getBounds();if(!r||6!==r.length)return r;if(r[0]>r[1])return t.mapperBounds=r.concat(),t.bounds=[1,-1,1,-1,1,-1],t.boundsMTime.modified(),r;if(!t.mapperBounds||!(n=[r,t.mapperBounds],n[0].map(function(e,t){return n.map(function(e){return e[t]})})).reduce(function(e,t){return e&&t[0]===t[1]},!0)||e.getMTime()>t.boundsMTime.getMTime()){Mh("Recomputing bounds..."),t.mapperBounds=r.map(function(e){return e});var i=[Ye.e.fromValues(r[1],r[3],r[5]),Ye.e.fromValues(r[1],r[2],r[5]),Ye.e.fromValues(r[0],r[2],r[5]),Ye.e.fromValues(r[0],r[3],r[5]),Ye.e.fromValues(r[1],r[3],r[4]),Ye.e.fromValues(r[1],r[2],r[4]),Ye.e.fromValues(r[0],r[2],r[4]),Ye.e.fromValues(r[0],r[3],r[4])];e.computeMatrix();var a=Ye.c.create();Ye.c.transpose(a,t.matrix),i.forEach(function(e){return Ye.e.transformMat4(e,e,a)}),t.bounds[0]=t.bounds[2]=t.bounds[4]=Number.MAX_VALUE,t.bounds[1]=t.bounds[3]=t.bounds[5]=-Number.MAX_VALUE,t.bounds=t.bounds.map(function(e,t){return t%2==0?i.reduce(function(e,n){return e>n[t/2]?n[t/2]:e},e):i.reduce(function(e,n){return e<n[(t-1)/2]?n[(t-1)/2]:e},e)}),t.boundsMTime.modified()}return t.bounds},e.getMTime=function(){var e=t.mtime;if(null!==t.property){var n=t.property.getMTime();e=n>e?n:e}return e},e.getRedrawMTime=function(){var e=t.mtime;if(null!==t.mapper){var n=t.mapper.getMTime();e=n>e?n:e,null!==t.mapper.getInput()&&(t.mapper.getInputAlgorithm().update(),e=(n=t.mapper.getInput().getMTime())>e?n:e)}return e}}(e,t)}var Ah={newInstance:h.a.newInstance(wh,"vtkVolume"),extend:wh},Th={COMPOSITE_BLEND:0,MAXIMUM_INTENSITY_BLEND:1,MINIMUM_INTENSITY_BLEND:2,AVERAGE_INTENSITY_BLEND:3};var Ch={bounds:[1,-1,1,-1,1,-1],sampleDistance:1,imageSampleDistance:1,maximumSamplesPerRay:1e3,autoAdjustSampleDistances:!0,blendMode:Th.COMPOSITE_BLEND,averageIPScalarRange:[-1e6,1e6]};function Sh(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ch,n),h.a.obj(e,t),h.a.algo(e,t,1,0),h.a.setGet(e,t,["sampleDistance","imageSampleDistance","maximumSamplesPerRay","autoAdjustSampleDistances","blendMode"]),h.a.setGetArray(e,t,["averageIPScalarRange"],2),h.a.event(e,t,"lightingActivated"),function(e,t){t.classHierarchy.push("vtkVolumeMapper"),e.getBounds=function(){var n=e.getInputData();return n?(t.static||e.update(),t.bounds=n.getBounds()):t.bounds=f.createUninitializedBounds(),t.bounds},e.update=function(){e.getInputData()},e.setBlendModeToComposite=function(){e.setBlendMode(Th.COMPOSITE_BLEND)},e.setBlendModeToMaximumIntensity=function(){e.setBlendMode(Th.MAXIMUM_INTENSITY_BLEND)},e.setBlendModeToMinimumIntensity=function(){e.setBlendMode(Th.MINIMUM_INTENSITY_BLEND)},e.setBlendModeToAverageIntensity=function(){e.setBlendMode(Th.AVERAGE_INTENSITY_BLEND)},e.getBlendModeAsString=function(){return h.a.enumToString(Th,t.blendMode)}}(e,t)}var Dh={newInstance:h.a.newInstance(Sh,"vtkVolumeMapper"),extend:Sh},Ih={vtkAbstractMapper:Fd.a,vtkAbstractMapper3D:Vd.a,vtkAbstractPicker:Qu,vtkActor:lu.a,vtkActor2D:Qd,vtkAnnotatedCubeActor:ep,vtkAxesActor:op,vtkCamera:dc,vtkCellPicker:ol,vtkColorTransferFunction:Mp,vtkCoordinate:Au,vtkGlyph3DMapper:Ip,vtkImageMapper:kp,vtkImageProperty:Fp,vtkImageSlice:Hp,vtkInteractorObserver:Ma,vtkInteractorStyle:Ia,vtkLight:gc,vtkMapper:cu.a,vtkPicker:$u,vtkPixelSpaceCallbackMapper:pu,vtkPointPicker:Xp,vtkProp:Du.a,vtkProp3D:Vp.a,vtkProperty:Wu.a,vtkProperty2D:Wd,vtkRenderer:Dc,vtkRenderWindow:Jp,vtkRenderWindowInteractor:pa,vtkRepresentation:th,vtkSkybox:ih,vtkSphereMapper:sh,vtkStickMapper:ch,vtkTexture:kf.a,vtkViewport:Mc,vtkVolume:Ah,vtkVolumeMapper:Dh,vtkVolumeProperty:bh},Eh=h.a.vtkErrorMacro;var Nh={canvas:null,size:[300,300],cursorVisibility:!0,cursor:"pointer",useOffScreen:!1,useBackgroundImage:!1};function Oh(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Nh,n),t.canvas=document.createElement("canvas"),t.canvas.style.width="100%",t.bgImage=new Image,t.bgImage.style.position="absolute",t.bgImage.style.left="0",t.bgImage.style.top="0",t.bgImage.style.width="100%",t.bgImage.style.height="100%",t.bgImage.style.zIndex="-1",h.a.obj(e,t,n),h.a.get(e,t,["useBackgroundImage","renderable"]),h.a.setGet(e,t,["canvas","cursor","useOffScreen","interactor"]),h.a.setGetArray(e,t,["size"],2),h.a.getArray(e,t,["renderers"]),function(e,t){t.classHierarchy.push("vtkCanvasView"),e.onModified(function(){t.renderable&&(t.canvas.setAttribute("width",t.size[0]),t.canvas.setAttribute("height",t.size[1])),t.viewStream&&t.viewStream.setSize(t.size[0],t.size[1]),t.canvas.style.display=t.useOffScreen?"none":"block",t.el&&(t.el.style.cursor=t.cursorVisibility?t.cursor:"none")}),e.setContainer=function(n){t.el&&t.el!==n&&(t.canvas.parentNode!==t.el&&Eh("Error: canvas parent node does not match container"),t.el.removeChild(t.canvas),t.el.contains(t.bgImage)&&t.el.removeChild(t.bgImage)),t.el!==n&&(t.el=n,t.el&&t.el.appendChild(t.canvas),t.useBackgroundImage&&t.el.appendChild(t.bgImage),e.modified())},e.setBackgroundImage=function(e){t.bgImage.src=e.src},e.setUseBackgroundImage=function(e){t.useBackgroundImage=e,t.useBackgroundImage&&t.el&&!t.el.contains(t.bgImage)?t.el.appendChild(t.bgImage):!t.useBackgroundImage&&t.el&&t.el.contains(t.bgImage)&&t.el.removeChild(t.bgImage)},e.setViewStream=function(n){return t.viewStream!==n&&(t.subscription&&(t.subscription.unsubscribe(),t.subscription=null),t.viewStream=n,t.viewStream&&(e.setUseBackgroundImage(!0),t.subscription=t.viewStream.onImageReady(function(t){return e.setBackgroundImage(t.image)}),t.viewStream.setSize(t.size[0],t.size[1]),t.viewStream.invalidateCache(),t.viewStream.render(),e.modified()),!0)},e.delete=h.a.chain(e.delete,e.setViewStream),t.renderable=e,t.renderers=[e],e.traverseAllPasses=function(){},e.isInViewport=function(){return!0},e.getInteractive=function(){return!0}}(e,t)}var _h={newInstance:h.a.newInstance(Oh,"vtkCanvasView"),extend:Oh},Lh={CLAMP_TO_EDGE:0,REPEAT:1,MIRRORED_REPEAT:2},Ph={NEAREST:0,LINEAR:1,NEAREST_MIPMAP_NEAREST:2,NEAREST_MIPMAP_LINEAR:3,LINEAR_MIPMAP_NEAREST:4,LINEAR_MIPMAP_LINEAR:5},kh={Wrap:Lh,Filter:Ph},Rh=h.a.vtkErrorMacro;var jh={parent:null,renderable:null,myFactory:null,children:[],visited:!1};function Bh(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,jh,n),h.a.obj(e,t),h.a.event(e,t,"event"),t.renderableChildMap=new Map,h.a.get(e,t,["visited"]),h.a.setGet(e,t,["parent","renderable","myFactory"]),h.a.getArray(e,t,["children"]),function(e,t){t.classHierarchy.push("vtkViewNode"),e.build=function(e){},e.render=function(e){},e.traverse=function(n){var r=n.getTraverseOperation(),i=e[r];if(i)i(n);else{e.apply(n,!0);for(var a=0;a<t.children.length;a++)t.children[a].traverse(n);e.apply(n,!1)}},e.apply=function(t,n){var r=e[t.getOperation()];r&&r(n,t)},e.getViewNodeFor=function(n){if(t.renderable===n)return e;for(var r=0;r<t.children.length;++r){var i=t.children[r].getViewNodeFor(n);if(i)return i}},e.getFirstAncestorOfType=function(e){return t.parent?t.parent.isA(e)?t.parent:t.parent.getFirstAncestorOfType(e):null},e.addMissingNode=function(n){if(n){var r=t.renderableChildMap.get(n);if(void 0!==r)r.setVisited(!0);else{var i=e.createViewNode(n);i&&(i.setParent(e),i.setVisited(!0),t.renderableChildMap.set(n,i),t.children.push(i))}}},e.addMissingNodes=function(n){if(n&&n.length)for(var r=0;r<n.length;++r){var i=n[r],a=t.renderableChildMap.get(i);if(void 0!==a)a.setVisited(!0);else{var o=e.createViewNode(i);o&&(o.setParent(e),o.setVisited(!0),t.renderableChildMap.set(i,o),t.children.push(o))}}},e.prepareNodes=function(){for(var e=0;e<t.children.length;++e)t.children[e].setVisited(!1)},e.setVisited=function(e){t.visited=e},e.removeUnusedNodes=function(){for(var e=null,n=0;n<t.children.length;++n){var r=t.children[n];if(r.getVisited())r.setVisited(!1);else{var i=r.getRenderable();i&&t.renderableChildMap.delete(i),e||(e=[]),e.push(r)}}e&&(t.children=t.children.filter(function(t){return!e.includes(t)}))},e.createViewNode=function(e){if(!t.myFactory)return Rh("Cannot create view nodes without my own factory"),null;var n=t.myFactory.createNode(e);return n&&n.setRenderable(e),n}}(e,t)}var zh={newInstance:h.a.newInstance(Bh,"vtkViewNode"),extend:Bh,PASS_TYPES:["Build","Render"]},Fh=kh.Wrap,Vh=kh.Filter,Uh=i.a.VtkDataTypes,Gh=h.a.vtkDebugMacro,Wh=h.a.vtkErrorMacro,Hh=h.a.vtkWarningMacro;var Yh={openGLRenderWindow:null,context:null,handle:0,sendParametersTime:null,textureBuildTime:null,numberOfDimensions:0,target:0,format:0,openGLDataType:0,components:0,width:0,height:0,depth:0,autoParameters:!0,wrapS:Fh.CLAMP_TO_EDGE,wrapT:Fh.CLAMP_TO_EDGE,wrapR:Fh.CLAMP_TO_EDGE,minificationFilter:Vh.NEAREST,magnificationFilter:Vh.NEAREST,minLOD:-1e3,maxLOD:1e3,baseLevel:0,maxLevel:1e3,generateMipmap:!1};function Qh(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Yh,n),zh.extend(e,t,n),t.sendParametersTime={},h.a.obj(t.sendParametersTime,{mtime:0}),t.textureBuildTime={},h.a.obj(t.textureBuildTime,{mtime:0}),h.a.set(e,t,["format","openGLDataType"]),h.a.setGet(e,t,["keyMatrixTime","minificationFilter","magnificationFilter","wrapS","wrapT","wrapR","generateMipmap"]),h.a.get(e,t,["width","height","volumeInfo","components","handle","target"]),function(e,t){var n=this;function r(e,n){var r=[];if(e!==Uh.FLOAT&&t.openGLDataType===t.context.FLOAT)for(var i=t.width*t.height*t.components,a=0;a<n.length;a++){for(var o=new Float32Array(i),s=0;s<i;s++)o[s]=n[a][s];r.push(o)}if(e!==Uh.UNSIGNED_CHAR&&t.openGLDataType===t.context.UNSIGNED_BYTE)for(var u=t.width*t.height*t.components,l=0;l<n.length;l++){for(var c=new Uint8Array(u),f=0;f<u;f++)c[f]=n[l][f];r.push(c)}if(0===r.length)for(var d=0;d<n.length;d++)r.push(n[d]);return r}function i(e){if(t.openGLRenderWindow.getWebgl2())return e;var n=[],r=t.width,i=t.height,a=t.components;if(e&&(!f.isPowerOfTwo(r)||!f.isPowerOfTwo(i)))for(var o=f.nearestPowerOfTwo(r),s=f.nearestPowerOfTwo(i),u=o*s*t.components,l=0;l<e.length;l++)if(null!==e[l]){var c=null;switch(t.openGLDataType){case t.context.FLOAT:c=new Float32Array(u);break;default:case t.context.UNSIGNED_BYTE:c=new Uint8Array(u)}for(var d=i/s,p=r/o,h=0;h<s;h++){var g=h*o*a,m=h*d,v=Math.floor(m),y=Math.ceil(m);y>=i&&(y=i-1);var b=m-v,M=1-b;v=v*r*a,y=y*r*a;for(var x=0;x<o;x++){var w=x*a,A=x*p,T=Math.floor(A),C=Math.ceil(A);C>=r&&(C=r-1);var S=A-T;T*=a,C*=a;for(var D=0;D<a;D++)c[g+w+D]=e[l][v+T+D]*M*(1-S)+e[l][v+C+D]*M*S+e[l][y+T+D]*b*(1-S)+e[l][y+C+D]*b*S}}n.push(c),t.width=o,t.height=s}else n.push(null);if(0===n.length)for(var I=0;I<e.length;I++)n.push(e[I]);return n}function a(e,t,n){for(var r=[],i=[],a=0;a<e;++a)r[a]=n[a],i[a]=n[a];for(var o=0,s=0;s<t;++s)for(var u=0;u<e;++u)n[o]<r[u]&&(r[u]=n[o]),n[o]>i[u]&&(i[u]=n[o]),o++;for(var l=[],c=[],f=0;f<e;++f)r[f]===i[f]&&(i[f]=r[f]+1),l[f]=r[f],c[f]=i[f]-r[f];return{scale:c,offset:l}}t.classHierarchy.push("vtkOpenGLTexture"),e.render=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(n?t.openGLRenderWindow=n:(t.openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t.openGLRenderWindow=t.openGLRenderer.getParent()),t.context=t.openGLRenderWindow.getContext(),t.renderable.getInterpolate()?(t.generateMipmap?e.setMinificationFilter(Vh.LINEAR_MIPMAP_LINEAR):e.setMinificationFilter(Vh.LINEAR),e.setMagnificationFilter(Vh.LINEAR)):(e.setMinificationFilter(Vh.NEAREST),e.setMagnificationFilter(Vh.NEAREST)),t.renderable.getRepeat()&&(e.setWrapR(Fh.REPEAT),e.setWrapS(Fh.REPEAT),e.setWrapT(Fh.REPEAT)),t.renderable.getInputData()&&t.renderable.setImage(null),!t.handle||t.renderable.getMTime()>t.textureBuildTime.getMTime()){null!==t.renderable.getImage()&&(t.renderable.getInterpolate()&&(t.generateMipmap=!0,e.setMinificationFilter(Vh.LINEAR_MIPMAP_LINEAR)),t.renderable.getImage()&&t.renderable.getImageLoaded()&&(e.create2DFromImage(t.renderable.getImage()),e.activate(),e.sendParameters(),t.textureBuildTime.modified()));var r=t.renderable.getInputData(0);if(r&&r.getPointData().getScalars()){for(var i=r.getExtent(),a=r.getPointData().getScalars(),o=[],s=0;s<t.renderable.getNumberOfInputPorts();++s){var u=t.renderable.getInputData(s),l=u?u.getPointData().getScalars().getData():null;l&&o.push(l)}t.renderable.getInterpolate()&&4===a.getNumberOfComponents()&&(t.generateMipmap=!0,e.setMinificationFilter(Vh.LINEAR_MIPMAP_LINEAR)),o.length%6==0?e.createCubeFromRaw(i[1]-i[0]+1,i[3]-i[2]+1,a.getNumberOfComponents(),a.getDataType(),o):e.create2DFromRaw(i[1]-i[0]+1,i[3]-i[2]+1,a.getNumberOfComponents(),a.getDataType(),a.getData()),e.activate(),e.sendParameters(),t.textureBuildTime.modified()}}t.handle&&e.activate()},e.destroyTexture=function(){e.deactivate(),t.context&&t.handle&&t.context.deleteTexture(t.handle),t.handle=0,t.numberOfDimensions=0,t.target=0,t.components=0,t.width=0,t.height=0,t.depth=0,e.resetFormatAndType()},e.createTexture=function(){t.handle||(t.handle=t.context.createTexture(),t.target&&(t.context.bindTexture(t.target,t.handle),t.context.texParameteri(t.target,t.context.TEXTURE_MIN_FILTER,e.getOpenGLFilterMode(t.minificationFilter)),t.context.texParameteri(t.target,t.context.TEXTURE_MAG_FILTER,e.getOpenGLFilterMode(t.magnificationFilter)),t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_S,e.getOpenGLWrapMode(t.wrapS)),t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_T,e.getOpenGLWrapMode(t.wrapT)),t.openGLRenderWindow.getWebgl2()&&t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_R,e.getOpenGLWrapMode(t.wrapR)),t.context.bindTexture(t.target,null)))},e.getTextureUnit=function(){return t.openGLRenderWindow?t.openGLRenderWindow.getTextureUnitForTexture(e):-1},e.activate=function(){t.openGLRenderWindow.activateTexture(e),e.bind()},e.deactivate=function(){t.openGLRenderWindow&&t.openGLRenderWindow.deactivateTexture(e)},e.releaseGraphicsResources=function(n){n&&t.handle&&(n.activateTexture(e),n.deactivateTexture(e),t.context.deleteTexture(t.handle),t.handle=0,t.numberOfDimensions=0,t.target=0,t.internalFormat=0,t.format=0,t.openGLDataType=0,t.components=0,t.width=0,t.height=0,t.depth=0),t.shaderProgram&&(t.shaderProgram.releaseGraphicsResources(n),t.shaderProgram=null)},e.bind=function(){t.context.bindTexture(t.target,t.handle),t.autoParameters&&e.getMTime()>t.sendParametersTime.getMTime()&&e.sendParameters()},e.isBound=function(){var e=!1;if(t.context&&t.handle){var n=0;switch(t.target){case t.context.TEXTURE_2D:n=t.context.TEXTURE_BINDING_2D;break;default:Hh("impossible case")}e=t.context.getIntegerv(n)===t.handle}return e},e.sendParameters=function(){t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_S,e.getOpenGLWrapMode(t.wrapS)),t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_T,e.getOpenGLWrapMode(t.wrapT)),t.openGLRenderWindow.getWebgl2()&&t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_R,e.getOpenGLWrapMode(t.wrapR)),t.context.texParameteri(t.target,t.context.TEXTURE_MIN_FILTER,e.getOpenGLFilterMode(t.minificationFilter)),t.context.texParameteri(t.target,t.context.TEXTURE_MAG_FILTER,e.getOpenGLFilterMode(t.magnificationFilter)),t.openGLRenderWindow.getWebgl2()&&(t.context.texParameteri(t.target,t.context.TEXTURE_BASE_LEVEL,t.baseLevel),t.context.texParameteri(t.target,t.context.TEXTURE_MAX_LEVEL,t.maxLevel)),t.sendParametersTime.modified()},e.getInternalFormat=function(n,r){return t.internalFormat?t.internalFormat:(t.internalFormat=e.getDefaultInternalFormat(n,r),t.internalFormat||Gh("Unable to find suitable internal format for T=".concat(n," NC= ").concat(r)),t.internalFormat)},e.getDefaultInternalFormat=function(e,r){var i=0;return(i=t.openGLRenderWindow.getDefaultTextureInternalFormat(e,r,!1))?i:((i=n.openGLRenderWindow.getDefaultTextureInternalFormat(e,r,!0))||(Gh("Unsupported internal texture type!"),Gh("Unable to find suitable internal format for T=".concat(e," NC= ").concat(r))),i)},e.setInternalFormat=function(n){n!==t.context.InternalFormat&&(t.internalFormat=n,e.modified())},e.getFormat=function(n,r){return t.format||(t.format=e.getDefaultFormat(n,r)),t.format},e.getDefaultFormat=function(e,n){if(t.openGLRenderWindow.getWebgl2())switch(n){case 1:return t.context.RED;case 2:return t.context.RG;case 3:return t.context.RGB;case 4:return t.context.RGBA;default:return t.context.RGB}else switch(n){case 1:return t.context.LUMINANCE;case 2:return t.context.LUMINANCE_ALPHA;case 3:return t.context.RGB;case 4:return t.context.RGBA;default:return t.context.RGB}},e.resetFormatAndType=function(){t.format=0,t.internalFormat=0,t.openGLDataType=0},e.getDefaultDataType=function(e){if(t.openGLRenderWindow.getWebgl2())switch(e){case Uh.UNSIGNED_CHAR:return t.context.UNSIGNED_BYTE;case Uh.FLOAT:case Uh.VOID:default:return t.context.FLOAT}switch(e){case Uh.UNSIGNED_CHAR:return t.context.UNSIGNED_BYTE;case Uh.FLOAT:case Uh.VOID:default:return t.context.getExtension("OES_texture_float")&&t.context.getExtension("OES_texture_float_linear")?t.context.FLOAT:t.context.UNSIGNED_BYTE}},e.getOpenGLDataType=function(n){return t.openGLDataType||(t.openGLDataType=e.getDefaultDataType(n)),t.openGLDataType},e.getShiftAndScale=function(){var e=0,n=1;switch(t.openGLDataType){case t.context.BYTE:e=(n=127.5)-128;break;case t.context.UNSIGNED_BYTE:n=255,e=0;break;case t.context.SHORT:e=(n=32767.5)-32768;break;case t.context.UNSIGNED_SHORT:n=65536,e=0;break;case t.context.INT:e=(n=2147483647.5)-2147483648;break;case t.context.UNSIGNED_INT:n=4294967295,e=0;break;case t.context.FLOAT:}return{shift:e,scale:n}},e.getOpenGLFilterMode=function(e){switch(e){case Vh.NEAREST:return t.context.NEAREST;case Vh.LINEAR:return t.context.LINEAR;case Vh.NEAREST_MIPMAP_NEAREST:return t.context.NEAREST_MIPMAP_NEAREST;case Vh.NEAREST_MIPMAP_LINEAR:return t.context.NEAREST_MIPMAP_LINEAR;case Vh.LINEAR_MIPMAP_NEAREST:return t.context.LINEAR_MIPMAP_NEAREST;case Vh.LINEAR_MIPMAP_LINEAR:return t.context.LINEAR_MIPMAP_LINEAR;default:return t.context.NEAREST}},e.getOpenGLWrapMode=function(e){switch(e){case Fh.CLAMP_TO_EDGE:return t.context.CLAMP_TO_EDGE;case Fh.REPEAT:return t.context.REPEAT;case Fh.MIRRORED_REPEAT:return t.context.MIRRORED_REPEAT;default:return t.context.CLAMP_TO_EDGE}},e.create2DFromRaw=function(n,a,o,s,u){if(e.getOpenGLDataType(s),e.getInternalFormat(s,o),e.getFormat(s,o),!t.internalFormat||!t.format||!t.openGLDataType)return Wh("Failed to determine texture parameters."),!1;t.target=t.context.TEXTURE_2D,t.components=o,t.width=n,t.height=a,t.depth=1,t.numberOfDimensions=2,t.openGLRenderWindow.activateTexture(e),e.createTexture(),e.bind();var l=i(r(s,[u]));return t.context.pixelStorei(t.context.UNPACK_ALIGNMENT,1),t.context.texImage2D(t.target,0,t.internalFormat,t.width,t.height,0,t.format,t.openGLDataType,l[0]),t.generateMipmap&&t.context.generateMipmap(t.target),e.deactivate(),!0},e.createCubeFromRaw=function(n,a,o,s,u){if(e.getOpenGLDataType(s),e.getInternalFormat(s,o),e.getFormat(s,o),!t.internalFormat||!t.format||!t.openGLDataType)return Wh("Failed to determine texture parameters."),!1;t.target=t.context.TEXTURE_CUBE_MAP,t.components=o,t.width=n,t.height=a,t.depth=1,t.numberOfDimensions=2,t.openGLRenderWindow.activateTexture(e),t.maxLevel=u.length/6-1,e.createTexture(),e.bind();for(var l=i(r(s,u)),c=[],f=t.width,d=t.height,p=0;p<l.length;p++){p%6==0&&0!==p&&(f/=2,d/=2),c[p]=new window[s](d*f*t.components);for(var h=0;h<d;++h){var g=h*f*t.components,m=(d-h-1)*f*t.components;c[p].set(l[p].slice(m,m+f*t.components),g)}}t.context.pixelStorei(t.context.UNPACK_ALIGNMENT,1);for(var v=0;v<6;v++)for(var y=0,b=t.width,M=t.height;b>=1&&M>=1;){var x=null;y<=t.maxLevel&&(x=c[6*y+v]),t.context.texImage2D(t.context.TEXTURE_CUBE_MAP_POSITIVE_X+v,y,t.internalFormat,b,M,0,t.format,t.openGLDataType,x),y++,b/=2,M/=2}return e.deactivate(),!0},e.createDepthFromRaw=function(n,r,i,a){return e.getOpenGLDataType(i),t.format=t.context.DEPTH_COMPONENT,t.internalFormat=t.context.DEPTH_COMPONENT,t.internalFormat&&t.format&&t.openGLDataType?(t.target=t.context.TEXTURE_2D,t.components=1,t.width=n,t.height=r,t.depth=1,t.numberOfDimensions=2,t.openGLRenderWindow.activateTexture(e),e.createTexture(),e.bind(),t.context.pixelStorei(t.context.UNPACK_ALIGNMENT,1),t.context.texImage2D(t.target,0,t.internalFormat,t.width,t.height,0,t.format,t.openGLDataType,a),t.generateMipmap&&t.context.generateMipmap(t.target),e.deactivate(),!0):(Wh("Failed to determine texture parameters."),!1)},e.create2DFromImage=function(n){if(e.getOpenGLDataType(Uh.UNSIGNED_CHAR),e.getInternalFormat(Uh.UNSIGNED_CHAR,4),e.getFormat(Uh.UNSIGNED_CHAR,4),!t.internalFormat||!t.format||!t.openGLDataType)return Wh("Failed to determine texture parameters."),!1;t.target=t.context.TEXTURE_2D,t.components=4,t.width=n.width,t.height=n.height,t.depth=1,t.numberOfDimensions=2,t.openGLRenderWindow.activateTexture(e),e.createTexture(),e.bind(),t.context.pixelStorei(t.context.UNPACK_ALIGNMENT,1);var r=!f.isPowerOfTwo(n.width)||!f.isPowerOfTwo(n.height),i=document.createElement("canvas");i.width=r?f.nearestPowerOfTwo(n.width):n.width,i.height=r?f.nearestPowerOfTwo(n.height):n.height;var a=i.getContext("2d");a.translate(0,i.height),a.scale(1,-1),a.drawImage(n,0,0,n.width,n.height,0,0,i.width,i.height),navigator.userAgent.indexOf("Chrome/69")>=0&&a.getImageData(0,0,1,1);var o=i;return t.context.texImage2D(t.target,0,t.internalFormat,t.format,t.openGLDataType,o),t.generateMipmap&&t.context.generateMipmap(t.target),e.deactivate(),!0},e.create3DFromRaw=function(n,r,i,a,o,s){return e.getOpenGLDataType(o),e.getInternalFormat(o,a),e.getFormat(o,a),t.internalFormat&&t.format&&t.openGLDataType?(t.target=t.context.TEXTURE_3D,t.components=a,t.width=n,t.height=r,t.depth=i,t.numberOfDimensions=3,t.openGLRenderWindow.activateTexture(e),e.createTexture(),e.bind(),t.context.texImage3D(t.target,0,t.internalFormat,t.width,t.height,t.depth,0,t.format,t.openGLDataType,s),t.generateMipmap&&t.context.generateMipmap(t.target),e.deactivate(),!0):(Wh("Failed to determine texture parameters."),!1)},e.create3DFilterableFromRaw=function(n,r,i,o,s,u){for(var l=n*r*i,c=[],d=[],p=0;p<o;++p)c[p]=0,d[p]=1;if(t.volumeInfo={scale:d,offset:c,width:n,height:r,depth:i},t.openGLRenderWindow.getWebgl2()){if(s===Uh.FLOAT)return e.create3DFromRaw(n,r,i,o,s,u);if(s===Uh.UNSIGNED_CHAR){for(var h=0;h<o;++h)t.volumeInfo.scale[h]=255;return e.create3DFromRaw(n,r,i,o,s,u)}var g=new Float32Array(l*o),m=a(o,l,u);t.volumeInfo.offset=m.offset,t.volumeInfo.scale=m.scale;for(var v=0,y=0;y<l;++y)for(var b=0;b<o;++b)g[v]=(u[v]-t.volumeInfo.offset[b])/t.volumeInfo.scale[b],v++;return e.create3DFromRaw(n,r,i,o,Uh.FLOAT,g)}var M=a(o,l,u),x=function(e,t,n,r,i){e[t]=n},w=Uh.UNSIGNED_CHAR;if(s===Uh.UNSIGNED_CHAR)for(var A=0;A<o;++A)M.offset[A]=0,M.scale[A]=255;else t.context.getExtension("OES_texture_float")&&t.context.getExtension("OES_texture_float_linear")?(w=Uh.FLOAT,x=function(e,t,n,r,i){e[t]=(n-r)/i}):(w=Uh.UNSIGNED_CHAR,x=function(e,t,n,r,i){e[t]=255*(n-r)/i});if(e.getOpenGLDataType(w),e.getInternalFormat(w,o),e.getFormat(w,o),!t.internalFormat||!t.format||!t.openGLDataType)return Wh("Failed to determine texture parameters."),!1;t.target=t.context.TEXTURE_2D,t.components=o,t.depth=1,t.numberOfDimensions=2;var T=t.context.getParameter(t.context.MAX_TEXTURE_SIZE);T>4096&&(w===Uh.FLOAT||o>=3)&&(T=4096);var C=1,S=1;l>T*T&&(S=C=Math.ceil(Math.sqrt(l/(T*T))));var D=Math.sqrt(l)/C;D=f.nearestPowerOfTwo(D);var I,E=Math.floor(D*C/n),N=Math.ceil(i/E),O=f.nearestPowerOfTwo(r*N/S);t.width=D,t.height=O,t.openGLRenderWindow.activateTexture(e),e.createTexture(),e.bind(),t.volumeInfo.xreps=E,t.volumeInfo.yreps=N,t.volumeInfo.xstride=C,t.volumeInfo.ystride=S,t.volumeInfo.offset=M.offset,t.volumeInfo.scale=M.scale;var _=D*O*o;I=w===Uh.FLOAT?new Float32Array(_):new Uint8Array(_);for(var L=0,P=0;P<N;P++)for(var k=Math.min(E,i-P*E),R=t.width-k*Math.floor(n/C),j=0;j<r;j+=S){for(var B=0;B<k;B++)for(var z=o*((P*E+B)*n*r+j*n),F=0;F<n;F+=C)for(var V=0;V<o;V++)x(I,L,u[z+F*o+V],M.offset[V],M.scale[V]),L++;L+=R*o}return t.context.pixelStorei(t.context.UNPACK_ALIGNMENT,1),t.context.texImage2D(t.target,0,t.internalFormat,t.width,t.height,0,t.format,t.openGLDataType,I),e.deactivate(),!0},e.setOpenGLRenderWindow=function(n){t.openGLRenderWindow!==n&&(e.releaseGraphicsResources(),t.openGLRenderWindow=n,t.context=null,n&&(t.context=t.openGLRenderWindow.getContext()))},e.getMaximumTextureSize=function(e){return e&&e.isCurrent()?e.getIntegerv(e.MAX_TEXTURE_SIZE):-1}}(e,t)}var qh=h.a.newInstance(Qh,"vtkOpenGLTexture"),Xh=Object.assign({newInstance:qh,extend:Qh},kh);var Kh={openGLRenderWindow:null,glFramebuffer:null,colorTexture:null,depthTexture:null,previousDrawBinding:0,previousReadBinding:0,previousDrawBuffer:0,previousReadBuffer:0,previousActiveFramebuffer:null};function Zh(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Kh,n),h.e(e,t),h.f(e,t,["colorTexture"]),function(e,t){t.classHierarchy.push("vtkFramebuffer"),e.getBothMode=function(){return t.context.FRAMEBUFFER},e.saveCurrentBindingsAndBuffers=function(t){var n=void 0!==t?t:e.getBothMode();e.saveCurrentBindings(n),e.saveCurrentBuffers(n)},e.saveCurrentBindings=function(e){var n=t.context;t.previousDrawBinding=n.getParameter(t.context.FRAMEBUFFER_BINDING),t.previousActiveFramebuffer=t.openGLRenderWindow.getActiveFramebuffer()},e.saveCurrentBuffers=function(e){},e.restorePreviousBindingsAndBuffers=function(t){var n=void 0!==t?t:e.getBothMode();e.restorePreviousBindings(n),e.restorePreviousBuffers(n)},e.restorePreviousBindings=function(e){var n=t.context;n.bindFramebuffer(n.FRAMEBUFFER,t.previousDrawBinding),t.openGLRenderWindow.setActiveFramebuffer(t.previousActiveFramebuffer)},e.restorePreviousBuffers=function(e){},e.bind=function(){t.context.bindFramebuffer(t.context.FRAMEBUFFER,t.glFramebuffer),t.colorTexture&&t.colorTexture.bind(),t.openGLRenderWindow.setActiveFramebuffer(e)},e.create=function(e,n){t.glFramebuffer=t.context.createFramebuffer(),t.glFramebuffer.width=e,t.glFramebuffer.height=n},e.setColorBuffer=function(e,n){var r=t.context;t.colorTexture=e,r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e.getHandle(),0)},e.getGLFramebuffer=function(){return t.glFramebuffer},e.setOpenGLRenderWindow=function(n){t.openGLRenderWindow!==n&&(e.releaseGraphicsResources(),t.openGLRenderWindow=n,t.context=null,n&&(t.context=t.openGLRenderWindow.getContext()))},e.releaseGraphicsResources=function(){t.glFramebuffer&&t.context.deleteFramebuffer(t.glFramebuffer),t.depthTexture&&t.depthTexture.releaseGraphicsResources(),t.colorTexture&&t.colorTexture.releaseGraphicsResources()},e.getSize=function(){var e=[0,0];return null!==t.glFramebuffer&&(e[0]=t.glFramebuffer.width,e[1]=t.glFramebuffer.height),e},e.populateFramebuffer=function(){e.bind();var n=t.context,r=Xh.newInstance();r.setOpenGLRenderWindow(t.openGLRenderWindow),r.setMinificationFilter(Ph.LINEAR),r.setMagnificationFilter(Ph.LINEAR),r.create2DFromRaw(t.glFramebuffer.width,t.glFramebuffer.height,4,Tt.b.UNSIGNED_CHAR,null),e.setColorBuffer(r),t.depthTexture=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,t.depthTexture),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,t.glFramebuffer.width,t.glFramebuffer.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,t.depthTexture)}}(e,t)}var Jh=h.d(Zh,"vtkFramebuffer"),$h=Object.assign({newInstance:Jh,extend:Zh});var eg={delegates:[],currentOperation:null,preDelegateOperations:[],postDelegateOperations:[],currentParent:null};function tg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,eg,n),h.a.obj(e,t),h.a.get(e,t,["currentOperation"]),h.a.setGet(e,t,["delegates","currentParent","preDelegateOperations","postDelegateOperations"]),function(e,t){t.classHierarchy.push("vtkRenderPass"),e.getOperation=function(){return t.currentOperation},e.setCurrentOperation=function(e){t.currentOperation=e,t.currentTraverseOperation="traverse".concat(h.a.capitalize(t.currentOperation))},e.getTraverseOperation=function(){return t.currentTraverseOperation},e.traverse=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t.deleted||(t.currentParent=r,t.preDelegateOperations.forEach(function(t){e.setCurrentOperation(t),n.traverse(e)}),t.delegates.forEach(function(t){t.traverse(n,e)}),t.postDelegateOperations.forEach(function(t){e.setCurrentOperation(t),n.traverse(e)}))}}(e,t)}var ng={newInstance:h.a.newInstance(tg,"vtkRenderPass"),extend:tg};var rg={opaqueActorCount:0,translucentActorCount:0,volumeCount:0,framebuffer:null,depthRequested:!1};function ig(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,rg,n),ng.extend(e,t,n),h.a.get(e,t,["framebuffer"]),h.a.setGet(e,t,["depthRequested"]),function(e,t){t.classHierarchy.push("vtkForwardPass"),e.traverse=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!t.deleted){t.currentParent=r,e.setCurrentOperation("buildPass"),n.traverse(e);for(var i=n.getRenderable().getNumberOfLayers(),a=n.getChildren(),o=0;o<i;o++)for(var s=0;s<a.length;s++){var u=a[s];if(n.getRenderable().getRenderers()[s].getLayer()===o){if(t.opaqueActorCount=0,t.translucentActorCount=0,t.volumeCount=0,e.setCurrentOperation("queryPass"),u.traverse(e),t.opaqueActorCount>0&&t.volumeCount>0||t.depthRequested){var l=n.getFramebufferSize();null===t.framebuffer&&(t.framebuffer=$h.newInstance()),t.framebuffer.setOpenGLRenderWindow(n),t.framebuffer.saveCurrentBindingsAndBuffers();var c=t.framebuffer.getSize();null!==c&&c[0]===l[0]&&c[1]===l[1]||(t.framebuffer.create(l[0],l[1]),t.framebuffer.populateFramebuffer()),t.framebuffer.bind(),e.setCurrentOperation("opaqueZBufferPass"),u.traverse(e),t.framebuffer.restorePreviousBindingsAndBuffers()}e.setCurrentOperation("cameraPass"),u.traverse(e),t.opaqueActorCount>0&&(e.setCurrentOperation("opaquePass"),u.traverse(e)),t.translucentActorCount>0&&(e.setCurrentOperation("translucentPass"),u.traverse(e)),t.volumeCount>0&&(e.setCurrentOperation("volumePass"),u.traverse(e))}}}},e.getZBufferTexture=function(){return t.framebuffer?t.framebuffer.getColorTexture():null},e.incrementOpaqueActorCount=function(){return t.opaqueActorCount++},e.incrementTranslucentActorCount=function(){return t.translucentActorCount++},e.incrementVolumeCount=function(){return t.volumeCount++}}(e,t)}var ag={newInstance:h.a.newInstance(ig,"vtkForwardPass"),extend:ig};var og={};function sg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,og,n),zh.extend(e,t,n),function(e,t){t.classHierarchy.push("vtkGenericWidgetRepresentation")}(0,t)}var ug={newInstance:h.a.newInstance(sg),extend:sg};var lg={context:null,keyMatrixTime:null,keyMatrices:null,activeTextures:null};function cg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,lg,n),zh.extend(e,t,n),t.keyMatrixTime={},h.a.obj(t.keyMatrixTime,{mtime:0}),t.keyMatrices={normalMatrix:Ye.b.create(),mcwc:Ye.c.create()},h.a.setGet(e,t,["context"]),h.a.get(e,t,["activeTextures"]),function(e,t){t.classHierarchy.push("vtkOpenGLActor"),e.buildPass=function(n){if(n){t.openGLRenderWindow=e.getFirstAncestorOfType("vtkOpenGLRenderWindow"),t.openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t.context=t.openGLRenderWindow.getContext(),e.prepareNodes(),e.addMissingNodes(t.renderable.getTextures()),e.addMissingNode(t.renderable.getMapper()),e.removeUnusedNodes(),t.ogltextures=null,t.activeTextures=null;for(var r=0;r<t.children.length;r++){var i=t.children[r];i.isA("vtkOpenGLTexture")?(t.ogltextures||(t.ogltextures=[]),t.ogltextures.push(i)):t.oglmapper=i}}},e.traverseOpaqueZBufferPass=function(t){e.traverseOpaquePass(t)},e.traverseOpaquePass=function(n){t.renderable&&t.renderable.getVisibility()&&t.renderable.getIsOpaque()&&(!t.openGLRenderer.getSelector()||t.renderable.getPickable())&&(e.apply(n,!0),t.oglmapper.traverse(n),e.apply(n,!1))},e.traverseTranslucentPass=function(n){!t.renderable||!t.renderable.getVisibility()||t.renderable.getIsOpaque()||t.openGLRenderer.getSelector()&&!t.renderable.getPickable()||(e.apply(n,!0),t.oglmapper.traverse(n),e.apply(n,!1))},e.activateTextures=function(){if(t.ogltextures){t.activeTextures=[];for(var e=0;e<t.ogltextures.length;e++){var n=t.ogltextures[e];n.render(),n.getHandle()&&t.activeTextures.push(n)}}},e.queryPass=function(e,n){if(e){if(!t.renderable||!t.renderable.getVisibility())return;t.renderable.getIsOpaque()?n.incrementOpaqueActorCount():n.incrementTranslucentActorCount()}},e.opaqueZBufferPass=function(t,n){return e.opaquePass(t,n)},e.opaquePass=function(n,r){if(n)t.openGLRenderWindow.enableDepthMask(),e.activateTextures();else if(t.activeTextures)for(var i=0;i<t.activeTextures.length;i++)t.activeTextures[i].deactivate()},e.translucentPass=function(n,r){if(n)t.openGLRenderWindow.disableDepthMask(),e.activateTextures();else if(t.activeTextures)for(var i=0;i<t.activeTextures.length;i++)t.activeTextures[i].deactivate()},e.getKeyMatrices=function(){return t.renderable.getMTime()>t.keyMatrixTime.getMTime()&&(t.renderable.computeMatrix(),Ye.c.copy(t.keyMatrices.mcwc,t.renderable.getMatrix()),Ye.c.transpose(t.keyMatrices.mcwc,t.keyMatrices.mcwc),t.renderable.getIsIdentity()?Ye.b.identity(t.keyMatrices.normalMatrix):(Ye.b.fromMat4(t.keyMatrices.normalMatrix,t.keyMatrices.mcwc),Ye.b.invert(t.keyMatrices.normalMatrix,t.keyMatrices.normalMatrix),Ye.b.transpose(t.keyMatrices.normalMatrix,t.keyMatrices.normalMatrix)),t.keyMatrixTime.modified()),t.keyMatrices}}(e,t)}var fg={newInstance:h.a.newInstance(cg),extend:cg};var dg={context:null,activeTextures:[]};function pg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,dg,n),zh.extend(e,t,n),h.f(e,t,["context"]),h.c(e,t,["activeTextures"]),function(e,t){t.classHierarchy.push("vtkOpenGLActor2D"),e.buildPass=function(n){if(n){if(!t.renderable)return;t.openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),e.prepareNodes(),e.addMissingNodes(t.renderable.getTextures()),e.addMissingNode(t.renderable.getMapper()),e.removeUnusedNodes()}},e.traverseOpaquePass=function(n){t.renderable&&t.renderable.getVisibility()&&t.renderable.getIsOpaque()&&(!t.openGLRenderer.getSelector()||t.renderable.getPickable())&&(e.apply(n,!0),t.children.forEach(function(e){e.isA("vtkOpenGLTexture")||e.traverse(n)}),e.apply(n,!1))},e.traverseTranslucentPass=function(n){!t.renderable||!t.renderable.getVisibility()||t.renderable.getIsOpaque()||t.openGLRenderer.getSelector()&&!t.renderable.getPickable()||(e.apply(n,!0),t.children.forEach(function(e){e.isA("vtkOpenGLTexture")||e.traverse(n)}),e.apply(n,!1))},e.activateTextures=function(){t.activeTextures=[],t.children.forEach(function(e){e.isA("vtkOpenGLTexture")&&(e.render(),e.getHandle()&&t.activeTextures.push(e))})},e.opaquePass=function(n,r){n?(t.context=e.getFirstAncestorOfType("vtkOpenGLRenderWindow").getContext(),t.context.depthMask(!0),e.activateTextures()):t.activeTextures.forEach(function(e){e.deactivate()})},e.translucentPass=function(n,r){n?(t.context=e.getFirstAncestorOfType("vtkOpenGLRenderWindow").getContext(),t.context.depthMask(!1),e.activateTextures()):(t.activeTextures.forEach(function(e){e.deactivate()}),t.context.depthMask(!0))}}(e,t)}var hg={newInstance:h.d(pg),extend:pg};var gg={context:null,lastRenderer:null,keyMatrixTime:null,keyMatrices:null};function mg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,gg,n),zh.extend(e,t,n),t.keyMatrixTime={},h.e(t.keyMatrixTime),t.keyMatrices={normalMatrix:Ye.b.create(),vcdc:Ye.c.create(),wcvc:Ye.c.create(),wcdc:Ye.c.create()},h.f(e,t,["context","keyMatrixTime"]),function(e,t){t.classHierarchy.push("vtkOpenGLCamera"),e.buildPass=function(n){n&&(t.openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t.openGLRenderWindow=t.openGLRenderer.getParent(),t.context=t.openGLRenderWindow.getContext())},e.opaquePass=function(e){if(e){var n=t.openGLRenderer.getTiledSizeAndOrigin();t.context.viewport(n.lowerLeftU,n.lowerLeftV,n.usize,n.vsize),t.context.scissor(n.lowerLeftU,n.lowerLeftV,n.usize,n.vsize)}},e.translucentPass=e.opaquePass,e.opaqueZBufferPass=e.opaquePass,e.volumePass=e.opaquePass,e.getKeyMatrices=function(n){if(n!==t.lastRenderer||t.openGLRenderWindow.getMTime()>t.keyMatrixTime.getMTime()||e.getMTime()>t.keyMatrixTime.getMTime()||n.getMTime()>t.keyMatrixTime.getMTime()||t.renderable.getMTime()>t.keyMatrixTime.getMTime()){Ye.c.copy(t.keyMatrices.wcvc,t.renderable.getViewMatrix()),Ye.b.fromMat4(t.keyMatrices.normalMatrix,t.keyMatrices.wcvc),Ye.b.invert(t.keyMatrices.normalMatrix,t.keyMatrices.normalMatrix),Ye.c.transpose(t.keyMatrices.wcvc,t.keyMatrices.wcvc);var r=t.openGLRenderer.getAspectRatio();Ye.c.copy(t.keyMatrices.vcdc,t.renderable.getProjectionMatrix(r,-1,1)),Ye.c.transpose(t.keyMatrices.vcdc,t.keyMatrices.vcdc),Ye.c.multiply(t.keyMatrices.wcdc,t.keyMatrices.vcdc,t.keyMatrices.wcvc),t.keyMatrixTime.modified(),t.lastRenderer=n}return t.keyMatrices}}(e,t)}var vg={newInstance:h.d(mg),extend:mg},yg={ARRAY_BUFFER:0,ELEMENT_ARRAY_BUFFER:1,TEXTURE_BUFFER:2},bg={ObjectType:yg},Mg=bg.ObjectType;var xg={objectType:Mg.ARRAY_BUFFER,openGLRenderWindow:null,context:null};function wg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,xg,n),h.a.obj(e,t),h.a.get(e,t,["openGLRenderWindow"]),function(e,t){function n(e){switch(e){case Mg.ELEMENT_ARRAY_BUFFER:return t.context.ELEMENT_ARRAY_BUFFER;case Mg.TEXTURE_BUFFER:if("TEXTURE_BUFFER"in t.context)return t.context.TEXTURE_BUFFER;default:case Mg.ARRAY_BUFFER:return t.context.ARRAY_BUFFER}}t.classHierarchy.push("vtkOpenGLBufferObject");var r=null,i=null,a=!0,o="";e.getType=function(){return r},e.setType=function(e){r=e},e.getHandle=function(){return i},e.isReady=function(){return!1===a},e.generateBuffer=function(e){var a=n(e);return null===i&&(i=t.context.createBuffer(),r=e),n(r)===a},e.upload=function(s,u){return e.generateBuffer(u)?(t.context.bindBuffer(n(r),i),t.context.bufferData(n(r),s,t.context.STATIC_DRAW),a=!1,!0):(o="Trying to upload array buffer to incompatible buffer.",!1)},e.bind=function(){return!!i&&(t.context.bindBuffer(n(r),i),!0)},e.release=function(){return!!i&&(t.context.bindBuffer(n(r),null),!0)},e.releaseGraphicsResources=function(){null!==i&&(t.context.bindBuffer(n(r),null),t.context.deleteBuffer(i),i=null)},e.setOpenGLRenderWindow=function(n){t.openGLRenderWindow!==n&&(e.releaseGraphicsResources(),t.openGLRenderWindow=n,t.context=null,n&&(t.context=t.openGLRenderWindow.getContext()))},e.getError=function(){return o}}(e,t)}var Ag=h.a.newInstance(wg),Tg=Object.assign({newInstance:Ag,extend:wg},{},bg),Cg={PassTypes:{MIN_KNOWN_PASS:0,ACTOR_PASS:0,COMPOSITE_INDEX_PASS:1,ID_LOW24:2,MAX_KNOWN_PASS:2}},Sg=Cg.PassTypes,Dg=Oe.SelectionContent,Ig=Oe.SelectionField,Eg=K.a.FieldAssociations,Ng=h.a.vtkErrorMacro;var Og={fieldAssociation:Eg.FIELD_ASSOCIATION_CELLS,renderer:null,area:null,openGLRenderWindow:null,openGLRenderer:null,currentPass:-1,propColorValue:null,props:null,idOffset:1};function _g(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Og,n),h.a.obj(e,t),t.area=[0,0,0,0],t.propColorValue=[0,0,0],t.props=[],h.a.setGet(e,t,["fieldAssociation","renderer","currentPass"]),h.a.setGetArray(e,t,["area"],4),h.a.setGetArray(e,t,["propColorValue"],3),h.a.event(e,t,"event"),function(e,t){t.classHierarchy.push("vtkOpenGLHardwareSelector"),e.releasePixBuffers=function(){t.pixBuffer=[]},e.beginSelection=function(){t.openGLRenderer=t.openGLRenderWindow.getViewNodeFor(t.renderer),t.maxAttributeId=0;var n=t.openGLRenderWindow.getSize();if(t.framebuffer){t.framebuffer.setOpenGLRenderWindow(t.openGLRenderWindow),t.framebuffer.saveCurrentBindingsAndBuffers();var r=t.framebuffer.getSize();r[0]===n[0]&&r[1]===n[1]||(t.framebuffer.create(n[0],n[1]),t.framebuffer.populateFramebuffer())}else t.framebuffer=$h.newInstance(),t.framebuffer.setOpenGLRenderWindow(t.openGLRenderWindow),t.framebuffer.saveCurrentBindingsAndBuffers(),t.framebuffer.create(n[0],n[1]),t.framebuffer.populateFramebuffer();t.openGLRenderer.clear(),t.openGLRenderer.setSelector(e),t.hitProps={},t.props=[],e.releasePixBuffers()},e.endSelection=function(){t.hitProps={},t.openGLRenderer.setSelector(null),t.framebuffer.restorePreviousBindingsAndBuffers()},e.preCapturePass=function(){},e.postCapturePass=function(){},e.select=function(){var n=null;return e.captureBuffers()&&(n=e.generateSelection(t.area[0],t.area[1],t.area[2],t.area[3]),e.releasePixBuffers()),n},e.captureBuffers=function(){if(!t.renderer||!t.openGLRenderWindow)return Ng("Renderer and view must be set before calling Select."),!1;for(t.openGLRenderer=t.openGLRenderWindow.getViewNodeFor(t.renderer),e.invokeEvent({type:"StartEvent"}),t.originalBackground=t.renderer.getBackgroundByReference(),t.renderer.setBackground(0,0,0),e.beginSelection(),t.currentPass=Sg.MIN_KNOWN_PASS;t.currentPass<=Sg.COMPOSITE_INDEX_PASS;t.currentPass++)console.log("in pass ".concat(t.currentPass)),e.passRequired(t.currentPass)&&(e.preCapturePass(t.currentPass),t.openGLRenderWindow.traverseAllPasses(),e.postCapturePass(t.currentPass),e.savePixelBuffer(t.currentPass));return e.endSelection(),t.renderer.setBackground(t.originalBackground),e.invokeEvent({type:"EndEvent"}),!0},e.passRequired=function(e){return!0},e.savePixelBuffer=function(n){t.pixBuffer[n]=t.openGLRenderWindow.getPixelData(t.area[0],t.area[1],t.area[2],t.area[3]),n===Sg.ACTOR_PASS&&e.buildPropHitList(t.pixBuffer[n])},e.buildPropHitList=function(n){for(var r=0;r<=t.area[3]-t.area[1];r++)for(var i=0;i<=t.area[2]-t.area[0];i++){var a=e.convert(i,r,n);a>0&&(--a in t.hitProps||(t.hitProps[a]=!0))}},e.renderProp=function(n){t.currentPass===Sg.ACTOR_PASS&&(e.setPropColorValueFromInt(t.props.length+t.idOffset),t.props.push(n))},e.renderCompositeIndex=function(n){t.currentPass===Sg.COMPOSITE_INDEX_PASS&&e.setPropColorValueFromInt(n+t.idOffset)},e.renderAttributeId=function(e){e<0||(t.maxAttributeId=e>t.maxAttributeId?e:t.maxAttributeId)},e.getPropFromID=function(e){return e>=0&&e<t.props.length?t.props[e]:null},e.passTypeToString=function(e){return h.a.enumToString(Sg,e)},e.isPropHit=function(e){return Boolean(t.hitProps[e])},e.convert=function(e,n,r){if(!r)return 0;var i=4*(n*(t.area[2]-t.area[0]+1)+e),a=[];a[0]=r[i],a[1]=r[i+1],a[2]=r[i+2];var o=a[2];return o*=256,o+=a[1],o*=256,o+=a[0]},e.setPropColorValueFromInt=function(e){t.propColorValue[0]=e%256/255,t.propColorValue[1]=e/256%256/255,t.propColorValue[2]=e/65536%256/255},e.getPixelInformation=function(n,r,i){var a=r<0?0:r;if(0===a){if(i[0]=n[0],i[1]=n[1],n[0]<t.area[0]||n[0]>t.area[2]||n[1]<t.area[1]||n[1]>t.area[3])return null;var o=[n[0]-t.area[0],n[1]-t.area[1]],s=e.convert(o[0],o[1],t.pixBuffer[Sg.ACTOR_PASS]);if(s<=0)return null;var u={valid:!0};u.propID=s-t.idOffset,u.prop=e.getPropFromID(u.propID);var l=e.convert(o[0],o[1],t.pixBuffer[Sg.COMPOSITE_INDEX_PASS]);return(l<0||l>16777215)&&(l=0),u.compositeID=l-t.idOffset,u}var c=[n[0],n[1]],f=[0,0],d=e.getPixelInformation(n,0,i);if(d&&d.valid)return d;for(var p=1;p<a;++p){for(var h=c[1]>p?c[1]-p:0;h<=c[1]+p;++h){if(f[1]=h,c[0]>=p&&(f[0]=c[0]-p,(d=e.getPixelInformation(f,0,i))&&d.valid))return d;if(f[0]=c[0]+p,(d=e.getPixelInformation(f,0,i))&&d.valid)return d}for(var g=c[0]>=p?c[0]-(p-1):0;g<=c[0]+(p-1);++g){if(f[0]=g,c[1]>=p&&(f[1]=c[1]-p,(d=e.getPixelInformation(f,0,i))&&d.valid))return d;if(f[1]=c[1]+p,(d=e.getPixelInformation(f,0,i))&&d.valid)return d}}return i[0]=n[0],i[1]=n[1],null},e.convertSelection=function(e,t){var n=[],r=0;return t.forEach(function(t,i){var a=Oe.newInstance();switch(a.setContentType(Dg.INDICES),e){case Eg.FIELD_ASSOCIATION_CELLS:a.setFieldType(Ig.CELL);break;case Eg.FIELD_ASSOCIATION_POINTS:a.setFieldType(Ig.POINT);break;default:Ng("Unknown field association")}a.getProperties().propID=t.info.propID,a.getProperties().prop=t.info.prop,a.getProperties().compositeID=t.info.compositeID,a.getProperties().pixelCount=t.pixelCount,a.setSelectionList(t.attributeIDs),n[r]=a,r++}),n},e.getInfoHash=function(e){return"".concat(e.propID," ").concat(e.compositeID)},e.generateSelection=function(n,r,i,a){for(var o=new Map,s=[0,0],u=r;u<=a;u++)for(var l=n;l<=i;l++){var c=[l,u],f=e.getPixelInformation(c,0,s);if(f&&f.valid){var d=e.getInfoHash(f);o.has(d)?(o.get(d).pixelCount++,-1===o.get(d).attributeIDs.indexOf(f.attributeID)&&o.get(d).attributeIDs.push(f.attributeID)):o.set(d,{info:f,pixelCount:1,attributeIDs:[f.attributeID]})}}return e.convertSelection(t.fieldAssociation,o)},e.attach=function(e,n){t.openGLRenderWindow=e,t.renderer=n}}(e,t)}var Lg=h.a.newInstance(_g,"vtkOpenGLHardwareSelector"),Pg=Object.assign({newInstance:Lg,extend:_g},Cg),kg=n(19),Rg=h.a.vtkDebugMacro,jg=h.a.vtkErrorMacro;var Bg={elementCount:0,stride:0,colorBOStride:0,vertexOffset:0,normalOffset:0,tCoordOffset:0,tCoordComponents:0,colorOffset:0,colorComponents:0,tcoordBO:null,customData:[]};function zg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Bg,n),Tg.extend(e,t,n),h.a.setGet(e,t,["colorBO","elementCount","stride","colorBOStride","vertexOffset","normalOffset","tCoordOffset","tCoordComponents","colorOffset","colorComponents","customData"]),function(e,t){t.classHierarchy.push("vtkOpenGLCellArrayBufferObject"),e.setType(yg.ARRAY_BUFFER),e.createVBO=function(n,r,i,a){if(!n.getData()||!n.getData().length)return t.elementCount=0,0;t.blockSize=3,t.vertexOffset=0,t.normalOffset=0,t.tCoordOffset=0,t.tCoordComponents=0,t.colorComponents=0,t.colorOffset=0,t.customData=[];var o=a.points.getData(),s=null,u=null,l=null,c=a.colors?a.colors.getNumberOfComponents():0,f=a.tcoords?a.tcoords.getNumberOfComponents():0;a.normals&&(t.normalOffset=4*t.blockSize,t.blockSize+=3,s=a.normals.getData()),a.customAttributes&&a.customAttributes.forEach(function(e){e&&(t.customData.push({data:e.getData(),offset:4*t.blockSize,components:e.getNumberOfComponents(),name:e.getName()}),t.blockSize+=e.getNumberOfComponents())}),a.tcoords&&(t.tCoordOffset=4*t.blockSize,t.tCoordComponents=f,t.blockSize+=f,u=a.tcoords.getData()),a.colors?(t.colorComponents=a.colors.getNumberOfComponents(),t.colorOffset=0,l=a.colors.getData(),t.colorBO||(t.colorBO=Tg.newInstance()),t.colorBO.setOpenGLRenderWindow(t.openGLRenderWindow)):t.colorBO=null,t.stride=4*t.blockSize;var d,p=0,h=0,g=0,m=0,v=0,y=0,b={anythingToPoints:function(e,t,n){for(var r=0;r<e;++r)d(t[n+r])},linesToWireframe:function(e,t,n){for(var r=0;r<e-1;++r)d(t[n+r]),d(t[n+r+1])},polysToWireframe:function(e,t,n){for(var r=0;r<e;++r)d(t[n+r]),d(t[n+(r+1)%e])},stripsToWireframe:function(e,t,n){for(var r=0;r<e-1;++r)d(t[n+r]),d(t[n+r+1]);for(var i=0;i<e-2;i++)d(t[n+i]),d(t[n+i+2])},polysToSurface:function(e,t,n){if(e<3)Rg("skipping degenerate triangle");else for(var r=0;r<e-2;r++)d(t[n+0]),d(t[n+r+1]),d(t[n+r+2])},stripsToSurface:function(e,t,n){for(var r=0;r<e-2;r++)d(t[n+r]),d(t[n+r+1+r%2]),d(t[n+r+1+(r+1)%2])}},M={anythingToPoints:function(e,t){return e},linesToWireframe:function(e,t){return 2*(e-1)},polysToWireframe:function(e,t){return 2*e},stripsToWireframe:function(e,t){return 4*e-6},polysToSurface:function(e,t){return e<3?0:3*(e-2)},stripsToSurface:function(e,t,n){return 3*(e-2)}},x=null,w=null;i===kg.a.POINTS||"verts"===r?(x=b.anythingToPoints,w=M.anythingToPoints):i===kg.a.WIREFRAME||"lines"===r?(x=b["".concat(r,"ToWireframe")],w=M["".concat(r,"ToWireframe")]):(x=b["".concat(r,"ToSurface")],w=M["".concat(r,"ToSurface")]);for(var A=n.getData(),T=A.length,C=0,S=0;S<T;)C+=w(A[S],A),S+=A[S]+1;var D=null,I=new Float32Array(C*t.blockSize);l&&(D=new Uint8Array(4*C));var E=0,N=0;d=function(e){if(p=3*e,I[E++]=o[p++],I[E++]=o[p++],I[E++]=o[p++],null!==s&&(h=a.haveCellNormals?3*(y+a.cellOffset):3*e,I[E++]=s[h++],I[E++]=s[h++],I[E++]=s[h++]),t.customData.forEach(function(t){v=e*t.components;for(var n=0;n<t.components;++n)I[E++]=t.data[v++]}),null!==u){g=e*f;for(var n=0;n<f;++n)I[E++]=u[g++]}null!==l&&(m=a.haveCellScalars?(y+a.cellOffset)*c:e*c,D[N++]=l[m++],D[N++]=l[m++],D[N++]=l[m++],D[N++]=4===c?l[m++]:255)};for(var O=0;O<T;)x(A[O],A,O+1),O+=A[O]+1,y++;return t.elementCount=C,e.upload(I,yg.ARRAY_BUFFER),t.colorBO&&(t.colorBOStride=4,t.colorBO.upload(D,yg.ARRAY_BUFFER)),y},e.setCoordShiftAndScaleMethod=function(e){jg("coordinate shift and scale not yet implemented")},e.setCoordShift=function(e){jg("coordinate shift and scale not yet implemented")},e.setCoordScale=function(e){jg("coordinate shift and scale not yet implemented")}}(e,t)}var Fg={newInstance:h.a.newInstance(zg),extend:zg},Vg=h.a.vtkErrorMacro;var Ug={shaderType:"Unknown",source:"",error:"",handle:0,dirty:!1,context:null};function Gg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ug,n),h.a.obj(e,t),h.a.setGet(e,t,["shaderType","source","error","handle","context"]),function(e,t){t.classHierarchy.push("vtkShader"),e.compile=function(){var e=t.context.VERTEX_SHADER;if(!t.source||!t.source.length||"Unknown"===t.shaderType)return!1;switch(0!==t.handle&&(t.context.deleteShader(t.handle),t.handle=0),t.shaderType){case"Fragment":e=t.context.FRAGMENT_SHADER;break;case"Vertex":default:e=t.context.VERTEX_SHADER}if(t.handle=t.context.createShader(e),t.context.shaderSource(t.handle,t.source),t.context.compileShader(t.handle),!t.context.getShaderParameter(t.handle,t.context.COMPILE_STATUS)){var n=t.context.getShaderInfoLog(t.handle);return Vg("Error compiling shader '".concat(t.source,"': ").concat(n)),t.context.deleteShader(t.handle),t.handle=0,!1}return!0},e.cleanup=function(){"Unknown"!==t.shaderType&&0!==t.handle&&(t.context.deleteShader(t.handle),t.handle=0,t.dirty=!0)}}(e,t)}var Wg={newInstance:h.a.newInstance(Gg,"vtkShader"),extend:Gg},Hg=h.a.vtkErrorMacro;var Yg={vertexShaderHandle:0,fragmentShaderHandle:0,geometryShaderHandle:0,vertexShader:null,fragmentShader:null,geometryShader:null,linked:!1,bound:!1,compiled:!1,error:"",handle:0,numberOfOutputs:0,attributesLocs:null,uniformLocs:null,md5Hash:0,context:null,lastCameraMTime:null};function Qg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Yg,n),t.attributesLocs={},t.uniformLocs={},t.vertexShader=Wg.newInstance(),t.vertexShader.setShaderType("Vertex"),t.fragmentShader=Wg.newInstance(),t.fragmentShader.setShaderType("Fragment"),t.geometryShader=Wg.newInstance(),t.geometryShader.setShaderType("Geometry"),h.a.obj(e,t),h.a.get(e,t,["lastCameraMTime"]),h.a.setGet(e,t,["error","handle","compiled","bound","md5Hash","vertexShader","fragmentShader","geometryShader","linked"]),function(e,t){t.classHierarchy.push("vtkShaderProgram"),e.compileShader=function(){return t.vertexShader.compile()?t.fragmentShader.compile()?e.attachShader(t.vertexShader)&&e.attachShader(t.fragmentShader)?e.link()?(e.setCompiled(!0),1):(Hg("Links failed: ".concat(t.error)),0):(Hg(t.error),0):(Hg(t.fragmentShader.getSource().split("\n").map(function(e,t){return"".concat(t,": ").concat(e)}).join("\n")),Hg(t.fragmentShader.getError()),0):(Hg(t.vertexShader.getSource().split("\n").map(function(e,t){return"".concat(t,": ").concat(e)}).join("\n")),Hg(t.vertexShader.getError()),0)},e.cleanup=function(){"Unknown"!==t.shaderType&&0!==t.handle&&(t.context.deleteShader(t.handle),t.handle=0)},e.bind=function(){return!(!t.linked&&!t.link()||(t.context.useProgram(t.handle),e.setBound(!0),0))},e.isBound=function(){return!!t.bound},e.release=function(){t.context.useProgram(null),e.setBound(!1)},e.setContext=function(e){t.vertexShader.setContext(e),t.fragmentShader.setContext(e),t.geometryShader.setContext(e)},e.link=function(){if(t.inked)return!0;if(0===t.handle)return t.error="Program has not been initialized, and/or does not have shaders.",!1;if(t.uniformLocs={},t.context.linkProgram(t.handle),!t.context.getProgramParameter(t.handle,t.context.LINK_STATUS)){var n=t.context.getProgramInfoLog(t.handle);return Hg("Error linking shader ".concat(n)),t.handle=0,!1}return e.setLinked(!0),t.attributeLocs={},!0},e.setUniformMatrix=function(n,r){var i=e.findUniform(n);return-1===i?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniformMatrix4fv(i,!1,r),!0)},e.setUniformMatrix3x3=function(n,r){var i=e.findUniform(n);return-1===i?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniformMatrix3fv(i,!1,r),!0)},e.setUniformf=function(n,r){var i=e.findUniform(n);return-1===i?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform1f(i,r),!0)},e.setUniformfv=function(n,r){var i=e.findUniform(n);return-1===i?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform1fv(i,r),!0)},e.setUniformi=function(n,r){var i=e.findUniform(n);return-1===i?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform1i(i,r),!0)},e.setUniformiv=function(n,r){var i=e.findUniform(n);return-1===i?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform1iv(i,r),!0)},e.setUniform2f=function(n,r,i){var a=e.findUniform(n);if(-1===a)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;if(void 0===i)throw new RangeError("Invalid number of values for array");return t.context.uniform2f(a,r,i),!0},e.setUniform2fv=function(n,r){var i=e.findUniform(n);return-1===i?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform2fv(i,r),!0)},e.setUniform2i=function(n,r,i){var a=e.findUniform(n);if(-1===a)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;if(void 0===i)throw new RangeError("Invalid number of values for array");return t.context.uniform2i(a,r,i),!0},e.setUniform2iv=function(n,r){var i=e.findUniform(n);return-1===i?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform2iv(i,r),!0)},e.setUniform3f=function(n,r,i,a){var o=e.findUniform(n);if(-1===o)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;if(void 0===a)throw new RangeError("Invalid number of values for array");return t.context.uniform3f(o,r,i,a),!0},e.setUniform3fArray=function(n,r){var i=e.findUniform(n);if(-1===i)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;if(!Array.isArray(r)||3!==r.length)throw new RangeError("Invalid number of values for array");return t.context.uniform3f(i,r[0],r[1],r[2]),!0},e.setUniform3fv=function(n,r){var i=e.findUniform(n);return-1===i?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform3fv(i,r),!0)},e.setUniform3i=function(n){var r=e.findUniform(n);if(-1===r)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;for(var i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];var s=a;if(1===s.length&&Array.isArray(s[0])&&(s=s[0]),3!==s.length)throw new RangeError("Invalid number of values for array");return t.context.uniform3i(r,s[0],s[1],s[2]),!0},e.setUniform3iv=function(n,r){var i=e.findUniform(n);return-1===i?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform3iv(i,r),!0)},e.setUniform4f=function(n){var r=e.findUniform(n);if(-1===r)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;for(var i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];var s=a;if(1===s.length&&Array.isArray(s[0])&&(s=s[0]),4!==s.length)throw new RangeError("Invalid number of values for array");return t.context.uniform4f(r,s[0],s[1],s[2],s[3]),!0},e.setUniform4fv=function(n,r){var i=e.findUniform(n);return-1===i?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform4fv(i,r),!0)},e.setUniform4i=function(n){var r=e.findUniform(n);if(-1===r)return t.error="Could not set uniform ".concat(n," . No such uniform."),!1;for(var i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];var s=a;if(1===s.length&&Array.isArray(s[0])&&(s=s[0]),4!==s.length)throw new RangeError("Invalid number of values for array");return t.context.uniform4i(r,s[0],s[1],s[2],s[3]),!0},e.setUniform4iv=function(n,r){var i=e.findUniform(n);return-1===i?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform4iv(i,r),!0)},e.setUniform4fv=function(n,r,i){var a=e.findUniform(n);return-1===a?(t.error="Could not set uniform ".concat(n," . No such uniform."),!1):(t.context.uniform4fv(a,i),!0)},e.findUniform=function(e){if(!e||!t.linked)return-1;var n=t.uniformLocs[e];return void 0!==n?n:null===(n=t.context.getUniformLocation(t.handle,e))?(t.error="Uniform ".concat(e," not found in current shader program."),t.uniformLocs[e]=-1,-1):(t.uniformLocs[e]=n,n)},e.isUniformUsed=function(e){if(!e)return!1;var n=t.uniformLocs[e];return void 0!==n?null!==n:t.linked?(n=t.context.getUniformLocation(t.handle,e),t.uniformLocs[e]=n,null!==n):(Hg("attempt to find uniform when the shader program is not linked"),!1)},e.isAttributeUsed=function(e){if(!e)return!1;var n=Object.keys(t.attributeLocs).indexOf(e);return-1!==n||(t.linked?-1!==(n=t.context.getAttribLocation(t.handle,e))&&(t.attributeLocs[e]=n,!0):(Hg("attempt to find uniform when the shader program is not linked"),!1))},e.attachShader=function(n){if(0===n.getHandle())return t.error="Shader object was not initialized, cannot attach it.",!1;if("Unknown"===n.getShaderType())return t.error="Shader object is of type Unknown and cannot be used.",!1;if(0===t.handle){var r=t.context.createProgram();if(0===r)return t.error="Could not create shader program.",!1;t.handle=r,t.linked=!1}return"Vertex"===n.getShaderType()&&(0!==t.vertexShaderHandle&&t.comntext.detachShader(t.handle,t.vertexShaderHandle),t.vertexShaderHandle=n.getHandle()),"Fragment"===n.getShaderType()&&(0!==t.fragmentShaderHandle&&t.context.detachShader(t.handle,t.fragmentShaderHandle),t.fragmentShaderHandle=n.getHandle()),t.context.attachShader(t.handle,n.getHandle()),e.setLinked(!1),!0},e.detachShader=function(e){if(0===e.getHandle())return t.error="shader object was not initialized, cannot attach it.",!1;if("Unknown"===e.getShaderType())return t.error="Shader object is of type Unknown and cannot be used.",!1;switch(0===t.handle&&(t.errror="This shader prorgram has not been initialized yet."),e.getShaderType()){case"Vertex":return t.vertexShaderHandle!==e.getHandle()?(t.error="The supplied shader was not attached to this program.",!1):(t.context.detachShader(t.handle,e.getHandle()),t.vertexShaderHandle=0,t.linked=!1,!0);case"Fragment":return t.fragmentShaderHandle!==e.getHandle()?(t.error="The supplied shader was not attached to this program.",!1):(t.context.detachShader(t.handle,e.getHandle()),t.fragmentShaderHandle=0,t.linked=!1,!0);default:return!1}},e.setContext=function(e){t.context=e,t.vertexShader.setContext(e),t.fragmentShader.setContext(e),t.geometryShader.setContext(e)},e.setLastCameraMTime=function(e){t.lastCameraMTime=e}}(e,t)}var qg={newInstance:h.a.newInstance(Qg,"vtkShaderProgram"),extend:Qg,substitute:function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=Array.isArray(n)?n.join("\n"):n,a=!1;-1!==e.search(t)&&(a=!0);var o="";r&&(o="g");var s=new RegExp(t,o);return{replace:a,result:e.replace(s,i)}}};var Xg={forceEmulation:!1,handleVAO:0,handleProgram:0,supported:!0,buffers:null,context:null,openGLRenderWindow:null};function Kg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Xg,n),t.buffers=[],h.a.obj(e,t),h.a.get(e,t,["supported"]),h.a.setGet(e,t,["forceEmulation"]),function(e,t){t.classHierarchy.push("vtkOpenGLVertexArrayObject"),e.exposedMethod=function(){},e.initialize=function(){t.instancingExtension=null,t.openGLRenderWindow.getWebgl2()||(t.instancingExtension=t.context.getExtension("ANGLE_instanced_arrays")),!t.forceEmulation&&t.openGLRenderWindow&&t.openGLRenderWindow.getWebgl2()?(t.extension=null,t.supported=!0,t.handleVAO=t.context.createVertexArray()):(t.extension=t.context.getExtension("OES_vertex_array_object"),!t.forceEmulation&&t.extension?(t.supported=!0,t.handleVAO=t.extension.createVertexArrayOES()):t.supported=!1)},e.isReady=function(){return 0!==t.handleVAO||!1===t.supported},e.bind=function(){if(e.isReady()||e.initialize(),e.isReady()&&t.supported)t.extension?t.extension.bindVertexArrayOES(t.handleVAO):t.context.bindVertexArray(t.handleVAO);else if(e.isReady())for(var n=t.context,r=0;r<t.buffers.length;++r){var i=t.buffers[r];t.context.bindBuffer(n.ARRAY_BUFFER,i.buffer);for(var a=0;a<i.attributes.length;++a)for(var o=i.attributes[a],s=o.isMatrix?o.size:1,u=0;u<s;++u)n.enableVertexAttribArray(o.index+u),n.vertexAttribPointer(o.index+u,o.size,o.type,o.normalize,o.stride,o.offset+o.stride*u/o.size),o.divisor>0&&(t.instancingExtension?t.instancingExtension.vertexAttribDivisorANGLE(o.index+u,1):n.vertexAttribDivisor(o.index+u,1))}},e.release=function(){if(e.isReady()&&t.supported)t.extension?t.extension.bindVertexArrayOES(null):t.context.bindVertexArray(null);else if(e.isReady())for(var n=t.context,r=0;r<t.buffers.length;++r){var i=t.buffers[r];t.context.bindBuffer(n.ARRAY_BUFFER,i.buffer);for(var a=0;a<i.attributes.length;++a)for(var o=i.attributes[a],s=o.isMatrix?o.size:1,u=0;u<s;++u)n.enableVertexAttribArray(o.index+u),n.vertexAttribPointer(o.index+u,o.size,o.type,o.normalize,o.stride,o.offset+o.stride*u/o.size),o.divisor>0&&(t.instancingExtension?t.instancingExtension.vertexAttribDivisorANGLE(o.index+u,0):n.vertexAttribDivisor(o.index+u,0)),n.disableVertexAttribArray(o.index+u)}},e.shaderProgramChanged=function(){e.release(),t.handleVAO&&(t.extension?t.extension.deleteVertexArrayOES(t.handleVAO):t.context.deleteVertexArray(t.handleVAO)),t.handleVAO=0,t.handleProgram=0},e.releaseGraphicsResources=function(){e.shaderProgramChanged(),t.handleVAO&&(t.extension?t.extension.deleteVertexArrayOES(t.handleVAO):t.context.deleteVertexArray(t.handleVAO)),t.handleVAO=0,t.supported=!0,t.handleProgram=0},e.addAttributeArray=function(t,n,r,i,a,o,s,u){return e.addAttributeArrayWithDivisor(t,n,r,i,a,o,s,u,0,!1)},e.addAttributeArrayWithDivisor=function(n,r,i,a,o,s,u,l,c,f){if(!n)return!1;if(!n.isBound()||0===r.getHandle()||r.getType()!==yg.ARRAY_BUFFER)return!1;if(0===t.handleProgram&&(t.handleProgram=n.getHandle()),e.isReady()||e.initialize(),!e.isReady()||t.handleProgram!==n.getHandle())return!1;var d=t.context,p={};if(p.name=i,p.index=d.getAttribLocation(t.handleProgram,i),p.offset=a,p.stride=o,p.type=s,p.size=u,p.normalize=l,p.isMatrix=f,p.divisor=c,-1===p.Index)return!1;if(r.bind(),d.enableVertexAttribArray(p.index),d.vertexAttribPointer(p.index,p.size,p.type,p.normalize,p.stride,p.offset),c>0&&(t.instancingExtension?t.instancingExtension.vertexAttribDivisorANGLE(p.index,1):d.vertexAttribDivisor(p.index,1)),p.buffer=r.getHandle(),!t.supported){for(var h=!1,g=0;g<t.buffers.length;++g){var m=t.buffers[g];if(m.buffer===p.buffer){h=!0;for(var v=!1,y=0;y<m.attributes.length;++y)m.attributes[y].name===i&&(v=!0,m.attributes[y]=p);v||m.attributes.push(p)}}h||t.buffers.push({buffer:p.buffer,attributes:[p]})}return!0},e.addAttributeMatrixWithDivisor=function(n,r,i,a,o,s,u,l,c){var f=e.addAttributeArrayWithDivisor(n,r,i,a,o,s,u,l,c,!0);if(!f)return f;for(var d=t.context,p=d.getAttribLocation(t.handleProgram,i),h=1;h<u;h++)d.enableVertexAttribArray(p+h),d.vertexAttribPointer(p+h,u,s,l,o,a+o*h/u),c>0&&(t.instancingExtension?t.instancingExtension.vertexAttribDivisorANGLE(p+h,1):d.vertexAttribDivisor(p+h,1));return!0},e.removeAttributeArray=function(n){if(!e.isReady()||0===t.handleProgram)return!1;if(!t.supported)for(var r=0;r<t.buffers.length;++r)for(var i=t.buffers[r],a=0;a<i.attributes.length;++a)if(i.attributes[a].name===n)return i.attributes.splice(a,1),i.attributes.length||t.buffers.splice(r,1),!0;return!0},e.setOpenGLRenderWindow=function(n){t.openGLRenderWindow!==n&&(e.releaseGraphicsResources(),t.openGLRenderWindow=n,t.context=null,n&&(t.context=t.openGLRenderWindow.getContext()))}}(e,t)}var Zg={newInstance:h.a.newInstance(Kg,"vtkOpenGLVertexArrayObject"),extend:Kg};var Jg={program:null,shaderSourceTime:null,VAO:null,attributeUpdateTime:null,CABO:null,primitiveType:0};function $g(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Jg,n),h.a.obj(e,t),t.shaderSourceTime={},h.a.obj(t.shaderSourceTime),t.attributeUpdateTime={},h.a.obj(t.attributeUpdateTime),h.a.setGet(e,t,["program","shaderSourceTime","VAO","attributeUpdateTime","CABO","primitiveType"]),t.program=qg.newInstance(),t.VAO=Zg.newInstance(),t.CABO=Fg.newInstance(),function(e,t){t.classHierarchy.push("vtkOpenGLHelper"),e.setOpenGLRenderWindow=function(e){t.program.setContext(e.getContext()),t.VAO.setOpenGLRenderWindow(e),t.CABO.setOpenGLRenderWindow(e)},e.releaseGraphicsResources=function(e){t.VAO.releaseGraphicsResources(),t.CABO.releaseGraphicsResources(),t.CABO.setElementCount(0)}}(e,t)}var em={newInstance:h.a.newInstance($g),extend:$g},tm=n(86),nm=n.n(tm),rm=n(44),im=n.n(rm);function am(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var om={Start:0,Points:0,Lines:1,Tris:2,TriStrips:3,TrisEdges:4,TriStripsEdges:5,End:6},sm=Wu.a.Representation,um=Wu.a.Shading,lm=cu.a.ScalarMode,cm=Xh.Filter,fm=Xh.Wrap,dm=h.a.vtkErrorMacro,pm={type:"StartEvent"},hm={type:"EndEvent"};var gm={context:null,VBOBuildTime:0,VBOBuildString:null,primitives:null,primTypes:null,shaderRebuildString:null,tmpMat4:null,ambientColor:[],diffuseColor:[],specularColor:[],lightColor:[],lightHalfAngle:[],lightDirection:[],lastHaveSeenDepthRequest:!1,haveSeenDepthRequest:!1};function mm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,gm,n),zh.extend(e,t,n),t.primitives=[],t.primTypes=om,t.tmpMat4=Ye.c.create();for(var r=om.Start;r<om.End;r++)t.primitives[r]=em.newInstance(),t.primitives[r].setPrimitiveType(r),t.primitives[r].set({lastLightComplexity:0,lastLightCount:0,lastSelectionPass:!1},!0);h.a.setGet(e,t,["context"]),t.VBOBuildTime={},h.a.obj(t.VBOBuildTime,{mtime:0}),function(e,t){t.classHierarchy.push("vtkOpenGLPolyDataMapper"),e.buildPass=function(n){n&&(t.openGLActor=e.getFirstAncestorOfType("vtkOpenGLActor"),t.openGLRenderer=t.openGLActor.getFirstAncestorOfType("vtkOpenGLRenderer"),t.openGLRenderWindow=t.openGLRenderer.getParent(),t.openGLCamera=t.openGLRenderer.getViewNodeFor(t.openGLRenderer.getRenderable().getActiveCamera()))},e.translucentPass=function(t){t&&e.render()},e.opaqueZBufferPass=function(n){n&&(t.haveSeenDepthRequest=!0,t.renderDepth=!0,e.render(),t.renderDepth=!1)},e.opaquePass=function(t){t&&e.render()},e.render=function(){var n=t.openGLRenderWindow.getContext();if(t.context!==n){t.context=n;for(var r=om.Start;r<om.End;r++)t.primitives[r].setOpenGLRenderWindow(t.openGLRenderWindow)}var i=t.openGLActor.getRenderable(),a=t.openGLRenderer.getRenderable();e.renderPiece(a,i)},e.buildShaders=function(n,r,i){e.getShaderTemplate(n,r,i);var a=t.renderable.getViewSpecificProperties().OpenGL,o=null;if(a&&(o=a.ShaderReplacements),o)for(var s=0;s<o.length;s++){var u=o[s];if(u.replaceFirst){var l=u.shaderType,c=n[l],f=qg.substitute(c,u.originalValue,u.replacementValue,u.replaceAll);n[l]=f.result}}if(e.replaceShaderValues(n,r,i),o)for(var d=0;d<o.length;d++){var p=o[d];if(!p.replaceFirst){var h=p.shaderType,g=n[h],m=qg.substitute(g,p.originalValue,p.replacementValue,p.replaceAll);n[h]=m.result}}},e.getShaderTemplate=function(e,n,r){var i=t.renderable.getViewSpecificProperties().OpenGL,a=nm.a;if(i){var o=i.VertexShaderCode;void 0!==o&&""!==o&&(a=o)}e.Vertex=a;var s=im.a;if(i){var u=i.FragmentShaderCode;void 0!==u&&""!==u&&(s=u)}e.Fragment=s;var l="";if(i){var c=i.GeometryShaderCode;void 0!==c&&(l=c)}e.Geometry=l},e.replaceShaderColor=function(e,n,r){var i=e.Vertex,a=e.Geometry,o=e.Fragment,s=t.lastBoundBO.getReferenceByName("lastLightComplexity"),u=["uniform float ambient;","uniform float diffuse;","uniform float specular;","uniform float opacityUniform; // the fragment opacity","uniform vec3 ambientColorUniform;","uniform vec3 diffuseColorUniform;"];s&&(u=u.concat(["uniform vec3 specularColorUniform;","uniform float specularPowerUniform;"]));var l=["vec3 ambientColor;","  vec3 diffuseColor;","  float opacity;"];s&&(l=l.concat(["  vec3 specularColor;","  float specularPower;"])),l=l.concat(["  ambientColor = ambientColorUniform;","  diffuseColor = diffuseColorUniform;","  opacity = opacityUniform;"]),s&&(l=l.concat(["  specularColor = specularColorUniform;","  specularPower = specularPowerUniform;"])),0===t.lastBoundBO.getCABO().getColorComponents()||t.drawingEdges||(u=u.concat(["varying vec4 vertexColorVSOutput;"]),i=qg.substitute(i,"//VTK::Color::Dec",["attribute vec4 scalarColor;","varying vec4 vertexColorVSOutput;"]).result,i=qg.substitute(i,"//VTK::Color::Impl",["vertexColorVSOutput =  scalarColor;"]).result,a=qg.substitute(a,"//VTK::Color::Dec",["in vec4 vertexColorVSOutput[];","out vec4 vertexColorGSOutput;"]).result,a=qg.substitute(a,"//VTK::Color::Impl",["vertexColorGSOutput = vertexColorVSOutput[i];"]).result),o=0===t.lastBoundBO.getCABO().getColorComponents()||t.drawingEdges?t.renderable.getInterpolateScalarsBeforeMapping()&&t.renderable.getColorCoordinates()&&!t.drawingEdges?qg.substitute(o,"//VTK::Color::Impl",l.concat(["  vec4 texColor = texture2D(texture1, tcoordVCVSOutput.st);","  diffuseColor = texColor.rgb;","  ambientColor = texColor.rgb;","  opacity = opacity*texColor.a;"])).result:qg.substitute(o,"//VTK::Color::Impl",l).result:qg.substitute(o,"//VTK::Color::Impl",l.concat(["  diffuseColor = vertexColorVSOutput.rgb;","  ambientColor = vertexColorVSOutput.rgb;","  opacity = opacity*vertexColorVSOutput.a;"])).result,o=qg.substitute(o,"//VTK::Color::Dec",u).result,e.Vertex=i,e.Geometry=a,e.Fragment=o},e.replaceShaderLight=function(e,n,r){var i=e.Fragment,a=t.lastBoundBO.getReferenceByName("lastLightComplexity"),o=t.lastBoundBO.getReferenceByName("lastLightCount"),s=[];switch(a){case 0:i=qg.substitute(i,"//VTK::Light::Impl",["  gl_FragData[0] = vec4(ambientColor * ambient + diffuseColor * diffuse, opacity);","  //VTK::Light::Impl"],!1).result;break;case 1:i=qg.substitute(i,"//VTK::Light::Impl",["  float df = max(0.0, normalVCVSOutput.z);","  float sf = pow(df, specularPower);","  vec3 diffuseL = df * diffuseColor;","  vec3 specularL = sf * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"],!1).result;break;case 2:for(var u=0;u<o;++u)s=s.concat(["uniform vec3 lightColor".concat(u,";"),"uniform vec3 lightDirectionVC".concat(u,"; // normalized"),"uniform vec3 lightHalfAngleVC".concat(u,"; // normalized")]);i=qg.substitute(i,"//VTK::Light::Dec",s).result,s=["vec3 diffuseL = vec3(0,0,0);","  vec3 specularL = vec3(0,0,0);","  float df;"];for(var l=0;l<o;++l)s=s.concat(["  df = max(0.0, dot(normalVCVSOutput, -lightDirectionVC".concat(l,"));"),"  diffuseL += ((df".concat("",") * lightColor").concat(l,");"),"  if (dot(normalVCVSOutput, lightDirectionVC".concat(l,") < 0.0)"),"    {","    float sf = pow( max(0.0, dot(lightHalfAngleVC".concat(l,",normalVCVSOutput)), specularPower);"),"    specularL += ((sf".concat("",") * lightColor").concat(l,");"),"    }"]);s=s.concat(["  diffuseL = diffuseL * diffuseColor;","  specularL = specularL * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"]),i=qg.substitute(i,"//VTK::Light::Impl",s,!1).result;break;case 3:for(var c=0;c<o;++c)s=s.concat(["uniform vec3 lightColor".concat(c,";"),"uniform vec3 lightDirectionVC".concat(c,"; // normalized"),"uniform vec3 lightHalfAngleVC".concat(c,"; // normalized"),"uniform vec3 lightPositionVC".concat(c,";"),"uniform vec3 lightAttenuation".concat(c,";"),"uniform float lightConeAngle".concat(c,";"),"uniform float lightExponent".concat(c,";"),"uniform int lightPositional".concat(c,";")]);i=qg.substitute(i,"//VTK::Light::Dec",s).result,s=["vec3 diffuseL = vec3(0,0,0);","  vec3 specularL = vec3(0,0,0);","  vec3 vertLightDirectionVC;","  float attenuation;","  float df;"];for(var f=0;f<o;++f)s=s.concat(["  attenuation = 1.0;","  if (lightPositional".concat(f," == 0)"),"    {","      vertLightDirectionVC = lightDirectionVC".concat(f,";"),"    }","  else","    {","    vertLightDirectionVC = vertexVC.xyz - lightPositionVC".concat(f,";"),"    float distanceVC = length(vertLightDirectionVC);","    vertLightDirectionVC = normalize(vertLightDirectionVC);","    attenuation = 1.0 /","      (lightAttenuation".concat(f,".x"),"       + lightAttenuation".concat(f,".y * distanceVC"),"       + lightAttenuation".concat(f,".z * distanceVC * distanceVC);"),"    // per OpenGL standard cone angle is 90 or less for a spot light","    if (lightConeAngle".concat(f," <= 90.0)"),"      {","      float coneDot = dot(vertLightDirectionVC, lightDirectionVC".concat(f,");"),"      // if inside the cone","      if (coneDot >= cos(radians(lightConeAngle".concat(f,")))"),"        {","        attenuation = attenuation * pow(coneDot, lightExponent".concat(f,");"),"        }","      else","        {","        attenuation = 0.0;","        }","      }","    }","    df = max(0.0, attenuation*dot(normalVCVSOutput, -vertLightDirectionVC));","    diffuseL += ((df".concat("",") * lightColor").concat(f,");"),"    if (dot(normalVCVSOutput, vertLightDirectionVC) < 0.0)","      {","      float sf = attenuation*pow( max(0.0, dot(lightHalfAngleVC".concat(f,",normalVCVSOutput)), specularPower);"),"    specularL += ((sf".concat("",") * lightColor").concat(f,");"),"    }"]);s=s.concat(["  diffuseL = diffuseL * diffuseColor;","  specularL = specularL * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"]),i=qg.substitute(i,"//VTK::Light::Impl",s,!1).result;break;default:dm("bad light complexity")}e.Fragment=i},e.replaceShaderNormal=function(n,r,i){if(t.lastBoundBO.getReferenceByName("lastLightComplexity")>0){var a=n.Vertex,o=n.Geometry,s=n.Fragment;t.lastBoundBO.getCABO().getNormalOffset()?(a=qg.substitute(a,"//VTK::Normal::Dec",["attribute vec3 normalMC;","uniform mat3 normalMatrix;","varying vec3 normalVCVSOutput;"]).result,a=qg.substitute(a,"//VTK::Normal::Impl",["normalVCVSOutput = normalMatrix * normalMC;"]).result,o=qg.substitute(o,"//VTK::Normal::Dec",["in vec3 normalVCVSOutput[];","out vec3 normalVCGSOutput;"]).result,o=qg.substitute(o,"//VTK::Normal::Impl",["normalVCGSOutput = normalVCVSOutput[i];"]).result,s=qg.substitute(s,"//VTK::Normal::Dec",["varying vec3 normalVCVSOutput;"]).result,s=qg.substitute(s,"//VTK::Normal::Impl",["vec3 normalVCVSOutput = normalize(normalVCVSOutput);","  if (gl_FrontFacing == false) { normalVCVSOutput = -normalVCVSOutput; }"]).result):t.haveCellNormals?(s=qg.substitute(s,"//VTK::Normal::Dec",["uniform mat3 normalMatrix;","uniform samplerBuffer textureN;"]).result,s=qg.substitute(s,"//VTK::Normal::Impl",["vec3 normalVCVSOutput = normalize(normalMatrix *","    texelFetchBuffer(textureN, gl_PrimitiveID + PrimitiveIDOffset).xyz);","  if (gl_FrontFacing == false) { normalVCVSOutput = -normalVCVSOutput; }"]).result):e.getOpenGLMode(i.getProperty().getRepresentation(),t.lastBoundBO.getPrimitiveType())===t.context.LINES?(s=qg.substitute(s,"//VTK::UniformFlow::Impl",["  vec3 fdx = vec3(dFdx(vertexVC.x),dFdx(vertexVC.y),dFdx(vertexVC.z));","  vec3 fdy = vec3(dFdy(vertexVC.x),dFdy(vertexVC.y),dFdy(vertexVC.z));","  //VTK::UniformFlow::Impl"]).result,s=qg.substitute(s,"//VTK::Normal::Impl",["vec3 normalVCVSOutput;","  fdx = normalize(fdx);","  fdy = normalize(fdy);","  if (abs(fdx.x) > 0.0)","    { normalVCVSOutput = normalize(cross(vec3(fdx.y, -fdx.x, 0.0), fdx)); }","  else { normalVCVSOutput = normalize(cross(vec3(fdy.y, -fdy.x, 0.0), fdy));}"]).result):(s=qg.substitute(s,"//VTK::Normal::Dec",["uniform int cameraParallel;"]).result,s=qg.substitute(s,"//VTK::UniformFlow::Impl",["  vec3 fdx = dFdx(vertexVC.xyz);","  vec3 fdy = dFdy(vertexVC.xyz);","  //VTK::UniformFlow::Impl"]).result,s=qg.substitute(s,"//VTK::Normal::Impl",["  fdx = normalize(fdx);","  fdy = normalize(fdy);","  vec3 normalVCVSOutput = normalize(cross(fdx,fdy));","  if (cameraParallel == 1 && normalVCVSOutput.z < 0.0) { normalVCVSOutput = -1.0*normalVCVSOutput; }","  if (cameraParallel == 0 && dot(normalVCVSOutput,vertexVC.xyz) > 0.0) { normalVCVSOutput = -1.0*normalVCVSOutput; }"]).result),n.Vertex=a,n.Geometry=o,n.Fragment=s}},e.replaceShaderPositionVC=function(e,n,r){var i=e.Vertex,a=e.Geometry,o=e.Fragment;r.getProperty().getRepresentation()!==sm.POINTS&&t.lastBoundBO.getPrimitiveType()!==om.Points||(i=qg.substitute(i,"//VTK::PositionVC::Impl",["//VTK::PositionVC::Impl","  gl_PointSize = ".concat(r.getProperty().getPointSize(),".0;")],!1).result),t.lastBoundBO.getReferenceByName("lastLightComplexity")>0?(i=qg.substitute(i,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,i=qg.substitute(i,"//VTK::PositionVC::Impl",["vertexVCVSOutput = MCVCMatrix * vertexMC;","  gl_Position = MCDCMatrix * vertexMC;"]).result,i=qg.substitute(i,"//VTK::Camera::Dec",["uniform mat4 MCDCMatrix;","uniform mat4 MCVCMatrix;"]).result,a=qg.substitute(a,"//VTK::PositionVC::Dec",["in vec4 vertexVCVSOutput[];","out vec4 vertexVCGSOutput;"]).result,a=qg.substitute(a,"//VTK::PositionVC::Impl",["vertexVCGSOutput = vertexVCVSOutput[i];"]).result,o=qg.substitute(o,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,o=qg.substitute(o,"//VTK::PositionVC::Impl",["vec4 vertexVC = vertexVCVSOutput;"]).result):(i=qg.substitute(i,"//VTK::Camera::Dec",["uniform mat4 MCDCMatrix;"]).result,i=qg.substitute(i,"//VTK::PositionVC::Impl",["  gl_Position = MCDCMatrix * vertexMC;"]).result),e.Vertex=i,e.Geometry=a,e.Fragment=o},e.replaceShaderTCoord=function(e,n,r){if(t.lastBoundBO.getCABO().getTCoordOffset()){var i=e.Vertex,a=e.Geometry,o=e.Fragment;if(t.drawingEdges)return;i=qg.substitute(i,"//VTK::TCoord::Impl","tcoordVCVSOutput = tcoordMC;").result;var s=t.openGLActor.getActiveTextures(),u=2,l=2;if(s&&s.length>0&&(u=s[0].getComponents(),s[0].getTarget()===t.context.TEXTURE_CUBE_MAP&&(l=3)),t.renderable.getColorTextureMap()&&(u=t.renderable.getColorTextureMap().getPointData().getScalars().getNumberOfComponents(),l=2),2===l){if(i=qg.substitute(i,"//VTK::TCoord::Dec","attribute vec2 tcoordMC; varying vec2 tcoordVCVSOutput;").result,a=qg.substitute(a,"//VTK::TCoord::Dec",["in vec2 tcoordVCVSOutput[];","out vec2 tcoordVCGSOutput;"]).result,a=qg.substitute(a,"//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];").result,o=qg.substitute(o,"//VTK::TCoord::Dec",["varying vec2 tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,s&&s.length>=1)switch(u){case 1:o=qg.substitute(o,"//VTK::TCoord::Impl",["vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","gl_FragData[0] = clamp(gl_FragData[0],0.0,1.0)*","  vec4(tcolor.r,tcolor.r,tcolor.r,1.0);"]).result;break;case 2:o=qg.substitute(o,"//VTK::TCoord::Impl",["vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","gl_FragData[0] = clamp(gl_FragData[0],0.0,1.0)*","  vec4(tcolor.r,tcolor.r,tcolor.r,tcolor.g);"]).result;break;default:o=qg.substitute(o,"//VTK::TCoord::Impl","gl_FragData[0] = clamp(gl_FragData[0],0.0,1.0)*texture2D(texture1, tcoordVCVSOutput.st);").result}}else switch(i=qg.substitute(i,"//VTK::TCoord::Dec","attribute vec3 tcoordMC; varying vec3 tcoordVCVSOutput;").result,a=qg.substitute(a,"//VTK::TCoord::Dec",["in vec3 tcoordVCVSOutput[];","out vec3 tcoordVCGSOutput;"]).result,a=qg.substitute(a,"//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];").result,o=qg.substitute(o,"//VTK::TCoord::Dec",["varying vec3 tcoordVCVSOutput;","uniform samplerCube texture1;"]).result,u){case 1:o=qg.substitute(o,"//VTK::TCoord::Impl",["vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","gl_FragData[0] = clamp(gl_FragData[0],0.0,1.0)*","  vec4(tcolor.r,tcolor.r,tcolor.r,1.0);"]).result;break;case 2:o=qg.substitute(o,"//VTK::TCoord::Impl",["vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","gl_FragData[0] = clamp(gl_FragData[0],0.0,1.0)*","  vec4(tcolor.r,tcolor.r,tcolor.r,tcolor.g);"]).result;break;default:o=qg.substitute(o,"//VTK::TCoord::Impl","gl_FragData[0] = clamp(gl_FragData[0],0.0,1.0)*textureCube(texture1, tcoordVCVSOutput);").result}e.Vertex=i,e.Geometry=a,e.Fragment=o}},e.replaceShaderClip=function(e,n,r){var i=e.Vertex,a=e.Fragment;if(t.renderable.getNumberOfClippingPlanes()){var o=t.renderable.getNumberOfClippingPlanes();o>6&&(h.a.vtkErrorMacro("OpenGL has a limit of 6 clipping planes"),o=6),i=qg.substitute(i,"//VTK::Clip::Dec",["uniform int numClipPlanes;","uniform vec4 clipPlanes[6];","varying float clipDistancesVSOutput[6];"]).result,i=qg.substitute(i,"//VTK::Clip::Impl",["for (int planeNum = 0; planeNum < 6; planeNum++)","    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    clipDistancesVSOutput[planeNum] = dot(clipPlanes[planeNum], vertexMC);","    }"]).result,a=qg.substitute(a,"//VTK::Clip::Dec",["uniform int numClipPlanes;","varying float clipDistancesVSOutput[6];"]).result,a=qg.substitute(a,"//VTK::Clip::Impl",["for (int planeNum = 0; planeNum < 6; planeNum++)","    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    if (clipDistancesVSOutput[planeNum] < 0.0) discard;","    }"]).result}e.Vertex=i,e.Fragment=a},e.getCoincidentParameters=function(e,n){var r=null,i=n.getProperty();if(t.renderable.getResolveCoincidentTopology()||i.getEdgeVisibility()&&i.getRepresentation()===sm.SURFACE){var a=t.lastBoundBO.getPrimitiveType();a===om.Points||i.getRepresentation()===sm.POINTS?r=t.renderable.getCoincidentTopologyPointOffsetParameter():a===om.Lines||i.getRepresentation()===sm.WIREFRAME?r=t.renderable.getCoincidentTopologyLineOffsetParameters():a!==om.Tris&&a!==om.TriStrips||(r=t.renderable.getCoincidentTopologyPolygonOffsetParameters()),a!==om.TrisEdges&&a!==om.TriStripsEdges||((r=t.renderable.getCoincidentTopologyPolygonOffsetParameters()).factor/=2,r.offset/=2)}return r},e.replaceShaderCoincidentOffset=function(n,r,i){var a=e.getCoincidentParameters(r,i);if(a&&(0!==a.factor||0!==a.offset)){var o=n.Fragment;o=qg.substitute(o,"//VTK::Coincident::Dec",["uniform float cfactor;","uniform float coffset;"]).result,t.context.getExtension("EXT_frag_depth")&&(0!==a.factor?(o=qg.substitute(o,"//VTK::UniformFlow::Impl",["float cscale = length(vec2(dFdx(gl_FragCoord.z),dFdy(gl_FragCoord.z)));","//VTK::UniformFlow::Impl"],!1).result,o=qg.substitute(o,"//VTK::Depth::Impl","gl_FragDepthEXT = gl_FragCoord.z + cfactor*cscale + 0.000016*coffset;").result):o=qg.substitute(o,"//VTK::Depth::Impl","gl_FragDepthEXT = gl_FragCoord.z + 0.000016*coffset;").result),t.openGLRenderWindow.getWebgl2()&&(0!==a.factor?(o=qg.substitute(o,"//VTK::UniformFlow::Impl",["float cscale = length(vec2(dFdx(gl_FragCoord.z),dFdy(gl_FragCoord.z)));","//VTK::UniformFlow::Impl"],!1).result,o=qg.substitute(o,"//VTK::Depth::Impl","gl_FragDepth = gl_FragCoord.z + cfactor*cscale + 0.000016*coffset;").result):o=qg.substitute(o,"//VTK::Depth::Impl","gl_FragDepth = gl_FragCoord.z + 0.000016*coffset;").result),n.Fragment=o}},e.replaceShaderPicking=function(e,t,n){var r=e.Fragment;r=qg.substitute(r,"//VTK::Picking::Dec",["uniform vec3 mapperIndex;","uniform int picking;"]).result,r=qg.substitute(r,"//VTK::Picking::Impl","  gl_FragData[0] = picking != 0 ? vec4(mapperIndex,1.0) : gl_FragData[0];").result,e.Fragment=r},e.replaceShaderValues=function(n,r,i){if(e.replaceShaderColor(n,r,i),e.replaceShaderNormal(n,r,i),e.replaceShaderLight(n,r,i),e.replaceShaderTCoord(n,r,i),e.replaceShaderPicking(n,r,i),e.replaceShaderClip(n,r,i),e.replaceShaderCoincidentOffset(n,r,i),e.replaceShaderPositionVC(n,r,i),t.haveSeenDepthRequest){var a=n.Fragment;a=qg.substitute(a,"//VTK::ZBuffer::Dec","uniform int depthRequest;").result,a=qg.substitute(a,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float iz = floor(gl_FragCoord.z*65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result,n.Fragment=a}},e.getNeedToRebuildShaders=function(n,r,i){var a=0,o=0,s=n.getPrimitiveType(),u=t.currentInput,l=!1,c=u.getPointData().getNormals(),f=u.getCellData().getNormals(),d=i.getProperty().getInterpolation()===um.FLAT,p=i.getProperty().getRepresentation(),h=e.getOpenGLMode(p,s);if(h===t.context.TRIANGLES?l=!0:f&&!c?l=!0:!d&&c?l=!0:d||h!==t.context.LINES||(l=!0),i.getProperty().getLighting()&&l){a=0;for(var g=r.getLightsByReference(),m=0;m<g.length;++m){var v=g[m];v.getSwitch()>0&&(o++,0===a&&(a=1)),1===a&&(o>1||1!==v.getIntensity()||!v.lightTypeIsHeadLight())&&(a=2),a<3&&v.getPositional()&&(a=3)}}var y=!1,b=t.lastBoundBO.getReferenceByName("lastLightComplexity"),M=t.lastBoundBO.getReferenceByName("lastLightCount");return b===a&&M===o||(t.lastBoundBO.set({lastLightComplexity:a},!0),t.lastBoundBO.set({lastLightCount:o},!0),y=!0),!!(t.lastHaveSeenDepthRequest!==t.haveSeenDepthRequest||0===n.getProgram()||n.getShaderSourceTime().getMTime()<e.getMTime()||n.getShaderSourceTime().getMTime()<i.getMTime()||n.getShaderSourceTime().getMTime()<t.renderable.getMTime()||n.getShaderSourceTime().getMTime()<t.currentInput.getMTime()||y)&&(t.lastHaveSeenDepthRequest=t.haveSeenDepthRequest,!0)},e.updateShaders=function(n,r,i){if(t.lastBoundBO=n,e.getNeedToRebuildShaders(n,r,i)){var a={Vertex:null,Fragment:null,Geometry:null};e.buildShaders(a,r,i);var o=t.openGLRenderWindow.getShaderCache().readyShaderProgramArray(a.Vertex,a.Fragment,a.Geometry);o!==n.getProgram()&&(n.setProgram(o),n.getVAO().releaseGraphicsResources()),n.getShaderSourceTime().modified()}else t.openGLRenderWindow.getShaderCache().readyShaderProgram(n.getProgram());n.getVAO().bind(),e.setMapperShaderParameters(n,r,i),e.setPropertyShaderParameters(n,r,i),e.setCameraShaderParameters(n,r,i),e.setLightingShaderParameters(n,r,i);var s=t.renderable.getViewSpecificProperties().ShadersCallbacks;s&&s.forEach(function(e){e.callback(e.userData,n,r,i)})},e.setMapperShaderParameters=function(n,r,i){if(n.getProgram().isUniformUsed("PrimitiveIDOffset")&&n.getProgram().setUniformi("PrimitiveIDOffset",t.primitiveIDOffset),n.getCABO().getElementCount()&&(t.VBOBuildTime.getMTime()>n.getAttributeUpdateTime().getMTime()||n.getShaderSourceTime().getMTime()>n.getAttributeUpdateTime().getMTime())){var a=t.lastBoundBO.getReferenceByName("lastLightComplexity");n.getProgram().isAttributeUsed("vertexMC")&&(n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"vertexMC",n.getCABO().getVertexOffset(),n.getCABO().getStride(),t.context.FLOAT,3,!1)||dm("Error setting vertexMC in shader VAO.")),n.getProgram().isAttributeUsed("normalMC")&&n.getCABO().getNormalOffset()&&a>0?n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"normalMC",n.getCABO().getNormalOffset(),n.getCABO().getStride(),t.context.FLOAT,3,!1)||dm("Error setting normalMC in shader VAO."):n.getVAO().removeAttributeArray("normalMC"),t.renderable.getCustomShaderAttributes().forEach(function(e,r){n.getProgram().isAttributeUsed("".concat(e,"MC"))&&(n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"".concat(e,"MC"),n.getCABO().getCustomData()[r].offset,n.getCABO().getStride(),t.context.FLOAT,n.getCABO().getCustomData()[r].components,!1)||dm("Error setting ".concat(e,"MC in shader VAO.")))}),n.getProgram().isAttributeUsed("tcoordMC")&&n.getCABO().getTCoordOffset()?n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"tcoordMC",n.getCABO().getTCoordOffset(),n.getCABO().getStride(),t.context.FLOAT,n.getCABO().getTCoordComponents(),!1)||dm("Error setting tcoordMC in shader VAO."):n.getVAO().removeAttributeArray("tcoordMC"),n.getProgram().isAttributeUsed("scalarColor")&&n.getCABO().getColorComponents()?n.getVAO().addAttributeArray(n.getProgram(),n.getCABO().getColorBO(),"scalarColor",n.getCABO().getColorOffset(),n.getCABO().getColorBOStride(),t.context.UNSIGNED_BYTE,4,!0)||dm("Error setting scalarColor in shader VAO."):n.getVAO().removeAttributeArray("scalarColor"),n.getAttributeUpdateTime().modified()}if(t.renderable.getNumberOfClippingPlanes()){var o=t.renderable.getNumberOfClippingPlanes();o>6&&(h.a.vtkErrorMacro("OpenGL has a limit of 6 clipping planes"),o=6);for(var s=[],u=0;u<o;u++){var l=[];t.renderable.getClippingPlaneInDataCoords(i.getMatrix(),u,l);for(var c=0;c<4;c++)s.push(l[c])}n.getProgram().setUniformi("numClipPlanes",o),n.getProgram().setUniform4fv("clipPlanes",6,s)}t.internalColorTexture&&n.getProgram().isUniformUsed("texture1")&&n.getProgram().setUniformi("texture1",t.internalColorTexture.getTextureUnit());var f=t.openGLActor.getActiveTextures();if(f)for(var d=0;d<f.length;++d){var p=f[d].getTextureUnit(),g="texture".concat(p+1);n.getProgram().isUniformUsed(g)&&n.getProgram().setUniformi(g,p)}if(t.haveSeenDepthRequest&&n.getProgram().setUniformi("depthRequest",t.renderDepth?1:0),n.getProgram().isUniformUsed("coffset")){var m=e.getCoincidentParameters(r,i);n.getProgram().setUniformf("coffset",m.offset),n.getProgram().isUniformUsed("cfactor")&&n.getProgram().setUniformf("cfactor",m.factor)}var v=t.openGLRenderer.getSelector();n.getProgram().setUniform3fArray("mapperIndex",v?v.getPropColorValue():[0,0,0]),n.getProgram().setUniformi("picking",v?v.getCurrentPass()+1:0)},e.setLightingShaderParameters=function(e,n,r){var i=t.lastBoundBO.getReferenceByName("lastLightComplexity");if(!(i<2)){for(var a=e.getProgram(),o=0,s=n.getLightsByReference(),u=0;u<s.length;++u){var l=s[u];if(l.getSwitch()>0){var c=l.getColorByReference(),d=l.getIntensity();t.lightColor[0]=c[0]*d,t.lightColor[1]=c[1]*d,t.lightColor[2]=c[2]*d;var p=l.getDirection(),h=n.getActiveCamera().getViewMatrix(),g=am(p);l.lightTypeIsSceneLight()&&(g[0]=h[0]*p[0]+h[1]*p[1]+h[2]*p[2],g[1]=h[4]*p[0]+h[5]*p[1]+h[6]*p[2],g[2]=h[8]*p[0]+h[9]*p[1]+h[10]*p[2],f.normalize(g)),t.lightDirection[0]=g[0],t.lightDirection[1]=g[1],t.lightDirection[2]=g[2],t.lightHalfAngle[0]=-t.lightDirection[0],t.lightHalfAngle[1]=-t.lightDirection[1],t.lightHalfAngle[2]=1-t.lightDirection[2],f.normalize(t.lightDirection),a.setUniform3fArray("lightColor".concat(o),t.lightColor),a.setUniform3fArray("lightDirectionVC".concat(o),t.lightDirection),a.setUniform3fArray("lightHalfAngleVC".concat(o),t.lightHalfAngle),o++}}if(!(i<3)){var m=n.getActiveCamera().getViewMatrix();Ye.c.transpose(m,m),o=0;for(var v=0;v<s.length;++v){var y=s[v];if(y.getSwitch()>0){var b=y.getTransformedPosition(),M=Ye.e.fromValues(b[0],b[1],b[2]);Ye.e.transformMat4(M,M,m),a.setUniform3fArray("lightAttenuation".concat(o),y.getAttenuationValuesByReference()),a.setUniformi("lightPositional".concat(o),y.getPositional()),a.setUniformf("lightExponent".concat(o),y.getExponent()),a.setUniformf("lightConeAngle".concat(o),y.getConeAngle()),a.setUniform3fArray("lightPositionVC".concat(o),[M[0],M[1],M[2]]),o++}}}}},e.setCameraShaderParameters=function(e,n,r){var i=e.getProgram(),a=t.openGLCamera.getKeyMatrices(n),o=n.getActiveCamera(),s=t.openGLCamera.getKeyMatrixTime().getMTime();if(i.getLastCameraMTime()!==s&&(r.getIsIdentity()&&(i.setUniformMatrix("MCDCMatrix",a.wcdc),i.isUniformUsed("MCVCMatrix")&&i.setUniformMatrix("MCVCMatrix",a.wcvc),i.isUniformUsed("normalMatrix")&&i.setUniformMatrix3x3("normalMatrix",a.normalMatrix)),i.isUniformUsed("cameraParallel")&&i.setUniformi("cameraParallel",o.getParallelProjection()),i.setLastCameraMTime(s)),!r.getIsIdentity()){var u=t.openGLActor.getKeyMatrices();if(i.isUniformUsed("normalMatrix")){var l=Ye.b.create();Ye.b.multiply(l,a.normalMatrix,u.normalMatrix),i.setUniformMatrix3x3("normalMatrix",l)}Ye.c.identity(t.tmpMat4),Ye.c.multiply(t.tmpMat4,a.wcdc,u.mcwc),i.setUniformMatrix("MCDCMatrix",t.tmpMat4),i.isUniformUsed("MCVCMatrix")&&(Ye.c.multiply(t.tmpMat4,a.wcvc,u.mcwc),i.setUniformMatrix("MCVCMatrix",t.tmpMat4)),i.setLastCameraMTime(0)}},e.setPropertyShaderParameters=function(e,n,r){var i=e.getProgram(),a=r.getProperty(),o=a.getOpacity();i.setUniformf("opacityUniform",o);var s=t.drawingEdges?a.getEdgeColorByReference():a.getAmbientColorByReference();i.setUniform3fArray("ambientColorUniform",s),i.setUniformf("ambient",a.getAmbient());var u=t.drawingEdges?a.getEdgeColorByReference():a.getDiffuseColorByReference();if(i.setUniform3fArray("diffuseColorUniform",u),i.setUniformf("diffuse",a.getDiffuse()),!(t.lastBoundBO.getReferenceByName("lastLightComplexity")<1)){var l=a.getSpecularColorByReference();i.setUniform3fArray("specularColorUniform",l),i.setUniformf("specular",a.getSpecular()),i.setUniformf("specularPowerUniform",a.getSpecularPower())}},e.renderPieceStart=function(n,r){t.primitiveIDOffset=0,t.openGLRenderer.getSelector()&&(t.openGLRenderer.getSelector().getCurrentPass(),t.openGLRenderer.getSelector().renderProp(r)),e.updateBufferObjects(n,r),t.renderable.getColorTextureMap()&&t.internalColorTexture.activate(),t.lastBoundBO=null},e.renderPieceDraw=function(n,r){for(var i=r.getProperty().getRepresentation(),a=t.context,o=r.getProperty().getEdgeVisibility()&&i===sm.SURFACE,s=om.Start;s<om.End;s++){var u=t.primitives[s].getCABO();if(u.getElementCount()){t.drawingEdges=o&&(s===om.TrisEdges||s===om.TriStripsEdges),e.updateShaders(t.primitives[s],n,r);var l=e.getOpenGLMode(i,s);a.drawArrays(l,0,u.getElementCount());var c=(l===a.POINTS?1:0)||(l===a.LINES?2:3);t.primitiveIDOffset+=u.getElementCount()/c}}},e.getOpenGLMode=function(e,n){return e===sm.POINTS||n===om.Points?t.context.POINTS:e===sm.WIREFRAME||n===om.Lines||n===om.TrisEdges||n===om.TriStripsEdges?t.context.LINES:t.context.TRIANGLES},e.renderPieceFinish=function(e,n){t.LastBoundBO&&t.LastBoundBO.getVAO().release(),t.renderable.getColorTextureMap()&&t.internalColorTexture.deactivate()},e.renderPiece=function(n,r){if(e.invokeEvent(pm),t.renderable.getStatic()||t.renderable.update(),t.currentInput=t.renderable.getInputData(),e.invokeEvent(hm),t.currentInput){if(t.currentInput.getPoints&&t.currentInput.getPoints().getNumberOfValues()){var i=t.context,a=r.getProperty().getBackfaceCulling(),o=r.getProperty().getFrontfaceCulling();a||o?o?(t.openGLRenderWindow.enableCullFace(),i.cullFace(i.FRONT)):(t.openGLRenderWindow.enableCullFace(),i.cullFace(i.BACK)):t.openGLRenderWindow.disableCullFace(),e.renderPieceStart(n,r),e.renderPieceDraw(n,r),e.renderPieceFinish(n,r)}}else dm("No input!")},e.computeBounds=function(n,r){e.getInput()?t.bounds=e.getInput().getBounds():f.uninitializeBounds(t.bounds)},e.updateBufferObjects=function(t,n){e.getNeedToRebuildBufferObjects(t,n)&&e.buildBufferObjects(t,n)},e.getNeedToRebuildBufferObjects=function(n,r){var i=t.VBOBuildTime.getMTime();return i<e.getMTime()||i<t.renderable.getMTime()||i<r.getMTime()||i<t.currentInput.getMTime()},e.buildBufferObjects=function(e,n){var r=t.currentInput;if(null!==r){t.renderable.mapScalars(r,1);var i=t.renderable.getColorMapColors();t.haveCellScalars=!1;var a=t.renderable.getScalarMode();t.renderable.getScalarVisibility()&&(a!==lm.USE_CELL_DATA&&a!==lm.USE_CELL_FIELD_DATA&&a!==lm.USE_FIELD_DATA&&r.getPointData().getScalars()||a===lm.USE_POINT_FIELD_DATA||!i||(t.haveCellScalars=!0));var o=n.getProperty().getInterpolation()!==um.FLAT?r.getPointData().getNormals():null;null===o&&r.getCellData().getNormals()&&(t.haveCellNormals=!0,o=r.getCellData().getNormals());var s=n.getProperty().getRepresentation(),u=r.getPointData().getTCoords();if(t.openGLActor.getActiveTextures()||(u=null),t.renderable.getColorCoordinates()){u=t.renderable.getColorCoordinates(),t.internalColorTexture||(t.internalColorTexture=Xh.newInstance());var l=t.internalColorTexture;l.setMinificationFilter(cm.NEAREST),l.setMagnificationFilter(cm.NEAREST),l.setWrapS(fm.CLAMP_TO_EDGE),l.setWrapT(fm.CLAMP_TO_EDGE),l.setOpenGLRenderWindow(t.openGLRenderWindow);var c=t.renderable.getColorTextureMap(),f=c.getExtent(),d=c.getPointData().getScalars();l.create2DFromRaw(f[1]-f[0]+1,f[3]-f[2]+1,d.getNumberOfComponents(),d.getDataType(),d.getData()),l.activate(),l.sendParameters(),l.deactivate()}var p="".concat(r.getMTime(),"A").concat(s,"B").concat(r.getMTime())+"C".concat(o?o.getMTime():1,"D").concat(i?i.getMTime():1)+"E".concat(n.getProperty().getEdgeVisibility())+"F".concat(u?u.getMTime():1);if(t.VBOBuildString!==p){var h=r.getPoints(),g={points:h,normals:o,tcoords:u,colors:i,cellOffset:0,haveCellScalars:t.haveCellScalars,haveCellNormals:t.haveCellNormals,customAttributes:t.renderable.getCustomShaderAttributes().map(function(e){return r.getPointData().getArrayByName(e)})};g.cellOffset+=t.primitives[om.Points].getCABO().createVBO(r.getVerts(),"verts",s,g),g.cellOffset+=t.primitives[om.Lines].getCABO().createVBO(r.getLines(),"lines",s,g),g.cellOffset+=t.primitives[om.Tris].getCABO().createVBO(r.getPolys(),"polys",s,g),g.cellOffset+=t.primitives[om.TriStrips].getCABO().createVBO(r.getStrips(),"strips",s,g),n.getProperty().getEdgeVisibility()&&s===sm.SURFACE?(t.primitives[om.TrisEdges].getCABO().createVBO(r.getPolys(),"polys",sm.WIREFRAME,{points:h,normals:o,tcoords:null,colors:null,cellOffset:0,haveCellScalars:!1,haveCellNormals:!1}),t.primitives[om.TriStripsEdges].getCABO().createVBO(r.getStrips(),"strips",sm.WIREFRAME,{points:h,normals:o,tcoords:null,colors:null,cellOffset:0,haveCellScalars:!1,haveCellNormals:!1})):(t.primitives[om.TrisEdges].releaseGraphicsResources(t.openGLRenderWindow),t.primitives[om.TriStripsEdges].releaseGraphicsResources(t.openGLRenderWindow)),t.VBOBuildTime.modified(),t.VBOBuildString=p}}}}(e,t)}var vm={newInstance:h.a.newInstance(mm,"vtkOpenGLPolyDataMapper"),extend:mm},ym=h.a.vtkErrorMacro,bm=Wu.a.Representation,Mm=Tg.ObjectType,xm=Pg.PassTypes,wm={type:"StartEvent"},Am={type:"EndEvent"};var Tm={normalMatrix:null,mcdcMatrix:null,mcwcMatrix:null};function Cm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Tm,n),vm.extend(e,t,n),t.tmpMat3=Ye.b.create(),t.normalMatrix=Ye.b.create(),t.mcdcMatrix=Ye.c.create(),t.mcvcMatrix=Ye.c.create(),t.tmpColor=[],t.glyphBOBuildTime={},h.a.obj(t.glyphBOBuildTime,{mtime:0}),function(e,t){t.classHierarchy.push("vtkOpenGLGlyph3DMapper");var n=Object.assign({},e);e.renderPiece=function(n,r){if(e.invokeEvent(wm),t.renderable.getStatic()||t.renderable.update(),t.currentInput=t.renderable.getInputData(1),e.invokeEvent(Am),t.currentInput){if(t.currentInput.getPoints&&t.currentInput.getPoints().getNumberOfValues()){var i=t.context;t.openGLRenderWindow.getWebgl2()?(t.hardwareSupport=!0,t.extension=null):t.extension||(t.extension=t.context.getExtension("ANGLE_instanced_arrays"),t.hardwareSupport=!!t.extension);var a=r.getProperty().getBackfaceCulling(),o=r.getProperty().getFrontfaceCulling();a||o?o?(t.openGLRenderWindow.enableCullFace(),i.cullFace(i.FRONT)):(t.openGLRenderWindow.enableCullFace(),i.cullFace(i.BACK)):t.openGLRenderWindow.disableCullFace(),e.renderPieceStart(n,r),e.renderPieceDraw(n,r),e.renderPieceFinish(n,r)}}else ym("No input!")},e.multiply4x4WithOffset=function(e,t,n,r){var i=t[0],a=t[1],o=t[2],s=t[3],u=t[4],l=t[5],c=t[6],f=t[7],d=t[8],p=t[9],h=t[10],g=t[11],m=t[12],v=t[13],y=t[14],b=t[15],M=n[r],x=n[r+1],w=n[r+2],A=n[r+3];e[0]=M*i+x*u+w*d+A*m,e[1]=M*a+x*l+w*p+A*v,e[2]=M*o+x*c+w*h+A*y,e[3]=M*s+x*f+w*g+A*b,M=n[r+4],x=n[r+5],w=n[r+6],A=n[r+7],e[4]=M*i+x*u+w*d+A*m,e[5]=M*a+x*l+w*p+A*v,e[6]=M*o+x*c+w*h+A*y,e[7]=M*s+x*f+w*g+A*b,M=n[r+8],x=n[r+9],w=n[r+10],A=n[r+11],e[8]=M*i+x*u+w*d+A*m,e[9]=M*a+x*l+w*p+A*v,e[10]=M*o+x*c+w*h+A*y,e[11]=M*s+x*f+w*g+A*b,M=n[r+12],x=n[r+13],w=n[r+14],A=n[r+15],e[12]=M*i+x*u+w*d+A*m,e[13]=M*a+x*l+w*p+A*v,e[14]=M*o+x*c+w*h+A*y,e[15]=M*s+x*f+w*g+A*b},e.replaceShaderNormal=function(e,r,i){if(t.hardwareSupport&&t.lastBoundBO.getReferenceByName("lastLightComplexity")>0){var a=e.Vertex;t.lastBoundBO.getCABO().getNormalOffset()&&(a=qg.substitute(a,"//VTK::Normal::Dec",["attribute vec3 normalMC;","attribute mat3 gNormal;","uniform mat3 normalMatrix;","varying vec3 normalVCVSOutput;"]).result,a=qg.substitute(a,"//VTK::Normal::Impl",["normalVCVSOutput = normalMatrix * gNormal * normalMC;"]).result),e.Vertex=a}n.replaceShaderNormal(e,r,i)},e.replaceShaderColor=function(e,r,i){if(t.hardwareSupport&&t.renderable.getColorArray()){var a=e.Vertex,o=e.Geometry,s=e.Fragment,u=t.lastBoundBO.getReferenceByName("lastLightComplexity"),l=["uniform float ambient;","uniform float diffuse;","uniform float specular;","uniform float opacityUniform; // the fragment opacity"];u&&(l=l.concat(["uniform vec3 specularColorUniform;","uniform float specularPowerUniform;"]));var c=["vec3 ambientColor;","  vec3 diffuseColor;","  float opacity;"];u&&(c=c.concat(["  vec3 specularColor;","  float specularPower;"])),c=c.concat(["  opacity = opacityUniform;"]),u&&(c=c.concat(["  specularColor = specularColorUniform;","  specularPower = specularPowerUniform;"])),t.drawingEdges||(l=l.concat(["varying vec4 vertexColorVSOutput;"]),a=qg.substitute(a,"//VTK::Color::Dec",["attribute vec4 gColor;","varying vec4 vertexColorVSOutput;"]).result,a=qg.substitute(a,"//VTK::Color::Impl",["vertexColorVSOutput = gColor;"]).result,o=qg.substitute(o,"//VTK::Color::Dec",["in vec4 vertexColorVSOutput[];","out vec4 vertexColorGSOutput;"]).result,o=qg.substitute(o,"//VTK::Color::Impl",["vertexColorGSOutput = vertexColorVSOutput[i];"]).result,c=c.concat(["  diffuseColor = vertexColorVSOutput.rgb;","  ambientColor = vertexColorVSOutput.rgb;","  opacity = opacity*vertexColorVSOutput.a;"])),s=qg.substitute(s,"//VTK::Color::Impl",c).result,s=qg.substitute(s,"//VTK::Color::Dec",l).result,e.Vertex=a,e.Geometry=o,e.Fragment=s}n.replaceShaderColor(e,r,i)},e.replaceShaderPositionVC=function(e,r,i){if(t.hardwareSupport){var a=e.Vertex;t.lastBoundBO.getReferenceByName("lastLightComplexity")>0?(a=qg.substitute(a,"//VTK::PositionVC::Impl",["vec4 gVertexMC = gMatrix * vertexMC;","vertexVCVSOutput = MCVCMatrix * gVertexMC;","  gl_Position = MCDCMatrix * gVertexMC;"]).result,a=qg.substitute(a,"//VTK::Camera::Dec",["attribute mat4 gMatrix;","uniform mat4 MCDCMatrix;","uniform mat4 MCVCMatrix;"]).result):(a=qg.substitute(a,"//VTK::Camera::Dec",["attribute mat4 gMatrix;","uniform mat4 MCDCMatrix;"]).result,a=qg.substitute(a,"//VTK::PositionVC::Impl",["vec4 gVertexMC = gMatrix * vertexMC;","  gl_Position = MCDCMatrix * gVertexMC;"]).result),e.Vertex=a}n.replaceShaderPositionVC(e,r,i)},e.replaceShaderPicking=function(e,r,i){if(t.hardwareSupport){var a=e.Fragment,o=e.Vertex;o=qg.substitute(o,"//VTK::Picking::Dec",["attribute vec3 mapperIndexVS;","varying vec3 mapperIndexVSOutput;"]).result,o=qg.substitute(o,"//VTK::Picking::Impl","  mapperIndexVSOutput = mapperIndexVS;").result,e.Vertex=o,a=qg.substitute(a,"//VTK::Picking::Dec",["varying vec3 mapperIndexVSOutput;","uniform vec3 mapperIndex;","uniform int picking;"]).result,a=qg.substitute(a,"//VTK::Picking::Impl",["  vec4 pickColor = picking == 2 ? vec4(mapperIndexVSOutput,1.0) : vec4(mapperIndex,1.0);","  gl_FragData[0] = picking != 0 ? pickColor : gl_FragData[0];"]).result,e.Fragment=a}else n.replaceShaderPicking(e,r,i)},e.updateGlyphShaderParameters=function(n,r,i,a,o,s,u,l){var c=i.getProgram();if(n){var f=t.normalMatrix,d=s,p=9*u,h=t.tmpMat3,g=f[0],m=f[1],v=f[2],y=f[3],b=f[4],M=f[5],x=f[6],w=f[7],A=f[8],T=d[p],C=d[p+1],S=d[p+2],D=d[p+3],I=d[p+4],E=d[p+5],N=d[p+6],O=d[p+7],_=d[p+8];h[0]=T*g+C*y+S*x,h[1]=T*m+C*b+S*w,h[2]=T*v+C*M+S*A,h[3]=D*g+I*y+E*x,h[4]=D*m+I*b+E*w,h[5]=D*v+I*M+E*A,h[6]=N*g+O*y+_*x,h[7]=N*m+O*b+_*w,h[8]=N*v+O*M+_*A,c.setUniformMatrix3x3("normalMatrix",t.tmpMat3)}if(e.multiply4x4WithOffset(t.tmpMat4,t.mcdcMatrix,o,16*u),c.setUniformMatrix("MCDCMatrix",t.tmpMat4),r&&(e.multiply4x4WithOffset(t.tmpMat4,t.mcvcMatrix,o,16*u),c.setUniformMatrix("MCVCMatrix",t.tmpMat4)),a){var L=a.getData();t.tmpColor[0]=L[4*u]/255,t.tmpColor[1]=L[4*u+1]/255,t.tmpColor[2]=L[4*u+2]/255,c.setUniform3fArray("ambientColorUniform",t.tmpColor),c.setUniform3fArray("diffuseColorUniform",t.tmpColor)}l&&c.setUniform3fArray("mapperIndex",l.getPropColorValue())},e.renderPieceDraw=function(n,r){var i=r.getProperty().getRepresentation(),a=t.context,o=r.getProperty().getEdgeVisibility()&&i===bm.SURFACE,s=t.openGLCamera.getKeyMatrices(n),u=t.openGLActor.getKeyMatrices();Ye.b.multiply(t.normalMatrix,s.normalMatrix,u.normalMatrix),Ye.c.multiply(t.mcdcMatrix,s.wcdc,u.mcwc),Ye.c.multiply(t.mcvcMatrix,s.wcvc,u.mcwc);var l=t.renderable.getMatrixArray(),c=t.renderable.getNormalArray(),f=t.renderable.getColorArray(),d=l.length/16,p=!1;t.openGLRenderer.getSelector()&&t.openGLRenderer.getSelector().getCurrentPass()===xm.COMPOSITE_INDEX_PASS&&(p=!0);for(var h=t.primTypes.Start;h<t.primTypes.End;h++){var g=t.primitives[h].getCABO();if(g.getElementCount()){t.drawingEdges=o&&(h===t.primTypes.TrisEdges||h===t.primTypes.TriStripsEdges),e.updateShaders(t.primitives[h],n,r);var m=t.primitives[h].getProgram(),v=e.getOpenGLMode(i,h),y=m.isUniformUsed("normalMatrix"),b=m.isUniformUsed("MCVCMatrix");if(t.hardwareSupport)t.extension?t.extension.drawArraysInstancedANGLE(v,0,g.getElementCount(),d):a.drawArraysInstanced(v,0,g.getElementCount(),d);else for(var M=0;M<d;++M)p&&t.openGLRenderer.getSelector().renderCompositeIndex(M),e.updateGlyphShaderParameters(y,b,t.primitives[h],f,l,c,M,p?t.openGLRenderer.getSelector():null),a.drawArrays(v,0,g.getElementCount())}}},e.setMapperShaderParameters=function(e,r,i){if(e.getCABO().getElementCount()&&(t.glyphBOBuildTime.getMTime()>e.getAttributeUpdateTime().getMTime()||e.getShaderSourceTime().getMTime()>e.getAttributeUpdateTime().getMTime()))return e.getProgram().isAttributeUsed("gMatrix")?e.getVAO().addAttributeMatrixWithDivisor(e.getProgram(),t.matrixBuffer,"gMatrix",0,64,t.context.FLOAT,4,!1,1)||ym("Error setting gMatrix in shader VAO."):e.getVAO().removeAttributeArray("gMatrix"),e.getProgram().isAttributeUsed("gNormal")?e.getVAO().addAttributeMatrixWithDivisor(e.getProgram(),t.normalBuffer,"gNormal",0,36,t.context.FLOAT,3,!1,1)||ym("Error setting gNormal in shader VAO."):e.getVAO().removeAttributeArray("gNormal"),e.getProgram().isAttributeUsed("gColor")?e.getVAO().addAttributeArrayWithDivisor(e.getProgram(),t.colorBuffer,"gColor",0,4,t.context.UNSIGNED_BYTE,4,!0,1,!1)||ym("Error setting gColor in shader VAO."):e.getVAO().removeAttributeArray("gColor"),e.getProgram().isAttributeUsed("mapperIndexVS")?e.getVAO().addAttributeArrayWithDivisor(e.getProgram(),t.pickBuffer,"mapperIndexVS",0,4,t.context.UNSIGNED_BYTE,4,!0,1,!1)||ym("Error setting mapperIndexVS in shader VAO."):e.getVAO().removeAttributeArray("mapperIndexVS"),n.setMapperShaderParameters(e,r,i),void e.getAttributeUpdateTime().modified();n.setMapperShaderParameters(e,r,i)},e.getNeedToRebuildBufferObjects=function(e,r){return t.renderable.buildArrays(),t.VBOBuildTime.getMTime()<t.renderable.getBuildTime().getMTime()||n.getNeedToRebuildBufferObjects(e,r)},e.buildBufferObjects=function(e,r){if(t.hardwareSupport){var i=t.renderable.getMatrixArray(),a=t.renderable.getNormalArray(),o=t.renderable.getColorArray();if(t.matrixBuffer||(t.matrixBuffer=Tg.newInstance(),t.matrixBuffer.setOpenGLRenderWindow(t.openGLRenderWindow),t.normalBuffer=Tg.newInstance(),t.normalBuffer.setOpenGLRenderWindow(t.openGLRenderWindow),t.colorBuffer=Tg.newInstance(),t.colorBuffer.setOpenGLRenderWindow(t.openGLRenderWindow),t.pickBuffer=Tg.newInstance(),t.pickBuffer.setOpenGLRenderWindow(t.openGLRenderWindow)),t.renderable.getBuildTime().getMTime()>t.glyphBOBuildTime.getMTime()){t.matrixBuffer.upload(i,Mm.ARRAY_BUFFER),t.normalBuffer.upload(a,Mm.ARRAY_BUFFER),o?t.colorBuffer.upload(o.getData(),Mm.ARRAY_BUFFER):t.colorBuffer.releaseGraphicsResources();for(var s=i.length/16,u=new Uint8Array(4*s),l=0;l<s;++l){var c=l+1,f=4*l;u[f]=c%256,c-=u[f],c/=256,u[f+1]=c%256,c-=u[f+1],c/=256,u[f+2]=c%256,u[f+3]=255}t.pickBuffer.upload(u,Mm.ARRAY_BUFFER),t.glyphBOBuildTime.modified()}}return n.buildBufferObjects(e,r)}}(e,t)}var Sm={newInstance:h.a.newInstance(Cm,"vtkOpenGLGlyph3DMapper"),extend:Cm},Dm=h.a.vtkErrorMacro,Im=Ep.SlicingMode;var Em={VBOBuildTime:0,VBOBuildString:null,openGLTexture:null,tris:null,imagemat:null,colorTexture:null,opacityTexture:null,lastHaveSeenDepthRequest:!1,haveSeenDepthRequest:!1,lastTextureComponents:0};function Nm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Em,n),zh.extend(e,t,n),t.tris=em.newInstance(),t.openGLTexture=Xh.newInstance(),t.colorTexture=Xh.newInstance(),t.opacityTexture=Xh.newInstance(),t.imagemat=Ye.c.create(),h.a.setGet(e,t,[]),t.VBOBuildTime={},h.a.obj(t.VBOBuildTime),function(e,t){t.classHierarchy.push("vtkOpenGLImageMapper"),e.buildPass=function(n){if(n){t.openGLImageSlice=e.getFirstAncestorOfType("vtkOpenGLImageSlice"),t.openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t.openGLRenderWindow=t.openGLRenderer.getParent(),t.context=t.openGLRenderWindow.getContext(),t.tris.setOpenGLRenderWindow(t.openGLRenderWindow),t.openGLTexture.setOpenGLRenderWindow(t.openGLRenderWindow),t.colorTexture.setOpenGLRenderWindow(t.openGLRenderWindow),t.opacityTexture.setOpenGLRenderWindow(t.openGLRenderWindow);var r=t.openGLRenderer.getRenderable();t.openGLCamera=t.openGLRenderer.getViewNodeFor(r.getActiveCamera()),t.renderable.getSliceAtFocalPoint()&&t.renderable.setSliceFromCamera(r.getActiveCamera())}},e.translucentPass=function(t){t&&e.render()},e.opaqueZBufferPass=function(n){n&&(t.haveSeenDepthRequest=!0,t.renderDepth=!0,e.render(),t.renderDepth=!1)},e.opaquePass=function(t){t&&e.render()},e.render=function(){var n=t.openGLImageSlice.getRenderable(),r=t.openGLRenderer.getRenderable();e.renderPiece(r,n)},e.buildShaders=function(t,n,r){e.getShaderTemplate(t,n,r),e.replaceShaderValues(t,n,r)},e.getShaderTemplate=function(e,t,n){e.Vertex=nm.a,e.Fragment=im.a,e.Geometry=""},e.replaceShaderValues=function(e,n,r){var i=e.Vertex,a=e.Fragment;i=qg.substitute(i,"//VTK::Camera::Dec",["uniform mat4 MCDCMatrix;"]).result,i=qg.substitute(i,"//VTK::PositionVC::Impl",["  gl_Position = MCDCMatrix * vertexMC;"]).result,i=qg.substitute(i,"//VTK::TCoord::Impl","tcoordVCVSOutput = tcoordMC;").result;var o=t.openGLTexture.getComponents();switch(i=qg.substitute(i,"//VTK::TCoord::Dec","attribute vec2 tcoordMC; varying vec2 tcoordVCVSOutput;").result,a=qg.substitute(a,"//VTK::TCoord::Dec",["varying vec2 tcoordVCVSOutput;","uniform float shift;","uniform float scale;","uniform float oshift;","uniform float oscale;","uniform sampler2D texture1;","uniform sampler2D colorTexture1;","uniform sampler2D opacityTexture1;","uniform float opacity;"]).result,o){case 1:a=qg.substitute(a,"//VTK::TCoord::Impl",["float intensity = texture2D(texture1, tcoordVCVSOutput).r;","vec3 tcolor = texture2D(colorTexture1, vec2(intensity * scale + shift, 0.5)).rgb;","float scalarOpacity = texture2D(opacityTexture1, vec2(intensity * oscale + oshift, 0.5)).r;","gl_FragData[0] = vec4(tcolor, scalarOpacity * opacity);"]).result;break;case 2:a=qg.substitute(a,"//VTK::TCoord::Impl",["vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","float intensity = tcolor.r*scale + shift;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(intensity, 0.5)), scale*tcolor.g + shift);"]).result;break;default:a=qg.substitute(a,"//VTK::TCoord::Impl",["vec4 tcolor = scale*texture2D(texture1, tcoordVCVSOutput.st) + shift;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(tcolor.r,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.g,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.b,0.5)).r, tcolor.a);"]).result}t.haveSeenDepthRequest&&(a=qg.substitute(a,"//VTK::ZBuffer::Dec","uniform int depthRequest;").result,a=qg.substitute(a,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float iz = floor(gl_FragCoord.z*65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result),e.Vertex=i,e.Fragment=a},e.getNeedToRebuildShaders=function(e,n,r){var i=t.openGLTexture.getComponents();return(t.lastHaveSeenDepthRequest!==t.haveSeenDepthRequest||0===e.getProgram()||t.lastTextureComponents!==i)&&(t.lastHaveSeenDepthRequest=t.haveSeenDepthRequest,t.lastTextureComponents=i,!0)},e.updateShaders=function(n,r,i){if(t.lastBoundBO=n,e.getNeedToRebuildShaders(n,r,i)){var a={Vertex:null,Fragment:null,Geometry:null};e.buildShaders(a,r,i);var o=t.openGLRenderWindow.getShaderCache().readyShaderProgramArray(a.Vertex,a.Fragment,a.Geometry);o!==n.getProgram()&&(n.setProgram(o),n.getVAO().releaseGraphicsResources()),n.getShaderSourceTime().modified()}else t.openGLRenderWindow.getShaderCache().readyShaderProgram(n.getProgram());n.getVAO().bind(),e.setMapperShaderParameters(n,r,i),e.setCameraShaderParameters(n,r,i),e.setPropertyShaderParameters(n,r,i)},e.setMapperShaderParameters=function(e,n,r){e.getCABO().getElementCount()&&(t.VBOBuildTime>e.getAttributeUpdateTime().getMTime()||e.getShaderSourceTime().getMTime()>e.getAttributeUpdateTime().getMTime())&&(e.getProgram().isAttributeUsed("vertexMC")&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"vertexMC",e.getCABO().getVertexOffset(),e.getCABO().getStride(),t.context.FLOAT,3,t.context.FALSE)||Dm("Error setting vertexMC in shader VAO.")),e.getProgram().isAttributeUsed("tcoordMC")&&e.getCABO().getTCoordOffset()&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"tcoordMC",e.getCABO().getTCoordOffset(),e.getCABO().getStride(),t.context.FLOAT,e.getCABO().getTCoordComponents(),t.context.FALSE)||Dm("Error setting tcoordMC in shader VAO.")),e.getAttributeUpdateTime().modified());var i=t.openGLTexture.getTextureUnit();e.getProgram().setUniformi("texture1",i);var a=r.getProperty().getColorWindow(),o=r.getProperty().getColorLevel(),s=r.getProperty().getRGBTransferFunction();if(s){var u=s.getRange();a=u[1]-u[0],o=.5*(u[1]+u[0])}var l=t.openGLTexture.getShiftAndScale(),c=l.scale/a,f=(l.shift-o)/a+.5,d=r.getProperty().getScalarOpacity(),p=1,h=0;if(d){var g=d.getRange(),m=g[1]-g[0],v=.5*(g[0]+g[1]);p=l.scale/m,h=(l.shift-v)/m+.5}t.haveSeenDepthRequest&&e.getProgram().setUniformi("depthRequest",t.renderDepth?1:0),e.getProgram().setUniformf("shift",f),e.getProgram().setUniformf("scale",c),e.getProgram().setUniformf("oshift",h),e.getProgram().setUniformf("oscale",p);var y=t.colorTexture.getTextureUnit(),b=t.opacityTexture.getTextureUnit();e.getProgram().setUniformi("colorTexture1",y),e.getProgram().setUniformi("opacityTexture1",b)},e.setCameraShaderParameters=function(e,n,r){var i=e.getProgram(),a=t.openGLImageSlice.getKeyMatrices(),o=t.currentInput.getIndexToWorld();Ye.c.multiply(t.imagemat,a.mcwc,o);var s=t.openGLCamera.getKeyMatrices(n);Ye.c.multiply(t.imagemat,s.wcdc,t.imagemat),i.setUniformMatrix("MCDCMatrix",t.imagemat)},e.setPropertyShaderParameters=function(e,t,n){var r=e.getProgram(),i=n.getProperty().getOpacity();r.setUniformf("opacity",i)},e.renderPieceStart=function(n,r){e.updateBufferObjects(n,r),t.lastBoundBO=null},e.renderPieceDraw=function(n,r){var i=t.context;t.openGLTexture.activate(),t.colorTexture.activate(),t.opacityTexture.activate(),t.tris.getCABO().getElementCount()&&(e.updateShaders(t.tris,n,r),i.drawArrays(i.TRIANGLES,0,t.tris.getCABO().getElementCount()),t.tris.getVAO().release()),t.openGLTexture.deactivate(),t.colorTexture.deactivate(),t.opacityTexture.deactivate()},e.renderPieceFinish=function(e,t){},e.renderPiece=function(n,r){e.invokeEvent({type:"StartEvent"}),t.renderable.update(),t.currentInput=t.renderable.getInputData(),e.invokeEvent({type:"EndEvent"}),t.currentInput?(e.renderPieceStart(n,r),e.renderPieceDraw(n,r),e.renderPieceFinish(n,r)):Dm("No input!")},e.computeBounds=function(n,r){e.getInput()?t.bounds=e.getInput().getBounds():f.uninitializeBounds(t.bounds)},e.updateBufferObjects=function(t,n){e.getNeedToRebuildBufferObjects(t,n)&&e.buildBufferObjects(t,n)},e.getNeedToRebuildBufferObjects=function(n,r){return t.VBOBuildTime.getMTime()<e.getMTime()||t.VBOBuildTime.getMTime()<r.getMTime()||t.VBOBuildTime.getMTime()<t.renderable.getMTime()||t.VBOBuildTime.getMTime()<r.getProperty().getMTime()||t.VBOBuildTime.getMTime()<t.currentInput.getMTime()},e.buildBufferObjects=function(n,r){var a=t.currentInput;if(null!==a){var o=r.getProperty().getInterpolationType();o===Rp.NEAREST?(t.colorTexture.setMinificationFilter(Ph.NEAREST),t.colorTexture.setMagnificationFilter(Ph.NEAREST),t.opacityTexture.setMinificationFilter(Ph.NEAREST),t.opacityTexture.setMagnificationFilter(Ph.NEAREST)):(t.colorTexture.setMinificationFilter(Ph.LINEAR),t.colorTexture.setMagnificationFilter(Ph.LINEAR),t.opacityTexture.setMinificationFilter(Ph.LINEAR),t.opacityTexture.setMagnificationFilter(Ph.LINEAR));var s=new Uint8Array(3072),u=r.getProperty().getRGBTransferFunction();if(u){var l="".concat(u.getMTime());if(t.colorTextureString!==l){var c=u.getRange(),f=new Float32Array(3072);u.getTable(c[0],c[1],1024,f,1);for(var d=0;d<3072;++d)s[d]=255*f[d];t.colorTextureString=l,t.colorTexture.create2DFromRaw(1024,1,3,Tt.b.UNSIGNED_CHAR,s)}}else if("0"!==t.colorTextureString){for(var p=0;p<3072;++p)s[p]=255*p/3069,s[p+1]=255*p/3069,s[p+2]=255*p/3069;t.colorTextureString="0",t.colorTexture.create2DFromRaw(1024,1,3,Tt.b.UNSIGNED_CHAR,s)}var h=new Uint8Array(1024),g=r.getProperty().getScalarOpacity();if(g){var m="".concat(g.getMTime());if(t.opacityTextureString!==m){var v=g.getRange(),y=new Float32Array(1024);g.getTable(v[0],v[1],1024,y,1);for(var b=0;b<1024;++b)h[b]=255*y[b];t.opacityTextureString=m,t.opacityTexture.create2DFromRaw(1024,1,1,Tt.b.UNSIGNED_CHAR,h)}}else"0"!==t.opacityTextureString&&(h.fill(255),t.opacityTextureString="0",t.opacityTexture.create2DFromRaw(1024,1,1,Tt.b.UNSIGNED_CHAR,h));var M=t.renderable.getClosestIJKAxis().ijkMode,x=t.renderable.getSlice();M!==t.renderable.getSlicingMode()&&(x=t.renderable.getSliceAtPosition(x));var w,A=a.getExtent();M===Im.I&&(w=x-A[0]),M===Im.J&&(w=x-A[2]),M!==Im.K&&M!==Im.NONE||(w=x-A[4]);var T="".concat(x,"A").concat(a.getMTime(),"A").concat(a.getPointData().getScalars().getMTime(),"B").concat(e.getMTime(),"C").concat(t.renderable.getSlicingMode(),"D").concat(r.getProperty().getMTime());if(t.VBOBuildString!==T){var C=a.getDimensions(),S=a.getPointData().getScalars().getNumberOfComponents();o===Rp.NEAREST?(4===S?(t.openGLTexture.setGenerateMipmap(!0),t.openGLTexture.setMinificationFilter(Ph.NEAREST)):t.openGLTexture.setMinificationFilter(Ph.NEAREST),t.openGLTexture.setMagnificationFilter(Ph.NEAREST)):(4===S?(t.openGLTexture.setGenerateMipmap(!0),t.openGLTexture.setMinificationFilter(Ph.LINEAR_MIPMAP_LINEAR)):t.openGLTexture.setMinificationFilter(Ph.LINEAR),t.openGLTexture.setMagnificationFilter(Ph.LINEAR)),t.openGLTexture.setWrapS(Lh.CLAMP_TO_EDGE),t.openGLTexture.setWrapT(Lh.CLAMP_TO_EDGE);for(var D=C[0]*C[1]*S,I=new Float32Array(12),E=new Float32Array(8),N=0;N<4;N++)E[2*N]=N%2?1:0,E[2*N+1]=N>1?1:0;var O=a.getPointData().getScalars().getData(),_=null;if(M===Im.I){_=new O.constructor(C[2]*C[1]*S);for(var L=0,P=0;P<C[2];P++)for(var k=0;k<C[1];k++){var R=(w+k*C[0]+P*C[0]*C[1])*S;L=(P*C[1]+k)*S,_.set(O.subarray(R,R+S),L)}C[0]=C[1],C[1]=C[2],I[0]=x,I[1]=A[2],I[2]=A[4],I[3]=x,I[4]=A[3],I[5]=A[4],I[6]=x,I[7]=A[2],I[8]=A[5],I[9]=x,I[10]=A[3],I[11]=A[5]}else if(M===Im.J){_=new O.constructor(C[2]*C[0]*S);for(var j=0,B=0;B<C[2];B++)for(var z=0;z<C[0];z++){var F=(z+w*C[0]+B*C[0]*C[1])*S;j=(B*C[0]+z)*S,_.set(O.subarray(F,F+S),j)}C[1]=C[2],I[0]=A[0],I[1]=x,I[2]=A[4],I[3]=A[1],I[4]=x,I[5]=A[4],I[6]=A[0],I[7]=x,I[8]=A[5],I[9]=A[1],I[10]=x,I[11]=A[5]}else M===Im.K||M===Im.NONE?(_=O.subarray(w*D,(w+1)*D),I[0]=A[0],I[1]=A[2],I[2]=x,I[3]=A[1],I[4]=A[2],I[5]=x,I[6]=A[0],I[7]=A[3],I[8]=x,I[9]=A[1],I[10]=A[3],I[11]=x):Dm("Reformat slicing not yet supported.");t.openGLTexture.create2DFromRaw(C[0],C[1],S,a.getPointData().getScalars().getDataType(),_),t.openGLTexture.activate(),t.openGLTexture.sendParameters(),t.openGLTexture.deactivate();var V=i.a.newInstance({numberOfComponents:3,values:I});V.setName("points");var U=i.a.newInstance({numberOfComponents:2,values:E});U.setName("tcoords");var G=new Uint16Array(8);G[0]=3,G[1]=0,G[2]=1,G[3]=3,G[4]=3,G[5]=0,G[6]=3,G[7]=2;var W=i.a.newInstance({numberOfComponents:1,values:G});t.tris.getCABO().createVBO(W,"polys",kg.a.SURFACE,{points:V,tcoords:U,cellOffset:0}),t.VBOBuildTime.modified(),t.VBOBuildString=T}}}}(e,t)}var Om={newInstance:h.a.newInstance(Nm,"vtkOpenGLImageMapper"),extend:Nm};var _m={context:null,keyMatrixTime:null,keyMatrices:null};function Lm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,_m,n),zh.extend(e,t,n),t.keyMatrixTime={},h.a.obj(t.keyMatrixTime,{mtime:0}),t.keyMatrices={mcwc:Ye.c.create()},h.a.setGet(e,t,["context"]),function(e,t){t.classHierarchy.push("vtkOpenGLImageSlice"),e.buildPass=function(n){if(t.renderable&&t.renderable.getVisibility()&&n){if(!t.renderable)return;t.openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),e.prepareNodes(),e.addMissingNode(t.renderable.getMapper()),e.removeUnusedNodes()}},e.traverseOpaqueZBufferPass=function(t){e.traverseOpaquePass(t)},e.traverseOpaquePass=function(n){t.renderable&&t.renderable.getVisibility()&&t.renderable.getIsOpaque()&&(!t.openGLRenderer.getSelector()||t.renderable.getPickable())&&(e.apply(n,!0),t.children.forEach(function(e){e.traverse(n)}),e.apply(n,!1))},e.traverseTranslucentPass=function(n){!t.renderable||!t.renderable.getVisibility()||t.renderable.getIsOpaque()||t.openGLRenderer.getSelector()&&!t.renderable.getPickable()||(e.apply(n,!0),t.children.forEach(function(e){e.traverse(n)}),e.apply(n,!1))},e.queryPass=function(e,n){if(e){if(!t.renderable||!t.renderable.getVisibility())return;t.renderable.getIsOpaque()?n.incrementOpaqueActorCount():n.incrementTranslucentActorCount()}},e.opaqueZBufferPass=function(t,n){return e.opaquePass(t,n)},e.opaquePass=function(n,r){n&&(t.context=e.getFirstAncestorOfType("vtkOpenGLRenderWindow").getContext(),t.context.depthMask(!0))},e.translucentPass=function(n,r){n?(t.context=e.getFirstAncestorOfType("vtkOpenGLRenderWindow").getContext(),t.context.depthMask(!1)):t.context.depthMask(!0)},e.getKeyMatrices=function(){return t.renderable.getMTime()>t.keyMatrixTime.getMTime()&&(Ye.c.copy(t.keyMatrices.mcwc,t.renderable.getMatrix()),Ye.c.transpose(t.keyMatrices.mcwc,t.keyMatrices.mcwc),t.keyMatrixTime.modified()),t.keyMatrices}}(e,t)}var Pm={newInstance:h.a.newInstance(Lm,"vtkOpenGLImageSlice"),extend:Lm},km=h.a.vtkDebugMacro;var Rm={};function jm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Rm,n),zh.extend(e,t,n),function(e,t){t.classHierarchy.push("vtkOpenGLPixelSpaceCallbackMapper"),e.opaquePass=function(n,r){t.openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t.openGLRenderWindow=t.openGLRenderer.getParent();var i=t.openGLRenderer.getAspectRatio(),a=t.openGLRenderer?t.openGLRenderer.getRenderable().getActiveCamera():null,o=t.openGLRenderer.getTiledSizeAndOrigin(),s=null;if(t.renderable.getUseZValues()){var u=r.getZBufferTexture(),l=Math.floor(u.getWidth()),c=Math.floor(u.getHeight()),f=t.openGLRenderWindow.getContext();u.bind();var d=r.getFramebuffer();d?d.saveCurrentBindingsAndBuffers():km("No framebuffer to save/restore");var p=f.createFramebuffer();f.bindFramebuffer(f.FRAMEBUFFER,p),f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,u.getHandle(),0),f.checkFramebufferStatus(f.FRAMEBUFFER)===f.FRAMEBUFFER_COMPLETE&&(s=new Uint8Array(l*c*4),f.viewport(0,0,l,c),f.readPixels(0,0,l,c,f.RGBA,f.UNSIGNED_BYTE,s)),d&&d.restorePreviousBindingsAndBuffers(),f.deleteFramebuffer(p)}t.renderable.invokeCallback(t.renderable.getInputData(),a,i,o,s)},e.queryPass=function(e,n){e&&(t.renderable.getUseZValues(),n.setDepthRequested(!0))}}(e,t)}var Bm={newInstance:h.a.newInstance(jm,"vtkOpenGLPixelSpaceCallbackMapper"),extend:jm},zm=h.a.vtkDebugMacro;var Fm={context:null,openGLRenderWindow:null,selector:null};function Vm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Fm,n),zh.extend(e,t,n),h.a.get(e,t,["shaderCache"]),h.a.setGet(e,t,["selector"]),function(e,t){t.classHierarchy.push("vtkOpenGLRenderer"),e.buildPass=function(n){if(n){if(!t.renderable)return;t.renderable.isActiveCameraCreated()||t.renderable.resetCamera(),e.updateLights(),e.prepareNodes(),e.addMissingNode(t.renderable.getActiveCamera()),e.addMissingNodes(t.renderable.getViewPropsWithNestedProps()),e.removeUnusedNodes()}},e.updateLights=function(){for(var e=0,n=t.renderable.getLightsByReference(),r=0;r<n.length;++r)n[r].getSwitch()>0&&e++;return e||(zm("No lights are on, creating one."),t.renderable.createLight()),e},e.opaqueZBufferPass=function(n){if(n){var r=0,i=t.context;t.renderable.getTransparent()||(t.context.clearColor(1,0,0,1),r|=i.COLOR_BUFFER_BIT),t.renderable.getPreserveDepthBuffer()||(i.clearDepth(1),r|=i.DEPTH_BUFFER_BIT,i.depthMask(!0));var a=e.getTiledSizeAndOrigin();i.enable(i.SCISSOR_TEST),i.scissor(a.lowerLeftU,a.lowerLeftV,a.usize,a.vsize),i.viewport(a.lowerLeftU,a.lowerLeftV,a.usize,a.vsize),i.colorMask(!0,!0,!0,!0),i.clear(r),i.enable(i.DEPTH_TEST)}},e.cameraPass=function(t){t&&e.clear()},e.getAspectRatio=function(){var e=t.parent.getSizeByReference(),n=t.renderable.getViewportByReference();return e[0]*(n[2]-n[0])/((n[3]-n[1])*e[1])},e.getTiledSizeAndOrigin=function(){var e=t.renderable.getViewportByReference(),n=[0,0,1,1],r=f.clampValue(e[0]-n[0],0,1),i=f.clampValue(e[1]-n[1],0,1),a=t.parent.normalizedDisplayToDisplay(r,i),o=Math.round(a[0]),s=Math.round(a[1]),u=f.clampValue(e[2]-n[0],0,1),l=f.clampValue(e[3]-n[1],0,1);u>n[2]-n[0]&&(u=n[2]-n[0]),l>n[3]-n[1]&&(l=n[3]-n[1]);var c=t.parent.normalizedDisplayToDisplay(u,l),d=Math.round(c[0])-o,p=Math.round(c[1])-s;return d<0&&(d=0),p<0&&(p=0),{usize:d,vsize:p,lowerLeftU:o,lowerLeftV:s}},e.clear=function(){var n=0,r=t.context;if(!t.renderable.getTransparent()){var i=t.renderable.getBackgroundByReference();t.context.clearColor(i[0],i[1],i[2],i[3]),n|=r.COLOR_BUFFER_BIT}t.renderable.getPreserveDepthBuffer()||(r.clearDepth(1),n|=r.DEPTH_BUFFER_BIT,r.depthMask(!0)),r.colorMask(!0,!0,!0,!0);var a=e.getTiledSizeAndOrigin();r.enable(r.SCISSOR_TEST),r.scissor(a.lowerLeftU,a.lowerLeftV,a.usize,a.vsize),r.viewport(a.lowerLeftU,a.lowerLeftV,a.usize,a.vsize),r.clear(n),r.enable(r.DEPTH_TEST)},e.releaseGraphicsResources=function(){null!==t.selector&&t.selector.releaseGraphicsResources()},e.setOpenGLRenderWindow=function(n){t.openGLRenderWindow!==n&&(e.releaseGraphicsResources(),t.openGLRenderWindow=n,t.context=null,n&&(t.context=t.openGLRenderWindow.getContext()))}}(e,t)}var Um={newInstance:h.a.newInstance(Vm,"vtkOpenGLRenderer"),extend:Vm},Gm=h.a.vtkErrorMacro;var Wm={context:null};function Hm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Wm,n),zh.extend(e,t,n),t.openGLTexture=Xh.newInstance(),t.tris=em.newInstance(),t.keyMatrixTime={},h.a.obj(t.keyMatrixTime,{mtime:0}),t.keyMatrices={normalMatrix:Ye.b.create(),mcwc:Ye.c.create()},h.a.setGet(e,t,["context"]),h.a.get(e,t,["activeTextures"]),function(e,t){t.classHierarchy.push("vtkOpenGLSkybox"),e.buildPass=function(n){if(n){t.openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t.openGLRenderWindow=t.openGLRenderer.getParent(),t.context=t.openGLRenderWindow.getContext(),t.tris.setOpenGLRenderWindow(t.openGLRenderWindow),t.openGLTexture.setOpenGLRenderWindow(t.openGLRenderWindow);var r=t.openGLRenderer.getRenderable();t.openGLCamera=t.openGLRenderer.getViewNodeFor(r.getActiveCamera())}},e.queryPass=function(e,n){if(e){if(!t.renderable||!t.renderable.getVisibility())return;n.incrementOpaqueActorCount()}},e.opaquePass=function(n,r){if(n&&!t.openGLRenderer.getSelector()){e.updateBufferObjects(),t.openGLRenderWindow.enableDepthMask(),t.openGLRenderWindow.getShaderCache().readyShaderProgram(t.tris.getProgram()),t.openGLTexture.render(t.openGLRenderWindow);var i=t.openGLTexture.getTextureUnit();t.tris.getProgram().setUniformi("sbtexture",i);var a=t.openGLRenderer.getRenderable(),o=t.openGLCamera.getKeyMatrices(a),s=Ye.c.create();if(Ye.c.invert(s,o.wcdc),t.tris.getProgram().setUniformMatrix("IMCDCMatrix",s),"box"===t.lastFormat){var u=a.getActiveCamera().getPosition();t.tris.getProgram().setUniform3f("camPos",u[0],u[1],u[2])}t.tris.getVAO().bind(),t.context.drawArrays(t.context.TRIANGLES,0,t.tris.getCABO().getElementCount()),t.tris.getVAO().release(),t.openGLTexture.deactivate()}},e.updateBufferObjects=function(){if(!t.tris.getCABO().getElementCount()){for(var e=new Float32Array(12),n=0;n<4;n++)e[3*n]=n%2*2-1,e[3*n+1]=n>1?1:-1,e[3*n+2]=1;var r=i.a.newInstance({numberOfComponents:3,values:e});r.setName("points");var a=new Uint16Array(8);a[0]=3,a[1]=0,a[2]=1,a[3]=3,a[4]=3,a[5]=0,a[6]=3,a[7]=2;var o=i.a.newInstance({numberOfComponents:1,values:a});t.tris.getCABO().createVBO(o,"polys",kg.a.SURFACE,{points:r,cellOffset:0})}t.renderable.getFormat()!==t.lastFormat&&(t.lastFormat=t.renderable.getFormat(),"box"===t.lastFormat&&t.tris.setProgram(t.openGLRenderWindow.getShaderCache().readyShaderProgramArray("//VTK::System::Dec\n             attribute vec3 vertexMC;\n             uniform mat4 IMCDCMatrix;\n             varying vec3 TexCoords;\n             void main () {\n              gl_Position = vec4(vertexMC.xyz, 1.0);\n              vec4 wpos = IMCDCMatrix * gl_Position;\n              TexCoords = wpos.xyz/wpos.w;\n             }","//VTK::System::Dec\n             //VTK::Output::Dec\n             varying vec3 TexCoords;\n             uniform samplerCube sbtexture;\n             uniform vec3 camPos;\n             void main () {\n               // skybox looks from inside out\n               // which means we have to adjust\n               // our tcoords. Otherwise text would\n               // be flipped\n               vec3 tc = normalize(TexCoords - camPos);\n               if (abs(tc.z) < max(abs(tc.x),abs(tc.y)))\n               {\n                 tc = vec3(1.0, 1.0, -1.0) * tc;\n               }\n               else\n               {\n                 tc = vec3(-1.0, 1.0, 1.0) * tc;\n               }\n               gl_FragData[0] = textureCube(sbtexture, tc);\n             }","")),"background"===t.lastFormat&&t.tris.setProgram(t.openGLRenderWindow.getShaderCache().readyShaderProgramArray("//VTK::System::Dec\n             attribute vec3 vertexMC;\n             uniform mat4 IMCDCMatrix;\n             varying vec2 TexCoords;\n             void main () {\n              gl_Position = vec4(vertexMC.xyz, 1.0);\n              vec4 wpos = IMCDCMatrix * gl_Position;\n              TexCoords = vec2(vertexMC.x, vertexMC.y)*0.5 + 0.5;\n             }","//VTK::System::Dec\n             //VTK::Output::Dec\n             varying vec2 TexCoords;\n             uniform sampler2D sbtexture;\n             void main () {\n               gl_FragData[0] = texture2D(sbtexture, TexCoords);\n             }","")),t.tris.getShaderSourceTime().modified(),t.tris.getVAO().bind(),t.tris.getVAO().addAttributeArray(t.tris.getProgram(),t.tris.getCABO(),"vertexMC",t.tris.getCABO().getVertexOffset(),t.tris.getCABO().getStride(),t.context.FLOAT,3,t.context.FALSE)||Gm("Error setting vertexMC in shader VAO."));var s=t.renderable.getTextures();s.length||Gm("vtkSkybox requires a texture map"),t.openGLTexture.getRenderable()!==s[0]&&(t.openGLTexture.releaseGraphicsResources(t.openGLRenderWindow),t.openGLTexture.setRenderable(s[0]))}}(e,t)}var Ym={newInstance:h.a.newInstance(Hm),extend:Hm},Qm=n(138),qm=n.n(Qm),Xm=h.a.vtkErrorMacro;var Km={};function Zm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Km,n),vm.extend(e,t,n),function(e,t){t.classHierarchy.push("vtkOpenGLSphereMapper");var n=Object.assign({},e);e.getShaderTemplate=function(e,t,n){e.Vertex=qm.a,e.Fragment=im.a,e.Geometry=""},e.replaceShaderValues=function(e,r,i){var a=e.Vertex,o=e.Fragment;a=qg.substitute(a,"//VTK::Camera::Dec",["uniform mat4 VCDCMatrix;\n","uniform mat4 MCVCMatrix;"]).result,o=qg.substitute(o,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,o=qg.substitute(o,"//VTK::PositionVC::Impl",["vec4 vertexVC = vertexVCVSOutput;\n"]).result,o=qg.substitute(o,"//VTK::Normal::Dec",["uniform float invertedDepth;\n","uniform int cameraParallel;\n","varying float radiusVCVSOutput;\n","varying vec3 centerVCVSOutput;\n","uniform mat4 VCDCMatrix;\n"]).result;var s="";t.context.getExtension("EXT_frag_depth")&&(s="gl_FragDepthEXT = (pos.z / pos.w + 1.0) / 2.0;\n"),t.openGLRenderWindow.getWebgl2()&&(s="gl_FragDepth = (pos.z / pos.w + 1.0) / 2.0;\n"),o=qg.substitute(o,"//VTK::Depth::Impl",["  vec3 EyePos;\n","  vec3 EyeDir;\n","  if (cameraParallel != 0) {\n","    EyePos = vec3(vertexVC.x, vertexVC.y, vertexVC.z + 3.0*radiusVCVSOutput);\n","    EyeDir = vec3(0.0,0.0,-1.0); }\n","  else {\n","    EyeDir = vertexVC.xyz;\n","    EyePos = vec3(0.0,0.0,0.0);\n","    float lengthED = length(EyeDir);\n","    EyeDir = normalize(EyeDir);\n","    if (lengthED > radiusVCVSOutput*3.0) {\n","      EyePos = vertexVC.xyz - EyeDir*3.0*radiusVCVSOutput; }\n","    }\n","  EyePos = EyePos - centerVCVSOutput;\n","  EyePos = EyePos/radiusVCVSOutput;\n","  float b = 2.0*dot(EyePos,EyeDir);\n","  float c = dot(EyePos,EyePos) - 1.0;\n","  float d = b*b - 4.0*c;\n","  vec3 normalVCVSOutput = vec3(0.0,0.0,1.0);\n","  if (d < 0.0) { discard; }\n","  else {\n","    float t = (-b - invertedDepth*sqrt(d))*0.5;\n","    normalVCVSOutput = invertedDepth*normalize(EyePos + t*EyeDir);\n","    vertexVC.xyz = normalVCVSOutput*radiusVCVSOutput + centerVCVSOutput;\n","    }\n","  vec4 pos = VCDCMatrix * vertexVC;\n",s]).result,o=qg.substitute(o,"//VTK::Normal::Impl","").result,t.haveSeenDepthRequest&&(o=qg.substitute(o,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float computedZ = (pos.z / pos.w + 1.0) / 2.0;","float iz = floor(computedZ * 65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result),e.Vertex=a,e.Fragment=o,n.replaceShaderValues(e,r,i)},e.setMapperShaderParameters=function(e,r,i){e.getCABO().getElementCount()&&(t.VBOBuildTime>e.getAttributeUpdateTime().getMTime()||e.getShaderSourceTime().getMTime()>e.getAttributeUpdateTime().getMTime())&&e.getProgram().isAttributeUsed("offsetMC")&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"offsetMC",12,e.getCABO().getStride(),t.context.FLOAT,2,!1)||Xm("Error setting 'offsetMC' in shader VAO.")),e.getProgram().isUniformUsed("invertedDepth")&&e.getProgram().setUniformf("invertedDepth",t.invert?-1:1),n.setMapperShaderParameters(e,r,i)},e.setCameraShaderParameters=function(e,n,r){var i=e.getProgram(),a=n.getActiveCamera(),o=t.openGLCamera.getKeyMatrices(n);if(i.isUniformUsed("VCDCMatrix")&&i.setUniformMatrix("VCDCMatrix",o.vcdc),i.isUniformUsed("MCVCMatrix"))if(r.getIsIdentity())i.setUniformMatrix("MCVCMatrix",o.wcvc);else{var s=t.openGLActor.getKeyMatrices(),u=Ye.c.create();Ye.c.multiply(u,o.wcvc,s.mcwc),i.setUniformMatrix("MCVCMatrix",u)}i.isUniformUsed("cameraParallel")&&e.getProgram().setUniformi("cameraParallel",a.getParallelProjection())},e.getOpenGLMode=function(e,n){return t.context.TRIANGLES},e.buildBufferObjects=function(e,n){var r=t.currentInput;if(null!==r){t.renderable.mapScalars(r,1);var i=t.renderable.getColorMapColors(),a=t.primitives[t.primTypes.Tris].getCABO(),o=r.getPointData(),s=r.getPoints(),u=s.getNumberOfPoints(),l=s.getData(),c=null;null!=t.renderable.getScaleArray()&&o.hasArray(t.renderable.getScaleArray())&&(c=o.getArray(t.renderable.getScaleArray()).getData());var d=null,p=0,h=null;i?(p=i.getNumberOfComponents(),a.setColorOffset(0),a.setColorBOStride(4),d=i.getData(),h=new Uint8Array(3*u*4),a.getColorBO()||a.setColorBO(Tg.newInstance()),a.getColorBO().setOpenGLRenderWindow(t.openGLRenderWindow)):a.getColorBO()&&a.setColorBO(null),a.setColorComponents(p);var g=new Float32Array(5*u*3);a.setStride(20);for(var m=Math.cos(f.radiansFromDegrees(30)),v=0,y=0,b=0,M=0,x=0;x<u;++x){var w=t.renderable.getRadius();c&&(w=c[x]),v=3*x,g[b++]=l[v++],g[b++]=l[v++],g[b++]=l[v++],g[b++]=-2*w*m,g[b++]=-w,d&&(y=x*p,h[M++]=d[y],h[M++]=d[y+1],h[M++]=d[y+2],h[M++]=d[y+3]),v=3*x,g[b++]=l[v++],g[b++]=l[v++],g[b++]=l[v++],g[b++]=2*w*m,g[b++]=-w,d&&(h[M++]=d[y],h[M++]=d[y+1],h[M++]=d[y+2],h[M++]=d[y+3]),v=3*x,g[b++]=l[v++],g[b++]=l[v++],g[b++]=l[v++],g[b++]=0,g[b++]=2*w,d&&(h[M++]=d[y],h[M++]=d[y+1],h[M++]=d[y+2],h[M++]=d[y+3])}a.setElementCount(b/5),a.upload(g,yg.ARRAY_BUFFER),i&&a.getColorBO().upload(h,yg.ARRAY_BUFFER),t.VBOBuildTime.modified()}}}(e,t)}var Jm={newInstance:h.a.newInstance(Zm,"vtkOpenGLSphereMapper"),extend:Zm},$m=n(139),ev=n.n($m),tv=h.g;var nv={};function rv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,nv,n),vm.extend(e,t,n),function(e,t){t.classHierarchy.push("vtkOpenGLStickMapper");var n=Object.assign({},e);e.getShaderTemplate=function(e,t,n){e.Vertex=ev.a,e.Fragment=im.a,e.Geometry=""},e.replaceShaderValues=function(e,r,i){var a=e.Vertex,o=e.Fragment;a=qg.substitute(a,"//VTK::Camera::Dec",["uniform mat4 VCDCMatrix;\n","uniform mat4 MCVCMatrix;"]).result,o=qg.substitute(o,"//VTK::PositionVC::Dec","varying vec4 vertexVCVSOutput;").result,o=qg.substitute(o,"//VTK::PositionVC::Impl","  vec4 vertexVC = vertexVCVSOutput;\n").result,o=qg.substitute(o,"//VTK::Normal::Dec",["uniform int cameraParallel;\n","varying float radiusVCVSOutput;\n","varying vec3 orientVCVSOutput;\n","varying float lengthVCVSOutput;\n","varying vec3 centerVCVSOutput;\n","uniform mat4 VCDCMatrix;\n"]).result;var s="";t.context.getExtension("EXT_frag_depth")&&(s="  gl_FragDepthEXT = (pos.z / pos.w + 1.0) / 2.0;\n"),t.openGLRenderWindow.getWebgl2()&&(s="gl_FragDepth = (pos.z / pos.w + 1.0) / 2.0;\n"),o=qg.substitute(o,"//VTK::Depth::Impl",["  vec3 EyePos;\n","  vec3 EyeDir;\n","  if (cameraParallel != 0) {\n","    EyePos = vec3(vertexVC.x, vertexVC.y, vertexVC.z + 3.0*radiusVCVSOutput);\n","    EyeDir = vec3(0.0,0.0,-1.0); }\n","  else {\n","    EyeDir = vertexVC.xyz;\n","    EyePos = vec3(0.0,0.0,0.0);\n","    float lengthED = length(EyeDir);\n","    EyeDir = normalize(EyeDir);\n","    if (lengthED > radiusVCVSOutput*3.0) {\n","      EyePos = vertexVC.xyz - EyeDir*3.0*radiusVCVSOutput; }\n","    }\n","  EyePos = EyePos - centerVCVSOutput;\n","  vec3 base1;\n","  if (abs(orientVCVSOutput.z) < 0.99) {\n","    base1 = normalize(cross(orientVCVSOutput,vec3(0.0,0.0,1.0))); }\n","  else {\n","    base1 = normalize(cross(orientVCVSOutput,vec3(0.0,1.0,0.0))); }\n","  vec3 base2 = cross(orientVCVSOutput,base1);\n","  EyePos = vec3(dot(EyePos,base1),dot(EyePos,base2),dot(EyePos,orientVCVSOutput));\n","  EyeDir = vec3(dot(EyeDir,base1),dot(EyeDir,base2),dot(EyeDir,orientVCVSOutput));\n","  EyePos = EyePos/radiusVCVSOutput;\n","  float a = EyeDir.x*EyeDir.x + EyeDir.y*EyeDir.y;\n","  float b = 2.0*(EyePos.x*EyeDir.x + EyePos.y*EyeDir.y);\n","  float c = EyePos.x*EyePos.x + EyePos.y*EyePos.y - 1.0;\n","  float d = b*b - 4.0*a*c;\n","  vec3 normalVCVSOutput = vec3(0.0,0.0,1.0);\n","  if (d < 0.0) { discard; }\n","  else {\n","    float t =  (-b - sqrt(d))/(2.0*a);\n","    float tz = EyePos.z + t*EyeDir.z;\n","    vec3 iPoint = EyePos + t*EyeDir;\n","    if (abs(iPoint.z)*radiusVCVSOutput > lengthVCVSOutput*0.5) {\n","      float t2 = (-b + sqrt(d))/(2.0*a);\n","      float tz2 = EyePos.z + t2*EyeDir.z;\n","      if (tz2*radiusVCVSOutput > lengthVCVSOutput*0.5 || tz*radiusVCVSOutput < -0.5*lengthVCVSOutput) { discard; }\n","      else {\n","        normalVCVSOutput = orientVCVSOutput;\n","        float t3 = (lengthVCVSOutput*0.5/radiusVCVSOutput - EyePos.z)/EyeDir.z;\n","        iPoint = EyePos + t3*EyeDir;\n","        vertexVC.xyz = radiusVCVSOutput*(iPoint.x*base1 + iPoint.y*base2 + iPoint.z*orientVCVSOutput) + centerVCVSOutput;\n","        }\n","      }\n","    else {\n","      normalVCVSOutput = iPoint.x*base1 + iPoint.y*base2;\n","      vertexVC.xyz = radiusVCVSOutput*(normalVCVSOutput + iPoint.z*orientVCVSOutput) + centerVCVSOutput;\n","      }\n","    }\n","  vec4 pos = VCDCMatrix * vertexVC;\n",s]).result,o=qg.substitute(o,"//VTK::Normal::Impl","").result,t.haveSeenDepthRequest&&(o=qg.substitute(o,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float computedZ = (pos.z / pos.w + 1.0) / 2.0;","float iz = floor(computedZ * 65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result),e.Vertex=a,e.Fragment=o,n.replaceShaderValues(e,r,i)},e.setMapperShaderParameters=function(e,r,i){e.getCABO().getElementCount()&&(t.VBOBuildTime>e.getAttributeUpdateTime().getMTime()||e.getShaderSourceTime().getMTime()>e.getAttributeUpdateTime().getMTime())&&(e.getProgram().isAttributeUsed("orientMC")&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"orientMC",12,e.getCABO().getStride(),t.context.FLOAT,3,!1)||tv("Error setting 'orientMC' in shader VAO.")),e.getProgram().isAttributeUsed("offsetMC")&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO().getColorBO(),"offsetMC",0,e.getCABO().getColorBOStride(),t.context.UNSIGNED_BYTE,3,!0)||tv("Error setting 'offsetMC' in shader VAO.")),e.getProgram().isAttributeUsed("radiusMC")&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"radiusMC",24,e.getCABO().getStride(),t.context.FLOAT,1,!1)||tv("Error setting 'radiusMC' in shader VAO."))),n.setMapperShaderParameters(e,r,i)},e.setCameraShaderParameters=function(e,n,r){var i=e.getProgram(),a=n.getActiveCamera(),o=t.openGLCamera.getKeyMatrices(n);if(i.isUniformUsed("VCDCMatrix")&&i.setUniformMatrix("VCDCMatrix",o.vcdc),r.getIsIdentity())i.isUniformUsed("MCVCMatrix")&&i.setUniformMatrix("MCVCMatrix",o.wcvc),i.isUniformUsed("normalMatrix")&&i.setUniformMatrix3x3("normalMatrix",o.normalMatrix);else{var s=t.openGLActor.getKeyMatrices(),u=Ye.c.create();if(i.isUniformUsed("MCVCMatrix")&&(Ye.c.multiply(u,o.wcvc,s.mcwc),i.setUniformMatrix("MCVCMatrix",u)),i.isUniformUsed("normalMatrix")){var l=Ye.b.create();Ye.b.multiply(l,o.normalMatrix,s.normalMatrix),i.setUniformMatrix3x3("normalMatrix",l)}}i.isUniformUsed("cameraParallel")&&e.getProgram().setUniformi("cameraParallel",a.getParallelProjection())},e.getOpenGLMode=function(e,n){return t.context.TRIANGLES},e.buildBufferObjects=function(e,n){var r=t.currentInput;if(null!==r){t.renderable.mapScalars(r,1);var i=t.renderable.getColorMapColors(),a=t.primitives[t.primTypes.Tris].getCABO(),o=r.getPointData(),s=r.getPoints(),u=s.getNumberOfPoints(),l=s.getData(),c=null,f=0;a.setColorBOStride(4),a.getColorBO()||a.setColorBO(Tg.newInstance()),a.getColorBO().setOpenGLRenderWindow(t.openGLRenderWindow),i&&(f=i.getNumberOfComponents(),a.setColorOffset(4),c=i.getData(),a.setColorBOStride(8)),a.setColorComponents(f),a.setStride(28);var d=new Float32Array(7*u*12),p=new Uint8Array(12*u*(c?8:4)),h=null,g=null;null!=t.renderable.getScaleArray()&&o.hasArray(t.renderable.getScaleArray())&&(h=o.getArray(t.renderable.getScaleArray()).getData()),null!=t.renderable.getOrientationArray()&&o.hasArray(t.renderable.getOrientationArray())?g=o.getArray(t.renderable.getOrientationArray()).getData():tv(["Error setting orientationArray.\n","You have to specify the stick orientation"]);for(var m=[0,1,3,0,3,2,2,3,5,2,5,4],v=0,y=0,b=0,M=0,x=0;x<u;++x){var w=t.renderable.getLength(),A=t.renderable.getRadius();h&&(w=h[2*x],A=h[2*x+1]);for(var T=0;T<m.length;++T)v=3*x,d[b++]=l[v++],d[b++]=l[v++],d[b++]=l[v++],v=3*x,d[b++]=g[v++]*w,d[b++]=g[v++]*w,d[b++]=g[v++]*w,d[b++]=A,p[M++]=m[T]%2*255,p[M++]=m[T]>=4?255:0,p[M++]=m[T]>=2?255:0,p[M++]=255,y=x*f,c&&(p[M++]=c[y],p[M++]=c[y+1],p[M++]=c[y+2],p[M++]=c[y+3])}a.setElementCount(b/7),a.upload(d,yg.ARRAY_BUFFER),a.getColorBO().upload(p,yg.ARRAY_BUFFER),t.VBOBuildTime.modified()}}}(e,t)}var iv={newInstance:h.d(rv,"vtkOpenGLStickMapper"),extend:rv};var av={};function ov(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,av,n),zh.extend(e,t,n),t.keyMatrixTime={},h.a.obj(t.keyMatrixTime,{mtime:0}),t.normalMatrix=Ye.b.create(),t.MCWCMatrix=Ye.c.create(),h.a.setGet(e,t,["context"]),function(e,t){t.classHierarchy.push("vtkOpenGLVolume"),e.buildPass=function(n){t.renderable&&t.renderable.getVisibility()&&n&&(t.openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),e.prepareNodes(),e.addMissingNode(t.renderable.getMapper()),e.removeUnusedNodes())},e.queryPass=function(e,n){if(e){if(!t.renderable||!t.renderable.getVisibility())return;n.incrementVolumeCount()}},e.traverseVolumePass=function(n){t.renderable&&t.renderable.getVisibility()&&(!t.openGLRenderer.getSelector()||t.renderable.getPickable())&&(e.apply(n,!0),t.children[0].traverse(n),e.apply(n,!1))},e.volumePass=function(n){t.renderable&&t.renderable.getVisibility()&&(n?(t.context=e.getFirstAncestorOfType("vtkOpenGLRenderWindow").getContext(),t.context.depthMask(!1)):t.context.depthMask(!0))},e.getKeyMatrices=function(){return t.renderable.getMTime()>t.keyMatrixTime.getMTime()&&(t.renderable.computeMatrix(),Ye.c.copy(t.MCWCMatrix,t.renderable.getMatrix()),Ye.c.transpose(t.MCWCMatrix,t.MCWCMatrix),t.renderable.getIsIdentity()?Ye.b.identity(t.normalMatrix):(Ye.b.fromMat4(t.normalMatrix,t.MCWCMatrix),Ye.b.invert(t.normalMatrix,t.normalMatrix)),t.keyMatrixTime.modified()),{mcwc:t.MCWCMatrix,normalMatrix:t.normalMatrix}}}(e,t)}var sv={newInstance:h.a.newInstance(ov,"vtkOpenGLVolume"),extend:ov},uv=n(140),lv=n.n(uv),cv=n(141),fv=n.n(cv),dv=h.a.vtkWarningMacro,pv=h.a.vtkErrorMacro;var hv={context:null,VBOBuildTime:null,scalarTexture:null,scalarTextureString:null,opacityTexture:null,opacityTextureString:null,colorTexture:null,colorTextureString:null,jitterTexture:null,tris:null,framebuffer:null,copyShader:null,copyVAO:null,lastXYF:1,targetXYF:1,zBufferTexture:null,lastZBufferTexture:null,lastLightComplexity:0,fullViewportTime:1,idxToView:null,idxNormalMatrix:null,modelToView:null,displayToView:null,avgWindowArea:0,avgFrameTime:0};function gv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,hv,n),zh.extend(e,t,n),t.VBOBuildTime={},h.a.obj(t.VBOBuildTime,{mtime:0}),t.tris=em.newInstance(),t.scalarTexture=Xh.newInstance(),t.opacityTexture=Xh.newInstance(),t.colorTexture=Xh.newInstance(),t.jitterTexture=Xh.newInstance(),t.jitterTexture.setWrapS(Lh.REPEAT),t.jitterTexture.setWrapT(Lh.REPEAT),t.framebuffer=$h.newInstance(),t.idxToView=Ye.c.create(),t.idxNormalMatrix=Ye.b.create(),t.modelToView=Ye.c.create(),t.displayToView=Ye.c.create(),h.a.setGet(e,t,["context"]),function(e,t){t.classHierarchy.push("vtkOpenGLVolumeMapper"),e.buildPass=function(){t.zBufferTexture=null},e.opaqueZBufferPass=function(e,n){if(e){var r=n.getZBufferTexture();r!==t.zBufferTexture&&(t.zBufferTexture=r)}},e.volumePass=function(n,r){if(n){t.openGLRenderWindow=e.getFirstAncestorOfType("vtkOpenGLRenderWindow"),t.context=t.openGLRenderWindow.getContext(),t.tris.setOpenGLRenderWindow(t.openGLRenderWindow),t.jitterTexture.setOpenGLRenderWindow(t.openGLRenderWindow),t.framebuffer.setOpenGLRenderWindow(t.openGLRenderWindow),t.scalarTexture.setOpenGLRenderWindow(t.openGLRenderWindow),t.colorTexture.setOpenGLRenderWindow(t.openGLRenderWindow),t.opacityTexture.setOpenGLRenderWindow(t.openGLRenderWindow),t.openGLVolume=e.getFirstAncestorOfType("vtkOpenGLVolume");var i=t.openGLVolume.getRenderable();t.openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer");var a=t.openGLRenderer.getRenderable();t.openGLCamera=t.openGLRenderer.getViewNodeFor(a.getActiveCamera()),e.renderPiece(a,i)}},e.buildShaders=function(t,n,r){e.getShaderTemplate(t,n,r),e.replaceShaderValues(t,n,r)},e.getShaderTemplate=function(e,t,n){e.Vertex=lv.a,e.Fragment=fv.a,e.Geometry=""},e.replaceShaderValues=function(n,r,i){var a=n.Fragment;i.getProperty().getInterpolationType()===fh.LINEAR&&(a=qg.substitute(a,"//VTK::TrilinearOn","#define vtkTrilinearOn").result);var o=t.scalarTexture.getComponents();a=qg.substitute(a,"//VTK::NumComponents","#define vtkNumComponents ".concat(o)).result;var s=i.getProperty().getIndependentComponents();s&&(a=qg.substitute(a,"//VTK::IndependentComponentsOn","#define vtkIndependentComponentsOn").result);var u=t.currentInput.getExtent(),l=t.currentInput.getSpacing(),c=Ye.e.create();Ye.e.set(c,(u[1]-u[0])*l[0],(u[3]-u[2])*l[1],(u[5]-u[4])*l[2]);var f=Ye.e.length(c)/t.renderable.getSampleDistance();a=qg.substitute(a,"//VTK::MaximumSamplesValue","".concat(Math.ceil(f))).result,a=qg.substitute(a,"//VTK::LightComplexity","#define vtkLightComplexity ".concat(t.lastLightComplexity)).result,t.gopacity=i.getProperty().getUseGradientOpacity(0);for(var d=1;s&&!t.gopacity&&d<o;++d)i.getProperty().getUseGradientOpacity(d)&&(t.gopacity=!0);t.gopacity&&(a=qg.substitute(a,"//VTK::GradientOpacityOn","#define vtkGradientOpacityOn").result),null!==t.zBufferTexture&&(a=qg.substitute(a,"//VTK::ZBuffer::Dec",["uniform sampler2D zBufferTexture;","uniform float vpWidth;","uniform float vpHeight;"]).result,a=qg.substitute(a,"//VTK::ZBuffer::Impl",["vec4 depthVec = texture2D(zBufferTexture, vec2(gl_FragCoord.x / vpWidth, gl_FragCoord.y/vpHeight));","float zdepth = (depthVec.r*256.0 + depthVec.g)/257.0;","zdepth = zdepth * 2.0 - 1.0;","zdepth = -2.0 * camFar * camNear / (zdepth*(camFar-camNear)-(camFar+camNear)) - camNear;","zdepth = -zdepth/rayDir.z;","dists.y = min(zdepth,dists.y);"]).result),a=qg.substitute(a,"//VTK::BlendMode","".concat(t.renderable.getBlendMode())).result;var p=t.renderable.getAverageIPScalarRange();a=qg.substitute(a,"//VTK::AverageIPScalarRangeMin","".concat(p[0],".0")).result,a=qg.substitute(a,"//VTK::AverageIPScalarRangeMax","".concat(p[1],".0")).result,n.Fragment=a,e.replaceShaderLight(n,r,i)},e.replaceShaderLight=function(e,n,r){var i=e.Fragment;switch(t.lastLightComplexity){default:case 0:break;case 1:case 2:case 3:var a=0;n.getLights().forEach(function(e){e.getSwitch()>0&&(i=qg.substitute(i,"//VTK::Light::Dec",["uniform vec3 lightColor".concat(a,";"),"uniform vec3 lightDirectionVC".concat(a,"; // normalized"),"uniform vec3 lightHalfAngleVC".concat(a,"; // normalized"),"//VTK::Light::Dec"],!1).result,i=qg.substitute(i,"//VTK::Light::Impl",["  float df = abs(dot(normal.rgb, -lightDirectionVC".concat(a,"));"),"  diffuse += ((df".concat("",") * lightColor").concat(a,");"),"    float sf = pow( abs(dot(lightHalfAngleVC".concat(a,",normal.rgb)), vSpecularPower);"),"    specular += ((sf".concat("",") * lightColor").concat(a,");"),"  //VTK::Light::Impl"],!1).result,a++)})}e.Fragment=i},e.getNeedToRebuildShaders=function(n,r,i){var a=0;i.getProperty().getShade()&&(a=0,t.numberOfLights=0,r.getLights().forEach(function(e){e.getSwitch()>0&&(t.numberOfLights++,0===a&&(a=1)),1===a&&(t.numberOfLights>1||1!==e.getIntensity()||!e.lightTypeIsHeadLight())&&(a=2),a<3&&e.getPositional()&&(a=3)}));var o=!1;return t.lastLightComplexity!==a&&(t.lastLightComplexity=a,o=!0),!!(0===n.getProgram()||o||t.lastHaveSeenDepthRequest!==t.haveSeenDepthRequest||!!t.lastZBufferTexture!=!!t.zBufferTexture||n.getShaderSourceTime().getMTime()<e.getMTime()||n.getShaderSourceTime().getMTime()<i.getMTime()||n.getShaderSourceTime().getMTime()<t.renderable.getMTime()||n.getShaderSourceTime().getMTime()<t.currentInput.getMTime())&&(t.lastZBufferTexture=t.zBufferTexture,!0)},e.updateShaders=function(n,r,i){if(t.lastBoundBO=n,e.getNeedToRebuildShaders(n,r,i)){var a={Vertex:null,Fragment:null,Geometry:null};e.buildShaders(a,r,i);var o=t.openGLRenderWindow.getShaderCache().readyShaderProgramArray(a.Vertex,a.Fragment,a.Geometry);o!==n.getProgram()&&(n.setProgram(o),n.getVAO().releaseGraphicsResources()),n.getShaderSourceTime().modified()}else t.openGLRenderWindow.getShaderCache().readyShaderProgram(n.getProgram());n.getVAO().bind(),e.setMapperShaderParameters(n,r,i),e.setCameraShaderParameters(n,r,i),e.setPropertyShaderParameters(n,r,i)},e.setMapperShaderParameters=function(n,r,i){var a=n.getProgram();if(n.getCABO().getElementCount()&&(t.VBOBuildTime.getMTime()>n.getAttributeUpdateTime().getMTime()||n.getShaderSourceTime().getMTime()>n.getAttributeUpdateTime().getMTime())&&(a.isAttributeUsed("vertexDC")&&(n.getVAO().addAttributeArray(a,n.getCABO(),"vertexDC",n.getCABO().getVertexOffset(),n.getCABO().getStride(),t.context.FLOAT,3,t.context.FALSE)||pv("Error setting vertexDC in shader VAO.")),n.getAttributeUpdateTime().modified()),a.setUniformi("texture1",t.scalarTexture.getTextureUnit()),a.setUniformf("sampleDistance",t.renderable.getSampleDistance()),null!==t.zBufferTexture){a.setUniformi("zBufferTexture",t.zBufferTexture.getTextureUnit());var o=e.getRenderTargetSize();a.setUniformf("vpWidth",o[0]),a.setUniformf("vpHeight",o[1])}},e.setCameraShaderParameters=function(e,n,r){var i=t.openGLCamera.getKeyMatrices(n),a=t.openGLVolume.getKeyMatrices();Ye.c.multiply(t.modelToView,i.wcvc,a.mcwc);var o=e.getProgram(),s=t.openGLCamera.getRenderable().getClippingRange();o.setUniformf("camThick",s[1]-s[0]),o.setUniformf("camNear",s[0]),o.setUniformf("camFar",s[1]);for(var u=t.currentInput.getBounds(),l=t.currentInput.getDimensions(),c=Ye.e.create(),f=Ye.e.create(),d=1,p=-1,h=1,g=-1,m=0;m<8;++m){Ye.e.set(c,u[m%2],u[2+Math.floor(m/2)%2],u[4+Math.floor(m/4)]),Ye.e.transformMat4(c,c,t.modelToView),Ye.e.normalize(f,c);var v=-s[0]/c[2];Ye.e.scale(c,f,v),Ye.e.transformMat4(c,c,i.vcdc),d=Math.min(c[0],d),p=Math.max(c[0],p),h=Math.min(c[1],h),g=Math.max(c[1],g)}o.setUniformf("dcxmin",d),o.setUniformf("dcxmax",p),o.setUniformf("dcymin",h),o.setUniformf("dcymax",g);var y=t.currentInput.getExtent(),b=t.currentInput.getSpacing(),M=Ye.e.create();Ye.e.set(M,(y[1]-y[0]+1)*b[0],(y[3]-y[2]+1)*b[1],(y[5]-y[4]+1)*b[2]),o.setUniform3f("vSpacing",b[0],b[1],b[2]),Ye.e.set(c,y[0],y[2],y[4]),t.currentInput.indexToWorldVec3(c,c),Ye.e.transformMat4(c,c,t.modelToView),o.setUniform3f("vOriginVC",c[0],c[1],c[2]);var x=t.currentInput.getIndexToWorld();Ye.c.multiply(t.idxToView,t.modelToView,x),Ye.b.multiply(t.idxNormalMatrix,i.normalMatrix,a.normalMatrix),Ye.b.multiply(t.idxNormalMatrix,t.idxNormalMatrix,t.currentInput.getDirection());var w=Ye.e.length(M)/t.renderable.getSampleDistance();w>t.renderable.getMaximumSamplesPerRay()&&dv("The number of steps required ".concat(Math.ceil(w)," is larger than the\n        specified maximum number of steps ").concat(t.renderable.getMaximumSamplesPerRay(),".\n        Please either change the\n        volumeMapper sampleDistance or its maximum number of samples."));var A=Ye.e.create();if(Ye.e.set(A,1,1,1),Ye.e.divide(A,A,M),o.setUniform3f("vVCToIJK",A[0],A[1],A[2]),o.setUniform3i("volumeDimensions",l[0],l[1],l[2]),!t.openGLRenderWindow.getWebgl2()){var T=t.scalarTexture.getVolumeInfo();o.setUniformf("texWidth",t.scalarTexture.getWidth()),o.setUniformf("texHeight",t.scalarTexture.getHeight()),o.setUniformi("xreps",T.xreps),o.setUniformf("xstride",T.xstride),o.setUniformf("ystride",T.ystride)}for(var C=Ye.e.create(),S=Ye.e.create(),D=0;D<6;++D){switch(D){default:case 0:Ye.e.set(C,1,0,0),Ye.e.set(S,y[1],y[3],y[5]);break;case 1:Ye.e.set(C,-1,0,0),Ye.e.set(S,y[0],y[2],y[4]);break;case 2:Ye.e.set(C,0,1,0),Ye.e.set(S,y[1],y[3],y[5]);break;case 3:Ye.e.set(C,0,-1,0),Ye.e.set(S,y[0],y[2],y[4]);break;case 4:Ye.e.set(C,0,0,1),Ye.e.set(S,y[1],y[3],y[5]);break;case 5:Ye.e.set(C,0,0,-1),Ye.e.set(S,y[0],y[2],y[4])}Ye.e.transformMat3(C,C,t.idxNormalMatrix),Ye.e.transformMat4(S,S,t.idxToView);var I=-1*Ye.e.dot(S,C);o.setUniform3f("vPlaneNormal".concat(D),C[0],C[1],C[2]),o.setUniformf("vPlaneDistance".concat(D),I)}switch(Ye.c.invert(t.displayToView,i.vcdc),o.setUniformMatrix("DCVCMatrix",t.displayToView),t.lastLightComplexity){default:case 0:break;case 1:case 2:case 3:var E=0,N=[];n.getLights().forEach(function(e){if(e.getSwitch()>0){var t=e.getColor(),n=e.getIntensity();N[0]=t[0]*n,N[1]=t[1]*n,N[2]=t[2]*n,o.setUniform3fArray("lightColor".concat(E),N);var r=e.getDirection();Ye.e.set(C,r[0],r[1],r[2]),Ye.e.transformMat3(C,C,i.normalMatrix),o.setUniform3f("lightDirectionVC".concat(E),C[0],C[1],C[2]);var a=[-.5*C[0],-.5*C[1],-.5*(C[2]-1)];o.setUniform3fArray("lightHalfAngleVC".concat(E),a),E++}})}},e.setPropertyShaderParameters=function(e,n,r){var i=e.getProgram();i.setUniformi("ctexture",t.colorTexture.getTextureUnit()),i.setUniformi("otexture",t.opacityTexture.getTextureUnit()),i.setUniformi("jtexture",t.jitterTexture.getTextureUnit());var a=t.scalarTexture.getVolumeInfo(),o=r.getProperty(),s=t.scalarTexture.getComponents(),u=r.getProperty().getIndependentComponents();if(u&&s>=2){for(var l=0,c=0;c<s;++c)l+=r.getProperty().getComponentWeight(c);for(var f=0;f<s;++f)i.setUniformf("mix".concat(f),r.getProperty().getComponentWeight(f)/l)}for(var d=0;d<s;++d){var p=u?d:0,h=a.scale[d],g=o.getScalarOpacity(p).getRange(),m=h/(g[1]-g[0]),v=(a.offset[d]-g[0])/(g[1]-g[0]);i.setUniformf("oshift".concat(d),v),i.setUniformf("oscale".concat(d),m);var y=o.getRGBTransferFunction(p).getRange();i.setUniformf("cshift".concat(d),(a.offset[d]-y[0])/(y[1]-y[0])),i.setUniformf("cscale".concat(d),h/(y[1]-y[0]))}if(t.gopacity)if(u)for(var b=0;b<s;++b){var M=a.scale[b];if(o.getUseGradientOpacity(b)){var x=o.getGradientOpacityMinimumOpacity(b),w=o.getGradientOpacityMaximumOpacity(b);i.setUniformf("gomin".concat(b),x),i.setUniformf("gomax".concat(b),w);var A=[o.getGradientOpacityMinimumValue(b),o.getGradientOpacityMaximumValue(b)];i.setUniformf("goscale".concat(b),M*(w-x)/(A[1]-A[0])),i.setUniformf("goshift".concat(b),-A[0]*(w-x)/(A[1]-A[0])+x)}else i.setUniformf("gomin".concat(b),1),i.setUniformf("gomax".concat(b),1),i.setUniformf("goscale".concat(b),0),i.setUniformf("goshift".concat(b),1)}else{var T=a.scale[s-1],C=o.getGradientOpacityMinimumOpacity(0),S=o.getGradientOpacityMaximumOpacity(0);i.setUniformf("gomin0",C),i.setUniformf("gomax0",S);var D=[o.getGradientOpacityMinimumValue(0),o.getGradientOpacityMaximumValue(0)];i.setUniformf("goscale0",T*(S-C)/(D[1]-D[0])),i.setUniformf("goshift0",-D[0]*(S-C)/(D[1]-D[0])+C)}t.lastLightComplexity>0&&(i.setUniformf("vAmbient",o.getAmbient()),i.setUniformf("vDiffuse",o.getDiffuse()),i.setUniformf("vSpecular",o.getSpecular()),i.setUniformf("vSpecularPower",o.getSpecularPower()))},e.getRenderTargetSize=function(){if(t.lastXYF>1.43){var e=t.framebuffer.getSize();return[t.fvp[0]*e[0],t.fvp[1]*e[1]]}return t.openGLRenderWindow.getFramebufferSize()},e.renderPieceStart=function(n,r){if(t.renderable.getAutoAdjustSampleDistances()){var i=n.getVTKWindow().getInteractor(),a=i.getLastFrameTime();if(t.avgFrameTime=.97*t.avgFrameTime+.03*a,t.avgWindowArea=.97*t.avgWindowArea+.03/(t.lastXYF*t.lastXYF),n.getVTKWindow().getInteractor().isAnimating()){var o=Math.sqrt(t.avgFrameTime*i.getDesiredUpdateRate()/t.avgWindowArea);o>10&&(o=10),t.targetXYF=o}else t.targetXYF=Math.sqrt(t.avgFrameTime*i.getStillUpdateRate()/t.avgWindowArea);t.targetXYF<1.53&&t.targetXYF>1.33&&(t.targetXYF=t.lastXYF),Math.abs(1-t.targetXYF/t.lastXYF)<.1&&(t.targetXYF=t.lastXYF),t.lastXYF=t.targetXYF}else t.lastXYF=t.renderable.getImageSampleDistance();t.lastXYF<=1.43&&(t.lastXYF=1);var s=t.lastXYF,u=t.openGLRenderWindow.getFramebufferSize();if(s>1.43){if(t.framebuffer.saveCurrentBindingsAndBuffers(),null===t.framebuffer.getGLFramebuffer())t.framebuffer.create(Math.floor(.7*u[0]),Math.floor(.7*u[1])),t.framebuffer.populateFramebuffer();else{var l=t.framebuffer.getSize();l[0]===Math.floor(.7*u[0])&&l[1]===Math.floor(.7*u[1])||(console.log("resizing"),t.framebuffer.create(Math.floor(.7*u[0]),Math.floor(.7*u[1])),t.framebuffer.populateFramebuffer())}t.framebuffer.bind();var c=t.context;c.clearColor(0,0,0,0),c.colorMask(!0,!0,!0,!0),c.clear(c.COLOR_BUFFER_BIT),c.viewport(0,0,u[0]/s,u[1]/s),t.fvp=[Math.floor(u[0]/s)/Math.floor(.7*u[0]),Math.floor(u[1]/s)/Math.floor(.7*u[1])]}t.context.disable(t.context.DEPTH_TEST),e.updateBufferObjects(n,r),r.getProperty().getInterpolationType()===fh.NEAREST?(t.scalarTexture.setMinificationFilter(Ph.NEAREST),t.scalarTexture.setMagnificationFilter(Ph.NEAREST)):(t.scalarTexture.setMinificationFilter(Ph.LINEAR),t.scalarTexture.setMagnificationFilter(Ph.LINEAR)),t.lastBoundBO=null,null!==t.zBufferTexture&&t.zBufferTexture.activate()},e.renderPieceDraw=function(n,r){var i=t.context;t.scalarTexture.activate(),t.opacityTexture.activate(),t.colorTexture.activate(),t.jitterTexture.activate(),e.updateShaders(t.tris,n,r),i.drawArrays(i.TRIANGLES,0,t.tris.getCABO().getElementCount()),t.tris.getVAO().release(),t.scalarTexture.deactivate(),t.colorTexture.deactivate(),t.opacityTexture.deactivate(),t.jitterTexture.deactivate()},e.renderPieceFinish=function(e,n){if(null!==t.zBufferTexture&&t.zBufferTexture.deactivate(),t.lastXYF>1.43){if(t.framebuffer.restorePreviousBindingsAndBuffers(),null===t.copyShader){t.copyShader=t.openGLRenderWindow.getShaderCache().readyShaderProgramArray(["//VTK::System::Dec","attribute vec4 vertexDC;","uniform vec2 tfactor;","varying vec2 tcoord;","void main() { tcoord = vec2(vertexDC.x*0.5 + 0.5, vertexDC.y*0.5 + 0.5) * tfactor; gl_Position = vertexDC; }"].join("\n"),["//VTK::System::Dec","//VTK::Output::Dec","uniform sampler2D texture1;","varying vec2 tcoord;","void main() { gl_FragData[0] = texture2D(texture1,tcoord); }"].join("\n"),"");var r=t.copyShader;t.copyVAO=Zg.newInstance(),t.copyVAO.setOpenGLRenderWindow(t.openGLRenderWindow),t.tris.getCABO().bind(),t.copyVAO.addAttributeArray(r,t.tris.getCABO(),"vertexDC",t.tris.getCABO().getVertexOffset(),t.tris.getCABO().getStride(),t.context.FLOAT,3,t.context.FALSE)||pv("Error setting vertexDC in copy shader VAO.")}else t.openGLRenderWindow.getShaderCache().readyShaderProgram(t.copyShader);var i=t.openGLRenderWindow.getFramebufferSize();t.context.viewport(0,0,i[0],i[1]);var a=t.framebuffer.getColorTexture();a.activate(),t.copyShader.setUniformi("texture",a.getTextureUnit()),t.copyShader.setUniform2f("tfactor",t.fvp[0],t.fvp[1]);var o=t.context;o.blendFuncSeparate(o.ONE,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA),t.context.drawArrays(t.context.TRIANGLES,0,t.tris.getCABO().getElementCount()),a.deactivate(),o.blendFuncSeparate(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA)}},e.renderPiece=function(n,r){e.invokeEvent({type:"StartEvent"}),t.renderable.update(),t.currentInput=t.renderable.getInputData(),e.invokeEvent({type:"EndEvent"}),t.currentInput?(e.renderPieceStart(n,r),e.renderPieceDraw(n,r),e.renderPieceFinish(n,r)):pv("No input!")},e.computeBounds=function(n,r){e.getInput()?t.bounds=e.getInput().getBounds():f.uninitializeBounds(t.Bounds)},e.updateBufferObjects=function(t,n){e.getNeedToRebuildBufferObjects(t,n)&&e.buildBufferObjects(t,n)},e.getNeedToRebuildBufferObjects=function(n,r){return t.VBOBuildTime.getMTime()<e.getMTime()||t.VBOBuildTime.getMTime()<r.getMTime()||t.VBOBuildTime.getMTime()<t.renderable.getMTime()||t.VBOBuildTime.getMTime()<r.getProperty().getMTime()||t.VBOBuildTime.getMTime()<t.currentInput.getMTime()},e.buildBufferObjects=function(e,n){var r=t.currentInput;if(null!==r){var a=n.getProperty();if(!t.jitterTexture.getHandle()){for(var o=new Uint8Array(1024),s=0;s<1024;++s)o[s]=255*Math.random();t.jitterTexture.setMinificationFilter(Ph.LINEAR),t.jitterTexture.setMagnificationFilter(Ph.LINEAR),t.jitterTexture.create2DFromRaw(32,32,1,Tt.b.UNSIGNED_CHAR,o)}var u=r.getPointData().getScalars().getNumberOfComponents(),l=a.getIndependentComponents()?u:1,c="".concat(a.getMTime());if(t.opacityTextureString!==c){for(var f=2048*l,d=new Float32Array(f),p=new Float32Array(1024),h=0;h<l;++h){var g=a.getScalarOpacity(h),m=t.renderable.getSampleDistance()/a.getScalarOpacityUnitDistance(h),v=g.getRange();g.getTable(v[0],v[1],1024,p,1);for(var y=0;y<1024;++y)d[1024*h*2+y]=1-Math.pow(1-p[y],m),d[1024*h*2+y+1024]=d[1024*h*2+y]}if(t.opacityTexture.releaseGraphicsResources(t.openGLRenderWindow),t.opacityTexture.setMinificationFilter(Ph.LINEAR),t.opacityTexture.setMagnificationFilter(Ph.LINEAR),t.openGLRenderWindow.getWebgl2()||t.context.getExtension("OES_texture_float")&&t.context.getExtension("OES_texture_float_linear"))t.opacityTexture.create2DFromRaw(1024,2*l,1,Tt.b.FLOAT,d);else{for(var b=new Uint8Array(f),M=0;M<f;++M)b[M]=255*d[M];t.opacityTexture.create2DFromRaw(1024,2*l,1,Tt.b.UNSIGNED_CHAR,b)}t.opacityTextureString=c}if(c="".concat(a.getMTime()),t.colorTextureString!==c){for(var x=new Uint8Array(2048*l*3),w=new Float32Array(3072),A=0;A<l;++A){var T=a.getRGBTransferFunction(A),C=T.getRange();T.getTable(C[0],C[1],1024,w,1);for(var S=0;S<3072;++S)x[1024*A*6+S]=255*w[S],x[1024*A*6+S+3072]=255*w[S]}t.colorTexture.releaseGraphicsResources(t.openGLRenderWindow),t.colorTexture.setMinificationFilter(Ph.LINEAR),t.colorTexture.setMagnificationFilter(Ph.LINEAR),t.colorTexture.create2DFromRaw(1024,2*l,3,Tt.b.UNSIGNED_CHAR,x),t.colorTextureString=c}if(c="".concat(r.getMTime()),t.scalarTextureString!==c){var D=r.getDimensions();t.scalarTexture.releaseGraphicsResources(t.openGLRenderWindow),t.scalarTexture.resetFormatAndType(),t.scalarTexture.create3DFilterableFromRaw(D[0],D[1],D[2],u,r.getPointData().getScalars().getDataType(),r.getPointData().getScalars().getData()),t.scalarTextureString=c}if(!t.tris.getCABO().getElementCount()){for(var I=new Float32Array(12),E=0;E<4;E++)I[3*E]=E%2*2-1,I[3*E+1]=E>1?1:-1,I[3*E+2]=-1;var N=new Uint16Array(8);N[0]=3,N[1]=0,N[2]=1,N[3]=3,N[4]=3,N[5]=0,N[6]=3,N[7]=2;var O=i.a.newInstance({numberOfComponents:3,values:I});O.setName("points");var _=i.a.newInstance({numberOfComponents:1,values:N});t.tris.getCABO().createVBO(_,"polys",kg.a.SURFACE,{points:O,cellOffset:0})}t.VBOBuildTime.modified()}}}(e,t)}var mv={newInstance:h.a.newInstance(gv,"vtkOpenGLVolumeMapper"),extend:gv};var vv={};function yv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,vv,n),h.a.obj(e,t),function(e,t){t.overrides={},t.classHierarchy.push("vtkViewNodeFactory"),e.createNode=function(n){if(n.isDeleted())return null;for(var r=0,i=n.getClassName(r++),a=!1,o=Object.keys(t.overrides);i&&!a;)-1!==o.indexOf(i)?a=!0:i=n.getClassName(r++);if(!a)return null;var s=t.overrides[i]();return s.setMyFactory(e),s},e.registerOverride=function(e,n){t.overrides[e]=n}}(e,t)}var bv={newInstance:h.a.newInstance(yv,"vtkViewNodeFactory"),extend:yv};var Mv={};function xv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Mv,n),bv.extend(e,t,n),function(e,t){t.classHierarchy.push("vtkOpenGLViewNodeFactory")}(0,t),e.registerOverride("vtkActor",fg.newInstance),e.registerOverride("vtkActor2D",hg.newInstance),e.registerOverride("vtkCamera",vg.newInstance),e.registerOverride("vtkGlyph3DMapper",Sm.newInstance),e.registerOverride("vtkImageMapper",Om.newInstance),e.registerOverride("vtkImageSlice",Pm.newInstance),e.registerOverride("vtkMapper",vm.newInstance),e.registerOverride("vtkPixelSpaceCallbackMapper",Bm.newInstance),e.registerOverride("vtkRenderer",Um.newInstance),e.registerOverride("vtkSkybox",Ym.newInstance),e.registerOverride("vtkSphereMapper",Jm.newInstance),e.registerOverride("vtkStickMapper",iv.newInstance),e.registerOverride("vtkTexture",Xh.newInstance),e.registerOverride("vtkVolume",sv.newInstance),e.registerOverride("vtkVolumeMapper",mv.newInstance),e.registerOverride("vtkWidgetRepresentation",ug.newInstance)}var wv={newInstance:h.a.newInstance(xv,"vtkOpenGLViewNodeFactory"),extend:xv},Av=n(142),Tv=n.n(Av),Cv=["lastShaderBound","context","openGLRenderWindow"];var Sv={lastShaderBound:null,shaderPrograms:null,context:null,openGLRenderWindow:null};function Dv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.assign(t,Sv,n),t.shaderPrograms={},h.a.obj(e,t),h.a.setGet(e,t,Cv),function(e,t){t.classHierarchy.push("vtkShaderCache"),e.replaceShaderValues=function(e,n,r){var i=n;r.length>0&&(i=qg.substitute(i,"VSOut","GSOut").result);var a=t.openGLRenderWindow.getWebgl2(),o="\n",s="#version 100\n";a?s="#version 300 es\n#define attribute in\n#define textureCube texture\n#define texture2D texture\n#define textureCubeLod textureLod\n#define texture2DLod textureLod\n":(t.context.getExtension("OES_standard_derivatives"),t.context.getExtension("EXT_frag_depth")&&(o="#extension GL_EXT_frag_depth : enable\n"),t.context.getExtension("EXT_shader_texture_lod")&&(o+="#extension GL_EXT_shader_texture_lod : enable\n#define textureCubeLod textureCubeLodEXT\n#define texture2DLod texture2DLodEXT")),i=qg.substitute(i,"//VTK::System::Dec",["".concat(s,"\n"),a?"":"#extension GL_OES_standard_derivatives : enable\n",o,"#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","precision highp int;","#else","precision mediump float;","precision mediump int;","#endif"]).result;var u=qg.substitute(e,"//VTK::System::Dec",["".concat(s,"\n"),"#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","precision highp int;","#else","precision mediump float;","precision mediump int;","#endif"]).result;return a&&(u=qg.substitute(u,"varying","out").result,i=qg.substitute(i,"varying","in").result,i=qg.substitute(i,"gl_FragData\\[0\\]","fragOutput0").result,i=qg.substitute(i,"//VTK::Output::Dec","layout(location = 0) out vec4 fragOutput0;").result),{VSSource:u,FSSource:i,GSSource:qg.substitute(r,"//VTK::System::Dec",s).result}},e.readyShaderProgramArray=function(t,n,r){var i=e.replaceShaderValues(t,n,r),a=e.getShaderProgram(i.VSSource,i.FSSource,i.GSSource);return e.readyShaderProgram(a)},e.readyShaderProgram=function(t){return t&&(t.getCompiled()||t.compileShader())&&e.bindShader(t)?t:null},e.getShaderProgram=function(e,n,r){var i="".concat(e).concat(n).concat(r),a=Tv()(i);if(-1===Object.keys(t.shaderPrograms).indexOf(a)){var o=qg.newInstance();return o.setContext(t.context),o.getVertexShader().setSource(e),o.getFragmentShader().setSource(n),r&&o.getGeometryShader().setSource(r),o.setMd5Hash(a),t.shaderPrograms[a]=o,o}return t.shaderPrograms[a]},e.releaseGraphicsResources=function(n){e.releaseCurrentShader(),Object.keys(t.shaderPrograms).map(function(e){return t.shaderPrograms[e]}).forEach(function(e){return e.releaseGraphicsResources(n)})},e.releaseGraphicsResources=function(){t.astShaderBound&&(t.lastShaderBound.release(),t.lastShaderBound=null)},e.bindShader=function(e){return t.lastShaderBound===e?1:(t.lastShaderBound&&t.lastShaderBound.release(),e.bind(),t.lastShaderBound=e,1)}}(e,t),Object.freeze(e)}var Iv={newInstance:h.a.newInstance(Dv,"vtkShaderCache"),extend:Dv},Ev=h.a.vtkErrorMacro;var Nv={context:null,numberOfTextureUnits:0,textureUnits:0};function Ov(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Nv,n),h.a.obj(e,t),t.textureUnits=[],h.a.get(e,t,["numberOfTextureUnits"]),h.a.setGet(e,t,["context"]),function(e,t){t.classHierarchy.push("vtkOpenGLTextureUnitManager"),e.deleteTable=function(){for(var e=0;e<t.numberOfTextureUnits;++e)!0===t.textureUnits[e]&&Ev("some texture units  were not properly released");t.textureUnits=[],t.numberOfTextureUnits=0},e.setContext=function(n){if(t.context!==n){if(0!==t.context&&e.deleteTable(),t.context=n,t.context){t.numberOfTextureUnits=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS);for(var r=0;r<t.numberOfTextureUnits;++r)t.textureUnits[r]=!1}e.modified()}},e.allocate=function(){for(var n=0;n<t.numberOfTextureUnits;n++)if(!e.isAllocated(n))return t.textureUnits[n]=!0,n;return-1},e.allocateUnit=function(n){return e.isAllocated(n)?-1:(t.textureUnits[n]=!0,n)},e.isAllocated=function(e){return t.textureUnits[e]},e.free=function(e){t.textureUnits[e]=!1}}(e,t)}var _v={newInstance:h.a.newInstance(Ov,"vtkOpenGLTextureUnitManager"),extend:Ov},Lv=n(143),Pv=n.n(Lv);function kv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Rv(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var jv=h.a.vtkDebugMacro,Bv=h.a.vtkErrorMacro,zv=-1!==navigator.userAgent.indexOf("Chrome");function Fv(e,t,n){var r=e.createFramebuffer(),i=e.createTexture();e.bindTexture(e.TEXTURE_2D,i),e.texImage2D(e.TEXTURE_2D,0,t,2,2,0,t,n,null),e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,i,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER);return e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindTexture(e.TEXTURE_2D,null),a===e.FRAMEBUFFER_COMPLETE}function Vv(e,t){t.classHierarchy.push("vtkOpenGLRenderWindow"),e.onModified(function(){t.renderable&&(t.canvas.setAttribute("width",t.size[0]),t.canvas.setAttribute("height",t.size[1])),t.viewStream&&t.viewStream.setSize(t.size[0],t.size[1]),t.canvas.style.display=t.useOffScreen?"none":"block",t.el&&(t.el.style.cursor=t.cursorVisibility?t.cursor:"none")}),e.buildPass=function(n){if(n){if(!t.renderable)return;e.prepareNodes(),e.addMissingNodes(t.renderable.getRenderersByReference()),e.removeUnusedNodes(),e.initialize(),t.children.forEach(function(t){t.setOpenGLRenderWindow(e)})}},e.initialize=function(){if(!t.initialized){t.context=e.get3DContext(),t.textureUnitManager=_v.newInstance(),t.textureUnitManager.setContext(t.context),t.shaderCache.setContext(t.context);var n=t.context;n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.depthFunc(n.LEQUAL),n.enable(n.BLEND),t.initialized=!0}},e.makeCurrent=function(){t.context.makeCurrent()},e.setContainer=function(n){t.el&&t.el!==n&&(t.canvas.parentNode!==t.el&&Bv("Error: canvas parent node does not match container"),t.el.removeChild(t.canvas),t.el.contains(t.bgImage)&&t.el.removeChild(t.bgImage)),t.el!==n&&(t.el=n,t.el&&t.el.appendChild(t.canvas),t.useBackgroundImage&&t.el.appendChild(t.bgImage),e.modified())},e.getFramebufferSize=function(){return t.activeFramebuffer?t.activeFramebuffer.getSize():t.size},e.isInViewport=function(t,n,r){var i=r.getViewportByReference(),a=e.getFramebufferSize();return i[0]*a[0]<=t&&i[2]*a[0]>=t&&i[1]*a[1]<=n&&i[3]*a[1]>=n},e.getViewportSize=function(t){var n=t.getViewportByReference(),r=e.getFramebufferSize();return[(n[2]-n[0])*r[0],(n[3]-n[1])*r[1]]},e.getViewportCenter=function(t){var n=e.getViewportSize(t);return[.5*n[0],.5*n[1]]},e.displayToNormalizedDisplay=function(t,n,r){var i=e.getFramebufferSize();return[t/i[0],n/i[1],r]},e.normalizedDisplayToDisplay=function(t,n,r){var i=e.getFramebufferSize();return[t*i[0],n*i[1],r]},e.worldToView=function(t,n,r,i){var a=e.getViewportSize(i);return i.worldToView(t,n,r,a[0]/a[1])},e.viewToWorld=function(t,n,r,i){var a=e.getViewportSize(i);return i.viewToWorld(t,n,r,a[0]/a[1])},e.worldToDisplay=function(t,n,r,i){var a=e.worldToView(t,n,r,i),o=i.viewToNormalizedDisplay(a[0],a[1],a[2]);return e.normalizedDisplayToDisplay(o[0],o[1],o[2])},e.displayToWorld=function(t,n,r,i){var a=e.displayToNormalizedDisplay(t,n,r),o=i.normalizedDisplayToView(a[0],a[1],a[2]);return e.viewToWorld(o[0],o[1],o[2],i)},e.normalizedDisplayToViewport=function(t,n,r,i){var a=i.getViewportByReference();a=e.normalizedDisplayToDisplay(a[0],a[1],0);var o=e.normalizedDisplayToDisplay(t,n,r);return[o[0]-a[0]-.5,o[1]-a[1]-.5,r]},e.viewportToNormalizedViewport=function(t,n,r,i){var a=e.getViewportSize(i);return a&&0!==a[0]&&0!==a[1]?[t/(a[0]-1),n/(a[1]-1),r]:[t,n,r]},e.normalizedViewportToViewport=function(t,n,r){var i=e.getFramebufferSize();return[t*(i[0]-1),n*(i[1]-1),r]},e.displayToLocalDisplay=function(t,n,r){return[t,e.getFramebufferSize()[1]-n-1,r]},e.viewportToNormalizedDisplay=function(t,n,r,i){var a=i.getViewportByReference(),o=t+(a=e.normalizedDisplayToDisplay(a[0],a[1],0))[0]+.5,s=n+a[1]+.5;return e.displayToNormalizedDisplay(o,s,r)},e.getPixelData=function(e,n,r,i){var a=new Uint8Array((r-e+1)*(i-n+1)*4);return t.context.readPixels(e,n,r-e+1,i-n+1,t.context.RGBA,t.context.UNSIGNED_BYTE,a),a},e.get3DContext=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{preserveDrawingBuffer:!1,depth:!0,alpha:!0},r=null,i="undefined"!=typeof WebGL2RenderingContext;t.webgl2=!1,t.defaultToWebgl2&&i&&(r=t.canvas.getContext("webgl2"))&&(t.webgl2=!0,jv("using webgl2")),r||(jv("using webgl1"),r=t.canvas.getContext("webgl",n)||t.canvas.getContext("experimental-webgl",n));new Pv.a({PROVIDE_MOBILE_VRDISPLAY:!0,DIRTY_SUBMIT_FRAME_BINDINGS:!1,BUFFER_SCALE:.75});return navigator.getVRDisplays&&navigator.getVRDisplays().then(function(n){n.length>0&&(t.vrDisplay=n[0],t.vrDisplay.depthNear=.01,t.vrDisplay.depthFar=100,e.invokeHaveVRDisplay())}),t.canvas.addEventListener("webglcontextlost",function(e){e.preventDefault()},!1),t.canvas.addEventListener("webglcontextrestored",e.restoreContext,!1),r},e.startVR=function(){t.oldCanvasSize=t.size.slice(),t.vrDisplay.capabilities.canPresent?t.vrDisplay.requestPresent([{source:t.canvas}]).then(function(){if(t.el&&t.vrDisplay.capabilities.hasExternalDisplay&&t.hideCanvasInVR&&(t.el.style.display="none"),t.queryVRSize){var n=t.vrDisplay.getEyeParameters("left"),r=t.vrDisplay.getEyeParameters("right"),i=Math.floor(n.renderWidth+r.renderWidth),a=Math.floor(Math.max(n.renderHeight,r.renderHeight));e.setSize(i,a)}else e.setSize(t.vrResolution);t.renderable.getRenderers()[0].resetCamera(),t.vrFrameData=new VRFrameData,t.renderable.getInteractor().switchToVRAnimation(),t.vrSceneFrame=t.vrDisplay.requestAnimationFrame(e.vrRender),zv&&(t.vrSceneFrame=t.vrDisplay.requestAnimationFrame(e.vrRender))}).catch(function(){console.error("failed to requestPresent")}):Bv("vrDisplay is not connected")},e.stopVR=function(){t.renderable.getInteractor().returnFromVRAnimation(),t.vrDisplay.exitPresent(),t.vrDisplay.cancelAnimationFrame(t.vrSceneFrame),e.setSize.apply(e,Rv(t.oldCanvasSize)),t.el&&t.vrDisplay.capabilities.hasExternalDisplay&&(t.el.style.display="block");var n=t.renderable.getRenderers()[0];n.getActiveCamera().setProjectionMatrix(null),n.setViewport(0,0,1,1),e.traverseAllPasses()},e.vrRender=function(){if(t.vrDisplay.isPresenting){t.renderable.getInteractor().updateGamepads(t.vrDisplay.displayId),t.vrSceneFrame=t.vrDisplay.requestAnimationFrame(e.vrRender),t.vrDisplay.getFrameData(t.vrFrameData);var n=t.renderable.getRenderers()[0];n.setViewport(0,0,.5,1),n.getActiveCamera().computeViewParametersFromPhysicalMatrix(t.vrFrameData.leftViewMatrix),n.getActiveCamera().setProjectionMatrix(t.vrFrameData.leftProjectionMatrix),e.traverseAllPasses(),n.setViewport(.5,0,1,1),n.getActiveCamera().computeViewParametersFromPhysicalMatrix(t.vrFrameData.rightViewMatrix),n.getActiveCamera().setProjectionMatrix(t.vrFrameData.rightProjectionMatrix),e.traverseAllPasses(),t.vrDisplay.submitFrame()}},e.restoreContext=function(){var t=ng.newInstance();t.setCurrentOperation("Release"),t.traverse(e,null)},e.activateTexture=function(n){var r=t.textureResourceIds.get(n);if(void 0===r){var i=e.getTextureUnitManager().allocate();i<0?Bv("Hardware does not support the number of textures defined."):(t.textureResourceIds.set(n,i),t.context.activeTexture(t.context.TEXTURE0+i))}else t.context.activeTexture(t.context.TEXTURE0+r)},e.deactivateTexture=function(n){var r=t.textureResourceIds.get(n);void 0!==r&&(e.getTextureUnitManager().free(r),t.textureResourceIds.delete(n))},e.getTextureUnitForTexture=function(e){var n=t.textureResourceIds.get(e);return void 0!==n?n:-1},e.getDefaultTextureInternalFormat=function(e,n,r){if(t.webgl2)switch(e){case Tt.b.UNSIGNED_CHAR:switch(n){case 1:return t.context.R8;case 2:return t.context.RG8;case 3:return t.context.RGB8;case 4:default:return t.context.RGBA8}default:case Tt.b.FLOAT:switch(n){case 1:return t.context.R16F;case 2:return t.context.RG16F;case 3:return t.context.RGB16F;case 4:default:return t.context.RGBA16F}}switch(n){case 1:return t.context.LUMINANCE;case 2:return t.context.LUMINANCE_ALPHA;case 3:return t.context.RGB;case 4:default:return t.context.RGBA}},e.setBackgroundImage=function(e){t.bgImage.src=e.src},e.setUseBackgroundImage=function(e){t.useBackgroundImage=e,t.useBackgroundImage&&!t.el.contains(t.bgImage)?t.el.appendChild(t.bgImage):!t.useBackgroundImage&&t.el.contains(t.bgImage)&&t.el.removeChild(t.bgImage)},e.captureNextImage=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image/png";if(t.deleted)return null;t.imageFormat=n;var r=t.notifyStartCaptureImage;return t.notifyStartCaptureImage=!0,new Promise(function(n,i){var a=e.onImageReady(function(e){t.notifyStartCaptureImage=r,a.unsubscribe(),n(e)})})},e.getGLInformations=function(){for(var n=e.get3DContext(),r=n.getExtension("OES_texture_float"),i=n.getExtension("OES_texture_half_float"),a=n.getExtension("WEBGL_debug_renderer_info"),o=n.getExtension("WEBGL_draw_buffers"),s=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),u=[["Max Vertex Attributes","MAX_VERTEX_ATTRIBS",n.getParameter(n.MAX_VERTEX_ATTRIBS)],["Max Varying Vectors","MAX_VARYING_VECTORS",n.getParameter(n.MAX_VARYING_VECTORS)],["Max Vertex Uniform Vectors","MAX_VERTEX_UNIFORM_VECTORS",n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS)],["Max Fragment Uniform Vectors","MAX_FRAGMENT_UNIFORM_VECTORS",n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS)],["Max Fragment Texture Image Units","MAX_TEXTURE_IMAGE_UNITS",n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)],["Max Vertex Texture Image Units","MAX_VERTEX_TEXTURE_IMAGE_UNITS",n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS)],["Max Combined Texture Image Units","MAX_COMBINED_TEXTURE_IMAGE_UNITS",n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS)],["Max 2D Texture Size","MAX_TEXTURE_SIZE",n.getParameter(n.MAX_TEXTURE_SIZE)],["Max Cube Texture Size","MAX_CUBE_MAP_TEXTURE_SIZE",n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE)],["Max Texture Anisotropy","MAX_TEXTURE_MAX_ANISOTROPY_EXT",s&&n.getParameter(s.MAX_TEXTURE_MAX_ANISOTROPY_EXT)],["Point Size Range","ALIASED_POINT_SIZE_RANGE",n.getParameter(n.ALIASED_POINT_SIZE_RANGE).join(" - ")],["Line Width Range","ALIASED_LINE_WIDTH_RANGE",n.getParameter(n.ALIASED_LINE_WIDTH_RANGE).join(" - ")],["Max Viewport Dimensions","MAX_VIEWPORT_DIMS",n.getParameter(n.MAX_VIEWPORT_DIMS).join(" - ")],["Max Renderbuffer Size","MAX_RENDERBUFFER_SIZE",n.getParameter(n.MAX_RENDERBUFFER_SIZE)],["Framebuffer Red Bits","RED_BITS",n.getParameter(n.RED_BITS)],["Framebuffer Green Bits","GREEN_BITS",n.getParameter(n.GREEN_BITS)],["Framebuffer Blue Bits","BLUE_BITS",n.getParameter(n.BLUE_BITS)],["Framebuffer Alpha Bits","ALPHA_BITS",n.getParameter(n.ALPHA_BITS)],["Framebuffer Depth Bits","DEPTH_BITS",n.getParameter(n.DEPTH_BITS)],["Framebuffer Stencil Bits","STENCIL_BITS",n.getParameter(n.STENCIL_BITS)],["Framebuffer Subpixel Bits","SUBPIXEL_BITS",n.getParameter(n.SUBPIXEL_BITS)],["MSAA Samples","SAMPLES",n.getParameter(n.SAMPLES)],["MSAA Sample Buffers","SAMPLE_BUFFERS",n.getParameter(n.SAMPLE_BUFFERS)],["Supported Formats for UByte Render Targets     ","UNSIGNED_BYTE RENDER TARGET FORMATS",[r&&Fv(n,n.RGBA,n.UNSIGNED_BYTE)?"RGBA":"",r&&Fv(n,n.RGB,n.UNSIGNED_BYTE)?"RGB":"",r&&Fv(n,n.LUMINANCE,n.UNSIGNED_BYTE)?"LUMINANCE":"",r&&Fv(n,n.ALPHA,n.UNSIGNED_BYTE)?"ALPHA":"",r&&Fv(n,n.LUMINANCE_ALPHA,n.UNSIGNED_BYTE)?"LUMINANCE_ALPHA":""].join(" ")],["Supported Formats for Half Float Render Targets","HALF FLOAT RENDER TARGET FORMATS",[i&&Fv(n,n.RGBA,i.HALF_FLOAT_OES)?"RGBA":"",i&&Fv(n,n.RGB,i.HALF_FLOAT_OES)?"RGB":"",i&&Fv(n,n.LUMINANCE,i.HALF_FLOAT_OES)?"LUMINANCE":"",i&&Fv(n,n.ALPHA,i.HALF_FLOAT_OES)?"ALPHA":"",i&&Fv(n,n.LUMINANCE_ALPHA,i.HALF_FLOAT_OES)?"LUMINANCE_ALPHA":""].join(" ")],["Supported Formats for Full Float Render Targets","FLOAT RENDER TARGET FORMATS",[r&&Fv(n,n.RGBA,n.FLOAT)?"RGBA":"",r&&Fv(n,n.RGB,n.FLOAT)?"RGB":"",r&&Fv(n,n.LUMINANCE,n.FLOAT)?"LUMINANCE":"",r&&Fv(n,n.ALPHA,n.FLOAT)?"ALPHA":"",r&&Fv(n,n.LUMINANCE_ALPHA,n.FLOAT)?"LUMINANCE_ALPHA":""].join(" ")],["Max Multiple Render Targets Buffers","MAX_DRAW_BUFFERS_WEBGL",o?n.getParameter(o.MAX_DRAW_BUFFERS_WEBGL):0],["High Float Precision in Vertex Shader","HIGH_FLOAT VERTEX_SHADER",[n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).rangeMax,"</sup>)"].join("")],["Medium Float Precision in Vertex Shader","MEDIUM_FLOAT VERTEX_SHADER",[n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).rangeMax,"</sup>)"].join("")],["Low Float Precision in Vertex Shader","LOW_FLOAT VERTEX_SHADER",[n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.LOW_FLOAT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.LOW_FLOAT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.LOW_FLOAT).rangeMax,"</sup>)"].join("")],["High Float Precision in Fragment Shader","HIGH_FLOAT FRAGMENT_SHADER",[n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).rangeMax,"</sup>)"].join("")],["Medium Float Precision in Fragment Shader","MEDIUM_FLOAT FRAGMENT_SHADER",[n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).rangeMax,"</sup>)"].join("")],["Low Float Precision in Fragment Shader","LOW_FLOAT FRAGMENT_SHADER",[n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.LOW_FLOAT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.LOW_FLOAT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.LOW_FLOAT).rangeMax,"</sup>)"].join("")],["High Int Precision in Vertex Shader","HIGH_INT VERTEX_SHADER",[n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_INT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_INT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_INT).rangeMax,"</sup>)"].join("")],["Medium Int Precision in Vertex Shader","MEDIUM_INT VERTEX_SHADER",[n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_INT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_INT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_INT).rangeMax,"</sup>)"].join("")],["Low Int Precision in Vertex Shader","LOW_INT VERTEX_SHADER",[n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.LOW_INT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.LOW_INT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.LOW_INT).rangeMax,"</sup>)"].join("")],["High Int Precision in Fragment Shader","HIGH_INT FRAGMENT_SHADER",[n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_INT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_INT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_INT).rangeMax,"</sup>)"].join("")],["Medium Int Precision in Fragment Shader","MEDIUM_INT FRAGMENT_SHADER",[n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_INT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_INT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_INT).rangeMax,"</sup>)"].join("")],["Low Int Precision in Fragment Shader","LOW_INT FRAGMENT_SHADER",[n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.LOW_INT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.LOW_INT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.LOW_INT).rangeMax,"</sup>)"].join("")],["Supported Extensions","EXTENSIONS",n.getSupportedExtensions().join("<br/>\t\t\t\t\t    ")],["WebGL Renderer","RENDERER",n.getParameter(n.RENDERER)],["WebGL Vendor","VENDOR",n.getParameter(n.VENDOR)],["WebGL Version","VERSION",n.getParameter(n.VERSION)],["Shading Language Version","SHADING_LANGUAGE_VERSION",n.getParameter(n.SHADING_LANGUAGE_VERSION)],["Unmasked Renderer","UNMASKED_RENDERER",a&&n.getParameter(a.UNMASKED_RENDERER_WEBGL)],["Unmasked Vendor","UNMASKED_VENDOR",a&&n.getParameter(a.UNMASKED_VENDOR_WEBGL)],["WebGL Version","WEBGL_VERSION",t.webgl2?2:1]],l={};u.length;){var c=kv(u.pop(),3),f=c[0],d=c[1],p=c[2];d&&(l[d]={label:f,value:p})}return l},e.traverseAllPasses=function(){if(t.renderPasses)for(var n=0;n<t.renderPasses.length;++n)t.renderPasses[n].traverse(e,null);t.notifyStartCaptureImage&&function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.imageFormat,r=document.createElement("canvas"),i=r.getContext("2d");r.width=t.canvas.width,r.height=t.canvas.height,i.drawImage(t.canvas,0,0);var a=t.canvas.getBoundingClientRect();t.renderable.getRenderers().forEach(function(e){e.getViewProps().forEach(function(e){if(e.getContainer)for(var t=e.getContainer().getElementsByTagName("canvas"),n=0;n<t.length;n++){var r=t[n],o=r.getBoundingClientRect(),s=o.x-a.x,u=o.y-a.y;i.drawImage(r,s,u)}})});var o=r.toDataURL(n);r.remove(),e.invokeImageReady(o)}()},e.disableDepthMask=function(){t.depthMaskEnabled&&(t.context.depthMask(!1),t.depthMaskEnabled=!1)},e.enableDepthMask=function(){t.depthMaskEnabled||(t.context.depthMask(!0),t.depthMaskEnabled=!0)},e.disableCullFace=function(){t.cullFaceEnabled&&(t.context.disable(t.context.CULL_FACE),t.cullFaceEnabled=!1)},e.enableCullFace=function(){t.cullFaceEnabled||(t.context.enable(t.context.CULL_FACE),t.cullFaceEnabled=!0)},e.setViewStream=function(n){if(t.viewStream===n)return!1;(t.subscription&&(t.subscription.unsubscribe(),t.subscription=null),t.viewStream=n,t.viewStream)&&(t.renderable.getRenderers()[0].getBackgroundByReference()[3]=0,e.setUseBackgroundImage(!0),t.subscription=t.viewStream.onImageReady(function(t){return e.setBackgroundImage(t.image)}),t.viewStream.setSize(t.size[0],t.size[1]),t.viewStream.invalidateCache(),t.viewStream.render(),e.modified());return!0},e.delete=h.a.chain(e.delete,e.setViewStream)}var Uv={cullFaceEnabled:!1,depthMaskEnabled:!0,shaderCache:null,initialized:!1,context:null,canvas:null,size:[300,300],cursorVisibility:!0,cursor:"pointer",textureUnitManager:null,textureResourceIds:null,renderPasses:[],notifyStartCaptureImage:!1,webgl2:!1,defaultToWebgl2:!0,vrResolution:[2160,1200],queryVRSize:!1,hideCanvasInVR:!0,activeFramebuffer:null,vrDisplay:null,imageFormat:"image/png",useOffScreen:!1,useBackgroundImage:!1};function Gv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Uv,n),t.canvas=document.createElement("canvas"),t.canvas.style.width="100%",t.bgImage=new Image,t.bgImage.style.position="absolute",t.bgImage.style.left="0",t.bgImage.style.top="0",t.bgImage.style.width="100%",t.bgImage.style.height="100%",t.bgImage.style.zIndex="-1",t.textureResourceIds=new Map,zh.extend(e,t,n),t.myFactory=wv.newInstance(),t.myFactory.registerOverride("vtkRenderWindow",Wv),t.shaderCache=Iv.newInstance(),t.shaderCache.setOpenGLRenderWindow(e),t.renderPasses[0]=ag.newInstance(),h.a.event(e,t,"imageReady"),h.a.event(e,t,"haveVRDisplay"),h.a.get(e,t,["shaderCache","textureUnitManager","webgl2","vrDisplay","useBackgroundImage"]),h.a.setGet(e,t,["initialized","context","canvas","renderPasses","notifyStartCaptureImage","defaultToWebgl2","cursor","queryVRSize","hideCanvasInVR","useOffScreen","activeFramebuffer"]),h.a.setGetArray(e,t,["size","vrResolution"],2),Vv(e,t)}var Wv=h.a.newInstance(Gv,"vtkOpenGLRenderWindow"),Hv={newInstance:Wv,extend:Gv};function Yv(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Qv={margin:"0",padding:"0",position:"absolute",top:"0",left:"0",width:"100vw",height:"100vh",overflow:"hidden"},qv={position:"absolute",left:"25px",top:"25px",backgroundColor:"white",borderRadius:"5px",listStyle:"none",padding:"5px 10px",margin:"0",display:"block",border:"solid 1px black",maxWidth:"calc(100vw - 70px)",maxHeight:"calc(100vh - 60px)",overflow:"auto"};function Xv(e,t){Object.keys(t).forEach(function(n){e.style[n]=t[n]})}var Kv={background:[.32,.34,.43],containerStyle:null,controlPanelStyle:null,listenWindowResize:!0,resizeCallback:null,controllerVisibility:!0};function Zv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Kv,n),h.a.obj(e,t),h.a.get(e,t,["renderWindow","renderer","openGLRenderWindow","interactor","rootContainer","container","controlContainer"]),function(e,t){t.rootContainer||(t.rootContainer=document.querySelector("body")),t.container||(t.container=document.createElement("div"),Xv(t.container,t.containerStyle||Qv),t.rootContainer.appendChild(t.container)),t.renderWindow=Jp.newInstance(),t.renderer=Dc.newInstance(),t.renderWindow.addRenderer(t.renderer),t.openGLRenderWindow=Hv.newInstance(),t.openGLRenderWindow.setContainer(t.container),t.renderWindow.addView(t.openGLRenderWindow),t.interactor=pa.newInstance(),t.interactor.setInteractorStyle(No.newInstance()),t.interactor.setView(t.openGLRenderWindow),t.interactor.initialize(),t.interactor.bindEvents(t.container),e.setBackground=t.renderer.setBackground,e.removeController=function(){var e=t.controlContainer;e&&e.parentNode.removeChild(e)},e.setControllerVisibility=function(e){t.controllerVisibility=e,t.controlContainer&&(t.controlContainer.style.display=e?"block":"none")},e.toggleControllerVisibility=function(){e.setControllerVisibility(!t.controllerVisibility)},e.addController=function(n){t.controlContainer=document.createElement("div"),Xv(t.controlContainer,t.controlPanelStyle||qv),t.rootContainer.appendChild(t.controlContainer),t.controlContainer.innerHTML=n,e.setControllerVisibility(t.controllerVisibility),t.rootContainer.addEventListener("keypress",function(t){"c"===String.fromCharCode(t.charCode)&&e.toggleControllerVisibility()})},e.setBackground.apply(e,Yv(t.background)),e.addRepresentation=function(e){e.getActors().forEach(function(e){t.renderer.addActor(e)})},e.removeRepresentation=function(e){e.getActors().forEach(function(e){return t.renderer.removeActor(e)})},e.resize=function(){var e=t.container.getBoundingClientRect(),n=window.devicePixelRatio||1;t.openGLRenderWindow.setSize(Math.floor(e.width*n),Math.floor(e.height*n)),t.resizeCallback&&t.resizeCallback(e),t.renderWindow.render()},e.setResizeCallback=function(n){t.resizeCallback=n,e.resize()},t.listenWindowResize&&window.addEventListener("resize",e.resize),e.resize()}(e,t)}var Jv={newInstance:h.a.newInstance(Zv),extend:Zv};function $v(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var ey={background:[.32,.34,.43],listenWindowResize:!0,container:null};function ty(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ey,n),h.a.obj(e,t),h.a.get(e,t,["renderWindow","renderer","openGLRenderWindow","interactor","container"]),h.a.event(e,t,"resize"),function(e,t){var n=e.invokeResize;delete e.invokeResize,t.renderWindow=Jp.newInstance(),t.renderer=Dc.newInstance(),t.renderWindow.addRenderer(t.renderer),t.openGLRenderWindow=Hv.newInstance(),t.renderWindow.addView(t.openGLRenderWindow),t.interactor=pa.newInstance(),t.interactor.setInteractorStyle(No.newInstance()),t.interactor.setView(t.openGLRenderWindow),t.interactor.initialize(),e.setBackground=t.renderer.setBackground,e.setBackground.apply(e,$v(t.background)),e.resize=function(){if(t.container){var e=t.container.getBoundingClientRect(),r=window.devicePixelRatio||1;t.openGLRenderWindow.setSize(Math.floor(e.width*r),Math.floor(e.height*r)),n(),t.renderWindow.render()}},e.setContainer=function(e){t.container&&(t.openGLRenderWindow.setContainer(t.container),t.interactor.unbindEvents(t.container)),t.container=e,t.container&&(t.openGLRenderWindow.setContainer(t.container),t.interactor.bindEvents(t.container))},t.listenWindowResize&&window.addEventListener("resize",e.resize),e.resize()}(e,t)}var ny={newInstance:h.a.newInstance(ty),extend:ty},ry=Xc.newInstance(),iy=ry.connect,ay=ry.disconnect;var oy={viewId:"-1",interactiveQuality:60,interactiveRatio:1/window.devicePixelRatio,stillQuality:100,stillRatio:1,rpcMouseEvent:"viewport.mouse.interaction",rpcGestureEvent:null,rpcWheelEvent:null};function sy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,oy,n),h.a.obj(e,t,n),h.a.get(e,t,["container","viewStream","canvasView","interactor","interactorStyle","interactiveQuality","interactiveRatio","stillQuality","stillRatio"]),h.a.setGet(e,t,["session","rpcMouseEvent","rpcGestureEvent","rpcWheelEvent"]),function(e,t){t.classHierarchy.push("vtkRemoteView"),t.canvasView=_h.newInstance(),t.interactorStyle=Yo.newInstance(),t.interactor=pa.newInstance(),t.interactor.setView(t.canvasView),t.interactor.initialize(),t.interactor.setInteractorStyle(t.interactorStyle),t.interactorStyle.onRemoteMouseEvent(function(e){t.session&&t.rpcMouseEvent&&t.session.call(t.rpcMouseEvent,[e])}),t.interactorStyle.onRemoteWheelEvent(function(e){t.session&&t.rpcWheelEvent&&t.session.call(t.rpcWheelEvent,[e])}),t.interactorStyle.onRemoteGestureEvent(function(e){t.session&&t.rpcGestureEvent&&t.session.call(t.rpcGestureEvent,[e])}),e.delete=h.a.chain(function(){t.session=null,t.canvasView&&(t.canvasView.setViewStream(null),t.canvasView.delete()),t.interactor&&t.interactor.delete(),t.viewStream&&t.viewStream.delete()},e.delete),e.setViewId=function(n){t.viewStream||(t.viewStream=ry.createViewStream(n),t.canvasView.setViewStream(t.viewStream),t.viewStream.setStillQuality(t.stillQuality),t.viewStream.setStillRatio(t.stillRatio),t.viewStream.setInteractiveQuality(t.interactiveQuality),t.viewStream.setInteractiveRatio(t.interactiveRatio),t.interactor.onStartAnimation(t.viewStream.startInteraction),t.interactor.onEndAnimation(t.viewStream.endInteraction)),t.viewStream.setViewId(n),t.interactorStyle.setRemoteEventAddOn({view:n}),e.modified()},e.setContainer=function(n){t.container&&t.interactor.unbindEvents(n),t.container=n,t.canvasView.setContainer(t.container),n&&(t.interactor.bindEvents(n),e.resize())},e.resize=function(){if(t.container&&t.canvasView){var n=t.container.getBoundingClientRect(),r=n.width,i=n.height;t.canvasView.setSize(r,i),e.render()}},e.render=function(){t.viewStream&&t.viewStream.render()};var n={modified:e.modified};h.a.set(n,t,["interactiveQuality","interactiveRatio","stillQuality","stillRatio"]),e.setInteractiveQuality=function(e){var r=n.setInteractiveQuality(e);return t.viewStream&&r&&t.viewStream.setInteractiveQuality(t.interactiveQuality),r},e.setInteractiveRatio=function(e){var r=n.setInteractiveRatio(e);return t.viewStream&&r&&t.viewStream.setInteractiveRatio(t.interactiveRatio),r},e.setStillQuality=function(e){var r=n.setStillQuality(e);return t.viewStream&&r&&t.viewStream.setStillQuality(t.stillQuality),r},e.setStillRatio=function(e){var r=n.setStillRatio(e);return t.viewStream&&r&&t.viewStream.setStillRatio(t.stillRatio),r}}(e,t)}var uy={newInstance:h.a.newInstance(sy,"vtkRemoteView"),extend:sy,SHARED_IMAGE_STREAM:ry,connectImageStream:iy,disconnectImageStream:ay},ly=n(59),cy=n.n(ly),fy={left:function(e){return{top:"0",left:"0",bottom:"0",right:"unset",height:"unset",width:"".concat(e,"px")}},right:function(e){return{top:"0",right:"0",bottom:"0",left:"unset",height:"unset",width:"".concat(e,"px")}},top:function(e){return{top:"0",left:"0",right:"0",bottom:"unset",width:"unset",height:"".concat(e,"px")}},bottom:function(e){return{bottom:"0",left:"0",right:"0",top:"unset",width:"unset",height:"".concat(e,"px")}}};function dy(e,t){var n=Object.assign({},e);function r(e){t.renderWindowContainer.style[e]="0px"}function i(){var e,n,i,a;["left","right","top","bottom"].forEach(r),t.renderWindowContainer.style[t.controlPosition]="".concat(t.controlSize,"px"),e=t.controlContainer,n=t.controlPosition,i=t.controlSize,a=fy[n](i),Object.keys(a).forEach(function(t){e.style[t]=a[t]})}t.renderWindowContainer=document.createElement("div"),t.renderWindowContainer.classList.add(cy.a.renderWindow),n.setContainer(t.renderWindowContainer),t.controlContainer=document.createElement("div"),t.controlContainer.classList.add(cy.a.control),e.setContainer=function(n){t.rootContainer&&(t.rootContainer.removeChild(t.container),t.rootContainer.removeChild(t.controlContainer),t.rootContainer.classList.remove(cy.a.rootContainer)),t.rootContainer=n,t.rootContainer&&(t.rootContainer.appendChild(t.container),t.rootContainer.appendChild(t.controlContainer),t.rootContainer.classList.add(cy.a.rootContainer),i(),e.resize())},e.setControlSize=function(n){t.controlSize=n,i(),e.modified()},e.setControlPosition=function(n){t.controlPosition=n,i(),e.modified()},t.listenWindowResize&&window.addEventListener("resize",e.resize),i(),e.resize()}var py={rootContainer:null,controlPosition:"left",controlSize:10};function hy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,py,n),ny.extend(e,t),h.a.get(e,t,["rootContainer","controlContainer","renderWindowContainer"]),dy(e,t)}var gy={newInstance:h.a.newInstance(hy,"vtkRenderWindowWithControlBar"),extend:hy};function my(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function vy(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var yy={},by=/instance:\${([^}]+)}/,My=function(e){return"instance:${".concat(e,"}")},xy={},wy=[],Ay={};function Ty(e){return e.map(function(e){return by.exec(e)}).filter(function(e){return e}).map(function(e){return e[1]})}function Cy(e,t,n,r){if(t){var i=yy[e];i&&i.update?i.update(t,n,r):console.log("no updater for",e)}}function Sy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=yy[e];return n&&n.build?n.build(t):(console.log("No builder for",e),null)}function Dy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Sy||Cy?yy[e]={build:t,update:n}:delete yy[e]}function Iy(){Object.keys(yy).forEach(function(e){delete yy[e]})}function Ey(e){if(1===e[1].length)return-1===wy.indexOf(e[1][0]);for(var t=!1,n=0;n<e[1];n++)t=t||-1===wy.indexOf(e[1][n]);return t}function Ny(e,t,n){n.start(),e.set(t.properties),t.dependencies&&t.dependencies.forEach(function(e){var t=e.id,r=e.type;if(Ay[r]){var i=Ay[r],a=i.key,o=i.value;if(!a||e.properties[a]===o)return void wy.push(My(t))}var s=n.getInstance(t);s||(s=Sy(r,{managedInstanceId:t}),n.registerInstance(t,s)),Cy(r,s,e,n)}),t.calls&&t.calls.filter(Ey).forEach(function(t){return e[t[0]].apply(null,(r=n,t[1].map(function(e){var t=by.exec(e);return t?r.getInstance(t[1]):e})));var r}),n.end()}var Oy={vtkCompositePolyDataMapper2:{build:cu.a.newInstance,update:Ny},vtkLookupTable:{build:c.a.newInstance,update:Ny},vtkOpenGLProperty:{build:Wu.a.newInstance,update:Ny},vtkOpenGLRenderer:{build:Dc.newInstance,update:function(e,t,n){Ny(e,t,n);var r=new Set;t.dependencies&&t.dependencies.forEach(function(e){var t=n.getInstance(e.id);if(t){var i=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.dependencies&&t.dependencies.forEach(function(t){n.push(t.id),e(t,n)}),n}(e);t.set({flattenedDepIds:i},!0),i.forEach(function(e){return r.add(e)})}});var i=new Set;t.calls&&t.calls.filter(Ey).filter(function(e){return"removeViewProp"===e[0]}).forEach(function(e){Ty(e[1]).forEach(function(e){var t=n.getInstance(e).get("flattenedDepIds").flattenedDepIds;t&&t.forEach(function(e){return i.add(e)}),i.add(e)})}),vy(i).filter(function(e){return!r.has(e)}).forEach(function(e){return n.unregisterInstance(e)})}},vtkOpenGLCamera:{build:dc.newInstance,update:function(e,t,n){xy[t.id]||Ny(e,t,n),xy[t.id]=!0}},vtkPolyData:{build:Se.a.newInstance,update:function(e,t,n){n.start();var r=t.properties,a=r.fields.length,o=[[e.getPointData().removeAllArrays,[]],[e.getCellData().removeAllArrays,[]]];function s(){if(o.length-2===a){for(;o.length;){var t=my(o.shift(),2),r=t[0],i=t[1];r.apply(void 0,vy(i))}e.modified(),n.end()}}["points","polys","verts","lines","strips"].forEach(function(t){if(r[t]){a+=1;var i=r[t];n.getArray(i.hash,i.dataType,n).then(function(n){o.push([e.get(t)[t].setData,[n,i.numberOfComponents]]),s()},function(e){console.log("error geometry fetching array",e)})}}),r.fields.forEach(function(t){n.getArray(t.hash,t.dataType,n).then(function(n){var r=i.a.newInstance(Object.assign({values:n},t)),a=t.registration?t.registration:"addArray";o.push([e.get(t.location)[t.location][a],[r]]),s()},function(e){console.log("error field fetching array",e)})})}},vtkPVDiscretizableColorTransferFunction:{build:Mp.newInstance,update:function(e,t,n){n.start();var r=t.properties.nodes.map(function(e){var t=my(e,6);return{x:t[0],r:t[1],g:t[2],b:t[3],midpoint:t[4],sharpness:t[5]}});e.set(Object.assign({},t.properties,{nodes:r}),!0),e.sortAndUpdateRange(),e.modified(),n.end()}},vtkPVLODActor:{build:lu.a.newInstance,update:Ny},vtkOpenGLActor:{build:lu.a.newInstance,update:Ny},vtkRenderWindow:{build:Jp.newInstance,update:function(e,t,n){t.calls&&t.calls.filter(Ey).filter(function(e){return"removeRenderer"===e[0]}).forEach(function(e){Ty(e[1]).forEach(function(e){var t=n.getInstance(e);t.getViewProps().forEach(function(e){var t=e.get("flattenedDepIds").flattenedDepIds;t&&t.forEach(function(e){return n.unregisterInstance(e)}),n.unregisterInstance(n.getInstanceId(e))}),t.removeAllViewProps()})}),e.render(),Ny(e,t,n)}},vtkOpenGLLight:{build:gc.newInstance,update:Ny},vtkPVLight:{build:gc.newInstance,update:Ny}};!function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&Iy(),Object.keys(Oy).forEach(function(e){var t=Oy[e];Dy(e,t.build,t.update)})}(),Ay.vtkOpenGLLight={},Ay.vtkPVLight={};var _y={build:Sy,update:Cy,setTypeMapping:Dy,clearTypeMapping:Iy,getSupportedTypes:function(){return Object.keys(yy)},clearOneTimeUpdaters:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0!==t.length){var r=t;return 1===r.length&&Array.isArray(r[0])&&(r=r[0]),r.forEach(function(e){delete xy[e]}),r}Object.keys(xy).forEach(function(e){delete xy[e]})},updateRenderWindow:function(e,t,n){return Cy("vtkRenderWindow",e,t,n)},excludeInstance:function(e,t,n){Ay[e]={key:t,value:n}}};function Ly(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Py={};function ky(){var e={},t=null;return{setFetchArrayFunction:function(e){t=e},getArray:function(n,r,i){var a=e[n];return a?(a.mtimes[i.getActiveViewId()]=i.getMTime(),new Promise(function(e,t){e(a.array)})):t?new Promise(function(a,o){t(n).then(function(t){var o=t;if("string"==typeof t&&(o=Object(ud.toByteArray)(t).buffer),o instanceof Blob){var s=new FileReader;s.onload=function(){var t=new window[r](s.result),o=Ly({},i.getActiveViewId(),i.getMTime());e[n]={mtimes:o,array:t},a(t)},s.readAsArrayBuffer(o)}else{var u=new window[r](o),l=Ly({},i.getActiveViewId(),i.getMTime());e[n]={mtimes:l,array:u},a(u)}},function(e){console.log("Error getting data array:"),console.log(e),o(e)})}):Promise.reject(new Error('No array fetcher found, please use "setArrayFetcher" to provide one'))},emptyCachedArrays:function(){Object.keys(e).forEach(function(t){delete e[t]})},freeOldArrays:function(t,n){var r=n.getMTime()-t;Object.keys(e).filter(function(t){return e[t].mtimes[n.getActiveViewId()]}).filter(function(t){return e[t].mtimes[n.getActiveViewId()]<r}).forEach(function(t){delete e[t]})}}}function Ry(){var e={};return{getInstance:function(t){return e[t]},getInstanceId:function(t){var n=null;return Object.keys(e).forEach(function(r){t===e[r]&&(n=r)}),n},registerInstance:function(t,n){e[t]=n},unregisterInstance:function(t){delete e[t]},emptyCachedInstances:function(){Object.keys(e).forEach(function(t){delete e[t]})}}}function jy(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=Py[e];return t||(t=Object.assign({},ky(),Ry()),Py[e]=t),t}function By(e,t){var n,r,i,a,o=(n=e.render,r=0,{start:function(){r+=1},end:function(){0==(r-=1)&&n&&n()}}),s=(i={},a="default",{getMTime:function(e){return i[e||a]||1},incrementMTime:function(e){var t=e||a;i[t]||(i[t]=1),i[t]+=1},setActiveViewId:function(e){a=e},getActiveViewId:function(){return a}}),u=Object.assign({},t,o,s),l=-1,c=100,f=function(e){return e.get("managedInstanceId").managedInstanceId},d=function(){return h.a.traverseInstanceTree(e,f)};function p(t){e.set({synchronizedViewId:t},!0,!0)}function g(){return e.get("synchronizedViewId").synchronizedViewId}return{synchronize:function(t){return g()||p(t.id),g()===t.id&&l<t.mtime&&(l=t.mtime,u.setActiveViewId(t.id),u.incrementMTime(),_y.updateRenderWindow(e,t,u),u.freeOldArrays(c,u),!0)},setSynchronizedViewId:p,getSynchronizedViewId:g,updateGarbageCollectorThreshold:function(e){c=e},getManagedInstanceIds:d,clearOneTimeUpdaters:function(){_y.clearOneTimeUpdaters(d())}}}var zy={synchronizerContextName:"default",synchronizerContext:null,synchronizedViewId:null};function Fy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,zy,n),Jp.extend(e,t),function(e,t){t.classHierarchy.push("vtkSynchronizableRenderWindow"),t.synchronizerContext||(t.synchronizerContext=jy(t.synchronizerContextName));var n=By(e,t.synchronizerContext);Object.keys(n).forEach(function(t){e[t]=n[t]})}(e,t)}var Vy=h.a.newInstance(Fy,"vtkSynchronizableRenderWindow");var Uy={Core:Ih,Misc:{vtkCanvasView:_h,vtkFullScreenRenderWindow:Jv,vtkGenericRenderWindow:ny,vtkRemoteView:uy,vtkRenderWindowWithControlBar:gy,vtkSynchronizableRenderWindow:{newInstance:Vy,extend:Fy,getSynchronizerContext:jy,setSynchronizerContext:function(e,t){Py[e]=t},decorate:function(e){var t=By(e,jy(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default"));return Object.assign(t,e)},createInstanceMap:Ry,createArrayHandler:ky}},OpenGL:{vtkActor:fg,vtkActor2D:hg,vtkBufferObject:Tg,vtkCamera:vg,vtkCellArrayBufferObject:Fg,vtkFramebuffer:$h,vtkGlyph3DMapper:Sm,vtkHardwareSelector:Pg,vtkHelper:em,vtkImageMapper:Om,vtkImageSlice:Pm,vtkPolyDataMapper:vm,vtkRenderer:Um,vtkRenderWindow:Hv,vtkShader:Wg,vtkShaderCache:Iv,vtkShaderProgram:qg,vtkSkybox:Ym,vtkSphereMapper:Jm,vtkStickMapper:iv,vtkTexture:Xh,vtkTextureUnitManager:_v,vtkVertexArrayObject:Zg,vtkViewNodeFactory:wv,vtkVolume:sv,vtkVolumeMapper:mv},SceneGraph:{vtkGenericWidgetRepresentation:ug,vtkRenderPass:ng,vtkViewNode:zh,vtkViewNodeFactory:bv}};function Gy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Wy={actors:[],volumes:[],sourceDependencies:[]};var Hy={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Wy,n),h.a.obj(e,t),h.a.get(e,t,["input","mapper","actors","volumes"]),function(e,t){function n(){if(t.input)for(var e=0;e<t.sourceDependencies.length;++e)t.sourceDependencies[e].setInputData(t.input.getDataset())}t.classHierarchy.push("vtkAbstractRepresentationProxy"),e.setInput=function(r){if(t.sourceSubscription&&(t.sourceSubscription.unsubscribe(),t.sourceSubscription=null),e.gcPropertyLinks("source"),t.input=r,e.updateColorByDomain(),t.input&&(n(),t.sourceSubscription=t.input.onDatasetChange(n)),t.links)for(var i=0;i<t.links.length;i++){var a=t.links[i],o=a.link,s=a.property,u=a.persistent,l=a.updateOnBind,c=a.type;if(void 0===c||"source"===c){var f=r.getPropertyLink(o,u);e.registerPropertyLinkForGC(f,"source"),f.bind(e,s,l)}}},e.getInputDataSet=function(){return t.input?t.input.getDataset():null},e.getDataArray=function(t,n){var r=Gy(e.getColorBy(),2),i=r[0],a=r[1],o=e.getInputDataSet(),s=o?o.getReferenceByName(n||a):null;return s?s.getArrayByName(t||i):null},e.getLookupTableProxy=function(n){var r=n||e.getColorBy()[0];return r?t.proxyManager.getLookupTable(r):null},e.setLookupTableProxy=function(e){console.log("setLookupTable",e.getPresetName(),e.getDataRange())},e.getPiecewiseFunctionProxy=function(n){var r=n||e.getColorBy()[0];return r?t.proxyManager.getPiecewiseFunction(r):null},e.setPiecewiseFunctionProxy=function(e){console.log("setPiecewiseFunction",e.getDataRange())},e.rescaleTransferFunctionToDataRange=function(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,a=e.getDataArray(n,r).getRange(i);t.proxyManager.rescaleTransferFunctionToDataRange(n,a)},e.isVisible=function(){return t.actors.length?t.actors[0].getVisibility():!!t.volumes.length&&t.volumes[0].getVisibility()},e.setVisibility=function(e){for(var n=t.actors.length;n--;)t.actors[n].setVisibility(e);for(n=t.volumes.length;n--;)t.volumes[n].setVisibility(e)},e.setColorBy=function(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,a=cu.a.ColorMode.DEFAULT,o=cu.a.ScalarMode.DEFAULT,s=n,u=!!e.getDataArray(n,r),l=n?e.getLookupTableProxy(n).getLookupTable():null;l&&(-1===i?l.setVectorModeToMagnitude():(l.setVectorModeToComponent(),l.setVectorComponent(i))),u&&(a=cu.a.ColorMode.MAP_SCALARS,o="pointData"===r?cu.a.ScalarMode.USE_POINT_FIELD_DATA:cu.a.ScalarMode.USE_CELL_FIELD_DATA,t.mapper.setLookupTable&&t.mapper.setLookupTable(l),e.rescaleTransferFunctionToDataRange(n,r,i)),t.mapper.set({colorByArrayName:s,colorMode:a,scalarMode:o,scalarVisibility:u},!0)},e.getColorBy=function(){if(!t.mapper.getColorByArrayName){var n=e.getInputDataSet();return n.getPointData().getScalars()?[n.getPointData().getScalars().getName(),"pointData",-1]:n.getCellData().getScalars()?[n.getCellData().getScalars().getName(),"cellData",-1]:n.getPointData().getNumberOfArrays()?[n.getPointData().getArrayByIndex(0).getName(),"pointData",-1]:n.getCellData().getNumberOfArrays()?[n.getCellData().getArrayByIndex(0).getName(),"cellData",-1]:[]}var r=[],i=t.mapper.get("colorByArrayName","colorMode","scalarMode","scalarVisibility"),a=i.colorByArrayName,o=i.colorMode,s=i.scalarMode;if(i.scalarVisibility&&a&&(r.push(a),r.push(s===cu.a.ScalarMode.USE_POINT_FIELD_DATA?"pointData":"cellData")),o===cu.a.ColorMode.MAP_SCALARS&&a){var u=e.getLookupTableProxy(a).getLookupTable(),l=u.getVectorMode()===y.a.VectorMode.MAGNITUDE?-1:u.getVectorComponent();r.push(l)}return r},e.listDataArrays=function(){var n=[];if(!t.input)return n;for(var r=e.getInputDataSet(),i=r.getPointData(),a=i.getNumberOfArrays(),o=0;o<a;o++){var s=i.getArrayByIndex(o);n.push({name:s.getName(),location:"pointData",numberOfComponents:s.getNumberOfComponents(),dataRange:s.getRange()})}var u=r.getCellData();a=u.getNumberOfArrays();for(var l=0;l<a;l++){var c=u.getArrayByIndex(l);n.push({name:c.getName(),location:"cellData",numberOfComponents:c.getNumberOfComponents(),dataRange:c.getRange()})}return n},e.updateColorByDomain=function(){e.updateProxyProperty("colorBy",{domain:{arrays:e.listDataArrays(),solidColor:!t.disableSolidColor}})},e.delete=h.a.chain(function(){t.sourceSubscription&&(t.sourceSubscription.unsubscribe(),t.sourceSubscription=null)},e.delete)}(e,t),h.a.proxy(e,t)}};function Yy(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Qy={Preset:0,RGBPoints:1,HSVPoints:2,Nodes:3},qy={Preset:"Cool to Warm",RGBPoints:[[0,0,0,0],[1,1,1,1]],HSVPoints:[[0,0,0,0],[1,0,0,1]],Nodes:[{x:0,r:0,g:0,b:0,midpoint:.5,sharpness:0},{x:1,r:1,g:1,b:1,midpoint:.5,sharpness:0}]};var Xy={mode:Qy.Preset,presetName:qy.Preset,rgbPoints:qy.RGBPoints,hsvPoints:qy.HSVPoints,nodes:qy.Nodes,arrayName:"No array associated",arrayLocation:"pointData",dataRange:[0,1]};function Ky(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Xy,n),h.a.obj(e,t),h.a.setGet(e,t,["arrayName"]),h.a.get(e,t,["mode","lookupTable","presetName","rgbPoints","hsvPoints","nodes","dataRange"]),function(e,t){t.classHierarchy.push("vtkLookupTableProxy"),t.lookupTable=t.lookupTable||Mp.newInstance(),t.lookupTable.setVectorModeToMagnitude(),e.setPresetName=function(n){t.presetName!==n&&(t.presetName=n,t.mode=Qy.Preset,e.applyMode())},e.setRGBPoints=function(n){t.rgbPoints!==n&&(t.rgbPoints=(n||qy.RGBPoints).slice(),e.applyMode())},e.setHSVPoints=function(n){t.hsvPoints!==n&&(t.hsvPoints=(n||qy.HSVPoints).slice(),e.applyMode())},e.setNodes=function(n){t.nodes!==n&&(t.nodes=(n||qy.Nodes).slice(),e.applyMode())},e.setMode=function(n){t.mode!==n&&(t.mode=n,e.applyMode())},e.applyMode=function(){switch(t.mode){case Qy.Preset:t.lookupTable.applyColorMap(Es.getPresetByName(t.presetName));break;case Qy.RGBPoints:t.lookupTable.removeAllPoints(),t.rgbPoints.forEach(function(e){var n;return(n=t.lookupTable).addRGBPoint.apply(n,Yy(e))});break;case Qy.HSVPoints:t.lookupTable.removeAllPoints(),t.hsvPoints.forEach(function(e){var n;return(n=t.lookupTable).addHSVPoint.apply(n,Yy(e))});break;case Qy.Nodes:t.lookupTable.setNodes(t.nodes)}t.lookupTable.setMappingRange(t.dataRange[0],t.dataRange[1]),t.lookupTable.updateRange(),e.modified()},e.setDataRange=function(n,r){t.dataRange[0]===n&&t.dataRange[1]===r||(t.dataRange[0]=n,t.dataRange[1]=r,t.lookupTable.setMappingRange(t.dataRange[0],t.dataRange[1]),t.lookupTable.updateRange(),e.applyMode())},e.applyMode()}(e,t),h.a.proxy(e,t)}var Zy={newInstance:h.a.newInstance(Ky,"vtkLookupTableProxy"),extend:Ky,Mode:Qy,Defaults:qy};function Jy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var $y={Gaussians:0,Points:1,Nodes:2},eb={Gaussians:[{position:.5,height:1,width:.5,xBias:.5,yBias:.5}],Points:[[0,0],[1,1]],Nodes:[{x:0,y:0,midpoint:.5,sharpness:0},{x:1,y:1,midpoint:.5,sharpness:0}]};function tb(e,t){t.classHierarchy.push("vtkPiecewiseFunctionProxy"),t.piecewiseFunction=t.piecewiseFunction||Ae.newInstance(),e.setGaussians=function(n){t.gaussians=(n||[]).slice(),0===t.gaussians.length&&(t.gaussians=eb.Gaussians.slice()),e.applyMode()},e.setPoints=function(n){t.points=(n||[]).slice(),0===t.points.length&&(t.points=eb.Points.slice()),e.applyMode()},e.setNodes=function(n){t.nodes=(n||[]).slice(),0===t.nodes.length&&(t.nodes=eb.Nodes.slice()),e.applyMode()},e.setMode=function(n){t.mode!==n&&(t.mode=n,e.applyMode())},e.applyMode=function(){switch(t.mode){case $y.Gaussians:Zs.applyGaussianToPiecewiseFunction(t.gaussians,255,t.dataRange,t.piecewiseFunction),e.modified();break;case $y.Points:n=t.points,r=t.dataRange,i=t.piecewiseFunction,a=r[1]-r[0],o=n.map(function(e){var t=Jy(e,2),n=t[0],i=t[1];return[n*a+r[0],i]}),i.removeAllPoints(),o.forEach(function(e){var t=Jy(e,2),n=t[0],r=t[1];return i.addPoint(n,r)}),e.modified();break;case $y.Nodes:!function(e,t,n){var r=t[1]-t[0],i=e.map(function(e){return Object.assign({},e,{x:e.x*r+t[0]})});n.setNodes(i)}(t.nodes,t.dataRange,t.piecewiseFunction),e.modified()}var n,r,i,a,o},e.getLookupTableProxy=function(){return t.proxyManager.getLookupTable(t.arrayName)},e.setDataRange=function(n,r){t.dataRange[0]===n&&t.dataRange[1]===r||(t.dataRange[0]=n,t.dataRange[1]=r,e.applyMode())},e.applyMode()}var nb={mode:$y.Gaussians,gaussians:eb.Gaussians,points:eb.Points,nodes:eb.Nodes,arrayName:"No array associated",arrayLocation:"pointData",dataRange:[0,1]};function rb(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,nb,n),h.a.obj(e,t),h.a.setGet(e,t,["arrayName"]),h.a.get(e,t,["piecewiseFunction","gaussians","nodes","points","mode","dataRange"]),tb(e,t),h.a.proxy(e,t)}var ib={newInstance:h.a.newInstance(rb,"vtkPiecewiseFunctionProxy"),extend:rb,Mode:$y,Defaults:eb},ab=h.a.vtkErrorMacro;function ob(e,t){function n(n){var r=n.getProxyId?n.getProxyId():n,i=t.proxyIdMapping[r];return Object.keys(t.proxyByGroup).forEach(function(e){var n=t.proxyByGroup[e],r=n.indexOf(i);-1!==r&&n.splice(r,1)}),delete t.proxyIdMapping[r],i.gcPropertyLinks("application"),i.gcPropertyLinks("source"),i.setProxyManager(null),e.invokeProxyRegistrationChange({action:"unregister",proxyId:r,proxyName:i.getProxyName(),proxyGroup:i.getProxyGroup()}),i}e.setActiveSource=function(n){t.activeSource!==n&&(t.activeSourceSubscription&&(t.activeSourceSubscription.unsubscribe(),t.activeSourceSubscription=null),t.activeSource=n,n&&(t.activeSourceSubscription=n.onModified(e.modified)),e.modified(),e.invokeActiveSourceChange(n))},e.setActiveView=function(n){t.activeView!==n&&(t.activeViewSubscription&&(t.activeViewSubscription.unsubscribe(),t.activeViewSubscription=null),t.activeView=n,n&&(t.activeViewSubscription=n.onModified(e.modified)),e.modified(),e.invokeActiveViewChange(n))},e.getProxyById=function(e){return t.proxyIdMapping[e]},e.getProxyGroups=function(){return Object.keys(t.proxyByGroup)},e.getProxyInGroup=function(e){return[].concat(t.proxyByGroup[e]||[])},e.getSources=function(){return[].concat(t.proxyByGroup.Sources||[])},e.getRepresentations=function(){return[].concat(t.proxyByGroup.Representations||[])},e.getViews=function(){return[].concat(t.proxyByGroup.Views||[])},e.createProxy=function(n,r,i){var a=t.proxyConfiguration.definitions;if(!a[n]||!a[n][r])return null;var o=a[n][r],s=Object.assign({},o.options,i),u=o.class.newInstance(Object.assign({},s,{proxyGroup:n,proxyName:r,proxyManager:e}));if(o.proxyProps){var l={};Object.keys(o.proxyProps).forEach(function(t){var n=o.proxyProps[t];l[t]=e.createProxy(n.group,n.name,n.options)}),u.set(l)}return o.props&&u.set(o.props),function(n){if(n){t.proxyIdMapping[n.getProxyId()]=n;var r=n.getProxyGroup();t.proxyByGroup[r]||(t.proxyByGroup[r]=[]),-1===t.proxyByGroup[r].indexOf(n)&&t.proxyByGroup[r].push(n),n.setProxyManager(e),h.a.setImmediate(function(){e.invokeProxyRegistrationChange({action:"register",proxyId:n.getProxyId(),proxyName:n.getProxyName(),proxyGroup:n.getProxyGroup(),proxy:n})})}}(u),s.activateOnCreate&&u.activate(),u},e.getRepresentation=function(n,r){var i=n||e.getActiveSource(),a=r||e.getActiveView();if(!i||!a||!i.getType())return null;var o=i.getProxyId(),s=a.getProxyId(),u=t.sv2rMapping[o];u||(u={},t.sv2rMapping[o]=u);var l=u[s];if(!l){var c=a.getProxyName(),f=i.getType(),d=t.proxyConfiguration.representations[c][f];if(!d)return ab("No definition for representation of ".concat(f," in view ").concat(c)),null;l=e.createProxy("Representations",d.name,d.options),t.r2svMapping[l.getProxyId()]={sourceId:o,viewId:s},u[s]=l,l.setInput(i),a.addRepresentation(l)}return l},e.deleteProxy=function(r){var i=r.getProxyGroup().toLowerCase();if("views"===i&&(r.getRepresentations().forEach(function(t){e.deleteProxy(t)}),r.setContainer(null),n(r),e.getActiveView()===r&&e.setActiveView(e.getViews()[0])),"representations"===i){var a=t.r2svMapping[r.getProxyId()],o=a.sourceId,s=a.viewId;e.getProxyById(s).removeRepresentation(r),delete t.r2svMapping[r.getProxyId()],delete t.sv2rMapping[o][s],n(r)}if("sources"===i){var u=t.sv2rMapping[r.getProxyId()];Object.keys(u).forEach(function(t){e.deleteProxy(u[t])}),n(r),e.getActiveSource()===r&&e.setActiveSource(e.getSources()[0])}r.delete()}}function sb(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ub(e){var t={};return e.listPropertyNames().forEach(function(n){t[n]=e.getPropertyByName(n).value}),t}function lb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function cb(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,{proxyIdMapping:{},proxyByGroup:{},proxyConfiguration:{},sv2rMapping:{},r2svMapping:{},collapseState:{},lookupTables:{},piecewiseFunctions:{},animating:!1},n),h.a.obj(e,t),h.a.setGet(e,t,["proxyConfiguration","activeSource","activeView"]),h.a.event(e,t,"ActiveSourceChange"),h.a.event(e,t,"ActiveViewChange"),h.a.event(e,t,"ProxyRegistrationChange"),ob(e,t),function(e,t){e.loadState=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(r,i){var a={},o={},s={},u=n.datasetHandler||Ot.a,l=[];t.sources.forEach(function(t){var n=t.id,r=t.group,i=t.name,o=t.props;l.push(Promise.resolve(u(o.dataset)).then(function(t){if(t){var s=e.createProxy(r,i);return s.setName(o.name),s.setInputData(t,o.type),a[n]=s,s}return null}))}),Promise.all(l).then(function(){var n=e.getViews();function i(e){a[e]&&s[e]&&a[e].resetOrientation().then(function(){a[e].getCamera().set(s[e]),a[e].getRenderer().updateLightsGeometryToFollowCamera(),a[e].renderLater()})}t.views.forEach(function(r){var i=r.id,o=r.group,u=r.name,l=r.props,c=r.camera,f=null;t.options.recycleViews&&(f=n.find(function(e){return e.getProxyGroup()===o&&e.getProxyName()===u&&e.getName()===l.name})),f?f.setDisableAnimation(!0):f=e.createProxy(o,u,{disableAnimation:!0}),f.set(l,!0),a[i]=f,s[i]=c}),t.representations.forEach(function(t){var n=t.source,r=t.view,o=t.props;e.getRepresentation(a[n],a[r]).set(o,!0),i(r)}),Object.keys(t.fields).forEach(function(n){var r=t.fields[n],i=r.lookupTable,a=r.piecewiseFunction,o=e.getLookupTable(n,i);o.setPresetName(i.presetName),o.setDataRange.apply(o,sb(i.dataRange));var s=e.getPiecewiseFunction(n,a);switch(a.mode){case ib.Mode.Gaussians:s.setGaussians(a.gaussians);break;case ib.Mode.Points:s.setPoints(a.points);break;case ib.Mode.Nodes:s.setNodes(a.nodes)}s.setMode(a.mode),s.setDataRange.apply(s,sb(a.dataRange))}),Object.keys(s).forEach(i),Object.keys(a).forEach(function(e){var t=a[e].getProxyId();o[e]=t}),t.views.forEach(function(e){var t=e.id;a[t].setDisableAnimation(!1)}),r(Object.assign({},t.userData,{$oldToNewIdMapping:o}))}).catch(i)})},e.saveState=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(r,i){var a=e.getSources(),o=e.getViews(),s=t.datasetHandler||function(e){return e.getState()};delete t.datasetHandler;var u=[],l=new Set,c={userData:n,options:t,sources:[],views:[],representations:[],fields:{}};a.forEach(function(e){var t=Promise.resolve(s(e.getDataset(),e));u.push(t),c.sources.push({id:e.getProxyId(),group:e.getProxyGroup(),name:e.getProxyName(),props:{name:e.getName(),type:e.getType(),dataset:t}})}),o.forEach(function(e){var t=e.getCamera().get("position","viewUp","focalPoint");c.views.push({id:e.getProxyId(),group:e.getProxyGroup(),name:e.getProxyName(),props:Object.assign(ub(e),e.get("axis","orientation","viewUp")),camera:t}),e.getRepresentations().forEach(function(t){c.representations.push({source:t.getInput().getProxyId(),view:e.getProxyId(),props:ub(t)}),l.add(t.getColorBy()[0])})}),l.forEach(function(t){c.fields[t]={lookupTable:e.getLookupTable(t).get("mode","presetName","rgbPoints","hsvPoints","nodes","arrayName","arrayLocation","dataRange"),piecewiseFunction:e.getPiecewiseFunction(t).get("mode","gaussians","points","nodes","arrayName","arrayLocation","dataRange")}}),Promise.all(u).then(function(){for(var e=function(e){c.sources[e].props.dataset.then(function(t){c.sources[e].props.dataset=t})},t=0;t<c.sources.length;t++)e(t);r(c)}).catch(i)})}}(e),function(e,t){function n(){t.animating=!1;for(var n=e.getViews(),r=0;r<n.length;r++)n[r].setAnimation(!1,e)}e.create3DView=function(t){return e.createProxy("Views","View3D",t)},e.create2DView=function(t){return e.createProxy("Views","View2D",t)},e.render=function(t){var n=t||e.getActiveView();n&&n.renderLater()},e.renderAllViews=function(){for(var t=e.getViews(),n=0;n<t.length;n++)t[n].renderLater()},e.setAnimationOnAllViews=function(){for(var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=e.getViews().filter(function(e){return!t||e.getContainer()}),r=0;r<n.length;r++)n[r].setAnimation(t,e)},e.autoAnimateViews=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:250;if(!t.animating){t.animating=!0;for(var i=e.getViews().filter(function(e){return e.getContainer()}),a=0;a<i.length;a++)i[a].setAnimation(!0,e);t.clearAnimations=h.a.debounce(n,r)}t.clearAnimations()},e.resizeAllViews=function(){for(var t=e.getViews(),n=0;n<t.length;n++)t[n].resize()},e.resetCamera=function(t){var n=t||e.getActiveView();n&&n.resetCamera&&n.resetCamera()},e.createRepresentationInAllViews=function(t){for(var n=e.getViews(),r=0;r<n.length;r++)e.getRepresentation(t,n[r])},e.resetCameraInAllViews=function(){for(var t=e.getViews(),n=0;n<t.length;n++)t[n].resetCamera()}}(e,t),function(e,t){e.getSections=function(){var n=[],r=e.getActiveSource();if(!r)return[];var i=e.getActiveView();if(r){var a=r.getProxySection();a.ui.length&&n.push(Object.assign(a,{collapsed:t.collapseState[a.name]}))}if(r&&i){var o=e.getRepresentation(r,i);if(o){var s=o.getProxySection();s.ui.length&&n.push(Object.assign(s,{collapsed:t.collapseState[s.name]}))}}if(i){var u=i.getProxySection();u.ui.length&&n.push(Object.assign(u,{collapsed:t.collapseState[u.name]}))}return n},e.updateCollapseState=function(n,r){t.collapseState[n]=r,e.modified()},e.applyChanges=function(t){for(var n={},r=Object.keys(t),i=r.length;i--;){var a=r[i],o=lb(a.split(":"),2),s=o[0],u=o[1];if(n[s]||(n[s]={}),"__command_execute__"===t[a]){var l=e.getProxyById(s);l&&l[u]()}else n[s][u]=t[a]}var c=Object.keys(n);for(i=c.length;i--;){s=c[i];var f=e.getProxyById(s);f&&f.set(n[s])}e.modified(),e.renderAllViews()},e.getLookupTable=function(n,r){return t.lookupTables[n]||(t.lookupTables[n]=e.createProxy("Proxy","LookupTable",Object.assign({arrayName:n},r))),t.lookupTables[n]},e.getPiecewiseFunction=function(n,r){return t.piecewiseFunctions[n]||(t.piecewiseFunctions[n]=e.createProxy("Proxy","PiecewiseFunction",Object.assign({arrayName:n},r))),t.piecewiseFunctions[n]},e.rescaleTransferFunctionToDataRange=function(t,n){var r=e.getLookupTable(t),i=e.getPiecewiseFunction(t);r.setDataRange(n[0],n[1]),i.setDataRange(n[0],n[1])}}(e,t),h.a.proxy(e,t),t.classHierarchy.push("vtkProxyManager")}var fb={newInstance:h.a.newInstance(cb,"vtkProxyManager"),extend:cb};var db={name:"Default source"};function pb(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,db,n),h.a.obj(e,t),h.a.get(e,t,["name","type","dataset","algo","inputProxy"]),h.a.set(e,t,["name"]),h.a.event(e,t,"DatasetChange"),h.a.proxy(e,t),function(e,t){t.classHierarchy.push("vtkSourceProxy"),e.setInputProxy=function(n){t.inputSubscription&&(t.inputSubscription(),t.inputSubscription=null),t.inputProxy=n,t.inputProxy&&(t.inputSubscription=n.onModified(e.update,-1).unsubscribe),e.update()},e.setInputData=function(n,r){t.dataset!==n&&(t.dataset=n,t.type=r||n.getClassName(),e.modified(),e.invokeDatasetChange())},e.setInputAlgorithm=function(n,r){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t.type=r,t.algo!==n&&(t.algo=n,t.algoSubscription&&(t.algoSubscription(),t.algoSubscription=null),n&&i&&(t.algoSubscription=n.onModified(function(){e.update()},-1).unsubscribe,e.update()))},e.update=function(){t.algo&&t.inputProxy&&t.algo.setInputData(t.inputProxy.getDataset()),t.updateDomain&&t.inputProxy&&t.updateDomain(e,t.inputProxy.getDataset()),t.algo&&e.setInputData(t.algo.getOutputData(),t.type)},e.getUpdate=function(){return t.algo.getMTime()>t.dataset.getMTime()},e.delete=h.a.chain(function(){t.algoSubscription&&(t.algoSubscription(),t.algoSubscription=null),t.inputSubscription&&(t.inputSubscription(),t.inputSubscription=null)},e.delete),t.inputProxy&&(t.inputSubscription=t.inputProxy.onModified(function(){e.update()},-1).unsubscribe),t.algoFactory&&e.setInputAlgorithm(t.algoFactory.newInstance(),null,t.autoUpdate),e.update()}(e,t),t.proxyPropertyMapping&&h.a.proxyPropertyMapping(e,t,t.proxyPropertyMapping)}var hb={newInstance:h.a.newInstance(pb,"vtkSourceProxy"),extend:pb},gb={slice:bo.vtkMouseCameraSliceManipulator,multiRotate:bo.vtkMouseCameraTrackballMultiRotateManipulator,pan:bo.vtkMouseCameraTrackballPanManipulator,roll:bo.vtkMouseCameraTrackballRollManipulator,rotate:bo.vtkMouseCameraTrackballRotateManipulator,zoom:bo.vtkMouseCameraTrackballZoomManipulator,zoomToMouse:bo.vtkMouseCameraTrackballZoomToMouseManipulator,range:bo.vtkMouseRangeManipulator,vrPan:bo.vtkVRButtonPanManipulator,gestureCamera:bo.vtkGestureCameraManipulator},mb={"3D":[{type:"rotate"},{type:"pan",options:{shift:!0}},{type:"zoom",options:{control:!0}},{type:"zoom",options:{alt:!0}},{type:"zoom",options:{dragEnabled:!1,scrollEnabled:!0}},{type:"zoom",options:{button:3}},{type:"roll",options:{shift:!0,control:!0}},{type:"roll",options:{shift:!0,alt:!0}},{type:"roll",options:{shift:!0,button:3}},{type:"vrPan"},{type:"gestureCamera"}],"2D":[{type:"pan",options:{shift:!0}},{type:"zoom",options:{control:!0}},{type:"zoom",options:{alt:!0}},{type:"zoom",options:{button:3}},{type:"roll",options:{shift:!0,alt:!0}},{type:"roll",options:{shift:!0,button:3}},{type:"roll",options:{shift:!0}},{type:"vrPan"},{type:"gestureCamera"}]};function vb(e,t){t.removeAllManipulators();for(var n=0;n<e.length;n++){var r=e[n],i=gb[r.type].newInstance(r.options);i.isA("vtkCompositeVRManipulator")?t.addVRManipulator(i):i.isA("vtkCompositeGestureManipulator")?t.addGestureManipulator(i):t.addMouseManipulator(i)}return!0}var yb={applyDefinitions:vb,applyPreset:function(e,t){return vb(mb[e],t)},registerManipulatorType:function(e,t){gb[e]=t},registerStylePreset:function(e,t){mb[e]=t}};function bb(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Mb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var xb=1e-6;function wb(e,t){function n(){var e=Mb(t.renderer.getBackground(),3),n=e[0],r=e[1],i=e[2];t.cornerAnnotation.getAnnotationContainer().style.color=n+r+i>1.5?"black":"white"}t.classHierarchy.push("vtkViewProxy"),t.renderWindow=Jp.newInstance(),t.renderer=Dc.newInstance({background:[0,0,0]}),t.renderWindow.addRenderer(t.renderer),t.openglRenderWindow=Hv.newInstance(),t.renderWindow.addView(t.openglRenderWindow),t.interactor=pa.newInstance(),t.interactor.setView(t.openglRenderWindow),t.interactorStyle3D=za.newInstance(),t.interactorStyle2D=za.newInstance(),yb.applyPreset("3D",t.interactorStyle3D),yb.applyPreset("2D",t.interactorStyle2D),t.cornerAnnotation=es.newInstance(),t.interactor.setInteractorStyle(t.useParallelRendering?t.interactorStyle2D:t.interactorStyle3D),t.camera=t.renderer.getActiveCamera(),t.camera.setParallelProjection(!!t.useParallelRendering),t.orientationAxesArrow=op.newInstance(),t.orientationAxesCube=ep.newInstance(),Kd.applyPreset("default",t.orientationAxesCube),Kd.applyPreset("lps",t.orientationAxesCube),t.orientationAxesMap={arrow:t.orientationAxesArrow,cube:t.orientationAxesCube},t.orientationWidget=Rc.newInstance({actor:t.orientationAxesArrow,interactor:t.renderWindow.getInteractor()}),t.orientationWidget.setEnabled(!0),t.orientationWidget.setViewportCorner(Rc.Corners.BOTTOM_LEFT),t.orientationWidget.setViewportSize(.1),e.setPresetToInteractor3D=function(e){return Array.isArray(e)?yb.applyDefinitions(e,t.interactorStyle3D):yb.applyPreset(e,t.interactorStyle3D)},e.setPresetToInteractor2D=function(e){return Array.isArray(e)?yb.applyDefinitions(e,t.interactorStyle2D):yb.applyPreset(e,t.interactorStyle2D)},e.setOrientationAxesType=function(n){var r=t.orientationAxesMap[n];r&&(t.orientationAxesType=n,t.orientationWidget.setActor(r),e.renderLater())},e.registerOrientationAxis=function(e,n){t.orientationAxesMap[e]=n},e.unregisterOrientationAxis=function(e){delete t.orientationAxesMap[e]},e.listOrientationAxis=function(){return Object.keys(t.orientationAxesMap)},e.setPresetToOrientationAxes=function(n){var r=!1;return"string"==typeof n?(t.presetToOrientationAxes!==n&&(t.presetToOrientationAxes=n,r=Kd.applyPreset(n,t.orientationAxesCube),e.modified()),r):(t.presetToOrientationAxes="Custom",r=Kd.applyDefinitions(n,t.orientationAxesCube),e.modified(),r)},e.setContainer=function(e){t.container&&(t.interactor.unbindEvents(t.container),t.openglRenderWindow.setContainer(null),t.cornerAnnotation.setContainer(null)),t.container=e,e&&(t.openglRenderWindow.setContainer(e),t.cornerAnnotation.setContainer(e),t.interactor.initialize(),t.interactor.bindEvents(e))},e.resize=function(){if(t.container){var n=t.container.getBoundingClientRect();if(n.width===n.height&&0===n.width)return;var r=window.devicePixelRatio||1,i=Math.max(10,r*Math.floor(n.width)),a=Math.max(10,r*Math.floor(n.height));t.openglRenderWindow.setSize(i,a),e.invokeResize({width:i,height:a}),e.renderLater()}},e.renderLater=function(){t.representations.length>0&&t.resetCameraOnFirstRender&&(t.resetCameraOnFirstRender=!1,e.resetCamera()),t.orientationWidget.updateMarkerOrientation(),t.renderer.resetCameraClippingRange(),setTimeout(t.renderWindow.render,0)},e.addRepresentation=function(e){e&&-1===t.representations.indexOf(e)&&(t.representations.push(e),e.getActors().forEach(t.renderer.addActor),e.getVolumes().forEach(t.renderer.addVolume))},e.removeRepresentation=function(e){e&&(-1!==t.representations.indexOf(e)&&(t.representations=t.representations.filter(function(t){return t!==e}),e.getActors().forEach(t.renderer.removeActor),e.getVolumes().forEach(t.renderer.removeVolume)),0===t.representations.length&&(t.resetCameraOnFirstRender=!0))},e.resetCamera=function(){t.renderer.resetCamera(),t.renderer.resetCameraClippingRange(),t.interactorStyle2D.setCenterOfRotation(t.camera.getFocalPoint()),t.interactorStyle3D.setCenterOfRotation(t.camera.getFocalPoint()),e.renderLater()},e.captureImage=function(){return t.renderWindow.captureImages()[0]},e.openCaptureImage=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"_blank",n=new Image;e.captureImage().then(function(e){n.src=e;var r=window.open("",t);r.document.write(n.outerHTML),r.document.title="vtk.js Image Capture",window.focus()})},e.setCornerAnnotation=function(e,n){var r,i,a;t.cornerAnnotation.updateTemplates((a=function(e){return es.applyTemplate(n,e)},(i=e)in(r={})?Object.defineProperty(r,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[i]=a,r))},e.setCornerAnnotations=function(n){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?Object.keys(n).forEach(function(t){e.setCornerAnnotation(t,n[t])}):t.cornerAnnotation.updateTemplates(n)},e.updateCornerAnnotation=function(e){return t.cornerAnnotation.updateMetadata(e)},e.setAnnotationOpacity=function(n){t.annotationOpacity!==Number(n)&&(t.annotationOpacity=Number(n),t.cornerAnnotation.getAnnotationContainer().style.opacity=n,e.modified())},e.setBackground=h.a.chain(t.renderer.setBackground,n),e.getBackground=t.renderer.getBackground,e.setAnimation=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(!t.disableAnimation||!n)if(n)t.renderWindow.getInteractor().requestAnimation(r);else{var i=r===e||0==="".concat(r).indexOf("ViewProxy.updateOrientation.");t.renderWindow.getInteractor().cancelAnimation(r,i)}},e.updateOrientation=function(n,r,i){var a,o,s,u,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(void 0===n)return Promise.resolve();var c=t.camera.getPosition(),f=t.camera.getViewUp(),d=t.camera.getFocalPoint();t.axis=n,t.orientation=r,t.viewUp=i;var p=t.camera.getFocalPoint();p[t.axis]+=t.orientation,(a=t.camera).setPosition.apply(a,bb(p)),(o=t.camera).setViewUp.apply(o,bb(i)),t.renderer.resetCamera();var h=t.camera.getPosition(),g=t.camera.getViewUp();(s=t.camera).setPosition.apply(s,bb(c)),(u=t.camera).setViewUp.apply(u,bb(f));var m=[{position:h,viewUp:g}];if(l){var v=[(c[0]-h[0])/l,(c[1]-h[1])/l,(c[2]-h[2])/l],y=[(f[0]-g[0])/l,(f[1]-g[1])/l,(f[2]-g[2])/l],b=v[0]||v[1]||v[2]||y[0]||y[1]||y[2],M=v.map(function(e){return Math.abs(e)<xb?0:1}).reduce(function(e,t){return e+t},0),x=y.map(function(e){return Math.abs(e)<xb?0:1}).reduce(function(e,t){return e+t},0);if(b)if(1===x&&0===M)for(var w=d.map(function(e,t){return Math.abs(c[t]-e)<xb?t:null}).filter(function(e){return null!==e}).find(function(e){return Math.abs(y[e])<xb}),A=0;A<l;A++){var T=[i[0]+(A+1)*y[0],i[1]+(A+1)*y[1],i[2]+(A+1)*y[2]];T[w]=Math.sin(Math.PI*A/(l-1)),m.push({position:h,viewUp:T})}else for(var C=0;C<l;C++)m.push({position:[h[0]+(C+1)*v[0],h[1]+(C+1)*v[1],h[2]+(C+1)*v[2]],viewUp:[i[0]+(C+1)*y[0],i[1]+(C+1)*y[1],i[2]+(C+1)*y[2]]})}return 1===m.length?(t.camera.set(m.pop()),t.renderer.resetCameraClippingRange(),t.interactor.getLightFollowCamera()&&t.renderer.updateLightsGeometryToFollowCamera(),Promise.resolve()):new Promise(function(n,r){var i=performance.now().toString(),a="ViewProxy.updateOrientation.".concat(i);e.setAnimation(!0,a);var o=null;o=setInterval(function(){if(m.length){var r,i,s=m.pop(),u=s.position,l=s.viewUp;(r=t.camera).setPosition.apply(r,bb(u)),(i=t.camera).setViewUp.apply(i,bb(l)),t.renderer.resetCameraClippingRange(),t.interactor.getLightFollowCamera()&&t.renderer.updateLightsGeometryToFollowCamera()}else clearInterval(o),e.setAnimation(!1,a),n()},1)})},e.resetOrientation=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e.updateOrientation(t.axis,t.orientation,t.viewUp,n)},e.rotate=function(e){var n,r=t.camera.get("viewUp","focalPoint","position"),i=r.viewUp,a=r.focalPoint,o=r.position,s=[a[0]-o[0],a[1]-o[1],a[2]-o[2]];d.a.buildFromDegree().rotate(Number.isNaN(e)?90:e,s).apply(i),(n=t.camera).setViewUp.apply(n,bb(i)),t.camera.modified(),t.orientationWidget.updateMarkerOrientation(),t.renderWindow.render()},e.focusTo=h.a.chain(t.camera.setFocalPoint,t.interactorStyle2D.setCenterOfRotation,t.interactorStyle3D.setCenterOfRotation),e.resetOrientation(),n()}var Ab={representations:[],sectionName:"view",annotationOpacity:1,resetCameraOnFirstRender:!0,presetToOrientationAxes:"lps",orientationAxesType:"arrow",disableAnimation:!1,axis:1,orientation:0,viewUp:[0,0,1]};function Tb(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ab,n),h.a.obj(e,t),h.a.setGet(e,t,["name","disableAnimation"]),h.a.get(e,t,["annotationOpacity","camera","container","cornerAnnotation","interactor","interactorStyle2D","interactorStyle3D","openglRenderWindow","orientationAxesType","presetToOrientationAxes","renderer","renderWindow","representations","useParallelRendering"]),h.a.event(e,t,"Resize"),wb(e,t),h.a.proxy(e,t),h.a.proxyPropertyMapping(e,t,{orientationAxesVisibility:{modelKey:"orientationWidget",property:"enabled"},orientationAxesCorner:{modelKey:"orientationWidget",property:"viewportCorner"},orientationAxesSize:{modelKey:"orientationWidget",property:"viewportSize"},cameraViewUp:{modelKey:"camera",property:"viewUp",modified:!1},cameraPosition:{modelKey:"camera",property:"position",modified:!1},cameraFocalPoint:{modelKey:"camera",property:"focalPoint",modified:!1}})}var Cb={newInstance:h.a.newInstance(Tb,"vtkViewProxy"),extend:Tb},Sb=512;function Db(e){return Array.isArray(e)?e.map(Db).join(", "):Number.isInteger(e)?e:Number.isFinite(e)?Math.abs(e)<.01?"0":e.toFixed(2):e}var Ib={axis:2,orientation:-1,viewUp:[0,1,0],useParallelRendering:!0,sliceRepresentationSubscriptions:[]};function Eb(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ib,n),Cb.extend(e,t,n),h.a.get(e,t,["axis"]),function(e,t){t.classHierarchy.push("vtkView2DProxy"),e.updateWidthHeightAnnotation=function(){var n=t.cornerAnnotation.getMetadata(),r=n.ijkOrientation,i=n.dimensions;if(r&&i){var a=i;i.length>3&&(a=i.split(",").map(Number));var o=t.camera.getDirectionOfProjection(),s=t.camera.getViewUp(),u=[0,0,0];f.cross(o,s,u);var l=f.getMajorAxisIndex(u),c=f.getMajorAxisIndex(s),d=a["IJK".indexOf(r[l])],p=a["IJK".indexOf(r[c])];e.updateCornerAnnotation({sliceWidth:d,sliceHeight:p})}};var n=e.updateOrientation;e.updateOrientation=function(r,i,a){for(var o=n(r,i,a),s=t.representations.length;s--;){var u=t.representations[s],l="XYZ"[r];u.setSlicingMode&&u.setSlicingMode(l)}return e.updateCornerAnnotation({axis:"XYZ"[r]}),o};var r=e.addRepresentation;e.addRepresentation=function(n){r(n),n.setSlicingMode&&(n.setSlicingMode("XYZ"[t.axis]),e.bindRepresentationToManipulator(n))};var i=e.removeRepresentation;function a(n){e.updateCornerAnnotation({windowWidth:n}),t.sliceRepresentation&&t.sliceRepresentation.setWindowWidth&&t.sliceRepresentation.setWindowWidth(n)}function o(n){e.updateCornerAnnotation({windowLevel:n}),t.sliceRepresentation&&t.sliceRepresentation.setWindowLevel&&t.sliceRepresentation.setWindowLevel(n)}function s(n){var r=Number(n),i={slice:Number.isInteger(r)?n:r.toFixed(2)};if(t.sliceRepresentation&&t.sliceRepresentation.setSlice&&t.sliceRepresentation.setSlice(r),t.sliceRepresentation&&t.sliceRepresentation.getAnnotations){var a=t.sliceRepresentation.getAnnotations();Object.keys(a).forEach(function(e){i[e]=Db(a[e])})}e.updateCornerAnnotation(i)}e.removeRepresentation=function(n){if(i(n),n===t.sliceRepresentation){e.bindRepresentationToManipulator(null);for(var r=t.representations.length;r--;)e.bindRepresentationToManipulator(t.representations[r])&&(r=0)}},t.rangeManipulator=ho.newInstance({button:1,scrollEnabled:!0}),t.interactorStyle2D.addMouseManipulator(t.rangeManipulator),e.bindRepresentationToManipulator=function(n){var r=0;for(t.rangeManipulator.removeAllListeners(),t.sliceRepresentation=n;t.sliceRepresentationSubscriptions.length;)t.sliceRepresentationSubscriptions.pop().unsubscribe();if(n){if(t.sliceRepresentationSubscriptions.push(t.camera.onModified(e.updateWidthHeightAnnotation)),n.getWindowWidth){var i=function(){return a(n.getWindowWidth())},u=n.getPropertyDomainByName("windowWidth"),l=u.min,c=u.max,f=u.step;f&&"any"!==f||(f=1/Sb),t.rangeManipulator.setVerticalListener(l,c,f,n.getWindowWidth,a),t.sliceRepresentationSubscriptions.push(n.onModified(i)),i(),r++}if(n.getWindowLevel){var d=function(){return o(n.getWindowLevel())},p=n.getPropertyDomainByName("windowLevel"),h=p.min,g=p.max,m=p.step;m&&"any"!==m||(m=1/Sb),t.rangeManipulator.setHorizontalListener(h,g,m,n.getWindowLevel,o),t.sliceRepresentationSubscriptions.push(n.onModified(d)),d(),r++}if(n.getSlice&&n.getSliceValues){var v=function(){return s(n.getSlice())},y=n.getSliceValues();t.rangeManipulator.setScrollListener(y[0],y[y.length-1],y[1]-y[0]||1,n.getSlice,s),t.sliceRepresentationSubscriptions.push(n.onModified(v)),v(),r++}}return r}}(e,t)}var Nb=h.a.newInstance(Eb,"vtkView2DProxy"),Ob={vtkAbstractRepresentationProxy:Hy,vtkLookupTableProxy:Zy,vtkPiecewiseFunctionProxy:ib,vtkProxyManager:fb,vtkSourceProxy:hb,vtkView2DProxy:{newInstance:Nb,extend:Eb},vtkViewProxy:Cb},_b={representation:{"Surface with edges":{property:{edgeVisibility:!0,representation:2}},Surface:{property:{edgeVisibility:!1,representation:2}},Wireframe:{property:{edgeVisibility:!1,representation:1}},Points:{property:{edgeVisibility:!1,representation:0}}}},Lb={representation:"Surface"};var Pb={representation:"Surface"};function kb(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Pb,n),Hy.extend(e,t),function(e,t){t.classHierarchy.push("vtkGeometryRepresentationProxy"),t.mapper=cu.a.newInstance({interpolateScalarsBeforeMapping:!0,useLookupTableScalarRange:!0,scalarVisibility:!1}),t.actor=lu.a.newInstance(),t.property=t.actor.getProperty(),t.sourceDependencies.push(t.mapper),t.actor.setMapper(t.mapper),t.actors.push(t.actor)}(0,t),h.a.proxyPropertyState(e,t,_b,Lb),h.a.proxyPropertyMapping(e,t,{opacity:{modelKey:"property",property:"opacity"},visibility:{modelKey:"actor",property:"visibility"},color:{modelKey:"property",property:"diffuseColor"},interpolateScalarsBeforeMapping:{modelKey:"mapper",property:"interpolateScalarsBeforeMapping"},pointSize:{modelKey:"property",property:"pointSize"},useShadow:{modelKey:"property",property:"lighting"},useBounds:{modelKey:"actor",property:"useBounds"}})}var Rb={newInstance:h.a.newInstance(kb,"vtkGeometryRepresentationProxy"),extend:kb};var jb={};function Bb(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,jb,n),Hy.extend(e,t),function(e,t){t.classHierarchy.push("vtkGlyphRepresentationProxy"),t.property=Wu.a.newInstance(),t.sourceDependencies.push({setInputData:function(e){t.actors.length=0;var n=Mp.newInstance();n.applyColorMap({RGBPoints:e.rgbPoints}),t.glyph={};for(var r=e.glyph.length;r--;){var a=e.glyph[r];t.glyph[a.id]=Object(Ot.a)(a)}for(r=e.mapping.length;r--;){var o=e.mapping[r],s=t.glyph[o.glyphId],u=Se.a.newInstance();u.getPoints().setData(Float32Array.from(o.coordinates),3),o.scale&&u.getPointData().addArray(i.a.newInstance({name:"scaling",values:Float32Array.from(o.scale),numberOfComponents:3}));var l=Ip.newInstance({useLookupTableScalarRange:!0,lookupTable:n,orient:!1,scaling:!!o.scale,scaleArray:"scaling",scaleMode:Ip.ScaleModes.SCALE_BY_COMPONENTS}),c=lu.a.newInstance();t.property&&c.setProperty(t.property),c.setMapper(l),l.setInputData(u,0),l.setInputConnection(s.getOutputPort(),1),t.actors.push(c)}}}),e.setColorBy=function(){},e.getColorBy=function(){return[]},e.listDataArrays=function(){return[]}}(e,t),h.a.proxyPropertyMapping(e,t,{edgeVisibility:{modelKey:"property",property:"edgeVisibility"}})}var zb={newInstance:h.a.newInstance(Bb,"vtkGlyphRepresentationProxy"),extend:Bb};var Fb={};function Vb(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Fb,n),Hy.extend(e,t),function(e,t){t.classHierarchy.push("vtkMoleculeRepresentationProxy"),t.filter=Sn.newInstance(),t.sphereMapper=sh.newInstance(),t.stickMapper=ch.newInstance(),t.sphereActor=lu.a.newInstance(),t.stickActor=lu.a.newInstance(),t.sourceDependencies.push(t.filter),t.sphereMapper.setInputConnection(t.filter.getOutputPort(0)),t.sphereMapper.setScaleArray(t.filter.getSphereScaleArrayName()),t.sphereActor.setMapper(t.sphereMapper),t.stickMapper.setInputConnection(t.filter.getOutputPort(1)),t.stickMapper.setScaleArray("stickScales"),t.stickMapper.setOrientationArray("orientation"),t.stickActor.setMapper(t.stickMapper),t.actors.push(t.sphereActor),t.actors.push(t.stickActor),e.setColorBy=function(){},e.getColorBy=function(){return[]},e.listDataArrays=function(){return[]}}(e,t),h.a.proxyPropertyMapping(e,t,{tolerance:{modelKey:"filter",property:"tolerance"},atomicRadiusScaleFactor:{modelKey:"filter",property:"atomicRadiusScaleFactor"},bondRadius:{modelKey:"filter",property:"bondRadius"},deltaBondFactor:{modelKey:"filter",property:"deltaBondFactor"},radiusType:{modelKey:"filter",property:"radiusType"},hideElements:{modelKey:"filter",property:"hideElements"}})}var Ub={newInstance:h.a.newInstance(Vb,"vtkMoleculeRepresentationProxy"),extend:Vb};var Gb={};function Wb(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Gb,n),Hy.extend(e,t),function(e,t){t.classHierarchy.push("vtkSkyboxRepresentationProxy"),t.actor=ih.newInstance(),t.actors.push(t.actor),t.sourceDependencies.push({setInputData:function(n){t.actor.removeAllTextures(),t.actor.addTexture(n);var r=t.input.getAlgo().getPositions();e.updateProxyProperty("position",{values:r})}}),e.setColorBy=function(){},e.getColorBy=function(){return[]},e.listDataArrays=function(){return[]},e.setPosition=function(e){t.input.getAlgo().setPosition(e)},e.getPosition=function(){return t.input.getAlgo().getPosition()}}(e,t)}var Hb={newInstance:h.a.newInstance(Wb,"vtkSkyboxRepresentationProxy"),extend:Wb};function Yb(e,t){return e+t}function Qb(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(Yb,0)/t.length}function qb(e,t,n,r){var i,a,o,s,u=t.getRange(),l=e.getSpacing(),c=e.getBounds(),f=e.getExtent(),d=n.mapper.getSlicingMode(),p="IJKXYZ"[d];switch(d){case kp.SlicingMode.I:case kp.SlicingMode.J:case kp.SlicingMode.K:i=f[2*(s="IJK".indexOf(p))],a=f[2*s+1],o=1;break;case kp.SlicingMode.X:case kp.SlicingMode.Y:case kp.SlicingMode.Z:i=c[2*(s="XYZ".indexOf(p))],a=c[2*s+1],o=l[n.mapper.getClosestIJKAxis().ijkMode]}var h={slice:{domain:{min:i,max:a,step:o}},windowWidth:{domain:{min:0,max:u[1]-u[0],step:"any"}},windowLevel:{domain:{min:u[0],max:u[1],step:"any"}}};return r("slice",h.slice),r("windowWidth",h.windowWidth),r("windowLevel",h.windowLevel),{slice:Qb(h.slice.domain.min,h.slice.domain.max),windowWidth:h.windowWidth.domain.max,windowLevel:Math.floor(Qb(h.windowLevel.domain.min,h.windowWidth.domain.max))}}var Xb={};function Kb(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Xb,n),Hy.extend(e,t),h.a.get(e,t,["slicingMode"]),function(e,t){t.classHierarchy.push("vtkSliceRepresentationProxy"),t.mapper=kp.newInstance(),t.actor=Hp.newInstance(),t.property=t.actor.getProperty(),t.actor.setMapper(t.mapper),t.actors.push(t.actor),t.sourceDependencies.push(t.mapper),t.sourceDependencies.push({setInputData:function(n){var r=qb(n,e.getDataArray(),t,e.updateProxyProperty);e.set(r);var i=n.getBounds(),a=n.getExtent();switch(t.mapper.getSlicingMode()){case kp.SlicingMode.I:e.setSlice(Math.floor(Qb(a[0],a[1])));break;case kp.SlicingMode.J:e.setSlice(Math.floor(Qb(a[2],a[3])));break;case kp.SlicingMode.K:e.setSlice(Math.floor(Qb(a[4],a[5])));break;case kp.SlicingMode.X:e.setSlice(Qb(i[0],i[1]));break;case kp.SlicingMode.Y:e.setSlice(Qb(i[2],i[3]));break;case kp.SlicingMode.Z:e.setSlice(Qb(i[4],i[5]))}}}),e.setSlicingMode=function(n){if(n){if(t.slicingMode!==n){t.slicingMode=n,t.mapper.setSlicingMode(kp.SlicingMode[n]);var r="".concat(n.toLowerCase(),"Slice");if(r in t&&void 0!==t[r]&&t.mapper.setSlice(t[r]),t.input){var i=qb(e.getInputDataSet(),e.getDataArray(),t,e.updateProxyProperty);e.set(i)}e.modified()}}else console.log("skip setSlicingMode",n)},e.getSliceIndex=function(){return-1!=="XYZ".indexOf(t.slicingMode)?t.mapper.getSliceAtPosition(t.mapper.getSlice()):t.mapper.getSlice()},e.getAnnotations=function(){var n={},r=e.getSliceIndex(),i=t.mapper.getBoundsForSlice(),a=t.mapper.getSlicingModeNormal(),o=t.mapper.getClosestIJKAxis().ijkMode,s=[.5*(i[0]+i[1]),.5*(i[2]+i[3]),.5*(i[4]+i[5])],u=0;i[1]-i[0]<Number.EPSILON&&(u=i[0]),i[3]-i[2]<Number.EPSILON&&(u=i[2]),i[5]-i[4]<Number.EPSILON&&(u=i[4]);var l=t.mapper.getInputData();if(l){n.sliceSpacing=l.getSpacing()[o],n.dimensions=l.getDimensions(),n.sliceCount=l.getDimensions()[o];for(var c=[],f=0;f<3;f++){var d=[0,0,0,0,0,0];d[2*f+1]=1;var p=l.extentToBounds(d);p[1]-p[0]>Number.EPSILON&&(c[0]="IJK"[f]),p[3]-p[2]>Number.EPSILON&&(c[1]="IJK"[f]),p[5]-p[4]>Number.EPSILON&&(c[2]="IJK"[f])}n.ijkOrientation=c.join("")}return Object.assign({ijkMode:o,sliceBounds:i,sliceIndex:r,sliceNormal:a,sliceOrigin:s,slicePosition:u},n)},e.getSliceValues=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.slicingMode,r=e.getInputDataSet();if(!r)return[];for(var i=[],a=r.getBounds(),o="XYZ".indexOf(n),s=a[2*o+1],u=a[2*o];u<=s;)i.push(u),u++;return i};var n=e.setColorBy;e.setColorBy=function(r,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(null===r)t.property.setRGBTransferFunction(null),t.property.setScalarOpacity(null);else{n(r,i,a);var o=e.getLookupTableProxy(r),s=e.getPiecewiseFunctionProxy(r);t.property.setRGBTransferFunction(o.getLookupTable()),t.property.setScalarOpacity(s.getPiecewiseFunction())}},e.setSlicingMode(t.slicingMode||"X")}(e,t),h.a.proxyPropertyMapping(e,t,{visibility:{modelKey:"actor",property:"visibility"},windowWidth:{modelKey:"property",property:"colorWindow"},windowLevel:{modelKey:"property",property:"colorLevel"},interpolationType:{modelKey:"property",property:"interpolationType"},slice:{modelKey:"mapper",property:"slice"}})}var Zb={newInstance:h.a.newInstance(Kb,"vtkSliceRepresentationProxy"),extend:Kb};var Jb={slicingMode:kp.SlicingMode.NONE,slice:0,offset:0};function $b(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Jb,n),Hy.extend(e,t),h.a.get(e,t,["slicingMode","slice","offset"]),function(e,t){t.classHierarchy.push("vtkSlicedGeometryRepresentationProxy"),t.plane=Te.a.newInstance(),t.cutter=xt.newInstance(),t.cutter.setCutFunction(t.plane),t.mapper=cu.a.newInstance(),t.actor=lu.a.newInstance(),t.property=t.actor.getProperty(),t.property.setLighting(!1),t.mapper.setInputConnection(t.cutter.getOutputPort()),t.actor.setMapper(t.mapper),t.actors.push(t.actor),t.sourceDependencies.push(t.cutter),e.setSlice=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=t.slice!==n;t.slice=n;var i=t.plane.getNormal();return!(!t.plane.setOrigin(i[0]*n,i[1]*n,i[2]*n)&&!r||(e.modified(),0))},e.setOffset=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=t.offset!==n;t.offset=n;var i=t.plane.getNormal();return!(!t.actor.setPosition(n*i[0],n*i[1],n*i[2])&&!r||(e.modified(),0))},e.setSlicingMode=function(n){if(t.slicingMode!==n&&n){switch(t.slicingMode=n,kp.SlicingMode[n]){case kp.SlicingMode.X:t.plane.setNormal(1,0,0);break;case kp.SlicingMode.Y:t.plane.setNormal(0,1,0);break;case kp.SlicingMode.Z:t.plane.setNormal(0,0,1);break;default:return}var r=e.setSlice(t.slice);(r=e.setOffset(t.offset)||r)||e.modified()}else console.log("skip setSlicingMode",n)}}(e,t),h.a.proxyPropertyState(e,t),h.a.proxyPropertyMapping(e,t,{opacity:{modelKey:"property",property:"opacity"},visibility:{modelKey:"actor",property:"visibility"},color:{modelKey:"property",property:"diffuseColor"},useShadow:{modelKey:"property",property:"lighting"},useBounds:{modelKey:"actor",property:"useBounds"}})}var eM=h.a.newInstance($b,"vtkSlicedGeometryRepresentationProxy");function tM(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function nM(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function rM(e,t){return e+t}function iM(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(rM,0)/t.length}function aM(e,t,n){n.mapper;var r=n.property,i=t.getRange();r.setInterpolationTypeToLinear(),r.setScalarOpacityUnitDistance(0,N.a.getDiagonalLength(e.getBounds())/Math.max.apply(Math,nM(e.getDimensions()))),r.setGradientOpacityMinimumValue(0,0),r.setGradientOpacityMaximumValue(0,.05*(i[1]-i[0])),r.setShade(!0),r.setUseGradientOpacity(0,!0),r.setGradientOpacityMinimumOpacity(0,0),r.setGradientOpacityMaximumOpacity(0,1),r.setAmbient(.2),r.setDiffuse(.7),r.setSpecular(.3),r.setSpecularPower(8)}function oM(e,t){t.classHierarchy.push("vtkVolumeRepresentationProxy"),t.mapper=Dh.newInstance(),t.volume=Ah.newInstance(),t.property=t.volume.getProperty(),t.cropFilter=qt.newInstance(),t.mapper.setInputConnection(t.cropFilter.getOutputPort()),t.sourceDependencies.push(t.cropFilter),t.mapperX=kp.newInstance({slicingMode:kp.SlicingMode.X}),t.actorX=Hp.newInstance({visibility:!1}),t.propertySlices=t.actorX.getProperty(),t.mapperY=kp.newInstance({slicingMode:kp.SlicingMode.Y}),t.actorY=Hp.newInstance({visibility:!1,property:t.propertySlices}),t.mapperZ=kp.newInstance({slicingMode:kp.SlicingMode.Z}),t.actorZ=Hp.newInstance({visibility:!1,property:t.propertySlices}),t.mapperX.setInputConnection(t.cropFilter.getOutputPort()),t.mapperY.setInputConnection(t.cropFilter.getOutputPort()),t.mapperZ.setInputConnection(t.cropFilter.getOutputPort()),t.volume.setMapper(t.mapper),t.volumes.push(t.volume),t.actorX.setMapper(t.mapperX),t.actors.push(t.actorX),t.actorY.setMapper(t.mapperY),t.actors.push(t.actorY),t.actorZ.setMapper(t.mapperZ),t.actors.push(t.actorZ),t.sourceDependencies.push({setInputData:function(n){var r=tM(e.getColorBy(),2),i=r[0],a=r[1];e.rescaleTransferFunctionToDataRange(i,a);var o=e.getLookupTableProxy(i),s=e.getPiecewiseFunctionProxy(i);t.property.setRGBTransferFunction(0,o.getLookupTable()),t.property.setScalarOpacity(0,s.getPiecewiseFunction()),aM(n,e.getDataArray(),t),(t.sampleDistance<0||t.sampleDistance>1)&&e.setSampleDistance(),(t.edgeGradient<0||t.edgeGradient>1)&&e.setEdgeGradient();var u=function(e,t,n,r){var i=t.getRange(),a=e.getSpacing(),o=e.getBounds(),s=n.mapperX.getClosestIJKAxis().ijkMode,u=n.mapperY.getClosestIJKAxis().ijkMode,l=n.mapperZ.getClosestIJKAxis().ijkMode,c={xSlice:{domain:{min:o[0],max:o[1],step:a[s]}},ySlice:{domain:{min:o[2],max:o[3],step:a[u]}},zSlice:{domain:{min:o[4],max:o[5],step:a[l]}},windowWidth:{domain:{min:0,max:i[1]-i[0],step:"any"}},windowLevel:{domain:{min:i[0],max:i[1],step:"any"}}};return r("xSlice",c.xSlice),r("ySlice",c.ySlice),r("zSlice",c.zSlice),r("windowWidth",c.windowWidth),r("windowLevel",c.windowLevel),{xSlice:iM(c.xSlice.domain.min,c.xSlice.domain.max),ySlice:iM(c.ySlice.domain.min,c.ySlice.domain.max),zSlice:iM(c.zSlice.domain.min,c.zSlice.domain.max),windowWidth:c.windowWidth.domain.max,windowLevel:Math.floor(iM(c.windowLevel.domain.min,c.windowWidth.domain.max))}}(n,e.getDataArray(),t,e.updateProxyProperty);e.set(u)}}),e.isVisible=function(){return t.volume.getVisibility()},e.setVisibility=function(e){e?t.volume.setVisibility(!0):(t.volume.setVisibility(!1),t.actorX.setVisibility(!1),t.actorY.setVisibility(!1),t.actorZ.setVisibility(!1))},e.getVisibility=function(){return t.volume.getVisibility()||t.actorX.getVisibility()||t.actorY.getVisibility()||t.actorZ.getVisibility()},e.isVisible=e.getVisibility,e.setSliceVisibility=h.a.chain(t.actorX.setVisibility,t.actorY.setVisibility,t.actorZ.setVisibility),e.getSliceVisibility=t.actorX.getVisibility,e.setSampleDistance=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.4;if(t.sampleDistance!==n){t.sampleDistance=n;var r=e.getInputDataSet(),i=.7*Math.sqrt(r.getSpacing().map(function(e){return e*e}).reduce(function(e,t){return e+t},0));t.mapper.setSampleDistance(i*Math.pow(2,3*n-1.5)),e.modified()}},e.setEdgeGradient=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.2;if(t.edgeGradient!==n){if(t.edgeGradient=n,0===n)t.volume.getProperty().setUseGradientOpacity(0,!1);else{var r=e.getDataArray().getRange();t.volume.getProperty().setUseGradientOpacity(0,!0);var i=Math.max(0,n-.3)/.7;t.volume.getProperty().setGradientOpacityMinimumValue(0,.2*(r[1]-r[0])*i*i),t.volume.getProperty().setGradientOpacityMaximumValue(0,1*(r[1]-r[0])*n*n)}e.modified()}};var n=e.setColorBy;e.setColorBy=function(r,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;n(r,i,a);var o=e.getLookupTableProxy(r),s=e.getPiecewiseFunctionProxy(r);t.property.setRGBTransferFunction(0,o.getLookupTable()),t.property.setScalarOpacity(0,s.getPiecewiseFunction())}}var sM={sampleDistance:-1,edgeGradient:-1,disableSolidColor:!0};function uM(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,sM,n),Hy.extend(e,t),h.a.get(e,t,["sampleDistance","edgeGradient","cropFilter"]),oM(e,t),h.a.proxyPropertyMapping(e,t,{xSlice:{modelKey:"mapperX",property:"slice"},ySlice:{modelKey:"mapperY",property:"slice"},zSlice:{modelKey:"mapperZ",property:"slice"},volumeVisibility:{modelKey:"volume",property:"visibility"},xSliceVisibility:{modelKey:"actorX",property:"visibility"},ySliceVisibility:{modelKey:"actorY",property:"visibility"},zSliceVisibility:{modelKey:"actorZ",property:"visibility"},windowWidth:{modelKey:"propertySlices",property:"colorWindow"},windowLevel:{modelKey:"propertySlices",property:"colorLevel"},useShadow:{modelKey:"property",property:"shade"},croppingPlanes:{modelKey:"cropFilter",property:"croppingPlanes"}})}var lM={Core:Ob,Representations:{vtkGeometryRepresentationProxy:Rb,vtkGlyphRepresentationProxy:zb,vtkMoleculeRepresentationProxy:Ub,vtkSkyboxRepresentationProxy:Hb,vtkSliceRepresentationProxy:Zb,vtkSlicedGeometryRepresentationProxy:{newInstance:eM,extend:$b},vtkVolumeRepresentationProxy:{newInstance:h.a.newInstance(uM,"vtkVolumeRepresentationProxy"),extend:uM,updateConfiguration:aM}}},cM={DEFAULT:0,GEOMETRY:1,SLICE:2,VOLUME:3},fM={PICKING_BUFFER:0,FRONT_BUFFER:1},dM={ViewTypes:cM,RenderingTypes:fM},pM=.5;var hM={contextVisibility:!0,handleVisibility:!0,hasFocus:!1};function gM(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,hM,n),Du.a.extend(e,t,n),Ma.extend(e,t,n),h.a.setGet(e,t,["contextVisibility","handleVisibility","widgetManager"]),h.a.get(e,t,["representations","widgetState"]),h.a.event(e,t,"ActivateHandle"),function(e,t){t.classHierarchy.push("vtkAbstractWidget"),t.actorToRepresentationMap=new WeakMap,e.getBounds=t.widgetState.getBounds,e.getNestedProps=function(){return t.representations},e.activateHandle=function(n){var r=n.selectedState,i=n.representation;t.widgetState.activateOnly(r),t.activeState=r,r&&r.updateManipulator&&r.updateManipulator(),e.invokeActivateHandle({selectedState:r,representation:i}),e.updateCursor&&e.updateCursor()},e.deactivateAllHandles=function(){t.widgetState.deactivate()},e.hasActor=function(e){return t.actorToRepresentationMap.has(e)},e.grabFocus=function(){t.hasFocus=!0},e.loseFocus=function(){t.hasFocus=!1},e.hasFocus=function(){return t.hasFocus},e.placeWidget=function(e){return t.widgetState.placeWidget(e)},e.getPlaceFactor=function(){return t.widgetState.getPlaceFactor()},e.setPlaceFactor=function(e){return t.widgetState.setPlaceFactor(e)},e.getRepresentationFromActor=function(e){return t.actorToRepresentationMap.get(e)},e.updateRepresentationForRender=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fM.FRONT_BUFFER,n=0;n<t.representations.length;n++)t.representations[n].updateActorVisibility(e,t.visibility,t.contextVisibility,t.handleVisibility)},e.setPriority(pM)}(e,t)}var mM={newInstance:h.a.newInstance(gM,"vtkAbstractWidget"),extend:gM};function vM(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var yM=dM.ViewTypes,bM=dM.RenderingTypes,MM=h.a.vtkErrorMacro,xM=1;function wM(e){var t=e.getActiveCamera(),n=e.getRenderWindow(),r=n.getInteractor(),i=r.getView();return{renderer:e,renderWindow:n,interactor:r,openGLRenderWindow:i,camera:t}}function AM(e,t){t.viewId||(t.viewId="view-".concat(xM++)),t.classHierarchy.push("vtkWidgetManager");var n=new WeakMap,r=[];function i(e){return e&&(e.isA("vtkAbstractWidget")?e:e.getWidgetForView({viewId:t.viewId}))}function a(e){e.updateRepresentationForRender(t.renderingType)}t.selector=Pg.newInstance(),t.selector.setFieldAssociation(_t.a.FIELD_ASSOCIATION_POINTS),e.enablePicking=function(){t.pickingEnabled=!0,t.renderingType=bM.PICKING_BUFFER,t.widgets.forEach(a),console.time("capture");var n=vM(t.openGLRenderWindow.getSize(),2),r=n[0],i=n[1];t.selector.setArea(0,0,r,i),t.selector.releasePixBuffers(),t.pickingAvailable=t.selector.captureBuffers(),t.previousSelectedData=null,console.timeEnd("capture"),e.modified(),t.renderingType=bM.FRONT_BUFFER,t.widgets.forEach(a)},e.disablePicking=function(){t.pickingEnabled=!1,t.pickingAvailable=!1},e.setRenderer=function(n){for(Object.assign(t,wM(n));r.length;)r.pop().unsubscribe();t.selector.attach(t.openGLRenderWindow,t.renderer),r.push(t.interactor.onStartAnimation(function(){t.pickingAvailable=!1})),r.push(t.interactor.onEndAnimation(function(){t.pickingEnabled&&e.enablePicking()})),r.push(t.interactor.onMouseMove(function(n){var r=n.position;if(t.pickingAvailable){e.updateSelectionFromXY(Math.round(r.x),Math.round(r.y));var i=e.getSelectedData(),a=i.requestCount,o=i.selectedState,s=i.representation,u=i.widget;if(!a)if(t.openGLRenderWindow.setCursor(u?"pointer":"default"),t.widgetInFocus===u&&u.hasFocus())u.activateHandle({selectedState:o,representation:s}),t.interactor.render(),t.interactor.render();else{for(var l=0;l<t.widgets.length;l++){var c=t.widgets[l];c===u&&c.getPickable()?(c.activateHandle({selectedState:o,representation:s}),t.activeWidget=c):c.deactivateAllHandles()}t.interactor.render(),t.interactor.render()}}})),e.modified(),t.pickingEnabled&&e.enablePicking()},e.addWidget=function(r,i,a){if(!t.renderer)return MM("Widget manager MUST BE link to a view before registering widgets"),null;var o=t.viewId,s=t.renderer,u=r.getWidgetForView({viewId:o,renderer:s,viewType:i||yM.DEFAULT,initialValues:a});return-1===t.widgets.indexOf(u)&&(t.widgets.push(u),u.setWidgetManager(e),function(e){for(var t=e.getRepresentations(),r=0;r<t.length;r++)for(var i=t[r],a={widget:e,representation:i},o=i.getActors(),s=0;s<o.length;s++){var u=o[s];n.set(u,a)}}(u),t.renderer.addActor(u),e.modified()),u},e.removeWidget=function(n){var r=i(n),a=t.widgets.indexOf(r);-1!==a&&(t.widgets.splice(a,1),t.renderer.removeActor(r),t.renderer.getRenderWindow().getInteractor().render(),e.enablePicking(),r.delete())},e.updateSelectionFromXY=function(e,n){t.pickingAvailable&&(t.selections=t.selector.generateSelection(e,n,e,n))},e.updateSelectionFromMouseEvent=function(n){var r=n.pageX,i=n.pageY,a=t.openGLRenderWindow.getCanvas().getBoundingClientRect(),o=a.top,s=r-a.left,u=a.height-(i-o);e.updateSelectionFromXY(s,u)},e.getSelectedData=function(){if(!t.selections||!t.selections.length)return t.previousSelectedData=null,{};var e=t.selections[0].getProperties(),r=e.propID,i=e.compositeID,a=e.prop;if(t.previousSelectedData&&t.previousSelectedData.prop===a&&t.previousSelectedData.compositeID===i)return t.previousSelectedData.requestCount++,t.previousSelectedData;if(!n.has(a))return{};var o=n.get(a),s=o.widget,u=o.representation;if(s&&u){var l=u.getSelectedState(a,i);return t.previousSelectedData={requestCount:0,propID:r,compositeID:i,prop:a,widget:s,representation:u,selectedState:l},t.previousSelectedData}return t.previousSelectedData=null,{}},e.grabFocus=function(e){var n=i(e);t.widgetInFocus&&t.widgetInFocus!==n&&t.widgetInFocus.loseFocus(),t.widgetInFocus=n,t.widgetInFocus&&t.widgetInFocus.grabFocus()},e.releaseFocus=function(){return e.grabFocus(null)}}var TM={viewId:null,widgets:[],renderer:[],viewType:yM.DEFAULT,pickingAvailable:!1,pickingEnabled:!0,selections:null,previousSelectedData:null,widgetInFocus:null};function CM(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,TM,n),h.a.obj(e,t),h.a.setGet(e,t,[{type:"enum",name:"viewType",enum:yM}]),h.a.get(e,t,["selections","widgets","viewId","pickingEnabled"]),AM(e,t)}var SM={newInstance:h.a.newInstance(CM,"vtkWidgetManager"),extend:CM};function DM(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function IM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function EM(){}function NM(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];h.a.obj(e,t),h.a.get(e,t,["widgetState"]),h.a.event(e,t,"WidgetChange"),function(e,t){t.classHierarchy.push("vtkAbstractWidgetFactory");var n={};e.getWidgetForView=function(r){var i=r.viewId,a=r.renderer,o=r.viewType,s=r.initialValues;if(!n[i]){if(!a)return null;var u=wM(a),l=u.interactor,c=u.openGLRenderWindow,f=u.camera,d={},p={onWidgetChange:e.onWidgetChange};Object.assign(d,t,{viewType:o,renderer:a,camera:f,openGLRenderWindow:c}),h.a.safeArrays(d),mM.extend(p,d,s),d.representations=e.getRepresentationsForViewType(o).map(function(e){var t=e.builder,n=e.labels,r=e.initialValues;return t.newInstance(Object.assign({labels:n},r))}),d.representations.forEach(function(e){e.setInputData(d.widgetState),e.getActors().forEach(function(t){d.actorToRepresentationMap.set(t,e)})}),t.behavior(p,d),t.methodsToLink&&t.methodsToLink.forEach(function(e){var t,n="set".concat(h.a.capitalize(e)),r="get".concat(h.a.capitalize(e)),i=(IM(t={},e,[]),IM(t,n,[]),IM(t,r,[]),t);d.representations.forEach(function(t){t[e]&&i[e].push(t[e]),t[n]&&i[n].push(t[n]),t[r]&&i[r].push(t[r])}),Object.keys(i).forEach(function(e){var t=i[e];1===t.length?p[e]=t[0]:t.length>1&&(p[e]=h.a.chain.apply(h.a,DM(t)))})}),p.delete=h.a.chain(function(){delete n[i]},p.delete),p.setInteractor(l);var g=Object.freeze(p);return n[i]=g,g}return n[i]},e.setVisibility=function(e){for(var t=Object.keys(n),r=0;r<t.length;r++)n[t[r]].setVisibility(e)},e.setPickable=function(e){for(var t=Object.keys(n),r=0;r<t.length;r++)n[t[r]].setPickable(e)},e.setContextVisibility=function(e){for(var t=Object.keys(n),r=0;r<t.length;r++)n[t[r]].setContextVisibility(e)},e.setHandleVisibility=function(e){for(var t=Object.keys(n),r=0;r<t.length;r++)n[t[r]].setHandleVisibility(e)},e.placeWidget=function(e){return t.widgetState.placeWidget(e)},e.getPlaceFactor=function(){return t.widgetState.getPlaceFactor()},e.setPlaceFactor=function(e){return t.widgetState.setPlaceFactor(e)};var r=EM;e.delete=h.a.chain(e.delete,r),setTimeout(function(){r=t.widgetState.onModified(function(){return e.invokeWidgetChange(t.widgetState)})},0)}(e,t)}var OM={newInstance:h.a.newInstance(NM,"vtkAbstractWidget"),extend:NM},_M="default";function LM(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}var PM={active:!1};var kM={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,PM,n),h.a.obj(e,t),h.a.setGet(e,t,["active"]),function(e,t){t.classHierarchy.push("vtkWidgetState");var n=[];t.labels={},t.nestedStates=[],e.bindState=function(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[_M];if(t.nestedStates.push(r),n.push(r.onModified(e.modified)),Array.isArray(i)&&i.length)for(var a=0;a<i.length;a++){var o=i[a];t.labels[o]||(t.labels[o]=[]),t.labels[o].push(r)}else{var s=Array.isArray(i)?_M:i||_M;t.labels[s]||(t.labels[s]=[]),t.labels[s].push(r)}},e.unbindState=function(r){for(;n.length;)n.pop().unsubscribe();LM(t.nestedStates,r);for(var i=0;i<t.nestedStates.length;i++)n.push(t.nestedStates[i].onModified(e.modified));Object.keys(t.labels).forEach(function(e){LM(t.labels[e],r)})},e.unbindAll=function(){for(;n.length;)n.pop().unsubscribe();t.nestedStates=[]},e.activate=function(){return e.setActive(!0)},e.deactivate=function(n){n!==e&&e.setActive(!1);for(var r=0;r<t.nestedStates.length;r++)t.nestedStates[r].deactivate(n)},e.activateOnly=function(t){t&&t.setActive(!0),e.deactivate(t)},e.getStatesWithLabel=function(e){return t.labels[e]},e.getAllNestedStates=function(){return t.nestedStates},e.delete=h.a.chain(e.unbindAll,e.delete)}(e,t)}};var RM={bounds:[-1,1,-1,1,-1,1],placeFactor:1};var jM={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,RM,n),h.a.setGetArray(e,t,["bounds"],6),h.a.get(e,t,["placeFactor"]),h.a.event(e,t,"BoundsChange"),t.bounds=t.bounds.slice(),function(e,t){var n=[],r=N.a.newInstance();e.containsPoint=function(e,t,n){return Array.isArray(e)?r.containsPoint(e[0],e[1],e[2]):r.containsPoint(e,t,n)},e.placeWidget=function(i){t.bounds=[];for(var a=0;a<6;a++)n[a]=i[a],t.bounds[a]=i[a]*t.placeFactor;r.setBounds(t.bounds),e.invokeBoundsChange(t.bounds),e.modified()},e.setPlaceFactor=function(i){if(t.placeFactor!==i){t.placeFactor=i,t.bounds=[];for(var a=0;a<6;a++)t.bounds[a]=n[a]*t.placeFactor;r.setBounds(t.bounds),e.invokeBoundsChange(t.bounds),e.modified()}}}(e,t)}},BM={color:.5};var zM={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,BM,n),h.a.setGet(e,t,["color"])}};var FM={direction:[1,0,0]};var VM={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,FM,n),h.a.setGetArray(e,t,["direction"],3),function(e,t){var n="degree"===t.angleUnit?d.a.buildFromDegree():d.a.buildFromRadian();e.rotateFromDirections=function(r,i){n.identity().rotateFromDirections(r,i).apply(t.direction),e.modified()},e.rotate=function(e,r){n.identity().rotate(e,r).apply(t.direction)},e.rotateX=function(e){n.identity().rotateX(e).apply(t.direction)},e.rotateY=function(e){n.identity().rotateY(e).apply(t.direction)},e.rotateZ=function(e){n.identity().rotateZ(e).apply(t.direction)}}(e,t)}};var UM={manipulator:null};var GM={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,UM,n),h.a.setGet(e,t,["manipulator"]),function(e,t){e.updateManipulator=function(){if(t.manipulator){var e=t.origin,n=t.normal,r=t.direction,i=t.manipulator,a=i.setOrigin,o=i.setCenter,s=i.setNormal,u=i.setDirection;e&&a?a(e):e&&o&&o(e),r&&u?u(r):r&&!n&&s?s(r):n&&u&&u(n)}}}(e,t)}},WM={name:""};var HM={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,WM,n),h.a.setGet(e,t,["name"])}};function YM(e,t){return 3===e.length&&3===t.length&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function QM(e,t){var n={o:[],p1:[],p2:[]};e.normalize=function(){f.normalize(t.up),f.normalize(t.right),f.normalize(t.direction),e.modified()},e.updateFromOriginRightUp=function(r,i,a){(function(e,t,n,r){return YM(e,r.o)&&YM(t,r.p1)&&YM(n,r.p2)})(r,i,a,n)||(n.o=r.slice(),n.p1=i.slice(),n.p2=a.slice(),t.up=[a[0]-r[0],a[1]-r[1],a[2]-r[2]],t.right=[i[0]-r[0],i[1]-r[1],i[2]-r[2]],f.cross(t.up,t.right,t.direction),f.cross(t.direction,t.up,t.right),e.normalize(),e.modified())}}var qM={up:[0,1,0],right:[1,0,0],direction:[0,0,1]};var XM={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,qM,n),h.a.setGetArray(e,t,["up","right","direction"],3),QM(e,t)}};function KM(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ZM={origin:[0,0,0]};var JM={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ZM,n),h.a.setGetArray(e,t,["origin"],3),function(e,t){e.translate=function(t,n,r){var i=KM(e.getOriginByReference(),3),a=i[0],o=i[1],s=i[2];e.setOrigin(a+t,o+n,s+r)}}(e)}},$M={scale1:.5};var ex={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,$M,n),h.a.setGet(e,t,["scale1"])}},tx={scale3:[1,1,1]};var nx={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,tx,n),h.a.setGetArray(e,t,["scale3"],3)}},rx={visible:!0};var ix={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,rx,n),h.a.setGet(e,t,["visible"]),e.isVisible=e.getVisible}};function ax(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ox=h.a.vtkErrorMacro,sx={bounds:jM,color:zM,direction:VM,manipulator:GM,name:HM,orientation:XM,origin:JM,scale1:ex,scale3:nx,visible:ix};function ux(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};arguments.length>4&&void 0!==arguments[4]&&arguments[4]||kM.extend(n,r,t);for(var i=0;i<e.length;i++){var a=sx[e[i]];a?a.extend(n,r,t):ox("Invalid mixin name:",e[i])}return h.a.safeArrays(r),Object.freeze(n)}var lx=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.publicAPI={},this.model={},kM.extend(this.publicAPI,this.model),jM.extend(this.publicAPI,this.model)}var t,n,r;return t=e,(n=[{key:"addDynamicMixinState",value:function(e){var t=this,n=e.labels,r=e.mixins,i=e.name,a=e.initialValues,o="".concat(i,"List");return this.model[o]=[],this.publicAPI["add".concat(h.a.capitalize(i))]=function(){var e=ux(r,a);return t.publicAPI.bindState(e,n),t.model[o].push(e),t.publicAPI.modified(),e},this.publicAPI["remove".concat(h.a.capitalize(i))]=function(e){var n=t.model[o].indexOf(e);-1===n&&e<t.model[o].length&&(n=e);var r=t.model[o][n];r&&t.publicAPI.unbindState(r),t.model[o].splice(n,1),t.publicAPI.modified()},this.publicAPI["get".concat(h.a.capitalize(i),"List")]=function(){return t.model[o]},this.publicAPI["clear".concat(h.a.capitalize(i),"List")]=function(){for(;t.model[o].length;){var e=t.model[o].pop();e&&t.publicAPI.unbindState(e)}t.publicAPI.modified()},this}},{key:"addStateFromMixin",value:function(e){var t=e.labels,n=e.mixins,r=e.name,i=ux(n,e.initialValues);return this.model[r]=i,this.publicAPI.bindState(i,t),h.a.setGet(this.publicAPI,this.model,[r]),this}},{key:"addStateFromInstance",value:function(e){var t=e.labels,n=e.name,r=e.instance;return this.model[n]=r,this.publicAPI.bindState(r,t),h.a.setGet(this.publicAPI,this.model,[n]),this}},{key:"addField",value:function(e){var t=e.name,n=e.initialValue;return Array.isArray(n)?h.a.setGetArray(this.publicAPI,this.model,[t],n.length):h.a.setGet(this.publicAPI,this.model,[t]),this.model[t]=n,this}},{key:"build",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ux(t,{},this.publicAPI,this.model,!0)}}])&&ax(t.prototype,n),r&&ax(t,r),e}();var cx={createBuilder:function(){return new lx}},fx={vtkAbstractWidget:mM,vtkAbstractWidgetFactory:OM,vtkStateBuilder:cx,vtkWidgetManager:SM,vtkWidgetState:kM};function dx(e,t,n,r,i,a){var o=a.displayToWorld(e,t,0,i),s=a.displayToWorld(e,t,1,i),u=[0,0,0];f.subtract(s,o,u);var l=[0,0,0];f.cross(r,u,l),f.cross(l,u,l);var c=f.dot([o[0]-n[0],o[1]-n[1],o[2]-n[2]],l),d=f.dot(l,r),p=r.slice();return f.multiplyScalar(p,c/d),f.add(n,p,p),p}var px={origin:[0,0,0],normal:[0,0,1]};function hx(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,px,n),h.a.obj(e,t),h.a.setGetArray(e,t,["origin","normal"],3),function(e,t){t.classHierarchy.push("vtkLineManipulator"),e.handleEvent=function(e,n){return dx(e.position.x,e.position.y,t.origin,t.normal,e.pokedRenderer,n)}}(e,t)}var gx={projectDisplayToLine:dx,extend:hx,newInstance:h.a.newInstance(hx,"vtkLineManipulator")};function mx(e,t,n,r,i,a){var o=a.displayToWorld(e,t,0,i),s=a.displayToWorld(e,t,1,i);return Te.a.intersectWithLine(o,s,n,r).x}var vx={normal:[0,0,1],origin:[0,0,0]};function yx(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,vx,n),h.a.obj(e,t),h.a.setGetArray(e,t,["normal","origin"],3),function(e,t){t.classHierarchy.push("vtkPlaneManipulator"),e.handleEvent=function(e,n){return mx(e.position.x,e.position.y,t.origin,t.normal,e.pokedRenderer,n)}}(e,t)}var bx={intersectDisplayWithPlane:mx,extend:yx,newInstance:h.a.newInstance(yx,"vtkPlaneManipulator")};function Mx(e,t,n,r,i,a,o,s){var u=n-e,l=r-t,c=o.getActiveCamera(),d=c.getViewUp(),p=c.getDirectionOfProjection(),h=o.getRenderWindow().getInteractor().getView().getSize(),g=360*u/h[0],m=360*l/h[1],v=Ye.e.fromValues(a[0],a[1],a[2]),y=d,b=[0,0,0];f.cross(p,d,b);var M=Ye.c.create();return Ye.c.rotate(M,M,f.radiansFromDegrees(g),y),Ye.c.rotate(M,M,f.radiansFromDegrees(-m),b),Ye.e.transformMat4(v,v,M),[v[0],v[1],v[2]]}var xx={normal:[0,0,1]};function wx(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,xx,n),h.a.obj(e,t),h.a.setGetArray(e,t,["normal"],3),function(e,t){t.classHierarchy.push("vtkTrackballManipulator");var n=0,r=0;e.handleEvent=function(e,i){var a=Mx(n,r,e.position.x,e.position.y,t.origin,t.normal,e.pokedRenderer);return n=e.position.x,r=e.position.y,a},e.reset=function(e){n=e.position.x,r=e.position.y}}(e,t)}var Ax={trackballRotate:Mx,extend:wx,newInstance:h.a.newInstance(wx,"vtkTrackballManipulator")},Tx={vtkLineManipulator:gx,vtkPlaneManipulator:bx,vtkTrackballManipulator:Ax},Cx={HANDLE:0,CONTEXT:1},Sx=h.a.vtkErrorMacro,Dx=["active","inactive","static"];var Ix={actors:[],labels:[],behavior:Cx.CONTEXT};var Ex={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ix,n),Du.a.extend(e,t,n),h.a.algo(e,t,1,1),h.a.get(e,t,["labels"]),function(e,t){t.classHierarchy.push("vtkWidgetRepresentation");var n={mtimes:{},states:[]};e.getActors=function(){return t.actors},e.getNestedProps=e.getActors,e.setLabels=function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];1===r.length?t.labels=[].concat(r[0]):t.labels=r,e.modified()},e.getRepresentationStates=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.inputData[0];return n.mtimes.representation===e.getMTime()&&n.mtimes.input===r.getMTime()?n.states:(n.mtimes.representation=e.getMTime(),n.mtimes.input=r.getMTime(),n.states=[],t.labels.forEach(function(e){n.states=n.states.concat(r.getStatesWithLabel(e)||[])}),n.states)},e.getSelectedState=function(t,n){var r=e.getRepresentationStates();return n<r.length?r[n]:(Sx("Representation ".concat(e.getClassName()," should implement getSelectedState(prop, compositeID) method.")),null)},e.updateActorVisibility=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fM.FRONT_BUFFER,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=!0;switch(t.behavior){case Cx.HANDLE:a=e===fM.PICKING_BUFFER||i;break;case Cx.CONTEXT:a=e===fM.FRONT_BUFFER&&r;break;default:a=!0}for(var o=n&&a,s=0;s<t.actors.length;s++)t.visibilityFlagArray?t.actors[s].setVisibility(o&&t.visibilityFlagArray[s]):t.actors[s].setVisibility(o);if(t.alwaysVisibleActors)for(var u=0;u<t.alwaysVisibleActors.length;u++)t.alwaysVisibleActors[u].setVisibility(!0)},e.setLabels(t.labels)}(e,t)},mergeStyles:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i={active:{},inactive:{},static:{}};return Dx.forEach(function(t){var r=i[t];e.forEach(function(e){r[e]||(r[e]={}),n.filter(function(n){return n&&n[t]&&n[t][e]}).forEach(function(n){return Object.assign(r[e],n[t][e])})})}),i},applyStyles:function(e,t,n){n?Object.keys(e).forEach(function(r){var i=e[r].actor===n?t.active[r]:t.inactive[r];i&&e[r].actor.getProperty().set(i)}):(Object.keys(t.static).forEach(function(n){e[n]&&e[n].actor.getProperty().set(t.static[n])}),Object.keys(t.inactive).forEach(function(n){e[n]&&e[n].actor.getProperty().set(t.inactive[n])}))},connectPipeline:function(e){e.source.isA("vtkDataSet")?e.mapper.setInputData(e.source):e.mapper.setInputConnection(e.source.getOutputPort()),e.glyph&&e.mapper.setInputConnection(e.glyph.getOutputPort(),1),e.actor.setMapper(e.mapper)}};var Nx={activeScaleFactor:1.2,activeColor:1,useActiveColor:!0,behavior:Cx.HANDLE,pickable:!0};var Ox={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Object.assign({},Nx,n);Ex.extend(e,t,r),h.a.setGet(e,t,["activeScaleFactor","activeColor","useActiveColor"]),function(e,t){t.classHierarchy.push("vtkHandleRepresentation")}(0,t)}},_x=n(25);var Lx={glyphResolution:32,defaultScale:1,defaultDirection:[0,0,1]};function Px(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Lx,n),Ox.extend(e,t,n),h.a.setGet(e,t,["glyphResolution","defaultScale"]),h.a.setGetArray(e,t,["defaultDirection"]),h.a.get(e,t,["glyph","mapper","actor"]),function(e,t){t.classHierarchy.push("vtkCircleContextRepresentation"),t.internalPolyData=Se.a.newInstance({mtime:0}),t.internalArrays={points:t.internalPolyData.getPoints(),scale:i.a.newInstance({name:"scale",numberOfComponents:3,empty:!0}),color:i.a.newInstance({name:"color",numberOfComponents:1,empty:!0}),direction:i.a.newInstance({name:"direction",numberOfComponents:3,empty:!0})},t.internalPolyData.getPointData().addArray(t.internalArrays.scale),t.internalPolyData.getPointData().addArray(t.internalArrays.color),t.internalPolyData.getPointData().addArray(t.internalArrays.direction),t.pipelines={circle:{source:e,glyph:Mr.newInstance({resolution:t.glyphResolution,radius:1}),mapper:Ip.newInstance({orientationArray:"direction",scaleArray:"scale",scaleMode:Ip.ScaleModes.SCALE_BY_COMPONENTS,colorByArrayName:"color",scalarMode:_x.a.USE_POINT_FIELD_DATA}),actor:lu.a.newInstance({pickable:!1})}},t.pipelines.circle.actor.getProperty().setOpacity(.2),t.pipelines.circle.mapper.setOrientationModeToDirection(),t.pipelines.circle.mapper.setResolveCoincidentTopology(!0),t.pipelines.circle.mapper.setResolveCoincidentTopologyPolygonOffsetParameters(-1,-1),Ex.connectPipeline(t.pipelines.circle),t.actors.push(t.pipelines.circle.actor),t.tranform=d.a.buildFromDegree(),e.setGlyphResolution=h.a.chain(e.setGlyphResolution,function(e){return t.glyph.setResolution(e)}),e.requestData=function(n,r){var i=t.internalArrays,a=i.points,o=i.scale,s=i.color,u=i.direction,l=e.getRepresentationStates(n[0]),c=l.length;s.getNumberOfValues()!==c&&(a.setData(new Float32Array(3*c)),o.setData(new Float32Array(3*c)),u.setData(new Float32Array(3*c)),s.setData(new Float32Array(c)));for(var f={points:a.getData(),scale:o.getData(),color:s.getData(),direction:u.getData()},p=0;p<l.length;p++){var h=l[p],g=h.getActive(),m=g?t.activeScaleFactor:1,v=h.getOrigin();f.points[3*p+0]=v[0],f.points[3*p+1]=v[1],f.points[3*p+2]=v[2];var y=h.getDirection()||t.defaultDirection;f.direction[3*p+0]=y[0],f.direction[3*p+1]=y[1],f.direction[3*p+2]=y[2];var b=(h.getScale1?h.getScale1():t.defaultScale)/2,M=m;h.getVisible&&!h.getVisible()&&(M=0);var x=h.getScale3?h.getScale3():[1,1,1];x=x.map(function(e){return 0===e?2*t.defaultScale:2*e}),Ye.e.transformMat4(x,x,d.a.buildFromDegree().rotateFromDirections([1,0,0],y).getMatrix()),f.scale[3*p+0]=b*M*x[0],f.scale[3*p+1]=b*M*x[1],f.scale[3*p+2]=b*M*x[2],f.color[p]=t.useActiveColor&&g?t.activeColor:h.getColor()}t.internalPolyData.modified(),r[0]=t.internalPolyData},e.setActiveScaleFactor(1)}(e,t)}var kx={newInstance:h.a.newInstance(Px,"vtkCircleContextRepresentation"),extend:Px};var Rx={behavior:Cx.CONTEXT,pickable:!1};var jx={extend:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Object.assign({},Rx,n);Ex.extend(e,t,r),function(e,t){t.classHierarchy.push("vtkContextRepresentation")}(0,t)}};function Bx(e,t){t.classHierarchy.push("vtkConvexFaceContextRepresentation"),t.internalPolyData=Se.a.newInstance({mtime:0}),t.points=new Float32Array(12),t.cells=new Uint8Array([4,0,1,2,3]),t.internalPolyData.getPoints().setData(t.points,3),t.internalPolyData.getPolys().setData(t.cells),t.mapper=cu.a.newInstance({scalarVisibility:!1}),t.actor=lu.a.newInstance(),t.actor.getProperty().setOpacity(t.opacity),t.mapper.setInputConnection(e.getOutputPort()),t.actor.setMapper(t.mapper),t.actors.push(t.actor),e.requestData=function(n,r){for(var i=e.getRepresentationStates(n[0]),a=function(e){if(t.cells.length-1!==e){t.points=new Float32Array(3*e),t.cells=new Uint8Array(e+1),t.cells[0]=e;for(var n=0;n<e;n++)t.cells[n+1]=n;t.internalPolyData.getPoints().setData(t.points,3),t.internalPolyData.getPolys().setData(t.cells)}return t.points}(i.length),o=0;o<i.length;o++){var s=i[o].getOrigin();a[3*o]=s[0],a[3*o+1]=s[1],a[3*o+2]=s[2]}t.internalPolyData.modified(),r[0]=t.internalPolyData},e.getSelectedState=function(n,r){var i=t.inputData[0],a=e.getRepresentationStates(i);return i.updateFromOriginRightUp&&i.updateFromOriginRightUp(a[0].getOrigin(),a[a.length-1].getOrigin(),a[1].getOrigin()),i};var n=e.updateActorVisibility;e.updateActorVisibility=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fM.FRONT_BUFFER,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];switch(t.behavior){case Cx.HANDLE:e===fM.PICKING_BUFFER?t.actor.getProperty().setOpacity(1):t.actor.getProperty().setOpacity(t.opacity);break;case Cx.CONTEXT:default:t.actor.getProperty().setOpacity(t.opacity)}n(e,r,i,a)}}var zx={defaultColor:[1,0,.5],opacity:.2};function Fx(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,zx,n),jx.extend(e,t,n),h.a.setGetArray(e,t,["defaultColor"],3),h.a.get(e,t,["mapper","actor"]),h.a.setGet(e,t,["opacity"]),Bx(e,t)}var Vx={newInstance:h.a.newInstance(Fx,"vtkConvexFaceContextRepresentation"),extend:Fx};var Ux={defaultScale:1};function Gx(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ux,n),Ox.extend(e,t,n),h.a.get(e,t,["glyph","mapper","actor","defaultScale"]),function(e,t){t.classHierarchy.push("vtkCubeHandleRepresentation"),t.internalPolyData=Se.a.newInstance({mtime:0}),t.internalArrays={points:t.internalPolyData.getPoints(),scale:i.a.newInstance({name:"scale",numberOfComponents:3,empty:!0}),color:i.a.newInstance({name:"color",numberOfComponents:1,empty:!0})},t.internalPolyData.getPointData().addArray(t.internalArrays.scale),t.internalPolyData.getPointData().addArray(t.internalArrays.color),t.mapper=Ip.newInstance({scaleArray:"scale",colorByArrayName:"color",scalarMode:_x.a.USE_POINT_FIELD_DATA}),t.actor=lu.a.newInstance(),t.glyph=Ir.newInstance(),t.mapper.setInputConnection(e.getOutputPort(),0),t.mapper.setInputConnection(t.glyph.getOutputPort(),1),t.actor.setMapper(t.mapper),t.actors.push(t.actor),e.requestData=function(n,r){var i=t.internalArrays,a=i.points,o=i.scale,s=i.color,u=e.getRepresentationStates(n[0]),l=u.length;s.getNumberOfValues()!==l&&(a.setData(new Float32Array(3*l)),o.setData(new Float32Array(3*l)),s.setData(new Float32Array(l)));for(var c={points:a.getData(),scale:o.getData(),color:s.getData()},f=0;f<u.length;f++){var d=u[f],p=d.getActive(),h=p?t.activeScaleFactor:1,g=d.getOrigin();c.points[3*f+0]=g[0],c.points[3*f+1]=g[1],c.points[3*f+2]=g[2];var m=d.getScale3?d.getScale3():Array(3).fill(t.defaultScale);c.scale[3*f+0]=m[0]*h,c.scale[3*f+1]=m[1]*h,c.scale[3*f+2]=m[2]*h,c.color[f]=t.useActiveColor&&p?t.activeColor:d.getColor()}t.internalPolyData.modified(),r[0]=t.internalPolyData}}(e,t)}var Wx={newInstance:h.a.newInstance(Gx,"vtkCubeHandleRepresentation"),extend:Gx},Hx=dM.RenderingTypes,Yx=kg.b.Interpolation,Qx=kg.b.Representation;var qx=["plane","outline","normal","origin","display2D"],Xx={active:{plane:{opacity:1,color:[0,.9,0]},normal:{opacity:1,color:[0,.9,0]},origin:{opacity:1,color:[0,.9,0]}},inactive:{plane:{opacity:.6,color:[1,1,1]},normal:{opacity:1,color:[.9,0,0]},origin:{opacity:1,color:[1,0,0]}},static:{display2D:{representation:Qx.POINT},outline:{color:[1,1,1],opacity:1,representation:Qx.WIREFRAME,interpolation:Yx.FLAT}}};var Kx={sphereResolution:24,handleSizeRatio:.05,axisScale:.1};function Zx(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Kx,n),Ex.extend(e,t,n),h.a.get(e,t,["sphereResolution","representationStyle"]),h.a.setGet(e,t,["handleSizeRatio","axisScale"]),function(e,t){t.classHierarchy.push("vtkImplicitPlaneRepresentation"),t.plane=Te.a.newInstance(),t.matrix=d.a.buildFromDegree(),t.pipelines={},t.pipelines.outline={source:Ir.newInstance(),mapper:cu.a.newInstance(),actor:lu.a.newInstance({pickable:!1})},t.pipelines.plane={source:Gt.newInstance(),mapper:cu.a.newInstance(),actor:lu.a.newInstance({pickable:!0})},t.pipelines.origin={source:ri.newInstance(),mapper:cu.a.newInstance(),actor:lu.a.newInstance({pickable:!0})},t.pipelines.normal={source:hr.newInstance(),mapper:cu.a.newInstance(),actor:lu.a.newInstance({pickable:!0})},t.pipelines.display2D={source:e,mapper:pu.newInstance(),actor:lu.a.newInstance({pickable:!1})};var n=xt.newInstance({cutFunction:t.plane});n.setInputConnection(t.pipelines.outline.source.getOutputPort()),t.pipelines.plane.source.setInputConnection(n.getOutputPort()),Ex.connectPipeline(t.pipelines.outline),Ex.connectPipeline(t.pipelines.plane),Ex.connectPipeline(t.pipelines.origin),Ex.connectPipeline(t.pipelines.normal),Ex.connectPipeline(t.pipelines.display2D),t.actors.push(t.pipelines.outline.actor),t.actors.push(t.pipelines.plane.actor),t.actors.push(t.pipelines.origin.actor),t.actors.push(t.pipelines.normal.actor),t.actors.push(t.pipelines.display2D.actor),e.requestData=function(e,n){var r=e[0],i=r.getOrigin(),a=r.getNormal(),o=r.getBounds();t.plane.setOrigin(i),t.plane.setNormal(a),t.pipelines.outline.source.setCenter(.5*(o[0]+o[1]),.5*(o[2]+o[3]),.5*(o[4]+o[5]));var s=o[1]-o[0],u=o[3]-o[2],l=o[5]-o[4];t.pipelines.outline.source.setXLength(s),t.pipelines.outline.source.setYLength(u),t.pipelines.outline.source.setZLength(l),t.pipelines.normal.source.set({height:Math.max(s,u,l),radius:t.handleSizeRatio*Math.min(s,u,l)*t.axisScale,resolution:t.sphereResolution});var c=t.pipelines.normal.source.getOutputData(),f=Se.a.newInstance();f.shallowCopy(c),f.getPoints().setData(Float32Array.from(c.getPoints().getData()),3),f.getPointData().removeAllArrays(),t.matrix.identity().translate(i[0],i[1],i[2]).rotateFromDirections([0,1,0],a).apply(f.getPoints().getData()),t.pipelines.normal.mapper.setInputData(f),t.pipelines.origin.actor.setPosition(i);var d=t.handleSizeRatio*Math.min(s,u,l);t.pipelines.origin.actor.setScale(d,d,d),Ex.applyStyles(t.pipelines,t.representationStyle,r.getActive()&&r.getActiveHandle());var p=Se.a.newInstance();p.shallowCopy(t.pipelines.plane.source.getOutputData()),n[0]=p},e.setSphereResolution=function(e){return t.sphereResolution=e,t.pipelines.origin.source.setPhiResolution(e)&&t.pipelines.origin.source.setThetaResolution(e)},e.setRepresentationStyle=function(n){t.representationStyle=Ex.mergeStyles(qx,t.representationStyle,n),Ex.applyStyles(t.pipelines,t.representationStyle),e.modified()},e.updateActorVisibility=function(e,n,r,i){if(e===Hx.PICKING_BUFFER)t.pipelines.plane.actor.setVisibility(n),t.pipelines.origin.actor.setVisibility(n),t.pipelines.normal.actor.setVisibility(n),t.pipelines.plane.actor.getProperty().setOpacity(1);else{t.pipelines.outline.actor.setVisibility(n&&r),t.pipelines.plane.actor.setVisibility(n&&i),t.pipelines.origin.actor.setVisibility(n&&i),t.pipelines.normal.actor.setVisibility(n&&i);var a=t.inputData[0];a&&Ex.applyStyles(t.pipelines,t.representationStyle,a.getActive()&&a.getActiveHandle())}},e.getSelectedState=function(e,n){var r=t.inputData[0];switch(r.setActiveHandle(e),e){case t.pipelines.plane.actor:r.setUpdateMethodName("updateFromPlane");break;case t.pipelines.origin.actor:r.setUpdateMethodName("updateFromOrigin");break;case t.pipelines.normal.actor:r.setUpdateMethodName("updateFromNormal");break;default:r.setUpdateMethodName("updateFromPlane")}return r},e.setRepresentationStyle(Xx),e.setSphereResolution(t.sphereResolution)}(e,t)}var Jx={newInstance:h.a.newInstance(Zx,"vtkImplicitPlaneRepresentation"),extend:Zx,generateState:function(){return cx.createBuilder().addField({name:"origin",initialValue:[0,0,0]}).addField({name:"normal",initialValue:[0,0,1]}).addField({name:"activeHandle",initialValue:null}).addField({name:"updateMethodName"}).build()}};function $x(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var ew=h.a.vtkErrorMacro,tw=[2,0,1,2,2,3,2,4,5,2,6,7,2,0,4,2,1,5,2,2,6,2,3,7,2,0,2,2,1,3,2,4,6,2,5,7];var nw={edgeColor:[1,1,1]};function rw(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,nw,n),jx.extend(e,t,n),h.a.setGetArray(e,t,["edgeColor"],3),h.a.get(e,t,["mapper","actor"]),function(e,t){var n;t.classHierarchy.push("vtkOutlineContextRepresentation"),t.internalPolyData=Se.a.newInstance({mtime:0}),t.points=new Float32Array(24),t.internalPolyData.getPoints().setData(t.points,3),t.internalPolyData.getLines().setData(Uint16Array.from(tw)),t.mapper=cu.a.newInstance({scalarVisibility:!1}),t.actor=lu.a.newInstance(),(n=t.actor.getProperty()).setEdgeColor.apply(n,$x(t.edgeColor)),t.mapper.setInputConnection(e.getOutputPort()),t.actor.setMapper(t.mapper),t.actors.push(t.actor),e.requestData=function(n,r){var i=e.getRepresentationStates(n[0]);if(8===i.length){var a,o=i.map(function(e){return e.getOrigin()}).sort(function(e,t){for(var n=0;n<3;n++)if(e[n]!==t[n])return e[n]-t[n];return 0});t.points=(a=[]).concat.apply(a,$x(o)),t.internalPolyData.getPoints().setData(t.points,3),t.internalPolyData.modified(),r[0]=t.internalPolyData}else ew("OutlineContextRepresentation did not get 8 states")}}(e,t)}var iw={newInstance:h.a.newInstance(rw,"vtkOutlineContextRepresentation"),extend:rw};function aw(e,t){t.classHierarchy.push("vtkPolyLineRepresentation"),t.internalPolyData=Se.a.newInstance({mtime:0}),t.cells=[],t.mapper=cu.a.newInstance(),t.actor=lu.a.newInstance(),t.mapper.setInputConnection(e.getOutputPort()),t.actor.setMapper(t.mapper),t.actors.push(t.actor),e.requestData=function(n,r){var i=e.getRepresentationStates(n[0]),a=i.length;if(a>1){var o=i[i.length-1],s=o.getOrigin(),u=i[i.length-2].getOrigin(),l=f.distance2BetweenPoints(s,u)>t.threshold?0:1;l||!o.isVisible||o.isVisible()||l++,a-=l}for(var c=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(0===e)t.internalPolyData.getPoints().setData(new Float32Array([0,0,0])),t.internalPolyData.getLines().setData(new Uint8Array(0));else if(!t.points||t.points.length!==3*e){t.points=new Float32Array(3*e),t.cells=new Uint8Array(e+1+(n?1:0)),t.cells[0]=t.cells.length-1;for(var r=1;r<t.cells.length;r++)t.cells[r]=r-1;n&&(t.cells[t.cells.length-1]=0,console.log("closePolyLine",n,t.cells)),t.internalPolyData.getPoints().setData(t.points,3),t.internalPolyData.getLines().setData(t.cells)}return t.points}(a,t.closePolyLine&&a>2),d=0;d<a;d++){var p=i[d].getOrigin();c[3*d]=p[0],c[3*d+1]=p[1],c[3*d+2]=p[2]}t.internalPolyData.modified(),r[0]=t.internalPolyData}}var ow={threshold:Number.EPSILON,closePolyLine:!1};function sw(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ow,n),Ex.extend(e,t,n),h.a.setGet(e,t,["threshold","closePolyLine"]),aw(e,t)}var uw={newInstance:h.a.newInstance(sw,"vtkPolyLineRepresentation"),extend:sw};var lw={glyphResolution:8,defaultScale:1};function cw(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,lw,n),Ox.extend(e,t,n),h.a.setGet(e,t,["glyphResolution","defaultScale"]),h.a.get(e,t,["glyph","mapper","actor"]),function(e,t){function n(n){if(t.displayCallback){for(var r=[],i=e.getRepresentationStates(),a=0;a<i.length;a++)i[a].getActive()&&r.push(n[a]);if(r.length)return void t.displayCallback(r)}t.displayCallback()}t.classHierarchy.push("vtkSphereHandleRepresentation"),t.internalPolyData=Se.a.newInstance({mtime:0}),t.internalArrays={points:t.internalPolyData.getPoints(),scale:i.a.newInstance({name:"scale",numberOfComponents:1,empty:!0}),color:i.a.newInstance({name:"color",numberOfComponents:1,empty:!0})},t.internalPolyData.getPointData().addArray(t.internalArrays.scale),t.internalPolyData.getPointData().addArray(t.internalArrays.color),t.displayMapper=pu.newInstance(),t.displayActor=lu.a.newInstance(),t.displayActor.setMapper(t.displayMapper),t.displayMapper.setInputConnection(e.getOutputPort()),t.actors.push(t.displayActor),t.alwaysVisibleActors=[t.displayActor],t.mapper=Ip.newInstance({scaleArray:"scale",colorByArrayName:"color",scalarMode:_x.a.USE_POINT_FIELD_DATA}),t.actor=lu.a.newInstance(),t.glyph=ri.newInstance({phiResolution:t.glyphResolution,thetaResolution:t.glyphResolution}),t.mapper.setInputConnection(e.getOutputPort(),0),t.mapper.setInputConnection(t.glyph.getOutputPort(),1),t.actor.setMapper(t.mapper),t.actors.push(t.actor),e.setGlyphResolution=h.a.chain(e.setGlyphResolution,function(e){return t.glyph.setPhiResolution(e)&&t.glyph.setThetaResolution(e)}),e.setDisplayCallback=function(e){t.displayCallback=e,t.displayMapper.setCallback(e?n:null)},e.requestData=function(n,r){var i=t.internalArrays,a=i.points,o=i.scale,s=i.color,u=e.getRepresentationStates(n[0]),l=u.length;s.getNumberOfValues()!==l&&(a.setData(new Float32Array(3*l),3),o.setData(new Float32Array(l)),s.setData(new Float32Array(l)));for(var c={points:a.getData(),scale:o.getData(),color:s.getData()},f=0;f<u.length;f++){var d=u[f],p=d.getActive(),h=p?t.activeScaleFactor:1,g=d.getOrigin();c.points[3*f+0]=g[0],c.points[3*f+1]=g[1],c.points[3*f+2]=g[2],c.scale[f]=h*(!d.isVisible||d.isVisible()?1:0)*(d.getScale1?d.getScale1():t.defaultScale),c.color[f]=t.useActiveColor&&p?t.activeColor:d.getColor()}t.internalPolyData.modified(),r[0]=t.internalPolyData}}(e,t)}var fw={newInstance:h.a.newInstance(cw,"vtkSphereHandleRepresentation"),extend:cw},dw={vtkCircleContextRepresentation:kx,vtkContextRepresentation:jx,vtkConvexFaceContextRepresentation:Vx,vtkCubeHandleRepresentation:Wx,vtkHandleRepresentation:Ox,vtkImplicitPlaneRepresentation:Jx,vtkOutlineContextRepresentation:iw,vtkPolyLineRepresentation:uw,vtkSphereHandleRepresentation:fw,vtkWidgetRepresentation:Ex};function pw(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function hw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var gw=["-","=","+"];function mw(e,t){var n=Ye.e.fromValues(e[0],e[1],e[2]),r=Ye.e.create();return Ye.e.transformMat4(r,n,t),[r[0],r[1],r[2]]}function vw(e){var t=hw(e.split("").map(function(e){return gw.indexOf(e)-1}),3),n=t[0],r=t[1],i=t[2];return n*r*i!=0?"corners":n*r!=0||r*i!=0||i*n!=0?"edges":"faces"}function yw(e,t){var n=null;e.setDisplayCallback=function(e){return t.representations[0].setDisplayCallback(e)},e.handleLeftButtonPress=function(){return t.activeState&&t.activeState.getActive()&&t.pickable?(n=!0,t.interactor.requestAnimation(e),h.a.EVENT_ABORT):h.a.VOID},e.handleMouseMove=function(r){return n&&t.pickable?e.handleEvent(r):h.a.VOID},e.handleLeftButtonRelease=function(){n&&t.pickable&&(n=!1,t.interactor.cancelAnimation(e),t.widgetState.deactivate())},e.handleEvent=function(e){if(t.pickable&&t.activeState&&t.activeState.getActive()){var n=t.activeState.getManipulator();if(n){var r=t.activeState.getName(),i=vw(r),a=r.split("").map(function(e){return gw.indexOf(e)}),o=t.widgetState.getCroppingPlanes().getPlanes(),s=t.widgetState.getIndexToWorldT(),u=[];if("corners"===i&&(n.setNormal(t.camera.getDirectionOfProjection()),u=n.handleEvent(e,t.openGLRenderWindow)),"faces"===i){var l=[1-a[0],1-a[1],1-a[2]],c=[(o[0]+o[1])/2,(o[2]+o[3])/2,(o[4]+o[5])/2];n.setOrigin(mw(c,s)),n.setNormal(mw(l,s)),u=n.handleEvent(e,t.openGLRenderWindow)}if("edges"===i){var f=a.map(function(e){return 1===e?e:0});n.setNormal(mw(f,s)),u=n.handleEvent(e,t.openGLRenderWindow)}if(u.length){for(var d,p,g=mw(u,t.widgetState.getWorldToIndexT()),m=0;m<3;m++)0===a[m]?o[2*m]=g[m]:2===a[m]&&(o[2*m+1]=g[m]);return(d=t.activeState).setOrigin.apply(d,pw(u)),(p=t.widgetState.getCroppingPlanes()).setPlanes.apply(p,pw(o)),h.a.EVENT_ABORT}}}return h.a.VOID},t.camera=t.renderer.getActiveCamera(),t.classHierarchy.push("vtkImageCroppingWidgetProp")}var bw={};function Mw(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,bw,n),OM.extend(e,t,n),function(e,t){function n(e,n){t.widgetState.getStatesWithLabel(e).forEach(function(e){e.setVisible(n)})}t.classHierarchy.push("vtkImageCroppingWidget"),e.setFaceHandlesEnabled=function(e){return n("faces",e)},e.setEdgeHandlesEnabled=function(e){return n("edges",e)},e.setCornerHandlesEnabled=function(e){return n("corners",e)},e.copyImageDataDescription=function(n){var r,i;(r=t.widgetState).setIndexToWorldT.apply(r,pw(n.getIndexToWorld())),(i=t.widgetState).setWorldToIndexT.apply(i,pw(n.getWorldToIndex()));var a=n.getDimensions();t.widgetState.getCroppingPlanes().setPlanes([0,a[0],0,a[1],0,a[2]]),e.modified()},e.updateHandles=function(){for(var e=t.widgetState.getCroppingPlanes().getPlanes(),n=[(e[0]+e[1])/2,(e[2]+e[3])/2,(e[4]+e[5])/2],r=[e[0],n[0],e[1]],i=[e[2],n[1],e[3]],a=[e[4],n[2],e[5]],o=t.widgetState.getIndexToWorldT(),s=0;s<3;s++)for(var u=0;u<3;u++)for(var l=0;l<3;l++)if(1!==s||1!==u||1!==l){var c=[s,u,l].map(function(e){return gw[e]}).join(""),f=mw([r[s],i[u],a[l]],o),d=hw(t.widgetState.getStatesWithLabel(c),1)[0];d.setOrigin.apply(d,pw(f))}},t.behavior=yw,e.getRepresentationsForViewType=function(e){switch(e){case cM.DEFAULT:case cM.GEOMETRY:case cM.SLICE:case cM.VOLUME:default:return[{builder:fw,labels:["handles"]},{builder:iw,labels:["corners"]}]}};var r=cx.createBuilder();r.addField({name:"indexToWorldT",initialValue:Array(16).fill(0)}).addField({name:"worldToIndexT",initialValue:Array(16).fill(0)});var i=cx.createBuilder().addField({name:"planes",initialValue:[0,1,0,1,0,1]}).build();r.addStateFromInstance({labels:["croppingPlanes"],name:"croppingPlanes",instance:i});for(var a=-1;a<2;a++)for(var o=-1;o<2;o++)for(var s=-1;s<2;s++)if(0!==a||0!==o||0!==s){var u=gw[a+1]+gw[o+1]+gw[s+1],l=vw(u);r.addStateFromMixin({labels:["handles",u,l],mixins:["name","origin","color","scale1","visible","manipulator"],name:u,initialValues:{scale1:10,origin:[a,o,s],visible:!0,name:u}})}t.widgetState=r.build(),i.onModified(e.updateHandles);var c=bx.newInstance(),f=gx.newInstance();t.widgetState.getStatesWithLabel("corners").forEach(function(e){return e.setManipulator(c)}),t.widgetState.getStatesWithLabel("edges").forEach(function(e){return e.setManipulator(c)}),t.widgetState.getStatesWithLabel("faces").forEach(function(e){return e.setManipulator(f)})}(e,t)}var xw={newInstance:h.a.newInstance(Mw,"vtkImageCroppingWidget"),extend:Mw};function ww(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Aw(e,t){t.classHierarchy.push("vtkPlaneWidget");var n=null;e.setDisplayCallback=function(e){return t.representations[0].setDisplayCallback(e)},e.updateCursor=function(){switch(t.activeState.getUpdateMethodName()){case"updateFromOrigin":t.openGLRenderWindow.setCursor("crosshair");break;case"updateFromPlane":t.openGLRenderWindow.setCursor("move");break;case"updateFromNormal":t.openGLRenderWindow.setCursor("alias");break;default:t.openGLRenderWindow.setCursor("grabbing")}},e.handleLeftButtonPress=function(r){return t.activeState&&t.activeState.getActive()&&t.pickable?(n=!0,t.lineManipulator.setOrigin(t.widgetState.getOrigin()),t.planeManipulator.setOrigin(t.widgetState.getOrigin()),t.trackballManipulator.reset(r),t.interactor.requestAnimation(e),e.invokeStartInteractionEvent(),h.a.EVENT_ABORT):h.a.VOID},e.handleMouseMove=function(r){return n&&t.pickable?e.handleEvent(r):h.a.VOID},e.handleLeftButtonRelease=function(){n&&t.pickable&&(e.invokeEndInteractionEvent(),t.interactor.cancelAnimation(e)),n=!1,t.widgetState.deactivate()},e.handleEvent=function(n){return t.pickable&&t.activeState&&t.activeState.getActive()?(e[t.activeState.getUpdateMethodName()](n),e.invokeInteractionEvent(),h.a.EVENT_ABORT):h.a.VOID},e.updateFromOrigin=function(e){t.planeManipulator.setNormal(t.widgetState.getNormal());var n=t.planeManipulator.handleEvent(e,t.openGLRenderWindow);t.widgetState.containsPoint(n)&&t.activeState.setOrigin(n)},e.updateFromPlane=function(e){var n;t.lineManipulator.setNormal(t.activeState.getNormal());var r=t.lineManipulator.handleEvent(e,t.openGLRenderWindow);(n=t.widgetState).containsPoint.apply(n,ww(r))&&t.activeState.setOrigin(r)},e.updateFromNormal=function(e){t.trackballManipulator.setNormal(t.activeState.getNormal());var n=t.trackballManipulator.handleEvent(e,t.openGLRenderWindow);t.activeState.setNormal(n)},t.lineManipulator=gx.newInstance(),t.planeManipulator=bx.newInstance(),t.trackballManipulator=Ax.newInstance()}var Tw={};function Cw(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Tw,n),OM.extend(e,t,n),function(e,t){t.classHierarchy.push("vtkPlaneWidget"),t.widgetState=Jx.generateState(),t.behavior=Aw,t.methodsToLink=["representationStyle","sphereResolution","handleSizeRatio","axisScale"],e.getRepresentationsForViewType=function(e){switch(e){case cM.DEFAULT:case cM.GEOMETRY:case cM.SLICE:case cM.VOLUME:default:return[{builder:Jx}]}}}(e,t)}var Sw={newInstance:h.a.newInstance(Cw,"vtkImplicitPlaneWidget"),extend:Cw};function Dw(e,t){t.classHierarchy.push("vtkInteractiveOrientationWidgetProp"),h.a.event(e,t,"OrientationChange"),e.handleRightButtonPress=function(n){return t.activeState&&t.activeState.getActive()&&t.pickable?(e.invokeOrientationChange(Object.assign({action:"rightPress",event:n},t.activeState.get("up","right","direction"))),h.a.EVENT_ABORT):h.a.VOID},e.handleLeftButtonPress=function(n){return t.activeState&&t.activeState.getActive()&&t.pickable?(e.invokeOrientationChange(Object.assign({action:"leftPress",event:n},t.activeState.get("up","right","direction"))),h.a.EVENT_ABORT):h.a.VOID}}var Iw=[[-1,-1,-1],[-1,1,-1],[1,-1,-1],[1,1,-1],[-1,-1,1],[-1,1,1],[1,-1,1],[1,1,1]];function Ew(){return cx.createBuilder().addStateFromMixin({labels:["handles","---"],mixins:["origin"],name:"handle",initialValues:{origin:Iw[0]}}).addStateFromMixin({labels:["handles","-+-"],mixins:["origin"],name:"handle",initialValues:{origin:Iw[1]}}).addStateFromMixin({labels:["handles","+--"],mixins:["origin"],name:"handle",initialValues:{origin:Iw[2]}}).addStateFromMixin({labels:["handles","++-"],mixins:["origin"],name:"handle",initialValues:{origin:Iw[3]}}).addStateFromMixin({labels:["handles","--+"],mixins:["origin"],name:"handle",initialValues:{origin:Iw[4]}}).addStateFromMixin({labels:["handles","-++"],mixins:["origin"],name:"handle",initialValues:{origin:Iw[5]}}).addStateFromMixin({labels:["handles","+-+"],mixins:["origin"],name:"handle",initialValues:{origin:Iw[6]}}).addStateFromMixin({labels:["handles","+++"],mixins:["origin"],name:"handle",initialValues:{origin:Iw[7]}}).build("orientation","name")}var Nw={};function Ow(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Nw,n),OM.extend(e,t,n),function(e,t){t.classHierarchy.push("vtkInteractiveOrientationWidget"),t.methodsToLink=["closePolyLine","activeScaleFactor","activeColor","useActiveColor","glyphResolution","defaultScale"],t.behavior=Dw,t.widgetState=Ew(),e.setBounds=function(e){for(var n=t.widgetState.getStatesWithLabel("handles"),r=0;r<n.length;r++){var i=Iw[r],a=i[0]>0?e[1]:e[0],o=i[1]>0?e[3]:e[2],s=i[2]>0?e[5]:e[4];n[r].setOrigin(a,o,s)}},e.getRepresentationsForViewType=function(e){switch(e){case cM.DEFAULT:case cM.GEOMETRY:case cM.SLICE:case cM.VOLUME:default:return[{builder:Vx,labels:["---","--+","-++","-+-"],initialValues:{behavior:Cx.HANDLE,pickable:!0,activeScaleFactor:1.2,activeColor:1,useActiveColor:!0,name:"Face 1"}},{builder:Vx,labels:["---","+--","+-+","--+"],initialValues:{behavior:Cx.HANDLE,pickable:!0,activeScaleFactor:1.2,activeColor:1,useActiveColor:!0,name:"Face 2"}},{builder:Vx,labels:["+--","++-","+++","+-+"],initialValues:{behavior:Cx.HANDLE,pickable:!0,activeScaleFactor:1.2,activeColor:1,useActiveColor:!0,name:"Face 3"}},{builder:Vx,labels:["++-","-+-","-++","+++"],initialValues:{behavior:Cx.HANDLE,pickable:!0,activeScaleFactor:1.2,activeColor:1,useActiveColor:!0,name:"Face 4"}},{builder:Vx,labels:["-++","--+","+-+","+++"],initialValues:{behavior:Cx.HANDLE,pickable:!0,activeScaleFactor:1.2,activeColor:1,useActiveColor:!0,name:"Face 5"}},{builder:Vx,labels:["-+-","++-","+--","---"],initialValues:{behavior:Cx.HANDLE,pickable:!0,activeScaleFactor:1.2,activeColor:1,useActiveColor:!0,name:"Face 6"}}]}}}(e,t)}var _w={newInstance:h.a.newInstance(Ow,"vtkInteractiveOrientationWidget"),extend:Ow};function Lw(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Pw(e,t){e.handleLeftButtonPress=function(n){return t.activeState&&t.activeState.getActive()?(t.painting=!0,e.invokeStartInteractionEvent(),h.a.EVENT_ABORT):h.a.VOID},e.handleMouseMove=function(t){return e.handleEvent(t)},e.handleLeftButtonRelease=function(){t.painting&&(e.invokeEndInteractionEvent(),t.widgetState.clearTrailList()),t.painting=!1},e.handleEvent=function(n){if(t.manipulator&&t.activeState&&t.activeState.getActive()){var r=t.manipulator.handleEvent(n,t.openGLRenderWindow);if(r.length){var i,a;(i=t.widgetState).setTrueOrigin.apply(i,Lw(r));var o=t.activeState.getDirection();if(f.normalize(o),f.add(r,o,r),(a=t.activeState).setOrigin.apply(a,Lw(r)),t.painting)t.widgetState.addTrail().set(t.activeState.get("origin","direction","scale1"))}return e.invokeInteractionEvent(),h.a.EVENT_ABORT}return h.a.VOID},e.grabFocus=function(){t.hasFocus||(t.activeState=t.widgetState.getHandle(),t.activeState.activate(),t.interactor.requestAnimation(e)),t.hasFocus=!0},e.loseFocus=function(){t.hasFocus&&t.interactor.cancelAnimation(e),t.widgetState.deactivate(),t.widgetState.getHandle().deactivate(),t.activeState=null,t.hasFocus=!1},h.a.get(e,t,["painting"])}var kw={manipulator:null,radius:1,painting:!1,color:[1]};function Rw(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,kw,n),OM.extend(e,t,n),h.a.get(e,t,["painting"]),h.a.setGet(e,t,["manipulator","radius","color"]),function(e,t){t.classHierarchy.push("vtkPaintWidget"),t.behavior=Pw,e.getRepresentationsForViewType=function(e){switch(e){case cM.DEFAULT:case cM.GEOMETRY:case cM.SLICE:return[{builder:kx,labels:["handle","trail"]}];case cM.VOLUME:default:return[{builder:fw,labels:["handle"]}]}},t.widgetState=cx.createBuilder().addField({name:"trueOrigin",initialValue:[0,0,0]}).addStateFromMixin({labels:["handle"],mixins:["origin","color","scale1","direction","manipulator"],name:"handle",initialValues:{scale1:2*t.radius,origin:[0,0,0],direction:[0,0,1]}}).addDynamicMixinState({labels:["trail"],mixins:["origin","color","scale1","direction"],name:"trail",initialValues:{scale1:2*t.radius,origin:[0,0,0],direction:[0,0,1]}}).build();var n=t.widgetState.getHandle();t.manipulator=bx.newInstance(),n.setManipulator(t.manipulator);var r=e.setRadius;e.setRadius=function(e){r(e)&&n.setScale1(e)}}(e,t)}var jw=h.a.newInstance(Rw,"vtkPaintWidget");function Bw(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function zw(e,t){t.classHierarchy.push("vtkPolyLineWidgetProp");var n=null;function r(e){return e.altKey||e.controlKey||e.shiftKey}e.setDisplayCallback=function(e){return t.representations[0].setDisplayCallback(e)},e.handleRightButtonPress=function(n){return t.activeState&&t.activeState.getActive()&&t.pickable&&!r(n)?(t.activeState!==t.widgetState.getMoveHandle()&&(t.interactor.requestAnimation(e),t.activeState.deactivate(),t.widgetState.removeHandle(t.activeState),t.activeState=null,t.interactor.cancelAnimation(e)),e.invokeStartInteractionEvent(),e.invokeInteractionEvent(),e.invokeEndInteractionEvent(),h.a.EVENT_ABORT):h.a.VOID},e.handleLeftButtonPress=function(i){if(!t.activeState||!t.activeState.getActive()||!t.pickable||r(i))return h.a.VOID;if(t.activeState===t.widgetState.getMoveHandle()){var a=t.widgetState.getMoveHandle(),o=t.widgetState.addHandle();o.setOrigin.apply(o,Bw(a.getOrigin())),o.setColor(a.getColor()),o.setScale1(a.getScale1())}else n=!0,t.openGLRenderWindow.setCursor("grabbing"),t.interactor.requestAnimation(e);return e.invokeStartInteractionEvent(),h.a.EVENT_ABORT},e.handleMouseMove=function(i){if(t.pickable&&t.manipulator&&t.activeState&&t.activeState.getActive()&&!r(i)){t.manipulator.setOrigin(t.activeState.getOrigin()),t.manipulator.setNormal(t.camera.getDirectionOfProjection());var a=t.manipulator.handleEvent(i,t.openGLRenderWindow);if(t.activeState===t.widgetState.getMoveHandle()||n)return t.activeState.setOrigin(a),e.invokeInteractionEvent(),h.a.EVENT_ABORT}return t.hasFocus&&t.widgetManager.disablePicking(),h.a.VOID},e.handleLeftButtonRelease=function(){n&&t.pickable?(t.openGLRenderWindow.setCursor("pointer"),t.widgetState.deactivate(),t.interactor.cancelAnimation(e),e.invokeEndInteractionEvent()):t.activeState!==t.widgetState.getMoveHandle()&&t.widgetState.deactivate(),(t.hasFocus&&!t.activeState||t.activeState&&!t.activeState.getActive())&&(e.invokeEndInteractionEvent(),t.widgetManager.enablePicking(),t.interactor.render()),n=!1},e.handleKeyDown=function(t){"Escape"===t.key&&e.loseFocus()},e.grabFocus=function(){t.hasFocus||(t.activeState=t.widgetState.getMoveHandle(),t.activeState.activate(),t.activeState.setVisible(!0),t.interactor.requestAnimation(e),e.invokeStartInteractionEvent()),t.hasFocus=!0},e.loseFocus=function(){t.hasFocus&&(t.interactor.cancelAnimation(e),e.invokeEndInteractionEvent()),t.widgetState.deactivate(),t.widgetState.getMoveHandle().deactivate(),t.widgetState.getMoveHandle().setVisible(!1),t.activeState=null,t.hasFocus=!1,t.widgetManager.enablePicking(),t.interactor.render()}}function Fw(e,t){t.classHierarchy.push("vtkPolyLineWidget"),t.methodsToLink=["closePolyLine","activeScaleFactor","activeColor","useActiveColor","glyphResolution","defaultScale"],t.behavior=zw,t.widgetState=cx.createBuilder().addStateFromMixin({labels:["moveHandle"],mixins:["origin","color","scale1","visible"],name:"moveHandle",initialValues:{scale1:.1,origin:[-1,-1,-1],visible:!1}}).addDynamicMixinState({labels:["handles"],mixins:["origin","color","scale1"],name:"handle",initialValues:{scale1:.1,origin:[-1,-1,-1]}}).build(),e.getRepresentationsForViewType=function(e){switch(e){case cM.DEFAULT:case cM.GEOMETRY:case cM.SLICE:case cM.VOLUME:default:return[{builder:fw,labels:["handles"]},{builder:fw,labels:["moveHandle"]},{builder:uw,labels:["handles","moveHandle"]}]}},t.widgetState.onBoundsChange(function(e){var n=[.5*(e[0]+e[1]),.5*(e[2]+e[3]),.5*(e[4]+e[5])];t.widgetState.getMoveHandle().setOrigin(n)}),t.manipulator=bx.newInstance()}var Vw={};function Uw(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Vw,n),OM.extend(e,t,n),h.a.setGet(e,t,["manipulator"]),Fw(e,t)}var Gw={Core:fx,Manipulators:Tx,Representations:dw,Widgets3D:{vtkImageCroppingWidget:xw,vtkImplicitPlaneWidget:Sw,vtkInteractiveOrientationWidget:_w,vtkPaintWidget:{newInstance:jw,extend:Rw},vtkPolyLineWidget:{newInstance:h.a.newInstance(Uw,"vtkPolyLineWidget"),extend:Uw}}};Ot.a.Common=dt,Ot.a.Filters=pi,Ot.a.Imaging=Gi,Ot.a.Interaction=jc,Ot.a.IO=zd,Ot.a.Proxy=lM,Ot.a.Rendering=Uy,Ot.a.Widgets=Gw,Ot.a.mtime=h.a.getCurrentGlobalMTime,Ot.a.macro=h.a,window.vtk=Ot.a}])})},function(e,t,n){"use strict";e.exports={choroplethFeature:n(650),contourFeature:n(651),isolineFeature:n(654),layer:n(655),lineFeature:n(656),markerFeature:n(660),pointFeature:n(665),polygonFeature:n(670),quadFeature:n(674),tileLayer:n(679),webglRenderer:n(76)}},function(e,t,n){"use strict";var r=n(1);var i=n(2).registerFeature;var a=n(251);var o=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}t=t||{};a.call(this,t);var n=this,r=null,i=this._exit,o=this.draw,s=this._update;this.draw=function(){n._update();if(r){for(var e=0;e<r.length;e+=1){r[e].draw()}}o();return n};this._build=function(){n.buildTime().modified();r=n.createChoropleth();return r};this._update=function(){s.call(n);if(n.dataTime().timestamp()>=n.buildTime().timestamp()||n.updateTime().timestamp()<=n.timestamp()){n._wipePolygons();n._build()}n.updateTime().modified()};this._wipePolygons=function(){if(r){r.map(function(e){return e._exit()})}r=null};this._exit=function(){n._wipePolygons();i()};this._init(t);return this};r(o,a);i("webgl","choropleth",o);e.exports=o},function(e,t,n){"use strict";var r=n(1);var i=n(2).registerFeature;var a=n(253);var o=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}t=t||{};a.call(this,t);var r=n(41);var i=n(17);var o=n(5);var s=n(59);var u=n(652);var l=n(653);s.call(this);var c=this,f=this._exit,d=7,p=null,h=null,g=null,m=null,v=null,y=null,b=null,M=null,x=t.dynamicDraw===undefined?false:t.dynamicDraw,w,A,T=this._init,C=this._update;function S(){var e=new r.shader(r.GL.VERTEX_SHADER);e.setShaderSource(l);return e}function D(){var e=new r.shader(r.GL.FRAGMENT_SHADER);e.setShaderSource(u);return e}function I(){var e=c._createContours(),t=e.elements.length,n=[],r,a,s,u,l,f,d,p,g=h.geometryData();v.set([e.minColor.r,e.minColor.g,e.minColor.b,e.minColor.a]);y.set([e.maxColor.r,e.maxColor.g,e.maxColor.b,e.maxColor.a]);b.set(e.colorMap.length);M.set(e.stepped);for(r=-1;r<e.colorMap.length+1;r+=1){s=Math.max(0,Math.min(e.colorMap.length-1,r));n.push(e.colorMap[s].r*255);n.push(e.colorMap[s].g*255);n.push(e.colorMap[s].b*255);n.push(e.colorMap[s].a*255)}m.setColorTable(n);e.pos=i.transformCoordinates(c.gcs(),c.layer().map().gcs(),e.pos,3);w=new Float32Array(c.style.get("origin")(e.pos));if(w[0]||w[1]||w[2]){for(r=0;r<e.pos.length;r+=3){e.pos[r]-=w[0];e.pos[r+1]-=w[1];e.pos[r+2]-=w[2]}}A.setOrigin(w);l=o.getGeomBuffer(g,"pos",t*3);f=o.getGeomBuffer(g,"opacity",t);d=o.getGeomBuffer(g,"value",t);for(r=a=0;r<t;r+=1,a+=3){s=e.elements[r];u=s*3;l[a]=e.pos[u];l[a+1]=e.pos[u+1];l[a+2]=e.pos[u+2];f[r]=e.opacity[s];d[r]=e.value[s]}p=g.primitive(0).indices();if(!(p instanceof Uint16Array)||p.length!==t){p=new Uint16Array(t);g.primitive(0).setIndices(p)}g.boundsDirty(true);h.modified();h.boundsDirtyTimestamp().modified()}this._init=function(e){var t=r.blend(),n=r.shaderProgram(),i=r.material(),a=r.lookupTable(),o=r.geometryData(),s=new r.projectionUniform("projectionMatrix"),u=new r.uniform(r.GL.INT,"sampler2d"),l=S(),f=D(),w=r.vertexAttribute("pos"),C=r.vertexAttribute("value"),I=r.vertexAttribute("opacity"),E=r.sourceDataP3fv({name:"pos"}),N=r.sourceDataAnyfv(1,r.vertexAttributeKeysIndexed.One,{name:"value"}),O=r.sourceDataAnyfv(1,r.vertexAttributeKeysIndexed.Two,{name:"opacity"}),_=new r.triangles;A=new r.modelViewOriginUniform("modelViewMatrix");T.call(c,e);h=r.mapper({dynamicDraw:x});n.addVertexAttribute(w,r.vertexAttributeKeys.Position);n.addVertexAttribute(C,r.vertexAttributeKeysIndexed.One);n.addVertexAttribute(I,r.vertexAttributeKeysIndexed.Two);n.addUniform(A);n.addUniform(s);v=new r.uniform(r.GL.FLOAT_VEC4,"minColor");n.addUniform(v);y=new r.uniform(r.GL.FLOAT_VEC4,"maxColor");n.addUniform(y);b=new r.uniform(r.GL.FLOAT,"steps");n.addUniform(b);M=new r.uniform(r.GL.BOOL,"stepped");n.addUniform(M);n.addShader(f);n.addShader(l);n.addUniform(u);a.setTextureUnit(d);u.set(d);g=i;g.addAttribute(n);g.addAttribute(t);m=a;g.addAttribute(m);p=r.actor();p.setMaterial(g);p.setMapper(h);o.addSource(E);o.addSource(N);o.addSource(O);o.addPrimitive(_);o.computeBounds=function(){o.setBounds(0,0,0,0,0,0)};h.setGeometryData(o)};this.actors=function(){return p?[p]:[]};this._build=function(){if(p){c.renderer().contextRenderer().removeActor(p)}I();c.renderer().contextRenderer().addActor(p);c.buildTime().modified()};this._update=function(){C.call(c);if(c.dataTime().timestamp()>=c.buildTime().timestamp()||c.updateTime().timestamp()<=c.timestamp()){c._build()}p.setVisible(c.visible());p.material().setBinNumber(c.bin());c.updateTime().modified()};this._exit=function(){c.renderer().contextRenderer().removeActor(p);f()};this._init(t);return this};r(o,a);i("webgl","contour",o);e.exports=o},function(e,t){e.exports="/* contourFeature fragment shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nuniform vec4 minColor;\nuniform vec4 maxColor;\nuniform float steps;\nuniform bool stepped;\nuniform sampler2D sampler2d;\nvarying float valueVar;\nvarying float opacityVar;\n\nvoid main () {\n  vec4 clr;\n  if (valueVar < 0.0) {\n    clr = minColor;\n  } else if (valueVar > steps) {\n    clr = maxColor;\n  } else {\n    float step;\n    if (stepped) {\n      step = floor(valueVar) + 0.5;\n      if (step > steps) {\n        step = steps - 0.5;\n      }\n    } else {\n      step = valueVar;\n    }\n    // our texture is padded on either end by a repeated value to ensure\n    // we interpolate smoothly at the ends.\n    clr = texture2D(sampler2d, vec2((step + 1.0) / (steps + 2.0), 0.0));\n  }\n  gl_FragColor = vec4(clr.rgb, clr.a * opacityVar);\n}\n"},function(e,t){e.exports="/* contourFeature vertex shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nattribute vec3 pos;\nattribute float value;\nattribute float opacity;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nvarying float valueVar;\nvarying float opacityVar;\n\nvoid main(void)\n{\n  /* Don't use z values */\n  vec4 scrPos = projectionMatrix * modelViewMatrix * vec4(pos.xy, 0, 1);\n  if (scrPos.w != 0.0) {\n    scrPos = scrPos / scrPos.w;\n  }\n  valueVar = value;\n  opacityVar = opacity;\n  gl_Position = scrPos;\n}\n"},function(e,t,n){"use strict";var r=n(1);var i=n(2).registerFeature;var a=n(150);var o=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}t=t||{};a.call(this,t);var r=n(59);r.call(this);this._init(t);return this};r(o,a);i("webgl","isoline",o);e.exports=o},function(e,t,n){"use strict";var r=n(2).registerLayerAdjustment;var i=function e(){"use strict";var t=n(2).createRenderer;var r=n(11);var i=n(76);var a=n(106);var o=this,s=this._init,u=this.opacity,l=this.visible,c=this.zIndex;this.opacity=function(e){var t=u.apply(o,arguments);if(e!==undefined&&o.initialized()){o.map()._updateAutoshareRenderers()}return t};this.visible=function(e){if(e===undefined){return l()}var t=l(),n=l.apply(o,arguments);if(t!==e&&o.initialized()){o.map().scheduleAnimationFrame(o._update,true);o.renderer()._render()}return n};this.zIndex=function(e,t){var n=c.apply(o,arguments);if(e!==undefined&&o.initialized()){o.map().scheduleAnimationFrame(o._update,true);o.renderer()._render();o.map()._updateAutoshareRenderers()}return n};this.switchRenderer=function(e,t){if(e instanceof i&&e!==o.renderer()){var n=o.renderer(),r=[],a=[];o.map().listSceneObjects([o]).forEach(function(e){if(e._cleanup){e._cleanup();if(e._update){a.push(e)}}if(e.actors){r=r.concat(e.actors())}});r.forEach(function(t){n.contextRenderer().removeActor(t);e.contextRenderer().addActor(t)});o._renderer(e);o._canvas(e.canvas());if(t&&(r.length||a.length)){n._render();a.forEach(function(e){e._update()});e._render()}}return o};this._init=function(){var e=o.map();if(!e._updateAutoshareRenderers){e._updateAutoshareRenderers=function(){var n=e.sortedLayers(),r,o=[],s,u;n.forEach(function(e){var n=e.autoshareRenderer(),l=e instanceof a;if(!n||!e.renderer()||e.renderer().api()!==i.apiname){r=null}else if(!r||e.opacity()!==s||n!=="more"&&(e.opacity()>0&&e.opacity()<1||l&&!u)){if(!e.node()[0].contains(e.renderer().canvas()[0])){e.switchRenderer(t(i.apiname,e),false);o.push(e.renderer())}r=e.renderer();s=e.opacity();u=l}else{if(e.renderer()!==r){o.push(e.renderer());e.switchRenderer(r,false);o.push(e.renderer())}u&=l}});n.forEach(function(e){if(o.indexOf(e.renderer())>=0){if(e._update){e._update()}}});n.forEach(function(e){if(o.indexOf(e.renderer())>=0){e.renderer()._renderFrame();o=o.filter(function(t){return t!==e.renderer()})}});o.forEach(function(e){e._exit()})};e.geoOn(r.layerAdd,function(){return e._updateAutoshareRenderers()});e.geoOn(r.layerRemove,function(){return e._updateAutoshareRenderers()})}return s.apply(o,arguments)}};r("webgl","all",i);e.exports=i},function(e,t,n){"use strict";var r=n(1);var i=n(2).registerFeature;var a=n(77);var o=100;var s={corner:0,near:1,far:3};var u={butt:0,square:1,round:2};var l={passthrough:3,miter:4,bevel:5,round:6,"miter-clip":7};var c=2,f=1<<c;var d=5,p=1<<d;var h=8,g=1<<h;var m={normal:0,debug:1};var v=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}t=t||{};a.call(this,t);var r=n(41);var i=n(17);var c=n(5);var d=n(59);var h=n(657);var v=n(658);var y=n(659);d.call(this);var b=this,M=this._exit,x,w,A,T,C,S,D,I,E=t.dynamicDraw===undefined?false:t.dynamicDraw,N,O,_,L=this._init,P=this._update;function k(){var e=new r.shader(r.GL.VERTEX_SHADER);e.setShaderSource(y);return e}function R(e){var t=new r.shader(r.GL.FRAGMENT_SHADER);t.setShaderSource(e?v:h);return t}function j(e){var t=b.data(),n,r,a,s,d,h,v,y,M=0,x,A,T,C,E=[{strokeOffset:0,posStrokeOffset:0,negStrokeOffset:0},{strokeOffset:0,posStrokeOffset:0,negStrokeOffset:0}],L=E[1],P,k,R,j,B=b.line(),z=b.style.get("strokeWidth"),F,V=b.style.get("strokeColor"),U,G=b.style.get("strokeOpacity"),W,H=b.style.get("lineCap"),Y,Q=b.style.get("lineJoin"),q,X=b.style.get("strokeOffset"),K,Z=b.style.get("miterLimit")(t),J=b.style.get("antialiasing")(t)||0,$=b.featureVertices(),ee,te,ne,re,ie=$.length,ae,oe,se,ue,le,ce=m[b.style.get("debug")(t)?"debug":"normal"]||0,fe,de,pe,he,ge,me=w.geometryData(),ve=b.style.get("closed"),ye,be,Me=true;ye=c.isFunction(b.style("closed"))?undefined:ve()||false;Y=c.isFunction(b.style("lineCap"))?undefined:u[H()||"butt"];q=c.isFunction(b.style("lineJoin"))?undefined:l[Q()||"miter"];U=c.isFunction(b.style("strokeColor"))?undefined:V();K=c.isFunction(b.style("strokeOffset"))?undefined:X()||0;W=c.isFunction(b.style("strokeOpacity"))?undefined:G();F=c.isFunction(b.style("strokeWidth"))?undefined:z();if(Z!==undefined){S.set(Math.max(1,Math.min(o,Z)))}I.set(ce);D.set(J);if(!e){var xe=[],we=b.position();A=new Array(t.length);be=new Array(t.length);for(r=0;r<t.length;r+=1){n=t[r];T=B(n,r);A[r]=T;if(T.length<2){continue}M+=T.length-1;for(a=0;a<T.length;a+=1){P=we(T[a],a,n,r);xe.push(P.x);xe.push(P.y);xe.push(P.z||0);if(!a){R=P}}if(T.length>2&&(ye===undefined?ve(n,r):ye)){if(P.x!==R.x||P.y!==R.y||P.z!==R.z){M+=1;be[r]=2}else{be[r]=1}}else{be[r]=0}}xe=i.transformCoordinates(b.gcs(),b.layer().map().gcs(),xe,3);O=new Float32Array(b.style.get("origin")(xe));if(O[0]||O[1]||O[2]){for(r=0;r<xe.length;r+=3){xe[r]-=O[0];xe[r+1]-=O[1];xe[r+2]-=O[2]}}_.setOrigin(O);x=M*ie;ae=c.getGeomBuffer(me,"pos",x*3);oe=c.getGeomBuffer(me,"prev",x*3);se=c.getGeomBuffer(me,"next",x*3);ue=c.getGeomBuffer(me,"far",x*3);if(me.primitive(0).numberOfIndices()!==x){me.primitive(0).numberOfIndices=function(){return x}}N={numSegments:M,closed:be,lineItemList:A,lineCapVal:Y,lineJoinVal:q,strokeOffsetVal:K}}else{M=N.numSegments;be=N.closed;A=N.lineItemList;x=M*ie;Me=Y!==N.lineCapVal||Y===undefined||q!==N.lineJoinVal||q===undefined||K!==N.strokeOffsetVal||K===undefined}le=c.getGeomBuffer(me,"flags",x);fe=c.getGeomBuffer(me,"strokeWidth",x);de=c.getGeomBuffer(me,"strokeColor",x*3);pe=c.getGeomBuffer(me,"strokeOpacity",x);for(r=k=he=ge=0;r<t.length;r+=1){T=A[r];if(T.length<2){continue}n=t[r];ye=be[r];j=k;y=T.length+(ye===2?1:0);for(a=0;a<y;a+=1,k+=3){v=a;if(a===T.length){v=0;k-=3}C=T[v];if(a){L=E[0];E[0]=E[1];E[1]=L}if(!e){L.pos=a===v?k:j;L.prev=v?k-3:ye?j+(T.length-3+ye)*3:k;L.next=a+1<T.length?k+3:ye?a!==v?j+3:j+6-ye*3:k}L.strokeWidth=F===undefined?z(C,v,n,r):F;L.strokeColor=U===undefined?V(C,v,n,r):U;L.strokeOpacity=W===undefined?G(C,v,n,r):W;if(Me){if(K!==0){L.strokeOffset=(K===undefined?X(C,v,n,r):K)||0;if(L.strokeOffset){L.posStrokeOffset=Math.round(2048+1023*Math.min(1,Math.max(-1,L.strokeOffset)))&2047;L.negStrokeOffset=Math.round(2048-1023*Math.min(1,Math.max(-1,L.strokeOffset)))&2047}else{L.posStrokeOffset=L.negStrokeOffset=0}}if(!ye&&(!a||a===T.length-1)){L.flags=Y===undefined?u[H(C,v,n,r)]||u.butt:Y}else{L.flags=q===undefined?l[Q(C,v,n,r)]||l.miter:q}}if(a){for(s=0;s<ie;s+=1,he+=1,ge+=3){ee=$[s][0];d=E[ee];h=E[1-ee];if(!e){ae[ge]=xe[d.pos];ae[ge+1]=xe[d.pos+1];ae[ge+2]=0;te=!ee?"prev":"next";ne=!ee?"next":"prev";oe[ge]=xe[d[te]];oe[ge+1]=xe[d[te]+1];oe[ge+2]=0;se[ge]=xe[d[ne]];se[ge+1]=xe[d[ne]+1];se[ge+2]=0;ue[ge]=xe[h[ne]];ue[ge+1]=xe[h[ne]+1];ue[ge+2]=0}if(Me){re=!ee?"negStrokeOffset":"posStrokeOffset";le[he]=$[s][3]+d.flags*f+h.flags*p+d[re]*g}fe[he]=d.strokeWidth;de[ge]=d.strokeColor.r;de[ge+1]=d.strokeColor.g;de[ge+2]=d.strokeColor.b;if(d.strokeOpacity<=0&&h.strokeOpacity<=0||d.strokeWidth<=0&&h.strokeWidth<=0){pe[he]=-1}else{pe[he]=d.strokeOpacity}}}}}if(!e){w.modified();me.boundsDirty(true);w.boundsDirtyTimestamp().modified()}else{if(Me){w.updateSourceBuffer("flags")}w.updateSourceBuffer("strokeWidth");w.updateSourceBuffer("strokeOpacity");w.updateSourceBuffer("strokeColor")}}this.featureVertices=function(){return[[0,"corner",-1,s.corner],[0,"near",1,s.near],[1,"far",-1,s.far],[1,"corner",1,s.corner],[1,"near",-1,s.near],[0,"far",1,s.far]]};this.verticesPerFeature=function(){return b.featureVertices().length};this._init=function(e){var t=r.shaderProgram(),n=k(),i=R(((e||{}).style||{}).debug!==undefined),a=r.vertexAttribute("pos"),o=r.vertexAttribute("prev"),s=r.vertexAttribute("next"),u=r.vertexAttribute("far"),l=r.vertexAttribute("flags"),c=r.vertexAttribute("strokeWidth"),f=r.vertexAttribute("strokeColor"),d=r.vertexAttribute("strokeOpacity"),p=new r.projectionUniform("projectionMatrix"),h=r.geometryData(),g=r.sourceDataP3fv({name:"pos"}),m=r.sourceDataAnyfv(3,r.vertexAttributeKeysIndexed.Four,{name:"prev"}),v=r.sourceDataAnyfv(3,r.vertexAttributeKeysIndexed.Five,{name:"next"}),y=r.sourceDataAnyfv(3,r.vertexAttributeKeysIndexed.Six,{name:"far"}),M=r.sourceDataAnyfv(1,r.vertexAttributeKeysIndexed.Seven,{name:"flags"}),N=r.sourceDataAnyfv(1,r.vertexAttributeKeysIndexed.One,{name:"strokeWidth"}),O=r.sourceDataAnyfv(3,r.vertexAttributeKeysIndexed.Two,{name:"strokeColor"}),P=r.sourceDataAnyfv(1,r.vertexAttributeKeysIndexed.Three,{name:"strokeOpacity"}),j=r.triangles();_=new r.modelViewOriginUniform("modelViewMatrix");T=new r.floatUniform("pixelWidth",1/b.renderer().width());C=new r.floatUniform("aspect",b.renderer().width()/b.renderer().height());S=new r.floatUniform("miterLimit",10);D=new r.floatUniform("antialiasing",0);I=new r.floatUniform("fixedFlags",0);L.call(b,e);A=r.material();w=r.mapper({dynamicDraw:E});t.addVertexAttribute(a,r.vertexAttributeKeys.Position);t.addVertexAttribute(c,r.vertexAttributeKeysIndexed.One);t.addVertexAttribute(f,r.vertexAttributeKeysIndexed.Two);t.addVertexAttribute(d,r.vertexAttributeKeysIndexed.Three);t.addVertexAttribute(o,r.vertexAttributeKeysIndexed.Four);t.addVertexAttribute(s,r.vertexAttributeKeysIndexed.Five);t.addVertexAttribute(u,r.vertexAttributeKeysIndexed.Six);t.addVertexAttribute(l,r.vertexAttributeKeysIndexed.Seven);t.addUniform(_);t.addUniform(p);t.addUniform(T);t.addUniform(C);t.addUniform(S);t.addUniform(D);t.addUniform(I);t.addShader(i);t.addShader(n);A.addAttribute(t);A.addAttribute(r.blend());x=r.actor();x.setMaterial(A);x.setMapper(w);h.addSource(g);h.addSource(m);h.addSource(v);h.addSource(y);h.addSource(N);h.addSource(O);h.addSource(P);h.addSource(M);j.setIndices(new Uint16Array(1));h.addPrimitive(j);h.computeBounds=function(){h.setBounds(0,0,0,0,0,0)};w.setGeometryData(h);return b};this.actors=function(){return x?[x]:[]};this._build=function(){j(!!(b.dataTime().timestamp()<b.buildTime().timestamp()&&N));if(!b.renderer().contextRenderer().hasActor(x)){b.renderer().contextRenderer().addActor(x)}b.buildTime().modified();return b};this._update=function(){P.call(b);if(b.dataTime().timestamp()>=b.buildTime().timestamp()||b.updateTime().timestamp()<=b.timestamp()){b._build()}T.set(1/b.renderer().width());C.set(b.renderer().width()/b.renderer().height());x.setVisible(b.visible());x.material().setBinNumber(b.bin());b.updateTime().modified();return b};this._exit=function(){b.renderer().contextRenderer().removeActor(x);x=null;M()};this._init(t);return this};r(v,a);var y={};y[a.capabilities.basic]=true;y[a.capabilities.multicolor]=true;i("webgl","line",v,y);e.exports=v},function(e,t){e.exports="/* lineFeature fragment shader */\n\n#ifdef GL_ES\n  #ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n  #else\n    precision mediump float;\n  #endif\n#endif\nvarying vec4 strokeColorVar;\nvarying vec4 subpos;\nvarying vec4 info;\nvarying vec4 angles;\nuniform float antialiasing;\nuniform float miterLimit;\nuniform float fixedFlags;\n\nvoid main () {\n  vec4 color = strokeColorVar;\n  float opacity = 1.0;\n  int nearMode = int(floor(info.x + 0.5));\n  int farMode = int(floor(info.y + 0.5));\n  float cosABC = angles.x;\n  float sinABC = angles.y;\n  float cosBCD = angles.z;\n  float sinBCD = angles.w;\n  // never render on the opposite side of a miter.  This uses a bit of\n  // slop, via pow(smoothstep()) instead of step(), since there are\n  // precision issues in this calculation.  This doesn't wholy solve\n  // the precision issue; sometimes pixels are missed or double\n  // rendered along the inside seam of a miter.\n  if (nearMode >= 4) {\n    float dist = cosABC * subpos.x - sinABC * subpos.y;\n    opacity = min(opacity, pow(smoothstep(-0.02, 0.02, dist), 0.5));\n    if (opacity == 0.0) {\n      discard;\n    }\n  }\n  if (farMode >= 4) {\n    float dist = cosBCD * subpos.z - sinBCD * subpos.y;\n    opacity = min(opacity, pow(smoothstep(-0.02, 0.02, dist), 0.5));\n    if (opacity == 0.0) {\n      discard;\n    }\n  }\n  // butt or square cap\n  if ((nearMode == 0 || nearMode == 1) && subpos.x < antialiasing) {\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.x + subpos.w * float(nearMode)));\n  }\n  if ((farMode == 0 || farMode == 1) && subpos.z < antialiasing) {\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.z + subpos.w * float(farMode)));\n  }\n  // round cap\n  if (nearMode == 2 && subpos.x <= 0.0) {\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.w - sqrt(pow(subpos.x, 2.0) + pow(subpos.y - info.z * subpos.w, 2.0))));\n  }\n  if (farMode == 2 && subpos.z <= 0.0) {\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.w - sqrt(pow(subpos.z, 2.0) + pow(subpos.y - info.z * subpos.w, 2.0))));\n  }\n  // bevel and clip joins\n  if ((nearMode == 5 || nearMode == 7) && subpos.x < antialiasing) {\n    float dist = (sinABC * subpos.x + cosABC * subpos.y) * sign(sinABC);\n    float w = subpos.w * (1.0 - info.z * sign(sinABC));\n    float maxDist;\n    if (nearMode == 5)  maxDist = cosABC * w;\n    else                maxDist = miterLimit * w;\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, maxDist + dist));\n  }\n  if ((farMode == 5 || farMode == 7) && subpos.z < antialiasing) {\n    float dist = (sinBCD * subpos.z + cosBCD * subpos.y) * sign(sinBCD);\n    float w = subpos.w * (1.0 - info.z * sign(sinBCD));\n    float maxDist;\n    if (farMode == 5)  maxDist = cosBCD * w;\n    else               maxDist = miterLimit * w;\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, maxDist + dist));\n  }\n  // round join\n  if (nearMode == 6 && subpos.x <= 0.0) {\n    float w = subpos.w * (1.0 - info.z * sign(sinABC));\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, w - sqrt(pow(subpos.x, 2.0) + pow(subpos.y, 2.0))));\n  }\n  if (farMode == 6 && subpos.z <= 0.0) {\n    float w = subpos.w * (1.0 - info.z * sign(sinBCD));\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, w - sqrt(pow(subpos.z, 2.0) + pow(subpos.y, 2.0))));\n  }\n  // antialias along main edges\n  if (antialiasing > 0.0) {\n    if (subpos.y > subpos.w * (1.0 + info.z) - antialiasing) {\n      opacity = min(opacity, smoothstep(antialiasing, -antialiasing, subpos.y - subpos.w * (1.0 + info.z)));\n    }\n    if (subpos.y < subpos.w * (-1.0 + info.z) + antialiasing) {\n      opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.y - subpos.w * (-1.0 + info.z)));\n    }\n  }\n  if (opacity == 0.0) {\n    discard;\n  }\n  color.a *= opacity;\n  gl_FragColor = color;\n}\n"},function(e,t){e.exports="/* lineFeature debug fragment shader */\n\n#ifdef GL_ES\n  #ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n  #else\n    precision mediump float;\n  #endif\n#endif\nvarying vec4 strokeColorVar;\nvarying vec4 subpos;\nvarying vec4 info;\nvarying vec4 angles;\nuniform float antialiasing;\nuniform float miterLimit;\nuniform float fixedFlags;\n\nvoid main () {\n  vec4 color = strokeColorVar;\n  bool debug = bool(mod(fixedFlags, 2.0));\n  float opacity = 1.0;\n  int nearMode = int(floor(info.x + 0.5));\n  int farMode = int(floor(info.y + 0.5));\n  float cosABC = angles.x;\n  float sinABC = angles.y;\n  float cosBCD = angles.z;\n  float sinBCD = angles.w;\n  // never render on the opposite side of a miter.  This uses a bit of\n  // slop, via pow(smoothstep()) instead of step(), since there are\n  // precision issues in this calculation.  This doesn't wholy solve\n  // the precision issue; sometimes pixels are missed or double\n  // rendered along the inside seam of a miter.\n  if (nearMode >= 4) {\n    float dist = cosABC * subpos.x - sinABC * subpos.y;\n    opacity = min(opacity, pow(smoothstep(-0.02, 0.02, dist), 0.5));\n    if (opacity == 0.0) {\n      if (debug) {\n        color.r = 255.0 / 255.0;\n        gl_FragColor = color;\n        return;\n      }\n      discard;\n    }\n  }\n  if (farMode >= 4) {\n    float dist = cosBCD * subpos.z - sinBCD * subpos.y;\n    opacity = min(opacity, pow(smoothstep(-0.02, 0.02, dist), 0.5));\n    if (opacity == 0.0) {\n      if (debug) {\n        color.r = 254.0 / 255.0;\n        gl_FragColor = color;\n        return;\n      }\n      discard;\n    }\n  }\n  // butt or square cap\n  if ((nearMode == 0 || nearMode == 1) && subpos.x < antialiasing) {\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.x + subpos.w * float(nearMode)));\n  }\n  if ((farMode == 0 || farMode == 1) && subpos.z < antialiasing) {\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.z + subpos.w * float(farMode)));\n  }\n  // round cap\n  if (nearMode == 2 && subpos.x <= 0.0) {\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.w - sqrt(pow(subpos.x, 2.0) + pow(subpos.y - info.z * subpos.w, 2.0))));\n  }\n  if (farMode == 2 && subpos.z <= 0.0) {\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.w - sqrt(pow(subpos.z, 2.0) + pow(subpos.y - info.z * subpos.w, 2.0))));\n  }\n  // bevel and clip joins\n  if ((nearMode == 5 || nearMode == 7) && subpos.x < antialiasing) {\n    float dist = (sinABC * subpos.x + cosABC * subpos.y) * sign(sinABC);\n    float w = subpos.w * (1.0 - info.z * sign(sinABC));\n    float maxDist;\n    if (nearMode == 5)  maxDist = cosABC * w;\n    else                maxDist = miterLimit * w;\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, maxDist + dist));\n  }\n  if ((farMode == 5 || farMode == 7) && subpos.z < antialiasing) {\n    float dist = (sinBCD * subpos.z + cosBCD * subpos.y) * sign(sinBCD);\n    float w = subpos.w * (1.0 - info.z * sign(sinBCD));\n    float maxDist;\n    if (farMode == 5)  maxDist = cosBCD * w;\n    else               maxDist = miterLimit * w;\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, maxDist + dist));\n  }\n  // round join\n  if (nearMode == 6 && subpos.x <= 0.0) {\n    float w = subpos.w * (1.0 - info.z * sign(sinABC));\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, w - sqrt(pow(subpos.x, 2.0) + pow(subpos.y, 2.0))));\n  }\n  if (farMode == 6 && subpos.z <= 0.0) {\n    float w = subpos.w * (1.0 - info.z * sign(sinBCD));\n    opacity = min(opacity, smoothstep(-antialiasing, antialiasing, w - sqrt(pow(subpos.z, 2.0) + pow(subpos.y, 2.0))));\n  }\n  // antialias along main edges\n  if (antialiasing > 0.0) {\n    if (subpos.y > subpos.w * (1.0 + info.z) - antialiasing) {\n      opacity = min(opacity, smoothstep(antialiasing, -antialiasing, subpos.y - subpos.w * (1.0 + info.z)));\n    }\n    if (subpos.y < subpos.w * (-1.0 + info.z) + antialiasing) {\n      opacity = min(opacity, smoothstep(-antialiasing, antialiasing, subpos.y - subpos.w * (-1.0 + info.z)));\n    }\n  }\n  if (opacity == 0.0) {\n    if (debug) {\n      color.r = 253.0 / 255.0;\n      gl_FragColor = color;\n      return;\n    }\n    discard;\n  }\n  color.a *= opacity;\n  gl_FragColor = color;\n}\n"},function(e,t){e.exports="/* lineFeature vertex shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nattribute vec3 pos;\nattribute vec3 prev;\nattribute vec3 next;\nattribute vec3 far;\nattribute float flags;\n\nattribute vec3 strokeColor;\nattribute float strokeOpacity;\nattribute float strokeWidth;\n\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float pixelWidth;\nuniform float aspect;\nuniform float miterLimit;\nuniform float antialiasing;\n\nvarying vec4 strokeColorVar;\nvarying vec4 subpos;  /* px, py, length - px, width */\nvarying vec4 info;  /* near mode, far mode, offset */\nvarying vec4 angles; /* near angle cos, sin, far angle cos, sin */\n\nconst float PI = 3.14159265358979323846264;\n\nvec4 viewCoord(vec3 c) {\n  vec4 result = projectionMatrix * modelViewMatrix * vec4(c.xyz, 1.0);\n  if (result.w != 0.0)  result = result / result.w;\n  return result;\n}\n\nfloat atan2(float y, float x) {\n  if (x > 0.0)  return atan(y / x);\n  if (x < 0.0 && y >= 0.0)  return atan(y / x) + PI;\n  if (x < 0.0)  return atan(y / x) - PI;\n  return sign(y) * 0.5 * PI;\n}\n\nvoid main(void)\n{\n  /* If any vertex has been deliberately set to a negative opacity,\n   * skip doing computations on it. */\n  if (strokeOpacity < 0.0) {\n    gl_Position = vec4(2.0, 2.0, 0.0, 1.0);\n    return;\n  }\n  /* convert coordinates.  We have four values, since we need to\n   * calculate the angles between the lines formed by prev-pos and\n   * pos-next, and between pos-next and next-far, plus know the angle\n   *   (prev)---(pos)---(next)---(far) => A---B---C---D */\n  vec4 A = viewCoord(prev);\n  vec4 B = viewCoord(pos);\n  vec4 C = viewCoord(next);\n  vec4 D = viewCoord(far);\n  // calculate line segment vector and angle\n  vec2 deltaCB = C.xy - B.xy;\n  if (deltaCB == vec2(0.0, 0.0)) {\n    gl_Position = vec4(2.0, 2.0, 0.0, 1.0);\n    return;\n  }\n  float angleCB = atan2(deltaCB.y, deltaCB.x * aspect);\n  // values we need to pass along\n  strokeColorVar = vec4(strokeColor, strokeOpacity);\n  // extract values from our flags field\n  int vertex = int(mod(flags, 4.0));\n  int nearMode = int(mod(floor(flags / 4.0), 8.0));\n  int farMode = int(mod(floor(flags / 32.0), 8.0));\n  // we use 11 bits of the flags for the offset, where -1023 to 1023\n  // maps to -1 to 1.  The 11 bits are a signed value, so simply\n  // selecting the bits will result in an unsigned values that may be\n  // greater than 1, in which case we have to subtract appropriately.\n  float offset = mod(floor(flags / 256.0), 2048.0) / 1023.0;\n  if (offset > 1.0)  offset -= 2048.0 / 1023.0;\n  // by default, offset by the width and don't extend lines.  Later,\n  // calculate line extensions based on end cap and end join modes\n  float yOffset = strokeWidth + antialiasing;\n  if (vertex == 0 || vertex == 2)  yOffset *= -1.0;\n  yOffset += strokeWidth * offset;\n  float xOffset = 0.0;\n  // end caps\n  if (nearMode == 0) {\n    xOffset = antialiasing;\n  } else if (nearMode == 1 || nearMode == 2) {\n    xOffset = strokeWidth + antialiasing;\n  }\n\n  // If joining lines, calculate the angles in screen space formed by\n  // the near end (A-B-C) and far end (B-C-D), and determine how much\n  // space is needed for the particular join.\n  //   This could be changed: if the lines are not a uniform width and\n  // offset, then the functional join angle is not simply half the\n  // angle between the two lines, but rather half the angle of the\n  // inside edge of the the two lines.\n  float cosABC = 1.0, sinABC = 0.0, cosBCD = 1.0, sinBCD = 0.0;  // of half angles\n  // handle near end\n  if (nearMode >= 4) {\n    float angleBA = atan2(B.y - A.y, (B.x - A.x) * aspect);\n    if (A.xy == B.xy)  angleBA = angleCB;\n    float angleABC = angleCB - angleBA;\n    // ensure angle is in the range [-PI, PI], then take the half angle\n    angleABC = (mod(angleABC + 3.0 * PI, 2.0 * PI) - PI) / 2.0;\n    cosABC = cos(angleABC);  sinABC = sin(angleABC);\n    // if this angle is close to flat, pass-through the join\n    if (nearMode >= 4 && cosABC > 0.999999) {\n      nearMode = 3;\n    }\n    // miter, miter-clip\n    if (nearMode == 4 || nearMode == 7) {\n      if (cosABC < 0.000001 || 1.0 / cosABC > miterLimit) {\n        if (nearMode == 4) {\n          nearMode = 5;\n        } else {\n          xOffset = miterLimit * strokeWidth * (1.0 - offset * sign(sinABC)) + antialiasing;\n        }\n      } else {\n        // we add an extra 1.0 to the xOffset to make sure that fragment\n        // shader is doing the clipping\n        xOffset = abs(sinABC / cosABC) * strokeWidth * (1.0 - offset * sign(sinABC)) + antialiasing + 1.0;\n        nearMode = 4;\n      }\n    }\n    // bevel or round join\n    if (nearMode == 5 || nearMode == 6) {\n      xOffset = strokeWidth * (1.0 - offset * sign(sinABC)) + antialiasing;\n    }\n  }\n\n  // handle far end\n  if (farMode >= 4) {\n    float angleDC = atan2(D.y - C.y, (D.x - C.x) * aspect);\n    if (D.xy == C.xy)  angleDC = angleCB;\n    float angleBCD = angleDC - angleCB;\n    // ensure angle is in the range [-PI, PI], then take the half angle\n    angleBCD = (mod(angleBCD + 3.0 * PI, 2.0 * PI) - PI) / 2.0;\n    cosBCD = cos(angleBCD);  sinBCD = sin(angleBCD);\n    // if this angle is close to flat, pass-through the join\n    if (farMode >= 4 && cosBCD > 0.999999) {\n      farMode = 3;\n    }\n    // miter, miter-clip\n    if (farMode == 4 || farMode == 7) {\n      if (cosBCD < 0.000001 || 1.0 / cosBCD > miterLimit) {\n        if (farMode == 4)  farMode = 5;\n      } else {\n        farMode = 4;\n      }\n    }\n  }\n\n  // compute the location of a vertex to include everything that might\n  // need to be rendered\n  xOffset *= -1.0;\n  gl_Position = vec4(\n    B.x + (xOffset * cos(angleCB) - yOffset * sin(angleCB)) * pixelWidth,\n    B.y + (xOffset * sin(angleCB) + yOffset * cos(angleCB)) * pixelWidth * aspect,\n    B.z, 1.0);\n  // store other values needed to determine which pixels to plot.\n  float lineLength = length(vec2(deltaCB.x, deltaCB.y / aspect)) / pixelWidth;\n\n  if (vertex == 0 || vertex == 1) {\n    subpos = vec4(xOffset, yOffset, lineLength - xOffset, strokeWidth);\n    info = vec4(float(nearMode), float(farMode), offset, 0.0);\n    angles = vec4(cosABC, sinABC, cosBCD, sinBCD);\n  } else {\n    subpos = vec4(lineLength - xOffset, -yOffset, xOffset, strokeWidth);\n    info = vec4(float(farMode), float(nearMode), -offset, 0.0);\n    angles = vec4(cosBCD, -sinBCD, cosABC, -sinABC);\n  }\n}\n"},function(e,t,n){"use strict";var r=n(3);var i=n(1);var a=n(2).registerFeature;var o=n(260);var s=n(76);var u=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}t=t||{};o.call(this,t);var i=n(41);var a=n(17);var u=n(5);var l=n(59);var c=n(266);var f=n(11);var d=n(661);var p=n(662);var h=n(663);var g=n(664);l.call(this);var m=this,v=this._exit,y=null,b=null,M={},x,w,A=this._init,T=this._update,C=this.updateStyleFromArray;c(m,t);function S(){var e=new i.shader(i.GL.VERTEX_SHADER);e.setShaderSource(m._primitiveShape===o.primitiveShapes.sprite?g:h);return e}function D(){var e=new i.shader(i.GL.FRAGMENT_SHADER);e.setShaderSource(m._primitiveShape===o.primitiveShapes.sprite?p:d);return e}function I(e){if(!e.length){return e===undefined?0:Math.floor(Math.abs(e)*250)+1}return((e[0]===undefined?0:Math.floor(Math.abs(e[0])*250)+1)+(e[1]===undefined?0:Math.floor(Math.abs(e[1])*250)+1)*252+(e[2]===undefined?0:Math.floor(Math.abs(e[2])*250)+1)*252*252)*(e[3]?-1:1)}function E(e){var t,n,r=m.data().length,i=m._pointPolygon(0,0,1,1),l=new Array(r*3),c,f,d,p,h,g={},v={},M={},A={},T={radius:1,fillColor:3,fillOpacity:1,strokeColor:3,strokeOpacity:1,strokeOffset:0,strokeWidth:1,symbol:1,symbolValue:1,rotation:1,scaleWithZoom:0,rotateWithMap:0},C=m.verticesPerFeature(),S=m.data(),D,N,O,_,L,P=b.geometryData();d=m.position();for(var k in T){M[k]=m.style.get(k);if(!u.isFunction(m.style(k))){A[k]=M[k]()}if(T[k]){g[k]=u.getGeomBuffer(P,k,C*r*T[k])}}if(!e){for(t=L=0;t<r;t+=1,L+=3){f=d(S[t],t);l[L]=f.x;l[L+1]=f.y;l[L+2]=0}l=a.transformCoordinates(m.gcs(),m.layer().map().gcs(),l,3);w=new Float32Array(m.style.get("origin")(l));if(w[0]||w[1]||w[2]){for(t=L=0;t<r;t+=1,L+=3){l[L]-=w[0];l[L+1]-=w[1];l[L+2]-=w[2]}}x.setOrigin(w);c=u.getGeomBuffer(P,"pos",C*r*3);if(m._primitiveShape!==o.primitiveShapes.sprite){h=u.getGeomBuffer(P,"unit",C*r*2)}p=P.primitive(0).indices();if(!(p instanceof Uint16Array)||p.length!==C*r){p=new Uint16Array(C*r);P.primitive(0).setIndices(p)}}for(t=N=O=_=L=0;t<r;t+=1,L+=3){D=S[t];if(!e){if(m._primitiveShape!==o.primitiveShapes.sprite){for(n=0;n<i.length;n+=1,_+=1){h[_]=i[n]}}}for(var R in T){v[R]=A[R]===undefined?M[R](D,t):A[R]}v.scaleWithZoom=o.scaleMode[v.scaleWithZoom]||(v.scaleWithZoom>=1&&v.scaleWithZoom<=3?v.scaleWithZoom:0);v.symbolComputed=v.scaleWithZoom+(v.rotateWithMap?4:0)+(Math.sign(v.strokeOffset)+1)*16+v.symbol*64;if(v.symbolValue&&v.symbol>=o.symbols.arrow&&v.symbol<o.symbols.arrow+o.symbols.arrowMax){v.symbolValue=I(v.symbolValue)}for(n=0;n<C;n+=1,N+=1,O+=3){if(!e){c[O]=l[L];c[O+1]=l[L+1];c[O+2]=l[L+2]}g.radius[N]=v.radius;g.fillColor[O]=v.fillColor.r;g.fillColor[O+1]=v.fillColor.g;g.fillColor[O+2]=v.fillColor.b;g.fillOpacity[N]=v.fillOpacity;g.strokeColor[O]=v.strokeColor.r;g.strokeColor[O+1]=v.strokeColor.g;g.strokeColor[O+2]=v.strokeColor.b;g.strokeOpacity[N]=v.strokeOpacity;g.strokeWidth[N]=v.strokeWidth;g.symbol[N]=v.symbolComputed;g.symbolValue[N]=v.symbolValue;g.rotation[N]=v.rotation}}if(m._primitiveShapeAuto){var j=m._approximateMaxRadius(m.renderer().map().zoom());if(m._primitiveShape===o.primitiveShapes.sprite&&j>s._maxPointSize||m._primitiveShape!==o.primitiveShapes.sprite&&j<=s._maxPointSize){m._primitiveShape=j>s._maxPointSize?o.primitiveShapes.triangle:o.primitiveShapes.sprite;m.renderer().contextRenderer().removeActor(y);y=null;m._init(true);E();return}}if(!e){P.boundsDirty(true);b.modified();b.boundsDirtyTimestamp().modified()}else{Object.keys(g).forEach(function(e){return b.updateSourceBuffer(e)})}}this.actors=function(){if(!y){return[]}return[y]};this.updateStyleFromArray=function(e,t,n){var i={fillColor:3,fillOpacity:1,radius:1,strokeColor:3,strokeOpacity:1,strokeWidth:1,symbolComputed:1,symbolValueComputed:1};var a,o;if(typeof e==="string"){var s={};s[e]=t;e=s}r.each(e,function(e,t){if(m.visible()&&y&&i[e]&&!a&&!m.clustering()){var n,r,s,u,l,c,f,d,p,h;p=i[e];u=m.data().length;r=y.mapper();h=e==="symbolComputed"?"symbol":e==="symbolValueComputed"?"symbolValue":e;s=r.getSourceBuffer(h);n=m.verticesPerFeature();if(!s||!u||u*n*p!==s.length){a=true}else{switch(i[e]){case 1:for(c=0,d=0;c<u;c+=1){l=t[c];for(f=0;f<n;f+=1,d+=1){s[d]=l}}break;case 3:for(c=0,d=0;c<u;c+=1){l=t[c];for(f=0;f<n;f+=1,d+=3){s[d]=l.r;s[d+1]=l.g;s[d+2]=l.b}}break}r.updateSourceBuffer(h);o=true}}else{a=true}if(e===h){var g=m.modified;if(!a){m.modified=function(){}}C(e,t,false);m.modified=g}});if(n){if(m.visible()&&a){m.draw()}else if(o){m.renderer()._render()}}return m};this._handleZoom=function(e){if(!m._primitiveShapeAuto||m._primitiveShape!==o.primitiveShapes.sprite){return}if(m._approximateMaxRadius(e)>s._maxPointSize){m._primitiveShape=o.primitiveShapes.triangle;m.renderer().contextRenderer().removeActor(m.actors()[0]);m._init(true);m.dataTime().modified();m.draw()}};this._init=function(e){var n=i.shaderProgram(),r=S(),a=D(),s=i.material(),u=i.blend(),l=i.geometryData(),c=i.sourceDataP3fv({name:"pos"}),d={radius:1,fillColor:3,fillOpacity:1,strokeColor:3,strokeOpacity:1,strokeWidth:1,symbol:1,symbolValue:1,rotation:1},p={pixelWidth:i.GL.FLOAT,aspect:i.GL.FLOAT,zoom:i.GL.FLOAT,rotationUniform:i.GL.FLOAT},h=new i.projectionUniform("projectionMatrix"),g;x=new i.modelViewOriginUniform("modelViewMatrix",w);if(m._primitiveShape===o.primitiveShapes.sprite){g=new i.points}else{g=new i.triangles;d.unit=2}g.setIndices(new Uint16Array);if(!e){A.call(m,t)}b=i.mapper();n.addVertexAttribute(i.vertexAttribute("pos"),i.vertexAttributeKeys.Position);l.addSource(c);Object.keys(d).forEach(function(e,t){n.addVertexAttribute(i.vertexAttribute(e),t+1);l.addSource(i.sourceDataAnyfv(d[e],t+1,{name:e}))});M={};Object.keys(p).forEach(function(e){M[e]=new i.uniform(p[e],e);n.addUniform(M[e])});n.addUniform(x);n.addUniform(h);n.addShader(a);n.addShader(r);s.addAttribute(n);s.addAttribute(u);y=i.actor();y.setMaterial(s);y.setMapper(b);l.addPrimitive(g);l.computeBounds=function(){l.setBounds(0,0,0,0,0,0)};b.setGeometryData(l);if(!e){m.geoOn(f.zoom,function(e){m._handleZoom(e.zoomLevel)})}};this._build=function(){E(m.dataTime().timestamp()<m.buildTime().timestamp());if(!m.renderer().contextRenderer().hasActor(y)){m.renderer().contextRenderer().addActor(y)}m.buildTime().modified();return m};this._update=function(){T.call(m);if(m.dataTime().timestamp()>=m.buildTime().timestamp()||m.updateTime().timestamp()<m.timestamp()){m._build()}M.pixelWidth.set(2/m.renderer().width());M.aspect.set(m.renderer().width()/m.renderer().height());M.zoom.set(m.renderer().map().zoom());M.rotationUniform.set(m.renderer().map().rotation());y.setVisible(m.visible());y.material().setBinNumber(m.bin());m.updateTime().modified();return m};this._exit=function(){m.renderer().contextRenderer().removeActor(y);y=null;M={};v()};m._init();return this};i(u,o);var l={};a("webgl","marker",u,l);e.exports=u},function(e,t){e.exports="/* markerFeature square/triangle fragment shader */\n\n/* markerFeature common fragment shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nvarying float radiusVar;\nvarying vec4 fillColorVar;\nvarying vec4 strokeColorVar;\nvarying float strokeWidthVar;\nvarying float symbolVar;  /* contains some bit fields */\nvarying float symbolValueVar;\nvarying float rotationVar;\n// the square/triangle shader defines unitVar\nconst int symbolEllipse = 0;\nconst int symbolFlowerBase = 1;\nconst int symbolFlowerMax = 16;\nconst int symbolTriangle = 16;\nconst int symbolStarBase = 17;\nconst int symbolStarMax = 16;\nconst int symbolRectangle = 32;\nconst int symbolCrossBase = 33;\nconst int symbolCrossMax = 16;\nconst int symbolOval = 48;\nconst int symbolJackBase = 49;\nconst int symbolJackMax = 16;\nconst int symbolDrop = 64;\nconst int symbolDropBase = 65;\nconst int symbolDropMax = 16;\nconst int symbolArrow = 80;\nconst int symbolArrowBase = 81;\nconst int symbolArrowMax = 16;\n// Distance to antialias in pixels\nconst float antialiasDist = 1.5;\n\n/* Compute the distance from a point to an arrow defined by the radiusVar and a\n * packed value containing\n *   headWidth: ratio to radius (0, 1]\n *   headLength: ratio to diameter (0, 1]\n *   stemWidth: ratio to headWidth [0, 1]\n *   sweep: boolean\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float packed: the packed value.\n * Exit:  float dist: the distance to the drop in pixels.  Negative is inside.\n */\nfloat distanceToArrow(vec2 pos, float value) {\n  bool sweep = value < 0.0;\n  value = abs(value);\n  float pack0 = (mod(value, 252.0) - 1.0) / 250.0;\n  value = floor(value / 252.0);\n  float pack1 = (mod(value, 252.0) - 1.0) / 250.0;\n  value = floor(value / 252.0);\n  float pack2 = (mod(value, 252.0) - 1.0) / 250.0;\n\n  float headWidth = (pack0 > 0.0 ? pack0 : 2.0 / 3.0);\n  float headEnd = 1.0 - 2.0 * (pack1 > 0.0 ? pack1 : 1.0 / 2.0);\n  float stemWidth = headWidth * (pack2 >= 0.0 ? pack2 : 1.0 / 3.0);\n  if (length(vec2(headWidth, headEnd)) > 1.0) {\n    vec2 scaledHead = normalize(vec2(headWidth, headEnd));\n    headWidth = scaledHead.x;\n    headEnd = scaledHead.y;\n  }\n  float stemEnd = -cos(asin(stemWidth));\n\n  headWidth *= radiusVar;\n  headEnd *= radiusVar;\n  stemWidth *= radiusVar;\n  stemEnd *= radiusVar;\n  pos.y = abs(pos.y);\n  float stemDist = pos.y - stemWidth;\n  float stemEndDist = stemEnd - pos.x;\n  float B = (radiusVar - headEnd) / headWidth;\n  float headDist = (pos.x + B * pos.y - radiusVar) / sqrt(1.0 + B * B);\n  float headEndDist;\n  if (sweep) {\n    B = (radiusVar - headEnd) / 3.0 / headWidth;\n    headEndDist = -(pos.x + B * pos.y - (radiusVar + headEnd * 2.0) / 3.0) / sqrt(1.0 + B * B);\n  } else {\n    headEndDist = headEnd - pos.x;\n  }\n  headEndDist = min(headEndDist, stemDist);\n  return max(max(headDist, headEndDist), stemEndDist);\n}\n\n/* Compute the distance from a point to a drop defined by the radiusVar (the\n * semimajor axis) and ratio (between the minor and major radii).\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the drop in pixels.  Negative is inside.\n */\nfloat distanceToDrop(vec2 pos, float ratio) {\n  ratio = abs(ratio);\n  if (ratio == 0.0 || ratio >= 1.0) {\n    ratio = 1.0;\n  }\n  float r = radiusVar * ratio;\n  float cx = radiusVar - r;\n  float rad = distance(pos.xy, vec2(cx, 0.0)) - r;\n  if (ratio < 0.5) {\n    float x = radiusVar - r - r * r / cx;\n    float y = sqrt(r * r - (cx - x) * (cx - x));\n    float Bt = (cx - x) / y;\n    if ((pos.x + Bt * abs(pos.y) - cx) / sqrt(1.0 + Bt * Bt) < 0.0) {\n      float B = -x / y;\n      return -(pos.x + B * abs(pos.y)) / sqrt(1.0 + B * B);\n    }\n  }\n  return rad;\n}\n\n/* Compute the distance from a point to the ellipse defined by the radiusVar\n * (the semimajor axis) and ratio (between the minor and major axes).\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the ellipse in pixels.  Negative is\n *   inside.\n */\nfloat distanceToEllipse(vec2 pos, float ratio) {\n  // a and b are the semi-major and semi-minor axes\n  // ratio is the between the minor and major axes.  If > 1, swap these and\n  // rotate 90 degrees.\n  if (ratio == 0.0) {\n    ratio = 1.0;\n  }\n  float a = radiusVar, b = abs(radiusVar * ratio);\n  if (b > a) {\n    pos = vec2(pos.y, -pos.x);\n    b = abs(radiusVar / ratio);\n  }\n  float a2 = a * a, b2 = b * b;\n  // compute the distance to the ellipse.  See this discussion:\n  // https://stackoverflow.com/questions/22959698\n  float f = sqrt(a2 - b2),\n        // this value will be positive if outside and negative if inside.  If\n        // we used it directly, the stroke would be too thick along the long\n        // edges of the ellipse\n        d = (distance(pos, vec2(f, 0.0)) + distance(pos, vec2(-f, 0.0))) * 0.5 - a;\n  // if we are outside of the ellipse, accuracy is not important, so return\n  // early.\n  if (d >= 0.0) {\n    return d;\n  }\n  // work in one quadrant\n  pos = abs(pos);\n  // t (the angle from center) could start as `atan(pos.y, pos.x)`, but this\n  // results in a slower solution near narrow ends\n  float t = 0.7;\n  float cost = cos(t), sint = sin(t), x = a * cost, y = b * sint;\n  vec2 lastxy;\n  for (int iter = 0; iter < 10; iter += 1) {\n    lastxy = vec2(x, y);\n    float ex = (a2 - b2) * pow(cost, 3.0) / a,\n          ey = (b2 - a2) * pow(sint, 3.0) / b;\n    vec2 r = vec2(x - ex, y - ey),\n         q = vec2(pos.x - ex, pos.y - ey);\n    float lenr = length(r);\n    t += lenr * asin((r.x * q.y - r.y * q.x) / lenr / length(q)) / sqrt(a2 + b2 - x * x - y * y);\n    t = clamp(t, 0.0, acos(0.0));\n    cost = cos(t);\n    sint = sin(t);\n    x = a * cost;\n    y = b * sint;\n    if (distance(lastxy, vec2(x, y)) < 0.05) {\n      break;\n    }\n  }\n  return sign(d) * distance(pos, vec2(x, y));\n}\n\n/* Compute the distance from a point to an isosceles triangle.\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: length of the base compared to the other sides.\n * Exit:  float dist: the distance to the rectangle in pixels.  Negative is\n *   inside.\n */\nfloat distanceToIsoscelesTriangle(vec2 pos, float ratio) {\n  ratio = clamp(abs(ratio), 0.0, 2.0);\n  if (ratio == 0.0 || ratio == 2.0) {\n    ratio = 1.0;\n  }\n  float s1, s2, x0, x1, y1;\n  if (ratio < sqrt(2.0)) {\n    s1 = radiusVar * sqrt(4.0 - ratio * ratio); // length of equal sides\n    s2 = s1 * ratio;\n    y1 = s2 / 2.0;\n    x0 = radiusVar;\n    x1 = x0 - sqrt(s1 * s1 - y1 * y1);\n  } else {\n    s2 = radiusVar * 2.0;\n    s1 = s2 / ratio;\n    y1 = s2 / 2.0;\n    x0 = sqrt(s1 * s1 - y1 * y1);\n    x1 = 0.0;\n  }\n  float B = (x0 - x1) / y1;\n  return max(x1 - pos.x, (pos.x + B * abs(pos.y) - x0) / sqrt(1.0 + B * B));\n}\n\n/* Compute the distance from a point to an oval defined by the radiusVar (the\n * semimajor axis) and ratio (between the minor and major axes).  Here an oval\n * is defined as two semicircles connected by straight line segments.\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the oval in pixels.  Negative is inside.\n */\nfloat distanceToOval(vec2 pos, float ratio) {\n  ratio = abs(ratio);\n  if (ratio == 0.0 || ratio >= 1.0) {\n    ratio = 1.0;\n  }\n  float minor = radiusVar * ratio;\n  float center = radiusVar - minor;\n  pos = abs(pos);\n  if (pos.x <= center) {\n    return pos.y - minor;\n  }\n  return distance(pos, vec2(center, 0.0)) - minor;\n}\n\n/* Compute the distance from a point to a rectangle defined by the radiusVar\n * (the semidiagonal) and ratio (between the minor and major axes).\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the rectangle in pixels.  Negative is\n *   inside.\n */\nfloat distanceToRectangle(vec2 pos, float ratio) {\n  ratio = abs(ratio);\n  if (ratio == 0.0) {\n    ratio = 1.0;\n  }\n  vec2 wh = normalize(vec2(1.0, abs(ratio))) * radiusVar;\n  vec2 dist = abs(pos) - wh;\n  return max(dist.x, dist.y);\n}\n\n/* Based on a repetition value, return a position for rotational symmetry.\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        int repetitions: number of repetitions on the cross.\n * Exit:  float dist: a point in the primary position.\n */\nvec2 rotationalSymmetry(vec2 pos, int repetitions) {\n  float pi = acos(-1.0);\n  float limit = pi / float(repetitions);\n  float ang = atan(pos.y, pos.x);\n  ang = mod(ang + pi * 2.0, limit * 2.0);\n  if (ang > limit) {\n    ang -= limit * 2.0;\n  }\n  return vec2(cos(ang), sin(ang)) * length(pos);\n}\n\nvoid markerFeatureFragment(vec2 pos) {\n  // rad is a value in pixels from the edge of the symbol where negative is\n  // inside the shape\n  float rad = length(pos.xy) - radiusVar;\n  // never allow points outside of the main radius\n  if (rad > 0.0) {\n    discard;\n    return;\n  }\n  // apply clockwise rotation\n  if (rotationVar != 0.0) {\n    float cosr = cos(rotationVar), sinr = sin(rotationVar);\n    pos = vec2(pos.x * cosr + pos.y * sinr, -pos.x * sinr + pos.y * cosr);\n  }\n\n  int symbol = int(floor(symbolVar / 64.0));\n  bool isimage = bool(mod(floor(symbolVar / 8.0), 2.0));\n  vec4 fillColor, strokeColor;\n  float endStep;\n\n  float ratio = symbolValueVar;\n  // When ratio is 0, it usually gets changed to 1; some shapes could have\n  // better defaults\n  /* Symbol shapes */\n  if (symbol == symbolTriangle) {\n    rad = distanceToIsoscelesTriangle(pos, ratio);\n  } else if (symbol == symbolRectangle) {\n    rad = distanceToRectangle(pos, ratio);\n  } else if (symbol == symbolOval) {\n    rad = distanceToOval(pos, ratio);\n  } else if (symbol == symbolDrop) {\n    rad = distanceToDrop(pos, ratio);\n  } else if (symbol == symbolArrow) {\n    rad = distanceToArrow(pos, ratio);\n  } else if (symbol >= symbolCrossBase && symbol <= symbolCrossBase + symbolCrossMax - 2) {\n    rad = distanceToRectangle(rotationalSymmetry(pos, symbol - symbolCrossBase + 2), ratio);\n  } else if (symbol >= symbolFlowerBase && symbol <= symbolFlowerBase + symbolFlowerMax - 2) {\n    rad = distanceToEllipse(rotationalSymmetry(pos, symbol - symbolFlowerBase + 2), ratio);\n  } else if (symbol >= symbolStarBase && symbol <= symbolStarBase + symbolStarMax - 2) {\n    rad = distanceToIsoscelesTriangle(rotationalSymmetry(pos, symbol - symbolStarBase + 2), ratio);\n  } else if (symbol >= symbolJackBase && symbol <= symbolJackBase + symbolJackMax - 2) {\n    rad = distanceToOval(rotationalSymmetry(pos, symbol - symbolJackBase + 2), ratio);\n  } else if (symbol >= symbolDropBase && symbol <= symbolDropBase + symbolDropMax - 2) {\n    rad = distanceToDrop(rotationalSymmetry(pos, symbol - symbolDropBase + 2), ratio);\n  } else if (symbol >= symbolArrowBase && symbol <= symbolArrowBase + symbolArrowMax - 2) {\n    rad = distanceToArrow(rotationalSymmetry(pos, symbol - symbolArrowBase + 2), ratio);\n  } else { // default - circle or ellipse; a value of 0 or 1 is a circle\n    if (ratio != 0.0 && ratio != 1.0) {\n      rad = distanceToEllipse(pos, ratio);\n    }\n  }\n\n  if (rad >= 0.0) {\n    discard;\n    return;\n  }\n  // If there is no stroke, the fill region should transition to nothing\n  if (strokeColorVar.a == 0.0 || strokeWidthVar <= 0.0) {\n    strokeColor = vec4(fillColorVar.rgb, 0.0);\n    endStep = 0.0;\n  } else {\n    strokeColor = strokeColorVar;\n    endStep = -strokeWidthVar;\n  }\n  // Likewise, if there is no fill, the stroke should transition to nothing\n  if (fillColorVar.a == 0.0) {\n    fillColor = vec4(strokeColorVar.rgb, 0.0);\n  } else {\n    fillColor = fillColorVar;\n  }\n  if (rad <= endStep) {\n    float step = smoothstep(endStep - antialiasDist, endStep, rad);\n    vec4 color = mix(fillColor, strokeColor, step);\n    float step2 = smoothstep(-antialiasDist, 0.0, rad);\n    gl_FragColor = mix(color, vec4(color.rgb, 0.0), step2);\n  } else {\n    float step = smoothstep(-antialiasDist, 0.0, rad);\n    gl_FragColor = mix(strokeColor, vec4(strokeColor.rgb, 0.0), step);\n  }\n}\n\n\nvarying vec2 unitVar;  // distinct for square/triangle\n\nvoid main() {\n  if (fillColorVar.a == 0.0 && strokeColorVar.a == 0.0)\n    discard;\n  markerFeatureFragment(unitVar);\n}\n"},function(e,t){e.exports="/* markerFeature sprite fragment shader */\n\n/* markerFeature common fragment shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nvarying float radiusVar;\nvarying vec4 fillColorVar;\nvarying vec4 strokeColorVar;\nvarying float strokeWidthVar;\nvarying float symbolVar;  /* contains some bit fields */\nvarying float symbolValueVar;\nvarying float rotationVar;\n// the square/triangle shader defines unitVar\nconst int symbolEllipse = 0;\nconst int symbolFlowerBase = 1;\nconst int symbolFlowerMax = 16;\nconst int symbolTriangle = 16;\nconst int symbolStarBase = 17;\nconst int symbolStarMax = 16;\nconst int symbolRectangle = 32;\nconst int symbolCrossBase = 33;\nconst int symbolCrossMax = 16;\nconst int symbolOval = 48;\nconst int symbolJackBase = 49;\nconst int symbolJackMax = 16;\nconst int symbolDrop = 64;\nconst int symbolDropBase = 65;\nconst int symbolDropMax = 16;\nconst int symbolArrow = 80;\nconst int symbolArrowBase = 81;\nconst int symbolArrowMax = 16;\n// Distance to antialias in pixels\nconst float antialiasDist = 1.5;\n\n/* Compute the distance from a point to an arrow defined by the radiusVar and a\n * packed value containing\n *   headWidth: ratio to radius (0, 1]\n *   headLength: ratio to diameter (0, 1]\n *   stemWidth: ratio to headWidth [0, 1]\n *   sweep: boolean\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float packed: the packed value.\n * Exit:  float dist: the distance to the drop in pixels.  Negative is inside.\n */\nfloat distanceToArrow(vec2 pos, float value) {\n  bool sweep = value < 0.0;\n  value = abs(value);\n  float pack0 = (mod(value, 252.0) - 1.0) / 250.0;\n  value = floor(value / 252.0);\n  float pack1 = (mod(value, 252.0) - 1.0) / 250.0;\n  value = floor(value / 252.0);\n  float pack2 = (mod(value, 252.0) - 1.0) / 250.0;\n\n  float headWidth = (pack0 > 0.0 ? pack0 : 2.0 / 3.0);\n  float headEnd = 1.0 - 2.0 * (pack1 > 0.0 ? pack1 : 1.0 / 2.0);\n  float stemWidth = headWidth * (pack2 >= 0.0 ? pack2 : 1.0 / 3.0);\n  if (length(vec2(headWidth, headEnd)) > 1.0) {\n    vec2 scaledHead = normalize(vec2(headWidth, headEnd));\n    headWidth = scaledHead.x;\n    headEnd = scaledHead.y;\n  }\n  float stemEnd = -cos(asin(stemWidth));\n\n  headWidth *= radiusVar;\n  headEnd *= radiusVar;\n  stemWidth *= radiusVar;\n  stemEnd *= radiusVar;\n  pos.y = abs(pos.y);\n  float stemDist = pos.y - stemWidth;\n  float stemEndDist = stemEnd - pos.x;\n  float B = (radiusVar - headEnd) / headWidth;\n  float headDist = (pos.x + B * pos.y - radiusVar) / sqrt(1.0 + B * B);\n  float headEndDist;\n  if (sweep) {\n    B = (radiusVar - headEnd) / 3.0 / headWidth;\n    headEndDist = -(pos.x + B * pos.y - (radiusVar + headEnd * 2.0) / 3.0) / sqrt(1.0 + B * B);\n  } else {\n    headEndDist = headEnd - pos.x;\n  }\n  headEndDist = min(headEndDist, stemDist);\n  return max(max(headDist, headEndDist), stemEndDist);\n}\n\n/* Compute the distance from a point to a drop defined by the radiusVar (the\n * semimajor axis) and ratio (between the minor and major radii).\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the drop in pixels.  Negative is inside.\n */\nfloat distanceToDrop(vec2 pos, float ratio) {\n  ratio = abs(ratio);\n  if (ratio == 0.0 || ratio >= 1.0) {\n    ratio = 1.0;\n  }\n  float r = radiusVar * ratio;\n  float cx = radiusVar - r;\n  float rad = distance(pos.xy, vec2(cx, 0.0)) - r;\n  if (ratio < 0.5) {\n    float x = radiusVar - r - r * r / cx;\n    float y = sqrt(r * r - (cx - x) * (cx - x));\n    float Bt = (cx - x) / y;\n    if ((pos.x + Bt * abs(pos.y) - cx) / sqrt(1.0 + Bt * Bt) < 0.0) {\n      float B = -x / y;\n      return -(pos.x + B * abs(pos.y)) / sqrt(1.0 + B * B);\n    }\n  }\n  return rad;\n}\n\n/* Compute the distance from a point to the ellipse defined by the radiusVar\n * (the semimajor axis) and ratio (between the minor and major axes).\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the ellipse in pixels.  Negative is\n *   inside.\n */\nfloat distanceToEllipse(vec2 pos, float ratio) {\n  // a and b are the semi-major and semi-minor axes\n  // ratio is the between the minor and major axes.  If > 1, swap these and\n  // rotate 90 degrees.\n  if (ratio == 0.0) {\n    ratio = 1.0;\n  }\n  float a = radiusVar, b = abs(radiusVar * ratio);\n  if (b > a) {\n    pos = vec2(pos.y, -pos.x);\n    b = abs(radiusVar / ratio);\n  }\n  float a2 = a * a, b2 = b * b;\n  // compute the distance to the ellipse.  See this discussion:\n  // https://stackoverflow.com/questions/22959698\n  float f = sqrt(a2 - b2),\n        // this value will be positive if outside and negative if inside.  If\n        // we used it directly, the stroke would be too thick along the long\n        // edges of the ellipse\n        d = (distance(pos, vec2(f, 0.0)) + distance(pos, vec2(-f, 0.0))) * 0.5 - a;\n  // if we are outside of the ellipse, accuracy is not important, so return\n  // early.\n  if (d >= 0.0) {\n    return d;\n  }\n  // work in one quadrant\n  pos = abs(pos);\n  // t (the angle from center) could start as `atan(pos.y, pos.x)`, but this\n  // results in a slower solution near narrow ends\n  float t = 0.7;\n  float cost = cos(t), sint = sin(t), x = a * cost, y = b * sint;\n  vec2 lastxy;\n  for (int iter = 0; iter < 10; iter += 1) {\n    lastxy = vec2(x, y);\n    float ex = (a2 - b2) * pow(cost, 3.0) / a,\n          ey = (b2 - a2) * pow(sint, 3.0) / b;\n    vec2 r = vec2(x - ex, y - ey),\n         q = vec2(pos.x - ex, pos.y - ey);\n    float lenr = length(r);\n    t += lenr * asin((r.x * q.y - r.y * q.x) / lenr / length(q)) / sqrt(a2 + b2 - x * x - y * y);\n    t = clamp(t, 0.0, acos(0.0));\n    cost = cos(t);\n    sint = sin(t);\n    x = a * cost;\n    y = b * sint;\n    if (distance(lastxy, vec2(x, y)) < 0.05) {\n      break;\n    }\n  }\n  return sign(d) * distance(pos, vec2(x, y));\n}\n\n/* Compute the distance from a point to an isosceles triangle.\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: length of the base compared to the other sides.\n * Exit:  float dist: the distance to the rectangle in pixels.  Negative is\n *   inside.\n */\nfloat distanceToIsoscelesTriangle(vec2 pos, float ratio) {\n  ratio = clamp(abs(ratio), 0.0, 2.0);\n  if (ratio == 0.0 || ratio == 2.0) {\n    ratio = 1.0;\n  }\n  float s1, s2, x0, x1, y1;\n  if (ratio < sqrt(2.0)) {\n    s1 = radiusVar * sqrt(4.0 - ratio * ratio); // length of equal sides\n    s2 = s1 * ratio;\n    y1 = s2 / 2.0;\n    x0 = radiusVar;\n    x1 = x0 - sqrt(s1 * s1 - y1 * y1);\n  } else {\n    s2 = radiusVar * 2.0;\n    s1 = s2 / ratio;\n    y1 = s2 / 2.0;\n    x0 = sqrt(s1 * s1 - y1 * y1);\n    x1 = 0.0;\n  }\n  float B = (x0 - x1) / y1;\n  return max(x1 - pos.x, (pos.x + B * abs(pos.y) - x0) / sqrt(1.0 + B * B));\n}\n\n/* Compute the distance from a point to an oval defined by the radiusVar (the\n * semimajor axis) and ratio (between the minor and major axes).  Here an oval\n * is defined as two semicircles connected by straight line segments.\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the oval in pixels.  Negative is inside.\n */\nfloat distanceToOval(vec2 pos, float ratio) {\n  ratio = abs(ratio);\n  if (ratio == 0.0 || ratio >= 1.0) {\n    ratio = 1.0;\n  }\n  float minor = radiusVar * ratio;\n  float center = radiusVar - minor;\n  pos = abs(pos);\n  if (pos.x <= center) {\n    return pos.y - minor;\n  }\n  return distance(pos, vec2(center, 0.0)) - minor;\n}\n\n/* Compute the distance from a point to a rectangle defined by the radiusVar\n * (the semidiagonal) and ratio (between the minor and major axes).\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        float ratio: ratio of minor / major axes.\n * Exit:  float dist: the distance to the rectangle in pixels.  Negative is\n *   inside.\n */\nfloat distanceToRectangle(vec2 pos, float ratio) {\n  ratio = abs(ratio);\n  if (ratio == 0.0) {\n    ratio = 1.0;\n  }\n  vec2 wh = normalize(vec2(1.0, abs(ratio))) * radiusVar;\n  vec2 dist = abs(pos) - wh;\n  return max(dist.x, dist.y);\n}\n\n/* Based on a repetition value, return a position for rotational symmetry.\n *\n * Enter: vec2 pos: the point in pixel coordinates.\n *        int repetitions: number of repetitions on the cross.\n * Exit:  float dist: a point in the primary position.\n */\nvec2 rotationalSymmetry(vec2 pos, int repetitions) {\n  float pi = acos(-1.0);\n  float limit = pi / float(repetitions);\n  float ang = atan(pos.y, pos.x);\n  ang = mod(ang + pi * 2.0, limit * 2.0);\n  if (ang > limit) {\n    ang -= limit * 2.0;\n  }\n  return vec2(cos(ang), sin(ang)) * length(pos);\n}\n\nvoid markerFeatureFragment(vec2 pos) {\n  // rad is a value in pixels from the edge of the symbol where negative is\n  // inside the shape\n  float rad = length(pos.xy) - radiusVar;\n  // never allow points outside of the main radius\n  if (rad > 0.0) {\n    discard;\n    return;\n  }\n  // apply clockwise rotation\n  if (rotationVar != 0.0) {\n    float cosr = cos(rotationVar), sinr = sin(rotationVar);\n    pos = vec2(pos.x * cosr + pos.y * sinr, -pos.x * sinr + pos.y * cosr);\n  }\n\n  int symbol = int(floor(symbolVar / 64.0));\n  bool isimage = bool(mod(floor(symbolVar / 8.0), 2.0));\n  vec4 fillColor, strokeColor;\n  float endStep;\n\n  float ratio = symbolValueVar;\n  // When ratio is 0, it usually gets changed to 1; some shapes could have\n  // better defaults\n  /* Symbol shapes */\n  if (symbol == symbolTriangle) {\n    rad = distanceToIsoscelesTriangle(pos, ratio);\n  } else if (symbol == symbolRectangle) {\n    rad = distanceToRectangle(pos, ratio);\n  } else if (symbol == symbolOval) {\n    rad = distanceToOval(pos, ratio);\n  } else if (symbol == symbolDrop) {\n    rad = distanceToDrop(pos, ratio);\n  } else if (symbol == symbolArrow) {\n    rad = distanceToArrow(pos, ratio);\n  } else if (symbol >= symbolCrossBase && symbol <= symbolCrossBase + symbolCrossMax - 2) {\n    rad = distanceToRectangle(rotationalSymmetry(pos, symbol - symbolCrossBase + 2), ratio);\n  } else if (symbol >= symbolFlowerBase && symbol <= symbolFlowerBase + symbolFlowerMax - 2) {\n    rad = distanceToEllipse(rotationalSymmetry(pos, symbol - symbolFlowerBase + 2), ratio);\n  } else if (symbol >= symbolStarBase && symbol <= symbolStarBase + symbolStarMax - 2) {\n    rad = distanceToIsoscelesTriangle(rotationalSymmetry(pos, symbol - symbolStarBase + 2), ratio);\n  } else if (symbol >= symbolJackBase && symbol <= symbolJackBase + symbolJackMax - 2) {\n    rad = distanceToOval(rotationalSymmetry(pos, symbol - symbolJackBase + 2), ratio);\n  } else if (symbol >= symbolDropBase && symbol <= symbolDropBase + symbolDropMax - 2) {\n    rad = distanceToDrop(rotationalSymmetry(pos, symbol - symbolDropBase + 2), ratio);\n  } else if (symbol >= symbolArrowBase && symbol <= symbolArrowBase + symbolArrowMax - 2) {\n    rad = distanceToArrow(rotationalSymmetry(pos, symbol - symbolArrowBase + 2), ratio);\n  } else { // default - circle or ellipse; a value of 0 or 1 is a circle\n    if (ratio != 0.0 && ratio != 1.0) {\n      rad = distanceToEllipse(pos, ratio);\n    }\n  }\n\n  if (rad >= 0.0) {\n    discard;\n    return;\n  }\n  // If there is no stroke, the fill region should transition to nothing\n  if (strokeColorVar.a == 0.0 || strokeWidthVar <= 0.0) {\n    strokeColor = vec4(fillColorVar.rgb, 0.0);\n    endStep = 0.0;\n  } else {\n    strokeColor = strokeColorVar;\n    endStep = -strokeWidthVar;\n  }\n  // Likewise, if there is no fill, the stroke should transition to nothing\n  if (fillColorVar.a == 0.0) {\n    fillColor = vec4(strokeColorVar.rgb, 0.0);\n  } else {\n    fillColor = fillColorVar;\n  }\n  if (rad <= endStep) {\n    float step = smoothstep(endStep - antialiasDist, endStep, rad);\n    vec4 color = mix(fillColor, strokeColor, step);\n    float step2 = smoothstep(-antialiasDist, 0.0, rad);\n    gl_FragColor = mix(color, vec4(color.rgb, 0.0), step2);\n  } else {\n    float step = smoothstep(-antialiasDist, 0.0, rad);\n    gl_FragColor = mix(strokeColor, vec4(strokeColor.rgb, 0.0), step);\n  }\n}\n\n\n// the square/triangle shader defines unitVar\n\nvoid main(void) {\n  // No stroke or fill implies nothing to draw\n  if (fillColorVar.a == 0.0 && strokeColorVar.a == 0.0)\n    discard;\n  // for sprites, convert the position to [-radius,radius],[-radius,radius]\n  vec2 pos = (gl_PointCoord.xy - 0.5) * 2.0 * radiusVar;\n  markerFeatureFragment(pos);\n}\n"},function(e,t){e.exports="/* markerFeature square/triangle vertex shader */\n\n/* markerFeature common vertex shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nattribute vec3 pos;\nattribute float radius;\nattribute vec3 fillColor;\nattribute float fillOpacity;\nattribute vec3 strokeColor;\nattribute float strokeOpacity;\nattribute float strokeWidth;\nattribute float symbol;  /* contains some bit fields */\nattribute float symbolValue;\nattribute float rotation;\nuniform float zoom;\nuniform float rotationUniform;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\n// non-sprite has other definitions.\nvarying float radiusVar;\nvarying vec4 fillColorVar;\nvarying vec4 strokeColorVar;\nvarying float strokeWidthVar;\nvarying float symbolVar;  /* contains some bit fields */\nvarying float symbolValueVar;\nvarying float rotationVar;\n\nfloat markerFeaturePrep(void)\n{\n  // No stroke or fill implies nothing to draw\n  if (radius <= 0.0 || (strokeOpacity <= 0.0 && fillOpacity <= 0.0)) {\n    gl_Position = vec4(2.0, 2.0, 0.0, 1.0);\n    return 0.0;\n  }\n  radiusVar = radius;\n  strokeWidthVar = strokeWidth;\n  int scaleMode = int(mod(symbol, 4.0));\n  float strokeOffset = mod(floor(symbol / 16.0), 4.0) - 1.0;\n  radiusVar += (strokeOffset + 1.0) / 2.0 * strokeWidthVar;\n  if (scaleMode == 1) { // fill\n    radiusVar = (radiusVar - strokeWidthVar) * exp2(zoom) + strokeWidthVar;\n  } else if (scaleMode == 2) { // stroke\n    radiusVar += strokeWidthVar * (exp2(zoom) - 1.0);\n    strokeWidthVar *= exp2(zoom);\n  } else if (scaleMode == 3) { // all\n    radiusVar *= exp2(zoom);\n    strokeWidthVar *= exp2(zoom);\n  }\n  fillColorVar = vec4(fillColor, fillOpacity);\n  strokeColorVar = vec4(strokeColor, strokeOpacity);\n  symbolVar = symbol;\n  symbolValueVar = symbolValue;\n  rotationVar = rotation;\n  if (bool(mod(floor(symbolVar / 4.0), 2.0))) {\n    rotationVar += rotationUniform;\n  }\n  return radiusVar;\n}\n\n\nuniform float pixelWidth; // for non-sprite\nuniform float aspect; // for non-sprite\nattribute vec2 unit; // for non-sprite\nvarying vec2 unitVar; // for non-sprite\n\nvoid main(void)\n{\n  radiusVar = markerFeaturePrep();\n  if (radiusVar == 0.0) {\n    return;\n  }\n  // for non-sprite\n  unitVar = unit * radiusVar;\n  unitVar.y *= -1.0;\n  vec4 p = (projectionMatrix * modelViewMatrix * vec4(pos, 1.0)).xyzw;\n  if (p.w != 0.0) {\n    p = p / p.w;\n  }\n  p += radiusVar * vec4(unit.x * pixelWidth, unit.y * pixelWidth * aspect, 0.0, 1.0);\n  gl_Position = vec4(p.xyz, 1.0);\n}\n"},function(e,t){e.exports="/* markerFeature sprite vertex shader */\n\n/* markerFeature common vertex shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nattribute vec3 pos;\nattribute float radius;\nattribute vec3 fillColor;\nattribute float fillOpacity;\nattribute vec3 strokeColor;\nattribute float strokeOpacity;\nattribute float strokeWidth;\nattribute float symbol;  /* contains some bit fields */\nattribute float symbolValue;\nattribute float rotation;\nuniform float zoom;\nuniform float rotationUniform;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\n// non-sprite has other definitions.\nvarying float radiusVar;\nvarying vec4 fillColorVar;\nvarying vec4 strokeColorVar;\nvarying float strokeWidthVar;\nvarying float symbolVar;  /* contains some bit fields */\nvarying float symbolValueVar;\nvarying float rotationVar;\n\nfloat markerFeaturePrep(void)\n{\n  // No stroke or fill implies nothing to draw\n  if (radius <= 0.0 || (strokeOpacity <= 0.0 && fillOpacity <= 0.0)) {\n    gl_Position = vec4(2.0, 2.0, 0.0, 1.0);\n    return 0.0;\n  }\n  radiusVar = radius;\n  strokeWidthVar = strokeWidth;\n  int scaleMode = int(mod(symbol, 4.0));\n  float strokeOffset = mod(floor(symbol / 16.0), 4.0) - 1.0;\n  radiusVar += (strokeOffset + 1.0) / 2.0 * strokeWidthVar;\n  if (scaleMode == 1) { // fill\n    radiusVar = (radiusVar - strokeWidthVar) * exp2(zoom) + strokeWidthVar;\n  } else if (scaleMode == 2) { // stroke\n    radiusVar += strokeWidthVar * (exp2(zoom) - 1.0);\n    strokeWidthVar *= exp2(zoom);\n  } else if (scaleMode == 3) { // all\n    radiusVar *= exp2(zoom);\n    strokeWidthVar *= exp2(zoom);\n  }\n  fillColorVar = vec4(fillColor, fillOpacity);\n  strokeColorVar = vec4(strokeColor, strokeOpacity);\n  symbolVar = symbol;\n  symbolValueVar = symbolValue;\n  rotationVar = rotation;\n  if (bool(mod(floor(symbolVar / 4.0), 2.0))) {\n    rotationVar += rotationUniform;\n  }\n  return radiusVar;\n}\n\n\nvoid main(void)\n{\n  radiusVar = markerFeaturePrep();\n  if (radiusVar == 0.0) {\n    return;\n  }\n  // for sprite\n  gl_Position = (projectionMatrix * modelViewMatrix * vec4(pos, 1.0)).xyzw;\n  gl_PointSize = 2.0 * radiusVar;\n}\n"},function(e,t,n){"use strict";var r=n(3);var i=n(1);var a=n(2).registerFeature;var o=n(57);var s=n(76);var u=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}t=t||{};o.call(this,t);var i=n(41);var a=n(17);var u=n(5);var l=n(59);var c=n(266);var f=n(666);var d=n(667);var p=n(668);var h=n(669);l.call(this);var g=this,m=this._exit,v=null,y=null,b=null,M=null,x=t.dynamicDraw===undefined?false:t.dynamicDraw,w,A,T=this._init,C=this._update,S=this.updateStyleFromArray;c(g,t);function D(){var e=new i.shader(i.GL.VERTEX_SHADER);e.setShaderSource(g._primitiveShape===o.primitiveShapes.sprite?h:p);return e}function I(){var e=new i.shader(i.GL.FRAGMENT_SHADER);e.setShaderSource(g._primitiveShape===o.primitiveShapes.sprite?d:f);return e}function E(e){var t,n,r=g.data().length,i=g._pointPolygon(0,0,1,1),l=new Array(r*3),c,f,d,p,h,m,b,M,x,T,C,S,D,I,N,O,_,L,P,k,R,j,B,z,F,V,U,G,W,H=g.verticesPerFeature(),Y=g.data(),Q,q,X,K,Z,J=0,$=y.geometryData();d=g.position();M=g.style.get("radius");C=g.style.get("stroke");I=g.style.get("strokeWidth");_=g.style.get("strokeOpacity");k=g.style.get("strokeColor");B=g.style.get("fill");V=g.style.get("fillOpacity");W=g.style.get("fillColor");if(!e){for(t=Z=0;t<r;t+=1,Z+=3){f=d(Y[t],t);l[Z]=f.x;l[Z+1]=f.y;l[Z+2]=0}l=a.transformCoordinates(g.gcs(),g.layer().map().gcs(),l,3);A=new Float32Array(g.style.get("origin")(l));if(A[0]||A[1]||A[2]){for(t=Z=0;t<r;t+=1,Z+=3){l[Z]-=A[0];l[Z+1]-=A[1];l[Z+2]-=A[2]}}w.setOrigin(A);c=u.getGeomBuffer($,"pos",H*r*3);p=u.getGeomBuffer($,"unit",H*r*2);h=$.primitive(0).indices();if(!(h instanceof Uint16Array)||h.length!==H*r){h=new Uint16Array(H*r);$.primitive(0).setIndices(h)}}m=u.getGeomBuffer($,"radius",H*r);x=u.getGeomBuffer($,"stroke",H*r);S=u.getGeomBuffer($,"strokeWidth",H*r);N=u.getGeomBuffer($,"strokeOpacity",H*r);L=u.getGeomBuffer($,"strokeColor",H*r*3);R=u.getGeomBuffer($,"fill",H*r);z=u.getGeomBuffer($,"fillOpacity",H*r);U=u.getGeomBuffer($,"fillColor",H*r*3);for(t=q=X=K=Z=0;t<r;t+=1,Z+=3){Q=Y[t];if(!e){if(g._primitiveShape!==o.primitiveShapes.sprite){for(n=0;n<i.length;n+=1,K+=1){p[K]=i[n]}}}b=M(Q,t);T=C(Q,t)?1:0;D=I(Q,t);O=_(Q,t);P=k(Q,t);j=B(Q,t)?1:0;F=V(Q,t);G=W(Q,t);if(g._primitiveShapeAuto&&(j&&F||T&&O)&&b+(T&&O?D:0)>J){J=b+(T&&O?D:0)}for(n=0;n<H;n+=1,q+=1,X+=3){if(!e){c[X]=l[Z];c[X+1]=l[Z+1];c[X+2]=l[Z+2]}m[q]=b;x[q]=T;S[q]=D;N[q]=O;L[X]=P.r;L[X+1]=P.g;L[X+2]=P.b;R[q]=j;z[q]=F;U[X]=G.r;U[X+1]=G.g;U[X+2]=G.b}}if(g._primitiveShapeAuto&&(g._primitiveShape===o.primitiveShapes.sprite&&J>s._maxPointSize||g._primitiveShape!==o.primitiveShapes.sprite&&J<=s._maxPointSize)){g._primitiveShape=J>s._maxPointSize?o.primitiveShapes.triangle:o.primitiveShapes.sprite;g.renderer().contextRenderer().removeActor(v);v=null;g._init(true);E();return}if(!e){$.boundsDirty(true);y.modified();y.boundsDirtyTimestamp().modified()}else{y.updateSourceBuffer("radius");y.updateSourceBuffer("stroke");y.updateSourceBuffer("strokeWidth");y.updateSourceBuffer("strokeColor");y.updateSourceBuffer("strokeOpacity");y.updateSourceBuffer("fill");y.updateSourceBuffer("fillColor");y.updateSourceBuffer("fillOpacity")}}this.actors=function(){if(!v){return[]}return[v]};this.updateStyleFromArray=function(e,t,n){var i={fill:"bool",fillColor:3,fillOpacity:1,radius:1,stroke:"bool",strokeColor:3,strokeOpacity:1,strokeWidth:1};var a,o;if(typeof e==="string"){var s={};s[e]=t;e=s}r.each(e,function(e,t){if(g.visible()&&v&&i[e]&&!a&&!g.clustering()){var n,r,s,u,l,c,f,d,p;p=i[e]==="bool"?1:i[e];u=g.data().length;r=v.mapper();s=r.getSourceBuffer(e);n=g.verticesPerFeature();if(!s||!u||u*n*p!==s.length){a=true}else{switch(i[e]){case 1:for(c=0,d=0;c<u;c+=1){l=t[c];for(f=0;f<n;f+=1,d+=1){s[d]=l}}break;case 3:for(c=0,d=0;c<u;c+=1){l=t[c];for(f=0;f<n;f+=1,d+=3){s[d]=l.r;s[d+1]=l.g;s[d+2]=l.b}}break;case"bool":for(c=0,d=0;c<u;c+=1){l=t[c]?1:0;for(f=0;f<n;f+=1,d+=1){s[d]=l}}break}r.updateSourceBuffer(e);o=true}}else{a=true}var h=g.modified;if(!a){g.modified=function(){}}S(e,t,false);g.modified=h});if(n){if(g.visible()&&a){g.draw()}else if(o){g.renderer()._render()}}return g};this._init=function(e){var n=i.shaderProgram(),r=D(),a=I(),s=i.vertexAttribute("pos"),u=i.vertexAttribute("unit"),l=i.vertexAttribute("radius"),c=i.vertexAttribute("strokeWidth"),f=i.vertexAttribute("fillColor"),d=i.vertexAttribute("fill"),p=i.vertexAttribute("strokeColor"),h=i.vertexAttribute("stroke"),m=i.vertexAttribute("fillOpacity"),C=i.vertexAttribute("strokeOpacity"),S=new i.projectionUniform("projectionMatrix"),E=i.material(),N=i.blend(),O=i.geometryData(),_=i.sourceDataP3fv({name:"pos"}),L=i.sourceDataAnyfv(2,i.vertexAttributeKeysIndexed.One,{name:"unit"}),P=i.sourceDataAnyfv(1,i.vertexAttributeKeysIndexed.Two,{name:"radius"}),k=i.sourceDataAnyfv(1,i.vertexAttributeKeysIndexed.Three,{name:"strokeWidth"}),R=i.sourceDataAnyfv(3,i.vertexAttributeKeysIndexed.Four,{name:"fillColor"}),j=i.sourceDataAnyfv(1,i.vertexAttributeKeysIndexed.Five,{name:"fill"}),B=i.sourceDataAnyfv(3,i.vertexAttributeKeysIndexed.Six,{name:"strokeColor"}),z=i.sourceDataAnyfv(1,i.vertexAttributeKeysIndexed.Seven,{name:"stroke"}),F=i.sourceDataAnyfv(1,i.vertexAttributeKeysIndexed.Eight,{name:"fillOpacity"}),V=i.sourceDataAnyfv(1,i.vertexAttributeKeysIndexed.Nine,{name:"strokeOpacity"}),U;w=new i.modelViewOriginUniform("modelViewMatrix",A);if(g._primitiveShape===o.primitiveShapes.sprite){U=new i.points}else{U=new i.triangles}U.setIndices(new Uint16Array);b=new i.floatUniform("pixelWidth",2/g.renderer().width());M=new i.floatUniform("aspect",g.renderer().width()/g.renderer().height());if(!e){T.call(g,t)}y=i.mapper({dynamicDraw:x});n.addVertexAttribute(s,i.vertexAttributeKeys.Position);if(g._primitiveShape!==o.primitiveShapes.sprite){n.addVertexAttribute(u,i.vertexAttributeKeysIndexed.One)}n.addVertexAttribute(l,i.vertexAttributeKeysIndexed.Two);n.addVertexAttribute(c,i.vertexAttributeKeysIndexed.Three);n.addVertexAttribute(f,i.vertexAttributeKeysIndexed.Four);n.addVertexAttribute(d,i.vertexAttributeKeysIndexed.Five);n.addVertexAttribute(p,i.vertexAttributeKeysIndexed.Six);n.addVertexAttribute(h,i.vertexAttributeKeysIndexed.Seven);n.addVertexAttribute(m,i.vertexAttributeKeysIndexed.Eight);n.addVertexAttribute(C,i.vertexAttributeKeysIndexed.Nine);n.addUniform(b);n.addUniform(M);n.addUniform(w);n.addUniform(S);n.addShader(a);n.addShader(r);E.addAttribute(n);E.addAttribute(N);v=i.actor();v.setMaterial(E);v.setMapper(y);O.addSource(_);O.addSource(L);O.addSource(P);O.addSource(k);O.addSource(R);O.addSource(j);O.addSource(B);O.addSource(z);O.addSource(F);O.addSource(V);O.addPrimitive(U);O.computeBounds=function(){O.setBounds(0,0,0,0,0,0)};y.setGeometryData(O)};this._build=function(){E(g.dataTime().timestamp()<g.buildTime().timestamp());if(!g.renderer().contextRenderer().hasActor(v)){g.renderer().contextRenderer().addActor(v)}g.buildTime().modified();return g};this._update=function(){C.call(g);if(g.dataTime().timestamp()>=g.buildTime().timestamp()||g.updateTime().timestamp()<g.timestamp()){g._build()}b.set(2/g.renderer().width());M.set(g.renderer().width()/g.renderer().height());v.setVisible(g.visible());v.material().setBinNumber(g.bin());g.updateTime().modified();return g};this._exit=function(){g.renderer().contextRenderer().removeActor(v);v=null;m()};g._init();return this};i(u,o);var l={};l[o.capabilities.stroke]=true;a("webgl","point",u,l);e.exports=u},function(e,t){e.exports="/* pointFeature square/triangle fragment shader */\n\n/* pointFeature common fragment shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nvarying vec4 fillColorVar;\nvarying vec4 strokeColorVar;\nvarying float radiusVar;\nvarying float strokeWidthVar;\n\nvoid pointFeatureFragment(float rad) {\n  vec4 strokeColor, fillColor;\n  float endStep;\n  // No stroke or fill implies nothing to draw\n  if (rad > 1.0)\n    discard;\n  // If there is no stroke, the fill region should transition to nothing\n  if (strokeColorVar.a == 0.0) {\n    strokeColor = vec4(fillColorVar.rgb, 0.0);\n    endStep = 1.0;\n  } else {\n    strokeColor = strokeColorVar;\n    endStep = radiusVar / (radiusVar + strokeWidthVar);\n  }\n  // Likewise, if there is no fill, the stroke should transition to nothing\n  if (fillColorVar.a == 0.0)\n    fillColor = vec4(strokeColor.rgb, 0.0);\n  else\n    fillColor = fillColorVar;\n  // Distance to antialias over.  First number is in pixels\n  float antialiasDist = 1.5 / (radiusVar + strokeWidthVar);\n  if (rad < endStep) {\n    float step = smoothstep(max(0.0, endStep - antialiasDist), endStep, rad);\n    vec4 color = mix(fillColor, strokeColor, step);\n    float step2 = smoothstep(max(0.0, 1.0 - antialiasDist), 1.0, rad);\n    gl_FragColor = mix(color, vec4(color.rgb, 0.0), step2);\n  } else {\n    float step = smoothstep(max(0.0, 1.0 - antialiasDist), 1.0, rad);\n    gl_FragColor = mix(strokeColor, vec4(strokeColor.rgb, 0.0), step);\n  }\n}\n\n\nvarying vec3 unitVar;  // distinct for square/triangle\n\nvoid main () {\n  if (fillColorVar.a == 0.0 && strokeColorVar.a == 0.0)\n    discard;\n  float rad = length(unitVar.xy); // distinct for square/triangle\n  pointFeatureFragment(rad);\n}\n"},function(e,t){e.exports="/* pointFeature sprite fragment shader */\n\n/* pointFeature common fragment shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nvarying vec4 fillColorVar;\nvarying vec4 strokeColorVar;\nvarying float radiusVar;\nvarying float strokeWidthVar;\n\nvoid pointFeatureFragment(float rad) {\n  vec4 strokeColor, fillColor;\n  float endStep;\n  // No stroke or fill implies nothing to draw\n  if (rad > 1.0)\n    discard;\n  // If there is no stroke, the fill region should transition to nothing\n  if (strokeColorVar.a == 0.0) {\n    strokeColor = vec4(fillColorVar.rgb, 0.0);\n    endStep = 1.0;\n  } else {\n    strokeColor = strokeColorVar;\n    endStep = radiusVar / (radiusVar + strokeWidthVar);\n  }\n  // Likewise, if there is no fill, the stroke should transition to nothing\n  if (fillColorVar.a == 0.0)\n    fillColor = vec4(strokeColor.rgb, 0.0);\n  else\n    fillColor = fillColorVar;\n  // Distance to antialias over.  First number is in pixels\n  float antialiasDist = 1.5 / (radiusVar + strokeWidthVar);\n  if (rad < endStep) {\n    float step = smoothstep(max(0.0, endStep - antialiasDist), endStep, rad);\n    vec4 color = mix(fillColor, strokeColor, step);\n    float step2 = smoothstep(max(0.0, 1.0 - antialiasDist), 1.0, rad);\n    gl_FragColor = mix(color, vec4(color.rgb, 0.0), step2);\n  } else {\n    float step = smoothstep(max(0.0, 1.0 - antialiasDist), 1.0, rad);\n    gl_FragColor = mix(strokeColor, vec4(strokeColor.rgb, 0.0), step);\n  }\n}\n\n\n// the square/triangle shader defines unitVar\n\nvoid main () {\n  // No stroke or fill implies nothing to draw\n  if (fillColorVar.a == 0.0 && strokeColorVar.a == 0.0)\n    discard;\n  float rad = 2.0 * length(gl_PointCoord - vec2(0.5));  // distinct for sprite\n  pointFeatureFragment(rad);\n}\n"},function(e,t){e.exports="/* pointFeature square/triangle vertex shader */\n\n/* pointFeature common vertex shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nattribute vec3 pos;\nattribute float radius;\nattribute vec3 fillColor;\nattribute vec3 strokeColor;\nattribute float fillOpacity;\nattribute float strokeWidth;\nattribute float strokeOpacity;\nattribute float fill;\nattribute float stroke;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nvarying vec4 fillColorVar;\nvarying vec4 strokeColorVar;\nvarying float radiusVar;\nvarying float strokeWidthVar;\n\nfloat pointFeaturePrep() {\n  strokeWidthVar = strokeWidth;\n  fillColorVar = vec4(fillColor, fillOpacity);\n  strokeColorVar = vec4(strokeColor, strokeOpacity);\n  // No stroke or fill implies nothing to draw\n  if (stroke < 1.0 || strokeWidth <= 0.0 || strokeOpacity <= 0.0) {\n    strokeColorVar.a = 0.0;\n    strokeWidthVar = 0.0;\n  }\n  if (fill < 1.0 || radius <= 0.0 || fillOpacity <= 0.0)\n    fillColorVar.a = 0.0;\n  /* If the point has no visible pixels, skip doing computations on it. */\n  if (fillColorVar.a == 0.0 && strokeColorVar.a == 0.0) {\n    gl_Position = vec4(2, 2, 0, 1);\n    return 0.0;\n  }\n  return radius;\n}\n\n\nuniform float pixelWidth; // for non-sprite\nuniform float aspect; // for non-sprite\nattribute vec2 unit; // for non-sprite\nvarying vec3 unitVar; // for non-sprite\n\nvoid main(void)\n{\n  radiusVar = pointFeaturePrep();\n  if (radiusVar == 0.0) {\n    return;\n  }\n  // for non-sprite\n  unitVar = vec3(unit, 1.0);\n  vec4 p = (projectionMatrix * modelViewMatrix * vec4(pos, 1.0)).xyzw;\n  if (p.w != 0.0) {\n    p = p / p.w;\n  }\n  p += (radius + strokeWidthVar) *\n       vec4(unit.x * pixelWidth, unit.y * pixelWidth * aspect, 0.0, 1.0);\n  gl_Position = vec4(p.xyz, 1.0);\n}\n"},function(e,t){e.exports="/* pointFeature sprite vertex shader */\n\n/* pointFeature common vertex shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nattribute vec3 pos;\nattribute float radius;\nattribute vec3 fillColor;\nattribute vec3 strokeColor;\nattribute float fillOpacity;\nattribute float strokeWidth;\nattribute float strokeOpacity;\nattribute float fill;\nattribute float stroke;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nvarying vec4 fillColorVar;\nvarying vec4 strokeColorVar;\nvarying float radiusVar;\nvarying float strokeWidthVar;\n\nfloat pointFeaturePrep() {\n  strokeWidthVar = strokeWidth;\n  fillColorVar = vec4(fillColor, fillOpacity);\n  strokeColorVar = vec4(strokeColor, strokeOpacity);\n  // No stroke or fill implies nothing to draw\n  if (stroke < 1.0 || strokeWidth <= 0.0 || strokeOpacity <= 0.0) {\n    strokeColorVar.a = 0.0;\n    strokeWidthVar = 0.0;\n  }\n  if (fill < 1.0 || radius <= 0.0 || fillOpacity <= 0.0)\n    fillColorVar.a = 0.0;\n  /* If the point has no visible pixels, skip doing computations on it. */\n  if (fillColorVar.a == 0.0 && strokeColorVar.a == 0.0) {\n    gl_Position = vec4(2, 2, 0, 1);\n    return 0.0;\n  }\n  return radius;\n}\n\n\nvoid main(void)\n{\n  radiusVar = pointFeaturePrep();\n  if (radiusVar == 0.0) {\n    return;\n  }\n  // for sprite\n  gl_Position = (projectionMatrix * modelViewMatrix * vec4(pos, 1.0)).xyzw;\n  gl_PointSize = 2.0 * (radius + strokeWidthVar);\n}\n"},function(e,t,n){"use strict";var r=n(1);var i=n(2).registerFeature;var a=n(145);var o=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}t=t||{};a.call(this,t);var r=n(41);var i=n(671);var o=n(17);var s=n(5);var u=n(59);var l=n(672);var c=n(673);u.call(this);var f=this,d=this._exit,p=r.actor(),h=r.mapper(),g=r.material(),m,v,y,b=this._init,M=this._update,x,w;function A(){var e=new r.shader(r.GL.VERTEX_SHADER);e.setShaderSource(c);return e}function T(){var e=new r.shader(r.GL.FRAGMENT_SHADER);e.setShaderSource(l);return e}function C(e){var t,n,r,a,u,l,c,d,p,g,b,M,x,w,A=[],T=f.gcs(),C=f.layer().map().gcs(),S=0,D=h.geometryData(),I,E,N,O,_,L,P,k,R,j,B,z,F,V;u=f.style.get("fillColor");l=s.isFunction(f.style("fillColor"))?undefined:u();d=f.style.get("fillOpacity");p=s.isFunction(f.style("fillOpacity"))?undefined:d();g=f.style.get("fill");b=s.isFunction(f.style("fill"))?undefined:g();M=f.style.get("uniformPolygon");if(!e){n=f.style.get("position");r=f.style.get("polygon");f.data().forEach(function(e,t){var a,s,u,l;a=r(e,t);if(!a){return}s=a.outer||(Array.isArray(a)?a:[]);if(s.length<3){return}u=new Array(s.length*3);for(P=_=0;P<s.length;P+=1,_+=3){l=n(s[P],P,e,t);u[_]=l.x;u[_+1]=l.y;u[_+2]=0}u={vertices:u,dimensions:3,holes:[]};V=s;if(a.inner){a.inner.forEach(function(r){if(r.length<3){return}V=V.concat(r);u.holes.push(_/3);for(P=0;P<r.length;P+=1,_+=3){l=n(r[P],P,e,t);u.vertices[_]=l.x;u.vertices[_+1]=l.y;u.vertices[_+2]=0}})}u.vertices=o.transformCoordinates(T,C,u.vertices,u.dimensions);B={triangles:i(u.vertices,u.holes,u.dimensions),vertices:u.vertices,original:V,item:e,itemIndex:t};if(B.triangles.length){A.push(B);S+=B.triangles.length}});t=s.getGeomBuffer(D,"pos",S*3);w=D.primitive(0).indices();if(!(w instanceof Uint16Array)||w.length!==S){w=new Uint16Array(S);D.primitive(0).setIndices(w)}m={items:A,numPts:S};v=new Float32Array(f.style.get("origin")(A));y.setOrigin(v)}else{A=m.items;S=m.numPts}a=s.getGeomBuffer(D,"fillColor",S*3);c=s.getGeomBuffer(D,"fillOpacity",S);O=_=0;I=l;N=b;for(R=0;R<A.length;R+=1){j=A[R].triangles.length;L=A[R].vertices;z=A[R].item;F=A[R].itemIndex;V=A[R].original;x=M(z,F);E=p;if(x){if(l===undefined){I=u(L[0],0,z,F)}if(p===undefined){E=d(L[0],0,z,F)}}if(b===undefined){N=g(z,F)}if(!N){E=0}if(x&&e&&A[R].uniform&&A[R].color&&I.r===A[R].color.r&&I.g===A[R].color.g&&I.b===A[R].color.b&&E===A[R].opacity){O+=j;_+=j*3;continue}for(P=0;P<j;P+=1,O+=1,_+=3){if(e&&x){a[_]=I.r;a[_+1]=I.g;a[_+2]=I.b;c[O]=E}else{k=A[R].triangles[P]*3;if(!e){t[_]=L[k]-v[0];t[_+1]=L[k+1]-v[1];t[_+2]=L[k+2]-v[2];w[O]=P}if(!x&&l===undefined){I=u(V[k],k,z,F)}a[_]=I.r;a[_+1]=I.g;a[_+2]=I.b;if(!x&&N&&p===undefined){E=d(V[k],k,z,F)}c[O]=E}}if(x||A[R].uniform){A[R].uniform=x;A[R].color=I;A[R].opacity=E}}if(!e){h.modified();D.boundsDirty(true);h.boundsDirtyTimestamp().modified()}else{h.updateSourceBuffer("fillOpacity");h.updateSourceBuffer("fillColor")}}this._init=function(e){var t=r.shaderProgram(),n=r.vertexAttribute("pos"),i=r.vertexAttribute("fillColor"),a=r.vertexAttribute("fillOpacity"),o=new r.projectionUniform("projectionMatrix"),s=A(),u=T(),l=r.blend(),c=r.geometryData(),d=r.sourceDataP3fv({name:"pos"}),m=r.sourceDataAnyfv(3,r.vertexAttributeKeysIndexed.Two,{name:"fillColor"}),v=r.sourceDataAnyfv(1,r.vertexAttributeKeysIndexed.Three,{name:"fillOpacity"}),M=r.triangles();y=new r.modelViewOriginUniform("modelViewMatrix");t.addVertexAttribute(n,r.vertexAttributeKeys.Position);t.addVertexAttribute(i,r.vertexAttributeKeysIndexed.Two);t.addVertexAttribute(a,r.vertexAttributeKeysIndexed.Three);t.addUniform(y);t.addUniform(o);t.addShader(u);t.addShader(s);g.addAttribute(t);g.addAttribute(l);p.setMaterial(g);p.setMapper(h);c.addSource(d);c.addSource(m);c.addSource(v);c.addPrimitive(M);c.computeBounds=function(){c.setBounds(0,0,0,0,0,0)};h.setGeometryData(c);b.call(f,e)};this.actors=function(){return[p]};this._build=function(){C(!!(f.dataTime().timestamp()<f.buildTime().timestamp()&&m));if(!f.renderer().contextRenderer().hasActor(p)){f.renderer().contextRenderer().addActor(p);x=true}f.buildTime().modified()};this._update=function(e){if(!f.ready){return}if(e&&e.mayDelay&&x){w=f.layer().map().scheduleAnimationFrame(f._update);return}if(w){f.layer().map().scheduleAnimationFrame(f._update,"remove");w=null}M.call(f);if(f.dataTime().timestamp()>=f.buildTime().timestamp()||f.updateTime().timestamp()<=f.timestamp()){f._build()}p.setVisible(f.visible());p.material().setBinNumber(f.bin());f.updateTime().modified()};this._exit=function(){if(w&&f.layer()){f.layer().map().scheduleAnimationFrame(f._update,"remove");w=null}f.renderer().contextRenderer().removeActor(p);d()};this._init(t);return this};r(o,a);i("webgl","polygon",o);e.exports=o},function(e,t,n){"use strict";e.exports=r;e.exports.default=r;function r(e,t,n){n=n||2;var r=t&&t.length,a=r?t[0]*n:e.length,s=i(e,0,a,n,true),u=[];if(!s||s.next===s.prev)return u;var l,c,d,p,h,g,m;if(r)s=f(e,t,s,n);if(e.length>80*n){l=d=e[0];c=p=e[1];for(var v=n;v<a;v+=n){h=e[v];g=e[v+1];if(h<l)l=h;if(g<c)c=g;if(h>d)d=h;if(g>p)p=g}m=Math.max(d-l,p-c);m=m!==0?1/m:0}o(s,u,n,l,c,m);return u}function i(e,t,n,r,i){var a,o;if(i===O(e,t,n,r)>0){for(a=t;a<n;a+=r)o=I(a,e[a],e[a+1],o)}else{for(a=n-r;a>=t;a-=r)o=I(a,e[a],e[a+1],o)}if(o&&w(o,o.next)){E(o);o=o.next}return o}function a(e,t){if(!e)return e;if(!t)t=e;var n=e,r;do{r=false;if(!n.steiner&&(w(n,n.next)||x(n.prev,n,n.next)===0)){E(n);n=t=n.prev;if(n===n.next)break;r=true}else{n=n.next}}while(r||n!==t);return t}function o(e,t,n,r,i,f,d){if(!e)return;if(!d&&f)g(e,r,i,f);var p=e,h,m;while(e.prev!==e.next){h=e.prev;m=e.next;if(f?u(e,r,i,f):s(e)){t.push(h.i/n);t.push(e.i/n);t.push(m.i/n);E(e);e=m.next;p=m.next;continue}e=m;if(e===p){if(!d){o(a(e),t,n,r,i,f,1)}else if(d===1){e=l(e,t,n);o(e,t,n,r,i,f,2)}else if(d===2){c(e,t,n,r,i,f)}break}}}function s(e){var t=e.prev,n=e,r=e.next;if(x(t,n,r)>=0)return false;var i=e.next.next;while(i!==e.prev){if(b(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&x(i.prev,i,i.next)>=0)return false;i=i.next}return true}function u(e,t,n,r){var i=e.prev,a=e,o=e.next;if(x(i,a,o)>=0)return false;var s=i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,u=i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,l=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,c=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y;var f=v(s,u,t,n,r),d=v(l,c,t,n,r);var p=e.prevZ,h=e.nextZ;while(p&&p.z>=f&&h&&h.z<=d){if(p!==e.prev&&p!==e.next&&b(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&x(p.prev,p,p.next)>=0)return false;p=p.prevZ;if(h!==e.prev&&h!==e.next&&b(i.x,i.y,a.x,a.y,o.x,o.y,h.x,h.y)&&x(h.prev,h,h.next)>=0)return false;h=h.nextZ}while(p&&p.z>=f){if(p!==e.prev&&p!==e.next&&b(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&x(p.prev,p,p.next)>=0)return false;p=p.prevZ}while(h&&h.z<=d){if(h!==e.prev&&h!==e.next&&b(i.x,i.y,a.x,a.y,o.x,o.y,h.x,h.y)&&x(h.prev,h,h.next)>=0)return false;h=h.nextZ}return true}function l(e,t,n){var r=e;do{var i=r.prev,a=r.next.next;if(!w(i,a)&&A(i,r,r.next,a)&&C(i,a)&&C(a,i)){t.push(i.i/n);t.push(r.i/n);t.push(a.i/n);E(r);E(r.next);r=e=a}r=r.next}while(r!==e);return r}function c(e,t,n,r,i,s){var u=e;do{var l=u.next.next;while(l!==u.prev){if(u.i!==l.i&&M(u,l)){var c=D(u,l);u=a(u,u.next);c=a(c,c.next);o(u,t,n,r,i,s);o(c,t,n,r,i,s);return}l=l.next}u=u.next}while(u!==e)}function f(e,t,n,r){var o=[],s,u,l,c,f;for(s=0,u=t.length;s<u;s++){l=t[s]*r;c=s<u-1?t[s+1]*r:e.length;f=i(e,l,c,r,false);if(f===f.next)f.steiner=true;o.push(y(f))}o.sort(d);for(s=0;s<o.length;s++){p(o[s],n);n=a(n,n.next)}return n}function d(e,t){return e.x-t.x}function p(e,t){t=h(e,t);if(t){var n=D(t,e);a(n,n.next)}}function h(e,t){var n=t,r=e.x,i=e.y,a=-Infinity,o;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){var s=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=r&&s>a){a=s;if(s===r){if(i===n.y)return n;if(i===n.next.y)return n.next}o=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!o)return null;if(r===a)return o.prev;var u=o,l=o.x,c=o.y,f=Infinity,d;n=o.next;while(n!==u){if(r>=n.x&&n.x>=l&&r!==n.x&&b(i<c?r:a,i,l,c,i<c?a:r,i,n.x,n.y)){d=Math.abs(i-n.y)/(r-n.x);if((d<f||d===f&&n.x>o.x)&&C(n,e)){o=n;f=d}}n=n.next}return o}function g(e,t,n,r){var i=e;do{if(i.z===null)i.z=v(i.x,i.y,t,n,r);i.prevZ=i.prev;i.nextZ=i.next;i=i.next}while(i!==e);i.prevZ.nextZ=null;i.prevZ=null;m(i)}function m(e){var t,n,r,i,a,o,s,u,l=1;do{n=e;e=null;a=null;o=0;while(n){o++;r=n;s=0;for(t=0;t<l;t++){s++;r=r.nextZ;if(!r)break}u=l;while(s>0||u>0&&r){if(s!==0&&(u===0||!r||n.z<=r.z)){i=n;n=n.nextZ;s--}else{i=r;r=r.nextZ;u--}if(a)a.nextZ=i;else e=i;i.prevZ=a;a=i}n=r}a.nextZ=null;l*=2}while(o>1);return e}function v(e,t,n,r,i){e=32767*(e-n)*i;t=32767*(t-r)*i;e=(e|e<<8)&16711935;e=(e|e<<4)&252645135;e=(e|e<<2)&858993459;e=(e|e<<1)&1431655765;t=(t|t<<8)&16711935;t=(t|t<<4)&252645135;t=(t|t<<2)&858993459;t=(t|t<<1)&1431655765;return e|t<<1}function y(e){var t=e,n=e;do{if(t.x<n.x||t.x===n.x&&t.y<n.y)n=t;t=t.next}while(t!==e);return n}function b(e,t,n,r,i,a,o,s){return(i-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(r-s)-(n-o)*(t-s)>=0&&(n-o)*(a-s)-(i-o)*(r-s)>=0}function M(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!T(e,t)&&C(e,t)&&C(t,e)&&S(e,t)}function x(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function w(e,t){return e.x===t.x&&e.y===t.y}function A(e,t,n,r){if(w(e,t)&&w(n,r)||w(e,r)&&w(n,t))return true;return x(e,t,n)>0!==x(e,t,r)>0&&x(n,r,e)>0!==x(n,r,t)>0}function T(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&A(n,n.next,e,t))return true;n=n.next}while(n!==e);return false}function C(e,t){return x(e.prev,e,e.next)<0?x(e,t,e.next)>=0&&x(e,e.prev,t)>=0:x(e,t,e.prev)<0||x(e,e.next,t)<0}function S(e,t){var n=e,r=false,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{if(n.y>a!==n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x)r=!r;n=n.next}while(n!==e);return r}function D(e,t){var n=new N(e.i,e.x,e.y),r=new N(t.i,t.x,t.y),i=e.next,a=t.prev;e.next=t;t.prev=e;n.next=i;i.prev=n;r.next=n;n.prev=r;a.next=r;r.prev=a;return r}function I(e,t,n,r){var i=new N(e,t,n);if(!r){i.prev=i;i.next=i}else{i.next=r.next;i.prev=r;r.next.prev=i;r.next=i}return i}function E(e){e.next.prev=e.prev;e.prev.next=e.next;if(e.prevZ)e.prevZ.nextZ=e.nextZ;if(e.nextZ)e.nextZ.prevZ=e.prevZ}function N(e,t,n){this.i=e;this.x=t;this.y=n;this.prev=null;this.next=null;this.z=null;this.prevZ=null;this.nextZ=null;this.steiner=false}r.deviation=function(e,t,n,r){var i=t&&t.length;var a=i?t[0]*n:e.length;var o=Math.abs(O(e,0,a,n));if(i){for(var s=0,u=t.length;s<u;s++){var l=t[s]*n;var c=s<u-1?t[s+1]*n:e.length;o-=Math.abs(O(e,l,c,n))}}var f=0;for(s=0;s<r.length;s+=3){var d=r[s]*n;var p=r[s+1]*n;var h=r[s+2]*n;f+=Math.abs((e[d]-e[h])*(e[p+1]-e[d+1])-(e[d]-e[p])*(e[h+1]-e[d+1]))}return o===0&&f===0?0:Math.abs((f-o)/o)};function O(e,t,n,r){var i=0;for(var a=t,o=n-r;a<n;a+=r){i+=(e[o]-e[a])*(e[a+1]+e[o+1]);o=a}return i}r.flatten=function(e){var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0;for(var i=0;i<e.length;i++){for(var a=0;a<e[i].length;a++){for(var o=0;o<t;o++)n.vertices.push(e[i][a][o])}if(i>0){r+=e[i-1].length;n.holes.push(r)}}return n}},function(e,t){e.exports="/* polygonFeature fragment shader */\n\n#ifdef GL_ES\n  precision highp float;\n#endif\nvarying vec4 fillColorVar;\n\nvoid main () {\n  gl_FragColor = fillColorVar;\n}\n"},function(e,t){e.exports="/* polygonFeature vertex shader */\n\nattribute vec3 pos;\nattribute vec3 fillColor;\nattribute float fillOpacity;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nvarying vec4 fillColorVar;\n\nvoid main(void)\n{\n  vec4 clipPos = projectionMatrix * modelViewMatrix * vec4(pos.xyz, 1.0);\n  if (clipPos.w != 0.0) {\n    clipPos = clipPos/clipPos.w;\n  }\n  fillColorVar = vec4(fillColor, fillOpacity);\n  gl_Position = clipPos;\n}\n"},function(e,t,n){"use strict";var r=n(1);var i=n(2).registerFeature;var a=n(66);var o=n(20);var s=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}a.call(this,t);var r=n(3);var i=n(41);var s=n(59);var u=n(675);var l=n(676);var c=n(677);var f=n(678);s.call(this);var d=this,p=this._exit,h=this._update,g,m,v,y={},b,M,x,w=o(),A=o(),T;function C(e){var t=e.m_context,n=false;if(T.imgQuads.length){if(!b||b.length<T.imgQuads.length*12||!y.imgQuadsPosition){if(y.imgQuadsPosition){t.deleteBuffer(y.imgQuadsPosition)}y.imgQuadsPosition=t.createBuffer();b=new Float32Array(Math.max(128,T.imgQuads.length*2)*12);n=true}r.each(T.imgQuads,function(e,t){for(var n=0;n<12;n+=1){b[e*12+n]=t.pos[n]-T.origin[n%3]}});t.bindBuffer(t.ARRAY_BUFFER,y.imgQuadsPosition);if(n){t.bufferData(t.ARRAY_BUFFER,b,t.DYNAMIC_DRAW)}else{t.bufferSubData(t.ARRAY_BUFFER,0,b)}}w.modified()}function S(e){var t=e.m_context,n=false;if(T.clrQuads.length){if(!M||M.length<T.clrQuads.length*12||!y.clrQuadsPosition){if(y.clrQuadsPosition){t.deleteBuffer(y.clrQuadsPosition)}y.clrQuadsPosition=t.createBuffer();M=new Float32Array(Math.max(128,T.clrQuads.length*2)*12);n=true}r.each(T.clrQuads,function(e,t){for(var n=0;n<12;n+=1){M[e*12+n]=t.pos[n]-T.origin[n%3]}});t.bindBuffer(t.ARRAY_BUFFER,y.clrQuadsPosition);if(n){t.bufferData(t.ARRAY_BUFFER,M,t.DYNAMIC_DRAW)}else{t.bufferSubData(t.ARRAY_BUFFER,0,M)}}A.modified()}function D(e){var t=new i.mapper({dynamicDraw:true});t.s_modified=t.modified;t.g_timestamp=o();t.timestamp=t.g_timestamp.timestamp;t.modified=function(){t.s_modified();t.g_timestamp.modified();return t};t.s_render=t.render;t.render=e;return t}this.actors=function(){var e=[];if(m){e.push(m)}if(v){e.push(v)}return e};this._build=function(){var e,t,n,r,a,o,s;if(!d.position()){return}T=d._generateQuads();if(T.imgQuads.length&&!m){d.visible(false);e=D(d._renderImageQuads);m=new i.actor;m.setMapper(e);t=new i.material;n=new i.shaderProgram;n.addVertexAttribute(new i.vertexAttribute("vertexPosition"),i.vertexAttributeKeys.Position);n.addVertexAttribute(new i.vertexAttribute("textureCoord"),i.vertexAttributeKeys.TextureCoordinate);g=new i.modelViewOriginUniform("modelViewMatrix",T.origin);n.addUniform(g);n.addUniform(new i.projectionUniform("projectionMatrix"));n.addUniform(new i.floatUniform("opacity",1));n.addUniform(new i.floatUniform("zOffset",0));s=d.renderer()._glContext();a=new i.uniform(s.FLOAT_VEC2,"crop");a.set([1,1]);n.addUniform(a);n.addShader(i.getCachedShader(s.VERTEX_SHADER,s,l));n.addShader(i.getCachedShader(s.FRAGMENT_SHADER,s,u));t.addAttribute(n);t.addAttribute(new i.blend);o=new i.geometryData;b=undefined;r=new i.sourceDataT2fv;r.pushBack([0,0,1,0,0,1,1,1]);o.addSource(r);e.setGeometryData(o);m.setMaterial(t);d.renderer().contextRenderer().addActor(m);d.visible(true)}if(T.clrQuads.length&&!v){d.visible(false);e=D(d._renderColorQuads);v=new i.actor;v.setMapper(e);t=new i.material;n=new i.shaderProgram;n.addVertexAttribute(new i.vertexAttribute("vertexPosition"),i.vertexAttributeKeys.Position);x=new i.modelViewOriginUniform("modelViewMatrix",T.origin);n.addUniform(x);n.addUniform(new i.projectionUniform("projectionMatrix"));n.addUniform(new i.floatUniform("opacity",1));n.addUniform(new i.floatUniform("zOffset",0));s=d.renderer()._glContext();n.addUniform(new i.uniform(s.FLOAT_VEC3,"vertexColor"));n.addShader(i.getCachedShader(s.VERTEX_SHADER,s,f));n.addShader(i.getCachedShader(s.FRAGMENT_SHADER,s,c));t.addAttribute(n);t.addAttribute(new i.blend);o=new i.geometryData;M=undefined;e.setGeometryData(o);v.setMaterial(t);d.renderer().contextRenderer().addActor(v);d.visible(true)}if(g){g.setOrigin(T.origin)}if(x){x.setOrigin(T.origin)}d._updateTextures();d.buildTime().modified()};this._updateTextures=function(){var e;r.each(T.imgQuads,function(t,n){if(!n.image){return}if(n.image._texture){n.texture=n.image._texture}else{e=new i.texture;e.setImage(n.image);n.texture=n.image._texture=e}})};this._renderColorQuads=function(e){if(!T.clrQuads.length){return}var t=this;if(t.timestamp()>A.timestamp()||d.dataTime().timestamp()>A.timestamp()||e.m_contextChanged||!M||T.clrQuads.length*12>M.length){S(e)}t.s_render(e,true);var n=e.m_context,a,o,s;n.bindBuffer(n.ARRAY_BUFFER,y.clrQuadsPosition);r.each(T.clrQuads,function(t,r){if(r.opacity!==a){a=r.opacity;n.uniform1fv(e.m_material.shaderProgram().uniformLocation("opacity"),new Float32Array([a]))}if((r.zOffset||0)!==o){o=r.zOffset||0;n.uniform1fv(e.m_material.shaderProgram().uniformLocation("zOffset"),new Float32Array([o]))}if(!s||s.r!==r.color.r||s.g!==r.color.g||s.b!==r.color.b){s=r.color;n.uniform3fv(e.m_material.shaderProgram().uniformLocation("vertexColor"),new Float32Array([s.r,s.g,s.b]))}n.bindBuffer(n.ARRAY_BUFFER,y.clrQuadsPosition);n.vertexAttribPointer(i.vertexAttributeKeys.Position,3,n.FLOAT,false,12,t*12*4);n.enableVertexAttribArray(i.vertexAttributeKeys.Position);n.drawArrays(n.TRIANGLE_STRIP,0,4)});n.bindBuffer(n.ARRAY_BUFFER,null);t.undoBindVertexData(e)};this._renderImageQuads=function(e){if(!T.imgQuads.length){return}var t=this;if(t.timestamp()>w.timestamp()||d.dataTime().timestamp()>w.timestamp()||e.m_contextChanged||!b||T.imgQuads.length*12>b.length){C(e)}t.s_render(e,true);var n=e.m_context,a,o,s={x:1,y:1},u;n.bindBuffer(n.ARRAY_BUFFER,y.imgQuadsPosition);r.each(T.imgQuads,function(t,r){if(!r.image){return}r.texture.bind(e);if(r.opacity!==a){a=r.opacity;n.uniform1fv(e.m_material.shaderProgram().uniformLocation("opacity"),new Float32Array([a]))}if((r.zOffset||0)!==o){o=r.zOffset||0;n.uniform1fv(e.m_material.shaderProgram().uniformLocation("zOffset"),new Float32Array([o]))}u=r.crop||{x:1,y:1};if(!s||u.x!==s.x||u.y!==s.y){s=u;n.uniform2fv(e.m_material.shaderProgram().uniformLocation("crop"),new Float32Array([s.x,s.y]))}n.bindBuffer(n.ARRAY_BUFFER,y.imgQuadsPosition);n.vertexAttribPointer(i.vertexAttributeKeys.Position,3,n.FLOAT,false,12,t*12*4);n.enableVertexAttribArray(i.vertexAttributeKeys.Position);n.drawArrays(n.TRIANGLE_STRIP,0,4);r.texture.undoBind(e)});n.bindBuffer(n.ARRAY_BUFFER,null);t.undoBindVertexData(e)};this._update=function(){h.call(d);if(d.buildTime().timestamp()<=d.dataTime().timestamp()||d.updateTime().timestamp()<d.timestamp()){d._build()}if(v){v.setVisible(d.visible());v.material().setBinNumber(d.bin())}if(m){m.setVisible(d.visible());m.material().setBinNumber(d.bin())}d.updateTime().modified()};this._cleanup=function(){if(m){d.renderer().contextRenderer().removeActor(m);m=null}if(v){d.renderer().contextRenderer().removeActor(v);v=null}b=undefined;M=undefined;Object.keys(y).forEach(function(e){delete y[e]});if(T&&T.imgQuads){T.imgQuads.forEach(function(e){if(e.texture){delete e.texture;delete e.image._texture}});d._updateTextures()}d.modified()};this._exit=function(){d._cleanup();p.call(d)};d._init(t);return this};r(s,a);var u={};u[a.capabilities.color]=true;u[a.capabilities.image]=true;u[a.capabilities.imageCrop]=true;u[a.capabilities.imageFixedScale]=false;u[a.capabilities.imageFull]=true;u[a.capabilities.canvas]=false;u[a.capabilities.video]=false;i("webgl","quad",s,u);e.exports=s},function(e,t){e.exports="/* quadFeature Image fragment shader */\n\nvarying highp vec2 iTextureCoord;\nuniform sampler2D sampler2d;\nuniform mediump float opacity;\nuniform highp vec2 crop;\n\nvoid main(void) {\n  mediump vec4 color = texture2D(sampler2d, iTextureCoord);\n  if ((crop.s < 1.0 && iTextureCoord.s > crop.s) || (crop.t < 1.0 && 1.0 - iTextureCoord.t > crop.t)) {\n    discard;\n  }\n  color.w *= opacity;\n  gl_FragColor = color;\n}\n\n"},function(e,t){e.exports="/* quadFeature Image vertex shader */\n\nattribute vec3 vertexPosition;\nattribute vec2 textureCoord;\nuniform float zOffset;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nvarying highp vec2 iTextureCoord;\n\nvoid main(void) {\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(vertexPosition, 1.0);\n  gl_Position.z += zOffset;\n  iTextureCoord = textureCoord;\n}\n\n"},function(e,t){e.exports="/* quadFeature Color fragment shader */\n\nvarying mediump vec3 iVertexColor;\nuniform mediump float opacity;\n\nvoid main(void) {\n  gl_FragColor = vec4(iVertexColor, opacity);\n}\n"},function(e,t){e.exports="/* quadFeature Color vertex shader */\n\nattribute vec3 vertexPosition;\nuniform float zOffset;\nuniform vec3 vertexColor;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nvarying mediump vec3 iVertexColor;\n\nvoid main(void) {\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(vertexPosition, 1.0);\n  gl_Position.z += zOffset;\n  iVertexColor = vertexColor;\n}\n\n"},function(e,t,n){"use strict";var r=n(2).registerLayerAdjustment;var i=n(106);var a=function e(){"use strict";var t=n(11);var r=this,a=this._init,o=this._exit,s=this._update,u=this.visible,l=this.zIndex,c,f=0,d=[];this._drawTile=function(e){if(!c){return}var t=r._tileBounds(e),n=e.index.level||0,a=r._tileOffset(n),o=r.tileCropFromBounds(e),s={},u,l,p=r.renderer().contextRenderer().m_depthBits,h=0;if(o){s.crop={x:o.x/r._options.tileWidth,y:o.y/r._options.tileHeight}}s.ul=r.fromLocal(r.fromLevel({x:t.left-a.x,y:t.top-a.y},n),0);s.ll=r.fromLocal(r.fromLevel({x:t.left-a.x,y:t.bottom-a.y},n),0);s.ur=r.fromLocal(r.fromLevel({x:t.right-a.x,y:t.top-a.y},n),0);s.lr=r.fromLocal(r.fromLevel({x:t.right-a.x,y:t.bottom-a.y},n),0);s.ul.z=s.ll.z=s.ur.z=s.lr.z=h;u=r._options.keepLower?r._options.maxLevel-n+1:1;l=r.map().listSceneObjects().filter(function(e){return e instanceof i});l=l.slice(l.indexOf(r)+1);l.forEach(function(e){u+=e._options.keepLower?e._options.maxLevel-e._options.minLevel+1:1});s.zOffset=u*Math.pow(2,-p)*i._zOffsetMultiple;f+=1;s.id=f;e.quadId=s.id;s.image=e.image;d.push(s);c.data(d);c._update();r.draw()};this._remove=function(e){if(e.quadId!==undefined&&c){for(var t=0;t<d.length;t+=1){if(d[t].id===e.quadId){d.splice(t,1);break}}c.data(d);c._update();r.draw()}};this.visible=function(e){if(e===undefined){return u()}if(r.visible()!==e){u(e);if(c){c.visible(c.visible(undefined,true),true)}}return r};this.zIndex=function(e,t){if(e!==undefined){r._clearQuads()}return l.apply(r,arguments)};this._clearQuads=function(e){if(e&&(!e.layer||!(e.layer instanceof i))){return}r.clear();if(c){c.modified()}if(e){r.draw()}};this._update=function(e){s.call(r,e);if(c){c._update()}return r};this._cleanup=function(){var e;if(r.cache&&r.cache._cache){for(var t in r.cache._cache){e=r.cache._cache[t];if(e._image&&e._image._texture){delete e._image._texture}}r.cache.clear()}r.clear()};this._exit=function(){var e=r.map();e.geoOff(t.layerAdd,r._clearQuads);e.geoOff(t.layerRemove,r._clearQuads);r._cleanup();r.deleteFeature(c);c=null;d=[];o.apply(r,arguments)};this._init=function(){a.apply(r,arguments);c=r.createFeature("quad",{previewColor:r._options.previewColor,previewImage:r._options.previewImage});c.geoTrigger=undefined;c.gcs(r._options.gcs||r.map().gcs());c.data(d);c._update();var e=r.map();e.geoOn(t.layerAdd,r._clearQuads);e.geoOn(t.layerRemove,r._clearQuads);r.geoOn(t.unhidden,function(){r.map().scheduleAnimationFrame(function(){r._clearQuads();r.map().draw()})})};this._getSubLayer=function(){};this._updateSubLayers=undefined};i._zOffsetMultiple=2;r("webgl","tile",a);e.exports=a},function(e,t,n){"use strict";e.exports={colorLegendWidget:n(681),domWidget:n(267),legendWidget:n(684),scaleWidget:n(685),sliderWidget:n(688),svgWidget:n(107),uiLayer:n(259),widget:n(151)}},function(e,t,n){"use strict";var r=n(33).d3;var i=n(267);var a=n(1);var o=n(2).registerWidget;var s=n(5);var u=n(147);n(682);var l=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}i.call(this,t);var n=this,a=[],o=t.width||300,l=t.ticks||6,f=this._init;this._init=function(){f();var e=n.canvas();r.select(e).attr("class","color-legend-container");n.popup=r.select(e).append("div").attr("class","color-legend-popup");if(t.categories){n.categories(t.categories)}};this._draw=function(){r.select(n.canvas()).selectAll("div.geojs-color-legends").remove();if(!a.length){r.select(n.canvas()).style("display","none");return}else{r.select(n.canvas()).style("display","block")}var e=r.select(n.canvas()).append("div").attr("class","geojs-color-legends");var t=o;var i=20;a.forEach(function(r,a){var o=e.append("div").attr("class","geojs-color-legend");o.append("div").attr("class","geojs-title").text(r.name);var s=o.append("svg").attr({class:"svg",width:t,height:"40px",viewBox:-i+" 0 "+t+" 40"});if(r.type==="discrete"){n._drawDiscrete(s,t-2*i,r)}else if(r.type==="continuous"){n._drawContinous(s,t-2*i,r)}})};this.categories=function(e){if(e===undefined){return a}a=n._prepareCategories(e);n._draw();return n};this.addCategories=function(e){a=a.concat(n._prepareCategories(e));n._draw();return n};this.removeCategories=function(e){a=a.filter(function(t){return e.indexOf(t)===-1});n._draw();return n};this._prepareCategories=function(e){e.forEach(function(e){e.color=e.colors.map(function(e){return s.convertColorToHex(e,true)})});return e};this._drawDiscrete=function(e,t,i){if(["linear","log","sqrt","pow","quantile","ordinal"].indexOf(i.scale)===-1){throw new Error("unsupported scale")}var a,o,u,f,d,p,h;if(i.scale==="ordinal"){u=r.scale.ordinal().domain(i.domain).range(i.colors);n._renderDiscreteColors(e,i.domain,u,t,function(e){return e});f=r.scale.ordinal().domain(i.domain).rangeRoundBands([0,t]);d=r.svg.axis().scale(f).tickValues(function(){var e=Math.ceil(i.domain.length/l);return i.domain.filter(function(t,n){return n%e===0})})}else if(i.scale==="quantile"){a=[0,i.colors.length];p=s.range(0,i.colors.length-1);o=r.scale.quantile().domain(i.domain).range(p);u=r.scale.quantize().domain(a).range(i.colors);n._renderDiscreteColors(e,p,u,t,function(e){return o.invertExtent(e).join(" - ")});var g=[o.invertExtent(0)[0]];g=g.concat(p.map(function(e){return o.invertExtent(e)[1]}));f=r.scale.ordinal().domain(g).rangePoints([0,t]);d=v(f)}else if(["linear","log","sqrt","pow"].indexOf(i.scale)!==-1){a=[0,i.colors.length];o=r.scale[i.scale]().domain(i.domain).range(a).nice();u=r.scale.quantize().domain(a).range(i.colors);p=s.range(0,i.colors.length-1);var m=Math.max.apply(null,i.domain.map(function(e){return c(e)}));n._renderDiscreteColors(e,p,u,t,function(e){return n._popupFormatter(o.invert(e),m)+" - "+n._popupFormatter(o.invert(e+1),m)});h=p.slice();h.push(i.colors.length);f=r.scale.ordinal().domain(h.map(function(e){return o.invert(e)})).rangePoints([0,t]);d=v(f)}if(i.endAxisLabelOnly){d.tickValues([f.domain()[0],f.domain()[f.domain().length-1]])}n._renderAxis(e,d);function v(e){return r.svg.axis().scale(e).tickFormat(r.format(".2s")).tickValues(function(){var t=Math.ceil(e.domain().length/l);return e.domain().filter(function(e,n){return n%t===0})})}};this._renderDiscreteColors=function(e,t,r,i,a){e.selectAll("rect").data(t).enter().append("rect").attr("width",i/t.length).attr("height","20px").attr("fill",function(e){return r(e)}).attr("transform",function(e,n){return"translate("+n*i/t.length+" ,0)"}).on("mousemove",function(e){n._showPopup(a(e))}).on("mouseout",n._hidePopup)};this._drawContinous=function(e,t,i){var a,o,s;if(["linear","log","sqrt","pow"].indexOf(i.scale)===-1){throw new Error("unsupported scale")}var f=[0];for(s=1;s<i.domain.length-1;s++){f.push(t/(i.domain.length-1)*s)}f.push(t);a=r.scale[i.scale]().domain(i.domain).range(f).nice();if(i.scale==="log"&&i.base){a.base(i.base)}if(i.scale==="pow"&&i.exponent){a.exponent(i.exponent)}var d=u();var p=Math.max.apply(null,i.domain.map(function(e){return c(e)}));var h=e.append("defs").append("linearGradient").attr("id","gradient"+d);h.append("stop").attr("offset","0%").attr("stop-color",i.colors[0]);for(s=1;s<i.colors.length-1;s++){h.append("stop").attr("offset",(100/(i.colors.length-1)*s).toFixed(6)+"%").attr("stop-color",i.colors[s])}h.append("stop").attr("offset","100%").attr("stop-color",i.colors[i.colors.length-1]);e.append("rect").attr("fill","url(#gradient"+d+")").attr("width",t).attr("height","20px").on("mousemove",function(){var e=a.invert(r.mouse(this)[0]);var t=n._popupFormatter(e,p);n._showPopup(t)}).on("mouseout",n._hidePopup);o=r.svg.axis().scale(a).ticks(l,".2s");if(i.endAxisLabelOnly){o.tickValues([i.domain[0],i.domain[i.domain.length-1]])}n._renderAxis(e,o)};this._renderAxis=function(e,t){e.append("g").attr("class","axis x").attr("transform","translate(0, 20)").call(function(e){e.call(t)})};this._popupFormatter=function(e,t){e=parseFloat(e.toFixed(8));t=Math.min(t,c(e));t=Math.min(t,Math.max(3,7-Math.trunc(e).toString().length));return r.format("."+t+"f")(e)};this._showPopup=function(e){var t=r.mouse(n.canvas());n.popup.text(e);var i=n.canvas().clientWidth;var a=n.popup[0][0].clientWidth;n.popup.style({left:t[0]-(t[0]+a-i>-10?a:0)+"px",top:t[1]-22+"px"}).transition().duration(200).style("opacity",1)};this._hidePopup=function(){n.popup.transition().duration(200).style("opacity",0)};return this};function c(e){if(!isFinite(e))return 0;var t=1,n=0;while(Math.round(e*t)/t!==e){if(!isFinite(e*t)){return 0}t*=10;n++}return n}a(l,i);o("dom","colorLegend",l);e.exports=l},function(e,t,n){var r=n(683);if(typeof r==="string")r=[[e.i,r,""]];var i;var a;var o={hmr:true};o.transform=i;o.insertInto=undefined;var s=n(136)(r,o);if(r.locals)e.exports=r.locals;if(false){e.hot.accept("!!../../node_modules/css-loader/index.js!../../node_modules/stylus-loader/index.js!./colorLegendWidget.styl",function(){var t=require("!!../../node_modules/css-loader/index.js!../../node_modules/stylus-loader/index.js!./colorLegendWidget.styl");if(typeof t==="string")t=[[e.id,t,""]];var n=function(e,t){var n,r=0;for(n in e){if(!t||e[n]!==t[n])return false;r++}for(n in t)r--;return r===0}(r.locals,t.locals);if(!n)throw new Error("Aborting CSS HMR due to changed css-modules locals.");s(t)});e.hot.dispose(function(){s()})}},function(e,t,n){t=e.exports=n(135)(false);t.push([e.i,".color-legend-container {\n  display: none;\n  padding: 10px;\n  border: 1.5px solid #000;\n  border-radius: 3px;\n  transition: 250ms background linear;\n  background-color: rgba(255,255,255,0.75);\n}\n.color-legend-container:hover {\n  background-color: #fff;\n}\n.color-legend-container .geojs-color-legends .geojs-color-legend {\n  margin-bottom: 10px;\n}\n.color-legend-container .geojs-color-legends .geojs-color-legend .geojs-title {\n  text-align: center;\n}\n.color-legend-container .geojs-color-legends .geojs-color-legend svg.svg {\n  display: block;\n}\n.color-legend-container .geojs-color-legends .geojs-color-legend svg.svg .axis.x path.domain,\n.color-legend-container .geojs-color-legends .geojs-color-legend svg.svg .axis.x line {\n  fill: none;\n  stroke: #000;\n  stroke-width: 0.7;\n}\n.color-legend-container .geojs-color-legends .geojs-color-legend svg.svg .axis.x text {\n  font-size: 12px;\n}\n.color-legend-container .color-legend-popup {\n  position: absolute;\n  background: #fff;\n  height: 22px;\n  font-size: 14px;\n  border: solid 1px #000;\n  padding: 0 5px;\n  pointer-events: none;\n  white-space: nowrap;\n  z-index: 100000;\n  opacity: 0;\n}\n",""])},function(e,t,n){"use strict";var r=n(107);var i=n(1);var a=n(2).registerWidget;var o=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}r.call(this,t);var i=n(33).d3;var a=n(11);var o=this,s=[],u=null,l=null,c=null,f=20,d=12;this.categories=function(e){if(e===undefined){return s.slice()}s=e.slice().map(function(e){if(e.type==="line"){e.style.fill=false;e.style.stroke=true}return e});o.draw();return o};this.size=function(){var e=1,t;var n=i.select(o.canvas()).append("text").style("opacity",1e-6);s.forEach(function(t){n.text(t.name);e=Math.max(e,n.node().getBBox().width)});n.remove();t=f*(s.length+1);return{width:e+50,height:t}};this.draw=function(){o._init();function e(e){e.style("fill",function(e){if(e.style.fill||e.style.fill===undefined){return e.style.fillColor}else{return"none"}}).style("fill-opacity",function(e){if(e.style.fillOpacity===undefined){return 1}return e.style.fillOpacity}).style("stroke",function(e){if(e.style.stroke||e.style.stroke===undefined){return e.style.strokeColor}else{return"none"}}).style("stroke-opacity",function(e){if(e.style.strokeOpacity===undefined){return 1}return e.style.strokeOpacity}).style("stroke-width",function(e){if(e.style.strokeWidth===undefined){return 1.5}return e.style.strokeWidth})}c.attr("height",o.size().height+2*d).style("display",null);var t=o._scale();var n=l.selectAll("g.geo-label").data(s,function(e){return e.name});var r=n.enter().append("g").attr("class","geo-label").attr("transform",function(e,n){return"translate(0,"+t.y(n)+")"});e(r.filter(function(e){return e.type!=="point"&&e.type!=="line"}).append("rect").attr("x",0).attr("y",-6).attr("rx",5).attr("ry",5).attr("width",40).attr("height",12));e(r.filter(function(e){return e.type==="point"}).append("circle").attr("cx",20).attr("cy",0).attr("r",6));e(r.filter(function(e){return e.type==="line"}).append("line").attr("x1",0).attr("y1",0).attr("x2",40).attr("y2",0));r.append("text").attr("x","50px").attr("y",0).attr("dy","0.3em").text(function(e){return e.name});o.reposition();return o};this._scale=function(){return{x:i.scale.linear().domain([0,1]).range([0,o.size().width]),y:i.scale.linear().domain([0,s.length-1]).range([d/2,o.size().height-d/2])}};this._init=function(){if(!u){o._createCanvas();o._appendCanvasToParent()}var e=o.size().width+2*d+4,t=o.size().height+2*d+4;if(u){u.remove()}i.select(o.canvas()).attr("width",e).attr("height",t);u=i.select(o.canvas()).append("g");l=u.append("g").attr("transform","translate("+[d+2,d+2]+")");c=l.append("rect").attr("x",-d).attr("y",-d).attr("width",e-4).attr("height",t-4).attr("rx",3).attr("ry",3).style({stroke:"black","stroke-width":"1.5px",fill:"white","fill-opacity":.75,display:"none"});l.on("mousedown",function(){i.event.stopPropagation()});l.on("mouseover",function(){c.transition().duration(250).style("fill-opacity",1)});l.on("mouseout",function(){c.transition().duration(250).style("fill-opacity",.75)});o.reposition()};this.geoOn(a.resize,function(){o.draw()})};i(o,r);a("dom","legend",o);e.exports=o},function(e,t,n){"use strict";var r=n(3);var i=n(1);var a=n(107);var o=n(2).registerWidget;n(686);var s=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}a.call(this,t);var i=n(11);var o=n(17);var s=n(5);var u=n(33).d3;var l=this,c=this._exit,f=r.extend({},{scale:1,maxWidth:200,maxHeight:t.orientation==="left"||t.orientation==="right"?200:20,orientation:"bottom",strokeWidth:2,tickLength:10,units:"si",distance:function e(t,n,r){if(r==="+proj=longlat +axis=enu"){return Math.sqrt(s.distance2dSquared(t,n))}return o.sphericalDistance(t,n,r)}},t);this._init=function(){l._createCanvas();l._appendCanvasToParent();l.reposition();u.select(l.canvas()).attr({width:f.maxWidth,height:f.maxHeight});l.geoOn(i.pan,l._update);l._render();return l};this._exit=function(){l.geoOff(i.pan,l._update);c()};this._vertical=function(){return f.orientation==="left"||f.orientation==="right"};this._scaleValue=function(t,n,r){r=e.unitsTable[r]||r||e.unitsTable[f.units]||f.units;var i=[{multiple:1,digits:1},{multiple:1.5,digits:2},{multiple:2,digits:1},{multiple:3,digits:1},{multiple:5,digits:1},{multiple:8,digits:1}];var a=r[0],o,s,u;r.forEach(function(e){if(t>=e.scale*(e.minimum||1)){a=e}});s=Math.floor(Math.log(t/a.scale)/Math.log(a.basis||10));i=a.multiples||i;i.forEach(function(e){var n=a.scale*e.multiple*Math.pow(10,s);if(n<=t){o=e;u=n}});return{html:(o.multiple*Math.pow(10,s)).toFixed(Math.max(0,-s+o.digits-1))+" "+a.unit,value:u,pixels:u/t*n,power:s,multiple:o,unitRecord:a,originalValue:t,originalPixels:n}};this._render=function(){var e=u.select(l.canvas()),t=l.layer().map(),n=f.maxWidth,i=f.maxHeight,a=f.strokeWidth,o=a*.5,s=f.tickLength,c=l._vertical(),d,p,h,g,m,v;d=(c?f.maxHeight:f.maxWidth)-a;p=r(e[0][0]).offset();p={x:p.left+(f.orientation==="left"?n-o:o),y:p.top+(f.orientation==="top"?i-o:o)};h={x:p.x+(c?0:d),y:p.y+(c?d:0)};g=f.distance(t.displayToGcs(p,null),t.displayToGcs(h,null),t.gcs())*f.scale;if(g<=0||!isFinite(g)){console.warn("The distance calculated for the scale is invalid: "+g);return}m=l._scaleValue(g,d);if(c){i=m.pixels+a}else{n=m.pixels+a}e.attr({width:n,height:i});if(e.select("polyline").empty()){e.append("polyline").classed("geojs-scale-widget-bar",true).attr({fill:"none","stroke-width":a})}if(e.select("text").empty()){e.append("text").classed("geojs-scale-widget-text",true)}switch(f.orientation){case"bottom":v=[[o,s],[o,o],[n-o,o],[n-o,s]];e.select("text").attr({x:n/2,y:a*2,"text-anchor":"middle","dominant-baseline":"hanging"});break;case"top":v=[[o,i-s],[o,i-o],[n-o,i-o],[n-o,i-s]];e.select("text").attr({x:n/2,y:i-a*2,"text-anchor":"middle","dominant-baseline":"alphabetic"});break;case"left":v=[[n-s,o],[n-o,o],[n-o,i-o],[n-s,i-o]];e.select("text").attr({x:n-a*2,y:i/2,"text-anchor":"end","dominant-baseline":"middle"});break;case"right":v=[[s,o],[o,o],[o,i-o],[s,i-o]];e.select("text").attr({x:a*2,y:i/2,"text-anchor":"start","dominant-baseline":"middle"});break}e.select("polyline").attr("points",v.map(function(e){return e.join(",")}).join(" "));e.select("text").html(m.html)};this._update=function(){l._render()};this.options=function(e,t){if(e===undefined){var n=r.extend({},f);n.position=l.position(undefined,true);return n}if(typeof e==="string"&&t===undefined){return e==="position"?l.position(undefined,true):f[e]}if(t===undefined){f=r.extend(true,f,e)}else{f[e]=t}if(e.position||e==="position"){l.position(e.position||t)}l._render();return l}};i(s,a);s.unitsTable={si:[{unit:"nm",scale:1e-9},{unit:"μm",scale:1e-6},{unit:"mm",scale:.001},{unit:"m",scale:1},{unit:"km",scale:1e3}],miles:[{unit:"in",scale:.0254},{unit:"in",scale:.0254,basis:12,multiples:[{multiple:1,digits:1},{multiple:1.5,digits:2},{multiple:2,digits:1},{multiple:3,digits:1},{multiple:6,digits:1},{multiple:9,digits:1}]},{unit:"ft",scale:.3048},{unit:"mi",scale:1609.344}],decmiles:[{unit:"mi",scale:1609.344}]};s.areaUnitsTable={si:[{unit:"nm²",scale:1e-18},{unit:"μm²",scale:1e-12},{unit:"mm²",scale:1e-6},{unit:"m²",scale:1},{unit:"km²",scale:1e6}],hectares:[{unit:"ha",scale:1e4}],decmiles:[{unit:"mi²",scale:1609.344*1609.344}],miles:[{unit:"in²",scale:.0254*.0254},{unit:"ft²",scale:.3048*.3048},{unit:"mi²",scale:1609.344*1609.344}],acres:[{unit:"pl",scale:.3048*.3048*16.5*16.5},{unit:"rd",scale:1609.344*1609.344/640/4},{unit:"ac",scale:1609.344*1609.344/640}]};s.formatUnit=function(e,t,n,r){if(e===undefined||e===null){return}if(!Array.isArray(t)){n=n||s.unitsTable;if(!n||!n[t||"si"]){return}t=n[t||"si"]}var i=void 0;for(i=0;i<t.length-1;i+=1){if(e<t[i+1].scale){break}}t=t[i];e/=t.scale;r=Math.max(0,-Math.ceil(Math.log10(e))+(r===undefined||r<0?3:r));if(r>10){return}var a=e.toFixed(r);if(r){while(a.substr(a.length-1)==="0"){a=a.substr(0,a.length-1)}if(a.substr(a.length-1)==="."){a=a.substr(0,a.length-1)}}return a+" "+t.unit};o("dom","scale",s);e.exports=s},function(e,t,n){var r=n(687);if(typeof r==="string")r=[[e.i,r,""]];var i;var a;var o={hmr:true};o.transform=i;o.insertInto=undefined;var s=n(136)(r,o);if(r.locals)e.exports=r.locals;if(false){e.hot.accept("!!../../node_modules/css-loader/index.js!../../node_modules/stylus-loader/index.js!./scaleWidget.styl",function(){var t=require("!!../../node_modules/css-loader/index.js!../../node_modules/stylus-loader/index.js!./scaleWidget.styl");if(typeof t==="string")t=[[e.id,t,""]];var n=function(e,t){var n,r=0;for(n in e){if(!t||e[n]!==t[n])return false;r++}for(n in t)r--;return r===0}(r.locals,t.locals);if(!n)throw new Error("Aborting CSS HMR due to changed css-modules locals.");s(t)});e.hot.dispose(function(){s()})}},function(e,t,n){t=e.exports=n(135)(false);t.push([e.i,".geojs-scale-widget-bar {\n  stroke: #000;\n}\n.geojs-scale-widget-text {\n  font-weight: bold;\n  font-size: 16px;\n  font-family: serif;\n}\n",""])},function(e,t,n){"use strict";var r=n(107);var i=n(1);var a=n(2).registerWidget;var o=function e(t){"use strict";if(!(this instanceof e)){return new e(t)}r.call(this,t);var i=n(33).d3;var a=n(11);var o=this,s=this._exit,u,l,c,f,d,p=t.width||20,h=t.height||160,g=t.width?t.width*.5:10,m,v,y,b,M=100;m="M512 81.92c-237.568 0-430.080 192.614-430.080 430.080 0 237.568 192.563 430.080 430.080 430.080s430.080-192.563 430.080-430.080c0-237.517-192.563-430.080-430.080-430.080zM564.326 564.326v206.182h-104.653v-206.182h-206.234v-104.653h206.182v-206.234h104.704v206.182h206.182v104.704h-206.182z";v="M512 81.92c-237.568 0-430.080 192.614-430.080 430.080 0 237.568 192.563 430.080 430.080 430.080s430.080-192.563 430.080-430.080c0-237.517-192.563-430.080-430.080-430.080zM770.56 459.674v104.704h-517.12v-104.704h517.12z";b={white:"#f4f4f4",black:"#505050"};function x(e,t,n,r,i){var a=t.append("g");var o=i/1024;a.append("g").append("g").attr("transform","translate("+n+","+r+") scale("+o+") translate(-512,-512)").append("path").attr("d",e).attr("class","geo-glyphicon");return a}this.size=function(){return{width:p,height:h}};this._init=function(){o._createCanvas();o._appendCanvasToParent();o.reposition();var e=i.select(o.canvas()),t=o.layer().map();e.attr("width",p).attr("height",h);u=i.scale.linear().domain([-4,4]).range([0,p]);l=i.scale.linear().domain([0,1]).range([p*1.5,h-p*1.5]);e=e.append("g").classed("geo-ui-slider",true);y=e;c=e.append("g");c.append("circle").datum({fill:"white",stroke:null}).classed("geo-zoom-in",true).attr("cx",u(0)).attr("cy",l(0)-p+2).attr("r",(p-2)/2).style({cursor:"pointer"}).on("click",function(){var e=t.zoom();t.transition({zoom:e+1,ease:i.ease("cubic-in-out"),duration:500})}).on("mousedown",function(){i.event.stopPropagation()});x(m,c,u(0),l(0)-p+2,p+4).style("cursor","pointer").style("pointer-events","none").select("path").datum({fill:"black",stroke:null});f=e.append("g");f.append("circle").datum({fill:"white",stroke:null}).classed("geo-zoom-out",true).attr("cx",u(0)).attr("cy",l(1)+p-2).attr("r",(p-2)/2).style({cursor:"pointer"}).on("click",function(){var e=t.zoom();t.transition({zoom:e-1,ease:i.ease("cubic-in-out"),duration:500})}).on("mousedown",function(){i.event.stopPropagation()});x(v,f,u(0),l(1)+p-2,p+4).style("cursor","pointer").style("pointer-events","none").select("path").datum({fill:"black",stroke:null});function n(n,r){var a=l.invert(i.mouse(e.node())[1]),s=t.zoomRange();a=(1-a)*(s.max-s.min)+s.min;if(r){t.transition({zoom:a,ease:i.ease("cubic-in-out"),duration:500,done:o._update()})}else{t.zoom(a);o._update()}n.stopPropagation()}e.append("rect").datum({fill:"white",stroke:"black"}).classed("geo-zoom-track",true).attr("x",u(0)-p/6).attr("y",l(0)).attr("rx",p/10).attr("ry",p/10).attr("width",p/3).attr("height",h-p*3).style({cursor:"pointer"}).on("click",function(){n(i.event,true)});d=e.append("rect").datum({fill:"black",stroke:null}).classed("geo-zoom-nub",true).attr("x",u(-4)).attr("y",l(.5)-g/2).attr("rx",3).attr("ry",3).attr("width",p).attr("height",g).style({cursor:"pointer"}).on("mousedown",function(){i.select(document).on("mousemove.geo.slider",function(){n(i.event)});i.select(document).on("mouseup.geo.slider",function(){n(i.event);i.select(document).on(".geo.slider",null)});i.event.stopPropagation()});function r(){i.select(this).attr("filter","url(#geo-highlight)");y.selectAll("rect,path,circle").transition().duration(M).style("fill",function(e){return e.fill||null}).style("stroke",function(e){return e.stroke||null})}function s(){i.select(this).attr("filter",null);y.selectAll("circle,rect,path").transition().duration(M).style("fill",function(e){return b[e.fill]||null}).style("stroke",function(e){return b[e.stroke]||null})}y.selectAll("*").on("mouseover",r).on("mouseout",s);o.geoOn(a.zoom,o._update);s();o._update();return o};this._exit=function(){o.geoOff(a.zoom,o._update);y.remove();s()};this._update=function(e){var t=o.layer().map(),n=t.zoomRange(),r=t.zoom(),a=i.scale.linear();e=e||{};r=e.value||r;a.domain([n.min,n.max]).range([1,0]).clamp(true);d.attr("y",l(a(r))-g/2)}};i(o,r);a("dom","slider",o);e.exports=o}])});
