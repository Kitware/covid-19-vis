<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="user-scalable=no">
  <link rel="icon" href="data:,">
  <title>
    COVID-19 US Visualizer
  </title>
  <script type="text/javascript" src="polybool.min.js"></script>
  <script type="text/javascript" src="geo.min.js"></script>
  <!-- d3 has to be after geojs, as geojs bundles an older version -->
  <script type="text/javascript" src="https://unpkg.com/d3@5.15.1/dist/d3.min.js"></script>
  <script type="text/javascript" src="https://unpkg.com/c3@0.7.15/c3.js"></script>
  <script type="text/javascript" src="https://unpkg.com/underscore@1.10.2/underscore-min.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/c3@0.7.15/c3.min.css" type="text/css"/>
  <link rel="stylesheet" href="main.css" type="text/css"/>
  <link href="https://fonts.googleapis.com/css2?family=Blinker:wght@300;400;600&display=swap" rel="stylesheet">
</head>
<body>
  <div id="map"></div>
  <div class="top-controls">
    <div id="disclaimer" class="control">
      <div class="panel">
        <button class="help" onclick="$('#help').toggleClass('hidden')">Info</button>
        <h1 class="title">COVID-19 Visualizer</h1>
        <span class="note">Markers are randomly placed in each county and DO NOT represent specific people or real locations.</span>
      </div>
    </div>
    <div id="timeline" class="control">
      <button onclick="playAction('play')">
        <span class="iconify" data-icon="mdi:play"></span>
      </button>
      <button onclick="playAction('step')">
        <span class="iconify" data-icon="mdi:step-forward"></span>
      </button>
      <button onclick="playAction('stop')">
        <span class="iconify" data-icon="mdi:stop"></span>
      </button>
      FPS <input id="speed" value="1" onchange="if(playing)playAction('play')" title="Maximum frames-per-second of playback, limited to browser performance"/>
      <input id="curtime" onchange="setTime()"/>
      <input id="scrubber" type="range" min="0" value="0" oninput="setTime('#scrubber', true)"></input>
      <input id="markers" type="checkbox" checked="true" onchange="dotLayer.visible($('#markers')[0].checked);updateMarkerStyle()"></input><label for="markers">Markers</label>
      <input id="county_confirmed" type="checkbox" onchange="countyLayer.features()[2].visible($('#county_confirmed')[0].checked).draw()"></input><label for="county_confirmed">Confirmed</label>
      <input id="county_deaths" type="checkbox" onchange="countyLayer.features()[3].visible($('#county_deaths')[0].checked).draw()"></input><label for="county_deaths">Deaths</label>
      <!--
      <input id="samples" type="checkbox" onchange="makeDots()"></input><label for="samples">Samples</label>
      <label for="sampling" title="There is one dot per this many people">Sampling</label> <input id="sampling" value="2500" title="2500" type="range" min="500" max="10000" step="500" onchange="makeDots();$('#sampling').attr('title', $('#sampling').val())"/>
      -->
    </div>
  </div>
  <div id="graphparent" class="control">
    <div class="panel no-pad">
      <ul class="radio-controls">
        <li>
          <input type="radio" name="mode" id="mode1" value="total"
          charttitle="Total Confirmed Cases and Deaths"
          onclick="changeMode(this)" checked>
          <label for="mode1">Total cases</label>
        </li>

        <li>
          <input type="radio" name="mode" id="mode3"
          charttitle="Logarithmic Total Confirmed Cases and Deaths"
          value="logtotal" onclick="changeMode(this)">
          <label for="mode3">Total cases (logarithm)</label>
        </li>

        <li>
          <input type="radio" name="mode" id="mode5"
          charttitle="Total Confirmed Cases and Deaths per Million People"
          value="percapitatotal" onclick="changeMode(this)">
          <label for="mode5">Total per capita</label>
        </li>

        <li>
          <input type="radio" name="mode" id="mode2"
          charttitle="Daily Confirmed Cases and Deaths"
          value="daily" onclick="changeMode(this)">
          <label for="mode2">Daily cases</label>
        </li>

        <!--
        <li>
          <input type="radio" name="mode" id="mode4"
          charttitle="Logarithmic Daily Confirmed Cases and Deaths"
          value="logdaily" onclick="changeMode(this)">
          <label for="mode4">Daily cases (logarithm)</label>
        </li>
        -->

        <li>
          <input type="radio" name="mode" id="mode6"
          charttitle="Daily Confirmed Cases and Deaths per Million People"
          value="percapitadaily" onclick="changeMode(this)">
          <label for="mode6">Daily per capita</label>
        </li>
      </ul>
    </div>
    <div id="graph"></div>
  </div>
  <div id="help" class="hidden">
    <div id="helpcontainer">
      <div><button onclick="$('#help').toggleClass('hidden')">Close</burron></div>
      <h1>COVID-19 US Visualizer</h1>
      <p>This shows confirmed cases and deaths, as reported by the <a href="https://github.com/CSSEGISandData/COVID-19">2019 Novel Coronavirus COVID-19 (2019-nCoV) Data Repository by Johns Hopkins CSSE</a>.</p>
      <p>The data is per county in the US.
        When showing markers, markers are distributed randomly through each county based on the number present.  These markers <b>do not represent actual people or locations</b>.</p>
      <h2>Modes</h2>
      <p><b>Markers</b>: One marker is drawn per confirmed case (orange) or death (black).  Markers are randomly distributed within the county for which they are reported.  These do not represent specific people or locations; distribution is only to provide relative densities of cases.</p>
      <p><b>Confirmed</b>: Each county is colored based on the number of confirmed cases per capita, with the county with the most extreme value being solid orange.</p>
      <p><b>Deaths</b>: Each county is colored based on the number of deaths per capita, with the county with the most extreme value being solid black.</p>
      <h2>Source Code</h2>
      <p>The source code is on <a href="https://github.com/Kitware/covid-19-vis">GitHub</a>.</p>
      <p>The map markers and choropleth use <a href="https://github.com/OpenGeoscience/geojs">GeoJS</a>.</p>
    </div>
  </div>
  <script type="text/javascript" src="main.js"></script>
  <script src="https://code.iconify.design/1/1.0.5/iconify.min.js"></script>
</body>
</html>
